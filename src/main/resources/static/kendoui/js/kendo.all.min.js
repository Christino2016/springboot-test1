(function(e){e["webfed"]=e["webfed"]||{};if(e["webfed"]["setPageData"])return;var t={};e["webfed"]["setPageData"]=function(e){t=$.extend({},t,e)};e["webfed"]["getPageData"]=function(e){return e?t&&t[e]:t}})(window);HTMLElement.prototype.pressKey=function(e){var t=document.createEvent("UIEvents");t.keyCode=e;t.initEvent("keydown",true,true);this.dispatchEvent(t)};(function(e,t){t("kendo.core",["jquery"],e)})(function(){var e={id:"core",name:"Core",category:"framework",description:"The core of the Kendo framework."};(function(_,m,Y){var Q=m.kendo=m.kendo||{cultures:{}},u=_.extend,c=_.each,b=_.isArray,e=_.proxy,r=_.noop,w=Math,t,n=m.JSON||{},f={},h=/%/,P=/\{(\d+)(:[^\}]+)?\}/g,z=/(\d+(?:\.?)\d*)px\s*(\d+(?:\.?)\d*)px\s*(\d+(?:\.?)\d*)px\s*(\d+)?/i,B=/^(\+|-?)\d+(\.?)\d*$/,g="function",k="string",y="number",x="object",C="null",S="boolean",p="undefined",L={},H={},v=[].slice,N=function(){var e,t,i,n,r,a,o=arguments[0]||{},s=1,l=arguments.length,d=false;if(typeof o==="boolean"){d=o;o=arguments[s]||{};s++}if(typeof o!=="object"&&!jQuery.isFunction(o)){o={}}if(s===l){o=this;s--}for(;s<l;s++){if((r=arguments[s])!=null){for(n in r){if(n=="filters"||n=="concat"||n==":"){continue}e=o[n];i=r[n];if(o===i){continue}if(d&&i&&(jQuery.isPlainObject(i)||(t=jQuery.isArray(i)))){if(t){t=false;a=e&&jQuery.isArray(e)?e:[]}else{a=e&&jQuery.isPlainObject(e)?e:{}}o[n]=N(d,a,i)}else if(i!==Y){o[n]=i}}}}return o};Q.version="2021.1.224".replace(/^\s+|\s+$/g,"");(function(e){e["ucas"]=e["ucas"]||{};if(e["ucas"]["setData"])return;var t={};e["ucas"]["setData"]=function(e){t=_.extend({},t,e)};e["ucas"]["getData"]=function(e){return e?t&&t[e]:t}})(Q);function i(){}i.extend=function(e){var t=function(){},i,n=this,r=e&&e.init?e.init:function(){n.apply(this,arguments)},a;t.prototype=n.prototype;a=r.fn=r.prototype=new t;for(i in e){if(e[i]!=null&&e[i].constructor===Object){a[i]=u(true,{},t.prototype[i],e[i])}else{a[i]=e[i]}}a.constructor=r;r.extend=n.extend;return r};i.prototype._initOptions=function(e){this.options=o({},this.options,e)};var T=Q.isFunction=function(e){return typeof e==="function"};var O=function(){this._defaultPrevented=true};var V=function(){return this._defaultPrevented===true};var a=i.extend({init:function(){this._events={}},bind:function(e,t,i){var n=this,r,a=typeof e===k?[e]:e,o,s,l,d=typeof t===g,u;if(t===Y){for(r in e){n.bind(r,e[r])}return n}for(r=0,o=a.length;r<o;r++){e=a[r];l=d?t:t[e];if(l){if(i){s=l;l=function(){n.unbind(e,l);s.apply(n,arguments)};l.original=s}u=n._events[e]=n._events[e]||[];u.push(l)}}return n},one:function(e,t){return this.bind(e,t,true)},first:function(e,t){var i=this,n,r=typeof e===k?[e]:e,a,o,s=typeof t===g,l;for(n=0,a=r.length;n<a;n++){e=r[n];o=s?t:t[e];if(o){l=i._events[e]=i._events[e]||[];l.unshift(o)}}return i},trigger:function(e,t){var i=this,n=i._events[e],r,a;if(n){t=t||{};t.sender=i;t._defaultPrevented=false;t.preventDefault=O;t.isDefaultPrevented=V;n=n.slice();for(r=0,a=n.length;r<a;r++){n[r].call(i,t)}return t._defaultPrevented===true}return false},unbind:function(e,t){var i=this,n=i._events[e],r;if(e===Y){i._events={}}else if(n){if(t){for(r=n.length-1;r>=0;r--){if(n[r]===t||n[r].original===t){n.splice(r,1)}}}else{i._events[e]=[]}}return i}});function W(e,t){if(t){return"'"+e.split("'").join("\\'").split('\\"').join('\\\\\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")+"'"}else{var i=e.charAt(0),n=e.substring(1);if(i==="="){return"+("+n+")+"}else if(i===":"){return"+$kendoHtmlEncode("+n+")+"}else{return";"+e+";$kendoOutput+="}}}var U=/^\w+/,j=/\$\{([^}]*)\}/g,G=/\\\}/g,q=/__CURLY__/g,$=/\\#/g,K=/__SHARP__/g,X=["","0","00","000","0000"];t={paramName:"data",useWithBlock:true,render:function(e,t){var i,n,r="";for(i=0,n=t.length;i<n;i++){r+=e(t[i])}return r},compile:function(t,e){var i=u({},this,e),n=i.paramName,r=n.match(U)[0],a=i.useWithBlock,o="var $kendoOutput, $kendoHtmlEncode = kendo.htmlEncode;",s,l,d;if(T(t)){return t}o+=a?"with("+n+"){":"";o+="$kendoOutput=";l=t.replace(G,"__CURLY__").replace(j,"#=$kendoHtmlEncode($1)#").replace(q,"}").replace($,"__SHARP__").split("#");for(d=0;d<l.length;d++){o+=W(l[d],d%2===0)}o+=a?";}":";";o+="return $kendoOutput;";o=o.replace(K,"#");try{s=new Function(r,o);s._slotCount=Math.floor(l.length/2);return s}catch(e){throw new Error(Q.format("Invalid template:'{0}' Generated code:'{1}'",t,o))}}};function d(e,t,i){e=e+"";t=t||2;i=t-e.length;if(i){return X[t].substring(0,i)+e}return e}(function(){var t=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,u,c,i={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},f,h={}.toString;if(typeof Date.prototype.toJSON!==g){Date.prototype.toJSON=function(){var e=this;return isFinite(e.valueOf())?d(e.getUTCFullYear(),4)+"-"+d(e.getUTCMonth()+1)+"-"+d(e.getUTCDate())+"T"+d(e.getUTCHours())+":"+d(e.getUTCMinutes())+":"+d(e.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}function p(e){t.lastIndex=0;return t.test(e)?'"'+e.replace(t,function(e){var t=i[e];return typeof t===k?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function v(e,t){var i,n,r,a,o=u,s,l=t[e],d;if(l&&typeof l===x&&typeof l.toJSON===g){l=l.toJSON(e)}if(typeof f===g){l=f.call(t,e,l)}d=typeof l;if(d===k){return p(l)}else if(d===y){return isFinite(l)?String(l):C}else if(d===S||d===C){return String(l)}else if(d===x){if(!l){return C}u+=c;s=[];if(h.apply(l)==="[object Array]"){a=l.length;for(i=0;i<a;i++){s[i]=v(i,l)||C}r=s.length===0?"[]":u?"[\n"+u+s.join(",\n"+u)+"\n"+o+"]":"["+s.join(",")+"]";u=o;return r}if(f&&typeof f===x){a=f.length;for(i=0;i<a;i++){if(typeof f[i]===k){n=f[i];r=v(n,l);if(r){s.push(p(n)+(u?": ":":")+r)}}}}else{for(n in l){if(Object.hasOwnProperty.call(l,n)){r=v(n,l);if(r){s.push(p(n)+(u?": ":":")+r)}}}}r=s.length===0?"{}":u?"{\n"+u+s.join(",\n"+u)+"\n"+o+"}":"{"+s.join(",")+"}";u=o;return r}}if(typeof n.stringify!==g){n.stringify=function(e,t,i){var n;u="";c="";if(typeof i===y){for(n=0;n<i;n+=1){c+=" "}}else if(typeof i===k){c=i}f=t;if(t&&typeof t!==g&&(typeof t!==x||typeof t.length!==y)){throw new Error("JSON.stringify")}return v("",{"":e})}}})();(function(){var i=/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|"[^"]*"|'[^']*'/g,L=/^(n|c|p|e)(\d*)$/i,H=/(\\.)|(['][^']*[']?)|(["][^"]*["]?)/g,N=/\,/g,O="",V=".",W=",",U="#",j="0",G="??",n="en-US",r={}.toString;Q.cultures["en-US"]={name:n,numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSize:[3],percent:{pattern:["-n %","n %"],decimals:2,",":",",".":".",groupSize:[3],symbol:"%"},currency:{name:"US Dollar",abbr:"USD",pattern:["($n)","$n"],decimals:2,",":",",".":".",groupSize:[3],symbol:"$"}},calendars:{standard:{days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December"],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},AM:["AM","am","AM"],PM:["PM","pm","PM"],patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",F:"dddd, MMMM dd, yyyy h:mm:ss tt",g:"M/d/yyyy h:mm tt",G:"M/d/yyyy h:mm:ss tt",m:"MMMM dd",M:"MMMM dd",s:"yyyy'-'MM'-'ddTHH':'mm':'ss",t:"h:mm tt",T:"h:mm:ss tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"MMMM, yyyy",Y:"MMMM, yyyy"},"/":"/",":":":",firstDay:0,twoDigitYearMax:2029}}};function a(e){if(e){if(e.numberFormat){return e}if(typeof e===k){var t=Q.cultures;return t[e]||t[e.split("-")[0]]||null}return null}return null}function q(e){if(e){e=a(e)}return e||Q.cultures.current}Q.culture=function(e){var t=Q.cultures,i;if(e!==Y){i=a(e)||t[n];i.calendar=i.calendars.standard;t.current=i}else{return t.current}};Q.findCulture=a;Q.getCulture=q;Q.culture(n);function o(r,e,t){t=q(t);var a=t.calendars.standard,o=a.days,s=a.months;e=a.patterns[e]||e;return e.replace(i,function(e){var t;var i;var n;if(e==="d"){i=r.getDate()}else if(e==="dd"){i=d(r.getDate())}else if(e==="ddd"){i=o.namesAbbr[r.getDay()]}else if(e==="dddd"){i=o.names[r.getDay()]}else if(e==="M"){i=r.getMonth()+1}else if(e==="MM"){i=d(r.getMonth()+1)}else if(e==="MMM"){i=s.namesAbbr[r.getMonth()]}else if(e==="MMMM"){i=s.names[r.getMonth()]}else if(e==="yy"){i=d(r.getFullYear()%100)}else if(e==="yyyy"){i=d(r.getFullYear(),4)}else if(e==="h"){i=r.getHours()%12||12}else if(e==="hh"){i=d(r.getHours()%12||12)}else if(e==="H"){i=r.getHours()}else if(e==="HH"){i=d(r.getHours())}else if(e==="m"){i=r.getMinutes()}else if(e==="mm"){i=d(r.getMinutes())}else if(e==="s"){i=r.getSeconds()}else if(e==="ss"){i=d(r.getSeconds())}else if(e==="f"){i=w.floor(r.getMilliseconds()/100)}else if(e==="ff"){i=r.getMilliseconds();if(i>99){i=w.floor(i/10)}i=d(i)}else if(e==="fff"){i=d(r.getMilliseconds(),3)}else if(e==="tt"){i=r.getHours()<12?a.AM[0]:a.PM[0]}else if(e==="zzz"){t=r.getTimezoneOffset();n=t<0;i=w.abs(t/60).toString().split(".")[0];t=w.abs(t)-i*60;i=(n?"+":"-")+d(i);i+=":"+d(t)}else if(e==="zz"||e==="z"){i=r.getTimezoneOffset()/60;n=i<0;i=w.abs(i).toString().split(".")[0];i=(n?"+":"-")+(e==="zz"?d(i):i)}return i!==Y?i:e.slice(1,e.length-1)})}function s(e,t,i){i=q(i);var n=i.numberFormat,r=n[V],a=n.decimals,o=n.pattern[0],s=[],l,d,u,c,f,h=e<0,p,v,m,g,_=O,b=O,w,k,y,x,C,S,T,D,A,E,I,M,R,F=-1,P;if(e===Y){return O}if(!isFinite(e)){return e}if(!t){return i.name.length?e.toLocaleString():e.toString()}f=L.exec(t);if(f){t=f[1].toLowerCase();d=t==="c";u=t==="p";if(d||u){n=d?n.currency:n.percent;r=n[V];a=n.decimals;l=n.symbol;o=n.pattern[h?0:1]}c=f[2];if(c){a=+c}if(t==="e"){var B=c?e.toExponential(a):e.toExponential();return B.replace(V,n[V])}if(u){e*=100}e=K(e,a);h=e<0;e=e.split(V);p=e[0];v=e[1];if(h){p=p.substring(1)}b=$(p,0,p.length,n);if(v){b+=r+v}if(t==="n"&&!h){return b}e=O;for(w=0,k=o.length;w<k;w++){y=o.charAt(w);if(y==="n"){e+=b}else if(y==="$"||y==="%"){e+=l}else{e+=y}}return e}if(t.indexOf("'")>-1||t.indexOf('"')>-1||t.indexOf("\\")>-1){t=t.replace(H,function(e){var t=e.charAt(0).replace("\\",""),i=e.slice(1).replace(t,"");s.push(i);return G})}t=t.split(";");if(h&&t[1]){t=t[1];C=true}else if(e===0&&t[2]){t=t[2];if(t.indexOf(U)==-1&&t.indexOf(j)==-1){return t}}else{t=t[0]}I=t.indexOf("%");M=t.indexOf("$");u=I!=-1;d=M!=-1;if(u){e*=100}if(d&&t[M-1]==="\\"){t=t.split("\\").join("");d=false}if(d||u){n=d?n.currency:n.percent;r=n[V];a=n.decimals;l=n.symbol}x=t.indexOf(W)>-1;if(x){t=t.replace(N,O)}S=t.indexOf(V);k=t.length;if(S!=-1){v=e.toString().split("e");if(v[1]){v=K(e,Math.abs(v[1]))}else{v=v[0]}v=v.split(V)[1]||O;D=t.lastIndexOf(j)-S;T=t.lastIndexOf(U)-S;A=D>-1;E=T>-1;w=v.length;if(!A&&!E){t=t.substring(0,S)+t.substring(S+1);k=t.length;S=-1;w=0}if(A&&D>T){w=D}else if(T>D){if(E&&w>T){var z=K(e,T,h);while(z.charAt(z.length-1)===j&&T>0&&T>D){T--;z=K(e,T,h)}w=T}else if(A&&w<D){w=D}}}e=K(e,w,h);T=t.indexOf(U);R=D=t.indexOf(j);if(T==-1&&D!=-1){F=D}else if(T!=-1&&D==-1){F=T}else{F=T>D?D:T}T=t.lastIndexOf(U);D=t.lastIndexOf(j);if(T==-1&&D!=-1){P=D}else if(T!=-1&&D==-1){P=T}else{P=T>D?T:D}if(F==k){P=F}if(F!=-1){b=e.toString().split(V);p=b[0];v=b[1]||O;m=p.length;g=v.length;if(h&&e*-1>=0){h=false}e=t.substring(0,F);if(h&&!C){e+="-"}for(w=F;w<k;w++){y=t.charAt(w);if(S==-1){if(P-w<m){e+=p;break}}else{if(D!=-1&&D<w){_=O}if(S-w<=m&&S-w>-1){e+=p;w=S}if(S===w){e+=(v?r:O)+v;w+=P-S+1;continue}}if(y===j){e+=y;_=y}else if(y===U){e+=_}}if(x){e=$(e,F+(h&&!C?1:0),Math.max(P,m+F),n)}if(P>=F){e+=t.substring(P+1)}if(d||u){b=O;for(w=0,k=e.length;w<k;w++){y=e.charAt(w);b+=y==="$"||y==="%"?l:y}e=b}k=s.length;if(k){for(w=0;w<k;w++){e=e.replace(G,s[w])}}}return e}var $=function(e,t,i,n){var r=e.indexOf(n[V]);var a=n.groupSize.slice();var o=a.shift();var s,l;var d,u,c;var f;i=r!==-1?r:i+1;s=e.substring(t,i);l=s.length;if(l>=o){d=l;u=[];while(d>-1){c=s.substring(d-o,d);if(c){u.push(c)}d-=o;f=a.shift();o=f!==Y?f:o;if(o===0){if(d>0){u.push(s.substring(0,d))}break}}s=u.reverse().join(n[W]);e=e.substring(0,t)+s+e.substring(i)}return e};var K=function(e,t,i){t=t||0;e=e.toString().split("e");e=Math.round(+(e[0]+"e"+(e[1]?+e[1]+t:t)));if(i){e=-e}e=e.toString().split("e");e=+(e[0]+"e"+(e[1]?+e[1]-t:-t));return e.toFixed(Math.min(t,20))};var l=function(e,t,i){if(t){if(r.call(e)==="[object Date]"){return o(e,t,i)}else if(typeof e===y){return s(e,t,i)}}return e!==Y?e:""};Q.format=function(e){var r=arguments;return e.replace(P,function(e,t,i){var n=r[parseInt(t,10)+1];return l(n,i?i.substring(1):"")})};Q._extractFormat=function(e){if(e.slice(0,3)==="{0:"){e=e.slice(3,e.length-1)}return e};Q._activeElement=function(){try{return document.activeElement}catch(e){return document.documentElement.activeElement}};Q._round=K;Q._outerWidth=function(e,t){return _(e).outerWidth(t||false)||0};Q._outerHeight=function(e,t){return _(e).outerHeight(t||false)||0};Q.toString=l})();(function(){var c=/\u00A0/g,f=/[eE][\-+]?[0-9]+/,z=/[+|\-]\d{1,2}/,B=/[+|\-]\d{1,2}:?\d{2}/,l=/^\/Date\((.*?)\)\/$/,d=/[+-]\d*/,u=[[],["G","g","F"],["D","d","y","m","T","t"]],h=[["yyyy-MM-ddTHH:mm:ss.fffffffzzz","yyyy-MM-ddTHH:mm:ss.fffffff","yyyy-MM-ddTHH:mm:ss.fffzzz","yyyy-MM-ddTHH:mm:ss.fff","ddd MMM dd yyyy HH:mm:ss","yyyy-MM-ddTHH:mm:sszzz","yyyy-MM-ddTHH:mmzzz","yyyy-MM-ddTHH:mmzz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-dd HH:mm:ss","yyyy/MM/dd HH:mm:ss"],["yyyy-MM-ddTHH:mm","yyyy-MM-dd HH:mm","yyyy/MM/dd HH:mm"],["yyyy/MM/dd","yyyy-MM-dd","HH:mm:ss","HH:mm"]],L={2:/^\d{1,2}/,3:/^\d{1,3}/,4:/^\d{4}/},p={}.toString;function H(e,t,i){return!(e>=t&&e<=i)}function t(e){return e.charAt(0)}function N(e){return _.map(e,t)}function O(e,t){if(!t&&e.getHours()===23){e.setHours(e.getHours()+2)}}function n(e){var t=0,i=e.length,n=[];for(;t<i;t++){n[t]=(e[t]+"").toLowerCase()}return n}function V(e){var t={},i;for(i in e){t[i]=n(e[i])}return t}function v(d,i,e,t){if(!d){return null}var n=function(e){var t=0;while(i[m]===e){t++;m++}if(t>0){m-=1}return t},r=function(e){var t=L[e]||new RegExp("^\\d{1,"+e+"}"),i=d.substr(g,e).match(t);if(i){i=i[0];g+=i.length;return parseInt(i,10)}return null},a=function(e,t){var i=0,n=e.length,r,a,o=0,s=0,l;for(;i<n;i++){r=e[i];a=r.length;l=d.substr(g,a);if(t){l=l.toLowerCase()}if(l==r&&a>o){o=a;s=i}}if(o){g+=o;return s+1}return null},o=function(){var e=false;if(d.charAt(g)===i[m]){g++;e=true}return e},s=e.calendars.standard,l=null,u=null,c=null,f=null,h=null,p=null,v=null,m=0,g=0,_=false,b=new Date,w=s.twoDigitYearMax||2029,k=b.getFullYear(),y,x,C,S,T,D,A,E,I,M,R,F,P;if(!i){i="d"}S=s.patterns[i];if(S){i=S}i=i.split("");C=i.length;for(;m<C;m++){y=i[m];if(_){if(y==="'"){_=false}else{o()}}else{if(y==="d"){x=n("d");if(!s._lowerDays){s._lowerDays=V(s.days)}if(c!==null&&x>2){continue}c=x<3?r(2):a(s._lowerDays[x==3?"namesAbbr":"names"],true);if(c===null||H(c,1,31)){return null}}else if(y==="M"){x=n("M");if(!s._lowerMonths){s._lowerMonths=V(s.months)}u=x<3?r(2):a(s._lowerMonths[x==3?"namesAbbr":"names"],true);if(u===null||H(u,1,12)){return null}u-=1}else if(y==="y"){x=n("y");l=r(x);if(l===null){return null}if(x==2){if(typeof w==="string"){w=k+parseInt(w,10)}l=k-k%100+l;if(l>w){l-=100}}}else if(y==="h"){n("h");f=r(2);if(f==12){f=0}if(f===null||H(f,0,11)){return null}}else if(y==="H"){n("H");f=r(2);if(f===null||H(f,0,23)){return null}}else if(y==="m"){n("m");h=r(2);if(h===null||H(h,0,59)){return null}}else if(y==="s"){n("s");p=r(2);if(p===null||H(p,0,59)){return null}}else if(y==="f"){x=n("f");P=d.substr(g,x).match(L[3]);v=r(x);if(v!==null){v=parseFloat("0."+P[0],10);v=Q._round(v,3);v*=1e3}if(v===null||H(v,0,999)){return null}}else if(y==="t"){x=n("t");E=s.AM;I=s.PM;if(x===1){E=N(E);I=N(I)}T=a(I);if(!T&&!a(E)){return null}}else if(y==="z"){D=true;x=n("z");if(d.substr(g,1)==="Z"){o();continue}A=d.substr(g,6).match(x>2?B:z);if(!A){return null}A=A[0].split(":");M=A[0];R=A[1];if(!R&&M.length>3){g=M.length-2;R=M.substring(g);M=M.substring(0,g)}M=parseInt(M,10);if(H(M,-12,13)){return null}if(x>2){R=A[0][0]+R;R=parseInt(R,10);if(isNaN(R)||H(R,-59,59)){return null}}}else if(y==="'"){_=true;o()}else if(!o()){return null}}}if(t&&!/^\s*$/.test(d.substr(g))){return null}F=f!==null||h!==null||p||null;if(l===null&&u===null&&c===null&&F){l=k;u=b.getMonth();c=b.getDate()}else{if(l===null){l=k}if(c===null){c=1}}if(T&&f<12){f+=12}if(D){if(M){f+=-M}if(R){h+=-R}d=new Date(Date.UTC(l,u,c,f,h,p,v))}else{d=new Date(l,u,c,f,h,p,v);O(d,f)}if(l<100){d.setFullYear(l)}if(d.getDate()!==c&&D===Y){return null}return d}function m(e){var t=e.substr(0,1)==="-"?-1:1;e=e.substring(1);e=parseInt(e.substr(0,2),10)*60+parseInt(e.substring(2),10);return t*e}function g(e){var t=w.max(u.length,h.length);var i=e.calendar||e.calendars.standard;var n=i.patterns;var r,a,o;var s=[];for(o=0;o<t;o++){r=u[o];for(a=0;a<r.length;a++){s.push(n[r[a]])}s=s.concat(h[o])}return s}function r(e,t,i,n){if(p.call(e)==="[object Date]"){return e}var r=0;var a=null;var o;var s;if(e&&e.indexOf("/D")===0){a=l.exec(e);if(a){a=a[1];s=d.exec(a.substring(1));a=new Date(parseInt(a,10));if(s){s=m(s[0]);a=Q.timezone.apply(a,0);a=Q.timezone.convert(a,0,-1*s)}return a}}i=Q.getCulture(i);if(!t){t=g(i)}t=b(t)?t:[t];o=t.length;for(;r<o;r++){a=v(e,t[r],i,n);if(a){return a}}return a}Q.parseDate=function(e,t,i){return r(e,t,i,false)};Q.parseExactDate=function(e,t,i){return r(e,t,i,true)};Q.parseInt=function(e,t){var i=Q.parseFloat(e,t);if(i){i=i|0}return i};Q.parseFloat=function(e,t,i){if(!e&&e!==0){return null}if(typeof e===y){return e}e=e.toString();t=Q.getCulture(t);var n=t.numberFormat,r=n.percent,a=n.currency,o=a.symbol,s=r.symbol,l=e.indexOf("-"),d,u;if(f.test(e)){e=parseFloat(e.replace(n["."],"."));if(isNaN(e)){e=null}return e}if(l>0){return null}else{l=l>-1}if(e.indexOf(o)>-1||i&&i.toLowerCase().indexOf("c")>-1){n=a;d=n.pattern[0].replace("$",o).split("n");if(e.indexOf(d[0])>-1&&e.indexOf(d[1])>-1){e=e.replace(d[0],"").replace(d[1],"");l=true}}else if(e.indexOf(s)>-1){u=true;n=r;o=s}e=e.replace("-","").replace(o,"").replace(c," ").split(n[","].replace(c," ")).join("").replace(n["."],".");e=parseFloat(e);if(isNaN(e)){e=null}else if(l){e*=-1}if(e&&u){e/=100}return e}})();function Z(e){var t=e.css(Q.support.transitions.css+"box-shadow")||e.css("box-shadow"),i=t?t.match(z)||[0,0,0,0,0]:[0,0,0,0,0],n=w.max(+i[3],+(i[4]||0));return{left:-i[1]+n,right:+i[1]+n,bottom:+i[2]+n}}function J(e,t){var i,n=Q._outerWidth,r=Q._outerHeight,a=e.parent(),o=n(m);a.removeClass("k-animation-container-sm");if(!a.hasClass("k-animation-container")){var s=e[0].style.width,l=e[0].style.height,d=h.test(s),u=h.test(l),c=e.hasClass("k-tooltip")||e.is(".k-menu-horizontal.k-context-menu");i=d||u;if(!d&&(!t||t&&s||c)){s=t?n(e)+1:n(e)}if(!u&&(!t||t&&l)||e.is(".k-menu-horizontal.k-context-menu")){l=r(e)}e.wrap(_("<div/>").addClass("k-animation-container").css({width:s,height:l}));a=e.parent();if(i){e.css({width:"100%",height:"100%",boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"})}}else{ee(e,t)}if(o<n(a)){a.addClass("k-animation-container-sm");ee(e,t)}return a}function ee(e,t){var i,n=Q._outerWidth,r=Q._outerHeight,a=e.parent(".k-animation-container"),o=a[0].style;if(a.is(":hidden")){a.css({display:"",position:""})}i=h.test(o.width)||h.test(o.height);if(!i){a.css({width:t?n(e)+1:n(e),height:r(e),boxSizing:"content-box",mozBoxSizing:"content-box",webkitBoxSizing:"content-box"})}}function o(e){var t=1,i=arguments.length;for(t=1;t<i;t++){te(e,arguments[t])}return e}function te(e,t){var i=Q.data.ObservableArray,n=Q.data.LazyObservableArray,r=Q.data.DataSource,a=Q.data.HierarchicalDataSource,o,s,l,d,u;for(o in t){s=t[o];l=typeof s;if(l===x&&s!==null){d=s.constructor}else{d=null}if(d&&d!==Array&&d!==i&&d!==n&&d!==r&&d!==a&&d!==RegExp&&(!Q.isFunction(m.ArrayBuffer)||d!==ArrayBuffer)){if(s instanceof Date){e[o]=new Date(s.getTime())}else if(T(s.clone)){e[o]=s.clone()}else{u=e[o];if(typeof u===x){e[o]=u||{}}else{e[o]={}}te(e[o],s)}}else if(l!==p){e[o]=s}}return e}function D(e,t,i){for(var n in t){if(t.hasOwnProperty(n)&&t[n].test(e)){return n}}return i!==Y?i:e}function ie(e){return e.replace(/([a-z][A-Z])/g,function(e){return e.charAt(0)+"-"+e.charAt(1).toLowerCase()})}function ne(e){return e.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()})}function re(e,t){var i={},n;if(document.defaultView&&document.defaultView.getComputedStyle){n=document.defaultView.getComputedStyle(e,"");if(t){_.each(t,function(e,t){i[t]=n.getPropertyValue(t)})}}else{n=e.currentStyle;if(t){_.each(t,function(e,t){i[t]=n[ne(t)]})}}if(!Q.size(i)){i=n}return i}function ae(e){if(e&&e.className&&typeof e.className==="string"&&e.className.indexOf("k-auto-scrollable")>-1){return true}var t=re(e,["overflow"]).overflow;return t=="auto"||t=="scroll"}function oe(e,i){var t=f.browser.webkit;var n=f.browser.mozilla;var r=f.browser.version;var a,o;if(e instanceof _&&i!==Y){e.each(function(e,t){oe(t,i)});return}else{a=e instanceof _?e[0]:e}if(!a){return}o=f.isRtl(e);if(i!==Y){if(o&&t&&(r<85||f.browser.safari)){a.scrollLeft=a.scrollWidth-a.clientWidth-i}else if(o&&(n||t)&&i>0){a.scrollLeft=-i}else{a.scrollLeft=i}}else{if(o&&t&&(r<85||f.browser.safari)){return a.scrollWidth-a.clientWidth-a.scrollLeft}else{return Math.abs(a.scrollLeft)}}}(function(){f._scrollbar=Y;f.scrollbar=function(e){if(!isNaN(f._scrollbar)&&!e){return f._scrollbar}else{var t=document.createElement("div"),i;t.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both;display:block";t.innerHTML="&nbsp;";document.body.appendChild(t);f._scrollbar=i=t.offsetWidth-t.scrollWidth;document.body.removeChild(t);return i}};f.isRtl=function(e){return _(e).closest(".k-rtl").length>0};var n=document.createElement("table");try{n.innerHTML="<tr><td></td></tr>";f.tbodyInnerHtml=true}catch(e){f.tbodyInnerHtml=false}f.touch="ontouchstart"in m;var e=document.documentElement.style;var r=f.transitions=false,a=f.transforms=false,t="HTMLElement"in m?HTMLElement.prototype:[];f.hasHW3D="WebKitCSSMatrix"in m&&"m11"in new m.WebKitCSSMatrix||"MozPerspective"in e||"msPerspective"in e;f.cssFlexbox="flexWrap"in e||"WebkitFlexWrap"in e||"msFlexWrap"in e;c(["Moz","webkit","O","ms"],function(){var e=this.toString(),t=typeof n.style[e+"Transition"]===k;if(t||typeof n.style[e+"Transform"]===k){var i=e.toLowerCase();a={css:i!="ms"?"-"+i+"-":"",prefix:e,event:i==="o"||i==="webkit"?i:""};if(t){r=a;r.event=r.event?r.event+"TransitionEnd":"transitionend"}return false}});n=null;f.transforms=a;f.transitions=r;f.devicePixelRatio=m.devicePixelRatio===Y?1:m.devicePixelRatio;try{f.screenWidth=m.outerWidth||m.screen?m.screen.availWidth:m.innerWidth;f.screenHeight=m.outerHeight||m.screen?m.screen.availHeight:m.innerHeight}catch(e){f.screenWidth=m.screen.availWidth;f.screenHeight=m.screen.availHeight}f.detectOS=function(e){var t=false,i,n=[],r=!/mobile safari/i.test(e),a={wp:/(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)\.?(\d+(\.\d+)?)?/,iphone:/(iPhone|iPod).*OS\s+(\d+)[\._]([\d\._]+)/,ipad:/(iPad).*OS\s+(\d+)[\._]([\d_]+)/,meego:/(MeeGo).+NokiaBrowser\/(\d+)\.([\d\._]+)/,webos:/(webOS)\/(\d+)\.(\d+(\.\d+)?)/,blackberry:/(BlackBerry|BB10).*?Version\/(\d+)\.(\d+(\.\d+)?)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,tizen:/(tizen).*?Version\/(\d+)\.(\d+(\.\d+)?)/i,sailfish:/(sailfish).*rv:(\d+)\.(\d+(\.\d+)?).*firefox/i,ffos:/(Mobile).*rv:(\d+)\.(\d+(\.\d+)?).*Firefox/},o={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,blackberry:/^blackberry|playbook/i,windows:/windows/,wp:/wp/,flat:/sailfish|ffos|tizen/i,meego:/meego/},s={tablet:/playbook|ipad|fire/i},l={omini:/Opera\sMini/i,omobile:/Opera\sMobi/i,firefox:/Firefox|Fennec/i,mobilesafari:/version\/.*safari/i,ie:/MSIE|Windows\sPhone/i,chrome:/chrome|crios/i,webkit:/webkit/i};for(var d in a){if(a.hasOwnProperty(d)){n=e.match(a[d]);if(n){if(d=="windows"&&"plugins"in navigator){return false}t={};t.device=d;t.tablet=D(d,s,false);t.browser=D(e,l,"default");t.name=D(d,o);t[t.name]=true;t.majorVersion=n[2];t.minorVersion=(n[3]||"0").replace("_",".");i=t.minorVersion.replace(".","").substr(0,2);t.flatVersion=t.majorVersion+i+new Array(3-(i.length<3?i.length:2)).join("0");t.cordova=typeof m.PhoneGap!==p||typeof m.cordova!==p;t.appMode=m.navigator.standalone||/file|local|wmapp/.test(m.location.protocol)||t.cordova;if(t.android&&(f.devicePixelRatio<1.5&&t.flatVersion<400||r)&&(f.screenWidth>800||f.screenHeight>800)){t.tablet=d}break}}}return t};var i=f.mobileOS=f.detectOS(navigator.userAgent);f.wpDevicePixelRatio=i.wp?screen.width/320:0;f.hasNativeScrolling=false;if(i.ios||i.android&&i.majorVersion>2||i.wp){f.hasNativeScrolling=i}f.delayedClick=function(){if(f.touch){if(i.ios){return true}if(i.android){if(!f.browser.chrome){return true}if(f.browser.version<32){return false}return!(_("meta[name=viewport]").attr("content")||"").match(/user-scalable=no/i)}}return false};f.mouseAndTouchPresent=f.touch&&!(f.mobileOS.ios||f.mobileOS.android);f.detectBrowser=function(e){var t=false,i=[],n={edge:/(edge)[ \/]([\w.]+)/i,webkit:/(chrome|crios)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie\s|trident.*? rv:)([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(var r in n){if(n.hasOwnProperty(r)){i=e.match(n[r]);if(i){t={};t[r]=true;t[i[1].toLowerCase().split(" ")[0].split("/")[0]]=true;t.version=parseInt(document.documentMode||i[2],10);break}}}return t};f.browser=f.detectBrowser(navigator.userAgent);f.detectClipboardAccess=function(){var e={copy:document.queryCommandSupported?document.queryCommandSupported("copy"):false,cut:document.queryCommandSupported?document.queryCommandSupported("cut"):false,paste:document.queryCommandSupported?document.queryCommandSupported("paste"):false};if(f.browser.chrome){e.paste=false;if(f.browser.version>=43){e.copy=true;e.cut=true}}return e};f.clipboard=f.detectClipboardAccess();f.zoomLevel=function(){try{var e=f.browser;var t=0;var i=document.documentElement;if(e.msie&&e.version==11&&i.scrollHeight>i.clientHeight&&!f.touch){t=f.scrollbar()}return f.touch?i.clientWidth/m.innerWidth:e.msie&&e.version>=10?((top||m).document.documentElement.offsetWidth+t)/(top||m).innerWidth:1}catch(e){return 1}};(function(e){var t="",i=_(document.documentElement),n=parseInt(e.version,10);if(e.msie){t="ie"}else if(e.mozilla){t="ff"}else if(e.safari){t="safari"}else if(e.webkit){t="webkit"}else if(e.opera){t="opera"}else if(e.edge){t="edge"}if(t){t="k-"+t+" k-"+t+n}if(f.mobileOS){t+=" k-mobile"}if(!f.cssFlexbox){t+=" k-no-flexbox"}i.addClass(t)})(f.browser);f.eventCapture=document.documentElement.addEventListener;var o=document.createElement("input");f.placeholder="placeholder"in o;f.propertyChangeEvent="onpropertychange"in o;f.input=function(){var e=["number","date","time","month","week","datetime","datetime-local"];var t=e.length;var i="test";var n={};var r=0;var a;for(;r<t;r++){a=e[r];o.setAttribute("type",a);o.value=i;n[a.replace("-","")]=o.type!=="text"&&o.value!==i}return n}();o.style.cssText="float:left;";f.cssFloat=!!o.style.cssFloat;o=null;f.stableSort=function(){var e=513;var t=[{index:0,field:"b"}];for(var i=1;i<e;i++){t.push({index:i,field:"a"})}t.sort(function(e,t){return e.field>t.field?1:e.field<t.field?-1:0});return t[0].index===1}();f.matchesSelector=t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.matchesSelector||t.matches||function(e){var t=document.querySelectorAll?(this.parentNode||document).querySelectorAll(e)||[]:_(e),i=t.length;while(i--){if(t[i]==this){return true}}return false};f.matchMedia="matchMedia"in m;f.pushState=m.history&&m.history.pushState;f.hashChange="onhashchange"in m;f.customElements="registerElement"in m.document;var s=f.browser.chrome,l=f.browser.crios,d=f.browser.mozilla,u=f.browser.safari;f.msPointers=!s&&m.MSPointerEvent;f.pointers=!s&&!l&&!d&&!u&&m.PointerEvent;f.kineticScrollNeeded=i&&(f.touch||f.msPointers||f.pointers)})();function se(e){var t=0,i;for(i in e){if(e.hasOwnProperty(i)&&i!="toJSON"){t++}}return t}function le(e,t,i){if(!t){t="offset"}var n=e[t]();var r={top:n.top,right:n.right,bottom:n.bottom,left:n.left};if(f.browser.msie&&(f.pointers||f.msPointers)&&!i){var a=f.isRtl(e)?1:-1;r.top-=m.pageYOffset-document.documentElement.scrollTop;r.left-=m.pageXOffset+a*document.documentElement.scrollLeft}return r}var de={left:{reverse:"right"},right:{reverse:"left"},down:{reverse:"up"},up:{reverse:"down"},top:{reverse:"bottom"},bottom:{reverse:"top"},in:{reverse:"out"},out:{reverse:"in"}};function ue(e){var t={};c(typeof e==="string"?e.split(" "):e,function(e){t[e]=this});return t}function ce(e){return new Q.effects.Element(e)}var l={};_.extend(l,{enabled:true,Element:function(e){this.element=_(e)},promise:function(e,t){if(!e.is(":visible")){e.css({display:e.data("olddisplay")||"block"}).css("display")}if(t.hide){e.data("olddisplay",e.css("display")).hide()}if(t.init){t.init()}if(t.completeCallback){t.completeCallback(e)}e.dequeue()},disable:function(){this.enabled=false;this.promise=this.promiseShim},enable:function(){this.enabled=true;this.promise=this.animatedPromise}});l.promiseShim=l.promise;function fe(e,t,i,n){if(typeof e===k){if(T(t)){n=t;t=400;i=false}if(T(i)){n=i;i=false}if(typeof t===S){i=t;t=400}e={effects:e,duration:t,reverse:i,complete:n}}return u({effects:{},duration:400,reverse:false,init:r,teardown:r,hide:false},e,{completeCallback:e.complete,complete:r})}function he(e,t,i,n,r){var a=0,o=e.length,s;for(;a<o;a++){s=_(e[a]);s.queue(function(){l.promise(s,fe(t,i,n,r))})}return e}function pe(i,e,t,n){if(e){e=e.split(" ");c(e,function(e,t){i.toggleClass(t,n)})}return i}if(!("kendoAnimate"in _.fn)){u(_.fn,{kendoStop:function(e,t){return this.stop(e,t)},kendoAnimate:function(e,t,i,n){return he(this,e,t,i,n)},kendoAddClass:function(e,t){return Q.toggleClass(this,e,t,true)},kendoRemoveClass:function(e,t){return Q.toggleClass(this,e,t,false)},kendoToggleClass:function(e,t,i){return Q.toggleClass(this,e,t,i)}})}var ve=/&/g,me=/</g,ge=/"/g,_e=/'/g,be=/>/g;function we(e){return(""+e).replace(ve,"&amp;").replace(me,"&lt;").replace(be,"&gt;").replace(ge,"&quot;").replace(_e,"&#39;")}function ke(t){var i;try{i=m.decodeURIComponent(t)}catch(e){i=t.replace(/%u([\dA-F]{4})|%([\dA-F]{2})/gi,function(e,t,i){return String.fromCharCode(parseInt("0x"+(t||i),16))})}return i}var ye=function(e){return e.target};if(f.touch){ye=function(e){var t="originalEvent"in e?e.originalEvent.changedTouches:"changedTouches"in e?e.changedTouches:null;return t?document.elementFromPoint(t[0].clientX,t[0].clientY):e.target};c(["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap"],function(e,t){_.fn[t]=function(e){return this.bind(t,e)}})}if(f.touch){if(!f.mobileOS){f.mousedown="mousedown touchstart";f.mouseup="mouseup touchend";f.mousemove="mousemove touchmove";f.mousecancel="mouseleave touchcancel";f.click="click";f.resize="resize"}else{f.mousedown="touchstart";f.mouseup="touchend";f.mousemove="touchmove";f.mousecancel="touchcancel";f.click="touchend";f.resize="orientationchange"}}else if(f.pointers){f.mousemove="pointermove";f.mousedown="pointerdown";f.mouseup="pointerup";f.mousecancel="pointercancel";f.click="pointerup";f.resize="orientationchange resize"}else if(f.msPointers){f.mousemove="MSPointerMove";f.mousedown="MSPointerDown";f.mouseup="MSPointerUp";f.mousecancel="MSPointerCancel";f.click="MSPointerUp";f.resize="orientationchange resize"}else{f.mousemove="mousemove";f.mousedown="mousedown";f.mouseup="mouseup";f.mousecancel="mouseleave";f.click="click";f.resize="resize"}var xe=function(e,t){var i=t||"d",n,r,a,o,s=1;for(r=0,a=e.length;r<a;r++){o=e[r];if(o!==""){n=o.indexOf("[");if(n!==0){if(n==-1){o="."+o}else{s++;o="."+o.substring(0,n)+" || {})"+o.substring(n)}}s++;i+=o+(r<a-1?" || {})":")")}}return new Array(s).join("(")+i},Ce=/^([a-z]+:)?\/\//i;u(Q,{widgets:[],_widgetRegisteredCallbacks:[],ui:Q.ui||{},fx:Q.fx||ce,effects:Q.effects||l,mobile:Q.mobile||{},data:Q.data||{},dataviz:Q.dataviz||{},drawing:Q.drawing||{},spreadsheet:{messages:{}},keys:{INSERT:45,DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,END:35,HOME:36,SPACEBAR:32,PAGEUP:33,PAGEDOWN:34,F2:113,F10:121,F12:123,NUMPAD_PLUS:107,NUMPAD_MINUS:109,NUMPAD_DOT:110},support:Q.support||f,animate:Q.animate||he,ns:"",attr:function(e){return"data-"+Q.ns+e},getShadows:Z,wrap:J,deepExtend:o,getComputedStyles:re,isScrollable:ae,scrollLeft:oe,size:se,toCamelCase:ne,toHyphens:ie,getOffset:Q.getOffset||le,parseEffects:Q.parseEffects||ue,toggleClass:Q.toggleClass||pe,directions:Q.directions||de,Observable:a,Class:i,Template:t,template:e(t.compile,t),render:e(t.render,t),stringify:e(n.stringify,n),eventTarget:ye,htmlEncode:we,unescape:ke,isLocalUrl:function(e){return e&&!Ce.test(e)},expr:function(e,t,i){e=e||"";if(typeof t==k){i=t;t=false}i=i||"d";if(e&&e.charAt(0)!=="["){e="."+e}if(t){e=e.replace(/"([^.]*)\.([^"]*)"/g,'"$1_$DOT$_$2"');e=e.replace(/'([^.]*)\.([^']*)'/g,"'$1_$DOT$_$2'");e=xe(e.split("."),i);e=e.replace(/_\$DOT\$_/g,".")}else{e=i+e}return e},getter:function(e,t){var i=e+t;return L[i]=L[i]||new Function("d","return "+Q.expr(e,t))},setter:function(e){return H[e]=H[e]||new Function("d,value",Q.expr(e)+"=value")},accessor:function(e){return{get:Q.getter(e),set:Q.setter(e)}},guid:function(){var e="",t,i,n="abcdefghijklmnopqrstuvwxyz";e+=n[Math.floor(Math.random()*Math.floor(n.length))];for(t=1;t<32;t++){i=w.random()*16|0;if(t==8||t==12||t==16||t==20){e+="-"}e+=(t==12?4:t==16?i&3|8:i).toString(16)}return e},roleSelector:function(e){return e.replace(/(\S+)/g,"["+Q.attr("role")+"=$1],").slice(0,-1)},directiveSelector:function(e){var t=e.split(" ");if(t){for(var i=0;i<t.length;i++){if(t[i]!="view"){t[i]=t[i].replace(/(\w*)(view|bar|strip|over)$/,"$1-$2")}}}return t.join(" ").replace(/(\S+)/g,"kendo-mobile-$1,").slice(0,-1)},triggeredByInput:function(e){return/^(label|input|textarea|select)$/i.test(e.target.tagName)},onWidgetRegistered:function(e){for(var t=0,i=Q.widgets.length;t<i;t++){e(Q.widgets[t])}Q._widgetRegisteredCallbacks.push(e)},logToConsole:function(e,t){var i=m.console;if(!Q.suppressLog&&typeof i!="undefined"&&i.log){i[t||"log"](e)}}});var s=a.extend({init:function(e,t){var i=this;i.element=Q.jQuery(e).handler(i);i.angular("init",t);a.fn.init.call(i);var n=t?t.dataSource:null;var r;if(t){r=(i.componentTypes||{})[(t||{}).componentType]}if(n){t=u({},t,{dataSource:{}})}t=i.options=u(true,{},i.options,i.defaults,r||{},t);if(n){t.dataSource=n}if(!i.element.attr(Q.attr("role"))){i.element.attr(Q.attr("role"),(t.name||"").toLowerCase())}i.element.data("kendo"+t.prefix+t.name,i);i.bind(i.events,t)},events:[],options:{prefix:""},_hasBindingTarget:function(){return!!this.element[0].kendoBindingTarget},_tabindex:function(e){e=e||this.wrapper;var t=this.element,i="tabindex",n=e.attr(i)||t.attr(i);t.removeAttr(i);e.attr(i,!isNaN(n)?n:0)},setOptions:function(e){this._setEvents(e);_.extend(this.options,e)},_setEvents:function(e){var t=this,i=0,n=t.events.length,r;for(;i<n;i++){r=t.events[i];if(t.options[r]&&e[r]){t.unbind(r,t.options[r]);if(t._events&&t._events[r]){delete t._events[r]}}}t.bind(t.events,e)},resize:function(e){var t=this.getSize(),i=this._size;if(e||(t.width>0||t.height>0)&&(!i||t.width!==i.width||t.height!==i.height)){this._size=t;this._resize(t,e);this.trigger("resize",t)}},getSize:function(){return Q.dimensions(this.element)},size:function(e){if(!e){return this.getSize()}else{this.setSize(e)}},setSize:_.noop,_resize:_.noop,destroy:function(){var e=this;e.element.removeData("kendo"+e.options.prefix+e.options.name);e.element.removeData("handler");e.unbind()},_destroy:function(){this.destroy()},angular:function(){},_muteAngularRebind:function(e){this._muteRebind=true;e.call(this);this._muteRebind=false}});var Se=s.extend({dataItems:function(){return this.dataSource.flatView()},_angularItems:function(e){var t=this;t.angular(e,function(){return{elements:t.items(),data:_.map(t.dataItems(),function(e){return{dataItem:e}})}})}});Q.dimensions=function(e,t){var i=e[0];if(t){e.css(t)}return{width:i.offsetWidth,height:i.offsetHeight}};Q.notify=r;var Te=/template$/i,De=/^\s*(?:\{(?:.|\r\n|\n)*\}|\[(?:.|\r\n|\n)*\])\s*$/,Ae=/^\{(\d+)(:[^\}]+)?\}|^\[[A-Za-z_]+\]$/,Ee=/([A-Z])/g;function A(e,t){var i;if(t.indexOf("data")===0){t=t.substring(4);t=t.charAt(0).toLowerCase()+t.substring(1)}t=t.replace(Ee,"-$1");i=e.getAttribute("data-"+Q.ns+t);if(i===null){i=Y}else if(i==="null"){i=null}else if(i==="true"){i=true}else if(i==="false"){i=false}else if(B.test(i)&&t!="mask"){i=parseFloat(i)}else if(De.test(i)&&!Ae.test(i)){i=new Function("return ("+i+")")()}return i}function Ie(e,t,i){var n={},r,a,o=e.getAttribute("data-"+Q.ns+"role");for(r in t){a=A(e,r);if(a!==Y){if(Te.test(r)&&o!="drawer"){if(typeof a==="string"){if(_("#"+a).length){a=Q.template(_("#"+a).html())}else if(i){a=Q.template(i[a])}}else{a=e.getAttribute(r)}}n[r]=a}}return n}Q.initWidget=function(e,t,i){var n,r,a,o,s,l,d,u,c,f;if(!i){i=Q.ui.roles}else if(i.roles){i=i.roles}e=e.nodeType?e:e[0];l=e.getAttribute("data-"+Q.ns+"role");if(!l){return}c=l.indexOf(".")===-1;if(c){a=i[l]}else{a=Q.getter(l)(m)}var h=_(e).data(),p=a?"kendo"+a.fn.options.prefix+a.fn.options.name:"";if(c){f=new RegExp("^kendo.*"+l+"$","i")}else{f=new RegExp("^"+p+"$","i")}for(var v in h){if(v.match(f)){if(v===p){n=h[v]}else{return h[v]}}}if(!a){return}u=A(e,"dataSource");t=_.extend({},Ie(e,_.extend({},a.fn.options,a.fn.defaults)),t);if(u){if(typeof u===k){t.dataSource=Q.getter(u)(m)}else{t.dataSource=u}}for(o=0,s=a.fn.events.length;o<s;o++){r=a.fn.events[o];d=A(e,r);if(d!==Y){t[r]=Q.getter(d)(m)}}if(!n){n=new a(e,t)}else if(!_.isEmptyObject(t)){n.setOptions(t)}return n};Q.rolesFromNamespaces=function(e){var t=[],i,n;if(!e[0]){e=[Q.ui,Q.dataviz.ui]}for(i=0,n=e.length;i<n;i++){t[i]=e[i].roles}return u.apply(null,[{}].concat(t.reverse()))};Q.init=function(e){var t=Q.rolesFromNamespaces(v.call(arguments,1));_(e).find("[data-"+Q.ns+"role]").addBack().each(function(){Q.initWidget(this,{},t)})};Q.destroy=function(e){_(e).find("[data-"+Q.ns+"role]").addBack().each(function(){var e=_(this).data();for(var t in e){if(t.indexOf("kendo")===0&&typeof e[t].destroy===g){e[t].destroy()}}})};function Me(e,t){return _.contains(e,t)?-1:1}function Re(){var e=_(this);return _.inArray(e.attr("data-"+Q.ns+"role"),["slider","rangeslider","breadcrumb"])>-1||e.is(":visible")}Q.resize=function(e,t){var i=_(e).find("[data-"+Q.ns+"role]").addBack().filter(Re);if(!i.length){return}var n=_.makeArray(i);n.sort(Me);_.each(n,function(){var e=Q.widgetInstance(_(this));if(e){e.resize(t)}})};Q.parseOptions=Ie;u(Q.ui,{Widget:s,DataBoundWidget:Se,roles:{},progress:function(e,t,i){var n=e.find(".k-loading-mask"),r=Q.support,a=r.browser,o,s,l,d,u;i=_.extend({},{width:"100%",height:"100%",top:e.scrollTop(),opacity:false},i);u=i.opacity?"k-loading-mask k-opaque":"k-loading-mask";if(t){if(!n.length){o=r.isRtl(e);s=o?"right":"left";d=Q.scrollLeft(e);l=a.webkit?!o?0:e[0].scrollWidth-e.width()-2*d:0;n=_(Q.format("<div class='{0}'><span class='k-loading-text'>{1}</span><div class='k-loading-image'></div><div class='k-loading-color'></div></div>",u,Q.ui.progress.messages.loading)).width(i.width).height(i.height).css("top",i.top).css(s,Math.abs(d)+l).prependTo(e)}}else if(n){n.remove()}},plugin:function(e,t,i){var o=e.fn.options.name,n;t=t||Q.ui;i=i||"";t[o]=e;t.roles[o.toLowerCase()]=e;n="getKendo"+i+o;o="kendo"+i+o;var r={name:o,widget:e,prefix:i||""};Q.widgets.push(r);for(var a=0,s=Q._widgetRegisteredCallbacks.length;a<s;a++){Q._widgetRegisteredCallbacks[a](r)}_.fn[o]=function(n){var r=this,a;if(typeof n===k){a=v.call(arguments,1);this.each(function(){var e=_.data(this,o),t,i;if(!e){throw new Error(Q.format("Cannot call method '{0}' of {1} before it is initialized",n,o))}t=e[n];if(typeof t!==g){throw new Error(Q.format("Cannot find method '{0}' of {1}",n,o))}i=t.apply(e,a);if(i!==Y){r=i;return false}})}else{this.each(function(){return new e(this,n)})}return r};_.fn[o].widget=e;_.fn[n]=function(){return this.data(o)}}});Q.ui.progress.messages={loading:"Loading..."};var Fe={bind:function(){return this},nullObject:true,options:{}};var Pe=s.extend({init:function(e,t){s.fn.init.call(this,e,t);this.element.autoApplyNS();this.wrapper=this.element;this.element.addClass("km-widget")},destroy:function(){s.fn.destroy.call(this);this.element.kendoDestroy()},options:{prefix:"Mobile"},events:[],view:function(){var e=this.element.closest(Q.roleSelector("view splitview modalview drawer"));return Q.widgetInstance(e,Q.mobile.ui)||Fe},viewHasNativeScrolling:function(){var e=this.view();return e&&e.options.useNativeScrolling},container:function(){var e=this.element.closest(Q.roleSelector("view layout modalview drawer splitview"));return Q.widgetInstance(e.eq(0),Q.mobile.ui)||Fe}});u(Q.mobile,{init:function(e){Q.init(e,Q.mobile.ui,Q.ui,Q.dataviz.ui)},appLevelNativeScrolling:function(){return Q.mobile.application&&Q.mobile.application.options&&Q.mobile.application.options.useNativeScrolling},roles:{},ui:{Widget:Pe,DataBoundWidget:Se.extend(Pe.prototype),roles:{},plugin:function(e){Q.ui.plugin(e,Q.mobile.ui,"Mobile")}}});o(Q.dataviz,{init:function(e){Q.init(e,Q.dataviz.ui)},ui:{roles:{},themes:{},views:[],plugin:function(e){Q.ui.plugin(e,Q.dataviz.ui)}},roles:{}});Q.touchScroller=function(e,i){if(!i){i={}}i.useNative=true;return _(e).map(function(e,t){t=_(t);if(f.kineticScrollNeeded&&Q.mobile.ui.Scroller&&!t.data("kendoMobileScroller")){t.kendoMobileScroller(i);return t.data("kendoMobileScroller")}else{return false}})[0]};Q.preventDefault=function(e){e.preventDefault()};Q.widgetInstance=function(e,t){var i=e.data(Q.ns+"role"),n=[],r,a,o=e.data("kendoView");if(i){if(i==="content"){i="scroller"}if(i==="editortoolbar"){var s=e.data("kendoEditorToolbar");if(s){return s}}if(i==="view"&&o){return o}if(t){if(t[0]){for(r=0,a=t.length;r<a;r++){n.push(t[r].roles[i])}}else{n.push(t.roles[i])}}else{n=[Q.ui.roles[i],Q.dataviz.ui.roles[i],Q.mobile.ui.roles[i]]}if(i.indexOf(".")>=0){n=[Q.getter(i)(m)]}for(r=0,a=n.length;r<a;r++){var l=n[r];if(l){var d=e.data("kendo"+l.fn.options.prefix+l.fn.options.name);if(d){return d}}}}};Q.onResize=function(e){var t=e;if(f.mobileOS.android){t=function(){setTimeout(e,600)}}_(m).on(f.resize,t);return t};Q.unbindResize=function(e){_(m).off(f.resize,e)};Q.attrValue=function(e,t){return e.data(Q.ns+t)};Q.days={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6};function ze(e,t){var i=e.nodeName.toLowerCase();return(/input|select|textarea|button|object/.test(i)?!e.disabled:"a"===i?e.href||t:t)&&Be(e)}function Be(e){return _.expr.pseudos.visible(e)&&!_(e).parents().addBack().filter(function(){return _.css(this,"visibility")==="hidden"}).length}_.extend(_.expr.pseudos,{kendoFocusable:function(e){var t=_.attr(e,"tabindex");return ze(e,!isNaN(t)&&t>-1)}});var Le=["mousedown","mousemove","mouseenter","mouseleave","mouseover","mouseout","mouseup","click"];var He="label, input, [data-rel=external]";var E={setupMouseMute:function(){var e=0,t=Le.length,i=document.documentElement;if(E.mouseTrap||!f.eventCapture){return}E.mouseTrap=true;E.bustClick=false;E.captureMouse=false;var n=function(e){if(E.captureMouse){if(e.type==="click"){if(E.bustClick&&!_(e.target).is(He)){e.preventDefault();e.stopPropagation()}}else{e.stopPropagation()}}};for(;e<t;e++){i.addEventListener(Le[e],n,true)}},muteMouse:function(e){E.captureMouse=true;if(e.data.bustClick){E.bustClick=true}clearTimeout(E.mouseTrapTimeoutID)},unMuteMouse:function(){clearTimeout(E.mouseTrapTimeoutID);E.mouseTrapTimeoutID=setTimeout(function(){E.captureMouse=false;E.bustClick=false},400)}};var I={down:"touchstart mousedown",move:"mousemove touchmove",up:"mouseup touchend touchcancel",cancel:"mouseleave touchcancel"};if(f.touch&&(f.mobileOS.ios||f.mobileOS.android)){I={down:"touchstart",move:"touchmove",up:"touchend touchcancel",cancel:"touchcancel"}}else if(f.pointers){I={down:"pointerdown",move:"pointermove",up:"pointerup",cancel:"pointercancel pointerleave"}}else if(f.msPointers){I={down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp",cancel:"MSPointerCancel MSPointerLeave"}}if(f.msPointers&&!("onmspointerenter"in m)){_.each({MSPointerEnter:"MSPointerOver",MSPointerLeave:"MSPointerOut"},function(e,a){_.event.special[e]={delegateType:a,bindType:a,handle:function(e){var t,i=this,n=e.relatedTarget,r=e.handleObj;if(!n||n!==i&&!_.contains(i,n)){e.type=r.origType;t=r.handler.apply(this,arguments);e.type=a}return t}}})}var Ne=function(e){return I[e]||e},Oe=/([^ ]+)/g;Q.applyEventMap=function(e,t){e=e.replace(Oe,Ne);if(t){e=e.replace(Oe,"$1."+t)}return e};Q.keyDownHandler=function(e,t){var i=t._events.kendoKeydown;if(!i){return true}i=i.slice();e.sender=t;e.preventKendoKeydown=false;for(var n=0,r=i.length;n<r;n++){i[n].call(t,e)}return!e.preventKendoKeydown};var M=_.fn.on;function R(e,t){return new R.fn.init(e,t)}N(true,R,_);R.fn=R.prototype=new _;R.fn.constructor=R;R.fn.init=function(e,t){if(t&&t instanceof _&&!(t instanceof R)){t=R(t)}return _.fn.init.call(this,e,t,Ve)};R.fn.init.prototype=R.fn;var Ve=R(document);u(R.fn,{handler:function(e){this.data("handler",e);return this},autoApplyNS:function(e){this.data("kendoNS",e||Q.guid());return this},on:function(){var e=this,t=e.data("kendoNS");if(arguments.length===1){return M.call(e,arguments[0])}var i=e,n=v.call(arguments);if(typeof n[n.length-1]===p){n.pop()}var r=n[n.length-1],a=Q.applyEventMap(n[0],t);if(f.mouseAndTouchPresent&&a.search(/mouse|click/)>-1&&this[0]!==document.documentElement){E.setupMouseMute();var o=n.length===2?null:n[1],s=a.indexOf("click")>-1&&a.indexOf("touchend")>-1;M.call(this,{touchstart:E.muteMouse,touchend:E.unMuteMouse},o,{bustClick:s})}if(arguments[0].indexOf("keydown")!==-1&&n[1]&&n[1].options){n[0]=a;var l=n[1];var d=n[n.length-1];n[n.length-1]=function(e){if(Q.keyDownHandler(e,l)){return d.apply(this,[e])}};M.apply(e,n);return e}if(typeof r===k){i=e.data("handler");r=i[r];n[n.length-1]=function(e){r.call(i,e)}}n[0]=a;M.apply(e,n);return e},kendoDestroy:function(e){e=e||this.data("kendoNS");if(e){this.off("."+e)}return this}});Q.jQuery=R;Q.eventMap=I;Q.timezone=function(){var d={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};var u={Sun:0,Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6};function s(e,t){var i;var n;var r;var a=t[3];var o=t[4];var s=t[5];var l=t[8];if(!l){t[8]=l={}}if(l[e]){return l[e]}if(!isNaN(o)){i=new Date(Date.UTC(e,d[a],o,s[0],s[1],s[2],0))}else if(o.indexOf("last")===0){i=new Date(Date.UTC(e,d[a]+1,1,s[0]-24,s[1],s[2],0));n=u[o.substr(4,3)];r=i.getUTCDay();i.setUTCDate(i.getUTCDate()+n-r-(n>r?7:0))}else if(o.indexOf(">=")>=0){i=new Date(Date.UTC(e,d[a],o.substr(5),s[0],s[1],s[2],0));n=u[o.substr(0,3)];r=i.getUTCDay();i.setUTCDate(i.getUTCDate()+n-r+(n<r?7:0))}else if(o.indexOf("<=")>=0){i=new Date(Date.UTC(e,d[a],o.substr(5),s[0],s[1],s[2],0));n=u[o.substr(0,3)];r=i.getUTCDay();i.setUTCDate(i.getUTCDate()+n-r-(n>r?7:0))}return l[e]=i}function a(e,t,i){t=t[i];if(!t){var n=i.split(":");var r=0;if(n.length>1){r=n[0]*60+Number(n[1])}return[-1e6,"max","-","Jan",1,[0,0,0],r,"-"]}var a=new Date(e).getUTCFullYear();t=jQuery.grep(t,function(e){var t=e[0];var i=e[1];return t<=a&&(i>=a||t==a&&i=="only"||i=="max")});t.push(e);t.sort(function(e,t){if(typeof e!="number"){e=Number(s(a,e))}if(typeof t!="number"){t=Number(s(a,t))}return e-t});var o=t[jQuery.inArray(e,t)-1]||t[t.length-1];return isNaN(o)?o:null}function o(e,t,i){var n=t[i];if(typeof n==="string"){n=t[n]}if(!n){throw new Error('Timezone "'+i+'" is either incorrect, or kendo.timezones.min.js is not included.')}for(var r=n.length-1;r>=0;r--){var a=n[r][3];if(a&&e>a){break}}var o=n[r+1];if(!o){throw new Error('Timezone "'+i+'" not found on '+e+".")}return o}function l(e,t,i,n){if(typeof e!=y){e=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}var r=o(e,t,n);return{zone:r,rule:a(e,i,r[1])}}function e(e,t){if(t=="Etc/UTC"||t=="Etc/GMT"){return 0}var i=l(e,this.zones,this.rules,t);var n=i.zone;var r=i.rule;return Q.parseFloat(r?n[0]-r[6]:n[0])}function t(e,t){var i=l(e,this.zones,this.rules,t);var n=i.zone;var r=i.rule;var a=n[2];if(a.indexOf("/")>=0){return a.split("/")[r&&+r[6]?1:0]}else if(a.indexOf("%s")>=0){return a.replace("%s",!r||r[7]=="-"?"":r[7])}return a}function i(e,t,i){var n=i;var r;if(typeof t==k){t=this.offset(e,t)}if(typeof i==k){i=this.offset(e,i)}var a=e.getTimezoneOffset();e=new Date(e.getTime()+(t-i)*6e4);var o=e.getTimezoneOffset();if(typeof n==k){n=this.offset(e,n)}r=o-a+(i-n);return new Date(e.getTime()+r*6e4)}function n(e,t){return this.convert(e,e.getTimezoneOffset(),t)}function r(e,t){return this.convert(e,t,e.getTimezoneOffset())}function c(e){return this.apply(new Date(e),"Etc/UTC")}return{zones:{},rules:{},offset:e,convert:i,apply:n,remove:r,abbr:t,toLocalDate:c}}();Q.date=function(){var a=6e4,o=864e5;function r(e,t){if(t===0&&e.getHours()===23){e.setHours(e.getHours()+2);return true}return false}function n(e,t,i){var n=e.getHours();i=i||1;t=(t-e.getDay()+7*i)%7;e.setDate(e.getDate()+t);r(e,n)}function i(e,t,i){e=new Date(e);n(e,t,i);return e}function s(e){return new Date(e.getFullYear(),e.getMonth(),1)}function e(e){var t=new Date(e.getFullYear(),e.getMonth()+1,0),i=s(e),n=Math.abs(t.getTimezoneOffset()-i.getTimezoneOffset());if(n){t.setHours(i.getHours()+n/60)}return t}function l(e,t){if(t!==1){return v(i(e,t,-1),4)}return v(e,4-(e.getDay()||7))}function d(e,t){var i=new Date(e.getFullYear(),0,1,-6);var n=l(e,t);var r=n.getTime()-i.getTime();var a=Math.floor(r/o);return 1+Math.floor(a/7)}function t(e,t){if(t===Y){t=Q.culture().calendar.firstDay}var i=v(e,-7);var n=v(e,7);var r=d(e,t);if(r===0){return d(i,t)+1}if(r===53&&d(n,t)>1){return 1}return r}function u(e){e=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0);r(e,0);return e}function c(e){return Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function f(e){return w(e).getTime()-u(w(e))}function h(e,t,i){var n=f(t),r=f(i),a;if(!e||n==r){return true}if(t>=i){i+=o}a=f(e);if(n>a){a+=o}if(r<n){r+=o}return a>=n&&a<=r}function p(e,t,i){var n=t.getTime(),r=i.getTime(),a;if(n>=r){r+=o}a=e.getTime();return a>=n&&a<=r}function v(e,t){var i=e.getHours();e=new Date(e);m(e,t*o);r(e,i);return e}function m(e,t,i){var n=e.getTimezoneOffset();var r;e.setTime(e.getTime()+t);if(!i){r=e.getTimezoneOffset()-n;e.setTime(e.getTime()+r*a)}}function g(e,t){e=new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds());r(e,t.getHours());return e}function _(){return u(new Date)}function b(e){return u(e).getTime()==_().getTime()}function w(e){var t=new Date(1980,1,1,0,0,0);if(e){t.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}return t}return{adjustDST:r,dayOfWeek:i,setDayOfWeek:n,getDate:u,isInDateRange:p,isInTimeRange:h,isToday:b,nextDay:function(e){return v(e,1)},previousDay:function(e){return v(e,-1)},toUtcTime:c,MS_PER_DAY:o,MS_PER_HOUR:60*a,MS_PER_MINUTE:a,setTime:m,setHours:g,addDays:v,today:_,toInvariantTime:w,firstDayOfMonth:s,lastDayOfMonth:e,weekInYear:t,getMilliseconds:f}}();Q.stripWhitespace=function(t){if(document.createNodeIterator){var e=document.createNodeIterator(t,NodeFilter.SHOW_TEXT,function(e){return e.parentNode==t?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},false);while(e.nextNode()){if(e.referenceNode&&!e.referenceNode.textContent.trim()){e.referenceNode.parentNode.removeChild(e.referenceNode)}}}else{for(var i=0;i<t.childNodes.length;i++){var n=t.childNodes[i];if(n.nodeType==3&&!/\S/.test(n.nodeValue)){t.removeChild(n);i--}if(n.nodeType==1){Q.stripWhitespace(n)}}}};var We=m.requestAnimationFrame||m.webkitRequestAnimationFrame||m.mozRequestAnimationFrame||m.oRequestAnimationFrame||m.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)};Q.animationFrame=function(e){We.call(m,e)};var F=[];Q.queueAnimation=function(e){F[F.length]=e;if(F.length===1){Q.runNextAnimation()}};Q.runNextAnimation=function(){Q.animationFrame(function(){if(F[0]){F.shift()();if(F[0]){Q.runNextAnimation()}}})};Q.parseQueryStringParams=function(e){var t=e.split("?")[1]||"",i={},n=t.split(/&|=/),r=n.length,a=0;for(;a<r;a+=2){if(n[a]!==""){i[decodeURIComponent(n[a])]=decodeURIComponent(n[a+1])}}return i};Q.elementUnderCursor=function(e){if(typeof e.x.client!="undefined"){return document.elementFromPoint(e.x.client,e.y.client)}};Q.wheelDeltaY=function(e){var t=e.originalEvent,i=t.wheelDeltaY,n;if(t.wheelDelta){if(i===Y||i){n=t.wheelDelta}}else if(t.detail&&t.axis===t.VERTICAL_AXIS){n=-t.detail*10}return n};Q.throttle=function(r,a){var o;var s=0;if(!a||a<=0){return r}var e=function(){var e=this;var t=+new Date-s;var i=arguments;function n(){r.apply(e,i);s=+new Date}if(!s){return n()}if(o){clearTimeout(o)}if(t>a){n()}else{o=setTimeout(n,a-t)}};e.cancel=function(){clearTimeout(o)};return e};Q.caret=function(e,t,i){var n;var r=t!==Y;if(i===Y){i=t}if(e[0]){e=e[0]}if(r&&e.disabled){return}try{if(e.selectionStart!==Y){if(r){e.focus();var a=f.mobileOS;if(a.wp||a.android){setTimeout(function(){e.setSelectionRange(t,i)},0)}else{e.setSelectionRange(t,i)}}else{t=[e.selectionStart,e.selectionEnd]}}else if(document.selection){if(_(e).is(":visible")){e.focus()}n=e.createTextRange();if(r){n.collapse(true);n.moveStart("character",t);n.moveEnd("character",i-t);n.select()}else{var o=n.duplicate(),s,l;n.moveToBookmark(document.selection.createRange().getBookmark());o.setEndPoint("EndToStart",n);s=o.text.length;l=s+n.text.length;t=[s,l]}}}catch(e){t=[]}return t};Q.compileMobileDirective=function(t,i){var e=m.angular;t.attr("data-"+Q.ns+"role",t[0].tagName.toLowerCase().replace("kendo-mobile-","").replace("-",""));e.element(t).injector().invoke(["$compile",function(e){e(t)(i);if(!/^\$(digest|apply)$/.test(i.$$phase)){i.$digest()}}]);return Q.widgetInstance(t,Q.mobile.ui)};Q.antiForgeryTokens=function(){var e={},t=_("meta[name=csrf-token],meta[name=_csrf]").attr("content"),i=_("meta[name=csrf-param],meta[name=_csrf_header]").attr("content");_("input[name^='__RequestVerificationToken']").each(function(){e[this.name]=this.value});if(i!==Y&&t!==Y){e[i]=t}return e};Q.cycleForm=function(e){var t=e.find("input, .k-widget").first();var i=e.find("button, .k-button").last();function n(e){var t=Q.widgetInstance(e);if(t&&t.focus){t.focus()}else{e.focus()}}i.on("keydown",function(e){if(e.keyCode==Q.keys.TAB&&!e.shiftKey){e.preventDefault();n(t)}});t.on("keydown",function(e){if(e.keyCode==Q.keys.TAB&&e.shiftKey){e.preventDefault();n(i)}})};Q.focusElement=function(t){var i=[];var e=t.parentsUntil("body").filter(function(e,t){var i=Q.getComputedStyles(t,["overflow"]);return i.overflow!=="visible"}).add(m);e.each(function(e,t){i[e]=_(t).scrollTop()});try{t[0].setActive()}catch(e){t[0].focus()}e.each(function(e,t){_(t).scrollTop(i[e])})};Q.focusNextElement=function(){if(document.activeElement){var e=_(":kendoFocusable");var t=e.index(document.activeElement);if(t>-1){var i=e[t+1]||e[0];i.focus()}}};Q.trim=function(e){if(!!e){return e.toString().trim()}else{return""}};Q.getWidgetFocusableElement=function(e){var t=e.closest(":kendoFocusable"),i=Q.widgetInstance(e),n;if(t.length){n=t}else if(i){n=i.options.name==="Editor"?_(i.body):i.wrapper.find(":kendoFocusable").first()}else{n=e}return n};Q.addAttribute=function(e,t,i){var n=e.attr(t)||"";if(n.indexOf(i)<0){e.attr(t,(n+" "+i).trim())}};Q.removeAttribute=function(e,t,i){var n=e.attr(t)||"";e.attr(t,n.replace(i,"").trim())};Q.toggleAttribute=function(e,t,i){var n=e.attr(t)||"";if(n.indexOf(i)<0){Q.addAttribute(e,t,i)}else{Q.removeAttribute(e,t,i)}};Q.matchesMedia=function(e){var t=Q._bootstrapToMedia(e)||e;return f.matchMedia&&m.matchMedia(t).matches};Q._bootstrapToMedia=function(e){return{xs:"(max-width: 576px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)"}[e]};Q.fileGroupMap={audio:[".aif",".iff",".m3u",".m4a",".mid",".mp3",".mpa",".wav",".wma",".ogg",".wav",".wma",".wpl"],video:[".3g2",".3gp",".avi",".asf",".flv",".m4u",".rm",".h264",".m4v",".mkv",".mov",".mp4",".mpg",".rm",".swf",".vob",".wmv"],image:[".ai",".dds",".heic",".jpe","jfif",".jif",".jp2",".jps",".eps",".bmp",".gif",".jpeg",".jpg",".png",".ps",".psd",".svg",".svgz",".tif",".tiff"],txt:[".doc",".docx",".log",".pages",".tex",".wpd",".wps",".odt",".rtf",".text",".txt",".wks"],presentation:[".key",".odp",".pps",".ppt",".pptx"],data:[".xlr",".xls",".xlsx"],programming:[".tmp",".bak",".msi",".cab",".cpl",".cur",".dll",".dmp",".drv",".icns",".ico",".link",".sys",".cfg",".ini",".asp",".aspx",".cer",".csr",".css",".dcr",".htm",".html",".js",".php",".rss",".xhtml"],pdf:[".pdf"],config:[".apk",".app",".bat",".cgi",".com",".exe",".gadget",".jar",".wsf"],zip:[".7z",".cbr",".gz",".sitx",".arj",".deb",".pkg",".rar",".rpm",".tar.gz",".z",".zip",".zipx"],"disc-image":[".dmg",".iso",".toast",".vcd",".bin",".cue",".mdf"]};Q.getFileGroup=function(e,t){var i=Q.fileGroupMap;var n=Object.keys(i);var r="file";if(e===Y||!e.length){return r}for(var a=0;a<n.length;a+=1){var o=i[n[a]];if(o.indexOf(e.toLowerCase())>-1){return t?"file-"+n[a]:n[a]}}return r};Q.getFileSizeMessage=function(e){var t=["Bytes","KB","MB","GB","TB"];if(e===0){return"0 Byte"}var i=parseInt(Math.floor(Math.log(e)/Math.log(1024)),10);return Math.round(e/Math.pow(1024,i),2)+" "+t[i]};Q.selectorFromClasses=function(e){return"."+e.split(" ").join(".")};var Ue=["primary","secondary","tertiary","inherit","info","success","warning","error","dark","light","inverse"];var je=["solid","outline","flat"];var Ge=["edge","outside","inside"];var qe=["circle","rectangle","rounded","dot","pill"];var $e=[["small","sm"],["medium","md"],["large","lg"]];var Ke=[["top start","top-start"],["top end","top-end"],["bottom start","bottom-start"],["bottom end","bottom-end"]];var Ye=["fixed","static","sticky","absolute"];Q.propertyToCssClassMap={};Q.registerCssClass=function(e,t,i){if(!Q.propertyToCssClassMap[e]){Q.propertyToCssClassMap[e]={}}Q.propertyToCssClassMap[e][t]=i||t};Q.registerCssClasses=function(e,t){for(var i=0;i<t.length;i++){if(b(t[i])){Q.registerCssClass(e,t[i][0],t[i][1])}else{Q.registerCssClass(e,t[i])}}};Q.getValidCssClass=function(e,t,i){var n=Q.propertyToCssClassMap[t][i];if(n){return e+n}};Q.registerCssClasses("themeColor",Ue);Q.registerCssClasses("fill",je);Q.registerCssClasses("postition",Ge);Q.registerCssClasses("shape",qe);Q.registerCssClasses("size",$e);Q.registerCssClasses("align",Ke);Q.registerCssClasses("positionMode",Ye);Q.whenAll=function(e){var n=arguments.length==1&&_.isArray(e)?e:Array.prototype.slice.call(arguments),t=n.length,r=t,a=_.Deferred(),i=0,o=0,s=Array(t),l=Array(t),d=Array(t),u;function c(e,t,i){return function(){if(i!=n){o++}a.notifyWith(t[e]=this,i[e]=Array.prototype.slice.call(arguments));if(!--r){a[(!o?"resolve":"reject")+"With"](t,i)}}}for(;i<t;i++){if((u=n[i])&&_.isFunction(u.promise)){u.promise().done(c(i,d,n)).fail(c(i,s,l))}else{a.notifyWith(this,u);--r}}if(!r){a.resolveWith(d,n)}return a.promise()};(function(){function i(e,t,i,n){var r=_("<form>").attr({action:i,method:"POST",target:n});var a=Q.antiForgeryTokens();a.fileName=t;var o=e.split(";base64,");a.contentType=o[0].replace("data:","");a.base64=o[1];for(var s in a){if(a.hasOwnProperty(s)){_("<input>").attr({value:a[s],name:s,type:"hidden"}).appendTo(r)}}r.appendTo("body").submit().remove()}var n=document.createElement("a");var r="download"in n&&!Q.support.browser.edge;function a(e,t){var i=e;if(typeof e=="string"){var n=e.split(";base64,");var r=n[0];var a=atob(n[1]);var o=new Uint8Array(a.length);for(var s=0;s<a.length;s++){o[s]=a.charCodeAt(s)}i=new Blob([o.buffer],{type:r})}navigator.msSaveBlob(i,t)}function o(e,t){if(m.Blob&&e instanceof Blob){e=URL.createObjectURL(e)}n.download=t;n.href=e;var i=document.createEvent("MouseEvents");i.initMouseEvent("click",true,false,m,0,0,0,0,0,false,false,false,false,0,null);n.dispatchEvent(i);setTimeout(function(){URL.revokeObjectURL(e)})}Q.saveAs=function(e){var t=i;if(!e.forceProxy){if(r){t=o}else if(navigator.msSaveBlob){t=a}}t(e.dataURI,e.fileName,e.proxyURL,e.proxyTarget)}})();Q.proxyModelSetters=function e(i){var n={};Object.keys(i||{}).forEach(function(t){Object.defineProperty(n,t,{get:function(){return i[t]},set:function(e){i[t]=e;i.dirty=true}})});return n};(function(){Q.defaults=Q.defaults||{};Q.setDefaults=function(e,t){var i=e.split(".");var n=Q.defaults;e=i.pop();i.forEach(function(e){if(n[e]===Y){n[e]={}}n=n[e]});if(t.constructor===Object){n[e]=o({},n[e],t)}else{n[e]=t}}})()})(jQuery,window);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.router",["kendo.core"],e)})(function(){var e={id:"router",name:"Router",category:"framework",description:"The Router class is responsible for tracking the application state and navigating between the application states.",depends:["core"],hidden:false};(function(n,e){var t=window.kendo,s="change",r="back",a="same",i=t.support,o=window.location,l=window.history,d=50,u=t.support.browser.msie,c=/^#*/,f=window.document;function h(e,t){if(!t){return e}if(e+"/"===t){e=t}var i=new RegExp("^"+t,"i");if(!i.test(e)){e=t+"/"+e}return o.protocol+"//"+(o.host+"/"+e).replace(/\/\/+/g,"/")}function p(e){return e?"#!":"#"}function v(e){var t=o.href;if(e==="#!"&&t.indexOf("#")>-1&&t.indexOf("#!")<0){return null}return t.split(e)[1]||""}function m(e,t){if(t.indexOf(e)===0){return t.substr(e.length).replace(/\/\//g,"/")}else{return t}}var g=t.Class.extend({back:function(){if(u){setTimeout(function(){l.back()})}else{l.back()}},forward:function(){if(u){setTimeout(function(){l.forward()})}else{l.forward()}},length:function(){return l.length},replaceLocation:function(e){o.replace(e)}});var _=g.extend({init:function(e){this.root=e},navigate:function(e){l.pushState({},f.title,h(e,this.root))},replace:function(e){l.replaceState({},f.title,h(e,this.root))},normalize:function(e){return m(this.root,e)},current:function(){var e=o.pathname;if(o.search){e+=o.search}return m(this.root,e)},change:function(e){n(window).bind("popstate.kendo",e)},stop:function(){n(window).unbind("popstate.kendo")},normalizeCurrent:function(e){var t,i=e.root,n=o.pathname,r=v(p(e.hashBang));if(i===n+"/"){t=i}if(i===n&&r){t=h(r.replace(c,""),i)}if(t){l.pushState({},f.title,t)}}});function b(e){return e.replace(/^(#)?/,"#")}function w(e){return e.replace(/^(#(!)?)?/,"#!")}var k=g.extend({init:function(e){this._id=t.guid();this.prefix=p(e);this.fix=e?w:b},navigate:function(e){o.hash=this.fix(e)},replace:function(e){this.replaceLocation(this.fix(e))},normalize:function(e){if(e.indexOf(this.prefix)<0){return e}else{return e.split(this.prefix)[1]}},change:function(e){if(i.hashChange){n(window).on("hashchange."+this._id,e)}else{this._interval=setInterval(e,d)}},stop:function(){n(window).off("hashchange."+this._id);clearInterval(this._interval)},current:function(){return v(this.prefix)},normalizeCurrent:function(e){var t=o.pathname,i=e.root;if(e.pushState&&i!==t){this.replaceLocation(i+this.prefix+m(i,t));return true}return false}});var y=t.Observable.extend({start:function(e){e=e||{};this.bind([s,r,a],e);if(this._started){return}this._started=true;e.root=e.root||"/";var t=this.createAdapter(e),i;if(t.normalizeCurrent(e)){return}i=t.current();n.extend(this,{adapter:t,root:e.root,historyLength:t.length(),current:i,locations:[i]});t.change(n.proxy(this,"_checkUrl"))},createAdapter:function(e){return i.pushState&&e.pushState?new _(e.root):new k(e.hashBang)},stop:function(){if(!this._started){return}this.adapter.stop();this.unbind(s);this._started=false},change:function(e){this.bind(s,e)},replace:function(t,e){this._navigate(t,e,function(e){e.replace(t);this.locations[this.locations.length-1]=this.current})},navigate:function(t,e){if(t==="#:back"){this.backCalled=true;this.adapter.back();return}this._navigate(t,e,function(e){e.navigate(t);this.locations.push(this.current)})},_navigate:function(e,t,i){var n=this.adapter;e=n.normalize(e);if(this.current===e||this.current===decodeURIComponent(e)){this.trigger(a);return}if(!t){if(this.trigger(s,{url:e,decode:false})){return}}this.current=e;i.call(this,n);this.historyLength=n.length()},_checkUrl:function(){var e=this.adapter,t=e.current(),i=e.length(),n=this.historyLength===i,r=t===this.locations[this.locations.length-2]&&n,a=this.backCalled,o=this.current;if(t===null||this.current===t||this.current===decodeURIComponent(t)){return true}this.historyLength=i;this.backCalled=false;this.current=t;if(r&&this.trigger("back",{url:o,to:t})){e.forward();this.current=o;return}if(this.trigger(s,{url:t,backButtonPressed:!a})){if(r){e.forward()}else{e.back();this.historyLength--}this.current=o;return}if(r){this.locations.pop()}else{this.locations.push(t)}}});t.History=y;t.History.HistoryAdapter=g;t.History.HashAdapter=k;t.History.PushStateAdapter=_;t.absoluteURL=h;t.history=new y})(window.kendo.jQuery);(function(){var l=window.kendo,a=l.history,t=l.Observable,o="init",d="routeMissing",u="change",i="back",n="same",r=/\((.*?)\)/g,s=/(\(\?)?:\w+/g,c=/\*\w+/g,f=/[\-{}\[\]+?.,\\\^$|#\s]/g;function h(e,t){return t?e:"([^/]+)"}function p(e,t){return new RegExp("^"+e.replace(f,"\\$&").replace(r,"(?:$1)?").replace(s,h).replace(c,"(.*?)")+"$",t?"i":"")}function v(e){return e.replace(/(\?.*)|(#.*)/g,"")}var m=l.Class.extend({init:function(e,t,i){if(!(e instanceof RegExp)){e=p(e,i)}this.route=e;this._callback=t},callback:function(e,t,i){var n,r=0,a,o=l.parseQueryStringParams(e);o._back=t;e=v(e);n=this.route.exec(e).slice(1);a=n.length;if(i){for(;r<a;r++){if(typeof n[r]!=="undefined"){n[r]=decodeURIComponent(n[r])}}}n.push(o);this._callback.apply(null,n)},worksWith:function(e,t,i){if(this.route.test(v(e))){this.callback(e,t,i);return true}else{return false}}});var e=t.extend({init:function(e){if(!e){e={}}t.fn.init.call(this);this.routes=[];this.pushState=e.pushState;this.hashBang=e.hashBang;this.root=e.root;this.ignoreCase=e.ignoreCase!==false;this.bind([o,d,u,n,i],e)},destroy:function(){a.unbind(u,this._urlChangedProxy);a.unbind(n,this._sameProxy);a.unbind(i,this._backProxy);this.unbind()},start:function(){var t=this,e=function(){t._same()},i=function(e){t._back(e)},n=function(e){t._urlChanged(e)};a.start({same:e,change:n,back:i,pushState:t.pushState,hashBang:t.hashBang,root:t.root});var r={url:a.current||"/",preventDefault:$.noop};if(!t.trigger(o,r)){t._urlChanged(r)}this._urlChangedProxy=n;this._backProxy=i},route:function(e,t){this.routes.push(new m(e,t,this.ignoreCase))},navigate:function(e,t){l.history.navigate(e,t)},replace:function(e,t){l.history.replace(e,t)},_back:function(e){if(this.trigger(i,{url:e.url,to:e.to})){e.preventDefault()}},_same:function(){this.trigger(n)},_urlChanged:function(e){var t=e.url;var i=!!e.decode;var n=e.backButtonPressed;if(!t){t="/"}if(this.trigger(u,{url:e.url,params:l.parseQueryStringParams(e.url),backButtonPressed:n})){e.preventDefault();return}var r=0,a=this.routes,o,s=a.length;for(;r<s;r++){o=a[r];if(o.worksWith(t,n,i)){return}}if(this.trigger(d,{url:t,params:l.parseQueryStringParams(t),backButtonPressed:n})){e.preventDefault()}}});l.Router=e})();return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.data.odata",["kendo.core"],e)})(function(){var e={id:"data.odata",name:"OData",category:"framework",depends:["core"],hidden:true};(function(h,p){var v=window.kendo,l=h.extend,d="\r\n",u="\r\n\r\n",c=v.isFunction,m={eq:"eq",neq:"ne",gt:"gt",gte:"ge",lt:"lt",lte:"le",contains:"substringof",doesnotcontain:"substringof",endswith:"endswith",startswith:"startswith",isnull:"eq",isnotnull:"ne",isnullorempty:"eq",isnotnullorempty:"ne",isempty:"eq",isnotempty:"ne"},g=l({},m,{contains:"contains"}),s={pageSize:h.noop,page:h.noop,filter:function(e,t,i){if(t){t=_(t,i);if(t){e.$filter=t}}},sort:function(e,t){var i=h.map(t,function(e){var t=e.field.replace(/\./g,"/");if(e.dir==="desc"){t+=" desc"}return t}).join(",");if(i){e.$orderby=i}},skip:function(e,t){if(t){e.$skip=t}},take:function(e,t){if(t){e.$top=t}}},f={read:{dataType:"jsonp"}};function _(e,t){var i=[],n=e.logic||"and",r,a,o,s,l,d,u,c,f=e.filters;for(r=0,a=f.length;r<a;r++){e=f[r];o=e.field;u=e.value;d=e.operator;if(e.filters){e=_(e,t)}else{c=e.ignoreCase;o=o.replace(/\./g,"/");e=m[d];if(t){e=g[d]}if(d==="isnullorempty"){e=v.format("{0} {1} null or {0} {1} ''",o,e)}else if(d==="isnotnullorempty"){e=v.format("{0} {1} null and {0} {1} ''",o,e)}else if(d==="isnull"||d==="isnotnull"){e=v.format("{0} {1} null",o,e)}else if(d==="isempty"||d==="isnotempty"){e=v.format("{0} {1} ''",o,e)}else if(e&&u!==p){s=h.type(u);if(s==="string"){l="'{1}'";u=u.replace(/'/g,"''");if(c===true){o="tolower("+o+")"}}else if(s==="date"){if(t){l="{1:yyyy-MM-ddTHH:mm:ss+00:00}";u=v.timezone.apply(u,"Etc/UTC")}else{l="datetime'{1:yyyy-MM-ddTHH:mm:ss}'"}}else{l="{1}"}if(e.length>3){if(e!=="substringof"){l="{0}({2},"+l+")"}else{l="{0}("+l+",{2})";if(d==="doesnotcontain"){if(t){l="{0}({2},'{1}') eq -1";e="indexof"}else{l+=" eq false"}}}}else{l="{2} {0} "+l}e=v.format(l,e,u,o)}}i.push(e)}e=i.join(" "+n+" ");if(i.length>1){e="("+e+")"}return e}function i(e){for(var t in e){if(t.indexOf("@odata")===0){delete e[t]}}}function t(){return Math.floor((1+Math.random())*65536).toString(16).substr(1)}function b(e){return e+t()+"-"+t()+"-"+t()}function w(e,t){var i=d+"--"+e;if(t){i+="--"}return i}function k(e,t,i,n){var r=e.options[n].url;var a=v.format("{0} ",i);if(c(r)){return a+r(t)}else{return a+r}}function y(e,t){var i="";i+=w(e,false);i+=d+"Content-Type: application/http";i+=d+"Content-Transfer-Encoding: binary";i+=d+"Content-ID: "+t;return i}function x(e){var t="";t+=d+"Content-Type: application/json;odata=minimalmetadata";t+=d+"Prefer: return=representation";t+=u+v.stringify(e);return t}function C(e,t,i,n,r,a){var o="";for(var s=0;s<e.length;s++){o+=y(t,i);o+=u+k(r,e[s],r.options[n].type,n)+" HTTP/1.1";if(!a){o+=x(e[s])}o+=d;i++}return o}function S(e,t,i,n,r,a,o){var s="";s+=T(t,i);s+=C(e,i,n,a,r,o);s+=w(i,true);s+=d;return s}function T(e,t){var i="";i+="--"+e+d;i+="Content-Type: multipart/mixed; boundary="+t+d;return i}function n(e,t){var i=l({},e.options.batch);var n=b("sf_batch_");var r="";var a=0;var o=e.options.batch.url;var s=b("sf_changeset_");i.type=e.options.batch.type;i.url=c(o)?o():o;i.headers=l(i.headers||{},{"Content-Type":"multipart/mixed; boundary="+n});if(t.updated.length){r+=S(t.updated,n,s,a,e,"update",false);a+=t.updated.length;s=b("sf_changeset_")}if(t.destroyed.length){r+=S(t.destroyed,n,s,a,e,"destroy",true);a+=t.destroyed.length;s=b("sf_changeset_")}if(t.created.length){r+=S(t.created,n,s,a,e,"create",false)}r+=w(n,true);i.data=r;return i}function o(e){var t=e.match(/--changesetresponse_[a-z0-9-]+$/gm);var i=0;var n=[];var r;var a;var o;var s;var l;n.push({models:[],passed:true});for(var d=0;d<t.length;d++){s=t[d];if(s.lastIndexOf("--",s.length-1)){if(d<t.length-1){n.push({models:[],passed:true})}continue}if(!i){i=e.indexOf(s)}else{i=e.indexOf(s,i+s.length)}r=e.substring(i,e.indexOf("--",i+1));a=r.match(/^HTTP\/1\.\d (\d{3}) (.*)$/gm).pop();o=v.parseFloat(a.match(/\d{3}/g).pop());if(o>=200&&o<=299){l=r.match(/\{.*\}/gm);if(l){n[n.length-1].models.push(JSON.parse(l[0]))}}else{n[n.length-1].passed=false}}return n}l(true,v.data,{schemas:{odata:{type:"json",data:function(e){return e.d.results||[e.d]},total:"d.__count"}},transports:{odata:{read:{cache:true,dataType:"jsonp",jsonp:"$callback"},update:{cache:true,dataType:"json",contentType:"application/json",type:"PUT"},create:{cache:true,dataType:"json",contentType:"application/json",type:"POST"},destroy:{cache:true,dataType:"json",type:"DELETE"},parameterMap:function(e,t,i){var n,r,a,o;e=e||{};t=t||"read";o=(this.options||f)[t];o=o?o.dataType:"json";if(t==="read"){n={$inlinecount:"allpages"};if(o!="json"){n.$format="json"}for(a in e){if(s[a]){s[a](n,e[a],i)}else{n[a]=e[a]}}}else{if(o!=="json"){throw new Error("Only json dataType can be used for "+t+" operation.")}if(t!=="destroy"){for(a in e){r=e[a];if(typeof r==="number"){e[a]=r+""}}n=v.stringify(e)}}return n}}}});l(true,v.data,{schemas:{"odata-v4":{type:"json",data:function(e){if(h.isArray(e)){for(var t=0;t<e.length;t++){i(e[t])}return e}else{e=h.extend({},e);i(e);if(e.value){return e.value}return[e]}},total:function(e){return e["@odata.count"]}}},transports:{"odata-v4":{batch:{type:"POST"},read:{cache:true,dataType:"json"},update:{cache:true,dataType:"json",contentType:"application/json;IEEE754Compatible=true",type:"PUT"},create:{cache:true,dataType:"json",contentType:"application/json;IEEE754Compatible=true",type:"POST"},destroy:{cache:true,dataType:"json",type:"DELETE"},parameterMap:function(e,t){var i=v.data.transports.odata.parameterMap(e,t,true);if(t=="read"){i.$count=true;delete i.$inlinecount}if(i&&i.$filter){i.$filter=i.$filter.replace(/('[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}')/gi,function(e){return e.substring(1,e.length-1)})}return i},submit:function(r){var e=this;var t=n(e,r.data);var a=r.data;if(!a.updated.length&&!a.destroyed.length&&!a.created.length){return}h.ajax(l(true,{},{success:function(e){var t=o(e);var i=0;var n;if(a.updated.length){n=t[i];if(n.passed){r.success(n.models.length?n.models:[],"update")}i++}if(a.destroyed.length){n=t[i];if(n.passed){r.success([],"destroy")}i++}if(a.created.length){n=t[i];if(n.passed){r.success(n.models,"create")}}},error:function(e,t,i){r.error(e,t,i)}},t))}}}})})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.data.xml",["kendo.core"],e)})(function(){var e={id:"data.xml",name:"XML",category:"framework",depends:["core"],hidden:true};(function(f,c){var h=window.kendo,p=f.isArray,v=f.isPlainObject,m=f.map,g=f.each,_=f.extend,t=h.getter,e=h.Class;var i=e.extend({init:function(e){var i=this,t=e.total,r=e.model,n=e.parse,a=e.errors,o=e.serialize,s=e.data;if(r){if(v(r)){var l=e.modelBase||h.data.Model;if(r.fields){g(r.fields,function(e,t){if(v(t)&&t.field){if(!f.isFunction(t.field)){t=_(t,{field:i.getter(t.field)})}}else{t={field:i.getter(t)}}r.fields[e]=t})}var d=r.id;if(d){var u={};u[i.xpathToMember(d,true)]={field:i.getter(d)};r.fields=_(u,r.fields);r.id=i.xpathToMember(d)}r=l.define(r)}i.model=r}if(t){if(typeof t=="string"){t=i.getter(t);i.total=function(e){return parseInt(t(e),10)}}else if(typeof t=="function"){i.total=t}}if(a){if(typeof a=="string"){a=i.getter(a);i.errors=function(e){return a(e)||null}}else if(typeof a=="function"){i.errors=a}}if(s){if(typeof s=="string"){s=i.xpathToMember(s);i.data=function(e){var t=i.evaluate(e,s),n;t=p(t)?t:[t];if(i.model&&r.fields){n=new i.model;return m(t,function(e){if(e){var t={},i;for(i in r.fields){t[i]=n._parse(i,r.fields[i].field(e))}return t}})}return t}}else if(typeof s=="function"){i.data=s}}if(typeof n=="function"){var c=i.parse;i.parse=function(e){var t=n.call(i,e);return c.call(i,t)}}if(typeof o=="function"){i.serialize=o}},total:function(e){return this.data(e).length},errors:function(e){return e?e.errors:null},serialize:function(e){return e},parseDOM:function(e){var t={},i,n,r,a,o,s,l=e.attributes,d=l.length,u;for(u=0;u<d;u++){s=l[u];t["@"+s.nodeName]=s.nodeValue}for(n=e.firstChild;n;n=n.nextSibling){r=n.nodeType;if(r===3||r===4){t["#text"]=n.nodeValue}else if(r===1){i=this.parseDOM(n);a=n.nodeName;o=t[a];if(p(o)){o.push(i)}else if(o!==c){o=[o,i]}else{o=i}t[a]=o}}return t},evaluate:function(e,t){var i=t.split("."),n,r,a,o,s;while(n=i.shift()){e=e[n];if(p(e)){r=[];t=i.join(".");for(s=0,a=e.length;s<a;s++){o=this.evaluate(e[s],t);o=p(o)?o:[o];r.push.apply(r,o)}return r}}return e},parse:function(e){var t,i,n={};t=e.documentElement||f.parseXML(e).documentElement;i=this.parseDOM(t);n[t.nodeName]=i;return n},xpathToMember:function(e,t){if(!e){return""}e=e.replace(/^\//,"").replace(/\//g,".");if(e.indexOf("@")>=0){return e.replace(/\.?(@.*)/,t?"$1":'["$1"]')}if(e.indexOf("text()")>=0){return e.replace(/(\.?text\(\))/,t?"#text":'["#text"]')}return e},getter:function(e){return t(this.xpathToMember(e),true)}});f.extend(true,h.data,{XmlDataReader:i,readers:{xml:i}})})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.data",["kendo.core","kendo.data.odata","kendo.data.xml"],e)})(function(){var e={id:"data",name:"Data source",category:"framework",description:"Powerful component for using local and remote data.Fully supports CRUD, Sorting, Paging, Filtering, Grouping, and Aggregates.",depends:["core"],features:[{id:"data-odata",name:"OData",description:"Support for accessing Open Data Protocol (OData) services.",depends:["data.odata"]},{id:"data-signalr",name:"SignalR",description:"Support for binding to SignalR hubs.",depends:["data.signalr"]},{id:"data-XML",name:"XML",description:"Support for binding to XML.",depends:["data.xml"]}]};(function(g,T){var v=g.extend,m=g.proxy,_=g.isPlainObject,f=g.isEmptyObject,u=g.isArray,H=g.grep,i=g.ajax,b,w=g.each,h=g.noop,k=window.kendo,p=k.isFunction,o=k.Observable,e=k.Class,y="string",N="function",n="asc",O="create",V="read",W="update",U="destroy",x="change",j="sync",G="get",a="error",c="requestStart",s="progress",C="requestEnd",q=[O,V,W,U],t=function(e){return e},S=k.getter,$=k.stringify,D=Math,K=[].push,Y=[].join,Q=[].pop,X=[].splice,Z=[].shift,A=[].slice,J=[].unshift,ee={}.toString,te=k.support.stableSort,ie=/^\/Date\((.*?)\)\/$/,ne=[];var E=o.extend({init:function(e,t){var i=this;i.type=t||d;o.fn.init.call(i);i.length=e.length;i.wrapAll(e,i)},at:function(e){return this[e]},toJSON:function(e){var t,i=this.length,n,r=new Array(i);for(t=0;t<i;t++){n=this[t];if(n instanceof d){n=n.toJSON(e)}r[t]=n}return r},parent:h,wrapAll:function(e,t){var i=this,n,r,a=function(){return i};t=t||[];for(n=0,r=e.length;n<r;n++){t[n]=i.wrap(e[n],a)}return t},wrap:function(e,t){var i=this,n;if(e!==null&&ee.call(e)==="[object Object]"){n=e instanceof i.type||e instanceof I;if(!n){e=e instanceof d?e.toJSON():e;e=new i.type(e)}e.parent=t;e.bind(x,function(e){i.trigger(x,{field:e.field,node:e.node,index:e.index,items:e.items||[this],action:e.node?e.action||"itemloaded":"itemchange"})})}return e},push:function(){var e=this.length,t=this.wrapAll(arguments),i;i=K.apply(this,t);if(!this.omitChangeEvent){this.trigger(x,{action:"add",index:e,items:t})}return i},slice:A,sort:[].sort,join:Y,pop:function(){var e=this.length,t=Q.apply(this);if(e){this.trigger(x,{action:"remove",index:e-1,items:[t]})}return t},splice:function(e,t,i){var n=this.wrapAll(A.call(arguments,2)),r,a,o;r=X.apply(this,[e,t].concat(n));if(r.length){if(!this.omitChangeEvent){this.trigger(x,{action:"remove",index:e,items:r})}for(a=0,o=r.length;a<o;a++){if(r[a]&&r[a].children){r[a].unbind(x)}}}if(i){if(!this.omitChangeEvent){this.trigger(x,{action:"add",index:e,items:n})}}return r},shift:function(){var e=this.length,t=Z.apply(this);if(e){this.trigger(x,{action:"remove",index:0,items:[t]})}return t},unshift:function(){var e=this.wrapAll(arguments),t;t=J.apply(this,e);this.trigger(x,{action:"add",index:0,items:e});return t},indexOf:function(e){var t=this,i,n;for(i=0,n=t.length;i<n;i++){if(t[i]===e){return i}}return-1},forEach:function(e,t){var i=0;var n=this.length;var r=t||window;for(;i<n;i++){e.call(r,this[i],i,this)}},map:function(e,t){var i=0;var n=[];var r=this.length;var a=t||window;for(;i<r;i++){n[i]=e.call(a,this[i],i,this)}return n},reduce:function(e){var t=0,i,n=this.length;if(arguments.length==2){i=arguments[1]}else if(t<n){i=this[t++]}for(;t<n;t++){i=e(i,this[t],t,this)}return i},reduceRight:function(e){var t=this.length-1,i;if(arguments.length==2){i=arguments[1]}else if(t>0){i=this[t--]}for(;t>=0;t--){i=e(i,this[t],t,this)}return i},filter:function(e,t){var i=0;var n=[];var r;var a=this.length;var o=t||window;for(;i<a;i++){r=this[i];if(e.call(o,r,i,this)){n[n.length]=r}}return n},find:function(e,t){var i=0;var n;var r=this.length;var a=t||window;for(;i<r;i++){n=this[i];if(e.call(a,n,i,this)){return n}}},every:function(e,t){var i=0;var n;var r=this.length;var a=t||window;for(;i<r;i++){n=this[i];if(!e.call(a,n,i,this)){return false}}return true},some:function(e,t){var i=0;var n;var r=this.length;var a=t||window;for(;i<r;i++){n=this[i];if(e.call(a,n,i,this)){return true}}return false},remove:function(e){var t=this.indexOf(e);if(t!==-1){this.splice(t,1)}},empty:function(){this.splice(0,this.length)}});if(typeof Symbol!=="undefined"&&Symbol.iterator&&!E.prototype[Symbol.iterator]){E.prototype[Symbol.iterator]=[][Symbol.iterator]}var re=E.extend({init:function(e,t,i){o.fn.init.call(this);this.type=t||d;if(i){this._events=i}for(var n=0;n<e.length;n++){this[n]=e[n]}this.length=n;this._parent=m(function(){return this},this)},at:function(e){var t=this[e];if(!(t instanceof this.type)){t=this[e]=this.wrap(t,this._parent)}else{t.parent=this._parent}return t}});function ae(n,r,a,o){return function(e){var t={},i;for(i in e){t[i]=e[i]}if(o){t.field=a+"."+e.field}else{t.field=a}if(r==x&&n._notifyChange){n._notifyChange(t)}n.trigger(r,t)}}function oe(e,t){var i=[];e=e||{};while(e){Object.getOwnPropertyNames(e).forEach(function(e){if(i.indexOf(e)===-1&&(!t||ne.indexOf(e)<0)){i.push(e)}});e=Object.getPrototypeOf(e)}return i}ne=oe({},false);var d=o.extend({init:function(t){var i=this,n,e=oe(t,true),r=function(){return i};o.fn.init.call(this);this._handlers={};e.forEach(function(e){n=t[e];if(typeof n==="object"&&n&&!n.getTime&&e.charAt(0)!="_"){n=i.wrap(n,e,r)}i[e]=n});i.uid=k.guid()},shouldSerialize:function(e,t){return this.hasOwnProperty(e)&&e!=="_handlers"&&e!=="_events"&&(t&&t[e]||typeof this[e]!==N)&&e!=="uid"},forEach:function(e){for(var t in this){if(this.shouldSerialize(t)){e(this[t],t)}}},toJSON:function(e){var t={},i,n;for(n in this){if(this.shouldSerialize(n,e)){i=this[n];if(i instanceof d||i instanceof E){i=i.toJSON(e)}t[n]=i}}return t},get:function(e){var t=this,i;t.trigger(G,{field:e});if(e==="this"){i=t}else{i=k.getter(e,true)(t)}return i},_set:function(e,t){var i=this;var n=e.indexOf(".")>=0;if(n){var r=e.split("."),a="";while(r.length>1){a+=r.shift();var o=k.getter(a,true)(i);if(o instanceof d){o.set(r.join("."),t);return n}a+="."}}k.setter(e)(i,t);return n},set:function(e,t){var i=this,n=false,r=e.indexOf(".")>=0,a=k.getter(e,true)(i);if(a!==t){if(a instanceof o&&this._handlers[e]){if(this._handlers[e].get){a.unbind(G,this._handlers[e].get)}a.unbind(x,this._handlers[e].change)}n=i.trigger("set",{field:e,value:t});if(!n){if(!r){t=i.wrap(t,e,function(){return i})}if(!i._set(e,t)||e.indexOf("(")>=0||e.indexOf("[")>=0){i.trigger(x,{field:e})}}}return n},parent:h,wrap:function(e,t,i){var n=this;var r;var a;var o=ee.call(e);if(e!=null&&(o==="[object Object]"||o==="[object Array]")){var s=e instanceof E;var l=e instanceof B;if(o==="[object Object]"&&!l&&!s){if(!(e instanceof d)){e=new d(e)}r=ae(n,G,t,true);e.bind(G,r);a=ae(n,x,t,true);e.bind(x,a);n._handlers[t]={get:r,change:a}}else if(o==="[object Array]"||s||l){if(!s&&!l){e=new E(e)}a=ae(n,x,t,false);e.bind(x,a);n._handlers[t]={change:a}}e.parent=i}return e}});function se(e,t){if(e===t){return true}var i=g.type(e),n=g.type(t),r;if(i!==n){return false}if(i==="date"){return e.getTime()===t.getTime()}if(i!=="object"&&i!=="array"){return false}for(r in e){if(!se(e[r],t[r])){return false}}return true}var le={number:function(e){if(typeof e===y&&e.toLowerCase()==="null"){return null}return k.parseFloat(e)},date:function(e){if(typeof e===y&&e.toLowerCase()==="null"){return null}return k.parseDate(e)},boolean:function(e){if(typeof e===y){if(e.toLowerCase()==="null"){return null}else{return e.toLowerCase()==="true"}}return e!=null?!!e:e},string:function(e){if(typeof e===y&&e.toLowerCase()==="null"){return null}return e!=null?e+"":e},default:function(e){return e}};var de={string:"",number:0,date:new Date,boolean:false,default:""};function ue(e,t){var i,n;for(n in e){i=e[n];if(_(i)&&i.field&&i.field===t){return i}else if(i===t){return i}}return null}var I=d.extend({init:function(e){var t=this;if(!e||g.isEmptyObject(e)){e=g.extend({},t.defaults,e);if(t._initializers){for(var i=0;i<t._initializers.length;i++){var n=t._initializers[i];e[n]=t.defaults[n]()}}}d.fn.init.call(t,e);t.dirty=false;t.dirtyFields={};if(t.idField){t.id=t.get(t.idField);if(t.id===T){t.id=t._defaultId}}},shouldSerialize:function(e){return d.fn.shouldSerialize.call(this,e)&&e!=="uid"&&!(this.idField!=="id"&&e==="id")&&e!=="dirty"&&e!=="dirtyFields"&&e!=="_accessors"},_parse:function(e,t){var i=this,n=e,r=i.fields||{},a;e=r[e];if(!e){e=ue(r,n)}if(e){a=e.parse;if(!a&&e.type){a=le[e.type.toLowerCase()]}}return a?a(t):t},_notifyChange:function(e){var t=e.action;if(t=="add"||t=="remove"){this.dirty=true;this.dirtyFields[e.field]=true}},editable:function(e){e=(this.fields||{})[e];return e?e.editable!==false:true},set:function(e,t){var i=this;var n=i.dirty;if(i.editable(e)){t=i._parse(e,t);if(!se(t,i.get(e))){i.dirty=true;i.dirtyFields[e]=true;if(d.fn.set.call(i,e,t)&&!n){i.dirty=n;if(!i.dirty){i.dirtyFields[e]=false}}}else{i.trigger("equalSet",{field:e,value:t})}}},accept:function(e){var t=this,i=function(){return t},n;for(n in e){var r=e[n];if(n.charAt(0)!="_"){r=t.wrap(e[n],n,i)}t._set(n,r)}if(t.idField){t.id=t.get(t.idField)}t.dirty=false;t.dirtyFields={}},isNew:function(){return this.id===this._defaultId}});I.define=function(e,t){if(t===T){t=e;e=I}var i,n=v({defaults:{}},t),r,a,o,s,l,d,u={},c,f=n.id,h=[];if(f){n.idField=f}if(n.id){delete n.id}if(f){n.defaults[f]=n._defaultId=""}if(ee.call(n.fields)==="[object Array]"){for(l=0,d=n.fields.length;l<d;l++){a=n.fields[l];if(typeof a===y){u[a]={}}else if(a.field){u[a.field]=a}}n.fields=u}for(r in n.fields){a=n.fields[r];o=a.type||"default";s=null;c=r;r=typeof a.field===y?a.field:r;if(!a.nullable){s=n.defaults[c!==r?c:r]=a.defaultValue!==T?a.defaultValue:de[o.toLowerCase()];if(typeof s==="function"){h.push(r)}}if(t.id===r){n._defaultId=s}n.defaults[c!==r?c:r]=s;a.parse=a.parse||le[o]}if(h.length>0){n._initializers=h}i=e.extend(n);i.define=function(e){return I.define(i,e)};if(n.fields){i.fields=n.fields;i.idField=n.idField}return i};var l={selector:function(e){return p(e)?e:S(e)},compare:function(e){var i=this.selector(e);return function(e,t){e=i(e);t=i(t);if(e==null&&t==null){return 0}if(e==null){return-1}if(t==null){return 1}if(e.localeCompare){return e.localeCompare(t)}return e>t?1:e<t?-1:0}},create:function(e){var i=e.compare||this.compare(e.field);if(e.dir=="desc"){return function(e,t){return i(t,e,true)}}return i},combine:function(a){return function(e,t){var i=a[0](e,t),n,r;for(n=1,r=a.length;n<r;n++){i=i||a[n](e,t)}return i}}};var ce=v({},l,{asc:function(e){var r=this.selector(e);return function(e,t){var i=r(e);var n=r(t);if(i&&i.getTime&&n&&n.getTime){i=i.getTime();n=n.getTime()}if(i===n){return e.__position-t.__position}if(i==null){return-1}if(n==null){return 1}if(i.localeCompare){return i.localeCompare(n)}return i>n?1:-1}},desc:function(e){var r=this.selector(e);return function(e,t){var i=r(e);var n=r(t);if(i&&i.getTime&&n&&n.getTime){i=i.getTime();n=n.getTime()}if(i===n){return e.__position-t.__position}if(i==null){return 1}if(n==null){return-1}if(n.localeCompare){return n.localeCompare(i)}return i<n?1:-1}},create:function(e){return this[e.dir](e.field)}});b=function(e,t){var i,n=e.length,r=new Array(n);for(i=0;i<n;i++){r[i]=t(e[i],i,e)}return r};var fe=function(){function o(e){if(typeof e=="string"){e=e.replace(/[\r\n]+/g,"")}return JSON.stringify(e)}function e(r){return function(e,t,i,n){t+="";if(i){e="("+e+" + '').toString()"+(n?".toLocaleLowerCase('"+n+"')":".toLowerCase()");t=n?t.toLocaleLowerCase(n):t.toLowerCase()}return r(e,o(t),i)}}function r(e,t,i,n,r){if(i!=null){if(typeof i===y){var a=ie.exec(i);if(a){i=new Date(+a[1])}else if(n){i=o(r?i.toLocaleLowerCase(r):i.toLowerCase());t="(("+t+" || '')+'')"+(r?".toLocaleLowerCase('"+r+"')":".toLowerCase()")}else{i=o(i)}}if(i.getTime){t="("+t+"&&"+t+".getTime?"+t+".getTime():"+t+")";i=i.getTime()}}return t+" "+e+" "+i}function i(e){for(var t="/^",i=false,n=0;n<e.length;++n){var r=e.charAt(n);if(i){t+="\\"+r}else if(r=="~"){i=true;continue}else if(r=="*"){t+=".*"}else if(r=="?"){t+="."}else if(".+^$()[]{}|\\/\n\r\u2028\u2029".indexOf(r)>=0){t+="\\"+r}else{t+=r}i=false}return t+"$/"}return{quote:function(e){if(e&&e.getTime){return"new Date("+e.getTime()+")"}return o(e)},eq:function(e,t,i,n){return r("==",e,t,i,n)},neq:function(e,t,i,n){return r("!=",e,t,i,n)},gt:function(e,t,i){return r(">",e,t,i)},gte:function(e,t,i){return r(">=",e,t,i)},lt:function(e,t,i){return r("<",e,t,i)},lte:function(e,t,i){return r("<=",e,t,i)},startswith:e(function(e,t){return e+".lastIndexOf("+t+", 0) == 0"}),doesnotstartwith:e(function(e,t){return e+".lastIndexOf("+t+", 0) == -1"}),endswith:e(function(e,t){var i=t?t.length-2:0;return e+".indexOf("+t+", "+e+".length - "+i+") >= 0"}),doesnotendwith:e(function(e,t){var i=t?t.length-2:0;return e+".indexOf("+t+", "+e+".length - "+i+") < 0"}),contains:e(function(e,t){return e+".indexOf("+t+") >= 0"}),doesnotcontain:e(function(e,t){return e+".indexOf("+t+") == -1"}),matches:e(function(e,t){t=t.substring(1,t.length-1);return i(t)+".test("+e+")"}),doesnotmatch:e(function(e,t){t=t.substring(1,t.length-1);return"!"+i(t)+".test("+e+")"}),isempty:function(e){return e+" === ''"},isnotempty:function(e){return e+" !== ''"},isnull:function(e){return"("+e+" == null)"},isnotnull:function(e){return"("+e+" != null)"},isnullorempty:function(e){return"("+e+" === null) || ("+e+" === '')"},isnotnullorempty:function(e){return"("+e+" !== null) && ("+e+" !== '')"}}}();function M(e){this.data=e||[]}M.filterExpr=function(e){var t=[],i={and:" && ",or:" || "},n,r,a,o,s=[],l=[],d,u,c=e.filters;for(n=0,r=c.length;n<r;n++){a=c[n];d=a.field;u=a.operator;if(a.filters){o=M.filterExpr(a);a=o.expression.replace(/__o\[(\d+)\]/g,function(e,t){t=+t;return"__o["+(l.length+t)+"]"}).replace(/__f\[(\d+)\]/g,function(e,t){t=+t;return"__f["+(s.length+t)+"]"});l.push.apply(l,o.operators);s.push.apply(s,o.fields)}else{if(typeof d===N){o="__f["+s.length+"](d)";s.push(d)}else{o=k.expr(d)}if(typeof u===N){a="__o["+l.length+"]("+o+", "+fe.quote(a.value)+")";l.push(u)}else{a=fe[(u||"eq").toLowerCase()](o,a.value,a.ignoreCase!==T?a.ignoreCase:true,e.accentFoldingFiltering)}}t.push(a)}return{expression:"("+t.join(i[e.logic])+")",fields:s,operators:l}};function R(e,t){if(e){var i=typeof e===y?{field:e,dir:t}:e,n=u(i)?i:i!==T?[i]:[];return H(n,function(e){return!!e.dir})}}function he(e,t){var i={};if(e){var n=typeof e===y?{field:e,dir:t}:e,r=u(n)?n:n!==T?[n]:[];for(var a=0;a<r.length;a++){i[r[a].field]={dir:r[a].dir,index:a+1}}}return i}var pe={"==":"eq",equals:"eq",isequalto:"eq",equalto:"eq",equal:"eq","!=":"neq",ne:"neq",notequals:"neq",isnotequalto:"neq",notequalto:"neq",notequal:"neq","<":"lt",islessthan:"lt",lessthan:"lt",less:"lt","<=":"lte",le:"lte",islessthanorequalto:"lte",lessthanequal:"lte",">":"gt",isgreaterthan:"gt",greaterthan:"gt",greater:"gt",">=":"gte",isgreaterthanorequalto:"gte",greaterthanequal:"gte",ge:"gte",notsubstringof:"doesnotcontain",isnull:"isnull",isempty:"isempty",isnotempty:"isnotempty"};function ve(e){var t,i,n,r,a=e.filters;if(a){for(t=0,i=a.length;t<i;t++){n=a[t];r=n.operator;if(r&&typeof r===y){n.operator=pe[r.toLowerCase()]||r}ve(n)}}}function F(e){if(e&&!f(e)){if(u(e)||!e.filters){e={logic:"and",filters:u(e)?e:[e]}}ve(e);return e}}M.normalizeFilter=F;function me(e,t){if(e.logic||t.logic){return false}return e.field===t.field&&e.value===t.value&&e.operator===t.operator}function ge(e){e=e||{};if(f(e)){return{logic:"and",filters:[]}}return F(e)}function _e(e,t){if(t.logic||e.field>t.field){return 1}else if(e.field<t.field){return-1}else{return 0}}function be(e,t){e=ge(e);t=ge(t);if(e.logic!==t.logic){return false}var i,n;var r=(e.filters||[]).slice();var a=(t.filters||[]).slice();if(r.length!==a.length){return false}r=r.sort(_e);a=a.sort(_e);for(var o=0;o<r.length;o++){i=r[o];n=a[o];if(i.logic&&n.logic){if(!be(i,n)){return false}}else if(!me(i,n)){return false}}return true}M.compareFilters=be;function we(e){return u(e)?e:[e]}function P(e,t,i,n){var r=typeof e===y?{field:e,dir:t,compare:i,skipItemSorting:n}:e,a=u(r)?r:r!==T?[r]:[];return b(a,function(e){return{field:e.field,dir:e.dir||"asc",aggregates:e.aggregates,compare:e.compare,skipItemSorting:e.skipItemSorting}})}function ke(e,t,i){var n=P(e,t,i);for(var r=0;r<n.length;r++){delete n[r].compare}return n}function ye(e){var t=u(e)?e:[e];for(var i=0;i<t.length;i++){if(t[i]&&p(t[i].compare)){return true}}return false}M.prototype={toArray:function(){return this.data},range:function(e,t){return new M(this.data.slice(e,e+t))},skip:function(e){return new M(this.data.slice(e))},take:function(e){return new M(this.data.slice(0,e))},select:function(e){return new M(b(this.data,e))},order:function(e,t,i){var n={dir:t};if(e){if(e.compare){n.compare=e.compare}else{n.field=e}}if(i){return new M(this.data.sort(l.create(n)))}return new M(this.data.slice(0).sort(l.create(n)))},orderBy:function(e,t){return this.order(e,"asc",t)},orderByDescending:function(e,t){return this.order(e,"desc",t)},sort:function(e,t,i,n){var r,a,o=R(e,t),s=[];i=i||l;if(o.length){for(r=0,a=o.length;r<a;r++){s.push(i.create(o[r]))}return this.orderBy({compare:i.combine(s)},n)}return this},filter:function(e){var t,i,n,r,a,o=this.data,s,l,d=[],u;e=F(e);if(!e||e.filters.length===0){return this}r=M.filterExpr(e);s=r.fields;l=r.operators;a=u=new Function("d, __f, __o","return "+r.expression);if(s.length||l.length){u=function(e){return a(e,s,l)}}for(t=0,n=o.length;t<n;t++){i=o[t];if(u(i)){d.push(i)}}return new M(d)},group:function(n,r,a){n=P(n||[]);r=r||this.data;var e=this,t=new M(e.data),o;if(n.length>0){o=n[0];if(a&&a.groupPaging){t=new M(r).groupAllData(o,r).select(function(e){var t=new M(r).filter([{field:e.field,operator:"eq",value:e.value,ignoreCase:false}]);var i=n.length>1?new M(e.items).group(n.slice(1),t.toArray(),a).toArray():e.items;return{field:e.field,value:e.value,hasSubgroups:n.length>1,items:i,aggregates:t.aggregate(o.aggregates),uid:k.guid(),itemCount:i.length,subgroupCount:i.length}})}else{t=t.groupBy(o).select(function(e){var t=new M(r).filter([{field:e.field,operator:"eq",value:e.value,ignoreCase:false}]);return{field:e.field,value:e.value,items:n.length>1?new M(e.items).group(n.slice(1),t.toArray()).toArray():e.items,hasSubgroups:n.length>1,aggregates:t.aggregate(o.aggregates)}})}}return t},groupBy:function(e){var t=this;if(f(e)||!this.data.length){return new M([])}var i=e.field,n=e.skipItemSorting?this.data:this._sortForGrouping(i,e.dir||"asc"),r=k.accessor(i),a,o=r.get(n[0],i),s={field:i,value:o,items:[]},l,d,u,c=[s];for(d=0,u=n.length;d<u;d++){a=n[d];l=r.get(a,i);if(!xe(o,l)){o=l;s={field:i,value:o,items:[]};c.push(s)}s.items.push(a)}c=t._sortGroups(c,e);return new M(c)},groupAllData:function(e,t){if(f(e)||this.data&&!this.data.length){return new M([])}var i=e.field,n=e.skipItemSorting?t:new M(t).sort(i,e.dir||"asc",ce).toArray(),r=k.accessor(i),a,o=r.get(n[0],i),s={field:i,value:o,items:[]},l,d,u,c=[s];for(d=0,u=n.length;d<u;d++){a=n[d];l=r.get(a,i);if(!xe(o,l)){o=l;s={field:i,value:o,items:[]};c.push(s)}s.items.push(a)}c=this._sortGroups(c,e);return new M(c)},_sortForGrouping:function(e,t){var i,n,r=this.data;if(!te){for(i=0,n=r.length;i<n;i++){r[i].__position=i}r=new M(r).sort(e,t,ce).toArray();for(i=0,n=r.length;i<n;i++){delete r[i].__position}return r}return this.sort(e,t).toArray()},_sortGroups:function(e,t){var i=e;if(t&&p(t.compare)){i=new M(i).order({compare:t.compare},t.dir||n).toArray()}return i},aggregate:function(e){var t,i,n={},r={};if(e&&e.length){for(t=0,i=this.data.length;t<i;t++){Ce(n,e,this.data[t],t,i,r)}}return n}};function xe(e,t){if(e&&e.getTime&&t&&t.getTime){return e.getTime()===t.getTime()}return e===t}function Ce(e,t,i,n,r,a){t=t||[];var o,s,l,d=t.length;for(o=0;o<d;o++){s=t[o];l=s.aggregate;var u=s.field;e[u]=e[u]||{};a[u]=a[u]||{};a[u][l]=a[u][l]||{};e[u][l]=Se[l.toLowerCase()](e[u][l],i,k.accessor(u),n,r,a[u][l])}}var Se={sum:function(e,t,i){var n=i.get(t);if(!z(e)){e=n}else if(z(n)){e+=n}return e},count:function(e){return(e||0)+1},average:function(e,t,i,n,r,a){var o=i.get(t);if(a.count===T){a.count=0}if(!z(e)){e=o}else if(z(o)){e+=o}if(z(o)){a.count++}if(n==r-1&&z(e)){e=e/a.count}return e},max:function(e,t,i){var n=i.get(t);if(!z(e)&&!Te(e)){e=n}if(e<n&&(z(n)||Te(n))){e=n}return e},min:function(e,t,i){var n=i.get(t);if(!z(e)&&!Te(e)){e=n}if(e>n&&(z(n)||Te(n))){e=n}return e}};function z(e){return typeof e==="number"&&!isNaN(e)}function Te(e){return e&&e.getTime}function De(e){var t,i=e.length,n=new Array(i);for(t=0;t<i;t++){n[t]=e[t].toJSON()}return n}M.normalizeGroup=P;M.normalizeSort=R;M.process=function(e,t,i){t=t||{};var n=t.group;var r=ye(P(n||[]));var a=new M(e),o=ke(n||[]),s=R(t.sort||[]),l=r?s:o.concat(s),d,u,c=t.filterCallback,f=t.filter,h=t.skip,p=t.take;if(l&&i){a=a.sort(l,T,T,i)}if(f){a=a.filter(f);if(c){a=c(a)}u=a.toArray().length}if(l){if(!i){a=a.sort(l)}if(n){e=a.toArray()}}if(r){a=a.group(n,e,t);if(h!==T&&p!==T&&!t.groupPaging){a=new M(He(a.toArray())).range(h,p);d=b(o,function(e){return v({},e,{skipItemSorting:true})});a=a.group(d,e,t)}}else{if(h!==T&&p!==T){a=a.range(h,p)}if(n){a=a.group(n,e,t)}}return{total:u,data:a.toArray()}};var Ae=e.extend({init:function(e){this.data=e.data},read:function(e){e.success(this.data)},update:function(e){e.success(e.data)},create:function(e){e.success(e.data)},destroy:function(e){e.success(e.data)}});var Ee=e.extend({init:function(i){var e=this,n;i=e.options=v({},e.options,i);w(q,function(e,t){if(typeof i[t]===y){i[t]={url:i[t]}}});e.cache=i.cache?r.create(i.cache):{find:h,add:h};n=i.parameterMap;if(i.submit){e.submit=i.submit}if(p(i.push)){e.push=i.push}if(!e.push){e.push=t}e.parameterMap=p(n)?n:function(e){var i={};w(e,function(e,t){if(e in n){e=n[e];if(_(e)){t=e.value(t);e=e.key}}i[e]=t});return i}},options:{parameterMap:t},create:function(e){return i(this.setup(e,O))},read:function(t){var e=this,i,n,r,a=e.cache;t=e.setup(t,V);i=t.success||h;n=t.error||h;r=a.find(t.data);if(r!==T){i(r)}else{t.success=function(e){a.add(t.data,e);i(e)};g.ajax(t)}},update:function(e){return i(this.setup(e,W))},destroy:function(e){return i(this.setup(e,U))},setup:function(e,t){e=e||{};var i=this,n,r=i.options[t],a=p(r.data)?r.data(e.data):r.data;e=v(true,{},r,e);n=v(true,{},a,e.data);e.data=i.parameterMap(n,t);if(p(e.url)){e.url=e.url(n)}return e}});var r=e.extend({init:function(){this._store={}},add:function(e,t){if(e!==T){this._store[$(e)]=t}},find:function(e){return this._store[$(e)]},clear:function(){this._store={}},remove:function(e){delete this._store[$(e)]}});r.create=function(e){var t={inmemory:function(){return new r}};if(_(e)&&p(e.find)){return e}if(e===true){return new r}return t[e]()};function Ie(e,t,i,n,r){var a,o,s,l,d={},u;for(l=0,u=e.length;l<u;l++){a=e[l];for(o in t){s=r[o];if(s&&s!==o){if(!d[s]){d[s]=k.setter(s)}d[s](a,t[o](a));delete a[o]}}}}function Me(e,t,i,n,r){var a,o,s,l,d;for(l=0,d=e.length;l<d;l++){a=e[l];for(o in t){a[o]=i._parse(o,t[o](a));s=r[o];if(s&&s!==o){delete a[s]}}}}function Re(e,t,i,n,r){var a,o,s,l;for(o=0,l=e.length;o<l;o++){a=e[o];s=n[a.field];if(s&&s!=a.field){a.field=s}a.value=i._parse(a.field,a.value);if(a.items){if(a.hasSubgroups){Re(a.items,t,i,n,r)}else{Me(a.items,t,i,n,r)}}}}function Fe(t,i,n,r,a,o){return function(e){e=t(e);return Pe(i,n,r,a,o)(e)}}function Pe(t,i,n,r,a){return function(e){if(e&&!f(n)){if(ee.call(e)!=="[object Array]"&&!(e instanceof E)){e=[e]}i(e,n,new t,r,a)}return e||[]}}var ze=e.extend({init:function(e){var t=this,i,n,r,a;e=e||{};for(i in e){n=e[i];t[i]=typeof n===y?S(n):n}a=e.modelBase||I;if(_(t.model)){t.model=r=a.define(t.model)}var o=m(t.data,t);t._dataAccessFunction=o;if(t.model){var s=m(t.groups,t),l=m(t.serialize,t),d={},u={},c={},f={},h=false,p,v;r=t.model;if(r.fields){w(r.fields,function(e,t){var i;p=e;if(_(t)&&t.field){p=t.field}else if(typeof t===y){p=t}if(_(t)&&t.from){i=t.from}h=h||i&&i!==e||p!==e;v=i||p;u[e]=v.indexOf(".")!==-1?S(v,true):S(v);c[e]=S(e);d[i||p]=e;f[e]=i||p});if(!e.serialize&&h){t.serialize=Fe(l,r,Ie,c,d,f)}}t._dataAccessFunction=o;t._wrapDataAccessBase=Pe(r,Me,u,d,f);t.data=Fe(o,r,Me,u,d,f);t.groups=Fe(s,r,Re,u,d,f)}},errors:function(e){return e?e.errors:null},parse:t,data:t,total:function(e){return e.length},groups:t,aggregates:function(){return{}},serialize:function(e){return e}});function Be(e,t){var i;var n;if(t.items&&t.items.length){for(var r=0;r<t.items.length;r++){i=e.items[r];n=t.items[r];if(i&&n){if(i.hasSubgroups&&i.value==n.value){Be(i,n)}else if(i.field&&i.value==n.value){i.items.push.apply(i.items,n.items)}else{e.items.push.apply(e.items,[n])}}else if(n){e.items.push.apply(e.items,[n])}}}}function Le(e,t,i,n){var r,a=0,o;while(t.length&&n){r=t[a];o=r.items;var s=o.length;if(e&&e.field===r.field&&e.value===r.value){if(e.hasSubgroups&&e.items.length){Le(e.items[e.items.length-1],r.items,i,n)}else{o=o.slice(i,i+n);e.items=e.items.concat(o)}t.splice(a--,1)}else if(r.hasSubgroups&&o.length){Le(r,o,i,n);if(!r.items.length){t.splice(a--,1)}}else{o=o.slice(i,i+n);r.items=o;if(!r.items.length){t.splice(a--,1)}}if(o.length===0){i-=s}else{i=0;n-=o.length}if(++a>=t.length){break}}if(a<t.length){t.splice(a,t.length-a)}}function He(e,t){var i=[];var n=(e||[]).length;var r;var a;var o=p(t)?t:function(e,t){return e[t]};for(var s=0;s<n;s++){r=o(e,s);if(r.hasSubgroups){i=i.concat(He(r.items))}else{a=r.items;for(var l=0;l<a.length;l++){i.push(o(a,l))}}}return i}function Ne(e){var t,i=[],n,r,a;for(t=0,n=e.length;t<n;t++){var o=e.at(t);if(o.items){if(o.hasSubgroups){i=i.concat(Ne(o.items))}else{r=o.items;for(a=0;a<r.length;a++){i.push(r.at(a))}}}}return i}function Oe(e,t){var i,n,r;if(t){for(i=0,n=e.length;i<n;i++){r=e.at(i);if(r.items){if(r.hasSubgroups){Oe(r.items,t)}else{r.items=new re(r.items,t,r.items._events)}}}}}function Ve(e,t){for(var i=0;i<e.length;i++){if(e[i].hasSubgroups){if(Ve(e[i].items,t)){return true}}else if(t(e[i].items,e[i])){return true}}}function We(e,t,i,n){for(var r=0;r<e.length;r++){if(e[r].data===t){break}if(Ue(e[r].data,i,n)){break}}}function Ue(e,t,i){for(var n=0,r=e.length;n<r;n++){if(e[n]&&e[n].hasSubgroups){return Ue(e[n].items,t,i)}else if(e[n]===t||e[n]===i){e[n]=i;return true}}}function je(e,t,i,n,r){for(var a=0,o=e.length;a<o;a++){var s=e[a];if(!s||s instanceof n){continue}if(s.hasSubgroups!==T&&!r){je(s.items,t,i,n,r)}else{for(var l=0;l<t.length;l++){if(t[l]===s){e[a]=t.at(l);We(i,t,s,e[a]);break}}}}}function Ge(e,t){if(!e){return}var i=e.length;var n;var r;for(r=0;r<i;r++){n=e[r];if(n.uid&&n.uid==t.uid){e.splice(r,1);return n}}}function qe(e,t){if(t){return Ke(e,function(e){return e.uid&&e.uid==t.uid||e[t.idField]===t.id&&t.id!==t._defaultId})}return-1}function $e(e,t){if(t){return Ke(e,function(e){return e.uid==t.uid})}return-1}function Ke(e,t){var i,n;if(!e){return}for(i=0,n=e.length;i<n;i++){if(t(e[i])){return i}}return-1}function Ye(e,t){if(e&&!f(e)){var i=e[t];var n;if(_(i)){n=i.from||i.field||t}else{n=e[t]||t}if(p(n)){return t}return n}return t}function Qe(e,t){var i,n,r={};for(var a in e){if(a!=="filters"){r[a]=e[a]}}if(e.filters){r.filters=[];for(i=0,n=e.filters.length;i<n;i++){r.filters[i]=Qe(e.filters[i],t)}}else{r.field=Ye(t.fields,r.field)}return r}function Xe(e,t){var i,n,r=[],a,o;for(i=0,n=e.length;i<n;i++){a={};o=e[i];for(var s in o){a[s]=o[s]}a.field=Ye(t.fields,a.field);if(a.aggregates&&u(a.aggregates)){a.aggregates=Xe(a.aggregates,t)}r.push(a)}return r}var B=o.extend({init:function(e){var t=this,i,n;if(e){n=e.data}e=t.options=v({},t.options,e);t._map={};t._prefetch={};t._data=[];t._pristineData=[];t._ranges=[];t._view=[];t._pristineTotal=0;t._destroyed=[];t._pageSize=e.pageSize;t._page=e.page||(e.pageSize?1:T);t._sort=R(e.sort);t._sortFields=he(e.sort);t._filter=F(e.filter);t._group=P(e.group);t._aggregate=e.aggregate;t._total=e.total;t._groupPaging=e.groupPaging;if(t._groupPaging){t._groupsState={}}t._shouldDetachObservableParents=true;o.fn.init.call(t);t.transport=Ze.create(e,n,t);if(p(t.transport.push)){t.transport.push({pushCreate:m(t._pushCreate,t),pushUpdate:m(t._pushUpdate,t),pushDestroy:m(t._pushDestroy,t)})}if(e.offlineStorage!=null){if(typeof e.offlineStorage=="string"){var r=e.offlineStorage;t._storage={getItem:function(){return JSON.parse(localStorage.getItem(r))},setItem:function(e){localStorage.setItem(r,$(t.reader.serialize(e)))}}}else{t._storage=e.offlineStorage}}t.reader=new k.data.readers[e.schema.type||"json"](e.schema);i=t.reader.model||{};t._detachObservableParents();t._data=t._observe(t._data);t._online=true;t.bind(["push",a,x,c,j,C,s],e)},options:{data:null,schema:{modelBase:I},offlineStorage:null,serverSorting:false,serverPaging:false,serverFiltering:false,serverGrouping:false,serverAggregates:false,batch:false,inPlaceSort:false},clone:function(){return this},online:function(e){if(e!==T){if(this._online!=e){this._online=e;if(e){return this.sync()}}return g.Deferred().resolve().promise()}else{return this._online}},offlineData:function(e){if(this.options.offlineStorage==null){return null}if(e!==T){return this._storage.setItem(e)}return this._storage.getItem()||[]},_isServerGrouped:function(){var e=this.group()||[];return this.options.serverGrouping&&e.length},_isServerGroupPaged:function(){return this._isServerGrouped()&&this._groupPaging},_isGroupPaged:function(){var e=this._group||[];return this._groupPaging&&e.length},_pushCreate:function(e){this._push(e,"pushCreate")},_pushUpdate:function(e){this._push(e,"pushUpdate")},_pushDestroy:function(e){this._push(e,"pushDestroy")},_push:function(e,t){var i=this._readData(e);if(!i){i=e}this[t](i)},_flatData:function(e,t){if(e){if(this._isServerGrouped()){return Ne(e)}if(!t){for(var i=0;i<e.length;i++){e.at(i)}}}return e},parent:h,get:function(e){var t,i,n=this._flatData(this._data,this.options.useRanges);for(t=0,i=n.length;t<i;t++){if(n[t].id==e){return n[t]}}},getByUid:function(e){return this._getByUid(e,this._data)},_getByUid:function(e,t){var i,n,r=this._flatData(t,this.options.useRanges);if(!r){return}for(i=0,n=r.length;i<n;i++){if(r[i].uid==e){return r[i]}}},indexOf:function(e){return $e(this._data,e)},at:function(e){return this._data.at(e)},data:function(e){var t=this;if(e!==T){t._detachObservableParents();t._data=this._observe(e);t._pristineData=e.slice(0);t._storeData();t._ranges=[];t.trigger("reset");t._addRange(t._data);t._total=t._data.length;t._pristineTotal=t._total;t._process(t._data)}else{if(t._data){for(var i=0;i<t._data.length;i++){t._data.at(i)}}return t._data}},view:function(e){if(e===T){return this._view}else{this._view=this._observeView(e)}},_observeView:function(e){var t=this;je(e,t._data,t._ranges,t.reader.model||d,t._isServerGrouped());var i=new re(e,t.reader.model);i.parent=function(){return t.parent()};return i},flatView:function(){var e=this.group()||[];if(e.length){return Ne(this._view)}else{return this._view}},add:function(e){return this.insert(this._data.length,e)},_createNewModel:function(e){if(this.reader.model){return new this.reader.model(e)}if(e instanceof d){return e}return new d(e)},insert:function(e,t){if(!t){t=e;e=0}if(!(t instanceof I)){t=this._createNewModel(t)}if(this._isServerGrouped()){this._data.splice(e,0,this._wrapInEmptyGroup(t))}else{this._data.splice(e,0,t)}this._insertModelInRange(e,t);return t},pushInsert:function(e,t){var i=this;var n=i._getCurrentRangeSpan();if(!t){t=e;e=0}if(!u(t)){t=[t]}var r=[];var a=this.options.autoSync;this.options.autoSync=false;try{for(var o=0;o<t.length;o++){var s=t[o];var l=this.insert(e,s);r.push(l);var d=l.toJSON();if(this._isServerGrouped()){d=this._wrapInEmptyGroup(d)}this._pristineData.push(d);if(n&&n.length){g(n).last()[0].pristineData.push(d)}e++}}finally{this.options.autoSync=a}if(r.length){this.trigger("push",{type:"create",items:r})}},pushCreate:function(e){this.pushInsert(this._data.length,e)},pushUpdate:function(e){if(!u(e)){e=[e]}var t=[];for(var i=0;i<e.length;i++){var n=e[i];var r=this._createNewModel(n);var a=this.get(r.id);if(a){t.push(a);a.accept(n);a.trigger(x);this._updatePristineForModel(a,n)}else{this.pushCreate(n)}}if(t.length){this.trigger("push",{type:"update",items:t})}},pushDestroy:function(e){var t=this._removeItems(e);if(t.length){this.trigger("push",{type:"destroy",items:t})}},_removeItems:function(e,t){if(!u(e)){e=[e]}var i=typeof t!=="undefined"?t:true;var n=[];var r=this.options.autoSync;this.options.autoSync=false;try{for(var a=0;a<e.length;a++){var o=e[a];var s=this._createNewModel(o);var l=false;this._eachItem(this._data,function(e){for(var t=0;t<e.length;t++){var i=e.at(t);if(i.id===s.id){n.push(i);e.splice(t,1);l=true;break}}});if(l&&i){this._removePristineForModel(s);this._destroyed.pop()}}}finally{this.options.autoSync=r}return n},remove:function(t){var i,n=this,r=n._isServerGrouped();this._eachItem(n._data,function(e){i=Ge(e,t);if(i&&r){if(!i.isNew||!i.isNew()){n._destroyed.push(i)}return true}});this._removeModelFromRanges(t);return t},destroyed:function(){return this._destroyed},created:function(){var e,t,i=[],n=this._flatData(this._data,this.options.useRanges);for(e=0,t=n.length;e<t;e++){if(n[e].isNew&&n[e].isNew()){i.push(n[e])}}return i},updated:function(){var e,t,i=[],n=this._flatData(this._data,this.options.useRanges);for(e=0,t=n.length;e<t;e++){if(n[e].isNew&&!n[e].isNew()&&n[e].dirty){i.push(n[e])}}return i},sync:function(){var i=this,e=[],t=[],n=i._destroyed;var r=g.Deferred().resolve().promise();if(i.online()){if(!i.reader.model){return r}e=i.created();t=i.updated();var a=[];if(i.options.batch&&i.transport.submit){a=i._sendSubmit(e,t,n)}else{a.push.apply(a,i._send("create",e));a.push.apply(a,i._send("update",t));a.push.apply(a,i._send("destroy",n))}r=g.when.apply(null,a).then(function(){var e,t;for(e=0,t=arguments.length;e<t;e++){if(arguments[e]){i._accept(arguments[e])}}i._storeData(true);i._syncEnd();i._change({action:"sync"});i.trigger(j);if(i._isServerGroupPaged()){i.read()}})}else{i._storeData(true);i._syncEnd();i._change({action:"sync"})}return r},_syncEnd:h,cancelChanges:function(e){var t=this;if(e instanceof k.data.Model){t._cancelModel(e)}else{t._destroyed=[];t._detachObservableParents();t._data=t._observe(t._pristineData);if(t.options.serverPaging){t._total=t._pristineTotal}t._ranges=[];t._addRange(t._data,0);t._changesCanceled();t._change();t._markOfflineUpdatesAsDirty();if(t._isServerGrouped()){t.read()}}},_changesCanceled:h,_markOfflineUpdatesAsDirty:function(){var e=this;if(e.options.offlineStorage!=null){e._eachItem(e._data,function(e){for(var t=0;t<e.length;t++){var i=e.at(t);if(i.__state__=="update"||i.__state__=="create"){i.dirty=true}}})}},hasChanges:function(){var e,t,i=this._flatData(this._data,this.options.useRanges);if(this._destroyed.length){return true}for(e=0,t=i.length;e<t;e++){if(i[e].isNew&&i[e].isNew()||i[e].dirty){return true}}return false},_accept:function(e){var t=this,i=e.models,n=e.response,r=0,a=t._isServerGrouped(),o=t._pristineData,s=e.type,l;t.trigger(C,{response:n,type:s});if(n&&!f(n)){n=t.reader.parse(n);if(t._handleCustomErrors(n)){return}n=t.reader.data(n);if(!u(n)){n=[n]}}else{n=g.map(i,function(e){return e.toJSON()})}if(s==="destroy"){t._destroyed=[]}for(r=0,l=i.length;r<l;r++){if(s!=="destroy"){i[r].accept(n[r]);if(s==="create"){o.push(a?t._wrapInEmptyGroup(i[r].toJSON()):n[r])}else if(s==="update"){t._updatePristineForModel(i[r],n[r])}}else{t._removePristineForModel(i[r])}}},_updatePristineForModel:function(e,i){this._executeOnPristineForModel(e,function(e,t){k.deepExtend(t[e],i)})},_executeOnPristineForModel:function(i,n){this._eachPristineItem(function(e){var t=qe(e,i);if(t>-1){n(t,e);return true}})},_removePristineForModel:function(e){this._executeOnPristineForModel(e,function(e,t){t.splice(e,1)})},_readData:function(e){var t=!this._isServerGrouped()?this.reader.data:this.reader.groups;return t.call(this.reader,e)},_eachPristineItem:function(i){var n=this;var e=n.options;var t=n._getCurrentRangeSpan();n._eachItem(n._pristineData,i);if(e.serverPaging&&e.useRanges){w(t,function(e,t){n._eachItem(t.pristineData,i)})}},_eachItem:function(e,t){if(e&&e.length){if(this._isServerGrouped()){Ve(e,t)}else{t(e)}}},_pristineForModel:function(t){var i,n,e=function(e){n=qe(e,t);if(n>-1){i=e[n];return true}};this._eachPristineItem(e);return i},_cancelModel:function(i){var n=this;var r=this._pristineForModel(i);this._eachItem(this._data,function(e){var t=$e(e,i);if(t>=0){if(r&&(!i.isNew()||r.__state__)){e[t].accept(r);if(r.__state__=="update"){e[t].dirty=true}}else{n._modelCanceled(i);e.splice(t,1);n._removeModelFromRanges(i)}}})},_modelCanceled:h,_submit:function(r,e){var a=this;a.trigger(c,{type:"submit"});a.trigger(s);a.transport.submit(v({success:function(e,t){var i=g.grep(r,function(e){return e.type==t})[0];if(i){i.resolve({response:e,models:i.models,type:t})}},error:function(e,t,i){for(var n=0;n<r.length;n++){r[n].reject(e)}a.error(e,t,i)}},e))},_sendSubmit:function(t,i,n){var e=this,r=[];if(e.options.batch){if(t.length){r.push(g.Deferred(function(e){e.type="create";e.models=t}))}if(i.length){r.push(g.Deferred(function(e){e.type="update";e.models=i}))}if(n.length){r.push(g.Deferred(function(e){e.type="destroy";e.models=n}))}e._submit(r,{data:{created:e.reader.serialize(De(t)),updated:e.reader.serialize(De(i)),destroyed:e.reader.serialize(De(n))}})}return r},_promise:function(e,t,i){var r=this;return g.Deferred(function(n){r.trigger(c,{type:i});r.trigger(s);r.transport[i].call(r.transport,v({success:function(e){n.resolve({response:e,models:t,type:i})},error:function(e,t,i){n.reject(e);r.error(e,t,i)}},e))}).promise()},_send:function(e,t){var i=this,n,r,a=[],o=i.reader.serialize(De(t));if(i.options.batch){if(t.length){a.push(i._promise({data:{models:o}},t,e))}}else{for(n=0,r=t.length;n<r;n++){a.push(i._promise({data:o[n]},[t[n]],e))}}return a},read:function(e){var t=this,i=t._params(e);var n=g.Deferred();t._queueRequest(i,function(){var e=t.trigger(c,{type:"read"});if(!e){t.trigger(s);t._ranges=[];t.trigger("reset");if(t.online()){t.transport.read({data:i,success:function(e){t._ranges=[];t.success(e,i);n.resolve()},error:function(){var e=A.call(arguments);t.error.apply(t,e);n.reject.apply(n,e)}})}else if(t.options.offlineStorage!=null){t.success(t.offlineData(),i);n.resolve()}}else{t._dequeueRequest();n.resolve(e)}});return n.promise()},_readAggregates:function(e){return this.reader.aggregates(e)},success:function(e){var t=this,i=t.options,n,r;t.trigger(C,{response:e,type:"read"});if(t.online()){e=t.reader.parse(e);if(t._handleCustomErrors(e)){t._dequeueRequest();return}t._total=t.reader.total(e);if(t._isServerGroupPaged()){t._serverGroupsTotal=t._total}if(t._pageSize>t._total){t._pageSize=t._total;if(t.options.pageSize&&t.options.pageSize>t._pageSize){t._pageSize=t.options.pageSize}}if(t._aggregate&&i.serverAggregates){t._aggregateResult=t._readAggregates(e)}e=t._readData(e);t._destroyed=[]}else{e=t._readData(e);n=[];var a={};var o=t.reader.model;var s=o?o.idField:"id";var l;for(l=0;l<this._destroyed.length;l++){var d=this._destroyed[l][s];a[d]=d}for(l=0;l<e.length;l++){var u=e[l];var c=u.__state__;if(c=="destroy"){if(!a[u[s]]){this._destroyed.push(this._createNewModel(u))}}else{n.push(u)}}e=n;t._total=e.length}t._pristineTotal=t._total;r=t._skip&&t._data.length&&t._skip<t._data.length;if(t.options.endless){if(r){t._pristineData.splice(t._skip,t._pristineData.length)}n=e.slice(0);for(var f=0;f<n.length;f++){t._pristineData.push(n[f])}}else{t._pristineData=e.slice(0)}t._detachObservableParents();if(t.options.endless){t._data.unbind(x,t._changeHandler);if(t._isServerGrouped()&&t._data[t._data.length-1].value===e[0].value){Be(t._data[t._data.length-1],e[0]);e.shift()}e=t._observe(e);if(r){t._data.splice(t._skip,t._data.length)}for(var h=0;h<e.length;h++){t._data.push(e[h])}t._data.bind(x,t._changeHandler)}else{t._data=t._observe(e)}t._markOfflineUpdatesAsDirty();t._storeData();t._addRange(t._data);t._process(t._data);t._dequeueRequest()},_detachObservableParents:function(){if(this._data&&this._shouldDetachObservableParents){for(var e=0;e<this._data.length;e++){if(this._data[e].parent){this._data[e].parent=h}}}},_storeData:function(e){var a=this._isServerGrouped();var o=this.reader.model;function s(e){var t=[];for(var i=0;i<e.length;i++){var n=e.at(i);var r=n.toJSON();if(a&&n.items){r.items=s(n.items)}else{r.uid=n.uid;if(o){if(n.isNew()){r.__state__="create"}else if(n.dirty){r.__state__="update"}}}t.push(r)}return t}if(this.options.offlineStorage!=null){var t=s(this._data);var i=[];for(var n=0;n<this._destroyed.length;n++){var r=this._destroyed[n].toJSON();r.__state__="destroy";i.push(r)}this.offlineData(t.concat(i));if(e){this._pristineData=this.reader.reader?this.reader.reader._wrapDataAccessBase(t):this.reader._wrapDataAccessBase(t)}}},_addRange:function(e,t){var i=this,n=typeof t!=="undefined"?t:i._skip||0,r,a={data:e,pristineData:e.toJSON(),timestamp:i._timeStamp()};if(this._isGroupPaged()){r=n+e.length;a.outerStart=n;a.outerEnd=r}else{r=n+i._flatData(e,true).length}a.start=n;a.end=r;i._ranges.push(a);i._sortRanges();if(i._isGroupPaged()){if(!i._groupsFlat){i._groupsFlat=[]}i._appendToGroupsFlat(a.data);i._updateOuterRangesLength()}},_appendToGroupsFlat:function(e){var t=e.length;for(var i=0;i<t;i++){this._groupsFlat.push(e[i])}},_getGroupByUid:function(e){var t=this._groupsFlat.length;var i;for(var n=0;n<t;n++){i=this._groupsFlat[n];if(i.uid===e){return i}}},_sortRanges:function(){this._ranges.sort(function(e,t){return e.start-t.start})},error:function(e,t,i){this._dequeueRequest();this.trigger(C,{});this.trigger(a,{xhr:e,status:t,errorThrown:i})},_params:function(e){var t=this,i=v({take:t.take(),skip:t.skip(),page:t.page(),pageSize:t.pageSize(),sort:t._sort,filter:t._filter,group:t._group,aggregate:t._aggregate,groupPaging:!!t._groupPaging},e);if(!t.options.serverPaging){delete i.take;delete i.skip;delete i.page;delete i.pageSize}if(!t.options.serverGrouping){delete i.group}else if(t.reader.model&&i.group){i.group=Xe(i.group,t.reader.model)}if(!t.options.serverFiltering){delete i.filter}else if(t.reader.model&&i.filter){i.filter=Qe(i.filter,t.reader.model)}if(!t.options.serverSorting){delete i.sort}else if(t.reader.model&&i.sort){i.sort=Xe(i.sort,t.reader.model)}if(!t.options.serverAggregates){delete i.aggregate}else if(t.reader.model&&i.aggregate){i.aggregate=Xe(i.aggregate,t.reader.model)}if(!t.options.groupPaging){delete i.groupPaging}return i},_queueRequest:function(e,t){var i=this;if(!i._requestInProgress){i._requestInProgress=true;i._pending=T;t()}else{i._pending={callback:m(t,i),options:e}}},_dequeueRequest:function(){var e=this;e._requestInProgress=false;if(e._pending){e._queueRequest(e._pending.options,e._pending.callback)}},_handleCustomErrors:function(e){if(this.reader.errors){var t=this.reader.errors(e);if(t){this.trigger(a,{xhr:null,status:"customerror",errorThrown:"custom error",errors:t});return true}}return false},_shouldWrap:function(e){var t=this.reader.model;if(t&&e.length){return!(e[0]instanceof t)}return false},_observe:function(e){var t=this,i=t.reader.model;t._shouldDetachObservableParents=true;if(e instanceof E){t._shouldDetachObservableParents=false;if(t._shouldWrap(e)){e.type=t.reader.model;e.wrapAll(e,e)}}else{var n=t.pageSize()&&!t.options.serverPaging?re:E;e=new n(e,t.reader.model);e.parent=function(){return t.parent()}}if(t._isServerGrouped()){Oe(e,i)}if(t._changeHandler&&t._data&&t._data instanceof E&&!(t.options.useRanges&&t.options.serverPaging)){t._data.unbind(x,t._changeHandler)}else{t._changeHandler=m(t._change,t)}return e.bind(x,t._changeHandler)},_updateTotalForAction:function(e,t){var i=this;var n=parseInt(i._total,10);if(!z(i._total)){n=parseInt(i._pristineTotal,10)}if(e==="add"){n+=t.length}else if(e==="remove"){n-=t.length}else if(e!=="itemchange"&&e!=="sync"&&!i.options.serverPaging){n=i._pristineTotal}else if(e==="sync"){n=i._pristineTotal=parseInt(i._total,10)}i._total=n},_change:function(t){var i=this,e,n,r=t?t.action:"";if(r==="remove"){for(e=0,n=t.items.length;e<n;e++){if(!t.items[e].isNew||!t.items[e].isNew()){i._destroyed.push(t.items[e])}}}if(i.options.autoSync&&(r==="add"||r==="remove"||r==="itemchange")){var a=function(e){if(e.action==="sync"){i.unbind("change",a);i._updateTotalForAction(r,t.items)}};i.first("change",a);i.sync()}else{i._updateTotalForAction(r,t?t.items:[]);i._process(i._data,t)}},_calculateAggregates:function(e,t){t=t||{};var i=new M(e),n=t.aggregate,r=t.filter;if(r){i=i.filter(r)}return i.aggregate(n)},_process:function(e,t){var i=this,n={},r;if(i.options.serverPaging!==true){n.skip=i._skip;n.take=i._take||i._pageSize;if(n.skip===T&&i._page!==T&&i._pageSize!==T){n.skip=(i._page-1)*i._pageSize}if(i.options.useRanges){n.skip=i.currentRangeStart()}}if(i.options.serverSorting!==true){n.sort=i._sort}if(i.options.serverFiltering!==true){n.filter=i._filter}if(i.options.serverGrouping!==true){n.group=i._group}if(i.options.serverAggregates!==true){n.aggregate=i._aggregate}if(i.options.serverGrouping){i._clearEmptyGroups(e)}n.groupPaging=i._groupPaging;if(i._isGroupPaged()&&t&&(t.action==="page"||t.action==="expandGroup"||t.action==="collapseGroup")){r=i._queryProcess(e,{aggregate:i._aggregate})}else{r=i._queryProcess(e,n)}if(i.options.serverAggregates!==true){i._aggregateResult=i._calculateAggregates(r.dataToAggregate||e,n)}i._setView(r,n,t);i._setFilterTotal(r.total,false);t=t||{};t.items=t.items||i._view;i.trigger(x,t)},_setView:function(e,t,i){var n=this;if(n._isGroupPaged()&&!n._isServerGrouped()){if(i&&(i.action==="page"||i.action==="expandGroup"||i.action==="collapseGroup")){n.view(e.data);n._updateOuterRangesLength()}else{n._ranges=[];var r=new M(e.data);n._addRange(n._observe(e.data));if(t.skip+t.take>e.data.length){t.skip=e.data.length-t.take}n.view(r.range(t.skip,t.take).toArray())}}else{n.view(e.data)}},_clearEmptyGroups:function(e){for(var t=e.length-1;t>=0;t--){var i=e[t];if(i.hasSubgroups){this._clearEmptyGroups(i.items)}else{if(i.items&&!i.items.length){X.apply(i.parent(),[t,1])}}}},_queryProcess:function(e,t){if(this.options.inPlaceSort){return M.process(e,t,this.options.inPlaceSort)}else{return M.process(e,t)}},_mergeState:function(e){var t=this;if(e!==T){t._pageSize=e.pageSize;t._page=e.page;t._sort=e.sort;t._filter=e.filter;t._group=e.group;t._aggregate=e.aggregate;t._skip=t._currentRangeStart=e.skip;t._take=e.take;if(t._skip===T){t._skip=t._currentRangeStart=t.skip();e.skip=t.skip()}if(t._take===T&&t._pageSize!==T){t._take=t._pageSize;e.take=t._take}if(e.sort){t._sort=e.sort=R(e.sort);t._sortFields=he(e.sort)}if(e.filter){t._filter=e.filter=t.options.accentFoldingFiltering&&!g.isEmptyObject(e.filter)?g.extend({},F(e.filter),{accentFoldingFiltering:t.options.accentFoldingFiltering}):F(e.filter)}if(e.group){t._group=e.group=P(e.group)}if(e.aggregate){t._aggregate=e.aggregate=we(e.aggregate)}}return e},query:function(e){var t;var i=this.options.serverSorting||this.options.serverPaging||this.options.serverFiltering||this.options.serverGrouping||this.options.serverAggregates;if(i||(this._data===T||this._data.length===0)&&!this._destroyed.length){if(this.options.endless){var n=e.pageSize-this.pageSize();if(n>0){n=this.pageSize();e.page=e.pageSize/n;e.pageSize=n}else{e.page=1;this.options.endless=false}}return this.read(this._mergeState(e))}var r=this.trigger(c,{type:"read"});if(!r){this.trigger(s);if(e){e.groupPaging=this._groupPaging}t=this._queryProcess(this._data,this._mergeState(e));this._setFilterTotal(t.total,true);this._aggregateResult=this._calculateAggregates(t.dataToAggregate||this._data,e);this._setView(t,e);this.trigger(C,{type:"read"});this.trigger(x,{items:t.data,action:e?e.action:""})}return g.Deferred().resolve(r).promise()},_hasExpandedSubGroups:function(e){var t=false;var i=e.items?e.items.length:0;if(!e.hasSubgroups){return false}for(var n=0;n<i;n++){if(this._groupsState[e.items[n].uid]){t=true;break}}return t},_findGroupedRange:function(e,t,i,n,r){var a=this;var o=e.length;var s;var l;var d;var u;var c;for(var f=0;f<o;f++){s=e[f];if(i.taken>=i.take){break}if(!a._getGroupByUid(s.uid)){a._groupsFlat.push(s)}if(a._groupsState[s.uid]){if(a._isServerGroupPaged()){if(a._fetchGroupItems(s,i,n,r)){a._fetchingGroupItems=true;return}u=(s.subgroupCount||s.itemCount)+1;c=i.skip-i.skipped;if(!a._hasExpandedSubGroups(s)&&c>u){i.skipped+=u;continue}}if(i.includeParents&&i.skipped<i.skip){i.skipped++;s.excludeHeader=true}else if(i.includeParents){i.taken++;s.excludeHeader=false}if(s.hasSubgroups&&s.items&&s.items.length){s.currentItems=[];if(!n){n=[]}n.push(s);a._findGroupedRange(s.items,s.currentItems,i,n,r);n.pop();if(s.currentItems.length||i.taken>0){t.push(s)}else{s.excludeHeader=false}}else{l=[];d=s.items.length;for(var h=0;h<d;h++){if(i.skipped<i.skip){i.skipped++;continue}if(i.taken>=i.take){break}l.push(s.items[h]);i.taken++}if(l.length||i.taken>0){s.currentItems=l;t.push(s)}else{s.excludeHeader=false}}}else{if(i.skipped<i.skip){i.skipped++;continue}t.push(s);i.taken++}}},_expandedSubGroupItemsCount:function(e,t,i){var n=this;var r=0;var a;var o=typeof t==="number";var s=o?t:e.subgroupCount;var l;if(!e.hasSubgroups){return r}for(var d=0;d<s;d++){a=e.items[d];if(!a){break}if(a.hasSubgroups&&n._groupsState[e.uid]){l=n._expandedSubGroupItemsCount(a,s,true);r+=l;if(o){s-=l}}else if(!a.hasSubgroups&&n._groupsState[a.uid]){l=a.items?a.items.length:0;r+=l;if(o){s-=l}}if(i){r+=1;if(o){s-=1}}if(o&&r>s){return r}}return r},_fetchGroupItems:function(e,t,i,n){var r=this;var a;var o;var s;var l=e.hasSubgroups?e.subgroupCount:e.itemCount;var d=t.take;var u=t.skipped;var c=r.take();var f;if(t.includeParents){if(u<t.skip){u+=1}else{d-=1}}if(!e.items||e.items&&!e.items.length){r.getGroupItems(e,t,i,n,0);return true}else{f=this._expandedSubGroupItemsCount(e,t.skip-u);a=Math.max(t.skip-(u+f),0);if(a>=l){return false}o=e.items[a];s=e.items[Math.min(a+d,l-1)];if(o.notFetched){r.getGroupItems(e,t,i,n,D.max(D.floor(a/c),0)*c);return true}if(s.notFetched){r.getGroupItems(e,t,i,n,D.max(D.floor((a+c)/c),0)*c);return true}}},getGroupItems:function(e,t,i,n,r){var a=this;var o;var s;var l;var d;if(!e.items){e.items=[]}o=a.take();s=this._composeItemsFilter(e,i);l={page:D.floor((r||0)/(o||1))||1,pageSize:o,skip:r,take:o,filter:s,aggregate:a._aggregate,sort:a._sort};d=a.findSubgroups(e);if(d&&d.length){l.group=d;l.groupPaging=true}clearTimeout(a._timeout);a._timeout=setTimeout(function(){a._queueRequest(l,function(){if(!a.trigger(c,{type:"read"})){a.transport.read({data:l,success:a._groupItemsSuccessHandler(e,t.skip,a.take(),n,r),error:function(){var e=A.call(arguments);a.error.apply(a,e)}})}else{a._dequeueRequest()}})},100)},_groupItemsSuccessHandler:function(a,o,s,l,d){var u=this;var c=u._timeStamp();l=p(l)?l:h;var f=u.options.schema&&u.options.schema.total?u.options.schema.total:"Total";return function(e){var t;var i=I.define(u.options.schema.model);var n;u._dequeueRequest();u.trigger(C,{response:e,type:"read"});if(p(f)){n=f(e)}else{n=e[f]}e=u.reader.parse(e);if(a.hasSubgroups){t=u.reader.groups(e);a.subgroupCount=n}else{t=u.reader.data(e);t=t.map(function(e){return new i(e)})}a.items.omitChangeEvent=true;for(var r=0;r<n;r++){if(r>=d&&r<d+s){a.items.splice(r,1,t[r-d])}else{if(!a.items[r]){a.items.splice(r,0,{notFetched:true})}}}a.items.omitChangeEvent=false;u._updateRangePristineData(a);u._fetchingGroupItems=false;if(!a.countAdded){u._serverGroupsTotal+=n;a.countAdded=true}u.range(o,s,l,"expandGroup");if(c>=u._currentRequestTimeStamp||!u._skipRequestsInProgress){u.trigger(x,{})}}},findSubgroups:function(e){var t=this._group.map(function(e){return e.field}).indexOf(e.field);return this._group.slice(t+1,this._group.length)},_composeItemsFilter:function(e,t){var i=this.filter()||{logic:"and",filters:[]};i=v(true,{},i);i.filters.push({field:e.field,operator:"eq",value:e.value});if(t){for(var n=0;n<t.length;n++){i.filters.push({field:t[n].field,operator:"eq",value:t[n].value})}}return i},_updateRangePristineData:function(e){var t=this;var i=t._ranges;var n=i.length;var r;var a;var o;var s;var l;var d;for(var u=0;u<n;u++){o=i[u];s=o.data.length;l=[];r=null;for(var c=0;c<s;c++){a=o.data[c];l.push(c);if(a.uid===e.uid||a.hasSubgroups&&a.items.length&&t._containsSubGroup(a,e,l)){break}l.pop()}if(l.length){r=i[u].pristineData;while(l.length>1){d=l.splice(0,1)[0];r=r[d].items}r[l[0]]=t._cloneGroup(e);break}}},_containsSubGroup:function(e,t,i){var n=this;var r=e.items.length;var a;if(e.hasSubgroups&&r){for(var o=0;o<r;o++){a=e.items[o];i.push(o);if(a.uid===t.uid){return true}else if(a.hasSubgroups&&a.items.length){return n._containsSubGroup(a,t,i)}i.pop()}}},_cloneGroup:function(e){var t=this;e=typeof e.toJSON=="function"?e.toJSON():e;if(e.items&&e.items.length){e.items=e.items.map(function(e){return t._cloneGroup(e)})}return e},_setFilterTotal:function(e,t){var i=this;if(!i.options.serverFiltering){if(e!==T){i._total=e}else if(t){i._total=i._data.length}}},fetch:function(t){var i=this;var e=function(e){if(e!==true&&p(t)){t.call(i)}};return this._query().done(e)},_query:function(e){var t=this;return t.query(v({},{page:t.page(),pageSize:t.pageSize(),sort:t.sort(),filter:t.filter(),group:t.group(),aggregate:t.aggregate()},e))},next:function(e){var t=this,i=t.page(),n=t.total();e=e||{};if(!i||n&&i+1>t.totalPages()){return}t._skip=t._currentRangeStart=i*t.take();i+=1;e.page=i;t._query(e);return i},prev:function(e){var t=this,i=t.page();e=e||{};if(!i||i===1){return}t._skip=t._currentRangeStart=t._skip-t.take();i-=1;e.page=i;t._query(e);return i},page:function(e){var t=this,i;if(e!==T){e=D.max(D.min(D.max(e,1),t.totalPages()),1);var n=t.take();if(t._isGroupPaged()){e-=1;t.range(e*n,n,null,"page");return}t._query(t._pageableQueryOptions({page:e}));return}i=t.skip();return i!==T?D.round((i||0)/(t.take()||1))+1:T},pageSize:function(e){var t=this;if(e!==T){t._query(t._pageableQueryOptions({pageSize:e,page:1}));return}return t.take()},sort:function(e){var t=this;if(e!==T){t.trigger("sort");t._query({sort:e});return}return t._sort},filter:function(e){var t=this;if(e===T){return t._filter}t.trigger("reset");t._query({filter:e,page:1})},group:function(e){var t=this;var i={group:e};if(t._groupPaging){i.page=1}if(e!==T){t._query(i);return}return t._group},getGroupsFlat:function(e){var t,i=[],n;for(t=0,n=e.length;t<n;t++){var r=e[t];if(r.hasSubgroups){i=i.concat(this.getGroupsFlat(r.items))}i.push(r)}return i},total:function(){return parseInt(this._total||0,10)},groupsTotal:function(e){var t=this;if(!t._group.length){return t.total()}if(t._isServerGrouped()){if(t._serverGroupsTotal){return t._serverGroupsTotal}t._serverGroupsTotal=t.total();return t._serverGroupsTotal}return t._calculateGroupsTotal(t._ranges.length?t._ranges[0].data:[],e)},_calculateGroupsTotal:function(e,t,i,n){var r=this;i=i||"items";var a;var o;if(r._group.length&&e){a=0;o=e.length;for(var s=0;s<o;s++){a+=r.groupCount(e[s],t,i,n)}r._groupsTotal=a;return a}r._groupsTotal=r._data.length;return r._groupsTotal},groupCount:function(e,t,i,n){var r=this;var a=0;if(e.hasSubgroups&&r._groupsState[e.uid]){if(t&&!e.excludeHeader||n){a+=1}e[i].forEach(function(e){a+=r.groupCount(e,t,i,n)})}else{if(r._groupsState[e.uid]){if(t&&!e.excludeHeader||n){a++}a+=e[i]?e[i].length:0}else{a++}}return a},countGroupRange:function(e){var t=0;var i=e.length;for(var n=0;n<i;n++){t+=this.groupCount(e[n],true)}return t},aggregate:function(e){var t=this;if(e!==T){t._query({aggregate:e});return}return t._aggregate},aggregates:function(){var e=this._aggregateResult;if(f(e)){e=this._emptyAggregates(this.aggregate())}return e},_emptyAggregates:function(e){var t={};if(!f(e)){var i={};if(!u(e)){e=[e]}for(var n=0;n<e.length;n++){i[e[n].aggregate]=0;t[e[n].field]=i}}return t},_pageableQueryOptions:function(e){return e},_wrapInEmptyGroup:function(e){var t=this.group(),i,n,r,a;for(r=t.length-1,a=0;r>=a;r--){n=t[r];i={value:e.get?e.get(n.field):e[n.field],field:n.field,items:i?[i]:[e],hasSubgroups:!!i,aggregates:this._emptyAggregates(n.aggregates)}}return i},totalPages:function(){var e=this,t=e.pageSize()||e.total(),i=e._isGroupPaged()?e.groupsTotal(true):e.total();return D.ceil((i||0)/t)},inRange:function(e,t){var i=this,n=D.min(e+t,i.total());if(!i.options.serverPaging&&i._data.length>0){return true}return i._findRange(e,n).length>0},lastRange:function(){var e=this._ranges;return e[e.length-1]||{start:0,end:0,data:[]}},firstItemUid:function(){var e=this._ranges;return e.length&&e[0].data.length&&e[0].data[0].uid},enableRequestsInProgress:function(){this._skipRequestsInProgress=false},_timeStamp:function(){return(new Date).getTime()},range:function(e,t,i,n){this._currentRequestTimeStamp=this._timeStamp();this._skipRequestsInProgress=true;var r=this._isGroupPaged()?this.groupsTotal(true):this.total();if(n==="expandGroup"||n==="collapseGroup"){this._updateOuterRangesLength()}e=D.min(e||0,r);i=p(i)?i:h;var a=this,o=D.max(D.floor(e/t),0)*t,s=D.min(o+t,r),l;l=a._findRange(e,D.min(e+t,r),i);if((l.length||r===0)&&!a._fetchingGroupItems){a._processRangeData(l,e,t,a._originalPageSkip||o,a._originalSize||s,{action:n});a._originalPageSkip=null;a._originalSize=null;i();return}if(a._isGroupPaged()){a._originalPageSkip=o;a._originalSize=s;o=D.max(D.floor(a._adjustPageSkip(e,t)/t),0)*t;s=D.min(o+t,r)}if(t!==T&&!a._fetchingGroupItems){if(a._isGroupPaged()&&!a._groupRangeExists(o,t)||!a._rangeExists(o,s)){a.prefetch(o,t,function(){if(e>o&&s<a.total()&&!a._rangeExists(s,D.min(s+t,a.total()))){a.prefetch(s,t,function(){a.range(e,t,i)})}else{a.range(e,t,i)}})}else if(o<e){a.prefetch(s,t,function(){a.range(e,t,i)})}}},_findRange:function(e,t,i){var n=this,r=n._ranges,a,o=[],s,l,d,u,c,f,h,p=n.options,v=p.serverSorting||p.serverPaging||p.serverFiltering||p.serverGrouping||p.serverAggregates,m,g,_,b={take:t-e,skip:e,skipped:0,taken:0,includeParents:true},w,k=n._isGroupPaged(),y=k?"outerStart":"start",x=k?"outerEnd":"end",C;for(s=0,_=r.length;s<_;s++){a=r[s];if(k){if(a.outerStart>=t){return[]}if(e>a.outerEnd){b.skipped+=a.outerEnd-(w||0);w=a.outerEnd;continue}if(typeof w!=="undefined"&&w!=a.outerStart){b.skipped+=a.outerStart-w}if(b.skipped>b.skip){return[]}if(typeof w==="undefined"&&e>0&&a.start>0){b.skipped=a.outerStart}l=s;while(true){this._findGroupedRange(a.data,o,b,null,i);C=n._calculateGroupsTotal(o,true,"currentItems");if(C>=b.take){return o}if(n._fetchingGroupItems){return[]}l++;if(r[l]&&r[l].outerStart===a.outerEnd){a=r[l]}else{break}}}else if(e>=a[y]&&e<=a[x]){g=0;for(l=s;l<_;l++){a=r[l];m=n._flatData(a.data,true);if(m.length&&e+g>=a.start){c=a.data;f=a.end;if(!v){if(p.inPlaceSort){h=n._queryProcess(a.data,{filter:n.filter()})}else{var S=ke(n.group()||[]).concat(R(n.sort()||[]));h=n._queryProcess(a.data,{sort:S,filter:n.filter()})}m=c=h.data;if(h.total!==T){f=h.total}}d=0;if(e+g>a.start){d=e+g-a.start}u=m.length;if(f>t){u=u-(f-t)}g+=u-d;o=n._mergeGroups(o,c,d,u);if(t<=a.end&&g==t-e){return o}}}break}w=a.outerEnd}return[]},_getRangesMismatch:function(e){var t=this;var i=t._ranges;var n=0;var r=0;while(true){var a=i[r];if(!a||a.outerStart>e){break}if(a.outerEnd!=a.end){n=a.outerEnd-a.end}r++}return n},_mergeGroups:function(e,t,i,n){if(this._isServerGrouped()){var r=t.toJSON(),a;if(e.length){a=e[e.length-1]}Le(a,r,i,n);return e.concat(r)}return e.concat(t.slice(i,n))},_processRangeData:function(e,t,i,n,r,a){var o=this;o._pending=T;o._skip=t>o.skip()&&!o._omitPrefetch?D.min(r,(o.totalPages()-1)*o.take()):n;o._currentRangeStart=t;o._take=i;var s=o.options.serverPaging;var l=o.options.serverSorting;var d=o.options.serverFiltering;var u=o.options.serverAggregates;try{o.options.serverPaging=true;if(!o._isServerGrouped()&&!(o.group()&&o.group().length)){o.options.serverSorting=true}o.options.serverFiltering=true;o.options.serverPaging=true;o.options.serverAggregates=true;if(s){o._detachObservableParents();o._data=e=o._observe(e)}o._process(e,a)}finally{o.options.serverPaging=s;o.options.serverSorting=l;o.options.serverFiltering=d;o.options.serverAggregates=u}},skip:function(){var e=this;if(e._skip===T){return e._page!==T?(e._page-1)*(e.take()||1):T}return e._skip},currentRangeStart:function(){return this._currentRangeStart||0},take:function(){return this._take||this._pageSize},_prefetchSuccessHandler:function(o,s,l,d){var u=this;var c=u._timeStamp();return function(e){var t=false,i={start:o,end:s,data:[],timestamp:u._timeStamp()},n,r,a;u._dequeueRequest();u.trigger(C,{response:e,type:"read"});e=u.reader.parse(e);a=u._readData(e);if(a.length){for(n=0,r=u._ranges.length;n<r;n++){if(u._ranges[n].start===o){t=true;i=u._ranges[n];if(!u._isGroupPaged()){i.pristineData=a;i.data=u._observe(a);i.end=i.start+u._flatData(i.data,true).length;u._sortRanges()}break}}if(!t){u._addRange(u._observe(a),o)}}u._total=u.reader.total(e);if(d||(c>=u._currentRequestTimeStamp||!u._skipRequestsInProgress)){if(l&&a.length){l()}else{u.trigger(x,{})}}}},prefetch:function(e,t,i){var n=this,r=D.min(e+t,n.total()),a={take:t,skip:e,page:e/t+1,pageSize:t,sort:n._sort,filter:n._filter,group:n._group,aggregate:n._aggregate};if(n._isGroupPaged()&&!n._isServerGrouped()&&n._groupRangeExists(e,r)){if(i){i()}return}if(n._isServerGroupPaged()&&!n._groupRangeExists(e,r)||!n._rangeExists(e,r)){clearTimeout(n._timeout);n._timeout=setTimeout(function(){n._queueRequest(a,function(){if(!n.trigger(c,{type:"read"})){if(n._omitPrefetch){n.trigger(s)}n.transport.read({data:n._params(a),success:n._prefetchSuccessHandler(e,r,i),error:function(){var e=A.call(arguments);n.error.apply(n,e)}})}else{n._dequeueRequest()}})},100)}else if(i){i()}},_multiplePrefetch:function(e,t,i){var n=this,r=D.min(e+t,n.total()),a={take:t,skip:e,page:e/t+1,pageSize:t,sort:n._sort,filter:n._filter,group:n._group,aggregate:n._aggregate};if(!n._rangeExists(e,r)){if(!n.trigger(c,{type:"read"})){n.transport.read({data:n._params(a),success:n._prefetchSuccessHandler(e,r,i,true)})}}else if(i){i()}},_adjustPageSkip:function(e,t){var i=this;var n=i._getPrevRange(e);var r;var a=i.total();var o;if(n){o=i._getRangesMismatch(e);if(!o){return e}e-=o}r=D.max(D.floor(e/t),0)*t;if(r>a){while(true){r-=t;if(r<a){break}}}return r},_getNextRange:function(e){var t=this,i=t._ranges,n,r;for(n=0,r=i.length;n<r;n++){if(i[n].start<=e&&i[n].end>=e){return i[n]}}},_getPrevRange:function(e){var t=this,i=t._ranges,n,r,a=i.length;for(n=a-1;n>=0;n--){if(i[n].outerStart<=e){r=i[n];break}}return r},_rangeExists:function(e,t){var i=this,n=i._ranges,r,a;for(r=0,a=n.length;r<a;r++){if(n[r].start<=e&&n[r].end>=t){return true}}return false},_groupRangeExists:function(e,t){var i=this,n=i._ranges,r,a,o=0,s=i.groupsTotal(true);if(t>s&&!i._isServerGrouped()){t=s}for(r=0,a=n.length;r<a;r++){var l=n[r];if(l.outerStart<=e&&l.outerEnd>=e){o+=l.outerEnd-e}else if(l.outerStart<=t&&l.outerEnd>=t){o+=t-l.outerStart}}return o>=t-e},_getCurrentRangeSpan:function(){var e=this;var t=e._ranges;var i=e.currentRangeStart();var n=i+(e.take()||0);var r=[];var a;var o;var s=t.length;for(o=0;o<s;o++){a=t[o];if(a.start<=i&&a.end>=i||a.start>=i&&a.start<=n){r.push(a)}}return r},_removeModelFromRanges:function(e){var t=this;var i;for(var n=0,r=this._ranges.length;n<r;n++){i=this._ranges[n];t._removeModelFromRange(i,e)}t._updateRangesLength()},_removeModelFromRange:function(e,n){this._eachItem(e.data,function(e){if(!e){return}for(var t=0;t<e.length;t++){var i=e[t];if(i.uid&&i.uid==n.uid){[].splice.call(e,t,1);break}}})},_insertModelInRange:function(e,t){var i=this;var n=i._ranges||[];var r=n.length;var a;var o;for(o=0;o<r;o++){a=n[o];if(a.start<=e&&a.end>=e){if(!i._getByUid(t.uid,a.data)){if(i._isServerGrouped()){a.data.splice(e,0,i._wrapInEmptyGroup(t))}else{a.data.splice(e,0,t)}}break}}i._updateRangesLength()},_updateRangesLength:function(){var e=this;var t=e._ranges||[];var i=t.length;var n=false;var r=0;var a=0;var o;var s;var l;for(l=0;l<i;l++){s=t[l];o=e._isGroupPaged()?s.data.length:e._flatData(s.data,true).length;a=o-D.abs(s.end-s.start);if(!n&&a!==0){n=true;r=a;s.end+=r;continue}if(n){s.start+=r;s.end+=r}}},_updateOuterRangesLength:function(){var e=this;var t=e._ranges||[];var i=t.length;var n=0;var r;var a;var o;var s;for(a=0;a<i;a++){r=t[a];s=e._isGroupPaged()?e._calculateGroupsTotal(r.data,true,"items",true):e._flatData(r.data,true).length;if(o){if(o.end!=r.start){n=r.start-o.end}r.outerStart=o.outerEnd+n;n=0}else{r.outerStart=r.start}r.outerEnd=r.outerStart+s;o=r}}});var Ze={};Ze.create=function(e,t,i){var n,r=e.transport?g.extend({},e.transport):null;if(r){r.read=typeof r.read===y?{url:r.read}:r.read;if(e.type==="jsdo"){r.dataSource=i}if(e.type){k.data.transports=k.data.transports||{};k.data.schemas=k.data.schemas||{};if(!k.data.transports[e.type]){k.logToConsole("Unknown DataSource transport type '"+e.type+"'.\nVerify that registration scripts for this type are included after Kendo UI on the page.","warn")}else if(!_(k.data.transports[e.type])){n=new k.data.transports[e.type](v(r,{data:t}))}else{r=v(true,{},k.data.transports[e.type],r)}e.schema=v(true,{},k.data.schemas[e.type],e.schema)}if(!n){n=p(r.read)?r:new Ee(r)}}else{n=new Ae({data:e.data||[]})}return n};B.create=function(e){if(u(e)||e instanceof E){e={data:e}}var t=e||{},i=t.data,n=t.fields,r=t.table,a=t.select,o,s,l={},d;if(!i&&n&&!t.transport){if(r){i=et(r,n)}else if(a){i=Je(a,n);if(t.group===T&&i[0]&&i[0].optgroup!==T){t.group="optgroup"}}}if(k.data.Model&&n&&(!t.schema||!t.schema.model)){for(o=0,s=n.length;o<s;o++){d=n[o];if(d.type){l[d.field]=d}}if(!f(l)){t.schema=v(true,t.schema,{model:{fields:l}})}}t.data=i;a=null;t.select=null;r=null;t.table=null;return t instanceof B?t:new B(t)};function Je(e,t){e=g(e)[0];var i=e.options;var n=t[0];var r=t[1];var a=[];var o,s;var l;var d;var u;var c;for(o=0,s=i.length;o<s;o++){u={};d=i[o];l=d.parentNode;if(l===e){l=null}if(d.disabled||l&&l.disabled){continue}if(l){u.optgroup=l.label}u[n.field]=d.text;c=d.attributes.value;if(c&&c.specified){c=d.value}else{c=d.text}u[r.field]=c;a.push(u)}return a}function et(e,t){var i=g(e)[0].tBodies[0],n=i?i.rows:[],r,a,o,s=t.length,l=[],d,u,c,f;for(r=0,a=n.length;r<a;r++){u={};f=true;d=n[r].cells;for(o=0;o<s;o++){c=d[o];if(c.nodeName.toLowerCase()!=="th"){f=false;u[t[o].field]=c.innerHTML}}if(!f){l.push(u)}}return l}var tt=I.define({idField:"id",init:function(e){var t=this,i=t.hasChildren||e&&e.hasChildren,n="items",r={};k.data.Model.fn.init.call(t,e);if(typeof t.children===y){n=t.children}r={schema:{data:n,model:{hasChildren:i,id:t.idField,fields:t.fields}}};if(typeof t.children!==y){v(r,t.children)}r.data=e;if(!i){i=r.schema.data}if(typeof i===y){i=k.getter(i)}if(p(i)){var a=i.call(t,t);if(a&&a.length===0){t.hasChildren=false}else{t.hasChildren=!!a}}t._childrenOptions=r;if(t.hasChildren){t._initChildren()}t._loaded=!!(e&&e._loaded)},_initChildren:function(){var i=this;var e,t,n;if(!(i.children instanceof L)){e=i.children=new L(i._childrenOptions);t=e.transport;n=t.parameterMap;t.parameterMap=function(e,t){e[i.idField||"id"]=i.id;if(n){e=n.call(i,e,t)}return e};e.parent=function(){return i};e.bind(x,function(e){e.node=e.node||i;i.trigger(x,e)});e.bind(a,function(e){var t=i.parent();if(t){e.node=e.node||i;t.trigger(a,e)}});i._updateChildrenField()}},append:function(e){this._initChildren();this.loaded(true);this.children.add(e)},hasChildren:false,level:function(){var e=this.parentNode(),t=0;while(e&&e.parentNode){t++;e=e.parentNode?e.parentNode():null}return t},_updateChildrenField:function(){var e=this._childrenOptions.schema.data;this[e||"items"]=this.children.data()},_childrenLoaded:function(){this._loaded=true;this._updateChildrenField()},load:function(){var e={};var t="_query";var i,n;if(this.hasChildren){this._initChildren();i=this.children;e[this.idField||"id"]=this.id;if(!this._loaded){i._data=T;t="read"}i.one(x,m(this._childrenLoaded,this));if(this._matchFilter){e.filter={field:"_matchFilter",operator:"eq",value:true}}n=i[t](e)}else{this.loaded(true)}return n||g.Deferred().resolve().promise()},parentNode:function(){var e=this.parent();return e.parent()},loaded:function(e){if(e!==T){this._loaded=e}else{return this._loaded}},shouldSerialize:function(e){return I.fn.shouldSerialize.call(this,e)&&e!=="children"&&e!=="_loaded"&&e!=="hasChildren"&&e!=="_childrenOptions"}});function it(i){return function(){var e=this._data,t=B.fn[i].apply(this,A.call(arguments));if(this._data!=e){this._attachBubbleHandlers()}return t}}var L=B.extend({init:function(e){var t=tt.define({children:e});if(e.filter&&!e.serverFiltering){this._hierarchicalFilter=e.filter;e.filter=null}B.fn.init.call(this,v(true,{},{schema:{modelBase:t,model:t}},e));this._attachBubbleHandlers()},_attachBubbleHandlers:function(){var t=this;t._data.bind(a,function(e){t.trigger(a,e)})},read:function(e){var t=B.fn.read.call(this,e);if(this._hierarchicalFilter){if(this._data&&this._data.length>0){this.filter(this._hierarchicalFilter)}else{this.options.filter=this._hierarchicalFilter;this._filter=F(this.options.filter);this._hierarchicalFilter=null}}return t},remove:function(e){var t=e.parentNode(),i=this,n;if(t&&t._initChildren){i=t.children}n=B.fn.remove.call(i,e);if(t&&!i.data().length){t.hasChildren=false}return n},success:it("success"),data:it("data"),insert:function(e,t){var i=this.parent();if(i&&i._initChildren){i.hasChildren=true;i._initChildren()}return B.fn.insert.call(this,e,t)},filter:function(e){if(e===T){return this._filter}if(!this.options.serverFiltering&&this._markHierarchicalQuery(e)){e={logic:"or",filters:[e,{field:"_matchFilter",operator:"equals",value:true}]}}this.trigger("reset");this._query({filter:e,page:1})},_markHierarchicalQuery:function(e){var t;var i;var n;var r;var a;var o=this.options.accentFoldingFiltering;e=o?g.extend({},F(e),{accentFoldingFiltering:o}):F(e);if(!e||e.filters.length===0){this._updateHierarchicalFilter(function(){return true});return false}t=M.filterExpr(e);n=t.fields;r=t.operators;i=a=new Function("d, __f, __o","return "+t.expression);if(n.length||r.length){a=function(e){return i(e,n,r)}}this._updateHierarchicalFilter(a);return true},_updateHierarchicalFilter:function(e){var t;var i=this._data;var n=false;for(var r=0;r<i.length;r++){t=i[r];if(t.hasChildren){t._matchFilter=t.children._updateHierarchicalFilter(e);if(!t._matchFilter){t._matchFilter=e(t)}}else{t._matchFilter=e(t)}if(t._matchFilter){n=true}}return n},_find:function(e,t){var i,n,r,a;var o=this._data;if(!o){return}r=B.fn[e].call(this,t);if(r){return r}o=this._flatData(this._data);for(i=0,n=o.length;i<n;i++){a=o[i].children;if(!(a instanceof L)){continue}r=a[e](t);if(r){return r}}},get:function(e){return this._find("get",e)},getByUid:function(e){return this._find("getByUid",e)}});function nt(e,t){var i=g(e).children(),n,r,a=[],o,s=t[0].field,l=t[1]&&t[1].field,d=t[2]&&t[2].field,u=t[3]&&t[3].field,c,f,h,p,v;function m(e,t){return e.filter(t).add(e.find(t))}for(n=0,r=i.length;n<r;n++){o={_loaded:true};c=i.eq(n);h=c[0].firstChild;v=c.children();e=v.filter("ul");v=v.filter(":not(ul)");f=c.attr("data-id");if(f){o.id=f}if(h){o[s]=h.nodeType==3?h.nodeValue:v.text()}if(l){o[l]=m(v,"a").attr("href")}if(u){o[u]=m(v,"img").attr("src")}if(d){p=m(v,".k-sprite").prop("className");o[d]=p&&k.trim(p.replace("k-sprite",""))}if(e.length){o.items=nt(e.eq(0),t)}if(c.attr("data-hasChildren")=="true"){o.hasChildren=true}a.push(o)}return a}L.create=function(e){e=e&&e.push?{data:e}:e;var t=e||{},i=t.data,n=t.fields,r=t.list;if(i&&i._dataSource){return i._dataSource}if(!i&&n&&!t.transport){if(r){i=nt(r,n)}}t.data=i;return t instanceof L?t:new L(t)};var rt=k.Observable.extend({init:function(e,t,i){k.Observable.fn.init.call(this);this._prefetching=false;this.dataSource=e;this.prefetch=!i;var n=this;e.bind("change",function(){n._change()});e.bind("reset",function(){n._reset()});this._syncWithDataSource();this.setViewSize(t)},setViewSize:function(e){this.viewSize=e;this._recalculate()},at:function(e){var t=this.pageSize,i=true;if(e>=this.total()){this.trigger("endreached",{index:e});return null}if(!this.useRanges){return this.dataSource.view()[e]}if(this.useRanges){if(e<this.dataOffset||e>=this.skip+t){i=this.range(Math.floor(e/t)*t)}if(e===this.prefetchThreshold){this._prefetch()}if(e===this.midPageThreshold){this.range(this.nextMidRange,true)}else if(e===this.nextPageThreshold){this.range(this.nextFullRange)}else if(e===this.pullBackThreshold){if(this.offset===this.skip){this.range(this.previousMidRange)}else{this.range(this.previousFullRange)}}if(i){return this.dataSource.at(e-this.dataOffset)}else{this.trigger("endreached",{index:e});return null}}},indexOf:function(e){return this.dataSource.data().indexOf(e)+this.dataOffset},total:function(){return parseInt(this.dataSource.total(),10)},next:function(){var e=this,t=e.pageSize,i=e.skip-e.viewSize+t,n=D.max(D.floor(i/t),0)*t;this.offset=i;this.dataSource.prefetch(n,t,function(){e._goToRange(i,true)})},range:function(e,t){if(this.offset===e){return true}var i=this,n=this.pageSize,r=D.max(D.floor(e/n),0)*n,a=this.dataSource;if(t){r+=n}if(a.inRange(e,n)){this.offset=e;this._recalculate();this._goToRange(e);return true}else if(this.prefetch){a.prefetch(r,n,function(){i.offset=e;i._recalculate();i._goToRange(e,true)});return false}return true},syncDataSource:function(){var e=this.offset;this.offset=null;this.range(e)},destroy:function(){this.unbind()},_prefetch:function(){var e=this,t=this.pageSize,i=this.skip+t,n=this.dataSource;if(!n.inRange(i,t)&&!this._prefetching&&this.prefetch){this._prefetching=true;this.trigger("prefetching",{skip:i,take:t});n.prefetch(i,t,function(){e._prefetching=false;e.trigger("prefetched",{skip:i,take:t})})}},_goToRange:function(e,t){if(this.offset!==e){return}this.dataOffset=e;this._expanding=t;this.dataSource.range(e,this.pageSize);this.dataSource.enableRequestsInProgress()},_reset:function(){this._syncPending=true},_change:function(){var e=this.dataSource;this.length=this.useRanges?e.lastRange().end:e.view().length;if(this._syncPending){this._syncWithDataSource();this._recalculate();this._syncPending=false;this.trigger("reset",{offset:this.offset})}this.trigger("resize");if(this._expanding){this.trigger("expand")}delete this._expanding},_syncWithDataSource:function(){var e=this.dataSource;this._firstItemUid=e.firstItemUid();this.dataOffset=this.offset=e.skip()||0;this.pageSize=e.pageSize();this.useRanges=e.options.serverPaging},_recalculate:function(){var e=this.pageSize,t=this.offset,i=this.viewSize,n=Math.ceil(t/e)*e;this.skip=n;this.midPageThreshold=n+e-1;this.nextPageThreshold=n+i-1;this.prefetchThreshold=n+Math.floor(e/3*2);this.pullBackThreshold=this.offset-1;this.nextMidRange=n+e-i;this.nextFullRange=n;this.previousMidRange=t-i;this.previousFullRange=n-e}});var at=k.Observable.extend({init:function(e,t){var i=this;k.Observable.fn.init.call(i);this.dataSource=e;this.batchSize=t;this._total=0;this.buffer=new rt(e,t*3);this.buffer.bind({endreached:function(e){i.trigger("endreached",{index:e.index})},prefetching:function(e){i.trigger("prefetching",{skip:e.skip,take:e.take})},prefetched:function(e){i.trigger("prefetched",{skip:e.skip,take:e.take})},reset:function(){i._total=0;i.trigger("reset")},resize:function(){i._total=Math.ceil(this.length/i.batchSize);i.trigger("resize",{total:i.total(),offset:this.offset})}})},syncDataSource:function(){this.buffer.syncDataSource()},at:function(e){var t=this.buffer,i=e*this.batchSize,n=this.batchSize,r=[],a;if(t.offset>i){t.at(t.offset-1)}for(var o=0;o<n;o++){a=t.at(i+o);if(a===null){break}r.push(a)}return r},total:function(){return this._total},destroy:function(){this.buffer.destroy();this.unbind()}});v(true,k.data,{readers:{json:ze},Query:M,DataSource:B,HierarchicalDataSource:L,Node:tt,Comparer:l,ObservableObject:d,ObservableArray:E,LazyObservableArray:re,LocalTransport:Ae,RemoteTransport:Ee,Cache:r,DataReader:ze,Model:I,Buffer:rt,BatchBuffer:at})})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.binder",["kendo.core","kendo.data"],e)})(function(){var e={id:"binder",name:"MVVM",category:"framework",description:"Model View ViewModel (MVVM) is a design pattern which helps developers separate the Model (the data) from the View (the UI).",depends:["core","data"]};(function(c,m){var h=window.kendo,n=h.Observable,f=h.data.ObservableObject,g=h.data.ObservableArray,p={}.toString,s={},e=h.Class,r=c.proxy,_="value",d="source",u="events",v="checked",b="css",a=true,o="function",w="change";(function(){var e=document.createElement("a");try{delete e.test}catch(e){a=false}})();var k=n.extend({init:function(e,t){var i=this;n.fn.init.call(i);i.source=e[0];i.parents=e;i.path=t;i.dependencies={};i.dependencies[t]=true;i.observable=i.source instanceof n;i._access=function(e){i.dependencies[e.field]=true};if(i.observable){i._change=function(e){i.change(e)};i.source.bind(w,i._change)}},_parents:function(){var e=this.parents;var t=this.get();if(t&&typeof t.parent=="function"){var i=t.parent();if(c.inArray(i,e)<0){e=[i].concat(e)}}return e},change:function(e){var t,i,n=e.field,r=this;if(r.path==="this"){r.trigger(w,e)}else{for(t in r.dependencies){if(t.indexOf(n)===0){i=t.charAt(n.length);if(!i||i==="."||i==="["){r.trigger(w,e);break}}}}},start:function(e){e.bind("get",this._access)},stop:function(e){e.unbind("get",this._access)},get:function(){var e=this,t=e.source,i=0,n=e.path,r=t;if(!e.observable){return r}e.start(e.source);r=t.get(n);while(r===m&&t){t=e.parents[++i];if(t instanceof f){r=t.get(n)}}if(r===m){t=e.source;while(r===m&&t){t=t.parent();if(t instanceof f){r=t.get(n)}}}if(typeof r==="function"){i=n.lastIndexOf(".");if(i>0){t=t.get(n.substring(0,i))}e.start(t);if(t!==e.source){r=r.call(t,e.source)}else{r=r.call(t)}e.stop(t)}if(t&&t!==e.source){e.currentSource=t;t.unbind(w,e._change).bind(w,e._change)}e.stop(e.source);return r},set:function(e){var t=this.currentSource||this.source;var i=h.getter(this.path)(t);if(typeof i==="function"){if(t!==this.source){i.call(t,this.source,e)}else{i.call(t,e)}}else{t.set(this.path,e)}},destroy:function(){if(this.observable){this.source.unbind(w,this._change);if(this.currentSource){this.currentSource.unbind(w,this._change)}}this.unbind()}});var y=k.extend({get:function(){var e=this.source,t=this.path,i=0,n;n=e.get(t);while(!n&&e){e=this.parents[++i];if(e instanceof f){n=e.get(t)}}return r(n,e)}});var x=k.extend({init:function(e,t,i){var n=this;k.fn.init.call(n,e,t);n.template=i},render:function(e){var t;this.start(this.source);t=h.render(this.template,e);this.stop(this.source);return t}});var l=e.extend({init:function(e,t,i){this.element=e;this.bindings=t;this.options=i},bind:function(e,t){var i=this;e=t?e[t]:e;e.bind(w,function(e){i.refresh(t||e)});i.refresh(t)},destroy:function(){}});var C=l.extend({dataType:function(){var e=this.element.getAttribute("data-"+h.ns+"type")||this.element.type||"text";return e.toLowerCase()},parsedValue:function(){return this._parseValue(this.element.value,this.dataType())},_parseValue:function(e,t){if(t=="date"){e=h.parseDate(e,"yyyy-MM-dd")}else if(t=="datetime-local"){e=h.parseDate(e,["yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm"])}else if(t=="number"){e=h.parseFloat(e)}else if(t=="boolean"){e=e.toLowerCase();if(h.parseFloat(e)!==null){e=Boolean(h.parseFloat(e))}else{e=e.toLowerCase()==="true"}}return e}});s.attr=l.extend({refresh:function(e){this.element.setAttribute(e,this.bindings.attr[e].get())}});s.css=l.extend({init:function(e,t,i){l.fn.init.call(this,e,t,i);this.classes={}},refresh:function(e){var t=c(this.element),i=this.bindings.css[e],n=this.classes[e]=i.get();if(n){t.addClass(e)}else{t.removeClass(e)}}});s.style=l.extend({refresh:function(e){this.element.style[e]=this.bindings.style[e].get()||""}});s.enabled=l.extend({refresh:function(){if(this.bindings.enabled.get()){this.element.removeAttribute("disabled")}else{this.element.setAttribute("disabled","disabled")}}});s.readonly=l.extend({refresh:function(){if(this.bindings.readonly.get()){this.element.setAttribute("readonly","readonly")}else{this.element.removeAttribute("readonly")}}});s.disabled=l.extend({refresh:function(){if(this.bindings.disabled.get()){this.element.setAttribute("disabled","disabled")}else{this.element.removeAttribute("disabled")}}});s.events=l.extend({init:function(e,t,i){l.fn.init.call(this,e,t,i);this.handlers={}},refresh:function(e){var t=c(this.element),i=this.bindings.events[e],n=this.handlers[e];if(n){t.off(e,n)}n=this.handlers[e]=i.get();t.on(e,i.source,n)},destroy:function(){var e=c(this.element),t;for(t in this.handlers){e.off(t,this.handlers[t])}}});s.text=l.extend({refresh:function(){var e=this.bindings.text.get();var t=this.element.getAttribute("data-"+h.ns+"format")||"";if(e==null){e=""}c(this.element).text(h.toString(e,t))}});s.visible=l.extend({refresh:function(){if(this.bindings.visible.get()){this.element.style.display=""}else{this.element.style.display="none"}}});s.invisible=l.extend({refresh:function(){if(!this.bindings.invisible.get()){this.element.style.display=""}else{this.element.style.display="none"}}});s.html=l.extend({refresh:function(){this.element.innerHTML=this.bindings.html.get()}});s.value=C.extend({init:function(e,t,i){C.fn.init.call(this,e,t,i);this._change=r(this.change,this);this.eventName=i.valueUpdate||w;c(this.element).on(this.eventName,this._change);this._initChange=false},change:function(){this._initChange=this.eventName!=w;this.bindings[_].set(this.parsedValue());this._initChange=false},refresh:function(){if(!this._initChange){var e=this.bindings[_].get();if(e==null){e=""}var t=this.dataType();if(t=="date"){e=h.toString(e,"yyyy-MM-dd")}else if(t=="datetime-local"){e=h.toString(e,"yyyy-MM-ddTHH:mm:ss")}this.element.value=e}this._initChange=false},destroy:function(){c(this.element).off(this.eventName,this._change)}});s.source=l.extend({init:function(e,t,i){l.fn.init.call(this,e,t,i);var n=this.bindings.source.get();if(n instanceof h.data.DataSource&&i.autoBind!==false){n.fetch()}},refresh:function(e){var t=this,i=t.bindings.source.get();if(i instanceof g||i instanceof h.data.DataSource){e=e||{};if(e.action=="add"){t.add(e.index,e.items)}else if(e.action=="remove"){t.remove(e.index,e.items)}else if(e.action!="itemchange"){t.render()}}else{t.render()}},container:function(){var e=this.element;if(e.nodeName.toLowerCase()=="table"){if(!e.tBodies[0]){e.appendChild(document.createElement("tbody"))}e=e.tBodies[0]}return e},template:function(){var e=this.options,t=e.template,i=this.container().nodeName.toLowerCase();if(!t){if(i=="select"){if(e.valueField||e.textField){t=h.format('<option value="#:{0}#">#:{1}#</option>',e.valueField||e.textField,e.textField||e.valueField)}else{t="<option>#:data#</option>"}}else if(i=="tbody"){t="<tr><td>#:data#</td></tr>"}else if(i=="ul"||i=="ol"){t="<li>#:data#</li>"}else{t="#:data#"}t=h.template(t)}return t},add:function(e,t){var i=this.container(),n,r,a,o,s=i.cloneNode(false),l=i.children[e];c(s).html(h.render(this.template(),t));if(s.children.length){n=this.bindings.source._parents();for(r=0,a=t.length;r<a;r++){o=s.children[0];i.insertBefore(o,l||null);M(o,t[r],this.options.roles,[t[r]].concat(n))}}},remove:function(e,t){var i,n=this.container();for(i=0;i<t.length;i++){var r=n.children[e];P(r,true);if(r.parentNode==n){n.removeChild(r)}}},render:function(){var e=this.bindings.source.get(),t,i,n,r=this.container(),a=this.template();if(e==null){return}if(e instanceof h.data.DataSource){e=e.view()}if(!(e instanceof g)&&p.call(e)!=="[object Array]"){e=[e]}if(this.bindings.template){z(r,true);c(r).html(this.bindings.template.render(e));if(r.children.length){t=this.bindings.source._parents();for(i=0,n=e.length;i<n;i++){M(r.children[i],e[i],this.options.roles,[e[i]].concat(t))}}}else{c(r).html(h.render(a,e))}}});s.input={checked:C.extend({init:function(e,t,i){C.fn.init.call(this,e,t,i);this._change=r(this.change,this);c(this.element).change(this._change)},change:function(){var e=this.element;var t=this.value();if(e.type=="radio"){t=this.parsedValue();this.bindings[v].set(t)}else if(e.type=="checkbox"){var i=this.bindings[v].get();var n;if(i instanceof g){t=this.parsedValue();if(t instanceof Date){for(var r=0;r<i.length;r++){if(i[r]instanceof Date&&+i[r]===+t){n=r;break}}}else{n=i.indexOf(t)}if(n>-1){i.splice(n,1)}else{i.push(t)}}else{this.bindings[v].set(t)}}},refresh:function(){var e=this.bindings[v].get(),t=e,i=this.dataType(),n=this.element;if(n.type=="checkbox"){if(t instanceof g){var r=-1;e=this.parsedValue();if(e instanceof Date){for(var a=0;a<t.length;a++){if(t[a]instanceof Date&&+t[a]===+e){r=a;break}}}else{r=t.indexOf(e)}n.checked=r>=0}else{n.checked=t}}else if(n.type=="radio"){if(i=="date"){e=h.toString(e,"yyyy-MM-dd")}else if(i=="datetime-local"){e=h.toString(e,"yyyy-MM-ddTHH:mm:ss")}if(e!==null&&typeof e!=="undefined"&&n.value===e.toString()){n.checked=true}else{n.checked=false}}},value:function(){var e=this.element,t=e.value;if(e.type=="checkbox"){t=e.checked}return t},destroy:function(){c(this.element).off(w,this._change)}})};s.select={source:s.source.extend({refresh:function(e){var t=this,i=t.bindings.source.get();if(i instanceof g||i instanceof h.data.DataSource){e=e||{};if(e.action=="add"){t.add(e.index,e.items)}else if(e.action=="remove"){t.remove(e.index,e.items)}else if(e.action=="itemchange"||e.action===m){t.render();if(t.bindings.value){if(t.bindings.value){var n=B(t.bindings.value.get(),c(t.element).data("valueField"));if(n===null){t.element.selectedIndex=-1}else{t.element.value=n}}}}}else{t.render()}}}),value:C.extend({init:function(e,t,i){C.fn.init.call(this,e,t,i);this._change=r(this.change,this);c(this.element).change(this._change)},parsedValue:function(){var e=this.dataType();var t=[];var i,n,r,a;for(r=0,a=this.element.options.length;r<a;r++){n=this.element.options[r];if(n.selected){i=n.attributes.value;if(i&&i.specified){i=n.value}else{i=n.text}t.push(this._parseValue(i,e))}}return t},change:function(){var e=[],t=this.element,i,n=this.options.valueField||this.options.textField,r=this.options.valuePrimitive,a,o,s,l,d;for(l=0,d=t.options.length;l<d;l++){a=t.options[l];if(a.selected){s=a.attributes.value;if(s&&s.specified){s=a.value}else{s=a.text}if(n){e.push(s)}else{e.push(this._parseValue(s,this.dataType()))}}}if(n){i=this.bindings.source.get();if(i instanceof h.data.DataSource){i=i.view()}for(o=0;o<e.length;o++){for(l=0,d=i.length;l<d;l++){var u=i[l].get(n);var c=String(u)===e[o];if(c){e[o]=i[l];break}}}}s=this.bindings[_].get();if(s instanceof g){s.splice.apply(s,[0,s.length].concat(e))}else if(!r&&(s instanceof f||s===null||s===m||!n)){this.bindings[_].set(e[0])}else{this.bindings[_].set(e[0].get(n))}},refresh:function(){var e,t=this.element,i=t.options,n=this.bindings[_].get(),r=n,a=this.options.valueField||this.options.textField,o=false,s=this.dataType(),l;if(!(r instanceof g)){r=new g([n])}t.selectedIndex=-1;for(var d=0;d<r.length;d++){n=r[d];if(a&&n instanceof f){n=n.get(a)}if(s=="date"){n=h.toString(r[d],"yyyy-MM-dd")}else if(s=="datetime-local"){n=h.toString(r[d],"yyyy-MM-ddTHH:mm:ss")}for(e=0;e<i.length;e++){l=i[e].value;if(l===""&&n!==""){l=i[e].text}if(n!=null&&l==n.toString()){i[e].selected=true;o=true}}}},destroy:function(){c(this.element).off(w,this._change)}})};function t(d,u,s){return l.extend({init:function(e,t,i){var n=this;l.fn.init.call(n,e.element[0],t,i);n.widget=e;n._dataBinding=r(n.dataBinding,n);n._dataBound=r(n.dataBound,n);n._itemChange=r(n.itemChange,n)},itemChange:function(e){M(e.item[0],e.data,this._ns(e.ns),[e.data].concat(this.bindings[d]._parents()))},dataBinding:function(e){var t,i,n=this.widget,r=e.removedItems||n.items();for(t=0,i=r.length;t<i;t++){P(r[t],false)}},_ns:function(e){e=e||h.ui;var t=[h.ui,h.dataviz.ui,h.mobile.ui];t.splice(c.inArray(e,t),1);t.unshift(e);return h.rolesFromNamespaces(t)},dataBound:function(e){var t,i,n=this.widget,r=e.addedItems||n.items(),a=n[u],o,s,l=h.data.HierarchicalDataSource;if(l&&a instanceof l){return}if(r.length){o=e.addedDataItems||a.flatView();s=this.bindings[d]._parents();for(t=0,i=o.length;t<i;t++){if(r[t]){M(r[t],o[t],this._ns(e.ns),[o[t]].concat(s))}}}},refresh:function(e){var t=this,i,n=t.widget,r,a,o;e=e||{};if(!e.action){t.destroy();n.bind("dataBinding",t._dataBinding);n.bind("dataBound",t._dataBound);n.bind("itemChange",t._itemChange);i=t.bindings[d].get();if(n[u]instanceof h.data.DataSource&&n[u]!=i){if(i instanceof h.data.DataSource){n[s](i)}else if(i&&i._dataSource){n[s](i._dataSource)}else{r=h.ui.Select&&n instanceof h.ui.Select;a=h.ui.MultiSelect&&n instanceof h.ui.MultiSelect;o=h.ui.DropDownTree&&n instanceof h.ui.DropDownTree;if(!o){n[u].data(i)}else{n.treeview[u].data(i)}if(t.bindings.value&&(r||a)){n.value(B(t.bindings.value.get(),n.options.dataValueField))}}}}},destroy:function(){var e=this.widget;e.unbind("dataBinding",this._dataBinding);e.unbind("dataBound",this._dataBound);e.unbind("itemChange",this._itemChange)}})}s.widget={events:l.extend({init:function(e,t,i){l.fn.init.call(this,e.element[0],t,i);this.widget=e;this.handlers={}},refresh:function(e){var t=this.bindings.events[e],i=this.handlers[e];if(i){this.widget.unbind(e,i)}i=t.get();this.handlers[e]=function(e){e.data=t.source;i(e);if(e.data===t.source){delete e.data}};this.widget.bind(e,this.handlers[e])},destroy:function(){var e;for(e in this.handlers){this.widget.unbind(e,this.handlers[e])}}}),checked:l.extend({init:function(e,t,i){l.fn.init.call(this,e.element[0],t,i);this.widget=e;this._change=r(this.change,this);this.widget.bind(w,this._change)},change:function(){this.bindings[v].set(this.value())},refresh:function(){this.widget.check(this.bindings[v].get()===true)},value:function(){var e=this.element,t=e.value;if(t=="on"||t=="off"||this.element.type=="checkbox"){t=e.checked}return t},destroy:function(){this.widget.unbind(w,this._change)}}),start:l.extend({init:function(e,t,i){l.fn.init.call(this,e.element[0],t,i);this._change=r(this.change,this);this.widget=e;this.widget.bind(w,this._change)},change:function(){this.bindings.start.set(this.widget.range().start)},refresh:function(){var e=this;var t=this.bindings.start.get();var i=e.widget._range?e.widget._range.end:null;this.widget.range({start:t,end:i})},destroy:function(){this.widget.unbind(w,this._change)}}),end:l.extend({init:function(e,t,i){l.fn.init.call(this,e.element[0],t,i);this._change=r(this.change,this);this.widget=e;this.widget.bind(w,this._change)},change:function(){this.bindings.end.set(this.widget.range().end)},refresh:function(){var e=this;var t=this.bindings.end.get();var i=e.widget._range?e.widget._range.start:null;this.widget.range({start:i,end:t})},destroy:function(){this.widget.unbind(w,this._change)}}),visible:l.extend({init:function(e,t,i){l.fn.init.call(this,e.element[0],t,i);this.widget=e},refresh:function(){var e=this.bindings.visible.get();this.widget.wrapper[0].style.display=e?"":"none"}}),invisible:l.extend({init:function(e,t,i){l.fn.init.call(this,e.element[0],t,i);this.widget=e},refresh:function(){var e=this.bindings.invisible.get();this.widget.wrapper[0].style.display=e?"none":""}}),enabled:l.extend({init:function(e,t,i){l.fn.init.call(this,e.element[0],t,i);this.widget=e},refresh:function(){if(this.widget.enable){this.widget.enable(this.bindings.enabled.get())}}}),disabled:l.extend({init:function(e,t,i){l.fn.init.call(this,e.element[0],t,i);this.widget=e},refresh:function(){if(this.widget.enable){this.widget.enable(!this.bindings.disabled.get())}}}),source:t("source","dataSource","setDataSource"),value:l.extend({init:function(e,t,i){l.fn.init.call(this,e.element[0],t,i);this.widget=e;this._change=c.proxy(this.change,this);this.widget.first(w,this._change);var n=this.bindings.value.get();this._valueIsObservableObject=!i.valuePrimitive&&(n==null||n instanceof f);this._valueIsObservableArray=n instanceof g;this._initChange=false},_source:function(){var e;if(this.widget.dataItem){e=this.widget.dataItem();if(e&&e instanceof f){return[e]}}if(this.bindings.source){e=this.bindings.source.get()}if(!e||e instanceof h.data.DataSource){e=this.widget.dataSource.flatView()}return e},change:function(){var e=this.widget.value(),t=this.options.dataValueField||this.options.dataTextField,i=p.call(e)==="[object Array]",n=this._valueIsObservableObject,r,a,o=[],s,l,d,u,c;this._initChange=true;if(t){if(e===""&&(n||this.options.valuePrimitive)){e=null}else{c=this._source();if(i){a=e.length;o=e.slice(0)}for(d=0,u=c.length;d<u;d++){s=c[d];l=s.get(t);if(i){for(r=0;r<a;r++){if(l==o[r]){o[r]=s;break}}}else if(l==e){e=n?s:l;break}}if(o[0]){if(this._valueIsObservableArray){e=o}else if(n||!t){e=o[0]}else{e=o[0].get(t)}}}}this.bindings.value.set(e);this._initChange=false},refresh:function(){if(!this._initChange){var e=this.widget;var t=e.options;var i=t.dataTextField;var n=t.dataValueField||i;var r=this.bindings.value.get();var a=t.text||"";var o=0,s;var l=[];if(r===m){r=null}if(n){if(r instanceof g){for(s=r.length;o<s;o++){l[o]=r[o].get(n)}r=l}else if(r instanceof f){a=r.get(i);r=r.get(n)}}if(t.autoBind===false&&!t.cascadeFrom&&e.listView&&!e.listView.bound()){if(i===n&&!a){a=r}if(!a&&(r||r===0)&&t.valuePrimitive){e.value(r)}else{e._preselect(r,a)}}else{e.value(r)}}this._initChange=false},destroy:function(){this.widget.unbind(w,this._change)}}),dropdowntree:{value:l.extend({init:function(e,t,i){l.fn.init.call(this,e.element[0],t,i);this.widget=e;this._change=c.proxy(this.change,this);this.widget.first(w,this._change);this._initChange=false},change:function(){var e=this,t=e.bindings[_].get(),i=e.options.valuePrimitive,n=e.widget.treeview.select(),r=e.widget._isMultipleSelection()?e.widget._getAllChecked():e.widget.treeview.dataItem(n)||e.widget.value(),a=i||e.widget.options.autoBind===false?e.widget.value():r;var o=this.options.dataValueField||this.options.dataTextField;a=a.slice?a.slice(0):a;e._initChange=true;if(t instanceof g){var s=[];var l=a.length;var d=0,u=0;var c=t[d];var f=false;var h;var p;var v;while(c!==m){v=false;for(u=0;u<l;u++){if(i){f=a[u]==c}else{p=a[u];p=p.get?p.get(o):p;f=p==(c.get?c.get(o):c)}if(f){a.splice(u,1);l-=1;v=true;break}}if(!v){s.push(c);S(t,d,1);h=d}else{d+=1}c=t[d]}S(t,t.length,0,a);if(s.length){t.trigger("change",{action:"remove",items:s,index:h})}if(a.length){t.trigger("change",{action:"add",items:a,index:t.length-1})}}else{e.bindings[_].set(a)}e._initChange=false},refresh:function(){if(!this._initChange){var e=this.options,t=this.widget,i=e.dataValueField||e.dataTextField,n=this.bindings.value.get(),r=n,a=0,o,s=[],l;if(i){if(n instanceof g){for(o=n.length;a<o;a++){l=n[a];s[a]=l.get?l.get(i):l}n=s}else if(n instanceof f){n=n.get(i)}}if(e.autoBind===false&&e.valuePrimitive!==true){t._preselect(r,n)}else{t.value(n)}}},destroy:function(){this.widget.unbind(w,this._change)}})},gantt:{dependencies:t("dependencies","dependencies","setDependenciesDataSource")},multiselect:{value:l.extend({init:function(e,t,i){l.fn.init.call(this,e.element[0],t,i);this.widget=e;this._change=c.proxy(this.change,this);this.widget.first(w,this._change);this._initChange=false},change:function(){var e=this,t=e.bindings[_].get(),i=e.options.valuePrimitive,n=i?e.widget.value():e.widget.dataItems();var r=this.options.dataValueField||this.options.dataTextField;n=n.slice(0);e._initChange=true;if(t instanceof g){var a=[];var o=n.length;var s=0,l=0;var d=t[s];var u=false;var c;var f;var h;while(d!==m){h=false;for(l=0;l<o;l++){if(i){u=n[l]==d}else{f=n[l];f=f.get?f.get(r):f;u=f==(d.get?d.get(r):d)}if(u){n.splice(l,1);o-=1;h=true;break}}if(!h){a.push(d);S(t,s,1);c=s}else{s+=1}d=t[s]}S(t,t.length,0,n);if(a.length){t.trigger("change",{action:"remove",items:a,index:c})}if(n.length){t.trigger("change",{action:"add",items:n,index:t.length-1})}}else{e.bindings[_].set(n)}e._initChange=false},refresh:function(){if(!this._initChange){var e=this.options,t=this.widget,i=e.dataValueField||e.dataTextField,n=this.bindings.value.get(),r=n,a=0,o,s=[],l;if(n===m){n=null}if(i){if(n instanceof g){for(o=n.length;a<o;a++){l=n[a];s[a]=l.get?l.get(i):l}n=s}else if(n instanceof f){n=n.get(i)}}if(e.autoBind===false&&e.valuePrimitive!==true&&!t._isBound()){t._preselect(r,n)}else{t.value(n)}}},destroy:function(){this.widget.unbind(w,this._change)}})},scheduler:{source:t("source","dataSource","setDataSource").extend({dataBound:function(e){var t;var i;var n=this.widget;var r=e.addedItems||n.items();var a,o;if(r.length){a=e.addedDataItems||n.dataItems();o=this.bindings.source._parents();for(t=0,i=a.length;t<i;t++){M(r[t],a[t],this._ns(e.ns),[a[t]].concat(o))}}}})},grid:{source:t("source","dataSource","setDataSource").extend({dataBound:function(e){var t,i,n=this.widget,r=e.addedItems||n.items(),a,o;if(r.length){o=e.addedDataItems||n.dataItems();a=this.bindings.source._parents();for(t=0,i=o.length;t<i;t++){M(r[t],o[t],this._ns(e.ns),[o[t]].concat(a))}}}})},badge:{text:l.extend({init:function(e,t,i){l.fn.init.call(this,e.element[0],t,i);this.widget=e},refresh:function(){var e=this.bindings.text.get();if(e==null){e=""}this.widget.text(e)}})}};var S=function(e,t,i,n){n=n||[];i=i||0;var r=n.length;var a=e.length;var o=[].slice.call(e,t+i);var s=o.length;var l;if(r){r=t+r;l=0;for(;t<r;t++){e[t]=n[l];l++}e.length=r}else if(i){e.length=t;i+=t;while(t<i){delete e[--i]}}if(s){s=t+s;l=0;for(;t<s;t++){e[t]=o[l];l++}e.length=s}t=e.length;while(t<a){delete e[t];t++}};var T=e.extend({init:function(e,t){this.target=e;this.options=t;this.toDestroy=[]},bind:function(e){var t,i,n,r,a,o,s=this instanceof D,l=this.binders();for(t in e){if(t==_){i=true}else if(t==d){n=true}else if(t==u&&!s){r=true}else if(t==v){a=true}else if(t==b){o=true}else{this.applyBinding(t,e,l)}}if(n){this.applyBinding(d,e,l)}if(i){this.applyBinding(_,e,l)}if(a){this.applyBinding(v,e,l)}if(r&&!s){this.applyBinding(u,e,l)}if(o&&!s){this.applyBinding(b,e,l)}},binders:function(){return s[this.target.nodeName.toLowerCase()]||{}},applyBinding:function(e,t,i){var n=i[e]||s[e],r=this.toDestroy,a,o=t[e];if(n){n=new n(this.target,t,this.options);r.push(n);if(o instanceof k){n.bind(o);r.push(o)}else{for(a in o){n.bind(o,a);r.push(o[a])}}}else if(e!=="template"){throw new Error("The "+e+" binding is not supported by the "+this.target.nodeName.toLowerCase()+" element")}},destroy:function(){var e,t,i=this.toDestroy;for(e=0,t=i.length;e<t;e++){i[e].destroy()}}});var D=T.extend({binders:function(){return s.widget[this.target.options.name.toLowerCase()]||{}},applyBinding:function(e,t,i){var n=i[e]||s.widget[e],r=this.toDestroy,a,o=t[e];if(n){n=new n(this.target,t,this.target.options);r.push(n);if(o instanceof k){n.bind(o);r.push(o)}else{for(a in o){n.bind(o,a);r.push(o[a])}}}else{throw new Error("The "+e+" binding is not supported by the "+this.target.options.name+" widget")}}});function A(e,t){var i=h.initWidget(e,{},t);if(i){return new D(i)}}var L=/[A-Za-z0-9_\-]+:(\{([^}]*)\}|[^,}]+)/g,H=/\s/g;function E(e){var t={},i,n,r,a,o,s,l;l=e.match(L);for(i=0,n=l.length;i<n;i++){r=l[i];a=r.indexOf(":");o=r.substring(0,a);s=r.substring(a+1);if(s.charAt(0)=="{"){s=E(s)}t[o]=s}return t}function I(e,t,i){var n,r={};for(n in e){r[n]=new i(t,e[n])}return r}function M(e,t,i,n){if(!e||e.getAttribute("data-"+h.ns+"stop")){return}var r=e.getAttribute("data-"+h.ns+"role"),a,o=e.getAttribute("data-"+h.ns+"bind"),s=[],l=true,d,u={},c;n=n||[t];if(r||o){F(e,false)}if(r){c=A(e,i)}if(o){o=E(o.replace(H,""));if(!c){u=h.parseOptions(e,{textField:"",valueField:"",template:"",valueUpdate:w,valuePrimitive:false,autoBind:true},t);u.roles=i;c=new T(e,u)}c.source=t;d=I(o,n,k);if(u.template){d.template=new x(n,"",u.template)}if(d.click){o.events=o.events||{};o.events.click=o.click;d.click.destroy();delete d.click}if(d.source){l=false}if(o.attr){d.attr=I(o.attr,n,k)}if(o.style){d.style=I(o.style,n,k)}if(o.events){d.events=I(o.events,n,y)}if(o.css){d.css=I(o.css,n,k)}c.bind(d)}if(c){e.kendoBindingTarget=c}var f=e.children;if(l&&f&&!e.getAttribute("data-"+h.ns+"stop")){for(a=0;a<f.length;a++){s[a]=f[a]}for(a=0;a<s.length;a++){M(s[a],t,i,n)}}}function R(e,t){var i,n,r,a=h.rolesFromNamespaces([].slice.call(arguments,2));t=h.observable(t);e=c(e);for(i=0,n=e.length;i<n;i++){r=e[i];if(r.nodeType===1){M(r,t,a)}}}function F(e,t){var i=e.kendoBindingTarget;if(i){i.destroy();if(a){delete e.kendoBindingTarget}else if(e.removeAttribute){e.removeAttribute("kendoBindingTarget")}else{e.kendoBindingTarget=null}}if(t){var n=h.widgetInstance(c(e));if(n&&typeof n.destroy===o){n.destroy()}}}function P(e,t){F(e,t);z(e,t)}function z(e,t){var i=e.children;if(i){for(var n=0,r=i.length;n<r;n++){P(i[n],t)}}}function i(e){var t,i;e=c(e);for(t=0,i=e.length;t<i;t++){P(e[t],false)}}function N(e,t){var i=e.element,n=i[0].kendoBindingTarget;if(n){R(i,n.source,t)}}function B(e,t){var i=[];var n=0;var r;var a;if(!t){return e}if(e instanceof g){for(r=e.length;n<r;n++){a=e[n];i[n]=a.get?a.get(t):a[t]}e=i}else if(e instanceof f){e=e.get(t)}return e}h.unbind=i;h.bind=R;h.data.binders=s;h.data.Binder=l;h.notify=N;h.observable=function(e){if(!(e instanceof f)){e=new f(e)}return e};h.observableHierarchy=function(e){var t=h.data.HierarchicalDataSource.create(e);function n(e){var t,i;for(t=0;t<e.length;t++){e[t]._initChildren();i=e[t].children;i.fetch();e[t].items=i.data();n(e[t].items)}}t.fetch();n(t.data());t._data._dataSource=t;return t._data}})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.fx",["kendo.core"],e)})(function(){var e={id:"fx",name:"Effects",category:"framework",description:"Required for animation effects in all Kendo UI widgets.",depends:["core"]};(function(v,h){var c=window.kendo,m=c.effects,a=v.each,g=v.extend,B=v.proxy,l=c.support,L=l.browser,_=l.transforms,b=l.transitions,H={scale:0,scalex:0,scaley:0,scale3d:0},N={translate:0,translatex:0,translatey:0,translate3d:0},o=typeof document.documentElement.style.zoom!=="undefined"&&!_,O=/matrix3?d?\s*\(.*,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?/i,p=/^(-?[\d\.\-]+)?[\w\s]*,?\s*(-?[\d\.\-]+)?[\w\s]*/i,V=/translatex?$/i,W=/(zoom|fade|expand)(\w+)/,d=/(zoom|fade|expand)/,U=/[xy]$/i,w=["perspective","rotate","rotatex","rotatey","rotatez","rotate3d","scale","scalex","scaley","scalez","scale3d","skew","skewx","skewy","translate","translatex","translatey","translatez","translate3d","matrix","matrix3d"],u=["rotate","scale","scalex","scaley","skew","skewx","skewy","translate","translatex","translatey","matrix"],j={rotate:"deg",scale:"",skew:"px",translate:"px"},e=_.css,G=Math.round,q="",f="px",$="none",k="auto",y="width",x="height",C="hidden",S="origin",K="abortId",T="overflow",D="translate",A="position",Y="completeCallback",E=e+"transition",I=e+"transform",Q=e+"backface-visibility",X=e+"perspective",i="1500px",Z="perspective("+i+")",M={left:{reverse:"right",property:"left",transition:"translatex",vertical:false,modifier:-1},right:{reverse:"left",property:"left",transition:"translatex",vertical:false,modifier:1},down:{reverse:"up",property:"top",transition:"translatey",vertical:true,modifier:1},up:{reverse:"down",property:"top",transition:"translatey",vertical:true,modifier:-1},top:{reverse:"bottom"},bottom:{reverse:"top"},in:{reverse:"out",modifier:-1},out:{reverse:"in",modifier:1},vertical:{reverse:"vertical"},horizontal:{reverse:"horizontal"}};c.directions=M;g(v.fn,{kendoStop:function(e,t){if(b){return m.stopQueue(this,e||false,t||false)}else{return this.stop(e,t)}}});if(_&&!b){a(u,function(e,n){v.fn[n]=function(e){if(typeof e=="undefined"){return ie(this,n)}else{var t=v(this)[0],i=n+"("+e+j[n.replace(U,"")]+")";if(t.style.cssText.indexOf(I)==-1){v(this).css(I,i)}else{t.style.cssText=t.style.cssText.replace(new RegExp(n+"\\(.*?\\)","i"),i)}}return this};v.fx.step[n]=function(e){v(e.elem)[n](e.now)}});var J=v.fx.prototype.cur;v.fx.prototype.cur=function(){if(u.indexOf(this.prop)!=-1){return parseFloat(v(this.elem)[this.prop]())}return J.apply(this,arguments)}}c.toggleClass=function(i,e,t,n){if(e){e=e.split(" ");if(b){t=g({exclusive:"all",duration:400,ease:"ease-out"},t);i.css(E,t.exclusive+" "+t.duration+"ms "+t.ease);setTimeout(function(){i.css(E,"").css(x)},t.duration)}a(e,function(e,t){i.toggleClass(t,n)})}return i};c.parseEffects=function(e,s){var l={};if(typeof e==="string"){a(e.split(" "),function(e,t){var i=!d.test(t),n=t.replace(W,function(e,t,i){return t+":"+i.toLowerCase()}),r=n.split(":"),a=r[1],o={};if(r.length>1){o.direction=s&&i?M[a].reverse:a}l[r[0]]=o})}else{a(e,function(e){var t=this.direction;if(t&&s&&!d.test(e)){this.direction=M[t].reverse}l[e]=this})}return l};function ee(e){return parseInt(e,10)}function R(e,t){return ee(e.css(t))}function te(e){var t=[];for(var i in e){t.push(i)}return t}function F(e){for(var t in e){if(w.indexOf(t)!=-1&&u.indexOf(t)==-1){delete e[t]}}return e}function P(e,t){var i=[],n={},r,a,o,s;for(a in t){r=a.toLowerCase();s=_&&w.indexOf(r)!=-1;if(!l.hasHW3D&&s&&u.indexOf(r)==-1){delete t[a]}else{o=t[a];if(s){i.push(a+"("+o+")")}else{n[a]=o}}}if(i.length){n[I]=i.join(" ")}return n}if(b){g(m,{transition:function(e,t,i){var n,r=0,a=e.data("keys")||[],o;i=g({duration:200,ease:"ease-out",complete:null,exclusive:"all"},i);var s=false;var l=function(){if(!s){s=true;if(o){clearTimeout(o);o=null}e.removeData(K).dequeue().css(E,"").css(E);i.complete.call(e)}};i.duration=v.fx?v.fx.speeds[i.duration]||i.duration:i.duration;n=P(e,t);v.merge(a,te(n));if(v.hasOwnProperty("uniqueSort")){e.data("keys",v.uniqueSort(a)).height()}else{e.data("keys",v.unique(a)).height()}e.css(E,i.exclusive+" "+i.duration+"ms "+i.ease).css(E);e.css(n).css(I);if(b.event){e.one(b.event,l);if(i.duration!==0){r=500}}o=setTimeout(l,i.duration+r);e.data(K,o);e.data(Y,l)},stopQueue:function(e,t,i){var n,r=e.data("keys"),a=!i&&r,o=e.data(Y);if(a){n=c.getComputedStyles(e[0],r)}if(o){o()}if(a){e.css(n)}return e.removeData("keys").stop(t)}})}function ie(e,t){if(_){var i=e.css(I);if(i==$){return t=="scale"?1:0}var n=i.match(new RegExp(t+"\\s*\\(([\\d\\w\\.]+)")),r=0;if(n){r=ee(n[1])}else{n=i.match(O)||[0,0,0,0,0];t=t.toLowerCase();if(V.test(t)){r=parseFloat(n[3]/n[2])}else if(t=="translatey"){r=parseFloat(n[4]/n[2])}else if(t=="scale"){r=parseFloat(n[2])}else if(t=="rotate"){r=parseFloat(Math.atan2(n[2],n[1]))}}return r}else{return parseFloat(e.css(t))}}var ne=c.Class.extend({init:function(e,t){var i=this;i.element=e;i.effects=[];i.options=t;i.restore=[]},run:function(e){var t=this,i,n,r,a=e.length,o=t.element,s=t.options,l=v.Deferred(),d={},u={},c,f,h;t.effects=e;l.done(v.proxy(t,"complete"));o.data("animating",true);for(n=0;n<a;n++){i=e[n];i.setReverse(s.reverse);i.setOptions(s);t.addRestoreProperties(i.restore);i.prepare(d,u);f=i.children();for(r=0,h=f.length;r<h;r++){f[r].duration(s.duration).run()}}for(var p in s.effects){g(u,s.effects[p].properties)}if(!o.is(":visible")){g(d,{display:o.data("olddisplay")||"block"})}if(_&&!s.reset){c=o.data("targetTransform");if(c){d=g(c,d)}}d=P(o,d);if(_&&!b){d=F(d)}o.css(d).css(I);for(n=0;n<a;n++){e[n].setup()}if(s.init){s.init()}o.data("targetTransform",u);m.animate(o,u,g({},s,{complete:l.resolve}));return l.promise()},stop:function(){v(this.element).kendoStop(true,true)},addRestoreProperties:function(e){var t=this.element,i,n=0,r=e.length;for(;n<r;n++){i=e[n];this.restore.push(i);if(!t.data(i)){t.data(i,t.css(i))}}},restoreCallback:function(){var e=this.element;for(var t=0,i=this.restore.length;t<i;t++){var n=this.restore[t];e.css(n,e.data(n))}},complete:function(){var e=this,t=0,i=e.element,n=e.options,r=e.effects,a=r.length;i.removeData("animating").dequeue();if(n.hide){i.data("olddisplay",i.css("display")).hide()}this.restoreCallback();if(o&&!_){setTimeout(v.proxy(this,"restoreCallback"),0)}for(;t<a;t++){r[t].teardown()}if(n.completeCallback){n.completeCallback(i)}}});m.promise=function(e,t){var i=[],n,r=new ne(e,t),a=c.parseEffects(t.effects),o;t.effects=a;for(var s in a){n=m[z(s)];if(n){o=new n(e,a[s].direction);i.push(o)}}if(i[0]){r.run(i)}else{if(!e.is(":visible")){e.css({display:e.data("olddisplay")||"block"}).css("display")}if(t.init){t.init()}e.dequeue();r.complete()}};g(m,{animate:function(e,f,t){var i=t.transition!==false;delete t.transition;if(b&&"transition"in m&&i){m.transition(e,f,t)}else{if(_){e.animate(F(f),{queue:false,show:false,hide:false,duration:t.duration,complete:t.complete})}else{e.each(function(){var u=v(this),c={};a(w,function(e,t){var i,n=f?f[t]+" ":null;if(n){var r=f;if(t in H&&f[t]!==h){i=n.match(p);if(_){g(r,{scale:+i[0]})}}else{if(t in N&&f[t]!==h){var a=u.css(A),o=a=="absolute"||a=="fixed";if(!u.data(D)){if(o){u.data(D,{top:R(u,"top")||0,left:R(u,"left")||0,bottom:R(u,"bottom"),right:R(u,"right")})}else{u.data(D,{top:R(u,"marginTop")||0,left:R(u,"marginLeft")||0})}}var s=u.data(D);i=n.match(p);if(i){var l=t==D+"y"?+null:+i[1],d=t==D+"y"?+i[1]:+i[2];if(o){if(!isNaN(s.right)){if(!isNaN(l)){g(r,{right:s.right-l})}}else{if(!isNaN(l)){g(r,{left:s.left+l})}}if(!isNaN(s.bottom)){if(!isNaN(d)){g(r,{bottom:s.bottom-d})}}else{if(!isNaN(d)){g(r,{top:s.top+d})}}}else{if(!isNaN(l)){g(r,{marginLeft:s.left+l})}if(!isNaN(d)){g(r,{marginTop:s.top+d})}}}}}if(!_&&t!="scale"&&t in r){delete r[t]}if(r){g(c,r)}}});if(L.msie){delete c.scale}u.animate(c,{queue:false,show:false,hide:false,duration:t.duration,complete:t.complete})})}}}});m.animatedPromise=m.promise;var s=c.Class.extend({init:function(e,t){var i=this;i.element=e;i._direction=t;i.options={};i._additionalEffects=[];if(!i.restore){i.restore=[]}},reverse:function(){this._reverse=true;return this.run()},play:function(){this._reverse=false;return this.run()},add:function(e){this._additionalEffects.push(e);return this},direction:function(e){this._direction=e;return this},duration:function(e){this._duration=e;return this},compositeRun:function(){var e=this,t=new ne(e.element,{reverse:e._reverse,duration:e._duration}),i=e._additionalEffects.concat([e]);return t.run(i)},run:function(){if(this._additionalEffects&&this._additionalEffects[0]){return this.compositeRun()}var e=this,t=e.element,i=0,n=e.restore,r=n.length,a,o=v.Deferred(),s={},l={},d,u=e.children(),c=u.length;o.done(v.proxy(e,"_complete"));t.data("animating",true);for(i=0;i<r;i++){a=n[i];if(!t.data(a)){t.data(a,t.css(a))}}for(i=0;i<c;i++){u[i].duration(e._duration).run()}e.prepare(s,l);if(!t.is(":visible")){g(s,{display:t.data("olddisplay")||"block"})}if(_){d=t.data("targetTransform");if(d){s=g(d,s)}}s=P(t,s);if(_&&!b){s=F(s)}t.css(s).css(I);e.setup();t.data("targetTransform",l);m.animate(t,l,{duration:e._duration,complete:o.resolve});return o.promise()},stop:function(){var e=0,t=this.children(),i=t.length;for(e=0;e<i;e++){t[e].stop()}v(this.element).kendoStop(true,true);return this},restoreCallback:function(){var e=this.element;for(var t=0,i=this.restore.length;t<i;t++){var n=this.restore[t];e.css(n,e.data(n))}},_complete:function(){var e=this,t=e.element;t.removeData("animating").dequeue();e.restoreCallback();if(e.shouldHide()){t.data("olddisplay",t.css("display")).hide()}if(o&&!_){setTimeout(v.proxy(e,"restoreCallback"),0)}e.teardown()},setOptions:function(e){g(true,this.options,e)},children:function(){return[]},shouldHide:v.noop,setup:v.noop,prepare:v.noop,teardown:v.noop,directions:[],setReverse:function(e){this._reverse=e;return this}});function z(e){return e.charAt(0).toUpperCase()+e.substring(1)}function t(t,e){var r=s.extend(e),i=r.prototype.directions;m[z(t)]=r;m.Element.prototype[t]=function(e,t,i,n){return new r(this.element,e,t,i,n)};a(i,function(e,n){m.Element.prototype[t+z(n)]=function(e,t,i){return new r(this.element,n,e,t,i)}})}var n=["left","right","up","down"],re=["in","out"];t("slideIn",{directions:n,divisor:function(e){this.options.divisor=e;return this},prepare:function(e,t){var i=this,n,r=i.element,a=c._outerWidth,o=c._outerHeight,s=M[i._direction],l=-s.modifier*(s.vertical?o(r):a(r)),d=l/(i.options&&i.options.divisor||1)+f,u="0px";if(i._reverse){n=e;e=t;t=n}if(_){e[s.transition]=d;t[s.transition]=u}else{e[s.property]=d;t[s.property]=u}}});t("tile",{directions:n,init:function(e,t,i){s.prototype.init.call(this,e,t);this.options={previous:i}},previousDivisor:function(e){this.options.previousDivisor=e;return this},children:function(){var e=this,t=e._reverse,i=e.options.previous,n=e.options.previousDivisor||1,r=e._direction;var a=[c.fx(e.element).slideIn(r).setReverse(t)];if(i){a.push(c.fx(i).slideIn(M[r].reverse).divisor(n).setReverse(!t))}return a}});function ae(e,l,d,u){t(e,{directions:re,startValue:function(e){this._startValue=e;return this},endValue:function(e){this._endValue=e;return this},shouldHide:function(){return this._shouldHide},prepare:function(e,t){var i=this,n,r,a=this._direction==="out",o=i.element.data(l),s=!(isNaN(o)||o==d);if(s){n=o}else if(typeof this._startValue!=="undefined"){n=this._startValue}else{n=a?d:u}if(typeof this._endValue!=="undefined"){r=this._endValue}else{r=a?u:d}if(this._reverse){e[l]=r;t[l]=n}else{e[l]=n;t[l]=r}i._shouldHide=t[l]===u}})}ae("fade","opacity",1,0);ae("zoom","scale",1,.01);t("slideMargin",{prepare:function(e,t){var i=this,n=i.element,r=i.options,a=n.data(S),o=r.offset,s,l=i._reverse;if(!l&&a===null){n.data(S,parseFloat(n.css("margin-"+r.axis)))}s=n.data(S)||0;t["margin-"+r.axis]=!l?s+o:s}});t("slideTo",{prepare:function(e,t){var i=this,n=i.element,r=i.options,a=r.offset.split(","),o=i._reverse;if(_){t.translatex=!o?a[0]:0;t.translatey=!o?a[1]:0}else{t.left=!o?a[0]:0;t.top=!o?a[1]:0}n.css("left")}});t("expand",{directions:["horizontal","vertical"],restore:[T],prepare:function(e,t){var i=this,n=i.element,r=i.options,a=i._reverse,o=i._direction==="vertical"?x:y,s=n[0].style[o],l=n.data(o),d=parseFloat(l||s),u=G(n.css(o,k)[o]());e.overflow=C;d=r&&r.reset?u||d:d||u;t[o]=(a?0:d)+f;e[o]=(a?d:0)+f;if(l===h){n.data(o,s)}},shouldHide:function(){return this._reverse},teardown:function(){var e=this,t=e.element,i=e._direction==="vertical"?x:y,n=t.data(i);if(n==k||n===q){setTimeout(function(){t.css(i,k).css(i)},0)}}});var oe={position:"absolute",marginLeft:0,marginTop:0,scale:1};t("transfer",{init:function(e,t){this.element=e;this.options={target:t};this.restore=[]},setup:function(){this.element.appendTo(document.body)},prepare:function(e,t){var i=this,n=i.element,r=m.box(n),a=m.box(i.options.target),o=ie(n,"scale"),s=m.fillScale(a,r),l=m.transformOrigin(a,r);g(e,oe);t.scale=1;n.css(I,"scale(1)").css(I);n.css(I,"scale("+o+")");e.top=r.top;e.left=r.left;e.transformOrigin=l.x+f+" "+l.y+f;if(i._reverse){e.scale=s}else{t.scale=s}}});var se={top:"rect(auto auto $size auto)",bottom:"rect($size auto auto auto)",left:"rect(auto $size auto auto)",right:"rect(auto auto auto $size)"};var le={top:{start:"rotatex(0deg)",end:"rotatex(180deg)"},bottom:{start:"rotatex(-180deg)",end:"rotatex(0deg)"},left:{start:"rotatey(0deg)",end:"rotatey(-180deg)"},right:{start:"rotatey(180deg)",end:"rotatey(0deg)"}};function de(e,t){var i=c.directions[t].vertical,n=e[i?x:y]()/2+"px";return se[t].replace("$size",n)}t("turningPage",{directions:n,init:function(e,t,i){s.prototype.init.call(this,e,t);this._container=i},prepare:function(e,t){var i=this,n=i._reverse,r=n?M[i._direction].reverse:i._direction,a=le[r];e.zIndex=1;if(i._clipInHalf){e.clip=de(i._container,c.directions[r].reverse)}e[Q]=C;t[I]=Z+(n?a.start:a.end);e[I]=Z+(n?a.end:a.start)},setup:function(){this._container.append(this.element)},face:function(e){this._face=e;return this},shouldHide:function(){var e=this,t=e._reverse,i=e._face;return t&&!i||!t&&i},clipInHalf:function(e){this._clipInHalf=e;return this},temporary:function(){this.element.addClass("temp-page");return this}});t("staticPage",{directions:n,init:function(e,t,i){s.prototype.init.call(this,e,t);this._container=i},restore:["clip"],prepare:function(e,t){var i=this,n=i._reverse?M[i._direction].reverse:i._direction;e.clip=de(i._container,n);e.opacity=.999;t.opacity=1},shouldHide:function(){var e=this,t=e._reverse,i=e._face;return t&&!i||!t&&i},face:function(e){this._face=e;return this}});t("pageturn",{directions:["horizontal","vertical"],init:function(e,t,i,n){s.prototype.init.call(this,e,t);this.options={};this.options.face=i;this.options.back=n},children:function(){var e=this,t=e.options,i=e._direction==="horizontal"?"left":"top",n=c.directions[i].reverse,r=e._reverse,a,o=t.face.clone(true).removeAttr("id"),s=t.back.clone(true).removeAttr("id"),l=e.element;if(r){a=i;i=n;n=a}return[c.fx(t.face).staticPage(i,l).face(true).setReverse(r),c.fx(t.back).staticPage(n,l).setReverse(r),c.fx(o).turningPage(i,l).face(true).clipInHalf(true).temporary().setReverse(r),c.fx(s).turningPage(n,l).clipInHalf(true).temporary().setReverse(r)]},prepare:function(e,t){e[X]=i;e.transformStyle="preserve-3d";e.opacity=.999;t.opacity=1},teardown:function(){this.element.find(".temp-page").remove()}});t("flip",{directions:["horizontal","vertical"],init:function(e,t,i,n){s.prototype.init.call(this,e,t);this.options={};this.options.face=i;this.options.back=n},children:function(){var e=this,t=e.options,i=e._direction==="horizontal"?"left":"top",n=c.directions[i].reverse,r=e._reverse,a,o=e.element;if(r){a=i;i=n;n=a}return[c.fx(t.face).turningPage(i,o).face(true).setReverse(r),c.fx(t.back).turningPage(n,o).setReverse(r)]},prepare:function(e){e[X]=i;e.transformStyle="preserve-3d"}});var ue=!l.mobileOS.android;var ce=".km-touch-scrollbar, .km-actionsheet-wrapper";t("replace",{_before:v.noop,_after:v.noop,init:function(e,t,i){s.prototype.init.call(this,e);this._previous=v(t);this._transitionClass=i},duration:function(){throw new Error("The replace effect does not support duration setting; the effect duration may be customized through the transition class rule")},beforeTransition:function(e){this._before=e;return this},afterTransition:function(e){this._after=e;return this},_both:function(){return v().add(this._element).add(this._previous)},_containerClass:function(){var e=this._direction,t="k-fx k-fx-start k-fx-"+this._transitionClass;if(e){t+=" k-fx-"+e}if(this._reverse){t+=" k-fx-reverse"}return t},complete:function(e){if(!this.deferred||e&&v(e.target).is(ce)){return}var t=this.container;t.removeClass("k-fx-end").removeClass(this._containerClass()).off(b.event,this.completeProxy);this._previous.hide().removeClass("k-fx-current");this.element.removeClass("k-fx-next");if(ue){t.css(T,"")}if(!this.isAbsolute){this._both().css(A,"")}this.deferred.resolve();delete this.deferred},run:function(){if(this._additionalEffects&&this._additionalEffects[0]){return this.compositeRun()}var e=this,t=e.element,i=e._previous,n=t.parents().filter(i.parents()).first(),r=e._both(),a=v.Deferred(),o=t.css(A),s;if(!n.length){n=t.parent()}this.container=n;this.deferred=a;this.isAbsolute=o=="absolute";if(!this.isAbsolute){r.css(A,"absolute")}if(ue){s=n.css(T);n.css(T,"hidden")}if(!b){this.complete()}else{t.addClass("k-fx-hidden");n.addClass(this._containerClass());this.completeProxy=v.proxy(this,"complete");n.on(b.event,this.completeProxy);c.animationFrame(function(){t.removeClass("k-fx-hidden").addClass("k-fx-next");i.css("display","").addClass("k-fx-current");e._before(i,t);c.animationFrame(function(){n.removeClass("k-fx-start").addClass("k-fx-end");e._after(i,t)})})}return a.promise()},stop:function(){this.complete()}});var r=c.Class.extend({init:function(){var e=this;e._tickProxy=B(e._tick,e);e._started=false},tick:v.noop,done:v.noop,onEnd:v.noop,onCancel:v.noop,start:function(){if(!this.enabled()){return}if(!this.done()){this._started=true;c.animationFrame(this._tickProxy)}else{this.onEnd()}},enabled:function(){return true},cancel:function(){this._started=false;this.onCancel()},_tick:function(){var e=this;if(!e._started){return}e.tick();if(!e.done()){c.animationFrame(e._tickProxy)}else{e._started=false;e.onEnd()}}});var fe=r.extend({init:function(e){var t=this;g(t,e);r.fn.init.call(t)},done:function(){return this.timePassed()>=this.duration},timePassed:function(){return Math.min(this.duration,new Date-this.startDate)},moveTo:function(e){var t=this,i=t.movable;t.initial=i[t.axis];t.delta=e.location-t.initial;t.duration=typeof e.duration=="number"?e.duration:300;t.tick=t._easeProxy(e.ease);t.startDate=new Date;t.start()},_easeProxy:function(e){var t=this;return function(){t.movable.moveAxis(t.axis,e(t.timePassed(),t.initial,t.delta,t.duration))}}});g(fe,{easeOutExpo:function(e,t,i,n){return e==n?t+i:i*(-Math.pow(2,-10*e/n)+1)+t},easeOutBack:function(e,t,i,n,r){r=1.70158;return i*((e=e/n-1)*e*((r+1)*e+r)+1)+t}});m.Animation=r;m.Transition=fe;m.createEffect=t;m.box=function(e){e=v(e);var t=e.offset();t.width=c._outerWidth(e);t.height=c._outerHeight(e);return t};m.transformOrigin=function(e,t){var i=(e.left-t.left)*t.width/(t.width-e.width),n=(e.top-t.top)*t.height/(t.height-e.height);return{x:isNaN(i)?0:i,y:isNaN(n)?0:n}};m.fillScale=function(e,t){return Math.min(e.width/t.width,e.height/t.height)};m.fitScale=function(e,t){return Math.max(e.width/t.width,e.height/t.height)}})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.view",["kendo.core","kendo.binder","kendo.fx"],e)})(function(){var e={id:"view",name:"View",category:"framework",description:"The View class instantiates and handles the events of a certain screen from the application.",depends:["core","binder","fx"],hidden:false};(function(a,z){var u=window.kendo,s=u.attr,t=u.ui,i=u.attrValue,n=u.directiveSelector,r=u.Observable,o=u.ui.Widget,l=u.roleSelector,d="SCRIPT",c="init",f="transitionStart",h="transitionEnd",p="show",v="hide",m="attach",e="detach",g=/unrecognized expression/;var _=/<body[^>]*>(([\u000a\u000d\u2028\u2029]|.)*)<\/body>/i;var b="loadStart";var w="loadComplete";var k="showStart";var y="sameViewRequested";var x="viewShow";var C="viewTypeDetermined";var S="after";var T={content:"k-content",view:"k-view",stretchedView:"k-stretched-view",widget:"k-widget",header:"k-header",footer:"k-footer"};var D=u.ui.Widget.extend({init:function(e,t){var i=this;t=t||{};i.id=u.guid();r.fn.init.call(i);this.options=a.extend({},this.options,t);i.content=e;if(i.options.renderOnInit){o.fn.init.call(i,i._createElement(),t)}if(i.options.wrapInSections){i._renderSections()}i.tagName=t.tagName||"div";i.model=t.model;i._wrap=t.wrap!==false;this._evalTemplate=t.evalTemplate||false;i._fragments={};i.bind([c,p,v,f,h],t)},options:{name:"View",renderOnInit:false,wrapInSections:false,detachOnHide:true,detachOnDestroy:true},render:function(e){var t=this,i=!t.element;if(i){t.element=t._createElement()}if(e){a(e).append(t.element)}if(i){u.bind(t.element,t.model);t.trigger(c)}if(e){t._eachFragment(m);t.trigger(p)}return t.element},clone:function(){return new A(this)},triggerBeforeShow:function(){return true},triggerBeforeHide:function(){return true},showStart:function(){var e=this;var t=e.render();if(t){t.css("display","")}this.trigger(k,{view:this})},showEnd:function(){},hideEnd:function(){this.hide()},beforeTransition:function(e){this.trigger(f,{type:e})},afterTransition:function(e){this.trigger(h,{type:e})},hide:function(){if(this.options.detachOnHide){this._eachFragment(e);a(this.element).detach()}this.trigger(v)},destroy:function(){var e=this;var t=e.element;if(t){o.fn.destroy.call(e);u.unbind(t);u.destroy(t);if(e.options.detachOnDestroy){t.remove()}}},purge:function(){var e=this;e.destroy();a(e.element).add(e.content).add(e.wrapper).off().remove()},fragments:function(e){a.extend(this._fragments,e)},_eachFragment:function(e){for(var t in this._fragments){this._fragments[t][e](this,t)}},_createElement:function(){var t=this,e="<"+t.tagName+">",i,n;try{n=a(document.getElementById(t.content)||t.content);if(n[0].tagName===d){n=n.html()}}catch(e){if(g.test(e.message)){n=t.content}}if(typeof n==="string"){n=n.replace(/^\s+|\s+$/g,"");if(t._evalTemplate){n=u.template(n)(t.model||{})}i=a(e).append(n);if(!t._wrap){i=i.contents()}}else{i=n;if(t._evalTemplate){var r=a(u.template(a("<div />").append(i.clone(true)).html())(t.model||{}));if(a.contains(document,i[0])){i.replaceWith(r)}i=r}if(t._wrap){i=i.wrapAll(e).parent()}}return i},_renderSections:function(){var e=this;if(e.options.wrapInSections){e._wrapper();e._createContent();e._createHeader();e._createFooter()}},_wrapper:function(){var e=this;var t=e.content;if(t.is(l("view"))){e.wrapper=e.content}else{e.wrapper=t.wrap("<div data-"+u.ns+'stretch="true" data-'+u.ns+'role="view" data-'+u.ns+'init-widgets="false"></div>').parent()}var i=e.wrapper;i.attr("id",e.id);i.addClass(T.view);i.addClass(T.widget);i.attr("role","view")},_createContent:function(){var e=this;var t=a(e.wrapper);var i=l("content");if(!t.children(i)[0]){var n=t.children().filter(function(){var e=a(this);if(!e.is(l("header"))&&!e.is(l("footer"))){return e}});n.wrap("<div "+s("role")+'="content"></div>')}this.contentElement=t.children(l("content"));this.contentElement.addClass(T.stretchedView).addClass(T.content)},_createHeader:function(){var e=this;var t=e.wrapper;this.header=t.children(l("header")).addClass(T.header)},_createFooter:function(){var e=this;var t=e.wrapper;this.footer=t.children(l("footer")).addClass(T.footer)}});var A=u.Class.extend({init:function(e){a.extend(this,{element:e.element.clone(true),transition:e.transition,id:e.id});e.element.parent().append(this.element)},hideEnd:function(){this.element.remove()},beforeTransition:a.noop,afterTransition:a.noop});var E=D.extend({init:function(e,t){D.fn.init.call(this,e,t);this.containers={}},container:function(e){var t=this.containers[e];if(!t){t=this._createContainer(e);this.containers[e]=t}return t},showIn:function(e,t,i){this.container(e).show(t,i)},_createContainer:function(e){var t=this.render(),i=t.find(e),n;if(!i.length&&t.is(e)){if(t.is(e)){i=t}else{throw new Error("can't find a container with the specified "+e+" selector")}}n=new F(i);n.bind("accepted",function(e){e.view.render(i)});return n}});var I=D.extend({attach:function(e,t){e.element.find(t).replaceWith(this.render())},detach:function(){}});var M=/^(\w+)(:(\w+))?( (\w+))?$/;function R(e){if(!e){return{}}var t=e.match(M)||[];return{type:t[1],direction:t[3],reverse:t[5]==="reverse"}}var F=r.extend({init:function(e){r.fn.init.call(this);this.container=e;this.history=[];this.view=null;this.running=false},after:function(){this.running=false;this.trigger("complete",{view:this.view});this.trigger("after")},end:function(){this.view.showEnd();this.previous.hideEnd();this.after()},show:function(e,t,i){if(!e.triggerBeforeShow()||this.view&&!this.view.triggerBeforeHide()){this.trigger("after");return false}i=i||e.id;var n=this,r=e===n.view?e.clone():n.view,a=n.history,o=a[a.length-2]||{},s=o.id===i,l=t||(s?a[a.length-1].transition:e.transition),d=R(l);if(n.running){n.effect.stop()}if(l==="none"){l=null}n.trigger("accepted",{view:e});n.view=e;n.previous=r;n.running=true;if(!s){a.push({id:i,transition:l})}else{a.pop()}if(!r){e.showStart();e.showEnd();n.after();return true}if(!l||!u.effects.enabled){e.showStart();n.end()}else{e.element.addClass("k-fx-hidden");e.showStart();if(s&&!t){d.reverse=!d.reverse}n.effect=u.fx(e.element).replace(r.element,d.type).beforeTransition(function(){e.beforeTransition("show");r.beforeTransition("hide")}).afterTransition(function(){e.afterTransition("show");r.afterTransition("hide")}).direction(d.direction).setReverse(d.reverse);n.effect.run().then(function(){n.end()})}return true},destroy:function(){var e=this;var t=e.view;if(t&&t.destroy){t.destroy()}}});var P=r.extend({init:function(e){var t=this,i,n;r.fn.init.call(t);t.options=e;a.extend(t,e);t.sandbox=a("<div />");n=t.container;i=t._hideViews(n);t.rootView=i.first();t.layouts={};t.viewContainer=new u.ViewContainer(t.container);t.viewContainer.bind("accepted",function(e){e.view.params=t.params});t.viewContainer.bind("complete",function(e){t.trigger(x,{view:e.view})});t.viewContainer.bind(S,function(){t.trigger(S)});this.bind(this.events,e)},events:[k,S,x,b,w,y,C],destroy:function(){var e=this;var t=e.viewContainer;u.destroy(e.container);for(var i in e.layouts){this.layouts[i].destroy()}if(t){t.destroy()}},view:function(){return this.viewContainer.view},showView:function(e,t,i){e=e.replace(new RegExp("^"+this.remoteViewURLPrefix),"");if(e===""&&this.remoteViewURLPrefix){e="/"}if(e.replace(/^#/,"")===this.url){this.trigger(y);return false}this.trigger(k);var n=this,r=n._findViewElement(e),a=u.widgetInstance(r);n.url=e.replace(/^#/,"");n.params=i;if(a&&a.reload){a.purge();r=[]}this.trigger(C,{remote:r.length===0,url:e});if(r[0]){if(!a){a=n._createView(r)}return n.viewContainer.show(a,t,e)}else{return true}},append:function(e,t){var i=this.sandbox,n=(t||"").split("?")[0],r=this.container,a,o;if(_.test(e)){e=RegExp.$1}i[0].innerHTML=e;r.append(i.children("script, style"));a=this._hideViews(i);o=a.first();if(!o.length){a=o=i.wrapInner("<div data-role=view />").children()}if(n){o.hide().attr(s("url"),n)}r.append(a);return this._createView(o)},_locate:function(e){return this.$angular?n(e):l(e)},_findViewElement:function(e){var t,i=e.split("?")[0];if(!i){return this.rootView}t=this.container.children("["+s("url")+"='"+i+"']");if(!t[0]&&i.indexOf("/")===-1){t=this.container.children(i.charAt(0)==="#"?i:"#"+i)}if(!t[0]){t=this._findViewElementById(e)}return t},_findViewElementById:function(e){var t=this.container.children("[id='"+e+"']");return t},_createView:function(e){return this._createSpaView(e)},_createMobileView:function(e){return u.initWidget(e,{defaultTransition:this.transition,loader:this.loader,container:this.container,getLayout:this.getLayoutProxy,modelScope:this.modelScope,reload:i(e,"reload")},t.roles)},_createSpaView:function(e){var t=(this.options||{}).viewOptions||{};return new u.View(e,{renderOnInit:t.renderOnInit,wrap:t.wrap||false,wrapInSections:t.wrapInSections,detachOnHide:t.detachOnHide,detachOnDestroy:t.detachOnDestroy})},_hideViews:function(e){return e.children(this._locate("view")).hide()}});u.ViewEngine=P;u.ViewContainer=F;u.Fragment=I;u.Layout=E;u.View=D;u.ViewClone=A})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.dom",["kendo.core"],e)})(function(){var e={id:"dom",name:"Virtual DOM",category:"framework",depends:["core"],advanced:true};(function(e){function t(){this.node=null}t.prototype={remove:function(){if(this.node.parentNode){this.node.parentNode.removeChild(this.node)}this.attr={}},attr:{},text:function(){return""}};function i(){}i.prototype={nodeName:"#null",attr:{style:{}},children:[],remove:function(){}};var l=new i;function n(e,t,i){this.nodeName=e;this.attr=t||{};this.children=i||[]}n.prototype=new t;n.prototype.appendTo=function(e){var t=document.createElement(this.nodeName);var i=this.children;for(var n=0;n<i.length;n++){i[n].render(t,l)}e.appendChild(t);return t};n.prototype.render=function(t,i){var e;if(i.nodeName!==this.nodeName){i.remove();e=this.appendTo(t)}else{e=i.node;var n;var r=this.children;var a=r.length;var o=i.children;var s=o.length;if(Math.abs(s-a)>2){this.render({appendChild:function(e){t.replaceChild(e,i.node)}},l);return}for(n=0;n<a;n++){r[n].render(e,o[n]||l)}for(n=a;n<s;n++){o[n].remove()}}this.node=e;this.syncAttributes(i.attr);this.removeAttributes(i.attr)};n.prototype.syncAttributes=function(e){var t=this.attr;for(var i in t){var n=t[i];var r=e[i];if(i==="style"){this.setStyle(n,r)}else if(n!==r){this.setAttribute(i,n,r)}}};n.prototype.setStyle=function(e,t){var i=this.node;var n;if(t){for(n in e){if(e[n]!==t[n]){i.style[n]=e[n]}}}else{for(n in e){i.style[n]=e[n]}}};n.prototype.removeStyle=function(e){var t=this.attr.style||{};var i=this.node;for(var n in e){if(t[n]===undefined){i.style[n]=""}}};n.prototype.removeAttributes=function(e){var t=this.attr;for(var i in e){if(i==="style"){this.removeStyle(e.style)}else if(t[i]===undefined){this.removeAttribute(i)}}};n.prototype.removeAttribute=function(e){var t=this.node;if(e==="style"){t.style.cssText=""}else if(e==="className"){t.className=""}else{t.removeAttribute(e)}};n.prototype.setAttribute=function(e,t){var i=this.node;if(i[e]!==undefined){i[e]=t}else{i.setAttribute(e,t)}};n.prototype.text=function(){var e="";for(var t=0;t<this.children.length;++t){e+=this.children[t].text()}return e};function r(e){this.nodeValue=String(e)}r.prototype=new t;r.prototype.nodeName="#text";r.prototype.render=function(e,t){var i;if(t.nodeName!==this.nodeName){t.remove();i=document.createTextNode(this.nodeValue);e.appendChild(i)}else{i=t.node;if(this.nodeValue!==t.nodeValue){if(i.parentNode){i.nodeValue=this.nodeValue}}}this.node=i};r.prototype.text=function(){return this.nodeValue};function a(e){this.html=e}a.prototype={nodeName:"#html",attr:{},remove:function(){for(var e=0;e<this.nodes.length;e++){var t=this.nodes[e];if(t.parentNode){t.parentNode.removeChild(t)}}},render:function(e,t){if(t.nodeName!==this.nodeName||t.html!==this.html){t.remove();var i=e.lastChild;s(e,this.html);this.nodes=[];for(var n=i?i.nextSibling:e.firstChild;n;n=n.nextSibling){this.nodes.push(n)}}else{this.nodes=t.nodes.slice(0)}}};var o=document.createElement("div");function s(e,t){o.innerHTML=t;while(o.firstChild){e.appendChild(o.firstChild)}}function d(e){return new a(e)}function u(e,t,i){return new n(e,t,i)}function c(e){return new r(e)}function f(e){this.root=e;this.children=[]}f.prototype={html:d,element:u,text:c,render:function(e){var t=this.children;var i;var n;for(i=0,n=e.length;i<n;i++){var r=t[i];if(!r){r=l}else if(!r.node||!r.node.parentNode){r.remove();r=l}e[i].render(this.root,r)}for(i=n;i<t.length;i++){t[i].remove()}this.children=e}};e.dom={html:d,text:c,element:u,Tree:f,Node:t}})(window.kendo);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("ooxml/utils",["kendo.core"],e)})(function(){(function(){kendo.ooxml=kendo.ooxml||{};kendo.ooxml.createZip=function(){if(typeof JSZip==="undefined"){throw new Error("JSZip not found. Check http://docs.telerik.com/kendo-ui/framework/excel/introduction#requirements for more details.")}return new JSZip}})()},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("ooxml/kendo-ooxml",["kendo.core","ooxml/utils"],e)})(function(){(function(r){window.kendo.ooxml=window.kendo.ooxml||{};var e=kendo.ooxml;var R=r.map;var F=e.createZip;var i={toString:function(e){return e}};var h=kendo.Class.extend({});h.register=function(e){i=e};h.toString=function(e,t){return i.toString(e,t)};function n(e,t,i){return(1461*(e+4800+((t-13)/12|0))/4|0)+(367*(t-1-12*((t-13)/12|0))/12|0)-(3*((e+4900+((t-13)/12|0))/100|0)/4|0)+i-32075}var a=n(1900,0,-1);function o(e,t,i){return n(e,t,i)-a}function s(e,t,i,n){return(e+(t+(i+n/1e3)/60)/60)/24}function D(e){var t=s(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());var i=o(e.getFullYear(),e.getMonth(),e.getDate());return i<0?i-1+t:i+t}var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";var A="data:"+t+";base64,";var l={compression:"DEFLATE",type:"base64"};var E={compression:"DEFLATE",type:"blob"};var I={compression:"DEFLATE",type:"arraybuffer"};function d(e){return A+e}function P(e,t){return t.indexOf(e)}var z=JSON.parse.bind(JSON);function b(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;")}function u(e,t){var i="";for(var n=0;n<e;++n){i+=t(n)}return i}function w(i,n){var r="";if(i!=null){if(Array.isArray(i)){for(var e=0;e<i.length;++e){r+=n(i[e],e)}}else if(typeof i=="object"){Object.keys(i).forEach(function(e,t){r+=n(i[e],e,t)})}}return r}var k='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r';var V=k+'\n            <Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">\n               <Relationship Id="rId3" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml"/>\n               <Relationship Id="rId2" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml"/>\n               <Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/>\n            </Relationships>';var W=function(e){var t=e.creator;var i=e.lastModifiedBy;var n=e.created;var r=e.modified;return k+'\n <cp:coreProperties xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties"\n   xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/"\n   xmlns:dcmitype="http://purl.org/dc/dcmitype/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">\n   <dc:creator>'+b(t)+"</dc:creator>\n   <cp:lastModifiedBy>"+b(i)+'</cp:lastModifiedBy>\n   <dcterms:created xsi:type="dcterms:W3CDTF">'+b(n)+'</dcterms:created>\n   <dcterms:modified xsi:type="dcterms:W3CDTF">'+b(r)+"</dcterms:modified>\n</cp:coreProperties>"};var U=function(e){var t=e.sheets;return k+'\n<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties" xmlns:vt="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes">\n  <Application>Microsoft Excel</Application>\n  <DocSecurity>0</DocSecurity>\n  <ScaleCrop>false</ScaleCrop>\n  <HeadingPairs>\n    <vt:vector size="2" baseType="variant">\n      <vt:variant>\n        <vt:lpstr>Worksheets</vt:lpstr>\n      </vt:variant>\n      <vt:variant>\n        <vt:i4>'+t.length+'</vt:i4>\n      </vt:variant>\n    </vt:vector>\n  </HeadingPairs>\n  <TitlesOfParts>\n    <vt:vector size="'+t.length+'" baseType="lpstr">'+w(t,function(e,t){return e.options.title?"<vt:lpstr>"+b(e.options.title)+"</vt:lpstr>":"<vt:lpstr>Sheet"+(t+1)+"</vt:lpstr>"})+"</vt:vector>\n  </TitlesOfParts>\n  <LinksUpToDate>false</LinksUpToDate>\n  <SharedDoc>false</SharedDoc>\n  <HyperlinksChanged>false</HyperlinksChanged>\n  <AppVersion>14.0300</AppVersion>\n</Properties>"};var j=function(e){var t=e.sheetCount;var i=e.commentFiles;var n=e.drawingFiles;return k+'\n<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types">\n  <Default Extension="png" ContentType="image/png"/>\n  <Default Extension="gif" ContentType="image/gif"/>\n  <Default Extension="jpg" ContentType="image/jpeg"/>\n  <Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" />\n  <Default Extension="xml" ContentType="application/xml" />\n  <Default Extension="vml" ContentType="application/vnd.openxmlformats-officedocument.vmlDrawing"/>\n  <Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" />\n  <Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"/>\n  <Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"/>\n  '+u(t,function(e){return'<Override PartName="/xl/worksheets/sheet'+(e+1)+'.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" />'})+"\n  "+w(i,function(e){return'<Override PartName="/xl/'+e+'" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml"/>'})+"\n  "+w(n,function(e){return'<Override PartName="/xl/drawings/'+e+'" ContentType="application/vnd.openxmlformats-officedocument.drawing+xml"/>'})+'\n  <Override PartName="/docProps/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml" />\n  <Override PartName="/docProps/app.xml" ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml" />\n</Types>'};var G=function(e){var t=e.sheets;var i=e.filterNames;var n=e.userNames;return k+'\n<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships">\n  <fileVersion appName="xl" lastEdited="5" lowestEdited="5" rupBuild="9303" />\n  <workbookPr defaultThemeVersion="124226" />\n  <bookViews>\n    <workbookView xWindow="240" yWindow="45" windowWidth="18195" windowHeight="7995" />\n  </bookViews>\n  <sheets>\n  '+w(t,function(e,t){var i=e.options;var n=i.name||i.title||"Sheet"+(t+1);return'<sheet name="'+b(n)+'" sheetId="'+(t+1)+'" r:id="rId'+(t+1)+'" />'})+"\n  </sheets>\n  "+(i.length||n.length?"\n    <definedNames>\n      "+w(i,function(e){return'\n         <definedName name="_xlnm._FilterDatabase" hidden="1" localSheetId="'+e.localSheetId+'">'+b(we(e.name))+"!"+b(e.from)+":"+b(e.to)+"</definedName>"})+"\n      "+w(n,function(e){return'\n         <definedName name="'+e.name+'" hidden="'+(e.hidden?1:0)+'" '+(e.localSheetId!=null?'localSheetId="'+e.localSheetId+'"':"")+">"+b(e.value)+"</definedName>"})+"\n    </definedNames>":"")+'\n  <calcPr fullCalcOnLoad="1" calcId="145621" />\n</workbook>'};var M=function(e){var t=e.frozenColumns;var i=e.frozenRows;var n=e.columns;var r=e.defaults;var a=e.data;var o=e.index;var s=e.mergeCells;var l=e.autoFilter;var d=e.filter;var u=e.showGridLines;var c=e.hyperlinks;var f=e.validations;var h=e.defaultCellStyleId;var p=e.rtl;var v=e.legacyDrawing;var m=e.drawing;var g=e.lastRow;var _=e.lastCol;return k+'\n<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" mc:Ignorable="x14ac">\n   '+(g&&_?'<dimension ref="A1:'+y(g-1,_-1)+'" />':"")+"\n\n   <sheetViews>\n     <sheetView "+(p?'rightToLeft="1"':"")+" "+(o===0?'tabSelected="1"':"")+' workbookViewId="0" '+(u===false?'showGridLines="0"':"")+">\n     "+(i||t?'\n       <pane state="frozen"\n         '+(t?'xSplit="'+t+'"':"")+"\n         "+(i?'ySplit="'+i+'"':"")+'\n         topLeftCell="'+(String.fromCharCode(65+(t||0))+((i||0)+1))+'"\n       />':"")+'\n     </sheetView>\n   </sheetViews>\n\n   <sheetFormatPr x14ac:dyDescent="0.25" '+(!r.skipCustomHeight?'customHeight="1"':"")+' defaultRowHeight="'+(r.rowHeight?r.rowHeight*.75:15)+'"\n     '+(r.columnWidth?'defaultColWidth="'+x(r.columnWidth)+'"':"")+" />\n\n   "+(h!=null||n&&n.length>0?"\n     <cols>\n       "+(!n||!n.length?'\n         <col min="1" max="16384" style="'+h+'"\n              '+(r.columnWidth?'width="'+x(r.columnWidth)+'"':"")+" /> ":"")+"\n       "+w(n,function(e,t){var i=typeof e.index==="number"?e.index+1:t+1;if(e.width===0){return"<col "+(h!=null?'style="'+h+'"':"")+'\n                        min="'+i+'" max="'+i+'" hidden="1" customWidth="1" />'}return"<col "+(h!=null?'style="'+h+'"':"")+'\n                      min="'+i+'" max="'+i+'" customWidth="1"\n                      '+(e.autoWidth?'width="'+(e.width*7+5)/7*256/256+'" bestFit="1"':'width="'+x(e.width)+'"')+" />"})+"\n     </cols>":"")+"\n\n   <sheetData>\n     "+w(a,function(e,t){var i=typeof e.index==="number"?e.index+1:t+1;return'\n         <row r="'+i+'" x14ac:dyDescent="0.25"\n              '+(e.level?'outlineLevel="'+e.level+'"':"")+"\n              "+(e.height===0?'hidden="1"':e.height?'ht="'+te(e.height)+'" customHeight="1"':"")+">\n           "+w(e.data,function(e){return'\n             <c r="'+e.ref+'" '+(e.style?'s="'+e.style+'"':"")+" "+(e.type?'t="'+e.type+'"':"")+">\n               "+(e.formula!=null?ee(e.formula):"")+"\n               "+(e.value!=null?"<v>"+b(e.value)+"</v>":"")+"\n             </c>"})+"\n         </row>\n       "})+"\n   </sheetData>\n\n   "+(l?'<autoFilter ref="'+l.from+":"+l.to+'"/>':d?T(d):"")+"\n\n   "+(s.length?'\n     <mergeCells count="'+s.length+'">\n       '+w(s,function(e){return'<mergeCell ref="'+e+'"/>'})+"\n     </mergeCells>":"")+"\n\n   "+(f.length?"\n     <dataValidations>\n       "+w(f,function(e){return'\n         <dataValidation sqref="'+e.sqref.join(" ")+'"\n                         showErrorMessage="'+e.showErrorMessage+'"\n                         type="'+b(e.type)+'"\n                         '+(e.type!=="list"?'operator="'+b(e.operator)+'"':"")+'\n                         allowBlank="'+e.allowBlank+'"\n                         showDropDown="'+e.showDropDown+'"\n                         '+(e.error?'error="'+b(e.error)+'"':"")+"\n                         "+(e.errorTitle?'errorTitle="'+b(e.errorTitle)+'"':"")+">\n           "+(e.formula1?"<formula1>"+b(e.formula1)+"</formula1>":"")+"\n           "+(e.formula2?"<formula2>"+b(e.formula2)+"</formula2>":"")+"\n         </dataValidation>"})+"\n     </dataValidations>":"")+"\n\n   "+(c.length?"\n     <hyperlinks>\n       "+w(c,function(e){return'\n         <hyperlink ref="'+e.ref+'" r:id="'+e.rId+'"/>'})+"\n     </hyperlinks>":"")+'\n\n   <pageMargins left="0.7" right="0.7" top="0.75" bottom="0.75" header="0.3" footer="0.3" />\n   '+(m?'<drawing r:id="'+m+'"/>':"")+"\n   "+(v?'<legacyDrawing r:id="'+v+'"/>':"")+"\n</worksheet>"};var q=function(e){var t=e.count;return k+'\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">\n  '+u(t,function(e){return'\n    <Relationship Id="rId'+(e+1)+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet'+(e+1)+'.xml" />'})+'\n  <Relationship Id="rId'+(t+1)+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml" />\n  <Relationship Id="rId'+(t+2)+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml" />\n</Relationships>'};var $=function(e){var t=e.hyperlinks;var i=e.comments;var n=e.sheetIndex;var r=e.drawings;return k+'\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">\n  '+w(t,function(e){return'\n    <Relationship Id="'+e.rId+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink" Target="'+b(e.target)+'" TargetMode="External" />'})+"\n  "+(!i.length?"":'\n    <Relationship Id="comment'+n+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments" Target="../comments'+n+'.xml"/>\n    <Relationship Id="vml'+n+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing" Target="../drawings/vmlDrawing'+n+'.vml"/>')+"\n  "+(!r.length?"":'\n    <Relationship Id="drw'+n+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing" Target="../drawings/drawing'+n+'.xml"/>')+"\n</Relationships>"};var K=function(e){var t=e.comments;return k+'\n<comments xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main">\n  <authors>\n    <author></author>\n  </authors>\n  <commentList>\n    '+w(t,function(e){return'\n      <comment ref="'+e.ref+'" authorId="0">\n        <text>\n          <r>\n            <rPr>\n              <sz val="8"/>\n              <color indexed="81"/>\n              <rFont val="Tahoma"/>\n              <charset val="1"/>\n            </rPr>\n            <t>'+b(e.text)+"</t>\n          </r>\n        </text>\n      </comment>"})+"\n  </commentList>\n</comments>"};var Y=function(e){var t=e.comments;return'<xml xmlns:v="urn:schemas-microsoft-com:vml"\n     xmlns:o="urn:schemas-microsoft-com:office:office"\n     xmlns:x="urn:schemas-microsoft-com:office:excel">\n  <v:shapetype coordsize="21600,21600" id="_x0000_t202" path="m,l,21600r21600,l21600,xe">\n    <v:stroke joinstyle="miter"/>\n    <v:path gradientshapeok="t" o:connecttype="rect"/>\n  </v:shapetype>\n  '+w(t,function(e){return'\n    <v:shape type="#_x0000_t202" style="visibility: hidden" fillcolor="#ffffe1" o:insetmode="auto">\n      <v:shadow on="t" color="black" obscured="t"/>\n      <x:ClientData ObjectType="Note">\n        <x:MoveWithCells/>\n        <x:SizeWithCells/>\n        <x:Anchor>'+e.anchor+"</x:Anchor>\n        <x:AutoFill>False</x:AutoFill>\n        <x:Row>"+e.row+"</x:Row>\n        <x:Column>"+e.col+"</x:Column>\n      </x:ClientData>\n    </v:shape>"})+"\n</xml>"};var Q=function(e){return k+'\n<xdr:wsDr xmlns:xdr="http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing"\n          xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main"\n          xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships">\n  '+w(e,function(e,t){return'\n    <xdr:oneCellAnchor editAs="oneCell">\n      <xdr:from>\n        <xdr:col>'+e.col+"</xdr:col>\n        <xdr:colOff>"+e.colOffset+"</xdr:colOff>\n        <xdr:row>"+e.row+"</xdr:row>\n        <xdr:rowOff>"+e.rowOffset+'</xdr:rowOff>\n      </xdr:from>\n      <xdr:ext cx="'+e.width+'" cy="'+e.height+'" />\n      <xdr:pic>\n        <xdr:nvPicPr>\n          <xdr:cNvPr id="'+(t+1)+'" name="Picture '+(t+1)+'"/>\n          <xdr:cNvPicPr/>\n        </xdr:nvPicPr>\n        <xdr:blipFill>\n          <a:blip r:embed="'+e.imageId+'"/>\n          <a:stretch>\n            <a:fillRect/>\n          </a:stretch>\n        </xdr:blipFill>\n        <xdr:spPr>\n          <a:prstGeom prst="rect">\n            <a:avLst/>\n          </a:prstGeom>\n        </xdr:spPr>\n      </xdr:pic>\n      <xdr:clientData/>\n    </xdr:oneCellAnchor>'})+"\n</xdr:wsDr>"};var X=function(e){return k+'\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">\n  '+w(e,function(e){return'\n    <Relationship Id="'+e.rId+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/image" Target="'+e.target+'"/>'})+"\n</Relationships>"};var Z=function(e){var t=e.count;var i=e.uniqueCount;var n=e.indexes;return k+'\n<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" count="'+t+'" uniqueCount="'+i+'">\n  '+w(Object.keys(n),function(e){return'\n    <si><t xml:space="preserve">'+b(e.substring(1))+"</t></si>"})+"\n</sst>"};var J=function(e){var t=e.formats;var i=e.fonts;var n=e.fills;var r=e.borders;var a=e.styles;return k+'\n<styleSheet\n    xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main"\n    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"\n    mc:Ignorable="x14ac"\n    xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac">\n  <numFmts count="'+t.length+'">\n  '+w(t,function(e,t){return'\n    <numFmt formatCode="'+b(e.format)+'" numFmtId="'+(165+t)+'" />'})+'\n  </numFmts>\n  <fonts count="'+(i.length+1)+'" x14ac:knownFonts="1">\n    <font>\n       <sz val="11" />\n       <color theme="1" />\n       <name val="Calibri" />\n       <family val="2" />\n       <scheme val="minor" />\n    </font>\n    '+w(i,function(e){return"\n    <font>\n      "+(e.bold?"<b/>":"")+"\n      "+(e.italic?"<i/>":"")+"\n      "+(e.underline?"<u/>":"")+'\n      <sz val="'+(e.fontSize||11)+'" />\n      '+(e.color?'<color rgb="'+b(e.color)+'" />':'<color theme="1" />')+"\n      "+(e.fontFamily?'\n        <name val="'+b(e.fontFamily)+'" />\n        <family val="2" />\n      ':'\n        <name val="Calibri" />\n        <family val="2" />\n        <scheme val="minor" />\n      ')+"\n    </font>"})+'\n  </fonts>\n  <fills count="'+(n.length+2)+'">\n      <fill><patternFill patternType="none"/></fill>\n      <fill><patternFill patternType="gray125"/></fill>\n    '+w(n,function(e){return"\n      "+(e.background?'\n        <fill>\n          <patternFill patternType="solid">\n              <fgColor rgb="'+b(e.background)+'"/>\n          </patternFill>\n        </fill>\n      ':"")})+'\n  </fills>\n  <borders count="'+(r.length+1)+'">\n    <border><left/><right/><top/><bottom/><diagonal/></border>\n    '+w(r,se)+'\n  </borders>\n  <cellStyleXfs count="1">\n    <xf borderId="0" fillId="0" fontId="0" />\n  </cellStyleXfs>\n  <cellXfs count="'+(a.length+1)+'">\n    <xf numFmtId="0" fontId="0" fillId="0" borderId="0" xfId="0" />\n    '+w(a,function(e){return'\n      <xf xfId="0"\n          '+(e.fontId?'fontId="'+e.fontId+'" applyFont="1"':"")+"\n          "+(e.fillId?'fillId="'+e.fillId+'" applyFill="1"':"")+"\n          "+(e.numFmtId?'numFmtId="'+e.numFmtId+'" applyNumberFormat="1"':"")+"\n          "+(e.textAlign||e.verticalAlign||e.wrap?'applyAlignment="1"':"")+"\n          "+(e.borderId?'borderId="'+e.borderId+'" applyBorder="1"':"")+">\n        "+(e.textAlign||e.verticalAlign||e.wrap?"\n        <alignment\n          "+(e.textAlign?'horizontal="'+b(e.textAlign)+'"':"")+"\n          "+(e.verticalAlign?'vertical="'+b(e.verticalAlign)+'"':"")+"\n          "+(e.indent?'indent="'+b(e.indent)+'"':"")+"\n          "+(e.wrap?'wrapText="1"':"")+" />\n        ":"")+"\n      </xf>\n    "})+'\n  </cellXfs>\n  <cellStyles count="1">\n    <cellStyle name="Normal" xfId="0" builtinId="0"/>\n  </cellStyles>\n  <dxfs count="0" />\n  <tableStyles count="0" defaultTableStyle="TableStyleMedium2" defaultPivotStyle="PivotStyleMedium9" />\n</styleSheet>'};function ee(e){if(typeof e=="string"){return"<f>"+b(e)+"</f>"}return'<f t="array" ref="'+e.ref+'">'+b(e.src)+"</f>"}function c(e){var t=Math.floor(e/26)-1;return(t>=0?c(t):"")+String.fromCharCode(65+e%26)}function y(e,t){return c(t)+(e+1)}function B(e,t){return"$"+c(t)+"$"+(e+1)}function L(e){var t=e.frozenRows||(e.freezePane||{}).rowSplit||1;return t-1}function x(e){var t=7;return e/t-Math.floor(128/t)/256}function te(e){return e*.75}function ie(e){return String(e).replace(/[\x00-\x09\x0B\x0C\x0E-\x1F]/g,"").replace(/\r?\n/g,"\r\n")}var f=kendo.Class.extend({init:function(e,t,i,n){this.options=e;this._strings=t;this._styles=i;this._borders=n;this._validations={};this._comments=[];this._drawings=e.drawings||[];this._hyperlinks=(this.options.hyperlinks||[]).map(function(e,t){return r.extend({},e,{rId:"link"+t})})},relsToXML:function(){var e=this._hyperlinks;var t=this._comments;var i=this._drawings;if(e.length||t.length||i.length){return $({hyperlinks:e,comments:t,sheetIndex:this.options.sheetIndex,drawings:i})}},toXML:function(e){var t=this;var i=this.options.mergedCells||[];var n=this.options.rows||[];var r=le(n,i);this._readCells(r);var a=this.options.filter;var o;if(a&&typeof a.from==="number"&&typeof a.to==="number"){a={from:y(L(this.options),a.from),to:y(L(this.options),a.to)}}else if(a&&a.ref&&a.columns){o=a;a=null}var s=[];for(var l in this._validations){if(Object.prototype.hasOwnProperty.call(t._validations,l)){s.push(t._validations[l])}}var d=null;if(this.options.defaultCellStyle){d=this._lookupStyle(this.options.defaultCellStyle)}var u=this.options.freezePane||{};var c=this.options.defaults||{};var f=this.options.rows?this._getLastRow():1;var h=this.options.rows?this._getLastCol():1;return M({frozenColumns:this.options.frozenColumns||u.colSplit,frozenRows:this.options.frozenRows||u.rowSplit,columns:this.options.columns,defaults:c,data:r,index:e,mergeCells:i,autoFilter:a,filter:o,showGridLines:this.options.showGridLines,hyperlinks:this._hyperlinks,validations:s,defaultCellStyleId:d,rtl:this.options.rtl!==undefined?this.options.rtl:c.rtl,legacyDrawing:this._comments.length?"vml"+this.options.sheetIndex:null,drawing:this._drawings.length?"drw"+this.options.sheetIndex:null,lastRow:f,lastCol:h})},commentsXML:function(){if(this._comments.length){return K({comments:this._comments})}},drawingsXML:function(n){if(this._drawings.length){var r={};var e=this._drawings.map(function(e){var t=O(e.topLeftCell);var i=r[e.image];if(!i){i=r[e.image]={rId:"img"+e.image,target:n[e.image].target}}return{col:t.col,colOffset:_(e.offsetX),row:t.row,rowOffset:_(e.offsetY),width:_(e.width),height:_(e.height),imageId:i.rId}});return{main:Q(e),rels:X(r)}}},legacyDrawing:function(){if(this._comments.length){return Y({comments:this._comments})}},_lookupString:function(e){var t="$"+e;var i=this._strings.indexes[t];var n;if(i!==undefined){n=i}else{n=this._strings.indexes[t]=this._strings.uniqueCount;this._strings.uniqueCount++}this._strings.count++;return n},_lookupStyle:function(e){var t=JSON.stringify(e);if(t==="{}"){return 0}var i=P(t,this._styles);if(i<0){i=this._styles.push(t)-1}return i+1},_lookupBorder:function(e){var t=JSON.stringify(e);if(t==="{}"){return}var i=P(t,this._borders);if(i<0){i=this._borders.push(t)-1}return i+1},_readCells:function(e){var t=this;for(var i=0;i<e.length;i++){var n=e[i];var r=n.cells;n.data=[];for(var a=0;a<r.length;a++){var o=t._cell(r[a],n.index,a);if(o){n.data.push(o)}}}},_cell:function(n,e,t){if(!n||n===m){return null}var i=n.value;var r={};if(n.borderLeft){r.left=n.borderLeft}if(n.borderRight){r.right=n.borderRight}if(n.borderTop){r.top=n.borderTop}if(n.borderBottom){r.bottom=n.borderBottom}r=this._lookupBorder(r);var a=this.options.defaultCellStyle||{};var o={borderId:r};(function(e){e("color");e("background");e("bold");e("italic");e("underline");if(!e("fontFamily")){e("fontName","fontFamily")}e("fontSize");e("format");if(!e("textAlign")){e("hAlign","textAlign")}if(!e("verticalAlign")){e("vAlign","verticalAlign")}e("wrap");e("indent")})(function(e,t){var i=n[e];if(i===undefined){i=a[e]}if(i!==undefined){o[t||e]=i;return true}});var s=this.options.columns||[];var l=s[t];var d=typeof i;if(l&&l.autoWidth&&(!n.colSpan||n.colSpan===1)){var u=i;if(d==="number"){u=h.toString(i,n.format)}l.width=Math.max(l.width||0,String(u).length)}if(d==="string"){i=ie(i);i=this._lookupString(i);d="s"}else if(d==="number"){d="n"}else if(d==="boolean"){d="b";i=Number(i)}else if(i&&i.getTime){d=null;i=D(i);if(!o.format){o.format="mm-dd-yy"}}else{d=null;i=null}o=this._lookupStyle(o);var c=y(e,t);if(n.validation){this._addValidation(n.validation,c)}if(n.comment){var f=[t+1,15,e,10,t+3,15,e+3,4];this._comments.push({ref:c,text:n.comment,row:e,col:t,anchor:f.join(", ")})}return{value:i,formula:n.formula,type:d,style:o,ref:c}},_addValidation:function(e,t){var i={showErrorMessage:e.type==="reject"?1:0,formula1:e.from,formula2:e.to,type:re[e.dataType]||e.dataType,operator:ne[e.comparerType]||e.comparerType,allowBlank:e.allowNulls?1:0,showDropDown:e.showButton?0:1,error:e.messageTemplate,errorTitle:e.titleTemplate};var n=JSON.stringify(i);if(!this._validations[n]){this._validations[n]=i;i.sqref=[]}this._validations[n].sqref.push(t)},_getLastRow:function(){return p(this.options.rows)},_getLastCol:function(){var t=0;this.options.rows.forEach(function(e){if(e.cells){t=Math.max(t,p(e.cells))}});return t}});function p(e){var t=e.length;e.forEach(function(e){if(e.index&&e.index>=t){t=e.index+1}});return t}var ne={greaterThanOrEqualTo:"greaterThanOrEqual",lessThanOrEqualTo:"lessThanOrEqual"};var re={number:"decimal"};var H={General:0,0:1,"0.00":2,"#,##0":3,"#,##0.00":4,"0%":9,"0.00%":10,"0.00E+00":11,"# ?/?":12,"# ??/??":13,"mm-dd-yy":14,"d-mmm-yy":15,"d-mmm":16,"mmm-yy":17,"h:mm AM/PM":18,"h:mm:ss AM/PM":19,"h:mm":20,"h:mm:ss":21,"m/d/yy h:mm":22,"#,##0 ;(#,##0)":37,"#,##0 ;[Red](#,##0)":38,"#,##0.00;(#,##0.00)":39,"#,##0.00;[Red](#,##0.00)":40,"mm:ss":45,"[h]:mm:ss":46,"mmss.0":47,"##0.0E+0":48,"@":49,"[$-404]e/m/d":27,"m/d/yy":30,t0:59,"t0.00":60,"t#,##0":61,"t#,##0.00":62,"t0%":67,"t0.00%":68,"t# ?/?":69,"t# ??/??":70};function N(e){var t=e;if(t.length<6){t=t.replace(/(\w)/g,function(e,t){return t+t})}t=t.substring(1).toUpperCase();if(t.length<8){t="FF"+t}return t}var ae=kendo.Class.extend({init:function(e){var i=this;this.options=e||{};this._strings={indexes:{},count:0,uniqueCount:0};this._styles=[];this._borders=[];this._images=this.options.images;this._imgId=0;this._sheets=R(this.options.sheets||[],function(e,t){e.defaults=i.options;e.sheetIndex=t+1;return new f(e,i._strings,i._styles,i._borders)})},imageFilename:function(e){var t=++this._imgId;switch(e){case"image/jpg":case"image/jpeg":return"image"+t+".jpg";case"image/png":return"image"+t+".png";case"image/gif":return"image"+t+".gif";default:return"image"+t+".bin"}},toZIP:function(){var n=this;var e=F();var t=e.folder("docProps");t.file("core.xml",W({creator:this.options.creator||"Kendo UI",lastModifiedBy:this.options.creator||"Kendo UI",created:this.options.date||(new Date).toJSON(),modified:this.options.date||(new Date).toJSON()}));var i=this._sheets.length;t.file("app.xml",U({sheets:this._sheets}));var r=e.folder("_rels");r.file(".rels",V);var a=e.folder("xl");var o=a.folder("_rels");o.file("workbook.xml.rels",q({count:i}));if(this._images){var s=a.folder("media");Object.keys(this._images).forEach(function(e){var t=n._images[e];var i=n.imageFilename(t.type);s.file(i,t.data);t.target="../media/"+i})}var l={};a.file("workbook.xml",G({sheets:this._sheets,filterNames:R(this._sheets,function(e,t){var i=e.options;var n=i.name||i.title||"Sheet"+(t+1);l[n.toLowerCase()]=t;var r=i.filter;if(r){if(r.ref){var a=r.ref.split(":");var o=O(a[0]);var s=O(a[1]);return{localSheetId:t,name:n,from:B(o.row,o.col),to:B(s.row,s.col)}}else if(typeof r.from!=="undefined"&&typeof r.to!=="undefined"){return{localSheetId:t,name:n,from:B(L(i),r.from),to:B(L(i),r.to)}}}}),userNames:R(this.options.names||[],function(e){return{name:e.localName,localSheetId:e.sheet?l[e.sheet.toLowerCase()]:null,value:e.value,hidden:e.hidden}})}));var d=a.folder("worksheets");var u=a.folder("drawings");var c=u.folder("_rels");var f=d.folder("_rels");var h=[];var p=[];for(var v=0;v<i;v++){var m=n._sheets[v];var g="sheet"+(v+1)+".xml";var _=m.toXML(v);var b=m.relsToXML();var w=m.commentsXML();var k=m.legacyDrawing();var y=m.drawingsXML(n._images);if(b){f.file(g+".rels",b)}if(w){var x="comments"+m.options.sheetIndex+".xml";a.file(x,w);h.push(x)}if(k){u.file("vmlDrawing"+m.options.sheetIndex+".vml",k)}if(y){var C="drawing"+m.options.sheetIndex+".xml";u.file(C,y.main);c.file(C+".rels",y.rels);p.push(C)}d.file(g,_)}var S=R(this._borders,z);var T=R(this._styles,z);var D=function(e){return e.underline||e.bold||e.italic||e.color||e.fontFamily||e.fontSize};var A=function(e){var t=Number(e);var i;if(t){i=t*3/4}return i};var E=R(T,function(e){if(e.fontSize){e.fontSize=A(e.fontSize)}if(e.color){e.color=N(e.color)}if(D(e)){return e}});var I=R(T,function(e){if(e.format&&H[e.format]===undefined){return e}});var M=R(T,function(e){if(e.background){e.background=N(e.background);return e}});a.file("styles.xml",J({fonts:E,fills:M,formats:I,borders:S,styles:R(T,function(e){var t={};if(D(e)){t.fontId=P(e,E)+1}if(e.background){t.fillId=P(e,M)+2}t.textAlign=e.textAlign;t.indent=e.indent;t.verticalAlign=e.verticalAlign;t.wrap=e.wrap;t.borderId=e.borderId;if(e.format){if(H[e.format]!==undefined){t.numFmtId=H[e.format]}else{t.numFmtId=165+P(e,I)}}return t})}));a.file("sharedStrings.xml",Z(this._strings));e.file("[Content_Types].xml",j({sheetCount:i,commentFiles:h,drawingFiles:p}));return e},toDataURL:function(){var e=this.toZIP();return e.generateAsync?e.generateAsync(l).then(d):d(e.generate(l))},toBlob:function(){var e=this.toZIP();if(e.generateAsync){return e.generateAsync(E)}return new Blob([e.generate(I)],{type:t})}});function oe(e){var t="thin";if(e===2){t="medium"}else if(e===3){t="thick"}return t}function v(e,t){var i="";if(t){i+="<"+e+' style="'+oe(t.size)+'">';if(t.color){i+='<color rgb="'+N(t.color)+'"/>'}i+="</"+e+">"}return i}function se(e){return"<border>"+v("left",e.left)+v("right",e.right)+v("top",e.top)+v("bottom",e.bottom)+"</border>"}var m={};function le(e,t){var n=[];var r=[];de(e,function(e,t){var i={_source:e,index:t,height:e.height,level:e.level,cells:[]};n.push(i);r[t]=i});var i=g(n).slice(0);var a={rowData:n,rowsByIndex:r,mergedCells:t};for(var o=0;o<i.length;o++){fe(i[o],a);delete i[o]._source}return g(n)}function de(e,t){for(var i=0;i<e.length;i++){var n=e[i];if(!n){continue}var r=n.index;if(typeof r!=="number"){r=i}t(n,r)}}function g(e){return e.sort(function(e,t){return e.index-t.index})}function ue(e,t){if(e.indexOf(t)<0){e.push(t)}}function ce(e,t){for(var i=0;i<e.length;++i){var n=e[i];var r=n.split(":");var a=r[0];if(a===t){var o=r[1];a=O(a);o=O(o);return{rowSpan:o.row-a.row+1,colSpan:o.col-a.col+1}}}}function O(e){function t(e){var t=e.toUpperCase();var i=0;for(var n=0;n<t.length;++n){i=i*26+t.charCodeAt(n)-64}return i-1}function i(e){return parseInt(e,10)-1}var n=/^([a-z]+)(\d+)$/i.exec(e);return{row:i(n[2]),col:t(n[1])}}function _(e){return Math.round(e*9525)}function fe(e,t){var i=e._source;var n=e.index;var r=i.cells;var a=e.cells;if(!r){return}for(var o=0;o<r.length;o++){var s=r[o]||m;var l=s.rowSpan||1;var d=s.colSpan||1;var u=he(a,s);var c=y(n,u);if(l===1&&d===1){var f=ce(t.mergedCells,c);if(f){d=f.colSpan;l=f.rowSpan}}S(s,a,u,d);if(l>1||d>1){ue(t.mergedCells,c+":"+y(n+l-1,u+d-1))}if(l>1){for(var h=n+1;h<n+l;h++){var p=t.rowsByIndex[h];if(!p){p=t.rowsByIndex[h]={index:h,cells:[]};t.rowData.push(p)}S(s,p.cells,u-1,d+1)}}}}function he(e,t){var i;if(typeof t.index==="number"){i=t.index;C(e,t,t.index)}else{i=pe(e,t)}return i}function C(e,t,i){e[i]=t}function pe(e,t){var i=e.length;for(var n=0;n<e.length+1;n++){if(!e[n]){e[n]=t;i=n;break}}return i}function S(e,t,i,n){for(var r=1;r<n;r++){var a={borderTop:e.borderTop,borderRight:e.borderRight,borderBottom:e.borderBottom,borderLeft:e.borderLeft};C(t,a,i+r)}}var ve=function(e){var t=e.ref;var i=e.columns;var n=e.generators;return'\n<autoFilter ref="'+t+'">\n  '+w(i,function(e){return'\n    <filterColumn colId="'+e.index+'">\n      '+n[e.filter](e)+"\n    </filterColumn>\n  "})+"\n</autoFilter>"};var me=function(e){var t=e.logic;var i=e.criteria;return"\n<customFilters "+(t==="and"?'and="1"':"")+">\n"+w(i,function(e){var t=T.customOperator(e);var i=T.customValue(e);return"<customFilter "+(t?'operator="'+t+'"':"")+' val="'+i+'"/>'})+"\n</customFilters>"};var ge=function(e){var t=e.type;return'<dynamicFilter type="'+T.dynamicFilterType(t)+'" />'};var _e=function(e){var t=e.type;var i=e.value;return'<top10 percent="'+(/percent$/i.test(t)?1:0)+'"\n       top="'+(/^top/i.test(t)?1:0)+'"\n       val="'+i+'" />'};var be=function(e){var t=e.blanks;var i=e.values;return"<filters "+(t?'blank="1"':"")+">\n    "+w(i,function(e){return'\n      <filter val="'+e+'" />'})+"\n  </filters>"};function T(e){return ve({ref:e.ref,columns:e.columns,generators:{custom:me,dynamic:ge,top:_e,value:be}})}T.customOperator=function(e){return{eq:"equal",gt:"greaterThan",gte:"greaterThanOrEqual",lt:"lessThan",lte:"lessThanOrEqual",ne:"notEqual",doesnotstartwith:"notEqual",doesnotendwith:"notEqual",doesnotcontain:"notEqual",doesnotmatch:"notEqual"}[e.operator.toLowerCase()]};function we(e){if(/^\'/.test(e)){return e}if(/^[a-z_][a-z0-9_]*$/i.test(e)){return e}return"'"+e.replace(/\x27/g,"\\'")+"'"}T.customValue=function(e){function t(e){return e.replace(/([*?])/g,"~$1")}switch(e.operator.toLowerCase()){case"startswith":case"doesnotstartwith":return t(e.value)+"*";case"endswith":case"doesnotendwith":return"*"+t(e.value);case"contains":case"doesnotcontain":return"*"+t(e.value)+"*";default:return e.value}};T.dynamicFilterType=function(e){return{quarter1:"Q1",quarter2:"Q2",quarter3:"Q3",quarter4:"Q4",january:"M1",february:"M2",march:"M3",april:"M4",may:"M5",june:"M6",july:"M7",august:"M8",september:"M9",october:"M10",november:"M11",december:"M12"}[e.toLowerCase()]||e};kendo.deepExtend(kendo.ooxml,{IntlService:h,Workbook:ae,Worksheet:f})})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("ooxml/main",["kendo.core","ooxml/kendo-ooxml"],e)})(function(){(function(i){var n=kendo.ooxml.Workbook;kendo.ooxml.IntlService.register({toString:kendo.toString});kendo.ooxml.Workbook=n.extend({toDataURL:function(){var e=n.fn.toDataURL.call(this);if(typeof e!=="string"){throw new Error("The toDataURL method can be used only with jsZip 2. Either include jsZip 2 or use the toDataURLAsync method.")}return e},toDataURLAsync:function(){var t=i.Deferred();var e=n.fn.toDataURL.call(this);if(typeof e==="string"){e=t.resolve(e)}else if(e&&e.then){e.then(function(e){t.resolve(e)},function(){t.reject()})}return t.promise()}})})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.ooxml",["ooxml/main"],e)})(function(){var e={id:"ooxml",name:"XLSX generation",category:"framework",advanced:true,depends:["core"]}},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("excel/kendo-excel",["kendo.core"],e)})(function(){(function(c){window.kendo.excel=window.kendo.excel||{};var n=kendo.getter;var t=c.map;var i={compile:function(e){return e}};var r=kendo.Class.extend({});r.register=function(e){i=e};r.compile=function(e){return i.compile(e)};function a(e){return e.title+": "+e.value}function o(e,t){var i=[];for(var n=0;n<e;n++){i.push(t(n))}return i}function p(e){return e.id}var e=kendo.Class.extend({init:function(e){e.columns=this._trimColumns(e.columns||[]);this.allColumns=t(this._leafColumns(e.columns||[]),this._prepareColumn);this.columns=this._visibleColumns(this.allColumns);this.options=e;this.data=e.data||[];this.aggregates=e.aggregates||{};this.groups=[].concat(e.groups||[]);this.hasGroups=this.groups.length>0;this.hierarchy=e.hierarchy;this.hasGroupHeaderColumn=this.columns.some(function(e){return e.groupHeaderColumnTemplate});this.collapsible=this.options.collapsible},workbook:function(){var e={sheets:[{columns:this._columns(),rows:this.hierarchy?this._hierarchyRows():this._rows(),freezePane:this._freezePane(),filter:this._filter()}]};return e},_trimColumns:function(e){var i=this;return e.filter(function(e){var t=Boolean(e.field);if(!t&&e.columns){t=i._trimColumns(e.columns).length>0}return t})},_leafColumns:function(e){var t=this;var i=[];for(var n=0;n<e.length;n++){if(!e[n].columns){i.push(e[n])}else{i=i.concat(t._leafColumns(e[n].columns))}}return i},_prepareColumn:function(t){if(!t.field){return null}var e=function(e){return n(t.field,true)(e)};var i=null;if(t.values){i={};t.values.forEach(function(e){i[e.value]=e.text});e=function(e){return i[n(t.field,true)(e)]}}return c.extend({},t,{value:e,values:i,groupHeaderTemplate:t.groupHeaderTemplate?r.compile(t.groupHeaderTemplate):a,groupHeaderColumnTemplate:t.groupHeaderColumnTemplate?r.compile(t.groupHeaderColumnTemplate):null,groupFooterTemplate:t.groupFooterTemplate?r.compile(t.groupFooterTemplate):null,footerTemplate:t.footerTemplate?r.compile(t.footerTemplate):null})},_filter:function(){if(!this.options.filterable){return null}var e=this._depth();return{from:e,to:e+this.columns.length-1}},_createPaddingCells:function(e){var t=this;return o(e,function(){return c.extend({background:"#dfdfdf",color:"#333"},t.options.paddingCellOptions)})},_dataRow:function(e,t,i){var n=this;var r=this._createPaddingCells(t);if(this.hasGroups&&i&&e.items){r=r.concat(this._groupHeaderCells(e,t,i));var a=this._dataRows(e.items,t+1);a.unshift({type:"group-header",cells:r,level:this.collapsible?t:null});return a.concat(this._footer(e,t))}var o=[];for(var s=0;s<this.columns.length;s++){o[s]=n._cell(e,n.columns[s])}if(this.hierarchy){o[0].colSpan=i-t+1}return[{type:"data",cells:r.concat(o),level:this.collapsible?t:null}]},_groupHeaderCells:function(i,e,t){var n=[];var r=this.allColumns.filter(function(e){return e.field===i.field})[0]||{};var a=r&&r.title?r.title:i.field;var o=r?r.groupHeaderTemplate||r.groupHeaderColumnTemplate:null;var s=c.extend({title:a,field:i.field,value:r&&r.values?r.values[i.value]:i.value,aggregates:i.aggregates,items:i.items},i.aggregates[i.field]);var l=o?o(s):a+": "+i.value;n.push(c.extend({value:l,background:"#dfdfdf",color:"#333",colSpan:(this.hasGroupHeaderColumn?1:this.columns.length)+t-e},r.groupHeaderCellOptions));if(this.hasGroupHeaderColumn){this.columns.forEach(function(e,t){if(t>0){n.push(c.extend({background:"#dfdfdf",color:"#333",value:e.groupHeaderColumnTemplate?e.groupHeaderColumnTemplate(c.extend({group:s},s,i.aggregates[e.field])):undefined},e.groupHeaderCellOptions))}})}return n},_dataRows:function(e,t){var i=this;var n=this._depth();var r=[];for(var a=0;a<e.length;a++){r.push.apply(r,i._dataRow(e[a],t,n))}return r},_hierarchyRows:function(){var e=this;var t=this._depth();var i=this.data;var n=this.hierarchy.itemLevel;var r=this.hierarchy.itemId||p;var a=this._hasFooterTemplate();var o=[];var s=[];var l=0;var d;if(!a){this.collapsible=false}for(var u=0;u<i.length;u++){var c=i[u];var f=n(c,u);if(a){if(f>l){s.push({id:d,level:l})}else if(f<l){o.push.apply(o,e._hierarchyFooterRows(s,f,t))}l=f;d=r(c,u)}o.push.apply(o,e._dataRow(c,f+1,t))}if(a){o.push.apply(o,this._hierarchyFooterRows(s,0,t));var h=i.length?this.aggregates[i[0].parentId]:{};o.push(this._hierarchyFooter(h,0,t))}this._prependHeaderRows(o);return o},_hierarchyFooterRows:function(e,t,i){var n=this;var r=[];while(e.length&&e[e.length-1].level>=t){var a=e.pop();r.push(n._hierarchyFooter(n.aggregates[a.id],a.level+1,i))}return r},_hasFooterTemplate:function(){var e=this.columns;for(var t=0;t<e.length;t++){if(e[t].footerTemplate){return true}}},_hierarchyFooter:function(r,a,o){var e=this.columns.map(function(e,t){var i=t?1:o-a+1;if(e.footerTemplate){var n=(r||{})[e.field];return c.extend({background:"#dfdfdf",color:"#333",colSpan:i,value:e.footerTemplate(c.extend({aggregates:r},n))},e.footerCellOptions)}return c.extend({background:"#dfdfdf",color:"#333",colSpan:i},e.footerCellOptions)});return{type:"footer",cells:this._createPaddingCells(a).concat(e),level:this.collapsible?a:null}},_footer:function(i,e){var t=[];var n=this.columns.some(function(e){return e.groupFooterTemplate});var r,a;if(n){a={group:{items:i.items,field:i.field,value:i.value}};r={};Object.keys(i.aggregates).forEach(function(e){r[e]=c.extend({},i.aggregates[e],a)})}var o=this.columns.map(function(e){if(e.groupFooterTemplate){var t=c.extend({},r,i.aggregates[e.field],a);return c.extend({background:"#dfdfdf",color:"#333",value:e.groupFooterTemplate(t)},e.groupFooterCellOptions)}return c.extend({background:"#dfdfdf",color:"#333"},e.groupFooterCellOptions)});if(n){t.push({type:"group-footer",cells:this._createPaddingCells(this.groups.length).concat(o),level:this.collapsible?e:null})}return t},_isColumnVisible:function(e){return this._visibleColumns([e]).length>0&&(e.field||e.columns)},_visibleColumns:function(e){var a=this;return e.filter(function(e){var t=e.exportable;if(typeof t==="object"){t=e.exportable.excel}var i=!e.hidden&&t!==false;var n=e.hidden&&t===true;var r=i||n;if(r&&e.columns){r=a._visibleColumns(e.columns).length>0}return r})},_headerRow:function(t,e){var i=this;var n=t.cells.map(function(e){return c.extend(e,{colSpan:e.colSpan>1?e.colSpan:1,rowSpan:t.rowSpan>1&&!e.colSpan?t.rowSpan:1})});if(this.hierarchy&&n[0].firstCell){n[0].colSpan+=this._depth()}return{type:"header",cells:o(e.length,function(){return c.extend({background:"#7a7a7a",color:"#fff"},i.options.headerPaddingCellOptions)}).concat(n)}},_prependHeaderRows:function(e){var t=this;var i=this.groups;var n=[{rowSpan:1,cells:[],index:0}];this._prepareHeaderRows(n,this.options.columns);for(var r=n.length-1;r>=0;r--){e.unshift(t._headerRow(n[r],i))}},_prepareHeaderRows:function(e,t,i,n){var r=this;var a=n||e[e.length-1];var o=e[a.index+1];var s=0;for(var l=0;l<t.length;l++){var d=t[l];if(r._isColumnVisible(d)){var u=c.extend({background:"#7a7a7a",color:"#fff",value:d.title||d.field,colSpan:0,firstCell:l===0&&(!i||i.firstCell)},d.headerCellOptions);a.cells.push(u);if(d.columns&&d.columns.length){if(!o){o={rowSpan:0,cells:[],index:e.length};e.push(o)}u.colSpan=r._trimColumns(r._visibleColumns(d.columns)).length;r._prepareHeaderRows(e,d.columns,u,o);s+=u.colSpan-1;a.rowSpan=e.length-a.index}}}if(i){i.colSpan+=s}},_rows:function(){var t=this;var e=this._dataRows(this.data,0);if(this.columns.length){this._prependHeaderRows(e);var i=false;var n=this.columns.map(function(e){if(e.footerTemplate){i=true;return c.extend({background:"#dfdfdf",color:"#333",value:e.footerTemplate(c.extend({},t.aggregates,t.aggregates[e.field]))},e.footerCellOptions)}return c.extend({background:"#dfdfdf",color:"#333"},e.footerCellOptions)});if(i){e.push({type:"footer",cells:this._createPaddingCells(this.groups.length).concat(n)})}}return e},_headerDepth:function(e){var t=this;var i=1;var n=0;for(var r=0;r<e.length;r++){if(e[r].columns){var a=t._headerDepth(e[r].columns);if(a>n){n=a}}}return i+n},_freezePane:function(){var e=this._visibleColumns(this.options.columns||[]);var t=this._visibleColumns(this._trimColumns(this._leafColumns(e.filter(function(e){return e.locked})))).length;return{rowSplit:this._headerDepth(e),colSplit:t?t+this.groups.length:0}},_cell:function(e,t){return c.extend({value:t.value(e)},t.cellOptions)},_depth:function(){var e=0;if(this.hierarchy){e=this.hierarchy.depth}else{e=this.groups.length}return e},_columns:function(){var e=this._depth();var t=o(e,function(){return{width:20}});return t.concat(this.columns.map(function(e){return{width:parseInt(e.width,10),autoWidth:e.width?false:true}}))}});kendo.deepExtend(kendo.excel,{ExcelExporter:e,TemplateService:r})})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("excel/main",["kendo.core","kendo.data","excel/kendo-excel"],e)})(function(){(function(e,a){var i=a.excel.ExcelExporter;var o=e.extend;a.excel.TemplateService.register({compile:a.template});a.ExcelExporter=a.Class.extend({init:function(e){this.options=e;var t=e.dataSource;if(t instanceof a.data.DataSource){if(!t.filter()){t.options.filter=undefined}this.dataSource=new t.constructor(o({},t.options,{page:e.allPages?0:t.page(),filter:t.filter(),pageSize:e.allPages?t.total():t.pageSize()||t.total(),sort:t.sort(),group:t.group(),aggregate:t.aggregate()}));var i=t.data();if(i.length>0){if(e.hierarchy){for(var n=0;n<i.length;n++){if(i[n].expanded===false||i[n].expanded===undefined){i[n].expanded=true}}}this.dataSource._data=i;var r=this.dataSource.transport;if(t._isServerGrouped()&&r.options&&r.options.data){r.options.data=null}}}else{this.dataSource=a.data.DataSource.create(t)}},_hierarchy:function(){var e=this.options.hierarchy;var t=this.dataSource;if(e&&t.level){e={itemLevel:function(e){return t.level(e)}};var i=t.view();var n=0;var r;for(var a=0;a<i.length;a++){r=t.level(i[a]);if(r>n){n=r}}e.depth=n+1}else{e=false}return{hierarchy:e}},workbook:function(){return e.Deferred(e.proxy(function(t){this.dataSource.fetch().then(e.proxy(function(){var e=new i(o({},this.options,this._hierarchy(),{data:this.dataSource.view(),groups:this.dataSource.group(),aggregates:this.dataSource.aggregates()})).workbook();t.resolve(e,this.dataSource.view())},this))},this)).promise()}})})(kendo.jQuery,kendo);return kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("excel/mixins",["excel/main","kendo.ooxml"],e)})(function(){(function(t,r){r.ExcelMixin={extend:function(e){e.events.push("excelExport");e.options.excel=t.extend(e.options.excel,this.options);e.saveAsExcel=this.saveAsExcel},options:{proxyURL:"",allPages:false,filterable:false,fileName:"Export.xlsx",collapsible:false},saveAsExcel:function(){var n=this.options.excel||{};var e=new r.ExcelExporter({columns:this.columns,dataSource:this.dataSource,allPages:n.allPages,filterable:n.filterable,hierarchy:n.hierarchy,collapsible:n.collapsible});e.workbook().then(t.proxy(function(t,e){if(!this.trigger("excelExport",{workbook:t,data:e})){var i=new r.ooxml.Workbook(t);if(!i.options){i.options={}}i.options.skipCustomHeight=true;i.toDataURLAsync().then(function(e){r.saveAs({dataURI:e,fileName:t.fileName||n.fileName,proxyURL:n.proxyURL,forceProxy:n.forceProxy})})}},this))}}})(kendo.jQuery,kendo);return kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.excel",["excel/main","excel/mixins"],e)})(function(){var e={id:"excel",name:"Excel export",category:"framework",advanced:true,mixin:true,depends:["data","ooxml"]}},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.data.signalr",["kendo.data"],e)})(function(){var e={id:"data.signalr",name:"SignalR",category:"framework",depends:["data"],hidden:true};(function(s){var l=window.kendo;var t=l.isFunction;function d(e){return e&&t(e.done)&&t(e.fail)}function u(e){return e&&t(e.then)&&t(e.catch)}var e=l.data.RemoteTransport.extend({init:function(e){var t=e&&e.signalr?e.signalr:{};var i=t.promise;if(!i){throw new Error('The "promise" option must be set.')}if(!d(i)&&!u(i)){throw new Error('The "promise" option must be a Promise.')}this.promise=i;var n=t.hub;if(!n){throw new Error('The "hub" option must be set.')}if(typeof n.on!="function"||typeof n.invoke!="function"){throw new Error('The "hub" option is not a valid SignalR hub proxy.')}this.hub=n;l.data.RemoteTransport.fn.init.call(this,e)},push:function(e){var t=this.options.signalr.client||{};if(t.create){this.hub.on(t.create,e.pushCreate)}if(t.update){this.hub.on(t.update,e.pushUpdate)}if(t.destroy){this.hub.on(t.destroy,e.pushDestroy)}},_crud:function(e,t){var i=this.hub;var n=this.promise;var r=this.options.signalr.server;if(!r||!r[t]){throw new Error(l.format('The "server.{0}" option must be set.',t))}var a=[r[t]];var o=this.parameterMap(e.data,t);if(!s.isEmptyObject(o)){a.push(o)}if(d(n)){n.done(function(){i.invoke.apply(i,a).done(e.success).fail(e.error)})}else if(u(n)){n.then(function(){i.invoke.apply(i,a).then(e.success).catch(e.error)})}},read:function(e){this._crud(e,"read")},create:function(e){this._crud(e,"create")},update:function(e){this._crud(e,"update")},destroy:function(e){this._crud(e,"destroy")}});s.extend(true,l.data,{transports:{signalr:e}})})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("drawing/util",["kendo.core"],e)})(function(){(function(t){function e(){return t.Deferred()}function i(e){return t.when.apply(t,e)}kendo.drawing.util=kendo.drawing.util||{};kendo.deepExtend(kendo.drawing.util,{createPromise:e,promiseAll:i})})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.color",["kendo.core"],e)})(function(){var e={id:"color",name:"Color utils",category:"framework",advanced:true,description:"Color utilities used across components",depends:["core"]};window.kendo=window.kendo||{};var t=kendo.Class;var a={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};var o=function(e){var t=Object.keys(a);t.push("transparent");var i=new RegExp("^("+t.join("|")+")(\\W|$)","i");o=function(e){return i.exec(e)};return i.exec(e)};var s=t.extend({init:function(){},toHSV:function(){return this},toRGB:function(){return this},toHex:function(){return this.toBytes().toHex()},toBytes:function(){return this},toCss:function(){return"#"+this.toHex()},toCssRgba:function(){var e=this.toBytes();return"rgba("+e.r+", "+e.g+", "+e.b+", "+parseFloat(Number(this.a).toFixed(3))+")"},toDisplay:function(){return this.toCssRgba()},equals:function(e){return e===this||e!==null&&this.toCssRgba()===h(e).toCssRgba()},diff:function(e){if(e===null){return NaN}var t=this.toBytes();var i=e.toBytes();return Math.sqrt(Math.pow((t.r-i.r)*.3,2)+Math.pow((t.g-i.g)*.59,2)+Math.pow((t.b-i.b)*.11,2))},clone:function(){var e=this.toBytes();if(e===this){e=new l(e.r,e.g,e.b,e.a)}return e}});var f=s.extend({init:function(e,t,i,n){s.fn.init.call(this);this.r=e;this.g=t;this.b=i;this.a=n},toHSV:function(){var e=this;var t=e.r;var i=e.g;var n=e.b;var r=Math.min(t,i,n);var a=Math.max(t,i,n);var o=a-r;var s=a;var l,d;if(o===0){return new u(0,0,s,this.a)}if(a!==0){d=o/a;if(t===a){l=(i-n)/o}else if(i===a){l=2+(n-t)/o}else{l=4+(t-i)/o}l*=60;if(l<0){l+=360}}else{d=0;l=-1}return new u(l,d,s,this.a)},toHSL:function(){var e=this;var t=e.r;var i=e.g;var n=e.b;var r=Math.max(t,i,n);var a=Math.min(t,i,n);var o,s,l=(r+a)/2;if(r===a){o=s=0}else{var d=r-a;s=l>.5?d/(2-r-a):d/(r+a);switch(r){case t:o=(i-n)/d+(i<n?6:0);break;case i:o=(n-t)/d+2;break;case n:o=(t-i)/d+4;break;default:break}}return new c(o*60,s*100,l*100,this.a)},toBytes:function(){return new l(this.r*255,this.g*255,this.b*255,this.a)}});var l=f.extend({init:function(e,t,i,n){f.fn.init.call(this,Math.round(e),Math.round(t),Math.round(i),n)},toRGB:function(){return new f(this.r/255,this.g/255,this.b/255,this.a)},toHSV:function(){return this.toRGB().toHSV()},toHSL:function(){return this.toRGB().toHSL()},toHex:function(){return i(this.r,2)+i(this.g,2)+i(this.b,2)},toBytes:function(){return this}});function i(e,t,i){if(i===void 0){i="0"}var n=e.toString(16);while(t>n.length){n=i+n}return n}var u=s.extend({init:function(e,t,i,n){s.fn.init.call(this);this.h=e;this.s=t;this.v=i;this.a=n},toRGB:function(){var e=this;var t=e.h;var i=e.s;var n=e.v;var r,a,o;if(i===0){r=a=o=n}else{t/=60;var s=Math.floor(t);var l=t-s;var d=n*(1-i);var u=n*(1-i*l);var c=n*(1-i*(1-l));switch(s){case 0:r=n;a=c;o=d;break;case 1:r=u;a=n;o=d;break;case 2:r=d;a=n;o=c;break;case 3:r=d;a=u;o=n;break;case 4:r=c;a=d;o=n;break;default:r=n;a=d;o=u;break}}return new f(r,a,o,this.a)},toHSL:function(){return this.toRGB().toHSL()},toBytes:function(){return this.toRGB().toBytes()}});var c=s.extend({init:function(e,t,i,n){s.fn.init.call(this);this.h=e;this.s=t;this.l=i;this.a=n},toRGB:function(){var e=this.h/360;var t=this.s/100;var i=this.l/100;var n,r,a;if(t===0){n=r=a=i}else{var o=i<.5?i*(1+t):i+t-i*t;var s=2*i-o;n=d(s,o,e+1/3);r=d(s,o,e);a=d(s,o,e-1/3)}return new f(n,r,a,this.a)},toHSV:function(){return this.toRGB().toHSV()},toBytes:function(){return this.toRGB().toBytes()}});function d(e,t,i){var n=i;if(n<0){n+=1}if(n>1){n-=1}if(n<1/6){return e+(t-e)*6*n}if(n<1/2){return t}if(n<2/3){return e+(t-e)*(2/3-n)*6}return e}function h(e,t){var i,n;if(e==null||e==="none"){return null}if(e instanceof s){return e}var r=e.toLowerCase();if(i=o(r)){if(i[1]==="transparent"){r=new f(1,1,1,0)}else{r=h(a[i[1]],t)}r.match=[i[1]];return r}if(i=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})\b/i.exec(r)){n=new l(parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16),1)}else if(i=/^#?([0-9a-f])([0-9a-f])([0-9a-f])\b/i.exec(r)){n=new l(parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16),1)}else if(i=/^rgb\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/.exec(r)){n=new l(parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10),1)}else if(i=/^rgba\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9.]+)\s*\)/.exec(r)){n=new l(parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10),parseFloat(i[4]))}else if(i=/^rgb\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*\)/.exec(r)){n=new f(parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3])/100,1)}else if(i=/^rgba\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9.]+)\s*\)/.exec(r)){n=new f(parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3])/100,parseFloat(i[4]))}if(n){n.match=i}else if(!t){throw new Error("Cannot parse color: "+r)}return n}var n=180;var p=t.extend({init:function(e){var t=this;if(arguments.length===1){var i=p.formats;var n=this.resolveColor(e);for(var r=0;r<i.length;r++){var a=i[r].re;var o=i[r].process;var s=a.exec(n);if(s){var l=o(s);t.r=l[0];t.g=l[1];t.b=l[2]}}}else{this.r=arguments[0];this.g=arguments[1];this.b=arguments[2]}this.r=this.normalizeByte(this.r);this.g=this.normalizeByte(this.g);this.b=this.normalizeByte(this.b)},toHex:function(){var e=this.padDigit;var t=this.r.toString(16);var i=this.g.toString(16);var n=this.b.toString(16);return"#"+e(t)+e(i)+e(n)},resolveColor:function(e){var t=e||"black";if(t.charAt(0)==="#"){t=t.substr(1,6)}t=t.replace(/ /g,"");t=t.toLowerCase();t=p.namedColors[t]||t;return t},normalizeByte:function(e){if(e<0||isNaN(e)){return 0}return e>255?255:e},padDigit:function(e){return e.length===1?"0"+e:e},brightness:function(e){var t=Math.round;this.r=t(this.normalizeByte(this.r*e));this.g=t(this.normalizeByte(this.g*e));this.b=t(this.normalizeByte(this.b*e));return this},percBrightness:function(){return Math.sqrt(.241*this.r*this.r+.691*this.g*this.g+.068*this.b*this.b)},isDark:function(){return this.percBrightness()<n}});p.fromBytes=function(e,t,i,n){return new l(e,t,i,n!=null?n:1)};p.fromRGB=function(e,t,i,n){return new f(e,t,i,n!=null?n:1)};p.fromHSV=function(e,t,i,n){return new u(e,t,i,n!=null?n:1)};p.fromHSL=function(e,t,i,n){return new c(e,t,i,n!=null?n:1)};p.formats=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(e){return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}];p.namedColors=a;kendo.deepExtend(kendo,{parseColor:h,namedColors:a,Color:p})},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("util/text-metrics",["kendo.core"],e)})(function(){(function(t){window.kendo.util=window.kendo.util||{};var i=kendo.Class.extend({init:function(e){this._size=e;this._length=0;this._map={}},put:function(e,t){var i=this._map;var n={key:e,value:t};i[e]=n;if(!this._head){this._head=this._tail=n}else{this._tail.newer=n;n.older=this._tail;this._tail=n}if(this._length>=this._size){i[this._head.key]=null;this._head=this._head.newer;this._head.older=null}else{this._length++}},get:function(e){var t=this._map[e];if(t){if(t===this._head&&t!==this._tail){this._head=t.newer;this._head.older=null}if(t!==this._tail){if(t.older){t.older.newer=t.newer;t.newer.older=t.older}t.older=this._tail;t.newer=null;this._tail.newer=t;this._tail=t}return t.value}}});var n=/\r?\n|\r|\t/g;var r=" ";function f(e){return String(e).replace(n,r)}function h(e){var t=[];for(var i in e){t.push(i+e[i])}return t.sort().join("")}function p(e){var t=2166136261;for(var i=0;i<e.length;++i){t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);t^=e.charCodeAt(i)}return t>>>0}function v(){return{width:0,height:0,baseline:0}}var a={baselineMarkerSize:1};var m;if(typeof document!=="undefined"){m=document.createElement("div");m.style.cssText="position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;"+"padding: 0 !important; margin: 0 !important; border: 0 !important;"+"line-height: normal !important; visibility: hidden !important; white-space: pre!important;"}var o=kendo.Class.extend({init:function(e){this._cache=new i(1e3);this.options=t.extend({},a,e)},measure:function(e,t,i){if(i===void 0){i={}}if(!e){return v()}var n=h(t);var r=p(e+n);var a=this._cache.get(r);if(a){return a}var o=v();var s=i.box||m;var l=this._baselineMarker().cloneNode(false);for(var d in t){var u=t[d];if(typeof u!=="undefined"){s.style[d]=u}}var c=i.normalizeText!==false?f(e):String(e);s.textContent=c;s.appendChild(l);document.body.appendChild(s);if(c.length){o.width=s.offsetWidth-this.options.baselineMarkerSize;o.height=s.offsetHeight;o.baseline=l.offsetTop+this.options.baselineMarkerSize}if(o.width>0&&o.height>0){this._cache.put(r,o)}s.parentNode.removeChild(s);return o},_baselineMarker:function(){var e=document.createElement("div");e.style.cssText="display: inline-block; vertical-align: baseline;width: "+this.options.baselineMarkerSize+"px; height: "+this.options.baselineMarkerSize+"px;overflow: hidden;";return e}});o.current=new o;function e(e,t,i){return o.current.measure(e,t,i)}kendo.deepExtend(kendo.util,{LRUCache:i,TextMetrics:o,measureText:e,objectKey:h,hashKey:p,normalizeText:f})})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("drawing/kendo-drawing",["drawing/util","kendo.color","util/text-metrics"],e)})(function(){(function(w){window.kendo=window.kendo||{};var k=kendo.drawing;var y=k.util;var r=kendo.Class;var x=kendo.util;var C=kendo.support;var D=C.browser;var A=y.createPromise;var E=y.promiseAll;var e={extend:function(e){var t=this;for(var i in this){if(i!=="extend"){e[i]=t[i]}}},observers:function(){this._observers=this._observers||[];return this._observers},addObserver:function(e){if(!this._observers){this._observers=[e]}else{this._observers.push(e)}return this},removeObserver:function(e){var t=this.observers();var i=t.indexOf(e);if(i!==-1){t.splice(i,1)}return this},trigger:function(e,t){var i=this._observers;if(i&&!this._suspended){for(var n=0;n<i.length;n++){var r=i[n];if(r[e]){r[e](t)}}}return this},optionsChange:function(e){if(e===void 0){e={}}e.element=this;this.trigger("optionsChange",e)},geometryChange:function(){this.trigger("geometryChange",{element:this})},suspend:function(){this._suspended=(this._suspended||0)+1;return this},resume:function(){this._suspended=Math.max((this._suspended||0)-1,0);return this},_observerField:function(e,t){if(this[e]){this[e].removeObserver(this)}this[e]=t;t.addObserver(this)}};function I(e,t){e.push.apply(e,t);return e}var M={1:"i",10:"x",100:"c",2:"ii",20:"xx",200:"cc",3:"iii",30:"xxx",300:"ccc",4:"iv",40:"xl",400:"cd",5:"v",50:"l",500:"d",6:"vi",60:"lx",600:"dc",7:"vii",70:"lxx",700:"dcc",8:"viii",80:"lxxx",800:"dccc",9:"ix",90:"xc",900:"cm",1e3:"m"};function q(e){var t=[1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1];var i="";while(e>0){if(e<t[0]){t.shift()}else{i+=M[t[0]];e-=t[0]}}return i}var $="undefined";function l(e){return typeof e!==$}var K=1;function Y(){return"kdef"+K++}var Q=Math.PI/180;var X=Number.MAX_VALUE;var Z=-Number.MAX_VALUE;function z(e){return e/Q}var J=String.fromCharCode;function ee(e){var t="";for(var i=0;i<e.length;i++){var n=e.charCodeAt(i);if(n<128){t+=J(n)}else if(n<2048){t+=J(192|n>>>6);t+=J(128|n&63)}else if(n<65536){t+=J(224|n>>>12);t+=J(128|n>>>6&63);t+=J(128|n&63)}}return t}var te="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function ie(e){var t="";var i=0;var n=ee(e);while(i<n.length){var r=n.charCodeAt(i++);var a=n.charCodeAt(i++);var o=n.charCodeAt(i++);var s=r>>2;var l=(r&3)<<4|a>>4;var d=(a&15)<<2|o>>6;var u=o&63;if(isNaN(a)){d=u=64}else if(isNaN(o)){u=64}t=t+te.charAt(s)+te.charAt(l)+te.charAt(d)+te.charAt(u)}return t}function ne(e){if(l((e.x||{}).location)){return{x:e.x.location,y:e.y.location}}return{x:e.pageX||e.clientX||0,y:e.pageY||e.clientY||0}}function re(e){if(e===void 0){e={}}return e.touch?e.touch.initialTouch:e.target}function ae(e){return e===""||e===null||e==="none"||e==="transparent"||!l(e)}function u(e){if(e){return e[e.length-1]}}function oe(e,t,i){return Math.max(Math.min(e,i),t)}function se(e,o){if(e.length<2){return e.slice()}function a(e,t){var i=[],n=0,r=0,a=0;while(n<e.length&&r<t.length){if(o(e[n],t[r])<=0){i[a++]=e[n++]}else{i[a++]=t[r++]}}if(n<e.length){i.push.apply(i,e.slice(n))}if(r<t.length){i.push.apply(i,t.slice(r))}return i}return function e(t){if(t.length<=1){return t}var i=Math.floor(t.length/2);var n=t.slice(0,i);var r=t.slice(i);n=e(n);r=e(r);return a(n,r)}(e)}function B(e){return e*Q}function le(e){if(e){return Math.pow(10,e)}return 1}function L(e,t){var i=le(t);return Math.round(e*i)/i}function de(e,t){return l(e)?e:t}function ue(e,t){for(var i in t){var n=i.trim().split(" ");for(var r=0;r<n.length;r++){e.addEventListener(n[r],t[i],false)}}}function ce(e){var t=e.getBoundingClientRect();var i=document.documentElement;return{top:t.top+(window.pageYOffset||i.scrollTop)-(i.clientTop||0),left:t.left+(window.pageXOffset||i.scrollLeft)-(i.clientLeft||0)}}function fe(e,t){var i={};var n=window.getComputedStyle(e)||{};var r=Array.isArray(t)?t:[t];for(var a=0;a<r.length;a++){var o=r[a];i[o]=n[o]}return i}function he(e){if(isNaN(e)){return e}return e+"px"}function pe(e,t){if(t){var i=t.width;var n=t.height;if(l(i)){e.style.width=he(i)}if(l(n)){e.style.height=he(n)}}else{var r=fe(e,["width","height"]);return{width:parseInt(r.width,10),height:parseInt(r.height,10)}}}function ve(e,t){if(t===void 0){t={}}for(var i in t){var n=i.trim().split(" ");for(var r=0;r<n.length;r++){e.removeEventListener(n[r],t[i],false)}}}function me(e){var t=fe(e,["paddingLeft","paddingTop"]);var i=t.paddingLeft;var n=t.paddingTop;return{top:parseFloat(n),left:parseFloat(i)}}function ge(t){return function(e){if(this[t]!==e){this[t]=e;this.geometryChange()}return this}}function _e(e){return function(){return this[e]}}function be(e,t){for(var i=0;i<t.length;i++){var n=t[i];var r=n.charAt(0).toUpperCase()+n.substring(1,n.length);e["set"+r]=ge(n);e["get"+r]=_e(n)}}var p=r.extend({init:function(e,t,i,n,r,a){if(e===void 0){e=0}if(t===void 0){t=0}if(i===void 0){i=0}if(n===void 0){n=0}if(r===void 0){r=0}if(a===void 0){a=0}this.a=e;this.b=t;this.c=i;this.d=n;this.e=r;this.f=a},multiplyCopy:function(e){return new p(this.a*e.a+this.c*e.b,this.b*e.a+this.d*e.b,this.a*e.c+this.c*e.d,this.b*e.c+this.d*e.d,this.a*e.e+this.c*e.f+this.e,this.b*e.e+this.d*e.f+this.f)},invert:function(){var e=this;var t=e.a;var i=e.b;var n=e.c;var r=e.d;var a=e.e;var o=e.f;var s=t*r-i*n;if(s===0){return null}return new p(r/s,-i/s,-n/s,t/s,(n*o-r*a)/s,(i*a-t*o)/s)},clone:function(){return new p(this.a,this.b,this.c,this.d,this.e,this.f)},equals:function(e){if(!e){return false}return this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d&&this.e===e.e&&this.f===e.f},round:function(e){this.a=L(this.a,e);this.b=L(this.b,e);this.c=L(this.c,e);this.d=L(this.d,e);this.e=L(this.e,e);this.f=L(this.f,e);return this},toArray:function(e){var t=[this.a,this.b,this.c,this.d,this.e,this.f];if(l(e)){for(var i=0;i<t.length;i++){t[i]=L(t[i],e)}}return t},toString:function(e,t){if(t===void 0){t=","}return this.toArray(e).join(t)}});p.translate=function(e,t){return new p(1,0,0,1,e,t)};p.unit=function(){return new p(1,0,0,1,0,0)};p.rotate=function(e,t,i){var n=new p;n.a=Math.cos(B(e));n.b=Math.sin(B(e));n.c=-n.b;n.d=n.a;n.e=t-t*n.a+i*n.b||0;n.f=i-i*n.a-t*n.b||0;return n};p.scale=function(e,t){return new p(e,0,0,t,0,0)};p.IDENTITY=p.unit();function a(e){if(e&&typeof e.matrix==="function"){return e.matrix()}return e}var H=r.extend({init:function(e,t){this.x=e||0;this.y=t||0},equals:function(e){return e&&e.x===this.x&&e.y===this.y},clone:function(){return new H(this.x,this.y)},rotate:function(e,t){var i=H.create(t)||H.ZERO;return this.transform(p.rotate(e,i.x,i.y))},translate:function(e,t){this.x+=e;this.y+=t;this.geometryChange();return this},translateWith:function(e){return this.translate(e.x,e.y)},move:function(e,t){this.x=this.y=0;return this.translate(e,t)},scale:function(e,t){if(t===void 0){t=e}this.x*=e;this.y*=t;this.geometryChange();return this},scaleCopy:function(e,t){return this.clone().scale(e,t)},transform:function(e){var t=a(e);var i=this;var n=i.x;var r=i.y;this.x=t.a*n+t.c*r+t.e;this.y=t.b*n+t.d*r+t.f;this.geometryChange();return this},transformCopy:function(e){var t=this.clone();if(e){t.transform(e)}return t},distanceTo:function(e){var t=this.x-e.x;var i=this.y-e.y;return Math.sqrt(t*t+i*i)},round:function(e){this.x=L(this.x,e);this.y=L(this.y,e);this.geometryChange();return this},toArray:function(e){var t=l(e);var i=t?L(this.x,e):this.x;var n=t?L(this.y,e):this.y;return[i,n]},toString:function(e,t){if(t===void 0){t=" "}var i=this;var n=i.x;var r=i.y;if(l(e)){n=L(n,e);r=L(r,e)}return n+t+r}});H.create=function(e,t){if(l(e)){if(e instanceof H){return e}else if(arguments.length===1&&e.length===2){return new H(e[0],e[1])}return new H(e,t)}};H.min=function(){var e=arguments;var t=X;var i=X;for(var n=0;n<arguments.length;n++){var r=e[n];t=Math.min(r.x,t);i=Math.min(r.y,i)}return new H(t,i)};H.max=function(){var e=arguments;var t=Z;var i=Z;for(var n=0;n<arguments.length;n++){var r=e[n];t=Math.max(r.x,t);i=Math.max(r.y,i)}return new H(t,i)};H.minPoint=function(){return new H(Z,Z)};H.maxPoint=function(){return new H(X,X)};if(Object.defineProperties){Object.defineProperties(H,{ZERO:{get:function(){return new H(0,0)}}})}be(H.prototype,["x","y"]);e.extend(H.prototype);var S=r.extend({init:function(e,t){this.width=e||0;this.height=t||0},equals:function(e){return e&&e.width===this.width&&e.height===this.height},clone:function(){return new S(this.width,this.height)},toArray:function(e){var t=l(e);var i=t?L(this.width,e):this.width;var n=t?L(this.height,e):this.height;return[i,n]}});S.create=function(e,t){if(l(e)){if(e instanceof S){return e}else if(arguments.length===1&&e.length===2){return new S(e[0],e[1])}return new S(e,t)}};if(Object.defineProperties){Object.defineProperties(S,{ZERO:{get:function(){return new S(0,0)}}})}be(S.prototype,["width","height"]);e.extend(S.prototype);var R=r.extend({init:function(e,t){if(e===void 0){e=new H}if(t===void 0){t=new S}this.setOrigin(e);this.setSize(t)},clone:function(){return new R(this.origin.clone(),this.size.clone())},equals:function(e){return e&&e.origin.equals(this.origin)&&e.size.equals(this.size)},setOrigin:function(e){this._observerField("origin",H.create(e));this.geometryChange();return this},getOrigin:function(){return this.origin},setSize:function(e){this._observerField("size",S.create(e));this.geometryChange();return this},getSize:function(){return this.size},width:function(){return this.size.width},height:function(){return this.size.height},topLeft:function(){return this.origin.clone()},bottomRight:function(){return this.origin.clone().translate(this.width(),this.height())},topRight:function(){return this.origin.clone().translate(this.width(),0)},bottomLeft:function(){return this.origin.clone().translate(0,this.height())},center:function(){return this.origin.clone().translate(this.width()/2,this.height()/2)},bbox:function(e){var t=this.topLeft().transformCopy(e);var i=this.topRight().transformCopy(e);var n=this.bottomRight().transformCopy(e);var r=this.bottomLeft().transformCopy(e);return R.fromPoints(t,i,n,r)},transformCopy:function(e){return R.fromPoints(this.topLeft().transform(e),this.bottomRight().transform(e))},expand:function(e,t){if(t===void 0){t=e}this.size.width+=2*e;this.size.height+=2*t;this.origin.translate(-e,-t);return this},expandCopy:function(e,t){return this.clone().expand(e,t)},containsPoint:function(e){var t=this.origin;var i=this.bottomRight();return!(e.x<t.x||e.y<t.y||i.x<e.x||i.y<e.y)},_isOnPath:function(e,t){var i=this.expandCopy(t,t);var n=this.expandCopy(-t,-t);return i.containsPoint(e)&&!n.containsPoint(e)}});R.fromPoints=function(){var e=H.min.apply(null,arguments);var t=H.max.apply(null,arguments);var i=new S(t.x-e.x,t.y-e.y);return new R(e,i)};R.union=function(e,t){return R.fromPoints(H.min(e.topLeft(),t.topLeft()),H.max(e.bottomRight(),t.bottomRight()))};R.intersect=function(e,t){var i={left:e.topLeft().x,top:e.topLeft().y,right:e.bottomRight().x,bottom:e.bottomRight().y};var n={left:t.topLeft().x,top:t.topLeft().y,right:t.bottomRight().x,bottom:t.bottomRight().y};if(i.left<=n.right&&n.left<=i.right&&i.top<=n.bottom&&n.top<=i.bottom){return R.fromPoints(new H(Math.max(i.left,n.left),Math.max(i.top,n.top)),new H(Math.min(i.right,n.right),Math.min(i.bottom,n.bottom)))}};e.extend(R.prototype);function we(e,t,i,n){var r=0;var a=0;if(n){r=Math.atan2(n.c*i,n.a*t);if(n.b!==0){a=Math.atan2(n.d*i,n.b*t)}}return{x:r,y:a}}var ke=Math.PI/2;var ye=r.extend({init:function(e,t){if(e===void 0){e=new H}if(t===void 0){t=0}this.setCenter(e);this.setRadius(t)},setCenter:function(e){this._observerField("center",H.create(e));this.geometryChange();return this},getCenter:function(){return this.center},equals:function(e){return e&&e.center.equals(this.center)&&e.radius===this.radius},clone:function(){return new ye(this.center.clone(),this.radius)},pointAt:function(e){return this._pointAt(B(e))},bbox:function(e){var t=this;var i=we(this.center,this.radius,this.radius,e);var n=H.maxPoint();var r=H.minPoint();for(var a=0;a<4;a++){var o=t._pointAt(i.x+a*ke).transformCopy(e);var s=t._pointAt(i.y+a*ke).transformCopy(e);var l=new H(o.x,s.y);n=H.min(n,l);r=H.max(r,l)}return R.fromPoints(n,r)},_pointAt:function(e){var t=this;var i=t.center;var n=t.radius;return new H(i.x+n*Math.cos(e),i.y+n*Math.sin(e))},containsPoint:function(e){var t=this;var i=t.center;var n=t.radius;var r=Math.pow(e.x-i.x,2)+Math.pow(e.y-i.y,2)<=Math.pow(n,2);return r},_isOnPath:function(e,t){var i=this;var n=i.center;var r=i.radius;var a=n.distanceTo(e);return r-t<=a&&a<=r+t}});be(ye.prototype,["radius"]);e.extend(ye.prototype);var g=10;function xe(e,t,i){if(i===void 0){i=g}return L(Math.abs(e-t),i)===0}function Ce(e,t,i){return e<t||xe(e,t,i)}function Se(e,t,i,n){var r=t.x-e.x;var a=n.x-i.x;var o=t.y-e.y;var s=n.y-i.y;var l=e.x-i.x;var d=e.y-i.y;var u=r*s-a*o;var c=(r*d-o*l)/u;var f=(a*d-s*l)/u;if(c>=0&&c<=1&&f>=0&&f<=1){return new H(e.x+f*r,e.y+f*o)}}var Te=r.extend({init:function(e){if(e===void 0){e=p.unit()}this._matrix=e},clone:function(){return new Te(this._matrix.clone())},equals:function(e){return e&&e._matrix.equals(this._matrix)},translate:function(e,t){this._matrix=this._matrix.multiplyCopy(p.translate(e,t));this._optionsChange();return this},scale:function(e,t,i){if(t===void 0){t=e}if(i===void 0){i=null}var n=i;if(n){n=H.create(n);this._matrix=this._matrix.multiplyCopy(p.translate(n.x,n.y))}this._matrix=this._matrix.multiplyCopy(p.scale(e,t));if(n){this._matrix=this._matrix.multiplyCopy(p.translate(-n.x,-n.y))}this._optionsChange();return this},rotate:function(e,t){var i=H.create(t)||H.ZERO;this._matrix=this._matrix.multiplyCopy(p.rotate(e,i.x,i.y));this._optionsChange();return this},multiply:function(e){var t=a(e);this._matrix=this._matrix.multiplyCopy(t);this._optionsChange();return this},matrix:function(e){if(e){this._matrix=e;this._optionsChange();return this}return this._matrix},_optionsChange:function(){this.optionsChange({field:"transform",value:this})}});e.extend(Te.prototype);function T(e){if(e===null){return null}if(e instanceof Te){return e}return new Te(e)}var De=45;var Ae=Math.pow;var c=r.extend({init:function(e,t){if(e===void 0){e=new H}if(t===void 0){t={}}this.setCenter(e);this.radiusX=t.radiusX;this.radiusY=t.radiusY||t.radiusX;this.startAngle=t.startAngle;this.endAngle=t.endAngle;this.anticlockwise=t.anticlockwise||false;this.xRotation=t.xRotation},clone:function(){return new c(this.center,{radiusX:this.radiusX,radiusY:this.radiusY,startAngle:this.startAngle,endAngle:this.endAngle,anticlockwise:this.anticlockwise})},setCenter:function(e){this._observerField("center",H.create(e));this.geometryChange();return this},getCenter:function(){return this.center},pointAt:function(e){var t=this.center;var i=B(e);return new H(t.x+this.radiusX*Math.cos(i),t.y+this.radiusY*Math.sin(i))},curvePoints:function(){var e=this;var t=this.startAngle;var i=this.anticlockwise?-1:1;var n=[this.pointAt(t)];var r=this._arcInterval();var a=r.endAngle-r.startAngle;var o=Math.ceil(a/De);var s=a/o;var l=t;var d;if(this.xRotation){d=T().rotate(this.xRotation,this.center)}for(var u=1;u<=o;u++){var c=l+i*s;var f=e._intervalCurvePoints(l,c,d);n.push(f.cp1,f.cp2,f.p2);l=c}return n},bbox:function(e){var t=this;var i=this._arcInterval();var n=i.startAngle;var r=i.endAngle;var a=we(this.center,this.radiusX,this.radiusY,e);var o=z(a.x);var s=z(a.y);var l=this.pointAt(r).transformCopy(e);var d=Me(o,n);var u=Me(s,n);var c=this.pointAt(n).transformCopy(e);var f=H.min(c,l);var h=H.max(c,l);while(d<r||u<r){var p=void 0;if(d<r){p=t.pointAt(d).transformCopy(e);d+=90}var v=void 0;if(u<r){v=t.pointAt(u).transformCopy(e);u+=90}c=new H(p.x,v.y);f=H.min(f,c);h=H.max(h,c)}return R.fromPoints(f,h)},_arcInterval:function(){var e=this;var t=e.startAngle;var i=e.endAngle;var n=e.anticlockwise;if(n){var r=t;t=i;i=r}if(t>i||n&&t===i){i+=360}return{startAngle:t,endAngle:i}},_intervalCurvePoints:function(e,t,i){var n=this.pointAt(e);var r=this.pointAt(t);var a=this._derivativeAt(e);var o=this._derivativeAt(t);var s=(B(t)-B(e))/3;var l=new H(n.x+s*a.x,n.y+s*a.y);var d=new H(r.x-s*o.x,r.y-s*o.y);if(i){n.transform(i);r.transform(i);l.transform(i);d.transform(i)}return{p1:n,cp1:l,cp2:d,p2:r}},_derivativeAt:function(e){var t=B(e);return new H(-this.radiusX*Math.sin(t),this.radiusY*Math.cos(t))},containsPoint:function(e){var t=this._arcInterval();var i=t.endAngle-t.startAngle;var n=this;var r=n.center;var a=n.radiusX;var o=n.radiusY;var s=r.distanceTo(e);var l=Math.atan2(e.y-r.y,e.x-r.x);var d=a*o/Math.sqrt(Ae(a,2)*Ae(Math.sin(l),2)+Ae(o,2)*Ae(Math.cos(l),2));var u=this.pointAt(this.startAngle).round(g);var c=this.pointAt(this.endAngle).round(g);var f=Se(r,e.round(g),u,c);var h;if(i<180){h=f&&Ce(r.distanceTo(f),s)&&Ce(s,d)}else{var p=Ee(r.x,r.y,a,o,e.x,e.y);if(p!==360){p=(360+p)%360}var v=t.startAngle<=p&&p<=t.endAngle;h=v&&Ce(s,d)||!v&&(!f||f.equals(e))}return h},_isOnPath:function(e,t){var i=this._arcInterval();var n=this.center;var r=Ee(n.x,n.y,this.radiusX,this.radiusY,e.x,e.y);if(r!==360){r=(360+r)%360}var a=i.startAngle<=r&&r<=i.endAngle;return a&&this.pointAt(r).distanceTo(e)<=t}});c.fromPoints=function(e,t,i,n,r,a,o){var s=Ie({x1:e.x,y1:e.y,x2:t.x,y2:t.y,rx:i,ry:n,largeArc:r,swipe:a,rotation:o});return new c(s.center,{startAngle:s.startAngle,endAngle:s.endAngle,radiusX:s.radiusX,radiusY:s.radiusY,xRotation:s.xRotation,anticlockwise:a===0})};be(c.prototype,["radiusX","radiusY","startAngle","endAngle","anticlockwise"]);e.extend(c.prototype);function Ee(e,t,i,n,r,a){var o=L((r-e)/i,3);var s=L((a-t)/n,3);return L(z(Math.atan2(s,o)))}function Ie(e){var t=e.x1;var i=e.y1;var n=e.x2;var r=e.y2;var a=e.rx;var o=e.ry;var s=e.largeArc;var l=e.swipe;var d=e.rotation;if(d===void 0){d=0}var u=B(d);var c=Math.cos(u);var f=Math.sin(u);var h=c*(t-n)/2+f*(i-r)/2;var p=-f*(t-n)/2+c*(i-r)/2;var v=s!==l?1:-1;var m=Math.pow(h,2);var g=Math.pow(p,2);var _=Math.pow(a,2);var b=Math.pow(o,2);var w=m/_+g/b;if(w>1){w=Math.sqrt(m/_+g/b);a=w*a;_=Math.pow(a,2);o=w*o;b=Math.pow(o,2)}var k=v*Math.sqrt((_*b-_*g-b*m)/(_*g+b*m));if(isNaN(k)){k=0}var y=k*(a*p)/o;var x=-k*(o*h)/a;var C=c*y-f*x+(t+n)/2;var S=f*y+c*x+(i+r)/2;var T=(h-y)/a;var D=(p-x)/o;var A=-(h+y)/a;var E=-(p+x)/o;var I=(D>=0?1:-1)*z(Math.acos(T/Math.sqrt(T*T+D*D)));var M=L((T*A+D*E)/(Math.sqrt(T*T+D*D)*Math.sqrt(A*A+E*E)),10);var R=(T*E-D*A>=0?1:-1)*z(Math.acos(M));if(!l&&R>0){R-=360}if(l&&R<0){R+=360}var F=I+R;var P=F>=0?1:-1;F=Math.abs(F)%360*P;return{center:new H(C,S),startAngle:I,endAngle:F,radiusX:a,radiusY:o,xRotation:d}}function Me(e,t){var i=e;while(i<t){i+=90}return i}function Re(e){var t="_"+e;return function(e){if(l(e)){this._observerField(t,H.create(e));this.geometryChange();return this}return this[t]}}function Fe(e,t){for(var i=0;i<t.length;i++){e[t[i]]=Re(t[i])}}function Pe(e,t,i){var n=z(Math.atan2(t.y-e.y,t.x-e.x));var r=i.transformCopy(T().rotate(-n,e));return r.x<e.x}function ze(e,t,i){var n=1-e;return Math.pow(n,3)*i[0][t]+3*Math.pow(n,2)*e*i[1][t]+3*Math.pow(e,2)*n*i[2][t]+Math.pow(e,3)*i[3][t]}function Be(e,t){return[-e[0][t]+3*e[1][t]-3*e[2][t]+e[3][t],3*(e[0][t]-2*e[1][t]+e[2][t]),3*(-e[0][t]+e[1][t]),e[0][t]]}var _=r.extend({init:function(e,t){if(e===void 0){e=0}if(t===void 0){t=0}this.real=e;this.img=t},add:function(e){return new _(L(this.real+e.real,g),L(this.img+e.img,g))},addConstant:function(e){return new _(this.real+e,this.img)},negate:function(){return new _(-this.real,-this.img)},multiply:function(e){return new _(this.real*e.real-this.img*e.img,this.real*e.img+this.img*e.real)},multiplyConstant:function(e){return new _(this.real*e,this.img*e)},nthRoot:function(e){var t=Math.atan2(this.img,this.real);var i=Math.sqrt(Math.pow(this.img,2)+Math.pow(this.real,2));var n=Math.pow(i,1/e);return new _(n*Math.cos(t/e),n*Math.sin(t/e))},equals:function(e){return this.real===e.real&&this.img===e.img},isReal:function(){return this.img===0}});function Le(e){return e<0?-1:1}function He(e,t,i){var n=Math.sqrt(Math.pow(t,2)-4*e*i);return[(-t+n)/(2*e),(-t-n)/(2*e)]}function Ne(e,t,i,n){if(e===0){return He(t,i,n)}var r=(3*e*i-Math.pow(t,2))/(3*Math.pow(e,2));var a=(2*Math.pow(t,3)-9*e*t*i+27*Math.pow(e,2)*n)/(27*Math.pow(e,3));var o=Math.pow(r/3,3)+Math.pow(a/2,2);var s=new _(0,1);var l=-t/(3*e);var d,u,c,f,h,p,v;if(o<0){d=new _(-a/2,Math.sqrt(-o)).nthRoot(3);u=new _(-a/2,-Math.sqrt(-o)).nthRoot(3)}else{d=-a/2+Math.sqrt(o);d=new _(Le(d)*Math.pow(Math.abs(d),1/3));u=-a/2-Math.sqrt(o);u=new _(Le(u)*Math.pow(Math.abs(u),1/3))}c=d.add(u);p=d.add(u).multiplyConstant(-1/2);v=d.add(u.negate()).multiplyConstant(Math.sqrt(3)/2);f=p.add(s.multiply(v));h=p.add(s.negate().multiply(v));var m=[];if(c.isReal()){m.push(L(c.real+l,g))}if(f.isReal()){m.push(L(f.real+l,g))}if(h.isReal()){m.push(L(h.real+l,g))}return m}function Oe(e,t,i,n,r){var a=Be(e,n);var o=Ne(a[0],a[1],a[2],a[3]-t[n]);var s;for(var l=0;l<o.length;l++){if(0<=o[l]&&o[l]<=1){s=ze(o[l],i,e);if(Math.abs(s-t[i])<=r){return true}}}}function Ve(e,t,i){var n=Be(e,"x");var r=Ne(n[0],n[1],n[2],n[3]-t.x);var a,o;var s=0;for(var l=0;l<r.length;l++){a=ze(r[l],"y",e);o=xe(a,t.y)||a>t.y;if(o&&((r[l]===0||r[l]===1)&&i.bottomRight().x>t.x||0<r[l]&&r[l]<1)){s++}}return s}function We(e,t,i){var n;if(e.x!==t.x){var r=Math.min(e.x,t.x);var a=Math.max(e.x,t.x);var o=Math.min(e.y,t.y);var s=Math.max(e.y,t.y);var l=r<=i.x&&i.x<a;if(o===s){n=i.y<=o&&l}else{n=l&&(s-o)*((e.x-t.x)*(e.y-t.y)>0?i.x-r:a-i.x)/(a-r)+o-i.y>=0}}return n?1:0}var Ue=r.extend({init:function(e,t,i){this.anchor(e||new H);this.controlIn(t);this.controlOut(i)},bboxTo:function(e,t){var i=this.anchor().transformCopy(t);var n=e.anchor().transformCopy(t);var r;if(this.controlOut()&&e.controlIn()){r=this._curveBoundingBox(i,this.controlOut().transformCopy(t),e.controlIn().transformCopy(t),n)}else{r=this._lineBoundingBox(i,n)}return r},_lineBoundingBox:function(e,t){return R.fromPoints(e,t)},_curveBoundingBox:function(e,t,i,n){var r=[e,t,i,n];var a=this._curveExtremesFor(r,"x");var o=this._curveExtremesFor(r,"y");var s=je([a.min,a.max,e.x,n.x]);var l=je([o.min,o.max,e.y,n.y]);return R.fromPoints(new H(s.min,l.min),new H(s.max,l.max))},_curveExtremesFor:function(e,t){var i=this._curveExtremes(e[0][t],e[1][t],e[2][t],e[3][t]);return{min:ze(i.min,t,e),max:ze(i.max,t,e)}},_curveExtremes:function(e,t,i,n){var r=e-3*t+3*i-n;var a=-2*(e-2*t+i);var o=e-t;var s=Math.sqrt(a*a-4*r*o);var l=0;var d=1;if(r===0){if(a!==0){l=d=-o/a}}else if(!isNaN(s)){l=(-a+s)/(2*r);d=(-a-s)/(2*r)}var u=Math.max(Math.min(l,d),0);if(u<0||u>1){u=0}var c=Math.min(Math.max(l,d),1);if(c>1||c<0){c=1}return{min:u,max:c}},_intersectionsTo:function(e,t){var i;if(this.controlOut()&&e.controlIn()){i=Ve([this.anchor(),this.controlOut(),e.controlIn(),e.anchor()],t,this.bboxTo(e))}else{i=We(this.anchor(),e.anchor(),t)}return i},_isOnCurveTo:function(e,t,i,n){var r=this.bboxTo(e).expand(i,i);if(r.containsPoint(t)){var a=this.anchor();var o=this.controlOut();var s=e.controlIn();var l=e.anchor();if(n==="start"&&a.distanceTo(t)<=i){return!Pe(a,o,t)}else if(n==="end"&&l.distanceTo(t)<=i){return!Pe(l,s,t)}var d=[a,o,s,l];if(Oe(d,t,"x","y",i)||Oe(d,t,"y","x",i)){return true}var u=T().rotate(45,t);var c=[a.transformCopy(u),o.transformCopy(u),s.transformCopy(u),l.transformCopy(u)];return Oe(c,t,"x","y",i)||Oe(c,t,"y","x",i)}},_isOnLineTo:function(e,t,i){var n=this.anchor();var r=e.anchor();var a=z(Math.atan2(r.y-n.y,r.x-n.x));var o=new R([n.x,n.y-i/2],[n.distanceTo(r),i]);return o.containsPoint(t.transformCopy(T().rotate(-a,n)))},_isOnPathTo:function(e,t,i,n){var r;if(this.controlOut()&&e.controlIn()){r=this._isOnCurveTo(e,t,i/2,n)}else{r=this._isOnLineTo(e,t,i)}return r}});Fe(Ue.prototype,["anchor","controlIn","controlOut"]);e.extend(Ue.prototype);function je(e){var t=e.length;var i=X;var n=Z;for(var r=0;r<t;r++){n=Math.max(n,e[r]);i=Math.min(i,e[r])}return{min:i,max:n}}var Ge={Circle:ye,Arc:c,Rect:R,Point:H,Segment:Ue,Matrix:p,Size:S,toMatrix:a,Transformation:Te,transform:T};var qe=/matrix\((.*)\)/;function $e(e){var t=e.match(qe);if(t===null||t.length!==2){return p.unit()}var i=t[1].split(",").map(function(e){return parseFloat(e)});return new(Function.prototype.bind.apply(p,[null].concat(i)))}function Ke(e){var t=getComputedStyle(e).transform;if(t==="none"){return p.unit()}return $e(t)}function Ye(e){if(!e){return p.unit()}var t=Ke(e);var i=e.parentElement;while(i){var n=Ke(i);t=t.multiplyCopy(n);i=i.parentElement}t.b=t.c=t.e=t.f=0;return t}var Qe={append:I,arabicToRoman:q,createPromise:A,defined:l,definitionId:Y,deg:z,encodeBase64:ie,eventCoordinates:ne,eventElement:re,isTransparent:ae,last:u,limitValue:oe,mergeSort:se,promiseAll:E,rad:B,round:L,valueOrDefault:de,bindEvents:ue,elementOffset:ce,elementSize:pe,elementStyles:fe,unbindEvents:ve,elementPadding:me,elementScale:Ye,DEG_TO_RAD:Q,MAX_NUM:X,MIN_NUM:Z};var Xe={}.toString;var Ze=r.extend({init:function(e,t){var i=this;if(t===void 0){t=""}this.prefix=t;for(var n in e){var r=e[n];r=i._wrap(r,n);i[n]=r}},get:function(e){var t=e.split(".");var i=this;while(t.length&&i){var n=t.shift();i=i[n]}return i},set:function(e,t){var i=this.get(e);if(i!==t){this._set(e,this._wrap(t,e));this.optionsChange({field:this.prefix+e,value:t})}},_set:function(e,t){var i=this;var n=e.indexOf(".")>=0;var r=this;var a=e;if(n){var o=a.split(".");var s=this.prefix;while(o.length>1){a=o.shift();s+=a+".";var l=r[a];if(!l){l=new Ze({},s);l.addObserver(i);r[a]=l}r=l}a=o[0]}r._clear(a);r[a]=t},_clear:function(e){var t=this[e];if(t&&t.removeObserver){t.removeObserver(this)}},_wrap:function(e,t){var i=Xe.call(e);var n=e;if(n!==null&&l(n)&&i==="[object Object]"){if(!(e instanceof Ze)&&!(e instanceof r)){n=new Ze(n,this.prefix+t+".")}n.addObserver(this)}return n}});e.extend(Ze.prototype);var n=r.extend({init:function(e){this._initOptions(e)},_initOptions:function(e){if(e===void 0){e={}}var t=e.clip;var i=e.transform;if(i){e.transform=T(i)}if(t&&!t.id){t.id=Y()}this.options=new Ze(e);this.options.addObserver(this)},transform:function(e){if(l(e)){this.options.set("transform",T(e))}else{return this.options.get("transform")}},parentTransform:function(){var e=this;var t;while(e.parent){e=e.parent;var i=e.transform();if(i){t=i.matrix().multiplyCopy(t||p.unit())}}if(t){return T(t)}},currentTransform:function(e){if(e===void 0){e=this.parentTransform()}var t=this.transform();var i=a(t);var n=a(e);var r;if(i&&n){r=n.multiplyCopy(i)}else{r=i||n}if(r){return T(r)}},visible:function(e){if(l(e)){this.options.set("visible",e);return this}return this.options.get("visible")!==false},clip:function(e){var t=this.options;if(l(e)){if(e&&!e.id){e.id=Y()}t.set("clip",e);return this}return t.get("clip")},opacity:function(e){if(l(e)){this.options.set("opacity",e);return this}return de(this.options.get("opacity"),1)},clippedBBox:function(e){var t=this._clippedBBox(e);if(t){var i=this.clip();return i?R.intersect(t,i.bbox(e)):t}},containsPoint:function(e,t){if(this.visible()){var i=this.currentTransform(t);var n=e;if(i){n=e.transformCopy(i.matrix().invert())}return this._hasFill()&&this._containsPoint(n)||this._isOnPath&&this._hasStroke()&&this._isOnPath(n)}return false},_hasFill:function(){var e=this.options.fill;return e&&!ae(e.color)},_hasStroke:function(){var e=this.options.stroke;return e&&e.width>0&&!ae(e.color)},_clippedBBox:function(e){return this.bbox(e)}});n.prototype.nodeType="Element";e.extend(n.prototype);var Je="Gradient";var et={extend:function(e){e.fill=this.fill;e.stroke=this.stroke},fill:function(e,t){var i=this.options;if(l(e)){if(e&&e.nodeType!==Je){var n={color:e};if(l(t)){n.opacity=t}i.set("fill",n)}else{i.set("fill",e)}return this}return i.get("fill")},stroke:function(e,t,i){if(l(e)){this.options.set("stroke.color",e);if(l(t)){this.options.set("stroke.width",t)}if(l(i)){this.options.set("stroke.opacity",i)}return this}return this.options.get("stroke")}};var tt=p.IDENTITY.toString();var it={extend:function(e){e.bbox=this.bbox;e.geometryChange=this.geometryChange},bbox:function(e){var t=a(this.currentTransform(e));var i=t?t.toString():tt;var n;if(this._bboxCache&&this._matrixHash===i){n=this._bboxCache.clone()}else{n=this._bbox(t);this._bboxCache=n?n.clone():null;this._matrixHash=i}var r=this.options.get("stroke.width");if(r&&n){n.expand(r/2)}return n},geometryChange:function(){delete this._bboxCache;this.trigger("geometryChange",{element:this})}};function nt(e){var t="_"+e;return function(e){if(l(e)){this._observerField(t,e);this.geometryChange();return this}return this[t]}}function rt(e,t){for(var i=0;i<t.length;i++){e[t[i]]=nt(t[i])}}var at="#000";var ot=n.extend({init:function(e,t){if(e===void 0){e=new ye}if(t===void 0){t={}}n.fn.init.call(this,t);this.geometry(e);if(!l(this.options.stroke)){this.stroke(at)}},rawBBox:function(){return this._geometry.bbox()},_bbox:function(e){return this._geometry.bbox(e)},_containsPoint:function(e){return this.geometry().containsPoint(e)},_isOnPath:function(e){return this.geometry()._isOnPath(e,this.options.stroke.width/2)}});ot.prototype.nodeType="Circle";et.extend(ot.prototype);it.extend(ot.prototype);rt(ot.prototype,["geometry"]);var st=[].push;var lt=[].pop;var dt=[].splice;var ut=[].shift;var ct=[].slice;var ft=[].unshift;var ht=r.extend({init:function(e){if(e===void 0){e=[]}this.length=0;this._splice(0,e.length,e)},elements:function(e){if(e){this._splice(0,this.length,e);this._change();return this}return this.slice(0)},push:function(){var e=arguments;var t=st.apply(this,e);this._add(e);return t},slice:function(){return ct.call(this)},pop:function(){var e=this.length;var t=lt.apply(this);if(e){this._remove([t])}return t},splice:function(e,t){var i=ct.call(arguments,2);var n=this._splice(e,t,i);this._change();return n},shift:function(){var e=this.length;var t=ut.apply(this);if(e){this._remove([t])}return t},unshift:function(){var e=arguments;var t=ft.apply(this,e);this._add(e);return t},indexOf:function(e){var t=this;var i=this.length;for(var n=0;n<i;n++){if(t[n]===e){return n}}return-1},_splice:function(e,t,i){var n=dt.apply(this,[e,t].concat(i));this._clearObserver(n);this._setObserver(i);return n},_add:function(e){this._setObserver(e);this._change()},_remove:function(e){this._clearObserver(e);this._change()},_setObserver:function(e){var t=this;for(var i=0;i<e.length;i++){e[i].addObserver(t)}},_clearObserver:function(e){var t=this;for(var i=0;i<e.length;i++){e[i].removeObserver(t)}},_change:function(){}});e.extend(ht.prototype);var pt=ht.extend({_change:function(){this.geometryChange()}});function vt(e,t,i){var n;for(var r=0;r<e.length;r++){var a=e[r];if(a.visible()){var o=t?a.bbox(i):a.rawBBox();if(o){if(n){n=R.union(n,o)}else{n=o}}}}return n}function mt(e,t){var i;for(var n=0;n<e.length;n++){var r=e[n];if(r.visible()){var a=r.clippedBBox(t);if(a){if(i){i=R.union(i,a)}else{i=a}}}}return i}var gt=n.extend({init:function(e){n.fn.init.call(this,e);this.paths=new pt;this.paths.addObserver(this);if(!l(this.options.stroke)){this.stroke("#000")}},moveTo:function(e,t){var i=new F;i.moveTo(e,t);this.paths.push(i);return this},lineTo:function(e,t){if(this.paths.length>0){u(this.paths).lineTo(e,t)}return this},curveTo:function(e,t,i){if(this.paths.length>0){u(this.paths).curveTo(e,t,i)}return this},arc:function(e,t,i,n,r){if(this.paths.length>0){u(this.paths).arc(e,t,i,n,r)}return this},arcTo:function(e,t,i,n,r,a){if(this.paths.length>0){u(this.paths).arcTo(e,t,i,n,r,a)}return this},close:function(){if(this.paths.length>0){u(this.paths).close()}return this},_bbox:function(e){return vt(this.paths,true,e)},rawBBox:function(){return vt(this.paths,false)},_containsPoint:function(e){var t=this.paths;for(var i=0;i<t.length;i++){if(t[i]._containsPoint(e)){return true}}return false},_isOnPath:function(e){var t=this.paths;var i=this.options.stroke.width;for(var n=0;n<t.length;n++){if(t[n]._isOnPath(e,i)){return true}}return false},_clippedBBox:function(e){return mt(this.paths,this.currentTransform(e))}});gt.prototype.nodeType="MultiPath";et.extend(gt.prototype);it.extend(gt.prototype);var _t={l:function(e,t){var i=t.parameters;var n=t.position;for(var r=0;r<i.length;r+=2){var a=new H(i[r],i[r+1]);if(t.isRelative){a.translateWith(n)}e.lineTo(a.x,a.y);n.x=a.x;n.y=a.y}},c:function(e,t){var i=t.parameters;var n=t.position;for(var r=0;r<i.length;r+=6){var a=new H(i[r],i[r+1]);var o=new H(i[r+2],i[r+3]);var s=new H(i[r+4],i[r+5]);if(t.isRelative){o.translateWith(n);a.translateWith(n);s.translateWith(n)}e.curveTo(a,o,s);n.x=s.x;n.y=s.y}},v:function(e,t){var i=t.isRelative?0:t.position.x;bt(t.parameters,true,i);this.l(e,t)},h:function(e,t){var i=t.isRelative?0:t.position.y;bt(t.parameters,false,i);this.l(e,t)},a:function(e,t){var i=t.parameters;var n=t.position;for(var r=0;r<i.length;r+=7){var a=i[r];var o=i[r+1];var s=i[r+2];var l=i[r+3];var d=i[r+4];var u=new H(i[r+5],i[r+6]);if(t.isRelative){u.translateWith(n)}if(n.x!==u.x||n.y!==u.y){e.arcTo(u,a,o,l,d,s);n.x=u.x;n.y=u.y}}},s:function(e,t){var i=t.parameters;var n=t.position;var r=t.previousCommand;var a;if(r==="s"||r==="c"){a=u(u(e.paths).segments).controlIn()}for(var o=0;o<i.length;o+=4){var s=new H(i[o],i[o+1]);var l=new H(i[o+2],i[o+3]);var d=void 0;if(t.isRelative){s.translateWith(n);l.translateWith(n)}if(a){d=wt(a,n)}else{d=n.clone()}a=s;e.curveTo(d,s,l);n.x=l.x;n.y=l.y}},q:function(e,t){var i=t.parameters;var n=t.position;for(var r=0;r<i.length;r+=4){var a=new H(i[r],i[r+1]);var o=new H(i[r+2],i[r+3]);if(t.isRelative){a.translateWith(n);o.translateWith(n)}var s=yt(n,a,o);e.curveTo(s.controlOut,s.controlIn,o);n.x=o.x;n.y=o.y}},t:function(e,t){var i=t.parameters;var n=t.position;var r=t.previousCommand;var a;if(r==="q"||r==="t"){var o=u(u(e.paths).segments);a=o.controlIn().clone().translateWith(n.scaleCopy(-1/3)).scale(3/2)}for(var s=0;s<i.length;s+=2){var l=new H(i[s],i[s+1]);if(t.isRelative){l.translateWith(n)}if(a){a=wt(a,n)}else{a=n.clone()}var d=yt(n,a,l);e.curveTo(d.controlOut,d.controlIn,l);n.x=l.x;n.y=l.y}}};function bt(e,t,i){var n=t?0:1;for(var r=0;r<e.length;r+=2){e.splice(r+n,0,i)}}function wt(e,t){if(e&&t){return t.scaleCopy(2).translate(-e.x,-e.y)}}var kt=1/3;function yt(e,t,i){var n=t.clone().scale(2/3);return{controlOut:n.clone().translateWith(e.scaleCopy(kt)),controlIn:n.translateWith(i.scaleCopy(kt))}}var xt=/([a-df-z]{1})([^a-df-z]*)(z)?/gi;var Ct=/[,\s]?([+\-]?(?:\d*\.\d+|\d+)(?:[eE][+\-]?\d+)?)/g;var St="m";var Tt="z";function Dt(e){var i=[];e.replace(Ct,function(e,t){i.push(parseFloat(t))});return i}var At=r.extend({parse:function(e,t){var s=new gt(t);var l=new H;var d;e.replace(xt,function(e,t,i,n){var r=t.toLowerCase();var a=r===t;var o=Dt(i.trim());if(r===St){if(a){l.x+=o[0];l.y+=o[1]}else{l.x=o[0];l.y=o[1]}s.moveTo(l.x,l.y);if(o.length>2){r="l";o.splice(0,2)}}if(_t[r]){_t[r](s,{parameters:o,position:l,isRelative:a,previousCommand:d});if(n&&n.toLowerCase()===Tt){s.close()}}else if(r!==St){throw new Error("Error while parsing SVG path. Unsupported command: "+r)}d=r});return s}});At.current=new At;var F=n.extend({init:function(e){n.fn.init.call(this,e);this.segments=new pt;this.segments.addObserver(this);if(!l(this.options.stroke)){this.stroke("#000");if(!l(this.options.stroke.lineJoin)){this.options.set("stroke.lineJoin","miter")}}},moveTo:function(e,t){this.suspend();this.segments.elements([]);this.resume();this.lineTo(e,t);return this},lineTo:function(e,t){var i=l(t)?new H(e,t):e;var n=new Ue(i);this.segments.push(n);return this},curveTo:function(e,t,i){if(this.segments.length>0){var n=u(this.segments);var r=new Ue(i,t);this.suspend();n.controlOut(e);this.resume();this.segments.push(r)}return this},arc:function(e,t,i,n,r){if(this.segments.length>0){var a=u(this.segments);var o=a.anchor();var s=B(e);var l=new H(o.x-i*Math.cos(s),o.y-n*Math.sin(s));var d=new c(l,{startAngle:e,endAngle:t,radiusX:i,radiusY:n,anticlockwise:r});this._addArcSegments(d)}return this},arcTo:function(e,t,i,n,r,a){if(this.segments.length>0){var o=u(this.segments);var s=o.anchor();var l=c.fromPoints(s,e,t,i,n,r,a);this._addArcSegments(l)}return this},_addArcSegments:function(e){var t=this;this.suspend();var i=e.curvePoints();for(var n=1;n<i.length;n+=3){t.curveTo(i[n],i[n+1],i[n+2])}this.resume();this.geometryChange()},close:function(){this.options.closed=true;this.geometryChange();return this},rawBBox:function(){return this._bbox()},_containsPoint:function(e){var t=this.segments;var i=t.length;var n=0;var r,a;for(var o=1;o<i;o++){r=t[o-1];a=t[o];n+=r._intersectionsTo(a,e)}if(this.options.closed||!t[0].anchor().equals(t[i-1].anchor())){n+=We(t[0].anchor(),t[i-1].anchor(),e)}return n%2!==0},_isOnPath:function(e,t){var i=this.segments;var n=i.length;var r=t||this.options.stroke.width;if(n>1){if(i[0]._isOnPathTo(i[1],e,r,"start")){return true}for(var a=2;a<=n-2;a++){if(i[a-1]._isOnPathTo(i[a],e,r)){return true}}if(i[n-2]._isOnPathTo(i[n-1],e,r,"end")){return true}}return false},_bbox:function(e){var t=this.segments;var i=t.length;var n;if(i===1){var r=t[0].anchor().transformCopy(e);n=new R(r,S.ZERO)}else if(i>0){for(var a=1;a<i;a++){var o=t[a-1].bboxTo(t[a],e);if(n){n=R.union(n,o)}else{n=o}}}return n}});F.fromRect=function(e,t){return new F(t).moveTo(e.topLeft()).lineTo(e.topRight()).lineTo(e.bottomRight()).lineTo(e.bottomLeft()).close()};F.fromPoints=function(e,t){if(e){var i=new F(t);for(var n=0;n<e.length;n++){var r=H.create(e[n]);if(r){if(n===0){i.moveTo(r)}else{i.lineTo(r)}}}return i}};F.fromArc=function(e,t){var i=new F(t);var n=e.startAngle;var r=e.pointAt(n);i.moveTo(r.x,r.y);i.arc(n,e.endAngle,e.radiusX,e.radiusY,e.anticlockwise);return i};F.prototype.nodeType="Path";et.extend(F.prototype);it.extend(F.prototype);F.parse=function(e,t){return At.current.parse(e,t)};var Et="#000";var It=n.extend({init:function(e,t){if(e===void 0){e=new c}if(t===void 0){t={}}n.fn.init.call(this,t);this.geometry(e);if(!l(this.options.stroke)){this.stroke(Et)}},_bbox:function(e){return this._geometry.bbox(e)},rawBBox:function(){return this.geometry().bbox()},toPath:function(){var e=new F;var t=this.geometry().curvePoints();if(t.length>0){e.moveTo(t[0].x,t[0].y);for(var i=1;i<t.length;i+=3){e.curveTo(t[i],t[i+1],t[i+2])}}return e},_containsPoint:function(e){return this.geometry().containsPoint(e)},_isOnPath:function(e){return this.geometry()._isOnPath(e,this.options.stroke.width/2)}});It.prototype.nodeType="Arc";et.extend(It.prototype);it.extend(It.prototype);rt(It.prototype,["geometry"]);var Mt="12px sans-serif";var Rt="#000";var Ft=n.extend({init:function(e,t,i){if(t===void 0){t=new H}if(i===void 0){i={}}n.fn.init.call(this,i);this.content(e);this.position(t);if(!this.options.font){this.options.font=Mt}if(!l(this.options.fill)){this.fill(Rt)}},content:function(e){if(l(e)){this.options.set("content",e);return this}return this.options.get("content")},measure:function(){var e=x.measureText(this.content(),{font:this.options.get("font")});return e},rect:function(){var e=this.measure();var t=this.position().clone();return new R(t,[e.width,e.height])},bbox:function(e){var t=a(this.currentTransform(e));return this.rect().bbox(t)},rawBBox:function(){return this.rect().bbox()},_containsPoint:function(e){return this.rect().containsPoint(e)}});Ft.prototype.nodeType="Text";et.extend(Ft.prototype);Fe(Ft.prototype,["position"]);var Pt=n.extend({init:function(e,t,i){if(t===void 0){t=new R}if(i===void 0){i={}}n.fn.init.call(this,i);this.src(e);this.rect(t)},src:function(e){if(l(e)){this.options.set("src",e);return this}return this.options.get("src")},bbox:function(e){var t=a(this.currentTransform(e));return this._rect.bbox(t)},rawBBox:function(){return this._rect.bbox()},_containsPoint:function(e){return this._rect.containsPoint(e)},_hasFill:function(){return this.src()}});Pt.prototype.nodeType="Image";rt(Pt.prototype,["rect"]);var zt={extend:function(e,r){e.traverse=function(e){var t=this[r];for(var i=0;i<t.length;i++){var n=t[i];if(n.traverse){n.traverse(e)}else{e(n)}}return this}}};var P=n.extend({init:function(e){n.fn.init.call(this,e);this.children=[]},childrenChange:function(e,t,i){this.trigger("childrenChange",{action:e,items:t,index:i})},append:function(){I(this.children,arguments);this._reparent(arguments,this);this.childrenChange("add",arguments);return this},insert:function(e,t){this.children.splice(e,0,t);t.parent=this;this.childrenChange("add",[t],e);return this},insertAt:function(e,t){return this.insert(t,e)},remove:function(e){var t=this.children.indexOf(e);if(t>=0){this.children.splice(t,1);e.parent=null;this.childrenChange("remove",[e],t)}return this},removeAt:function(e){if(0<=e&&e<this.children.length){var t=this.children[e];this.children.splice(e,1);t.parent=null;this.childrenChange("remove",[t],e)}return this},clear:function(){var e=this.children;this.children=[];this._reparent(e,null);this.childrenChange("remove",e,0);return this},bbox:function(e){return vt(this.children,true,this.currentTransform(e))},rawBBox:function(){return vt(this.children,false)},_clippedBBox:function(e){return mt(this.children,this.currentTransform(e))},currentTransform:function(e){return n.prototype.currentTransform.call(this,e)||null},containsPoint:function(e,t){if(this.visible()){var i=this.children;var n=this.currentTransform(t);for(var r=0;r<i.length;r++){if(i[r].containsPoint(e,n)){return true}}}return false},_reparent:function(e,t){var i=this;for(var n=0;n<e.length;n++){var r=e[n];var a=r.parent;if(a&&a!==i&&a.remove){a.remove(r)}r.parent=t}}});P.prototype.nodeType="Group";zt.extend(P.prototype,"children");function Bt(e,t,i){var n=i.transform()||T();var r=n.matrix();r.e+=e.x-t.origin.x;r.f+=e.y-t.origin.y;n.matrix(r);i.transform(n)}function Lt(e,t,i,n,r){var a;if(i==="start"){a=t.origin[n]}else if(i==="end"){a=t.origin[n]+t.size[r]-e}else{a=t.origin[n]+(t.size[r]-e)/2}return a}function Ht(e,t,i,n,r){var a;if(i==="start"){a=t.origin[n]+t.size[r]-e}else if(i==="end"){a=t.origin[n]}else{a=t.origin[n]+(t.size[r]-e)/2}return a}var Nt={alignContent:"start",justifyContent:"start",alignItems:"start",spacing:0,orientation:"horizontal",lineSpacing:0,wrap:true,revers:false};var Ot=function(e,t){e.forEach(t)};var Vt=function(e,t){var i=e.length;for(var n=i-1;n>=0;n--){t(e[n],n)}};var Wt=P.extend({init:function(e,t){P.fn.init.call(this,w.extend({},Nt,t));this._rect=e;this._fieldMap={}},rect:function(e){if(e){this._rect=e;return this}return this._rect},_initMap:function(){var e=this.options;var t=this._fieldMap;if(e.orientation==="horizontal"){t.sizeField="width";t.groupsSizeField="height";t.groupAxis="x";t.groupsAxis="y"}else{t.sizeField="height";t.groupsSizeField="width";t.groupAxis="y";t.groupsAxis="x"}if(e.reverse){this.forEach=Vt;this.justifyAlign=Ht}else{this.forEach=Ot;this.justifyAlign=Lt}},reflow:function(){var e=this;if(!this._rect||this.children.length===0){return}this._initMap();if(this.options.transform){this.transform(null)}var n=this.options;var t=this._rect;var i=this._initGroups();var r=i.groups;var a=i.groupsSize;var o=this._fieldMap;var s=o.sizeField;var l=o.groupsSizeField;var d=o.groupAxis;var u=o.groupsAxis;var c=new H;var f=new H;var h=new S;var p=Lt(a,t,n.alignContent,u,l);var v,m,g;var _=function(e,t){var i=m.elements[t];f[d]=v;f[u]=Lt(e.size[l],g,n.alignItems,u,l);Bt(f,e,i);v+=e.size[s]+n.spacing};for(var b=0;b<r.length;b++){m=r[b];c[d]=v=e.justifyAlign(m.size,t,n.justifyContent,d,s);c[u]=p;h[s]=m.size;h[l]=m.lineSize;g=new R(c,h);e.forEach(m.bboxes,_);p+=m.lineSize+n.lineSpacing}if(!n.wrap&&m.size>t.size[s]){var w=t.size[s]/g.size[s];var k=g.topLeft().scale(w,w);var y=g.size[l]*w;var x=Lt(y,t,n.alignContent,u,l);var C=T();if(d==="x"){C.translate(t.origin.x-k.x,x-k.y)}else{C.translate(x-k.x,t.origin.y-k.y)}C.scale(w,w);this.transform(C)}},_initGroups:function(){var e=this;var t=this;var i=t.options;var n=t.children;var r=i.lineSpacing;var a=i.wrap;var o=i.spacing;var s=this._fieldMap.sizeField;var l=this._newGroup();var d=[];var u=function(){d.push(l);c+=l.lineSize+r};var c=-r;for(var f=0;f<n.length;f++){var h=n[f];var p=n[f].clippedBBox();if(h.visible()&&p){if(a&&l.size+p.size[s]+o>e._rect.size[s]){if(l.bboxes.length===0){e._addToGroup(l,p,h);u();l=e._newGroup()}else{u();l=e._newGroup();e._addToGroup(l,p,h)}}else{e._addToGroup(l,p,h)}}}if(l.bboxes.length){u()}return{groups:d,groupsSize:c}},_addToGroup:function(e,t,i){e.size+=t.size[this._fieldMap.sizeField]+this.options.spacing;e.lineSize=Math.max(t.size[this._fieldMap.groupsSizeField],e.lineSize);e.bboxes.push(t);e.elements.push(i)},_newGroup:function(){return{lineSize:0,size:-this.options.spacing,bboxes:[],elements:[]}}});var Ut=n.extend({init:function(e,t){if(e===void 0){e=new R}if(t===void 0){t={}}n.fn.init.call(this,t);this.geometry(e);if(!l(this.options.stroke)){this.stroke("#000")}},_bbox:function(e){return this._geometry.bbox(e)},rawBBox:function(){return this._geometry.bbox()},_containsPoint:function(e){return this._geometry.containsPoint(e)},_isOnPath:function(e){return this.geometry()._isOnPath(e,this.options.stroke.width/2)}});Ut.prototype.nodeType="Rect";et.extend(Ut.prototype);it.extend(Ut.prototype);rt(Ut.prototype,["geometry"]);function jt(e,t,i,n,r){for(var a=0;a<e.length;a++){var o=e[a].clippedBBox();if(o){var s=o.origin.clone();s[n]=Lt(o.size[r],t,i||"start",n,r);Bt(s,o,e[a])}}}function Gt(e,t,i){jt(e,t,i,"x","width")}function qt(e,t,i){jt(e,t,i,"y","height")}function $t(e,t,i,n){if(e.length>1){var r=new H;var a=e[0].bbox;for(var o=1;o<e.length;o++){var s=e[o].element;var l=e[o].bbox;r[t]=a.origin[t]+a.size[n];r[i]=l.origin[i];Bt(r,l,s);l.origin[t]=r[t];a=l}}}function Kt(e){var t=[];for(var i=0;i<e.length;i++){var n=e[i];var r=n.clippedBBox();if(r){t.push({element:n,bbox:r})}}return t}function Yt(e){$t(Kt(e),"x","y","width")}function Qt(e){$t(Kt(e),"y","x","height")}function Xt(e,t,i){var n=t.size[i];var r=[];var a=[];var o=0;var s,l;var d=function(){a.push({element:s,bbox:l})};for(var u=0;u<e.length;u++){s=e[u];l=s.clippedBBox();if(l){var c=l.size[i];if(o+c>n){if(a.length){r.push(a);a=[];d();o=c}else{d();r.push(a);a=[];o=0}}else{d();o+=c}}}if(a.length){r.push(a)}return r}function Zt(e,t,i,n,r){var a=Xt(e,t,r);var o=t.origin.clone();var s=[];for(var l=0;l<a.length;l++){var d=a[l];var u=d[0];o[n]=u.bbox.origin[n];Bt(o,u.bbox,u.element);u.bbox.origin[i]=o[i];$t(d,i,n,r);s.push([]);for(var c=0;c<d.length;c++){s[l].push(d[c].element)}}return s}function Jt(e,t){return Zt(e,t,"x","y","width")}function ei(e,t){return Zt(e,t,"y","x","height")}function ti(e,t){var i=e.clippedBBox();if(i){var n=i.size;var r=t.size;if(r.width<n.width||r.height<n.height){var a=Math.min(r.width/n.width,r.height/n.height);var o=e.transform()||T();o.scale(a,a);e.transform(o)}}}var ii=ht.extend({_change:function(){this.optionsChange({field:"stops"})}});function ni(t){return function(e){if(l(e)){this.options.set(t,e);return this}return this.options.get(t)}}function ri(e,t){for(var i=0;i<t.length;i++){e[t[i]]=ni(t[i])}}var o=r.extend({init:function(e,t,i){this.options=new Ze({offset:e,color:t,opacity:l(i)?i:1});this.options.addObserver(this)}});o.create=function(e){if(l(e)){var t;if(e instanceof o){t=e}else if(e.length>1){t=new o(e[0],e[1],e[2])}else{t=new o(e.offset,e.color,e.opacity)}return t}};ri(o.prototype,["offset","color","opacity"]);e.extend(o.prototype);var t=r.extend({init:function(e){if(e===void 0){e={}}this.stops=new ii(this._createStops(e.stops));this.stops.addObserver(this);this._userSpace=e.userSpace;this.id=Y()},userSpace:function(e){if(l(e)){this._userSpace=e;this.optionsChange();return this}return this._userSpace},_createStops:function(e){if(e===void 0){e=[]}var t=[];for(var i=0;i<e.length;i++){t.push(o.create(e[i]))}return t},addStop:function(e,t,i){this.stops.push(new o(e,t,i))},removeStop:function(e){var t=this.stops.indexOf(e);if(t>=0){this.stops.splice(t,1)}}});t.prototype.nodeType="Gradient";e.extend(t.prototype);w.extend(t.prototype,{optionsChange:function(e){this.trigger("optionsChange",{field:"gradient"+(e?"."+e.field:""),value:this})},geometryChange:function(){this.optionsChange()}});var ai=t.extend({init:function(e){if(e===void 0){e={}}t.fn.init.call(this,e);this.start(e.start||new H);this.end(e.end||new H(1,0))}});Fe(ai.prototype,["start","end"]);var oi=t.extend({init:function(e){if(e===void 0){e={}}t.fn.init.call(this,e);this.center(e.center||new H);this._radius=l(e.radius)?e.radius:1;this._fallbackFill=e.fallbackFill},radius:function(e){if(l(e)){this._radius=e;this.geometryChange();return this}return this._radius},fallbackFill:function(e){if(l(e)){this._fallbackFill=e;this.optionsChange();return this}return this._fallbackFill}});Fe(oi.prototype,["center"]);function si(e){return.5-Math.cos(e*Math.PI)/2}function li(e){return e}function di(e,t,i,n){var r=1.70158,a=0,o=n;if(e===0){return i}if(e===1){return i+n}if(!a){a=.5}if(o<Math.abs(n)){o=n;r=a/4}else{r=a/(2*Math.PI)*Math.asin(n/o)}return o*Math.pow(2,-10*e)*Math.sin((Number(e)-r)*(1.1*Math.PI)/a)+n+i}var ui={swing:si,linear:li,easeOutElastic:di};var ci=r.extend({init:function(){this._items=[]},register:function(e,t){this._items.push({name:e,type:t})},create:function(e,t){var i=this._items;var n;if(t&&t.type){var r=t.type.toLowerCase();for(var a=0;a<i.length;a++){if(i[a].name.toLowerCase()===r){n=i[a];break}}}if(n){return new n.type(e,t)}}});ci.current=new ci;var fi=Date.now||function(){return(new Date).getTime()};var hi=r.extend({init:function(e,t){this.options=w.extend({},this.options,t);this.element=e},setup:function(){},step:function(){},play:function(){var a=this;var e=this.options;var o=e.duration;var t=e.delay;if(t===void 0){t=0}var s=ui[e.easing];var l=fi()+t;var d=l+o;if(o===0){this.step(1);this.abort()}else{setTimeout(function(){var r=function(){if(a._stopped){return}var e=fi();var t=oe(e-l,0,o);var i=t/o;var n=s(i,t,0,1,o);a.step(n);if(e<d){kendo.animationFrame(r)}else{a.abort()}};r()},t)}},abort:function(){this._stopped=true},destroy:function(){this.abort()}});hi.prototype.options={duration:500,easing:"swing"};hi.create=function(e,t,i){return ci.current.create(e,t,i)};var pi=r.extend({init:function(){this._items=[]},register:function(e,t,i){var n=this._items;var r=n[0];var a={name:e,type:t,order:i};if(!r||i<r.order){n.unshift(a)}else{n.push(a)}},create:function(e,t){var i=this._items;var n=i[0];if(t&&t.type){var r=t.type.toLowerCase();for(var a=0;a<i.length;a++){if(i[a].name===r){n=i[a];break}}}if(n){return new n.type(e,t)}kendo.logToConsole("Warning: Unable to create Kendo UI Drawing Surface. Possible causes:\n"+"- The browser does not support SVG and Canvas. User agent: "+navigator.userAgent)}});pi.current=new pi;var vi=["click","mouseenter","mouseleave","mousemove","resize"];var s=kendo.Observable.extend({init:function(e,t){kendo.Observable.fn.init.call(this);this.options=w.extend({},t);this.element=e;this.element._kendoExportVisual=this.exportVisual.bind(this);this._click=this._handler("click");this._mouseenter=this._handler("mouseenter");this._mouseleave=this._handler("mouseleave");this._mousemove=this._handler("mousemove");this._visual=new P;pe(e,this.options);this.bind(vi,this.options);this._enableTracking()},draw:function(e){this._visual.children.push(e)},clear:function(){this._visual.children=[]},destroy:function(){this._visual=null;this.element._kendoExportVisual=null;this.unbind()},eventTarget:function(e){var t=this;var i=re(e);var n;while(!n&&i){n=i._kendoNode;if(i===t.element){break}i=i.parentElement}if(n){return n.srcElement}},exportVisual:function(){return this._visual},getSize:function(){return pe(this.element)},currentSize:function(e){if(e){this._size=e}else{return this._size}},setSize:function(e){pe(this.element,e);this.currentSize(e);this._resize()},resize:function(e){var t=this.getSize();var i=this.currentSize();if(e||(t.width>0||t.height>0)&&(!i||t.width!==i.width||t.height!==i.height)){this.currentSize(t);this._resize(t,e);this.trigger("resize",t)}},size:function(e){if(!e){return this.getSize()}this.setSize(e)},suspendTracking:function(){this._suspendedTracking=true},resumeTracking:function(){this._suspendedTracking=false},_enableTracking:function(){},_resize:function(){},_handler:function(i){var n=this;return function(e){var t=n.eventTarget(e);if(t&&!n._suspendedTracking){n.trigger(i,{element:t,originalEvent:e,type:i})}}},_elementOffset:function(){var e=this.element;var t=me(e);var i=ce(e);var n=i.left;var r=i.top;return{left:n+t.left,top:r+t.top}},_surfacePoint:function(e){var t=this._elementOffset();var i=ne(e);var n=i.x-t.left;var r=i.y-t.top;var a=Ye(this.element).invert();var o=new H(n,r).transform(a);return o}});s.create=function(e,t){return pi.current.create(e,t)};s.support={};var d=r.extend({init:function(e){this.childNodes=[];this.parent=null;if(e){this.srcElement=e;this.observe()}},destroy:function(){var e=this;if(this.srcElement){this.srcElement.removeObserver(this)}var t=this.childNodes;for(var i=0;i<t.length;i++){e.childNodes[i].destroy()}this.parent=null},load:function(){},observe:function(){if(this.srcElement){this.srcElement.addObserver(this)}},append:function(e){this.childNodes.push(e);e.parent=this},insertAt:function(e,t){this.childNodes.splice(t,0,e);e.parent=this},remove:function(e,t){var i=this;var n=e+t;for(var r=e;r<n;r++){i.childNodes[r].removeSelf()}this.childNodes.splice(e,t)},removeSelf:function(){this.clear();this.destroy()},clear:function(){this.remove(0,this.childNodes.length)},invalidate:function(){if(this.parent){this.parent.invalidate()}},geometryChange:function(){this.invalidate()},optionsChange:function(){this.invalidate()},childrenChange:function(e){if(e.action==="add"){this.load(e.items,e.index)}else if(e.action==="remove"){this.remove(e.index,e.items.length)}this.invalidate()}});function mi(e,t){return l(t)&&t!==null?" "+e+'="'+t+'" ':""}function gi(e){var t="";for(var i=0;i<e.length;i++){t+=mi(e[i][0],e[i][1])}return t}function _i(e){var t="";for(var i=0;i<e.length;i++){var n=e[i][1];if(l(n)){t+=e[i][0]+":"+n+";"}}if(t!==""){return t}}var f={};var bi="http://www.w3.org/2000/svg";var wi="none";var ki=function(e,t){e.innerHTML=t};if(typeof document!=="undefined"){var yi="<svg xmlns='"+bi+"'></svg>";var xi=document.createElement("div");var Ci=typeof DOMParser!=="undefined";xi.innerHTML=yi;if(Ci&&xi.firstChild.namespaceURI!==bi){ki=function(e,t){var i=new DOMParser;var n=i.parseFromString(t,"text/xml");var r=document.adoptNode(n.documentElement);e.innerHTML="";e.appendChild(r)}}}var Si=ki;var Ti="transform";var Di={clip:"clip-path",fill:"fill"};function Ai(e,t){return e==="clip"||e==="fill"&&(!t||t.nodeType==="Gradient")}function Ei(){var e=document.getElementsByTagName("base")[0];var t=document.location.href;var i="";if(e&&!(D||{}).msie){var n=t.indexOf("#");if(n!==-1){t=t.substring(0,n)}i=t}return i}var i=d.extend({init:function(e,t){d.fn.init.call(this,e);this.definitions={};this.options=t},destroy:function(){if(this.element){this.element._kendoNode=null;this.element=null}this.clearDefinitions();d.fn.destroy.call(this)},load:function(e,t){var i=this;for(var n=0;n<e.length;n++){var r=e[n];var a=r.children;var o=new f[r.nodeType](r,i.options);if(l(t)){i.insertAt(o,t)}else{i.append(o)}o.createDefinitions();if(a&&a.length>0){o.load(a)}var s=i.element;if(s){o.attachTo(s,t)}}},root:function(){var e=this;while(e.parent){e=e.parent}return e},attachTo:function(e,t){var i=document.createElement("div");Si(i,"<svg xmlns='"+bi+"' version='1.1'>"+this.render()+"</svg>");var n=i.firstChild.firstChild;if(n){if(l(t)){e.insertBefore(n,e.childNodes[t]||null)}else{e.appendChild(n)}this.setElement(n)}},setElement:function(e){if(this.element){this.element._kendoNode=null}this.element=e;this.element._kendoNode=this;var t=this.childNodes;for(var i=0;i<t.length;i++){var n=e.childNodes[i];t[i].setElement(n)}},clear:function(){this.clearDefinitions();if(this.element){this.element.innerHTML=""}var e=this.childNodes;for(var t=0;t<e.length;t++){e[t].destroy()}this.childNodes=[]},removeSelf:function(){if(this.element){var e=this.element.parentNode;if(e){e.removeChild(this.element)}this.element=null}d.fn.removeSelf.call(this)},template:function(){return this.renderChildren()},render:function(){return this.template()},renderChildren:function(){var e=this.childNodes;var t="";for(var i=0;i<e.length;i++){t+=e[i].render()}return t},optionsChange:function(e){var t=e.field;var i=e.value;if(t==="visible"){this.css("display",i?"":wi)}else if(Di[t]&&Ai(t,i)){this.updateDefinition(t,i)}else if(t==="opacity"){this.attr("opacity",i)}else if(t==="cursor"){this.css("cursor",i)}else if(t==="id"){if(i){this.attr("id",i)}else{this.removeAttr("id")}}d.fn.optionsChange.call(this,e)},attr:function(e,t){if(this.element){this.element.setAttribute(e,t)}},allAttr:function(e){var t=this;for(var i=0;i<e.length;i++){t.attr(e[i][0],e[i][1])}},css:function(e,t){if(this.element){this.element.style[e]=t}},allCss:function(e){var t=this;for(var i=0;i<e.length;i++){t.css(e[i][0],e[i][1])}},removeAttr:function(e){if(this.element){this.element.removeAttribute(e)}},mapTransform:function(e){var t=[];if(e){t.push([Ti,"matrix("+e.matrix().toString(6)+")"])}return t},renderTransform:function(){return gi(this.mapTransform(this.srcElement.transform()))},transformChange:function(e){if(e){this.allAttr(this.mapTransform(e))}else{this.removeAttr(Ti)}},mapStyle:function(){var e=this.srcElement.options;var t=[["cursor",e.cursor]];if(e.visible===false){t.push(["display",wi])}return t},renderStyle:function(){return mi("style",_i(this.mapStyle(true)))},renderOpacity:function(){return mi("opacity",this.srcElement.options.opacity)},renderId:function(){return mi("id",this.srcElement.options.id)},createDefinitions:function(){var e=this.srcElement;var t=this.definitions;if(e){var i=e.options;var n;for(var r in Di){var a=i.get(r);if(a&&Ai(r,a)){t[r]=a;n=true}}if(n){this.definitionChange({action:"add",definitions:t})}}},definitionChange:function(e){if(this.parent){this.parent.definitionChange(e)}},updateDefinition:function(e,t){var i=this.definitions;var n=i[e];var r=Di[e];var a={};if(n){a[e]=n;this.definitionChange({action:"remove",definitions:a});delete i[e]}if(!t){if(n){this.removeAttr(r)}}else{a[e]=t;this.definitionChange({action:"add",definitions:a});i[e]=t;this.attr(r,this.refUrl(t.id))}},clearDefinitions:function(){var e=this.definitions;this.definitionChange({action:"remove",definitions:e});this.definitions={}},renderDefinitions:function(){return gi(this.mapDefinitions())},mapDefinitions:function(){var e=this;var t=this.definitions;var i=[];for(var n in t){i.push([Di[n],e.refUrl(t[n].id)])}return i},refUrl:function(e){var t=(this.options||{}).skipBaseHref;var i=this.baseUrl().replace(/'/g,"\\'");var n=t?"":i;return"url("+n+"#"+e+")"},baseUrl:function(){return Ei()}});var Ii=i.extend({template:function(){return"<stop "+this.renderOffset()+" "+this.renderStyle()+" />"},renderOffset:function(){return mi("offset",this.srcElement.offset())},mapStyle:function(){var e=this.srcElement;return[["stop-color",e.color()],["stop-opacity",e.opacity()]]},optionsChange:function(e){if(e.field==="offset"){this.attr(e.field,e.value)}else if(e.field==="color"||e.field==="opacity"){this.css("stop-"+e.field,e.value)}}});var Mi=i.extend({init:function(e){i.fn.init.call(this,e);this.id=e.id;this.loadStops()},loadStops:function(){var e=this;var t=this.srcElement.stops;var i=this.element;for(var n=0;n<t.length;n++){var r=new Ii(t[n]);e.append(r);if(i){r.attachTo(i)}}},optionsChange:function(e){if(e.field==="gradient.stops"){d.prototype.clear.call(this);this.loadStops()}else if(e.field==="gradient"){this.allAttr(this.mapCoordinates())}},renderCoordinates:function(){return gi(this.mapCoordinates())},mapSpace:function(){return["gradientUnits",this.srcElement.userSpace()?"userSpaceOnUse":"objectBoundingBox"]}});var Ri=Mi.extend({template:function(){return"<linearGradient id='"+this.id+"' "+this.renderCoordinates()+">"+this.renderChildren()+"</linearGradient>"},mapCoordinates:function(){var e=this.srcElement;var t=e.start();var i=e.end();var n=[["x1",t.x],["y1",t.y],["x2",i.x],["y2",i.y],this.mapSpace()];return n}});var Fi=Mi.extend({template:function(){return"<radialGradient id='"+this.id+"' "+this.renderCoordinates()+">"+this.renderChildren()+"</radialGradient>"},mapCoordinates:function(){var e=this.srcElement;var t=e.center();var i=e.radius();var n=[["cx",t.x],["cy",t.y],["r",i],this.mapSpace()];return n}});var Pi=i.extend({init:function(e){i.fn.init.call(this);this.srcElement=e;this.id=e.id;this.load([e])},template:function(){return"<clipPath id='"+this.id+"'>"+this.renderChildren()+"</clipPath>"}});var zi=i.extend({init:function(){i.fn.init.call(this);this.definitionMap={}},attachTo:function(e){this.element=e},template:function(){return"<defs>"+this.renderChildren()+"</defs>"},definitionChange:function(e){var t=e.definitions;var i=e.action;if(i==="add"){this.addDefinitions(t)}else if(i==="remove"){this.removeDefinitions(t)}},createDefinition:function(e,t){var i;if(e==="clip"){i=Pi}else if(e==="fill"){if(t instanceof ai){i=Ri}else if(t instanceof oi){i=Fi}}return new i(t)},addDefinitions:function(e){var t=this;for(var i in e){t.addDefinition(i,e[i])}},addDefinition:function(e,t){var i=this;var n=i.element;var r=i.definitionMap;var a=t.id;var o=r[a];if(!o){var s=this.createDefinition(e,t);r[a]={element:s,count:1};this.append(s);if(n){s.attachTo(this.element)}}else{o.count++}},removeDefinitions:function(e){var t=this;for(var i in e){t.removeDefinition(e[i])}},removeDefinition:function(e){var t=this.definitionMap;var i=e.id;var n=t[i];if(n){n.count--;if(n.count===0){this.remove(this.childNodes.indexOf(n.element),1);delete t[i]}}}});var Bi=i.extend({init:function(e){i.fn.init.call(this);this.options=e;this.defs=new zi},attachTo:function(e){this.element=e;this.defs.attachTo(e.firstElementChild)},clear:function(){d.prototype.clear.call(this)},template:function(){return this.defs.render()+this.renderChildren()},definitionChange:function(e){this.defs.definitionChange(e)}});var Li="rtl";function Hi(e){var t;try{t=e.getScreenCTM?e.getScreenCTM():null}catch(e){}if(t){var i=-t.e%1;var n=-t.f%1;var r=e.style;if(i!==0||n!==0){r.left=i+"px";r.top=n+"px"}}}var Ni=s.extend({init:function(e,t){s.fn.init.call(this,e,t);this._root=new Bi(w.extend({rtl:fe(e,"direction").direction===Li},this.options));Si(this.element,this._template());this._rootElement=this.element.firstElementChild;Hi(this._rootElement);this._root.attachTo(this._rootElement);ue(this.element,{click:this._click,mouseover:this._mouseenter,mouseout:this._mouseleave,mousemove:this._mousemove});this.resize()},destroy:function(){if(this._root){this._root.destroy();this._root=null;this._rootElement=null;ve(this.element,{click:this._click,mouseover:this._mouseenter,mouseout:this._mouseleave,mousemove:this._mousemove})}s.fn.destroy.call(this)},translate:function(e){var t=Math.round(e.x)+" "+Math.round(e.y)+" "+this._size.width+" "+this._size.height;this._offset=e;this._rootElement.setAttribute("viewBox",t)},draw:function(e){s.fn.draw.call(this,e);this._root.load([e])},clear:function(){s.fn.clear.call(this);this._root.clear()},svg:function(){return"<?xml version='1.0' ?>"+this._template()},exportVisual:function(){var e=this;var t=e._visual;var i=e._offset;if(i){var n=new P;n.children.push(t);n.transform(T().translate(-i.x,-i.y));t=n}return t},_resize:function(){if(this._offset){this.translate(this._offset)}},_template:function(){return"<svg style='width: 100%; height: 100%; overflow: hidden;' xmlns='"+bi+"' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>"+this._root.render()+"</svg>"}});Ni.prototype.type="svg";if(typeof document!=="undefined"&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")){s.support.svg=true;pi.current.register("svg",Ni,10)}var Oi=i.extend({template:function(){return"<g"+(this.renderId()+this.renderTransform()+this.renderStyle()+this.renderOpacity()+this.renderDefinitions())+">"+this.renderChildren()+"</g>"},optionsChange:function(e){if(e.field==="transform"){this.transformChange(e.value)}i.fn.optionsChange.call(this,e)}});f.Group=Oi;var Vi={dot:[1.5,3.5],dash:[4,3.5],longdash:[8,3.5],dashdot:[3.5,3.5,1.5,3.5],longdashdot:[8,3.5,1.5,3.5],longdashdotdot:[8,3.5,1.5,3.5,1.5,3.5]};var Wi="solid";var Ui="butt";var ji={"fill.opacity":"fill-opacity","stroke.color":"stroke","stroke.width":"stroke-width","stroke.opacity":"stroke-opacity"};var Gi=" ";var h=i.extend({geometryChange:function(){this.attr("d",this.renderData());this.invalidate()},optionsChange:function(e){switch(e.field){case"fill":if(e.value){this.allAttr(this.mapFill(e.value))}else{this.removeAttr("fill")}break;case"fill.color":this.allAttr(this.mapFill({color:e.value}));break;case"stroke":if(e.value){this.allAttr(this.mapStroke(e.value))}else{this.removeAttr("stroke")}break;case"transform":this.transformChange(e.value);break;default:var t=ji[e.field];if(t){this.attr(t,e.value)}break}i.fn.optionsChange.call(this,e)},content:function(){if(this.element){this.element.textContent=this.srcElement.content()}},renderData:function(){return this.printPath(this.srcElement)},printPath:function(e){var t=this;var i=e.segments;var n=i.length;if(n>0){var r=[];var a,o;for(var s=1;s<n;s++){var l=t.segmentType(i[s-1],i[s]);if(l!==o){o=l;r.push(l)}if(l==="L"){r.push(t.printPoints(i[s].anchor()))}else{r.push(t.printPoints(i[s-1].controlOut(),i[s].controlIn(),i[s].anchor()))}}a="M"+this.printPoints(i[0].anchor())+Gi+r.join(Gi);if(e.options.closed){a+="Z"}return a}},printPoints:function(){var e=arguments;var t=e.length;var i=[];for(var n=0;n<t;n++){i.push(e[n].toString(3))}return i.join(" ")},segmentType:function(e,t){return e.controlOut()&&t.controlIn()?"C":"L"},mapStroke:function(e){var t=[];if(e&&!ae(e.color)){t.push(["stroke",e.color]);t.push(["stroke-width",e.width]);t.push(["stroke-linecap",this.renderLinecap(e)]);t.push(["stroke-linejoin",e.lineJoin]);if(l(e.opacity)){t.push(["stroke-opacity",e.opacity])}if(l(e.dashType)){t.push(["stroke-dasharray",this.renderDashType(e)])}}else{t.push(["stroke",wi])}return t},renderStroke:function(){return gi(this.mapStroke(this.srcElement.options.stroke))},renderDashType:function(e){var t=e.dashType;var i=e.width;if(i===void 0){i=1}if(t&&t!==Wi){var n=Vi[t.toLowerCase()];var r=[];for(var a=0;a<n.length;a++){r.push(n[a]*i)}return r.join(" ")}},renderLinecap:function(e){var t=e.dashType;var i=e.lineCap;return t&&t!=="solid"?Ui:i},mapFill:function(e){var t=[];if(!(e&&e.nodeType==="Gradient")){if(e&&!ae(e.color)){t.push(["fill",e.color]);if(l(e.opacity)){t.push(["fill-opacity",e.opacity])}}else{t.push(["fill",wi])}}return t},renderFill:function(){return gi(this.mapFill(this.srcElement.options.fill))},template:function(){return"<path "+this.renderId()+" "+this.renderStyle()+" "+this.renderOpacity()+" "+mi("d",this.renderData())+""+this.renderStroke()+this.renderFill()+this.renderDefinitions()+this.renderTransform()+"></path>"}});f.Path=h;var qi=h.extend({renderData:function(){return this.printPath(this.srcElement.toPath())}});f.Arc=qi;var $i=h.extend({geometryChange:function(){var e=this.center();this.attr("cx",e.x);this.attr("cy",e.y);this.attr("r",this.radius());this.invalidate()},center:function(){return this.srcElement.geometry().center},radius:function(){return this.srcElement.geometry().radius},template:function(){return"<circle "+this.renderId()+" "+this.renderStyle()+" "+this.renderOpacity()+"cx='"+this.center().x+"' cy='"+this.center().y+"' r='"+this.radius()+"'"+this.renderStroke()+" "+this.renderFill()+" "+this.renderDefinitions()+this.renderTransform()+" ></circle>"}});f.Circle=$i;var Ki=h.extend({geometryChange:function(){var e=this.srcElement.geometry();this.attr("x",e.origin.x);this.attr("y",e.origin.y);this.attr("width",e.size.width);this.attr("height",e.size.height);this.invalidate()},size:function(){return this.srcElement.geometry().size},origin:function(){return this.srcElement.geometry().origin},template:function(){return"<rect "+this.renderId()+" "+this.renderStyle()+" "+this.renderOpacity()+" x='"+this.origin().x+"' y='"+this.origin().y+"' "+"width='"+this.size().width+"' height='"+this.size().height+"' "+this.renderStroke()+" "+this.renderFill()+" "+this.renderDefinitions()+" "+this.renderTransform()+" />"}});f.Rect=Ki;var Yi=h.extend({geometryChange:function(){this.allAttr(this.mapPosition());this.invalidate()},optionsChange:function(e){if(e.field==="src"){this.allAttr(this.mapSource())}h.fn.optionsChange.call(this,e)},mapPosition:function(){var e=this.srcElement.rect();var t=e.topLeft();return[["x",t.x],["y",t.y],["width",e.width()+"px"],["height",e.height()+"px"]]},renderPosition:function(){return gi(this.mapPosition())},mapSource:function(e){var t=this.srcElement.src();if(e){t=kendo.htmlEncode(t)}return[["xlink:href",t]]},renderSource:function(){return gi(this.mapSource(true))},template:function(){return"<image preserveAspectRatio='none' "+this.renderId()+" "+this.renderStyle()+" "+this.renderTransform()+" "+this.renderOpacity()+this.renderPosition()+" "+this.renderSource()+" "+this.renderDefinitions()+">"+"</image>"}});f.Image=Yi;var Qi=/&(?:[a-zA-Z]+|#\d+);/g;function Xi(e){if(!e||typeof e!=="string"||!Qi.test(e)){return e}var t=Xi._element;Qi.lastIndex=0;return e.replace(Qi,function(e){t.innerHTML=e;return t.textContent||t.innerText})}if(typeof document!=="undefined"){Xi._element=document.createElement("span")}var Zi=h.extend({geometryChange:function(){var e=this.pos();this.attr("x",e.x);this.attr("y",e.y);this.invalidate()},optionsChange:function(e){if(e.field==="font"){this.attr("style",_i(this.mapStyle()));this.geometryChange()}else if(e.field==="content"){h.fn.content.call(this,this.srcElement.content())}h.fn.optionsChange.call(this,e)},mapStyle:function(e){var t=h.fn.mapStyle.call(this,e);var i=this.srcElement.options.font;if(e){i=kendo.htmlEncode(i)}t.push(["font",i],["white-space","pre"]);return t},pos:function(){var e=this.srcElement.position();var t=this.srcElement.measure();return e.clone().setY(e.y+t.baseline)},renderContent:function(){var e=this.srcElement.content();e=Xi(e);e=kendo.htmlEncode(e);return x.normalizeText(e)},renderTextAnchor:function(){var e;if((this.options||{}).rtl&&!(D.msie||D.edge)){e="end"}return mi("text-anchor",e)},template:function(){return"<text "+this.renderId()+" "+this.renderTextAnchor()+" "+this.renderStyle()+" "+this.renderOpacity()+"x='"+this.pos().x+"' y='"+this.pos().y+"' "+this.renderStroke()+" "+this.renderTransform()+" "+this.renderDefinitions()+this.renderFill()+">"+this.renderContent()+"</text>"}});f.Text=Zi;var Ji=h.extend({renderData:function(){var e=this;var t=this.srcElement.paths;if(t.length>0){var i=[];for(var n=0;n<t.length;n++){i.push(e.printPath(t[n]))}return i.join(" ")}}});f.MultiPath=Ji;function en(e){var t=new Bi({skipBaseHref:true});var i=e.clippedBBox();var n=e;if(i){var r=i.getOrigin();var a=new P;a.transform(T().translate(-r.x,-r.y));a.children.push(e);n=a}t.load([n]);var o="<?xml version='1.0' ?><svg xmlns='"+bi+"' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>"+t.render()+"</svg>";t.destroy();return o}var tn={Surface:Ni,RootNode:Bi,Node:i,GroupNode:Oi,ArcNode:qi,CircleNode:$i,RectNode:Ki,ImageNode:Yi,TextNode:Zi,PathNode:h,MultiPathNode:Ji,DefinitionNode:zi,ClipNode:Pi,GradientStopNode:Ii,LinearGradientNode:Ri,RadialGradientNode:Fi,exportGroup:en};var v={};function nn(e,t){var i=t.segments;if(i.length===0){return}var n=i[0];var r=n.anchor();e.moveTo(r.x,r.y);for(var a=1;a<i.length;a++){n=i[a];r=n.anchor();var o=i[a-1];var s=o.controlOut();var l=n.controlIn();if(s&&l){e.bezierCurveTo(s.x,s.y,l.x,l.y,r.x,r.y)}else{e.lineTo(r.x,r.y)}}if(t.options.closed){e.closePath()}}var rn=d.extend({init:function(e){d.fn.init.call(this,e);if(e){this.initClip()}},initClip:function(){var e=this.srcElement.clip();if(e){this.clip=e;e.addObserver(this)}},clear:function(){if(this.srcElement){this.srcElement.removeObserver(this)}this.clearClip();d.fn.clear.call(this)},clearClip:function(){if(this.clip){this.clip.removeObserver(this);delete this.clip}},setClip:function(e){if(this.clip){e.beginPath();nn(e,this.clip);e.clip()}},optionsChange:function(e){if(e.field==="clip"){this.clearClip();this.initClip()}d.fn.optionsChange.call(this,e)},setTransform:function(e){if(this.srcElement){var t=this.srcElement.transform();if(t){e.transform.apply(e,t.matrix().toArray(6))}}},loadElements:function(e,t,i){var n=this;for(var r=0;r<e.length;r++){var a=e[r];var o=a.children;var s=new v[a.nodeType](a,i);if(o&&o.length>0){s.load(o,t,i)}if(l(t)){n.insertAt(s,t)}else{n.append(s)}}},load:function(e,t,i){this.loadElements(e,t,i);this.invalidate()},setOpacity:function(e){if(this.srcElement){var t=this.srcElement.opacity();if(l(t)){this.globalAlpha(e,t)}}},globalAlpha:function(e,t){var i=t;if(i&&e.globalAlpha){i*=e.globalAlpha}e.globalAlpha=i},visible:function(){var e=this.srcElement;return!e||e&&e.options.visible!==false}});var an=rn.extend({renderTo:function(e){if(!this.visible()){return}e.save();this.setTransform(e);this.setClip(e);this.setOpacity(e);var t=this.childNodes;for(var i=0;i<t.length;i++){var n=t[i];if(n.visible()){n.renderTo(e)}}e.restore()}});zt.extend(an.prototype,"childNodes");v.Group=an;var on=1e3/60;var sn=an.extend({init:function(e,t){an.fn.init.call(this);this.canvas=e;this.size=t;this.ctx=e.getContext("2d");var i=this._invalidate.bind(this);this.invalidate=kendo.throttle(function(){kendo.animationFrame(i)},on)},destroy:function(){an.fn.destroy.call(this);this.canvas=null;this.ctx=null},load:function(e,t,i){this.loadElements(e,t,i);this._invalidate()},_rescale:function(e){var t=this;var i=t.canvas;var n=t.size;i.width=n.width*e;i.height=n.height*e;this.ctx.scale(e,e)},_devicePixelRatio:function(){if(window.devicePixelRatio==="number"){return window.devicePixelRatio}return 1},_invalidate:function(e){if(!this.ctx){return}var t=e&&e.fixedScale;var i=t?1:this._devicePixelRatio();this._rescale(i);this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);this.renderTo(this.ctx)}});zt.extend(sn.prototype,"childNodes");var ln=r.extend({init:function(){this.shapes=[]},_add:function(e,t){this.shapes.push({bbox:t,shape:e});e._quadNode=this},pointShapes:function(e){var t=this.shapes;var i=t.length;var n=[];for(var r=0;r<i;r++){if(t[r].bbox.containsPoint(e)){n.push(t[r].shape)}}return n},insert:function(e,t){this._add(e,t)},remove:function(e){var t=this.shapes;var i=t.length;for(var n=0;n<i;n++){if(t[n].shape===e){t.splice(n,1);break}}}});var dn=ln.extend({init:function(e){ln.fn.init.call(this);this.children=[];this.rect=e},inBounds:function(e){var t=this.rect;var i=t.bottomRight();var n=e.bottomRight();var r=t.origin.x<=e.origin.x&&t.origin.y<=e.origin.y&&n.x<=i.x&&n.y<=i.y;return r},pointShapes:function(e){var t=this.children;var i=t.length;var n=ln.fn.pointShapes.call(this,e);for(var r=0;r<i;r++){I(n,t[r].pointShapes(e))}return n},insert:function(e,t){var i=this.children;var n=false;if(this.inBounds(t)){if(this.shapes.length<4){this._add(e,t)}else{if(!i.length){this._initChildren()}for(var r=0;r<i.length;r++){if(i[r].insert(e,t)){n=true;break}}if(!n){this._add(e,t)}}n=true}return n},_initChildren:function(){var e=this;var t=e.rect;var i=e.children;var n=t.center();var r=t.width()/2;var a=t.height()/2;i.push(new dn(new R([t.origin.x,t.origin.y],[r,a])),new dn(new R([n.x,t.origin.y],[r,a])),new dn(new R([t.origin.x,n.y],[r,a])),new dn(new R([n.x,n.y],[r,a])))}});var m=3e3;var un=1e4;var cn=75;var fn=r.extend({init:function(){this.initRoots()},initRoots:function(){this.rootMap={};this.root=new ln;this.rootElements=[]},clear:function(){var e=this;var t=this.rootElements;for(var i=0;i<t.length;i++){e.remove(t[i])}this.initRoots()},pointShape:function(e){var t=(this.rootMap[Math.floor(e.x/m)]||{})[Math.floor(e.y/m)];var i=this.root.pointShapes(e);if(t){i=i.concat(t.pointShapes(e))}this.assignZindex(i);i.sort(hn);for(var n=0;n<i.length;n++){if(i[n].containsPoint(e)){return i[n]}}},assignZindex:function(e){var t=this;for(var i=0;i<e.length;i++){var n=e[i];var r=0;var a=Math.pow(un,cn);var o=[];while(n){o.push(n);n=n.parent}while(o.length){n=o.pop();r+=((n.parent?n.parent.children:t.rootElements).indexOf(n)+1)*a;a/=un}e[i]._zIndex=r}},optionsChange:function(e){if(e.field==="transform"||e.field==="stroke.width"){this.bboxChange(e.element)}},geometryChange:function(e){this.bboxChange(e.element)},bboxChange:function(e){var t=this;if(e.nodeType==="Group"){for(var i=0;i<e.children.length;i++){t.bboxChange(e.children[i])}}else{if(e._quadNode){e._quadNode.remove(e)}this._insertShape(e)}},add:function(e){var t=Array.isArray(e)?e.slice(0):[e];I(this.rootElements,t);this._insert(t)},childrenChange:function(e){var t=this;if(e.action==="remove"){for(var i=0;i<e.items.length;i++){t.remove(e.items[i])}}else{this._insert(Array.prototype.slice.call(e.items,0))}},_insert:function(e){var t=this;var i;while(e.length>0){i=e.pop();i.addObserver(t);if(i.nodeType==="Group"){I(e,i.children)}else{t._insertShape(i)}}},_insertShape:function(e){var t=e.bbox();if(t){var i=this.getSectors(t);var n=i[0][0];var r=i[1][0];if(this.inRoot(i)){this.root.insert(e,t)}else{var a=this.rootMap;if(!a[n]){a[n]={}}if(!a[n][r]){a[n][r]=new dn(new R([n*m,r*m],[m,m]))}a[n][r].insert(e,t)}}},remove:function(e){var t=this;e.removeObserver(this);if(e.nodeType==="Group"){var i=e.children;for(var n=0;n<i.length;n++){t.remove(i[n])}}else if(e._quadNode){e._quadNode.remove(e);delete e._quadNode}},inRoot:function(e){return e[0].length>1||e[1].length>1},getSectors:function(e){var t=e.bottomRight();var i=Math.floor(t.x/m);var n=Math.floor(t.y/m);var r=[[],[]];for(var a=Math.floor(e.origin.x/m);a<=i;a++){r[0].push(a)}for(var o=Math.floor(e.origin.y/m);o<=n;o++){r[1].push(o)}return r}});function hn(e,t){if(e._zIndex<t._zIndex){return 1}if(e._zIndex>t._zIndex){return-1}return 0}var pn=r.extend({init:function(e){e.bind("mouseenter",this._mouseenter.bind(this));e.bind("mouseleave",this._mouseleave.bind(this));this.element=e.element},clear:function(){this._resetCursor()},destroy:function(){this._resetCursor();delete this.element},_mouseenter:function(e){var t=this._shapeCursor(e);if(!t){this._resetCursor()}else{if(!this._current){this._defaultCursor=this._getCursor()}this._setCursor(t)}},_mouseleave:function(){this._resetCursor()},_shapeCursor:function(e){var t=e.element;while(t&&!l(t.options.cursor)){t=t.parent}if(t){return t.options.cursor}},_getCursor:function(){if(this.element){return this.element.style.cursor}},_setCursor:function(e){if(this.element){this.element.style.cursor=e;this._current=e}},_resetCursor:function(){if(this._current){this._setCursor(this._defaultCursor||"");delete this._current}}});var vn=s.extend({init:function(e,t){s.fn.init.call(this,e,t);this.element.innerHTML=this._template(this);var i=this.element.firstElementChild;var n=pe(e);i.width=n.width;i.height=n.height;this._rootElement=i;this._root=new sn(i,n);this._mouseTrackHandler=this._trackMouse.bind(this);ue(this.element,{click:this._mouseTrackHandler,mousemove:this._mouseTrackHandler})},destroy:function(){s.fn.destroy.call(this);if(this._root){this._root.destroy();this._root=null}if(this._searchTree){this._searchTree.clear();delete this._searchTree}if(this._cursor){this._cursor.destroy();delete this._cursor}ve(this.element,{click:this._mouseTrackHandler,mousemove:this._mouseTrackHandler})},draw:function(e){s.fn.draw.call(this,e);this._root.load([e],undefined,this.options.cors);if(this._searchTree){this._searchTree.add([e])}},clear:function(){s.fn.clear.call(this);this._root.clear();if(this._searchTree){this._searchTree.clear()}if(this._cursor){this._cursor.clear()}},eventTarget:function(e){if(this._searchTree){var t=this._surfacePoint(e);var i=this._searchTree.pointShape(t);return i}},image:function(){var e=this;var t=e._root;var i=e._rootElement;var n=[];t.traverse(function(e){if(e.loading){n.push(e.loading)}});var r=A();var a=function(){t._invalidate({fixedScale:true});try{var e=i.toDataURL();r.resolve(e)}catch(e){r.reject(e)}};E(n).then(a,a);return r},suspendTracking:function(){s.fn.suspendTracking.call(this);if(this._searchTree){this._searchTree.clear();delete this._searchTree}},resumeTracking:function(){s.fn.resumeTracking.call(this);if(!this._searchTree){this._searchTree=new fn;var e=this._root.childNodes;var t=[];for(var i=0;i<e.length;i++){t.push(e[i].srcElement)}this._searchTree.add(t)}},_resize:function(){this._rootElement.width=this._size.width;this._rootElement.height=this._size.height;this._root.size=this._size;this._root.invalidate()},_template:function(){return"<canvas style='width: 100%; height: 100%;'></canvas>"},_enableTracking:function(){this._searchTree=new fn;this._cursor=new pn(this);s.fn._enableTracking.call(this)},_trackMouse:function(e){if(this._suspendedTracking){return}var t=this.eventTarget(e);if(e.type!=="click"){var i=this._currentShape;if(i&&i!==t){this.trigger("mouseleave",{element:i,originalEvent:e,type:"mouseleave"})}if(t&&i!==t){this.trigger("mouseenter",{element:t,originalEvent:e,type:"mouseenter"})}this.trigger("mousemove",{element:t,originalEvent:e,type:"mousemove"});this._currentShape=t}else if(t){this.trigger("click",{element:t,originalEvent:e,type:"click"})}}});vn.prototype.type="canvas";if(typeof document!=="undefined"&&document.createElement("canvas").getContext){s.support.canvas=true;pi.current.register("canvas",vn,20)}function mn(e,t){for(var i=0;i<t.length;i++){var n=t[i];var r=kendo.parseColor(n.color());r.a*=n.opacity();e.addColorStop(n.offset(),r.toCssRgba())}}var b=rn.extend({renderTo:function(e){e.save();this.setTransform(e);this.setClip(e);this.setOpacity(e);e.beginPath();this.renderPoints(e,this.srcElement);this.setLineDash(e);this.setLineCap(e);this.setLineJoin(e);this.setFill(e);this.setStroke(e);e.restore()},setFill:function(e){var t=this.srcElement.options.fill;var i=false;if(t){if(t.nodeType==="Gradient"){this.setGradientFill(e,t);i=true}else if(!ae(t.color)){e.fillStyle=t.color;e.save();this.globalAlpha(e,t.opacity);e.fill();e.restore();i=true}}return i},setGradientFill:function(e,t){var i=this.srcElement.rawBBox();var n;if(t instanceof ai){var r=t.start();var a=t.end();n=e.createLinearGradient(r.x,r.y,a.x,a.y)}else if(t instanceof oi){var o=t.center();n=e.createRadialGradient(o.x,o.y,0,o.x,o.y,t.radius())}mn(n,t.stops);e.save();if(!t.userSpace()){e.transform(i.width(),0,0,i.height(),i.origin.x,i.origin.y)}e.fillStyle=n;e.fill();e.restore()},setStroke:function(e){var t=this.srcElement.options.stroke;if(t&&!ae(t.color)&&t.width>0){e.strokeStyle=t.color;e.lineWidth=de(t.width,1);e.save();this.globalAlpha(e,t.opacity);e.stroke();e.restore();return true}},dashType:function(){var e=this.srcElement.options.stroke;if(e&&e.dashType){return e.dashType.toLowerCase()}},setLineDash:function(e){var t=this.dashType();if(t&&t!==Wi){var i=Vi[t];if(e.setLineDash){e.setLineDash(i)}else{e.mozDash=i;e.webkitLineDash=i}}},setLineCap:function(e){var t=this.dashType();var i=this.srcElement.options.stroke;if(t&&t!==Wi){e.lineCap=Ui}else if(i&&i.lineCap){e.lineCap=i.lineCap}},setLineJoin:function(e){var t=this.srcElement.options.stroke;if(t&&t.lineJoin){e.lineJoin=t.lineJoin}},renderPoints:function(e,t){nn(e,t)}});v.Path=b;var gn=b.extend({renderPoints:function(e){var t=this.srcElement.toPath();nn(e,t)}});v.Arc=gn;var _n=b.extend({renderPoints:function(e){var t=this.srcElement.geometry();var i=t.center;var n=t.radius;e.arc(i.x,i.y,n,0,Math.PI*2)}});v.Circle=_n;var bn=b.extend({renderPoints:function(e){var t=this.srcElement.geometry();var i=t.origin;var n=t.size;e.rect(i.x,i.y,n.width,n.height)}});v.Rect=bn;var wn=b.extend({init:function(e,t){b.fn.init.call(this,e);this.onLoad=this.onLoad.bind(this);this.onError=this.onError.bind(this);this.loading=A();var i=this.img=new Image;if(t&&!/^data:/i.test(e.src())){i.crossOrigin=t}i.src=e.src();if(i.complete){this.onLoad()}else{i.onload=this.onLoad;i.onerror=this.onError}},renderTo:function(e){if(this.loading.state()==="resolved"){e.save();this.setTransform(e);this.setClip(e);this.drawImage(e);e.restore()}},optionsChange:function(e){if(e.field==="src"){this.loading=A();this.img.src=this.srcElement.src()}else{b.fn.optionsChange.call(this,e)}},onLoad:function(){this.loading.resolve();this.invalidate()},onError:function(){this.loading.reject(new Error("Unable to load image '"+this.img.src+"'. Check for connectivity and verify CORS headers."))},drawImage:function(e){var t=this.srcElement.rect();var i=t.topLeft();e.drawImage(this.img,i.x,i.y,t.width(),t.height())}});v.Image=wn;var kn=b.extend({renderTo:function(e){var t=this.srcElement;var i=t.position();var n=t.measure();e.save();this.setTransform(e);this.setClip(e);this.setOpacity(e);e.beginPath();e.font=t.options.font;e.textAlign="left";if(this.setFill(e)){e.fillText(t.content(),i.x,i.y+n.baseline)}if(this.setStroke(e)){this.setLineDash(e);e.strokeText(t.content(),i.x,i.y+n.baseline)}e.restore()}});v.Text=kn;var yn=b.extend({renderPoints:function(e){var t=this.srcElement.paths;for(var i=0;i<t.length;i++){nn(e,t[i])}}});v.MultiPath=yn;var xn={Surface:vn,RootNode:sn,Node:rn,GroupNode:an,ArcNode:gn,CircleNode:_n,RectNode:bn,ImageNode:wn,TextNode:kn,PathNode:b,MultiPathNode:yn};function Cn(e,t){var i={width:"800px",height:"600px",cors:"Anonymous"};var n=e;var r=e.clippedBBox();if(r){var a=r.getOrigin();n=new P;n.transform(T().translate(-a.x,-a.y));n.children.push(e);var o=r.getSize();i.width=o.width+"px";i.height=o.height+"px"}var s=w.extend(i,t);var l=document.createElement("div");var d=l.style;d.display="none";d.width=s.width;d.height=s.height;document.body.appendChild(l);var u=new vn(l,s);u.suspendTracking();u.draw(n);var c=u.image();var f=function(){u.destroy();document.body.removeChild(l)};c.then(f,f);return c}function Sn(e,t){var i=en(e);if(!t||!t.raw){i="data:image/svg+xml;base64,"+ie(i)}return A().resolve(i)}var N=D||{};function O(e){return Array.prototype.slice.call(e)}var Tn="KENDO-PSEUDO-ELEMENT";var Dn={};var V={};V._root=V;var An=typeof window!=="undefined";var En=An?N.msie||N.edge:false;var In=Ft.extend({init:function(e,t,i){Ft.fn.init.call(this,e,t.getOrigin(),i);this._pdfRect=t},rect:function(){return this._pdfRect},rawBBox:function(){return this._pdfRect}});function Mn(e,t){if(e.classList){e.classList.add(t)}else{e.className+=" "+t}}function Rn(e,i){if(e.classList){e.classList.remove(i)}else{e.className=e.className.split(/\s+/).reduce(function(e,t){if(t!=i){e.push(t)}return e},[]).join(" ")}}function Fn(t,i){Object.keys(i).forEach(function(e){t.style[e]=i[e]})}var Pn=typeof Element!=="undefined"&&Element.prototype&&function(e){if(e.matches){return function(e,t){return e.matches(t)}}if(e.webkitMatchesSelector){return function(e,t){return e.webkitMatchesSelector(t)}}if(e.mozMatchesSelector){return function(e,t){return e.mozMatchesSelector(t)}}if(e.msMatchesSelector){return function(e,t){return e.msMatchesSelector(t)}}return function(e){return[].indexOf.call(document.querySelectorAll(e),this)!==-1}}(Element.prototype);function zn(e,t){if(e.closest){return e.closest(t)}while(e&&!/^\[object (?:HTML)?Document\]$/.test(String(e))){if(e.nodeType==1&&Pn(e,t)){return e}e=e.parentNode}}var Bn=function(s){if(s){return function e(t){var i=t.cloneNode(false);if(t.nodeType==1){var n=s(t),r=s(i),a;var o=n.data();for(a in o){r.data(a,o[a])}if(/^canvas$/i.test(t.tagName)){i.getContext("2d").drawImage(t,0,0)}else if(/^(?:input|select|textarea|option)$/i.test(t.tagName)){i.removeAttribute("id");i.removeAttribute("name");if(!/^textarea$/i.test(t.tagName)){i.value=t.value}i.checked=t.checked;i.selected=t.selected}for(a=t.firstChild;a;a=a.nextSibling){i.appendChild(e(a))}}return i}}else{return function e(t){var i=function e(t){var i=t.cloneNode(false);if(t._kendoExportVisual){i._kendoExportVisual=t._kendoExportVisual}for(var n=t.firstChild;n;n=n.nextSibling){i.appendChild(e(n))}return i}(t);var n=t.querySelectorAll("canvas");if(n.length){O(i.querySelectorAll("canvas")).forEach(function(e,t){e.getContext("2d").drawImage(n[t],0,0)})}var r=t.querySelectorAll("input, select, textarea, option");O(i.querySelectorAll("input, select, textarea, option")).forEach(function(e,t){e.removeAttribute("id");e.removeAttribute("name");if(!/^textarea$/i.test(e.tagName)){e.value=r[t].value}e.checked=r[t].checked;e.selected=r[t].selected});return i}}}(typeof window!=="undefined"&&window.kendo&&window.kendo.jQuery);function Ln(e){if(typeof e=="number"){return{x:e,y:e}}if(Array.isArray(e)){return{x:e[0],y:e[1]}}return{x:e.x,y:e.y}}function Hn(l,d){if(!d){d={}}var u=A();if(!l){return u.reject("No element to export")}if(typeof window.getComputedStyle!="function"){throw new Error("window.getComputedStyle is missing.  You are using an unsupported browser, or running in IE8 compatibility mode.  Drawing HTML is supported in Chrome, Firefox, Safari and IE9+.")}kendo.pdf.defineFont(Wn(l.ownerDocument));var c=Ln(d.scale||1);function f(e){var t=new P;var i=e.getBoundingClientRect();hr(t,[c.x,0,0,c.y,-i.left*c.x,-i.top*c.y]);V._clipbox=false;V._matrix=p.unit();V._stackingContext={element:e,group:t};if(d.avoidLinks===true){V._avoidLinks="a"}else{V._avoidLinks=d.avoidLinks}Mn(e,"k-pdf-export");Br(e,t);Rn(e,"k-pdf-export");return t}Zn(l,function(){var e=d&&d.forcePageBreak;var i=d&&d.paperSize&&d.paperSize!="auto";var t=kendo.pdf.getPaperOptions(function(e,t){if(e=="paperSize"){return i?d[e]:"A4"}return e in d?d[e]:t});var n=i&&t.paperSize[0];var r=i&&t.paperSize[1];var a=d.margin&&t.margin;var o=Boolean(a);if(e||r){if(!a){a={left:0,top:0,right:0,bottom:0}}if(n){n/=c.x}if(r){r/=c.y}a.left/=c.x;a.right/=c.x;a.top/=c.y;a.bottom/=c.y;var s=new P({pdf:{multiPage:true,paperSize:i?t.paperSize:"auto",_ignoreMargin:o}});h(function(i){if(d.progress){var n=false,r=0;(function e(){if(r<i.pages.length){var t=f(i.pages[r]);s.append(t);d.progress({page:t,pageNum:++r,totalPages:i.pages.length,cancel:function(){n=true}});if(!n){setTimeout(e)}else{i.container.parentNode.removeChild(i.container)}}else{i.container.parentNode.removeChild(i.container);u.resolve(s)}})()}else{i.pages.forEach(function(e){s.append(f(e))});i.container.parentNode.removeChild(i.container);u.resolve(s)}},l,e,n?n-a.left-a.right:null,r?r-a.top-a.bottom:null,a,d)}else{u.resolve(f(l))}});function y(n){if(n!=null){if(typeof n=="string"){n=kendo.template(n.replace(/^\s+|\s+$/g,""))}if(typeof n=="function"){return function(e){var t=n(e);if(t&&typeof t=="string"){var i=document.createElement("div");i.innerHTML=t;t=i.firstElementChild}return t}}return function(){return n.cloneNode(true)}}}function h(t,e,l,i,d,n,u){var r=y(u.template);var c=e.ownerDocument;var a=[];var f=u._destructive?e:Bn(e);var o=c.createElement("KENDO-PDF-DOCUMENT");var h=0;O(f.querySelectorAll("tfoot")).forEach(function(e){e.parentNode.appendChild(e)});O(f.querySelectorAll("ol")).forEach(function(e){O(e.children).forEach(function(e,t){e.setAttribute("kendo-split-index",t)})});Fn(o,{display:"block",position:"absolute",boxSizing:"content-box",left:"-10000px",top:"-10000px"});if(i){Fn(o,{width:i+"px",paddingLeft:n.left+"px",paddingRight:n.right+"px"});Fn(f,{overflow:"hidden"})}e.parentNode.insertBefore(o,e);o.appendChild(f);if(u.beforePageBreak){setTimeout(function(){u.beforePageBreak(o,s)},15)}else{setTimeout(s,15)}function s(){if(l!="-"||d){v(f)}{var e=_();f.parentNode.insertBefore(e,f);e.appendChild(f)}if(r){a.forEach(function(e,t){var i=r({element:e,pageNum:t+1,totalPages:a.length});if(i){e.appendChild(i)}})}Zn(a,function(){Xn(a,function(){t({pages:a,container:o})})})}function p(e){if(u.keepTogether&&Pn(e,u.keepTogether)&&e.offsetHeight<=d-h){return true}var t=e.tagName;if(/^h[1-6]$/i.test(t)&&e.offsetHeight>=d-h){return false}return e.getAttribute("data-kendo-chart")||/^(?:img|tr|thead|th|tfoot|iframe|svg|object|canvas|input|textarea|select|video|h[1-6])/i.test(e.tagName)}function v(e){if(e.tagName=="TABLE"){Fn(e,{tableLayout:"fixed"})}if(p(e)){return}var t=U(e);var i=parseFloat(j(t,"padding-bottom"));var n=parseFloat(j(t,"border-bottom-width"));var r=h;h+=i+n;var a=true;for(var o=e.firstChild;o;o=o.nextSibling){if(o.nodeType==1){a=false;if(Pn(o,l)){g(o);continue}if(!d){v(o);continue}if(!/^(?:static|relative)$/.test(j(U(o),"position"))){continue}var s=b(o);if(s==1){g(o)}else if(s){if(p(o)){g(o)}else{v(o)}}else{v(o)}}else if(o.nodeType==3&&d){w(o,a);a=false}}h=r}function m(e){var t=e.parentNode,i=t.firstChild;if(e===i){return true}if(e===t.children[0]){if(i.nodeType==7||i.nodeType==8){return true}if(i.nodeType==3){return!/\S/.test(i.data)}}return false}function g(e){if(e.nodeType==1&&e!==f&&m(e)){return g(e.parentNode)}var t,i,n,r,a;t=zn(e,"table");i=t&&t.querySelector("colgroup");if(u.repeatHeaders){n=t&&t.querySelector("thead");r=zn(e,".k-grid.k-widget");if(r&&r.querySelector(".k-auto-scrollable")){a=r.querySelector(".k-grid-header")}}var o=_();var s=c.createRange();s.setStartBefore(f);s.setEndBefore(e);o.appendChild(s.extractContents());f.parentNode.insertBefore(o,f);k(e.parentNode);if(t){t=zn(e,"table");if(u.repeatHeaders&&n){t.insertBefore(n.cloneNode(true),t.firstChild)}if(i){t.insertBefore(i.cloneNode(true),t.firstChild)}}if(u.repeatHeaders&&a){r=zn(e,".k-grid.k-widget");r.insertBefore(a.cloneNode(true),r.firstChild)}}function _(){var e=c.createElement("KENDO-PDF-PAGE");Fn(e,{display:"block",boxSizing:"content-box",width:i?i+"px":"auto",padding:n.top+"px "+n.right+"px "+n.bottom+"px "+n.left+"px",position:"relative",height:d?d+"px":"auto",overflow:d||i?"hidden":"visible",clear:"both"});if(u&&u.pageClassName){e.className=u.pageClassName}a.push(e);return e}function b(e){var t=e.getBoundingClientRect();if(t.width===0||t.height===0){return 0}var i=f.getBoundingClientRect().top;var n=d-h;return t.height>n?3:t.top-i>n?1:t.bottom-i>n?2:0}function w(r,e){if(!/\S/.test(r.data)){return}var t=r.data.length;var a=c.createRange();a.selectNodeContents(r);var i=b(a);if(!i){return}var n=r;if(i==1){if(e){g(r.parentNode)}else{g(r)}}else{(function e(t,i,n){a.setEnd(r,i);if(t==i||i==n){return i}if(b(a)){return e(t,t+i>>1,i)}else{return e(i,i+n>>1,n)}})(0,t>>1,t);if(!/\S/.test(a.toString())&&e){g(r.parentNode)}else{n=r.splitText(a.endOffset);var o=_();a.setStartBefore(f);o.appendChild(a.extractContents());f.parentNode.insertBefore(o,f);k(n.parentNode)}}w(n)}function k(e){var t=zn(e,"li");if(t){t.setAttribute("kendo-no-bullet","1");k(t.parentNode)}}}return u}Hn.getFontFaces=Wn;Hn.drawText=function(e){var t=new P;V._clipbox=false;V._matrix=p.unit();V._stackingContext={element:e,group:t};er(e,U(e),t);if(e.firstChild.nodeType==3){Pr(e,e.firstChild,t)}else{Cr(e,t)}tr();return t};var Nn=function(){var a=/^((-webkit-|-moz-|-o-|-ms-)?linear-gradient\s*)\(/;var f=/^([-0-9.]+%)/;var o=/^([-0-9.]+px)/;var h=/^(left|right|top|bottom|to|center)\W/;var p=/^([-0-9.]+(deg|grad|rad|turn)|0)/;var s=/^(\s+)/;var v=/^(\()/;var m=/^(\))/;var g=/^(,)/;var l=/^(url)\(/;var _=/^(.*?)\)/;var b={},t={};function i(d){var e=d;if(Un(b,e)){return b[e]}function i(){var e=s.exec(d);if(e){d=d.substr(e[1].length)}}function u(e){i();var t=e.exec(d);if(t){d=d.substr(t[1].length);return t[1]}}function c(){var e=kendo.parseColor(d,true);var t,i;if(e){var n=/^#[0-9a-f]+/i.exec(d)||/^rgba?\(.*?\)/i.exec(d)||/^..*?\b/.exec(d);d=d.substr(n[0].length);e=e.toRGB();if(!(t=u(o))){i=u(f)}return{color:e,length:t,percent:i}}}function t(e){var t;var i,n;var r=[];var a=false;if(u(v)){t=u(p);if(t=="0"){t="0deg"}if(t){t=fr(t);u(g)}else{i=u(h);if(i=="to"){i=u(h)}else if(i&&/^-/.test(e)){a=true}n=u(h);u(g)}if(/-moz-/.test(e)&&t==null&&i==null){var o=u(f),s=u(f);a=true;if(o=="0%"){i="left"}else if(o=="100%"){i="right"}if(s=="0%"){n="top"}else if(s=="100%"){n="bottom"}u(g)}while(d&&!u(m)){var l=c();if(!l){break}r.push(l);u(g)}return{type:"linear",angle:t,to:i&&n?i+" "+n:i?i:n?n:null,stops:r,reverse:a}}}function n(){if(u(v)){var e=u(_);e=e.replace(/^['"]+|["']+$/g,"");u(m);return{type:"url",url:e}}}var r;if(r=u(a)){r=t(r)}else if(r=u(l)){r=n()}return b[e]=r||{type:"none"}}return function(e){if(Un(t,e)){return t[e]}return t[e]=W(e).map(i)}}();var W=function(){var c={};return function(t,e){if(!e){e=/^\s*,\s*/}var i=t+e;if(Un(c,i)){return c[i]}var n=[];var r=0,a=0;var o=0;var s=false;var l;function d(e){return l=e.exec(t.substr(a))}function u(e){return e.replace(/^\s+|\s+$/g,"")}while(a<t.length){if(!s&&d(/^[\(\[\{]/)){o++;a++}else if(!s&&d(/^[\)\]\}]/)){o--;a++}else if(!s&&d(/^[\"\']/)){s=l[0];a++}else if(s=="'"&&d(/^\\\'/)){a+=2}else if(s=='"'&&d(/^\\\"/)){a+=2}else if(s=="'"&&d(/^\'/)){s=false;a++}else if(s=='"'&&d(/^\"/)){s=false;a++}else if(d(e)){if(!s&&!o&&a>r){n.push(u(t.substring(r,a)));r=a+l[0].length}a+=l[0].length}else{a++}}if(r<a){n.push(u(t.substring(r,a)))}return c[i]=n}}();var On=function(n){return function(e){var t=n[e];if(!t){var i;if(i=/url\((['"]?)([^'")]*?)\1\)\s+format\((['"]?)truetype\3\)/.exec(e)){t=n[e]=i[2]}else if(i=/url\((['"]?)([^'")]*?\.ttf)\1\)/.exec(e)){t=n[e]=i[2]}}return t}}(Object.create?Object.create(null):{});var Vn=function(i){return function(e){var t=i[e];if(t==null){t=i[e]=x.measureText("Mapq",{font:e}).height}return t}}(Object.create?Object.create(null):{});function Wn(e){if(e==null){e=document}var a={};for(var t=0;t<e.styleSheets.length;++t){d(e.styleSheets[t])}return a;function d(e){if(e){var t=null;try{t=e.cssRules}catch(e){}if(t){i(e,t)}}}function u(e){var t=j(e.style,"src");if(t){return W(t).reduce(function(e,t){var i=On(t);if(i){e.push(i)}return e},[])}else{var i=On(e.cssText);return i?[i]:[]}}function i(e,t){for(var i=0;i<t.length;++i){var n=t[i];switch(n.type){case 3:d(n.styleSheet);break;case 5:var r=n.style;var a=W(j(r,"font-family"));var o=/^([56789]00|bold)$/i.test(j(r,"font-weight"));var s="italic"==j(r,"font-style");var l=u(n);if(l.length>0){c(e,a,o,s,l[0])}}}}function c(e,t,i,n,r){if(!/^data:/i.test(r)){if(!(/^[^\/:]+:\/\//.test(r)||/^\//.test(r))){r=String(e.href).replace(/[^\/]*$/,"")+r}}t.forEach(function(e){e=e.replace(/^(['"]?)(.*?)\1$/,"$2");if(i){e+="|bold"}if(n){e+="|italic"}a[e]=r})}}function Un(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function jn(e){e="_counter_"+e;return V[e]}function Gn(e){var t=[],i=V;e="_counter_"+e;while(i){if(Un(i,e)){t.push(i[e])}i=Object.getPrototypeOf(i)}return t.reverse()}function qn(e,t){var i=V;e="_counter_"+e;while(i&&!Un(i,e)){i=Object.getPrototypeOf(i)}if(!i){i=V._root}i[e]=(i[e]||0)+(t==null?1:t)}function $n(e,t){e="_counter_"+e;V[e]=t==null?0:t}function Kn(e,t,i){for(var n=0;n<e.length;){var r=e[n++];var a=parseFloat(e[n]);if(isNaN(a)){t(r,i)}else{t(r,a);++n}}}function Yn(e){var t=j(e,"counter-reset");if(t){Kn(W(t,/^\s+/),$n,0)}var i=j(e,"counter-increment");if(i){Kn(W(i,/^\s+/),qn,1)}}function Qn(e,t){var i=kendo.parseColor(e,true);if(i){i=i.toRGB();if(t){i=i.toCssRgba()}else if(i.a===0){i=null}}return i}function Xn(e,t){var r=0;e.forEach(function(e){var t=e.querySelectorAll("img");for(var i=0;i<t.length;++i){var n=t[i];if(!n.complete){r++;n.onload=n.onerror=a}}});if(!r){a()}function a(){if(--r<=0){t()}}}function Zn(e,t){var i=[];function n(e){if(!Dn[e]){Dn[e]=true;i.push(e)}}function r(e){if(/^img$/i.test(e.tagName)){n(e.src)}Nn(j(U(e),"background-image")).forEach(function(e){if(e.type=="url"){n(e.url)}});if(e.children){O(e.children).forEach(r)}}if(Array.isArray(e)){e.forEach(r)}else{r(e)}var a=i.length;function o(){if(--a<=0){t()}}if(a===0){o()}i.forEach(function(e){var t=Dn[e]=new window.Image;if(!/^data:/i.test(e)){t.crossOrigin="Anonymous"}t.src=e;if(t.complete){o()}else{t.onload=o;t.onerror=function(){Dn[e]=null;o()}}})}function Jn(e){var t="";do{var i=e%26;t=String.fromCharCode(97+i)+t;e=Math.floor(e/26)}while(e>0);return t}function er(e,t,i){V=Object.create(V);V[e.tagName.toLowerCase()]={element:e,style:t};var n=j(t,"text-decoration");if(n&&n!="none"){var r=j(t,"color");n.split(/\s+/g).forEach(function(e){if(!V[e]){V[e]=r}})}if(rr(t)){V._stackingContext={element:e,group:i}}}function tr(){V=Object.getPrototypeOf(V)}function ir(e){if(V._clipbox!=null){var t=e.bbox(V._matrix);if(V._clipbox){V._clipbox=R.intersect(V._clipbox,t)}else{V._clipbox=t}}}function nr(){var e=V._clipbox;if(e==null){return true}if(e){return e.width()===0||e.height()===0}}function rr(t){function e(e){return j(t,e)}if(e("transform")!="none"||e("position")!="static"||e("z-index")!="auto"||e("opacity")<1){return true}}function U(e,t){return window.getComputedStyle(e,t||null)}function j(e,t,i){var n=e.getPropertyValue(t);if(n==null||n===""){if(N.webkit){n=e.getPropertyValue("-webkit-"+t)}else if(N.mozilla){n=e.getPropertyValue("-moz-"+t)}else if(N.opera){n=e.getPropertyValue("-o-"+t)}else if(En){n=e.getPropertyValue("-ms-"+t)}}if(arguments.length>2&&(n==null||n==="")){return i}else{return n}}function ar(e,t,i,n){e.setProperty(t,i,n);if(N.webkit){e.setProperty("-webkit-"+t,i,n)}else if(N.mozilla){e.setProperty("-moz-"+t,i,n)}else if(N.opera){e.setProperty("-o-"+t,i,n)}else if(En){e.setProperty("-ms-"+t,i,n);t="ms"+t.replace(/(^|-)([a-z])/g,function(e,t,i){return t+i.toUpperCase()});e[t]=i}}function G(e,t){t="border-"+t;return{width:parseFloat(j(e,t+"-width")),style:j(e,t+"-style"),color:Qn(j(e,t+"-color"),true)}}function or(e,t){var i=e.style.cssText;var n=t();e.style.cssText=i;return n}function sr(e,t){var i=j(e,"border-"+t+"-radius").split(/\s+/g).map(parseFloat);if(i.length==1){i.push(i[0])}return mr({x:i[0],y:i[1]})}function lr(e){var t=e.getBoundingClientRect();t=dr(t,"border-*-width",e);t=dr(t,"padding-*",e);return t}function dr(e,t,i){var n,r,a,o,s;if(typeof t=="string"){n=U(i);r=parseFloat(j(n,t.replace("*","top")));a=parseFloat(j(n,t.replace("*","right")));o=parseFloat(j(n,t.replace("*","bottom")));s=parseFloat(j(n,t.replace("*","left")))}else if(typeof t=="number"){r=a=o=s=t}return{top:e.top+r,right:e.right-a,bottom:e.bottom-o,left:e.left+s,width:e.right-e.left-a-s,height:e.bottom-e.top-o-r}}function ur(e){var t=j(e,"transform");if(t=="none"){return null}var i=/^\s*matrix\(\s*(.*?)\s*\)\s*$/.exec(t);if(i){var n=j(e,"transform-origin");i=i[1].split(/\s*,\s*/g).map(parseFloat);n=n.split(/\s+/g).map(parseFloat);return{matrix:i,origin:n}}}function cr(e){return 180*e/Math.PI%360}function fr(e){var t=parseFloat(e);if(/grad$/.test(e)){return Math.PI*t/200}else if(/rad$/.test(e)){return t}else if(/turn$/.test(e)){return Math.PI*t*2}else if(/deg$/.test(e)){return Math.PI*t/180}}function hr(e,t){t=new p(t[0],t[1],t[2],t[3],t[4],t[5]);e.transform(t);return t}function pr(e,t){e.clip(t)}function vr(e,t,i,n){var r=new c([t,i],n).curvePoints(),a=1;while(a<r.length){e.curveTo(r[a++],r[a++],r[a++])}}function mr(e){if(e.x<=0||e.y<=0){e.x=e.y=0}return e}function gr(e,t,i,n,r){var a=Math.max(0,t.x),o=Math.max(0,t.y);var s=Math.max(0,i.x),l=Math.max(0,i.y);var d=Math.max(0,n.x),u=Math.max(0,n.y);var c=Math.max(0,r.x),f=Math.max(0,r.y);var h=Math.min(e.width/(a+s),e.height/(l+u),e.width/(d+c),e.height/(f+o));if(h<1){a*=h;o*=h;s*=h;l*=h;d*=h;u*=h;c*=h;f*=h}return{tl:{x:a,y:o},tr:{x:s,y:l},br:{x:d,y:u},bl:{x:c,y:f}}}function _r(e,t,i){var n=U(e);var r=sr(n,"top-left");var a=sr(n,"top-right");var o=sr(n,"bottom-left");var s=sr(n,"bottom-right");if(i=="padding"||i=="content"){var l=G(n,"top");var d=G(n,"right");var u=G(n,"bottom");var c=G(n,"left");r.x-=c.width;r.y-=l.width;a.x-=d.width;a.y-=l.width;s.x-=d.width;s.y-=u.width;o.x-=c.width;o.y-=u.width;if(i=="content"){var f=parseFloat(j(n,"padding-top"));var h=parseFloat(j(n,"padding-right"));var p=parseFloat(j(n,"padding-bottom"));var v=parseFloat(j(n,"padding-left"));r.x-=v;r.y-=f;a.x-=h;a.y-=f;s.x-=h;s.y-=p;o.x-=v;o.y-=p}}if(typeof i=="number"){r.x-=i;r.y-=i;a.x-=i;a.y-=i;s.x-=i;s.y-=i;o.x-=i;o.y-=i}return br(t,r,a,s,o)}function br(e,t,i,n,r){var a=gr(e,t,i,n,r);var o=a.tl;var s=a.tr;var l=a.br;var d=a.bl;var u=new F({fill:null,stroke:null});u.moveTo(e.left,e.top+o.y);if(o.x){vr(u,e.left+o.x,e.top+o.y,{startAngle:-180,endAngle:-90,radiusX:o.x,radiusY:o.y})}u.lineTo(e.right-s.x,e.top);if(s.x){vr(u,e.right-s.x,e.top+s.y,{startAngle:-90,endAngle:0,radiusX:s.x,radiusY:s.y})}u.lineTo(e.right,e.bottom-l.y);if(l.x){vr(u,e.right-l.x,e.bottom-l.y,{startAngle:0,endAngle:90,radiusX:l.x,radiusY:l.y})}u.lineTo(e.left+d.x,e.bottom);if(d.x){vr(u,e.left+d.x,e.bottom-d.y,{startAngle:90,endAngle:180,radiusX:d.x,radiusY:d.y})}return u.close()}function wr(e,t){var i=String(parseFloat(e));switch(t){case"decimal-leading-zero":if(i.length<2){i="0"+i}return i;case"lower-roman":return q(e).toLowerCase();case"upper-roman":return q(e).toUpperCase();case"lower-latin":case"lower-alpha":return Jn(e-1);case"upper-latin":case"upper-alpha":return Jn(e-1).toUpperCase();default:return i}}function kr(i,e){function n(e,t,i){if(!i){return wr(jn(e)||0,t)}i=i.replace(/^\s*(["'])(.*)\1\s*$/,"$2");return Gn(e).map(function(e){return wr(e,t)}).join(i)}var t=W(e,/^\s+/);var r=[],a;t.forEach(function(e){var t;if(a=/^\s*(["'])(.*)\1\s*$/.exec(e)){r.push(a[2].replace(/\\([0-9a-f]{4})/gi,function(e,t){return String.fromCharCode(parseInt(t,16))}))}else if(a=/^\s*counter\((.*?)\)\s*$/.exec(e)){t=W(a[1]);r.push(n(t[0],t[1]))}else if(a=/^\s*counters\((.*?)\)\s*$/.exec(e)){t=W(a[1]);r.push(n(t[0],t[2],t[1]))}else if(a=/^\s*attr\((.*?)\)\s*$/.exec(e)){r.push(i.getAttribute(a[1])||"")}else{r.push(e)}});return r.join("")}function yr(e){if(e.cssText){return e.cssText}var t=[];for(var i=0;i<e.length;++i){t.push(e[i]+": "+j(e,e[i]))}return t.join(";\n")}function xr(a,e){if(a.tagName==Tn){Cr(a,e);return}var o=[];function t(e,t){var i=U(a,e),n=i.content;Yn(i);if(n&&n!="normal"&&n!="none"&&i.width!="0px"){var r=a.ownerDocument.createElement(Tn);r.style.cssText=yr(i);r.textContent=kr(a,n);a.insertBefore(r,t);o.push(r)}}t(":before",a.firstChild);t(":after",null);if(o.length>0){var i=a.className;a.className+=" kendo-pdf-hide-pseudo-elements";Cr(a,e);a.className=i;o.forEach(function(e){a.removeChild(e)})}else{Cr(a,e)}}function Cr(b,f){var d=U(b);var h=G(d,"top");var p=G(d,"right");var v=G(d,"bottom");var m=G(d,"left");var g=sr(d,"top-left");var _=sr(d,"top-right");var w=sr(d,"bottom-left");var k=sr(d,"bottom-right");var y=j(d,"direction");var r=j(d,"background-color");r=Qn(r);var a=Nn(j(d,"background-image"));var o=W(j(d,"background-repeat"));var s=W(j(d,"background-position"));var l=W(j(d,"background-origin"));var u=W(j(d,"background-size"));var e,t;if(En){e=d.textOverflow;if(e=="ellipsis"){t=b.style.textOverflow;b.style.textOverflow="clip"}}if(N.msie&&N.version<10){s=W(b.currentStyle.backgroundPosition)}var c=dr(b.getBoundingClientRect(),"border-*-width",b);(function(){var e=j(d,"clip");var t=/^\s*rect\((.*)\)\s*$/.exec(e);if(t){var i=t[1].split(/[ ,]+/g);var n=i[0]=="auto"?c.top:parseFloat(i[0])+c.top;var r=i[1]=="auto"?c.right:parseFloat(i[1])+c.left;var a=i[2]=="auto"?c.bottom:parseFloat(i[2])+c.top;var o=i[3]=="auto"?c.left:parseFloat(i[3])+c.left;var s=new P;var l=(new F).moveTo(o,n).lineTo(r,n).lineTo(r,a).lineTo(o,a).close();pr(s,l);f.append(s);f=s;ir(l)}})();var i,n,x;var C=j(d,"display");if(C=="table-row"){i=[];for(n=0,x=b.children;n<x.length;++n){i.push(x[n].getBoundingClientRect())}}else{i=b.getClientRects();if(i.length==1){i=[b.getBoundingClientRect()]}}i=T(i);for(n=0;n<i.length;++n){M(i[n],n===0,n==i.length-1)}if(b.tagName=="A"&&b.href&&!/^#?$/.test(b.getAttribute("href"))){if(!V._avoidLinks||!Pn(b,V._avoidLinks)){var S=document.createRange();S.selectNodeContents(b);O(S.getClientRects()).forEach(function(e){var t=new P;t._pdfLink={url:b.href,top:e.top,right:e.right,bottom:e.bottom,left:e.left};f.append(t)})}}if(i.length>0&&C=="list-item"&&!b.getAttribute("kendo-no-bullet")){I(i[0])}(function(){function e(){var e=_r(b,c,"padding");var t=new P;pr(t,e);f.append(t);f=t;ir(e)}if(Er(b)){e()}else if(/^(hidden|auto|scroll)/.test(j(d,"overflow"))){e()}else if(/^(hidden|auto|scroll)/.test(j(d,"overflow-x"))){e()}else if(/^(hidden|auto|scroll)/.test(j(d,"overflow-y"))){e()}})();if(!Tr(b,f)){Fr(b,f)}if(En&&e=="ellipsis"){b.style.textOverflow=t}return f;function T(e){if(/^td$/i.test(b.tagName)){var t=V.table;if(t&&j(t.style,"border-collapse")=="collapse"){var i=G(t.style,"left").width;var n=G(t.style,"top").width;if(i===0&&n===0){return e}var r=t.element.getBoundingClientRect();var a=t.element.rows[0].cells[0];var o=a.getBoundingClientRect();if(o.top==r.top||o.left==r.left){return O(e).map(function(e){return{left:e.left+i,top:e.top+n,right:e.right+i,bottom:e.bottom+n,height:e.height,width:e.width}})}}}return e}function D(o,e,s,t,i,n,r,a){if(s<=0){return}var l,d=new P;hr(d,a);f.append(d);mr(n);mr(r);l=new F({fill:{color:o},stroke:null});d.append(l);l.moveTo(n.x?Math.max(n.x,t):0,0).lineTo(e-(r.x?Math.max(r.x,i):0),0).lineTo(e-Math.max(r.x,i),s).lineTo(Math.max(n.x,t),s).close();if(n.x){u(t,n,[-1,0,0,1,n.x,0])}if(r.x){u(i,r,[1,0,0,1,e-r.x,0])}function u(e,t,i){var n=Math.PI/2*e/(e+s);var r={x:t.x-e,y:t.y-s};var a=new F({fill:{color:o},stroke:null}).moveTo(0,0);hr(a,i);vr(a,0,t.y,{startAngle:-90,endAngle:-cr(n),radiusX:t.x,radiusY:t.y});if(r.x>0&&r.y>0){a.lineTo(r.x*Math.cos(n),t.y-r.y*Math.sin(n));vr(a,0,t.y,{startAngle:-cr(n),endAngle:-90,radiusX:r.x,radiusY:r.y,anticlockwise:true})}else if(r.x>0){a.lineTo(r.x,s).lineTo(0,s)}else{a.lineTo(r.x,s).lineTo(r.x,0)}d.append(a.close())}}function A(e){var t=new P;pr(t,br(e,g,_,k,w));f.append(t);if(r){var i=new F({fill:{color:r.toCssRgba()},stroke:null});i.moveTo(e.left,e.top).lineTo(e.right,e.top).lineTo(e.right,e.bottom).lineTo(e.left,e.bottom).close();t.append(i)}for(var n=a.length;--n>=0;){E(t,e,a[n],o[n%o.length],s[n%s.length],l[n%l.length],u[n%u.length])}}function E(e,t,i,v,m,g,_){if(!i||i=="none"){return}if(i.type=="url"){if(/^url\(\"data:image\/svg/i.test(i.url)){return}var n=Dn[i.url];if(n&&n.width>0&&n.height>0){r(e,t,n.width,n.height,function(e,t){e.append(new Pt(i.url,t))})}}else if(i.type=="linear"){r(e,t,t.width,t.height,Sr(i))}else{return}function r(e,t,i,n,r){var a=i/n,o;var s=t;if(g=="content-box"){s=dr(s,"border-*-width",b);s=dr(s,"padding-*",b)}else if(g=="padding-box"){s=dr(s,"border-*-width",b)}if(!/^\s*auto(\s+auto)?\s*$/.test(_)){if(_=="contain"){o=Math.min(s.width/i,s.height/n);i*=o;n*=o}else if(_=="cover"){o=Math.max(s.width/i,s.height/n);i*=o;n*=o}else{var l=_.split(/\s+/g);if(/%$/.test(l[0])){i=s.width*parseFloat(l[0])/100}else{i=parseFloat(l[0])}if(l.length==1||l[1]=="auto"){n=i/a}else if(/%$/.test(l[1])){n=s.height*parseFloat(l[1])/100}else{n=parseFloat(l[1])}}}var d=String(m);switch(d){case"bottom":d="50% 100%";break;case"top":d="50% 0";break;case"left":d="0 50%";break;case"right":d="100% 50%";break;case"center":d="50% 50%";break}d=d.split(/\s+/);if(d.length==1){d[1]="50%"}if(/%$/.test(d[0])){d[0]=parseFloat(d[0])/100*(s.width-i)}else{d[0]=parseFloat(d[0])}if(/%$/.test(d[1])){d[1]=parseFloat(d[1])/100*(s.height-n)}else{d[1]=parseFloat(d[1])}var u=new R([s.left+d[0],s.top+d[1]],[i,n]);function c(){while(u.origin.x>t.left){u.origin.x-=i}}function f(){while(u.origin.y>t.top){u.origin.y-=n}}function h(){while(u.origin.x<t.right){r(e,u.clone());u.origin.x+=i}}if(v=="no-repeat"){r(e,u)}else if(v=="repeat-x"){c();h()}else if(v=="repeat-y"){f();while(u.origin.y<t.bottom){r(e,u.clone());u.origin.y+=n}}else if(v=="repeat"){c();f();var p=u.origin.clone();while(u.origin.y<t.bottom){u.origin.x=p.x;h();u.origin.y+=n}}}}function I(){var i=j(d,"list-style-type");if(i=="none"){return}var n=j(d,"list-style-position");function e(t){or(b,function(){b.style.position="relative";var e=b.ownerDocument.createElement(Tn);e.style.position="absolute";e.style.boxSizing="border-box";if(n=="outside"){e.style.width="6em";e.style.left="-6.8em";e.style.textAlign="right"}else{e.style.left="0px"}t(e);b.insertBefore(e,b.firstChild);Br(e,f);b.removeChild(e)})}function r(e){var t=b.parentNode.children;var i=b.getAttribute("kendo-split-index");if(i!=null){return e(i|0,t.length)}for(var n=0;n<t.length;++n){if(t[n]===b){return e(n,t.length)}}}switch(i){case"circle":case"disc":case"square":e(function(e){e.style.fontSize="60%";e.style.lineHeight="200%";e.style.paddingRight="0.5em";e.style.fontFamily="DejaVu Serif";e.innerHTML={disc:"",circle:"",square:""}[i]});break;case"decimal":case"decimal-leading-zero":e(function(t){r(function(e){++e;if(i=="decimal-leading-zero"&&e<10){e="0"+e}t.innerHTML=e+"."})});break;case"lower-roman":case"upper-roman":e(function(t){r(function(e){e=q(e+1);if(i=="upper-roman"){e=e.toUpperCase()}t.innerHTML=e+"."})});break;case"lower-latin":case"lower-alpha":case"upper-latin":case"upper-alpha":e(function(t){r(function(e){e=Jn(e);if(/^upper/i.test(i)){e=e.toUpperCase()}t.innerHTML=e+"."})});break}}function M(e,t,i){if(e.width===0||e.height===0){return}A(e);var n=m.width>0&&(t&&y=="ltr"||i&&y=="rtl");var r=p.width>0&&(i&&y=="ltr"||t&&y=="rtl");if(h.width===0&&m.width===0&&p.width===0&&v.width===0){return}if(h.color==p.color&&h.color==v.color&&h.color==m.color){if(h.width==p.width&&h.width==v.width&&h.width==m.width){if(n&&r){e=dr(e,h.width/2);var a=_r(b,e,h.width/2);a.options.stroke={color:h.color,width:h.width};f.append(a);return}}}if(g.x===0&&_.x===0&&k.x===0&&w.x===0){if(h.width<2&&m.width<2&&p.width<2&&v.width<2){if(h.width>0){f.append(new F({stroke:{width:h.width,color:h.color}}).moveTo(e.left,e.top+h.width/2).lineTo(e.right,e.top+h.width/2))}if(v.width>0){f.append(new F({stroke:{width:v.width,color:v.color}}).moveTo(e.left,e.bottom-v.width/2).lineTo(e.right,e.bottom-v.width/2))}if(n){f.append(new F({stroke:{width:m.width,color:m.color}}).moveTo(e.left+m.width/2,e.top).lineTo(e.left+m.width/2,e.bottom))}if(r){f.append(new F({stroke:{width:p.width,color:p.color}}).moveTo(e.right-p.width/2,e.top).lineTo(e.right-p.width/2,e.bottom))}return}}var o=gr(e,g,_,k,w);var s=o.tl;var l=o.tr;var d=o.br;var u=o.bl;D(h.color,e.width,h.width,m.width,p.width,s,l,[1,0,0,1,e.left,e.top]);D(v.color,e.width,v.width,p.width,m.width,d,u,[-1,0,0,-1,e.right,e.bottom]);function c(e){return{x:e.y,y:e.x}}D(m.color,e.height,m.width,v.width,h.width,c(u),c(s),[0,-1,1,0,e.left,e.bottom]);D(p.color,e.height,p.width,h.width,v.width,c(l),c(d),[0,1,-1,0,e.right,e.top])}}function Sr(g){return function(e,t){var i=t.width(),n=t.height();switch(g.type){case"linear":var r=g.angle!=null?g.angle:Math.PI;switch(g.to){case"top":r=0;break;case"left":r=-Math.PI/2;break;case"bottom":r=Math.PI;break;case"right":r=Math.PI/2;break;case"top left":case"left top":r=-Math.atan2(n,i);break;case"top right":case"right top":r=Math.atan2(n,i);break;case"bottom left":case"left bottom":r=Math.PI+Math.atan2(n,i);break;case"bottom right":case"right bottom":r=Math.PI-Math.atan2(n,i);break}if(g.reverse){r-=Math.PI}r%=2*Math.PI;if(r<0){r+=2*Math.PI}var a=Math.abs(i*Math.sin(r))+Math.abs(n*Math.cos(r));var o=Math.atan(i*Math.tan(r)/n);var s=Math.sin(o),l=Math.cos(o);var d=Math.abs(s)+Math.abs(l);var u=d/2*s;var c=d/2*l;if(r>Math.PI/2&&r<=3*Math.PI/2){u=-u;c=-c}var f=[],h=0;var p=g.stops.map(function(e,t){var i=e.percent;if(i){i=parseFloat(i)/100}else if(e.length){i=parseFloat(e.length)/a}else if(t===0){i=0}else if(t==g.stops.length-1){i=1}var n={color:e.color.toCssRgba(),offset:i};if(i!=null){h=i;f.forEach(function(e,t){var i=e.stop;i.offset=e.left+(h-e.left)*(t+1)/(f.length+1)});f=[]}else{f.push({left:h,stop:n})}return n});var v=[.5-u,.5+c];var m=[.5+u,.5-c];e.append(F.fromRect(t).stroke(null).fill(new ai({start:v,end:m,stops:p,userSpace:false})));break;case"radial":if(window.console&&window.console.log){window.console.log("Radial gradients are not yet supported in HTML renderer")}break}}}function Tr(e,t){var i;if(e._kendoExportVisual){i=e._kendoExportVisual()}else if(window.kendo&&window.kendo.jQuery&&e.getAttribute(window.kendo.attr("role"))){var n=window.kendo.widgetInstance(window.kendo.jQuery(e));if(n&&(n.exportDOMVisual||n.exportVisual)){if(n.exportDOMVisual){i=n.exportDOMVisual()}else{i=n.exportVisual()}}}if(!i){return false}var r=new P;r.children.push(i);var a=e.getBoundingClientRect();r.transform(T().translate(a.left,a.top));t.append(r);return true}function Dr(e,t,i){var n=lr(e);var r=new R([n.left,n.top],[n.width,n.height]);var a=new Pt(t,r);pr(a,_r(e,n,"content"));i.append(a)}function Ar(e,t){var i=U(e);var n=U(t);var r=parseFloat(j(i,"z-index"));var a=parseFloat(j(n,"z-index"));var o=j(i,"position");var s=j(n,"position");if(isNaN(r)&&isNaN(a)){if(/static|absolute/.test(o)&&/static|absolute/.test(s)){return 0}if(o=="static"){return-1}if(s=="static"){return 1}return 0}if(isNaN(r)){return a===0?0:a>0?-1:1}if(isNaN(a)){return r===0?0:r>0?1:-1}return parseFloat(r)-parseFloat(a)}function Er(e){return/^(?:textarea|select|input)$/i.test(e.tagName)}function Ir(e){if(e.selectedOptions&&e.selectedOptions.length>0){return e.selectedOptions[0]}return e.options[e.selectedIndex]}function Mr(e,t){var i=U(e);var n=j(i,"color");var r=e.getBoundingClientRect();if(e.type=="checkbox"){t.append(F.fromRect(new R([r.left+1,r.top+1],[r.width-2,r.height-2])).stroke(n,1));if(e.checked){t.append((new F).stroke(n,1.2).moveTo(r.left+.22*r.width,r.top+.55*r.height).lineTo(r.left+.45*r.width,r.top+.75*r.height).lineTo(r.left+.78*r.width,r.top+.22*r.width))}}else{t.append(new ot(new ye([(r.left+r.right)/2,(r.top+r.bottom)/2],Math.min(r.width-2,r.height-2)/2)).stroke(n,1));if(e.checked){t.append(new ot(new ye([(r.left+r.right)/2,(r.top+r.bottom)/2],Math.min(r.width-8,r.height-8)/2)).fill(n).stroke(null))}}}function Rr(e,t){var i=e.tagName.toLowerCase();if(i=="input"&&(e.type=="checkbox"||e.type=="radio")){return Mr(e,t)}var n=e.parentNode;var r=e.ownerDocument;var a=r.createElement(Tn);var o;a.style.cssText=yr(U(e));if(i=="input"){a.style.whiteSpace="pre"}if(i=="select"||i=="textarea"){a.style.overflow="auto"}if(i=="select"){if(e.multiple){for(var s=0;s<e.options.length;++s){o=r.createElement(Tn);o.style.cssText=yr(U(e.options[s]));o.style.display="block";o.textContent=e.options[s].textContent;a.appendChild(o)}}else{o=Ir(e);if(o){a.textContent=o.textContent}}}else{a.textContent=e.value}n.insertBefore(a,e);a.scrollLeft=e.scrollLeft;a.scrollTop=e.scrollTop;e.style.display="none";Fr(a,t);e.style.display="";n.removeChild(a)}function Fr(e,t){if(V._stackingContext.element===e){V._stackingContext.group=t}switch(e.tagName.toLowerCase()){case"img":Dr(e,e.src,t);break;case"canvas":try{Dr(e,e.toDataURL("image/png"),t)}catch(e){}break;case"textarea":case"input":case"select":Rr(e,t);break;default:var i=[],n=[],r=[];for(var a=e.firstChild;a;a=a.nextSibling){switch(a.nodeType){case 3:if(/\S/.test(a.data)){Pr(e,a,t)}break;case 1:var o=U(a);var s=j(o,"float");var l=j(o,"position");if(l!="static"){r.push(a)}else if(s!="none"){n.push(a)}else{i.push(a)}break}}se(i,Ar).forEach(function(e){Br(e,t)});se(n,Ar).forEach(function(e){Br(e,t)});se(r,Ar).forEach(function(e){Br(e,t)})}}function Pr(e,d,a){if(nr()){return}var t=U(e);if(parseFloat(j(t,"text-indent"))<-500){return}var u=d.data;var c=0;var f=u.search(/\S\s*$/)+1;if(!f){return}var o=j(t,"font-size");var s=j(t,"line-height");var l=[j(t,"font-style"),j(t,"font-variant"),j(t,"font-weight"),o,j(t,"font-family")].join(" ");o=parseFloat(o);s=parseFloat(s);if(o===0){return}var h=j(t,"color");var p=e.ownerDocument.createRange();var i=j(t,"text-align");var v=i=="justify";var m=j(t,"column-count",1);var g=j(t,"white-space");var _=j(t,"text-transform");var b=e.getBoundingClientRect().width/o*5;if(b===0){b=500}var w=null;var n=V["underline"];var k=V["line-through"];var y=V["overline"];var r=n||k||y;while(!C()){}if(r){p.selectNode(d);O(p.getClientRects()).forEach(T)}return;function x(e){if(En||N.chrome){var t=e.getClientRects(),i={top:Infinity,right:-Infinity,bottom:-Infinity,left:Infinity},n=false;for(var r=0;r<t.length;++r){var a=t[r];if(a.width<=1||a.bottom===w){continue}i.left=Math.min(a.left,i.left);i.top=Math.min(a.top,i.top);i.right=Math.max(a.right,i.right);i.bottom=Math.max(a.bottom,i.bottom);n=true}if(!n){return e.getBoundingClientRect()}i.width=i.right-i.left;i.height=i.bottom-i.top;return i}return e.getBoundingClientRect()}function C(){var e=c;var a,t=u.substr(c).search(/\S/);c+=t;if(t<0||c>=f){return true}p.setStart(d,c);p.setEnd(d,c+1);a=x(p);var i=false;if(v||m>1){t=u.substr(c).search(/\s/);if(t>=0){p.setEnd(d,c+t);var n=x(p);if(n.bottom==a.bottom){a=n;i=true;c+=t}}}if(!i){t=function e(t,i,n){p.setEnd(d,i);var r=x(p);if(r.bottom!=a.bottom&&t<i){return e(t,t+i>>1,i)}else if(r.right!=a.right){a=r;if(i<n){return e(i,i+n>>1,n)}else{return i}}else{return i}}(c,Math.min(f,c+b),f);if(t==c){return true}c=t;t=p.toString().search(/\s+$/);if(t===0){return false}if(t>0){p.setEnd(d,p.startOffset+t);a=x(p)}}if(En){a=p.getClientRects()[0]}var r=p.toString();if(!/^(?:pre|pre-wrap)$/i.test(g)){r=r.replace(/\s+/g," ")}else if(/\t/.test(r)){var o=0;for(t=e;t<p.startOffset;++t){var s=u.charCodeAt(t);if(s==9){o+=8-o%8}else if(s==10||s==13){o=0}else{o++}}while((t=r.search("\t"))>=0){var l="        ".substr(0,8-(o+t)%8);r=r.substr(0,t)+l+r.substr(t+1)}}if(!i){w=a.bottom}S(r,a)}function S(e,t){if(En&&!isNaN(s)){var i=Vn(l);var n=(t.top+t.bottom-i)/2;t={top:n,right:t.right,bottom:n+i,left:t.left,height:i,width:t.right-t.left}}switch(_){case"uppercase":e=e.toUpperCase();break;case"lowercase":e=e.toLowerCase();break;case"capitalize":e=e.replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()});break}var r=new In(e,new R([t.left,t.top],[t.width,t.height]),{font:l,fill:{color:h}});a.append(r)}function T(r){e(n,r.bottom);e(k,r.bottom-r.height/2.7);e(y,r.top);function e(e,t){if(e){var i=o/12;var n=new F({stroke:{width:i,color:e}});t-=i;n.moveTo(r.left,t).lineTo(r.right,t);a.append(n)}}}}function zr(e,t,i){var n;if(i!="auto"){n=V._stackingContext.group;i=parseFloat(i)}else{n=t;i=0}var r=n.children;for(var a=0;a<r.length;++a){if(r[a]._dom_zIndex!=null&&r[a]._dom_zIndex>i){break}}var o=new P;n.insert(a,o);o._dom_zIndex=i;if(n!==t){if(V._clipbox){var s=V._matrix.invert();var l=V._clipbox.transformCopy(s);pr(o,F.fromRect(l))}}return o}function Br(r,e){var a=U(r);Yn(a);if(/^(style|script|link|meta|iframe|svg|col|colgroup)$/i.test(r.tagName)){return}if(V._clipbox==null){return}var t=parseFloat(j(a,"opacity"));var i=j(a,"visibility");var n=j(a,"display");if(t===0||i=="hidden"||n=="none"){return}var o=ur(a);var s;var l=j(a,"z-index");if((o||t<1)&&l=="auto"){l=0}s=zr(r,e,l);if(t<1){s.opacity(t*s.opacity())}er(r,a,s);if(!o){xr(r,s)}else{or(r,function(){ar(r.style,"transform","none","important");ar(r.style,"transition","none","important");if(j(a,"position")=="static"){ar(r.style,"position","relative","important")}var e=r.getBoundingClientRect();var t=e.left+o.origin[0];var i=e.top+o.origin[1];var n=[1,0,0,1,-t,-i];n=Lr(n,o.matrix);n=Lr(n,[1,0,0,1,t,i]);n=hr(s,n);V._matrix=V._matrix.multiplyCopy(n);xr(r,s)})}tr()}function Lr(e,t){var i=e[0],n=e[1],r=e[2],a=e[3],o=e[4],s=e[5];var l=t[0],d=t[1],u=t[2],c=t[3],f=t[4],h=t[5];return[i*l+n*u,i*d+n*c,r*l+a*u,r*d+a*c,o*l+s*u+f,o*d+s*c+h]}var Hr={svg:tn,canvas:xn,util:Qe,PathParser:At,Surface:s,BaseNode:d,SurfaceFactory:pi,OptionsStore:Ze,exportImage:Cn,exportSVG:Sn,QuadNode:dn,ShapesQuadTree:fn,ObserversMixin:e,Element:n,Circle:ot,Arc:It,Path:F,MultiPath:gt,Text:Ft,Image:Pt,Group:P,Layout:Wt,Rect:Ut,align:Gt,vAlign:qt,stack:Yt,vStack:Qt,wrap:Jt,vWrap:ei,fit:ti,LinearGradient:ai,RadialGradient:oi,GradientStop:o,Gradient:t,Animation:hi,AnimationFactory:ci,drawDOM:Hn};kendo.deepExtend(kendo,{drawing:Hr,geometry:Ge});kendo.drawing.Segment=kendo.geometry.Segment;kendo.dataviz.drawing=kendo.drawing;kendo.dataviz.geometry=kendo.geometry;kendo.drawing.util.measureText=kendo.util.measureText;kendo.drawing.util.objectKey=kendo.util.objectKey;kendo.drawing.Color=kendo.Color;kendo.util.encodeBase64=kendo.drawing.util.encodeBase64})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.popup",["kendo.core"],e)})(function(){var e={id:"popup",name:"Pop-up",category:"framework",depends:["core"],advanced:true};(function(R,u){var F=window.kendo,e=F.ui,r=e.Widget,T=F.Class,P=F.support,z=F.getOffset,B=F._outerWidth,L=F._outerHeight,c="open",s="close",i="deactivate",a="activate",b="center",t="left",w="right",f="top",k="bottom",H="absolute",h="hidden",p="body",N="location",O="position",o="visible",v="effects",n="k-state-active",l="k-state-border",D=/k-state-border-(\w+)/,d=".k-picker-wrap, .k-dropdown-wrap, .k-link",A="down",m=R(document.documentElement),E=R.proxy,I=R(window),g="scroll",M=P.transitions.css,_=M+"transform",V=R.extend,y=".kendoPopup",x=["font-size","font-family","font-stretch","font-style","font-weight","line-height"];function C(e,t){if(!e||!t){return false}return e===t||R.contains(e,t)}var W=r.extend({init:function(e,t){var i=this,n;t=t||{};if(t.isRtl){t.origin=t.origin||k+" "+w;t.position=t.position||f+" "+w}r.fn.init.call(i,e,t);e=i.element;t=i.options;i.collisions=t.collision?t.collision.split(" "):[];i.downEvent=F.applyEventMap(A,F.guid());if(i.collisions.length===1){i.collisions.push(i.collisions[0])}n=R(i.options.anchor).closest(".k-popup,.k-group").filter(":not([class^=km-])");t.appendTo=R(R(t.appendTo)[0]||n[0]||document.body);i.element.hide().addClass("k-popup k-group k-reset").toggleClass("k-rtl",!!t.isRtl).css({position:H}).appendTo(t.appendTo).attr("aria-hidden",true).on("mouseenter"+y,function(){i._hovered=true}).on("wheel"+y,function(e){var t=R(e.target).find(".k-list");var i=t.parent();if(t.length&&t.is(":visible")&&(i.scrollTop()===0&&e.originalEvent.deltaY<0||i.scrollTop()===i.prop("scrollHeight")-i.prop("offsetHeight")&&e.originalEvent.deltaY>0)){e.preventDefault()}}).on("mouseleave"+y,function(){i._hovered=false});i.wrapper=R();if(t.animation===false){t.animation={open:{effects:{}},close:{hide:true,effects:{}}}}V(t.animation.open,{complete:function(){i.wrapper.css({overflow:o});i._activated=true;i._trigger(a)}});V(t.animation.close,{complete:function(){i._animationClose()}});i._mousedownProxy=function(e){i._mousedown(e)};if(P.mobileOS.android){i._resizeProxy=function(e){setTimeout(function(){i._resize(e)},600)}}else{i._resizeProxy=function(e){i._resize(e)}}if(t.toggleTarget){R(t.toggleTarget).on(t.toggleEvent+y,R.proxy(i.toggle,i))}},events:[c,a,s,i],options:{name:"Popup",toggleEvent:"click",origin:k+" "+t,position:f+" "+t,anchor:p,appendTo:null,collision:"flip fit",viewport:window,copyAnchorStyles:true,autosize:false,modal:false,adjustSize:{width:0,height:0},animation:{open:{effects:"slideIn:down",transition:true,duration:200},close:{duration:100,hide:true}}},_animationClose:function(){var e=this;var t=e.wrapper.data(N);e.wrapper.hide();if(t){e.wrapper.css(t)}if(e.options.anchor!=p){e._hideDirClass()}e._closing=false;e._trigger(i)},destroy:function(){var e=this,t=e.options,i=e.element.off(y),n;r.fn.destroy.call(e);if(t.toggleTarget){R(t.toggleTarget).off(y)}if(!t.modal){m.off(e.downEvent,e._mousedownProxy);e._toggleResize(false)}F.destroy(e.element.children());i.removeData();if(t.appendTo[0]===document.body){n=i.parent(".k-animation-container");if(n[0]){n.remove()}else{i.remove()}}},open:function(e,t){var i=this,n={isFixed:!isNaN(parseInt(t,10)),x:e,y:t},r=i.element,a=i.options,o,s,l=R(a.anchor),d=r[0]&&r.hasClass("km-widget");if(!i.visible()){if(a.copyAnchorStyles){if(d&&x[0]=="font-size"){x.shift()}r.css(F.getComputedStyles(l[0],x))}if(r.data("animating")||i._trigger(c)){return}i._activated=false;if(!a.modal){m.off(i.downEvent,i._mousedownProxy).on(i.downEvent,i._mousedownProxy);i._toggleResize(false);i._toggleResize(true)}i.wrapper=s=F.wrap(r,a.autosize).css({overflow:h,display:"block",position:H}).attr("aria-hidden",false);if(P.mobileOS.android){s.css(_,"translatez(0)")}s.css(O);if(R(a.appendTo)[0]==document.body){s.css(f,"-10000px")}i.flipped=i._position(n);o=i._openAnimation();if(a.anchor!=p){i._showDirClass(o)}if(!r.is(":visible")&&r.data("olddisplay")===u){r.show();r.data("olddisplay",r.css("display"));r.hide()}r.data(v,o.effects).kendoStop(true).kendoAnimate(o).attr("aria-hidden",false)}},_location:function(e){var t=this,i=t.element,n=t.options,r,a=R(n.anchor),o=i[0]&&i.hasClass("km-widget");if(n.copyAnchorStyles){if(o&&x[0]=="font-size"){x.shift()}i.css(F.getComputedStyles(a[0],x))}t.wrapper=r=F.wrap(i,n.autosize).css({overflow:h,display:"block",position:H});if(P.mobileOS.android){r.css(_,"translatez(0)")}r.css(O);if(R(n.appendTo)[0]==document.body){r.css(f,"-10000px")}t._position(e||{});var s=r.offset();return{width:F._outerWidth(r),height:F._outerHeight(r),left:s.left,top:s.top}},_openAnimation:function(){var e=V(true,{},this.options.animation.open);e.effects=F.parseEffects(e.effects,this.flipped);return e},_hideDirClass:function(){var e=R(this.options.anchor);var t=((e.attr("class")||"").match(D)||["","down"])[1];var i=l+"-"+t;e.removeClass(i).children(d).removeClass(n).removeClass(i);this.element.removeClass(l+"-"+F.directions[t].reverse)},_showDirClass:function(e){var t=e.effects.slideIn?e.effects.slideIn.direction:"down";var i=l+"-"+t;R(this.options.anchor).addClass(i).children(d).addClass(n).addClass(i);this.element.addClass(l+"-"+F.directions[t].reverse)},position:function(){if(this.visible()){this.flipped=this._position()}},toggle:function(){var e=this;e[e.visible()?s:c]()},visible:function(){return this.element.is(":"+o)},close:function(i){var e=this,t=e.options,n,r,a,o;if(e.visible()){n=e.wrapper[0]?e.wrapper:F.wrap(e.element).hide();e._toggleResize(false);if(e._closing||e._trigger(s)){e._toggleResize(true);return}e.element.find(".k-popup").each(function(){var e=R(this),t=e.data("kendoPopup");if(t){t.close(i)}});m.off(e.downEvent,e._mousedownProxy);if(i){r={hide:true,effects:{}}}else{r=V(true,{},t.animation.close);a=e.element.data(v);o=r.effects;if(!o&&!F.size(o)&&a&&F.size(a)){r.effects=a;r.reverse=true}e._closing=true}e.element.kendoStop(true).attr("aria-hidden",true);n.css({overflow:h}).attr("aria-hidden",true);e.element.kendoAnimate(r);if(i){e._animationClose()}}},_trigger:function(e){return this.trigger(e,{type:e})},_resize:function(e){var t=this;if(P.resize.indexOf(e.type)!==-1){clearTimeout(t._resizeTimeout);t._resizeTimeout=setTimeout(function(){t._position();t._resizeTimeout=null},50)}else{if(!t._hovered||t._activated&&t.element.hasClass("k-list-container")){t.close()}}},_toggleResize:function(e){var t=e?"on":"off";var i=P.resize;if(!(P.mobileOS.ios||P.mobileOS.android||P.browser.safari)){i+=" "+g}if(e&&!this.scrollableParents){this.scrollableParents=this._scrollableParents()}if(this.scrollableParents&&this.scrollableParents.length){this.scrollableParents[t](g,this._resizeProxy)}I[t](i,this._resizeProxy)},_mousedown:function(e){var t=this,i=t.element[0],n=t.options,r=R(n.anchor)[0],a=n.toggleTarget,o=F.eventTarget(e),s=R(o).closest(".k-popup"),l=s.parent().parent(".km-shim").length;s=s[0];if(!l&&s&&s!==t.element[0]){return}if(R(e.target).closest("a").data("rel")==="popover"){return}if(!C(i,o)&&!C(r,o)&&!(a&&C(R(a)[0],o))){t.close()}},_fit:function(e,t,i){var n=0;if(e+t>i){n=i-(e+t)}if(e<0){n=-e}return n},_flip:function(e,t,i,n,r,a,o){var s=0;o=o||t;if(a!==r&&a!==b&&r!==b){if(e+o>n){s+=-(i+t)}if(e+s<0){s+=i+t}}return s},_scrollableParents:function(){return R(this.options.anchor).parentsUntil("body").filter(function(e,t){return F.isScrollable(t)})},_position:function(e){var t=this,i=t.element,n=t.wrapper,r=t.options,a=R(r.viewport),o=P.zoomLevel(),s=!!(a[0]==window&&window.innerWidth&&o<=1.02),l=R(r.anchor),d=r.origin.toLowerCase().split(" "),u=r.position.toLowerCase().split(" "),c=t.collisions,f,h,p,v=10002,m=0,g=document.documentElement,_,b,w,k;if(r.viewport===window){b={top:window.pageYOffset||document.documentElement.scrollTop||0,left:window.pageXOffset||document.documentElement.scrollLeft||0}}else{b=a.offset()}if(s){w=window.innerWidth;k=window.innerHeight}else{w=a.width();k=a.height()}if(s&&g.scrollHeight-g.clientHeight>0){var y=r.isRtl?-1:1;w-=y*F.support.scrollbar()}f=l.parents().filter(n.siblings());if(f[0]){p=Math.max(Number(f.css("zIndex")),0);if(p){v=p+10}else{h=l.parentsUntil(f);for(_=h.length;m<_;m++){p=Number(R(h[m]).css("zIndex"));if(p&&v<p){v=p+10}}}}n.css("zIndex",v);if(e&&e.isFixed){n.css({left:e.x,top:e.y})}else{n.css(t._align(d,u))}var x=z(n,O,l[0]===n.offsetParent()[0]),C=z(n),S=l.offsetParent().parent(".k-animation-container,.k-popup,.k-group");if(S.length){x=z(n,O,true);C=z(n)}C.top-=b.top;C.left-=b.left;if(!t.wrapper.data(N)){n.data(N,V({},x))}var T=V({},C),D=V({},x),A=r.adjustSize;if(c[0]==="fit"){D.top+=t._fit(T.top,L(n)+A.height,k/o)}if(c[1]==="fit"){D.left+=t._fit(T.left,B(n)+A.width,w/o)}var E=V({},D);var I=L(i);var M=L(n);if(!n.height()&&I){M=M+I}if(c[0]==="flip"){D.top+=t._flip(T.top,I,L(l),k/o,d[0],u[0],M)}if(c[1]==="flip"){D.left+=t._flip(T.left,B(i),B(l),w/o,d[1],u[1],B(n))}i.css(O,H);n.css(D);return D.left!=E.left||D.top!=E.top},_align:function(e,t){var i=this,n=i.wrapper,r=R(i.options.anchor),a=e[0],o=e[1],s=t[0],l=t[1],d=z(r),u=R(i.options.appendTo),c,f=B(n),h=L(n)||L(n.children().first()),p=B(r),v=L(r),m=d.top,g=d.left,_=Math.round;if(u[0]!=document.body){c=z(u);m-=c.top;g-=c.left}if(a===k){m+=v}if(a===b){m+=_(v/2)}if(s===k){m-=h}if(s===b){m-=_(h/2)}if(o===w){g+=p}if(o===b){g+=_(p/2)}if(l===w){g-=f}if(l===b){g-=_(f/2)}return{top:m,left:g}}});e.plugin(W);var U=F.support.stableSort;var S="kendoTabKeyTrap";var j="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex], *[contenteditable]";var G=T.extend({init:function(e){this.element=R(e);this.element.autoApplyNS(S)},trap:function(){this.element.on("keydown",E(this._keepInTrap,this))},removeTrap:function(){this.element.kendoDestroy(S)},destroy:function(){this.element.kendoDestroy(S);this.element=u},shouldTrap:function(){return true},_keepInTrap:function(e){if(e.which!==9||!this.shouldTrap()||e.isDefaultPrevented()){return}var t=this._focusableElements();var i=this._sortFocusableElements(t);var n=this._nextFocusable(e,i);this._focus(n);e.preventDefault()},_focusableElements:function(){var e=this.element.find(j).filter(function(e,t){return t.tabIndex>=0&&R(t).is(":visible")&&!R(t).is("[disabled]")});if(this.element.is("[tabindex]")){e.push(this.element[0])}return e},_sortFocusableElements:function(e){var t;if(U){t=e.sort(function(e,t){return e.tabIndex-t.tabIndex})}else{var i="__k_index";e.each(function(e,t){t.setAttribute(i,e)});t=e.sort(function(e,t){return e.tabIndex===t.tabIndex?parseInt(e.getAttribute(i),10)-parseInt(t.getAttribute(i),10):e.tabIndex-t.tabIndex});e.removeAttr(i)}return t},_nextFocusable:function(e,t){var i=t.length;var n=t.index(e.target);return t.get((n+(e.shiftKey?-1:1))%i)},_focus:function(e){if(e.nodeName=="IFRAME"){e.contentWindow.document.body.focus();return}e.focus();if(e.nodeName=="INPUT"&&e.setSelectionRange&&this._haveSelectionRange(e)){e.setSelectionRange(0,e.value.length)}},_haveSelectionRange:function(e){var t=e.type.toLowerCase();return t==="text"||t==="search"||t==="url"||t==="tel"||t==="password"}});e.Popup.TabKeyTrap=G})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("drawing/surface-tooltip",["kendo.popup","drawing/kendo-drawing"],e)})(function(){(function(i){var t=".kendo";var r=window.kendo;var n=r.deepExtend;var e=r.drawing.util;var a=e.defined;var m=e.limitValue;var g=e.eventCoordinates;var o=r._outerWidth;var s=r._outerHeight;var l=i.proxy;var d='<div class="k-tooltip">'+'<div class="k-tooltip-content"></div>'+"</div>";var u='<div class="k-tooltip-button"><a href="\\#" class="k-icon k-i-close">close</a></div>';var c=r.Class.extend({init:function(e,t){this.element=i(d);this.content=this.element.children(".k-tooltip-content");t=t||{};this.options=n({},this.options,this._tooltipOptions(t));this.popupOptions={appendTo:t.appendTo,animation:t.animation,copyAnchorStyles:false,collision:"fit fit"};this._openPopupHandler=i.proxy(this._openPopup,this);this.surface=e;this._bindEvents()},options:{position:"top",showOn:"mouseenter",offset:7,autoHide:true,hideDelay:0,showAfter:100},_bindEvents:function(){this._showHandler=l(this._showEvent,this);this._surfaceLeaveHandler=l(this._surfaceLeave,this);this._mouseleaveHandler=l(this._mouseleave,this);this._mousemoveHandler=l(this._mousemove,this);this.surface.bind("click",this._showHandler);this.surface.bind("mouseenter",this._showHandler);this.surface.bind("mouseleave",this._mouseleaveHandler);this.surface.bind("mousemove",this._mousemoveHandler);this.surface.element.on("mouseleave"+t,this._surfaceLeaveHandler);this.element.on("click"+t,".k-tooltip-button",l(this._hideClick,this));this.element.on("mouseleave"+t,l(this._tooltipLeave,this))},getPopup:function(){if(!this.popup){this.popup=new r.ui.Popup(this.element,this.popupOptions)}return this.popup},destroy:function(){var e=this.popup;this.surface.unbind("click",this._showHandler);this.surface.unbind("mouseenter",this._showHandler);this.surface.unbind("mouseleave",this._mouseleaveHandler);this.surface.unbind("mousemove",this._mousemoveHandler);this.surface.element.off("mouseleave"+t,this._surfaceLeaveHandler);this.element.off("click"+t);this.element.off("mouseleave"+t);if(e){e.destroy();delete this.popup}delete this.popupOptions;clearTimeout(this._timeout);delete this.element;delete this.content;delete this.surface},_tooltipOptions:function(e){e=e||{};return{position:e.position,showOn:e.showOn,offset:e.offset,autoHide:e.autoHide,width:e.width,height:e.height,content:e.content,shared:e.shared,hideDelay:e.hideDelay,showAfter:e.showAfter}},_tooltipShape:function(e){while(e&&!e.options.tooltip){e=e.parent}return e},_updateContent:function(e,t,i){var n=i.content;if(r.isFunction(n)){n=n({element:t,target:e})}if(n){this.content.html(n);return true}},_position:function(e,t,i,n){var r=t.position;var a=t.offset||0;var o=this.surface;var s=o._instance._elementOffset();var l=o.getSize();var d=o._instance._offset;var u=e.bbox();var c=i.width;var f=i.height;var h=0,p=0;u.origin.translate(s.left,s.top);if(d){u.origin.translate(-d.x,-d.y)}if(r=="cursor"&&n){var v=g(n);h=v.x-c/2;p=v.y-f-a}else if(r=="left"){h=u.origin.x-c-a;p=u.center().y-f/2}else if(r=="right"){h=u.bottomRight().x+a;p=u.center().y-f/2}else if(r=="bottom"){h=u.center().x-c/2;p=u.bottomRight().y+a}else{h=u.center().x-c/2;p=u.origin.y-f-a}return{left:m(h,s.left,s.left+l.width),top:m(p,s.top,s.top+l.height)}},show:function(e,t){this._show(e,e,n({},this.options,this._tooltipOptions(e.options.tooltip),t))},hide:function(){var e=this.popup;var t=this._current;delete this._current;clearTimeout(this._showTimeout);if(e&&e.visible()&&t&&!this.surface.trigger("tooltipClose",{element:t.shape,target:t.target,popup:e})){e.close()}},_hideClick:function(e){e.preventDefault();this.hide()},_show:function(e,t,i,n,r){var a=this._current;clearTimeout(this._timeout);if(a&&(a.shape===t&&i.shared||a.target===e)){return}clearTimeout(this._showTimeout);var o=this.getPopup();if(!this.surface.trigger("tooltipOpen",{element:t,target:e,popup:o})&&this._updateContent(e,t,i)){this._autoHide(i);var s=this._measure(i);if(o.visible()){o.close(true)}this._current={options:i,elementSize:s,shape:t,target:e,position:this._position(i.shared?t:e,i,s,n)};if(r){this._showTimeout=setTimeout(this._openPopupHandler,i.showAfter||0)}else{this._openPopup()}}},_openPopup:function(){var e=this._current;var t=e.position;this.getPopup().open(t.left,t.top)},_autoHide:function(e){if(e.autoHide&&this._closeButton){this.element.removeClass("k-tooltip-closable");this._closeButton.remove();delete this._closeButton}if(!e.autoHide&&!this._closeButton){this.element.addClass("k-tooltip-closable");this._closeButton=i(u).appendTo(this.element)}},_showEvent:function(e){var t=this._tooltipShape(e.element);if(t){var i=n({},this.options,this._tooltipOptions(t.options.tooltip));if(i&&i.showOn==e.type){this._show(e.element,t,i,e.originalEvent,true)}}},_measure:function(e){var t=this.getPopup();var i,n;this.element.css({width:"auto",height:"auto"});var r=t.visible();if(!r){t.wrapper.show()}this.element.css({width:a(e.width)?e.width:"auto",height:a(e.height)?e.height:"auto"});i=o(this.element);n=s(this.element);if(!r){t.wrapper.hide()}return{width:i,height:n}},_mouseleave:function(e){if(this.popup&&!this._popupRelatedTarget(e.originalEvent)){var t=this;var i=t._current;if(i&&i.options.autoHide){t._timeout=setTimeout(function(){clearTimeout(t._showTimeout);t.hide()},i.options.hideDelay||0)}}},_mousemove:function(e){var t=this._current;if(t&&e.element){var i=t.options;if(i.position=="cursor"){var n=this._position(e.element,i,t.elementSize,e.originalEvent);t.position=n;this.getPopup().wrapper.css({left:n.left,top:n.top})}}},_surfaceLeave:function(e){if(this.popup&&!this._popupRelatedTarget(e)){clearTimeout(this._showTimeout);this.hide()}},_popupRelatedTarget:function(e){return e.relatedTarget&&i(e.relatedTarget).closest(this.popup.wrapper).length},_tooltipLeave:function(){var e=this;var t=e._current;if(t&&t.options.autoHide){e._timeout=setTimeout(function(){e.hide()},t.options.hideDelay||0)}}});r.drawing.SurfaceTooltip=c})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("drawing/surface",["drawing/kendo-drawing","drawing/surface-tooltip"],e)})(function(){(function(e){var t=window.kendo;var i=t.drawing;var n=i.Surface;var r=t.ui.Widget;var a=t.deepExtend;var o=e.proxy;t.support.svg=n.support.svg;t.support.canvas=n.support.canvas;var s=r.extend({init:function(e,t){r.fn.init.call(this,e,{});this.options=a({},this.options,t);this._instance=n.create(this.element[0],t);if(this._instance.translate){this.translate=l}this._triggerInstanceHandler=o(this._triggerInstanceEvent,this);this._bindHandler("click");this._bindHandler("mouseenter");this._bindHandler("mouseleave");this._bindHandler("mousemove");this._enableTracking()},options:{name:"Surface",tooltip:{}},events:["click","mouseenter","mouseleave","mousemove","resize","tooltipOpen","tooltipClose"],_triggerInstanceEvent:function(e){this.trigger(e.type,e)},_bindHandler:function(e){this._instance.bind(e,this._triggerInstanceHandler)},draw:function(e){this._instance.draw(e)},clear:function(){if(this._instance){this._instance.clear()}this.hideTooltip()},destroy:function(){if(this._instance){this._instance.destroy();delete this._instance}if(this._tooltip){this._tooltip.destroy();delete this._tooltip}r.fn.destroy.call(this)},exportVisual:function(){return this._instance.exportVisual()},eventTarget:function(e){return this._instance.eventTarget(e)},showTooltip:function(e,t){if(this._tooltip){this._tooltip.show(e,t)}},hideTooltip:function(){if(this._tooltip){this._tooltip.hide()}},suspendTracking:function(){this._instance.suspendTracking();this.hideTooltip()},resumeTracking:function(){this._instance.resumeTracking()},getSize:function(){return{width:this.element.width(),height:this.element.height()}},setSize:function(e){this.element.css({width:e.width,height:e.height});this._size=e;this._instance.currentSize(e);this._resize()},_resize:function(){this._instance.currentSize(this._size);this._instance._resize()},_enableTracking:function(){if(t.ui.Popup){this._tooltip=new i.SurfaceTooltip(this,this.options.tooltip||{})}}});t.ui.plugin(s);s.create=function(e,t){return new s(e,t)};t.drawing.Surface=s;function l(e){this._instance.translate(e)}})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("drawing/html",["drawing/kendo-drawing"],e)})(function(){(function(i){var e=window.kendo;var t=e.drawing;var n=t.drawDOM;t.drawDOM=function(e,t){return n(i(e)[0],t)};t.drawDOM.drawText=n.drawText;t.drawDOM.getFontFaces=n.getFontFaces})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.drawing",["drawing/util","drawing/kendo-drawing","drawing/surface-tooltip","drawing/surface","drawing/html"],e)})(function(){var e={id:"drawing",name:"Drawing API",category:"framework",description:"The Kendo UI low-level drawing API",depends:["core","color","popup"]}},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.validator",["kendo.core"],e)})(function(){var e={id:"validator",name:"Validator",category:"web",description:"The Validator offers an easy way to do a client-side form validation.",depends:["core"]};(function(b,e){var w=window.kendo,a=w.ui.Widget,o=".kendoValidator",k="k-invalid-msg",s=new RegExp(k,"i"),y="k-invalid",x="k-valid",l="k-validation-summary",C="k-text-error",d="k-messagebox k-messagebox-error",S="aria-invalid",n="aria-describedby",t=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/i,i=/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,u=":input:not(:button,[type=submit],[type=reset],[disabled],[readonly])",c=":checkbox:not([disabled],[readonly])",f="[type=number],[type=range]",r="blur",T="name",h="form",p="novalidate",v="validate",m="change",D="validateInput",g=b.proxy,_=function(e,t){if(typeof t==="string"){t=new RegExp("^(?:"+t+")$")}return t.test(e)},A=function(e,t,i){var n=e.val();if(e.filter(t).length&&n!==""){return _(n,i)}return true},E=function(e,t){if(e.length){return e[0].attributes[t]!=null}return false};if(!w.ui.validator){w.ui.validator={rules:{},messages:{},allowSubmit:b.noop,validateOnInit:b.noop}}function I(e){var t=w.ui.validator.ruleResolvers||{},i={},n;for(n in t){b.extend(true,i,t[n].resolve(e))}return i}function M(e){return e.replace(/&amp/g,"&amp;").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">")}function R(e){e=(e+"").split(".");if(e.length>1){return e[1].length}return 0}function F(e){if(b.parseHTML){return b(b.parseHTML(e))}return b(e)}function P(e,t){var i=b(),n,r;for(var a=0,o=e.length;a<o;a++){n=e[a];if(s.test(n.className)){r=n.getAttribute(w.attr("for"));if(r===t){i=i.add(n)}}}return i}function z(e,t){if(!e){return false}if(typeof e.nodeName!=="string"||e.nodeName!=="LABEL"){return false}if(typeof e.getAttribute("for")!=="string"||typeof t.getAttribute("id")!=="string"){return false}if(e.getAttribute("for")!==t.getAttribute("id")){return false}return true}var B="<ul>"+"#for(var i = 0; i < errors.length; i += 1){#"+'<li><a data-field="#=errors[i].field#" href="\\#">#= errors[i].message #</a></li>'+"# } #"+"</ul>";var L=a.extend({init:function(e,t){var i=this,n=I(e),r="["+w.attr("validate")+"!=false]";t=t||{};t.rules=b.extend({},w.ui.validator.rules,n.rules,t.rules);t.messages=b.extend({},w.ui.validator.messages,n.messages,t.messages);a.fn.init.call(i,e,t);i._errorTemplate=w.template(i.options.errorTemplate);i._summaryTemplate=w.template(i.options.validationSummary.template||B);if(i.element.is(h)){i.element.attr(p,p)}i._inputSelector=u+r;i._checkboxSelector=c+r;i._errors={};i._attachEvents();i._isValidated=false;if(i._validateOnInit()){i.validate()}},events:[v,m,D],options:{name:"Validator",errorTemplate:'<span class="k-widget widget2021 k-tooltip k-tooltip-validation">'+'<span class="k-icon k-i-warning"> </span> #=message#</span>',messages:{required:"{0} is required",pattern:"{0} is not valid",min:"{0} should be greater than or equal to {1}",max:"{0} should be smaller than or equal to {1}",step:"{0} is not valid",email:"{0} is not valid email",url:"{0} is not valid URL",date:"{0} is not valid date",dateCompare:"End date should be greater than or equal to the start date",equalwith:"",phone:"phone number format error",mobile:"phone mobile number format error",chinese:"input chinese words",ajaxUrl:"ajax validation error",checkNameUrl:"ajax validation error"},rules:{required:function(e){var t=e.filter("[type=checkbox]").length&&!e.is(":checked"),i=e.val();if(e.length&&e[0].attributes["required"]!=null&&e[0].attributes["multiple"]!=null){var n=e.closest("div");if(n.hasClass("k-multiselect")){var r=n.find("ul.k-reset li");var a=n.find(".k-invalid-msg");if(r.length!=0){return true}}}return!(E(e,"required")&&(!i||i===""||i.length===0||t))},pattern:function(e){if(e.filter("[type=text],[type=email],[type=url],[type=tel],[type=search],[type=password]").filter("[pattern]").length&&e.val()!==""){return _(e.val(),e.attr("pattern"))}return true},min:function(e){if(e.filter(f+",["+w.attr("type")+"=number]").filter("[min]").length&&e.val()!==""){var t=parseFloat(e.attr("min"))||0,i=w.parseFloat(e.val());return t<=i}return true},max:function(e){if(e.filter(f+",["+w.attr("type")+"=number]").filter("[max]").length&&e.val()!==""){var t=parseFloat(e.attr("max"))||0,i=w.parseFloat(e.val());return t>=i}return true},step:function(e){if(e.filter(f+",["+w.attr("type")+"=number]").filter("[step]").length&&e.val()!==""){var t=parseFloat(e.attr("min"))||0,i=parseFloat(e.attr("step"))||1,n=parseFloat(e.val()),r=R(i),a;if(r){a=Math.pow(10,r);return Math.floor((n-t)*a)%(i*a)/Math.pow(100,r)===0}return(n-t)%i===0}return true},email:function(e){return A(e,"[type=email],["+w.attr("type")+"=email]",t)},url:function(e){return A(e,"[type=url],["+w.attr("type")+"=url]",i)},date:function(e){if(e.filter("[type^=date],["+w.attr("type")+"=date]").length&&e.val()!==""){return w.parseDate(e.val(),e.attr(w.attr("format")))!==null}return true},equalwith:function(e){if(e.filter("[type=password]").filter("[equalwith]").length&&e.val()!==""){return e.val()==b("#"+e.attr("equalwith")).val()}return true},phone:function(e){if(e.filter("[type=text]").filter("[phone]").length&&e.val()!==""){var t=/^((0[1-9]{3})?(0[12][0-9])?[-])?\d{6,8}$/;return t.test(e.val())}return true},mobile:function(e){if(e.filter("[type=text]").filter("[mobile]").length&&e.val()!==""){var t=/(^0?[1][356789][0-9]{9}$)/;return t.test(e.val())}return true},chinese:function(e){if(e.filter("[type=text]").filter("[chinese]").length&&e.val()!==""){var t=/^[\u4e00-\u9fa5]+$/;return t.test(e.val())}return true},ajaxUrl:function(r){if(r.filter("[type=text]").filter("[ajaxUrl]").length&&r.val()!==""){var a=false;var o=encodeURI(r.attr("ajaxUrl"));var s=r.attr("ajaxMsg")!=e||false;b.ajax({type:"GET",url:o,async:false,data:{time:(new Date).getTime(),inputVal:r.val()},success:function(e){if("ok"==e){a=true}else{if((e+"").indexOf("<!DOCTYPE html>")!=-1&&(e+"").indexOf("system/user/checkImg")!=-1){r.attr("data-ajaxUrl-msg","");var t=o.split("/");if(t&&t.length&&t.length>=2){var i="/"+t[1]+"/login.jsp";window.location.href=i;var n=b("<iframe name='fileIframe' style='display:none;'></iframe>");n.prependTo("body");n.attr("src",i)}return false}if(s){r.attr("data-ajaxUrl-msg",e)}}},error:function(e){console.log("error",e)}});return a}return true},checkNameUrl:function(e){if(e.filter("[type=text]").filter("[checkNameUrl]").length&&e.val()!==""){var t=false;var i=e.attr("checkNameUrl");var n=b("#oldName").val();console.log("checkNameUrl",i);b.ajax({type:"POST",url:i,async:false,data:{time:(new Date).getTime(),inputVal:e.val(),oldName:n},success:function(e){if("ok"==e){t=true}}});return t}return true}},validateOnBlur:true,validationSummary:false},_allowSubmit:function(){return w.ui.validator.allowSubmit(this.element,this.errors())},_validateOnInit:function(){return w.ui.validator.validateOnInit(this.element)},destroy:function(){a.fn.destroy.call(this);this.element.off(o);if(this.validationSummary){this.validationSummary.off(o);this.validationSummary=null}},value:function(){if(!this._isValidated){return false}return this.errors().length===0},_submit:function(e){if(!this.validate()&&!this._allowSubmit()){e.stopPropagation();e.stopImmediatePropagation();e.preventDefault();return false}return true},_checkElement:function(e){var t=this.value();this.validateInput(e);if(this.value()!==t){this.trigger(m)}},_attachEvents:function(){var e=this;if(e.element.is(h)){e.element.on("submit"+o,g(e._submit,e))}if(e.options.validateOnBlur){if(!e.element.is(u)){e.element.on(r+o,e._inputSelector,function(){e._checkElement(b(this))});e.element.on("click"+o,e._checkboxSelector,function(){e._checkElement(b(this))})}else{e.element.on(r+o,function(){e._checkElement(e.element)});if(e.element.is(c)){e.element.on("click"+o,function(){e._checkElement(e.element)})}}}},validate:function(){var e;var t;var i=false;var n;var r=this.value();this._errors={};if(!this.element.is(u)){var a=false;e=this.element.find(this._inputSelector);for(t=0,n=e.length;t<n;t++){if(!this.validateInput(e.eq(t))){a=true}}i=!a}else{i=this.validateInput(this.element)}if(this.options.validationSummary&&!r){this.showValidationSummary()}this.trigger(v,{valid:i,errors:this.errors()});if(r!==i){this.trigger(m)}if(b(".k-widget.k-tooltip.k-tooltip-validation.k-invalid-msg").length){b("html, body").animate({scrollTop:b(".k-widget.k-tooltip.k-tooltip-validation.k-invalid-msg:eq(0)").offset().top},1e3)}return i},validateInput:function(e){e=b(e);this._isValidated=true;var t=this,i=t._errorTemplate,n=t._checkValidity(e),r=n.valid,a="."+k,o=e.attr(T)||"",s=t._findMessageContainer(o).add(e.next(a).filter(function(){var e=b(this);if(e.filter("["+w.attr("for")+"]").length){return e.attr(w.attr("for"))===o}return true})).addClass("k-hidden"),l=!r?t._extractMessage(e,n.key):"",d=!r?F(i({message:M(l),field:o})):"",u=!e.attr(S);e.removeAttr(S);if(!r){t._errors[o]=l;var c=s.attr("id");t._decorateMessageContainer(d,o);if(c){d.attr("id",c)}if(s.length!==0){s.replaceWith(d)}else{var f=w.widgetInstance(e);var h=e.parent().get(0);var p=e.next().get(0);var v=e.prev().get(0);if(!f&&e.is("[type=radio]")){f=w.widgetInstance(e.closest(".k-radio-list"))}if(!f&&e.is("[type=checkbox]")){f=w.widgetInstance(e.closest(".k-checkbox-list"))}if(f&&f.wrapper){d.insertAfter(f.wrapper)}else if(h&&h.nodeName==="LABEL"){d.insertAfter(h)}else if(p&&z(p,e[0])){d.insertAfter(p)}else if(v&&z(v,e[0])){d.insertAfter(e)}else{d.insertAfter(e)}}d.removeClass("k-hidden");e.attr(S,true)}else{delete t._errors[o]}if(u!==r){this.trigger(D,{valid:r,input:e,error:l,field:o})}e.toggleClass(y,!r);e.toggleClass(x,r);if(w.widgetInstance(e)){var m=w.widgetInstance(e)._inputWrapper;var g=w.widgetInstance(e)._inputLabel;if(m){m.toggleClass(y,!r);m.toggleClass(x,r)}if(g){g.toggleClass(C,!r)}}if(u!==r){var _=d?d.attr("id"):s.attr("id");t._associateMessageContainer(e,_);if(this.options.validationSummary&&this.options.validateOnBlur){this.showValidationSummary()}}return r},hideMessages:function(){var e=this,t="."+k,i=e.element;e._disassociateMessageContainers();if(!i.is(u)){i.find(t).addClass("k-hidden")}else{i.next(t).addClass("k-hidden")}},reset:function(){var e=this,t=e.element.find("."+y),i=e.element.find("."+C);e._errors=[];e.hideMessages();e.hideValidationSummary();t.removeAttr(S);t.removeClass(y);i.removeClass(C)},_findMessageContainer:function(e){var t=w.ui.validator.messageLocators,i,n=b();for(var r=0,a=this.element.length;r<a;r++){n=n.add(P(this.element[r].getElementsByTagName("*"),e))}for(i in t){n=n.add(t[i].locate(this.element,e))}return n},_decorateMessageContainer:function(e,t){var i=w.ui.validator.messageLocators,n;e.addClass(k).attr(w.attr("for"),t||"");if(!e.attr("id")){e.attr("id",t+"-error")}for(n in i){i[n].decorate(e,t)}},_extractMessage:function(e,t){var i=this,n=i.options.messages[t],r=e.attr(T),a;if(!w.ui.Validator.prototype.options.messages[t]){a=w.isFunction(n)?n(e):n}n=w.isFunction(n)?n(e):n;return w.format(e.attr(w.attr(t+"-msg"))||e.attr("validationMessage")||a||n||e.attr("title")||"",r,e.attr(t)||e.attr(w.attr(t)))},_checkValidity:function(e){var t=this.options.rules,i;for(i in t){if(!t[i].call(this,e)){return{valid:false,key:i}}}return{valid:true}},errors:function(){var e=[],t=this._errors,i;for(i in t){e.push(t[i])}return e},setOptions:function(e){if(e.validationSummary){this.hideValidationSummary()}w.deepExtend(this.options,e);this.destroy();this.init(this.element,this.options);this._setEvents(this.options)},_getInputNames:function(){var e=this,t=e.element.find(e._inputSelector),i=[];for(var n=0,r=t.length;n<r;n++){var a=b(t[n]);if(E(a,T)){if(i.indexOf(a.attr(T))===-1||a.closest(".k-checkbox-list").length===0&&a.closest(".k-radio-list").length===0){i.push(a.attr(T))}}}return i},_associateMessageContainer:function(e,t){var i=w.getWidgetFocusableElement(e);if(!i||!t){return}w.toggleAttribute(i,n,t)},_disassociateMessageContainers:function(){var e=this,t=e.element.find("."+y).addBack(),i,n;for(var r=0;r<t.length;r+=1){i=b(t[r]);if(i.is("input")){n=e._findMessageContainer(i.attr(T)).add(i.next("."+k)).attr("id");e._associateMessageContainer(i,n)}}},_errorsByName:function(){var e=this,t=e._getInputNames(),i=[];for(var n=0;n<t.length;n+=1){var r=t[n];if(e._errors[r]){i.push({field:r,message:e._errors[r]})}}return i},_renderSummary:function(){var e=this,t=this.options.validationSummary,i=this.element,n=i.prev(),r;if(t.container){r=b(t.container)}else if(n&&n.hasClass(l)){r=n}else{r=b("<div />").insertBefore(e.element)}r.addClass([l,d].join(" "));r.attr("role","alert");r.on("click"+o,g(e._summaryClick,e));return r},_summaryClick:function(e){e.preventDefault();var t=this,i=b(e.target),n=t.element.find("[name='"+i.data("field")+"']"),r;if(!n.length){return}r=w.getWidgetFocusableElement(n);if(r){r.focus()}},showValidationSummary:function(){var e=this,t=e.validationSummary,i=e._errorsByName(),n;if(!t){t=e.validationSummary=e._renderSummary()}n=F(e._summaryTemplate({errors:i}));t.html(n);t.toggleClass("k-hidden",!i.length)},hideValidationSummary:function(){var e=this,t=e.validationSummary;if(!t){return}t.addClass("k-hidden")}});w.ui.plugin(L)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.userevents",["kendo.core"],e)})(function(){var e={id:"userevents",name:"User Events",category:"framework",depends:["core"],hidden:true};(function(d,e){var l=window.kendo,u=l.support,t=l.Class,c=l.Observable,a=d.now,f=d.extend,i=u.mobileOS,o=i&&i.android,h=800,n=300,p=u.browser.msie?5:0,v="press",m="hold",g="select",_="start",b="move",w="end",k="cancel",y="tap",x="doubleTap",C="release",S="gesturestart",T="gesturechange",D="gestureend",A="gesturetap";var r={api:0,touch:0,mouse:9,pointer:9};var E=!u.touch||u.mouseAndTouchPresent;function s(e,t){var i=e.x.location,n=e.y.location,r=t.x.location,a=t.y.location,o=i-r,s=n-a;return{center:{x:(i+r)/2,y:(n+a)/2},distance:Math.sqrt(o*o+s*s)}}function I(e){var t=[],i=e.originalEvent,n=e.currentTarget,r=0,a,o,s;if(e.api){t.push({id:2,event:e,target:e.target,currentTarget:e.target,location:e,type:"api"})}else if(e.type.match(/touch/)){o=i?i.changedTouches:[];for(a=o.length;r<a;r++){s=o[r];t.push({location:s,event:e,target:s.target,currentTarget:n,id:s.identifier,type:"touch"})}}else if(u.pointers||u.msPointers){t.push({location:i,event:e,target:e.target,currentTarget:n,id:i.pointerId,type:"pointer"})}else{t.push({id:1,event:e,target:e.target,currentTarget:n,location:e,type:"mouse"})}return t}var M=t.extend({init:function(e,t){var i=this;i.axis=e;i._updateLocationData(t);i.startLocation=i.location;i.velocity=i.delta=0;i.timeStamp=a()},move:function(e){var t=this,i=e["page"+t.axis],n=a(),r=n-t.timeStamp||1;if(!i&&o){return}t.delta=i-t.location;t._updateLocationData(e);t.initialDelta=i-t.startLocation;t.velocity=t.delta/r;t.timeStamp=n},_updateLocationData:function(e){var t=this,i=t.axis;t.location=e["page"+i];t.client=e["client"+i];t.screen=e["screen"+i]}});var R=t.extend({init:function(e,t,i){f(this,{x:new M("X",i.location),y:new M("Y",i.location),type:i.type,useClickAsTap:e.useClickAsTap,threshold:e.threshold||r[i.type],userEvents:e,target:t,currentTarget:i.currentTarget,initialTouch:i.target,id:i.id,pressEvent:i,_clicks:e._clicks,supportDoubleTap:e.supportDoubleTap,_moved:false,_finished:false})},press:function(){this._holdTimeout=setTimeout(d.proxy(this,"_hold"),this.userEvents.minHold);this._trigger(v,this.pressEvent)},_tap:function(e){var t=this;t.userEvents._clicks++;if(t.userEvents._clicks==1){t._clickTimeout=setTimeout(function(){if(t.userEvents._clicks==1){t._trigger(y,e)}else{t._trigger(x,e)}t.userEvents._clicks=0},n)}},_hold:function(){this._trigger(m,this.pressEvent)},move:function(e){var t=this;var i=e.type!=="api"&&t.userEvents._shouldNotMove;if(t._finished||i){return}t.x.move(e.location);t.y.move(e.location);if(!t._moved){if(t._withinIgnoreThreshold()){return}if(!P.current||P.current===t.userEvents){t._start(e)}else{return t.dispose()}}if(!t._finished){t._trigger(b,e)}},end:function(e){this.endTime=a();if(this._finished){return}this._finished=true;this._trigger(C,e);if(this._moved){this._trigger(w,e)}else{if(!this.useClickAsTap){if(this.supportDoubleTap){this._tap(e)}else{this._trigger(y,e)}}}clearTimeout(this._holdTimeout);this.dispose()},dispose:function(){var e=this.userEvents,t=e.touches;this._finished=true;this.pressEvent=null;clearTimeout(this._holdTimeout);t.splice(d.inArray(this,t),1)},skip:function(){this.dispose()},cancel:function(){this.dispose()},isMoved:function(){return this._moved},_start:function(e){clearTimeout(this._holdTimeout);this.startTime=a();this._moved=true;this._trigger(_,e)},_trigger:function(e,t){var i=this,n=t.event,r={touch:i,x:i.x,y:i.y,target:i.target,event:n};if(i.userEvents.notify(e,r)){n.preventDefault()}},_withinIgnoreThreshold:function(){var e=this.x.initialDelta,t=this.y.initialDelta;return Math.sqrt(e*e+t*t)<=this.threshold}});function F(e){var t=l.eventMap.up.split(" "),i=0,n=t.length;for(;i<n;i++){e(t[i])}}var P=c.extend({init:function(e,t){var i=this,n,r=l.guid();t=t||{};n=i.filter=t.filter;i.threshold=t.threshold||p;i.minHold=t.minHold||h;i.touches=[];i._maxTouches=t.multiTouch?2:1;i.allowSelection=t.allowSelection;i.captureUpIfMoved=t.captureUpIfMoved;i.useClickAsTap=!t.fastTap&&!u.delayedClick();i.eventNS=r;i._clicks=0;i.supportDoubleTap=t.supportDoubleTap;e=d(e).handler(i);c.fn.init.call(i);f(i,{element:e,surface:t.global&&E?d(e[0].ownerDocument.documentElement):d(t.surface||e),stopPropagation:t.stopPropagation,pressed:false});i.surface.handler(i).on(l.applyEventMap("move",r),"_move").on(l.applyEventMap("up cancel",r),"_end");e.on(l.applyEventMap("down",r),n,"_start");if(i.useClickAsTap){e.on(l.applyEventMap("click",r),n,"_click")}if(u.pointers||u.msPointers){if(u.browser.version<11){var a="pinch-zoom double-tap-zoom";e.css("-ms-touch-action",t.touchAction&&t.touchAction!="none"?a+" "+t.touchAction:a)}else{e.css("touch-action",t.touchAction||"none")}}if(t.preventDragEvent){e.on(l.applyEventMap("dragstart",r),l.preventDefault)}e.on(l.applyEventMap("mousedown",r),n,{root:e},"_select");if(i.captureUpIfMoved&&u.eventCapture){var o=i.surface[0],s=d.proxy(i.preventIfMoving,i);F(function(e){o.addEventListener(e,s,true)})}i.bind([v,m,y,x,_,b,w,C,k,S,T,D,A,g],t)},preventIfMoving:function(e){if(this._isMoved()){e.preventDefault()}},destroy:function(){var t=this;if(t._destroyed){return}t._destroyed=true;if(t.captureUpIfMoved&&u.eventCapture){var i=t.surface[0];F(function(e){i.removeEventListener(e,t.preventIfMoving)})}t.element.kendoDestroy(t.eventNS);t.surface.kendoDestroy(t.eventNS);t.element.removeData("handler");t.surface.removeData("handler");t._disposeAll();t.unbind();delete t.surface;delete t.element;delete t.currentTarget},capture:function(){P.current=this},cancel:function(){this._disposeAll();this.trigger(k)},notify:function(e,t){var i=this,n=i.touches;if(this._isMultiTouch()){switch(e){case b:e=T;break;case w:e=D;break;case y:e=A;break}f(t,{touches:n},s(n[0],n[1]))}return this.trigger(e,f(t,{type:e}))},press:function(e,t,i){this._apiCall("_start",e,t,i)},move:function(e,t){this._apiCall("_move",e,t)},end:function(e,t){this._apiCall("_end",e,t)},_isMultiTouch:function(){return this.touches.length>1},_maxTouchesReached:function(){return this.touches.length>=this._maxTouches},_disposeAll:function(){var e=this.touches;while(e.length>0){e.pop().dispose()}},_isMoved:function(){return d.grep(this.touches,function(e){return e.isMoved()}).length},_select:function(e){if(!this.allowSelection||this.trigger(g,{event:e})){e.preventDefault()}},_start:function(e){var t=this,i=0,n=t.filter,r,a=I(e),o=a.length,s,l=e.which;if(l&&l>1||t._maxTouchesReached()){return}P.current=null;t.currentTarget=e.currentTarget;if(t.stopPropagation){e.stopPropagation()}for(;i<o;i++){if(t._maxTouchesReached()){break}s=a[i];if(n){r=d(s.currentTarget)}else{r=t.element}if(!r.length){continue}s=new R(t,r,s);t.touches.push(s);s.press();if(t._isMultiTouch()){t.notify("gesturestart",{})}}},_move:function(e){this._eachTouch("move",e)},_end:function(e){this._eachTouch("end",e)},_click:function(e){var t={touch:{initialTouch:e.target,target:d(e.currentTarget),endTime:a(),x:{location:e.pageX,client:e.clientX},y:{location:e.pageY,client:e.clientY}},x:e.pageX,y:e.pageY,target:d(e.currentTarget),event:e,type:"tap"};if(this.trigger("tap",t)){e.preventDefault()}},_eachTouch:function(e,t){var i=this,n={},r=I(t),a=i.touches,o,s,l,d;for(o=0;o<a.length;o++){s=a[o];n[s.id]=s}for(o=0;o<r.length;o++){l=r[o];d=n[l.id];if(d){d[e](l)}}},_apiCall:function(e,t,i,n){this[e]({api:true,pageX:t,pageY:i,clientX:t,clientY:i,target:d(n||this.element)[0],stopPropagation:d.noop,preventDefault:d.noop})}});P.defaultThreshold=function(e){p=e};P.minHold=function(e){h=e};l.getTouches=I;l.touchDelta=s;l.UserEvents=P})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.draganddrop",["kendo.core","kendo.userevents"],e)})(function(){var e={id:"draganddrop",name:"Drag & drop",category:"framework",description:"Drag & drop functionality for any DOM element.",depends:["core","userevents"]};(function(l,B){var d=window.kendo,u=d.support,c=window.document,f=l(window),L=d.Class,a=d.ui.Widget,r=d.Observable,H=d.UserEvents,o=l.proxy,s=l.extend,h=d.getOffset,p={},v={},m={},n,g=d.elementUnderCursor,_="keyup",b="change",w="dragstart",t="hold",k="drag",e="dragend",i="dragcancel",y="hintDestroyed",x="dragenter",C="dragleave",S="drop";function N(e,t){try{return l.contains(e,t)||e==t}catch(e){return false}}function T(e,t){return parseInt(e.css(t),10)||0}function D(e,t){return Math.min(Math.max(e,t.min),t.max)}function A(e,t){var i=h(e),n=d._outerWidth,r=d._outerHeight,a=i.left+T(e,"borderLeftWidth")+T(e,"paddingLeft"),o=i.top+T(e,"borderTopWidth")+T(e,"paddingTop"),s=a+e.width()-n(t,true),l=o+e.height()-r(t,true);return{x:{min:a,max:s},y:{min:o,max:l}}}function O(e,t,i){var n,r,a=0,o=t&&t.length,s=i&&i.length;while(e&&e.parentNode){for(a=0;a<o;a++){n=t[a];if(n.element[0]===e){return{target:n,targetElement:e}}}for(a=0;a<s;a++){r=i[a];if(l.contains(r.element[0],e)&&u.matchesSelector.call(e,r.options.filter)){return{target:r,targetElement:e}}}e=e.parentNode}return B}var V=r.extend({init:function(e,t){var i=this,n=e[0];i.capture=false;if(n.addEventListener){l.each(d.eventMap.down.split(" "),function(){n.addEventListener(this,o(i._press,i),true)});l.each(d.eventMap.up.split(" "),function(){n.addEventListener(this,o(i._release,i),true)})}else{l.each(d.eventMap.down.split(" "),function(){n.attachEvent(this,o(i._press,i))});l.each(d.eventMap.up.split(" "),function(){n.attachEvent(this,o(i._release,i))})}r.fn.init.call(i);i.bind(["press","release"],t||{})},captureNext:function(){this.capture=true},cancelCapture:function(){this.capture=false},_press:function(e){var t=this;t.trigger("press");if(t.capture){e.preventDefault()}},_release:function(e){var t=this;t.trigger("release");if(t.capture){e.preventDefault();t.cancelCapture()}}});var E=r.extend({init:function(e){var t=this;r.fn.init.call(t);t.forcedEnabled=false;l.extend(t,e);t.scale=1;if(t.horizontal){t.measure="offsetWidth";t.scrollSize="scrollWidth";t.axis="x"}else{t.measure="offsetHeight";t.scrollSize="scrollHeight";t.axis="y"}},makeVirtual:function(){l.extend(this,{virtual:true,forcedEnabled:true,_virtualMin:0,_virtualMax:0})},virtualSize:function(e,t){if(this._virtualMin!==e||this._virtualMax!==t){this._virtualMin=e;this._virtualMax=t;this.update()}},outOfBounds:function(e){return e>this.max||e<this.min},forceEnabled:function(){this.forcedEnabled=true},getSize:function(){return this.container[0][this.measure]},getTotal:function(){return this.element[0][this.scrollSize]},rescale:function(e){this.scale=e},update:function(e){var t=this,i=t.virtual?t._virtualMax:t.getTotal(),n=i*t.scale,r=t.getSize();if(i===0&&!t.forcedEnabled){return}t.max=t.virtual?-t._virtualMin:0;t.size=r;t.total=n;t.min=Math.min(t.max,r-n);t.minScale=r/i;t.centerOffset=(n-r)/2;t.enabled=t.forcedEnabled||n>r;if(!e){t.trigger(b,t)}}});var W=r.extend({init:function(e){var t=this;r.fn.init.call(t);t.x=new E(s({horizontal:true},e));t.y=new E(s({horizontal:false},e));t.container=e.container;t.forcedMinScale=e.minScale;t.maxScale=e.maxScale||100;t.bind(b,e)},rescale:function(e){this.x.rescale(e);this.y.rescale(e);this.refresh()},centerCoordinates:function(){return{x:Math.min(0,-this.x.centerOffset),y:Math.min(0,-this.y.centerOffset)}},refresh:function(){var e=this;e.x.update();e.y.update();e.enabled=e.x.enabled||e.y.enabled;e.minScale=e.forcedMinScale||Math.min(e.x.minScale,e.y.minScale);e.fitScale=Math.max(e.x.minScale,e.y.minScale);e.trigger(b)}});var I=r.extend({init:function(e){var t=this;s(t,e);r.fn.init.call(t)},outOfBounds:function(){return this.dimension.outOfBounds(this.movable[this.axis])},dragMove:function(e){var t=this,i=t.dimension,n=t.axis,r=t.movable,a=r[n]+e;if(!i.enabled){return}if(a<i.min&&e<0||a>i.max&&e>0){e*=t.resistance}r.translateAxis(n,e);t.trigger(b,t)}});var U=L.extend({init:function(e){var u=this,c,f,t,h;s(u,{elastic:true},e);t=u.elastic?.5:0;h=u.movable;u.x=c=new I({axis:"x",dimension:u.dimensions.x,resistance:t,movable:h});u.y=f=new I({axis:"y",dimension:u.dimensions.y,resistance:t,movable:h});u.userEvents.bind(["press","move","end","gesturestart","gesturechange"],{gesturestart:function(e){u.gesture=e;u.offset=u.dimensions.container.offset()},press:function(e){if(l(e.event.target).closest("a").is("[data-navigate-on-press=true]")){e.sender.cancel()}},gesturechange:function(e){var t=u.gesture,i=t.center,n=e.center,r=e.distance/t.distance,a=u.dimensions.minScale,o=u.dimensions.maxScale,s;if(h.scale<=a&&r<1){r+=(1-r)*.8}if(h.scale*r>=o){r=o/h.scale}var l=h.x+u.offset.left,d=h.y+u.offset.top;s={x:(l-i.x)*r+n.x-l,y:(d-i.y)*r+n.y-d};h.scaleWith(r);c.dragMove(s.x);f.dragMove(s.y);u.dimensions.rescale(h.scale);u.gesture=e;e.preventDefault()},move:function(e){if(e.event.target.tagName.match(/textarea|input/i)){return}if(c.dimension.enabled||f.dimension.enabled){c.dragMove(e.x.delta);f.dragMove(e.y.delta);e.preventDefault()}else{e.touch.skip()}},end:function(e){e.preventDefault()}})}});var j=u.transitions.prefix+"Transform",M;if(u.hasHW3D){M=function(e,t,i){return"translate3d("+e+"px,"+t+"px,0) scale("+i+")"}}else{M=function(e,t,i){return"translate("+e+"px,"+t+"px) scale("+i+")"}}var G=r.extend({init:function(e){var t=this;r.fn.init.call(t);t.element=l(e);t.element[0].style.webkitTransformOrigin="left top";t.x=0;t.y=0;t.scale=1;t._saveCoordinates(M(t.x,t.y,t.scale))},translateAxis:function(e,t){this[e]+=t;this.refresh()},scaleTo:function(e){this.scale=e;this.refresh()},scaleWith:function(e){this.scale*=e;this.refresh()},translate:function(e){this.x+=e.x;this.y+=e.y;this.refresh()},moveAxis:function(e,t){this[e]=t;this.refresh()},moveTo:function(e){s(this,e);this.refresh()},refresh:function(){var e=this,t=e.x,i=e.y,n;if(e.round){t=Math.round(t);i=Math.round(i)}n=M(t,i,e.scale);if(n!=e.coordinates){if(d.support.browser.msie&&d.support.browser.version<10){e.element[0].style.position="absolute";e.element[0].style.left=e.x+"px";e.element[0].style.top=e.y+"px"}else{e.element[0].style[j]=n}e._saveCoordinates(n);e.trigger(b)}},_saveCoordinates:function(e){this.coordinates=e}});function R(e,t){var i=t.options.group,n=e[i],r;a.fn.destroy.call(t);if(n.length>1){for(r=0;r<n.length;r++){if(n[r]==t){n.splice(r,1);break}}}else{n.length=0;delete e[i]}}var F=a.extend({init:function(e,t){var i=this;a.fn.init.call(i,e,t);var n=i.options.group;if(!(n in v)){v[n]=[i]}else{v[n].push(i)}},events:[x,C,S],options:{name:"DropTarget",group:"default"},destroy:function(){R(v,this)},_trigger:function(e,t){var i=this,n=p[i.options.group];if(n){return i.trigger(e,s({},t.event,{draggable:n,dropTarget:t.dropTarget}))}},_over:function(e){this._trigger(x,e)},_out:function(e){this._trigger(C,e)},_drop:function(e){var t=this,i=p[t.options.group];if(i){i.dropped=!t._trigger(S,e)}}});F.destroyGroup=function(e){var t=v[e]||m[e],i;if(t){for(i=0;i<t.length;i++){a.fn.destroy.call(t[i])}t.length=0;delete v[e];delete m[e]}};F._cache=v;var q=F.extend({init:function(e,t){var i=this;a.fn.init.call(i,e,t);var n=i.options.group;if(!(n in m)){m[n]=[i]}else{m[n].push(i)}},destroy:function(){R(m,this)},options:{name:"DropTargetArea",group:"default",filter:null}});var $=a.extend({init:function(e,t){var i=this;a.fn.init.call(i,e,t);i._activated=false;i.userEvents=new H(i.element,{global:true,allowSelection:true,filter:i.options.filter,threshold:i.options.distance,start:o(i._start,i),hold:o(i._hold,i),move:o(i._drag,i),end:o(i._end,i),cancel:o(i._cancel,i),select:o(i._select,i)});if(d.support.touch){i.element.find(i.options.filter).css("touch-action","none")}i._afterEndHandler=o(i._afterEnd,i);i._captureEscape=o(i._captureEscape,i)},events:[t,w,k,e,i,y],options:{name:"Draggable",distance:d.support.touch?0:5,group:"default",cursorOffset:null,axis:null,container:null,filter:null,ignore:null,holdToDrag:false,autoScroll:false,dropped:false},cancelHold:function(){this._activated=false},_captureEscape:function(e){var t=this;if(e.keyCode===d.keys.ESC){t._trigger(i,{event:e});t.userEvents.cancel()}},_updateHint:function(e){var t=this,i,n=t.options,r=t.boundaries,a=n.axis,o=t.options.cursorOffset;if(o){i={left:e.x.location+o.left,top:e.y.location+o.top}}else{t.hintOffset.left+=e.x.delta;t.hintOffset.top+=e.y.delta;i=l.extend({},t.hintOffset)}if(r){i.top=D(i.top,r.y);i.left=D(i.left,r.x)}if(a==="x"){delete i.top}else if(a==="y"){delete i.left}t.hint.css(i)},_shouldIgnoreTarget:function(e){var t=this.options.ignore;return t&&l(e).is(t)},_select:function(e){if(!this._shouldIgnoreTarget(e.event.target)){e.preventDefault()}},_start:function(t){var i=this,e=i.options,n=e.container?l(e.container):null,r=e.hint;if(this._shouldIgnoreTarget(t.touch.initialTouch)||e.holdToDrag&&!i._activated){i.userEvents.cancel();return}i.currentTarget=t.target;i.currentTargetOffset=h(i.currentTarget);if(r){if(i.hint){i.hint.stop(true,true).remove()}i.hint=d.isFunction(r)?l(r.call(i,i.currentTarget)):r;var a=h(i.currentTarget);i.hintOffset=a;i.hint.css({position:"absolute",zIndex:2e4,left:a.left,top:a.top}).appendTo(c.body);i.angular("compile",function(){i.hint.removeAttr("ng-repeat");var e=l(t.target);while(!e.data("$$kendoScope")&&e.length){e=e.parent()}return{elements:i.hint.get(),scopeFrom:e.data("$$kendoScope")}})}p[e.group]=i;i.dropped=false;if(n){i.boundaries=A(n,i.hint)}l(c).on(_,i._captureEscape);if(i._trigger(w,t)){i.userEvents.cancel();i._afterEnd()}i.userEvents.capture()},_hold:function(e){this.currentTarget=e.target;if(this._trigger(t,e)){this.userEvents.cancel()}else{this._activated=true}},_drag:function(e){e.preventDefault();var t=this._elementUnderCursor(e);if(this.options.autoScroll&&this._cursorElement!==t){this._scrollableParent=K(t);this._cursorElement=t}this._lastEvent=e;this._processMovement(e,t);if(this.options.autoScroll){if(this._scrollableParent[0]){var i=Y(e.x.location,e.y.location,P(this._scrollableParent));this._scrollCompenstation=l.extend({},this.hintOffset);this._scrollVelocity=i;if(i.y===0&&i.x===0){clearInterval(this._scrollInterval);this._scrollInterval=null}else if(!this._scrollInterval){this._scrollInterval=setInterval(l.proxy(this,"_autoScroll"),50)}}}if(this.hint){this._updateHint(e)}},_processMovement:function(i,e){this._withDropTarget(e,function(e,t){if(!e){if(n){n._trigger(C,s(i,{dropTarget:l(n.targetElement)}));n=null}return}if(n){if(t===n.targetElement){return}n._trigger(C,s(i,{dropTarget:l(n.targetElement)}))}e._trigger(x,s(i,{dropTarget:l(t)}));n=s(e,{targetElement:t})});this._trigger(k,s(i,{dropTarget:n,elementUnderCursor:e}))},_autoScroll:function(){var e=this._scrollableParent[0],t=this._scrollVelocity,i=this._scrollCompenstation;if(!e){return}var n=this._elementUnderCursor(this._lastEvent);this._processMovement(this._lastEvent,n);var r,a;var o=e===z()[0];if(o){r=c.body.scrollHeight>f.height();a=c.body.scrollWidth>f.width()}else{r=e.offsetHeight<=e.scrollHeight;a=e.offsetWidth<=e.scrollWidth}var s=e.scrollTop+t.y;var l=r&&s>0&&s<e.scrollHeight;var d=e.scrollLeft+t.x;var u=a&&d>0&&d<e.scrollWidth;if(l){e.scrollTop+=t.y}if(u){e.scrollLeft+=t.x}if(this.hint&&o&&(u||l)){if(l){i.top+=t.y}if(u){i.left+=t.x}this.hint.css(i)}},_end:function(i){this._withDropTarget(this._elementUnderCursor(i),function(e,t){if(e){e._drop(s({},i,{dropTarget:l(t)}));n=null}});this._cancel(this._trigger(e,i))},_cancel:function(e){var t=this;t._scrollableParent=null;this._cursorElement=null;clearInterval(this._scrollInterval);t._activated=false;if(t.hint&&!t.dropped){setTimeout(function(){t.hint.stop(true,true);if(e){t._afterEndHandler()}else{t.hint.animate(t.currentTargetOffset,"fast",t._afterEndHandler)}},0)}else{t._afterEnd()}},_trigger:function(e,t){var i=this;return i.trigger(e,s({},t.event,{x:t.x,y:t.y,currentTarget:i.currentTarget,initialTarget:t.touch?t.touch.initialTouch:null,dropTarget:t.dropTarget,elementUnderCursor:t.elementUnderCursor}))},_elementUnderCursor:function(e){var t=g(e),i=this.hint;if(i&&N(i[0],t)){i.hide();t=g(e);if(!t){t=g(e)}i.show()}return t},_withDropTarget:function(e,t){var i,n=this.options.group,r=v[n],a=m[n];if(r&&r.length||a&&a.length){i=O(e,r,a);if(i){t(i.target,i.targetElement)}else{t()}}},destroy:function(){var e=this;a.fn.destroy.call(e);e._afterEnd();e.userEvents.destroy();this._scrollableParent=null;this._cursorElement=null;clearInterval(this._scrollInterval);e.currentTarget=null},_afterEnd:function(){var e=this;if(e.hint){e.hint.remove()}delete p[e.options.group];e.trigger("destroy");e.trigger(y);l(c).off(_,e._captureEscape)}});d.ui.plugin(F);d.ui.plugin(q);d.ui.plugin($);d.TapCapture=V;d.containerBoundaries=A;s(d.ui,{Pane:U,PaneDimensions:W,Movable:G});function P(e){var t=z()[0],i,n,r;if(e[0]===t){n=t.scrollTop;r=t.scrollLeft;return{top:n,left:r,bottom:n+f.height(),right:r+f.width()}}else{i=e.offset();i.bottom=i.top+e.height();i.right=i.left+e.width();return i}}function z(){return l(d.support.browser.edge||d.support.browser.safari?c.body:c.documentElement)}function K(e){var t=z();if(!e||e===c.body||e===c.documentElement){return t}var i=l(e)[0];while(i&&!d.isScrollable(i)&&i!==c.body){i=i.parentNode}if(i===c.body){return t}return l(i)}function Y(e,t,i){var n={x:0,y:0};var r=50;if(e-i.left<r){n.x=-(r-(e-i.left))}else if(i.right-e<r){n.x=r-(i.right-e)}if(t-i.top<r){n.y=-(r-(t-i.top))}else if(i.bottom-t<r){n.y=r-(i.bottom-t)}return n}d.ui.Draggable.utils={autoScrollVelocity:Y,scrollableViewPort:P,findScrollableParent:K}})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.mobile.scroller",["kendo.fx","kendo.draganddrop"],e)})(function(){var e={id:"mobile.scroller",name:"Scroller",category:"mobile",description:"The Kendo Mobile Scroller widget enables touch friendly kinetic scrolling for the contents of a given DOM element.",depends:["fx","draganddrop"]};(function(f,t){var h=window.kendo,e=h.mobile,i=h.effects,n=e.ui,p=f.proxy,v=f.extend,m=n.Widget,r=h.Class,g=h.ui.Movable,_=h.ui.Pane,b=h.ui.PaneDimensions,a=i.Transition,o=i.Animation,w=Math.abs,s=500,l=.7,d=.96,u=10,c=55,k=.5,y=5,x="km-scroller-release",C="km-scroller-refresh",S="pull",T="change",D="resize",A="scroll",E=2;var I=o.extend({init:function(e){var t=this;o.fn.init.call(t);v(t,e);t.userEvents.bind("gestureend",p(t.start,t));t.tapCapture.bind("press",p(t.cancel,t))},enabled:function(){return this.movable.scale<this.dimensions.minScale},done:function(){return this.dimensions.minScale-this.movable.scale<.01},tick:function(){var e=this.movable;e.scaleWith(1.1);this.dimensions.rescale(e.scale)},onEnd:function(){var e=this.movable;e.scaleTo(this.dimensions.minScale);this.dimensions.rescale(e.scale)}});var M=o.extend({init:function(e){var t=this;o.fn.init.call(t);v(t,e,{transition:new a({axis:e.axis,movable:e.movable,onEnd:function(){t._end()}})});t.tapCapture.bind("press",function(){t.cancel()});t.userEvents.bind("end",p(t.start,t));t.userEvents.bind("gestureend",p(t.start,t));t.userEvents.bind("tap",p(t.onEnd,t))},onCancel:function(){this.transition.cancel()},freeze:function(e){var t=this;t.cancel();t._moveTo(e)},onEnd:function(){var e=this;if(e.paneAxis.outOfBounds()){e._snapBack()}else{e._end()}},done:function(){return w(this.velocity)<1},start:function(e){var t=this,i;if(!t.dimension.enabled){return}if(t.paneAxis.outOfBounds()){if(t.transition._started){t.transition.cancel();t.velocity=Math.min(e.touch[t.axis].velocity*t.velocityMultiplier,c);o.fn.start.call(t)}else{t._snapBack()}}else{i=e.touch.id===E?0:e.touch[t.axis].velocity;t.velocity=Math.max(Math.min(i*t.velocityMultiplier,c),-c);t.tapCapture.captureNext();o.fn.start.call(t)}},tick:function(){var e=this,t=e.dimension,i=e.paneAxis.outOfBounds()?k:e.friction,n=e.velocity*=i,r=e.movable[e.axis]+n;if(!e.elastic&&t.outOfBounds(r)){r=Math.max(Math.min(r,t.max),t.min);e.velocity=0}e.movable.moveAxis(e.axis,r)},_end:function(){this.tapCapture.cancelCapture();this.end()},_snapBack:function(){var e=this,t=e.dimension,i=e.movable[e.axis]>t.max?t.max:t.min;e._moveTo(i)},_moveTo:function(e){this.transition.moveTo({location:e,duration:s,ease:a.easeOutExpo})}});var R=o.extend({init:function(e){var t=this;h.effects.Animation.fn.init.call(this);v(t,e,{origin:{},destination:{},offset:{}})},tick:function(){this._updateCoordinates();this.moveTo(this.origin)},done:function(){return w(this.offset.y)<y&&w(this.offset.x)<y},onEnd:function(){this.moveTo(this.destination);if(this.callback){this.callback.call()}},setCoordinates:function(e,t){this.offset={};this.origin=e;this.destination=t},setCallback:function(e){if(e&&h.isFunction(e)){this.callback=e}else{e=t}},_updateCoordinates:function(){this.offset={x:(this.destination.x-this.origin.x)/4,y:(this.destination.y-this.origin.y)/4};this.origin={y:this.origin.y+this.offset.y,x:this.origin.x+this.offset.x}}});var F=r.extend({init:function(e){var t=this,i=e.axis==="x",n=f('<div class="km-touch-scrollbar km-'+(i?"horizontal":"vertical")+'-scrollbar" />');v(t,e,{element:n,elementSize:0,movable:new g(n),scrollMovable:e.movable,alwaysVisible:e.alwaysVisible,size:i?"width":"height"});t.scrollMovable.bind(T,p(t.refresh,t));t.container.append(n);if(e.alwaysVisible){t.show()}},refresh:function(){var e=this,t=e.axis,i=e.dimension,n=i.size,r=e.scrollMovable,a=n/i.total,o=Math.round(-r[t]*a),s=Math.round(n*a);if(a>=1){this.element.css("display","none")}else{this.element.css("display","")}if(o+s>n){s=n-o}else if(o<0){s+=o;o=0}if(e.elementSize!=s){e.element.css(e.size,s+"px");e.elementSize=s}e.movable.moveAxis(t,o)},show:function(){this.element.css({opacity:l,visibility:"visible"})},hide:function(){if(!this.alwaysVisible){this.element.css({opacity:0})}}});var P=m.extend({init:function(e,t){var o=this;m.fn.init.call(o,e,t);e=o.element;o._native=o.options.useNative&&h.support.hasNativeScrolling;if(o._native){e.addClass("km-native-scroller").prepend('<div class="km-scroll-header"/>');v(o,{scrollElement:e,fixedContainer:e.children().first()});return}e.css("overflow","hidden").addClass("km-scroll-wrapper").wrapInner('<div class="km-scroll-container"/>').prepend('<div class="km-scroll-header"/>');var i=e.children().eq(1),n=new h.TapCapture(e),r=new g(i),s=new b({element:i,container:e,forcedEnabled:o.options.zoom}),l=this.options.avoidScrolling,d=new h.UserEvents(e,{touchAction:"pan-y",fastTap:true,allowSelection:true,preventDragEvent:true,captureUpIfMoved:true,multiTouch:o.options.zoom,supportDoubleTap:o.options.supportDoubleTap,start:function(e){s.refresh();var t=w(e.x.velocity),i=w(e.y.velocity),n=t*2>=i,r=f.contains(o.fixedContainer[0],e.event.target),a=i*2>=t;if(!r&&!l(e)&&o.enabled&&(s.x.enabled&&n||s.y.enabled&&a)){d.capture()}else{d.cancel()}}}),a=new _({movable:r,dimensions:s,userEvents:d,elastic:o.options.elastic}),u=new I({movable:r,dimensions:s,userEvents:d,tapCapture:n}),c=new R({moveTo:function(e){o.scrollTo(e.x,e.y)}});r.bind(T,function(){o.scrollTop=-r.y;o.scrollLeft=-r.x;o.trigger(A,{scrollTop:o.scrollTop,scrollLeft:o.scrollLeft})});if(o.options.mousewheelScrolling){e.on("DOMMouseScroll mousewheel",p(this,"_wheelScroll"))}v(o,{movable:r,dimensions:s,zoomSnapBack:u,animatedScroller:c,userEvents:d,pane:a,tapCapture:n,pulled:false,enabled:true,scrollElement:i,scrollTop:0,scrollLeft:0,fixedContainer:e.children().first()});o._initAxis("x");o._initAxis("y");o._wheelEnd=function(){o._wheel=false;o.userEvents.end(0,o._wheelY)};s.refresh();if(o.options.pullToRefresh){o._initPullToRefresh()}},_wheelScroll:function(e){if(e.ctrlKey){return}if(!this._wheel){this._wheel=true;this._wheelY=0;this.userEvents.press(0,this._wheelY)}clearTimeout(this._wheelTimeout);this._wheelTimeout=setTimeout(this._wheelEnd,50);var t=h.wheelDeltaY(e);if(t){this._wheelY+=t;this.userEvents.move(0,this._wheelY)}e.preventDefault()},makeVirtual:function(){this.dimensions.y.makeVirtual()},virtualSize:function(e,t){this.dimensions.y.virtualSize(e,t)},height:function(){return this.dimensions.y.size},scrollHeight:function(){return this.scrollElement[0].scrollHeight},scrollWidth:function(){return this.scrollElement[0].scrollWidth},options:{name:"Scroller",zoom:false,pullOffset:140,visibleScrollHints:false,elastic:true,useNative:false,mousewheelScrolling:true,avoidScrolling:function(){return false},pullToRefresh:false,messages:{pullTemplate:"Pull to refresh",releaseTemplate:"Release to refresh",refreshTemplate:"Refreshing"}},events:[S,A,D],_resize:function(){if(!this._native){this.contentResized()}},setOptions:function(e){var t=this;m.fn.setOptions.call(t,e);if(e.pullToRefresh){t._initPullToRefresh()}},reset:function(){if(this._native){this.scrollElement.scrollTop(0)}else{this.movable.moveTo({x:0,y:0});this._scale(1)}},contentResized:function(){this.dimensions.refresh();if(this.pane.x.outOfBounds()){this.movable.moveAxis("x",this.dimensions.x.min)}if(this.pane.y.outOfBounds()){this.movable.moveAxis("y",this.dimensions.y.min)}},zoomOut:function(){var e=this.dimensions;e.refresh();this._scale(e.fitScale);this.movable.moveTo(e.centerCoordinates())},enable:function(){this.enabled=true},disable:function(){this.enabled=false},scrollTo:function(e,t){if(this._native){h.scrollLeft(this.scrollElement,w(e));this.scrollElement.scrollTop(w(t))}else{this.dimensions.refresh();this.movable.moveTo({x:e,y:t})}},animatedScrollTo:function(e,t,i){var n,r;if(this._native){this.scrollTo(e,t)}else{n={x:this.movable.x,y:this.movable.y};r={x:e,y:t};this.animatedScroller.setCoordinates(n,r);this.animatedScroller.setCallback(i);this.animatedScroller.start()}},pullHandled:function(){var e=this;e.refreshHint.removeClass(C);e.hintContainer.html(e.pullTemplate({}));e.yinertia.onEnd();e.xinertia.onEnd();e.userEvents.cancel()},destroy:function(){m.fn.destroy.call(this);if(this.userEvents){this.userEvents.destroy()}},_scale:function(e){this.dimensions.rescale(e);this.movable.scaleTo(e)},_initPullToRefresh:function(){var e=this;e.dimensions.y.forceEnabled();e.pullTemplate=h.template(e.options.messages.pullTemplate);e.releaseTemplate=h.template(e.options.messages.releaseTemplate);e.refreshTemplate=h.template(e.options.messages.refreshTemplate);e.scrollElement.prepend('<span class="km-scroller-pull"><span class="km-icon"></span><span class="km-loading-left"></span><span class="km-loading-right"></span><span class="km-template">'+e.pullTemplate({})+"</span></span>");e.refreshHint=e.scrollElement.children().first();e.hintContainer=e.refreshHint.children(".km-template");e.pane.y.bind("change",p(e._paneChange,e));e.userEvents.bind("end",p(e._dragEnd,e))},_dragEnd:function(){var e=this;if(!e.pulled){return}e.pulled=false;e.refreshHint.removeClass(x).addClass(C);e.hintContainer.html(e.refreshTemplate({}));e.yinertia.freeze(e.options.pullOffset/2);e.trigger("pull")},_paneChange:function(){var e=this;if(e.movable.y/k>e.options.pullOffset){if(!e.pulled){e.pulled=true;e.refreshHint.removeClass(C).addClass(x);e.hintContainer.html(e.releaseTemplate({}))}}else if(e.pulled){e.pulled=false;e.refreshHint.removeClass(x);e.hintContainer.html(e.pullTemplate({}))}},_initAxis:function(e){var t=this,i=t.movable,n=t.dimensions[e],r=t.tapCapture,a=t.pane[e],o=new F({axis:e,movable:i,dimension:n,container:t.element,alwaysVisible:t.options.visibleScrollHints});n.bind(T,function(){o.refresh()});a.bind(T,function(){o.show()});t[e+"inertia"]=new M({axis:e,paneAxis:a,movable:i,tapCapture:r,userEvents:t.userEvents,dimension:n,elastic:t.options.elastic,friction:t.options.friction||d,velocityMultiplier:t.options.velocityMultiplier||u,end:function(){o.hide();t.trigger("scrollEnd",{axis:e,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft})}})}});n.plugin(P)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.groupable",["kendo.core","kendo.draganddrop"],e)})(function(){var e={id:"groupable",name:"Groupable",category:"framework",depends:["core","draganddrop"],advanced:true};(function(c,e){var f=window.kendo,s=f.ui.Widget,l=f._outerWidth,d=f.attr,h=c.extend,i=c.each,p=c.proxy,v=false,m="dir",n="field",r="title",g="asc",_="desc",b="group-sort",w=".kendoGroupable",k="change",a=f.template('<div class="k-group-indicator" data-#=data.ns#field="${data.field}" data-#=data.ns#title="${data.title || ""}" data-#=data.ns#dir="${data.dir || "asc"}">'+'<a href="\\#" class="k-link">'+'<span class="k-icon k-i-sort-${(data.dir || "asc") == "asc" ? "asc-sm" : "desc-sm"}" title="(sorted ${(data.dir || "asc") == "asc" ? "ascending": "descending"})"></span>'+"${data.title ? data.title: data.field}"+"</a>"+'<a href="\\#" data-role="button" aria-label="Remove grouping by ${data.title || data.field} field" class="k-button k-button-icon k-flat">'+'<span class="k-icon k-i-close"></span>'+"</a>"+"</div>",{useWithBlock:false}),y=function(e){var t=e.attr(f.attr("title"));if(t){t=f.htmlEncode(t)}return c('<div class="k-header k-group-clue k-drag-clue" />').html(t||e.attr(f.attr("field"))).prepend('<span class="k-icon k-drag-status k-i-cancel"></span>')},x=c('<div class="k-grouping-dropclue"/>');var t=s.extend({init:function(e,t){var u=this,i=f.guid(),a=p(u._intializePositions,u),n,r,o=u._dropCuePositions=[];s.fn.init.call(u,e,t);v=f.support.isRtl(e);r=v?"right":"left";u.draggable=n=u.options.draggable||new f.ui.Draggable(u.element,{filter:u.options.draggableElements,hint:y,group:i});u.groupContainer=c(u.options.groupContainer,u.element).kendoDropTarget({group:n.options.group,dragenter:function(e){if(u._canDrag(e.draggable.currentTarget)){e.draggable.hint.find(".k-drag-status").removeClass("k-i-cancel").addClass("k-i-plus");x.css(r,0).appendTo(u.groupContainer)}},dragleave:function(e){e.draggable.hint.find(".k-drag-status").removeClass("k-i-plus").addClass("k-i-cancel");x.remove()},drop:function(e){var t=e.draggable.currentTarget,i=t.attr(f.attr("field")),n=t.attr(f.attr("title")),r=u.indicator(i),a=u._dropCuePositions,o=a[a.length-1],s;var l=h({},u.options.sort,t.data(b));var d=l.dir;if(!t.hasClass("k-group-indicator")&&!u._canDrag(t)){return}if(o){s=u._dropCuePosition(f.getOffset(x).left+parseInt(o.element.css("marginLeft"),10)*(v?-1:1)+parseInt(o.element.css("marginRight"),10));if(s&&u._canDrop(c(r),s.element,s.left)){if(s.before){s.element.before(r||u.buildIndicator(i,n,d))}else{s.element.after(r||u.buildIndicator(i,n,d))}u._setIndicatorSortOptions(i,l);u._change()}}else{u.groupContainer.empty();u.groupContainer.append(u.buildIndicator(i,n,d));u._setIndicatorSortOptions(i,l);u._change()}}}).kendoDraggable({filter:"div.k-group-indicator",hint:y,group:n.options.group,dragcancel:p(u._dragCancel,u),dragstart:function(e){var t=e.currentTarget,i=parseInt(t.css("marginLeft"),10),n=t.position(),r=v?n.left-i:n.left+l(t);a();x.css("left",r).appendTo(u.groupContainer);this.hint.find(".k-drag-status").removeClass("k-i-cancel").addClass("k-i-plus")},dragend:function(){u._dragEnd(this)},drag:p(u._drag,u)}).on("click"+w,".k-button",function(e){e.preventDefault();u._removeIndicator(c(this).parent())}).on("click"+w,".k-link",function(e){var t=c(this).parent();var i=t.attr(d(m))===g?_:g;t.attr(d(m),i);u._change();e.preventDefault()});n.bind(["dragend","dragcancel","dragstart","drag"],{dragend:function(){u._dragEnd(this)},dragcancel:p(u._dragCancel,u),dragstart:function(e){var t,i,n;if(!u.options.allowDrag&&!u._canDrag(e.currentTarget)){e.preventDefault();return}a();if(o.length){t=o[o.length-1].element;i=parseInt(t.css("marginRight"),10);n=t.position().left+l(t)+i}else{n=0}},drag:p(u._drag,u)});u.dataSource=u.options.dataSource;if(u.dataSource&&u._refreshHandler){u.dataSource.unbind(k,u._refreshHandler)}else{u._refreshHandler=p(u.refresh,u)}if(u.dataSource){u.dataSource.bind("change",u._refreshHandler);u.refresh()}},refresh:function(){var a=this,e=a.dataSource;var t=e.group()||[];var o=d(n);var s=d(r);var l;if(a.groupContainer){a.groupContainer.empty();i(t,function(e,t){var i=t.field;var n=t.dir;var r=a.element.find(a.options.filter).filter(function(){return c(this).attr(o)===i});l=a.buildIndicator(i,r.attr(s),n);a.groupContainer.append(l);a._setIndicatorSortOptions(i,h({},a.options.sort,{dir:n,compare:t.compare}))})}a._invalidateGroupContainer()},destroy:function(){var e=this;s.fn.destroy.call(e);e.groupContainer.off(w);if(e.groupContainer.data("kendoDropTarget")){e.groupContainer.data("kendoDropTarget").destroy()}if(e.groupContainer.data("kendoDraggable")){e.groupContainer.data("kendoDraggable").destroy()}if(!e.options.draggable){e.draggable.destroy()}if(e.dataSource&&e._refreshHandler){e.dataSource.unbind("change",e._refreshHandler);e._refreshHandler=null}e.groupContainer=e.element=e.draggable=null},events:["change"],options:{name:"Groupable",filter:"th",draggableElements:"th",messages:{empty:"Drag a column header and drop it here to group by that column"},sort:{dir:g,compare:null}},indicator:function(t){var e=c(".k-group-indicator",this.groupContainer);return c.grep(e,function(e){return c(e).attr(f.attr("field"))===t})[0]},buildIndicator:function(e,t,i){var n=this;var r=a({ns:f.ns,field:e.replace(/"/g,"'"),title:t,dir:i||(n.options.sort||{}).dir||g});return r},_setIndicatorSortOptions:function(e,t){var i=c(this.indicator(e));i.data(b,t)},aggregates:function(){var e=this;var n;var r;var a;return e.element.find(e.options.filter).map(function(){var e=c(this),t=e.attr(f.attr("aggregates")),i=e.attr(f.attr("field"));if(t&&t!==""){n=t.split(",");t=[];for(r=0,a=n.length;r<a;r++){t.push({field:i,aggregate:n[r]})}}return t}).toArray()},descriptors:function(){var n=this,e=c(".k-group-indicator",n.groupContainer),r,a=n.aggregates();return c.map(e,function(e){e=c(e);r=e.attr(f.attr("field"));var t=n.options.sort||{};var i=e.data(b)||{};return{field:r,dir:e.attr(f.attr("dir")),aggregates:a||[],compare:i.compare||t.compare}})},_removeIndicator:function(e){var t=this;e.off();e.removeData();e.remove();t._invalidateGroupContainer();t._change()},_change:function(){var e=this;if(e.dataSource){var t=e.descriptors();if(e.trigger("change",{groups:t})){e.refresh();return}e.dataSource.group(t)}},_dropCuePosition:function(t){var e=this._dropCuePositions;if(!x.is(":visible")||e.length===0){return}t=Math.ceil(t);var i=e[e.length-1],n=i.left,r=i.right,a=parseInt(i.element.css("marginLeft"),10),o=parseInt(i.element.css("marginRight"),10);if(t>=r&&!v||t<n&&v){t={left:i.element.position().left+(!v?l(i.element)+o:-a),element:i.element,before:false}}else{t=c.grep(e,function(e){return e.left<=t&&t<=e.right||v&&t>e.right})[0];if(t){t={left:v?t.element.position().left+l(t.element)+o:t.element.position().left-a,element:t.element,before:true}}}return t},_drag:function(e){var t=this._dropCuePosition(e.x.location);if(t){x.css({left:t.left,right:"auto"})}},_canDrag:function(e){var t=e.attr(f.attr("field"));return e.attr(f.attr("groupable"))!="false"&&t&&(e.hasClass("k-group-indicator")||!this.indicator(t))},_canDrop:function(e,t,i){var n=e.next(),r=e[0]!==t[0]&&(!n[0]||t[0]!==n[0]||(!v&&i>n.position().left||v&&i<n.position().left));return r},_dragEnd:function(e){var t=this,i=e.currentTarget.attr(f.attr("field")),n=t.indicator(i);if(e!==t.options.draggable&&!e.dropped&&n){t._removeIndicator(c(n))}t._dragCancel()},_dragCancel:function(){x.remove();this._dropCuePositions=[]},_intializePositions:function(){var e=this,t=c(".k-group-indicator",e.groupContainer),i;e._dropCuePositions=c.map(t,function(e){e=c(e);i=f.getOffset(e).left;return{left:parseInt(i,10),right:parseInt(i+l(e),10),element:e}})},_invalidateGroupContainer:function(){var e=this.groupContainer;if(e&&e.is(":empty")){e.html(this.options.messages.empty)}}});f.ui.plugin(t)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.reorderable",["kendo.core","kendo.draganddrop"],e)})(function(){var e={id:"reorderable",name:"Reorderable",category:"framework",depends:["core","draganddrop"],advanced:true};(function(n,e){var r=window.kendo,s=r._outerWidth,l=r._outerHeight,d=r.getOffset,u=r.ui.Widget,c="change",f="k-reorderable";function h(e,t){e=n(e);if(t){e.find(".k-drag-status").removeClass("k-i-plus").addClass("k-i-cancel")}else{e.find(".k-drag-status").removeClass("k-i-cancel").addClass("k-i-plus")}}var t=u.extend({init:function(e,a){var o=this,t,i=r.guid()+"-reorderable";u.fn.init.call(o,e,a);e=o.element.addClass(f);a=o.options;o.draggable=t=a.draggable||new r.ui.Draggable(e,{group:i,autoScroll:true,filter:a.filter,hint:a.hint});o.reorderDropCue=n('<div class="k-reorder-cue"></div></div>');e.find(t.options.filter).kendoDropTarget({group:t.options.group,dragenter:function(e){if(!o._draggable){return}var t=this.element,i;var n=!o._dropTargetAllowed(t)||o._isLastDraggable();h(e.draggable.hint,n);if(!n){i=d(t);var r=i.left;if(a.inSameContainer&&!a.inSameContainer({source:t,target:o._draggable,sourceIndex:o._index(t),targetIndex:o._index(o._draggable)})){o._dropTarget=t}else{if(o._index(t)>o._index(o._draggable)){r+=s(t)}}o.reorderDropCue.css({height:l(t),top:i.top,left:r}).appendTo(document.body)}},dragleave:function(e){h(e.draggable.hint,true);o.reorderDropCue.remove();o._dropTarget=null},drop:function(){o._dropTarget=null;if(!o._draggable){return}var e=this.element;var t=o._draggable;if(o._dropTargetAllowed(e)&&!o._isLastDraggable()){o.trigger(c,{element:o._draggable,target:e,oldIndex:o._index(t),newIndex:o._index(e),position:d(o.reorderDropCue).left>d(e).left?"after":"before"})}}});t.bind(["dragcancel","dragend","dragstart","drag"],{dragcancel:function(){o.reorderDropCue.remove();o._draggable=null;o._elements=null},dragend:function(){o.reorderDropCue.remove();o._draggable=null;o._elements=null},dragstart:function(e){o._draggable=e.currentTarget;o._elements=o.element.find(o.draggable.options.filter)},drag:function(e){if(!o._dropTarget||this.hint.find(".k-drag-status").hasClass("k-i-cancel")){return}var t=d(o._dropTarget).left;var i=s(o._dropTarget);if(e.pageX>t+i/2){o.reorderDropCue.css({left:t+i})}else{o.reorderDropCue.css({left:t})}}})},options:{name:"Reorderable",filter:"*"},events:[c],_isLastDraggable:function(){var e=this.options.inSameContainer,t=this._draggable[0],i=this._elements.get(),n=false,r;if(!e){return false}while(!n&&i.length>0){r=i.pop();n=t!==r&&e({source:t,target:r,sourceIndex:this._index(t),targetIndex:this._index(r)})}return!n},_dropTargetAllowed:function(e){var t=this.options.inSameContainer,i=this.options.dragOverContainers,n=this._draggable;if(n[0]===e[0]){return false}if(!t||!i){return true}if(t({source:n,target:e,sourceIndex:this._index(n),targetIndex:this._index(e)})){return true}return i(this._index(n),this._index(e))},_index:function(e){return this._elements.index(e)},destroy:function(){var e=this;u.fn.destroy.call(e);e.element.find(e.draggable.options.filter).each(function(){var e=n(this);if(e.data("kendoDropTarget")){e.data("kendoDropTarget").destroy()}});if(e.draggable){e.draggable.destroy();e.draggable.element=e.draggable=null}e.elements=e.reorderDropCue=e._elements=e._draggable=null}});r.ui.plugin(t)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.resizable",["kendo.core","kendo.draganddrop"],e)})(function(){var e={id:"resizable",name:"Resizable",category:"framework",depends:["core","draganddrop"],advanced:true};(function(r,o){var e=window.kendo,n=e.ui,a=n.Widget,s=r.proxy,l=e.isFunction,d=r.extend,u="horizontal",c="vertical",f="start",h="resize",i="resizeend";var t=a.extend({init:function(e,t){var i=this;a.fn.init.call(i,e,t);i.orientation=i.options.orientation.toLowerCase()!=c?u:c;i._positionMouse=i.orientation==u?"x":"y";i._position=i.orientation==u?"left":"top";i._sizingDom=i.orientation==u?"outerWidth":"outerHeight";i.draggable=new n.Draggable(t.draggableElement||e,{distance:1,filter:t.handle,drag:s(i._resize,i),dragcancel:s(i._cancel,i),dragstart:s(i._start,i),dragend:s(i._stop,i)});i.userEvents=i.draggable.userEvents},events:[h,i,f],options:{name:"Resizable",orientation:u},resize:function(){},_max:function(e){var t=this,i=t.hint?t.hint[t._sizingDom]():0,n=t.options.max;return l(n)?n(e):n!==o?t._initialElementPosition+n-i:n},_min:function(e){var t=this,i=t.options.min;return l(i)?i(e):i!==o?t._initialElementPosition+i:i},_start:function(e){var t=this,i=t.options.hint,n=r(e.currentTarget);t._initialElementPosition=n.position()[t._position];t._initialMousePosition=e[t._positionMouse].startLocation;if(i){t.hint=l(i)?r(i(n)):i;t.hint.css({position:"absolute"}).css(t._position,t._initialElementPosition).appendTo(t.element)}t.trigger(f,e);t._maxPosition=t._max(e);t._minPosition=t._min(e);r(document.body).css("cursor",n.css("cursor"))},_resize:function(e){var t=this,i=t._maxPosition,n=t._minPosition,r=t._initialElementPosition+(e[t._positionMouse].location-t._initialMousePosition),a;a=n!==o?Math.max(n,r):r;t.position=a=i!==o?Math.min(i,a):a;if(t.hint){t.hint.toggleClass(t.options.invalidClass||"",a==i||a==n).css(t._position,a)}t.resizing=true;t.trigger(h,d(e,{position:a}))},_stop:function(e){var t=this;if(t.hint){t.hint.remove()}t.resizing=false;t.trigger(i,d(e,{position:t.position}));r(document.body).css("cursor","")},_cancel:function(e){var t=this;if(t.hint){t.position=o;t.hint.css(t._position,t._initialElementPosition);t._stop(e)}},destroy:function(){var e=this;a.fn.destroy.call(e);if(e.draggable){e.draggable.destroy()}},press:function(e){if(!e){return}var t=e.position(),i=this;i.userEvents.press(t.left,t.top,e[0]);i.targetPosition=t;i.target=e},move:function(e){var t=this,i=t._position,n=t.targetPosition,r=t.position;if(r===o){r=n[i]}n[i]=r+e;t.userEvents.move(n.left,n.top)},end:function(){this.userEvents.end();this.target=this.position=o}});e.ui.plugin(t)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.sortable",["kendo.draganddrop"],e)})(function(){var e={id:"sortable",name:"Sortable",category:"framework",depends:["draganddrop"]};(function(h,e){var o=window.kendo,n=o.ui.Widget,s=o._outerWidth,l=o._outerHeight,d="start",r="beforeMove",a="move",u="end",c="change",t="cancel",f="sort",p="remove",v="receive",i=">*",m=-1;function g(e,t){try{return h.contains(e,t)||e==t}catch(e){return false}}function _(e){return e.clone()}function b(e){return e.clone().removeAttr("id").css("visibility","hidden")}var w=n.extend({init:function(e,t){var i=this;n.fn.init.call(i,e,t);if(!i.options.placeholder){i.options.placeholder=b}if(!i.options.hint){i.options.hint=_}i.draggable=i._createDraggable()},events:[d,r,a,u,c,t],options:{name:"Sortable",hint:null,placeholder:null,filter:i,holdToDrag:false,disabled:null,container:null,connectWith:null,handler:null,cursorOffset:null,axis:null,ignore:null,autoScroll:false,cursor:"auto",moveOnDragEnter:false},destroy:function(){this.draggable.destroy();n.fn.destroy.call(this)},_createDraggable:function(){var e=this,t=e.element,i=e.options;return new o.ui.Draggable(t,{filter:i.filter,hint:o.isFunction(i.hint)?i.hint:h(i.hint),holdToDrag:i.holdToDrag,container:i.container?h(i.container):null,cursorOffset:i.cursorOffset,axis:i.axis,ignore:i.ignore,autoScroll:i.autoScroll,dragstart:h.proxy(e._dragstart,e),dragcancel:h.proxy(e._dragcancel,e),drag:h.proxy(e._drag,e),dragend:h.proxy(e._dragend,e)})},_dragstart:function(e){var t=this.draggedElement=e.currentTarget,i=this.options.disabled,n=this.options.handler,r=this.options.placeholder,a=this.placeholder=o.isFunction(r)?h(r.call(this,t)):h(r);if(i&&t.is(i)){e.preventDefault()}else if(n&&!h(e.initialTarget).is(n)){e.preventDefault()}else{if(this.trigger(d,{item:t,draggableEvent:e})){e.preventDefault()}else{t.css("display","none");t.before(a);this._setCursor()}}},_dragcancel:function(){this._cancel();this.trigger(t,{item:this.draggedElement});this._resetCursor()},_drag:function(e){var t=this.draggedElement,i=this._findTarget(e),n,r={left:e.x.location,top:e.y.location},a,o={x:e.x.delta,y:e.y.delta},s,l,d,u=this.options.axis,c=this.options.moveOnDragEnter,f={item:t,list:this,draggableEvent:e};if(u==="x"||u==="y"){this._movementByAxis(u,r,o[u],f);return}if(i){n=this._getElementCenter(i.element);a={left:Math.round(r.left-n.left),top:Math.round(r.top-n.top)};h.extend(f,{target:i.element});if(i.appendToBottom){this._movePlaceholder(i,null,f);return}if(i.appendAfterHidden){this._movePlaceholder(i,"next",f)}if(this._isFloating(i.element)){if(o.x<0&&c||!c&&a.left<0){s="prev"}else if(o.x>0&&c||!c&&a.left>0){s="next"}}else{if(o.y<0&&c||!c&&a.top<0){s="prev"}else if(o.y>0&&c||!c&&a.top>0){s="next"}}if(s){d=s==="prev"?jQuery.fn.prev:jQuery.fn.next;l=d.call(i.element);while(l.length&&!l.is(":visible")){l=d.call(l)}if(l[0]!=this.placeholder[0]){this._movePlaceholder(i,s,f)}}}},_dragend:function(e){var t=this.placeholder,i=this.draggedElement,n=this.indexOf(i),r=this.indexOf(t),a=this.options.connectWith,o,s,l,d;this._resetCursor();l={action:f,item:i,oldIndex:n,newIndex:r,draggableEvent:e};if(r>=0){s=this.trigger(u,l)}else{o=t.parents(a).getKendoSortable();l.action=p;d=h.extend({},l,{action:v,oldIndex:m,newIndex:o.indexOf(t)});s=!(!this.trigger(u,l)&&!o.trigger(u,d))}if(s||r===n){this._cancel();return}t.replaceWith(i);i.show();this.draggable.dropped=true;l={action:this.indexOf(i)!=m?f:p,item:i,oldIndex:n,newIndex:this.indexOf(i),draggableEvent:e};this.trigger(c,l);if(o){d=h.extend({},l,{action:v,oldIndex:m,newIndex:o.indexOf(i)});o.trigger(c,d)}},_findTarget:function(e){var t=this._findElementUnderCursor(e),i,n=this.options.connectWith,r;if(h.contains(this.element[0],t)){i=this.items();r=i.filter(t)[0]||i.has(t)[0];return r?{element:h(r),sortable:this}:null}else if(this.element[0]==t&&this._isEmpty()){return{element:this.element,sortable:this,appendToBottom:true}}else if(this.element[0]==t&&this._isLastHidden()){r=this.items().eq(0);return{element:r,sortable:this,appendAfterHidden:true}}else if(n){return this._searchConnectedTargets(t,e)}},_findElementUnderCursor:function(e){var t=o.elementUnderCursor(e),i=e.sender;if(g(i.hint[0],t)){i.hint.hide();t=o.elementUnderCursor(e);if(!t){t=o.elementUnderCursor(e)}i.hint.show()}return t},_searchConnectedTargets:function(e,t){var i=h(this.options.connectWith),n,r,a;for(var o=0;o<i.length;o++){n=i.eq(o).getKendoSortable();if(h.contains(i[o],e)){if(n){r=n.items();a=r.filter(e)[0]||r.has(e)[0];if(a){n.placeholder=this.placeholder;return{element:h(a),sortable:n}}else{return null}}}else if(i[o]==e){if(n&&n._isEmpty()){return{element:i.eq(o),sortable:n,appendToBottom:true}}else if(this._isCursorAfterLast(n,t)){a=n.items().last();return{element:a,sortable:n}}}}},_isCursorAfterLast:function(e,t){var i=e.items().last(),n={left:t.x.location,top:t.y.location},r,a;r=o.getOffset(i);r.top+=l(i);r.left+=s(i);if(this._isFloating(i)){a=r.left-n.left}else{a=r.top-n.top}return a<0?true:false},_movementByAxis:function(e,t,i,n){var r=e==="x"?t.left:t.top,a=i<0?this.placeholder.prev():this.placeholder.next(),o=this.items(),s;if(a.length&&!a.is(":visible")){a=i<0?a.prev():a.next()}if(!o.filter(a).length){return}h.extend(n,{target:a});s=this._getElementCenter(a);if(s){s=e==="x"?s.left:s.top}if(a.length&&i<0&&r-s<0){this._movePlaceholder({element:a,sortable:this},"prev",n)}else if(a.length&&i>0&&r-s>0){this._movePlaceholder({element:a,sortable:this},"next",n)}},_movePlaceholder:function(e,t,i){var n=this.placeholder;if(!e.sortable.trigger(r,i)){if(!t){e.element.append(n)}else if(t==="prev"){e.element.before(n)}else if(t==="next"){e.element.after(n)}e.sortable.trigger(a,i)}},_setCursor:function(){var e=this.options.cursor,t;if(e&&e!=="auto"){t=h(document.body);this._originalCursorType=t.css("cursor");t.css({cursor:e});if(!this._cursorStylesheet){this._cursorStylesheet=h("<style>* { cursor: "+e+" !important; }</style>")}this._cursorStylesheet.appendTo(t)}},_resetCursor:function(){if(this._originalCursorType){h(document.body).css("cursor",this._originalCursorType);this._originalCursorType=null;this._cursorStylesheet.remove()}},_getElementCenter:function(e){var t=e.length?o.getOffset(e):null;if(t){t.top+=l(e)/2;t.left+=s(e)/2}return t},_isFloating:function(e){var t=/left|right/.test(e.css("float"));var i=/inline|table-cell/.test(e.css("display"));var n=/flex/.test(e.parent().css("display"))&&(/row|row-reverse/.test(e.parent().css("flex-direction"))||!e.parent().css("flex-direction"));return t||i||n},_cancel:function(){this.draggedElement.show();this.placeholder.remove();this.draggable.dropped=true},_items:function(){var e=this.options.filter,t;if(e){t=this.element.find(e)}else{t=this.element.children()}return t},indexOf:function(e){var t=this._items(),i=this.placeholder,n=this.draggedElement;if(i&&e[0]==i[0]){return t.not(n).index(e)}else{return t.not(i).index(e)}},items:function(){var e=this.placeholder,t=this._items();if(e){t=t.not(e)}return t},_isEmpty:function(){return!this.items().length},_isLastHidden:function(){return this.items().length===1&&this.items().is(":hidden")}});o.ui.plugin(w)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.selectable",["kendo.core","kendo.userevents"],e)})(function(){var e={id:"selectable",name:"Selectable",category:"framework",depends:["core","userevents"],advanced:true};(function(d,e){var u=window.kendo,r=u.ui.Widget,a=d.proxy,n=Math.abs,o="aria-selected",c="k-state-selected",l="k-state-selecting",f="k-selectable",h="change",t=".kendoSelectable",i="unselect",p="k-state-unselecting",s="input,a,textarea,.k-multiselect-wrap,select,button,.k-button>span,.k-button>img,span.k-icon.k-i-arrow-60-down,span.k-icon.k-i-arrow-60-up,label.k-checkbox-label.k-no-text,.k-icon.k-i-collapse,.k-icon.k-i-expand,span.k-numeric-wrap,.k-focusable",v=u.support.browser.msie,m=false,g=d.extend;(function(e){(function(){e('<div class="parent"><span></span></div>').on("click",">*",function(){m=true}).find("span").trigger("click").end().off()})()})(d);var _=r.extend({init:function(e,t){var i=this,n;r.fn.init.call(i,e,t);i._marquee=d("<div class='k-marquee'><div class='k-marquee-color'></div></div>");i._lastActive=null;i.element.addClass(f);i.relatedTarget=i.options.relatedTarget;n=i.options.multiple;if(this.options.aria&&n){i.element.attr("aria-multiselectable",true)}i.userEvents=new u.UserEvents(i.element,{global:true,allowSelection:true,filter:(!m?"."+f+" ":"")+i.options.filter,tap:a(i._tap,i),touchAction:n?"none":"pan-x pan-y"});if(n){i.userEvents.bind("start",a(i._start,i)).bind("move",a(i._move,i)).bind("end",a(i._end,i)).bind("select",a(i._select,i))}},events:[h,i],options:{name:"Selectable",filter:">*",inputSelectors:s,multiple:false,relatedTarget:d.noop,ignoreOverlapped:false},_isElement:function(e){var t=this.element;var i,n=t.length,r=false;e=e[0];for(i=0;i<n;i++){if(t[i]===e){r=true;break}}return r},_tap:function(e){var t=d(e.target),i=this,n=e.event.ctrlKey||e.event.metaKey,r=i.options.multiple,a=r&&e.event.shiftKey,o,s=e.event.which,l=e.event.button;if(!i._isElement(t.closest("."+f))||s&&s==3||l&&l==2){return}if(!this._allowSelection(e.event.target)){return}o=t.hasClass(c);if(!r||!n){i.clear()}t=t.add(i.relatedTarget(t));if(a){i.selectRange(i._firstSelectee(),t,e)}else{if(o&&n){i._unselect(t);i._notify(h,e)}else{i.value(t,e)}i._lastActive=i._downTarget=t}},_start:function(e){var t=this,i=d(e.target),n=i.hasClass(c),r,a=e.event.ctrlKey||e.event.metaKey;if(!this._allowSelection(e.event.target)){return}t._downTarget=i;if(!t._isElement(i.closest("."+f))){t.userEvents.cancel();return}if(t.options.useAllItems){t._items=t.element.find(t.options.filter)}else{r=i.closest(t.element);t._items=r.find(t.options.filter)}e.sender.capture();t._marquee.appendTo(document.body).css({left:e.x.client+1,top:e.y.client+1,width:0,height:0});if(!a){t.clear()}i=i.add(t.relatedTarget(i));if(n){t._selectElement(i,true);if(a){i.addClass(p)}}},_move:function(e){var t=this,i={left:e.x.startLocation>e.x.location?e.x.location:e.x.startLocation,top:e.y.startLocation>e.y.location?e.y.location:e.y.startLocation,width:n(e.x.initialDelta),height:n(e.y.initialDelta)};t._marquee.css(i);t._invalidateSelectables(i,e.event.ctrlKey||e.event.metaKey);e.preventDefault()},_end:function(e){var t=this;t._marquee.remove();t._unselect(t.element.find(t.options.filter+"."+p)).removeClass(p);var i=t.element.find(t.options.filter+"."+l);i=i.add(t.relatedTarget(i));t.value(i,e);t._lastActive=t._downTarget;t._items=null},_invalidateSelectables:function(e,t){var i,n,r=this._downTarget[0],a=this._items,o,s;this._currentlyActive=[];for(i=0,n=a.length;i<n;i++){s=a.eq(i);o=s.add(this.relatedTarget(s));if(b(s,e)){if(s.hasClass(c)){if(t&&r!==s[0]){o.removeClass(c).addClass(p)}}else if(!s.hasClass(l)&&!s.hasClass(p)&&!this._collidesWithActiveElement(o,e)){o.addClass(l)}this._currentlyActive.push(o[0])}else{if(s.hasClass(l)){o.removeClass(l)}else if(t&&s.hasClass(p)){o.removeClass(p).addClass(c)}}}},_collidesWithActiveElement:function(e,t){if(!this.options.ignoreOverlapped){return false}var i=this._currentlyActive;var n=e[0].getBoundingClientRect();var r;var a=false;var o=u.support.isRtl(e);var s=o?"right":"left";var l={};t.right=t.left+t.width;t.bottom=t.top+t.height;for(var d=0;d<i.length;d++){r=i[d].getBoundingClientRect();if(w(n,r)){l[s]=s==="left"?r.right:r.left;n=g({},n,l);if(n.left>n.right){return true}a=!w(n,t)}}return a},value:function(e,t){var i=this,n=a(i._selectElement,i);if(e){e.each(function(){n(this)});i._notify(h,t);return}return i.element.find(i.options.filter+"."+c)},_firstSelectee:function(){var e=this,t;if(e._lastActive!==null){return e._lastActive}t=e.value();return t.length>0?t[0]:e.element.find(e.options.filter)[0]},_selectElement:function(e,t){var i=d(e),n=!t&&this._notify("select",{element:e});i.removeClass(l);if(!n){i.addClass(c);if(this.options.aria){i.attr(o,true)}}},_notify:function(e,t){t=t||{};return this.trigger(e,t)},_unselect:function(e){if(this.trigger(i,{element:e})){return}e.removeClass(c);if(this.options.aria){e.attr(o,false)}return e},_select:function(e){if(this._allowSelection(e.event.target)){if(!v||v&&!d(u._activeElement()).is(this.options.inputSelectors)){e.preventDefault()}}},_allowSelection:function(e){if(d(e).is(this.options.inputSelectors)){this.userEvents.cancel();this._downTarget=null;return false}return true},resetTouchEvents:function(){this.userEvents.cancel()},clear:function(){var e=this.element.find(this.options.filter+"."+c);this._unselect(e)},selectRange:function(e,t,i){var n=this,r,a,o;n.clear();if(n.element.length>1){o=n.options.continuousItems()}if(!o||!o.length){o=n.element.find(n.options.filter)}e=d.inArray(d(e)[0],o);t=d.inArray(d(t)[0],o);if(e>t){a=e;e=t;t=a}if(!n.options.useAllItems){t+=n.element.length-1}for(r=e;r<=t;r++){n._selectElement(o[r])}n._notify(h,i)},destroy:function(){var e=this;r.fn.destroy.call(e);e.element.off(t);e.userEvents.destroy();e._marquee=e._lastActive=e.element=e.userEvents=null}});_.parseOptions=function(e){var t=e.mode||e;var i=typeof t==="string"&&t.toLowerCase();return{multiple:i&&i.indexOf("multiple")>-1,cell:i&&i.indexOf("cell")>-1}};function b(e,t){if(!e.is(":visible")){return false}var i=u.getOffset(e),n=t.left+t.width,r=t.top+t.height;i.right=i.left+u._outerWidth(e);i.bottom=i.top+u._outerHeight(e);return!(i.left>n||i.right<t.left||i.top>r||i.bottom<t.top)}function w(e,t){return!(e.right<=t.left||e.left>=t.right||e.bottom<=t.top||e.top>=t.bottom)}u.ui.plugin(_)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("chat/messageBox",["kendo.core"],e)})(function(){(function(r,e){var a=window.kendo;var i=a.ui.Widget;var t=r.extend;var n=r.proxy;var o=".";var s=".kendoChat";var l=a.keys;var d='<svg version="1.1" ixmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 16 16" xml:space="preserve"><path d="M0,14.3c-0.1,0.6,0.3,0.8,0.8,0.6l14.8-6.5c0.5-0.2,0.5-0.6,0-0.8L0.8,1.1C0.3,0.9-0.1,1.1,0,1.7l0.7,4.2C0.8,6.5,1.4,7,1.9,7.1l8.8,0.8c0.6,0.1,0.6,0.1,0,0.2L1.9,8.9C1.4,9,0.8,9.5,0.7,10.1L0,14.3z"/></svg>';var u='<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><g>   <path d="M128,240c0-26.4-21.6-48-48-48s-48,21.6-48,48s21.6,48,48,48S128,266.4,128,240z"/>   <path d="M192,240c0,26.4,21.6,48,48,48c26.4,0,48-21.6,48-48s-21.6-48-48-48C213.6,192,192,213.6,192,240z"/>   <path d="M352,240c0,26.4,21.6,48,48,48c26.4,0,48-21.6,48-48s-21.6-48-48-48C373.6,192,352,213.6,352,240z"/></g></svg>';var c={input:"k-input",button:"k-button",buttonFlat:"k-flat",buttonIcon:"k-button-icon",buttonSend:"k-button-send",buttonToggle:"k-button-toggle",iconAdd:"k-icon k-i-add",hidden:"k-hidden"};var f=i.extend({init:function(e,t){i.fn.init.call(this,e,t);this._wrapper();this._attachEvents();this._typing=false},events:[],options:{messages:{placeholder:"Type a message...",toggleButton:"Toggle toolbar",sendButton:"Send message"}},destroy:function(){i.fn.destroy.call(this);if(this.input){this.input.off(s);this.input.remove();this.input=null}this.element.off(s);this.element.empty()},_wrapper:function(){var e=f.styles;var t=this.options;var i=t.messages;var n="inputId_"+a.guid();r("<label>").addClass(e.hidden).html(i.placeholder).attr("for",n).appendTo(this.element);this.input=r("<input type='text'>").addClass(e.input).attr("id",n).attr("placeholder",i.placeholder).appendTo(this.element);if(t.toolbar&&t.toolbar.toggleable&&t.toolbar.buttons&&t.toolbar.buttons.length){r("<button>").addClass(e.button).addClass(e.buttonFlat).addClass(e.buttonIcon).addClass(e.buttonToggle).attr("type","button").append(r(u)).appendTo(this.element).attr("title",i.toggleButton).attr("aria-label",i.toggleButton)}r("<button>").addClass(e.button).addClass(e.buttonFlat).addClass(e.buttonIcon).addClass(e.buttonSend).append(r(d)).appendTo(this.element).attr("title",i.sendButton).attr("aria-label",i.sendButton)},_attachEvents:function(){var e=f.styles;this.input.on("keydown"+s,n(this._keydown,this)).on("input"+s,n(this._input,this)).on("focusout"+s,n(this._inputFocusout,this));this.element.on("click"+s,o+e.buttonSend,n(this._buttonClick,this));this.element.on("click"+s,o+e.buttonToggle,n(this._toggleToolbar,this))},_input:function(){var e=this.input.val();var t=e.length>0;this._triggerTyping(t)},_keydown:function(e){var t=e.keyCode;switch(t){case l.ENTER:e.preventDefault();this._sendMessage();break}},_buttonClick:function(e){e.preventDefault();this._sendMessage()},_sendMessage:function(){var e=this.input.val();if(!e.length){return}this._triggerTyping(false);var t={text:e};this.trigger("sendMessage",t);this.input.val("")},_inputFocusout:function(){this._triggerTyping(false)},_triggerTyping:function(e){if(e){if(!this._typing){this.trigger("typingStart",{});this._typing=true}}else{if(this._typing){this.trigger("typingEnd",{});this._typing=false}}},_toggleToolbar:function(e){this.trigger("toggleToolbar",{originalEvent:e})}});t(true,f,{styles:c});t(a,{chat:{ChatMessageBox:f}})})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("chat/toolbar",["kendo.core"],e)})(function(){(function(o,n){var s=window.kendo;var r=s.ui.Widget;var a=o.extend;var l=o.proxy;var d=".";var u=".kendoChat";var c="kButtonName";var f="chatToolbarScrollLeft";var h="chatToolbarScrollRight";var i=":visible";var p={effects:"expand:vertical",duration:200};var v={expand:{show:true},collapse:{hide:true}};var e={button:"k-button",buttonFlat:"k-flat",buttonList:"k-button-list",scrollButton:"k-scroll-button",scrollButtonLeft:"k-scroll-button-left",scrollButtonRight:"k-scroll-button-right",scrollButtonLeftIcon:"k-icon k-i-arrow-chevron-left",scrollButtonRightIcon:"k-icon k-i-arrow-chevron-right",buttonIcon:"k-button-icon"};var m=r.extend({init:function(e,t){t=a({},t,{name:"ChatToolbar"});var i=t.toolbar;var n=i.buttons&&i.buttons.length;r.fn.init.call(this,e,t);if(n){this._createButtonList()}if(n&&i.scrollable&&this.buttonsWidth()>this.element.width()){this._initScrolling()}this._setupAnimation();if(n&&i.toggleable){this.toggle(true)}this.element.on("click"+u,l(this._onClick,this))},events:["click"],destroy:function(){r.fn.destroy.call(this);this.element.off(u);this.element.empty()},_createButtonList:function(){var e=this;var t=m.styles;var i=e.options.toolbar.buttons;var n=o("<div class='"+t.buttonList+"'></div>");for(var r=0;r<i.length;r++){var a=e._createButton(i[r]);n.append(a)}n.appendTo(this.element);this.buttonList=n},_createButton:function(e){var t=m.styles;var i=o("<button>");if(typeof e==="string"){e={name:e}}i.attr(e.attr||{}).attr("title",e.text||e.name).attr("aria-label",e.text||e.name).attr("type","button").addClass(e.name).data(c,e.name).addClass(t.button);if(e.iconClass){i.addClass(t.buttonIcon);i.prepend("<span class='"+e.iconClass+"'></span>")}return i},_onClick:function(e){var t=m.styles;var i=o(e.target).closest(d+t.button);if(i.is(d+t.scrollButton)&&!this._scrolling){this._scroll(i.data(c))}if(i.data(c)){this.trigger("click",{button:i[0],name:i.data(c),originalEvent:e})}},_initScrolling:function(){var e=m.styles;this.scrollButtonLeft=this._createButton({name:f,iconClass:e.scrollButtonLeftIcon,attr:{class:e.scrollButton+" "+e.scrollButtonLeft}});this.scrollButtonRight=this._createButton({name:h,iconClass:e.scrollButtonRightIcon,attr:{class:e.scrollButton+" "+e.scrollButtonRight}});this.element.prepend(this.scrollButtonLeft);this.element.append(this.scrollButtonRight);this._refreshScrollButtons();this.element.on("keydown"+u,l(this._refreshScrollButtons,this))},_scroll:function(e){var t=this;var i=t.buttonWidth();var n=this.maxScrollSize();var r=e===f?i*-1:i;var a=this.currentScrollLeft();var o=a+r;o=Math.min(Math.max(o,0),n);if(e!==f&&e!==h){return}s.scrollLeft(t.buttonList,o);t._refreshScrollButtons(o)},_refreshScrollButtons:function(e){var t=this.maxScrollSize();var i=e===n||isNaN(parseInt(e,10))?this.currentScrollLeft():e;if(!this.scrollButtonLeft&&!this.scrollButtonRight){return}this.scrollButtonLeft.toggle(i!==0);this.scrollButtonRight.toggle(i!==t)},_setupAnimation:function(){var e=this.options.toolbar.animation;var t=a({},p);var i=a({reverse:true,hide:true},p);if(e===false){e=a(true,{},v)}else{e=a(true,{expand:t,collapse:i},e)}this.options.toolbar.animation=e},_animationComplete:function(){this._refreshScrollButtons()},currentScrollLeft:function(){return Math.round(s.scrollLeft(this.buttonList))},maxScrollSize:function(){return Math.round(this.buttonList[0].scrollWidth-this.buttonList[0].clientWidth)},buttons:function(){var e=m.styles;return this.buttonList?this.buttonList.children(d+e.button):null},buttonWidth:function(){return Math.round(this.buttons().last().outerWidth(true))},buttonsWidth:function(){var e=0;if(this.buttons()){e=this.buttonWidth()*this.buttons().length}return e},toggle:function(e){var t=this.options.toolbar.animation;if(e){t=a(true,{},v)}t.expand.complete=l(this._animationComplete,this);t.collapse.complete=l(this._animationComplete,this);if(this.element.is(i)){this.element.kendoStop().kendoAnimate(t.collapse)}else{this.element.kendoStop().kendoAnimate(t.expand)}}});a(true,m,{styles:e});a(s.chat,{ChatToolBar:m})})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("chat/view",["kendo.core","kendo.draganddrop"],e)})(function(){(function(s,e){var l=window.kendo;var i=l.ui.Widget;var d=s.extend;var t=s.proxy;var u=".";var n=" ";var r=".kendoChat";var a=l.template('<div #:text# class="#=styles.messageGroup# #= url ? "" : styles.noAvatar #">'+'<p class="#=styles.author#">#:text#</p>'+"# if (url) { #"+'<img src="#=url#" alt="#:text#" class="#=styles.avatar#">'+"# } #"+"</div>");var o=l.template('<div me class="#=styles.messageGroup# #=styles.self# #= url ? "" : styles.noAvatar #">'+"# if (url) { #"+'<img src="#=url#" alt="#:text#" class="#=styles.avatar#">'+"# } #"+"</div>");var c=l.template('<div class="#=styles.message#">'+'<time class="#=styles.messageTime#">#= kendo.toString(kendo.parseDate(timestamp), "HH:mm:ss") #</time>'+'<div class="#=styles.bubble#">#:text#</div>'+"</div>");var f=l.template('<div class="#=styles.messageListContent# #=styles.typingIndicatorBubble#">'+'<p class="#=styles.author#">#:text#</p>'+'<div class="#=styles.message#">'+'<div class="#=styles.bubble#">'+'<div class="#=styles.typingIndicator#">'+"<span></span><span></span><span></span>"+"</div>"+"</div>"+"</div>"+"</div>");var h=l.template('<div class="#=styles.suggestedActions#">'+"# for (var i = 0; i < suggestedActions.length; i++) { #"+'<span class="#=styles.suggestedAction#" data-value="#:suggestedActions[i].value#">#:suggestedActions[i].title#</span>'+"# } #"+"</div>");var p=l.template('<div class="#=styles.card# #=styles.cardRich#">'+'# if (typeof images !== "undefined" && images.length > 0) { #'+'<img src="#:images[0].url#" alt="#:images[0].alt#" class="#=styles.cardImage#" />'+"# } #"+'<div class="#=styles.cardBody#">'+'# if (typeof title !== "undefined") { #'+'<h5 class="#=styles.cardTitle#">#:title#</h5>'+"# } #"+'# if (typeof subtitle !== "undefined") { #'+'<h6 class="#=styles.cardSubtitle#">#:subtitle#</h6>'+"# } #"+'# if (typeof text !== "undefined") { #'+"<p>#:text#</p>"+"# } #"+"</div>"+'# if (typeof buttons !== "undefined" && buttons.length > 0) { #'+'<div class="#=styles.cardActions# #=styles.cardActionsVertical#">'+"# for (var i = 0; i < buttons.length; i++) { #"+'<span class="#=styles.cardAction#"><span class="#=styles.button# #=styles.buttonPrimary#" data-value="#:buttons[i].value#">#:buttons[i].title#</span></span>'+"# } #"+"</div>"+"# } #"+"</div>");d(l.chat,{Templates:{},Components:{}});l.chat.registerTemplate=function(e,t){l.chat.Templates[e]=l.template(t)};l.chat.getTemplate=function(e){return l.chat.Templates[e]||c};l.chat.registerTemplate("text",c);l.chat.registerTemplate("message",c);l.chat.registerTemplate("typing",f);l.chat.registerTemplate("suggestedAction",h);l.chat.registerTemplate("heroCard",p);l.chat.registerTemplate("application/vnd.microsoft.card.hero",p);l.chat.registerComponent=function(e,t){l.chat.Components[e]=t};l.chat.getComponent=function(e){return l.chat.Components[e]||null};var v=l.chat.Component=l.Class.extend({init:function(e,t){this.element=s("<div></div>");this.options=e;this.view=t},destroy:function(){l.destroy(this.element)}});var m=v.extend({init:function(e,t){v.fn.init.call(this,e,t);this.element.kendoCalendar({change:function(){t.trigger("suggestedAction",{text:l.toString(this.value(),"d"),type:"message"})}})},destroy:function(){}});l.chat.registerComponent("calendar",m);var g={wrapper:"k-widget k-widget-2021 k-chat",messageList:"k-avatars",messageListContent:"k-message-list-content",messageTime:"k-message-time",messageGroup:"k-message-group",message:"k-message",only:"k-only",first:"k-first",middle:"k-middle",last:"k-last",author:"k-author",avatar:"k-avatar",noAvatar:"k-no-avatar",self:"k-alt",button:"k-button",iconButton:"k-button-icon",buttonPrimary:"k-flat k-primary",scrollButtonIcon:"k-icon",scrollButtonIconLeft:"k-i-arrow-chevron-left",scrollButtonIconRight:"k-i-arrow-chevron-right",typingIndicator:"k-typing-indicator",typingIndicatorBubble:"k-typing-indicator-bubble",bubble:"k-bubble",suggestedActions:"k-quick-replies",suggestedAction:"k-quick-reply",cardWrapper:"k-card-container",cardDeckScrollWrap:"k-card-deck-scrollwrap",cardDeck:"k-card-deck",cardList:"k-card-list",card:"k-card",cardRich:"k-card-type-rich",cardBody:"k-card-body",cardImage:"k-card-image",cardTitle:"k-card-title",cardSubtitle:"k-card-subtitle",cardActions:"k-card-actions",cardActionsVertical:"k-card-actions-vertical",cardAction:"k-card-action",selected:"k-state-selected"};var _=l.chat.ChatView=i.extend({init:function(e,t){i.fn.init.call(this,e,t);this._list();this._lastSender=null;this.typingParticipants=[];this._attachEvents();this._scrollable()},events:[],options:{messages:{isTyping:" is typing.",areTyping:" are typing.",and:" and "}},destroy:function(){i.fn.destroy.call(this);if(this._scrollDraggable){this._scrollDraggable.destroy()}this.element.empty();this.element.off(r);this.list=null;this._lastSender=null},_list:function(){var e=_.styles;this.element.addClass(e.messageList).attr("aria-live","polite");this.list=s("<div>").addClass(e.messageListContent).appendTo(this.element)},_attachEvents:function(){var e=_.styles;this.element.on("click"+r,t(this._listClick,this)).on("click"+r,u+e.message,t(this._messageClick,this)).on("click"+r,u+e.suggestedAction,t(this._suggestedActionClick,this)).on("click"+r,u+e.cardAction+n+u+e.button,t(this._cardActionClick,this))},_scrollable:function(){var e=_.styles;this.element.on("click"+r,u+e.cardDeckScrollWrap+n+u+e.button,t(this._scrollButtonClick,this))},_scrollButtonClick:function(e){var t=_.styles;var i=s(e.currentTarget);var n=i.find(u+t.scrollButtonIconLeft).length!==0;var r=i.siblings(u+t.cardDeck);var a=r.find(u+t.card).last();var o=a.outerWidth(true);if(n){l.scrollLeft(r,l.scrollLeft(r)-o)}else{l.scrollLeft(r,l.scrollLeft(r)+o)}},getTemplate:function(e){return l.chat.getTemplate(e)},getComponent:function(e){return l.chat.getComponent(e)},renderMessage:function(e,t){if(!e.timestamp){e.timestamp=new Date}if(!e.text){e.text=""}var i=this._renderTemplate(e.type,e);this._renderBubble(e.type,i,t);if(e.type=="typing"){if(this.typingParticipants.length>0){this._removeTypingParticipant(t)}}else{this._lastSender=t.id}},renderSuggestedActions:function(e){this._removeSuggestedActions();var t=this._renderTemplate("suggestedAction",{suggestedActions:e});this.list.append(t);this._scrollToBottom()},renderAttachments:function(e){var t=this._renderAttachmentWrapper(e.attachmentLayout);var i=e.attachmentLayout==="carousel"?t.find(u+_.styles.cardDeck):t;var n=e.attachments;if(!n.length){return}for(var r=0;r<n.length;r++){var a=this._renderTemplate(n[r].contentType,n[r].content);i.append(a)}this._removeSuggestedActions();this._removeTypingIndicator();this.list.append(t);this._lastSender=null},renderComponent:function(e){var t=this.getComponent(e);var i=new t({},this);this.list.append(i.element);this._scrollToBottom()},_renderAttachmentWrapper:function(e){var t=_.styles;var i=s("<div>");if(e==="carousel"){i.addClass(t.cardDeckScrollWrap);var n=this._renderScrollButton(t.scrollButtonIconLeft);i.append(n);i.append(s("<div>").addClass(t.cardDeck));var r=this._renderScrollButton(t.scrollButtonIconRight);i.append(r)}else{i.addClass(t.cardList)}return i},_renderScrollButton:function(e){var t=_.styles;return s("<button>").addClass(t.button).addClass(t.iconButton).append(s("<span>").addClass(t.scrollButtonIcon).addClass(e))},_removeSuggestedActions:function(){this.list.find(u+_.styles.suggestedActions).remove()},_listClick:function(e){var t=_.styles;var i=s(e.target);if(i.hasClass(t.message)||i.parents(u+t.message).length){return}this._clearSelection()},_messageClick:function(e){this._clearSelection();s(e.currentTarget).addClass(_.styles.selected)},_suggestedActionClick:function(e){var t=s(e.target).data("value")||"";this.trigger("actionClick",{text:t});this._removeSuggestedActions()},_cardActionClick:function(e){var t=s(e.target).data("value")||"";this.trigger("actionClick",{text:t})},_renderBubble:function(e,t,i){this._removeSuggestedActions();this._removeTypingIndicator();var n=this._getMessageGroup(i,e);this._appendToGroup(n,t,e);this._scrollToBottom()},_renderTemplate:function(e,t){var i=this.getComponent(e);var n;if(i){var r=new i(t,this);n=r.element}else{var a=this.getTemplate(e);var o=d(true,{},t,{styles:_.styles});n=s(a(o))}return n},_getMessageGroup:function(e,t){var i=_.styles;var n=this._getMessageGroupTemplate(e,t);var r=t=="typing"?this.element:this.list;var a;if(e.id===this._lastSender&&this._lastSender!==null&&t!=="typing"){a=this.list.find(u+i.messageGroup).last();if(a.length){return a}}return s(n({text:e.name,url:e.iconUrl,styles:i})).appendTo(r)},_getMessageGroupTemplate:function(e,t){var i=e.id===this.options.user.id;var n=i?o:a;if(t=="typing"){n=f}return n},_appendToGroup:function(e,t,i){var n=_.styles;var r=e.find(u+n.message);var a=r.length;var o=this.element.find(u+n.typingIndicator);if(o.length&&i=="typing"){return}t.addClass(a===0?n.only:n.last);r.filter(u+n.only).removeClass(n.only).addClass(n.first);r.filter(u+n.last).removeClass(n.last).addClass(n.middle);e.append(t)},_renderTypingIndicator:function(e){var t=this.element.find(u+g.typingIndicatorBubble),i,n;this._addTypingParticipant(e);if(t.length){n=this._composeTypingParticipantsText(this.typingParticipants);i=t.find(u+g.author).first();i.text(n)}else{s(f({text:e.name+this.options.messages.isTyping,styles:g})).appendTo(this.element)}this._scrollToBottom()},_addTypingParticipant:function(e){var t=false;for(var i=0;i<this.typingParticipants.length;i+=1){if(this.typingParticipants[i].id==e.id){t=true;break}}if(!t){this.typingParticipants.push(e)}},_removeTypingParticipant:function(e){var t=this.element.find(u+g.typingIndicatorBubble),i,n;if(t.length){for(var r=0;r<this.typingParticipants.length;r+=1){if(this.typingParticipants[r].id==e.id){this.typingParticipants.splice(r,1)}}n=this._composeTypingParticipantsText(this.typingParticipants);if(n===""){t.remove()}else{i=t.find(u+g.author).first();i.text(n)}}},_composeTypingParticipantsText:function(e){var t=this.options.messages,i=e.length==1?t.isTyping:t.areTyping,n="";if(e.length===0){return n}n=this.typingParticipants.map(function(e){return e.name}).join(", ").replace(/,(?!.*,)/gim,t.and.trimRight())+i;return n},_removeTypingIndicator:function(){var e=this.element.find(u+g.typingIndicatorBubble);if(e.length){this.typingParticipants=[];e.remove()}},_clearSelection:function(){var e=_.styles.selected;this.element.find(u+e).removeClass(e)},_scrollToBottom:function(){this.element.scrollTop(this.element.prop("scrollHeight"))}});d(true,_,{styles:g})})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.chat",["chat/messageBox","chat/toolbar","chat/view"],e)})(function(){var e={id:"chat",name:"Chat",category:"web",description:"The Chat component.",depends:["core","draganddrop"]};(function(t,r){var a=window.kendo;var n=a.ui.Widget;var o=t.extend;var s=".";var i={wrapper:"k-widget k-widget-2021 k-chat",canvas:"k-chat-canvas",viewWrapper:"k-message-list",messageBoxWrapper:"k-message-box",toolbarBoxWrapper:"k-toolbar-box"};var l=n.extend({init:function(e,t,i){n.fn.init.call(this,e,t);if(i){this._events=i}this._user();this._wrapper();this._view();this._messageBox();if(t&&t.toolbar&&t.toolbar.buttons){this._toolbar()}a.notify(this)},events:["typingStart","typingEnd","post","sendMessage","actionClick","toolClick"],options:{user:{name:"User",iconUrl:""},name:"Chat",messages:{placeholder:"Type a message...",toggleButton:"Toggle toolbar",sendButton:"Send message"},toolbar:false},setOptions:function(e){this._setEvents(e);t.extend(true,this.options,e);if(this.toolbar&&"toolbar"in e){this.toolbar.destroy();this.toolbar=null}if(this.messageBox){this.messageBox.unbind();this.messageBox.destroy();this.messageBox=null}this._messageBox();if("toolbar"in e){this._resetToolbarButtons(e);this._toolbar()}},_resetToolbarButtons:function(e){var t=this.wrapper.find(s+i.toolbarBoxWrapper);if(!t.is(":visible")){t.show()}if(e.toolbar&&typeof e.toolbar=="object"&&"buttons"in e.toolbar){this.options.toolbar.buttons=e.toolbar.buttons}},destroy:function(){if(this.view){this.view.unbind();this.view.destroy();this.view=null}if(this.messageBox){this.messageBox.unbind();this.messageBox.destroy();this.messageBox=null}if(this.toolbar){this.toolbar.destroy();this.toolbar=null}n.fn.destroy.call(this)},_user:function(){this.options.user.id=a.guid()},getUser:function(){return o(true,{},this.options.user)},_wrapper:function(){var e=l.styles;var t=this.options;var i=t.height;var n=t.width;var r="<div class='"+e.viewWrapper+"'></div>"+"<div class='"+e.messageBoxWrapper+"'></div>"+"<div class='"+e.toolbarBoxWrapper+"' role='toolbar' style='display:none;'></div>";this.wrapper=this.element.addClass(e.wrapper).append(r);if(t.toolbar&&t.toolbar.buttons&&t.toolbar.buttons.length){this.wrapper.find(s+e.toolbarBoxWrapper).show()}if(i){this.wrapper.height(i)}if(n){this.wrapper.css("max-width",n)}},_view:function(){var t=this;var e=l.styles;var i=o(true,{},this.options);var n=this.wrapper.find(s+e.viewWrapper+"");this.view=new a.chat.ChatView(n,i);this.view.bind("actionClick",function(e){t.trigger("actionClick",e);t.postMessage(e.text)})},_messageBox:function(){var t=this;var e=l.styles;var i=o(true,{},this.options);var n=this.wrapper.find(s+e.messageBoxWrapper+"");this.messageBox=new a.chat.ChatMessageBox(n,i);this.messageBox.bind("typingStart",function(e){t.trigger("typingStart",e)}).bind("typingEnd",function(e){t.trigger("typingEnd",e)}).bind("sendMessage",function(e){t.trigger("sendMessage",e);t.postMessage(e.text)}).bind("toggleToolbar",function(){t.toggleToolbar()})},_toolbar:function(){var t=this;var e=l.styles;var i=o(true,{},t.options);var n=t.wrapper.find(s+e.toolbarBoxWrapper+"");if(i.toolbar.scrollable===r){this.options.toolbar.scrollable=i.toolbar.scrollable=true}if(i.toolbar.toggleable===r){this.options.toolbar.toggleable=i.toolbar.toggleable=false}t.toolbar=new a.chat.ChatToolBar(n,i);t.toolbar.bind("click",function(e){t.trigger("toolClick",{sender:t,name:e.name,button:e.button,messageBox:t.messageBox.input[0],originalEvent:e.originalEvent})})},postMessage:function(e){var t=o(true,{},{text:e,type:"message",timestamp:new Date,from:this.getUser()});this.trigger("post",t);this.renderMessage(t,t.from)},renderMessage:function(e,t){this.view.renderMessage(e,t)},renderSuggestedActions:function(e){this.view.renderSuggestedActions(e)},renderAttachments:function(e,t){this.view.renderAttachments(e,t)},toggleToolbar:function(e){this.toolbar.toggle(e)},renderUserTypingIndicator:function(e){this.view._renderTypingIndicator(e)},clearUserTypingIndicator:function(e){this.view._removeTypingParticipant(e)},removeTypingIndicator:function(){this.view._removeTypingIndicator()}});a.ui.plugin(l);o(true,l,{styles:i})})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.badge",["kendo.core"],e)})(function(){var e={id:"badge",name:"Badge",category:"web",description:"The Badge decorates avatars, navigation menus, or other components in the application when visual notification is needed",depends:["core"]};(function(e,h){var a=window.kendo;var n=a.ui.Widget;var t=a.ui;var p="k-hidden";var r="<span class='k-badge-icon k-icon k-i-#= icon #'></span>";var o="<span class='k-badge-icon k-svg-icon'>#= icon #</span>";var i=n.extend({init:function(e,t){var i=this;n.fn.init.call(i,e,t);i._content();i._appearance();a.notify(i)},destroy:function(){var e=this;n.fn.destroy.call(e)},options:{name:"Badge",cutoutBorder:false,data:{},fill:"solid",icon:"",max:Infinity,position:"inline",align:"",sizes:{small:"sm",medium:"md",large:"lg"},size:"medium",shape:"rounded",template:null,text:"",themeColor:"secondary",visible:true,_classNames:[]},_content:function(){var e=this;var t=e.options.text;var i=e.options.template;var n=e.options.data;var r=e.options.icon;if(i!==null){e._text=t;e._template=a.template(i).bind(e);e.element.html(e._template(n));return}if(r!==""){e.icon(r);return}if(t!==""){e.text(t);return}e.text(e.element.html())},_appearance:function(){var e=this;e._themeColor=e.options.themeColor;e._shape=e.options.shape;e._sizes=e.options.sizes;e._size=e.options.size;e._fill=e.options.fill;e._cutoutBorder=e.options.cutoutBorder;e._align=e.options.align;e._position=e.options.position;e._visible=e.options.visible;e._updateClassNames()},_updateClassNames:function(){var i=this;var e=["k-badge"];var n=i.options._classNames;var t=i._themeColor;var r=i._shape;var a=i._sizes;var o=i._size;var s=a[o]===h?o:a[o];var l=i._fill;var d=i._cutoutBorder;var u=i._align;var c=i._position;var f=i._visible;i.element.removeClass(function(e,t){if(t.indexOf("k-")===0&&n.indexOf(t)===-1){i.element.removeClass(t)}});if(typeof l==="string"&&l!==""){e.push("k-badge-"+l)}if(typeof t==="string"&&t!==""){e.push("k-badge-"+t)}if(typeof o==="string"&&o!==""){e.push("k-badge-"+s)}if(typeof r==="string"&&r!==""){e.push("k-badge-"+r)}if(typeof d==="boolean"&&d===true){e.push("k-badge-border-cutout")}if(typeof c==="string"&&c!==""){e.push("k-badge-"+c)}if(typeof c==="string"&&c!==""&&c!=="inline"&&typeof u==="string"&&u.split(" ").length==2){e.push("k-"+u.replace(" ","-"))}if(f===false){e.push(p)}i.element.addClass(e.join(" "))},setOptions:function(e){var i=this;i.element.removeClass(function(e,t){if(t.indexOf("k-")>=0){i.element.removeClass(t)}});n.fn.setOptions.call(i,e);i._content();i._appearance()},text:function(e){var t=this;var i=t.options.max;if(arguments.length===0||e===h){return t._text}t._text=e;if(e===true||e===false||e===null){t.element.html("");return}if(typeof e==="string"){t.element.html(e);return}if(typeof e==="number"){if(e>i){t.element.html(i+"+")}else{t.element.html(e)}return}if(typeof e==="object"&&"toString"in e){t.element.html(e.toString());return}},icon:function(e){var t=this;var i;if(arguments.length===0||e===h){return t._icon}t._icon=e;if(e.indexOf("<svg")===0){i=a.template(o);t.element.html(i({icon:e}));return}i=a.template(r);t.element.html(i({icon:e}))},themeColor:function(e){var t=this;if(arguments.length===0||e===h){return t._themeColor}t._themeColor=e;t._updateClassNames()},shape:function(e){var t=this;if(arguments.length===0||e===h){return t._shape}t._shape=e;t._updateClassNames()},hide:function(){var e=this;e._visible=false;e._updateClassNames()},show:function(){var e=this;e._visible=true;e._updateClassNames()}});t.plugin(i)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.button",["kendo.core","kendo.badge"],e)})(function(){var e={id:"button",name:"Button",category:"web",description:"The Button widget displays styled buttons.",depends:["core","badge"]};(function(u,n){var c=window.kendo,r=c.ui.Widget,a=c.ui,o=u.proxy,i=c.keys,s="click",l=c.support.mousedown,d=c.support.mouseup,f="mouseout",h="k-button",p="k-button-icon",v="k-button-icontext",m=".kendoButton",g="disabled",_="k-state-disabled",t="k-state-focused",b="k-state-active";var e={icon:"",iconClass:"",spriteCssClass:"",imageUrl:"",badge:null};c.setDefaults("button",e);var w=r.extend({init:function(e,t){var i=this;r.fn.init.call(i,e,t);e=i.wrapper=i.element;t=i.options;e.addClass(h).attr("role","button");t.enable=t.enable&&t.enabled&&!e.attr(g);i.enable(t.enable);if(t.enable){i._tabindex()}i._badge();i.iconElement();e.on(s+m,o(i._click,i)).on("focus"+m,o(i._focus,i)).on("blur"+m,o(i._blur,i)).on("keydown"+m,o(i._keydown,i)).on("keyup"+m,o(i._removeActive,i)).on(l+m,o(i._addActive,i)).on(d+m+" "+f+m,o(i._removeActive,i));c.notify(i)},destroy:function(){var e=this;e.wrapper.off(m);if(e.badge){e.badge.destroy()}r.fn.destroy.call(e)},events:[s],options:{name:"Button",enable:true,enabled:true,icon:"",iconClass:"",spriteCssClass:"",imageUrl:"",badge:null},_isNativeButton:function(){return this.element.prop("tagName").toLowerCase()=="button"},_click:function(e){if(this.options.enable){if(this.trigger(s,{event:e})){e.preventDefault()}}},_focus:function(){if(this.options.enable){this.element.addClass(t)}},_blur:function(){var e=this;e.element.removeClass(t);setTimeout(function(){e.element.removeClass(b)})},_keydown:function(e){var t=this;if(e.keyCode==i.ENTER||e.keyCode==i.SPACEBAR){t._addActive();if(!t._isNativeButton()){if(e.keyCode==i.SPACEBAR){e.preventDefault()}t._click(e)}}},_removeActive:function(){this.element.removeClass(b)},_addActive:function(){if(this.options.enable){this.element.addClass(b)}},iconElement:function(){var e=this,t=e.element,i=e.options,n=i.icon,r=i.iconClass,a=i.spriteCssClass,o=i.imageUrl,s,l,d;if(a||o||n||r){d=true;t.contents().filter(function(){return!u(this).hasClass("k-sprite")&&!u(this).hasClass("k-icon")&&!u(this).hasClass("k-image")}).each(function(e,t){if(t.nodeType==1||t.nodeType==3&&c.trim(t.nodeValue).length>0){d=false}});if(d){t.addClass(p)}else{t.addClass(v)}}if(o){l=t.children("img.k-image").first();if(!l[0]){l=u('<img alt="icon" class="k-image" />').prependTo(t)}l.attr("src",o)}else if(n||r){s=t.children("span.k-icon").first();if(!s[0]){s=u("<span></span>").prependTo(t)}s.attr("class",n?"k-icon k-i-"+n:r)}else if(a){s=t.children("span.k-sprite").first();if(!s[0]){s=u('<span class="k-sprite"></span>').prependTo(t)}s.addClass(a)}},enable:function(e){var t=this,i=t.element;if(e===n){e=true}e=!!e;t.options.enable=e;i.toggleClass(_,!e).attr("aria-disabled",!e).attr(g,!e);if(e){t._tabindex()}try{i.blur()}catch(e){}},_badge:function(){var e=this;var t=e.options.badge;var i;if(t===null||t===n){return}if(t.constructor!==Object){t={text:t}}if(t.position===n||t.position===""){t.position="edge";if(t.align===n||t.align===""){t.align="top end"}}t._classNames=["k-button-badge"];e.element.addClass("k-badge-container");i=u("<span />").appendTo(e.element);e.badge=new a.Badge(i,t)}});if(w.fn.hasOwnProperty("defaults")===false){Object.defineProperty(w.fn,"defaults",{get:function(){return c.defaults.button}})}c.ui.plugin(w)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.buttongroup",["kendo.core","kendo.badge"],e)})(function(){var e={id:"buttongroup",name:"ButtonGroup",category:"web",description:"The Kendo ButtonGroup widget is a linear set of grouped buttons.",depends:["core","badge"]};(function(l,r){var d=window.kendo;var n=d.ui;var a=n.Widget;var u=d.keys;var t=l.proxy;var e=d.template;var i=".kendoButtonGroup";var o="k-widget";var s="k-button-group";var c="k-button";var f="k-button-icontext";var h="k-button-icon";var p="k-state-active";var v="k-state-disabled";var m="select";var g="click";var _="keydown";var b="focus";var w="focusout";var k="mousedown";var y=d.support.browser.msie;var x={item:e("<span "+'#= item.enabled === false ? "disabled" : "" # '+">"+"#= icon(iconClass) #"+"#= image(item) #"+"#= text #"+"</span>"),image:e('<img alt="icon" src="#=data.imageUrl#" />'),icon:e('<span class="#=data#"></span>'),empty:e("")};function C(e,t){var i;if(e===null||e===r){return}if(e.constructor!==Object){e={text:e}}if(e.position===r||e.position===""){e.position="edge";if(e.align===r||e.align===""){e.align="top end"}}e._classNames=["k-button-badge"];t.addClass("k-badge-container");i=l("<span />").appendTo(t);t.badge=new n.Badge(i,e)}var S=a.extend({init:function(e,t){var i=this;a.fn.init.call(i,e,t);i.wrapper=i.element;if(i.options.items){i._renderItems(i.options.items)}i.selectedIndices=[];i.element.addClass(o+" "+s).attr("role","group").attr("tabindex",i.element.attr("tabindex")||"0").children().each(function(){var e=l(this);i._updateClasses.bind(i)(e)});i._enable=true;if(!i.options.enable||!i.options.enabled){i._enable=false;i.element.attr("aria-disabled",true).addClass(v)}i.select(i.options.index);i._attachEvents()},events:[m],options:{name:"ButtonGroup",selection:"single",index:-1,enable:true,enabled:true},current:function(){return this.element.find("."+p)},_attachEvents:function(){var e=this;e.element.on(g+i,"."+c,t(e._click,e)).on(b+i,t(e._focus,e)).on(w+i,t(e._focusout,e)).on(_+i,t(e._keyDown,e)).on(k+i,t(e._mouseDown,e))},_renderItems:function(e){var i=this;e.forEach(function(e){var t=l(x.item({image:e.imageUrl?x.image:x.empty,icon:!e.imageUrl&&(e.iconClass||e.icon)?x.icon:x.empty,iconClass:e.iconClass||"k-icon k-i-"+e.icon,item:e,text:e.text?e.encoded===false?e.text:d.htmlEncode(e.text):""}));if(e.attributes){t.attr(e.attributes)}if(e.selected){t.addClass(p)}if(e.iconClass||e.icon||e.imageUrl){t.addClass(e.text?"k-button-icontext":"k-button-icon")}if(e.badge){C(e.badge,t)}t.appendTo(i.element)})},_mouseDown:function(e){var t=e.clientX,i=e.clientY,n=document.elementFromPoint(t,i);if(n!==this.element[0]){this.preventFocus=true;this.preventFocusOut=true}if(y){this._focus()}},_focus:function(){var e=l(this.element);e.removeAttr("tabindex");e.find("[role='button']").attr("tabindex","0");if(this.preventFocus){this.preventFocus=false;return}if(e.find("."+p).length){e.find("."+p).first().focus()}else{e.children().first().focus()}},_focusout:function(){var e=this;var t=e.wrapper;if(this.preventFocusOut){this.preventFocusOut=false;return}setTimeout(function(){if(!t[0].contains(document.activeElement)){t.attr("tabindex","0");t.find("[role='button']").removeAttr("tabindex")}})},_keyDown:function(e){var t=this;var i=l(t.element);var n=i.find("."+c);var r=i.find(":focus");var a=n.index(r);var o=d.support.isRtl(t.element);var s;if(e.keyCode===u.LEFT&&!o||e.keyCode===u.RIGHT&&o){s=a===0?n.eq(n.length-1):l(n[a-1]);s.focus();e.preventDefault()}else if(e.keyCode===u.LEFT&&o||e.keyCode===u.RIGHT&&!o){s=a+1===n.length?n.eq(0):l(n[a+1]);s.focus();e.preventDefault()}else if(e.keyCode===u.ENTER||e.keyCode===u.SPACEBAR){t._select(r);e.preventDefault()}},select:function(e){var t=this,i,n=-1;if(e===r||e===-1){return}if(typeof e==="number"){n=e;e=t.element.children().eq(e)}else if(e.nodeType){e=l(e);n=e.index()}if(t.options.selection==="multiple"){i=e.attr("aria-pressed")==="true";e.attr("aria-pressed",!i).toggleClass(p);if(t.selectedIndices.indexOf(n)===-1){t.selectedIndices.push(n)}else{t.selectedIndices.splice(t.selectedIndices.indexOf(n),1)}}else{t.selectedIndices=[];t.current().attr("aria-pressed",false).removeClass(p);e.attr("aria-pressed",true).addClass(p);t.selectedIndices.push(n)}},badge:function(e,t){var i=this.element;var n=!isNaN(e)?i.children().eq(e):i.find(e);var r=t||t===0;var a;if(!n.length){return}a=n.children(".k-badge").eq(0).data("kendoBadge");if(!a&&r){C({text:d.htmlEncode(t)},n);return d.htmlEncode(t)}if(r){a.text(d.htmlEncode(t))}else if(t===false){a.element.empty().remove();a.destroy();return}return a?a.text():null},enable:function(e){if(typeof e=="undefined"){e=true}this.element.attr("aria-disabled",!e).toggleClass(v,!e);this._enable=this.options.enable=e},destroy:function(){var e=this;e.element.off(i);e.element.find(".k-badge").each(function(){l(this).data("kendoBadge").destroy()});a.fn.destroy.call(e)},_updateClasses:function(e){var t=d.attrValue(e,"icon");var i=d.attrValue(e,"badge");var n=e.find("img").addClass("k-image");var r=true;e.attr("aria-pressed",false).attr("role","button").addClass(c);if(e.is("[disabled]")||e.hasClass(v)){e.addClass(v).attr("aria-disabled",true).removeAttr("disabled")}if(e.is("."+p)){e.removeClass(p);if(!e.hasClass(v)&&this.options.selection==="single"||this.options.selection==="multiple"){this.select(e[0])}}if(!n[0]&&t){e.prepend(l(x.icon("k-icon k-i-"+t)))}e.contents().filter(function(){return!l(this).hasClass("k-icon")&&!l(this).hasClass("k-image")}).each(function(){if(this.nodeType==1||this.nodeType==3&&d.trim(this.nodeValue).length>0){r=false}});if(n[0]||t){e.addClass(r?h:f)}if(i||i===0){C(i,e)}},_click:function(e){var t=l(e.target).closest("."+c);if(e.isDefaultPrevented()){return}e.target.focus();this._select(t)},_select:function(e){var t=e;if(!this._enable||t.is("."+v)){return}this.select(e[0]);this.trigger(m,{indices:this.selectedIndices})}});n.plugin(S)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.breadcrumb",["kendo.core"],e)})(function(){var e={id:"breadcrumb",name:"Breadcrumb",category:"web",description:"The Breadcrumb widget displays navigation breadcrumb.",depends:["core"]};(function(f,h){var p=window.kendo,n=p.ui.Widget,v=f.extend,m=f.isPlainObject,r=f.proxy,a=".kendoBreadcrumb",s="aria-hidden",o="aria-label",l="click",d="focus",u="blur",c="keydown",i="change",g=".";var _={widget:"k-widget k-widget-2021 k-breadcrumb",overlay:"k-breadcrumb-container",textbox:"k-textbox",link:"k-breadcrumb-link",item:"k-breadcrumb-item",delimiter:"k-breadcrumb-delimiter-icon",rootItem:"k-breadcrumb-root-item",rootLink:"k-breadcrumb-root-link",overflowIcon:"k-breadcrumb-overflow-icon",focused:"k-state-focused",hidden:"k-hidden",inputWrapper:"k-breadcrumb-input-container"};var e=n.extend({init:function(e,t){var i=this;t=t||{};n.fn.init.call(i,e,t);i._wrapper();if(t.editable){i._editable();i._tabindex()}i.wrapper.on(l+a,"a:not(.k-state-disabled)",r(i._click,i));if(t.value||t.bindToLocation||!t.items){i._value()}else if(t.items){i.items(t.items)}i._resizeHandler=p.onResize(function(){i.resize(true)})},options:{editable:false,navigational:false,bindToLocation:false,items:null,name:"Breadcrumb",gap:0,rootIcon:"home",delimiterIcon:"arrow-chevron-right",messages:{rootTitle:"Go to root"}},events:[i,l],destroy:function(){var e=this;n.fn.destroy.call(e);p.unbindResize(e._resizeHandler);e.wrapper.add(e.wrapper.find("input")).add(e.wrapper.find("a")).off(a)},items:function(e){var t=this;if(e===h){return t.options.items}t.options.items=e;t._segments=e;t.refresh()},_update:function(e){var t=this;if(e!==t.value()){t._generateSegments(e);t.refresh();t.trigger(i,{sender:this,value:e})}},_generateSegments:function(e){var t=this,i=t.options,n=i.items,r,a;a=t._split(e);if(!n){t.options.items=t._segments=a;return}t._segments=[];for(var o=0;o<a.length;o++){r=t._path(n.slice(0,o+1));if(r!==""&&e.indexOf(r)>-1&&n[o]&&n[o].text===a[o]){t._segments.push(n[o])}else{t._segments.push(a[o])}}},_click:function(e){var t=this,i=t.options,n=f(e.target).closest(g+_.item),r=n.prevAll().addBack(),a=t._getItems(r),o=t._path(a),s=t._segments[n.index()];if(!i.navigational){e.preventDefault()}if(!t.trigger(l,{sender:t,originalEvent:e,isRoot:s.type==="rootitem",item:s})){t._update(o)}},_getItems:function(e){var t=this;return f.map(e,function(e){return t._segments[f(e).index()]||e.innerText})},_edit:function(){var e=this,t=e.input;e.oldValue=e.value();e.inputWrapper.css("height",e.wrapper.height());e.overlay.hide();e.input.val(e.value());e.input.attr(s,false);e.inputWrapper.show();setTimeout(function(){t.select()})},_blur:function(e){var t=this,i=t.input,n=t.inputWrapper,r=t.wrapper,a=t.overlay,o=i.val().replace(/\/{2,}/g,"/");if(a.is(":visible")){return}if(e){o=t.oldValue}i.attr(s,true);n.hide();a.show();i.val("");t._update(o);r.removeClass(_.focused)},_keydown:function(e){var t=this,i=e.keyCode,n=i===p.keys.ENTER,r=i===p.keys.ESC;if(n||r){t._blur(r);setTimeout(function(){t.overlay.find("a:first").focus()})}},isNavigational:function(e){var t=e.hasClass(_.textbox)||e.closest(g+_.item);if(e[0]===this.wrapper[0]){return false}return t&&!e.hasClass("k-breadcrumb-last-item")},_wrapperKeydown:function(e){var t=this,i=f(e.target),n=t.isNavigational(i);if(e.keyCode===p.keys.ENTER&&!n){t._edit()}},_wrapperClick:function(e){var t=this,i=f(e.target),n=t.isNavigational(i);if(!n){this._edit()}},_wrapperFocus:function(e){f(e.target).addClass(_.focused)},_wrapperBlur:function(e){f(e.target).removeClass(_.focused)},_wrapper:function(){var e=this,t=this.element,i=t.is("input");e.wrapper=i?t.wrap(f("<nav />")).parent():t;if(i){e.element.wrap(f("<div />").addClass(_.inputWrapper)).addClass(_.textbox).parent().hide();e.inputWrapper=e.wrapper.find(g+_.inputWrapper)}else{e.inputWrapper=e.wrapper.append(f("<div />").addClass(_.inputWrapper)).find(g+_.inputWrapper).hide()}e.wrapper.addClass(_.widget);e.wrapper.attr(o,"Breadcrumb");e.overlay=e.wrapper.append(f("<ol />").addClass(_.overlay)).find(g+_.overlay)},_editable:function(){var e=this,t=e.element,i=t.is("input");if(i){e.input=e.element}else{e.input=f("<input />")}e.inputWrapper.append(e.input);e.input.addClass(_.textbox).attr(s,true);e.input.on(u+a,r(e._blur,e,false)).on(c+a,r(e._keydown,e));e.wrapper.on(d+a,r(e._wrapperFocus,e)).on(u+a,r(e._wrapperBlur,e)).on(c+a,r(e._wrapperKeydown,e)).on(l+a,r(e._wrapperClick,e))},_value:function(){var e=this,t=e.options;if(t.value){e.value(t.value)}else if(t.bindToLocation){e.value(window.location.href.replace(/http(s?):\/\//,"").replace(/\/$/,""))}else{e.value("")}},_split:function(e){return e.split("/").filter(function(e,t){if(t>0&&e===""){return false}return true})},isRtl:function(){return p.support.isRtl(this.wrapper)},refresh:function(){var e=this,t=e.options,i=t.messages,n=e.options.delimiterIcon,r="",a="",o=e.value()==="",s=e._segments,l,d,u,c;if(n=="arrow-chevron-right"&&e.isRtl()){n="arrow-chevron-left"}for(d=0,u=s.length;d<u;d++){l=s[d];c=d===s.length-1;if(l!==h){if(!r){a="/"}else{a+=l.text||l||""}if(typeof l==="string"){l={type:!r?"rootitem":"item",href:t.navigational?a:"#",text:l,showIcon:!r,showText:!!r,icon:!r?t.rootIcon:"",itemClass:!r?"k-breadcrumb-root-item":"",linkClass:!r?_.rootLink:"",delimiterIcon:n,renderDelimiter:!c&&!o,lastSegment:c,iconClass:""};e._segments.splice(d,1,l)}else if(m(l)){l=v({},l,{type:l.type?l.type.toLowerCase():"item"});l=v({},l,{text:l.text||"",title:l.text||"",icon:l.icon||(l.type==="rootitem"?t.rootIcon:""),iconClass:l.iconClass||"",lastSegment:c,renderDelimiter:!c&&s.length>1,href:t.navigational?l.href:"#",delimiterIcon:n,itemClass:l.itemClass||"",linkClass:l.linkClass||"",showIcon:l.showIcon===h?l.type==="rootitem"&&l.type!=="item":l.showIcon,showText:l.showText===h?l.type==="item"&&l.type!=="rootitem":l.showText});if(l.type==="rootitem"){l.itemClass+=" k-breadcrumb-root-item";l.linkClass+=" "+_.rootLink}}if(l.type==="rootitem"&&l.text===""){l.title=i.rootTitle}a+=a.match(/\/$/)?"":"/";r+=p.template(this.itemTemplate)(l)}}this.overlay.empty().append(f(r));this.resize(true)},itemTemplate:'<li class="k-breadcrumb-item #:itemClass# #if(lastSegment){#k-breadcrumb-last-item#}#">'+'<a href="#:href#" class="#:linkClass# '+'#if(type !== "rootitem"){# k-breadcrumb-link#}#'+"#if(showText && showIcon){# k-breadcrumb-icontext-link#}#"+"#if(showIcon && !showText){# k-breadcrumb-icon-link#}#"+'#if(lastSegment && type !== "rootitem"){# k-state-disabled#}#"'+'#if(lastSegment){# aria-current="page"#}# title="#:text || title#">'+"#if(showIcon) {#"+'<span class="#if(icon){#k-icon k-i-#:icon##}# #:iconClass#"></span>'+"#}#"+"#if(showText) {#"+"#:text#"+"#}#"+"</a>"+"#if(renderDelimiter) {#"+'<span class="k-breadcrumb-delimiter-icon k-icon k-i-#:delimiterIcon#" aria-hidden="true"></span>'+"#}#"+'#if(type === "rootitem" && renderDelimiter) {#'+'<span class="k-breadcrumb-delimiter-icon k-hidden k-icon k-i-#:delimiterIcon#" aria-hidden="true"></span>'+"#}#"+"</li>",_displayOverflowIcons:function(e){var t=this,i=t.wrapper.find(g+_.rootItem);if(e){i.find(g+_.delimiter).addClass(_.overflowIcon).removeClass(_.hidden)}else{i.find(g+_.overflowIcon).removeClass(_.overflowIcon).last().addClass(_.hidden)}},_shrinkItems:function(){var e=this,t=e.wrapper,i=e.overlay,n=e.overlay.find(g+_.item+":visible:not(.k-breadcrumb-root-item)"),r=t.width()-e.options.gap,a;if(n.length==1){return}for(var o=0;o<n.length;o+=1){a=f(n[o]);if(p._outerWidth(i)>=r){if(o==n.length-1){break}a.hide();e._displayOverflowIcons(true)}}},_showItem:function(e,t,i){if(e.length&&i>t+p._outerWidth(e,true)){e.show();return true}return false},_stretchItems:function(){var e=this,t=e.wrapper,i=e.overlay,n=e.overlay.find(g+_.item+":hidden:not(.k-breadcrumb-root-item)"),r=t.width()-e.options.gap,a,o;if(!n.length){e._displayOverflowIcons(false)}for(var s=n.length-1;s>=0;s--){a=f(n[s]);o=p._outerWidth(i);if(o>r||!this._showItem(a,o,r)){break}}},_resize:function(){this._shrinkItems();this._stretchItems()},getSize:function(){return p.dimensions(this.wrapper)},value:function(e){var t=this;if(e!==h){t._generateSegments(e);t.refresh();return}return t._path(t._segments)},_path:function(e){return f.map(e,function(e){var t=m(e)?e.text:e;return t==="/"?"":t}).join("/")}});p.ui.plugin(e)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.switch",["kendo.core"],e)})(function(){var e={id:"switch",name:"Switch",category:"web",description:"The Switch widget is used to display two exclusive choices.",depends:["core"]};(function(l,a){var d=window.kendo,e=d.ui,t=".kendoSwitch",n=e.Widget,i=d.support,r="change",o={widget:"k-switch k-widget",container:"k-switch-container",handle:"k-switch-handle",checked:"k-switch-on",checkedLabel:"k-switch-label-on",unchecked:"k-switch-off",uncheckedLabel:"k-switch-label-off",disabled:"k-state-disabled",readonly:"k-state-readonly",active:"k-state-active"},s="disabled",u="aria-disabled",c="readonly",f="aria-readonly",h="aria-checked",p="checked",v=i.click+t,m=i.pointers?"pointerup":"touchend",g="keydown"+t,_="_label",b=l.proxy;var w=d.template('<span class="#=styles.widget#" role="switch"></span>');var k=d.template("<span class='#=styles.container#'>"+"<span class='#=styles.checkedLabel#'>#=checked#</span>"+"<span class='#=styles.uncheckedLabel#'>#=unchecked#</span>"+"<span class='#=styles.handle#'></span>"+"</span>");var y=n.extend({init:function(e,t){var i=this;n.fn.init.call(i,e,t);i._wrapper();i._initSettings();i._aria();i._attachEvents();d.notify(i,d.ui)},_wrapper:function(){var e=this,t=e.options,i=e.element[0],n=l(w({styles:o}));i.type="checkbox";e.wrapper=e.element.wrap(n).parent();e.wrapper[0].style.cssText=e.element[0].style.cssText;e.wrapper.append(l(k({styles:o,checked:t.messages.checked,unchecked:t.messages.unchecked}))).addClass(i.className).removeClass("input-validation-error")},_attachEvents:function(){var e=this;e.wrapper.on(v,b(e._click,e)).on(m,b(e._touchEnd,e)).on(g,b(e._keydown,e))},setOptions:function(e){var t=this,i=e.messages,n,r;t.options=l.extend(t.options,e);if(i&&i.checked!==a){n=t.wrapper.find("."+o.checkedLabel);n.text(i.checked)}if(i&&i.unchecked!==a){r=t.wrapper.find("."+o.uncheckedLabel);r.text(i.unchecked)}if(e.width){t.wrapper.css({width:e.width})}if(e.enabled!==a){t.enable(e.enabled)}if(e.readonly!==a){t.readonly(e.readonly)}t.check(e.checked)},_initSettings:function(){var e=this,t=e.element[0],i=e.options;if(i.enabled){e._tabindex()}if(i.width){e.wrapper.css({width:i.width})}if(i.checked===null){i.checked=t.checked}e.check(i.checked);i.enabled=i.enabled&&!e.element.attr(s);e.enable(i.enabled);i.readonly=i.readonly||!!e.element.attr(c);e.readonly(i.readonly)},_aria:function(){var e=this,t=e.element,i=e.wrapper,n=t.attr("id"),r=l('label[for="'+n+'"]'),a=t.attr("aria-label"),o=t.attr("aria-labelledby");if(a){i.attr("aria-label",a)}else if(o){i.attr("aria-labelledby",o)}else if(r.length){var s=r.attr("id");if(!s){s=(n||d.guid())+_;r.attr("id",s)}i.attr("aria-labelledby",s)}},events:[r],options:{name:"Switch",messages:{checked:"On",unchecked:"Off"},width:null,checked:null,enabled:true,readonly:false},check:function(e){var t=this,i=t.element[0];if(e===a){return i.checked}if(i.checked!==e){t.options.checked=i.checked=e}t.wrapper.attr(h,e).toggleClass(o.checked,e).toggleClass(o.unchecked,!e);if(e){t.element.attr(p,p)}else{t.element.removeAttr(p)}},value:function(e){if(typeof e==="string"){e=e==="true"}return this.check.apply(this,[e])},destroy:function(){n.fn.destroy.call(this);this.wrapper.off(t)},toggle:function(){var e=this;e.check(!e.element[0].checked)},enable:function(e){var t=this.element,i=this.wrapper;if(typeof e=="undefined"){e=true}this.options.enabled=e;if(e){t.removeAttr(s);i.removeAttr(u)}else{t.attr(s,s);i.attr(u,true)}i.toggleClass(o.disabled,!e)},readonly:function(e){var t=this,i=t.element,n=t.wrapper;if(typeof e=="undefined"){e=true}t.options.readonly=e;if(e){i.attr(c,true);n.attr(f,true)}else{i.removeAttr(c);n.removeAttr(f)}n.toggleClass(o.readonly,e)},_check:function(){var e=this,t=e.element[0].checked=!e.element[0].checked;e.wrapper.focus();if(!e.options.enabled||e.options.readonly||e.trigger(r,{checked:t})){e.element[0].checked=!t;return}e.check(t)},_keydown:function(e){if(e.keyCode===d.keys.SPACEBAR){this._check();e.preventDefault()}},_isTouch:function(e){return/touch/.test(e.type)||e.originalEvent&&/touch/.test(e.originalEvent.pointerType)},_click:function(e){if(!this._isTouch(e)&&e.which===1){this._check()}},_touchEnd:function(e){if(this._isTouch(e)){this._check();e.preventDefault()}}});e.plugin(y)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.pager",["kendo.data"],e)})(function(){var e={id:"pager",name:"Pager",category:"framework",depends:["data"],advanced:true};(function(w,r){var k=window.kendo,e=k.ui,l=e.Widget,d=w.proxy,u=".k-i-arrow-end-left",c=".k-i-arrow-end-right",f=".k-i-arrow-60-left",h=".k-i-arrow-60-right",n="k-pager-md k-pager-sm",p="change",v=".kendoPager",m="click",g="keydown",y="disabled",_="down",x=Number.MAX_VALUE,a=k.template('<a href="\\#" aria-label="#=text#" title="#=text#" class="k-link k-pager-nav #= wrapClassName #"><span class="k-icon #= className #"></span></a>');function C(e,t,i,n,r){return e({idx:t,text:i,ns:k.ns,numeric:n,title:r||""})}function S(e,t,i,n){return e({idx:t,text:i||t,selected:n||false})}function b(e,t,i){return a({className:e.substring(1),text:t,wrapClassName:i||""})}function o(e,t,i,n){e.find(t).parent().attr(k.attr("page"),i).attr("tabindex",-1).toggleClass("k-state-disabled",n)}function T(e,t){o(e,u,1,t<=1)}function D(e,t){o(e,f,Math.max(1,t-1),t<=1)}function A(e,t,i){o(e,h,Math.min(i,t+1),t>=i)}function E(e,t,i){o(e,c,i,t>=i)}var t=l.extend({init:function(e,t){var i=this,n,r;var a=null;l.fn.init.call(i,e,t);t=i.options;i._createDataSource(t);i.linkTemplate=k.template(i.options.linkTemplate);i.selectTemplate=k.template(i.options.selectTemplate);i.currentPageTemplate=k.template(i.options.currentPageTemplate);i.numericSelectItemTemplate=k.template(i.options.numericSelectItemTemplate);n=i.page();r=i.totalPages();i._refreshHandler=d(i.refresh,i);i.dataSource.bind(p,i._refreshHandler);i.downEvent=k.applyEventMap(_,k.guid());if(t.previousNext){if(!i.element.find(u).length){i.element.append(b(u,t.messages.first,"k-pager-first"));T(i.element,n,r)}if(!i.element.find(f).length){i.element.append(b(f,t.messages.previous));D(i.element,n,r)}}if(t.numeric){if(!i._numericWrap){i._numericWrap=i.element.find(".k-pager-numbers-wrap");if(i._numericWrap.length===0){i._numericWrap=w("<div class='k-pager-numbers-wrap' />").appendTo(i.element)}}if(!i._numericSelect){i._numericSelect=i._numericWrap.find(".k-dropdown");if(i._numericSelect.length===0){i._numericSelect=w("<select class='k-dropdown' />").appendTo(i._numericWrap)}}if(!i.list){i.list=i._numericWrap.find(".k-pager-numbers");if(i.list.length===0){i.list=w('<ul class="k-pager-numbers" />').appendTo(i._numericWrap)}}if(t.dataSource&&!t.dataSource.total()){i._numericSelect.empty().append("<option value='0' />");i.list.empty().append(i.selectTemplate({text:0}))}}if(t.input){if(!i.element.find(".k-pager-input").length){i.element.append('<span class="k-pager-input k-label">'+t.messages.page+'<input class="k-textbox">'+k.format(t.messages.of,r)+"</span>")}i.element.on(g+v,".k-pager-input input",d(i._keydown,i))}if(t.previousNext){if(!i.element.find(h).length){i.element.append(b(h,t.messages.next));A(i.element,n,r)}if(!i.element.find(c).length){i.element.append(b(c,t.messages.last,"k-pager-last"));E(i.element,n,r)}}if(t.pageSizes){if(!i.element.find(".k-pager-sizes").length){var o=t.pageSizes.length?t.pageSizes:["all",5,10,20,50,100];var s=w.map(o,function(e){if(e.toLowerCase&&e.toLowerCase()==="all"){return"<option value='all'>"+t.messages.allPages+"</option>"}return"<option>"+e+"</option>"});w('<span class="k-pager-sizes k-label"><select></select>'+t.messages.itemsPerPage+"</span>").appendTo(i.element).find("select").html(s.join("")).end().appendTo(i.element)}i.element.find(".k-pager-sizes select").val(i.pageSize());if(k.ui.DropDownList){i.element.find(".k-pager-sizes select").show().kendoDropDownList()}i.element.on(p+v,".k-pager-sizes select",d(i._change,i))}if(t.refresh){if(!i.element.find(".k-pager-refresh").length){i.element.append('<a href="#" class="k-pager-refresh k-link" title="'+t.messages.refresh+'" aria-label="'+t.messages.refresh+'"><span class="k-icon k-i-reload"></span></a>')}i.element.on(m+v,".k-pager-refresh",d(i._refreshClick,i))}if(t.info){if(!i.element.find(".k-pager-info").length){i.element.append('<span class="k-pager-info k-label" />')}}i.element.on(m+v,"a",d(i._click,i)).on(p+v,"select.k-dropdown",d(i._numericSelectChange,i)).addClass("k-pager-wrap k-widget k-widget-2021 k-floatwrap");if(t.autoBind){i.refresh()}i._resizeHandler=d(i.resize,i,true);w(window).on("resize"+v,i._resizeHandler);a=i._getWidthSizeClass(i.element.outerWidth());if(a){i.element.addClass(a)}k.notify(i)},destroy:function(){var e=this;l.fn.destroy.call(e);e.element.off(v);e.dataSource.unbind(p,e._refreshHandler);e._refreshHandler=null;w(window).off("resize"+v,this._resizeHandler);k.destroy(e.element);e.element=e.list=null},events:[p],options:{name:"Pager",selectTemplate:'<li><span class="k-link k-state-selected">#=text#</span></li>',currentPageTemplate:'<li class="k-current-page"><span class="k-link k-pager-nav">#=text#</span></li>',linkTemplate:'<li><a tabindex="-1" href="\\#" class="k-link" data-#=ns#page="#=idx#" #if (title !== "") {# title="#=title#" #}#>#=text#</a></li>',numericItemTemplate:'<li><a tabindex="-1" href="\\#" class="k-link" data-#=ns#page="#=idx#" #if (title !== "") {# title="#=title#" #}#>#=text#</a></li>',numericSelectItemTemplate:'<option value="#= idx #" #if (selected) {# selected="selected" #}#>#= text #</option>',buttonCount:10,autoBind:true,numeric:true,info:true,input:false,previousNext:true,pageSizes:false,refresh:false,responsive:true,messages:{allPages:"All",display:"{0} - {1} of {2} items",empty:"No items to display",page:"Page",of:"of {0}",itemsPerPage:"items per page",first:"Go to the first page",previous:"Go to the previous page",next:"Go to the next page",last:"Go to the last page",refresh:"Refresh",morePages:"More pages"}},setDataSource:function(e){var t=this;t.dataSource.unbind(p,t._refreshHandler);t.dataSource=t.options.dataSource=e;e.bind(p,t._refreshHandler);if(t.options.autoBind){e.fetch()}},_resize:function(e){if(e.width){var t=this._getWidthSizeClass(e.width);var i=this.element;if(!t){i.removeClass(n)}else if(!i.hasClass(t)){i.removeClass(n);i.addClass(t)}}},_createDataSource:function(e){this.dataSource=k.data.DataSource.create(e.dataSource)},refresh:function(e){var t=this,i,n,r=1,a,o=t.page(),s="",l="",d=t.options,u=t.pageSize(),c=t._collapsedTotal(),f=t.dataSource._isGroupPaged()?t.dataSource.groupsTotal(true):t.dataSource.total(),h=t.totalPages(),p=t.linkTemplate,v=t.numericSelectItemTemplate,m=d.buttonCount;if(e&&e.action=="itemchange"){return}if(d.numeric){if(o>m){a=o%m;r=a===0?o-m+1:o-a+1}n=Math.min(r+m-1,h);if(r>1){s+=C(p,r-1,"...",false,d.messages.morePages);l+=S(v,r-1,d.messages.morePages)}for(i=r;i<=n;i++){s+=C(i==o?t.selectTemplate:p,i,i,true);l+=S(v,i,i,i==o)}if(n<h){s+=C(p,i,"...",false,d.messages.morePages);l+=S(v,i,d.messages.morePages)}if(s===""){s=t.selectTemplate({text:0});l=w("<option value='0' />")}t.list.html(s);t._numericSelect.html(l)}if(d.info){if(f>0){s=k.format(d.messages.display,t.dataSource.options.endless?1:Math.min((o-1)*(t.dataSource.pageSize()||0)+1,c),Math.min(o*u,c),f)}else{s=d.messages.empty}t.element.find(".k-pager-info").html(s)}if(d.input){t.element.find(".k-pager-input").html(t.options.messages.page+'<input class="k-textbox" aria-label="'+o+'">'+k.format(d.messages.of,h)).find("input").val(o).attr(y,f<1).toggleClass("k-state-disabled",f<1)}if(d.previousNext){T(t.element,o,h);D(t.element,o,h);A(t.element,o,h);E(t.element,o,h)}if(d.pageSizes){var g=t.element.find(".k-pager-sizes option[value='all']").length>0;var _=g&&(u===this.dataSource.total()||u==x);var b=u;if(_){u="all";b=d.messages.allPages}t.element.find(".k-pager-sizes select").val(u).attr("aria-label",u).filter("["+k.attr("role")+"=dropdownlist]").kendoDropDownList("value",u).kendoDropDownList("text",b)}},_collapsedTotal:function(){return this.dataSource.total()},_keydown:function(e){if(e.keyCode===k.keys.ENTER){var t=this.element.find(".k-pager-input").find("input"),i=parseInt(t.val(),10);if(isNaN(i)||i<1||i>this.totalPages()){i=this.page()}t.val(i);this.page(i)}},_refreshClick:function(e){e.preventDefault();this.dataSource.read()},_change:function(e){var t=e.currentTarget.value;var i=parseInt(t,10);var n=this.dataSource;if(!isNaN(i)){n.pageSize(i)}else if((t+"").toLowerCase()=="all"){n._pageSize=r;n._take=r;n._skip=0;n.fetch()}},_numericSelectChange:function(e){var t=e.currentTarget;var i=t.value;var n=parseInt(i,10);t.blur();this.page(n)},_click:function(e){var t=w(e.currentTarget);e.preventDefault();if(!t.is(".k-state-disabled")){this.page(parseInt(t.attr(k.attr("page")),10))}},totalPages:function(){return Math.ceil((this.dataSource.total()||0)/(this.pageSize()||1))},pageSize:function(){return this.dataSource.pageSize()||this.dataSource.total()},page:function(e){if(e){if(this.trigger("pageChange",{index:e})){return}this.dataSource.page(e);this.trigger(p,{index:e})}else{if(this.dataSource.total()>0){return this.dataSource.page()}else{return 0}}},_getWidthSizeClass:function(e){var t=this,i=n.split(" ");if(!t.options.responsive){return null}else if(e<=480){return i[1]}else if(e<=600){return i[0]}return null}});e.plugin(t)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.notification",["kendo.core","kendo.popup"],e)})(function(){var e={id:"notification",name:"Notification",category:"web",description:"The Notification widget displays user alerts.",depends:["core","popup"],features:[{id:"notification-fx",name:"Animation",description:"Support for animation",depends:["fx"]}]};(function(l,d){var u=window.kendo,n=u.ui.Widget,o=l.proxy,c=l.extend,f=window.setTimeout,s="click",h="show",t="hide",p="k-notification",v=".k-notification-wrap .k-i-close",m="k-hiding",g="info",i="success",r="warning",a="error",_="top",b="left",w="bottom",k="right",y="up",x=".kendoNotification",C='<div class="k-widget k-widget-2021 k-popup k-notification"></div>',S='<div class="k-notification-wrap">'+'<span class="k-icon k-i-#=typeIcon#" title="#=typeIcon#"></span>'+'<div class="k-notification-content">#=content#</div>'+'<span class="#: closeButton ? "" : "k-hidden"# k-icon k-i-close" title="Hide"></span>'+"</div>",T=S.replace("#=content#","#:content#");var e=n.extend({init:function(e,t){var i=this;n.fn.init.call(i,e,t);t=i.options;if(!t.appendTo||!l(t.appendTo).is(e)){i.element.hide()}i._compileTemplates(t.templates);i._guid="_"+u.guid();i._isRtl=u.support.isRtl(e);i._compileStacking(t.stacking,t.position.top,t.position.left);u.notify(i)},events:[h,t],options:{name:"Notification",position:{pinned:true,top:null,left:null,bottom:20,right:20},stacking:"default",hideOnClick:true,button:false,allowHideAfter:0,autoHideAfter:5e3,appendTo:null,width:null,height:null,templates:[],animation:{open:{effects:"fade:in",duration:300},close:{effects:"fade:out",duration:600,hide:true}}},_compileTemplates:function(e){var i=this;var n=u.template;i._compiled={};l.each(e,function(e,t){i._compiled[t.type]=n(t.template||l("#"+t.templateId).html())});i._defaultCompiled=n(S);i._safeCompiled=n(T)},_getCompiled:function(e,t){var i=t?this._safeCompiled:this._defaultCompiled;return e?this._compiled[e]||i:i},_compileStacking:function(e,t,i){var n=this,r={paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0},a=i!==null?b:k,o,s;switch(e){case"down":o=w+" "+a;s=_+" "+a;delete r.paddingBottom;break;case k:o=_+" "+k;s=_+" "+b;delete r.paddingRight;break;case b:o=_+" "+b;s=_+" "+k;delete r.paddingLeft;break;case y:o=_+" "+a;s=w+" "+a;delete r.paddingTop;break;default:if(t!==null){o=w+" "+a;s=_+" "+a;delete r.paddingBottom}else{o=_+" "+a;s=w+" "+a;delete r.paddingTop}break}n._popupOrigin=o;n._popupPosition=s;n._popupPaddings=r},_attachPopupEvents:function(e,t){var i=this,n=e.allowHideAfter,r=!isNaN(n)&&n>0,a;function o(e){e.on(s+x,function(){i._hidePopup(t)})}if(e.hideOnClick){t.bind("activate",function(){if(r){f(function(){o(t.element)},n)}else{o(t.element)}})}else if(e.button){a=t.element.find(v);if(r){f(function(){o(a)},n)}else{o(a)}}},_showPopup:function(e,t){var i=this,n=t.autoHideAfter,r=t.position.left,a=t.position.top,o,s;s=l("."+i._guid+":not(."+m+")").last();o=new u.ui.Popup(e,{anchor:s[0]?s:document.body,origin:i._popupOrigin,position:i._popupPosition,animation:t.animation,copyAnchorStyles:false,modal:true,collision:"",isRtl:i._isRtl,close:function(){i._triggerHide(this.element)},deactivate:function(e){e.sender.element.off(x);e.sender.element.find(v).off(x);e.sender.destroy()}});i._attachPopupEvents(t,o);e.removeClass("k-group k-reset");if(s[0]){o.open()}else{if(r===null){r=l(window).width()-e.outerWidth()-t.position.right}if(a===null){a=l(window).height()-e.outerHeight()-t.position.bottom}o.open(r,a)}o.wrapper.addClass(i._guid).css(c({margin:0,zIndex:10050},i._popupPaddings));if(t.position.pinned){o.wrapper.css("position","fixed");if(s[0]){i._togglePin(o.wrapper,true)}}else if(!s[0]){i._togglePin(o.wrapper,false)}if(n>0){f(function(){i._hidePopup(o)},n)}},_hidePopup:function(e){e.wrapper.addClass(m);e.close()},_togglePin:function(e,t){var i=l(window),n=t?-1:1;e.css({top:parseInt(e.css(_),10)+n*i.scrollTop(),left:parseInt(e.css(b),10)+n*i.scrollLeft()})},_attachStaticEvents:function(e,t){var i=this,n=e.allowHideAfter,r=!isNaN(n)&&n>0;function a(e){e.on(s+x,o(i._hideStatic,i,t))}if(e.hideOnClick){if(r){f(function(){a(t)},n)}else{a(t)}}else if(e.button){if(r){f(function(){a(t.find(v))},n)}else{a(t.find(v))}}},_showStatic:function(e,i){var n=this,r=i.autoHideAfter,t=i.animation,a=i.stacking==y||i.stacking==b?"prependTo":"appendTo",o;e.removeClass("k-popup").addClass(n._guid)[a](i.appendTo).hide().kendoAnimate(t.open||false);o=n.getNotifications();o.each(function(e,t){n._attachStaticEvents(i,l(t));if(r>0){f(function(){n._hideStatic(l(t))},r)}})},_hideStatic:function(e){e.kendoAnimate(c(this.options.animation.close||false,{complete:function(){e.off(x).find(v).off(x);e.remove()}}));this._triggerHide(e)},_triggerHide:function(e){this.trigger(t,{element:e});this.angular("cleanup",function(){return{elements:e}})},show:function(e,t,i){var n=this,r=n.options,a=l(C),o,s;if(!t){t=g}if(e!==null&&e!==d&&e!==""){if(u.isFunction(e)){e=e()}s={typeIcon:t,content:"",closeButton:r.button};if(l.isPlainObject(e)){o=c(s,e)}else{o=c(s,{content:e})}a.addClass(p+"-"+t).toggleClass(p+"-button",r.button).toggleClass(p+"-closable",r.button).attr("data-role","alert").css({width:r.width,height:r.height}).append(n._getCompiled(t,i)(o));n.angular("compile",function(){return{elements:a,data:[{dataItem:o}]}});if(l(r.appendTo)[0]){n._showStatic(a,r)}else{n._showPopup(a,r)}n.trigger(h,{element:a})}return n},showText:function(e,t){this.show(e,t,true)},info:function(e){return this.show(e,g)},success:function(e){return this.show(e,i)},warning:function(e){return this.show(e,r)},error:function(e){return this.show(e,a)},hide:function(){var n=this,e=n.getNotifications();if(n.options.appendTo){e.each(function(e,t){n._hideStatic(l(t))})}else{e.each(function(e,t){var i=l(t).data("kendoPopup");if(i){n._hidePopup(i)}})}return n},getNotifications:function(){var e=this,t=l("."+e._guid+":not(."+m+")");if(e.options.appendTo){return t}else{return t.children("."+p)}},setOptions:function(e){var t=this,i;n.fn.setOptions.call(t,e);i=t.options;if(e.templates!==d){t._compileTemplates(i.templates)}if(e.stacking!==d||e.position!==d){t._compileStacking(i.stacking,i.position.top,i.position.left)}},destroy:function(){n.fn.destroy.call(this);this.getNotifications().off(x).find(v).off(x)}});u.ui.plugin(e)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.tooltip",["kendo.core","kendo.popup","kendo.fx"],e)})(function(){var e={id:"tooltip",name:"Tooltip",category:"web",description:"The Tooltip widget displays a popup hint for a given html element.",depends:["core","popup"],features:[{id:"tooltip-fx",name:"Animation",description:"Support for animation",depends:["fx"]}]};(function(u,r){var l=window.kendo,a=l.ui.Widget,t=l.ui.Popup,o=l.isFunction,s=u.isPlainObject,d=u.extend,c=u.proxy,f=u(document),h=l.isLocalUrl,p="_tt_active",v="aria-describedby",m="show",g="hide",n="error",_="contentLoad",b="requestStart",w="k-content-frame",k='<div role="tooltip" class="k-widget k-widget-2021 k-tooltip#if (!autoHide) {# k-tooltip-closable#}#">'+'<div class="k-tooltip-content"></div>'+'#if (!autoHide) {# <div class="k-tooltip-button"><a href="\\#" class="k-icon k-i-close" title="Close"></a></div> #}#'+'#if (callout){ #<div class="k-callout k-callout-#=dir#"></div>#}#'+"</div>",y=l.template("<iframe frameborder='0' class='"+w+"' src='#= content.url #'>"+"This page requires frames in order to show content"+"</iframe>"),x=".kendoTooltip",C={bottom:{origin:"bottom center",position:"top center"},top:{origin:"top center",position:"bottom center"},left:{origin:"center left",position:"center right",collision:"fit flip"},right:{origin:"center right",position:"center left",collision:"fit flip"},center:{position:"center center",origin:"center center"}},S={top:"bottom",bottom:"top",left:"right",right:"left",center:"center"},T={bottom:"n",top:"s",left:"e",right:"w",center:"n"},D={horizontal:{offset:"top",size:"outerHeight"},vertical:{offset:"left",size:"outerWidth"}},e=function(e){return e.target.data(l.ns+"title")};function A(e){while(e.length){if(i(e)){break}e=e.parent()}}function i(e){var t=e.data(l.ns+"title");if(t){e.attr("title",t);e.removeData(l.ns+"title");return true}}function E(e){var t=e.attr("title");if(t){e.data(l.ns+"title",t);e.attr("title","");return true}}function I(e){while(e.length&&!e.is("body")){if(E(e)){break}e=e.parent()}}var M=a.extend({init:function(e,t){var i=this,n;a.fn.init.call(i,e,t);n=i.options.position.match(/left|right/)?"horizontal":"vertical";i.dimensions=D[n];i._documentKeyDownHandler=c(i._documentKeyDown,i);if(l.support.touch&&this._isShownOnMouseEnter()){i.element.on(l.support.mousedown+x,i.options.filter,c(i._showOn,i))}i.element.on(i.options.showOn+x,i.options.filter,c(i._showOn,i));if(this._isShownOnMouseEnter()||this._isShownOnClick()){i.element.on("mouseenter"+x,i.options.filter,c(i._mouseenter,i))}if(this.options.autoHide&&this._isShownOnMouseEnter()){i.element.on("mouseleave"+x,i.options.filter,c(i._mouseleave,i))}if(this.options.autoHide&&this._isShownOnFocus()){i.element.on("blur"+x,i.options.filter,c(i._blur,i))}if(l.support.touch){i.element.on(l.support.mousedown+x,i.options.filter,c(i._mouseenter,i))}},options:{name:"Tooltip",filter:"",content:e,showAfter:100,hideAfter:100,callout:true,offset:0,position:"bottom",showOn:"mouseenter",autoHide:true,width:null,height:null,animation:{open:{effects:"fade:in",duration:0},close:{duration:40,hide:true}}},events:[m,g,_,n,b],_isShownOnFocus:function(){return this.options.showOn&&this.options.showOn.match(/focus/)},_isShownOnMouseEnter:function(){return this.options.showOn&&this.options.showOn.match(/mouseenter/)},_isShownOnClick:function(){return this.options.showOn&&this.options.showOn.match(/click/)},_mouseenter:function(e){I(u(e.currentTarget))},_showOn:function(e){var t=this;var i=u(e.currentTarget);if(t._isShownOnClick()&&!t._isShownOnMouseEnter()){t._show(i)}else if(t._isShownOnFocus()){I(i);t._show(i)}else{clearTimeout(t.timeout);t.timeout=setTimeout(function(){t._show(i)},t.options.showAfter)}},_appendContent:function(e){var t=this,i=t.options.content,n=t.content,r=t.options.iframe,a;if(s(i)&&i.url){if(!("iframe"in t.options)){r=!h(i.url)}t.trigger(b,{options:i,target:e});if(!r){n.empty();l.ui.progress(n,true);t._ajaxRequest(i)}else{n.hide();a=n.find("."+w)[0];if(a){a.src=i.url||a.src}else{n.html(y({content:i}))}n.find("."+w).off("load"+x).on("load"+x,function(){t.trigger(_);n.show()})}}else if(i&&o(i)){i=i({sender:this,target:e});n.html(i||"")}else{n.html(i)}t.angular("compile",function(){return{elements:n}})},_ajaxRequest:function(e){var i=this;i.contentLoading=true;jQuery.ajax(d({type:"GET",dataType:"html",cache:false,error:function(e,t){l.ui.progress(i.content,false);i.trigger(n,{status:t,xhr:e})},success:c(function(e){l.ui.progress(i.content,false);i.content.html(e);i.contentLoading=false;i.trigger(_);i._openPopup()},i)},e))},_documentKeyDown:function(e){if(e.keyCode===l.keys.ESC){this.hide()}},refresh:function(){var e=this,t=e.popup;if(t&&t.options.anchor){e._appendContent(t.options.anchor)}},hide:function(){if(this.popup){this.popup.close()}},show:function(e){e=e||this.element;I(e);this._show(e)},_show:function(e){var t=this,i=t.target();if(!t.popup){t._initPopup()}if(i&&i[0]!=e[0]){t.popup.close();t.popup.element.kendoStop(true,true)}if(!i||i[0]!=e[0]){t._appendContent(e);t.popup.options.anchor=e}t.popup.one("deactivate",function(){A(e);e.removeAttr(v);this.element.removeAttr("id").attr("aria-hidden",true);f.off("keydown"+x,t._documentKeyDownHandler)});if(!t.contentLoading){t._openPopup()}},_openPopup:function(){if(!this.popup){return}this.popup._hovered=true;this.popup.open()},_initPopup:function(){var i=this,n=i.options,e=u(l.template(k)({callout:n.callout&&n.position!=="center",dir:T[n.position],autoHide:n.autoHide}));i.popup=new t(e,d({autosize:true,activate:function(){var e=this.options.anchor,t=e[0].id||i.element[0].id;if(t){e.attr(v,t+p);this.element.attr("id",t+p)}if(n.callout){i._positionCallout()}else{i._offset(i.options.position,i.options.offset)}this.element.removeAttr("aria-hidden");f.on("keydown"+x,i._documentKeyDownHandler);i.trigger(m);i.popup._hovered=r},close:function(){i.trigger(g)},copyAnchorStyles:false,animation:n.animation},C[n.position]));e.css({width:n.width,height:n.height});i.content=e.find(".k-tooltip-content");i.arrow=e.find(".k-callout");if(n.autoHide&&this._isShownOnMouseEnter()){e.on("mouseleave"+x,c(i._mouseleave,i))}else{e.on("click"+x,".k-tooltip-button",c(i._closeButtonClick,i))}},_closeButtonClick:function(e){e.preventDefault();this.hide()},_mouseleave:function(e){var t=this;clearTimeout(t.timeout);t.timeout=setTimeout(function(){t._closePopup(e.currentTarget)},t.options.hideAfter)},_blur:function(e){this._closePopup(e.currentTarget)},_closePopup:function(e){if(this.popup&&!this.popup._hovered){this.popup.close()}else{A(u(e))}},target:function(){if(this.popup){return this.popup.options.anchor}return null},_positionCallout:function(){var e=this,t=e.options.position,i=e.dimensions,n=i.offset,r=e.popup,a=r.options.anchor,o=u(a).offset(),s=u(r.element).offset(),l=T[r.flipped?S[t]:t],d=o[n]-s[n]+u(a)[i.size]()/2;e._offset(t,e.options.offset);e.arrow.removeClass("k-callout-n k-callout-s k-callout-w k-callout-e").addClass("k-callout-"+l).css(n,d)},destroy:function(){var e=this.popup;if(e){e.element.off(x);e.destroy()}clearTimeout(this.timeout);this.element.off(x);f.off("keydown"+x,this._documentKeyDownHandler);a.fn.destroy.call(this)},_offset:function(e,t){var i=this,n=e=="top"||e=="left",r=i.popup.flipped,a=n&&r||!n&&!r?1:-1,o=n?"margin-"+e:"margin-"+S[e],s=l._outerWidth(i.arrow)/2+t;i.popup.wrapper.css(o,s*a+"px")}});l.ui.plugin(M)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.list",["kendo.data","kendo.popup"],e)})(function(){var e={id:"list",name:"List",category:"framework",depends:["data","popup"],hidden:true};(function(v,h){var p=window.kendo,n=p.ui,l=p._outerHeight,m=/^\d+(\.\d+)?%$/i,a=n.Widget,g=p.keys,r=p.support,L=p.htmlEncode,_=p._activeElement,o=p._outerWidth,H=p.data.ObservableArray,s="id",b="change",d="k-state-focused",u="k-state-hover",i="k-i-loading",c=".k-group-header",f=".k-item",N="_label",w="open",k="close",y="cascade",x="select",C="selected",S="requestStart",T="requestEnd",O="blur",V="focus",W="focusout",D=v.extend,A=v.proxy,U=v.isArray,E=r.browser,t="k-hidden",I="width",j=E.msie,G=/"/g,q={ComboBox:["DropDownList","MultiColumnComboBox"],DropDownList:["ComboBox","MultiColumnComboBox"],MultiColumnComboBox:["ComboBox","DropDownList"]};var M=p.ui.DataBoundWidget.extend({init:function(e,t){var i=this,n=i.ns,r;a.fn.init.call(i,e,t);e=i.element;t=i.options;i._isSelect=e.is(x);if(i._isSelect&&i.element[0].length){if(!t.dataSource){t.dataTextField=t.dataTextField||"text";t.dataValueField=t.dataValueField||"value"}}i.ul=v('<ul unselectable="on" class="k-list k-reset"/>').attr({tabIndex:-1,"aria-hidden":true});i.list=v("<div class='k-list-container'/>").append(i.ul).on("mousedown"+n,A(i._listMousedown,i));r=e.attr(s);if(!r){r=p.guid()}i.list.attr(s,r+"-list");i.ul.attr(s,r+"_listbox");if(t.columns&&t.columns.length){i.ul.removeClass("k-list").addClass("k-grid-list");i._columnsHeader()}i._header();i._noData();i._footer();i._accessors();i._initValue()},options:{valuePrimitive:false,footerTemplate:"",headerTemplate:"",noDataTemplate:true,messages:{noData:"No data found.",clear:"clear"}},setOptions:function(e){a.fn.setOptions.call(this,e);if(e&&e.enable!==h){e.enabled=e.enable}if(e.columns&&e.columns.length){this._columnsHeader()}this._header();this._noData();this._footer();this._renderFooter();this._renderNoData()},focus:function(){this._focused.focus()},readonly:function(e){this._editable({readonly:e===h?true:e,disable:false})},enable:function(e){this._editable({readonly:false,disable:!(e=e===h?true:e)})},_header:function(){var e=this;var t=v(e.header);var i=e.options.headerTemplate;this._angularElement(t,"cleanup");p.destroy(t);t.remove();if(!i){e.header=null;return}var n=typeof i!=="function"?p.template(i):i;t=v(n({}));e.header=t[0]?t:null;e.list.prepend(t);this._angularElement(e.header,"compile")},_columnsHeader:function(){var e=this;var t=v(e.columnsHeader);this._angularElement(t,"cleanup");p.destroy(t);t.remove();var i="<div class='k-grid-header'><div class='k-grid-header-wrap'><table role='presentation'>";var n="<colgroup>";var r="<tr>";for(var a=0;a<this.options.columns.length;a++){var o=this.options.columns[a];var s=o.title||o.field||"";var l=o.headerTemplate||s;var d=typeof l!=="function"?p.template(l):l;var u=o.width;var c=parseInt(u,10);var f="";if(u&&!isNaN(c)){f+="style='width:";f+=c;f+=m.test(u)?"%":"px";f+=";'"}n+="<col "+f+"/>";r+="<th class='k-header'>";r+=d(o);r+="</th>"}n+="</colgroup>";r+="</tr>";i+=n;i+=r;i+="</table></div></div>";e.columnsHeader=t=v(i);e.list.prepend(t);this._angularElement(e.columnsHeader,"compile")},_noData:function(){var e=this;var t=v(e.noData);var i=e.options.noDataTemplate===true?e.options.messages.noData:e.options.noDataTemplate;e.angular("cleanup",function(){return{elements:t}});p.destroy(t);t.remove();if(!i){e.noData=null;return}e.noData=v('<div class="k-nodata" style="display:none"><div></div></div>').appendTo(e.list);e.noDataTemplate=typeof i!=="function"?p.template(i):i},_footer:function(){var e=this;var t=v(e.footer);var i=e.options.footerTemplate;this._angularElement(t,"cleanup");p.destroy(t);t.remove();if(!i){e.footer=null;return}e.footer=v('<div class="k-footer"></div>').appendTo(e.list);e.footerTemplate=typeof i!=="function"?p.template(i):i},_listOptions:function(e){var t=this;var i=t.options;var n=i.virtual;var r={change:A(t._listChange,t)};var a=A(t._listBound,t);n=typeof n==="object"?n:{};e=v.extend({autoBind:false,selectable:true,dataSource:t.dataSource,click:A(t._click,t),activate:A(t._activateItem,t),columns:i.columns,deactivate:A(t._deactivateItem,t),dataBinding:function(){t.trigger("dataBinding")},dataBound:a,height:i.height,dataValueField:i.dataValueField,dataTextField:i.dataTextField,groupTemplate:i.groupTemplate,fixedGroupTemplate:i.fixedGroupTemplate,template:i.template},e,n,r);if(!e.template){e.template="#:"+p.expr(e.dataTextField,"data")+"#"}if(i.$angular){e.$angular=i.$angular}return e},_initList:function(){var e=this;var t=e._listOptions({selectedItemChange:A(e._listChange,e)});if(!e.options.virtual){e.listView=new p.ui.StaticList(e.ul,t)}else{e.listView=new p.ui.VirtualList(e.ul,t)}e.listView.bind("listBound",A(e._listBound,e));e._setListValue()},_setListValue:function(e){e=e||this.options.value;if(e!==h){this.listView.value(e).done(A(this._updateSelectionState,this))}},_updateSelectionState:v.noop,_listMousedown:function(e){if(!this.filterInput||this.filterInput[0]!==e.target){e.preventDefault()}},_isFilterEnabled:function(){var e=this.options.filter;return e&&e!=="none"},_hideClear:function(){var e=this;if(e._clear){e._clear.addClass(t)}},_showClear:function(){if(this._clear){this._clear.removeClass(t)}},_clearValue:function(){this._clearText();this._accessor("");this.listView.value([]);if(this._isSelect){this._customOption=h}if(this._isFilterEnabled()&&!this.options.enforceMinLength){this._filter({word:"",open:false});if(this.options.highlightFirst){this.listView.focus(0)}}this._change()},_clearText:function(){this.text("")},_clearFilter:function(){if(!this.options.virtual){this.listView.bound(false)}this._filterSource()},_filterSource:function(e,t){var i=this;var n=i.options;var r=n.filterFields&&e&&e.logic&&e.filters&&e.filters.length;var a=i.dataSource;var o=D({},a.filter()||{});var s=e||o.filters&&o.filters.length&&!e;var l=B(o,n.dataTextField);this._clearFilterExpressions(o);if((e||l)&&i.trigger("filtering",{filter:e})){return v.Deferred().reject().promise()}var d={filters:[],logic:"and"};if(r){d.filters.push(e)}else{this._pushFilterExpression(d,e)}if(K(o)){if(d.logic===o.logic){d.filters=d.filters.concat(o.filters)}else{d.filters.push(o)}}if(i._cascading){this.listView.setDSFilter(d)}var u=D({},{page:s?1:a.page(),pageSize:s?a.options.pageSize:a.pageSize(),sort:a.sort(),filter:a.filter(),group:a.group(),aggregate:a.aggregate()},{filter:d});return a[t?"read":"query"](a._mergeState(u))},_pushFilterExpression:function(e,t){if(K(t)&&t.value!==""){e.filters.push(t)}},_clearFilterExpressions:function(e){if(!e.filters){return}var t;for(var i=0;i<e.filters.length;i++){if("fromFilter"in e.filters[i]){t=i}}if(!isNaN(t)){e.filters.splice(t,1)}},_angularElement:function(e,t){if(!e){return}this.angular(t,function(){return{elements:e}})},_renderNoData:function(){var e=this;var t=e.noData;if(!t){return}this._angularElement(t,"cleanup");t.children(":first").html(e.noDataTemplate({instance:e}));this._angularElement(t,"compile")},_toggleNoData:function(e){v(this.noData).toggle(e)},_toggleHeader:function(e){var t=this.listView.content.prev(c);t.toggle(e)},_renderFooter:function(){var e=this;var t=e.footer;if(!t){return}this._angularElement(t,"cleanup");t.html(e.footerTemplate({instance:e}));this._angularElement(t,"compile")},_allowOpening:function(){return this.options.noDataTemplate||this.dataSource.flatView().length},_initValue:function(){var e=this,t=e.options.value;if(t!==null){e.element.val(t)}else{t=e._accessor();e.options.value=t}e._old=t},_ignoreCase:function(){var e=this,t=e.dataSource.reader.model,i;if(t&&t.fields){i=t.fields[e.options.dataTextField];if(i&&i.type&&i.type!=="string"){e.options.ignoreCase=false}}},_focus:function(e){return this.listView.focus(e)},_filter:function(e){var t=this;var i=t.options;var n=e.word;var r=i.filterFields;var a=i.dataTextField;var o;if(r&&r.length){o={logic:"or",filters:[],fromFilter:true};for(var s=0;s<r.length;s++){this._pushFilterExpression(o,t._buildExpression(n,r[s]))}}else{o=t._buildExpression(n,a)}t._open=e.open;t._filterSource(o)},_buildExpression:function(e,t){var i=this;var n=i.options;var r=n.ignoreCase;var a=i.dataSource.options.accentFoldingFiltering;return{value:r?a?e.toLocaleLowerCase(a):e.toLowerCase():e,field:t,operator:n.filter,ignoreCase:r}},_clearButton:function(){var e=this;var t=e.options.messages.clear;if(!e._clear){e._clear=v('<span unselectable="on" class="k-clear-value" title="'+t+'"><span class="k-icon k-i-x"></span></span>').attr({role:"button",tabIndex:-1})}if(!e.options.clearButton){e._clear.remove()}this._hideClear()},search:function(e){var t=this.options;e=typeof e==="string"?e:this._inputValue();clearTimeout(this._typingTimeout);if(!t.enforceMinLength&&!e.length||e.length>=t.minLength){this._state="filter";if(this.listView){this.listView._emptySearch=!p.trim(e).length}if(!this._isFilterEnabled()){this._searchByWord(e)}else{this._filter({word:e,open:true})}}},current:function(e){return this._focus(e)},items:function(){return this.ul[0].children},destroy:function(){var e=this;var t=e.ns;a.fn.destroy.call(e);e._unbindDataSource();e.listView.destroy();e.list.off(t);e.popup.destroy();if(e._form){e._form.off("reset",e._resetHandler)}},dataItem:function(e){var t=this;if(e===h){return t.listView.selectedDataItems()[0]}if(typeof e!=="number"){if(t.options.virtual){return t.dataSource.getByUid(v(e).data("uid"))}e=v(t.items()).index(e)}return t.dataSource.flatView()[e]},_activateItem:function(){var e=this.listView.focus();if(e){this._focused.add(this.filterInput).attr("aria-activedescendant",e.attr("id"))}},_deactivateItem:function(){this._focused.add(this.filterInput).removeAttr("aria-activedescendant")},_accessors:function(){var e=this;var t=e.element;var i=e.options;var n=p.getter;var r=t.attr(p.attr("text-field"));var a=t.attr(p.attr("value-field"));if(!i.dataTextField&&r){i.dataTextField=r}if(!i.dataValueField&&a){i.dataValueField=a}e._text=n(i.dataTextField);e._value=n(i.dataValueField)},_aria:function(e){var t=this,i=t.options,n=t._focused.add(t.filterInput);if(i.suggest!==h){n.attr("aria-autocomplete",i.suggest?"both":"list")}e=e?e+" "+t.ul[0].id:t.ul[0].id;n.attr("aria-owns",e);t.ul.attr("aria-live",!t._isFilterEnabled()?"off":"polite");t._ariaLabel()},_ariaLabel:function(){var e=this;var t=e._focused;var i=e.element;var n=i.attr("id");var r=v('label[for="'+n+'"]');var a=i.attr("aria-label");var o=i.attr("aria-labelledby");if(t===i){return}if(a){t.attr("aria-label",a)}else if(o){t.attr("aria-labelledby",o)}else if(r.length){var s=r.attr("id")||e._generateLabelId(r,n||p.guid());t.attr("aria-labelledby",s)}},_generateLabelId:function(e,t){var i=t+N;e.attr("id",i);return i},_blur:function(){var e=this;e._change();e.close();e._userTriggered=false},_isValueChanged:function(e){return e!==R(this._old,typeof e)},_change:function(){var e=this;var t=e.selectedIndex;var i=e.options.value;var n=e.value();var r=e.text();if(r==""){e.value("")}var a;if(e._isSelect&&!e.listView.bound()&&i){n=i}if(e._isValueChanged(n)){a=true}else if(e._valueBeforeCascade!==h&&e._valueBeforeCascade!==R(e._old,typeof e._valueBeforeCascade)&&e._userTriggered){a=true}else if(t!==h&&t!==e._oldIndex&&!e.listView.isFiltered()){a=true}if(a){if(e._old===null||e._old===""||n===""){e._valueBeforeCascade=e._old=n}else{if(e.dataItem()){e._valueBeforeCascade=e._old=e.options.dataValueField?e.dataItem()[e.options.dataValueField]:e.dataItem()}else{e._valueBeforeCascade=e._old=null}}e._oldIndex=t;if(!e._typing){e.element.trigger(b)}e.trigger(b)}e.typing=false},_data:function(){return this.dataSource.view()},_enable:function(){var e=this,t=e.options,i=e.element.is("[disabled]");if(t.enable!==h){t.enabled=t.enable}if(!t.enabled||i){e.enable(false)}else{e.readonly(e.element.is("[readonly]"))}},_dataValue:function(e){var t=this._value(e);if(t===h){t=this._text(e)}return t},_offsetHeight:function(){var t=0;var e=this.listView.content.prevAll(":visible");e.each(function(){var e=v(this);t+=l(e,true)});return t},_height:function(e){var t=this;var i=t.list;var n=t.options.height;var r=t.popup.visible();var a;var o;var s;if(e||t.options.noDataTemplate){o=i.add(i.parent(".k-animation-container")).show();if(!i.is(":visible")){o.hide();return}n=t.listView.content[0].scrollHeight>n?n:"auto";o.height(n);if(n!=="auto"){a=t._offsetHeight();s=l(v(t.footer))||0;n=n-a-s}t.listView.content.height(n);if(!r){o.hide()}}return n},_openHandler:function(e){this._adjustListWidth();if(this.trigger(w)){e.preventDefault()}else{this._focused.attr("aria-expanded",true);this.ul.attr("aria-hidden",false)}},_adjustListWidth:function(){var e=this,t=e.list,i=t[0].style.width,n=e.wrapper,r,a;if(!t.data(I)&&i){return}r=window.getComputedStyle?window.getComputedStyle(n[0],null):0;a=parseFloat(r&&r.width)||o(n);if(r&&E.msie){a+=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)+parseFloat(r.borderLeftWidth)+parseFloat(r.borderRightWidth)}if(t.css("box-sizing")!=="border-box"){i=a-(o(t)-t.width())}else{i=a}t.css({fontFamily:n.css("font-family"),width:e.options.autoWidth?"auto":i,minWidth:i,whiteSpace:e.options.autoWidth?"nowrap":"normal"}).data(I,i);return true},_closeHandler:function(e){if(this.trigger(k)){e.preventDefault()}else{this._focused.attr("aria-expanded",false);this.ul.attr("aria-hidden",true)}},_focusItem:function(){var e=this.listView;var t=!e.focus();var i=P(e.select());if(i===h&&this.options.highlightFirst&&t){i=0}if(i!==h){e.focus(i)}else if(t){e.scrollToIndex(0)}},_calculateGroupPadding:function(e){var t=this.ul.children(".k-first:first");var i=this.listView.content.prev(c);var n=0;var r="right";if(i[0]&&i[0].style.display!=="none"){if(e!=="auto"){n=p.support.scrollbar()}if(this.element.parents(".k-rtl").length){r="left"}n+=parseFloat(t.css("border-"+r+"-width"),10)+parseFloat(t.children(".k-group").css("padding-"+r),10);i.css("padding-"+r,n)}},_calculatePopupHeight:function(e){var t=this._height(this.dataSource.flatView().length||e);this._calculateGroupPadding(t);this._calculateColumnsHeaderPadding(t)},_calculateColumnsHeaderPadding:function(e){if(this.options.columns&&this.options.columns.length){var t=this;var i=r.isRtl(t.wrapper);var n=p.support.scrollbar();t.columnsHeader.css(i?"padding-left":"padding-right",e!=="auto"?n:0)}},_refreshScroll:function(){var e=this.listView;var t=e.element.height()>e.content.height();if(this.options.autoWidth){e.content.css({overflowX:"hidden",overflowY:t?"scroll":"auto"})}},_resizePopup:function(e){if(this.options.virtual){return}if(!this.popup.element.is(":visible")){this.popup.one("open",function(e){return A(function(){this._calculatePopupHeight(e)},this)}.call(this,e));this.popup.one("activate",A(this._refreshScroll,this))}else{this._calculatePopupHeight(e)}},_popup:function(){var e=this;e.popup=new n.Popup(e.list,D({},e.options.popup,{anchor:e.wrapper,open:A(e._openHandler,e),close:A(e._closeHandler,e),animation:e.options.animation,isRtl:r.isRtl(e.wrapper),autosize:e.options.autoWidth}))},_toggleHover:function(e){v(e.currentTarget).toggleClass(u,e.type==="mouseenter")},_toggle:function(e,t){var i=this;var n=r.mobileOS&&(r.touch||r.MSPointers||r.pointers);e=e!==h?e:!i.popup.visible();if(!t&&!n&&i._focused[0]!==_()){i._prevent=true;i._focused.focus();i._prevent=false}i[e?w:k]()},_triggerCascade:function(){var e=this;if(!e._cascadeTriggered||e.value()!==R(e._cascadedValue,typeof e.value())){e._cascadedValue=e.value();e._cascadeTriggered=true;e.trigger(y,{userTriggered:e._userTriggered})}},_triggerChange:function(){if(this._valueBeforeCascade!==this.value()){this.trigger(b)}},_unbindDataSource:function(){var e=this;e.dataSource.unbind(S,e._requestStartHandler).unbind(T,e._requestEndHandler).unbind("error",e._errorHandler)},requireValueMapper:function(e,t){var i=(e.value instanceof Array?e.value.length:e.value)||(t instanceof Array?t.length:t);if(i&&e.virtual&&typeof e.virtual.valueMapper!=="function"){throw new Error("ValueMapper is not provided while the value is being set. See http://docs.telerik.com/kendo-ui/controls/editors/combobox/virtualization#the-valuemapper-function")}}});function R(e,t){if(e!==h&&e!==""&&e!==null){if(t==="boolean"){if(typeof e!=="boolean"){e=e.toString().toLowerCase()==="true"}e=Boolean(e)}else if(t==="number"){e=Number(e)}else if(t==="string"){e=e.toString()}}return e}D(M,{inArray:function(e,t){var i,n,r=t.children;if(!e||e.parentNode!==t){return-1}for(i=0,n=r.length;i<n;i++){if(e===r[i]){return i}}return-1},unifyType:R});p.ui.List=M;n.Select=M.extend({init:function(e,t){M.fn.init.call(this,e,t);this._initial=this.element.val()},setDataSource:function(e){var t=this;var i;t.options.dataSource=e;t._dataSource();if(t.listView.bound()){t._initialIndex=null;t.listView._current=null}t.listView.setDataSource(t.dataSource);if(t.options.autoBind){t.dataSource.fetch()}i=t._parentWidget();if(i){t._cascadeSelect(i)}},close:function(){this.popup.close()},select:function(e){var t=this;if(e===h){return t.selectedIndex}else{return t._select(e).done(function(){t._cascadeValue=t._old=t._accessor();t._oldIndex=t.selectedIndex})}},_accessor:function(e,t){return this[this._isSelect?"_accessorSelect":"_accessorInput"](e,t)},_accessorInput:function(e){var t=this.element[0];if(e===h){return t.value}else{if(e===null){e=""}t.value=e}},_accessorSelect:function(e,t){var i=this.element[0];var n;if(e===h){return z(i).value||""}z(i).selected=false;if(t===h){t=-1}n=e!==null&&e!=="";if(n&&t==-1){this._custom(e)}else{if(e){i.value=e}else{i.selectedIndex=t}}},_syncValueAndText:function(){return true},_custom:function(e){var t=this;var i=t.element;var n=t._customOption;if(!n){n=v("<option/>");t._customOption=n;i.append(n)}n.text(e);n[0].selected=true},_hideBusy:function(){var e=this;clearTimeout(e._busy);e._arrowIcon.removeClass(i);e._focused.attr("aria-busy",false);e._busy=null;e._showClear()},_showBusy:function(e){var t=this;if(e.isDefaultPrevented()){return}t._request=true;if(t._busy){return}t._busy=setTimeout(function(){if(t._arrowIcon){t._focused.attr("aria-busy",true);t._arrowIcon.addClass(i);t._hideClear()}},100)},_requestEnd:function(){this._request=false;this._hideBusy()},_dataSource:function(){var e=this,t=e.element,i=e.options,n=i.dataSource||{},r;n=v.isArray(n)?{data:n}:n;if(e._isSelect){r=t[0].selectedIndex;if(r>-1){i.index=r}n.select=t;n.fields=[{field:i.dataTextField},{field:i.dataValueField}]}if(e.dataSource){e._unbindDataSource()}else{e._requestStartHandler=A(e._showBusy,e);e._requestEndHandler=A(e._requestEnd,e);e._errorHandler=A(e._hideBusy,e)}e.dataSource=p.data.DataSource.create(n).bind(S,e._requestStartHandler).bind(T,e._requestEndHandler).bind("error",e._errorHandler)},_firstItem:function(){this.listView.focusFirst()},_lastItem:function(){this.listView.focusLast()},_nextItem:function(){return this.listView.focusNext()},_prevItem:function(){return this.listView.focusPrev()},_getNormalizedDataItem:function(e){var t=this,i=t.listView,n=typeof e==="number",r=t.optionLabel&&t.optionLabel.length,a;if(n){a=r?--e:e}else{a=i.getElementIndex(e)}return i.dataItemByIndex(a)},_getNormalizedSelectCandidate:function(e){var t=this,i=t.optionLabel&&t.optionLabel.length,n=typeof e==="number",r=e;if(i&&n){r++}return r},_move:function(e){var t=this;var i=t.listView;var n=e.keyCode;var r=n===g.DOWN;var a=t.options.virtual;var o;var s;var l;var d;var u;if(n===g.UP||r){if(e.altKey){t.toggle(r)}else{if(!i.bound()&&!t.ul[0].firstChild){if(!t._fetch){t.dataSource.one(b,function(){t._fetch=false;t._move(e)});t._fetch=true;t._filterSource()}e.preventDefault();return true}l=t._focus();if(!t._fetch&&(!l||l.hasClass("k-state-selected"))){if(r){d=t._nextItem();if(a&&d<=0||!t._focus()&&!d){t._lastItem()}}else{d=t._prevItem();if(a&&d>=i.dataSource.total()-1||!t._focus()&&!d){t._firstItem()}}}u=t._getNormalizedSelectCandidate(t._get(t._focus())||d||0);t._select(u,true).done(function(){var e=function(){if(!t.popup.visible()){t._blur()}if(t._cascadedValue===null){t._cascadedValue=t.value()}else{t._cascadedValue=t.dataItem()?t.dataItem()[t.options.dataValueField]||t.dataItem():null}};if(t.trigger(x,{dataItem:t._getNormalizedDataItem(u),item:t._focus()})){t._select(l).done(e)}else{e()}})}e.preventDefault();s=true}else if(n===g.ENTER||n===g.TAB){if(t.popup.visible()){e.preventDefault()}l=t._focus();o=t.dataItem();if(!t.popup.visible()&&(!o||t.text()!==t._text(o))){l=null}var c=t.filterInput&&t.filterInput[0]===_();var f;if(l){o=i.dataItemByIndex(i.getElementIndex(l));var h=true;if(o){h=t._value(o)!==M.unifyType(t.value(),typeof t._value(o))}if(h&&t.trigger(x,{dataItem:o,item:l})){return}f=t._select(l)}else if(t.input){if(t._syncValueAndText()||t._isSelect){t._accessor(t.input.val())}t.listView.value(t.input.val())}if(t._focusElement){t._focusElement(t.wrapper)}if(c&&n===g.TAB){t.wrapper.focusout()}else{if(f&&typeof f.done==="function"){f.done(function(){t._blur()})}else{t._blur()}}t.close();s=true}else if(n===g.ESC){if(t.popup.visible()){e.preventDefault()}t.close();s=true}else if(t.popup.visible()&&(n===g.PAGEDOWN||n===g.PAGEUP)){e.preventDefault();var p=n===g.PAGEDOWN?1:-1;i.scrollWith(p*i.screenHeight());s=true}return s},_fetchData:function(){var e=this;var t=!!e.dataSource.view().length;if(e._request||e.options.cascadeFrom){return}if(!e.listView.bound()&&!e._fetch&&!t){e._fetch=true;e.dataSource.fetch().done(function(){e._fetch=false})}},_options:function(e,t,i){var n=this,r=n.element,a=r[0],o=e.length,s="",l,d,u,c,f=0;if(t){s=t}for(;f<o;f++){l="<option";d=e[f];u=n._text(d);c=n._value(d);if(c!==h){c+="";if(c.indexOf('"')!==-1){c=c.replace(G,"&quot;")}l+=' value="'+c+'"'}l+=">";if(u!==h){l+=L(u)}l+="</option>";s+=l}r.html(s);if(i!==h){a.value=i;if(a.value&&!i){a.selectedIndex=-1}}if(a.selectedIndex!==-1){l=z(a);if(l){l.setAttribute(C,C)}}},_reset:function(){var e=this,t=e.element,i=t.attr("form"),n=i?v("#"+i):t.closest("form");if(n[0]){e._resetHandler=function(){setTimeout(function(){e.value(e._initial)})};e._form=n.on("reset",e._resetHandler)}},_parentWidget:function(){var e=this.options.name;if(!this.options.cascadeFrom){return}var t=v("#"+this.options.cascadeFrom);var i=t.data("kendo"+e);if(!i){for(var n=0;n<q[e].length;n+=1){i=t.data("kendo"+q[e][n]);if(!!i){break}}}return i},_cascade:function(){var t=this;var e=t.options;var i=e.cascadeFrom;var n;if(i){n=t._parentWidget();if(!n){return}t._cascadeHandlerProxy=A(t._cascadeHandler,t);t._cascadeFilterRequests=[];e.autoBind=false;n.bind("set",function(){t.one("set",function(e){t._selectedValue=e.value||t._accessor()})});n.first(y,t._cascadeHandlerProxy);if(n.listView.bound()){t._toggleCascadeOnFocus();t._cascadeSelect(n)}else{n.one("dataBound",function(){t._toggleCascadeOnFocus();if(n.popup.visible()){n._focused.focus()}});if(!n.value()){t.enable(false)}}}},_toggleCascadeOnFocus:function(){var e=this;var t=e._parentWidget();var i=j&&t instanceof n.DropDownList?O:W;t._focused.add(t.filterInput).bind(V,function(){t.unbind(y,e._cascadeHandlerProxy);t.first(b,e._cascadeHandlerProxy)});t._focused.add(t.filterInput).bind(i,function(){t.unbind(b,e._cascadeHandlerProxy);t.first(y,e._cascadeHandlerProxy)})},_cascadeHandler:function(e){var t=this._parentWidget();var i=this.value();this._userTriggered=e.userTriggered||t._userTriggered;if(this.listView.bound()){this._clearSelection(t,true)}this._cascadeSelect(t,i)},_cascadeChange:function(e){var t=this;var i=t._accessor()||t._selectedValue;if(!t._cascadeFilterRequests.length){t._selectedValue=null}if(t._userTriggered){t._clearSelection(e,true)}else if(i){if(i!==R(t.listView.value()[0],typeof i)){t.value(i)}if(!t.dataSource.view()[0]||t.selectedIndex===-1){t._clearSelection(e,true)}}else if(t.dataSource.flatView().length){t.select(t.options.index)}t.enable();t._triggerCascade();t._triggerChange();t._userTriggered=false},_cascadeSelect:function(t,e){var i=this;var n=t.dataItem();var r=n?n[i.options.cascadeFromParentField]||t._value(n):null;var a=i.options.cascadeFromField||t.options.dataValueField;var o;i._valueBeforeCascade=e!==h?e:i.value();if(r||r===0){o=i.dataSource.filter()||{};B(o,a);var s=function(){var e=i._cascadeFilterRequests.shift();if(e){i.unbind("dataBound",e)}e=i._cascadeFilterRequests[0];if(e){i.first("dataBound",e)}i._cascadeChange(t)};i._cascadeFilterRequests.push(s);if(i._cascadeFilterRequests.length===1){i.first("dataBound",s)}i._cascading=true;i._filterSource({field:a,operator:"eq",value:r});i._cascading=false}else{i.enable(false);i._clearSelection(t);i._triggerCascade();i._triggerChange();i._userTriggered=false}}});var F=".StaticList";var e=p.ui.DataBoundWidget.extend({init:function(e,t){a.fn.init.call(this,e,t);this.element.attr("role","listbox").on("click"+F,"li",A(this._click,this)).on("mouseenter"+F,"li",function(){v(this).addClass(u)}).on("mouseleave"+F,"li",function(){v(this).removeClass(u)});if(r.touch){this._touchHandlers()}if(this.options.selectable==="multiple"){this.element.attr("aria-multiselectable",true)}this.content=this.element.wrap("<div class='k-list-scroller' unselectable='on'></div>").parent();this.header=this.content.before('<div class="k-group-header" style="display:none"></div>').prev();this.bound(false);this._optionID=p.guid();this._selectedIndices=[];this._view=[];this._dataItems=[];this._values=[];var i=this.options.value;if(i){this._values=v.isArray(i)?i.slice(0):[i]}this._getter();this._templates();this.setDataSource(this.options.dataSource);this._onScroll=A(function(){var e=this;clearTimeout(e._scrollId);e._scrollId=setTimeout(function(){e._renderHeader()},50)},this)},options:{name:"StaticList",dataValueField:null,valuePrimitive:false,selectable:true,template:null,groupTemplate:null,fixedGroupTemplate:null},events:["click",b,"activate","deactivate","dataBinding","dataBound","selectedItemChange"],setDataSource:function(e){var t=this;var i=e||{};var n;i=v.isArray(i)?{data:i}:i;i=p.data.DataSource.create(i);if(t.dataSource){t.dataSource.unbind(b,t._refreshHandler);n=t.value();t.value([]);t.bound(false);t.value(n)}else{t._refreshHandler=A(t.refresh,t)}t.setDSFilter(i.filter());t.dataSource=i.bind(b,t._refreshHandler);t._fixedHeader()},_touchHandlers:function(){var t=this;var i;var n;var r=function(e){return(e.originalEvent||e).changedTouches[0].pageY};t.element.on("touchstart"+F,function(e){i=r(e)});t.element.on("touchend"+F,function(e){if(e.isDefaultPrevented()){return}n=r(e);if(Math.abs(n-i)<10){t._touchTriggered=true;t._triggerClick(v(e.target).closest(f).get(0))}})},skip:function(){return this.dataSource.skip()},setOptions:function(e){a.fn.setOptions.call(this,e);this._getter();this._templates();this._render()},destroy:function(){this.element.off(F);if(this._refreshHandler){this.dataSource.unbind(b,this._refreshHandler)}clearTimeout(this._scrollId);a.fn.destroy.call(this)},dataItemByIndex:function(e){return this.dataSource.flatView()[e]},screenHeight:function(){return this.content[0].clientHeight},scrollToIndex:function(e){var t=this.element[0].children[e];if(t){this.scroll(t)}},scrollWith:function(e){this.content.scrollTop(this.content.scrollTop()+e)},scroll:function(e){if(!e){return}if(e[0]){e=e[0]}var t=this.content[0],i=e.offsetTop,n=e.offsetHeight,r=t.scrollTop,a=t.clientHeight,o=i+n;if(r>i){r=i}else if(o>r+a){r=o-a}t.scrollTop=r},selectedDataItems:function(e){if(e===h){return this._dataItems.slice()}this._dataItems=e;this._values=this._getValues(e)},_getValues:function(e){var t=this._valueGetter;return v.map(e,function(e){return t(e)})},focusNext:function(){var e=this.focus();if(!e){e=0}else{e=e.next()}this.focus(e)},focusPrev:function(){var e=this.focus();if(!e){e=this.element[0].children.length-1}else{e=e.prev()}this.focus(e)},focusFirst:function(){this.focus(this.element[0].children[0])},focusLast:function(){this.focus(P(this.element[0].children))},focus:function(e){var t=this;var i=t._optionID;var n;if(e===h){return t._current}e=P(t._get(e));e=v(this.element[0].children[e]);if(t._current){t._current.removeClass(d).removeAttr(s);t.trigger("deactivate")}n=!!e[0];if(n){e.addClass(d);t.scroll(e);e.attr("id",i)}t._current=n?e:null;t.trigger("activate")},focusIndex:function(){return this.focus()?this.focus().index():h},skipUpdate:function(e){this._skipUpdate=e},select:function(e){var t=this;var i=t.options.selectable;var n=i!=="multiple"&&i!==false;var r=t._selectedIndices;var a=[this.element.find(".k-state-selected").index()];var o=[];var s=[];var l;if(e===h){return r.slice()}e=t._get(e);if(e.length===1&&e[0]===-1){e=[]}var d=v.Deferred().resolve();var u=t.isFiltered();if(u&&!n&&t._deselectFiltered(e)){return d}if(n&&!u&&v.inArray(P(e),r)!==-1&&v.inArray(P(e),a)!==-1){if(t._dataItems.length&&t._view.length){t._dataItems=[t._view[r[0]].item]}return d}l=t._deselect(e);s=l.removed;e=l.indices;if(e.length){if(n){e=[P(e)]}o=t._select(e)}if(o.length||s.length){t._valueComparer=null;t.trigger(b,{added:o,removed:s})}return d},removeAt:function(e){this._selectedIndices.splice(e,1);this._values.splice(e,1);this._valueComparer=null;return{position:e,dataItem:this._dataItems.splice(e,1)[0]}},setValue:function(e){e=v.isArray(e)||e instanceof H?e.slice(0):[e];this._values=e;this._valueComparer=null},value:function(e){var t=this;var i=t._valueDeferred;var n;if(e===h){return t._values.slice()}t.setValue(e);if(!i||i.state()==="resolved"){t._valueDeferred=i=v.Deferred()}if(t.bound()){n=t._valueIndices(t._values);if(t.options.selectable==="multiple"){t.select(-1)}t.select(n);i.resolve()}t._skipUpdate=false;return i},items:function(){return this.element.children(f)},_click:function(e){if(this._touchTriggered){this._touchTriggered=false;return}if(!e.isDefaultPrevented()){this._triggerClick(e.currentTarget)}},_triggerClick:function(e){if(!this.trigger("click",{item:v(e)})){this.select(e)}},_valueExpr:function(e,t){var i=this;var n=0;var r;var a;var o=[];if(!i._valueComparer||i._valueType!==e){i._valueType=e;for(;n<t.length;n++){o.push(R(t[n],e))}r="for (var idx = 0; idx < "+o.length+"; idx++) {"+" if (current === values[idx]) {"+"   return idx;"+" }"+"} "+"return -1;";a=new Function("current","values",r);i._valueComparer=function(e){return a(e,o)}}return i._valueComparer},_dataItemPosition:function(e,t){var i=this._valueGetter(e);var n=this._valueExpr(typeof i,t);return n(i)},_getter:function(){this._valueGetter=p.getter(this.options.dataValueField)},_deselect:function(e){var t=this;var i=t.element[0].children;var n=t.options.selectable;var r=t._selectedIndices;var a=t._dataItems;var o=t._values;var s=[];var l=0;var d;var u,c;var f=0;e=e.slice();if(n===true||!e.length){for(;l<r.length;l++){v(i[r[l]]).removeClass("k-state-selected").attr("aria-selected",false);s.push({position:l,dataItem:a[l]})}t._values=[];t._dataItems=[];t._selectedIndices=[]}else if(n==="multiple"){for(;l<e.length;l++){u=e[l];if(!v(i[u]).hasClass("k-state-selected")){continue}for(d=0;d<r.length;d++){c=r[d];if(c===u){v(i[c]).removeClass("k-state-selected").attr("aria-selected",false);var h=this._view[u].item;var p=this._dataItemPosition(h,this._values);s.push({position:p,dataItem:h});a.splice(d,1);r.splice(d,1);e.splice(l,1);o.splice(d,1);f+=1;l-=1;d-=1;break}}}}return{indices:e,removed:s}},_deselectFiltered:function(e){var t=this.element[0].children;var i,n,r;var a=[];var o=0;for(;o<e.length;o++){n=e[o];i=this._view[n].item;r=this._dataItemPosition(i,this._values);if(r>-1){a.push(this.removeAt(r));v(t[n]).removeClass("k-state-selected")}}if(a.length){this.trigger(b,{added:[],removed:a});return true}return false},_select:function(e){var t=this;var i=t.element[0].children;var n=t._view;var r,a;var o=[];var s=0;if(P(e)!==-1){t.focus(e)}for(;s<e.length;s++){a=e[s];r=n[a];if(a===-1||!r){continue}r=r.item;t._selectedIndices.push(a);t._dataItems.push(r);t._values.push(t._valueGetter(r));v(i[a]).addClass("k-state-selected").attr("aria-selected",true);o.push({dataItem:r})}return o},getElementIndex:function(e){return v(e).data("offset-index")},_get:function(e){if(typeof e==="number"){e=[e]}else if(!U(e)){e=this.getElementIndex(e);e=[e!==h?e:-1]}return e},_template:function(){var e=this;var t=e.options;var i=t.template;if(!i){i=p.template('<li tabindex="-1" role="option" unselectable="on" class="k-item">${'+p.expr(t.dataTextField,"data")+"}</li>",{useWithBlock:false})}else{i=p.template(i);i=function(e){return'<li tabindex="-1" role="option" unselectable="on" class="k-item">'+i(e)+"</li>"}}return i},_templates:function(){var e;var t=this.options;var i={template:t.template,groupTemplate:t.groupTemplate,fixedGroupTemplate:t.fixedGroupTemplate};if(t.columns){for(var n=0;n<t.columns.length;n++){var r=t.columns[n];var a=r.field?r.field.toString():"text";i["column"+n]=r.template||"#: "+a+"#"}}for(var o in i){e=i[o];if(e&&typeof e!=="function"){i[o]=p.template(e)}}this.templates=i},_normalizeIndices:function(e){var t=[];var i=0;for(;i<e.length;i++){if(e[i]!==h){t.push(e[i])}}return t},_valueIndices:function(e,t){var i=this._view;var n=0;var r;t=t?t.slice():[];if(!e.length){return[]}for(;n<i.length;n++){r=this._dataItemPosition(i[n].item,e);if(r!==-1){t[r]=n}}return this._normalizeIndices(t)},_firstVisibleItem:function(){var e=this.element[0];var t=this.content[0];var i=t.scrollTop;var n=v(e.children[0]).height();var r=Math.floor(i/n)||0;var a=e.children[r]||e.lastChild;var o=a.offsetTop<i;while(a){if(o){if(a.offsetTop+n>i||!a.nextSibling){break}a=a.nextSibling}else{if(a.offsetTop<=i||!a.previousSibling){break}a=a.previousSibling}}return this._view[v(a).data("offset-index")]},_fixedHeader:function(){if(this.isGrouped()&&this.templates.fixedGroupTemplate){this.header.show();this.content.scroll(this._onScroll)}else{this.header.hide();this.content.off("scroll",this._onScroll)}},_renderHeader:function(){var e=this.templates.fixedGroupTemplate;if(!e){return}var t=this._firstVisibleItem();if(t&&t.group.toString().length){this.header.html(e(t.group))}},_renderItem:function(e){var t='<li tabindex="-1" role="option" unselectable="on" class="k-item';var i=e.item;var n=e.index!==0;var r=e.selected;var a=this.isGrouped();var o=this.options.columns&&this.options.columns.length;if(n&&e.newGroup){t+=" k-first"}if(e.isLastGroupedItem&&o){t+=" k-last"}if(r){t+=" k-state-selected"}t+='" aria-selected="'+(r?"true":"false")+'" data-offset-index="'+e.index+'">';if(o){t+=this._renderColumns(i)}else{t+=this.templates.template(i)}if(n&&e.newGroup){if(o){t+='<div class="k-cell k-group-cell"><span>'+this.templates.groupTemplate(e.group)+"</span></div>"}else{t+='<div class="k-group">'+this.templates.groupTemplate(e.group)+"</div>"}}else if(a&&o){t+="<div class='k-cell k-spacer-cell'></div>"}return t+"</li>"},_renderColumns:function(e){var t="";for(var i=0;i<this.options.columns.length;i++){var n=this.options.columns[i].width;var r=parseInt(n,10);var a="";if(n&&!isNaN(r)){a+="style='width:";a+=r;a+=m.test(n)?"%":"px";a+=";'"}t+="<span class='k-cell' "+a+">";t+=this.templates["column"+i](e);t+="</span>"}return t},_render:function(){var e="";var t=0;var i=0;var n;var r=[];var a=this.dataSource.view();var o=this.value();var s,l,d;var u=this.isGrouped();if(u){for(t=0;t<a.length;t++){s=a[t];l=true;for(d=0;d<s.items.length;d++){n={selected:this._selected(s.items[d],o),item:s.items[d],group:s.value,newGroup:l,isLastGroupedItem:d===s.items.length-1,index:i};r[i]=n;i+=1;e+=this._renderItem(n);l=false}}}else{for(t=0;t<a.length;t++){n={selected:this._selected(a[t],o),item:a[t],index:t};r[t]=n;e+=this._renderItem(n)}}this._view=r;this.element[0].innerHTML=e;if(u&&r.length){this._renderHeader()}},_selected:function(e,t){var i=!this.isFiltered()||this.options.selectable==="multiple";return i&&this._dataItemPosition(e,t)!==-1},setDSFilter:function(e){this._lastDSFilter=D({},e)},isFiltered:function(){if(!this._lastDSFilter){this.setDSFilter(this.dataSource.filter())}return!p.data.Query.compareFilters(this.dataSource.filter(),this._lastDSFilter)},refresh:function(e){var t=this;var i=e&&e.action;var n=t.options.skipUpdateOnBind;var r=i==="itemchange";var a;t.trigger("dataBinding");t._angularItems("cleanup");t._fixedHeader();t._render();t.bound(true);if(r||i==="remove"){a=$(t._dataItems,e.items);if(a.changed.length){if(r){t.trigger("selectedItemChange",{items:a.changed})}else{t.value(t._getValues(a.unchanged))}}}else if(t.isFiltered()||t._skipUpdate||t._emptySearch){t.focus(0);if(t._skipUpdate){t._skipUpdate=false;t._selectedIndices=t._valueIndices(t._values,t._selectedIndices)}}else if(!n&&(!i||i==="add")){t.value(t._values)}if(t._valueDeferred){t._valueDeferred.resolve()}t._angularItems("compile");t.trigger("dataBound")},bound:function(e){if(e===h){return this._bound}this._bound=e},isGrouped:function(){return(this.dataSource.group()||[]).length}});n.plugin(e);function P(e){return e[e.length-1]}function z(e){var t=e.selectedIndex;return t>-1?e.options[t]:{}}function $(e,t){var i=t.length;var n=e.length;var r;var a;var o,s;var l=[];var d=[];if(n){for(o=0;o<n;o++){r=e[o];a=false;for(s=0;s<i;s++){if(r===t[s]){a=true;l.push({index:o,item:r});break}}if(!a){d.push(r)}}}return{changed:l,unchanged:d}}function K(e){if(!e||v.isEmptyObject(e)){return false}if(e.filters&&!e.filters.length){return false}return true}function B(e,t){var i;var n=false;if(e.filters){i=v.grep(e.filters,function(e){n=B(e,t);if(e.filters){return e.filters.length}else{return e.field!=t}});if(!n&&e.filters.length!==i.length){n=true}e.filters=i}return n}})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.calendar",["kendo.core","kendo.selectable"],e)})(function(){var e={id:"calendar",name:"Calendar",category:"web",description:"The Calendar widget renders a graphical calendar that supports navigation and selection.",depends:["core","selectable"]};(function(b,w){var T=window.kendo,e=T.support,t=T.ui,a=t.Widget,m=T.keys,o=T.parseDate,D=T.date.adjustDST,N=T.date.weekInYear,r=T.ui.Selectable,O=T._extractFormat,l=T.template,V=T.getCulture,i=T.support.transitions,W=i?i.css+"transform-origin":"",U=l('<td#=data.cssClass# role="gridcell"><a tabindex="-1" class="k-link" href="\\#" data-#=data.ns#value="#=data.dateString#">#=data.value#</a></td>',{useWithBlock:false}),j=l('<td role="gridcell" class="k-out-of-range"><a class="k-link"></a></td>',{useWithBlock:false}),G=l('<td role="gridcell" class="k-out-of-range">&nbsp;</td>',{useWithBlock:false}),q=l('<td class="k-alt">#= data.weekNumber #</td>',{useWithBlock:false}),$=T._outerWidth,d=".kendoCalendar",s="click"+d,K="keydown"+d,u="id",Y="min",Q="left",c="slideIn",f="month",X="century",g="change",Z="navigate",h="value",k="k-state-hover",A="k-state-disabled",y="k-state-focused",E="k-other-month",J=' class="'+E+'"',n="k-out-of-range",ee="k-nav-today",p="td:has(.k-link)",v="td:has(.k-link):not(."+A+"):not(."+n+")",te="td:not(:has(.k-link))",ie="k-state-selected",ne="blur"+d,re="focus",ae=re+d,oe=e.touch?"touchstart":"mouseenter",se=e.touch?"touchstart"+d:"mouseenter"+d,le=e.touch?"touchend"+d+" touchmove"+d:"mouseleave"+d,de=6e4,ue=864e5,x="_prevArrow",C="_nextArrow",S="aria-disabled",ce="aria-selected",fe="aria-label",_=b.proxy,he=b.extend,I=Date,M={month:0,year:1,decade:2,century:3},pe=".k-header, .k-calendar-header",ve='<div class="k-header">'+'<a href="\\#" #=actionAttr#="prev" role="button" class="k-link k-nav-prev" '+fe+'="Previous"><span class="k-icon k-i-arrow-60-left"></span></a>'+'<a href="\\#" #=actionAttr#="nav-up" role="button" aria-live="assertive" aria-atomic="true" class="k-link k-nav-fast"></a>'+'<a href="\\#" #=actionAttr#="next" role="button" class="k-link k-nav-next" '+fe+'="Next"><span class="k-icon k-i-arrow-60-right"></span></a>'+"</div>",me='<div class="k-calendar-header">'+'<a href="\\#" #=actionAttr#="nav-up" role="button" aria-live="assertive" aria-atomic="true" class="k-button k-title"></a>'+'<span class="k-calendar-nav">'+'<a #=actionAttr#="prev" class="k-button k-button-icon k-prev-view">'+'<span class="k-icon k-i-arrow-60-left"></span>'+"</a>"+'<a #=actionAttr#="today" class="k-today">#=messages.today#</a>'+'<a #=actionAttr#="next" class="k-button k-button-icon k-next-view">'+'<span class="k-icon k-i-arrow-60-right"></span>'+"</a>"+"</span>"+"</div>";var ge=a.extend({init:function(e,n){var r=this,t,i;n=n||{};n.componentType=n.componentType||"classic";a.fn.init.call(r,e,n);e=r.wrapper=r.element;n=r.options;n.url=T.unescape(n.url);r.options.disableDates=Re(r.options.disableDates);r._templates();r._selectable();r._header();r._viewWrapper();if(r.options.hasFooter){r._footer(r.footer)}else{r._today=r.element.find("a.k-today");r._toggle()}i=e.addClass("k-widget k-widget-2021 k-calendar "+(n.weekNumber?" k-week-number":"")).on(se+" "+le,p,Ce).on(K,"table.k-content",_(r._move,r)).on(s+" touchend",p,function(e){var t=e.currentTarget.firstChild,i=H(t);if(t.href.indexOf("#")!=-1){e.preventDefault()}if(r._view.name=="month"&&r.options.disableDates(i)){return}if(r._view.name!="month"||n.selectable=="single"){r._click(b(t))}}).on("mouseup"+d,"table.k-content, .k-footer",function(){r._focusView(r.options.focusOnNav!==false)}).attr(u);if(i){r._cellID=i+"_cell_selected"}if(r._isMultipleSelection()&&r.options.weekNumber){e.on(s,te,function(e){var t=b(e.currentTarget).closest("tr").find(v).first(),i=r.selectable._lastActive=b(e.currentTarget).closest("tr").find(v).last();r.selectable.selectRange(t,i,{event:e});r._current=r._value=H(i.find("a"));r._class(y,r._current)})}De(n);t=o(n.value,n.format,n.culture);r._selectDates=[];r._index=M[n.start];r._current=new I(+z(t,n.min,n.max));r._addClassProxy=function(){r._active=true;if(r._cell.hasClass(A)){var e=r._view.toDateString(P());r._cell=r._cellByDate(e)}r._cell.addClass(y)};r._removeClassProxy=function(){r._active=false;r._cell.removeClass(y)};r.value(t);if(r._isMultipleSelection()&&n.selectDates.length>0){r.selectDates(n.selectDates)}T.notify(r)},options:{name:"Calendar",value:null,min:new I(1900,0,1),max:new I(2099,11,31),dates:[],disableDates:null,url:"",culture:"",footer:"",format:"",month:{},weekNumber:false,selectable:"single",selectDates:[],start:f,depth:f,animation:{horizontal:{effects:c,reverse:true,duration:500,divisor:2},vertical:{effects:"zoomIn",duration:400}},messages:{weekColumnHeader:"",today:"Today"},componentType:"classic"},events:[g,Z],componentTypes:{classic:{header:{template:ve},hasFooter:true,linksSelector:".k-link",contentClasses:"k-content"},modern:{header:{template:me},hasFooter:false,linksSelector:".k-button",contentClasses:"k-content k-calendar-content"}},setOptions:function(e){var t=this;De(e);e.disableDates=Re(e.disableDates);t._destroySelectable();a.fn.setOptions.call(t,e);t._templates();t._selectable();t._viewWrapper();if(t.options.hasFooter){t._footer(t.footer)}else{t.element.find(".k-footer").hide();t._toggle()}t._index=M[t.options.start];t.navigate();if(e.weekNumber){t.element.addClass("k-week-number")}},destroy:function(){var e=this,t=e._today;e.element.off(d);e._title.off(d);e[x].off(d);e[C].off(d);e._destroySelectable();T.destroy(e._table);if(t){T.destroy(t.off(d))}a.fn.destroy.call(e)},current:function(){return this._current},view:function(){return this._view},focus:function(e){e=e||this._table;this._bindTable(e);e.trigger("focus")},min:function(e){return this._option(Y,e)},max:function(e){return this._option("max",e)},navigateToPast:function(){this._navigate(x,-1)},navigateToFuture:function(){this._navigate(C,1)},navigateUp:function(){var e=this,t=e._index;if(e._title.hasClass(A)){return}e.navigate(e._current,++t)},navigateDown:function(e){var t=this,i=t._index,n=t.options.depth;if(!e){return}if(i===M[n]){if(!ze(t._value,t._current)||!ze(t._value,e)){t.value(e);t.trigger(g)}return}t.navigate(e,--i)},navigate:function(e,t){t=isNaN(t)?M[t]:t;var i=this,n=i.options,r=n.culture,a=n.min,o=n.max,s=i._title,l=i._table,d=i._oldTable,u=i._current,c=e&&+e>+u,f=t!==w&&t!==i._index,h,p,v,m,g=i.element.children(".k-calendar-view");if(!e){e=u}i._current=e=new I(+z(e,a,o));if(t===w){t=i._index}else{i._index=t}i._view=p=R.views[t];v=p.compare;m=t===M[X];s.toggleClass(A,m).attr(S,m);m=v(e,a)<1;i[x].toggleClass(A,m).attr(S,m);if(i[x].hasClass(A)){i[x].removeClass(k)}m=v(e,o)>-1;i[C].toggleClass(A,m).attr(S,m);if(i[C].hasClass(A)){i[C].removeClass(k)}if(l&&d&&d.data("animating")){d.kendoStop(true,true);l.kendoStop(true,true)}i._oldTable=l;if(!l||i._changeView){s.html(p.title(e,a,o,r));i._table=h=b(p.content(he({min:a,max:o,date:e,url:n.url,dates:n.dates,format:n.format,otherMonth:true,culture:r,disableDates:n.disableDates,isWeekColumnVisible:n.weekNumber,messages:n.messages,contentClasses:i.options.contentClasses},i[p.name])));Ae(h,p.name);var _=l&&l.data("start")===h.data("start");i._animate({from:l,to:h,vertical:f,future:c,replace:_});if(i.options.componentType==="modern"){g.removeClass("k-calendar-monthview k-calendar-yearview k-calendar-decadeview k-calendar-centuryview");g.addClass("k-calendar-"+p.name+"view")}i.trigger(Z);i._focus(e)}if(t===M[n.depth]&&i._selectDates.length>0){i._visualizeSelectedDatesInView()}if(i.options.selectable==="single"){if(t===M[n.depth]&&i._value&&!i.options.disableDates(i._value)){i._class("k-state-selected",i._value)}}i._class(y,e);if(!l&&i._cell){i._cell.removeClass(y)}i._changeView=true},selectDates:function(e){var t=this,i,n;if(e===w){return t._selectDates}n=e.map(function(e){return e.getTime()}).filter(function(e,t,i){return i.indexOf(e)===t}).map(function(e){return new Date(e)});i=b.grep(n,function(e){if(e){return+t._validateValue(new Date(e.setHours(0,0,0,0)))===+e}});t._selectDates=i.length>0?i:n.length===0?n:t._selectDates;t._visualizeSelectedDatesInView()},value:function(e){var t=this,i=t._view,n=t._view;if(e===w){return t._value}e=t._validateValue(e);if(e&&t._isMultipleSelection()){var r=new Date(+e);r.setHours(0,0,0,0);t._selectDates=[r];t.selectable._lastActive=null}if(i&&e===null&&t._cell){t._cell.removeClass(ie)}else{t._changeView=!e||n&&n.compare(e,t._current)!==0;t.navigate(e)}},_validateValue:function(e){var t=this,i=t.options,n=i.min,r=i.max;if(e===null){t._current=L(t._current.getFullYear(),t._current.getMonth(),t._current.getDate())}e=o(e,i.format,i.culture);if(e!==null){e=new I(+e);if(!B(e,n,r)){e=null}}if(e===null||!t.options.disableDates(new Date(+e))){t._value=e}else if(t._value===w){t._value=null}return t._value},_visualizeSelectedDatesInView:function(){var e=this;var i={};b.each(e._selectDates,function(e,t){i[T.calendar.views[0].toDateString(t)]=t});e.selectable.clear();var t=e._table.find(p).filter(function(e,t){return i[b(t.firstChild).attr(T.attr(h))]});if(t.length>0){e.selectable._selectElement(t,true)}},_isMultipleSelection:function(){var e=this;return e.options.selectable==="multiple"},_selectable:function(){var e=this;if(!e._isMultipleSelection()){return}var t=e.options.selectable,i=r.parseOptions(t);if(i.multiple){e.element.attr("aria-multiselectable","true")}e.selectable=new r(e.wrapper,{aria:true,inputSelectors:"input,textarea,.k-multiselect-wrap,select,button,.k-button>span,.k-button>img,span.k-icon.k-i-arrow-60-down,span.k-icon.k-i-arrow-60-up",multiple:i.multiple,filter:"table.k-month:eq(0) "+v,change:_(e._onSelect,e),relatedTarget:_(e._onRelatedTarget,e)})},_onRelatedTarget:function(e){var t=this;if(t.selectable.options.multiple&&e.is(v)){t._current=H(e.find("a"));t._class(y,H(e.find("a")))}},_onSelect:function(e){var n=this,t=e,i=r.parseOptions(n.options.selectable);if(!i.multiple){if(b(t.event.currentTarget).is("td")&&!b(t.event.currentTarget).hasClass("k-state-selected")){b(t.event.currentTarget).addClass("k-state-selected")}else{n._click(b(t.event.currentTarget).find("a"))}return}if(t.event.ctrlKey||t.event.metaKey){if(b(t.event.currentTarget).is(v)){n._toggleSelection(b(t.event.currentTarget))}else{n._cellsBySelector(v).each(function(e,t){var i=H(b(t).find("a"));n._deselect(i)});n._addSelectedCellsToArray()}}else if(t.event.shiftKey){n._rangeSelection(n._cell)}else if(b(t.event.currentTarget).is(p)){n.value(H(b(t.event.currentTarget).find("a")))}else{n._selectDates=[];n._addSelectedCellsToArray()}n.trigger(g)},_destroySelectable:function(){var e=this;if(e.selectable){e.selectable.destroy();e.selectable=null}},_toggleSelection:function(e){var t=this,i=H(e.find("a"));if(e.hasClass("k-state-selected")){t._selectDates.push(i)}else{t._deselect(i)}},_rangeSelection:function(e,t){var i=this,n=t||H(i.selectable.value().first().find("a")),r=H(e.find("a")),a;if(i.selectable._lastActive||i._value){n=i.selectable._lastActive?H(i.selectable._lastActive.find("a")):new Date(+i._value)}else{i.selectable._lastActive=t?i._cellByDate(i._view.toDateString(t),v):i.selectable.value().first()}i._selectDates=[];a=ye(n,r);xe(i._selectDates,a,n,i.options.disableDates);i._visualizeSelectedDatesInView()},_cellsBySelector:function(e){var t=this;return t._table.find(e)},_addSelectedCellsToArray:function(){var n=this;n.selectable.value().each(function(e,t){var i=H(b(t.firstChild));if(!n.options.disableDates(i)){n._selectDates.push(i)}})},_deselect:function(e){var t=this;var i=t._selectDates.map(Number).indexOf(+e);if(i!=-1){t._selectDates.splice(i,1)}},_dateInView:function(e){var t=this,i=H(t._cellsBySelector(v+":first").find("a")),n=H(t._cellsBySelector(v+":last").find("a"));return+e<=+n&&+e>=+i},_isNavigatable:function(e,t){var i=this;var n=i.options.disableDates;var r;var a;if(i._view.name=="month"){return!n(e)}else{a=i.wrapper.find("."+y).index();r=i.wrapper.find(".k-content td:eq("+(a+t)+")");return r.is(v)||!n(e)}},_move:function(e){var t=this,i=t.options,n=e.keyCode,r=t._view,a=t._index,o=t.options.min,s=t.options.max,l=new I(+t._current),d=T.support.isRtl(t.wrapper),u=t.options.disableDates,c,f,h,p;if(e.target===t._table[0]){t._active=true}if(n==m.RIGHT&&!d||n==m.LEFT&&d){c=1;f=true}else if(n==m.LEFT&&!d||n==m.RIGHT&&d){c=-1;f=true}else if(n==m.UP){c=a===0?-7:-4;f=true}else if(n==m.DOWN){c=a===0?7:4;f=true}else if(n==m.SPACEBAR){c=0;f=true}else if(n==m.HOME||n==m.END){h=n==m.HOME?"first":"last";p=r[h](l);l=new I(p.getFullYear(),p.getMonth(),p.getDate(),l.getHours(),l.getMinutes(),l.getSeconds(),l.getMilliseconds());l.setFullYear(p.getFullYear());f=true}if(e.ctrlKey||e.metaKey){if(n==m.RIGHT&&!d||n==m.LEFT&&d){t.navigateToFuture();f=true}else if(n==m.LEFT&&!d||n==m.RIGHT&&d){t.navigateToPast();f=true}else if(n==m.UP){t.navigateUp();f=true}else if(n==m.DOWN){t._click(b(t._cell[0].firstChild));f=true}else if((n==m.ENTER||n==m.SPACEBAR)&&t._isMultipleSelection()){t._keyboardToggleSelection(e);var v=H(b(t._cell[0]).find("a"));t._class(y,v)}}else if(e.shiftKey){if(c!==w||h){if(!h){r.setDate(l,c)}if(!B(l,o,s)){l=z(l,i.min,i.max)}if(u(l)){l=t._nextNavigatable(l,c)}o=L(o.getFullYear(),o.getMonth(),o.getDate());if(t._isMultipleSelection()){t._keyboardRangeSelection(e,l)}else{t._focus(l)}}}else{if(n==m.ENTER||n==m.SPACEBAR){if(r.name=="month"&&t._isMultipleSelection()){t.value(H(b(t._cell.find("a"))));t.selectable._lastActive=b(t._cell[0]);t.trigger(g)}else{t._click(b(t._cell[0].firstChild))}f=true}else if(n==m.PAGEUP){f=true;t.navigateToPast()}else if(n==m.PAGEDOWN){f=true;t.navigateToFuture()}if(c||h){if(!h){r.setDate(l,c)}o=L(o.getFullYear(),o.getMonth(),o.getDate());if(!B(l,o,s)){l=z(l,i.min,i.max)}if(!t._isNavigatable(l,c)){l=t._nextNavigatable(l,c)}if(t._isMultipleSelection()){if(!t._dateInView(l)){t.navigate(l)}else{t._current=l;t._class(y,l)}}else{t._focus(l)}}}if(f){e.preventDefault()}return t._current},_keyboardRangeSelection:function(e,t){var i=this,n,r;if(!i._dateInView(t)){i._selectDates=[];n=i.selectable._lastActive?H(i.selectable._lastActive.find("a")):t;r=ye(n,new Date(+t));xe(i._selectDates,r,n,i.options.disableDates);i.navigate(t);i._current=t;i.selectable._lastActive=i.selectable._lastActive||i._cellByDate(i._view.toDateString(t),v);i.trigger(g);return}i.selectable.options.filter=i.wrapper.find("table").length>1&&+t>+i._current?"table.k-month:eq(1) "+v:"table.k-month:eq(0) "+v;i._class(y,t);i._current=t;i._rangeSelection(i._cellByDate(i._view.toDateString(t),v),t);i.trigger(g);i.selectable.options.filter="table.k-month:eq(0) "+v},_keyboardToggleSelection:function(e){var t=this;e.currentTarget=t._cell[0];t.selectable._lastActive=b(t._cell[0]);if(b(t._cell[0]).hasClass(ie)){t.selectable._unselect(b(t._cell[0]));t.selectable.trigger(g,{event:e})}else{t.selectable.value(b(t._cell[0]),{event:e})}},_nextNavigatable:function(e,t){var i=this,n=true,r=i._view,a=i.options.min,o=i.options.max,s=i.options.disableDates,l=new Date(e.getTime());r.setDate(l,-t);while(n){r.setDate(e,t);if(!B(e,a,o)){e=l;break}n=s(e)}return e},_animate:function(e){var t=this;var i=e.from;var n=e.to;var r=t._active;var a=t.element.children(".k-calendar-view");if(!i){a.append(n);t._bindTable(n)}else if(i.parent().data("animating")){i.off(d);i.parent().kendoStop(true,true).remove();i.remove();a.append(n);t._focusView(r)}else if(!i.is(":visible")||t.options.animation===false||e.replace){n.insertAfter(i);i.off(d).remove();t._focusView(r)}else{t[e.vertical?"_vertical":"_horizontal"](i,n,e.future)}},_horizontal:function(e,t,i){var n=this,r=n._active,a=n.options.animation.horizontal,o=a.effects,s=$(e);if(o&&o.indexOf(c)!=-1){e.add(t).css({width:s});e.wrap("<div/>");n._focusView(r,e);e.parent().css({position:"relative",width:s*2,float:Q,"margin-left":i?0:-s});t[i?"insertAfter":"insertBefore"](e);he(a,{effects:c+":"+(i?"right":Q),complete:function(){e.off(d).remove();n._oldTable=null;t.unwrap();n._focusView(r)}});e.parent().kendoStop(true,true).kendoAnimate(a)}},_vertical:function(e,t){var i=this,n=i.options.animation.vertical,r=n.effects,a=i._active,o,s;if(r&&r.indexOf("zoom")!=-1){t.insertBefore(e);e.css({position:"absolute",width:t.width()});if(W){o=i._cellByDate(i._view.toDateString(i._current));s=o.position();s=s.left+parseInt(o.width()/2,10)+"px"+" "+(s.top+parseInt(o.height()/2,10)+"px");t.css(W,s)}e.kendoStop(true,true).kendoAnimate({effects:"fadeOut",duration:600,complete:function(){e.off(d).remove();i._oldTable=null;i._focusView(a)}});t.kendoStop(true,true).kendoAnimate(n)}},_cellByDate:function(e,t){return this._table.find(t?t:"td:not(."+E+")").filter(function(){return b(this.firstChild).attr(T.attr(h))===e})},_class:function(e,t){var i=this,n=i._cellID,r=i._cell,a=i._view.toDateString(t),o;if(r&&r.length){r[0].removeAttribute(ce);r[0].removeAttribute(fe);r[0].removeAttribute(u)}if(t&&i._view.name=="month"){o=i.options.disableDates(t)}i._cellsBySelector(i._isMultipleSelection()?p:"td:not(."+E+")").removeClass(e);r=i._cellByDate(a,i.options.selectable=="multiple"?p:"td:not(."+E+")").attr(ce,true);if(e===y&&!i._active&&i.options.focusOnNav!==false||o){e=""}r.addClass(e);if(r[0]){i._cell=r}if(n){r.attr(u,n);i._table[0].removeAttribute("aria-activedescendant");i._table.attr("aria-activedescendant",n)}},_bindTable:function(e){e.on(ae,this._addClassProxy).on(ne,this._removeClassProxy)},_click:function(e){var t=this,i=t.options,n=new Date(+t._current),r=H(e);D(r,0);if(t._view.name=="month"&&t.options.disableDates(r)){r=t._value}t._view.setDate(n,r);t.navigateDown(z(n,i.min,i.max))},_focus:function(e){var t=this,i=t._view;if(i.compare(e,t._current)!==0){t.navigate(e)}else{t._current=e;t._class(y,e)}},_focusView:function(e,t){if(e){this.focus(t)}},_viewWrapper:function(){var e=this;var t=e.element;var i=t.children(".k-calendar-view");if(!i[0]){i=b("<div class='k-calendar-view' />").insertAfter(t.find(pe))}},_footer:function(e){var t=this,i=P(),n=t.element,r=n.find(".k-footer");if(!e){t._toggle(false);r.hide();return}if(!r[0]){r=b('<div class="k-footer"><a href="#" class="k-link k-nav-today"></a></div>').appendTo(n)}t._today=r.show().find(".k-link").html(e(i)).attr("title",T.toString(i,"D",t.options.culture));t._toggle()},_header:function(){var e=this,t=e.element,i=e.options.linksSelector;if(!t.find(pe)[0]){t.html(T.template(e.options.header.template)(b.extend(true,{},e.options,{actionAttr:T.attr("action")})))}t.find(i).on(se+" "+le+" "+ae+" "+ne,Ce).on(s+" touchend"+d,function(){return false});e._title=t.find("["+T.attr("action")+'="nav-up"]').on(s+" touchend"+d,function(){e._active=e.options.focusOnNav!==false;e.navigateUp()});e[x]=t.find("["+T.attr("action")+'="prev"]').on(s+" touchend"+d,function(){e._active=e.options.focusOnNav!==false;e.navigateToPast()});e[C]=t.find("["+T.attr("action")+'="next"]').on(s+" touchend"+d,function(){e._active=e.options.focusOnNav!==false;e.navigateToFuture()});t.find("["+T.attr("action")+'="today"]').on(s+" touchend"+d,_(e._todayClick,e))},_navigate:function(e,t){var i=this,n=i._index+1,r=new I(+i._current);if(i._isMultipleSelection()){var a=i._table.find("td:not(.k-other-month):not(.k-out-of-range)").has(".k-link").first();r=H(a.find("a"));i._current=new Date(+r)}e=i[e];if(!e.hasClass(A)){if(n>3){r.setFullYear(r.getFullYear()+100*t)}else{R.views[n].setDate(r,t)}i.navigate(r)}},_option:function(e,t){var i=this,n=i.options,r=i._value||i._current,a;if(t===w){return n[e]}t=o(t,n.format,n.culture);if(!t){return}n[e]=new I(+t);if(e===Y){a=t>r}else{a=r>t}if(a||Me(r,t)){if(a){i._value=null}i._changeView=true}if(!i._changeView){i._changeView=!!(n.month.content||n.month.empty)}i.navigate(i._value);i._toggle()},_toggle:function(e){var t=this,i=t.options,n=t.options.disableDates(P()),r=t._today,a=t._todayClass();if(e===w){e=B(P(),i.min,i.max)}if(r){r.off(s);if(e&&!n){r.addClass(a).removeClass(A).on(s,_(t._todayClick,t))}else{r.removeClass(a).addClass(A).on(s,Se)}}},_todayClass:function(){return this.options.componentType==="modern"?"k-today":ee},_todayClick:function(e){var t=this,i=M[t.options.depth],n=t.options.disableDates,r=P();e.preventDefault();if(n(r)){return}if(t._view.compare(t._current,r)===0&&t._index==i){t._changeView=false}if(t._isMultipleSelection()){t._selectDates=[r];t.selectable._lastActive=null}t._value=r;t.navigate(r,i);t.trigger(g)},_templates:function(){var e=this,t=e.options,i=t.footer,n=t.month,r=n.content,a=n.weekNumber,o=n.empty,s='#= kendo.toString(data,"D","'+t.culture+'") #';e.month={content:l('<td#=data.cssClass# role="gridcell"><a tabindex="-1" class="k-link#=data.linkClass#" href="#=data.url#" '+T.attr(h)+'="#=data.dateString#" title="#=data.title#">'+(r||"#=data.value#")+"</a></td>",{useWithBlock:!!r}),empty:l('<td role="gridcell">'+(o||"&nbsp;")+"</td>",{useWithBlock:!!o}),weekNumber:l('<td class="k-alt">'+(a||"#= data.weekNumber #")+"</td>",{useWithBlock:!!a})};if(i&&i!==true){s=i}e.footer=i!==false?l(s,{useWithBlock:false}):null}});t.plugin(ge);var R={firstDayOfMonth:function(e){return L(e.getFullYear(),e.getMonth(),1)},firstVisibleDay:function(e,t){t=t||T.culture().calendar;var i=t.firstDay,n=new I(e.getFullYear(),e.getMonth(),1,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());n.setFullYear(e.getFullYear());while(n.getDay()!=i){R.setTime(n,-1*ue)}return n},setTime:function(e,t){var i=e.getTimezoneOffset(),n=new I(e.getTime()+t),r=n.getTimezoneOffset()-i;e.setTime(n.getTime()+r*de)},views:[{name:f,title:function(e,t,i,n){return Te(n).months.names[e.getMonth()]+" "+e.getFullYear()},content:function(e){var t=this,i=0,n=e.min,r=e.max,a=e.date,s=e.dates,l=e.format,d=e.culture,u=e.url,o=e.showHeader,c=e.otherMonth,f=e.isWeekColumnVisible,h=u&&s[0],p=Te(d),v=p.firstDay,m=p.days,g=we(m.names,v),_=we(m.namesShort,v),b=R.firstVisibleDay(a,p),w=t.first(a),k=t.last(a),y=t.toDateString,x=P(),C=e.contentClasses,S='<table tabindex="0" role="grid" class="'+C+'" cellspacing="0" data-start="'+y(b)+'">';if(o){S+='<caption class="k-month-header">'+this.title(a,n,r,d)+'</caption><thead><tr role="row">'}else{S+='<thead><tr role="row">'}if(f){S+='<th scope="col" class="k-alt">'+e.messages.weekColumnHeader+"</th>"}for(;i<7;i++){S+='<th scope="col" title="'+g[i]+'">'+_[i]+"</th>"}D(x,0);x=+x;return F({cells:42,perRow:7,html:S+='</tr></thead><tbody><tr role="row">',start:b,isWeekColumnVisible:f,weekNumber:e.weekNumber,min:L(n.getFullYear(),n.getMonth(),n.getDate()),max:L(r.getFullYear(),r.getMonth(),r.getDate()),otherMonth:c,content:e.content,lastDayOfMonth:k,empty:e.empty,setter:t.setDate,disableDates:e.disableDates,build:function(e,t,i){var n=[],r=e.getDay(),a="",o="#";if(e<w||e>k){n.push(E)}if(i(e)){n.push(A)}if(+e===x){n.push("k-today")}if(r===0||r===6){n.push("k-weekend")}if(h&&Ee(+e,s)){o=u.replace("{0}",T.toString(e,l,d));a=" k-action-link"}return{date:e,dates:s,ns:T.ns,title:T.toString(e,"D",d),value:e.getDate(),dateString:y(e),cssClass:n[0]?' class="'+n.join(" ")+'"':"",linkClass:a,url:o}},weekNumberBuild:function(e){return{weekNumber:N(e,T.culture().calendar.firstDay),currentDate:e}}})},first:function(e){return R.firstDayOfMonth(e)},last:function(e){var t=L(e.getFullYear(),e.getMonth()+1,0),i=R.firstDayOfMonth(e),n=Math.abs(t.getTimezoneOffset()-i.getTimezoneOffset());if(n){t.setHours(i.getHours()+n/60)}return t},compare:function(e,t){var i,n=e.getMonth(),r=e.getFullYear(),a=t.getMonth(),o=t.getFullYear();if(r>o){i=1}else if(r<o){i=-1}else{i=n==a?0:n>a?1:-1}return i},setDate:function(e,t){var i=e.getHours();if(t instanceof I){e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate())}else{R.setTime(e,t*ue)}D(e,i)},toDateString:function(e){return e.getFullYear()+"/"+e.getMonth()+"/"+e.getDate()}},{name:"year",title:function(e){return e.getFullYear()},content:function(e){var t=Te(e.culture).months.namesAbbr,i=this.toDateString,n=e.min,r=e.max,a="";if(e.showHeader){a+='<table tabindex="0" role="grid" class="k-content k-meta-view" cellspacing="0"><caption class="k-meta-header">';a+=this.title(e.date);a+='</caption><tbody><tr role="row">'}return F({min:L(n.getFullYear(),n.getMonth(),1),max:L(r.getFullYear(),r.getMonth(),1),start:L(e.date.getFullYear(),0,1),html:a,setter:this.setDate,build:function(e){return{value:t[e.getMonth()],ns:T.ns,dateString:i(e),cssClass:""}}})},first:function(e){return L(e.getFullYear(),0,e.getDate())},last:function(e){return L(e.getFullYear(),11,e.getDate())},compare:function(e,t){return be(e,t)},setDate:function(e,t){var i,n=e.getHours();if(t instanceof I){i=t.getMonth();e.setFullYear(t.getFullYear(),i,e.getDate());if(i!==e.getMonth()){e.setDate(0)}}else{i=e.getMonth()+t;e.setMonth(i);if(i>11){i-=12}if(i>0&&e.getMonth()!=i){e.setDate(0)}}D(e,n)},toDateString:function(e){return e.getFullYear()+"/"+e.getMonth()+"/1"}},{name:"decade",title:function(e,t,i){return _e(e,t,i,10)},content:function(e){var t=e.date.getFullYear(),i=this.toDateString,n="";if(e.showHeader){n+='<table tabindex="0" role="grid" class="k-content k-meta-view" cellspacing="0"><caption class="k-meta-header">';n+=this.title(e.date,e.min,e.max);n+='</caption><tbody><tr role="row">'}return F({start:L(t-t%10-1,0,1),min:L(e.min.getFullYear(),0,1),max:L(e.max.getFullYear(),0,1),otherMonth:e.otherMonth,html:n,setter:this.setDate,build:function(e,t){return{value:e.getFullYear(),ns:T.ns,dateString:i(e),cssClass:t===0||t==11?J:""}}})},first:function(e){var t=e.getFullYear();return L(t-t%10,e.getMonth(),e.getDate())},last:function(e){var t=e.getFullYear();return L(t-t%10+9,e.getMonth(),e.getDate())},compare:function(e,t){return be(e,t,10)},setDate:function(e,t){ke(e,t,1)},toDateString:function(e){return e.getFullYear()+"/0/1"}},{name:X,title:function(e,t,i){return _e(e,t,i,100)},content:function(e){var t=e.date.getFullYear(),r=e.min.getFullYear(),a=e.max.getFullYear(),o=this.toDateString,i=r,n=a,s="";i=i-i%10;n=n-n%10;if(n-i<10){n=i+9}if(e.showHeader){s+='<table tabindex="0" role="grid" class="k-content k-meta-view" cellspacing="0"><caption class="k-meta-header">';s+=this.title(e.date,e.min,e.max);s+='</caption><tbody><tr role="row">'}return F({start:L(t-t%100-10,0,1),min:L(i,0,1),max:L(n,0,1),otherMonth:e.otherMonth,html:s,setter:this.setDate,build:function(e,t){var i=e.getFullYear(),n=i+9;if(i<r){i=r}if(n>a){n=a}return{ns:T.ns,value:i+" - "+n,dateString:o(e),cssClass:t===0||t==11?J:""}}})},first:function(e){var t=e.getFullYear();return L(t-t%100,e.getMonth(),e.getDate())},last:function(e){var t=e.getFullYear();return L(t-t%100+99,e.getMonth(),e.getDate())},compare:function(e,t){return be(e,t,100)},setDate:function(e,t){ke(e,t,10)},toDateString:function(e){var t=e.getFullYear();return t-t%10+"/0/1"}}]};function _e(e,t,i,n){var r=e.getFullYear(),a=t.getFullYear(),o=i.getFullYear(),s;r=r-r%n;s=r+(n-1);if(r<a){r=a}if(s>o){s=o}return r+"-"+s}function F(e){var t=0,i,n=e.min,r=e.max,a=e.start,o=e.setter,s=e.build,l=e.weekNumberBuild,d=e.cells||12,u=e.isWeekColumnVisible,c=e.perRow||4,f=e.otherMonth,h=e.lastDayOfMonth,p=e.weekNumber||q,v=e.content||U,m=e.empty||j,g=e.otherMonthCellTemplate||G,_=e.html||'<table tabindex="0" role="grid" class="k-content k-meta-view" cellspacing="0"><tbody><tr role="row">';if(u){_+=p(l(a))}for(;t<d;t++){if(t>0&&t%c===0){_+='</tr><tr role="row">';if(u){_+=f||+a<=+h?p(l(a)):p({weekNumber:"&nbsp;"})}}a=L(a.getFullYear(),a.getMonth(),a.getDate());D(a,0);i=s(a,t,e.disableDates);_+=i.cssClass.indexOf(E)!==-1&&!f?g(i):B(a,n,r)?v(i):m(i);o(a,1)}return _+"</tr></tbody></table>"}function be(e,t,i){var n=e.getFullYear(),r=t.getFullYear(),a=r,o=0;if(i){r=r-r%i;a=r-r%i+i-1}if(n>a){o=1}else if(n<r){o=-1}return o}function P(){var e=new I;return new I(e.getFullYear(),e.getMonth(),e.getDate())}function z(e,t,i){var n=P();if(e){n=new I(+e)}if(t>n){n=new I(+t)}else if(i<n){n=new I(+i)}return n}function B(e,t,i){return+e>=+t&&+e<=+i}function we(e,t){return e.slice(t).concat(e.slice(0,t))}function ke(e,t,i){t=t instanceof I?t.getFullYear():e.getFullYear()+i*t;e.setFullYear(t)}function ye(e,t){if(+t<+e){var i=+e;R.views[0].setDate(e,t);R.views[0].setDate(t,new Date(i))}var n=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate());var r=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.ceil((+r-+n)/T.date.MS_PER_DAY)}function xe(e,t,i,n){for(var r=0;r<=t;r++){var a=new Date(i.getTime());a=new Date(a.setDate(a.getDate()+r));if(!n(a)){e.push(a)}}}function Ce(e){var t=b(this).hasClass("k-state-disabled");if(!t){b(this).toggleClass(k,oe.indexOf(e.type)>-1||e.type==re)}}function Se(e){e.preventDefault()}function L(e,t,i){var n=new I(e,t,i);n.setFullYear(e,t,i);return n}function Te(e){return V(e).calendars.standard}function De(e){var t=M[e.start],i=M[e.depth],n=V(e.culture);e.format=O(e.format||n.calendars.standard.patterns.d);if(isNaN(t)){t=0;e.start=f}if(i===w||i>t){e.depth=f}if(e.dates===null){e.dates=[]}}function Ae(e,t){e.addClass("k-"+t)}function Ee(e,t){for(var i=0,n=t.length;i<n;i++){if(e===+t[i]){return true}}return false}function Ie(e,t){if(e){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}return false}function Me(e,t){if(e){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}return false}function Re(e){if(T.isFunction(e)){return e}if(b.isArray(e)){return Pe(e)}return b.noop}function Fe(e){var t=[];for(var i=0;i<e.length;i++){t.push(e[i].setHours(0,0,0,0))}return t}function Pe(e){var t,i,n=[],r=["su","mo","tu","we","th","fr","sa"],a="if (found) {"+" return true "+"} else {"+"return false"+"}";if(e[0]instanceof I){n=Fe(e);t="var clonedDate = new Date(date); var found = date && window.kendo.jQuery.inArray(clonedDate.setHours(0, 0, 0, 0),["+n+"]) > -1;"+a}else{for(var o=0;o<e.length;o++){var s=e[o].slice(0,2).toLowerCase();var l=b.inArray(s,r);if(l>-1){n.push(l)}}t="var clonedDate = new Date(date); var found = date && window.kendo.jQuery.inArray(clonedDate.getDay(),["+n+"]) > -1;"+a}i=new Function("date",t);return i}function ze(e,t){if(e instanceof Date&&t instanceof Date){e=e.getTime();t=t.getTime()}return e===t}function H(e){var t=b(e).attr(T.attr(h)).split("/");t=L(t[0],t[1],t[2]);return t}R.isEqualDatePart=Ie;R.isEqualDate=ze;R.restrictValue=z;R.isInRange=B;R.addClassToViewContainer=Ae;R.normalize=De;R.viewsEnum=M;R.disabled=Re;R.toDateObject=H;R.getToday=P;R.createDate=L;T.calendar=R})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.dateinput",["kendo.core"],e)})(function(){var e={id:"dateinput",name:"DateInput",category:"web",description:"The DateInput widget allows to edit date by typing.",depends:["core"]};(function(a,D){var e=window;var A=e.kendo;var u=A.caret;var t=A.ui;var o=t.Widget;var d=A.keys;var s=".kendoDateInput";var i=a.proxy;var n={}.toString;var r=(A.support.propertyChangeEvent?"propertychange.kendoDateInput input":"input")+s;var l="k-state-disabled";var c="k-state-default";var f="k-state-invalid";var h="disabled";var p="readonly";var v="change";var m="dMyHhmftsz";var g=o.extend({init:function(t,e){var i=this;o.fn.init.call(i,t,e);t=i.element;e=i.options;e.format=A._extractFormat(e.format||A.getCulture(e.culture).calendars.standard.patterns.d);e.min=A.parseDate(t.attr("min"))||A.parseDate(e.min);e.max=A.parseDate(t.attr("max"))||A.parseDate(e.max);var n=(t.parent().attr("class")||"").indexOf("k-picker-wrap")>=0;if(n){i.wrapper=t.parent()}else{i.wrapper=t.wrap("<span class='k-widget k-widget-2021 k-dateinput'></span>").parent();i.wrapper.addClass(t[0].className).removeClass("input-validation-error");i.wrapper[0].style.cssText=t[0].style.cssText;t.css({width:"100%",height:t[0].style.height})}i._inputWrapper=a(i.wrapper[0]);a("<span class='k-icon k-i-warning'></span>").insertAfter(t);i._form();i.element.addClass(n?" ":"k-textbox").attr("autocomplete","off").on("focusout"+s,function(){i._change()});try{t[0].setAttribute("type","text")}catch(e){t[0].type="text"}var r=t.is("[disabled]")||a(i.element).parents("fieldset").is(":disabled");if(r){i.enable(false)}else{i.readonly(t.is("[readonly]"))}i.value(i.options.value||t.val());A.notify(i)},options:{name:"DateInput",culture:"",value:"",format:"",min:new Date(1900,0,1),max:new Date(2099,11,31),messages:{year:"year",month:"month",day:"day",weekday:"day of the week",hour:"hours",minute:"minutes",second:"seconds",dayperiod:"AM/PM"}},events:[v],min:function(e){if(e!==D){this.options.min=e}else{return this.options.min}},max:function(e){if(e!==D){this.options.max=e}else{return this.options.max}},setOptions:function(e){var t=this;o.fn.setOptions.call(t,e);this._unbindInput();this._bindInput();this._updateElementValue()},destroy:function(){var e=this;e.element.off(s);if(e._formElement){e._formElement.off("reset",e._resetHandler)}o.fn.destroy.call(e)},value:function(e){if(e===D){return this._dateTime.getDateObject()}if(e===null){e=""}if(n.call(e)!=="[object Date]"){e=A.parseDate(e,this.options.format,this.options.culture)}if(e&&!e.getTime()){e=null}this._dateTime=new _(e,this.options.format,this.options.culture,this.options.messages);this._updateElementValue();this._oldValue=e},_updateElementValue:function(){var e=this._dateTime.toPair(this.options.format,this.options.culture,this.options.messages);this.element.val(e[0]);this._oldText=e[0];this._format=e[1]},readonly:function(e){this._editable({readonly:e===D?true:e,disable:false})},enable:function(e){this._editable({readonly:false,disable:!(e=e===D?true:e)})},_bindInput:function(){var e=this;e.element.on("focusout"+s,function(){e._change()}).on("paste"+s,i(e._paste,e)).on("keydown"+s,i(e._keydown,e)).on(r,i(e._input,e)).on("mouseup"+s,i(e._mouseUp,e)).on("DOMMouseScroll"+s+" mousewheel"+s,i(e._scroll,e))},_unbindInput:function(){this.element.off("keydown"+s).off("paste"+s).off("focusout"+s).off(r).off("mouseup"+s).off("DOMMouseScroll"+s+" mousewheel"+s)},_editable:function(e){var t=this;var i=t.element;var n=e.disable;var r=e.readonly;var a=t.wrapper;t._unbindInput();if(!r&&!n){a.addClass(c).removeClass(l);if(i&&i.length){i[0].removeAttribute(h);i[0].removeAttribute(p)}t._bindInput()}else{if(n){a.addClass(l).removeClass(c);i.attr(h,n);if(i&&i.length){i[0].removeAttribute(p)}}if(r){i.attr(p,r)}}},_change:function(){var e=this;var t=e._oldValue;var i=e.value();if(i&&e.min()&&i<e.min()){e.value(e.min());i=e.value()}if(i&&e.max()&&i>e.max()){e.value(e.max());i=e.value()}if(t&&i&&i.getTime()!==t.getTime()||t&&!i||!t&&i){e._oldValue=i;e.trigger(v);e.element.trigger(v)}},_input:function(){var e=this;var t=e.element[0];var i=false;if(A._activeElement()!==t){return}var n=b(this._oldText,this._format,this.element[0].value,u(this.element[0])[0]);var r=n.length===1&&n[0][1]===" ";if(!r){for(var a=0;a<n.length;a++){var o=this._dateTime.parsePart(n[a][0],n[a][1]);i=i||!o}}this._updateElementValue();if(n.length&&n[0][0]!==" "){this._selectSegment(n[0][0]);if(!r){var s=n[0][0];setTimeout(function(){e._selectSegment(s)})}}if(r){var l={keyCode:39,preventDefault:function(){}};this._keydown(l)}if(i){clearTimeout(e._blinkInvalidTimeout);var d=f;e.wrapper.addClass(f);e._blinkInvalidTimeout=setTimeout(function(){e.wrapper.removeClass(d)},100)}},_mouseUp:function(){var e=u(this.element[0]);if(e[0]===e[1]){this._selectNearestSegment()}},_scroll:function(e){if(A._activeElement()!==this.element[0]||this.element.is("[readonly]")){return}e=window.event||e;var t={keyCode:37,preventDefault:function(){}};if(e.shiftKey){t.keyCode=(e.wheelDelta||-e.detail)>0?37:39}else{t.keyCode=(e.wheelDelta||-e.detail)>0?38:40}this._keydown(t);e.returnValue=false;if(e.preventDefault){e.preventDefault()}if(e.stopPropagation){e.stopPropagation()}},_form:function(){var e=this;var t=e.element;var i=t.attr("form");var n=i?a("#"+i):t.closest("form");var r=t[0].value;if(!r&&e.options.value){r=e.options.value}if(n[0]){e._resetHandler=function(){setTimeout(function(){e.value(r)})};e._formElement=n.on("reset",e._resetHandler)}},_paste:function(e){e.preventDefault()},_keydown:function(e){var t=e.keyCode;var i;if(t==37||t==39){e.preventDefault();i=u(this.element[0]);if(i[0]!=i[1]){this._selectNearestSegment()}var n=t==37?-1:1;var r=n==-1?u(this.element[0])[0]-1:u(this.element[0])[1]+1;while(r>=0&&r<this._format.length){if(m.indexOf(this._format[r])>=0){this._selectSegment(this._format[r]);break}r+=n}}if(t==38||t==40){e.preventDefault();i=u(this.element[0]);var a=this._format[i[0]];if(m.indexOf(a)>=0){var o=1;if(a=="m"){o=this.options.interval||1}this._dateTime.modifyPart(a,t==38?o*1:o*-1);this._updateElementValue();this._selectSegment(a);this.element.trigger(v)}}if(A.support.browser.msie&&A.support.browser.version<10){var s=e.keyCode?e.keyCode:e.which;if(s===8||s===46){var l=this;setTimeout(function(){l._input()},0)}}if(t===d.ENTER){this._change()}},_selectNearestSegment:function(){var e=u(this.element[0]);var t=e[0];for(var i=t,n=t-1;i<this._format.length||n>=0;i++,n--){if(i<this._format.length&&m.indexOf(this._format[i])!==-1){this._selectSegment(this._format[i]);return}if(n>=0&&m.indexOf(this._format[n])!==-1){this._selectSegment(this._format[n]);return}}},_selectSegment:function(e){var t=-1,i=0;for(var n=0;n<this._format.length;n++){if(this._format[n]===e){i=n+1;if(t===-1){t=n}}}if(t<0){t=0}u(this.element,t,i)}});t.plugin(g);var _=function(e,t,i,n){var f=null;var h=true,p=true,v=true,m=true,g=true,_=true,o=true;var b="";var w="";var s={};var r=["","0","00","000","0000"];function l(e,t,i){e=e+"";t=t||2;i=t-e.length;if(i){return r[t].substring(0,i)+e}return e}var a=/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|"[^"]*"|'[^']*'/g;var d=null,k=null,u=null,c=false;var y=function(e){var t,i;var n;switch(e){case"d":n=v?f.getDate():s.day;break;case"dd":n=v?l(f.getDate()):s.day;break;case"ddd":n=v&&p&&h?u.namesAbbr[f.getDay()]:s.weekday;break;case"dddd":n=v&&p&&h?u.names[f.getDay()]:s.weekday;break;case"M":n=p?f.getMonth()+1:s.month;break;case"MM":n=p?l(f.getMonth()+1):s.month;break;case"MMM":n=p?d.namesAbbr[f.getMonth()]:s.month;break;case"MMMM":n=p?d.names[f.getMonth()]:s.month;break;case"yy":n=h?l(f.getFullYear()%100):s.year;break;case"yyyy":n=h?l(f.getFullYear(),4):s.year;break;case"h":n=m?f.getHours()%12||12:s.hour;break;case"hh":n=m?l(f.getHours()%12||12):s.hour;break;case"H":n=m?f.getHours():s.hour;break;case"HH":n=m?l(f.getHours()):s.hour;break;case"m":n=g?f.getMinutes():s.minute;break;case"mm":n=g?l(f.getMinutes()):s.minute;break;case"s":n=_?f.getSeconds():s.second;break;case"ss":n=_?l(f.getSeconds()):s.second;break;case"f":n=o?Math.floor(f.getMilliseconds()/100):o;break;case"ff":n=f.getMilliseconds();if(n>99){n=Math.floor(n/10)}n=o?l(n):e;break;case"fff":n=o?l(f.getMilliseconds(),3):e;break;case"tt":n=m?f.getHours()<12?k.AM[0]:k.PM[0]:s.dayperiod;break;case"zzz":t=f.getTimezoneOffset();i=t<0;n=Math.abs(t/60).toString().split(".")[0];t=Math.abs(t)-n*60;n=(i?"+":"-")+l(n);n+=":"+l(t);break;case"z":case"zz":n=f.getTimezoneOffset()/60;i=n<0;n=Math.abs(n).toString().split(".")[0];n=(i?"+":"-")+(e==="zz"?l(n):n);break}n=n!==D?n:e.slice(1,e.length-1);if(c){n=""+n;var r="";if(e=="ddd"){e="EEE"}if(e=="dddd"){e="EEEE"}for(var a=0;a<n.length;a++){r+=e[0]}return r}else{return n}};function x(e){c=e;return y}function C(e,t){switch(e){case"y":h=t;break;case"M":p=t;if(!t){f.setMonth(0);b=""}break;case"d":v=t;break;case"H":case"h":m=t;if(!t){w=""}break;case"m":g=t;break;case"s":_=t;break;default:return}}this.setValue=function(e){v=e};this.getValue=function(){return v};this.modifyPart=function(e,t){var i=new Date(f&&f.getTime?f.getTime():f);switch(e){case"y":i.setFullYear(i.getFullYear()+t);break;case"M":var n=i.getMonth()+t;i.setMonth(n);if(i.getMonth()%12!==(n+12)%12){i.setDate(1);i.setMonth(n)}break;case"d":case"E":i.setDate(i.getDate()+t);break;case"H":case"h":i.setHours(i.getHours()+t);break;case"m":i.setMinutes(i.getMinutes()+t);break;case"s":i.setSeconds(i.getSeconds()+t);break;case"t":i.setHours((i.getHours()+12)%24);break;default:break}if(i.getFullYear()>0){C(e,true);f=i}};this.parsePart=function(e,t){if(!t){C(e,false);return true}var i=new Date(f&&f.getTime?f.getTime():f);var n=new Date(i.getFullYear(),i.getMonth()+1,0).getDate();var r;switch(e){case"d":var a=(v?i.getDate()*10:0)+parseInt(t,10);if(isNaN(a)){return}while(a>n){a=parseInt(a.toString().slice(1),10)}if(a<1){v=false}else{i.setDate(a);if(i.getMonth()!==f.getMonth()){return}v=true}break;case"M":var o=(p?(i.getMonth()+1)*10:0)+parseInt(t,10);if(!isNaN(o)){while(o>12){o=parseInt(o.toString().slice(1),10)}if(o<1){p=false}else{i.setMonth(o-1);if(i.getMonth()!==o-1){i.setDate(1);i.setMonth(o-1)}p=true}}else{var s=k.months.names;b+=t.toLowerCase();while(b.length>0){for(var l=0;l<s.length;l++){if(s[l].toLowerCase().indexOf(b)===0){i.setMonth(l);p=true;f=i;return true}}b=b.substring(1,b.length)}return false}break;case"y":var d=(h?i.getFullYear()*10:0)+parseInt(t,10);if(isNaN(d)){return}while(d>9999){d=parseInt(d.toString().slice(1),10)}if(d<1){h=false}else{i.setFullYear(d);h=true}break;case"h":r=(m?(i.getHours()%12||12)*10:0)+parseInt(t,10);if(isNaN(r)){return}while(r>12){r=parseInt(r.toString().slice(1),10)}i.setHours(Math.floor(i.getHours()/12)*12+r%12);m=true;break;case"H":r=(m?i.getHours()*10:0)+parseInt(t,10);if(isNaN(r)){return}while(r>23){r=parseInt(r.toString().slice(1),10)}i.setHours(r);m=true;break;case"m":var u=(g?i.getMinutes()*10:0)+parseInt(t,10);if(isNaN(u)){return}while(u>59){u=parseInt(u.toString().slice(1),10)}i.setMinutes(u);g=true;break;case"s":var c=(_?i.getSeconds()*10:0)+parseInt(t,10);if(isNaN(c)){return}while(c>59){c=parseInt(c.toString().slice(1),10)}i.setSeconds(c);_=true;break;case"t":if(m){w+=t.toLowerCase();while(w.length>0){if(k.AM[0].toLowerCase().indexOf(w)===0&&i.getHours()>=12||k.PM[0].toLowerCase().indexOf(w)===0&&i.getHours()<12){i.setHours((i.getHours()+12)%24);f=i;return true}w=w.substring(1,w.length)}return false}break;default:break}f=i;return true};this.toPair=function(e,t,i){if(!e){return["",""]}t=A.getCulture(t);k=t.calendars.standard;e=k.patterns[e]||e;u=k.days;d=k.months;s=i;return[e.replace(a,x(false)),e.replace(a,x(true))]};this.getDateObject=function(){return h&&p&&v&&m&&g&&_&&o?new Date(f.getTime()):null};if(!e){f=new Date;var S=this.toPair(t,i,n)[1];for(var T=0;T<S.length;T++){C(S[T],false)}}else{f=new Date(e.getTime())}};function b(e,t,i,n){var r=e[n+e.length-i.length];e=e.substring(0,n+e.length-i.length);i=i.substring(0,n);var a=[];var o;if(e===i&&n>0){a.push([t[n-1],i[n-1]]);return a}if(e.indexOf(i)===0&&(i.length===0||t[i.length-1]!==t[i.length])){var s="";for(o=i.length;o<e.length;o++){if(t[o]!==s&&m.indexOf(t[o])>=0){s=t[o];a.push([s,""])}}return a}if(i[i.length-1]===" "||i[i.length-1]===r){return[[t[n-1]," "]]}if(i.indexOf(e)===0||m.indexOf(t[n-1])===-1){var l=t[0];for(o=Math.max(0,e.length-1);o<t.length;o++){if(m.indexOf(t[o])>=0){l=t[o];break}}return[[l,i[n-1]]]}return[[t[n-1],i[n-1]]]}})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.datepicker",["kendo.calendar","kendo.popup","kendo.dateinput"],e)})(function(){var e={id:"datepicker",name:"DatePicker",category:"web",description:"The DatePicker widget allows the user to select a date from a calendar or by direct input.",depends:["calendar","popup"]};(function(d,r){var u=window.kendo,a=u.ui,o=a.Widget,c=u.parseDate,s=u.keys,i=u.support,B=u.template,L=u._activeElement,l="<div />",n="<span />",f=".kendoDatePicker",h="click"+f,H=i.mouseAndTouchPresent?u.applyEventMap("up",f.slice(1)):h,p="open",v="close",m="change",g="disabled",_="readonly",b="k-state-default",w="k-state-focused",k="k-state-selected",y="k-state-disabled",N="k-state-hover",O="mouseenter"+f+" mouseleave"+f,x="mousedown"+f,C="id",t="min",S="max",e="month",T="aria-disabled",V="aria-readonly",D="aria-expanded",A="aria-hidden",E=u.calendar,W=E.isInRange,I=E.restrictValue,U=E.isEqualDatePart,M=d.extend,R=d.proxy,F=Date;function P(e){var t=e.parseFormats,i=e.format;E.normalize(e);t=d.isArray(t)?t:[t];if(!t.length){t.push("yyyy-MM-dd")}if(d.inArray(i,t)===-1){t.splice(0,0,e.format)}e.parseFormats=t}function j(e){e.preventDefault()}var z=function(e){var t=this,i,n=document.body,r=d(l).attr(A,"true").addClass("k-calendar-container");t.options=e=e||{};i=e.id;if(!e.omitPopup){r.appendTo(n);t.popup=new a.Popup(r,M(e.popup,e,{name:"Popup",isRtl:u.support.isRtl(e.anchor)}))}else{r=e.dateDiv}if(i){i+="_dateview";r.attr(C,i);t._dateViewID=i}t.div=r;t.value(e.value)};z.prototype={_calendar:function(){var e=this;var t=e.calendar;var i=e.options;var n;if(!t){n=d(l).attr(C,u.guid()).appendTo(i.omitPopup?i.dateDiv:e.popup.element).on(x,j).on(h,"td:has(.k-link)",R(e._click,e));e.calendar=t=new a.Calendar(n,{componentType:i.componentType});e._setOptions(i);t.navigate(e._value||e._current,i.start);e.value(e._value)}},_setOptions:function(e){this.calendar.setOptions({focusOnNav:false,change:e.change,culture:e.culture,dates:e.dates,depth:e.depth,footer:e.footer,format:e.format,max:e.max,min:e.min,month:e.month,weekNumber:e.weekNumber,start:e.start,disableDates:e.disableDates})},setOptions:function(e){var t=this.options;var i=e.disableDates;if(i){e.disableDates=E.disabled(i)}this.options=M(t,e,{change:t.change,close:t.close,open:t.open});if(this.calendar){this._setOptions(this.options)}},destroy:function(){if(this.popup){this.popup.destroy()}},open:function(){var e=this;var t;e._calendar();t=e.popup._hovered;e.popup._hovered=true;e.popup.open();setTimeout(function(){e.popup._hovered=t},1)},close:function(){if(this.popup){this.popup.close()}},min:function(e){this._option(t,e)},max:function(e){this._option(S,e)},toggle:function(){var e=this;e[e.popup.visible()?v:p]()},move:function(e){var t=this,i=e.keyCode,n=t.calendar,r=e.ctrlKey&&i==s.DOWN||i==s.ENTER,a=false;if(e.altKey){if(i==s.DOWN){t.open();e.preventDefault();a=true}else if(i==s.UP){t.close();e.preventDefault();a=true}}else if(t.popup&&t.popup.visible()){if(i==s.ESC||r&&n._cell.hasClass(k)){t.close();e.preventDefault();return true}if(i!=s.SPACEBAR){t._current=n._move(e)}a=true}return a},current:function(e){this._current=e;if(this.calendar){this.calendar._focus(e)}},value:function(e){var t=this,i=t.calendar,n=t.options,r=n.disableDates;if(r&&r(e)){e=null}t._value=e;t._current=new F(+I(e,n.min,n.max));if(i){i.value(e)}},_click:function(e){if(e.currentTarget.className.indexOf(k)!==-1){this.calendar.trigger("change");this.close()}},_option:function(e,t){var i=this;var n=i.calendar;i.options[e]=t;if(n){n[e](t)}}};z.normalize=P;u.DateView=z;var G=o.extend({init:function(n,e){var r=this,t,a;o.fn.init.call(r,n,e);n=r.element;e=r.options;e.disableDates=u.calendar.disabled(e.disableDates);e.min=c(n.attr("min"))||c(e.min);e.max=c(n.attr("max"))||c(e.max);P(e);r._initialOptions=M({},e);r._wrapper();r.dateView=new z(M({},e,{id:n.attr(C),anchor:r.wrapper,change:function(){r._change(this.value());r.close()},close:function(e){if(r.trigger(v)){e.preventDefault()}else{n.attr(D,false);a.attr(A,true)}},open:function(e){var t=r.options,i;if(r.trigger(p)){e.preventDefault()}else{if(r.element.val()!==r._oldText){i=c(n.val(),t.parseFormats,t.culture);r.dateView[i?"current":"value"](i)}n.attr(D,true);a.attr(A,false);r._updateARIA(i)}}}));a=r.dateView.div;r._icon();try{n[0].setAttribute("type","text")}catch(e){n[0].type="text"}n.addClass("k-input").attr({role:"combobox","aria-expanded":false,"aria-owns":r.dateView._dateViewID,autocomplete:"off"});r._reset();r._template();t=n.is("[disabled]")||d(r.element).parents("fieldset").is(":disabled");if(t){r.enable(false)}else{r.readonly(n.is("[readonly]"))}r._createDateInput(e);r._old=r._update(e.value||r.element.val());r._oldText=n.val();u.notify(r)},events:[p,v,m],options:{name:"DatePicker",value:null,footer:"",format:"",culture:"",parseFormats:[],min:new Date(1900,0,1),max:new Date(2099,11,31),start:e,depth:e,animation:{},month:{},dates:[],disableDates:null,ARIATemplate:'Current focused date is #=kendo.toString(data.current, "D")#',dateInput:false,weekNumber:false,componentType:"classic"},setOptions:function(e){var t=this;var i=t._value;o.fn.setOptions.call(t,e);e=t.options;e.min=c(e.min);e.max=c(e.max);P(e);t.dateView.setOptions(e);t._createDateInput(e);if(!t._dateInput){t.element.val(u.toString(i,e.format,e.culture))}if(i){t._updateARIA(i)}},_editable:function(e){var t=this,i=t._dateIcon.off(f),n=t.element.off(f),r=t._inputWrapper.off(f),a=e.readonly,o=e.disable;if(!a&&!o){r.addClass(b).removeClass(y).on(O,t._toggleHover);if(n&&n.length){n[0].removeAttribute(g);n[0].removeAttribute(_)}n.attr(T,false).attr(T,false).on("keydown"+f,R(t._keydown,t)).on("focusout"+f,R(t._blur,t)).on("focus"+f,function(){t._inputWrapper.addClass(w)});i.on(H,R(t._click,t)).on(x,j)}else{r.addClass(o?y:b).removeClass(o?b:y);n.attr(g,o).attr(_,a).attr(T,o).attr(V,a)}},readonly:function(e){this._editable({readonly:e===r?true:e,disable:false});if(this._dateInput){this._dateInput._editable({readonly:e===r?true:e,disable:false})}},enable:function(e){this._editable({readonly:false,disable:!(e=e===r?true:e)});if(this._dateInput){this._dateInput._editable({readonly:false,disable:!(e=e===r?true:e)})}},destroy:function(){var e=this;o.fn.destroy.call(e);e.dateView.destroy();e.element.off(f);e._dateIcon.off(f);e._inputWrapper.off(f);if(e._form){e._form.off("reset",e._resetHandler)}},open:function(){this.dateView.open()},close:function(){this.dateView.close()},min:function(e){return this._option(t,e)},max:function(e){return this._option(S,e)},value:function(e){var t=this;if(e===r){return t._value}t._old=t._update(e);if(t._old===null&&!t._dateInput){t.element.val("")}t._oldText=t.element.val()},_toggleHover:function(e){d(e.currentTarget).toggleClass(N,e.type==="mouseenter")},_blur:function(){var e=this,t=e.element.val();e.close();if(t!==e._oldText){e._change(t);if(!t){e.dateView.current(u.calendar.getToday())}}e._inputWrapper.removeClass(w)},_click:function(e){var t=this;t.dateView.toggle();t._focusElement(e.type)},_focusElement:function(e){var t=this.element;if((!i.touch||i.mouseAndTouchPresent&&!(e||"").match(/touch/i))&&t[0]!==L()){t.trigger("focus")}},_change:function(e){var t=this,i=t.element.val(),n;e=t._update(e);n=!u.calendar.isEqualDate(t._old,e);var r=n&&!t._typing;var a=i!==t.element.val();if(r||a){t.element.trigger(m)}if(n){t._old=e;t._oldText=t.element.val();t.trigger(m)}t._typing=false},_keydown:function(e){var t=this,i=t.dateView,n=t.element.val(),r=false;if(!i.popup.visible()&&e.keyCode==s.ENTER&&n!==t._oldText){t._change(n)}else{r=i.move(e);t._updateARIA(i._current);if(!r){t._typing=true}else if(t._dateInput&&e.stopImmediatePropagation){e.stopImmediatePropagation()}}},_icon:function(){var e=this,t=e.element,i;i=t.next("span.k-select");if(!i[0]){i=d('<span unselectable="on" class="k-select" aria-label="select"><span class="k-icon k-i-calendar"></span></span>').insertAfter(t)}e._dateIcon=i.attr({role:"button","aria-controls":e.dateView._dateViewID})},_option:function(e,t){var i=this,n=i.options;if(t===r){return n[e]}t=c(t,n.parseFormats,n.culture);if(!t){return}n[e]=new F(+t);i.dateView[e](t)},_update:function(e){var t=this,i=t.options,n=i.min,r=i.max,a=t._value,o=c(e,i.parseFormats,i.culture),s=o===null&&a===null||o instanceof Date&&a instanceof Date,l;if(i.disableDates(o)){o=null;if(!t._old&&!t.element.val()){e=null}}if(+o===+a&&s){l=u.toString(o,i.format,i.culture);if(l!==e&&!(t._dateInput&&!o)){t.element.val(o===null?e:l)}return o}if(o!==null&&U(o,n)){o=I(o,n,r)}else if(!W(o,n,r)){o=null}t._value=o;t.dateView.value(o);if(t._dateInput&&o){t._dateInput.value(o||e)}else{t.element.val(u.toString(o||e,i.format,i.culture))}t._updateARIA(o);return o},_wrapper:function(){var e=this,t=e.element,i;i=t.parents(".k-datepicker");if(!i[0]){i=t.wrap(n).parent().addClass("k-picker-wrap k-state-default");i=i.wrap(n).parent()}i[0].style.cssText=t[0].style.cssText;t.css({width:"100%",height:t[0].style.height});e.wrapper=i.addClass("k-widget k-widget-2021 k-datepicker").addClass(t[0].className).removeClass("input-validation-error");e._inputWrapper=d(i[0].firstChild)},_reset:function(){var e=this,t=e.element,i=t.attr("form"),n=e.options,r=n.disableDates,a=n.parseFormats.length?n.parseFormats:null,o=e._initialOptions.value,s=i?d("#"+i):t.closest("form"),l=t[0].defaultValue;if(o&&(r&&r(o))){o=null}if((!l||!u.parseDate(l,a,n.culture))&&o){t.attr("value",u.toString(o,n.format,n.culture))}if(s[0]){e._resetHandler=function(){e.value(o||t[0].defaultValue);e.max(e._initialOptions.max);e.min(e._initialOptions.min)};e._form=s.on("reset",e._resetHandler)}},_template:function(){this._ariaTemplate=B(this.options.ARIATemplate)},_createDateInput:function(e){if(this._dateInput){this._dateInput.destroy();this._dateInput=null}if(e.dateInput){this._dateInput=new a.DateInput(this.element,{culture:e.culture,format:e.format,min:e.min,max:e.max})}},_updateARIA:function(e){var t;var i=this;var n=i.dateView.calendar;if(i.element&&i.element.length){i.element[0].removeAttribute("aria-activedescendant")}if(n){t=n._cell;t.attr("aria-label",i._ariaTemplate({current:e||n.current()}));i.element.attr("aria-activedescendant",t.attr("id"))}}});a.plugin(G)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.drawer",["kendo.userevents"],e)})(function(){var e={id:"drawer",name:"Drawer",category:"web",description:"The Kendo Drawer widget provides slide to reveal sidebar",depends:["userevents"]};(function(s,e){var o=window.kendo,t=o.ui,r=t.Widget,i="show",n="hide",a=".kendoDrawer",l="k-state-focused",d=o.keys,u="itemClick",c="tabIndex",f=s.proxy,h="push",p="overlay",v="left",m="right";var g=o.ui.Widget.extend({init:function(e,t){var i=this;var n;r.fn.init.call(this,e,t);t=i.options;i._element(e);i._wrapper(e);i._navigatable();i.position();i._mode();if(t.mini){i._miniMode()}i._initDrawerItems();if(t.mini&&t.mode!=h){i._setBodyOffset()}n=this.userEvents=new o.UserEvents(t.mode!=h?s(document.body):this.drawerContainer,{fastTap:true,allowSelection:true});i.tap=function(e){if(s.contains(i.drawerItemsWrapper[0],e.event.target)){i._itemClick(e)}if(i.visible&&!i.trigger("hide",{sender:this})){i.hide();e.preventDefault()}};if(this.options.swipeToOpen){n.bind("start",function(e){i._start(e)});n.bind("move",function(e){i._update(e)});n.bind("end",function(e){i._end(e)});n.bind("tap",i.tap)}else{n.bind("press",i.tap)}if(t.minHeight&&t.mode==h){i.drawerContainer.css("min-height",t.minHeight)}},_element:function(){var e=this;var t=e.element;var i=e.options;var n=e.contentElement=t.children().first();e.drawerElement=s(i.template);n.addClass("k-drawer-content");t.addClass("k-widget k-widget-2021 k-drawer")},_navigatable:function(){if(!this.options.navigatable){return}var e=this;var t=e.element;t.attr(c,0).attr("role","tablist").attr("aria-orientation","vertical");t.on("focus"+a,f(e._focus,e)).on("focusout"+a,f(e._blur,e)).on("keydown"+a,e,f(e._keyDown,e))},_blur:function(){var e=this;if(e._current){e._current.removeClass(l)}},_focus:function(){var e=this;e._setCurrent(e._current?e._current:e.drawerItemsWrapper.find("[data-role='drawer-item']").eq(0))},_setCurrent:function(e){var t=this;var i=o.guid();var n=s(e);if(t._current){s(t._current).removeClass(l).removeAttr("id");t.element.removeAttr("aria-activedescendant")}n.attr("id",i).addClass(l);t.element.attr("aria-activedescendant",i);t._current=n},_keyDown:function(e){var t=this;var i=false;var n=t._current;var r;if(e.keyCode==d.UP){i=true;r=n.prevAll("[data-role='drawer-item']:first");if(r.length){t._setCurrent(r)}else{t._setCurrent(n.parent().find("[data-role='drawer-item']:last"))}}if(e.keyCode==d.DOWN){i=true;r=n.nextAll("[data-role='drawer-item']:first");if(r.length){t._setCurrent(r)}else{t._setCurrent(n.parent().find("[data-role='drawer-item']:first"))}}if(e.keyCode==d.HOME){i=true;t._setCurrent(t.drawerItemsWrapper.find("[data-role='drawer-item']").eq(0))}if(e.keyCode==d.END){i=true;t._setCurrent(t.drawerItemsWrapper.find("[data-role='drawer-item']:last"))}if(e.keyCode==d.SPACEBAR||e.keyCode==d.ENTER){i=true;t.tap({event:{target:n[0]},preventDefault:s.noop})}if(e.keyCode==d.ESC){i=true;t.hide()}if(i){e.preventDefault()}},_wrapper:function(){var e=this.options;var t=this.drawerElement;var i=this.element;var n=this.contentElement;var r=this.drawerItemsWrapper=t.wrapAll("<div class='k-drawer-items'></div>").parent();var a=this.drawerWrapper=r.wrap("<div class='k-drawer-wrapper'></div>").parent();var o=this.drawerContainer=i.wrap("<div class='k-drawer-container'></div>").parent();if(e.mini){if(e.mini.width){a.width(e.mini.width)}}else{a.width(0)}if(e.mode===h){o.append(n)}else if(e.mode===p){o.after(n);s(document.body).prepend(o)}i.append(a)},_setBodyOffset:function(){var e=this.element.outerWidth();if(this.leftPositioned){s(document.body).css("padding-left",e)}else{s(document.body).css("padding-right",e)}},_initDrawerItems:function(){var e=this.drawerItemsWrapper;var t=e.find("[data-role='drawer-item']");var i=e.find("[data-role='drawer-separator']");t.addClass("k-drawer-item");i.addClass("k-drawer-item k-drawer-separator");if(this._selectedItemIndex>=0){t.removeClass("k-state-selected");t.eq(this._selectedItemIndex).addClass("k-state-selected")}if(this.options.navigatable){t.attr("aria-selected",false)}},_mode:function(){var e=this.options;var t=this.drawerContainer;var i;if(e.mode==h){t.addClass("k-drawer-"+h)}else{t.addClass("k-drawer-"+p);i=this.overlayContainer=s('<div class="k-overlay"></div>');i.hide();t.prepend(i)}},_miniMode:function(){var e=this.options;var t=this.drawerContainer;var i=e.mini.width;var n=this._miniTemplate=e.mini.template&&s(e.mini.template);var r=this.drawerItemsWrapper;var a=this.drawerWrapper;t.addClass("k-drawer-mini");if(n){r.html(n)}if(i){a.width(i)}this.minWidth=e.mini.width||this.drawerWrapper.width()},show:function(){var e=this.drawerWrapper;var t=this.drawerContainer;var i=this.options;var n=t.hasClass("k-drawer-expanded");var r=this._miniTemplate;var a=this.drawerElement;var o=this.drawerItemsWrapper;if(!n){t.addClass("k-drawer-expanded");this.visible=true}if(r){o.html(a);this._initDrawerItems();this._selectItem()}e.width(i.width);if(i.mode===p){this.overlayContainer.show();this.visible=true}},hide:function(){var e=this;var t=e.drawerWrapper;var i=e.drawerContainer;var n=this.options;var r=this.drawerItemsWrapper;var a=this._miniTemplate;var o=n.mini&&n.mini.width;if(this._miniTemplate){r.html(a);e._initDrawerItems();this._selectItem()}if(n.mini){if(o){t.width(o)}else{t.width("")}}else{t.width(0)}if(this.visible){i.removeClass("k-drawer-expanded");this.visible=false}if(n.mode===p){this.overlayContainer.hide()}},position:function(e){var t=this;var i=t.options;var n=e||i.position;var r=t.drawerContainer;if(n==m){r.removeClass("k-drawer-"+v);r.addClass("k-drawer-"+m)}else{r.removeClass("k-drawer-"+m);r.addClass("k-drawer-"+v)}this.leftPositioned=n===v},_start:function(e){var t=this;var i=this.options;var n=this.drawerWrapper;var r=this.drawerItemsWrapper;var a=e.sender;if(Math.abs(e.x.velocity)<Math.abs(e.y.velocity)||o.triggeredByInput(e.event)){a.cancel();return}if(this.drawerMini){r.html(t.drawerElement)}n.css("transition","none");if(i.mode!=h){this.overlayContainer.show()}},_update:function(e){var t=this.options;var i=t.mode;if(i==h){this._push(e)}else{this._overlay(e)}},_end:function(e){var t=e.x.velocity;var i=this.options;var n=this.drawerWrapper;var r=n.width();var a=r>i.width/2;var o=.8;var s;n.css("transition","all .3s ease-out");if(this.leftPositioned){s=t>-o&&(t>o||a)}else{s=t<o&&(t<-o||a)}if(s){if(this.trigger("show",{sender:this})){e.preventDefault();this.hide()}else{this.show()}}else{if(this.trigger("hide",{sender:this})){e.preventDefault();this.show()}else{this.hide()}}},_overlay:function(e){var t=this.options;var i=t.mini&&t.mini.width||this.minWidth||0;var n=this.drawerWrapper;var r=n.width();var a;var o;o=r+(this.leftPositioned?e.x.delta:-e.x.delta);a=Math.min(Math.max(o,i),t.width);e.event.preventDefault();e.event.stopPropagation();n.width(a)},_push:function(e){var t=this.options;var i=t.mini&&t.mini.width||this.minWidth||0;var n=this.drawerWrapper;var r=n.width();var a;var o;o=r+(this.leftPositioned?e.x.delta:-e.x.delta);a=Math.min(Math.max(o,i),t.width);e.event.preventDefault();e.event.stopPropagation();n.width(a)},_selectItem:function(e){var t;if(e){e.addClass("k-state-selected");this.trigger("itemClick",{item:e,sender:this});this._selectedItemIndex=e.index();return}t=this._selectedItemIndex;if(t){this.drawerItemsWrapper.find("[data-role='drawer-item']").eq(t).addClass("k-state-selected")}},_itemClick:function(e){var t=this;var i;var n;if(s(e.event.target).find(".k-drawer-item").length>0){i=s(e.event.target).find(".k-drawer-item")}else if(s(e.event.target).closest(".k-drawer-item").length>0){i=s(e.event.target).closest(".k-drawer-item")}else if(s(e.event.target).hasClass(".k-drawer-item")){i=s(e.event.target)}n=t.drawerItemsWrapper.find(".k-drawer-item").removeClass("k-state-selected");t._selectItem(i);if(t.options.navigatable){n.attr("aria-selected",false);i.attr("aria-selected",true);t._setCurrent(i)}},destroy:function(){var e=this.options;if(e.mode!=h){if(this.leftPositioned){s(document.body).css("padding-left",0)}else{s(document.body).css("padding-right",0)}}r.fn.destroy.call(this);this.userEvents.destroy();o.destroy(this.element);this.element=this.drawerWrapper=this.drawerElement=this.drawerContainer=this.drawerItemsWrapper=this._miniTemplate=null},options:{name:"Drawer",position:v,mode:"overlay",swipeToOpen:true,width:280,mini:false,navigatable:false,template:""},events:[n,i,u]});o.ui.plugin(g)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.multiviewcalendar",["kendo.core","kendo.selectable","kendo.calendar"],e)})(function(){var e={id:"multiviewcalendar",name:"MultiViewCalendar",category:"web",description:"Multi-view calendar.",depends:["core","selectable","calendar"]};(function(b,w){var k=window.kendo,l=k.calendar,e=k.support,y=l.isInRange,x=l.toDateObject,C=l.createDate,r=l.isEqualDate,o=l.getToday,S=k.keys,t=k.ui,a=t.Widget,i=t.Selectable,s=k.template,N=e.mobileOS,d=".kendoMultiViewCalendar",u="click",O="keydown",c="id",V="min",n="month",T=".",W="century",U="decade",D="change",A="navigate",f="value",E="k-state-focused",h="k-state-selected",p="k-range-mid",j="k-range-split-end",G="k-range-split-start",v="k-range-start",q="k-range-end",m="k-state-hover",I="k-state-disabled",$="k-nav-today",K="k-other-month",Y="k-out-of-range",g="td:has(.k-link):not(."+Y+")",M="td:has(.k-link):not(."+I+"):not(."+Y+")",Q="blur",X="focus",_=e.touch?"touchstart":"mouseenter",Z=e.touch?"touchend"+d+" touchmove"+d:"mouseleave"+d,R="_prevArrow",F="_nextArrow",J="aria-selected",ee="input,a,textarea,.k-multiselect-wrap,select,button,.k-button>span,.k-button>img,span.k-icon.k-i-arrow-60-down,span.k-icon.k-i-arrow-60-up",P="aria-disabled",z="aria-label",B=b.proxy,L=Date,te={month:0,year:1,decade:2,century:3};var ie=a.extend({init:function(e,t){var i=this;a.fn.init.call(i,e,t);i.userEvents=new k.UserEvents(i.element,{global:true,allowSelection:true,filter:i.options.filter,tap:B(i._tap,i),touchAction:"none"})},events:[D],options:{name:"RangeSelectable",filter:">*",inputSelectors:ee,multiple:false,dragToSelect:true,relatedTarget:b.noop},destroy:function(){var e=this;a.fn.destroy.call(e);e.userEvents.destroy();e._lastActive=e.element=e.userEvents=e._start=e._end=null},_allowSelection:function(e){if(b(e).is(this.options.inputSelectors)){this.userEvents.cancel();return false}return true},start:function(e){if(e===w){return this._start}e.addClass(v+" "+h);this._start=e},end:function(e){if(e===w){return this._start}e.addClass(q+" "+h);this._end=e},mid:function(e){var t=this.element.find("table.k-month");e.addClass(p);t.each(function(){var e=b(this);var t=e.find(M+":last");var i=e.find(M+":first");if(t.hasClass(p)){t.addClass(j)}if(i.hasClass(p)){i.addClass(G)}})},clear:function(e){this.element.find(g).removeClass(q+" "+h+" "+v+" "+p+" "+j+" "+G);if(e){this._start=this._end=null}},selectFrom:function(e){var t=this;var i;var n;i=t.element.find(g);n=b.inArray(b(e)[0],i);t.clear();t.start(e);i=i.filter(function(e){return e>n});t.mid(i)},selectTo:function(e){var t=this;var i;var n;i=t.element.find(g);n=b.inArray(b(e)[0],i);t.clear();i=i.filter(function(e){return e<n});t.mid(i);t.end(b(e))},range:function(e,t){var i=this;var n;var r;var a;var o;if(e===w){return{start:i._start,end:i._end}}n=i.element.find(g);r=b.inArray(b(e)[0],n);a=b.inArray(b(t)[0],n);if(r>a){o=t;t=e;e=o;o=r;r=a;a=o}i.clear();e.addClass(v+" "+h);i._start=e;n=n.filter(function(e){return e>r&&e<a});i.mid(n);i.end(b(t))},change:function(){this.trigger(D)},_tap:function(e){var t=b(e.target),i=this,n,r,a;i._lastActive=t;if(!i._start){i.start(t);i.trigger(D);return}if(i._start&&!i._end){n=i.element.find(g);r=b.inArray(b(i._start)[0],n);a=b.inArray(b(t)[0],n);if(+x(b(i._start).find("a"))>+x(b(t).find("a"))){i.clear();i.start(t);i.trigger(D);return}n=n.filter(function(e){return e>r&&e<a});i.mid(n);i.end(b(t));i.trigger(D);return}if(i._start&&i._end){if(t.hasClass(p)){if(!i._toggling){i.range(t,i._end)}else{i.range(i._start,t)}i._toggling=!i._toggling;i.trigger(D);return}i._toggling=false;i._end=null;i.clear();i.start(t);i.trigger(D)}}});var ne=a.extend({init:function(e,t){var i=this;var n;var r;a.fn.init.call(i,e,t);e=i.wrapper=i.element;t=i.options;i.options.disableDates=l.disabled(i.options.disableDates);r=k.getCulture(t.culture);t.format=k._extractFormat(t.format||r.calendars.standard.patterns.d);i._templates();i._header();i._wrapper();n=e.addClass("k-widget k-widget-2021 k-calendar k-calendar-range"+(t.weekNumber?" k-week-number":"")).on(O+d,"table.k-content",B(i._move,i)).on(Q+d,"table",B(i._blur,i)).on(u+d,M,function(e){var t=e.currentTarget.firstChild;if(t.href.indexOf("#")!=-1){e.preventDefault()}i._click(b(t))}).on(_+d,M,B(i._mouseEnter,i)).on(Z,M,function(){b(this).removeClass(m)}).attr(c);if(n){i._cellID=n+"_cell_selected"}i._calendarWidth=i.element.width();i._range=t.range;i._initViews({viewName:t.start,value:t.value});i._selectable();i._footer(i.footer);i._selectDates=[];i.value(t.value);if(t.selectable=="multiple"){i._selectDates=t.selectDates.length?t.selectDates:i._selectDates;i._restoreSelection()}if(t.selectable=="range"){i.selectRange(i._range)}k.notify(i)},options:{name:"MultiViewCalendar",value:null,min:new L(1900,0,1),max:new L(2099,11,31),dates:[],disableDates:null,culture:"",footer:"",format:"",month:{},range:{start:null,end:null},weekNumber:false,views:2,showViewHeader:false,selectable:"single",selectDates:[],start:n,depth:n,messages:{weekColumnHeader:""}},events:[D,A],setOptions:function(e){var t=this;l.normalize(e);e.disableDates=l.disabled(e.disableDates);a.fn.setOptions.call(t,e);t._selectable();t._templates();t._footer(t.footer);for(var i=0;i<t._views.length;i++){t._views[i].off(d).remove()}t._initViews({viewName:e.start,value:e.value});t._range=e.range||{start:null,end:null};t._restoreSelection()},destroy:function(){var e=this;e._cell=null;e._currentView=null;e._current=null;if(e._views){for(var t=0;t<e._views.length;t++){e._views[t].off(d).remove()}}e.element.off(d);if(e.header){e.header.off(d);e._title=null;e.header=null}if(e.selectable){e.selectable.destroy();e.selectable=null}if(e.rangeSelectable){e.rangeSelectable.destroy();e.rangeSelectable=null}if(e._today){k.destroy(e._today.off(d))}e._views=null;a.fn.destroy.call(e)},current:function(){return this._current},focus:function(){var e;if(this._cell){this._cell.closest("table").trigger("focus")}else if(this._current&&this._dateInViews(this._current)){this._cell=this._cellByDate(this._current);this._cell.closest("table").trigger("focus")}else{e=this.element.find("table").first().trigger("focus");this._cell=e.find(M+":first");this._current=x(this._cell.find("a"))}this._cell.addClass(E)},min:function(e){return this._option(V,e)},max:function(e){return this._option("max",e)},view:function(){return this._currentView},navigateToPast:function(){this._navigate(R,-1)},navigateToFuture:function(){this._navigate(F,1)},navigateUp:function(){var e=this,t=e._index;if(e._title.hasClass(I)){return}e.navigate(e._current,++t)},navigateDown:function(e){var t=this,i=t._index,n=t.options.depth;if(!e){return}if(i===te[n]){if(!r(t._value,t._current)||!r(t._value,e)){t.value(e);t.trigger(D)}return}t.navigate(e,--i)},navigate:function(e,t){t=isNaN(t)?l.views[l.viewsEnum[t]]:l.views[t];var i=this;var n=i.options;var r=n.min;var a=n.max;if(!e){i._current=e=new L(+l.restrictValue(e,r,a))}else{i._current=e}if(t===w){t=i._currentView}i._currentView=t;for(var o=0;o<i._views.length;o++){i._views[o].off(d).remove()}i._initViews({viewName:t.name,value:e});i._restoreSelection()},_updateHeader:function(){var e=this;var t=e._currentView;var i=e._title;var n=e._firstViewValue;var r=e.options;var a=e._visibleRange();var o=r.culture;var s=r.min;var l=r.max;var d;var u;var c;var f;if(t.name===U||t.name===W){d=H(n,t.name,r.views-1);if(!y(d,s,l)){d=l}i.html(t.first(n).getFullYear()+" - "+t.last(d).getFullYear())}else{i.html(t.title(n,s,l,o)+" - "+t.title(H(n,t.name,r.views-1),s,l,o))}u=t.name===W;i.toggleClass(I,u).attr(P,u);c=t.compare(a.start,e.options.min)<1;f=t.compare(a.end,e.options.max)>-1;if(c&&f){if(e._navContainer){e._navContainer.remove();e._navContainer=null}}else{if(!e._navContainer){e._navContainer=b('<span class="k-calendar-nav">'+'<a href="#" role="button" class="k-button k-button-icon k-prev-view" '+z+'="Previous"><span class="k-icon k-i-arrow-60-left"></span></a>'+'<a href="#" role="button" class="k-button k-button-icon k-next-view" '+z+'="Next"><span class="k-icon k-i-arrow-60-right"></span></a>'+"</span>").appendTo(e.header);e[R]=e._navContainer.find(".k-prev-view");e[F]=e._navContainer.find(".k-next-view")}e[R].toggleClass(I,c).attr(P,c);if(e[R].hasClass(I)){e[R].removeClass(m)}e[F].toggleClass(I,f).attr(P,f);if(e[F].hasClass(I)){e[F].removeClass(m)}}},_mouseEnter:function(e){var t=this;var i=b(e.currentTarget);var n;var r;var a;var o;i.addClass(m);if(t.rangeSelectable&&t._currentView.name==="month"){n=t.selectRange();if(n.start&&!n.end){if(t._dateInViews(t.selectRange().start)){r=t.element.find(t.rangeSelectable.options.filter);a=b.inArray(b(t.rangeSelectable._start)[0],r);o=b.inArray(b(i)[0],r);if(a>o){return}t.rangeSelectable.range(t.rangeSelectable._start,i)}else if(+x(t.element.find(g+":first").find("a"))>+n.start){t.rangeSelectable.selectTo(i)}t.rangeSelectable._end=null}}},_move:function(e,t){var i=this;var n=i.options;var r=e.keyCode;var a=i._index;var o=n.min;var s=n.max;var l=i.element.find(T+E);var d=l.closest("table");var u=new L(+(i._current||x(l.find("a"))));var c=k.support.isRtl(i.wrapper);var f=false;var h,p,v,m,g,_;if(r==S.RIGHT&&!c||r==S.LEFT&&c){h=1;p=true}else if(r==S.LEFT&&!c||r==S.RIGHT&&c){h=-1;p=true}else if(r==S.UP){h=a===0?-7:-4;p=true}else if(r==S.DOWN){h=a===0?7:4;p=true}else if(r==S.SPACEBAR){h=0;p=true}else if(r==S.HOME){p=true;m=d.find(M).eq(0);if(m.hasClass(E)){d=d.prev();if(d.length){i._focusCell(d.find(M).eq(0))}else{f=i[R]&&!i[R].hasClass(I);i._navigate(R,-1,t);i._focusCell(i.element.find("table:first "+M+":first"))}}else{i._focusCell(m)}}else if(r==S.END){p=true;m=d.find(M).last();if(m.hasClass(E)){d=d.next();if(d.length){i._focusCell(d.find(M).last())}else{f=i[F]&&!i[F].hasClass(I);i._navigate(F,1,t);i._focusCell(i.element.find("table:last "+M+":last"))}}else{i._focusCell(m)}}if(e.ctrlKey||e.metaKey){if(r==S.RIGHT&&!c||r==S.LEFT&&c){f=i[F]&&!i[F].hasClass(I);i._navigate(F,1,t);p=true}else if(r==S.LEFT&&!c||r==S.RIGHT&&c){f=i[R]&&!i[R].hasClass(I);i._navigate(R,-1,t);p=true}else if(r==S.UP){f=!i._title.hasClass(I);i.navigateUp();i._focusCell(i._cellByDate(i._current),!t);p=true}else if(r==S.DOWN){if(i._currentView.name==="month"){i.value(u)}else{i.navigateDown(u);i._focusCell(i._cellByDate(i._current),!t);f=true}p=true}else if(r==S.ENTER||r==S.SPACEBAR){if(n.selectable==="multiple"){i._toggleSelection(e)}}}else if(e.shiftKey&&n.selectable!=="single"){if(h!==w||v){if(!v){i._currentView.setDate(u,h)}if(i._currentView.name!=="month"){return}if(n.disableDates(u)){u=i._nextNavigatable(u,h)}o=C(o.getFullYear(),o.getMonth(),o.getDate());if(y(u,o,s)){if(!i._dateInViews(u)){if(h>0){f=i[F]&&!i[F].hasClass(I);i._navigate(F,1,t)}else{f=i[R]&&!i[R].hasClass(I);i._navigate(R,-1,t)}}m=i._cellByDate(u);i._current=u;if(i.selectable){i._selectRange(x((i.selectable._lastActive||l).find("a")),u);if(!i.selectable._lastActive){i.selectable._lastActive=l}i.trigger(D);i._focusCell(m)}if(i.rangeSelectable){g=x((i.rangeSelectable._lastActive||l).find("a"));if(!i._dateInViews(g)){if(+g>+u){i.rangeSelectable._end=i.rangeSelectable._lastActive;i.rangeSelectable.selectFrom(m)}else{i.rangeSelectable.selectTo(m)}}else{if(i.rangeSelectable._end&&i.rangeSelectable._end.is(T+E)){i.rangeSelectable._lastActive=i.rangeSelectable._start}else{i.rangeSelectable._lastActive=i._cellByDate(g)}i.rangeSelectable.range(i.rangeSelectable._lastActive,m)}i.rangeSelectable.change();i._focusCell(m)}}}}else{if(r==S.ENTER||r==S.SPACEBAR){if(i._currentView.name==="month"){if(i.selectable){i.selectable._lastActive=i._cellByDate(u)}i.value(u);if(i.rangeSelectable){i.rangeSelectable.change()}}else{i._click(b(i._cell[0].firstChild),t)}p=true}else if(r==S.PAGEUP||r==S.PAGEDOWN){p=true;_=d.find(M).index(l);d=r==S.PAGEUP?d.prev():d.next();if(!d.length){if(r==S.PAGEUP){f=i[R]&&!i[R].hasClass(I);i.navigateToPast();d=i.element.find("table:first")}else{f=i[F]&&!i[F].hasClass(I);i.navigateToFuture();d=i.element.find("table:last")}}m=d.find(M).eq(_);if(m.length){i._focusCell(m)}else{i._focusCell(d.find(M).last())}}if(h||v){if(!v){i._currentView.setDate(u,h)}o=C(o.getFullYear(),o.getMonth(),o.getDate());if(y(u,o,s)){if(i.selectable&&n.disableDates(u)){u=i._nextNavigatable(u,h)}if(!i._dateInViews(u)){if(h>0){f=i[F]&&!i[F].hasClass(I);i._navigate(F,1,t)}else{f=i[R]&&!i[R].hasClass(I);i._navigate(F,-1,t)}}m=i._cellByDate(u);i._current=u;i._focusCell(m,!t)}}}if(f){i.trigger(A)}if(p){e.preventDefault()}return i._current},_visualizeSelectedDatesInView:function(){var e=this;var i={};var t;b.each(e._selectDates,function(e,t){i[k.calendar.views[0].toDateString(t)]=t});e.selectable.clear();t=e.element.find("table").find(g).filter(function(e,t){return i[b(t.firstChild).attr(k.attr(f))]});if(t.length>0){e.selectable._selectElement(t,true)}},_nextNavigatable:function(e,t){var i=this;var n=true;var r=i._currentView;var a=i.options.min;var o=i.options.max;var s=i.options.disableDates;var l=new Date(e.getTime());r.setDate(l,-t);while(n){r.setDate(e,t);if(!y(e,a,o)){e=l;break}n=s(e)}return e},_toggleSelection:function(e){var t=this;t.selectable._lastActive=b(t._cell[0]);if(b(t._cell[0]).hasClass(h)){t.selectable._unselect(b(t._cell[0]));t.selectable.trigger(D,{event:e})}else{t.selectable.value(b(t._cell[0]),{event:e})}},_option:function(e,t){var i=this;var n=i.options;var r=i._value||i._current;var a;if(t===w){return n[e]}t=k.parseDate(t,n.format,n.culture);if(!t){return}n[e]=new L(+t);if(e===V){a=t>r}else{a=r>t}if(a){i._value=null}i.navigate(i._value);i._toggle()},_cellByDate:function(e){if(e instanceof Date){e=this._currentView.toDateString(e)}return this.element.find("table").find("td:not(."+K+")").filter(function(){return b(this.firstChild).attr(k.attr(f))===e})},_selectable:function(){var e=this;var t=e.options.selectable;if(e.selectable){e.selectable.destroy();e.selectable=null}if(e.rangeSelectable){e.rangeSelectable.destroy();e.rangeSelectable=null}if(t.toLowerCase()==="range"){e.rangeSelectable=new ie(e.wrapper,{filter:"table.k-month "+M,change:B(e._rangeSelection,e)})}else{e.selectable=new i(e.wrapper,{aria:true,dragToSelect:false,inputSelectors:"input,textarea,.k-multiselect-wrap,select,button,.k-button>span,.k-button>img,span.k-icon.k-i-arrow-60-down,span.k-icon.k-i-arrow-60-up",multiple:i.parseOptions(t).multiple,filter:"table.k-content "+M,change:B(e._selection,e),relatedTarget:B(e._onRelatedTarget,e),unselect:B(e._unselecting,e)})}},_onRelatedTarget:function(e){var t=this;if(t.selectable.options.multiple&&e.is(M)&&e.length>1){t._focusCell(e.first(),true)}},_getFirstViewDate:function(e){var t=this;var i=t.options;var n=[];var r;var a;var o=new Date(+t._current);var s;for(s=0;s<i.views;s++){r=e.first(o);a=e.last(o);if(+a>+i.max){if(+r<=+i.max){n.push({start:r,end:new Date(+i.max)})}break}n.push({start:r,end:a});o=new Date(+H(a,e.name,1))}o=new Date(+t._current);for(s=0;s<i.views;s++){r=e.first(o);a=e.last(o);if(+r<+i.min){if(+a>=+i.min){n.push({start:new Date(+i.min),end:a})}break}n.push({start:r,end:a});o=new Date(+H(r,e.name,-1))}r=n[0].start;for(s=0;s<i.views+1;s++){if(!n[s]){break}if(+r>+n[s].start){r=n[s].start}}return new Date(+r)},_canRenderNextView:function(e){var t=e.getFullYear();var i=e.getMonth();var n=e.getDate();var r=this.options.max;var a=r.getFullYear();var o=r.getMonth();if(t<a){return true}if(t===a&&i<o){return true}if(t===a&&i===o&&n<r.getDate()){return true}if(t===a&&i===o&&n===r.getDate()){return true}return false},_initViews:function(e){var t=this;var i=t.options;var n=l.viewsEnum[e.viewName];var r=l.views[n];var a;t._current=new L(+l.restrictValue(e.value,i.min,i.max));t._views=[];t._index=n;a=t._getFirstViewDate(r);a.setDate(1);t._firstViewValue=new Date(+a);for(var o=0;o<i.views;o++){a=o?H(a,r.name,1):a;a.setDate(1);if(!t._canRenderNextView(a)){break}t._table=b(r.content(b.extend({min:i.min,max:i.max,date:a,url:i.url,dates:i.dates,format:i.format,culture:i.culture,disableDates:i.disableDates,showHeader:i.showViewHeader,isWeekColumnVisible:i.weekNumber,otherMonth:i.otherMonth,messages:i.messages,contentClasses:"k-content"},t[r.name])));t._table.appendTo(t.tablesWrapper).addClass("k-"+r.name);t._views.push(t._table)}t._currentView=r;t.tablesWrapper.attr("class","k-calendar-view k-calendar-"+r.name+"view");t._updateHeader()},_rangeSelection:function(e){var t=this;var i=e.sender.range();var n;var r;if(i.start){n=x(i.start.find("a"))}if(i.end){r=x(i.end.find("a"))}t._range={start:n,end:r};if(!t._preventChange){t.trigger(D)}},_selection:function(e){var n=this;var t=e.sender.value();var i=e.event;var r=b(i&&i.currentTarget);var a=r.is("td");var o;if(n.options.selectable==="single"){n._validateValue(t[0]?x(t.first().find("a")):e.sender._lastActive?x(e.sender._lastActive.find("a")):n.value())}if(n.options.selectable=="multiple"){if(a){o=x(r.find("a"))}if(i&&i.ctrlKey){if(a){if(r.hasClass(h)){n._selectDates.push(o)}else{n._deselect(o)}}else{n.element.find("table "+M).each(function(e,t){var i=x(b(t).find("a"));n._deselect(i)});n._addSelectedCellsToArray()}}else if(i&&i.shiftKey){n._selectRange(x(e.sender._lastActive?e.sender._lastActive.find("a"):t.first().find("a")),o)}else if(a){n._selectDates=[];n._selectDates.push(o)}else{n._selectDates=[];n._addSelectedCellsToArray()}}if(!n._preventChange){n.trigger(D)}},_addSelectedCellsToArray:function(){var n=this;n.selectable.value().each(function(e,t){var i=x(b(t.firstChild));if(!n.options.disableDates(i)){n._selectDates.push(i)}})},_deselect:function(e){var t=this;var i=t._selectDates.map(Number).indexOf(+e);if(i!=-1){t._selectDates.splice(i,1)}},_unselecting:function(e){var t=this;var i=e.element;if(t.options.selectable==="single"&&!N&&i.hasClass(E)){e.preventDefault()}},_visibleRange:function(){var e=this.element.find(".k-calendar-view table");var t=x(e.first().find(g+":first").find("a"));var i=x(e.last().find(g+":last").find("a"));return{start:t,end:i}},_dateInViews:function(e){var t=this;var i=t.element.find(".k-calendar-view table");var n=x(i.first().find(g+":first").find("a"));var r=x(i.last().find(g+":last").find("a"));return+e<=+r&&+e>=+n},_fillRange:function(e,t){var i=this;var n;i._selectDates=[];n=oe(e,t);ae(i._selectDates,n,e,i.options.disableDates)},_selectRange:function(e,t){var i=this;var n;if(+t<+e){n=t;t=e;e=n}i._fillRange(e,t);i._visualizeSelectedDatesInView()},_header:function(){var t=this;var e=t.element;var i;var n=e.find(".k-calendar-header");if(!n.length){n=b('<div class="k-calendar-header">'+'<a href="#" role="button" class="k-button k-title" aria-live="assertive" aria-atomic="true"></a>'+'<span class="k-calendar-nav">'+'<a href="#" role="button" class="k-button k-button-icon k-prev-view" '+z+'="Previous"><span class="k-icon k-i-arrow-60-left"></span></a>'+'<a href="#" role="button" class="k-button k-button-icon k-next-view" '+z+'="Next"><span class="k-icon k-i-arrow-60-right"></span></a>'+"</span>"+"</div>").prependTo(e)}t.header=n;n.on(_+d+" "+Z+" "+X+d+" "+Q+d,".k-button",re).on("click",function(){return false}).on(u+d,".k-button.k-title",function(){t.navigateUp();t._focusCell(t._cellByDate(t._current),true);t.trigger(A)}).on(u+d,".k-button.k-prev-view",function(e){e.preventDefault();t.navigateToPast();t.trigger(A)}).on(u+d,".k-button.k-next-view",function(e){e.preventDefault();t.navigateToFuture();t.trigger(A)});i=n.find(".k-button");t._title=i.filter(".k-title");t._navContainer=n.find(".k-calendar-nav");t[R]=i.filter(".k-prev-view");t[F]=i.filter(".k-next-view")},_wrapper:function(){this.tablesWrapper=b('<div class="k-calendar-view" />').insertAfter(this.element[0].firstChild)},_templates:function(){var e=this;var t=e.options;var i=t.month;var n=i.content;var r=i.weekNumber;var a=i.empty;e.month={content:s('<td#=data.cssClass# role="gridcell"><a tabindex="-1" class="k-link#=data.linkClass#" href="#=data.url#" '+k.attr(f)+'="#=data.dateString#" title="#=data.title#">'+(n||"#=data.value#")+"</a></td>",{useWithBlock:!!n}),empty:s('<td role="gridcell"'+(a?">":' class="k-out-of-range">')+(a||"<a class='k-link'></a>")+"</td>",{useWithBlock:!!a}),weekNumber:s('<td class="k-alt">'+(r||"#= data.weekNumber #")+"</td>",{useWithBlock:!!r})}},_footer:function(){var e=this;var t=e.options;var i=t.footer!==false?k.template(e.options.footer||'#= kendo.toString(data,"D","'+t.culture+'") #',{useWithBlock:false}):null;var n=o();var r=e.element;var a=r.find(".k-footer");if(!i){e._toggle(false);a.hide();return}if(!a[0]){a=b('<div class="k-footer"><a href="#" class="k-link k-nav-today"></a></div>').appendTo(r)}e._today=a.show().find(".k-link").html(i(n)).attr("title",k.toString(n,"D",e.options.culture));e._toggle()},_navigate:function(e,t,i){var n=this;var r=n._index+1;var a=new L(+n._current);var o=new L(+n._current);var s;e=n[e];s=n._cellByDate(a).closest("table").index();if(t>0){s=1-s}else{s=s+1}if(!e||!e.hasClass(I)){if(r>3){a.setFullYear(a.getFullYear()+100*(t*s))}else{l.views[r].setDate(a,t*s)}n.navigate(a);if(n._dateInViews(o)){n._focusCell(n._cellByDate(o),!i);n._current=o}else{if(r>3){o.setFullYear(o.getFullYear()+100*t)}else{l.views[r].setDate(o,t)}n._focusCell(n._cellByDate(o),!i);n._current=o}}},_toggle:function(e){var t=this;var i=t.options;var n=i.selectable!=="range"&&t.options.disableDates(o());var r=t._today;if(e===w){e=y(o(),i.min,i.max)}if(r){r.off(u+d);if(e&&!n){r.addClass($).removeClass(I).on(u+d,B(t._todayClick,t))}else{r.removeClass($).addClass(I).on(u+d,function e(t){t.preventDefault()})}}},_click:function(e,t){var i=this;var n=i.options;var r=new Date(+i._current);var a=x(e);k.date.adjustDST(a,0);i._currentView.setDate(r,a);i._current=a;if(i._currentView.name!==n.depth){i.navigateDown(l.restrictValue(r,n.min,n.max));i._focusCell(i._cellByDate(i._current),!t);i.trigger(A)}else{i._focusCell(e.closest("td"),!t)}},_blur:function(){var e=this;if(e._cell){e._cell.removeClass(E)}},_focus:function(e){var t=this;var i=b(e.currentTarget);var n=t._cell;if(!n||!b.contains(i[0],n[0])){n=i.find(M+":first")}t._focusCell(n)},_focusCell:function(e,t){var i=this;var n=i._cellID;var r=e.closest("table");if(i._cell&&i._cell.length){i._cell[0].removeAttribute(J);i._cell[0].removeAttribute(z);i._cell.removeClass(E);i._cell[0].removeAttribute(c);i._cell.closest("table")[0].removeAttribute("aria-activedescendant")}i._cell=e;if(t){r.trigger("focus")}if(n){e.attr(c,n);r.attr("aria-activedescendant",n)}e.attr(J,true).addClass(E);if(e.length&&i._currentView.name=="month"){i._current=x(e.find("a"))}},_todayClick:function(e){var t=this;var i=t.options.disableDates;var n=o();var r=false;e.preventDefault();if(i(n)){return}t._value=n;if(t.options.selectable==="multiple"){t._selectDates=[n]}if(t.options.selectable==="range"){t.rangeSelectable.clear(true);t._range={start:n,end:null}}if(t._currentView.name!="month"||!t._dateInViews(n)){r=true}t.navigate(n,t.options.depth);if(t.options.selectable==="single"){t.selectable._lastActive=null}if(r){t.trigger(A)}t.trigger(D)},_validateValue:function(e){var t=this;var i=t.options;var n=i.min;var r=i.max;e=k.parseDate(e,i.format,i.culture);if(e!==null){e=new L(+e);if(!y(e,n,r)){e=null}}if(e===null||!t.options.disableDates(new Date(+e))){t._value=e}else if(t._value===w){t._value=null}return t._value},clearSelection:function(){var e=this;if(e.selectable){e.element.find(T+h).removeClass(h)}if(e.rangeSelectable){e.rangeSelectable.clear(true)}},_restoreSelection:function(){var e=this;var t;var i=e.options.selectable;if(e._currentView.name!==e.options.depth){return}e._preventChange=true;if(i==="range"){t=e.selectRange();if(!t||!t.start){e._preventChange=false;return}e.selectRange(t)}if(i==="single"&&e.value()){e.selectable.value(e._cellByDate(e.value()))}if(i==="multiple"){e._visualizeSelectedDatesInView()}e._preventChange=false},value:function(e){var t=this;var i;if(e===w){return t._value}e=t._validateValue(e);t.clearSelection();if(e&&!t._dateInViews(e)){t.navigate(e)}if(e!==null&&t._currentView.name===n){i=t._cellByDate(e);if(t.selectable){t.selectable.value(i)}if(t.rangeSelectable){t.rangeSelectable.start(i);t.rangeSelectable._lastActive=i}}},selectDates:function(e){var t=this;var i;var n;if(e===w){return t._selectDates}n=e.map(function(e){return e.getTime()}).filter(function(e,t,i){return i.indexOf(e)===t}).map(function(e){return new Date(e)});i=b.grep(n,function(e){if(e){return+t._validateValue(new Date(e.setHours(0,0,0,0)))===+e}});t._selectDates=i.length>0?i:n.length===0?n:t._selectDates;t._visualizeSelectedDatesInView()},selectRange:function(e){var t=this;var i;var n;var r;if(e===w){return t._range}t._range=e;if(!e.start){return}r=t._visibleRange();i=t._dateInViews(e.start);n=e.end&&t._dateInViews(e.end);if(!i&&n){t.rangeSelectable.selectTo(t._cellByDate(e.end))}if(i&&n){t.rangeSelectable.range(t._cellByDate(e.start),t._cellByDate(e.end))}if(e.end&&i&&!n){t.rangeSelectable.selectFrom(t._cellByDate(e.start))}if(!e.end&&i){t.rangeSelectable.start(t._cellByDate(e.start))}if(+r.start>+e.start&&+r.end<+e.end){t.rangeSelectable.mid(t.element.find(M))}}});k.ui.plugin(ne);function re(e){var t=b(this).hasClass("k-state-disabled");if(!t){b(this).toggleClass(m,_.indexOf(e.type)>-1||e.type==X)}}function ae(e,t,i,n){for(var r=0;r<=t;r++){var a=new Date(i.getTime());a=new Date(a.setDate(a.getDate()+r));if(!n(a)){e.push(a)}}}function oe(e,t){if(+t<+e){var i=+e;l.views[0].setDate(e,t);l.views[0].setDate(t,new Date(i))}var n=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate());var r=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.ceil((+r-+n)/k.date.MS_PER_DAY)}function H(e,t,i){var n;if(t==="month"){n=new L(e.getFullYear(),e.getMonth()+i,e.getDate());n.setFullYear(e.getFullYear());if(Math.abs(n.getMonth()-e.getMonth())>i||i>10){n.setMonth(e.getMonth()+i);n=l.views[0].last(n)}return n}else if(t==="year"){n=new L(1,e.getMonth(),e.getDate());n.setFullYear(e.getFullYear()+i);if(Math.abs(n.getFullYear()-e.getFullYear())>i){n=new L(1,e.getMonth(),1);n.setFullYear(e.getFullYear()+i);n=l.views[1].last(n)}return n}else if(t==="decade"){n=new L(1,e.getMonth(),e.getDate());n.setFullYear(e.getFullYear()+10*i);if(Math.abs(n.getFullYear()-e.getFullYear())>10*i){n=new L(1,e.getMonth(),1);n.setFullYear(e.getFullYear()+10*i);n=l.views[2].last(n)}return n}else if(t==="century"){n=new L(1,e.getMonth(),e.getDate());n.setFullYear(e.getFullYear()+100*i);if(Math.abs(n.getFullYear()-e.getFullYear())>100*i){n=new L(1,e.getMonth(),1);n.setFullYear(e.getFullYear()+100*i);n=l.views[3].last(n)}return n}}})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.virtuallist",["kendo.data"],e)})(function(){var e={id:"virtuallist",name:"VirtualList",category:"framework",depends:["data"],hidden:true};(function(m,g){var o=window.kendo,e=o.ui,n=e.Widget,t=e.DataBoundWidget,i=m.proxy,l=/^\d+(\.\d+)?%$/i,r="k-virtual-wrap",a="k-virtual-list",s="k-virtual-content",d="k-list",u="k-group-header",c="k-virtual-item",f="k-item",h="k-height-container",p="k-group",_="k-state-selected",v="k-state-focused",b="k-state-hover",w="change",k="click",y="listBound",x="itemChange",C="activate",S="deactivate",T=".VirtualList";function D(e){return e[e.length-1]}function A(e){return e instanceof Array?e:[e]}function E(e){return typeof e==="string"||typeof e==="number"||typeof e==="boolean"}function I(e,t,i){return Math.ceil(e*t/i)}function M(e,t,i){var n=document.createElement(i||"div");if(t){n.className=t}e.appendChild(n);return n}function R(){var e=m('<div class="k-popup"><ul class="k-list"><li class="k-item"><li></ul></div>'),t;e.css({position:"absolute",left:"-200000px",visibility:"hidden"});e.appendTo(document.body);t=parseFloat(o.getComputedStyles(e.find(".k-item")[0],["line-height"])["line-height"]);e.remove();return t}function F(e,t,i){return{down:e*i,up:e*(t-1-i)}}function B(e,t){var n=(e.listScreens-1-e.threshold)*t;var r=e.threshold*t;return function(e,t,i){if(t>i){return t-e.top<n}else{return e.top===0||t-e.top>r}}}function L(t,i){return function(e){return i(t.scrollTop,e)}}function H(i){return function(e,t){i(e.items,e.index,t);return e}}function N(e,t){if(o.support.browser.msie&&o.support.browser.version<10){e.style.top=t+"px"}else{e.style.webkitTransform="translateY("+t+"px)";e.style.transform="translateY("+t+"px)"}}function O(r,a){return function(e,t){for(var i=0,n=e.length;i<n;i++){r(e[i],t[i],a);if(t[i].item){this.trigger(x,{item:m(e[i]),data:t[i].item,ns:o.ui})}}}}function V(e,t){var i;if(t>0){i=e.splice(0,t);e.push.apply(e,i)}else{i=e.splice(t,-t);e.unshift.apply(e,i)}return i}function W(e,t,i){var n=i.template;e=m(e);if(!t.item){n=i.placeholderTemplate}if(t.index===0&&this.header&&t.group){this.header.html(i.fixedGroupTemplate(t.group))}this.angular("cleanup",function(){return{elements:[e]}});e.attr("data-uid",t.item?t.item.uid:"").attr("data-offset-index",t.index);if(this.options.columns&&this.options.columns.length&&t.item){e.html(U(this.options,t.item,i))}else{e.html(n(t.item||{}))}e.toggleClass(v,t.current);e.toggleClass(_,t.selected);e.toggleClass("k-first",t.newGroup);e.toggleClass("k-last",t.isLastGroupedItem);e.toggleClass("k-loading-item",!t.item);if(t.index!==0&&t.newGroup){m("<div class="+p+"></div>").appendTo(e).html(i.groupTemplate(t.group))}if(t.top!==g){N(e[0],t.top)}this.angular("compile",function(){return{elements:[e],data:[{dataItem:t.item,group:t.group,newGroup:t.newGroup}]}})}function U(e,t,i){var n="";for(var r=0;r<e.columns.length;r++){var a=e.columns[r].width;var o=parseInt(a,10);var s="";if(a){s+="style='width:";s+=o;s+=l.test(a)?"%":"px";s+=";'"}n+="<span class='k-cell' "+s+">";n+=i["column"+r](t);n+="</span>"}return n}function j(e,t){var i=t.length;var n=e.length;var r;var a;var o,s;var l=[];var d=[];if(n){for(o=0;o<n;o++){r=e[o];a=false;for(s=0;s<i;s++){if(r===t[s]){a=true;l.push({index:o,item:r});break}}if(!a){d.push(r)}}}return{changed:l,unchanged:d}}function P(e){return e&&e.state()!=="resolved"}var z=t.extend({init:function(e,t){var i=this;i.bound(false);i._fetching=false;n.fn.init.call(i,e,t);if(!i.options.itemHeight){i.options.itemHeight=R()}t=i.options;i.element.addClass(d+" "+a).attr("role","listbox");i.content=i.element.wrap("<div unselectable='on' class='"+s+"'></div>").parent();i.wrapper=i.content.wrap("<div class='"+r+"'></div>").parent();i.header=i.content.before("<div class='"+u+"'></div>").prev();if(t.columns&&t.columns.length){i.element.removeClass(d)}i.element.on("mouseenter"+T,"li:not(.k-loading-item)",function(){m(this).addClass(b)}).on("mouseleave"+T,"li",function(){m(this).removeClass(b)});i._values=A(i.options.value);i._selectedDataItems=[];i._selectedIndexes=[];i._rangesList={};i._promisesList=[];i._optionID=o.guid();i._templates();i.setDataSource(t.dataSource);i.content.on("scroll"+T,o.throttle(function(){i._renderItems();i._triggerListBound()},t.delay));i._selectable()},options:{name:"VirtualList",autoBind:true,delay:100,height:null,listScreens:4,threshold:.5,itemHeight:null,oppositeBuffer:1,type:"flat",selectable:false,value:[],dataValueField:null,template:"#:data#",placeholderTemplate:"loading...",groupTemplate:"#:data#",fixedGroupTemplate:"#:data#",mapValueTo:"index",valueMapper:null},events:[w,k,y,x,C,S],setOptions:function(e){n.fn.setOptions.call(this,e);if(this._selectProxy&&this.options.selectable===false){this.element.off(k,"."+c,this._selectProxy)}else if(!this._selectProxy&&this.options.selectable){this._selectable()}this._templates();this.refresh()},items:function(){return m(this._items)},destroy:function(){this.wrapper.off(T);this.dataSource.unbind(w,this._refreshHandler);n.fn.destroy.call(this)},setDataSource:function(e){var t=this;var i=e||{};var n;i=m.isArray(i)?{data:i}:i;i=o.data.DataSource.create(i);if(t.dataSource){t.dataSource.unbind(w,t._refreshHandler);t._clean();t.bound(false);t._deferValueSet=true;n=t.value();t.value([]);t.mute(function(){t.value(n)})}else{t._refreshHandler=m.proxy(t.refresh,t)}t.dataSource=i.bind(w,t._refreshHandler);t.setDSFilter(i.filter());if(i.view().length!==0){t.refresh()}else if(t.options.autoBind){i.fetch()}},skip:function(){return this.dataSource.currentRangeStart()},_triggerListBound:function(){var e=this;var t=e.skip();if(e.bound()&&!e._selectingValue&&e._skip!==t){e._skip=t;e.trigger(y)}},_getValues:function(e){var t=this._valueGetter;return m.map(e,function(e){return t(e)})},_highlightSelectedItems:function(){for(var e=0;e<this._selectedDataItems.length;e++){var t=this._getElementByDataItem(this._selectedDataItems[e]);if(t.length){t.addClass(_)}}},refresh:function(e){var t=this;var i=e&&e.action;var n=i==="itemchange";var r=this.isFiltered();var a;if(t._mute){return}t._deferValueSet=false;if(!t._fetching){if(r){t.focus(0)}t._createList();if(!i&&t._values.length&&!r&&!t.options.skipUpdateOnBind&&!t._emptySearch){t._selectingValue=true;t.bound(true);t.value(t._values,true).done(function(){t._selectingValue=false;t._triggerListBound()})}else{t.bound(true);t._highlightSelectedItems();t._triggerListBound()}}else{if(t._renderItems){t._renderItems(true)}t._triggerListBound()}if(n||i==="remove"){a=j(t._selectedDataItems,e.items);if(a.changed.length){if(n){t.trigger("selectedItemChange",{items:a.changed})}else{t.value(t._getValues(a.unchanged))}}}t._fetching=false},removeAt:function(e){this._selectedIndexes.splice(e,1);this._values.splice(e,1);return{position:e,dataItem:this._selectedDataItems.splice(e,1)[0]}},setValue:function(e){this._values=A(e)},value:function(e,t){var i=this;if(e===g){return i._values.slice()}if(e===null){e=[]}e=A(e);if(!i._valueDeferred||i._valueDeferred.state()==="resolved"){i._valueDeferred=m.Deferred()}var n=i.options.selectable==="multiple"&&i.select().length&&e.length;if(n||!e.length){i.select(-1)}i._values=e;if(i.bound()&&!i._mute&&!i._deferValueSet||t){i._prefetchByValue(e)}return i._valueDeferred},_checkValuesOrder:function(e){if(this._removedAddedIndexes&&this._removedAddedIndexes.length===e.length){var t=this._removedAddedIndexes.slice();this._removedAddedIndexes=null;return t}return e},_prefetchByValue:function(e){var t=this,i=t._dataView,n=t._valueGetter,r=t.options.mapValueTo,a,o=false,s=[];for(var l=0;l<e.length;l++){for(var d=0;d<i.length;d++){a=i[d].item;if(a){o=E(a)?e[l]===a:e[l]===n(a);if(o){s.push(i[d].index)}}}}if(s.length===e.length){t._values=[];t.select(s);return}if(typeof t.options.valueMapper==="function"){t.options.valueMapper({value:this.options.selectable==="multiple"?e:e[0],success:function(e){if(r==="index"){t.mapValueToIndex(e)}else if(r==="dataItem"){t.mapValueToDataItem(e)}}})}else{if(!t.value()[0]){t.select([-1])}else{t._selectingValue=false;t._triggerListBound()}}},mapValueToIndex:function(e){if(e===g||e===-1||e===null){e=[]}else{e=A(e)}if(!e.length){e=[-1]}else{var t=this._deselect([]).removed;if(t.length){this._triggerChange(t,[])}}this.select(e)},mapValueToDataItem:function(e){var t,i;if(e===g||e===null){e=[]}else{e=A(e)}if(!e.length){this.select([-1])}else{t=m.map(this._selectedDataItems,function(e,t){return{index:t,dataItem:e}});i=m.map(e,function(e,t){return{index:t,dataItem:e}});this._selectedDataItems=e;this._selectedIndexes=[];for(var n=0;n<this._selectedDataItems.length;n++){var r=this._getElementByDataItem(this._selectedDataItems[n]);this._selectedIndexes.push(this._getIndecies(r)[0]);r.addClass(_)}this._triggerChange(t,i);if(this._valueDeferred){this._valueDeferred.resolve()}}},deferredRange:function(e){var a=this.dataSource;var o=this.itemCount;var s=this._rangesList;var t=m.Deferred();var l=[];var i=Math.floor(e/o)*o;var n=Math.ceil(e/o)*o;var r=n===i?[n]:[i,n];m.each(r,function(e,t){var i=t+o;var n=s[t];var r;if(!n||n.end!==i){r=m.Deferred();s[t]={end:i,deferred:r};a._multiplePrefetch(t,o,function(){r.resolve()})}else{r=n.deferred}l.push(r)});m.when.apply(m,l).then(function(){t.resolve()});return t},prefetch:function(e){var i=this,n=this.itemCount,t=!i._promisesList.length;if(!P(i._activeDeferred)){i._activeDeferred=m.Deferred();i._promisesList=[]}m.each(e,function(e,t){i._promisesList.push(i.deferredRange(i._getSkip(t,n)))});if(t){m.when.apply(m,i._promisesList).done(function(){i._promisesList=[];i._activeDeferred.resolve()})}return i._activeDeferred},_findDataItem:function(e,t){var i;if(this.options.type==="group"){for(var n=0;n<e.length;n++){i=e[n].items;if(i.length<=t){t=t-i.length}else{return i[t]}}}return e[t]},_getRange:function(e,t){return this.dataSource._findRange(e,Math.min(e+t,this.dataSource.total()))},dataItemByIndex:function(e){var t=this;var i=t.itemCount;var n=t._getSkip(e,i);var r=this._getRange(n,i);if(!t._getRange(n,i).length){return null}if(t.options.type==="group"){o.ui.progress(m(t.wrapper),true);t.mute(function(){t.dataSource.range(n,i,function(){o.ui.progress(m(t.wrapper),false)});r=t.dataSource.view()})}return t._findDataItem(r,[e-n])},selectedDataItems:function(){return this._selectedDataItems.slice()},scrollWith:function(e){this.content.scrollTop(this.content.scrollTop()+e)},scrollTo:function(e){this.content.scrollTop(e)},scrollToIndex:function(e){this.scrollTo(e*this.options.itemHeight)},focus:function(e){var t,i,n,r,a=this.options.itemHeight,o=this._optionID,s=true;if(e===g){r=this.element.find("."+v);return r.length?r:null}if(typeof e==="function"){n=this.dataSource.flatView();for(var l=0;l<n.length;l++){if(e(n[l])){e=l;break}}}if(e instanceof Array){e=D(e)}if(isNaN(e)){t=m(e);i=parseInt(m(t).attr("data-offset-index"),10)}else{i=e;t=this._getElementByIndex(i)}if(i===-1){this.element.find("."+v).removeClass(v);this._focusedIndex=g;return}if(t.length){if(t.hasClass(v)){s=false}if(this._focusedIndex!==g){r=this._getElementByIndex(this._focusedIndex);r.removeClass(v).removeAttr("id");if(s){this.trigger(S)}}this._focusedIndex=i;t.addClass(v).attr("id",o);var d=this._getElementLocation(i);if(d==="top"){this.scrollTo(i*a)}else if(d==="bottom"){this.scrollTo(i*a+a-this._screenHeight)}else if(d==="outScreen"){this.scrollTo(i*a)}if(s){this.trigger(C)}}else{this._focusedIndex=i;this.items().removeClass(v);this.scrollToIndex(i)}},focusIndex:function(){return this._focusedIndex},focusFirst:function(){this.scrollTo(0);this.focus(0)},focusLast:function(){var e=this.dataSource.total();this.scrollTo(this.heightContainer.offsetHeight);this.focus(e-1)},focusPrev:function(){var e=this._focusedIndex;var t;if(!isNaN(e)&&e>0){e-=1;this.focus(e);t=this.focus();if(t&&t.hasClass("k-loading-item")){e+=1;this.focus(e)}return e}else{e=this.dataSource.total()-1;this.focus(e);return e}},focusNext:function(){var e=this._focusedIndex;var t=this.dataSource.total()-1;var i;if(!isNaN(e)&&e<t){e+=1;this.focus(e);i=this.focus();if(i&&i.hasClass("k-loading-item")){e-=1;this.focus(e)}return e}else{e=0;this.focus(e);return e}},_triggerChange:function(e,t){e=e||[];t=t||[];if(e.length||t.length){this.trigger(w,{removed:e,added:t})}},select:function(e){var t=this,i,n,r=t.options.selectable!=="multiple",a=P(t._activeDeferred),o=this.isFiltered(),s,l,d,u=[];if(e===g){return t._selectedIndexes.slice()}if(!t._selectDeferred||t._selectDeferred.state()==="resolved"){t._selectDeferred=m.Deferred()}i=t._getIndecies(e);s=r&&!o&&D(i)===D(this._selectedIndexes);u=t._deselectCurrentValues(i);if(u.length||!i.length||s){t._triggerChange(u);if(t._valueDeferred){t._valueDeferred.resolve().promise()}return t._selectDeferred.resolve().promise()}if(i.length===1&&i[0]===-1){i=[]}n=i;d=t._deselect(i);u=d.removed;i=d.indices;if(r){a=false;if(i.length){i=[D(i)]}}var c=function(){var e=t._select(i);if(n.length===i.length||r){t.focus(i)}t._triggerChange(u,e);if(t._valueDeferred){t._valueDeferred.resolve()}t._selectDeferred.resolve()};l=t.prefetch(i);if(!a){if(l){l.done(c)}else{c()}}return t._selectDeferred.promise()},bound:function(e){if(e===g){return this._listCreated}this._listCreated=e},mute:function(e){this._mute=true;i(e(),this);this._mute=false},setDSFilter:function(e){this._lastDSFilter=m.extend({},e)},isFiltered:function(){if(!this._lastDSFilter){this.setDSFilter(this.dataSource.filter())}return!o.data.Query.compareFilters(this.dataSource.filter(),this._lastDSFilter)},skipUpdate:m.noop,_getElementByIndex:function(i){return this.items().filter(function(e,t){return i===parseInt(m(t).attr("data-offset-index"),10)})},_getElementByDataItem:function(e){var t=this._dataView,i=this._valueGetter,n,r;for(var a=0;a<t.length;a++){r=t[a].item&&E(t[a].item)?t[a].item===e:t[a].item&&e&&i(t[a].item)==i(e);if(r){n=t[a];break}}return n?this._getElementByIndex(n.index):m()},_clean:function(){this.result=g;this._lastScrollTop=g;this._skip=g;m(this.heightContainer).remove();this.heightContainer=g;this.element.empty()},_height:function(){var e=!!this.dataSource.view().length,t=this.options.height,i=this.options.itemHeight,n=this.dataSource.total();if(!e){t=0}else if(t/i>n){t=n*i}return t},setScreenHeight:function(){var e=this._height();this.content.height(e);this._screenHeight=e},screenHeight:function(){return this._screenHeight},_getElementLocation:function(e){var t=this.content.scrollTop(),i=this._screenHeight,n=this.options.itemHeight,r=e*n,a=r+n,o=t+i,s;if(r===t-n||a>t&&r<t){s="top"}else if(r===o||r<o&&o<a){s="bottom"}else if(r>=t&&r<=t+(i-n)){s="inScreen"}else{s="outScreen"}return s},_templates:function(){var e=this.options;var t={template:e.template,placeholderTemplate:e.placeholderTemplate,groupTemplate:e.groupTemplate,fixedGroupTemplate:e.fixedGroupTemplate};if(e.columns){for(var i=0;i<e.columns.length;i++){var n=e.columns[i];var r=n.field?n.field.toString():"text";t["column"+i]=n.template||"#: "+r+"#"}}for(var a in t){if(typeof t[a]!=="function"){t[a]=o.template(t[a]||"")}}this.templates=t},_generateItems:function(e,t){var i=[],n,r=this.options.itemHeight+"px";while(t-- >0){n=document.createElement("li");n.tabIndex=-1;n.className=c+" "+f;n.setAttribute("role","option");n.style.height=r;n.style.minHeight=r;e.appendChild(n);i.push(n)}return i},_saveInitialRanges:function(){var e=this.dataSource._ranges;var t=m.Deferred();t.resolve();this._rangesList={};for(var i=0;i<e.length;i++){this._rangesList[e[i].start]={end:e[i].end,deferred:t}}},_createList:function(){var n=this,e=n.content.get(0),t=n.options,i=n.dataSource;if(n.bound()){n._clean()}n._saveInitialRanges();n._buildValueGetter();n.setScreenHeight();n.itemCount=I(n._screenHeight,t.listScreens,t.itemHeight);if(n.itemCount>i.total()){n.itemCount=i.total()}n._items=n._generateItems(n.element[0],n.itemCount);n._setHeight(t.itemHeight*i.total());n.options.type=(i.group()||[]).length?"group":"flat";if(n.options.type==="flat"){n.header.hide()}else{n.header.show()}n.getter=n._getter(function(){n._renderItems(true)});n._onScroll=function(e,t){var i=n._listItems(n.getter);return n._fixedHeader(e,i(e,t))};n._renderItems=n._whenChanged(L(e,n._onScroll),H(n._reorderList(n._items,m.proxy(W,n))));n._renderItems();n._calculateGroupPadding(n._screenHeight);n._calculateColumnsHeaderPadding()},_setHeight:function(e){var t,i=this.heightContainer;if(!i){i=this.heightContainer=M(this.content[0],h)}else{t=i.offsetHeight}if(e!==t){i.innerHTML="";while(e>0){var n=Math.min(e,25e4);M(i).style.height=n+"px";e-=n}}},_getter:function(){var c=null,f=this.dataSource,h=f.skip(),p=this.options.type,v=this.itemCount,m={};if(f.pageSize()<v){this.mute(function(){f.pageSize(v)})}return function(e,t){var i=this;if(!f.inRange(t,v)){if(c!==t){c=t;h=t;if(i._getterDeferred){i._getterDeferred.reject()}i._getterDeferred=i.deferredRange(t);i._getterDeferred.then(function(){var e=i._indexConstraint(i.content[0].scrollTop);i._getterDeferred=null;if(t<=e&&e<=t+v){i._fetching=true;f.range(t,v)}})}return null}else{if(h!==t){this.mute(function(){f.range(t,v);h=t})}var n;if(p==="group"){if(!m[t]){var r=m[t]=[];var a=f.view();for(var o=0,s=a.length;o<s;o++){var l=a[o];for(var d=0,u=l.items.length;d<u;d++){r.push({item:l.items[d],group:l.value})}}}n=m[t][e-t]}else{n=f.view()[e-t]}return n}}},_fixedHeader:function(e,t){var i=this.currentVisibleGroup,n=this.options.itemHeight,r=Math.floor((e-t.top)/n),a=t.items[r];if(a&&a.item){var o=a.group;if(o!==i){var s=o||"";this.header.html(this.templates.fixedGroupTemplate(s));this.currentVisibleGroup=o}}return t},_itemMapper:function(e,t,i){var n=this.options.type,r=this.options.itemHeight,a=this._focusedIndex,o=false,s=false,l=false,d=null,u=false,c=this._valueGetter;if(n==="group"){if(e){l=t===0||this._currentGroup!==false&&this._currentGroup!==e.group;this._currentGroup=e.group}d=e?e.group:null;e=e?e.item:null}if(this.options.mapValueTo==="dataItem"&&this._selectedDataItems.length&&e){for(var f=0;f<this._selectedDataItems.length;f++){u=c(this._selectedDataItems[f])===c(e);if(u){o=true;break}}}else if(!this.isFiltered()&&i.length&&e){for(var h=0;h<i.length;h++){u=E(e)?i[h]===e:i[h]===c(e);if(u){i.splice(h,1);o=true;break}}}if(a===t){s=true}return{item:e?e:null,group:d,newGroup:l,selected:o,current:s,index:t,top:t*r}},_range:function(e){var t=this.itemCount,i=this._values.slice(),n=[],r;this._view={};this._currentGroup=false;for(var a=e,o=e+t;a<o;a++){r=this._itemMapper(this.getter(a,e),a,i);if(n[n.length-1]){n[n.length-1].isLastGroupedItem=r.newGroup}n.push(r);this._view[r.index]=r}this._dataView=n;return n},_getDataItemsCollection:function(e,t){var i=this._range(this._listIndex(e,t));return{index:i.length?i[0].index:0,top:i.length?i[0].top:0,items:i}},_listItems:function(){var e=this._screenHeight,t=this.options;var r=B(t,e);return m.proxy(function(e,t){var i=this.result,n=this._lastScrollTop;if(t||!i||!r(i,e,n)){i=this._getDataItemsCollection(e,n)}this._lastScrollTop=e;this.result=i;return i},this)},_whenChanged:function(i,n){var r;return function(e){var t=i(e);if(t!==r){r=t;n(t,e)}}},_reorderList:function(o,s){var l=this;var d=o.length;var u=-Infinity;s=m.proxy(O(s,this.templates),this);return function(e,t,i){var n=t-u;var r,a;if(i||Math.abs(n)>=d){r=o;a=e}else{r=V(o,n);a=n>0?e.slice(-n):e.slice(0,-n)}s(r,a,l.bound());u=t}},_bufferSizes:function(){var e=this.options;return F(this._screenHeight,e.listScreens,e.oppositeBuffer)},_indexConstraint:function(e){var t=this.itemCount,i=this.options.itemHeight,n=this.dataSource.total();return Math.min(Math.max(n-t,0),Math.max(0,Math.floor(e/i)))},_listIndex:function(e,t){var i=this._bufferSizes(),n;n=e-(e>t?i.down:i.up);return this._indexConstraint(n)},_selectable:function(){if(this.options.selectable){this._selectProxy=m.proxy(this,"_clickHandler");this.element.on(k+T,"."+c,this._selectProxy)}},getElementIndex:function(e){if(!(e instanceof jQuery)){return g}return parseInt(e.attr("data-offset-index"),10)},_getIndecies:function(e){var t=[],i;if(typeof e==="function"){i=this.dataSource.flatView();for(var n=0;n<i.length;n++){if(e(i[n])){t.push(n);break}}}if(typeof e==="number"){t.push(e)}var r=this.getElementIndex(e);if(!isNaN(r)){t.push(r)}if(e instanceof Array){t=e}return t},_deselect:function(e){var t=[],i,n,r=this._selectedIndexes,a=this._selectedDataItems,o=0,s=this.options.selectable,l=0,d=this._valueGetter,u,c,f=null;e=e.slice();if(s===true||!e.length){for(var h=0;h<r.length;h++){if(r[h]!==g){this._getElementByIndex(r[h]).removeClass(_)}else if(a[h]){this._getElementByDataItem(a[h]).removeClass(_)}t.push({index:r[h],position:h,dataItem:a[h]})}this._values=[];this._selectedDataItems=[];this._selectedIndexes=[]}else if(s==="multiple"){for(var p=0;p<e.length;p++){f=null;o=m.inArray(e[p],r);n=this.dataItemByIndex(e[p]);if(o===-1&&n){for(var v=0;v<a.length;v++){c=E(n)?a[v]===n:d(a[v])===d(n);if(c){u=this._getElementByIndex(e[p]);f=this._deselectSingleItem(u,v,e[p],l)}}}else{i=r[o];if(i!==g){u=this._getElementByIndex(i);f=this._deselectSingleItem(u,o,i,l)}}if(f){e.splice(p,1);t.push(f);l++;p--}}}return{indices:e,removed:t}},_deselectSingleItem:function(e,t,i,n){var r;if(!e.hasClass("k-state-selected")){return}e.removeClass(_);this._values.splice(t,1);this._selectedIndexes.splice(t,1);r=this._selectedDataItems.splice(t,1)[0];return{index:i,position:t+n,dataItem:r}},_deselectCurrentValues:function(e){var t=this.element[0].children;var i,n,r;var a=this._values;var o=[];var s=0;var l;if(this.options.selectable!=="multiple"||!this.isFiltered()){return[]}if(e[0]===-1){m(t).removeClass("k-state-selected");o=m.map(this._selectedDataItems.slice(0),function(e,t){return{dataItem:e,position:t}});this._selectedIndexes=[];this._selectedDataItems=[];this._values=[];return o}for(;s<e.length;s++){r=-1;n=e[s];if(this.dataItemByIndex(n)){i=this._valueGetter(this.dataItemByIndex(n))}for(l=0;l<a.length;l++){if(i==a[l]){r=l;break}}if(r>-1){o.push(this.removeAt(r));m(t[n]).removeClass("k-state-selected")}}return o},_getSkip:function(e,t){var i=e<t?1:Math.floor(e/t)+1;return(i-1)*t},_select:function(e){var n=this,t=this.options.selectable!=="multiple",r=this.dataSource,a,o,s=this.itemCount,l=this._valueGetter,d=[];if(t){n._selectedIndexes=[];n._selectedDataItems=[];n._values=[]}o=r.skip();m.each(e,function(e,t){var i=n._getSkip(t,s);n.mute(function(){r.range(i,s);a=n._findDataItem(r.view(),[t-i]);n._selectedIndexes.push(t);n._selectedDataItems.push(a);n._values.push(E(a)?a:l(a));d.push({index:t,dataItem:a});n._getElementByIndex(t).addClass(_);r.range(o,s)})});n._values=n._checkValuesOrder(n._values);return d},_clickHandler:function(e){var t=m(e.currentTarget);if(!e.isDefaultPrevented()&&t.attr("data-uid")){this.trigger(k,{item:t})}},_buildValueGetter:function(){this._valueGetter=o.getter(this.options.dataValueField)},_calculateGroupPadding:function(e){var t=this.items().first(),i=this.header,n=0;if(i[0]&&i[0].style.display!=="none"){if(e!=="auto"){n=o.support.scrollbar()}n+=parseFloat(t.css("border-right-width"),10)+parseFloat(t.children(".k-group").css("right"),10);i.css("padding-right",n)}},_calculateColumnsHeaderPadding:function(){if(this.options.columns&&this.options.columns.length){var e=o.support.isRtl(this.wrapper);var t=o.support.scrollbar();var i=this.content.parent().parent().find(".k-grid-header");var n=this.dataSource.total();i.css(e?"padding-left":"padding-right",n?t:0)}}});o.ui.VirtualList=z;o.ui.plugin(z)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.autocomplete",["kendo.list","kendo.mobile.scroller","kendo.virtuallist"],e)})(function(){var e={id:"autocomplete",name:"AutoComplete",category:"web",description:"The AutoComplete widget provides suggestions depending on the typed text.It also allows multiple value entries.",depends:["list"],features:[{id:"mobile-scroller",name:"Mobile scroller",description:"Support for kinetic scrolling in mobile device",depends:["mobile.scroller"]},{id:"virtualization",name:"VirtualList",description:"Support for virtualization",depends:["virtuallist"]}]};(function(s,f){var a=window.kendo,e=a.support,h=a.caret,p=a._activeElement,o=e.placeholder,t=a.ui,v=t.List,m=a.keys,i=a.data.DataSource,l="aria-disabled",d="aria-readonly",u="change",c="k-state-default",g="disabled",_="readonly",b="k-state-focused",n="k-state-selected",r="k-hidden",w="k-state-disabled",k="off",y="k-state-hover",x=".kendoAutoComplete",C="mouseenter"+x+" mouseleave"+x,S=s.proxy;function T(e,t,i){return i?t.substring(0,e).split(i).length-1:0}function D(e,t,i){return t.split(i)[T(e,t,i)]}function A(e,t,i,n,r){var a=t.split(n);a.splice(T(e,t,n),1,i);if(n&&a[a.length-1]!==""){a.push("")}return a.join(r)}var E=v.extend({init:function(e,t){var i=this,n,r;i.ns=x;t=s.isArray(t)?{dataSource:t}:t;v.fn.init.call(i,e,t);e=i.element;t=i.options;t.placeholder=t.placeholder||e.attr("placeholder");if(o){e.attr("placeholder",t.placeholder)}i._wrapper();i._loader();i._clearButton();i._dataSource();i._ignoreCase();e[0].type="text";n=i.wrapper;i._popup();e.addClass("k-input").on("keydown"+x,S(i._keydown,i)).on("keypress"+x,S(i._keypress,i)).on("input"+x,S(i._search,i)).on("paste"+x,S(i._search,i)).on("focus"+x,function(){i._prev=i._accessor();i._oldText=i._prev;i._placeholder(false);n.addClass(b)}).on("focusout"+x,function(){i._change();i._placeholder();i.close();n.removeClass(b)}).attr({autocomplete:k,role:"textbox","aria-haspopup":true});i._clear.on("click"+x+" touchend"+x,S(i._clearValue,i));i._enable();i._old=i._accessor();if(e[0].id){e.attr("aria-owns",i.ul[0].id)}i._aria();i._placeholder();i._initList();r=s(i.element).parents("fieldset").is(":disabled");if(r){i.enable(false)}i.listView.bind("click",function(e){e.preventDefault()});i._resetFocusItemHandler=s.proxy(i._resetFocusItem,i);a.notify(i);i._toggleCloseVisibility()},options:{name:"AutoComplete",enabled:true,suggest:false,template:"",groupTemplate:"#:data#",fixedGroupTemplate:"#:data#",dataTextField:"",minLength:1,enforceMinLength:false,delay:200,height:200,filter:"startswith",ignoreCase:true,highlightFirst:false,separator:null,placeholder:"",animation:{},virtual:false,value:null,clearButton:true,autoWidth:false,popup:null},_dataSource:function(){var e=this;if(e.dataSource&&e._refreshHandler){e._unbindDataSource()}else{e._progressHandler=S(e._showBusy,e);e._errorHandler=S(e._hideBusy,e)}e.dataSource=i.create(e.options.dataSource).bind("progress",e._progressHandler).bind("error",e._errorHandler)},setDataSource:function(e){this.options.dataSource=e;this._dataSource();this.listView.setDataSource(this.dataSource)},events:["open","close",u,"select","filtering","dataBinding","dataBound"],setOptions:function(e){var t=this._listOptions(e);v.fn.setOptions.call(this,e);this.listView.setOptions(t);this._accessors();this._aria();this._clearButton()},_listOptions:function(e){var t=v.fn._listOptions.call(this,s.extend(e,{skipUpdateOnBind:true}));t.dataValueField=t.dataTextField;t.selectedItemChange=null;return t},_editable:function(e){var t=this,i=t.element,n=t.wrapper.off(x),r=e.readonly,a=e.disable;if(!r&&!a){n.addClass(c).removeClass(w).on(C,t._toggleHover);i.removeAttr(g).removeAttr(_).attr(l,false).attr(d,false)}else{n.addClass(a?w:c).removeClass(a?c:w);i.attr(g,a).attr(_,r).attr(l,a).attr(d,r)}},close:function(){var e=this;var t=e.listView.focus();if(t){t.removeClass(n)}e.popup.close()},destroy:function(){var e=this;e.element.off(x);e._clear.off(x);e.wrapper.off(x);v.fn.destroy.call(e)},refresh:function(){this.listView.refresh()},select:function(e){this._select(e)},search:function(e){var t=this,i=t.options,n=i.ignoreCase,r=t._separator(),a,o=t.dataSource.options.accentFoldingFiltering;e=e||t._accessor();clearTimeout(t._typingTimeout);if(r){e=D(h(t.element)[0],e,r)}a=e.length;if(!i.enforceMinLength&&!a||a>=i.minLength){t._open=true;t._mute(function(){this.listView.value([])});t._filterSource({value:n?o?e.toLocaleLowerCase(o):e.toLowerCase():e,operator:i.filter,field:i.dataTextField,ignoreCase:n});t.one("close",s.proxy(t._unifySeparators,t))}t._toggleCloseVisibility()},suggest:function(e){var t=this,i=t._last,n=t._accessor(),r=t.element[0],a=h(r)[0],o=t._separator(),s=n.split(o),l=T(a,n,o),d=a,u,c=t.dataSource.options.accentFoldingFiltering;if(i==m.BACKSPACE||i==m.DELETE){t._last=f;return}e=e||"";if(typeof e!=="string"){if(e[0]){e=t.dataSource.view()[v.inArray(e[0],t.ul[0])]}e=e?t._text(e):""}if(a<=0){a=(c?n.toLocaleLowerCase(c):n.toLowerCase()).indexOf(c?e.toLocaleLowerCase(c):e.toLowerCase())+1}u=n.substring(0,a).lastIndexOf(o);u=u>-1?a-(u+o.length):a;n=s[l].substring(0,u);if(e){e=e.toString();u=(c?e.toLocaleLowerCase(c):e.toLowerCase()).indexOf(c?n.toLocaleLowerCase(c):n.toLowerCase());if(u>-1){e=e.substring(u+n.length);d=a+e.length;n+=e}if(o&&s[s.length-1]!==""){s.push("")}}s[l]=n;t._accessor(s.join(o||""));if(r===p()){h(r,a,d)}},value:function(e){if(e!==f){this.listView.value(e);this._accessor(e);this._old=this._accessor();this._oldText=this._accessor()}else{return this._accessor()}this._toggleCloseVisibility()},_click:function(e){var t=e.item;var i=this;var n=i.element;var r=i.listView.dataItemByIndex(i.listView.getElementIndex(t));e.preventDefault();i._active=true;if(i.trigger("select",{dataItem:r,item:t})){i.close();return}i._oldText=n.val();i._select(t).done(function(){i._blur();h(n,n.val().length)})},_clearText:s.noop,_resetFocusItem:function(){var e=this.options.highlightFirst?0:-1;if(this.options.virtual){this.listView.scrollTo(0)}this.listView.focus(e)},_listBound:function(){var e=this;var t=e.popup;var i=e.options;var n=e.dataSource.flatView();var r=n.length;var a=e.dataSource._group?e.dataSource._group.length:0;var o=e.element[0]===p();var s;e._renderFooter();e._renderNoData();e._toggleNoData(!r);e._toggleHeader(!!a&&!!r);e._resizePopup();t.position();if(r){if(i.suggest&&o&&e._inputValue()){e.suggest(n[0])}}if(e._open){e._open=false;s=e._allowOpening()?"open":"close";if(e._typingTimeout&&!o){s="close"}if(r){e._resetFocusItem();if(i.virtual){e.popup.unbind("activate",e._resetFocusItemHandler).one("activate",e._resetFocusItemHandler)}}t[s]();e._typingTimeout=f}if(e._touchScroller){e._touchScroller.reset()}e._hideBusy();e.trigger("dataBound")},_mute:function(e){this._muted=true;e.call(this);this._muted=false},_listChange:function(){var e=this._active||this.element[0]===p();if(e&&!this._muted){this._selectValue(this.listView.selectedDataItems()[0])}},_selectValue:function(e){var t=this._separator();var i="";if(e){i=this._text(e)}if(i===null){i=""}if(t){i=A(h(this.element)[0],this._accessor(),i,t,this._defaultSeparator())}this._prev=i;this._accessor(i);this._placeholder()},_unifySeparators:function(){this._accessor(this.value().split(this._separator()).join(this._defaultSeparator()));return this},_preselect:function(e,t){this._inputValue(t);this._accessor(e);this._old=this.oldText=this._accessor();this.listView.setValue(e);this._placeholder()},_change:function(){var e=this;var t=e._unifySeparators().value();var i=t!==v.unifyType(e._old,typeof t);var n=i&&!e._typing;var r=e._oldText!==t;e._old=t;e._oldText=t;if(n||r){e.element.trigger(u)}if(i){e.trigger(u)}e.typing=false;e._toggleCloseVisibility()},_accessor:function(e){var t=this,i=t.element[0];if(e!==f){i.value=e===null?"":e;t._placeholder()}else{e=i.value;if(i.className.indexOf("k-readonly")>-1){if(e===t.options.placeholder){return""}else{return e}}return e}},_keydown:function(e){var t=this;var i=e.keyCode;var n=t.listView;var r=t.popup.visible();var a=n.focus();t._last=i;if(i===m.DOWN){if(r){this._move(a?"focusNext":"focusFirst")}else if(t.value()){t._filterSource({value:t.ignoreCase?t.value().toLowerCase():t.value(),operator:t.options.filter,field:t.options.dataTextField,ignoreCase:t.ignoreCase}).done(function(){if(t._allowOpening()){t._resetFocusItem();t.popup.open()}})}e.preventDefault()}else if(i===m.UP){if(r){this._move(a?"focusPrev":"focusLast")}e.preventDefault()}else if(i===m.HOME){this._move("focusFirst")}else if(i===m.END){this._move("focusLast")}else if(i===m.ENTER||i===m.TAB){if(i===m.ENTER&&r){e.preventDefault()}if(r&&a){var o=n.dataItemByIndex(n.getElementIndex(a));if(t.trigger("select",{dataItem:o,item:a})){return}this._select(a)}this._blur()}else if(i===m.ESC){if(r){e.preventDefault()}else{t._clearValue()}t.close()}else if(t.popup.visible()&&(i===m.PAGEDOWN||i===m.PAGEUP)){e.preventDefault();var s=i===m.PAGEDOWN?1:-1;n.scrollWith(s*n.screenHeight())}else{t.popup._hovered=true;t._search()}},_keypress:function(){this._oldText=this.element.val();this._typing=true},_move:function(e){this.listView[e]();if(this.options.suggest){this.suggest(this.listView.focus())}},_hideBusy:function(){var e=this;clearTimeout(e._busy);e._loading.addClass(r);e.element.attr("aria-busy",false);e._busy=null;e._showClear()},_showBusy:function(){var e=this;if(e._busy){return}e._busy=setTimeout(function(){e.element.attr("aria-busy",true);e._loading.removeClass(r);e._hideClear()},100)},_placeholder:function(e){if(o){return}var t=this,i=t.element,n=t.options.placeholder,r;if(n){r=i.val();if(e===f){e=!r}if(!e){if(r!==n){n=r}else{n=""}}if(r===t._old&&!e){return}i.toggleClass("k-readonly",e).val(n);if(!n&&i[0]===document.activeElement){h(i[0],0,0)}}},_separator:function(){var e=this.options.separator;if(e instanceof Array){return new RegExp(e.join("|"),"gi")}return e},_defaultSeparator:function(){var e=this.options.separator;if(e instanceof Array){return e[0]}return e},_inputValue:function(){return this.element.val()},_search:function(){var e=this;clearTimeout(e._typingTimeout);e._typingTimeout=setTimeout(function(){if(e._prev!==e._accessor()){e._prev=e._accessor();e.search()}},e.options.delay)},_select:function(e){var t=this;t._active=true;return t.listView.select(e).done(function(){t._active=false})},_loader:function(){this._loading=s('<span class="k-icon k-i-loading '+r+'"></span>').insertAfter(this.element)},_clearButton:function(){v.fn._clearButton.call(this);if(this.options.clearButton){this._clear.insertAfter(this.element);this.wrapper.addClass("k-autocomplete-clearable")}},_toggleHover:function(e){s(e.currentTarget).toggleClass(y,e.type==="mouseenter")},_toggleCloseVisibility:function(){if(this.value()){this._showClear()}else{this._hideClear()}},_wrapper:function(){var e=this,t=e.element,i=t[0],n;n=t.parent();if(!n.is("span.k-widget")){n=t.wrap("<span />").parent()}n.attr("tabindex",-1);n.attr("role","presentation");n[0].style.cssText=i.style.cssText;t.css({width:"",height:i.style.height});e._focused=e.element;e.wrapper=n.addClass("k-widget k-widget-2021 k-autocomplete").addClass(i.className).removeClass("input-validation-error");e._inputWrapper=s(n[0])},_clearValue:function(){v.fn._clearValue.call(this);this.element.focus()}});t.plugin(E)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.dropdownlist",["kendo.list","kendo.mobile.scroller","kendo.virtuallist"],e)})(function(){var e={id:"dropdownlist",name:"DropDownList",category:"web",description:"The DropDownList widget displays a list of values and allows the selection of a single value from the list.",depends:["list"],features:[{id:"mobile-scroller",name:"Mobile scroller",description:"Support for kinetic scrolling in mobile device",depends:["mobile.scroller"]},{id:"virtualization",name:"VirtualList",description:"Support for virtualization",depends:["virtuallist"]}]};(function(s,l){var d=window.kendo,e=d.ui,a=e.List,u=e.Select,o=d.support,c=d._activeElement,f=d.data.ObservableObject,h=d.keys,p=".kendoDropDownList",i=p+"FocusEvent",v="disabled",m="readonly",r="change",n="k-state-focused",g="k-state-default",_="k-state-disabled",b="aria-disabled",w="aria-readonly",k="click"+p+" touchend"+p,y="mouseenter"+p+" mouseleave"+p,x="tabindex",C="filter",S="accept",T="The `optionLabel` option is not valid due to missing fields. Define a custom optionLabel as shown here http://docs.telerik.com/kendo-ui/api/javascript/ui/dropdownlist#configuration-optionLabel",D=s.proxy;var t=u.extend({init:function(e,t){var i=this;var n=t&&t.index;var r,a,o;i.ns=p;t=s.isArray(t)?{dataSource:t}:t;u.fn.init.call(i,e,t);t=i.options;e=i.element.on("focus"+p,D(i._focusHandler,i));i._focusInputHandler=s.proxy(i._focusInput,i);i.optionLabel=s();i._optionLabel();i._inputTemplate();i._reset();i._prev="";i._word="";i._wrapper();i._tabindex();i.wrapper.data(x,i.wrapper.attr(x));i._span();i._popup();i._mobile();i._dataSource();i._ignoreCase();i._filterHeader();i._aria();i.wrapper.attr("aria-live","polite");i._enable();i._attachFocusHandlers();i._oldIndex=i.selectedIndex=-1;if(n!==l){t.index=n}i._initialIndex=t.index;i.requireValueMapper(i.options);i._initList();i.listView.one("dataBound",D(i._attachAriaActiveDescendant,i));i._cascade();i.one("set",function(e){if(!e.sender.listView.bound()&&i.hasOptionLabel()){i._textAccessor(i._optionLabelText())}});if(t.autoBind){i.dataSource.fetch()}else if(i.selectedIndex===-1){a=t.text||"";if(!a){r=t.optionLabel;if(r&&t.index===0){a=r}else if(i._isSelect){a=e.children(":selected").text()}}i._textAccessor(a)}o=s(i.element).parents("fieldset").is(":disabled");if(o){i.enable(false)}i.listView.bind("click",function(e){e.preventDefault()});d.notify(i)},options:{name:"DropDownList",enabled:true,autoBind:true,index:0,text:null,value:null,delay:500,height:200,dataTextField:"",dataValueField:"",optionLabel:"",cascadeFrom:"",cascadeFromField:"",cascadeFromParentField:"",ignoreCase:true,animation:{},filter:"none",minLength:1,enforceMinLength:false,virtual:false,template:null,valueTemplate:null,optionLabelTemplate:null,groupTemplate:"#:data#",fixedGroupTemplate:"#:data#",autoWidth:false,popup:null},events:["open","close",r,"select","filtering","dataBinding","dataBound","cascade","set","kendoKeydown"],setOptions:function(e){u.fn.setOptions.call(this,e);this.listView.setOptions(this._listOptions(e));this._optionLabel();this._inputTemplate();this._accessors();this._filterHeader();this._enable();this._aria();if(!this.value()&&this.hasOptionLabel()){this.select(0)}},destroy:function(){var e=this;u.fn.destroy.call(e);e.wrapper.off(p);e.wrapper.off(i);e.element.off(p);e._inputWrapper.off(p);e._arrow.off();e._arrow=null;e._arrowIcon=null;e.optionLabel.off();if(e.filterInput){e.filterInput.off(i)}},open:function(){var e=this;var t=e.dataSource.filter()?e.dataSource.filter().filters.length>0:false;var i=this.listView;if(e.popup.visible()){return}if(!e.listView.bound()||e._state===S){e._open=true;e._state="rebind";if(e.filterInput){e.filterInput.val("");e._prev=""}if(e.filterInput&&e.options.minLength!==1&&!t){e.refresh();e.popup.one("activate",e._focusInputHandler);e.wrapper.attr("aria-activedescendant",i._optionID);e.popup.open();e._resizeFilterInput()}else{e._filterSource()}}else if(e._allowOpening()){e._focusFilter=true;e.popup.one("activate",e._focusInputHandler);e.popup._hovered=true;e.wrapper.attr("aria-activedescendant",i._optionID);e.popup.open();e._resizeFilterInput();e._focusItem()}},close:function(){this._attachAriaActiveDescendant();this.popup.close()},_attachAriaActiveDescendant:function(){var e=this.wrapper,t=e.find(".k-input").attr("id");e.attr("aria-activedescendant",t)},_focusInput:function(){this._focusElement(this.filterInput)},_resizeFilterInput:function(){var e=this.filterInput;var t=this._prevent;if(!e){return}var i=this.filterInput[0]===c();var n=d.caret(this.filterInput[0])[0];this._prevent=true;e.css("display","none").css("width",this.popup.element.css("width")).css("display","inline-block");if(i){e.focus();d.caret(e[0],n)}this._prevent=t},_allowOpening:function(){return this.hasOptionLabel()||this.filterInput||u.fn._allowOpening.call(this)},toggle:function(e){this._toggle(e,true)},current:function(e){var t;if(e===l){t=this.listView.focus();if(!t&&this.selectedIndex===0&&this.hasOptionLabel()){return this.optionLabel}return t}this._focus(e)},dataItem:function(e){var t=this;var i=null;if(e===null){return e}if(e===l){i=t.listView.selectedDataItems()[0]}else{if(typeof e!=="number"){if(t.options.virtual){return t.dataSource.getByUid(s(e).data("uid"))}if(e.hasClass("k-list-optionlabel")){e=-1}else{e=s(t.items()).index(e)}}else if(t.hasOptionLabel()){e-=1}i=t.dataSource.flatView()[e]}if(!i){i=t._optionLabelDataItem()}return i},refresh:function(){this.listView.refresh()},text:function(e){var t=this;var i;var n=t.options.ignoreCase;e=e===null?"":e;if(e!==l){if(typeof e!=="string"){t._textAccessor(e);return}i=n?e.toLowerCase():e;t._select(function(e){e=t._text(e);if(n){e=(e+"").toLowerCase()}return e===i}).done(function(){t._textAccessor(t.dataItem()||e)})}else{return t._textAccessor()}},_clearFilter:function(){s(this.filterInput).val("");u.fn._clearFilter.call(this)},value:function(e){var t=this;var i=t.listView;var n=t.dataSource;if(e===l){e=t._accessor()||t.listView.value()[0];return e===l||e===null?"":e}t.requireValueMapper(t.options,e);if(e||!t.hasOptionLabel()){t._initialIndex=null}this.trigger("set",{value:e});if(t._request&&t.options.cascadeFrom&&t.listView.bound()){if(t._valueSetter){n.unbind(r,t._valueSetter)}t._valueSetter=D(function(){t.value(e)},t);n.one(r,t._valueSetter);return}if(t._isFilterEnabled()&&i.bound()&&i.isFiltered()){t._clearFilter()}else{t._fetchData()}i.value(e).done(function(){t._old=t._valueBeforeCascade=t._accessor();t._oldIndex=t.selectedIndex})},hasOptionLabel:function(){return this.optionLabel&&!!this.optionLabel[0]},_optionLabel:function(){var e=this;var t=e.options;var i=t.optionLabel;var n=t.optionLabelTemplate;if(!i){e.optionLabel.off().remove();e.optionLabel=s();return}if(!n){n="#:";if(typeof i==="string"){n+="data"}else{n+=d.expr(t.dataTextField,"data")}n+="#"}if(typeof n!=="function"){n=d.template(n)}e.optionLabelTemplate=n;if(!e.hasOptionLabel()){e.optionLabel=s('<div class="k-list-optionlabel"></div>').prependTo(e.list)}e.optionLabel.html(n(i)).off().on(k,D(e._click,e)).on(y,e._toggleHover);e.angular("compile",function(){return{elements:e.optionLabel,data:[{dataItem:e._optionLabelDataItem()}]}})},_optionLabelText:function(){var e=this.options.optionLabel;return typeof e==="string"?e:this._text(e)},_optionLabelDataItem:function(){var e=this;var t=e.options.optionLabel;if(e.hasOptionLabel()){return s.isPlainObject(t)?new f(t):e._assignInstance(e._optionLabelText(),"")}return l},_buildOptions:function(e){var t=this;if(!t._isSelect){return}var i=t.listView.value()[0];var n=t._optionLabelDataItem();var r=n&&t._value(n);if(i===l||i===null){i=""}if(n){if(r===l||r===null){r=""}n='<option value="'+r+'">'+t._text(n)+"</option>"}t._options(e,n,i);if(i!==a.unifyType(t._accessor(),typeof i)){t._customOption=null;t._custom(i)}},_listBound:function(){var e=this;var t=e._initialIndex;var i=e._state===C;var n=e.dataSource.flatView();var r;e._presetValue=false;e._renderFooter();e._renderNoData();e._toggleNoData(!n.length);e._resizePopup(true);e.popup.position();e._buildOptions(n);if(!i){if(e._open){e.toggle(e._allowOpening())}e._open=false;if(!e._fetch){if(n.length){if(!e.listView.value().length&&t>-1&&t!==null){e.select(t)}e._initialIndex=null;r=e.listView.selectedDataItems()[0];if(r&&e.text()!==e._text(r)){e._selectValue(r)}}else if(e._textAccessor()!==e._optionLabelText()){e.listView.value("");e._selectValue(null);e._oldIndex=e.selectedIndex}}}e._hideBusy();e.trigger("dataBound")},_listChange:function(){this._selectValue(this.listView.selectedDataItems()[0]);if(this._presetValue||this._old&&this._oldIndex===-1){this._oldIndex=this.selectedIndex}},_filterPaste:function(){this._search()},_attachFocusHandlers:function(){var e=this;var t=e.wrapper;t.on("focusin"+i,D(e._focusinHandler,e)).on("focusout"+i,D(e._focusoutHandler,e));if(e.filterInput){e.filterInput.on("focusin"+i,D(e._focusinHandler,e)).on("focusout"+i,D(e._focusoutHandler,e))}},_focusHandler:function(){this.wrapper.focus()},_focusinHandler:function(){this._inputWrapper.addClass(n);this._prevent=false},_focusoutHandler:function(){var e=this;var t=window.self!==window.top;if(!e._prevent){clearTimeout(e._typingTimeout);if(o.mobileOS.ios&&t){e._change()}else{e._blur()}e._inputWrapper.removeClass(n);e._prevent=true;e._open=false;e.element.blur()}},_wrapperMousedown:function(){this._prevent=!!this.filterInput},_wrapperClick:function(e){e.preventDefault();this.popup.unbind("activate",this._focusInputHandler);this._focused=this.wrapper;this._prevent=false;this._toggle()},_editable:function(e){var t=this;var i=t.element;var n=e.disable;var r=e.readonly;var a=t.wrapper.add(t.filterInput).off(p);var o=t._inputWrapper.off(y);if(!r&&!n){i.removeAttr(v).removeAttr(m);o.addClass(g).removeClass(_).on(y,t._toggleHover);a.attr(x,a.data(x)).attr(b,false).attr(w,false).on("keydown"+p,t,D(t._keydown,t)).on(d.support.mousedown+p,D(t._wrapperMousedown,t)).on("paste"+p,D(t._filterPaste,t));t.wrapper.on("click"+p,D(t._wrapperClick,t));if(!t.filterInput){a.on("keypress"+p,D(t._keypress,t))}else{a.on("input"+p,D(t._search,t))}}else if(n){a.removeAttr(x);o.addClass(_).removeClass(g)}else{o.addClass(g).removeClass(_)}i.attr(v,n).attr(m,r);a.attr(b,n).attr(w,r)},_keydown:function(e){var t=this;var i=e.keyCode;var n=e.altKey;var r;var a;var o=t.popup.visible();if(t.filterInput){r=t.filterInput[0]===c()}if(i===h.LEFT){i=h.UP;a=true}else if(i===h.RIGHT){i=h.DOWN;a=true}if(a&&r){return}e.keyCode=i;if(n&&i===h.UP||i===h.ESC){t._focusElement(t.wrapper)}if(t._state===C&&i===h.ESC){t._clearFilter();t._open=false;t._state=S}if(i===h.ENTER&&t._typingTimeout&&t.filterInput&&o){e.preventDefault();return}if(i===h.SPACEBAR&&!r){t.toggle(!o);e.preventDefault()}a=t._move(e);if(a){return}if(!o||!t.filterInput){var s=t._focus();if(i===h.HOME){a=true;t._firstItem()}else if(i===h.END){a=true;t._lastItem()}if(a){if(t.trigger("select",{dataItem:t._getElementDataItem(t._focus()),item:t._focus()})){t._focus(s);return}t._select(t._focus(),true).done(function(){if(!o){t._blur()}});e.preventDefault()}}if(!n&&!a&&t.filterInput){t._search()}},_matchText:function(e,t){var i=this.options.ignoreCase;if(e===l||e===null){return false}e=e+"";if(i){e=e.toLowerCase()}return e.indexOf(t)===0},_shuffleData:function(e,t){var i=this._optionLabelDataItem();if(i){e=[i].concat(e)}return e.slice(t).concat(e.slice(0,t))},_selectNext:function(){var t=this;var e=t.dataSource.flatView();var i=e.length+(t.hasOptionLabel()?1:0);var n=I(t._word,t._last);var r=t.selectedIndex;var a;var o;if(r===-1){r=0}else{r+=n?1:0;r=E(r,i)}e=e.toJSON?e.toJSON():e.slice();e=t._shuffleData(e,r);for(var s=0;s<i;s++){o=t._text(e[s]);if(n&&t._matchText(o,t._last)){break}else if(t._matchText(o,t._word)){break}}if(s!==i){a=t._focus();t._select(E(r+s,i)).done(function(){var e=function(){if(!t.popup.visible()){t._change()}};if(t.trigger("select",{dataItem:t._getElementDataItem(t._focus()),item:t._focus()})){t._select(a).done(e)}else{e()}})}},_keypress:function(e){var t=this;if(e.which===0||e.keyCode===d.keys.ENTER){return}var i=String.fromCharCode(e.charCode||e.keyCode);if(t.options.ignoreCase){i=i.toLowerCase()}if(i===" "){e.preventDefault()}t._word+=i;t._last=i;t._search()},_popupOpen:function(){var e=this.popup;e.wrapper=d.wrap(e.element);if(e.element.closest(".km-root")[0]){e.wrapper.addClass("km-popup km-widget");this.wrapper.addClass("km-widget")}},_popup:function(){u.fn._popup.call(this);this.popup.one("open",D(this._popupOpen,this))},_getElementDataItem:function(e){if(!e||!e[0]){return null}if(e[0]===this.optionLabel[0]){return this._optionLabelDataItem()}return this.listView.dataItemByIndex(this.listView.getElementIndex(e))},_click:function(e){var t=this;var i=e.item||s(e.currentTarget);e.preventDefault();if(t.trigger("select",{dataItem:t._getElementDataItem(i),item:i})){t.close();return}t._userTriggered=true;t._select(i).done(function(){t._blur();t._focusElement(t.wrapper)})},_focusElement:function(e){var t=c();var i=this.wrapper;var n=this.filterInput;var r=e===n?i:n;var a=o.mobileOS&&(o.touch||o.MSPointers||o.pointers);if(n&&n[0]===e[0]&&a){return}if(n&&(r[0]===t||this._focusFilter)){this._focusFilter=false;this._prevent=true;this._focused=e.focus()}},_searchByWord:function(t){if(!t){return}var i=this;var e=i.options.ignoreCase;if(e){t=t.toLowerCase()}i._select(function(e){return i._matchText(i._text(e),t)})},_inputValue:function(){return this.text()},_search:function(){var t=this;var e=t.dataSource;clearTimeout(t._typingTimeout);if(t._isFilterEnabled()){t._typingTimeout=setTimeout(function(){var e=t.filterInput.val();if(t._prev!==e){t._prev=e;t.search(e);t._resizeFilterInput()}t._typingTimeout=null},t.options.delay)}else{t._typingTimeout=setTimeout(function(){t._word=""},t.options.delay);if(!t.listView.bound()){e.fetch().done(function(){t._selectNext()});return}t._selectNext()}},_get:function(e){var t,i,n;var r=typeof e==="function";var a=!r?s(e):s();if(this.hasOptionLabel()){if(typeof e==="number"){if(e>-1){e-=1}}else if(a.hasClass("k-list-optionlabel")){e=-1}}if(r){t=this.dataSource.flatView();for(n=0;n<t.length;n++){if(e(t[n])){e=n;i=true;break}}if(!i){e=-1}}return e},_firstItem:function(){if(this.hasOptionLabel()){this._focus(this.optionLabel)}else{this.listView.focusFirst()}},_lastItem:function(){this._resetOptionLabel();this.listView.focusLast()},_nextItem:function(){var e;if(this.optionLabel.hasClass("k-state-focused")){this._resetOptionLabel();this.listView.focusFirst();e=1}else{e=this.listView.focusNext()}return e},_prevItem:function(){var e;if(this.optionLabel.hasClass("k-state-focused")){return}e=this.listView.focusPrev();if(!this.listView.focus()&&!this.options.virtual){this._focus(this.optionLabel)}return e},_focusItem:function(){var e=this.options;var t=this.listView;var i=t.focus();var n=t.select();n=n[n.length-1];if(n===l&&e.highlightFirst&&!i){n=0}if(n!==l){t.focus(n)}else{if(e.optionLabel&&(!e.virtual||e.virtual.mapValueTo!=="dataItem")){this._focus(this.optionLabel);this._select(this.optionLabel);this.listView.content.scrollTop(0)}else{t.scrollToIndex(0)}}},_resetOptionLabel:function(e){this.optionLabel.removeClass("k-state-focused"+(e||"")).removeAttr("id")},_focus:function(e){var t=this.listView;var i=this.optionLabel;if(e===l){e=t.focus();if(!e&&i.hasClass("k-state-focused")){e=i}return e}this._resetOptionLabel();e=this._get(e);t.focus(e);if(e===-1){i.addClass("k-state-focused").attr("id",t._optionID);this._focused.add(this.filterInput).removeAttr("aria-activedescendant").attr("aria-activedescendant",t._optionID)}},_select:function(e,t){var i=this;e=i._get(e);return i.listView.select(e).done(function(){if(!t&&i._state===C){i._state=S}if(e===-1){i._selectValue(null)}})},_selectValue:function(e){var t=this;var i=t.options.optionLabel;var n=t.listView.select();var r="";var a="";n=n[n.length-1];if(n===l){n=-1}this._resetOptionLabel(" k-state-selected");if(e||e===0){a=e;r=t._dataValue(e);if(i){n+=1}}else if(i){t._focus(t.optionLabel.addClass("k-state-selected"));a=t._optionLabelText();if(typeof i==="string"){r=""}else{r=t._value(i)}n=0}t.selectedIndex=n;if(r===null){r=""}t._textAccessor(a);t._accessor(r,n);t._triggerCascade()},_mobile:function(){var e=this,t=e.popup,i=o.mobileOS,n=t.element.parents(".km-root").eq(0);if(n.length&&i){t.options.animation.open.effects=i.android||i.meego?"fadeIn":i.ios||i.wp?"slideIn:up":t.options.animation.open.effects}},_filterHeader:function(){var e;if(this.filterInput){this.filterInput.off(p).parent().remove();this.filterInput=null}if(this._isFilterEnabled()){e='<span class="k-icon k-i-zoom"></span>';this.filterInput=s('<input class="k-textbox"/>').attr({placeholder:this.element.attr("placeholder"),title:this.element.attr("title"),role:"listbox","aria-haspopup":"listbox","aria-expanded":false});this.list.prepend(s('<span class="k-list-filter" />').append(this.filterInput.add(e)))}},_span:function(){var e=this,t=e.wrapper,i="span.k-input",n=d.guid(),r;r=t.find(i);if(!r[0]){t.append('<span unselectable="on" class="k-dropdown-wrap k-state-default"><span id="'+n+'" unselectable="on" role="option" aria-selected="true" class="k-input">&nbsp;</span><span unselectable="on" class="k-select" aria-label="select"><span class="k-icon k-i-arrow-60-down"></span></span></span>').append(e.element);r=t.find(i)}e.span=r;e._inputWrapper=s(t[0].firstChild);e._arrow=t.find(".k-select");e._arrowIcon=e._arrow.find(".k-icon")},_wrapper:function(){var e=this,t=e.element,i=t[0],n;n=t.parent();if(!n.is("span.k-widget")){n=t.wrap("<span />").parent();n[0].style.cssText=i.style.cssText;n[0].title=i.title}e._focused=e.wrapper=n.addClass("k-widget k-widget-2021 k-dropdown").addClass(i.className).removeClass("input-validation-error").css("display","").attr({accesskey:t.attr("accesskey"),unselectable:"on",role:"listbox","aria-haspopup":"listbox","aria-expanded":false});t.hide().removeAttr("accesskey")},_clearSelection:function(e){this.select(e.value()?0:-1)},_inputTemplate:function(){var e=this,t=e.options.valueTemplate;if(!t){t=s.proxy(d.template("#:this._text(data)#",{useWithBlock:false}),e)}else{t=d.template(t)}e.valueTemplate=t;if(e.hasOptionLabel()&&!e.options.optionLabelTemplate){try{e.valueTemplate(e._optionLabelDataItem())}catch(e){throw new Error(T)}}},_textAccessor:function(e){var t=null;var i=this.valueTemplate;var n=this._optionLabelText();var r=this.span;if(e===l){return r.text()}if(s.isPlainObject(e)||e instanceof f){t=e}else if(n&&n===e){t=this.options.optionLabel}if(!t){t=this._assignInstance(e,this._accessor())}if(this.hasOptionLabel()){if(t===n||this._text(t)===n){i=this.optionLabelTemplate;if(typeof this.options.optionLabel==="string"&&!this.options.optionLabelTemplate){t=n}}}var a=function(){return{elements:r.get(),data:[{dataItem:t}]}};this.angular("cleanup",a);try{r.html(i(t))}catch(e){r.html("")}this.angular("compile",a)},_preselect:function(e,t){if(!e&&!t){t=this._optionLabelText()}this._accessor(e);this._textAccessor(t);this._old=this._accessor();this._oldIndex=this.selectedIndex;this.listView.setValue(e);this._initialIndex=null;this._presetValue=true},_assignInstance:function(e,t){var i=this.options.dataTextField;var n={};if(i){A(n,i.split("."),e);A(n,this.options.dataValueField.split("."),t);n=new f(n)}else{n=e}return n}});function A(e,t,i){var n=0,r=t.length-1,a;for(;n<r;++n){a=t[n];if(!(a in e)){e[a]={}}e=e[a]}e[t[r]]=i}function E(e,t){if(e>=t){e-=t}return e}function I(e,t){for(var i=0;i<e.length;i++){if(e.charAt(i)!==t){return false}}return true}e.plugin(t)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.treeview.draganddrop",["kendo.data","kendo.draganddrop"],e)})(function(){var e={id:"treeview.draganddrop",name:"Hierarchical Drag & Drop",category:"framework",depends:["core","draganddrop"],advanced:true};(function(m,e){var g=window.kendo;var i=g.ui;var n=m.proxy;var r=m.extend;var _="visibility";var b="k-state-hover";var a="input,a:not(.k-in),textarea,.k-multiselect-wrap,select,button,a.k-button>.k-icon,button.k-button>.k-icon,span.k-icon.k-i-arrow-60-right,span.k-icon.k-i-arrow-45-down-right";var t="<div class='k-drop-hint k-drop-hint-h'>"+"<div class='k-drop-hint-start'></div>"+"<div class='k-drop-hint-line'></div>"+"</div>";i.HierarchicalDragAndDrop=g.Class.extend({init:function(e,t){this.element=e;this.hovered=e;this.options=r({dragstart:m.noop,drag:m.noop,drop:m.noop,dragend:m.noop},t);this._draggable=new i.Draggable(e,{ignore:a,filter:t.filter,autoScroll:t.autoScroll,cursorOffset:{left:10,top:g.support.mobileOS?-40/g.support.zoomLevel():10},hint:n(this._hint,this),dragstart:n(this.dragstart,this),dragcancel:n(this.dragcancel,this),drag:n(this.drag,this),dragend:n(this.dragend,this),$angular:t.$angular,holdToDrag:t.holdToDrag})},_hint:function(e){return"<div class='k-header k-drag-clue'>"+"<span class='k-icon k-drag-status'></span>"+this.options.hintText(e)+"</div>"},_removeTouchHover:function(){if(g.support.touch&&this.hovered){this.hovered.find("."+b).removeClass(b);this.hovered=false}},_hintStatus:function(e){var t=this._draggable.hint.find(".k-drag-status")[0];if(e){t.className="k-icon k-drag-status "+e}else{return g.trim(t.className.replace(/(p|k)-(icon|drag-status)/g,""))}},dragstart:function(e){this.source=e.currentTarget.closest(this.options.itemSelector);if(this.options.dragstart(this.source)){e.preventDefault()}if(this.options.reorderable){this.dropHint=m(t).css(_,"hidden").appendTo(this.element)}else{this.dropHint=m()}},drag:function(e){var t=this.options;var i=this.source;var n=this.dropTarget=m(g.eventTarget(e));var r=n.closest(t.allowedContainers);var a,o,s,l,d;var u,c,f;var h,p,v;if(!r.length){v="k-i-cancel";this._removeTouchHover()}else if(i[0]==n[0]||t.contains(i[0],n[0])){v="k-i-cancel"}else{v="k-i-insert-middle";h=t.itemFromTarget(n);a=h.item;if(a.length){this._removeTouchHover();o=g._outerHeight(a);l=h.content;if(t.reorderable){d=o/(l.length>0?4:2);s=g.getOffset(a).top;u=e.y.location<s+d;c=s+o-d<e.y.location;f=l.length&&!u&&!c}else{f=true;u=false;c=false}this.hovered=f?r:false;this.dropHint.css(_,f?"hidden":"visible");if(this._lastHover&&this._lastHover[0]!=l[0]){this._lastHover.removeClass(b)}this._lastHover=l.toggleClass(b,f);if(f){v="k-i-plus"}else{p=a.position();p.top+=u?0:o;this.dropHint.css(p)[u?"prependTo":"appendTo"](t.dropHintContainer(a));if(u&&h.first){v="k-i-insert-up"}if(c&&h.last){v="k-i-insert-down"}}}else if(n[0]!=this.dropHint[0]){if(this._lastHover){this._lastHover.removeClass(b)}if(!m.contains(this.element[0],r[0])){v="k-i-plus"}else{v="k-i-cancel"}}}this.options.drag({originalEvent:e.originalEvent,source:i,target:n,pageY:e.y.location,pageX:e.x.location,status:v.substring(2),setStatus:function(e){v=e}});if(v.indexOf("k-i-insert")!==0){this.dropHint.css(_,"hidden")}this._hintStatus(v)},dragcancel:function(){this.dropHint.remove()},dragend:function(e){var t="over",i=this.source,n,r=this.dropHint,a=this.dropTarget,o,s;if(r.css(_)=="visible"){t=this.options.dropPositionFrom(r);n=r.closest(this.options.itemSelector)}else if(a){n=a.closest(this.options.itemSelector);if(!n.length){n=a.closest(this.options.allowedContainers)}}o={originalEvent:e.originalEvent,source:i[0],destination:n[0],valid:this._hintStatus()!="k-i-cancel",setValid:function(e){this.valid=e},dropTarget:a[0],position:t};s=this.options.drop(o);r.remove();this._removeTouchHover();if(this._lastHover){this._lastHover.removeClass(b)}if(!o.valid||s){this._draggable.dropped=o.valid;return}this._draggable.dropped=true;this.options.dragend({originalEvent:e.originalEvent,source:i,destination:n,position:t})},destroy:function(){this._lastHover=this.hovered=null;this._draggable.destroy()}})})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.treeview",["kendo.data","kendo.treeview.draganddrop"],e)})(function(){var e={id:"treeview",name:"TreeView",category:"web",description:"The TreeView widget displays hierarchical data in a traditional tree structure,with support for interactive drag-and-drop operations.",depends:["data"],features:[{id:"treeview-dragging",name:"Drag & Drop",description:"Support for drag & drop",depends:["treeview.draganddrop"]}]};(function(g,u){var _=window.kendo,h=_.ui,e=_.data,s=g.extend,n=_.template,o=g.isArray,l=h.Widget,d=e.HierarchicalDataSource,r=g.proxy,c=_.keys,a=".kendoTreeView",i=".kendoTreeViewTemp",f="select",p="check",v="navigate",L="expand",m="change",t="error",b="checked",w="indeterminate",H="collapse",N="dragstart",O="drag",V="drop",W="dragend",U="dataBound",k="click",j="kendoKeydown",y="undefined",G="k-state-hover",x="k-treeview",q=":visible",C=".k-item",S="string",T="aria-checked",D="aria-selected",$="aria-disabled",A="aria-expanded",E="k-state-disabled",K,I,M,R,Y,F={text:"dataTextField",url:"dataUrlField",spriteCssClass:"dataSpriteCssClassField",imageUrl:"dataImageUrlField"},Q=function(e){return e instanceof _.jQuery||window.jQuery&&e instanceof window.jQuery},X=function(e){return typeof HTMLElement==="object"?e instanceof HTMLElement:e&&typeof e==="object"&&e.nodeType===1&&typeof e.nodeName===S};function Z(i){return function(e){var t=e.children(".k-animation-container");if(!t.length){t=e}return t.children(i)}}function P(e){return _.template(e,{useWithBlock:false})}I=Z(".k-group");M=Z(".k-group,.k-content");R=function(e){return e.children("div").children(".k-icon")};function z(e){return e.find(".k-checkbox-wrapper:first input[type=checkbox]")}function J(a){return function(e,r){r=r.closest(C);var t=r.parent(),i;if(t.parent().is("li")){i=t.parent()}return this._dataSourceMove(e,t,i,function(e,t){var i=this.dataItem(r);var n=i?i.parent().indexOf(i):r.index();return this._insert(e.data(),t,n+a)})}}Y=/k-sprite/;function ee(e,t){var i;while(e&&e.nodeName.toLowerCase()!="ul"){i=e;e=e.nextSibling;if(i.nodeType==3){i.nodeValue=_.trim(i.nodeValue)}if(Y.test(i.className)){t.insertBefore(i,t.firstChild)}else{t.appendChild(i)}}}function B(e){var t=e.children("div"),i=e.children("ul"),n=t.children(".k-icon"),r=e.children("input[type=checkbox]"),a=t.children(".k-in");if(e.hasClass("k-treeview")){return}if(!t.length){t=g("<div />").prependTo(e)}if(!n.length&&i.length){n=g("<span class='k-icon' />").prependTo(t)}else if(!i.length||!i.children().length){n.remove();i.remove()}if(r.length){g("<span class='k-checkbox-wrapper' />").appendTo(t).append(r)}if(!a.length){a=e.children("a").eq(0).addClass("k-in k-link");if(!a.length){a=g("<span class='k-in' />")}a.appendTo(t);if(t.length){ee(t[0].nextSibling,a[0])}}}K=_.ui.DataBoundWidget.extend({init:function(e,t){var i=this,n=false,r=t&&!!t.dataSource,a;if(o(t)){t={dataSource:t}}if(t&&typeof t.loadOnDemand==y&&o(t.dataSource)){t.loadOnDemand=false}l.prototype.init.call(i,e,t);e=i.element;t=i.options;i._dataSourceUids={};a=e.is("ul")&&e||e.hasClass(x)&&e.children("ul");n=!r&&a.length;if(n){t.dataSource.list=a}i._animation();i._accessors();i._templates();if(!e.hasClass(x)){i._wrapper();if(a){i.root=e;i._group(i.wrapper)}}else{i.wrapper=e;i.root=e.children("ul").eq(0)}i._tabindex();i.wrapper.attr("role","tree");i._dataSource(n);i._attachEvents();i._dragging();if(!n){if(t.autoBind){i._progress(true);i.dataSource.fetch()}}else{i._syncHtmlAndDataSource()}if(t.checkboxes&&t.checkboxes.checkChildren){i.updateIndeterminate()}if(i.element[0].id){i._ariaId=_.format("{0}_tv_active",i.element[0].id)}_.notify(i)},_attachEvents:function(){var i=this,e=".k-in:not(.k-state-selected,.k-state-disabled)",t="mouseenter";i.wrapper.on(t+a,".k-in.k-state-selected",function(e){e.preventDefault()}).on(t+a,e,function(){g(this).addClass(G)}).on("mouseleave"+a,e,function(){g(this).removeClass(G)}).on(k+a,e,r(i._click,i)).on("dblclick"+a,".k-in:not(.k-state-disabled)",r(i._toggleButtonClick,i)).on(k+a,".k-i-expand,.k-i-collapse",r(i._toggleButtonClick,i)).on("keydown"+a,i,r(i._keydown,i)).on("keypress"+a,r(i._keypress,i)).on("focus"+a,r(i._focus,i)).on("blur"+a,r(i._blur,i)).on("mousedown"+a,".k-in,.k-checkbox-wrapper :checkbox,.k-i-expand,.k-i-collapse",r(i._mousedown,i)).on("change"+a,".k-checkbox-wrapper :checkbox",r(i._checkboxChange,i)).on("click"+a,".checkbox-span",r(i._checkboxLabelClick,i)).on("click"+a,".k-request-retry",r(i._retryRequest,i)).on("click"+a,".k-link.k-state-disabled",function(e){e.preventDefault()}).on("click"+a,function(e){var t=g(e.target);if(!t.is(":kendoFocusable")&&!t.find("input,select,textarea,button,object").is(":kendoFocusable")){i.focus()}})},_checkboxLabelClick:function(e){var t=g(e.target.previousSibling);if(t.is("[disabled]")){return}t.prop("checked",!t.prop("checked"));t.trigger("change")},_syncHtmlAndDataSource:function(e,t){e=e||this.root;t=t||this.dataSource;var i=t.view(),n=_.attr("uid"),r=_.attr("expanded"),a=this.options.checkboxes,o=e.children("li"),s,l,d,u,c;for(s=0;s<o.length;s++){d=i[s];u=d.uid;l=o.eq(s);l.attr("role","treeitem").attr(n,u).attr(D,l.hasClass("k-state-selected"));d.expanded=l.attr(r)==="true";if(a){c=z(l);d.checked=c.prop(b);c.attr("id","_"+u);c.next(".k-checkbox-label").attr("for","_"+u)}this._syncHtmlAndDataSource(l.children("ul"),d.children)}},_animation:function(){var e=this.options,t=e.animation,i=t.collapse&&"effects"in t.collapse,n=s({},t.expand,t.collapse);if(!i){n=s(n,{reverse:true})}if(t===false){t={expand:{effects:{}},collapse:{hide:true,effects:{}}}}t.collapse=s(n,{hide:true});e.animation=t},_dragging:function(){var e=this.options.dragAndDrop;var t=this.dragging;if(e&&!t){var a=this;this.dragging=new h.HierarchicalDragAndDrop(this.element,{reorderable:true,$angular:this.options.$angular,autoScroll:this.options.autoScroll,filter:"div:not(.k-state-disabled) .k-in",allowedContainers:".k-treeview",itemSelector:".k-treeview .k-item",hintText:r(this._hintText,this),contains:function(e,t){return g.contains(e,t)},dropHintContainer:function(e){return e},itemFromTarget:function(e){var t=e.closest(".k-top,.k-mid,.k-bot");return{item:t,content:e.closest(".k-in"),first:t.hasClass("k-top"),last:t.hasClass("k-bot")}},dropPositionFrom:function(e){return e.prevAll(".k-in").length>0?"after":"before"},dragstart:function(e){return a.trigger(N,{sourceNode:e[0]})},drag:function(e){a.trigger(O,{originalEvent:e.originalEvent,sourceNode:e.source[0],dropTarget:e.target[0],pageY:e.pageY,pageX:e.pageX,statusClass:e.status,setStatusClass:e.setStatus})},drop:function(t){var e=g(t.dropTarget);var i=e.closest("a");if(i&&i.attr("href")){a._tempPreventNavigation(i)}return a.trigger(V,{originalEvent:t.originalEvent,sourceNode:t.source,destinationNode:t.destination,valid:t.valid,setValid:function(e){this.valid=e;t.setValid(e)},dropTarget:t.dropTarget,dropPosition:t.position})},dragend:function(t){var e=t.source;var i=t.destination;var n=t.position;function r(e){if(a.options.checkboxes&&a.options.checkboxes.checkChildren){a.updateIndeterminate()}a.trigger(W,{originalEvent:t.originalEvent,sourceNode:e&&e[0],destinationNode:i[0],dropPosition:n})}if(n=="over"){a.append(e,i,r)}else{if(n=="before"){e=a.insertBefore(e,i)}else if(n=="after"){e=a.insertAfter(e,i)}r(e)}}})}else if(!e&&t){t.destroy();this.dragging=null}},_tempPreventNavigation:function(t){t.on(k+a+i,function(e){e.preventDefault();t.off(k+a+i)})},_hintText:function(e){return this.templates.dragClue({item:this.dataItem(e),treeview:this.options})},_templates:function(){var e=this,t=e.options,i=r(e._fieldAccessor,e);if(t.template&&typeof t.template==S){t.template=n(t.template)}else if(!t.template){t.template=P("# var text = "+i("text")+"(data.item); #"+"# if (typeof data.item.encoded != 'undefined' && data.item.encoded === false) {#"+"#= text #"+"# } else { #"+"#: text #"+"# } #")}e._checkboxes();e.templates={setAttributes:function(e){var t="";var i=e.attr||{};for(var n in i){if(i.hasOwnProperty(n)&&n!=="class"){t+=n+'="'+i[n]+'" '}}return t},wrapperCssClass:function(e,t){var i="k-item",n=t.index;if(e.firstLevel&&n===0){i+=" k-first"}if(n==e.length-1){i+=" k-last"}return i},cssClass:function(e,t){var i="",n=t.index,r=e.length-1;if(e.firstLevel&&n===0){i+="k-top "}if(n===0&&n!=r){i+="k-top"}else if(n==r){i+="k-bot"}else{i+="k-mid"}return i},textClass:function(e,t){var i="k-in";if(t){i+=" k-link"}if(e.enabled===false){i+=" k-state-disabled"}if(e.selected===true){i+=" k-state-selected"}return i},toggleButtonClass:function(e){var t="k-icon";if(e.expanded!==true){t+=" k-i-expand"}else{t+=" k-i-collapse"}return t},groupAttributes:function(e){var t="";if(!e.firstLevel){t="role='group'"}return t+(e.expanded!==true?" style='display:none'":"")},groupCssClass:function(e){var t="k-group";if(e.firstLevel){t+=" k-treeview-lines"}return t},dragClue:P("#= data.treeview.template(data) #"),group:P("<ul class='#= data.r.groupCssClass(data.group) #'#= data.r.groupAttributes(data.group) #>"+"#= data.renderItems(data) #"+"</ul>"),itemContent:P("# var imageUrl = "+i("imageUrl")+"(data.item); #"+"# var spriteCssClass = "+i("spriteCssClass")+"(data.item); #"+"# if (imageUrl) { #"+"<img class='k-image' alt='' src='#= imageUrl #'>"+"# } #"+"# if (spriteCssClass) { #"+"<span class='k-sprite #= spriteCssClass #'></span>"+"# } #"+"#= data.treeview.template(data) #"),itemElement:P("# var item = data.item, r = data.r; #"+"# var url = "+i("url")+"(item); #"+"<div class='#= r.cssClass(data.group, item) #'>"+"# if (item.hasChildren) { #"+"<span class='#= r.toggleButtonClass(item) #'></span>"+"# } #"+"# if (data.treeview.checkboxes) { #"+"<span class='k-checkbox-wrapper' role='presentation'>"+"#= data.treeview.checkboxes.template(data) #"+"</span>"+"# } #"+"# var tag = url ? 'a' : 'span'; #"+"# var textAttr = url ? ' href=\\'' + url + '\\'' : ''; #"+"<#=tag# class='#= r.textClass(item, !!url) #'#= textAttr #>"+"#= r.itemContent(data) #"+"</#=tag#>"+"</div>"),item:P("# var item = data.item, r = data.r; #"+"<li role='treeitem' class='#= r.wrapperCssClass(data.group, item) #'"+_.attr("uid")+"='#= item.uid #' "+"#= r.setAttributes(item.toJSON ? item.toJSON() : item) # "+"# if (data.treeview.checkboxes) { #"+'aria-checked=\'#= item.checked ? "true" : "false" #\' '+"# } #"+'aria-selected=\'#= item.selected ? "true" : "false" #\' '+"#=item.enabled === false ? \"aria-disabled='true'\" : ''#"+'aria-expanded=\'#= item.expanded ? "true" : "false" #\' '+'data-expanded=\'#= item.expanded ? "true" : "false" #\' '+">"+"#= r.itemElement(data) #"+"</li>"),loading:P("<div class='k-icon k-i-loading'></div> #: data.messages.loading #"),retry:P("#: data.messages.requestFailed # "+"<button class='k-button k-request-retry'>#: data.messages.retry #</button>")}},items:function(){return this.element.find(".k-item > div:first-child")},setDataSource:function(e){var t=this.options;t.dataSource=e;this._dataSourceUids={};this._dataSource();if(t.checkboxes&&t.checkboxes.checkChildren){this.dataSource.one("change",g.proxy(this.updateIndeterminate,this,null))}if(this.options.autoBind){this.dataSource.fetch()}},_bindDataSource:function(){this._refreshHandler=r(this.refresh,this);this._errorHandler=r(this._error,this);this.dataSource.bind(m,this._refreshHandler);this.dataSource.bind(t,this._errorHandler)},_unbindDataSource:function(){var e=this.dataSource;if(e){e.unbind(m,this._refreshHandler);e.unbind(t,this._errorHandler)}},_dataSource:function(e){var t=this,i=t.options,n=i.dataSource;function r(e){for(var t=0;t<e.length;t++){e[t]._initChildren();e[t].children.fetch();r(e[t].children.view())}}n=o(n)?{data:n}:n;t._unbindDataSource();if(!n.fields){n.fields=[{field:"text"},{field:"url"},{field:"spriteCssClass"},{field:"imageUrl"}]}t.dataSource=n=d.create(n);if(e){n.fetch();r(n.view())}t._bindDataSource()},events:[N,O,V,W,U,L,H,f,m,v,p,j],options:{name:"TreeView",dataSource:{},animation:{expand:{effects:"expand:vertical",duration:200},collapse:{duration:100}},messages:{loading:"Loading...",requestFailed:"Request failed.",retry:"Retry"},dragAndDrop:false,checkboxes:false,autoBind:true,autoScroll:false,loadOnDemand:true,template:"",dataTextField:null},_accessors:function(){var e=this,t=e.options,i,n,r,a=e.element;for(i in F){n=t[F[i]];r=a.attr(_.attr(i+"-field"));if(!n&&r){n=r}if(!n){n=i}if(!o(n)){n=[n]}t[F[i]]=n}},_fieldAccessor:function(e){var t=this.options[F[e]],i=t.length,n="(function(item) {";if(i===0){n+="return item['"+e+"'];"}else{n+="var levels = ["+g.map(t,function(e){return"function(d){ return "+_.expr(e)+"}"}).join(",")+"];";n+="return levels[Math.min(item.level(), "+i+"-1)](item)"}n+="})";return n},setOptions:function(e){l.fn.setOptions.call(this,e);this._animation();this._dragging();this._templates()},_trigger:function(e,t){return this.trigger(e,{node:t.closest(C)[0]})},_setChecked:function(e,t){if(!e||!g.isFunction(e.view)){return}for(var i=0,n=e.view();i<n.length;i++){if(n[i].enabled!==false){this._setCheckedValue(n[i],t)}if(n[i].children){this._setChecked(n[i].children,t)}}},_setCheckedValue:function(e,t){e[b]=t},_setIndeterminate:function(e){var t=I(e),i,n,r=true,a;if(!t.length){return}i=z(t.children());n=i.length;if(!n){return}else if(n>1){for(a=1;a<n;a++){if(i[a].checked!=i[a-1].checked||i[a].indeterminate||i[a-1].indeterminate){r=false;break}}}else{r=!i[0].indeterminate}e.attr(T,r?i[0].checked:"mixed");return z(e).data(w,!r).prop(w,!r).prop(b,r&&i[0].checked)},updateIndeterminate:function(e){e=e||this.wrapper;var t=I(e).children();var i;var n;var r;if(t.length){for(i=0;i<t.length;i++){this.updateIndeterminate(t.eq(i))}if(e.is(".k-treeview")){return}n=this._setIndeterminate(e);r=this.dataItem(e);if(n&&n.prop(b)){r.checked=true}else{if(r){delete r.checked}}}},_bubbleIndeterminate:function(e,t){if(!e.length){return}if(!t){this.updateIndeterminate(e)}var i=this.parent(e),n;if(i.length){this._setIndeterminate(i);n=i.children("div").find(".k-checkbox-wrapper input[type=checkbox]");this._skip=true;if(n.prop(w)===false){this.dataItem(i).set(b,n.prop(b))}else{this.dataItem(i).set(b,false)}this._skip=false;this._bubbleIndeterminate(i,true)}},_checkboxChange:function(e){var t=this;var i=g(e.target);var n=i.prop(b);var r=i.closest(C);var a=this.dataItem(r);if(this._preventChange){return}if(a.checked!=n){a.set(b,n);r.attr(T,n);this._trigger(p,r)}if(i.is(":focus")){t._trigger(v,r);t.focus()}},_toggleButtonClick:function(e){var t=g(e.currentTarget).closest(C);if(t.is("[aria-disabled='true']")){return}this.toggle(t)},_mousedown:function(e){var t=this;var i=g(e.currentTarget);var n=g(e.currentTarget).closest(C);var r=_.support.browser;if(n.is("[aria-disabled='true']")){return}if((r.msie||r.edge)&&i.is(":checkbox")){if(i.prop(w)){t._preventChange=false;i.prop(b,!i.prop(b));i.trigger(m);i.on(k+a,function(e){e.preventDefault()});t._preventChange=true}else{i.off(k+a);t._preventChange=false}}t._clickTarget=n;t.current(n)},_focusable:function(e){return e&&e.length&&e.is(":visible")&&!e.find(".k-in:first").hasClass(E)},_focus:function(){var e=this.select(),t=this._clickTarget;if(_.support.touch){return}if(t&&t.length){e=t}if(!this._focusable(e)){e=this.current()}if(!this._focusable(e)){e=this._nextVisible(g())}this.current(e)},focus:function(){var e=this.wrapper,t=e[0],i=[],n=[],r=document.documentElement,a;do{t=t.parentNode;if(t.scrollHeight>t.clientHeight){i.push(t);n.push(t.scrollTop)}}while(t!=r);_.focusElement(e);for(a=0;a<i.length;a++){i[a].scrollTop=n[a]}},_blur:function(){this.current().find(".k-in:first").removeClass("k-state-focused")},_enabled:function(e){return!e.children("div").children(".k-in").hasClass(E)},parent:function(e){var t=/\bk-treeview\b/,i=/\bk-item\b/,n,r;if(typeof e==S){e=this.element.find(e)}if(!X(e)){e=e[0]}r=i.test(e.className);do{e=e.parentNode;if(i.test(e.className)){if(r){n=e}else{r=true}}}while(!t.test(e.className)&&!n);return g(n)},_nextVisible:function(e){var t=this,i=t._expanded(e),n;function r(e){while(e.length&&!e.next().length){e=t.parent(e)}if(e.next().length){return e.next()}else{return e}}if(!e.length||!e.is(":visible")){n=t.root.children().eq(0)}else if(i){n=I(e).children().first();if(!n.length){n=r(e)}}else{n=r(e)}return n},_previousVisible:function(e){var t=this,i,n;if(!e.length||e.prev().length){if(e.length){n=e.prev()}else{n=t.root.children().last()}while(t._expanded(n)){i=I(n).children().last();if(!i.length){break}n=i}}else{n=t.parent(e)||e}return n},_keydown:function(e){var t=this,i=e.keyCode,n,r=t.current(),a=t._expanded(r),o=r.find(".k-checkbox-wrapper:first :checkbox"),s=_.support.isRtl(t.element);if(e.target!=e.currentTarget){return}if(!s&&i==c.RIGHT||s&&i==c.LEFT){if(a){n=t._nextVisible(r)}else if(!r.find(".k-in:first").hasClass(E)){t.expand(r)}}else if(!s&&i==c.LEFT||s&&i==c.RIGHT){if(a&&!r.find(".k-in:first").hasClass(E)){t.collapse(r)}else{n=t.parent(r);if(!t._enabled(n)){n=u}}}else if(i==c.DOWN){n=t._nextVisible(r)}else if(i==c.UP){n=t._previousVisible(r)}else if(i==c.HOME){n=t._nextVisible(g())}else if(i==c.END){n=t._previousVisible(g())}else if(i==c.ENTER&&!r.find(".k-in:first").hasClass(E)){if(!r.find(".k-in:first").hasClass("k-state-selected")){if(!t._trigger(f,r)){t.select(r)}}}else if(i==c.SPACEBAR&&o.length){if(!r.find(".k-in:first").hasClass(E)){o.prop(b,!o.prop(b)).data(w,false).prop(w,false);t._checkboxChange({target:o})}n=r}if(n){e.preventDefault();if(r[0]!=n[0]){t._trigger(v,n);t.current(n)}}},_keypress:function(e){var t=this;var i=300;var n=t.current().get(0);var r;var a=e.key;var o=a.length===1;if(!o){return}if(!t._match){t._match=""}t._match+=a;clearTimeout(t._matchTimer);t._matchTimer=setTimeout(function(){t._match=""},i);r=n&&t._matchNextByText(Array.prototype.indexOf.call(t.element.find(".k-item"),n),t._match);if(!r.length){r=t._matchNextByText(-1,t._match)}if(r.get(0)&&r.get(0)!==n){t._trigger(v,r);t.current(r)}},_matchNextByText:function(i,n){var e=this.element;var t=e.find(".k-in").filter(function(e,t){return e>i&&g(t).is(":visible")&&g(t).text().toLowerCase().indexOf(n)===0});return t.eq(0).closest(C)},_click:function(e){var t=this,i=g(e.currentTarget),n=M(i.closest(C)),r=i.attr("href"),a;if(r){a=r=="#"||r.indexOf("#"+this.element.id+"-")>=0}else{a=n.length&&!n.children().length}if(a){e.preventDefault()}if(!i.hasClass(".k-state-selected")&&!t._trigger(f,i)){t.select(i)}},_wrapper:function(){var e=this,t=e.element,i,n,r="k-widget k-widget-2021 k-treeview";if(t.is("ul")){i=t.wrap("<div />").parent();n=t}else{i=t;n=i.children("ul").eq(0)}e.wrapper=i.addClass(r);e.root=n},_getSelectedNode:function(){return this.element.find(".k-state-selected").closest(C)},_group:function(e){var t=this,i=e.hasClass(x),n={firstLevel:i,expanded:i||t._expanded(e)},r=e.children("ul");r.addClass(t.templates.groupCssClass(n)).css("display",n.expanded?"":"none");if(!i){r.attr("role","group")}t._nodes(r,n)},_nodes:function(e,i){var n=this,t=e.children("li"),r;i=s({length:t.length},i);t.each(function(e,t){t=g(t);r={index:e,expanded:n._expanded(t)};B(t);n._updateNodeClasses(t,i,r);n._group(t)})},_checkboxes:function(){var e=this.options;var t=e.checkboxes;var i;if(t){i="<input type='checkbox' tabindex='-1' #= (item.enabled === false) ? 'disabled' : '' # #= item.checked ? 'checked' : '' #";if(t.name){i+=" name='"+t.name+"'"}i+=" id='_#= item.uid #' class='k-checkbox' /><span class='k-checkbox-label checkbox-span'></span>";t=s({template:i},e.checkboxes);if(typeof t.template==S){t.template=n(t.template)}e.checkboxes=t}},_updateNodeClasses:function(e,t,i){var n=e.children("div"),r=e.children("ul"),a=this.templates;if(e.hasClass("k-treeview")){return}i=i||{};i.expanded=typeof i.expanded!=y?i.expanded:this._expanded(e);i.index=typeof i.index!=y?i.index:e.index();i.enabled=typeof i.enabled!=y?i.enabled:!n.children(".k-in").hasClass("k-state-disabled");t=t||{};t.firstLevel=typeof t.firstLevel!=y?t.firstLevel:e.parent().parent().hasClass(x);t.length=typeof t.length!=y?t.length:e.parent().children().length;e.removeClass("k-first k-last").addClass(a.wrapperCssClass(t,i));n.removeClass("k-top k-mid k-bot").addClass(a.cssClass(t,i));var o=n.children(".k-in");var s=o[0]&&o[0].nodeName.toLowerCase()=="a";o.removeClass("k-in k-link k-state-default k-state-disabled").addClass(a.textClass(i,s));if(r.length||e.attr("data-hasChildren")=="true"){n.children(".k-icon").removeClass("k-i-expand k-i-collapse").addClass(a.toggleButtonClass(i));r.addClass("k-group")}},_processNodes:function(e,t){var i=this;var n=i.element.find(e);for(var r=0;r<n.length;r++){t.call(i,r,g(n[r]).closest(C))}},dataItem:function(e){var t=g(e).closest(C).attr(_.attr("uid")),i=this.dataSource;return i&&i.getByUid(t)},_dataItem:function(e){var t=g(e).closest(C).attr(_.attr("uid")),i=this.dataSource;return i&&this._dataSourceUids[t]},_insertNode:function(e,t,i,n,r){var a=this,o=I(i),s=o.children().length+1,l,d={firstLevel:i.hasClass(x),expanded:!r,length:s},u,c,f,h="",p,v,m=function(e,t){e.appendTo(t)};for(c=0;c<e.length;c++){f=e[c];f.index=t+c;h+=a._renderItem({group:d,item:f})}u=g(h);if(!u.length){return}a.angular("compile",function(){return{elements:u.get(),data:e.map(function(e){return{dataItem:e}})}});if(!o.length){o=g(a._renderGroup({group:d})).appendTo(i)}n(u,o);if(i.hasClass("k-item")){B(i);a._updateNodeClasses(i,d,{expanded:!r})}p=u.prev().first();v=u.next().last();a._updateNodeClasses(p,{},{expanded:p.attr(_.attr("expanded"))=="true"});a._updateNodeClasses(v,{},{expanded:v.attr(_.attr("expanded"))=="true"});for(c=0;c<e.length;c++){f=e[c];if(f.hasChildren){l=f.children.data();if(l.length){a._insertNode(l,f.index,u.eq(c),m,!f.expanded)}}}return u},_updateNodes:function(e,t){var i=this;var n,r,a,o,s,l;var d={treeview:i.options,item:o};var u=t!="expanded"&&t!="checked";function c(e,t){if(e.is(".k-group")){e.find(".k-item:not([aria-disabled])").attr(T,t)}e.find(".k-checkbox-wrapper input[type=checkbox]:not([disabled])").prop(b,t).data(w,false).prop(w,false)}if(t=="selected"){o=e[0];r=i.findByUid(o.uid).find(".k-in:first").removeClass("k-state-hover").toggleClass("k-state-selected",o[t]).end();if(o[t]){i.current(r)}r.attr(D,!!o[t])}else{var f=g.map(e,function(e){return i.findByUid(e.uid).children("div")});if(u){i.angular("cleanup",function(){return{elements:f}})}for(n=0;n<e.length;n++){d.item=o=e[n];a=f[n];r=a.parent();if(u){a.children(".k-in").html(i.templates.itemContent(d))}if(t==b){s=o[t];c(a,s);r.attr(T,s);if(i.options.checkboxes.checkChildren){c(r.children(".k-group"),s);i._setChecked(o.children,s);i._bubbleIndeterminate(r)}}else if(t=="expanded"){i._toggle(r,o,o[t])}else if(t=="enabled"){r.find(".k-checkbox-wrapper input[type=checkbox]").prop("disabled",!o[t]);l=!M(r).is(q);r.removeAttr($);if(!o[t]){if(o.selected){o.set("selected",false)}if(o.expanded){o.set("expanded",false)}l=true;r.attr(D,false).attr($,true)}i._updateNodeClasses(r,{},{enabled:o[t],expanded:!l})}if(a.length){if(o._events&&o._events.change){o._events.change.splice(1)}this.trigger("itemChange",{item:a,data:o,ns:h})}}if(u){i.angular("compile",function(){return{elements:f,data:g.map(e,function(e){return[{dataItem:e}]})}})}}},_appendItems:function(i,e,t){var n=I(t);var r=n.children();var a=!this._expanded(t);if(this.element===t){var o=this.dataSource.data();var s=this.dataSource.view();var l=s.length<o.length?s:o;i=l.indexOf(e[0])}else if(e.length){i=e[0].parent().indexOf(e[0])}if(typeof i==y){i=r.length}this._insertNode(e,i,t,function(e,t){if(i>=r.length){e.appendTo(t)}else{e.insertBefore(r.eq(i))}},a);if(!a){this._updateNodeClasses(t,{},{expanded:!a});I(t).css("display","block")}},_refreshChildren:function(e,t,i){var n,r,a;var o=this.options;var s=o.loadOnDemand;var l=o.checkboxes&&o.checkboxes.checkChildren;I(e).empty();if(!t.length){B(e)}else{this._appendItems(i,t,e);r=I(e).children();if(s&&l){this._bubbleIndeterminate(r.last())}for(n=0;n<r.length;n++){a=r.eq(n);this.trigger("itemChange",{item:a.children("div"),data:t[n],ns:h})}}},_refreshRoot:function(e){var t=this._renderGroup({items:e,group:{firstLevel:true,expanded:true}});if(this.root.length&&this.root[0].parentElement){this._angularItems("cleanup");var i=g(t);this.root.attr("class",i.attr("class")).html(i.html())}else{this.root=this.wrapper.html(t).children("ul")}var n=this.root.children(".k-item");for(var r=0;r<e.length;r++){this.trigger("itemChange",{item:n.eq(r),data:e[r],ns:h})}this._angularItems("compile")},refresh:function(e){var t=e.node;var i=e.action;var n=e.items;var r=this.wrapper;var a=this.options;var o=a.loadOnDemand;var s=a.checkboxes&&a.checkboxes.checkChildren;var l;if(this._skip){return}for(l=0;l<n.length;l++){this._dataSourceUids[n[l].uid]=n[l]}if(e.field){if(!n[0]||!n[0].level){return}return this._updateNodes(n,e.field)}if(t){r=this.findByUid(t.uid);this._progress(r,false)}if(s&&i!="remove"){var d=false;for(l=0;l<n.length;l++){if("checked"in n[l]){d=true;break}}if(!d&&t&&t.checked){for(l=0;l<n.length;l++){n[l].checked=true}}}if(i=="add"){this._appendItems(e.index,n,r)}else if(i=="remove"){this._remove(this.findByUid(n[0].uid),false)}else if(i=="itemchange"){this._updateNodes(n)}else if(i=="itemloaded"){this._refreshChildren(r,n,e.index)}else{this._refreshRoot(n)}if(i!="remove"){for(l=0;l<n.length;l++){if(!o||n[l].expanded||n[l]._loaded){n[l].load()}}}this.trigger(U,{node:t?r:u});if(this.dataSource.filter()&&this.options.checkboxes.checkChildren){this.updateIndeterminate(r)}},_error:function(e){var t=e.node&&this.findByUid(e.node.uid);var i=this.templates.retry({messages:this.options.messages});if(t){this._progress(t,false);this._expanded(t,false);R(t).addClass("k-i-reload");e.node.loaded(false)}else{this._progress(false);this.dataSource.data([]);this.element.html(i)}},_retryRequest:function(e){e.preventDefault();this.dataSource.fetch()},expand:function(e){this._processNodes(e,function(e,t){this.toggle(t,true)})},collapse:function(e){this._processNodes(e,function(e,t){this.toggle(t,false)})},enable:function(e,i){if(typeof e==="boolean"){i=e;e=this.items()}else{i=arguments.length==2?!!i:true}this._processNodes(e,function(e,t){this.dataItem(t).set("enabled",i)})},current:function(e){var t=this,i=t._current,n=t.element,r=t._ariaId;if(arguments.length>0&&e&&e.length){if(i){if(i[0].id===r){i.removeAttr("id")}i.find(".k-in:first").removeClass("k-state-focused")}i=t._current=g(e,n).closest(C);i.find(".k-in:first").addClass("k-state-focused");r=i[0].id||r;if(r){t.wrapper.removeAttr("aria-activedescendant");i.attr("id",r);t.wrapper.attr("aria-activedescendant",r)}return}if(!i){i=t._nextVisible(g())}return i},select:function(e){var t=this,i=t.element;if(!arguments.length){return i.find(".k-state-selected").closest(C)}e=g(e,i).closest(C);i.find(".k-state-selected").each(function(){var e=t.dataItem(this);if(e){e.set("selected",false);delete e.selected}else{g(this).removeClass("k-state-selected")}});if(e.length){t.dataItem(e).set("selected",true);t._clickTarget=e}t.trigger(m)},_toggle:function(e,t,i){var n=this.options;var r=M(e);var a=i?"expand":"collapse";var o;if(r.data("animating")){return}o=t&&t.loaded();if(i&&!o){if(n.loadOnDemand){this._progress(e,true)}r.remove();t.load()}else{this._updateNodeClasses(e,{},{expanded:i});if(!i){r.css("height",r.height()).css("height")}r.kendoStop(true,true).kendoAnimate(s({reset:true},n.animation[a],{complete:function(){if(i){r.css("height","")}}}))}},toggle:function(e,t){e=g(e);if(!R(e).is(".k-i-expand, .k-i-collapse")){return}if(arguments.length==1){t=!this._expanded(e)}this._expanded(e,t)},destroy:function(){var e=this;l.fn.destroy.call(e);e.wrapper.off(a);e.wrapper.find(".k-checkbox-wrapper :checkbox").off(a);e._unbindDataSource();if(e.dragging){e.dragging.destroy()}e._dataSourceUids={};_.destroy(e.element);e.root=e.wrapper=e.element=null},_expanded:function(e,t,i){var n=_.attr("expanded");var r;var a=t;var o=a?"expand":"collapse";if(arguments.length==1){r=this._dataItem(e);return e.attr(n)==="true"||r&&r.expanded}r=this.dataItem(e);if(M(e).data("animating")){return}if(i||!this._trigger(o,e)){if(a){e.attr(n,"true");e.attr(A,"true")}else{e.removeAttr(n);e.attr(A,"false")}if(r){r.set("expanded",a);a=r.expanded}}},_progress:function(e,t){var i=this.element;var n=this.templates.loading({messages:this.options.messages});if(arguments.length==1){t=e;if(t){i.html(n)}else{i.empty()}}else{R(e).toggleClass("k-i-loading",t).removeClass("k-i-reload")}},text:function(e,t){var i=this.dataItem(e),n=this.options[F.text],r=i.level(),a=n.length,o=n[Math.min(r,a-1)];if(t){i.set(o,t)}else{return i[o]}},_objectOrSelf:function(e){return g(e).closest("[data-role=treeview]").data("kendoTreeView")||this},_dataSourceMove:function(e,t,i,n){var r,a=this._objectOrSelf(i||t),o=a.dataSource;var s=g.Deferred().resolve().promise();if(i&&i[0]!=a.element[0]){r=a.dataItem(i);if(!r.loaded()){a._progress(i,true);s=r.load()}if(i!=this.root){o=r.children;if(!o||!(o instanceof d)){r._initChildren();r.loaded(true);o=r.children}}}e=this._toObservableData(e);return n.call(a,o,e,s)},_toObservableData:function(e){var t=e,i,n;if(Q(e)||X(e)){i=this._objectOrSelf(e).dataSource;n=g(e).attr(_.attr("uid"));t=i.getByUid(n);if(t){t=i.remove(t)}}return t},_insert:function(e,t,i){if(!(t instanceof _.data.ObservableArray)){if(!o(t)){t=[t]}}else{t=t.toJSON()}var n=e.parent();if(n&&n._initChildren){n.hasChildren=true;n._initChildren()}e.splice.apply(e,[i,0].concat(t));return this.findByUid(e[i].uid)},insertAfter:J(1),insertBefore:J(0),append:function(e,o,s){var t=this.root;if(o&&e instanceof jQuery&&o[0]===e[0]){return}o=o&&o.length?o:null;if(o){t=I(o)}return this._dataSourceMove(e,t,o,function(i,n,e){var t;var r=this;function a(){if(o){r._expanded(o,true,true)}var e=i.data(),t=Math.max(e.length,0);return r._insert(e,n,t)}e.done(function(){t=a();s=s||g.noop;s(t)});return t||null})},_remove:function(e,t){var i=this,n,r,a;e=g(e,i.element);this.angular("cleanup",function(){return{elements:e.get()}});n=e.parent().parent();r=e.prev();a=e.next();e[t?"detach":"remove"]();if(n.hasClass("k-item")){B(n);i._updateNodeClasses(n)}i._updateNodeClasses(r);i._updateNodeClasses(a);return e},remove:function(e){var t=this.dataItem(e);if(t){this.dataSource.remove(t)}},detach:function(e){return this._remove(e,true)},findByText:function(i){return g(this.element).find(".k-in").filter(function(e,t){return g(t).text()==i}).closest(C)},findByUid:function(e){var t=this.element.find(".k-item");var i=_.attr("uid");var n;for(var r=0;r<t.length;r++){if(t[r].getAttribute(i)==e){n=t[r];break}}return g(n)},expandPath:function(e,t){var a=this;var i=e.slice(0);var n=t||g.noop;function r(){i.shift();if(i.length){o(i[0]).then(r)}else{n.call(a)}}function o(e){var t=g.Deferred();var i=a.dataSource.get(e);var n=_.attr("expanded");var r;if(i){r=a.findByUid(i.uid);if(i.loaded()){i.set("expanded",true);r.attr(n,true);r.attr(A,true);t.resolve()}else{a._progress(r,true);i.load().then(function(){i.set("expanded",true);r.attr(n,true);r.attr(A,true);t.resolve()})}}else{t.resolve()}return t.promise()}o(i[0]).then(r)},_parentIds:function(e){var t=e&&e.parentNode();var i=[];while(t&&t.parentNode){i.unshift(t.id);t=t.parentNode()}return i},expandTo:function(e){if(!(e instanceof _.data.Node)){e=this.dataSource.get(e)}var t=this._parentIds(e);this.expandPath(t)},_renderItem:function(e){if(!e.group){e.group={}}e.treeview=this.options;e.r=this.templates;return this.templates.item(e)},_renderGroup:function(e){var o=this;e.renderItems=function(e){var t="",i=0,n=e.items,r=n?n.length:0,a=e.group;a.length=r;for(;i<r;i++){e.group=a;e.item=n[i];e.item.index=i;t+=o._renderItem(e)}return t};e.r=o.templates;return o.templates.group(e)}});h.plugin(K)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("dropdowntree/treeview",["kendo.treeview"],e)})(function(){(function(l,c){var d=window.kendo,e=d.ui,u=d.keys,f="k-state-disabled",h="select",p="checked",r=l.proxy,v="dataBound",a="click",o=".kendoTreeView",m="indeterminate",g="navigate",s,_=e.TreeView;function t(i){return function(e){var t=e.children(".k-animation-container");if(!t.length){t=e}return t.children(i)}}s=t(".k-group");var i=_.extend({init:function(e,t,i){var n=this;n.dropdowntree=i;n._nodesToLoad=0;_.fn.init.call(n,e,t);if(n.dropdowntree._isMultipleSelection()){n.wrapper.on(a+o,".k-in.k-state-selected",r(n._clickSelectedItem,n))}},_checkOnSelect:function(e){if(!e.isDefaultPrevented()){var t=this.dataItem(e.node);t.set("checked",!t.checked)}},_setCheckedValue:function(e,t){e.set(p,t)},_click:function(e){var t=this;if(t.dropdowntree._isMultipleSelection()){t.one("select",t._checkOnSelect)}_.fn._click.call(t,e)},_clickSelectedItem:function(e){var t=this,i=l(e.currentTarget);t.one("select",t._checkOnSelect);if(!t._trigger(h,i)){t.dataItem(i).set("selected",false)}},defaultrefresh:function(e){var t=this;var i=e.node;var n=e.action;var r=e.items;var a=this.wrapper;var o=this.options;var s=o.loadOnDemand;var l=o.checkboxes&&o.checkboxes.checkChildren;var d;if(this._skip){return}if(e.field){if(!r[0]||!r[0].level){return}return this._updateNodes(r,e.field)}if(i){a=this.findByUid(i.uid);this._progress(a,false)}if(l&&n!="remove"){var u=false;for(d=0;d<r.length;d++){if("checked"in r[d]){u=true;break}}if(!u&&i&&i.checked){for(d=0;d<r.length;d++){r[d].checked=true}}}if(n=="add"){this._appendItems(e.index,r,a)}else if(n=="remove"){this._remove(this.findByUid(r[0].uid),false)}else if(n=="itemchange"){this._updateNodes(r)}else if(n=="itemloaded"){this._nodesToLoad--;this._refreshChildren(a,r,e.index)}else{this._refreshRoot(r)}if(n!="remove"){for(d=0;d<r.length;d++){if(!s||r[d].expanded){if(r[d].hasChildren){t._nodesToLoad++}r[d].load()}}}if(this._nodesToLoad===0){this.dropdowntree.trigger("allNodesAreLoaded")}this.trigger(v,{node:i?a:c});this.dropdowntree._treeViewDataBound({node:i?a:c,sender:this});if(this.options.checkboxes.checkChildren){this.updateIndeterminate()}},_previousVisible:function(e){var t=this,i,n;if(!e.length||e.prev().length){if(e.length){n=e.prev()}else{n=t.root.children().last()}while(t._expanded(n)){i=s(n).children().last();if(!i.length){break}n=i}}else{n=t.parent(e)||e;if(!n.length){if(t.dropdowntree.checkAll&&t.dropdowntree.checkAll.is(":visible")){t.dropdowntree.checkAll.find(".k-checkbox").focus()}else if(t.dropdowntree.filterInput){t.dropdowntree.filterInput.focus()}else{t.dropdowntree.wrapper.focus()}}}return n},_keydown:function(e){var t=this,i=e.keyCode,n,r=t.current(),a=t._expanded(r),o=r.find(".k-checkbox-wrapper:first :checkbox"),s=d.support.isRtl(t.element);if(e.target!=e.currentTarget){return}if(!s&&i==u.RIGHT||s&&i==u.LEFT){if(a){n=t._nextVisible(r)}else if(!r.find(".k-in:first").hasClass(f)){t.expand(r)}}else if(!s&&i==u.LEFT||s&&i==u.RIGHT){if(a&&!r.find(".k-in:first").hasClass(f)){t.collapse(r)}else{n=t.parent(r);if(!t._enabled(n)){n=c}}}else if(i==u.DOWN){n=t._nextVisible(r)}else if(i==u.UP&&!e.altKey){n=t._previousVisible(r)}else if(i==u.HOME){n=t._nextVisible(l())}else if(i==u.END){n=t._previousVisible(l())}else if(i==u.ENTER&&!r.find(".k-in:first").hasClass(f)){if(!r.find(".k-in:first").hasClass("k-state-selected")){if(!t._trigger(h,r)){t.select(r)}}}else if(i==u.SPACEBAR&&o.length&&!r.find(".k-in:first").hasClass(f)){o.prop(p,!o.prop(p)).data(m,false).prop(m,false);t._checkboxChange({target:o});n=r}else if(e.altKey&&i===u.UP||i===u.ESC){t._closePopup()}else if(i===u.TAB){e.preventDefault();t._closePopup()}if(n){e.preventDefault();if(r[0]!=n[0]){t._trigger(g,n);t.current(n)}}},_closePopup:function(){this.dropdowntree.close();this.dropdowntree.wrapper.focus()},refresh:function(e){this.defaultrefresh(e);if(this.dropdowntree.options.skipUpdateOnBind){return}if(e.action==="itemchange"){if(this.dropdowntree._isMultipleSelection()){if(e.field==="checked"){this.dropdowntree._checkValue(e.items[0])}}else{if(e.field!=="checked"&&e.field!=="expanded"&&e.items[0].selected){this.dropdowntree._selectValue(e.items[0])}}}else{this.dropdowntree.refresh(e)}}});d.ui._dropdowntree=i})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.dropdowntree",["dropdowntree/treeview","kendo.popup"],e)})(function(){var e={id:"dropdowntree",name:"DropDownTree",category:"web",description:"The DropDownTree widget displays a hierarchy of items and allows the selection of single or multiple items.",depends:["treeview","popup"]};(function(d,a){var o=window.kendo,t=o.ui,i=t.Widget,e=t._dropdowntree,n=o.data.ObservableArray,u=o.data.ObservableObject,r=d.extend,l=o._activeElement,s=".kendoDropDownTree",c=o.keys,f=o.support,h="k-hidden",p="width",v=f.browser,m=o._outerWidth,g=".",_="disabled",b="readonly",w="k-state-disabled",k="aria-disabled",y="aria-readonly",x="k-state-hover",C="k-state-focused",S="mouseenter"+s+" mouseleave"+s,T="tabindex",D="click",A="open",E="close",I="change",M=/"/g,R=d.proxy;var F=o.ui.Widget.extend({init:function(e,t){this.ns=s;o.ui.Widget.fn.init.call(this,e,t);this._selection=this._getSelection();this._focusInputHandler=d.proxy(this._focusInput,this);this._initial=this.element.val();this._values=[];var i=this.options.value;if(i===null||!i.length){this._noInitialValue=true}if(!this._isNullorUndefined(i)){this._valueMethodCalled=true;this._values=d.isArray(i)?i.slice(0):[i]}this._inputTemplate();this._accessors();this._setTreeViewOptions(this.options);this._dataSource();this._selection._initWrapper();this._placeholder(true);this._tabindex();this.wrapper.data(T,this.wrapper.attr(T));this.tree=d("<div/>").attr({tabIndex:-1,"aria-hidden":true});this.list=d("<div class='k-list-container'/>").append(this.tree);this._header();this._noData();this._footer();this._reset();this._popup();this.popup.one("open",R(this._popupOpen,this));this._clearButton();this._filterHeader();this._treeview();this._renderFooter();this._checkAll();this._enable();this._toggleCloseVisibility();if(!this.options.autoBind){var n=t.text||"";if(!this._isNullorUndefined(t.value)){this._preselect(t.value)}else if(n){this._textAccessor(n)}else if(t.placeholder){this._placeholder(true)}}var r=d(this.element).parents("fieldset").is(":disabled");if(r){this.enable(false)}this._valueMethodCalled=false;o.notify(this)},_preselect:function(e,t){this._selection._preselect(e,t)},_setTreeViewOptions:function(e){var t={autoBind:e.autoBind,checkboxes:e.checkboxes,dataImageUrlField:e.dataImageUrlField,dataSpriteCssClassField:e.dataSpriteCssClassField,dataTextField:e.dataTextField,dataUrlField:e.dataUrlField,loadOnDemand:e.loadOnDemand};this.options.treeview=d.extend({},t,this.options.treeview);if(e.template){this.options.treeview.template=e.template}},_dataSource:function(){var e=this.options.dataSource;this.dataSource=o.data.HierarchicalDataSource.create(e);if(e){d.extend(this.options.treeview,{dataSource:this.dataSource})}},_popupOpen:function(){var e=this.popup;e.wrapper=o.wrap(e.element)},_getSelection:function(){if(this._isMultipleSelection()){return new t.DropDownTree.MultipleSelection(this)}else{return new t.DropDownTree.SingleSelection(this)}},setDataSource:function(e){this._isDataSourceSet=true;if(this._tags){this._noInitialValue=true;this.setValue([]);this._tags.empty();this.span.show();this._multipleTags.empty()}this.dataSource=e;this.treeview.setDataSource(e);this._isDataSourceSet=false},_isMultipleSelection:function(){return this.options&&(this.options.treeview.checkboxes||this.options.checkboxes)},options:{name:"DropDownTree",animation:{},autoBind:true,autoClose:true,autoWidth:false,clearButton:true,dataTextField:"",dataValueField:"",dataImageUrlField:"",dataSpriteCssClassField:"",dataUrlField:"",delay:500,enabled:true,enforceMinLength:false,filter:"none",height:200,ignoreCase:true,index:0,loadOnDemand:false,messages:{singleTag:"item(s) selected",clear:"clear",deleteTag:"delete",noData:"No data found."},minLength:1,checkboxes:false,noDataTemplate:true,placeholder:"",checkAll:false,checkAllTemplate:"Check all",tagMode:"multiple",template:null,text:null,treeview:{},valuePrimitive:false,footerTemplate:"",headerTemplate:"",value:null,valueTemplate:null,popup:null},events:["open","close","dataBound",I,"select","filtering"],focus:function(){this.wrapper.focus()},dataItem:function(e){return this.treeview.dataItem(e)},readonly:function(e){this._editable({readonly:e===a?true:e,disable:false});this._toggleCloseVisibility()},enable:function(e){this._editable({readonly:false,disable:!(e=e===a?true:e)});this._toggleCloseVisibility()},toggle:function(e){this._toggle(e)},open:function(){var e=this.popup;if(!this.options.autoBind&&!this.dataSource.data().length){this.treeview._progress(true);if(this._isFilterEnabled()){this._search()}else{this.dataSource.fetch()}}if(e.visible()||!this._allowOpening()){return}if(this._isMultipleSelection()){e.element.addClass("k-multiple-selection")}e.element.addClass("k-popup-dropdowntree");e.one("activate",this._focusInputHandler);e._hovered=true;e.open()},close:function(){this.popup.close()},search:function(e){var t=this.options;var i;clearTimeout(this._typingTimeout);if(!t.enforceMinLength&&!e.length||e.length>=t.minLength){i=this._getFilter(e);if(this.trigger("filtering",{filter:i})||d.isArray(this.options.dataTextField)){return}this._filtering=true;this.treeview.dataSource.filter(i)}},_getFilter:function(e){return{field:this.options.dataTextField,operator:this.options.filter,value:e,ignoreCase:this.options.ignoreCase}},refresh:function(){var e=this.treeview.dataSource.flatView();this._renderFooter();this._renderNoData();if(this.filterInput&&this.checkAll){this.checkAll.toggle(!this.filterInput.val().length)}this.tree.toggle(!!e.length);d(this.noData).toggle(!e.length)},setOptions:function(e){i.fn.setOptions.call(this,e);this._setTreeViewOptions(e);this._dataSource();if(this.options.treeview){this.treeview.setOptions(this.options.treeview)}if(e.height&&this.tree){this.tree.css("max-height",e.height)}this._header();this._noData();this._footer();this._renderFooter();this._renderNoData();if(this.span&&(this._isMultipleSelection()||this.span.hasClass("k-readonly"))){this._placeholder(true)}this._inputTemplate();this._accessors();this._filterHeader();this._checkAll();this._enable();if(e&&(e.enable||e.enabled)){this.enable(true)}this._clearButton()},destroy:function(){o.ui.Widget.fn.destroy.call(this);if(this.treeview){this.treeview.destroy()}this.popup.destroy();this.wrapper.off(s);this._clear.off(s);this._inputWrapper.off(s);if(this.filterInput){this.filterInput.off(s)}if(this.tagList){this.tagList.off(s)}o.unbind(this.tagList);if(this.options.checkAll&&this.checkAll){this.checkAll.off(s)}if(this._form){this._form.off("reset",this._resetHandler)}},setValue:function(e){e=d.isArray(e)||e instanceof n?e.slice(0):[e];this._values=e},items:function(){return this.treeview.items()},value:function(e){var t=this;if(e){if(t.filterInput&&t.dataSource._filter){t._filtering=true;t.dataSource.filter({})}else if(!t.dataSource.data().length||!t.treeview.dataSource.data().length){t.dataSource.fetch(function(){if(t.options.loadOnDemand){t._selection._setValue(e)}else{t.one("allNodesAreLoaded",function(){t._selection._setValue(e)})}});return}}return t._selection._setValue(e)},text:function(e){var t;var i=this.options.ignoreCase;e=e===null?"":e;if(e!==a&&!this._isMultipleSelection()){if(typeof e!=="string"){this._textAccessor(e);return}t=i?e:e.toLowerCase();this._selectItemByText(t);this._textAccessor(t)}else{return this._textAccessor()}},_header:function(){var e=this;var t=d(e.header);var i=e.options.headerTemplate;this._angularElement(t,"cleanup");o.destroy(t);t.remove();if(!i){e.header=null;return}var n=typeof i!=="function"?o.template(i):i;t=d(n({}));e.header=t[0]?t:null;e.list.prepend(t);this._angularElement(e.header,"compile")},_noData:function(){var e=this;var t=d(e.noData);var i=e.options.noDataTemplate===true?e.options.messages.noData:e.options.noDataTemplate;e.angular("cleanup",function(){return{elements:t}});o.destroy(t);t.remove();if(!i){e.noData=null;return}e.noData=d('<div class="k-nodata" style="display:none"><div></div></div>').appendTo(e.list);e.noDataTemplate=typeof i!=="function"?o.template(i):i},_renderNoData:function(){var e=this;var t=e.noData;if(!t){return}this._angularElement(t,"cleanup");t.children(":first").html(e.noDataTemplate({instance:e}));this._angularElement(t,"compile")},_footer:function(){var e=this;var t=d(e.footer);var i=e.options.footerTemplate;this._angularElement(t,"cleanup");o.destroy(t);t.remove();if(!i){e.footer=null;return}e.footer=d('<div class="k-footer"></div>').appendTo(e.list);e.footerTemplate=typeof i!=="function"?o.template(i):i},_renderFooter:function(){var e=this;var t=e.footer;if(!t){return}this._angularElement(t,"cleanup");t.html(e.footerTemplate({instance:e}));this._angularElement(t,"compile")},_enable:function(){var e=this,t=e.options,i=e.element.is("[disabled]");if(t.enable!==a){t.enabled=t.enable}if(!t.enabled||i){e.enable(false)}else{e.readonly(e.element.is("[readonly]"))}},_adjustListWidth:function(){var e=this,t=e.list,i=t[0].style.width,n=e.wrapper,r,a;if(!t.data(p)&&i){return}r=window.getComputedStyle?window.getComputedStyle(n[0],null):0;a=parseFloat(r&&r.width)||m(n);if(r&&v.msie){a+=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)+parseFloat(r.borderLeftWidth)+parseFloat(r.borderRightWidth)}if(t.css("box-sizing")!=="border-box"){i=a-(m(t)-t.width())}else{i=a}t.css({fontFamily:n.css("font-family"),width:e.options.autoWidth?"auto":i,minWidth:i,whiteSpace:e.options.autoWidth?"nowrap":"normal"}).data(p,i);return true},_reset:function(){var e=this,t=e.element,i=t.attr("form"),n=i?d("#"+i):t.closest("form");if(n[0]){e._resetHandler=function(){setTimeout(function(){e.value(e._initial)})};e._form=n.on("reset",e._resetHandler)}},_popup:function(){var e=this;e.popup=new t.Popup(e.list,r({},e.options.popup,{anchor:e.wrapper,open:R(e._openHandler,e),close:R(e._closeHandler,e),animation:e.options.animation,isRtl:f.isRtl(e.wrapper),autosize:e.options.autoWidth}))},_angularElement:function(e,t){if(!e){return}this.angular(t,function(){return{elements:e}})},_allowOpening:function(){return this.options.noDataTemplate||this.treeview.dataSource.flatView().length},_placeholder:function(e){if(this.span){this.span.toggleClass("k-readonly",e).text(e?this.options.placeholder:"")}},_currentValue:function(e){var t=this._value(e);if(!t&&t!==0){t=e}return t},_checkValue:function(t){var e="";var i=-1;var n=this.value();var r=this.options.tagMode==="multiple";if(t||t===0){if(t.level){t._level=t.level()}e=this._currentValue(t);i=n.indexOf(e)}if(t.checked){var a=d.grep(this._tags,function(e){return e.uid===t._tagUid});if(a.length){return}var o=new u(t.toJSON());t._tagUid=o.uid;this._tags.push(o);if(this._tags.length===1){this.span.hide();if(!r){this._multipleTags.push(o)}}if(i===-1){n.push(e);this.setValue(n)}}else{var s=this._tags.find(function(e){return e.uid===t._tagUid});var l=this._tags.indexOf(s);if(l!==-1){this._tags.splice(l,1)}else{this._treeViewCheckAllCheck(t);return}if(this._tags.length===0){this.span.show();if(!r){this._multipleTags.splice(0,1)}}if(i!==-1){n.splice(i,1);this.setValue(n)}}this._treeViewCheckAllCheck(t);if(!this._preventChangeTrigger&&!this._valueMethodCalled&&!this._noInitialValue){this.trigger(I)}if(this.options.autoClose&&this.popup.visible()){this.close();this.wrapper.focus()}this.popup.position();this._toggleCloseVisibility();this._updateSelectedOptions()},_updateSelectedOptions:function(){if(this.element[0].tagName.toLowerCase()!=="select"){return}var e=this._tags;var t="";var i=null;var n=null;if(e.length){for(var r=0;r<e.length;r++){i=e[r];n=this._value(i);t+=this._option(n,this._text(i),true)}}this.element.html(t)},_option:function(e,t,i){var n="<option";if(e!==a){e+="";if(e.indexOf('"')!==-1){e=e.replace(M,"&quot;")}n+=' value="'+e+'"'}if(i){n+=" selected"}n+=">";if(t!==a){n+=o.htmlEncode(t)}return n+="</option>"},_selectValue:function(e){var t="";var i="";if(e||e===0){if(e.level){e._level=e.level()}i=this._text(e)||e;t=this._currentValue(e)}if(t===null){t=""}this.setValue(t);this._textAccessor(i,e);this._accessor(t);if(!this._preventChangeTrigger&&!this._valueMethodCalled){this.trigger(I)}this._valueMethodCalled=false;if(this.options.autoClose&&this.popup.visible()){this.close();this.wrapper.focus()}this.popup.position();this._toggleCloseVisibility()},_clearClick:function(e){e.stopPropagation();this.wrapper.focus();this._clearTextAndValue()},_clearTextAndValue:function(){this.setValue([]);this._clearInput();this._clearText();this._selection._clearValue();this.popup.position();this._toggleCloseVisibility()},_clearText:function(){if(this.options.placeholder){this._placeholder(true)}else{if(this.span){this.span.html("")}}},_inputTemplate:function(){var e=this.options.valueTemplate;if(!e){e=d.proxy(o.template("#:this._text(data)#",{useWithBlock:false}),this)}else{e=o.template(e)}this.valueTemplate=e},_assignInstance:function(e,t){var i=this.options.dataTextField;var n={};if(i){P(n,i.split(g),e);P(n,this.options.dataValueField.split(g),t);n=new u(n)}else{n=e}return n},_textAccessor:function(e,t){var i=this.valueTemplate;var n=this.span;if(e===a){return n.text()}n.removeClass("k-readonly");if(!t&&(d.isPlainObject(e)||e instanceof u)){t=e}if(!t){t=this._assignInstance(e,this._accessor())}var r=function(){return{elements:n.get(),data:[{dataItem:t}]}};this.angular("cleanup",r);try{n.html(i(t))}catch(e){if(n){n.html("")}}this.angular("compile",r)},_accessors:function(){var e=this.element;var t=this.options;var r=o.getter;var i=e.attr(o.attr("text-field"));var n=e.attr(o.attr("value-field"));var a=function(e){if(d.isArray(e)){var i=e.length;var n=d.map(e,function(t){return function(e){return e[t]}});return function(e){var t=e._level;if(!t&&t!==0){return}return n[Math.min(t,i-1)](e)}}else{return r(e)}};if(!t.dataTextField&&i){t.dataTextField=i}if(!t.dataValueField&&n){t.dataValueField=n}t.dataTextField=t.dataTextField||"text";t.dataValueField=t.dataValueField||"value";this._text=a(t.dataTextField);this._value=a(t.dataValueField)},_accessor:function(e,t){return this._accessorInput(e,t)},_accessorInput:function(e){var t=this.element[0];if(e===a){return t.value}else{if(e===null){e=""}t.value=e}},_clearInput:function(){var e=this.element[0];e.value=""},_clearButton:function(){var e=this.options.messages.clear;if(!this._clear){this._clear=d('<span unselectable="on" class="k-clear-value" title="'+e+'"><span class="k-icon k-i-x"></span></span>').attr({role:"button",tabIndex:-1})}if(this.options.clearButton){this._clear.insertAfter(this.span);this.wrapper.addClass("k-dropdowntree-clearable")}else{if(!this.options.clearButton){this._clear.remove()}}},_toggleCloseVisibility:function(){var e=this.element.attr(b);var t=this.value()&&!this._isMultipleSelection()||this.value().length;var i=this.element.val()&&this.element.val()!==this.options.placeholder;if(!e&&(t||i)){this._showClear()}else{this._hideClear()}},_showClear:function(){if(this._clear){this._clear.removeClass(h)}},_hideClear:function(){if(this._clear){this._clear.addClass(h)}},_openHandler:function(e){this._adjustListWidth();if(this.trigger(A)){e.preventDefault()}else{this.wrapper.attr("aria-expanded",true);this.tree.attr("aria-hidden",false).attr("role","tree")}},_closeHandler:function(e){if(this.trigger(E)){e.preventDefault()}else{this.wrapper.attr("aria-expanded",false);this.tree.attr("aria-hidden",true)}},_treeview:function(){var t=this;if(t.options.height){t.tree.css("max-height",t.options.height)}t.tree.attr("id",o.guid());t.treeview=new e(t.tree,r({},t.options.treeview),t);t.dataSource=t.treeview.dataSource;t.treeview.bind("select",function(e){t.trigger("select",e)})},_treeViewDataBound:function(e){if(e.node&&this._prev&&this._prev.length){e.sender.expand(e.node)}if(this._filtering){if(!e.node){this._filtering=false}if(!this._isMultipleSelection()){this._deselectItem(e)}return}if(!this.treeview){this.treeview=e.sender}if(!e.node){var t=e.sender.dataSource.data();this._checkLoadedItems(t);if(this._noInitialValue){this._noInitialValue=false}}else{var i=e.sender.dataItem(e.node);if(i){var n=i.children.data();this._checkLoadedItems(n)}}this.trigger("dataBound",e)},_deselectItem:function(e){var t=[];if(!e.node){t=e.sender.dataSource.data()}else{var i=e.sender.dataItem(e.node);if(i){t=i.children.data()}}for(var n=0;n<t.length;n++){if(t[n].selected&&!this._valueComparer(t[n],this.value())){t[n].set("selected",false)}}},_checkLoadedItems:function(e){var t=this.value();if(!e){return}for(var i=0;i<e.length;i++){this._selection._checkLoadedItem(e[i],t)}},_treeViewCheckAllCheck:function(e){if(this.options.checkAll&&this.checkAll){this._getAllChecked();if(e.checked){this._checkCheckAll()}else{this._uncheckCheckAll()}}},_checkCheckAll:function(){var e=this.checkAll.find(".k-checkbox");if(this._allItemsAreChecked){e.prop("checked",true).prop("indeterminate",false)}else{e.prop("indeterminate",true)}},_uncheckCheckAll:function(){var e=this.checkAll.find(".k-checkbox");if(this._allItemsAreUnchecked){e.prop("checked",false).prop("indeterminate",false)}else{e.prop("indeterminate",true)}},_filterHeader:function(){var e;if(this.filterInput){this.filterInput.off(s).parent().remove();this.filterInput=null}if(this._isFilterEnabled()){this._disableCheckChildren();e='<span class="k-icon k-i-zoom"></span>';this.filterInput=d('<input class="k-textbox"/>').attr({placeholder:this.element.attr("placeholder"),title:this.element.attr("title"),role:"listbox","aria-haspopup":true,"aria-expanded":false});this.filterInput.on("input",R(this._filterChange,this));d('<span class="k-list-filter" />').insertBefore(this.tree).append(this.filterInput.add(e))}},_filterChange:function(){if(this.filterInput){this._search()}},_disableCheckChildren:function(){if(this._isMultipleSelection()&&this.options.treeview.checkboxes&&this.options.treeview.checkboxes.checkChildren){this.options.treeview.checkboxes.checkChildren=false}},_checkAll:function(){if(this.checkAll){this.checkAll.find(".k-checkbox-label, .k-checkbox").off(s);this.checkAll.remove();this.checkAll=null}if(this._isMultipleSelection()&&this.options.checkAll){this.checkAll=d('<div class="k-check-all"><input type="checkbox" class="k-checkbox"/><span class="k-checkbox-label">Check All</span></div>').insertBefore(this.tree);this.checkAll.find(".k-checkbox-label").html(o.template(this.options.checkAllTemplate)({instance:this}));this.checkAll.find(".k-checkbox-label").on(D+s,R(this._clickCheckAll,this));this.checkAll.find(".k-checkbox").on("change"+s,R(this._changeCheckAll,this)).on("keydown"+s,R(this._keydownCheckAll,this));this._disabledCheckedItems=[];this._disabledUnCheckedItems=[];this._getAllChecked();if(!this._allItemsAreUnchecked){this._checkCheckAll()}}},_changeCheckAll:function(){var e=this.checkAll.find(".k-checkbox");var t=e.prop("checked");this._updateCheckAll(t)},_updateCheckAll:function(e){var t=this.checkAll.find(".k-checkbox");this._toggleCheckAllItems(e);t.prop("checked",e);if(this._disabledCheckedItems.length&&this._disabledUnCheckedItems.length){t.prop("indeterminate",true)}else if(this._disabledCheckedItems.length){t.prop("indeterminate",!e)}else if(this._disabledUnCheckedItems.length){t.prop("indeterminate",e)}else{t.prop("indeterminate",false)}this._disabledCheckedItems=[];this._disabledUnCheckedItems=[]},_keydownCheckAll:function(e){var t=e.keyCode;var i=e.altKey;if(i&&t===c.UP||t===c.ESC||t===c.TAB){this.close();this.wrapper.focus();e.preventDefault();return}if(t===c.UP){if(this.filterInput){this.filterInput.focus()}else{this.wrapper.focus()}e.preventDefault()}if(t===c.DOWN){if(this.tree&&this.tree.is(":visible")){this.tree.focus()}e.preventDefault()}if(t===c.SPACEBAR&&(v.msie||v.edge)){this._clickCheckAll();e.preventDefault()}},_clickCheckAll:function(){var e=this.checkAll.find(".k-checkbox");var t=e.prop("checked");this._updateCheckAll(!t);e.focus()},_dfs:function(e,t,i){for(var n=0;n<e.length;n++){if(!this[t](e[n],i)){break}this._traverceChildren(e[n],t,i)}},_uncheckItemByUid:function(e){this._dfs(this.dataSource.data(),"_uncheckItemEqualsUid",e)},_uncheckItemEqualsUid:function(e,t){if(e.enabled!==false&&e._tagUid==t){e.set("checked",false);return false}return true},_selectItemByText:function(e){this._dfs(this.dataSource.data(),"_itemEqualsText",e)},_itemEqualsText:function(e,t){if(e.enabled!==false&&this._text(e)===t){this.treeview.select(this.treeview.findByUid(e.uid));this._selectValue(e);return false}return true},_selectItemByValue:function(e){this._dfs(this.dataSource.data(),"_itemEqualsValue",e)},_itemEqualsValue:function(e,t){if(e.enabled!==false&&this._valueComparer(e,t)){this.treeview.select(this.treeview.findByUid(e.uid));return false}return true},_checkItemByValue:function(e){var t=this.treeview.dataItems();for(var i=0;i<e.length;i++){this._dfs(t,"_checkItemEqualsValue",e[i])}},_checkItemEqualsValue:function(e,t){if(e.enabled!==false&&this._valueComparer(e,t)){e.set("checked",true);return false}return true},_valueComparer:function(e,t){var i=this._value(e);var n;if(!this._isNullorUndefined(i)){if(this._isNullorUndefined(t)){return false}var r=this._value(t);if(r){return i==r}else{return i==t}}n=this._text(e);if(n){if(this._text(t)){return n==this._text(t)}else{return n==t}}return false},_isNullorUndefined:function(e){return e===a||e===null},_getAllChecked:function(){this._allCheckedItems=[];this._allItemsAreChecked=true;this._allItemsAreUnchecked=true;this._dfs(this.dataSource.data(),"_getAllCheckedItems");return this._allCheckedItems},_getAllCheckedItems:function(e){if(this._allItemsAreChecked){this._allItemsAreChecked=e.checked}if(this._allItemsAreUnchecked){this._allItemsAreUnchecked=!e.checked}if(e.checked){this._allCheckedItems.push(e)}return true},_traverceChildren:function(e,t,i){var n=e._childrenOptions&&e._childrenOptions.schema?e._childrenOptions.schema.data:null;var r=e[n]||e.items||e.children;if(!r){return}this._dfs(r,t,i)},_toggleCheckAllItems:function(e){this._dfs(this.dataSource.data(),"_checkAllCheckItem",e)},_checkAllCheckItem:function(e,t){if(e.enabled===false){if(e.checked){this._disabledCheckedItems.push(e)}else{this._disabledUnCheckedItems.push(e)}}else{e.set("checked",t)}return true},_isFilterEnabled:function(){var e=this.options.filter;return e&&e!=="none"},_editable:function(e){var t=this;var i=t.element;var n=e.disable;var r=e.readonly;var a=t.wrapper.add(t.filterInput).off(s);var o=t._inputWrapper.off(S);if(t._isMultipleSelection()){t.tagList.off(D+s)}if(!r&&!n){i.removeAttr(_).removeAttr(b);o.removeClass(w).on(S,t._toggleHover);t._clear.on("click"+s,R(t._clearClick,t));a.attr(T,a.data(T)).attr(k,false).attr(y,false).on("keydown"+s,R(t._keydown,t)).on("focusin"+s,R(t._focusinHandler,t)).on("focusout"+s,R(t._focusoutHandler,t));t.wrapper.on(D+s,R(t._wrapperClick,t));if(this._isMultipleSelection()){t.tagList.on(D+s,"li.k-button",function(e){d(e.currentTarget).addClass(C)});t.tagList.on(D+s,".k-select",function(e){t._removeTagClick(e)})}}else if(n){a.removeAttr(T);o.addClass(w)}else{a.attr(T,a.data(T));o.removeClass(w);a.on("focusin"+s,R(t._focusinHandler,t)).on("focusout"+s,R(t._focusoutHandler,t))}i.attr(_,n).attr(b,r);a.attr(k,n).attr(y,r)},_focusinHandler:function(){this._inputWrapper.addClass(C);this._prevent=false},_focusoutHandler:function(){var e=this;if(this._isMultipleSelection()){this.tagList.find(g+C).removeClass(C)}if(!e._prevent){this._inputWrapper.removeClass(C);e._prevent=true;e.element.blur()}},_toggle:function(e){e=e!==a?e:!this.popup.visible();this[e?A:E]()},_wrapperClick:function(e){e.preventDefault();this.popup.unbind("activate",this._focusInputHandler);this._focused=this.wrapper;this._prevent=false;this._toggle()},_toggleHover:function(e){d(e.currentTarget).toggleClass(x,e.type==="mouseenter")},_focusInput:function(){if(this.filterInput){this.filterInput.focus()}else if(this.checkAll){this.checkAll.find(".k-checkbox").focus()}else if(this.tree.is(":visible")){this.tree[0].focus({preventScroll:true});this._ie11PreventScrollOnFocus()}},_ie11PreventScrollOnFocus:function(){if(v.msie&&v.version==11){var e=this.popup;e._toggleResize(false);setTimeout(function(){e._toggleResize(true)},50)}},_keydown:function(e){var t=e.keyCode;var i=e.altKey;var n;var r;var a,o;var s=this.popup.visible();if(this.filterInput){n=this.filterInput[0]===l()}if(this.wrapper){r=this.wrapper[0]===l()}if(r){if(t===c.ESC){this._clearTextAndValue();e.preventDefault();return}if(this._isMultipleSelection()){if(t===c.LEFT){this._focusPrevTag();e.preventDefault();return}if(t===c.RIGHT){this._focusNextTag();e.preventDefault();return}if(t===c.HOME){this._focusFirstTag();e.preventDefault();return}if(t===c.END){this._focusLastTag();e.preventDefault();return}if(t===c.DELETE){a=this.tagList.find(g+C).first();if(a.length){o=this._tags[a.index()];this._removeTag(o)}e.preventDefault();return}if(t===c.BACKSPACE){a=this.tagList.find(g+C).first();if(a.length){o=this._tags[a.index()];this._removeTag(o)}else{a=this._focusLastTag();if(a.length){o=this._tags[a.index()];this._removeTag(o)}}e.preventDefault();return}}}if(n){if(t===c.ESC){this._clearFilter()}if(t===c.UP&&!i){this.wrapper.focus();e.preventDefault()}if(v.msie&&v.version<10){if(t===c.BACKSPACE||t===c.DELETE){this._search()}}if(t===c.TAB){this.close();this.wrapper.focus();e.preventDefault();return}}if(i&&t===c.UP||t===c.ESC){this.close();this.wrapper.focus();e.preventDefault();return}if(t===c.ENTER&&this._typingTimeout&&this.filterInput&&s){e.preventDefault();return}if(t===c.SPACEBAR&&!n){this._toggle(!s);e.preventDefault()}if(i&&t===c.DOWN&&!s){this.open();e.preventDefault()}if(t===c.DOWN&&s){if(this.filterInput&&!n){this.filterInput.focus()}else if(this.checkAll&&this.checkAll.is(":visible")){this.checkAll.find("input").focus()}else if(this.tree.is(":visible")){this.tree[0].focus({preventScroll:true});this._ie11PreventScrollOnFocus()}e.preventDefault()}if(t===c.TAB&&s){this.close();this.wrapper.focus();e.preventDefault()}},_focusPrevTag:function(){var e=this.tagList.find(g+C);if(e.length){var t=this.wrapper.attr("aria-activedescendant");e.first().removeClass(C).removeAttr("id").prev().addClass(C).attr("id",t);this.wrapper.attr("aria-activedescendant",t)}else{this._focusLastTag()}},_focusNextTag:function(){var e=this.tagList.find(g+C);if(e.length){var t=this.wrapper.attr("aria-activedescendant");e.first().removeClass(C).removeAttr("id").next().addClass(C).attr("id",t);this.wrapper.attr("aria-activedescendant",t)}else{this._focusFirstTag()}},_focusFirstTag:function(){var e=this.wrapper.attr("aria-activedescendant");this._clearDisabledTag();var t=this.tagList.children("li").first().addClass(C).attr("id",e);this.wrapper.attr("aria-activedescendant",e);return t},_focusLastTag:function(){var e=this.wrapper.attr("aria-activedescendant");this._clearDisabledTag();var t=this.tagList.children("li").last().addClass(C).attr("id",e);this.wrapper.attr("aria-activedescendant",e);return t},_clearDisabledTag:function(){this.tagList.find(g+C).removeClass(C).removeAttr("id")},_search:function(){var t=this;clearTimeout(t._typingTimeout);t._typingTimeout=setTimeout(function(){var e=t.filterInput.val();if(t._prev!==e){t._prev=e;t.search(e)}t._typingTimeout=null},t.options.delay)},_clearFilter:function(){if(this.filterInput.val().length){this.filterInput.val("");this._prev="";this._filtering=true;this.treeview.dataSource.filter({})}},_removeTagClick:function(e){e.stopPropagation();var t=this._tags[d(e.currentTarget.parentElement).index()];this._removeTag(t)},_removeTag:function(e){if(!e){return}var t=e.uid;this._uncheckItemByUid(t)}});function P(e,t,i){var n=0,r=t.length-1,a;for(;n<r;++n){a=t[n];if(!(a in e)){e[a]={}}e=e[a]}e[t[r]]=i}t.plugin(F);var z=o.Class.extend({init:function(e){this._dropdowntree=e},_initWrapper:function(){this._wrapper();this._span()},_preselect:function(e){var t=this._dropdowntree;t._selectValue(e)},_wrapper:function(){var e=this._dropdowntree,t=e.element,i=t[0],n;n=t.parent();if(!n.is("span.k-widget")){n=t.wrap("<span />").parent();n[0].style.cssText=i.style.cssText;n[0].title=i.title}e._focused=e.wrapper=n.addClass("k-widget k-widget-2021 k-dropdowntree").addClass(i.className).removeClass("input-validation-error").css("display","").attr({accesskey:t.attr("accesskey"),unselectable:"on",role:"listbox","aria-haspopup":true,"aria-expanded":false});t.hide().removeAttr("accesskey")},_span:function(){var e=this._dropdowntree,t=e.wrapper,i="span.k-input",n;n=t.find(i);if(!n[0]){t.append('<span unselectable="on" class="k-dropdown-wrap k-state-default"><span unselectable="on" class="k-input">&nbsp;</span><span unselectable="on" class="k-select" aria-label="select"><span class="k-icon k-i-arrow-60-down"></span></span></span>').append(e.element);n=t.find(i)}e.span=n;e._inputWrapper=d(t[0].firstChild);e._arrow=t.find(".k-select");e._arrowIcon=e._arrow.find(".k-icon")},_setValue:function(e){var t=this._dropdowntree;var i;if(e===a||e===null){i=t._values.slice()[0];e=typeof i==="object"?i:t._accessor()||i;return e===a||e===null?"":e}t._valueMethodCalled=true;if(e.length===0){t._clearTextAndValue();t._valueMethodCalled=false;return}t._selectItemByValue(e);t._toggleCloseVisibility()},_clearValue:function(){var e=this._dropdowntree;var t=e.treeview.select();if(e.treeview.dataItem(t)){e.treeview.dataItem(t).set("selected",false);if(!e._valueMethodCalled){e.trigger(I)}}},_checkLoadedItem:function(e,t){var i=this._dropdowntree;if(!i._isNullorUndefined(t)&&t!==""){if(i._valueComparer(e,t)){i._preventChangeTrigger=true;e.set("selected",true);i._preventChangeTrigger=false}else if(e.selected){i.treeview.select(i.treeview.findByUid(e.uid))}}else if(!t&&e.selected){i.treeview.select(i.treeview.findByUid(e.uid))}}});var B=o.Class.extend({init:function(e){this._dropdowntree=e},_initWrapper:function(){var e=this._dropdowntree;this._tagTemplate();e.element.attr("multiple","multiple").hide();this._wrapper();e._tags=new n([]);e._multipleTags=new n([]);this._tagList();e.span=d('<span unselectable="on" class="k-input">&nbsp;</span>').insertAfter(e.tagList);e._inputWrapper=d(e.wrapper[0].firstChild)},_preselect:function(e,t){var i=this._dropdowntree;var n=t||i.options.value;if(!d.isArray(e)&&!(e instanceof o.data.ObservableArray)){e=[e]}if(d.isPlainObject(e[0])||e[0]instanceof o.data.ObservableObject||!i.options.dataValueField){i.dataSource.data(e);i.value(n)}},_tagTemplate:function(){var t=this._dropdowntree;var e=t.options;var i=e.valueTemplate;var n=e.tagMode==="multiple";var r=e.messages.singleTag;i=i?o.template(i):t.valueTemplate;t.valueTemplate=function(e){if(n){return'<li class="k-button '+(e.enabled===false?"k-state-disabled":"")+'" unselectable="on" role="option" '+(e.enabled===false?'aria-disabled="true"':"")+">"+'<span unselectable="on">'+i(e)+"</span>"+'<span title="'+t.options.messages.deleteTag+'" aria-label="'+t.options.messages.deleteTag+'" class="k-select">'+'<span class="k-icon k-i-close"></span>'+"</span>"+"</li>"}return'<li class="k-button" unselectable="on" role="option">'+'<span unselectable="on" data-bind="text: tags.length"></span>'+'<span unselectable="on">&nbsp;'+r+"</span>"+"</li>"}},_wrapper:function(){var e=this._dropdowntree,t=e.element,i=t.parent("span.k-dropdowntree");if(!i[0]){i=t.wrap('<div class="k-widget k-widget-2021 k-dropdowntree" unselectable="on" />').parent();i[0].style.cssText=t[0].style.cssText;i[0].title=t[0].title;d('<div class="k-multiselect-wrap k-floatwrap" unselectable="on" />').insertBefore(t)}e.wrapper=i.addClass(t[0].className).css("display","").attr({role:"listbox","aria-activedescendant":o.guid(),"aria-haspopup":true,"aria-expanded":false});e._innerWrapper=d(i[0].firstChild)},_tagList:function(){var e=this._dropdowntree,t=e._innerWrapper.children("ul");if(!t[0]){var i=e.options.tagMode==="multiple";var n=i?"tags":"multipleTag";t=d('<ul role="listbox" unselectable="on" data-template="tagTemplate" data-bind="source: '+n+'" class="k-reset"/>').appendTo(e._innerWrapper)}e.tagList=t;e.tagList.attr("id",o.guid()+"_tagList");e.wrapper.attr("aria-owns",e.tagList.attr("id"));var r=o.observable({multipleTag:e._multipleTags,tags:e._tags,tagTemplate:e.valueTemplate});o.bind(e.tagList,r);e.tagList.attr("data-stop",true)},_setValue:function(e){var t=this._dropdowntree;var i=t._values;if(e===a||e===null){return t._values.slice()}t.setValue(e);t._valueMethodCalled=true;if(e.length){this._removeValues(i,e);t._checkItemByValue(e)}else{t._clearTextAndValue()}t._valueMethodCalled=false;t._toggleCloseVisibility()},_removeValues:function(e,t){var i=this._dropdowntree;var n=this._getNewValues(e,t);for(var r=0;r<n.length;r++){for(var a=0;a<i._tags.length;a++){if(i._valueComparer(i._tags[a],n[r])){i._uncheckItemByUid(i._tags[a].uid)}}}},_getNewValues:function(e,t){var i=[];for(var n=0;n<e.length;n++){if(t.indexOf(e[n])===-1){i.push(e[n])}}return i},_clearValue:function(){var e=this._dropdowntree;var t=e._tags.slice();for(var i=0;i<t.length;i++){var n=t[i].uid;e._preventChangeTrigger=true;e._uncheckItemByUid(n)}if(t.length){e._preventChangeTrigger=false;if(!e._valueMethodCalled){e.trigger(I)}}},_checkLoadedItem:function(e,t){var i=this._dropdowntree;if(i._noInitialValue&&e.checked){i._checkValue(e);return}if((t.length||this._isDataSourceSet)&&(t.indexOf(i._currentValue(e))!==-1||t.indexOf(e))!==-1&&!this._findTag(i._currentValue(e))){if(e.checked){i._checkValue(e)}else{i._preventChangeTrigger=true;e.set("checked",true);i._preventChangeTrigger=false}}},_findTag:function(t){var i=this._dropdowntree;return i._tags.find(function(e){return i._valueComparer(e,t)})}});o.ui.DropDownTree.SingleSelection=z;o.ui.DropDownTree.MultipleSelection=B})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.combobox",["kendo.list","kendo.mobile.scroller","kendo.virtuallist"],e)})(function(){var e={id:"combobox",name:"ComboBox",category:"web",description:"The ComboBox widget allows the selection from pre-defined values or entering a new value.",depends:["list"],features:[{id:"mobile-scroller",name:"Mobile scroller",description:"Support for kinetic scrolling in mobile device",depends:["mobile.scroller"]},{id:"virtualization",name:"VirtualList",description:"Support for virtualization",depends:["virtuallist"]}]};(function(l,d){var a=window.kendo,e=a.ui,u=e.List,o=e.Select,c=a.caret,s=a.support,f=s.placeholder,h=a._activeElement,p=a.keys,v=".kendoComboBox",t=v+"FocusEvent",m="click"+v,g="mousedown"+v,_="disabled",b="readonly",w="change",i="k-i-loading",k="k-state-default",y="k-state-focused",x="k-state-disabled",C="aria-disabled",S="aria-readonly",T="off",D="filter",r="accept",A="rebind",E="mouseenter"+v+" mouseleave"+v,I=l.proxy,M=/(\r\n|\n|\r)/gm,R=[16,17,18,19,20,33,34,37,39,45,91,92,144,145];var n=o.extend({init:function(e,t){var i=this,n,r;i.ns=v;t=l.isArray(t)?{dataSource:t}:t;o.fn.init.call(i,e,t);t=i.options;e=i.element.on("focus"+v,I(i._focusHandler,i));t.placeholder=t.placeholder||e.attr("placeholder");i._reset();i._wrapper();i._input();i._clearButton();i._tabindex(i.input);i._popup();i._dataSource();i._ignoreCase();i._enable();i._attachFocusEvents();i._oldIndex=i.selectedIndex=-1;i._aria();i._initialIndex=t.index;i.requireValueMapper(i.options);i._initList();i._cascade();if(t.autoBind){i._filterSource()}else{n=t.text;if(!n&&i._isSelect){n=e.children(":selected").text()}if(n){i._setText(n)}}if(!n){i._placeholder()}r=l(i.element).parents("fieldset").is(":disabled");if(r){i.enable(false)}a.notify(i);i._toggleCloseVisibility()},options:{name:"ComboBox",enabled:true,index:-1,text:null,value:null,autoBind:true,delay:200,dataTextField:"",dataValueField:"",minLength:1,enforceMinLength:false,height:200,highlightFirst:true,filter:"none",placeholder:"",suggest:false,cascadeFrom:"",cascadeFromField:"",cascadeFromParentField:"",ignoreCase:true,animation:{},virtual:false,template:null,groupTemplate:"#:data#",fixedGroupTemplate:"#:data#",clearButton:true,syncValueAndText:true,autoWidth:false,popup:null},events:["open","close",w,"select","filtering","dataBinding","dataBound","cascade","set"],setOptions:function(e){var t=this._listOptions(e);o.fn.setOptions.call(this,e);this.listView.setOptions(t);this._accessors();this._aria();this._clearButton()},destroy:function(){var e=this;e.input.off(v);e.input.off(t);e.element.off(v);e.wrapper.off(v);e._inputWrapper.off(v);clearTimeout(e._pasteTimeout);e._arrow.off(m+" "+g);e._clear.off(m+" "+g);o.fn.destroy.call(e)},_isValueChanged:function(e){return e!==u.unifyType(this._old,typeof e)&&e!==u.unifyType(this._oldText,typeof e)},_change:function(){var e=this;var t=e.text();var i=t&&t!==e._oldText&&t!==e.options.placeholder;var n=e.selectedIndex;var r=n===-1;if(!e.options.syncValueAndText&&!e.value()&&r&&i){e._old="";e._oldIndex=n;e._oldText=t;if(!e._typing){e.element.trigger(w)}e.trigger(w);e._typing=false;return}o.fn._change.call(e);e._oldText=e.text&&e.text();e._toggleCloseVisibility()},_attachFocusEvents:function(){var e=this;e.input.on("focus"+t,I(e._inputFocus,e)).on("focusout"+t,I(e._inputFocusout,e))},_focusHandler:function(e){if(e.target===this.element[0]){this.input.focus()}},_arrowClick:function(){this._toggle()},_inputFocus:function(){this._inputWrapper.addClass(y);this._placeholder(false)},_inputFocusout:function(e){var t=this;var i=t.value();var n=!l(e.relatedTarget).closest(".k-clear-value").length;t._userTriggered=true;t._inputWrapper.removeClass(y);clearTimeout(t._typingTimeout);t._typingTimeout=null;if(n){t.text(t.text())}var r=t._focus();var a=this.listView.dataItemByIndex(this.listView.getElementIndex(r));if(i!==t.value()&&t.trigger("select",{dataItem:a,item:r})){t.value(i);return}t._placeholder();t._valueBeforeCascade=t._old;if(n){t._blur();t.element.blur()}},_inputPaste:function(){var e=this;clearTimeout(e._pasteTimeout);e._pasteTimeout=null;e._pasteTimeout=setTimeout(function(){e.search()})},_editable:function(e){var t=this,i=e.disable,n=e.readonly,r=t._inputWrapper.off(v),a=t.element.add(t.input.off(v)),o=t._arrow.off(m+" "+g),s=t._clear;if(!n&&!i){r.addClass(k).removeClass(x).on(E,t._toggleHover);a.removeAttr(_).removeAttr(b).attr(C,false).attr(S,false);o.on(m,I(t._arrowClick,t)).on(g,function(e){e.preventDefault()});s.on(m+" touchend"+v,I(t._clearValue,t));t.input.on("keydown"+v,I(t._keydown,t)).on("input"+v,I(t._search,t)).on("paste"+v,I(t._inputPaste,t));t.wrapper.on(m+v,I(t._focusHandler,t))}else{r.addClass(i?x:k).removeClass(i?k:x);a.attr(_,i).attr(b,n).attr(C,i).attr(S,n)}t._toggleCloseVisibility()},open:function(){var e=this;var t=e._state;var i=e.dataSource.filter()?e.dataSource.filter().filters.length>0:false;var n=!e.ul.find(e.listView.focus()).length;if(e.popup.visible()){return}if(!e.listView.bound()&&t!==D||t===r){e._open=true;e._state=A;if(e.options.minLength!==1&&!i||i&&e.value()&&e.selectedIndex===-1){e.refresh();e._openPopup();if(!this.options.virtual){e.listView.bound(false)}}else{e._filterSource()}}else if(e._allowOpening()){e.popup._hovered=true;e._openPopup();if(e.options.virtual){e._focusItem()}else if(n&&e.options.highlightFirst){e.listView.focus(0)}}},_scrollToFocusedItem:function(){var e=this.listView;e.scrollToIndex(e.getElementIndex(e.focus()))},_openPopup:function(){this.popup.one("activate",I(this._scrollToFocusedItem,this));this.popup.open()},_updateSelectionState:function(){var e=this;var t=e.options.text;var i=e.options.value;if(e.listView.isFiltered()){return}if(e.selectedIndex===-1){if(t===d||t===null){t=i}e._accessor(i);e.input.val(t||e.input.val());e._placeholder()}else if(e._oldIndex===-1){e._oldIndex=e.selectedIndex}},_buildOptions:function(e){var t=this;if(!t._isSelect){return}var i=t._customOption;if(t._state===A){t._state=""}t._customOption=d;t._options(e,"",t.value());if(i&&i[0].selected&&!t.listView._emptySearch){t._custom(i.val())}},_updateSelection:function(){var e=this;var t=e.listView;var i=e._initialIndex;var n=i!==null&&i>-1;var r=e._state===D;if(r){l(t.focus()).removeClass("k-state-selected");return}if(e._fetch){return}if(!t.value().length){if(n){e.select(i)}else if(e._accessor()){t.value(e._accessor())}}e._initialIndex=null;var a=t.selectedDataItems()[0];if(!a){return}if(e._value(a)!==e.value()){e._custom(e._value(a))}else if(e._value(a)!==e.element[0].value){e._accessor(e._value(a))}if(e.text()&&e.text()!==e._text(a)){e._selectValue(a)}},_updateItemFocus:function(){var e=this.listView;if(!this.options.highlightFirst){e.focus(-1)}else if(!e.focus()&&!e.focusIndex()){e.focus(0)}},_listBound:function(){var e=this;var t=e.input[0]===h();var i=e.dataSource.flatView();var n=e.listView.skip();var r=i.length;var a=e.dataSource._group?e.dataSource._group.length:0;var o=n===d||n===0;e._presetValue=false;e._renderFooter();e._renderNoData();e._toggleNoData(!r);e._toggleHeader(!!a&&!!r);e._resizePopup();e.popup.position();e._buildOptions(i);e._updateSelection();if(i.length&&o){e._updateItemFocus();if(e.options.suggest&&t&&e.input.val()){e.suggest(i[0])}}if(e._open){e._open=false;if(e._typingTimeout&&!t){e.popup.close()}else{e.toggle(e._allowOpening())}e._typingTimeout=null}e._hideBusy();e.trigger("dataBound")},_listChange:function(){this._selectValue(this.listView.selectedDataItems()[0]);if(this._presetValue){this._oldIndex=this.selectedIndex}},_get:function(e){var t,i,n;if(typeof e==="function"){t=this.dataSource.flatView();for(n=0;n<t.length;n++){if(e(t[n])){e=n;i=true;break}}if(!i){e=-1}}return e},_select:function(e,t){var i=this;e=i._get(e);if(e===-1){i.input[0].value="";i._accessor("")}return i.listView.select(e).done(function(){if(!t&&i._state===D){i._state=r}i._toggleCloseVisibility()})},_selectValue:function(e){var t=this.listView.select();var i="";var n="";t=t[t.length-1];if(t===d){t=-1}this.selectedIndex=t;if(this.listView.isFiltered()&&t!==-1){this._valueBeforeCascade=this._old}if(t===-1&&!e){if(this.options.syncValueAndText){if(this.options.dataTextField===this.options.dataValueField){n=this._accessor()}else{n=this.input[0].value}i=n}else{n=this.text()}this.listView.focus(-1)}else{if(e||e===0){i=this._dataValue(e);n=this._text(e)}if(i===null){i=""}}this._setDomInputValue(n);this._accessor(i!==d?i:n,t);this._placeholder();this._triggerCascade()},_setDomInputValue:function(e){var t=this;var i=c(this.input);var n;if(i&&i.length){n=i[0]}this._prev=this.input[0].value=e;if(n&&this.selectedIndex===-1){var r=s.mobileOS;if(r.wp||r.android){setTimeout(function(){t.input[0].setSelectionRange(n,n)},0)}else{this.input[0].setSelectionRange(n,n)}}},refresh:function(){this.listView.refresh()},_toggleCloseVisibility:function(){var e=this.element.is(":disabled")||this.element.is("[readonly]");if(this.text()&&!e){this._showClear()}else{this._hideClear()}},suggest:function(e){var t=this;var i=t.input[0];var n=t.text();var r=c(i)[0];var a=t._last;var o;var s=t.dataSource.options.accentFoldingFiltering;if(a==p.BACKSPACE||a==p.DELETE){t._last=d;return}e=e||"";if(typeof e!=="string"){if(e[0]){e=t.dataSource.view()[u.inArray(e[0],t.ul[0])]}e=e?t._text(e):""}if(r<=0){r=(s?n.toLocaleLowerCase(s):n.toLowerCase()).indexOf(s?e.toLocaleLowerCase(s):e.toLowerCase())+1}if(e){e=e.toString();o=(s?e.toLocaleLowerCase(s):e.toLowerCase()).indexOf(s?n.toLocaleLowerCase(s):n.toLowerCase());if(o>-1){n+=e.substring(o+n.length)}}else{n=n.substring(0,r)}if(n.length!==r||!e){i.value=n;if(i===h()){c(i,r,n.length)}}},text:function(e){e=e===null?"":e;var t=this;var i=t.input[0];var n=t.options.ignoreCase;var r=e;var a;var o;if(e===d){return i.value}if(t.options.autoBind===false&&!t.listView.bound()){t._setText(e);return}a=t.dataItem();if(a&&t._text(a).replace&&t._text(a).replace(M,"")===e){o=t._value(a);if(o===u.unifyType(t._old,typeof o)){t._triggerCascade();return}}if(n){r=r.toLowerCase()}if(t.dataItem()&&t._text(t.dataItem())===e){return}t._select(function(e){e=t._text(e);if(n){e=(e+"").toLowerCase()}return e===r}).done(function(){if(t.selectedIndex<0){i.value=e;if(t.options.syncValueAndText){t._accessor(e)}t._cascadeTriggered=true;t._triggerCascade()}t._prev=i.value});t._toggleCloseVisibility()},toggle:function(e){this._toggle(e,true)},value:function(e){var t=this;var i=t.options;var n=t.listView;if(e===d){e=t._accessor()||t.listView.value()[0];if(!this.text()){return""}return e===d||e===null?"":e}t.requireValueMapper(t.options,e);t.trigger("set",{value:e});if(e===i.value&&t.input.val()===i.text&&!t.options.cascadeFrom){return}t._accessor(e);if(t._isFilterEnabled()&&n.bound()&&n.isFiltered()){t._clearFilter()}else{t._fetchData()}n.value(e).done(function(){if(t.selectedIndex===-1&&(!n._selectedDataItems||!n._selectedDataItems.length)){t._accessor(e);t.input.val(e);t._placeholder(true)}if(t._userTriggered){t._old=t._accessor()}else{t._old=t._valueBeforeCascade=t._accessor()}t._oldIndex=t.selectedIndex;t._prev=t._oldText=t.input.val();if(t._state===D){t._state=r}t._toggleCloseVisibility()})},_hideBusy:function(){var e=this;clearTimeout(e._busy);e._arrowIcon.removeClass(i);e._focused.attr("aria-busy",false);e._busy=null;e._toggleCloseVisibility()},_click:function(e){var t=this;var i=e.item;var n=t.listView.dataItemByIndex(t.listView.getElementIndex(i));var r=true;e.preventDefault();if(n){r=t._value(n)!==u.unifyType(t.value(),typeof t._value(n));if(!r){t.input.val(t._text(n))}}if(r&&t.trigger("select",{dataItem:n,item:i})){t.close();return}t._userTriggered=true;t._select(i).done(function(){t._blur()})},_syncValueAndText:function(){return this.options.syncValueAndText},_inputValue:function(){return this.text()},_searchByWord:function(i){var n=this;var e=n.options;var t=n.dataSource;var r=e.ignoreCase;var a=function(e){var t=n._text(e);if(t!==d){t=t+"";if(t!==""&&i===""){return false}if(r){t=t.toLowerCase()}return t.indexOf(i)===0}};if(r){i=i.toLowerCase()}if(!n.ul[0].firstChild){t.one(w,function(){if(t.view()[0]){n.search(i)}}).fetch();return}this.listView.focus(this._get(a));var o=this.listView.focus();if(o){if(e.suggest){n.suggest(o)}this.open()}if(this.options.highlightFirst&&!i){this.listView.focusFirst()}},_input:function(){var e=this,t=e.element.removeClass("k-input")[0],i=t.accessKey,n=e.wrapper,r="input.k-input",a=t.name||"",o,s;if(a){a='name="'+a+'_input" '}o=n.find(r);if(!o[0]){n.append('<span tabindex="-1" unselectable="on" class="k-dropdown-wrap k-state-default"><input '+a+'class="k-input" type="text" autocomplete="'+T+'"/><span unselectable="on" class="k-select" aria-label="select"><span class="k-icon k-i-arrow-60-down"></span></span></span>').append(e.element);o=n.find(r)}o[0].style.cssText=t.style.cssText;o[0].title=t.title;s=parseInt(this.element.prop("maxlength")||this.element.attr("maxlength"),10);if(s>-1){o[0].maxLength=s}o.addClass(t.className).css({width:"",height:t.style.height,position:""}).attr({role:"combobox","aria-expanded":false}).show();if(f){o.attr("placeholder",e.options.placeholder)}if(i){t.accessKey="";o[0].accessKey=i}e._focused=e.input=o;e._inputWrapper=l(n[0].firstChild);e._arrow=n.find(".k-select").attr({role:"button",tabIndex:-1});e._arrowIcon=e._arrow.find(".k-icon");if(t.id){e._arrow.attr("aria-controls",e.ul[0].id)}},_clearButton:function(){u.fn._clearButton.call(this);if(this.options.clearButton){this._clear.insertAfter(this.input);this.wrapper.addClass("k-combobox-clearable")}},_keydown:function(e){var t=this,i=e.keyCode,n=t.options.dataTextField||"text",r=i>=112&&i<=135,a=R.indexOf(i)>-1;t._last=i;clearTimeout(t._typingTimeout);t._typingTimeout=null;if(i===p.HOME){t._firstItem()}else if(i===p.END){t._lastItem()}else if(i===p.ENTER||i===p.TAB&&t.popup.visible()){var o=t.listView.focus();var s=t.dataItem();var l=true;if(!t.popup.visible()&&(!s||t.text()!==t._text(s))){o=null}if(o){if(t.popup.visible()){e.preventDefault()}s=t.listView.dataItemByIndex(t.listView.getElementIndex(o));if(s){l=t._value(s)!==u.unifyType(t.value(),typeof t._value(s))}if(l&&t.trigger("select",{dataItem:s,item:o})){return}t._userTriggered=true;t._select(o).done(function(){t._blur();t._valueBeforeCascade=t._old=t.value()})}else{if(t._syncValueAndText()||t._isSelect){if(!t.dataItem()||t.dataItem()[n]!==t.input.val()){t._accessor(t.input.val())}}if(t.options.highlightFirst){t.listView.value(t.input.val());t._blur()}else{t._oldText=t.text()}}}else if(i!=p.TAB&&!t._move(e)&&!a&&!r&&!e.ctrlKey){t._search()}else if(i===p.ESC&&!t.popup.visible()&&t.text()){t._clearValue()}},_placeholder:function(e){if(f){return}var t=this,i=t.input,n=t.options.placeholder,r;if(n){r=t.value();if(e===d){e=!r}i.toggleClass("k-readonly",e);if(!e){if(!r){n=""}else{return}}i.val(n);if(!n&&i[0]===h()){c(i[0],0,0)}}},_search:function(){var t=this;clearTimeout(t._typingTimeout);t._typingTimeout=setTimeout(function(){var e=t.text();if(e!==""&&t._prev!==e){t._prev=e;if(t.options.filter==="none"&&t.options.virtual){t.listView.select(-1)}t.search(e);t._toggleCloseVisibility()}else if(e===""&&t._prev!==""&&t._prev!==d){t._clearValue();t._open=true;t._state=A}t._typingTimeout=null},t.options.delay)},_setText:function(e){this.input.val(e);this._prev=e},_wrapper:function(){var e=this,t=e.element,i=t.parent();if(!i.is("span.k-widget")){i=t.hide().wrap("<span />").parent();i[0].style.cssText=t[0].style.cssText}e.wrapper=i.addClass("k-widget k-widget-2021 k-combobox").addClass(t[0].className).removeClass("input-validation-error").css("display","")},_clearSelection:function(e,t){var i=this;var n=e.value();var r=n&&e.selectedIndex===-1;if(this.selectedIndex==-1&&this.value()){return}if(t||!n||r){i.options.value="";i.value("")}},_preselect:function(e,t){this.input.val(t);this._accessor(e);this._old=this._accessor();this._oldIndex=this.selectedIndex;this.listView.setValue(e);this._placeholder();this._initialIndex=null;this._presetValue=true;this._toggleCloseVisibility()},_clearText:function(){this._old=this.value();this.text("")},_clearValue:function(){o.fn._clearValue.call(this);this.input.focus()}});e.plugin(n)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.multiselect",["kendo.list","kendo.mobile.scroller","kendo.virtuallist"],e)})(function(){var e={id:"multiselect",name:"MultiSelect",category:"web",description:"The MultiSelect widget allows the selection from pre-defined values.",depends:["list"],features:[{id:"mobile-scroller",name:"Mobile scroller",description:"Support for kinetic scrolling in mobile device",depends:["mobile.scroller"]},{id:"virtualization",name:"VirtualList",description:"Support for virtualization",depends:["virtuallist"]}]};(function(h,p){var v=window.kendo,e=v.ui,a=e.List,m=h.extend({A:65},v.keys),d=v._activeElement,i=v.data.ObservableArray,s=h.proxy,o="id",l="li",g="accept",_="filter",u="rebind",t="open",n="close",r="change",c="progress",f="select",b="deselect",w="aria-disabled",k="aria-readonly",y="k-state-focused",x="k-state-selected",C="k-hidden",S="k-state-hover",T="k-state-disabled",D="k-no-click",A="disabled",E="readonly",I="off",M=".kendoMultiSelect",R="click"+M,B="keydown"+M,F="mouseenter"+M,P="mouseleave"+M,L=F+" "+P,H=/"/g,z=h.isArray,N=["font-family","font-size","font-stretch","font-style","font-weight","letter-spacing","text-transform","line-height"];var O=a.extend({init:function(e,t){var i=this,n,r;i.ns=M;a.fn.init.call(i,e,t);i._optionsMap={};i._customOptions={};i._wrapper();i._tagList();i._input();i._textContainer();i._loader();i._clearButton();i._tabindex(i.input);e=i.element.attr("multiple","multiple").hide();t=i.options;if(!t.placeholder){t.placeholder=e.data("placeholder")}n=e.attr(o);if(n){i._tagID=n+"_tag_active";n=n+"_taglist";i.tagList.attr(o,n);i.input.attr("aria-describedby",n)}i._initialOpen=true;i._ariaLabel();i._ariaSetLive();i._dataSource();i._ignoreCase();i._popup();i._tagTemplate();i.requireValueMapper(i.options);i._initList();i._reset();i._enable();i._placeholder();if(t.autoBind){i.dataSource.fetch()}else if(t.value){i._preselect(t.value)}r=h(i.element).parents("fieldset").is(":disabled");if(r){i.enable(false)}i._ariaSetSize(i.value().length);v.notify(i);i._toggleCloseVisibility()},options:{name:"MultiSelect",tagMode:"multiple",enabled:true,autoBind:true,autoClose:true,highlightFirst:true,dataTextField:"",dataValueField:"",filter:"startswith",ignoreCase:true,minLength:1,messages:{singleTag:"item(s) selected",clear:"clear",deleteTag:"delete",noData:"No data found."},enforceMinLength:false,delay:100,value:null,maxSelectedItems:null,placeholder:"",height:200,animation:{},virtual:false,itemTemplate:"",tagTemplate:"",groupTemplate:"#:data#",fixedGroupTemplate:"#:data#",clearButton:true,autoWidth:false,popup:null},events:[t,n,r,f,b,"filtering","dataBinding","dataBound"],setDataSource:function(e){this.options.dataSource=e;this._state="";this._dataSource();this.persistTagList=false;this.listView.setDataSource(this.dataSource);if(this.options.autoBind){this.dataSource.fetch()}},setOptions:function(e){var t=this._listOptions(e);a.fn.setOptions.call(this,e);this.listView.setOptions(t);this._accessors();this._aria(this.tagList.attr(o));this._tagTemplate();this._placeholder();this._clearButton()},currentTag:function(e){var t=this;if(e!==p){if(t._currentTag){t._currentTag.removeClass(y).removeAttr(o);t._currentTag.find(".k-select").attr("aria-hidden",true);t.input.removeAttr("aria-activedescendant")}if(e){e.addClass(y).attr(o,t._tagID);e.find(".k-select").removeAttr("aria-hidden");t.input.attr("aria-activedescendant",t._tagID)}t._currentTag=e}else{return t._currentTag}},dataItems:function(){return this.listView.selectedDataItems()},destroy:function(){var e=this,t=e.ns;clearTimeout(e._busy);clearTimeout(e._typingTimeout);e.wrapper.off(t);e.tagList.off(t);e.input.off(t);e._clear.off(t);a.fn.destroy.call(e)},_activateItem:function(){if(this.popup.visible()){a.fn._activateItem.call(this)}this.currentTag(null)},_listOptions:function(e){var t=this;var i=a.fn._listOptions.call(t,h.extend(e,{selectedItemChange:s(t._selectedItemChange,t),selectable:"multiple"}));var n=this.options.itemTemplate||this.options.template;var r=i.itemTemplate||n||i.template;if(!r){r="#:"+v.expr(i.dataTextField,"data")+"#"}i.template=r;return i},_setListValue:function(){a.fn._setListValue.call(this,this._initialValues.slice(0))},_listChange:function(e){var t=this.dataSource.flatView();var i=this._optionsMap;var n=this._value;if(this._state===u){this._state=""}for(var r=0;r<e.added.length;r++){if(i[n(e.added[r].dataItem)]===p){this._render(t);break}}this._selectValue(e.added,e.removed)},_selectedItemChange:function(e){var t=e.items;var i;var n;for(n=0;n<t.length;n++){i=t[n];this.tagList.children().eq(i.index).children("span:first").html(this.tagTextTemplate(i.item))}},_wrapperMousedown:function(e){var t=this;var i=e.target.nodeName.toLowerCase()!=="input";var n=h(e.target);var r=n.hasClass("k-select")||n.hasClass("k-icon");if(r){r=!n.closest(".k-select").children(".k-i-arrow-60-down").length}if(i&&!(r&&v.support.mobileOS)&&e.cancelable){e.preventDefault()}if(!r){if(t.input[0]!==d()&&i){t.input.focus()}if(t.options.minLength===1){t.open()}}},_inputFocus:function(){this._placeholder(false,true);this.wrapper.addClass(y)},_inputFocusout:function(){var e=this;clearTimeout(e._typingTimeout);e.wrapper.removeClass(y);e._placeholder(!e.listView.selectedDataItems()[0],true);e.close();if(e._state===_){e._state=g;e.listView.skipUpdate(true)}if(e.listView.bound()&&e.listView.isFiltered()){e.persistTagList=true;e._clearFilter()}e.element.blur()},_removeTag:function(e,t){var i=this;var n=i._state;var r=e.index();var a=i.listView;var o=a.value()[r];var s=i.listView.selectedDataItems()[r];var l=i._customOptions[o];var d=a.element[0].children;var u;var c;if(i.trigger(b,{dataItem:s,item:e})){i._close();return}if(l===p&&(n===g||n===_)){l=i._optionsMap[o]}var f=function(){i.currentTag(null);if(t){i._change()}i._close()};if(l===p&&a.select().length){i.persistTagList=false;a.select(a.select()[r]).done(f)}else{u=i.element[0].children[l];if(u){u.selected=false}a.removeAt(r);c=d[l];if(c){d[l].classList.remove("k-state-selected")}if(i.options.tagMode!=="single"){e.remove()}else{i._updateTagListHTML()}f()}},_tagListClick:function(e){e.preventDefault();e.stopPropagation();var t=h(e.currentTarget);if(!t.children(".k-i-arrow-60-down").length){this._removeTag(t.closest(l),true)}},_clearValue:function(){var i=this;if(i.options.tagMode==="single"){i._clearSingleTagValue()}else{i.tagList.children().each(function(e,t){i._removeTag(h(t),false)})}i.input.val("");i._search();i._change();i.focus();i._hideClear();if(i._state===_){i._state=g}},_clearSingleTagValue:function(){var e=this;var t=e.dataItems();var i=e.tagList.children();var n=e.persistTagList;for(var r=0;r<t.length;r+=1){if(e.trigger(b,{dataItem:t[r],item:i.first()})){e._close();return}}if(n){e.persistTagList=false}e.listView.value([]);e.persistTagList=n},_focusHandler:function(){this.input.focus()},_editable:function(e){var t=this,i=e.disable,n=e.readonly,r=t.wrapper.off(M),a=t.tagList.off(M),o=t.element.add(t.input.off(M));if(!n&&!i){r.removeClass(T).removeClass(D).on(L,t._toggleHover).on("mousedown"+M+" touchend"+M,s(t._wrapperMousedown,t)).on(R,s(t._focusHandler,t));t.input.on(B,s(t._keydown,t)).on("paste"+M,s(t._search,t)).on("input"+M,s(t._search,t)).on("focus"+M,s(t._inputFocus,t)).on("focusout"+M,s(t._inputFocusout,t));t._clear.on(R+" touchend"+M,s(t._clearValue,t));o.removeAttr(A).removeAttr(E).attr(w,false).attr(k,false);a.on(F,l,function(){h(this).addClass(S)}).on(P,l,function(){h(this).removeClass(S)}).on(R+" touchend"+M,"li.k-button .k-select",s(t._tagListClick,t))}else{r.toggleClass(T,i).toggleClass(D,n);o.attr(A,i).attr(E,n).attr(w,i).attr(k,n)}},_close:function(){var e=this;if(e.options.autoClose){e.close()}else{e.popup.position()}},_filterSource:function(e,t){if(!t){t=this._retrieveData}this._retrieveData=false;a.fn._filterSource.call(this,e,t)},close:function(){this._activeItem=null;this.input.removeAttr("aria-activedescendant");this.popup.close()},open:function(){var e=this;if(e._request){e._retrieveData=false}if(e._retrieveData||!e.listView.bound()||e._state===g){e._open=true;e._state=u;e.listView.skipUpdate(true);e.persistTagList=e._initialOpen&&!e.listView.bound()?false:true;e._filterSource();e._focusItem()}else if(e._allowOpening()){if(e._initialOpen&&!e.options.autoBind&&!e.options.virtual&&e.options.value&&!h.isPlainObject(e.options.value[0])){e.value(e.value()||e._initialValues)}e.popup._hovered=true;e._initialOpen=false;e.popup.open();e._focusItem()}},toggle:function(e){e=e!==p?e:!this.popup.visible();this[e?t:n]()},refresh:function(){this.listView.refresh()},_listBound:function(){var e=this;var t=e.dataSource.flatView();e._render(t);e._renderFooter();e._renderNoData();e._toggleNoData(!t.length);e._resizePopup();e._updateItemFocus();if(e._open){e._open=false;e.toggle(e._allowOpening())}e.popup.position();if(e._touchScroller){e._touchScroller.reset()}e._hideBusy();e.trigger("dataBound")},_updateItemFocus:function(){var e=this,t=e.dataSource.flatView(),i=e.listView.skip(),n=i===p||i===0;if(t.length&&n){if(!e.options.highlightFirst){e.listView.focus(-1)}else{e.listView.focusFirst()}}},_inputValue:function(){var e=this;var t=e.input.val();if(e.options.placeholder===t){t=""}return t},value:function(e){var t=this;var i=t.listView;var n=i.value().slice();var r=t.options.maxSelectedItems;var a=i.bound()&&i.isFiltered();if(e===p){return n}t.persistTagList=false;t.requireValueMapper(t.options,e);e=t._normalizeValues(e);if(r!==null&&e.length>r){e=e.slice(0,r)}if(a){t._clearFilter()}i.value(e);t._old=t._valueBeforeCascade=e.slice();if(!a){t._fetchData()}t._ariaSetSize(t.value().length);t._toggleCloseVisibility()},_preselect:function(e,t){var i=this;if(!z(e)&&!(e instanceof v.data.ObservableArray)){e=[e]}if(h.isPlainObject(e[0])||e[0]instanceof v.data.ObservableObject||!i.options.dataValueField){i.dataSource.data(e);i.value(t||i._initialValues);i._retrieveData=true}},_setOption:function(e,t){var i=this.element[0].children[this._optionsMap[e]];if(i){i.selected=t}},_fetchData:function(){var e=this;var t=!!e.dataSource.view().length;var i=e.listView.value().length===0;if(i||e._request){return}if(e._retrieveData||!e._fetch&&!t){e._fetch=true;e._retrieveData=false;e.dataSource.read().done(function(){e._fetch=false})}},_isBound:function(){return this.listView.bound()&&!this._retrieveData},_dataSource:function(){var e=this,t=e.element,i=e.options,n=i.dataSource||{};n=z(n)?{data:n}:n;n.select=t;n.fields=[{field:i.dataTextField},{field:i.dataValueField}];if(e.dataSource&&e._refreshHandler){e._unbindDataSource()}else{e._progressHandler=s(e._showBusy,e);e._errorHandler=s(e._hideBusy,e)}e.dataSource=v.data.DataSource.create(n).bind(c,e._progressHandler).bind("error",e._errorHandler)},_reset:function(){var e=this,t=e.element,i=t.attr("form"),n=i?h("#"+i):t.closest("form");if(n[0]){e._resetHandler=function(){setTimeout(function(){e.value(e._initialValues);e._placeholder()})};e._form=n.on("reset",e._resetHandler)}},_initValue:function(){var e=this.options.value||this.element.val();this._old=this._initialValues=this._normalizeValues(e)},_normalizeValues:function(e){var t=this;if(e===null){e=[]}else if(e&&h.isPlainObject(e)){e=[t._value(e)]}else if(e&&h.isPlainObject(e[0])){e=h.map(e,function(e){return t._value(e)})}else if(!z(e)&&!(e instanceof i)){e=[e]}else if(z(e)){e=e.slice()}return e},_change:function(){var e=this,t=e.value();if(!V(t,e._old)){e._old=t.slice();e.trigger(r);e.element.trigger(r)}e.popup.position();e._ariaSetSize(t.length);e._toggleCloseVisibility()},_click:function(e){var t=this;var i=e.item;e.preventDefault();t._select(i).done(function(){t._activeItem=i;t._change();t._close()})},_getActiveItem:function(){return this._activeItem||h(this.listView.items()[this._getSelectedIndices().length-1])||this.listView.focus()},_getSelectedIndices:function(){return this.listView._selectedIndices||this.listView._selectedIndexes},_keydown:function(e){var i=this;var t=e.keyCode;var n=i._currentTag;var r=i.listView;var a=i.input.val();var o=v.support.isRtl(i.wrapper);var s=i.popup.visible();var l=0;var d;if(t!==m.ENTER){this._multipleSelection=false}if(t===m.DOWN){e.preventDefault();if(!s){i.open();if(!r.focus()){r.focusFirst()}return}if(r.focus()){if(!i._activeItem&&e.shiftKey){i._activeItem=r.focus();l=-1}d=r.getElementIndex(i._getActiveItem().first());r.focusNext();if(!r.focus()){r.focusLast()}else{if(e.shiftKey){this._multipleSelection=true;i._selectRange(d,r.getElementIndex(r.focus().first())+l)}}}else{r.focusFirst()}}else if(t===m.UP){if(s){if(!i._activeItem&&e.shiftKey){i._activeItem=r.focus();l=1}d=r.getElementIndex(i._getActiveItem().first());r.focusPrev();if(!r.focus()){i.close()}else{if(e.shiftKey){this._multipleSelection=true;i._selectRange(d,r.getElementIndex(r.focus().first())+l)}}}e.preventDefault()}else if(t===m.LEFT&&!o||t===m.RIGHT&&o){if(!a){n=n?n.prev():h(i.tagList[0].lastChild);if(n[0]){i.currentTag(n)}}}else if(t===m.RIGHT&&!o||t===m.LEFT&&o){if(!a&&n){n=n.next();i.currentTag(n[0]?n:null)}}else if(e.ctrlKey&&!e.altKey&&t===m.A&&s&&!i.options.virtual){this._multipleSelection=true;if(this._getSelectedIndices().length===r.items().length){i._activeItem=null}if(r.items().length){i._selectRange(0,r.items().length-1)}}else if(t===m.ENTER&&s){if(!r.focus()){return}e.preventDefault();if(this._multipleSelection){this._multipleSelection=false;if(r.focus().hasClass(x)){i._close();return}}i._select(r.focus()).done(function(){i._change();i._close()})}else if(t===m.SPACEBAR&&e.ctrlKey&&s){if(i._activeItem&&r.focus()&&r.focus()[0]===i._activeItem[0]){i._activeItem=null}if(!h(r.focus()).hasClass(x)){i._activeItem=r.focus()}i._select(r.focus()).done(function(){i._change()});e.preventDefault()}else if(t===m.SPACEBAR&&e.shiftKey&&s){var u=r.getElementIndex(i._getActiveItem());var c=r.getElementIndex(r.focus());if(u!==p&&c!==p){i._selectRange(u,c)}e.preventDefault()}else if(t===m.ESC){if(s){e.preventDefault()}else{i.tagList.children().each(function(e,t){i._removeTag(h(t),false)});i._change()}i.close()}else if(t===m.HOME){if(s){if(!r.focus()){i.close()}else{if(e.ctrlKey&&e.shiftKey&&!i.options.virtual){i._selectRange(r.getElementIndex(r.focus()[0]),0)}r.focusFirst()}}else if(!a){n=i.tagList[0].firstChild;if(n){i.currentTag(h(n))}}}else if(t===m.END){if(s){if(!r.focus()){i.close()}else{if(e.ctrlKey&&e.shiftKey&&!i.options.virtual){i._selectRange(r.getElementIndex(r.focus()[0]),r.element.children().length-1)}r.focusLast()}}else if(!a){n=i.tagList[0].lastChild;if(n){i.currentTag(h(n))}}}else if((t===m.DELETE||t===m.BACKSPACE)&&!a){i._state=g;if(i.options.tagMode==="single"){i._clearSingleTagValue();i._change();i._close();return}if(t===m.BACKSPACE&&!n){n=h(i.tagList[0].lastChild)}if(n&&n[0]){i._removeTag(n,true)}}else if(i.popup.visible()&&(t===m.PAGEDOWN||t===m.PAGEUP)){e.preventDefault();var f=t===m.PAGEDOWN?1:-1;r.scrollWith(f*r.screenHeight())}else{clearTimeout(i._typingTimeout);setTimeout(function(){i._scale()});i._search()}},_hideBusy:function(){var e=this;clearTimeout(e._busy);e.input.attr("aria-busy",false);e._loading.addClass(C);e._request=false;e._busy=null;e._toggleCloseVisibility()},_showBusyHandler:function(){this.input.attr("aria-busy",true);this._loading.removeClass(C);this._hideClear()},_showBusy:function(){var e=this;e._request=true;if(e._busy){return}e._busy=setTimeout(s(e._showBusyHandler,e),100)},_placeholder:function(e,t){var i=this;var n=i.input;var r=d();var a=i.options.placeholder;var o=n.val();var s=n[0]===r;var l=o.length;if(!s||i.options.autoClose||o===a){l=0;o=""}if(e===p){e=false;if(n[0]!==r){e=!i.listView.selectedDataItems()[0]}}i._prev=o;n.toggleClass("k-readonly",e).val(e?a:o);if(s&&!t){v.caret(n[0],l,l)}i._scale()},_scale:function(){var e=this,t=e.wrapper.find(".k-multiselect-wrap"),i=t.width(),n=e._span.text(e.input.val()),r;if(!t.is(":visible")){n.appendTo(document.documentElement);i=r=n.width()+25;n.appendTo(t)}else{r=n.width()+25}e.input.width(r>i?i:r)},_option:function(e,t,i){var n="<option";if(e!==p){e+="";if(e.indexOf('"')!==-1){e=e.replace(H,"&quot;")}n+=' value="'+e+'"'}if(i){n+=" selected"}n+=">";if(t!==p){n+=v.htmlEncode(t)}return n+="</option>"},_render:function(e){var t=this.listView.selectedDataItems();var i=this.listView.value();var n=e.length;var r;var a="";var o;var s;var l;if(i.length!==t.length){t=this._buildSelectedItems(i)}var d={};var u={};for(l=0;l<n;l++){o=e[l];s=this._value(o);r=this._selectedItemIndex(s,t);if(r!==-1){t.splice(r,1)}u[s]=l;a+=this._option(s,this._text(o),r!==-1)}if(t.length){for(l=0;l<t.length;l++){o=t[l];s=this._value(o);d[s]=n;u[s]=n;n+=1;a+=this._option(s,this._text(o),true)}}this._customOptions=d;this._optionsMap=u;this.element.html(a)},_buildSelectedItems:function(e){var t=this.options.dataValueField;var i=this.options.dataTextField;var n=[];var r;for(var a=0;a<e.length;a++){r={};r[t]=e[a];r[i]=e[a];n.push(r)}return n},_selectedItemIndex:function(e,t){var i=this._value;var n=0;for(;n<t.length;n++){if(e===i(t[n])){return n}}return-1},_search:function(){var t=this;clearTimeout(t._typingTimeout);t._typingTimeout=setTimeout(function(){var e=t._inputValue();if(t._prev!==e){t._prev=e;t.search(e);t._toggleCloseVisibility()}},t.options.delay)},_toggleCloseVisibility:function(){if(this.value().length||this.input.val()&&this.input.val()!==this.options.placeholder){this._showClear()}else{this._hideClear()}},_allowOpening:function(){return this._allowSelection()&&a.fn._allowOpening.call(this)},_allowSelection:function(){var e=this.options.maxSelectedItems;return e===null||e>this.listView.value().length},_angularTagItems:function(e){var t=this;t.angular(e,function(){return{elements:t.tagList[0].children,data:h.map(t.dataItems(),function(e){return{dataItem:e}})}})},updatePersistTagList:function(e,t){if(this.persistTagList.added&&this.persistTagList.added.length===t.length&&this.persistTagList.removed&&this.persistTagList.removed.length===e.length){this.persistTagList=false}else{this.listView._removedAddedIndexes=this._old.slice();this.persistTagList={added:e,removed:t}}},_selectValue:function(e,t){var i=this;var n=i.dataSource.total();var r=i.tagList;var a=i._value;var o;var s;var l;if(this.persistTagList){this.updatePersistTagList(e,t);return}i._angularTagItems("cleanup");if(i.options.tagMode==="multiple"){for(l=t.length-1;l>-1;l--){o=t[l];if(o.dataItem==p){continue}if(o.dataItem.name==""||o.dataItem.name==""){continue}if(r.children().length){r[0].removeChild(r[0].children[o.position]);i._setOption(a(o.dataItem),false)}}for(l=0;l<e.length;l++){s=e[l];if(s.dataItem==p){continue}if(s.dataItem.name==""||s.dataItem.name==""){continue}r.append(i.tagTemplate(s.dataItem));i._setOption(a(s.dataItem),true)}}else{if(!i._maxTotal||i._maxTotal<n){i._maxTotal=n}this._updateTagListHTML();for(l=t.length-1;l>-1;l--){i._setOption(a(t[l].dataItem),false)}for(l=0;l<e.length;l++){i._setOption(a(e[l].dataItem),true)}}i._angularTagItems("compile");i._placeholder()},_updateTagListHTML:function(){var e=this;var t=e.value();var i=e.dataSource.total();var n=e.tagList;n.html("");if(t.length){n.append(e.tagTemplate({values:t,dataItems:e.dataItems(),maxTotal:e._maxTotal,currentTotal:i}))}},_select:function(e){var t=h.Deferred().resolve();if(!e){return t}var i=this;var n=i.listView;var r=n.dataItemByIndex(n.getElementIndex(e));var a=e.hasClass("k-state-selected");if(i._state===u){i._state=""}if(!i._allowSelection()&&!a){return t}if(i.trigger(a?b:f,{dataItem:r,item:e})){i._close();return t}i.persistTagList=false;return n.select(e).done(function(){i._placeholder();if(i._state===_){i._state=g;n.skipUpdate(true)}})},_selectRange:function(e,t){var r=this;var a=this.listView;var i=this.options.maxSelectedItems;var n=this._getSelectedIndices().slice();var o=[];var s;var l=function(e){a.select(e).done(function(){e.forEach(function(e){var t=a.dataItemByIndex(e);var i=a.element.children()[e];var n=h(i).hasClass("k-state-selected");r.trigger(n?f:b,{dataItem:t,item:h(i)})});r._change()})};if(n.length-1===t-e){return l(n)}if(e<t){for(s=e;s<=t;s++){o.push(s)}}else{for(s=e;s>=t;s--){o.push(s)}}if(i!==null&&o.length>i){o=o.slice(0,i)}for(s=0;s<o.length;s++){var d=o[s];if(this._getSelectedIndices().indexOf(d)==-1){n.push(d)}else{n.splice(n.indexOf(d),1)}}if(!n.length){return}r.persistTagList=false;return l(n)},_input:function(){var e=this;var t=e.element;var i=t[0].accessKey;var n=e._inputWrapper.children("input.k-input");if(!n[0]){n=h('<input class="k-input" style="width: 25px" />').appendTo(e._inputWrapper)}t.removeAttr("accesskey");e._focused=e.input=n.attr({autocomplete:I,role:"textbox",title:t[0].title,"aria-expanded":false,"aria-haspopup":"listbox","aria-autocomplete":"list"});if(i){e._focused.attr("accesskey",i)}},_tagList:function(){var e=this,t=e._inputWrapper.children("ul");if(!t[0]){t=h('<ul unselectable="on" class="k-reset"/>').appendTo(e._inputWrapper)}e.tagList=t},_tagTemplate:function(){var t=this;var e=t.options;var i=e.tagTemplate;var n=e.dataSource;var r=e.tagMode==="multiple";var a=e.messages.singleTag;var o;if(t.element[0].length&&!n){e.dataTextField=e.dataTextField||"text";e.dataValueField=e.dataValueField||"value"}o=r?v.template("#:"+v.expr(e.dataTextField,"data")+"#",{useWithBlock:false}):v.template("#:values.length# "+a);t.tagTextTemplate=i=i?v.template(i):o;t.tagTemplate=function(e){return'<li aria-selected="true" class="k-button" unselectable="on"><span unselectable="on">'+i(e)+"</span>"+'<span aria-hidden="true" unselectable="on" aria-label="'+(r?'delete" title="'+t.options.messages.deleteTag+'" aria-label="'+t.options.messages.deleteTag:"open")+'" class="k-select"><span class="k-icon '+(r?"k-i-close":"k-i-arrow-60-down")+'">'+"</span></span></li>"}},_loader:function(){this._loading=h('<span class="k-icon k-i-loading '+C+'"></span>').insertAfter(this.input)},_clearButton:function(){a.fn._clearButton.call(this);if(this.options.clearButton){this._clear.insertAfter(this.input);this.wrapper.addClass("k-multiselect-clearable")}},_textContainer:function(){var e=v.getComputedStyles(this.input[0],N);e.position="absolute";e.visibility="hidden";e.top=-3333;e.left=-3333;this._span=h("<span/>").css(e).appendTo(this.wrapper)},_wrapper:function(){var e=this,t=e.element,i=t.parent("span.k-multiselect");if(!i[0]){i=t.wrap('<div class="k-widget k-widget-2021 k-multiselect" unselectable="on" />').parent();i[0].style.cssText=t[0].style.cssText;i[0].title=t[0].title;h('<div class="k-multiselect-wrap k-floatwrap" unselectable="on" role="listbox"/>').insertBefore(t)}e.wrapper=i.addClass(t[0].className).removeClass("input-validation-error").css("display","");e._inputWrapper=h(i[0].firstChild)},_ariaSetSize:function(e){var t=this;var i=t.tagList.children();if(e&&i.length){i.attr("aria-setsize",e)}},_ariaSetLive:function(){var e=this;e.ul.attr("aria-live",!e._isFilterEnabled()?"off":"polite")}});function V(e,t){var i;if(e===null&&t!==null||e!==null&&t===null){return false}i=e.length;if(i!==t.length){return false}while(i--){if(e[i]!==t[i]){return false}}return true}e.plugin(O)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.multicolumncombobox",["kendo.combobox"],e)})(function(){var e={id:"multicolumncombobox",name:"MultiColumnComboBox",category:"web",description:"The MultiColumnComboBox widget allows the selection from pre-defined values or entering a new value where the list popup is rendered in table layout.",depends:["combobox"],features:[{id:"mobile-scroller",name:"Mobile scroller",description:"Support for kinetic scrolling in mobile device",depends:["mobile.scroller"]},{id:"virtualization",name:"VirtualList",description:"Support for virtualization",depends:["virtuallist"]}]};(function(e,t){var a=window.kendo,i=a.ui,n=i.ComboBox,r=/^\d+(\.\d+)?%$/i,o="k-dropdowngrid",s="k-dropdowngrid-popup k-popup-flush";var l=n.extend({init:function(e,t){n.fn.init.call(this,e,t);this.list.addClass(s);if(this._allColumnsWidthsAreSet(this.options)){this.list.width(this._calculateDropDownWidth(this.options))}else if(this.options.dropDownWidth){this.list.width(this.options.dropDownWidth)}},options:{name:"MultiColumnComboBox",ns:".kendoMultiColumnComboBox",columns:[],dropDownWidth:null,filterFields:[]},setOptions:function(e){n.fn.setOptions.call(this,e);if(this._allColumnsWidthsAreSet(e)){this.list.width(this._calculateDropDownWidth(e))}else if(this.options.dropDownWidth){this.list.width(this.options.dropDownWidth)}},_allColumnsWidthsAreSet:function(e){var t=e.columns;if(!t||!t.length){return false}for(var i=0;i<t.length;i++){var n=t[i].width;if(!n||isNaN(parseInt(n,10))||r.test(n)){return false}}return true},_calculateDropDownWidth:function(e){var t=e.columns;var i=a.support.scrollbar();for(var n=0;n<t.length;n++){var r=t[n].width;i=i+parseInt(r,10)}return i},_wrapper:function(){n.fn._wrapper.call(this);this.wrapper.addClass(o)}});i.plugin(l)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.slider",["kendo.draganddrop"],e)})(function(){var e={id:"slider",name:"Slider",category:"web",description:"The Slider widget provides a rich input for selecting values or ranges of values.",depends:["draganddrop"]};(function(v,N){var m=window.kendo,r=m.ui.Widget,O=m.ui.Draggable,g=m._outerWidth,_=m._outerHeight,V=v.extend,l=m.format,n=m.parseFloat,o=v.proxy,W=v.isArray,h=Math,U=m.support,e=U.pointers,t=U.msPointers,a="change",p="slide",s=".slider",d="touchstart"+s+" mousedown"+s,c=e?"pointerdown"+s:t?"MSPointerDown"+s:d,f="touchend"+s+" mouseup"+s,b=e?"pointerup":t?"MSPointerUp"+s:f,i="moveSelection",w="keydown"+s,k="click"+s,u="mouseover"+s,y="focus"+s,x="blur"+s,C=".k-draghandle",S=".k-slider-track",T=".k-tick",D="k-state-selected",A="k-state-focused",E="k-state-default",I="k-state-disabled",M="disabled",j="undefined",G="tabindex",q=m.getTouches;var R=r.extend({init:function(e,t){var i=this;r.fn.init.call(i,e,t);t=i.options;i._isHorizontal=t.orientation=="horizontal";i._isRtl=i._isHorizontal&&m.support.isRtl(e);i._position=i._isHorizontal?"left":"bottom";i._sizeFn=i._isHorizontal?"width":"height";i._outerSize=i._isHorizontal?g:_;t.tooltip.format=t.tooltip.enabled?t.tooltip.format||"{0}":"{0}";if(t.smallStep<=0){throw new Error("Kendo UI Slider smallStep must be a positive number.")}i._createHtml();i.wrapper=i.element.closest(".k-slider");i._trackDiv=i.wrapper.find(S);i._setTrackDivWidth();i._maxSelection=i._trackDiv[i._sizeFn]();i._sliderItemsInit();i._reset();i._tabindex(i.wrapper.find(C));i[t.enabled?"enable":"disable"]();var n=m.support.isRtl(i.wrapper)?-1:1;i._keyMap={37:F(-1*n*t.smallStep),40:F(-t.smallStep),39:F(+1*n*t.smallStep),38:F(+t.smallStep),35:X(t.max),36:X(t.min),33:F(+t.largeStep),34:F(-t.largeStep)};m.notify(i)},events:[a,p],options:{enabled:true,min:0,max:10,smallStep:1,largeStep:5,orientation:"horizontal",tickPlacement:"both",tooltip:{enabled:true,format:"{0}"}},_distance:function(){return z(this.options.max-this.options.min)},_resize:function(){this._setTrackDivWidth();this.wrapper.find(".k-slider-items").remove();this._maxSelection=this._trackDiv[this._sizeFn]();this._sliderItemsInit();this._refresh();if(this.options.enabled){this.enable(true)}},_sliderItemsInit:function(){var e=this,t=e.options;var i=e._maxSelection/((t.max-t.min)/t.smallStep);var n=e._calculateItemsWidth(h.floor(L(e._distance())/L(t.smallStep)));if(t.tickPlacement!="none"&&i>=2){v(this.element).parent().find(".k-slider-items").remove();e._trackDiv.before(Y(t,e._distance()));e._setItemsWidth(n);e._setItemsTitle()}e._calculateSteps(n);if(t.tickPlacement!="none"&&i>=2&&t.largeStep>=t.smallStep){e._setItemsLargeTick()}},getSize:function(){return m.dimensions(this.wrapper)},_setTrackDivWidth:function(){var e=this,t=parseFloat(e._trackDiv.css(e._isRtl?"right":e._position),10)*2;e._trackDiv[e._sizeFn](e.wrapper[e._sizeFn]()-2-t)},_setItemsWidth:function(e){var t=this,i=t.options,n=0,r=e.length-1,a=t.wrapper.find(T),o,s=0,l=2,d=a.length,u=0;for(o=0;o<d-2;o++){v(a[o+1])[t._sizeFn](e[o])}if(t._isHorizontal){v(a[n]).addClass("k-first")[t._sizeFn](e[r-1]);v(a[r]).addClass("k-last")[t._sizeFn](e[r])}else{v(a[r]).addClass("k-first")[t._sizeFn](e[r]);v(a[n]).addClass("k-last")[t._sizeFn](e[r-1])}if(t._distance()%i.smallStep!==0&&!t._isHorizontal){for(o=0;o<e.length;o++){u+=e[o]}s=t._maxSelection-u;s+=parseFloat(t._trackDiv.css(t._position),10)+l;t.wrapper.find(".k-slider-items").css("padding-top",s)}},_setItemsTitle:function(){var e=this,t=e.options,i=e.wrapper.find(T),n=t.min,r=i.length,a=e._isHorizontal&&!e._isRtl?0:r-1,o=e._isHorizontal&&!e._isRtl?r:-1,s=e._isHorizontal&&!e._isRtl?1:-1;for(;a-o!==0;a+=s){v(i[a]).attr("title",l(t.tooltip.format,z(n)));n+=t.smallStep}},_setItemsLargeTick:function(){var e=this,t=e.options,i=e.wrapper.find(T),n=0,r,a;if(L(t.largeStep)%L(t.smallStep)===0||e._distance()/t.largeStep>=3){if(!e._isHorizontal&&!e._isRtl){i=v.makeArray(i).reverse()}for(n=0;n<i.length;n++){r=v(i[n]);a=e._values[n];var o=z(L(a-this.options.min));if(o%L(t.smallStep)===0&&o%L(t.largeStep)===0){r.addClass("k-tick-large").html("<span class='k-label'>"+r.attr("title")+"</span>");if(n!==0&&n!==i.length-1){r.css("line-height",r[e._sizeFn]()+"px")}}}}},_calculateItemsWidth:function(e){var t=this,i=t.options,n=parseFloat(t._trackDiv.css(t._sizeFn))+1,r=t._distance(),a=L(r)/L(i.smallStep),o=n/L(r),s,l,d;if(a-e>0){n-=L(r)%L(i.smallStep)*o}s=n/e;l=[];for(d=0;d<e-1;d++){l[d]=s}l[e-1]=l[e]=s/2;return t._roundWidths(l)},_roundWidths:function(e){var t=0,i=e.length,n;for(n=0;n<i;n++){t+=e[n]-h.floor(e[n]);e[n]=h.floor(e[n])}t=h.round(t);return this._addAdditionalSize(t,e)},_addAdditionalSize:function(e,t){if(e===0){return t}var i=parseFloat(t.length-1)/parseFloat(e==1?e:e-1),n;for(n=0;n<e;n++){t[parseInt(h.round(i*n),10)]+=1}return t},_calculateSteps:function(e){var t=this,i=t.options,n=i.min,r=0,a=t._distance(),o=h.ceil(L(a)/L(i.smallStep)),s=1,l;o+=L(a)/L(i.smallStep)%1===0?1:0;e.splice(0,0,e[o-2]*2);e.splice(o-1,1,e.pop()*2);t._pixelSteps=[r];t._values=[n];if(o===0){return}while(s<o){r+=(e[s-1]+e[s])/2;t._pixelSteps[s]=r;n+=i.smallStep;t._values[s]=z(n);s++}l=L(a)%L(i.smallStep)===0?o-1:o;t._pixelSteps[l]=t._maxSelection;t._values[l]=i.max;if(t._isRtl){t._pixelSteps.reverse();t._values.reverse()}},_getValueFromPosition:function(e,t){var i=this,n=i.options,r=h.max(n.smallStep*(i._maxSelection/i._distance()),0),a=0,o=r/2,s;if(i._isHorizontal){a=e-t.startPoint;if(i._isRtl){a=i._maxSelection-a}}else{a=t.startPoint-e}if(i._maxSelection-(parseInt(i._maxSelection%r,10)-3)/2<a){return n.max}for(s=0;s<i._pixelSteps.length;s++){if(h.abs(i._pixelSteps[s]-a)-1<=o){return z(i._values[s])}}},_getFormattedValue:function(e,t){var i=this,n="",r=i.options.tooltip,a,o,s;if(W(e)){o=e[0];s=e[1]}else if(t&&t.type){o=t.selectionStart;s=t.selectionEnd}if(t){a=t.tooltipTemplate}if(!a&&r.template){a=m.template(r.template)}if(W(e)||t&&t.type){if(a){n=a({selectionStart:o,selectionEnd:s})}else{o=l(r.format,o);s=l(r.format,s);n=o+" - "+s}}else{if(t){t.val=e}if(a){n=a({value:e})}else{n=l(r.format,e)}}return n},_getDraggableArea:function(){var e=this,t=m.getOffset(e._trackDiv);return{startPoint:e._isHorizontal?t.left:t.top+e._maxSelection,endPoint:e._isHorizontal?t.left+e._maxSelection:t.top}},_createHtml:function(){var e=this,t=e.element,i=e.options,n=t.find("input");if(n.length==2){n.eq(0).prop("value",P(i.selectionStart));n.eq(1).prop("value",P(i.selectionEnd))}else{t.prop("value",P(i.value))}t.wrap($(i,t,e._isHorizontal)).hide();if(i.showButtons){t.before(K(i,"increase",e._isHorizontal,e._isRtl)).before(K(i,"decrease",e._isHorizontal,e._isRtl))}t.before(Q(i,t))},_focus:function(e){var t=this,i=e.target,n=t.value(),r=t._drag;if(!r){if(i==t.wrapper.find(C).eq(0)[0]){r=t._firstHandleDrag;t._activeHandle=0}else{r=t._lastHandleDrag;t._activeHandle=1}n=n[t._activeHandle]}v(i).addClass(A+" "+D);if(r){t._activeHandleDrag=r;r.selectionStart=t.options.selectionStart;r.selectionEnd=t.options.selectionEnd;r._updateTooltip(n)}},_focusWithMouse:function(e){e=v(e);var t=this,i=e.is(C)?e.index():0;window.setTimeout(function(){t.wrapper.find(C)[i==2?1:0].focus()},1);t._setTooltipTimeout()},_blur:function(e){var t=this,i=t._activeHandleDrag;v(e.target).removeClass(A+" "+D);if(i){i._removeTooltip();delete t._activeHandleDrag;delete t._activeHandle}},_setTooltipTimeout:function(){var t=this;t._tooltipTimeout=window.setTimeout(function(){var e=t._drag||t._activeHandleDrag;if(e){e._removeTooltip()}},300)},_clearTooltipTimeout:function(){var e=this;window.clearTimeout(this._tooltipTimeout);var t=e._drag||e._activeHandleDrag;if(t&&t.tooltipDiv){t.tooltipDiv.stop(true,false).css("opacity",1)}},_reset:function(){var e=this,t=e.element,i=t.attr("form"),n=i?v("#"+i):t.closest("form");if(n[0]){e._form=n.on("reset",o(e._formResetHandler,e))}},min:function(e){if(!e){return this.options.min}this.setOptions({min:e})},max:function(e){if(!e){return this.options.max}this.setOptions({max:e})},setOptions:function(e){r.fn.setOptions.call(this,e);this._sliderItemsInit();this._refresh()},destroy:function(){if(this._form){this._form.off("reset",this._formResetHandler)}r.fn.destroy.call(this)}});function $(e,t,i){var n=i?" k-slider-horizontal":" k-slider-vertical",r=e.style?e.style:t.attr("style"),a=t.attr("class")?" "+t.attr("class"):"",o="";if(e.tickPlacement=="bottomRight"){o=" k-slider-bottomright"}else if(e.tickPlacement=="topLeft"){o=" k-slider-topleft"}r=r?" style='"+r+"'":"";return"<div class='k-widget k-widget-2021 k-slider"+n+a+"'"+r+">"+"<div class='k-slider-wrap"+(e.showButtons?" k-slider-buttons":"")+o+"'></div></div>"}function K(e,t,i,n){var r="";if(i){if(!n&&t=="increase"||n&&t!="increase"){r="k-i-arrow-60-right"}else{r="k-i-arrow-60-left"}}else{if(t=="increase"){r="k-i-arrow-60-up"}else{r="k-i-arrow-60-down"}}return"<a class='k-button k-button-"+t+"' "+"title='"+e[t+"ButtonTitle"]+"' "+"aria-label='"+e[t+"ButtonTitle"]+"'>"+"<span class='k-icon "+r+"'></span></a>"}function Y(e,t){var i="<ul class='k-reset k-slider-items'>",n=h.floor(z(t/e.smallStep))+1,r;for(r=0;r<n;r++){i+="<li class='k-tick' role='presentation'>&nbsp;</li>"}i+="</ul>";return i}function Q(e,t){var i=t.is("input")?1:2,n=i==2?e.leftDragHandleTitle:e.dragHandleTitle;return"<div class='k-slider-track'><div class='k-slider-selection'>\x3c!-- --\x3e</div>"+"<a href='#' class='k-draghandle' title='"+n+"' role='slider' aria-valuemin='"+e.min+"' aria-valuemax='"+e.max+"' aria-valuenow='"+(i>1?e.selectionStart||e.min:e.value||e.min)+"'></a>"+(i>1?"<a href='#' class='k-draghandle' title='"+e.rightDragHandleTitle+"'role='slider' aria-valuemin='"+e.min+"' aria-valuemax='"+e.max+"' aria-valuenow='"+(e.selectionEnd||e.max)+"'></a>":"")+"</div>"}function F(t){return function(e){return e+t}}function X(e){return function(){return e}}function P(e){return(e+"").replace(".",m.cultures.current.numberFormat["."])}function Z(e){var t=e.toString();var i=0;t=t.split(".");if(t[1]){i=t[1].length}i=i>10?10:i;return i}function z(e){var t,i;e=parseFloat(e,10);t=Z(e);i=h.pow(10,t||0);return h.round(e*i)/i}function B(e,t){var i=n(e.getAttribute(t));if(i===null){i=N}return i}function J(e){return typeof e!==j}function L(e){return e*1e4}var H=R.extend({init:function(e,t){var i=this,n;e.type="text";t=V({},{value:B(e,"value"),min:B(e,"min"),max:B(e,"max"),smallStep:B(e,"step")},t);e=v(e);if(t&&t.enabled===N){t.enabled=!e.is("[disabled]")}R.fn.init.call(i,e,t);t=i.options;if(!J(t.value)||t.value===null){t.value=t.min;e.prop("value",P(t.min))}t.value=h.max(h.min(t.value,t.max),t.min);n=i.wrapper.find(C);this._selection=new H.Selection(n,i,t);i._drag=new H.Drag(n,"",i,t)},options:{name:"Slider",showButtons:true,increaseButtonTitle:"Increase",decreaseButtonTitle:"Decrease",dragHandleTitle:"drag",tooltip:{format:"{0:#,#.##}"},value:null},enable:function(e){var a=this,t=a.options,i,n;a.disable();if(e===false){return}a.wrapper.removeClass(I).addClass(E);a.wrapper.find("input").removeAttr(M);i=function(e){var t=q(e)[0];if(!t){return}var i=a._isHorizontal?t.location.pageX:t.location.pageY,n=a._getDraggableArea(),r=v(e.target);if(r.hasClass("k-draghandle")){r.addClass(A+" "+D);return}a._update(a._getValueFromPosition(i,n));a._focusWithMouse(e.target);a._drag.dragstart(e);e.preventDefault()};a.wrapper.find(T+", "+S).on(c,i).end().on(c,function(){v(document.documentElement).one("selectstart",m.preventDefault)}).on(b,function(){a._drag._end()});a.wrapper.find(C).attr(G,0).on(f,function(){a._setTooltipTimeout()}).on(k,function(e){a._focusWithMouse(e.target);e.preventDefault()}).on(y,o(a._focus,a)).on(x,o(a._blur,a));n=o(function(e){var t=a._nextValueByIndex(a._valueIndex+e*1);a._setValueInRange(t);a._drag._updateTooltip(t)},a);if(t.showButtons){var r=o(function(e,t){this._clearTooltipTimeout();if(e.which===1||U.touch&&e.which===0){n(t);this.timeout=setTimeout(o(function(){this.timer=setInterval(function(){n(t)},60)},this),200)}},a);a.wrapper.find(".k-button").on(f,o(function(e){this._clearTimer();a._focusWithMouse(e.target)},a)).on(u,function(e){v(e.currentTarget).addClass("k-state-hover")}).on("mouseout"+s,o(function(e){v(e.currentTarget).removeClass("k-state-hover");this._clearTimer()},a)).eq(0).on(d,o(function(e){r(e,1)},a)).click(false).end().eq(1).on(d,o(function(e){r(e,-1)},a)).click(m.preventDefault)}a.wrapper.find(C).off(w,false).on(w,o(this._keydown,a));t.enabled=true},disable:function(){var e=this;e.wrapper.removeClass(E).addClass(I);v(e.element).prop(M,M);e.wrapper.find(".k-button").off(d).on(d,function(e){e.preventDefault();v(this).addClass("k-state-active")}).off(f).on(f,function(e){e.preventDefault();v(this).removeClass("k-state-active")}).off("mouseleave"+s).on("mouseleave"+s,m.preventDefault).off(u).on(u,m.preventDefault);e.wrapper.find(T+", "+S).off(c).off(b);e.wrapper.find(C).attr(G,-1).off(f).off(w).off(k).off(y).off(x);e.options.enabled=false},_update:function(e){var t=this,i=t.value()!=e;t.value(e);if(i){t.trigger(a,{value:t.options.value})}},value:function(e){var t=this,i=t.options;e=z(e);if(isNaN(e)){return i.value}if(e>=i.min&&e<=i.max){if(i.value!=e){t.element.prop("value",P(e));i.value=e;t._refreshAriaAttr(e);t._refresh()}}},_refresh:function(){this.trigger(i,{value:this.options.value})},_refreshAriaAttr:function(e){var t=this,i=t._drag,n;if(i&&i._tooltipDiv){n=i._tooltipDiv.text()}else{n=t._getFormattedValue(e,null)}this.wrapper.find(C).attr("aria-valuenow",e).attr("aria-valuetext",n)},_clearTimer:function(){clearTimeout(this.timeout);clearInterval(this.timer)},_keydown:function(e){var t=this;if(e.keyCode in t._keyMap){t._clearTooltipTimeout();t._setValueInRange(t._keyMap[e.keyCode](t.options.value));t._drag._updateTooltip(t.value());e.preventDefault()}},_setValueInRange:function(e){var t=this,i=t.options;e=z(e);if(isNaN(e)){t._update(i.min);return}e=h.max(h.min(e,i.max),i.min);t._update(e)},_nextValueByIndex:function(e){var t=this._values.length;if(this._isRtl){e=t-1-e}return this._values[h.max(0,h.min(e,t-1))]},_formResetHandler:function(){var t=this,i=t.options.min;setTimeout(function(){var e=t.element[0].value;t.value(e===""||isNaN(e)?i:e)})},destroy:function(){var e=this;R.fn.destroy.call(e);e.wrapper.off(s).find(".k-button").off(s).end().find(C).off(s).end().find(T+", "+S).off(s).end();e._drag.draggable.destroy();e._drag._removeTooltip(true)}});H.Selection=function(s,l,d){function t(e){var t=e-d.min,i=l._valueIndex=h.ceil(z(t/d.smallStep)),n=parseInt(l._pixelSteps[i],10),r=l._trackDiv.find(".k-slider-selection"),a=parseInt(l._outerSize(s)/2,10),o=l._isRtl?2:0;r[l._sizeFn](l._isRtl?l._maxSelection-n:n);s.css(l._position,n-a-o)}t(d.value);l.bind([p,i],function(e){t(parseFloat(e.value,10))});l.bind(a,function(e){t(parseFloat(e.sender.value(),10))})};H.Drag=function(e,t,i,n){var r=this;r.owner=i;r.options=n;r.element=e;r.type=t;r.draggable=new O(e,{distance:0,dragstart:o(r._dragstart,r),drag:o(r.drag,r),dragend:o(r.dragend,r),dragcancel:o(r.dragcancel,r)});e.click(false);e.on("dragstart",function(e){e.preventDefault()})};H.Drag.prototype={dragstart:function(e){this.owner._activeDragHandle=this;this.draggable.userEvents.cancel();this._dragstart(e);this.dragend()},_dragstart:function(e){var t=this,i=t.owner,n=t.options;if(!n.enabled){e.preventDefault();return}this.owner._activeDragHandle=this;i.element.off(u);i.wrapper.find("."+A).removeClass(A+" "+D);t.element.addClass(A+" "+D);v(document.documentElement).css("cursor","pointer");t.dragableArea=i._getDraggableArea();t.step=h.max(n.smallStep*(i._maxSelection/i._distance()),0);if(t.type){t.selectionStart=n.selectionStart;t.selectionEnd=n.selectionEnd;i._setZIndex(t.type)}else{t.oldVal=t.val=n.value}t._removeTooltip(true);t._createTooltip()},_createTooltip:function(){var e=this,t=e.owner,i=e.options.tooltip,n="",r=v(window),a,o;if(!i.enabled){return}if(i.template){a=e.tooltipTemplate=m.template(i.template)}v(".k-slider-tooltip").remove();e.tooltipDiv=v("<div class='k-tooltip k-slider-tooltip'>\x3c!-- --\x3e</div>").appendTo(document.body);n=t._getFormattedValue(e.val||t.value(),e);if(!e.type){o="k-callout-"+(t._isHorizontal?"s":"e");e.tooltipInnerDiv="<div class='k-callout "+o+"'>\x3c!-- --\x3e</div>";n+=e.tooltipInnerDiv}e.tooltipDiv.html(n);e._scrollOffset={top:r.scrollTop(),left:m.scrollLeft(r)};e.moveTooltip()},drag:function(e){var t=this,i=t.owner,n=e.x.location,r=e.y.location,a=t.dragableArea.startPoint,o=t.dragableArea.endPoint,s;e.preventDefault();if(i._isHorizontal){if(i._isRtl){t.val=t.constrainValue(n,a,o,n<o)}else{t.val=t.constrainValue(n,a,o,n>=o)}}else{t.val=t.constrainValue(r,o,a,r<=o)}if(t.oldVal!=t.val){t.oldVal=t.val;if(t.type){if(t.type=="firstHandle"){if(t.val<t.selectionEnd){t.selectionStart=t.val}else{t.selectionStart=t.selectionEnd=t.val}}else{if(t.val>t.selectionStart){t.selectionEnd=t.val}else{t.selectionStart=t.selectionEnd=t.val}}s={values:[t.selectionStart,t.selectionEnd],value:[t.selectionStart,t.selectionEnd]}}else{s={value:t.val}}i.trigger(p,s)}t._updateTooltip(t.val)},_updateTooltip:function(e){var t=this,i=t.options,n=i.tooltip,r="";if(!n.enabled){return}if(!t.tooltipDiv){t._createTooltip()}r=t.owner._getFormattedValue(z(e),t);if(!t.type){r+=t.tooltipInnerDiv}t.tooltipDiv.html(r);t.moveTooltip()},dragcancel:function(){this.owner._refresh();v(document.documentElement).css("cursor","");return this._end()},dragend:function(){var e=this,t=e.owner;v(document.documentElement).css("cursor","");if(e.type){t._update(e.selectionStart,e.selectionEnd)}else{t._update(e.val);e.draggable.userEvents._disposeAll()}e.draggable.userEvents.cancel();return e._end()},_end:function(){var e=this,t=e.owner;t._focusWithMouse(e.element);t.element.on(u);return false},_removeTooltip:function(e){var t=this,i=t.owner;if(t.tooltipDiv&&i.options.tooltip.enabled&&i.options.enabled){if(e){t.tooltipDiv.remove();t.tooltipDiv=null}else{t.tooltipDiv.fadeOut("slow",function(){v(this).remove();t.tooltipDiv=null})}}},moveTooltip:function(){var e=this,t=e.owner,i=0,n=0,r=e.element,a=m.getOffset(r),o=8,s=v(window),l=e.tooltipDiv.find(".k-callout"),d=g(e.tooltipDiv),u=_(e.tooltipDiv),c,f,h,p;if(e.type){c=t.wrapper.find(C);a=m.getOffset(c.eq(0));f=m.getOffset(c.eq(1));if(t._isHorizontal){i=f.top;n=a.left+(f.left-a.left)/2}else{i=a.top+(f.top-a.top)/2;n=f.left}p=g(c.eq(0))+2*o}else{i=a.top;n=a.left;p=g(r)+2*o}if(t._isHorizontal){n-=parseInt((d-t._outerSize(r))/2,10);i-=u+o+(l.length?l.height():0)}else{i-=parseInt((u-t._outerSize(r))/2,10);n-=d+o+(l.length?l.width():0)}if(t._isHorizontal){h=e._flip(i,u,p,_(s)+e._scrollOffset.top);i+=h;n+=e._fit(n,d,g(s)+e._scrollOffset.left)}else{h=e._flip(n,d,p,g(s)+e._scrollOffset.left);i+=e._fit(i,u,_(s)+e._scrollOffset.top);n+=h}if(h>0&&l){l.removeClass();l.addClass("k-callout k-callout-"+(t._isHorizontal?"n":"w"))}e.tooltipDiv.css({top:i,left:n})},_fit:function(e,t,i){var n=0;if(e+t>i){n=i-(e+t)}if(e<0){n=-e}return n},_flip:function(e,t,i,n){var r=0;if(e+t>n){r+=-(i+t)}if(e+r<0){r+=i+t}return r},constrainValue:function(e,t,i,n){var r=this,a=0;if(t<e&&e<i){a=r.owner._getValueFromPosition(e,r.dragableArea)}else{if(n){a=r.options.max}else{a=r.options.min}}return a}};m.ui.plugin(H);var ee=R.extend({init:function(e,t){var i=this,n=v(e).find("input"),r=n.eq(0)[0],a=n.eq(1)[0];r.type="text";a.type="text";if(t&&t.showButtons){if(window.console){window.console.warn("showbuttons option is not supported for the range slider, ignoring")}t.showButtons=false}t=V({},{selectionStart:B(r,"value"),min:B(r,"min"),max:B(r,"max"),smallStep:B(r,"step")},{selectionEnd:B(a,"value"),min:B(a,"min"),max:B(a,"max"),smallStep:B(a,"step")},t);if(t&&t.enabled===N){t.enabled=!n.is("[disabled]")}R.fn.init.call(i,e,t);t=i.options;if(!J(t.selectionStart)||t.selectionStart===null){t.selectionStart=t.min;n.eq(0).prop("value",P(t.min))}if(!J(t.selectionEnd)||t.selectionEnd===null){t.selectionEnd=t.max;n.eq(1).prop("value",P(t.max))}var o=i.wrapper.find(C);this._selection=new ee.Selection(o,i,t);i._firstHandleDrag=new H.Drag(o.eq(0),"firstHandle",i,t);i._lastHandleDrag=new H.Drag(o.eq(1),"lastHandle",i,t)},options:{name:"RangeSlider",leftDragHandleTitle:"drag",rightDragHandleTitle:"drag",tooltip:{format:"{0:#,#.##}"},selectionStart:null,selectionEnd:null},enable:function(e){var d=this,u=d.options,t;d.disable();if(e===false){return}d.wrapper.removeClass(I).addClass(E);d.wrapper.find("input").removeAttr(M);t=function(e){var t=q(e)[0];if(!t){return}var i=d._isHorizontal?t.location.pageX:t.location.pageY,n=d._getDraggableArea(),r=d._getValueFromPosition(i,n),a=v(e.target),o,s,l;if(a.hasClass("k-draghandle")){d.wrapper.find("."+A).removeClass(A+" "+D);a.addClass(A+" "+D);return}if(r<u.selectionStart){o=r;s=u.selectionEnd;l=d._firstHandleDrag}else if(r>d.selectionEnd){o=u.selectionStart;s=r;l=d._lastHandleDrag}else{if(r-u.selectionStart<=u.selectionEnd-r){o=r;s=u.selectionEnd;l=d._firstHandleDrag}else{o=u.selectionStart;s=r;l=d._lastHandleDrag}}l.dragstart(e);d._setValueInRange(o,s);d._focusWithMouse(l.element)};d.wrapper.find(T+", "+S).on(c,t).end().on(c,function(){v(document.documentElement).one("selectstart",m.preventDefault)}).on(b,function(){if(d._activeDragHandle){d._activeDragHandle._end()}});d.wrapper.find(C).attr(G,0).on(f,function(){d._setTooltipTimeout()}).on(k,function(e){d._focusWithMouse(e.target);e.preventDefault()}).on(y,o(d._focus,d)).on(x,o(d._blur,d));d.wrapper.find(C).off(w,m.preventDefault).eq(0).on(w,o(function(e){this._keydown(e,"firstHandle")},d)).end().eq(1).on(w,o(function(e){this._keydown(e,"lastHandle")},d));d.options.enabled=true},disable:function(){var e=this;e.wrapper.removeClass(E).addClass(I);e.wrapper.find("input").prop(M,M);e.wrapper.find(T+", "+S).off(c).off(b);e.wrapper.find(C).attr(G,-1).off(f).off(w).off(k).off(y).off(x);e.options.enabled=false},_keydown:function(e,t){var i=this,n=i.options.selectionStart,r=i.options.selectionEnd,a,o,s;if(e.keyCode in i._keyMap){i._clearTooltipTimeout();if(t=="firstHandle"){s=i._activeHandleDrag=i._firstHandleDrag;n=i._keyMap[e.keyCode](n);if(n>r){r=n}}else{s=i._activeHandleDrag=i._lastHandleDrag;r=i._keyMap[e.keyCode](r);if(n>r){n=r}}i._setValueInRange(z(n),z(r));a=Math.max(n,i.options.selectionStart);o=Math.min(r,i.options.selectionEnd);s.selectionEnd=Math.max(o,i.options.selectionStart);s.selectionStart=Math.min(a,i.options.selectionEnd);s._updateTooltip(i.value()[i._activeHandle]);e.preventDefault()}},_update:function(e,t){var i=this,n=i.value();var r=n[0]!=e||n[1]!=t;i.value([e,t]);if(r){i.trigger(a,{values:[e,t],value:[e,t]})}},value:function(e){if(e&&e.length){return this._value(e[0],e[1])}else{return this._value()}},_value:function(e,t){var i=this,n=i.options,r=n.selectionStart,a=n.selectionEnd;if(isNaN(e)&&isNaN(t)){return[r,a]}else{e=z(e);t=z(t)}if(e>=n.min&&e<=n.max&&t>=n.min&&t<=n.max&&e<=t){if(r!=e||a!=t){i.element.find("input").eq(0).prop("value",P(e)).end().eq(1).prop("value",P(t));n.selectionStart=e;n.selectionEnd=t;i._refresh();i._refreshAriaAttr(e,t)}}},values:function(e,t){if(W(e)){return this._value(e[0],e[1])}else{return this._value(e,t)}},_refresh:function(){var e=this,t=e.options;e.trigger(i,{values:[t.selectionStart,t.selectionEnd],value:[t.selectionStart,t.selectionEnd]});if(t.selectionStart==t.max&&t.selectionEnd==t.max){e._setZIndex("firstHandle")}},_refreshAriaAttr:function(e,t){var i=this,n=i.wrapper.find(C),r=i._activeHandleDrag,a;a=i._getFormattedValue([e,t],r);n.eq(0).attr("aria-valuenow",e);n.eq(1).attr("aria-valuenow",t);n.attr("aria-valuetext",a)},_setValueInRange:function(e,t){var i=this.options;e=h.max(h.min(e,i.max),i.min);t=h.max(h.min(t,i.max),i.min);if(e==i.max&&t==i.max){this._setZIndex("firstHandle")}this._update(h.min(e,t),h.max(e,t))},_setZIndex:function(t){this.wrapper.find(C).each(function(e){v(this).css("z-index",t=="firstHandle"?1-e:e)})},_formResetHandler:function(){var n=this,r=n.options;setTimeout(function(){var e=n.element.find("input");var t=e[0].value;var i=e[1].value;n.values(t===""||isNaN(t)?r.min:t,i===""||isNaN(i)?r.max:i)})},destroy:function(){var e=this;R.fn.destroy.call(e);e.wrapper.off(s).find(T+", "+S).off(s).end().find(C).off(s);e._firstHandleDrag.draggable.destroy();e._lastHandleDrag.draggable.destroy()}});ee.Selection=function(d,u,c){function t(e){e=e||[];var t=e[0]-c.min,i=e[1]-c.min,n=h.ceil(z(t/c.smallStep)),r=h.ceil(z(i/c.smallStep)),a=u._pixelSteps[n],o=u._pixelSteps[r],s=parseInt(u._outerSize(d.eq(0))/2,10),l=u._isRtl?2:0;d.eq(0).css(u._position,a-s-l).end().eq(1).css(u._position,o-s-l);f(a,o)}function f(e,t){var i,n,r=u._trackDiv.find(".k-slider-selection");i=h.abs(e-t);r[u._sizeFn](i);if(u._isRtl){n=h.max(e,t);r.css("right",u._maxSelection-n-1)}else{n=h.min(e,t);r.css(u._position,n-1)}}t(u.value());u.bind([a,p,i],function(e){t(e.values)})};m.ui.plugin(ee)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.colorpicker",["kendo.core","kendo.color","kendo.popup","kendo.slider","kendo.userevents","kendo.button"],e)})(function(){var e={id:"colorpicker",name:"Color tools",category:"web",description:"Color selection widgets",depends:["core","color","popup","slider","userevents","button"]};(function(l,e,t){var d=window.kendo,i=d.ui,u=i.Widget,c=d.parseColor,f=d.Color,s=d.keys,h="background-color",p="k-state-selected",v="000000,7f7f7f,880015,ed1c24,ff7f27,fff200,22b14c,00a2e8,3f48cc,a349a4,ffffff,c3c3c3,b97a57,ffaec9,ffc90e,efe4b0,b5e61d,99d9ea,7092be,c8bfe7",m="FFFFFF,FFCCFF,FF99FF,FF66FF,FF33FF,FF00FF,CCFFFF,CCCCFF,CC99FF,CC66FF,CC33FF,CC00FF,99FFFF,99CCFF,9999FF,9966FF,9933FF,9900FF,FFFFCC,FFCCCC,FF99CC,FF66CC,FF33CC,FF00CC,CCFFCC,CCCCCC,CC99CC,CC66CC,CC33CC,CC00CC,99FFCC,99CCCC,9999CC,9966CC,9933CC,9900CC,FFFF99,FFCC99,FF9999,FF6699,FF3399,FF0099,CCFF99,CCCC99,CC9999,CC6699,CC3399,CC0099,99FF99,99CC99,999999,996699,993399,990099,FFFF66,FFCC66,FF9966,FF6666,FF3366,FF0066,CCFF66,CCCC66,CC9966,CC6666,CC3366,CC0066,99FF66,99CC66,999966,996666,993366,990066,FFFF33,FFCC33,FF9933,FF6633,FF3333,FF0033,CCFF33,CCCC33,CC9933,CC6633,CC3333,CC0033,99FF33,99CC33,999933,996633,993333,990033,FFFF00,FFCC00,FF9900,FF6600,FF3300,FF0000,CCFF00,CCCC00,CC9900,CC6600,CC3300,CC0000,99FF00,99CC00,999900,996600,993300,990000,66FFFF,66CCFF,6699FF,6666FF,6633FF,6600FF,33FFFF,33CCFF,3399FF,3366FF,3333FF,3300FF,00FFFF,00CCFF,0099FF,0066FF,0033FF,0000FF,66FFCC,66CCCC,6699CC,6666CC,6633CC,6600CC,33FFCC,33CCCC,3399CC,3366CC,3333CC,3300CC,00FFCC,00CCCC,0099CC,0066CC,0033CC,0000CC,66FF99,66CC99,669999,666699,663399,660099,33FF99,33CC99,339999,336699,333399,330099,00FF99,00CC99,009999,006699,003399,000099,66FF66,66CC66,669966,666666,663366,660066,33FF66,33CC66,339966,336666,333366,330066,00FF66,00CC66,009966,006666,003366,000066,66FF33,66CC33,669933,666633,663333,660033,33FF33,33CC33,339933,336633,333333,330033,00FF33,00CC33,009933,006633,003333,000033,66FF00,66CC00,669900,666600,663300,660000,33FF00,33CC00,339900,336600,333300,330000,00FF00,00CC00,009900,006600,003300,000000",r="#ffffff",n={apply:"Apply",cancel:"Cancel",noColor:"no color",clearColor:"Clear color",previewInput:"Color Hexadecimal Code"},a=".kendoColorTools",g="click"+a,_="keydown"+a,o="k-state-disabled";var b=u.extend({init:function(e,t){var i=this,n;u.fn.init.call(i,e,t);e=i.element;t=i.options;i._value=t.value=c(t.value);i._tabIndex=e.attr("tabIndex")||0;n=i._ariaId=t.ariaId;if(n){e.attr("aria-labelledby",n)}if(t._standalone){i._triggerSelect=i._triggerChange}},options:{name:"ColorSelector",value:null,_standalone:true},events:["change","select","cancel"],color:function(e){if(e!==t){this._value=c(e);this._updateUI(this._value)}return this._value},value:function(e){e=this.color(e);if(e){if(this.options.opacity){e=e.toCssRgba()}else{e=e.toCss()}}return e||null},enable:function(e){if(arguments.length===0){e=true}this.wrapper.toggleClass(o,!e);this._onEnable(e)},_select:function(e,t){var i=this._value;e=this.color(e);if(!t){this.element.trigger("change");if(!e.equals(i)){this.trigger("change",{value:this.value()})}else if(!this._standalone){this.trigger("cancel")}}},_triggerSelect:function(e){w(this,"select",e)},_triggerChange:function(e){w(this,"change",e)},destroy:function(){if(this.element){this.element.off(a)}if(this.wrapper){this.wrapper.off(a).find("*").off(a)}this.wrapper=null;u.fn.destroy.call(this)},_updateUI:l.noop,_selectOnHide:function(){return null},_cancel:function(){this.trigger("cancel")}});function w(e,t,i){i=c(i);if(i&&!i.equals(e.color())){if(t=="change"){e._value=i}if(i.a!=1){i=i.toCssRgba()}else{i=i.toCss()}e.trigger(t,{value:i})}}var k=b.extend({init:function(e,t){var i=this;b.fn.init.call(i,e,t);e=i.wrapper=i.element;t=i.options;var n=t.palette;if(n=="websafe"){n=m;t.columns=18}else if(n=="basic"){n=v}if(typeof n=="string"){n=n.split(",")}if(l.isArray(n)){n=l.map(n,function(e){return c(e)})}i._selectedID=(t.ariaId||d.guid())+"_selected";e.addClass("k-widget k-widget-2021 k-colorpalette").attr("role","grid").attr("aria-readonly","true").append(l(i._template({colors:n,columns:t.columns,tileSize:t.tileSize,value:i._value,id:t.ariaId}))).on(g,".k-item",function(e){i._select(l(e.currentTarget).css(h))}).attr("tabIndex",i._tabIndex).on(_,T(i._keydown,i));var r=t.tileSize,a,o;if(r){if(/number|string/.test(typeof r)){a=o=parseFloat(r)}else if(typeof r=="object"){a=parseFloat(r.width);o=parseFloat(r.height)}else{throw new Error("Unsupported value for the 'tileSize' argument")}e.find(".k-item").css({width:a,height:o})}},focus:function(){if(this.wrapper&&!this.wrapper.is("[unselectable='on']")){this.wrapper.focus()}},options:{name:"ColorPalette",columns:10,tileSize:null,palette:"basic"},_onEnable:function(e){if(e){this.wrapper.attr("tabIndex",this._tabIndex)}else{this.wrapper.removeAttr("tabIndex")}},_keydown:function(e){var t,i=this.wrapper,n=i.find(".k-item"),r=n.filter("."+p).get(0),a=e.keyCode;if(a==s.LEFT){t=x(n,r,-1)}else if(a==s.RIGHT){t=x(n,r,1)}else if(a==s.DOWN){t=x(n,r,this.options.columns)}else if(a==s.UP){t=x(n,r,-this.options.columns)}else if(a==s.ENTER){S(e);if(r){this._select(l(r).css(h))}}else if(a==s.ESC){this._cancel()}if(t){S(e);this._current(t);try{var o=c(t.css(h));this._triggerSelect(o)}catch(e){}}},_current:function(e){this.wrapper.find("."+p).removeClass(p).attr("aria-selected",false).removeAttr("id");l(e).addClass(p).attr("aria-selected",true).attr("id",this._selectedID);this.element.removeAttr("aria-activedescendant").attr("aria-activedescendant",this._selectedID)},_updateUI:function(t){var i=null;this.wrapper.find(".k-item").each(function(){var e=c(l(this).css(h));if(e&&e.equals(t)){i=this;return false}});this._current(i)},_template:d.template('<table class="k-palette k-reset" role="presentation"><tr role="row">'+"# for (var i = 0; i < colors.length; ++i) { #"+"# var selected = colors[i].equals(value); #"+'# if (i && i % columns == 0) { # </tr><tr role="row"> # } #'+'<td role="gridcell" unselectable="on" style="background-color:#= colors[i].toCss() #"'+'#= selected ? " aria-selected=true" : "" # '+'#=(id && i === 0) ? "id=\\""+id+"\\" " : "" # '+'class="k-item#= selected ? " '+p+'" : "" #" '+'aria-label="#= colors[i].toCss() #"></td>'+"# } #"+"</tr></table>")});var y=b.extend({init:function(e,t){var r=this;b.fn.init.call(r,e,t);t=r.options;t.messages=t.options?l.extend(r.options.messages,t.options.messages):r.options.messages;e=r.element;r.wrapper=e.addClass("k-widget k-widget-2021 k-flatcolorpicker").append(r._template(t));r._hueElements=l(".k-hsv-rectangle, .k-alpha-slider .k-slider-track",e);r._selectedColor=l(".k-selected-color-display",e);r._colorAsText=l("input.k-color-value",e);r._sliders();r._hsvArea();r._updateUI(r._value||c("#f00"));e.find("input.k-color-value").on(_,function(e){var t=this;if(e.keyCode==s.ENTER){try{var i=c(t.value);var n=r.color();r._select(i,i.equals(n))}catch(e){l(t).addClass("k-state-error")}}else if(r.options.autoupdate){setTimeout(function(){var e=c(t.value,true);if(e){r._updateUI(e,true)}},10)}}).end().on(g,".k-controls button.apply",function(){if(r.options._clearedColor){r.trigger("change")}else{r._select(r._getHSV())}}).on(g,".k-controls button.cancel",function(){r._updateUI(r.color());r._cancel()})},destroy:function(){this._hsvEvents.destroy();this._hueSlider.destroy();if(this._opacitySlider){this._opacitySlider.destroy()}this._hueSlider=this._opacitySlider=this._hsvRect=this._hsvHandle=this._hueElements=this._selectedColor=this._colorAsText=null;b.fn.destroy.call(this)},options:{name:"FlatColorPicker",opacity:false,buttons:false,input:true,preview:true,clearButton:false,autoupdate:true,messages:n},_sliders:function(){var t=this,e=t.element,i=e.find(".k-hue-slider"),n=e.find(".k-alpha-slider");function r(e){t._updateUI(t._getHSV(e.value,null,null,null))}i.attr("aria-label","hue saturation");t._hueSlider=i.kendoSlider({min:0,max:360,tickPlacement:"none",showButtons:false,slide:r,change:r}).data("kendoSlider");function a(e){t._updateUI(t._getHSV(null,null,null,e.value/100))}n.attr("aria-label","opacity");t._opacitySlider=n.kendoSlider({min:0,max:100,tickPlacement:"none",showButtons:false,slide:a,change:a}).data("kendoSlider")},_hsvArea:function(){var s=this,e=s.element,t=e.find(".k-hsv-rectangle"),i=t.find(".k-draghandle").attr("tabIndex",0).on(_,T(s._keydown,s));function n(e,t){var i=this.offset,n=e-i.left,r=t-i.top,a=this.width,o=this.height;n=n<0?0:n>a?a:n;r=r<0?0:r>o?o:r;s._svChange(n/a,1-r/o)}s._hsvEvents=new d.UserEvents(t,{global:true,press:function(e){this.offset=d.getOffset(t);this.width=t.width();this.height=t.height();i.focus();n.call(this,e.x.location,e.y.location)},start:function(){t.addClass("k-dragging");i.focus()},move:function(e){e.preventDefault();n.call(this,e.x.location,e.y.location)},end:function(){t.removeClass("k-dragging")}});s._hsvRect=t;s._hsvHandle=i},_onEnable:function(e){this._hueSlider.enable(e);if(this._opacitySlider){this._opacitySlider.enable(e)}this.wrapper.find("input").attr("disabled",!e);var t=this._hsvRect.find(".k-draghandle");if(e){t.attr("tabIndex",this._tabIndex)}else{t.removeAttr("tabIndex")}},_keydown:function(n){var r=this;function e(e,t){var i=r._getHSV();i[e]+=t*(n.shiftKey?.01:.05);if(i[e]<0){i[e]=0}if(i[e]>1){i[e]=1}r._updateUI(i);S(n)}function t(e){var t=r._getHSV();t.h+=e*(n.shiftKey?1:5);if(t.h<0){t.h=0}if(t.h>359){t.h=359}r._updateUI(t);S(n)}switch(n.keyCode){case s.LEFT:if(n.ctrlKey){t(-1)}else{e("s",-1)}break;case s.RIGHT:if(n.ctrlKey){t(1)}else{e("s",1)}break;case s.UP:e(n.ctrlKey&&r._opacitySlider?"a":"v",1);break;case s.DOWN:e(n.ctrlKey&&r._opacitySlider?"a":"v",-1);break;case s.ENTER:r._select(r._getHSV());break;case s.F2:r.wrapper.find("input.k-color-value").focus().select();break;case s.ESC:r._cancel();break}},focus:function(){this._hsvHandle.focus()},_getHSV:function(e,t,i,n){var r=this._hsvRect,a=r.width(),o=r.height(),s=this._hsvHandle.position();if(e==null){e=this._hueSlider.value()}if(t==null){t=s.left/a}if(i==null){i=1-s.top/o}if(n==null){n=this._opacitySlider?this._opacitySlider.value()/100:1}return f.fromHSV(e,t,i,n)},_svChange:function(e,t){var i=this._getHSV(null,e,t,null);this._updateUI(i)},_updateUI:function(e,t){var i=this,n=i._hsvRect;if(!e){return}this._colorAsText.attr("title",i.options.messages.previewInput);this._colorAsText.removeClass("k-state-error");i._selectedColor.css(h,e.toDisplay());if(!t){i._colorAsText.val(i._opacitySlider?e.toCssRgba():e.toCss())}i._triggerSelect(e);e=e.toHSV();i._hsvHandle.css({left:e.s*n.width()+"px",top:(1-e.v)*n.height()+"px"});i._hueElements.css(h,f.fromHSV(e.h,1,1,1).toCss());i._hueSlider.value(e.h);if(i._opacitySlider){i._opacitySlider.value(100*e.a)}},_selectOnHide:function(){return this.options.buttons?null:this._getHSV()},_template:d.template("# if (preview) { #"+'<div class="k-selected-color"><div class="k-selected-color-display"><div class="k-color-input"><input class="k-color-value" '+"# if (clearButton && !_standalone) { #"+'placeholder="#: messages.noColor #" '+"# } #"+'#= !data.input ? \'style="visibility: hidden;"\' : "" #>'+"# if (clearButton && !_standalone) { #"+'<span class="k-clear-color k-button k-flat" title="#: messages.clearColor #"></span>'+"# } #"+"</div></div></div>"+"# } #"+"# if (clearButton && !_standalone && !preview) { #"+'<div class="k-clear-color-container"><span class="k-clear-color k-button k-flat">#: messages.clearColor #</span></div>'+"# } #"+'<div class="k-hsv-rectangle"><div class="k-hsv-gradient"></div><div class="k-draghandle"></div></div>'+'<div class="k-sliders-wrap k-vbox">'+'<input class="k-hue-slider" />'+"# if (opacity) { #"+'<input class="k-alpha-slider k-transparency-slider" />'+"# } #"+"</div>"+"# if (buttons) { #"+'<div unselectable="on" class="k-controls"><button class="k-button k-primary apply">#: messages.apply #</button> <button class="k-button cancel">#: messages.cancel #</button></div>'+"# } #")});function x(e,t,i){e=Array.prototype.slice.call(e);var n=e.length;var r=e.indexOf(t);if(r<0){return i<0?e[n-1]:e[0]}r+=i;if(r<0){r+=n}else{r%=n}return e[r]}var C=u.extend({init:function(e,t){var i=this;u.fn.init.call(i,e,t);t=i.options;e=i.element;var n=e.attr("value")||e.val();if(n){n=c(n,true)}else{n=c(t.value,true)}i._value=t.value=n;var r=i.wrapper=l(i._template(t));e.hide().after(r);i._inputWrapper=l(i.wrapper[0].firstChild);if(e.is("input")){e.appendTo(r);var a=e.closest("label");var o=e.attr("id");if(o){a=a.add('label[for="'+o+'"]')}a.click(function(e){i.open();e.preventDefault()})}i._tabIndex=e.attr("tabIndex")||0;i.enable(!e.attr("disabled"));var s=e.attr("accesskey");if(s){e.attr("accesskey",null);r.attr("accesskey",s)}i.bind("activate",function(e){if(!e.isDefaultPrevented()){i.toggle()}});i._updateUI(n)},destroy:function(){this.wrapper.off(a).find("*").off(a);if(this._popup){this._selector.destroy();this._popup.destroy()}this._selector=this._popup=this.wrapper=null;u.fn.destroy.call(this)},enable:function(e){var t=this,i=t.wrapper,n=i.children(".k-picker-wrap"),r=n.find(".k-select");if(arguments.length===0){e=true}t.element.attr("disabled",!e);i.attr("aria-disabled",!e);r.off(a).on("mousedown"+a,S);i.addClass("k-state-disabled").removeAttr("tabIndex").add("*",i).off(a);if(e){i.removeClass("k-state-disabled").attr("tabIndex",t._tabIndex).on("mouseenter"+a,function(){n.addClass("k-state-hover")}).on("mouseleave"+a,function(){n.removeClass("k-state-hover")}).on("focus"+a,function(){n.addClass("k-state-focused")}).on("blur"+a,function(){n.removeClass("k-state-focused")}).on(_,T(t._keydown,t)).on(g,".k-select",T(t.toggle,t)).on(g,t.options.toolIcon?".k-tool-icon":".k-selected-color",function(){t.trigger("activate")})}else{t.close()}},_template:d.template('<span role="textbox" aria-haspopup="true" class="k-widget k-widget-2021 k-colorpicker">'+'<span class="k-picker-wrap k-state-default">'+"# if (toolIcon) { #"+'<span class="k-icon k-tool-icon #= toolIcon #">'+'<span class="k-selected-color"></span>'+"</span>"+"# } else { #"+'<span class="k-selected-color"><span class="k-icon k-i-line" style="display: none;"></span></span>'+"# } #"+'<span class="k-select" unselectable="on" aria-label="select">'+'<span class="k-icon k-i-arrow-60-down"></span>'+"</span>"+"</span>"+"</span>"),options:{name:"ColorPicker",palette:null,columns:10,toolIcon:null,value:null,messages:n,opacity:false,buttons:true,preview:true,clearButton:false,ARIATemplate:'Current selected color is #=data || ""#'},events:["activate","change","select","open","close"],open:function(){if(!this.element.prop("disabled")){this._getPopup().open()}},close:function(){var e=this._selector&&this._selector.options||{};e._closing=true;this._getPopup().close();delete e._closing},toggle:function(){if(!this.element.prop("disabled")){this._getPopup().toggle()}},_noColorIcon:function(){return this.wrapper.find(".k-picker-wrap > .k-selected-color > .k-icon.k-i-line")},color:b.fn.color,value:b.fn.value,_select:b.fn._select,_triggerSelect:b.fn._triggerSelect,_isInputTypeColor:function(){var e=this.element[0];return/^input$/i.test(e.tagName)&&/^color$/i.test(e.type)},_updateUI:function(e){var t="";if(e){if(this._isInputTypeColor()||e.a==1){t=e.toCss()}else{t=e.toCssRgba()}this.element.val(t)}if(!this._ariaTemplate){this._ariaTemplate=d.template(this.options.ARIATemplate)}this.wrapper.attr("aria-label",this._ariaTemplate(t));this._triggerSelect(e);this.wrapper.find(".k-selected-color").css(h,e?e.toDisplay():r);this._noColorIcon()[t?"hide":"show"]()},_keydown:function(e){var t=e.keyCode;if(this._getPopup().visible()){if(t==s.ESC){this._selector._cancel()}else{this._selector._keydown(e)}S(e)}else if(t==s.ENTER||t==s.DOWN){this.open();S(e)}},_getPopup:function(){var a=this,e=a._popup;if(!e){var t=a.options;var i;if(t.palette){i=k}else{i=y}t._standalone=false;delete t.select;delete t.change;delete t.cancel;var n=d.guid();var o=a._selector=new i(l('<div id="'+n+'"></div>').appendTo(document.body),t);a.wrapper.attr("aria-owns",n);a._popup=e=o.wrapper.kendoPopup({anchor:a.wrapper,adjustSize:{width:5,height:0}}).data("kendoPopup");o.element.find(".k-clear-color").kendoButton({icon:"reset-color",click:function(e){o.options._clearedColor=true;a.value(null);a.element.val(null);a._updateUI(null);o._colorAsText.val("");o._hsvHandle.css({top:"0px",left:"0px"});o._selectedColor.css(h,r);a.trigger("change",{value:a.value()});e.preventDefault()}});o.bind({select:function(e){a._updateUI(c(e.value));delete o.options._clearedColor},change:function(){if(!o.options._clearedColor){a._select(o.color())}a.close()},cancel:function(){if(o.options._clearedColor&&!a.value()&&o.value()){a._select(o.color(),true)}a.close()}});e.bind({close:function(e){if(a.trigger("close")){e.preventDefault();return}a.wrapper.children(".k-picker-wrap").removeClass("k-state-focused");var t=o._selectOnHide();var i=o.value();var n=a.value();var r=o.options;if(!t){setTimeout(function(){if(a.wrapper&&!a.wrapper.is("[unselectable='on']")){a.wrapper.focus()}});if(!r._closing&&r._clearedColor&&!n&&i){a._select(i,true)}else{a._updateUI(a.color())}}else if(!(r._clearedColor&&!n)){a._select(t)}},open:function(e){if(a.trigger("open")){e.preventDefault()}else{a.wrapper.children(".k-picker-wrap").addClass("k-state-focused")}},activate:function(){o._select(a.color(),true);o.focus();a.wrapper.children(".k-picker-wrap").addClass("k-state-focused")}})}return e}});function S(e){e.preventDefault()}function T(e,t){return function(){return e.apply(t,arguments)}}i.plugin(k);i.plugin(y);i.plugin(C)})(jQuery,parseInt);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.floatinglabel",["kendo.core"],e)})(function(){var e={id:"floatinglabel",name:"FloatingLabel",category:"framework",depends:["core"],hidden:true};(function(n,r){var a=window.kendo,o=a.ui.Widget,e=a.ui,s=".kendoFloatingLabel",l="k-floating-label-container",i="k-state-empty",d="k-state-focused",u="k-state-disabled",c="k-no-click",f=n.proxy;var t=o.extend({init:function(e,t){var i=this;o.fn.init.call(i,e,t);t=n.extend(true,{},t);i.refresh();i._editable({readonly:i.options.widget.options.readonly!==r?i.options.widget.options.readonly:false,disable:i.options.widget.options.enable!==r?!i.options.widget.options.enable:false});i.element.addClass(l);a.notify(i)},options:{name:"FloatingLabel",widget:null},readonly:function(e){this._editable({readonly:e===r?true:e,disable:false})},enable:function(e){this._editable({readonly:false,disable:!(e=e===r?true:e)})},refresh:function(){var e=this;var t=e.element;t.removeClass(i).removeClass(d);if(!e.options.widget.element.val()){t.addClass(i)}if(document.activeElement===e.options.widget.element[0]){t.addClass(d)}},destroy:function(){var e=this;e.element.off(s);o.fn.destroy.call(e)},_editable:function(e){var t=this;var i=t.element;var n=e.disable;var r=e.readonly;i.off(s);if(!r&&!n){i.removeClass(u).removeClass(c);i.on("focusin"+s,f(t.refresh,t));i.on("focusout"+s,f(t.refresh,t))}else{i.toggleClass(u,n).toggleClass(c,r)}}});e.plugin(t)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.numerictextbox",["kendo.core","kendo.userevents","kendo.floatinglabel"],e)})(function(){var e={id:"numerictextbox",name:"NumericTextBox",category:"web",description:"The NumericTextBox widget can format and display numeric, percentage or currency textbox.",depends:["core","userevents","floatinglabel"]};(function(u,c){var f=window.kendo,h=f.caret,n=f.keys,e=f.ui,p=e.Widget,o=f._activeElement,v=f._extractFormat,i=f.parseFloat,r=f.support.placeholder,t=f.getCulture,a="change",s="disabled",l="readonly",d="k-input",m="spin",g=".kendoNumericTextBox",_="touchend",b="mouseleave"+g,w="mouseenter"+g+" "+b,k="k-state-default",y="k-state-focused",x="k-state-hover",C="focus",S=".",T="k-icon",D="k-label k-input-label",A="k-state-selected",E="k-state-disabled",I="k-state-invalid",M="aria-disabled",B=/^(-)?(\d*)$/,R=null,F=u.proxy,P=u.isPlainObject,L=u.extend;var H=p.extend({init:function(e,t){var i=this,n=t&&t.step!==c,r,a,o,s,l;var d;p.fn.init.call(i,e,t);t=i.options;e=i.element.on("focusout"+g,F(i._focusout,i)).attr("role","spinbutton");t.placeholder=t.placeholder||e.attr("placeholder");r=i.min(e.attr("min"));a=i.max(e.attr("max"));o=i._parse(e.attr("step"));if(t.min===R&&r!==R){t.min=r}if(t.max===R&&a!==R){t.max=a}if(!n&&o!==R){t.step=o}i._initialOptions=L({},t);d=e.attr("type");i._reset();i._wrapper();i._arrows();i._validation();i._input();if(!f.support.mobileOS){i._text.on(C+g,F(i._click,i))}else{i._text.on(_+g+" "+C+g,function(){if(f.support.browser.edge){i._text.one(C+g,function(){i._toggleText(false);e.focus()})}else{i._toggleText(false);e.focus()}i.selectValue()})}e.attr("aria-valuemin",t.min!==R?t.min*t.factor:t.min).attr("aria-valuemax",t.max!==R?t.max*t.factor:t.max);t.format=v(t.format);s=t.value;if(s==R){if(d=="number"){s=parseFloat(e.val())}else{s=e.val()}}i.value(s);l=!t.enable||e.is("[disabled]")||u(i.element).parents("fieldset").is(":disabled");if(l){i.enable(false)}else{i.readonly(e.is("[readonly]"))}i.angular("compile",function(){return{elements:i._text.get()}});i._label();f.notify(i)},options:{name:"NumericTextBox",decimals:R,enable:true,restrictDecimals:false,min:R,max:R,value:R,step:1,round:true,culture:"",format:"n",spinners:true,placeholder:"",factor:1,upArrowText:"Increase value",downArrowText:"Decrease value",label:null},events:[a,m],_editable:function(e){var t=this,i=t.element,n=e.disable,r=e.readonly,a=t._text.add(i),o=t._inputWrapper.off(w);t._toggleText(true);t._upArrowEventHandler.unbind("press");t._downArrowEventHandler.unbind("press");i.off("keydown"+g).off("keyup"+g).off("input"+g).off("paste"+g);if(t._inputLabel){t._inputLabel.off(g)}if(!r&&!n){o.addClass(k).removeClass(E).on(w,t._toggleHover);a.removeAttr(s).removeAttr(l).attr(M,false);t._upArrowEventHandler.bind("press",function(e){e.preventDefault();t._spin(1);t._upArrow.addClass(A)});t._downArrowEventHandler.bind("press",function(e){e.preventDefault();t._spin(-1);t._downArrow.addClass(A)});t.element.on("keydown"+g,F(t._keydown,t)).on("keyup"+g,F(t._keyup,t)).on("paste"+g,F(t._paste,t)).on("input"+g,F(t._inputHandler,t));if(t._inputLabel){t._inputLabel.on("click"+g,F(t.focus,t))}}else{o.addClass(n?E:k).removeClass(n?k:E);a.attr(s,n).attr(l,r).attr(M,n)}},readonly:function(e){var t=this;this._editable({readonly:e===c?true:e,disable:false});if(t.floatingLabel){t.floatingLabel.readonly(e===c?true:e)}},enable:function(e){var t=this;this._editable({readonly:false,disable:!(e=e===c?true:e)});if(t.floatingLabel){t.floatingLabel.enable(e=e===c?true:e)}},setOptions:function(e){var t=this;p.fn.setOptions.call(t,e);t._arrowsWrap.toggle(t.options.spinners);t._inputWrapper.toggleClass("k-expand-padding",!t.options.spinners);t._text.prop("placeholder",t.options.placeholder);t._placeholder(t.options.placeholder);t.element.attr({"aria-valuemin":t.options.min!==R?t.options.min*t.options.factor:t.options.min,"aria-valuemax":t.options.max!==R?t.options.max*t.options.factor:t.options.max});t.options.format=v(t.options.format);if(e.value!==c){t.value(e.value)}},destroy:function(){var e=this;if(e._inputLabel){e._inputLabel.off(g);if(e.floatingLabel){e.floatingLabel.destroy()}}e.element.add(e._text).add(e._upArrow).add(e._downArrow).add(e._inputWrapper).off(g);e._upArrowEventHandler.destroy();e._downArrowEventHandler.destroy();if(e._form){e._form.off("reset",e._resetHandler)}p.fn.destroy.call(e)},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},step:function(e){return this._option("step",e)},value:function(e){var t=this,i;if(e===c){return t._value}e=t._parse(e);i=t._adjust(e);if(e!==i){return}t._update(e);t._old=t._value},focus:function(){this._focusin()},_adjust:function(e){var t=this,i=t.options,n=i.min,r=i.max;if(e===R){return e}if(n!==R&&e<n){e=n}else if(r!==R&&e>r){e=r}return e},_arrows:function(){var e=this,t,i=function(){clearTimeout(e._spinning);t.removeClass(A)},n=e.options,r=n.spinners,a=e.element;t=a.siblings("."+T);if(!t[0]){t=u(z("increase",n.upArrowText)+z("decrease",n.downArrowText)).insertAfter(a);e._arrowsWrap=t.wrapAll('<span class="k-select"/>').parent()}if(!r){t.parent().toggle(r);e._inputWrapper.addClass("k-expand-padding")}e._upArrow=t.eq(0);e._upArrowEventHandler=new f.UserEvents(e._upArrow,{release:i});e._downArrow=t.eq(1);e._downArrowEventHandler=new f.UserEvents(e._downArrow,{release:i})},_validation:function(){var e=this;var t=e.element;e._validationIcon=u("<span class='"+T+" k-i-warning'></span>").hide().insertAfter(t)},_blur:function(){var e=this;e._toggleText(true);e._change(e.element.val())},_click:function(d){var u=this;clearTimeout(u._focusing);u._focusing=setTimeout(function(){var e=d.target,t=h(e)[0],i=e.value.substring(0,t),n=u._format(u.options.format),r=n[","],a,o,s,l=0;if(r){o=new RegExp("\\"+r,"g");s=new RegExp("(^(-)$)|(^(-)?([\\d\\"+r+"]+)(\\"+n[S]+")?(\\d+)?)")}if(s){a=s.exec(i)}if(a){l=a[0].replace(o,"").length;if(i.indexOf("(")!=-1&&u._value<0){l++}}u._focusin();h(u.element[0],l);u.selectValue()})},selectValue:function(){if(this.options.selectOnFocus){this.element[0].select()}},_change:function(e){var t=this,i=t.options.factor;if(i&&i!==1){e=f.parseFloat(e);if(e!==null){e=e/i}}t._update(e);e=t._value;if(t._old!=e){t._old=e;if(!t._typing){t.element.trigger(a)}t.trigger(a)}t._typing=false},_culture:function(e){return e||t(this.options.culture)},_focusin:function(){var e=this;e._inputWrapper.addClass(y);e._toggleText(false);e.element[0].focus()},_focusout:function(){var e=this;clearTimeout(e._focusing);e._inputWrapper.removeClass(y).removeClass(x);e._blur();e._removeInvalidState()},_format:function(e,t){var i=this._culture(t).numberFormat;e=e.toLowerCase();if(e.indexOf("c")>-1){i=i.currency}else if(e.indexOf("p")>-1){i=i.percent}return i},_input:function(){var e=this,t=e.options,i="k-formatted-value",n=e.element.addClass(d).show()[0],r=n.accessKey,a=e.wrapper,o;o=a.find(S+i);if(!o[0]){o=u('<input type="text"/>').insertBefore(n).addClass(i).attr("aria-hidden","true")}try{n.setAttribute("type","text")}catch(e){n.type="text"}o[0].title=n.title;o[0].tabIndex=n.tabIndex;o[0].style.cssText=n.style.cssText;o.prop("placeholder",t.placeholder);if(r){o.attr("accesskey",r);n.accessKey=""}e._text=o.addClass(n.className).attr({role:"spinbutton","aria-valuemin":t.min!==R?t.min*t.factor:t.min,"aria-valuemax":t.max!==R?t.max*t.factor:t.max,autocomplete:"off"})},_keydown:function(e){var t=this,i=e.keyCode;if(i===n.NUMPAD_DOT){t._numPadDot=true}if(i==n.DOWN){t._step(-1);return}else if(i==n.UP){t._step(1);return}else if(i==n.ENTER){t._change(t.element.val());return}if(i!=n.TAB){t._typing=true}t._cachedCaret=h(t.element)},_keyup:function(){this._removeInvalidState()},_inputHandler:function(){var e=this.element;var t=e.val();var i=this.options.min;var n=this._format(this.options.format);var r=n[S];var a=i!==null&&i>=0&&t.charAt(0)==="-";if(this._numPadDot&&r!==S){t=t.replace(S,r);this.element.val(t);this._numPadDot=false}if(this._numericRegex(n).test(t)&&!a){this._oldText=t}else{this._blinkInvalidState();this.element.val(this._oldText);if(this._cachedCaret){h(e,this._cachedCaret[0]);this._cachedCaret=null}}},_blinkInvalidState:function(){var e=this;e._addInvalidState();clearTimeout(e._invalidStateTimeout);e._invalidStateTimeout=setTimeout(F(e._removeInvalidState,e),100)},_addInvalidState:function(){var e=this;e._inputWrapper.addClass(I);e._validationIcon.show()},_removeInvalidState:function(){var e=this;e._inputWrapper.removeClass(I);e._validationIcon.hide();e._invalidStateTimeout=null},_numericRegex:function(e){var t=this;var i=e[S];var n=t.options.decimals;var r="*";if(i===S){i="\\"+i}if(n===R){n=e.decimals}if(n===0&&t.options.restrictDecimals){return B}if(t.options.restrictDecimals){r="{0,"+n+"}"}if(t._separator!==i){t._separator=i;t._floatRegExp=new RegExp("^(-)?(((\\d+("+i+"\\d"+r+")?)|("+i+"\\d"+r+")))?$")}return t._floatRegExp},_paste:function(e){var t=this;var i=e.target;var n=i.value;var r=t._format(t.options.format);setTimeout(function(){var e=t._parse(i.value);if(e===R){t._update(n)}else{i.value=e.toString().replace(S,r[S]);if(t._adjust(e)!==e||!t._numericRegex(r).test(i.value)){t._update(n)}}})},_option:function(e,t){var i=this,n=i.element,r=i.options;if(t===c){return r[e]}t=i._parse(t);if(!t&&e==="step"){return}r[e]=t;n.add(i._text).attr("aria-value"+e,t);n.attr(e,t)},_spin:function(e,t){var i=this;t=t||500;clearTimeout(i._spinning);i._spinning=setTimeout(function(){i._spin(e,50)},t);i._step(e)},_step:function(e){var t=this,i=t.element,n=t._value,r=t._parse(i.val())||0,a=t.options.decimals||2;if(o()!=i[0]){t._focusin()}if(t.options.factor&&r){r=r/t.options.factor}r=+(r+t.options.step*e).toFixed(a);r=t._adjust(r);t._update(r);t._typing=false;if(n!==r){t.trigger(m)}},_toggleHover:function(e){u(e.currentTarget).toggleClass(x,e.type==="mouseenter")},_toggleText:function(e){var t=this;t._text.toggle(e);t.element.toggle(!e)},_parse:function(e,t){return i(e,this._culture(t),this.options.format)},_round:function(e,t){var i=this.options.round?f._round:N;return i(e,t)},_update:function(e){var t=this,i=t.options,n=i.factor,r=i.format,a=i.decimals,o=t._culture(),s=t._format(r,o),l;if(a===R){a=s.decimals}e=t._parse(e,o);l=e!==R;if(l){e=parseFloat(t._round(e,a),10)}t._value=e=t._adjust(e);t._placeholder(f.toString(e,r,o));if(l){if(n){e=parseFloat(t._round(e*n,a),10)}e=e.toString();if(e.indexOf("e")!==-1){e=t._round(+e,a)}e=e.replace(S,s[S])}else{e=null}t.element.val(e);t._oldText=e;t.element.add(t._text).attr("aria-valuenow",e)},_placeholder:function(e){var t=this._text;t.val(e);if(!r&&!e){t.val(this.options.placeholder)}t.attr("title",this.element.attr("title")||t.val())},_label:function(){var e=this;var t=e.element;var i=e.options;var n=t.attr("id");var r;var a;if(i.label!==null){r=P(i.label)?i.label.floating:false;a=P(i.label)?i.label.content:i.label;if(r){e._floatingLabelContainer=e.wrapper.wrap("<span></span>").parent();e.floatingLabel=new f.ui.FloatingLabel(e._floatingLabelContainer,{widget:e})}if(f.isFunction(a)){a=a.call(e)}if(!a){a=""}if(!n){n=i.name+"_"+f.guid();t.attr("id",n)}e._inputLabel=u("<label class='"+D+"' for='"+n+"'>"+a+"</label>'").insertBefore(e.wrapper);if(e.element.attr("disabled")===c&&e.element.attr("readonly")===c){e._inputLabel.on("click"+g,F(e.focus,e))}}},_wrapper:function(){var e=this,t=e.element,i=t[0],n;n=t.parents(".k-numerictextbox");if(!n.is("span.k-numerictextbox")){n=t.hide().wrap('<span class="k-numeric-wrap k-state-default" />').parent();n=n.wrap("<span/>").parent()}n[0].style.cssText=i.style.cssText;i.style.width="";e.wrapper=n.addClass("k-widget k-widget-2021 k-numerictextbox").addClass(i.className).removeClass("input-validation-error").css("display","");e._inputWrapper=u(n[0].firstChild)},_reset:function(){var e=this,t=e.element,i=t.attr("form"),n=i?u("#"+i):t.closest("form");if(n[0]){e._resetHandler=function(){setTimeout(function(){e.value(t[0].value);e.max(e._initialOptions.max);e.min(e._initialOptions.min)})};e._form=n.on("reset",e._resetHandler)}}});function z(e,t){var i="k-i-arrow-"+(e==="increase"?"60-up":"60-down");return'<span unselectable="on" class="k-link k-link-'+e+'" aria-label="'+t+'" title="'+t+'">'+'<span unselectable="on" class="'+T+" "+i+'"></span>'+"</span>"}function N(e,t){var i=parseFloat(e,10).toString().split(S);if(i[1]){i[1]=i[1].substring(0,t)}return i.join(S)}e.plugin(H)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.filtermenu",["kendo.datepicker","kendo.numerictextbox","kendo.dropdownlist","kendo.binder"],e)})(function(){var e={id:"filtermenu",name:"Filtering Menu",category:"framework",depends:["datepicker","numerictextbox","dropdownlist","binder"],advanced:true};(function(l,d){var u=window.kendo,t=u.ui,c=l.proxy,e=u.support,i=e.browser.chrome?"disabled":"off",a="kendoPopup",r="init",n="open",o="refresh",f="change",h=".kendoFilterMenu",s="Is equal to",p="Is not equal to",v={number:"numerictextbox",date:"datepicker"},m={string:"text",number:"number",date:"date"},g=u.isFunction,_=t.Widget;var b='<div class="k-filter-menu-container">'+'<div class="k-filter-help-text">#=messages.info#</div>'+"<label>"+'<input type="radio" data-#=ns#bind="checked: filters[0].value" value="true" name="filters[0].value"/>'+"#=messages.isTrue#"+"</label>"+"<label>"+'<input type="radio" data-#=ns#bind="checked: filters[0].value" value="false" name="filters[0].value"/>'+"#=messages.isFalse#"+"</label>"+'<div class="k-action-buttons">'+'<button type="submit" title="#=messages.filter#" class="k-button k-primary">#=messages.filter#</button>'+'<button type="reset" title="#=messages.clear#" class="k-button">#=messages.clear#</button>'+"</div>"+"</div>";var w="#var inputId;#"+'<div class="k-filter-menu-container">'+"<div>"+'<ul class="k-radio-list k-reset">'+"<li>"+"#inputId = kendo.guid()#"+'<input type="radio" class="k-radio" id="#=inputId#" data-#=ns#bind="checked: filters[0].value" value="true" name="filters[0].value" />'+'<label class="k-radio-label" for="#=inputId#">#=messages.isTrue#</label>'+"</li>"+"<li>"+"#inputId = kendo.guid()#"+'<input type="radio" class="k-radio" id="#=inputId#" data-#=ns#bind="checked: filters[0].value" value="false" name="filters[0].value" />'+'<label class="k-radio-label" for="#=inputId#">#=messages.isFalse#</label>'+"</li>"+"</ul>"+'<div class="k-columnmenu-actions">'+'<button class="k-button" type="reset" title="#=messages.clear#">#=messages.clear#</button>'+'<button class="k-button k-primary" type="submit" title="#=messages.filter#">#=messages.filter#</button>'+"</div>"+"</div>"+"</div>";var k='<div class="k-filter-menu-container">'+'<div class="k-filter-help-text">#=messages.info#</div>'+"<label>"+'<input class="k-textbox" data-#=ns#bind="value: filters[0].value" name="filters[0].value"/>'+"</label>"+'<div class="k-action-buttons">'+'<button type="submit" title="#=messages.filter#" class="k-button k-primary">#=messages.filter#</button>'+'<button type="reset" title="#=messages.clear#" class="k-button">#=messages.clear#</button>'+"</div>"+"</div>";var y='<div class="k-filter-menu-container">'+'#if(componentType === "classic") {#'+'<div class="k-filter-help-text">#=messages.info#</div>'+"#}#"+'<select title="#=messages.operator#" data-#=ns#bind="value: filters[0].operator" data-#=ns#role="dropdownlist">'+"#for(var op in operators){#"+'<option value="#=op#">#=operators[op]#</option>'+"#}#"+"</select>"+"#if(values){#"+'<select title="#=messages.value#" data-#=ns#bind="value:filters[0].value" data-#=ns#text-field="text" data-#=ns#value-field="value" data-#=ns#source=\'#=kendo.stringify(values).replace(/\'/g,"&\\#39;")#\' data-#=ns#role="dropdownlist" data-#=ns#option-label="#=messages.selectValue#" data-#=ns#value-primitive="true">'+"</select>"+"#}else{#"+'<input title="#=messages.value#" data-#=ns#bind="value:filters[0].value" class="k-textbox" type="text" #=role ? "data-" + ns + "role=\'" + role + "\'" : ""# />'+"#}#"+"#if(extra){#"+'#if(componentType === "modern") {#'+'<ul data-#=ns#role="buttongroup" data-bind="events: { select: onLogicChange }">'+'<li data-#=ns#value="and">And</li>'+'<li data-#=ns#value="or">Or</li>'+"</ul>"+"#} else {#"+'<select title="#=messages.logic#" class="k-filter-and" data-#=ns#bind="value: logic" data-#=ns#role="dropdownlist">'+'<option value="and">#=messages.and#</option>'+'<option value="or">#=messages.or#</option>'+"</select>"+"#}#"+'<select title="#=messages.additionalOperator#" data-#=ns#bind="value: filters[1].operator" data-#=ns#role="dropdownlist">'+"#for(var op in operators){#"+'<option value="#=op#">#=operators[op]#</option>'+"#}#"+"</select>"+"#if(values){#"+'<select title="#=messages.additionalValue#" data-#=ns#bind="value:filters[1].value" data-#=ns#text-field="text" data-#=ns#value-field="value" data-#=ns#source=\'#=kendo.stringify(values).replace(/\'/g,"&\\#39;")#\' data-#=ns#role="dropdownlist" data-#=ns#option-label="#=messages.selectValue#" data-#=ns#value-primitive="true">'+"</select>"+"#}else{#"+'<input title="#=messages.additionalValue#" data-#=ns#bind="value: filters[1].value" class="k-textbox" type="text" #=role ? "data-" + ns + "role=\'" + role + "\'" : ""#/>'+"#}#"+"#}#"+'<div class="k-action-buttons">'+'<button type="submit" title="#=messages.filter#" class="k-button k-primary">#=messages.filter#</button>'+'<button type="reset" title="#=messages.clear#" class="k-button">#=messages.clear#</button>'+"</div>"+"</div>";var x='<div data-#=ns#role="view" class="k-grid-filter-menu">'+'<div data-#=ns#role="header" class="k-header">'+'<a href="\\#" class="k-header-cancel k-link" title="#=messages.cancel#" '+'aria-label="#=messages.cancel#"><span class="k-icon k-i-arrow-chevron-left"></span></a>'+"#=messages.filter# #=messages.into# #=title#"+'<a href="\\#" class="k-header-done k-link" title="#=messages.done#" '+'aria-label="#=messages.done#"><span class="k-icon k-i-check"></span></a>'+"</div>"+'<form title="#=messages.title#" class="k-filter-menu">'+'<ul class="k-reset">'+"<li>"+'<span class="k-list-title k-filter-help-text">#=messages.info#</span>'+'<ul class="k-listgroup k-listgroup-flush">'+'<li class="k-item k-listgroup-item">'+'<label class="k-listgroup-form-row k-label">'+'<span class="k-listgroup-form-field-label k-filter-operator-text">#=messages.operator#</span>'+'<span class="k-listgroup-form-field-wrapper">'+'<select id="operator_#=filterMenuGuid#" title="#=messages.operator#" class="k-filter-operator" data-#=ns#bind="value: filters[0].operator" autocomplete="'+i+'" >'+"#for(var op in operators){#"+'<option value="#=op#">#=operators[op]#</option>'+"#}#"+"</select>"+"</span>"+"</label>"+"</li>"+'<li class="k-item k-listgroup-item">'+'<label class="k-listgroup-form-row k-label">'+'<span class="k-listgroup-form-field-label k-filter-input-text">#=messages.value#</span>'+'<span class="k-listgroup-form-field-wrapper">'+"#if(values){#"+'<select id="value_#=filterMenuGuid#" title="#=messages.value#" data-#=ns#bind="value:filters[0].value" autocomplete="'+i+'" >'+'<option value="">#=messages.selectValue#</option>'+"#for(var val in values){#"+'<option value="#=values[val].value#">#=values[val].text#</option>'+"#}#"+"</select>"+"#}else{#"+'<input id="value_#=filterMenuGuid#" title="#=messages.value#" data-#=ns#bind="value:filters[0].value" class="k-value-input" type="#=inputType#" autocomplete="'+i+'" />'+"#}#"+"</span>"+"</label>"+"</li>"+"</ul>"+"#if(extra){#"+'<ul class="k-listgroup k-listgroup-flush">'+'<li class="k-item k-listgroup-item">'+'<label class="k-listgroup-form-row k-label">'+'<span class="k-listgroup-form-field-label k-filter-logic-and-text">#=messages.and#</span>'+'<span class="k-listgroup-form-field-wrapper">'+'<input id="and_#=filterMenuGuid#" title="#=messages.and#" type="radio" name="logic"data-#=ns#bind="checked: logic" value="and" autocomplete="'+i+'" />'+"</span>"+"</label>"+"</li>"+'<li class="k-item k-listgroup-item">'+'<label class="k-listgroup-form-row k-label">'+'<span class="k-listgroup-form-field-label k-filter-logic-or-text">#=messages.or#</span>'+'<span class="k-listgroup-form-field-wrapper">'+'<input id="or_#=filterMenuGuid#" title="#=messages.or#" type="radio" name="logic" data-#=ns#bind="checked: logic" value="or" autocomplete="'+i+'" />'+"</span>"+"</label>"+"</li>"+"</ul>"+'<ul class="k-listgroup k-listgroup-flush">'+'<li class="k-item k-listgroup-item">'+'<label class="k-listgroup-form-row k-label">'+'<span class="k-listgroup-form-field-label k-filter-operator-text">#=messages.additionalOperator#</span>'+'<span class="k-listgroup-form-field-wrapper">'+'<select id="additionalOperator_#=filterMenuGuid#" title="#=messages.additionalOperator#" class="k-filter-operator" data-#=ns#bind="value: filters[1].operator" autocomplete="'+i+'" >'+"#for(var op in operators){#"+'<option value="#=op#">#=operators[op]#</option>'+"#}#"+"</select>"+"</span>"+"</label>"+"</li>"+'<li class="k-item k-listgroup-item">'+'<label class="k-listgroup-form-row k-label">'+'<span class="k-listgroup-form-field-label k-filter-input-text">#=messages.additionalValue#</span>'+'<span class="k-listgroup-form-field-wrapper">'+"#if(values){#"+'<select id="additionalValue_#=filterMenuGuid#" title="#=messages.additionalValue#" data-#=ns#bind="value:filters[1].value" autocomplete="'+i+'" >'+'<option value="">#=messages.selectValue#</option>'+"#for(var val in values){#"+'<option value="#=values[val].value#">#=values[val].text#</option>'+"#}#"+"</select>"+"#}else{#"+'<input id="additionalValue_#=filterMenuGuid#" title="#=messages.additionalValue#" data-#=ns#bind="value:filters[1].value" class="k-value-input" type="#=inputType#" autocomplete="'+i+'" />'+"#}#"+"</span>"+"</label>"+"</li>"+"</ul>"+"#}#"+"</li>"+'<li class="k-item k-clear-wrap">'+'<span class="k-list-title">&nbsp;</span>'+'<ul class="k-listgroup k-listgroup-flush">'+'<li class="k-listgroup-item">'+'<span class="k-link k-label k-clear" title="#=messages.clear#" aria-label="#=messages.clear#">'+"#=messages.clear#"+"</span>"+"</li>"+"</ul>"+"</li>"+"</ul>"+"</form>"+"</div>";var C='<div data-#=ns#role="view" class="k-grid-filter-menu">'+'<div data-#=ns#role="header" class="k-header">'+'<a href="\\#" class="k-header-cancel k-link" title="#=messages.cancel#" '+'aria-label="#=messages.cancel#"><span class="k-icon k-i-arrow-chevron-left"></span></a>'+"#=messages.filter# #=messages.into# #=title#"+'<a href="\\#" class="k-header-done k-link" title="#=messages.done#" '+'aria-label="#=messages.done#"><span class="k-icon k-i-check"></span></a>'+"</div>"+'<form title="#=messages.title#" class="k-filter-menu">'+'<ul class="k-reset">'+"<li>"+'<span class="k-list-title k-filter-help-text">#=messages.info#</span>'+'<ul class="k-listgroup k-listgroup-flush k-multicheck-bool-wrap">'+'<li class="k-item k-listgroup-item">'+'<label class="k-listgroup-form-row k-label">'+'<span class="k-listgroup-form-field-label k-item-title">#=messages.isTrue#</span>'+'<span class="k-listgroup-form-field-wrapper"></span>'+'<input id="true_#=filterMenuGuid#" title="#=messages.isTrue#" type="radio" data-#=ns#bind="checked: filters[0].value" value="true" name="filters[0].value" autocomplete="'+i+'" />'+"</span>"+"</label>"+"</li>"+'<li class="k-item k-listgroup-item">'+'<label class="k-listgroup-form-row k-label">'+'<span for="false_#=filterMenuGuid#" class="k-listgroup-form-field-label k-item-title">#=messages.isFalse#</span>'+'<span class="k-listgroup-form-field-wrapper">'+'<input id="false_#=filterMenuGuid#" title="#=messages.isFalse#" type="radio" data-#=ns#bind="checked: filters[0].value" value="false" name="filters[0].value" autocomplete="'+i+'" />'+"</span>"+"</label>"+"</li>"+"</ul>"+"</li>"+'<li class="k-item k-clear-wrap">'+'<span class="k-list-title">&nbsp;</span>'+'<ul class="k-listgroup k-listgroup-flush">'+'<li class="k-listgroup-item">'+'<span class="k-link k-label k-clear" title="#=messages.clear#" aria-label="#=messages.clear#">'+"#=messages.clear#"+"</span>"+"</li>"+"</ul>"+"</li>"+"</ul>"+"</form>"+"</div>";function S(e,t){if(e.filters){e.filters=l.grep(e.filters,function(e){S(e,t);if(e.filters){return e.filters.length}else{return e.field!=t}})}}function T(e){var t,i,n,r,a,o;if(e&&e.length){o=[];for(t=0,i=e.length;t<i;t++){n=e[t];a=n.text!==""?n.text||n.value||n:n.text;r=n.value==null?n.text||n:n.value;o[t]={text:a,value:r}}}return o}function D(e,t){return l.grep(e,function(e){if(e.filters){e.filters=l.grep(e.filters,function(e){return e.field!=t});return e.filters.length}return e.field!=t})}var A=_.extend({init:function(e,t){var i=this,n="string",r,a,o,s;t=t||{};t.componentType=t.componentType||"classic";_.fn.init.call(i,e,t);r=i.operators=t.operators||{};e=i.element;t=i.options;if(!t.appendToElement){o=e.addClass("k-with-icon k-filterable").find(".k-grid-filter");if(!o[0]){o=e.prepend('<a class="k-grid-filter" href="#" title="'+t.messages.filter+'" aria-label="'+t.messages.filter+'"><span class="k-icon k-i-filter"></span></a>').find(".k-grid-filter")}o.attr("tabindex",-1).on("click"+h,c(i._click,i))}i.link=o||l();i.dataSource=P.create(t.dataSource);i.field=t.field||e.attr(u.attr("field"));i.model=i.dataSource.reader.model;i._parse=function(e){return e!=null?e+"":e};if(i.model&&i.model.fields){s=i.model.fields[i.field];if(s){n=s.type||"string";if(s.parse){i._parse=c(s.parse,s)}}}if(t.values){n="enums"}i.type=n;r=r[n]||t.operators[n];for(a in r){break}i._defaultFilter=function(){return{field:i.field,operator:a||"eq",value:""}};i._refreshHandler=c(i.refresh,i);i.dataSource.bind(f,i._refreshHandler);if(t.appendToElement){i._init()}else{i.refresh()}},_init:function(){var e=this,t=e.options.ui,i=g(t),n;e.pane=e.options.pane;if(e.pane){e._isMobile=true}if(!i){n=t||v[e.type]}if(e._isMobile){e._createMobileForm(n)}else{e._createForm(n)}e.form.on("submit"+h,c(e._submit,e)).on("reset"+h,c(e._reset,e));if(i){e.form.find(".k-textbox").removeClass("k-textbox").each(function(){t(l(this))})}e.form.find("["+u.attr("role")+"=numerictextbox]").removeClass("k-textbox").end().find("["+u.attr("role")+"=datetimepicker]").removeClass("k-textbox").end().find("["+u.attr("role")+"=timepicker]").removeClass("k-textbox").end().find("["+u.attr("role")+"=datepicker]").removeClass("k-textbox");e.refresh();e.trigger(r,{field:e.field,container:e.form});if(e.options.cycleForm){u.cycleForm(e.form)}},_createForm:function(e){var t=this,i=t.options,n=t.operators||{},r=t.type;n=n[r]||i.operators[r];t.form=l('<form title="'+t.options.messages.title+'" class="k-filter-menu"/>').html(u.template(t._getTemplate())({field:t.field,format:i.format,ns:u.ns,messages:i.messages,extra:i.extra,operators:n,type:r,role:e,values:T(i.values),componentType:t.options.componentType}));if(!i.appendToElement){t.popup=t.form[a]({anchor:t.link,copyAnchorStyles:false,open:c(t._open,t),activate:c(t._activate,t),close:function(){if(t.options.closeCallback){t.options.closeCallback(t.element)}}}).data(a)}else{t.element.append(t.form);t.popup=t.element.closest(".k-popup").data(a)}t.form.on("keydown"+h,c(t._keydown,t))},_getTemplate:function(){var e=this,t=g(e.options.ui);if(e.type==="boolean"){if(t){return k}else if(e.options.componentType==="modern"){return w}else{return b}}else{return y}},_createMobileForm:function(e){var t=this,i=t.options,n=t.operators||{},r=u.guid(),a=t.type;n=n[a]||i.operators[a];t.form=l("<div />").html(u.template(a==="boolean"?C:x)({field:t.field,title:i.title||t.field,format:i.format,ns:u.ns,messages:i.messages,extra:i.extra,operators:n,filterMenuGuid:r,type:a,role:e,inputType:m[a],values:T(i.values)}));t.view=t.pane.append(t.form.html());t.form=t.view.element.find("form");t.view.element.on("click",".k-header-done",function(e){t.form.submit();e.preventDefault()}).on("click",".k-header-cancel",function(e){t._closeForm();e.preventDefault()}).on("click",".k-clear",function(e){t._mobileClear();e.preventDefault()});t.view.bind("showStart",function(){t.refresh()})},refresh:function(){var n=this,e=n.dataSource.filter()||{filters:[],logic:"and"};var t=[n._defaultFilter()];var i=n._defaultFilter().operator;if(n.options.extra||i!=="isnull"&&i!=="isnullorempty"&&i!=="isnotnullorempty"&&i!=="isnotnull"&&i!=="isempty"&&i!=="isnotempty"){t.push(n._defaultFilter())}n.filterModel=u.observable({logic:"and",filters:t});if(n.form){u.bind(n.form.children().first(),n.filterModel);if(n.options.componentType==="modern"&&n.options.extra&&n.type!=="boolean"&&!n._isMobile){n.filterModel.bind("change",function(){var e=u.attr("role");var t=n.form.find("["+e+"='buttongroup']").data("kendoButtonGroup");var i=this.logic==="and"?0:1;t.select(t.element.children().eq(i))});n.filterModel.set("onLogicChange",n._logicChangeHandler)}}if(n._bind(e)){n.link.addClass("k-state-active")}else{n.link.removeClass("k-state-active")}},_logicChangeHandler:function(e){var t=u.attr("value");var i=e.sender.current().attr(t);this.set("logic",i)},destroy:function(){var e=this;_.fn.destroy.call(e);if(e.form){u.unbind(e.form);u.destroy(e.form);e.form.unbind(h);if(e.popup){e.popup.destroy();e.popup=null}e.form=null}if(e.view){e.view.purge();e.view=null}e.link.unbind(h);if(e._refreshHandler){e.dataSource.unbind(f,e._refreshHandler);e.dataSource=null}e.element=e.link=e._refreshHandler=e.filterModel=null},_bind:function(e){var t=this,i=e.filters,n,r,a=false,o=0,s=t.filterModel,l,d;for(n=0,r=i.length;n<r;n++){d=i[n];if(d.field==t.field){s.set("logic",e.logic);l=s.filters[o];if(!l){s.filters.push({field:t.field});l=s.filters[o]}l.set("value",t._parse(d.value));l.set("operator",d.operator);o++;a=true}else if(d.filters){a=a||t._bind(d)}}return a},_stripFilters:function(e){return l.grep(e,function(e){return e.value!==""&&e.value!=null||(e.operator==="isnull"||e.operator==="isnotnull"||e.operator==="isempty"||e.operator==="isnotempty"||e.operator=="isnullorempty"||e.operator=="isnotnullorempty")})},_merge:function(e){var t=this,i=e.logic||"and",n=this._stripFilters(e.filters),r,a=t.dataSource.filter()||{filters:[],logic:"and"},o,s;S(a,t.field);for(o=0,s=n.length;o<s;o++){r=n[o];r.value=t._parse(r.value)}if(n.length){if(a.filters.length){e.filters=n;if(a.logic!=="and"){a.filters=[{logic:a.logic,filters:a.filters}];a.logic="and"}if(n.length>1){a.filters.push(e)}else{a.filters.push(n[0])}}else{a.filters=n;a.logic=i}}return a},filter:function(e){var t=this._stripFilters(e.filters);if(t.length&&this.trigger("change",{filter:{logic:e.logic,filters:t},field:this.field})){return}e=this._merge(e);if(e.filters.length){this.dataSource.filter(e)}},clear:function(e){var t=this;e=e||t.dataSource.filter()||{filters:[]};if(this.trigger("change",{filter:null,field:t.field})){return}t._removeFilter(e)},_mobileClear:function(){var e=this;var t=e.view.element;if(e.type==="boolean"){var i=t.find("[type='radio']:checked");var n=i.val();i.val("");i.trigger("change");i.val(n);i.prop("checked",false)}else{var r=t.find("select");r.each(function(e,t){var i=l(t);i.val(i.find("option:first").val());i.trigger("change")});if(e.type==="string"||e.type==="date"||e.type==="number"){var a=t.find(".k-value-input");a.each(function(e,t){var i=l(t);i.val("");i.trigger("change")})}if(e.options.extra){var o=t.find("[name=logic]").first();o.prop("checked",true);o.trigger("change")}}},_removeFilter:function(e){var t=this;e.filters=l.grep(e.filters,function(e){if(e.filters){e.filters=D(e.filters,t.field);return e.filters.length}return e.field!=t.field});if(!e.filters.length){e=null}t.dataSource.filter(e)},_submit:function(e){e.preventDefault();e.stopPropagation();var t=this.filterModel.toJSON();var i=l.grep(t.filters,function(e){return e.value!==""&&e.value!==null});if(this._checkForNullOrEmptyFilter(t)||i&&i.length){this.filter(t)}else{var n=this.dataSource.filter();if(n){n.filters.push(t);t=n}this.clear(t)}this._closeForm()},_checkForNullOrEmptyFilter:function(e){if(!e||!e.filters||!e.filters.length){return false}var t=false;var i=false;var n;if(e.filters[0]){n=e.filters[0].operator;t=n=="isnull"||n=="isnotnull"||n=="isnotempty"||n=="isempty"||n=="isnullorempty"||n=="isnotnullorempty"}if(e.filters[1]){n=e.filters[1].operator;i=n=="isnull"||n=="isnotnull"||n=="isnotempty"||n=="isempty"||n=="isnullorempty"||n=="isnotnullorempty"}return!this.options.extra&&t||this.options.extra&&(t||i)},_reset:function(){this.clear();if(this.options.search&&this.container){this.container.find("label").parent().show()}this._closeForm()},_closeForm:function(){if(this._isMobile){this.pane.navigate("",this.options.animations.right)}else{this.popup.close()}},_click:function(e){e.preventDefault();e.stopPropagation();if(!this.popup&&!this.pane){this._init()}if(this._isMobile){this.pane.navigate(this.view,this.options.animations.left)}else{this.popup.toggle()}},_open:function(){var e;l(".k-filter-menu").not(this.form).each(function(){e=l(this).data(a);if(e){e.close()}})},_activate:function(){this.form.find(":kendoFocusable:first").focus();this.trigger(n,{field:this.field,container:this.form})},_keydown:function(e){if(e.keyCode==u.keys.ESC){this.popup.close()}},events:[r,"change",n],options:{name:"FilterMenu",extra:true,appendToElement:false,type:"string",operators:{string:{eq:s,neq:p,startswith:"Starts with",contains:"Contains",doesnotcontain:"Does not contain",endswith:"Ends with",isnull:"Is null",isnotnull:"Is not null",isempty:"Is empty",isnotempty:"Is not empty",isnullorempty:"Has no value",isnotnullorempty:"Has value"},number:{eq:s,neq:p,gte:"Is greater than or equal to",gt:"Is greater than",lte:"Is less than or equal to",lt:"Is less than",isnull:"Is null",isnotnull:"Is not null"},date:{eq:s,neq:p,gte:"Is after or equal to",gt:"Is after",lte:"Is before or equal to",lt:"Is before",isnull:"Is null",isnotnull:"Is not null"},enums:{eq:s,neq:p,isnull:"Is null",isnotnull:"Is not null"}},messages:{info:"Show items with value that:",title:"Show items with value that:",isTrue:"is true",isFalse:"is false",filter:"Filter",clear:"Clear",and:"And",or:"Or",selectValue:"-Select value-",operator:"Operator",value:"Value",additionalValue:"Additional value",additionalOperator:"Additional operator",logic:"Filters logic",cancel:"Cancel",done:"Done",into:"in"},animations:{left:"slide",right:"slide:right"},componentType:"classic",cycleForm:true}});var E=".kendoFilterMultiCheck";function I(e,t){if(e.filters){e.filters=l.grep(e.filters,function(e){I(e,t);if(e.filters){return e.filters.length}else{return e.field==t&&e.operator=="eq"}})}}function M(e){if(e.logic=="and"&&e.filters.length>1){return[]}if(e.filters){return l.map(e.filters,function(e){return M(e)})}else if(e.value!==d){return[e.value]}else{return[]}}function R(e,t){var i=u.getter(t,true),n=[],r=0,a={};while(r<e.length){var o=e[r++],s=i(o);if(s!==d&&!a.hasOwnProperty(s)){n.push(o);a[s]=true}}return n}function F(i,n){return function(e){var t=i(e);return R(t,n)}}var P=u.data.DataSource;var B='<div data-#=ns#role="view" class="k-grid-filter-menu">'+'<div data-#=ns#role="header" class="k-header">'+'<a href="\\#" class="k-header-cancel k-link" title="#=messages.cancel#" '+'aria-label="#=messages.cancel#"><span class="k-icon k-i-arrow-chevron-left"></span></a>'+"#=messages.filter# #=messages.into# #=title#"+'<a href="\\#" class="k-header-done k-link" title="#=messages.done#" '+'aria-label="#=messages.done#"><span class="k-icon k-i-check"></span></a>'+"</div>"+'<form class="k-filter-menu">'+'<ul class="k-reset">'+"#if(search){#"+'<li class="k-textbox k-space-right">'+'<input placeholder="#=messages.search#" title="#=messages.search#" autocomplete="'+i+'"  />'+'<span class="k-icon k-i-zoom"></span>'+"</li>"+"#}#"+'<li class="k-filter-tools">'+'<span style="#=checkAll ? "" : "visibility: hidden;" #" class="k-label k-select-all" title="#=messages.checkAll#" '+'aria-label="#=messages.checkAll#">#=messages.checkAll#</span>'+'<span class="k-label k-clear-all" title="#=messages.clearAll#" '+'aria-label="#=messages.clearAll#">#=messages.clearAll#</span>'+"</li>"+"#if(messages.selectedItemsFormat){#"+"<li>"+'<div class="k-filter-selected-items"></div>'+"</li>"+"#}#"+"<li>"+'<ul class="k-multicheck-wrap k-listgroup k-listgroup-flush"></ul>'+"</li>"+"</ul>"+"</form>"+"</div>";var z=_.extend({init:function(e,t){_.fn.init.call(this,e,t);t=this.options;this.element=l(e);var i=this.field=this.options.field||this.element.attr(u.attr("field"));var n=t.checkSource;if(this._foreignKeyValues()){this.checkSource=P.create(t.values);this.checkSource.fetch()}else if(t.forceUnique){n=l.extend(true,{},t.dataSource.options);delete n.pageSize;this.checkSource=P.create(n);this.checkSource.reader.data=F(this.checkSource.reader.data,this.field)}else{this.checkSource=P.create(n)}this.dataSource=t.dataSource;this.model=this.dataSource.reader.model;this._parse=function(e){return e+""};if(this.model&&this.model.fields){i=this.model.fields[this.field];if(i){if(i.type=="number"){this._parse=function(e){if(typeof e==="string"&&(e.toLowerCase()==="null"||this._foreignKeyValues()&&e==="")){return null}return parseFloat(e)}}else if(i.parse){this._parse=c(i.parse,i)}this.type=i.type||"string"}}if(!t.appendToElement){this._createLink()}else{this._init()}this._refreshHandler=c(this.refresh,this);this.dataSource.bind(f,this._refreshHandler)},_createLink:function(){var e=this.element;var t=e.addClass("k-with-icon k-filterable").find(".k-grid-filter");if(!t[0]){t=e.prepend('<a class="k-grid-filter" href="#" title="'+this.options.messages.filter+'" aria-label="'+this.options.messages.filter+'"><span class="k-icon k-i-filter"></span></a>').find(".k-grid-filter")}this._link=t.attr("tabindex",-1).on("click"+h,c(this._click,this))},_init:function(){var e=this;var t=this.options.forceUnique;var i=this.options;this.pane=i.pane;if(this.pane){this._isMobile=true}this._createForm();if(this._foreignKeyValues()){this.refresh()}else if(t&&!this.checkSource.options.serverPaging&&this.dataSource.data().length){this.checkSource.data(R(this.dataSource.data(),this.field));this.refresh()}else{this._attachProgress();this.checkSource.fetch(function(){e.refresh.call(e)})}if(!this.options.forceUnique){this.checkChangeHandler=function(){e.container.empty();e.refresh()};this.checkSource.bind(f,this.checkChangeHandler)}this.form.on("keydown"+E,c(this._keydown,this)).on("submit"+E,c(this._filter,this)).on("reset"+E,c(this._reset,this));this.trigger(r,{field:this.field,container:this.form})},_attachProgress:function(){var e=this;this._progressHandler=function(){t.progress(e.container,true)};this._progressHideHandler=function(){t.progress(e.container,false)};this.checkSource.bind("progress",this._progressHandler).bind("change",this._progressHideHandler)},_input:function(){var e=this;e._clearTypingTimeout();e._typingTimeout=setTimeout(function(){e.search()},100)},_clearTypingTimeout:function(){if(this._typingTimeout){clearTimeout(this._typingTimeout);this._typingTimeout=null}},search:function(){var e=this.options.ignoreCase;var t=this.searchTextBox[0].value;var i=this.container.find("label");if(e){t=t.toLowerCase()}var n=0;if(this.options.checkAll&&i.length){if(!this._isMobile){i[0].parentNode.style.display=t?"none":"";n++}else{this.view.element.find(".k-select-all")[0].style.visibility=t?"hidden":""}}while(n<i.length){var r=i[n];var a=r.textContent||r.innerText;if(e){a=a.toLowerCase()}r.parentNode.style.display=a.indexOf(t)>=0?"":"none";n++}},_activate:function(){this.form.find(":kendoFocusable:first").focus();this.trigger(n,{field:this.field,container:this.form})},_createForm:function(){var e=this.options;var t="";var i=this;if(!this._isMobile){t+="<div class='k-filter-menu-container'>";if(e.search){t+="<div class='k-textbox k-space-right'>"+"<input placeholder='"+e.messages.search+"'/>"+"<span class='k-icon k-i-zoom'></span>"+"</div>"}t+="<ul class='k-reset k-multicheck-wrap'></ul>";if(e.messages.selectedItemsFormat){t+="<div class='k-filter-selected-items'>"+u.format(e.messages.selectedItemsFormat,0)+"</div>"}t+="<div class='k-action-buttons'>";t+="<button type='submit' class='k-button k-primary'>"+e.messages.filter+"</button>";t+="<button type='reset' class='k-button'>"+e.messages.clear+"</button>";t+="</div>";t+="</div>";this.form=l('<form class="k-filter-menu"/>').html(t);this.container=this.form.find(".k-multicheck-wrap")}if(this._isMobile){i.form=l("<div />").html(u.template(B)({field:i.field,title:e.title||i.field,ns:u.ns,messages:e.messages,search:e.search,checkAll:e.checkAll}));i.view=i.pane.append(i.form.html());i.form=i.view.element.find("form");var n=this.view.element;this.container=n.find(".k-multicheck-wrap");n.on("click",".k-header-done",function(e){i.form.submit();e.preventDefault()}).on("click",".k-header-cancel",function(e){i._closeForm();e.preventDefault()}).on("click",".k-clear-all",function(e){i._mobileCheckAll(false);e.preventDefault()}).on("click",".k-select-all",function(e){i._mobileCheckAll(true);e.preventDefault()});i.view.bind("showStart",function(){i.refresh()})}else{if(!e.appendToElement){i.popup=i.form.kendoPopup({anchor:i._link,copyAnchorStyles:false,open:c(i._open,i),activate:c(i._activate,i),close:function(){if(i.options.closeCallback){i.options.closeCallback(i.element)}}}).data(a)}else{this.popup=this.element.closest(".k-popup").data(a);this.element.append(this.form)}}if(e.search){this.searchTextBox=this.form.find(".k-textbox > input");this.searchTextBox.on("input",c(this._input,this))}},createCheckAllItem:function(){var e=this.options;var t=u.template(e.itemTemplate({field:"all",mobile:this._isMobile}));var i=l(t({all:e.messages.checkAll}));this.container.prepend(i);this.checkBoxAll=i.find(":checkbox").eq(0).addClass("k-check-all");this.checkAllHandler=c(this.checkAll,this);this.checkBoxAll.on(f+E,this.checkAllHandler)},updateCheckAllState:function(){if(this.options.messages.selectedItemsFormat){this.form.find(".k-filter-selected-items").text(u.format(this.options.messages.selectedItemsFormat,this.container.find(":checked:not(.k-check-all)").length))}if(this.checkBoxAll){var e=this.container.find(":checkbox:not(.k-check-all)").length==this.container.find(":checked:not(.k-check-all)").length;this.checkBoxAll.prop("checked",e)}},refresh:function(e){var t=this.options.forceUnique;var i=this.dataSource;var n=this.getFilterArray();if(this._link){this._link.toggleClass("k-state-active",n.length!==0)}if(this.form){if(e&&t&&e.sender===i&&!i.options.serverPaging&&(e.action=="itemchange"||e.action=="add"||e.action=="remove"||i.options.autoSync&&e.action==="sync")&&!this._foreignKeyValues()){this.checkSource.data(R(this.dataSource.data(),this.field));this.container.empty()}if(this.container.is(":empty")){this.createCheckBoxes()}this.checkValues(n);this.trigger(o)}},getFilterArray:function(){var e=l.extend(true,{},{filters:[],logic:"and"},this.dataSource.filter());I(e,this.field);var t=M(e);return t},createCheckBoxes:function(){var e=this.options;var t;var i={field:this.field,format:e.format,mobile:this._isMobile,type:this.type};if(!this.options.forceUnique){t=this.checkSource.view()}else if(this._foreignKeyValues()){t=this.checkSource.data();i.valueField="value";i.field="text"}else if(this.checkSource._isServerGrouped()){t=R(this.checkSource._flatData(this.checkSource.data()),this.field)}else{t=this.checkSource.data()}var n=u.template(e.itemTemplate(i));var r=u.render(n,t);if(e.checkAll&&!this._isMobile){this.createCheckAllItem()}this.container.on(f+E,":checkbox",c(this.updateCheckAllState,this));this.container.append(r)},checkAll:function(){var e=this.checkBoxAll.is(":checked");this.container.find(":checkbox").prop("checked",e)},checkValues:function(r){var a=this;l(l.grep(this.container.find(":checkbox").prop("checked",false),function(e){var t=false;if(l(e).is(".k-check-all")){return}var i=a._parse(l(e).val());for(var n=0;n<r.length;n++){if(a.type=="date"){if(r[n]&&i){t=r[n].getTime()==i.getTime()}else if(r[n]===null&&i===null){t=true}else{t=false}}else{t=r[n]==i}if(t){return t}}})).prop("checked",true);this.updateCheckAllState()},_mobileCheckAll:function(n){var e=this;var t=e.container.find(":checkbox");t.each(function(e,t){var i=l(t);i.prop("checked",n);i.trigger("change")})},_filter:function(e){e.preventDefault();e.stopPropagation();var t={logic:"or"};var i=this;t.filters=l.map(this.form.find(":checkbox:checked:not(.k-check-all)"),function(e){return{value:l(e).val(),operator:"eq",field:i.field}});if(this.trigger("change",{filter:t,field:i.field})){return}t=this._merge(t);if(t.filters.length){this.dataSource.filter(t)}else{i._removeFilter(i.dataSource.filter()||{filters:[]})}this._closeForm()},_stripFilters:function(e){return l.grep(e,function(e){return e.value!=null})},_foreignKeyValues:function(){var e=this.options;return e.values&&!e.checkSource},destroy:function(){var e=this;_.fn.destroy.call(e);if(e.form){u.unbind(e.form);u.destroy(e.form);e.form.unbind(E);if(e.popup){e.popup.destroy();e.popup=null}e.form=null;if(e.container){e.container.unbind(E);e.container=null}if(e.checkBoxAll){e.checkBoxAll.unbind(E)}}if(e.view){e.view.purge();e.view=null}if(e._link){e._link.unbind(h)}if(e._refreshHandler){e.dataSource.unbind(f,e._refreshHandler);e.dataSource=null}if(e.checkChangeHandler){e.checkSource.unbind(f,e.checkChangeHandler)}if(e._progressHandler){e.checkSource.unbind("progress",e._progressHandler)}if(e._progressHideHandler){e.checkSource.unbind("change",e._progressHideHandler)}this._clearTypingTimeout();this.searchTextBox=null;e.element=e.checkSource=e.container=e.checkBoxAll=e._link=e._refreshHandler=e.checkAllHandler=null},options:{name:"FilterMultiCheck",itemTemplate:function(e){var t=e.field;var i=e.format;var n=e.valueField;var r=e.mobile;var a="";if(n===d){n=t}if(e.type=="date"){a=":yyyy-MM-ddTHH:mm:sszzz"}if(r){return"<li class='k-item k-listgroup-item'>"+"<label class='k-label k-listgroup-form-row'>"+"<span class='k-listgroup-form-field-label k-item-title '>#:kendo.format('"+(i?i:"{0}")+"', "+t+")#</span>"+'<span class="k-listgroup-form-field-wrapper">'+"<input type='checkbox' value='#:kendo.format('{0"+a+"}',"+n+")#'/>"+"</span>"+"</label>"+"</li>"}return"<li class='k-item'>"+"<label class='k-label'>"+"<input type='checkbox' value='#:kendo.format('{0"+a+"}',"+n+")#'/>"+"<span>#:kendo.format('"+(i?i:"{0}")+"', "+t+")#</span>"+"</label>"+"</li>"},checkAll:true,search:false,ignoreCase:true,appendToElement:false,messages:{checkAll:"Select All",clearAll:"Clear All",clear:"Clear",filter:"Filter",search:"Search",cancel:"Cancel",selectedItemsFormat:"{0} items selected",done:"Done",into:"in"},forceUnique:true,animations:{left:"slide",right:"slide:right"}},events:[r,o,"change",n]});l.extend(z.fn,{_click:A.fn._click,_keydown:A.fn._keydown,_reset:A.fn._reset,_closeForm:A.fn._closeForm,_removeFilter:A.fn._removeFilter,clear:A.fn.clear,_merge:A.fn._merge});t.plugin(A);t.plugin(z)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.menu",["kendo.popup","kendo.data"],e)})(function(){var e={id:"menu",name:"Menu",category:"web",description:"The Menu widget displays hierarchical data as a multi-level menu.",depends:["popup","data","data.odata"]};(function(x,_){var C=window.kendo,e=C.ui,N=C._activeElement,b=C.support.touch&&C.support.mobileOS,O=x.isArray,V=C.data.HierarchicalDataSource,r="mousedown",W="click",U=30,j=50,w=x.extend,k=x.proxy,G=x.each,n=C.template,l=C.keys,q=e.Widget,i=/^(ul|a|div)$/i,g=".kendoMenu",$="img",S="open",y="k-menu",K="k-link k-menu-link",Y=".k-link",Q=".k-menu-expand-arrow",t="k-last",T="close",s="timer",X="k-first",Z="k-image",d="select",D="zIndex",J="activate",ee="deactivate",te="touchstart"+g+" MSPointerDown"+g+" pointerdown"+g,ie=C.support.pointers,ne=C.support.msPointers,re=ne||ie,ae="change",oe="error",se=C.support.touch?"touchstart":"",A=ie?"pointerover":ne?"MSPointerOver":"mouseenter",E=ie?"pointerout":ne?"MSPointerOut":"mouseleave",le="DOMMouseScroll"+g+" mousewheel"+g,de=C.support.resize+g,ue="scrollWidth",ce="scrollHeight",fe="offsetWidth",he="offsetHeight",I="group",M="groupparent",pe=x(document.documentElement),R="kendoPopup",ve="k-state-default",me="k-state-hover",o="k-state-focused",F="k-state-disabled",ge="k-state-selected",_e=".k-menu",be=".k-menu-group",h=".k-animation-container",we=be+","+h,P=":not(.k-list) > .k-item",ke=".k-item.k-state-disabled",u=".k-item",ye=".k-item:not(.k-state-disabled)",xe=".k-item:not(.k-state-disabled) > .k-link",Ce=":not(.k-item.k-separator)",c=u+Ce+":eq(0)",Se=u+Ce+":last",Te="div:not(.k-animation-container,.k-list-container)",z=".k-menu-scroll-button",De={2:1,touch:1},Ae="string",Ee="dataBound",Ie={text:"dataTextField",url:"dataUrlField",spriteCssClass:"dataSpriteCssClassField",imageUrl:"dataImageUrlField",imageAttr:"dataImageAttrField",content:"dataContentField"},Me={wrapperCssClass:function(e,t){var i="k-item k-menu-item",n=t.index;if(t.enabled===false){i+=" k-state-disabled"}else{i+=" k-state-default"}if(e.firstLevel&&n===0){i+=" k-first"}if(n==e.length-1){i+=" k-last"}if(t.cssClass){i+=" "+t.cssClass}if(t.attr&&t.attr.hasOwnProperty("class")){i+=" "+t.attr["class"]}if(t.selected){i+=" "+ge}return i},itemCssAttributes:function(e){var t="";var i=e.attr||{};for(var n in i){if(i.hasOwnProperty(n)&&n!=="class"){t+=n+'="'+i[n]+'" '}}return t},imageCssAttributes:function(e){var t="";var i=e&&e.toJSON?e.toJSON():{};if(!i["class"]){i["class"]=Z}else{i["class"]+=" "+Z}for(var n in i){if(i.hasOwnProperty(n)){t+=n+'="'+i[n]+'" '}}return t},contentCssAttributes:function(e){var t="";var i=e.contentAttr||{};var n="k-content k-group k-menu-group";if(!i["class"]){i["class"]=n}else{i["class"]+=" "+n}for(var r in i){if(i.hasOwnProperty(r)){t+=r+'="'+i[r]+'" '}}return t},textClass:function(){return K},arrowClass:function(e,t){var i="k-menu-expand-arrow k-icon";if(t.horizontal){i+=" k-i-arrow-60-down"}else{i+=" k-i-arrow-60-right"}return i},groupAttributes:function(e){return e.expanded!==true?" style='display:none'":""},groupCssClass:function(){return"k-group k-menu-group"},content:function(e){return e.content?e.content:"&nbsp;"}};function Re(e,t){e=e.split(" ")[!t+0]||e;return e.replace("top","up").replace("bottom","down")}function Fe(e,t,i){e=e.split(" ")[!t+0]||e;var n={origin:["bottom",i?"right":"left"],position:["top",i?"right":"left"]},r=/left|right/.test(e);if(r){n.origin=["top",e];n.position[1]=C.directions[e].reverse}else{n.origin[0]=e;n.position[0]=C.directions[e].reverse}n.origin=n.origin.join(" ");n.position=n.position.join(" ");return n}function f(e,t){try{return x.contains(e,t)}catch(e){return false}}function Pe(e){e=x(e);var t=e.attr(C.attr("omit-wrap"));if(t){return}e.addClass("k-item k-menu-item").children($).addClass(Z);e.children("a").addClass(K).children($).addClass(Z);e.filter(":not([disabled])").addClass(ve);e.filter(".k-separator").removeClass("k-menu-item").addClass("k-menu-separator").empty().append("&nbsp;");e.filter("li[disabled]").addClass(F).removeAttr("disabled").attr("aria-disabled",true);if(!e.filter("[role]").length){e.attr("role","menuitem")}if(!e.children(Y).length){e.contents().filter(function(){return!this.nodeName.match(i)&&!(this.nodeType==3&&!C.trim(this.nodeValue))}).wrapAll("<span class='"+K+"'/>")}p(e);v(e)}function p(e){e=x(e);e.find("> .k-link > [class*=k-i-arrow-60]:not(.k-sprite)").remove();e.filter(":has(.k-menu-group)").children(".k-link:not(:has([class*=k-i-arrow]:not(.k-sprite)))").each(function(){var e=x(this),t=ze(e);e.append("<span class='k-menu-expand-arrow k-icon "+t+"' />")})}function ze(e){var t,i=e.parent().parent(),n=C.support.isRtl(i);if(i.hasClass(y+"-horizontal")){t="k-i-arrow-60-down"}else{if(n){t="k-i-arrow-60-left"}else{t="k-i-arrow-60-right"}}return t}function v(e){e=x(e);e.filter(".k-first:not(:first-child)").removeClass(X);e.filter(".k-last:not(:last-child)").removeClass(t);e.filter(":first-child").addClass(X);e.filter(":last-child").addClass(t)}function Be(e){if(e&&e.length){for(var t in e){var i=e.eq(t);if(i.find("ul").length){i.attr("aria-haspopup",true)}else{i.removeAttr("aria-haspopup")}}}}function Le(e){if(!e.hasClass(y)){return e.parentsUntil("."+y,"li")}}function He(e,t){var i=Oe(t);if(i){Ne(e,i)}if(t.items){x(e).children("ul").children("li").each(function(e){He(this,t.items[e])})}}function Ne(e,t){x(e).children(".k-link").data({selectHandler:t})}function Oe(e){var t=e.select,i=C.isFunction;if(t&&i(t)){return t}return null}function B(e){return e?"li[data-groupparent='"+e+"']":"li[data-groupparent]"}function L(e){var t=e?"[data-group='"+e+"']":"[data-group]";return"ul"+t+",div"+t}function m(r,a){var e=r.find(B());var o=[];e.each(function(e,t){t=x(t);var i=t.data(M);var n=r;while(i){n=a.find(L(i)+":visible");if(n.length){o.push(n)}t=n.find(B());i=t.data(M)}});return o}function Ve(e,t){var i=e.data(I);return i?t.find(B(i)):x([])}function We(e,t){var i=e.data(M);return i?t.children(h).children(L(i)):x([])}function Ue(e,t){var i=[];var n=function(e){while(e.parentNode&&!t.is(e.parentNode)){i.push(e.parentNode);e=e.parentNode}};var r=e[0]||e;n(r);var a=i[i.length-1];while(x(a).is(h)){var o=x(a).children("ul");r=Ve(o,t)[0];if(!r){break}i.push(r);n(r);a=i[i.length-1]}return i}function je(e){var t=0;if(e.wheelDelta){t=-e.wheelDelta/120;t=t>0?Math.ceil(t):Math.floor(t)}if(e.detail){t=Math.round(e.detail/3)}return t}function Ge(e,t){var i=0;var n=e.parentNode;while(n&&!isNaN(n[t])){i+=n[t];n=n.parentNode}return i}function H(e){return re&&e.originalEvent&&e.originalEvent.pointerType in De}function qe(e){var t=e.originalEvent;return b&&/touch/i.test(t.type||"")}function $e(e){e.contents().filter(function(){return this.nodeName!="LI"}).remove()}var a=C.ui.DataBoundWidget.extend({init:function(e,t){var i=this;q.fn.init.call(i,e,t);e=i.wrapper=i.element;t=i.options;i._accessors();i._templates();i._dataSource();i._updateClasses();i._animations(t);i.nextItemZIndex=100;i._tabindex();i._initOverflow(t);i._attachMenuEventsHandlers();if(t.openOnClick){i.clicked=false}e.attr("role","menubar");if(e[0].id){i._ariaId=C.format("{0}_mn_active",e[0].id)}C.notify(i)},events:[S,T,J,ee,d,Ee],options:{name:"Menu",animation:{open:{duration:200},close:{duration:100}},orientation:"horizontal",direction:"default",openOnClick:false,closeOnClick:true,hoverDelay:100,scrollable:false,popupCollision:_},_initData:function(){var e=this;if(e.dataSource){e.angular("cleanup",function(){return{elements:e.element.children()}});e.element.empty();e.append(e.dataSource.view(),e.element);e.angular("compile",function(){return{elements:e.element.children()}})}},_attachMenuEventsHandlers:function(){var e=this;var t=e.element;var i=e.options;var n=e._overflowWrapper();(n||t).on(te,u,k(e._focusHandler,e)).on(W+g,ke,false).on(W+g,u,k(e._click,e)).on(te+" "+r+g,".k-content",k(e._preventClose,e)).on(A+g,ye,k(e._mouseenter,e)).on(E+g,ye,k(e._mouseleave,e)).on(r+g,ye,k(e._mousedown,e)).on(se+g+" "+A+g+" "+E+g+" "+r+g+" "+W+g,xe,k(e._toggleHover,e));t.on("keydown"+g,k(e._keydown,e)).on("focus"+g,k(e._focus,e)).on("focus"+g,".k-content",k(e._focus,e)).on("blur"+g,k(e._removeHoverItem,e)).on("blur"+g,"[tabindex]",k(e._checkActiveElement,e));if(n){n.on(E+g,we,k(e._mouseleavePopup,e)).on(A+g,we,k(e._mouseenterPopup,e))}if(i.openOnClick){e._documentClickHandler=k(e._documentClick,e);x(document).click(e._documentClickHandler)}},_detachMenuEventsHandlers:function(){var e=this;var t=e._overflowWrapper();if(t){t.off(g)}e.element.off(g);if(e._documentClickHandler){x(document).unbind("click",e._documentClickHandler)}},_initOverflow:function(e){var t=this;var i=e.orientation=="horizontal";var n,r;if(e.scrollable){t._openedPopups={};t._scrollWrapper=t.element.wrap("<div class='k-menu-scroll-wrapper "+e.orientation+"'></div>").parent();if(i){$e(t.element)}n=x(t.templates.scrollButton({direction:i?"left":"up"}));r=x(t.templates.scrollButton({direction:i?"right":"down"}));n.add(r).appendTo(t._scrollWrapper);t._initScrolling(t.element,n,r,i);var a=t.element.outerWidth();var o=t.element[0].style.width;o=o==="auto"?"":o;if(i){x(window).on(de,C.throttle(function(){t._setOverflowWrapperWidth(a,o);t._toggleScrollButtons(t.element,n,r,i)},100))}t._setOverflowWrapperWidth(a,o);t._toggleScrollButtons(t.element,n,r,i)}},_overflowWrapper:function(){return this._scrollWrapper||this._popupsWrapper},_setOverflowWrapperWidth:function(e,t){var i=this;var n=i._scrollWrapper.css("width");i._scrollWrapper.css({width:""});var r=i._scrollWrapper.outerWidth();i._scrollWrapper.css({width:n});var a=i.element.outerWidth();var o=i.element[0].offsetWidth-i.element[0].clientWidth;if(a!=r&&r>0){var s=t?Math.min(e,r):r;i.element.width(s-o);i._scrollWrapper.width(s)}},_reinitOverflow:function(e){var t=this;var i=e.scrollable&&!t.options.scrollable||!e.scrollable&&t.options.scrollable||e.scrollable&&t.options.scrollable&&e.scrollable.distance!=t.options.scrollable.distance||e.orientation!=t.options.orientation;if(i){t._detachMenuEventsHandlers();t._destroyOverflow();t._initOverflow(e);t._attachMenuEventsHandlers()}},_destroyOverflow:function(){var e=this;var r=e._overflowWrapper();if(r){r.off(g);r.find(z).off(g).remove();r.children(h).each(function(e,t){var i=x(t).children(be);i.off(le);var n=Ve(i,r);if(n.length){n.append(t)}});r.find(B()).removeAttr("data-groupparent");r.find(L()).removeAttr("data-group");e.element.off(le);x(window).off(de);r.contents().unwrap();e._scrollWrapper=e._popupsWrapper=e._openedPopups=_}},_initScrolling:function(a,o,s,l){var d=this;var e=d.options.scrollable;var t=x.isNumeric(e.distance)?e.distance:j;var u=t/2;var i="-="+t;var n="+="+t;var r="-="+t*2;var c="+="+t*2;var f=false;var h=false;var p=function(e){var t=l?{scrollLeft:e}:{scrollTop:e};a.finish().animate(t,"fast","linear",function(){if(f){p(e)}});d._toggleScrollButtons(a,o,s,l)};var v=function(e){if(!f&&!h){p(e.data.direction);f=true}};var m=function(e){var t=l?{scrollLeft:e.data.direction}:{scrollTop:e.data.direction};h=qe(e)||H(e);a.stop().animate(t,"fast","linear",function(){if(!h){x(e.currentTarget).trigger(A)}else{d._toggleScrollButtons(a,o,s,l);f=true}});f=false;e.stopPropagation();e.preventDefault()};o.on(A+g,{direction:i},v).on(C.eventMap.down+g,{direction:r},m);s.on(A+g,{direction:n},v).on(C.eventMap.down+g,{direction:c},m);o.add(s).on(E+g,function(){a.stop();f=false;d._toggleScrollButtons(a,o,s,l)});a.on(le,function(e){if(!e.ctrlKey&&!e.shiftKey&&!e.altKey){var t=je(e.originalEvent);var i=Math.abs(t)*u;var n=(t>0?"+=":"-=")+i;var r=l?{scrollLeft:n}:{scrollTop:n};d._closeChildPopups(a);a.finish().animate(r,"fast","linear",function(){d._toggleScrollButtons(a,o,s,l)});e.preventDefault()}})},_toggleScrollButtons:function(e,t,i,n){var r=n?C.scrollLeft(e):e.scrollTop();var a=n?ue:ce;var o=n?fe:he;t.toggle(r!==0);i.toggle(r<e[0][a]-e[0][o]-1)},setOptions:function(e){var t=this.options.animation;this._animations(e);e.animation=w(true,t,e.animation);if("dataSource"in e){this._dataSource(e)}this._updateClasses();this._reinitOverflow(e);q.fn.setOptions.call(this,e)},destroy:function(){var e=this;q.fn.destroy.call(e);e._detachMenuEventsHandlers();e._destroyOverflow();C.destroy(e.element)},enable:function(e,t){this._toggleDisabled(e,t!==false);return this},disable:function(e){this._toggleDisabled(e,false);return this},attemptGetItem:function(e){e=e||this.element;var t=this.element.find(e);var i=this._overflowWrapper();if(t.length||e===this.element){return t}else if(i){return i.find(e)}else{return x()}},append:function(t,e){e=this.attemptGetItem(e);var i=this._insert(t,e,e.length?this._childPopupElement(e):null);G(i.items,function(e){i.group.append(this);p(this);He(this,t[e]||t)});p(e);v(i.group.find(".k-first, .k-last").add(i.items));Be(Le(i.group));return this},insertBefore:function(t,i){i=this.attemptGetItem(i);var e=this._insert(t,i,i.parent());G(e.items,function(e){i.before(this);p(this);v(this);He(this,t[e]||t)});v(i);return this},insertAfter:function(t,i){i=this.attemptGetItem(i);var e=this._insert(t,i,i.parent());G(e.items,function(e){i.after(this);p(this);v(this);He(this,t[e]||t)});v(i);return this},_insert:function(e,t,i){var n=this,r,a;if(!t||!t.length){i=n.element}var o=x.isPlainObject(e)||e instanceof C.data.ObservableObject,s={firstLevel:i.hasClass(y),horizontal:i.hasClass(y+"-horizontal"),expanded:true,length:i.children().length};if(t&&!i.length){i=x(n.renderGroup({group:s,options:n.options})).appendTo(t)}if(o||O(e)||e instanceof C.data.ObservableArray){r=x(x.map(o?[e]:e,function(e,t){if(typeof e==="string"){return x(e).get()}else{return x(n.renderItem({group:s,item:w(e,{index:t})})).get()}}))}else{if(typeof e=="string"&&e.charAt(0)!="<"){r=n.element.find(e)}else{r=x(e)}a=r.find("> ul").addClass("k-menu-group").attr("role","menu");r=r.filter("li");r.add(a.find("> li")).each(function(){Pe(this)})}return{items:r,group:i}},remove:function(e){e=this.attemptGetItem(e);var t=this,i=e.parentsUntil(t.element,P),n=e.parent("ul:not(.k-menu)");e.remove();if(n&&!n.children(P).length){var r=Le(n);var a=n.parent(h);if(a.length){a.remove()}else{n.remove()}Be(r)}if(i.length){i=i.eq(0);p(i);v(i)}return t},_openAfterLoad:function(e,t){var i=this;if(t.loaded()){i.open(e);i._loading=false}else{t.one(ae,function(){e.find(Q).removeClass("k-i-loading");if(i._loading){i.open(e);i._loading=false}})}},open:function(e){var f=this;var h=f.options;var p=h.orientation=="horizontal";var v=h.direction;var m=C.support.isRtl(f.wrapper);var g=f._overflowWrapper();e=(g||f.element).find(e);var t=f.dataSource&&f.dataSource.getByUid(e.data(C.ns+"uid"));if(t&&t.hasChildren&&!t.loaded()&&!f._loading){f._loading=true;e.find(Q).addClass("k-i-loading");t.load();f._openAfterLoad(e,t);return}if(/^(top|bottom|default)$/.test(v)){if(m){v=p?(v+" left").replace("default","bottom"):"left"}else{v=p?(v+" right").replace("default","bottom"):"right"}}var i=">.k-popup:visible,>.k-animation-container>.k-popup:visible";var n=function(){var e=x(this).data(R);if(e){f.close(x(this).closest("li.k-item"),true)}};e.siblings().find(i).each(n);if(g){e.find(i).each(n)}if(f.options.openOnClick){f.clicked=true}e.each(function(){var c=x(this);clearTimeout(c.data(s));c.data(s,setTimeout(function(){var e=c.find(".k-menu-group:first:hidden");var t;var i;if(!e[0]&&g){i=f._getPopup(c);e=i&&i.element}if(e.is(":visible")){return}if(e[0]&&f._triggerEvent({item:c[0],type:S})===false){if(!e.find(".k-menu-group")[0]&&e.children(".k-item").length>1){var n=x(window).height(),r=function(){e.css({maxHeight:n-(C._outerHeight(e)-e.height())-C.getShadows(e).bottom,overflow:"auto"})};r()}else{e.css({maxHeight:"",overflow:""})}c.data(D,c.css(D));var a=f.nextItemZIndex++;c.css(D,a);if(f.options.scrollable){c.parent().siblings(z).css({zIndex:++a})}t=e.data(R);var o=c.parent().hasClass(y),s=o&&p,l=Fe(v,o,m),d=h.animation.open.effects,u=d!==_?d:"slideIn:"+Re(v,o);if(!t){t=e.kendoPopup({activate:function(){f._triggerEvent({item:this.wrapper.parent(),type:J})},deactivate:function(e){f._closing=false;e.sender.element.removeData("targetTransform").css({opacity:""});f._triggerEvent({item:this.wrapper.parent(),type:ee})},origin:l.origin,position:l.position,collision:h.popupCollision!==_?h.popupCollision:s?"fit":"fit flip",anchor:c,appendTo:g||c,animation:{open:w(true,{effects:u},h.animation.open),close:h.animation.close},open:k(f._popupOpen,f),close:function(e){f._closing=e.sender.element;var t=e.sender.wrapper.parent();if(g){var i=e.sender.element.data(I);if(i){t=(g||f.element).find(B(i))}e.sender.wrapper.children(z).hide()}if(!f._triggerEvent({item:t[0],type:T})){t.css(D,t.data(D));t.removeData(D);if(f.options.scrollable){t.parent().siblings(z).css({zIndex:""})}if(b||re||C.support.mouseAndTouchPresent){t.removeClass(me);f._removeHoverItem()}}else{e.preventDefault()}}}).data(R)}else{t=e.data(R);t.options.origin=l.origin;t.options.position=l.position;t.options.animation.open.effects=u}e.removeAttr("aria-hidden");f._configurePopupOverflow(t,c);t._hovered=true;t.open();f._initPopupScrolling(t)}},f.options.hoverDelay))});return f},_configurePopupOverflow:function(e,t){var i=this;if(i.options.scrollable){i._wrapPopupElement(e);if(!t.attr("data-groupparent")){var n=(new Date).getTime();t.attr("data-groupparent",n);e.element.attr("data-group",n)}}},_wrapPopupElement:function(e){if(!e.element.parent().is(h)){e.wrapper=C.wrap(e.element,e.options.autosize).css({overflow:"hidden",display:"block",position:"absolute"})}},_initPopupScrolling:function(e,t,i){var n=this;if(n.options.scrollable&&e.element[0].scrollHeight>e.element[0].offsetHeight){n._initPopupScrollButtons(e,t,i)}},_initPopupScrollButtons:function(i,n,r){var a=this;var o=i.wrapper.children(z);var e=a.options.animation;var t=(e&&e.open&&e.open.duration||0)+U;setTimeout(function(){if(!o.length){var e=x(a.templates.scrollButton({direction:n?"left":"up"}));var t=x(a.templates.scrollButton({direction:n?"right":"down"}));o=e.add(t).appendTo(i.wrapper);a._initScrolling(i.element,e,t,n);if(!r){o.on(A+g,function(){var n=a._overflowWrapper();x(m(i.element,n)).each(function(e,t){var i=n.find(B(t.data(I)));a.close(i)})}).on(E+g,function(){setTimeout(function(){if(x.isEmptyObject(a._openedPopups)){a._closeParentPopups(i.element)}},U)})}}a._toggleScrollButtons(i.element,o.first(),o.last(),n)},t)},_popupOpen:function(e){if(!this._keyTriggered){e.sender.element.children("."+o).removeClass(o)}if(this.options.scrollable){this._setPopupHeight(e.sender)}},_setPopupHeight:function(e,t){var i=e.element;var n=i.add(i.parent(h));n.height(i.hasClass(y)&&this._initialHeight||"");var r=e._location(t);var a=x(window).height();var o=r.height;var s=t?0:Math.max(r.top,0);var l=t?0:Ge(this._overflowWrapper()[0],"scrollTop");var d=window.innerHeight-a;var u=a-C.getShadows(i).bottom+d;var c=u+l>o+s;if(!c){var f=Math.min(u,u-s+l);n.css({overflow:"hidden",height:f+"px"})}},close:function(i,e){var n=this;var r=n._overflowWrapper();var t=r||n.element;i=t.find(i);if(!i.length){i=t.find(">.k-item")}var a=function(e){var i=false;if(x.isEmptyObject(n._openedPopups)){return i}x(m(e,r)).each(function(e,t){i=!!n._openedPopups[t.data(I).toString()];return!i});return i};var o=function(e){var t=e.data(M);return!r||!t||!n._openedPopups[t.toString()]};i.each(function(){var t=x(this);if(!e&&n._isRootItem(t)){n.clicked=false}clearTimeout(t.data(s));t.data(s,setTimeout(function(){var e=n._getPopup(t);if(e&&(o(t)||n._forceClose)){if(!n._forceClose&&a(e.element)){return}e.close();e.element.attr("aria-hidden",true);if(r){if(n._forceClose&&i.last().is(t[0])){delete n._forceClose}}}},n.options.hoverDelay))});return n},_getPopup:function(e){var t=this;var i=e.find(".k-menu-group:not(.k-list-container):not(.k-calendar-container):first:visible").data(R);var n=t._overflowWrapper();if(!i&&n){var r=e.data(M);if(r){var a=n.find(L(r));i=a.data(R)}}return i},_toggleDisabled:function(e,t){this.element.find(e).each(function(){x(this).toggleClass(ve,t).toggleClass(F,!t).attr("aria-disabled",!t)})},_toggleHover:function(e){var t=x(C.eventTarget(e)||e.target).closest(P),i=e.type==A||r.indexOf(e.type)!==-1;t.siblings().removeClass(me);if(!t.parents("li."+F).length){t.toggleClass(me,i||e.type=="mousedown"||e.type=="pointerover"||e.type==se)}this._removeHoverItem()},_preventClose:function(){if(!this.options.closeOnClick){this._closurePrevented=true}},_checkActiveElement:function(e){var t=this,i=x(e?e.currentTarget:this._hoverItem()),n=t._findRootParent(i)[0];if(!this._closurePrevented){setTimeout(function(){if(!document.hasFocus()||!f(n,C._activeElement())&&e&&!f(n,e.currentTarget)){t.close(n)}},0)}this._closurePrevented=false},_removeHoverItem:function(){var e=this._hoverItem();if(e&&e.hasClass(o)){e.removeClass(o);this._oldHoverItem=null}},_updateClasses:function(){var e=this.element,t=".k-menu-init div ul",i;e.removeClass("k-menu-horizontal k-menu-vertical");e.addClass("k-widget k-widget-2021 k-reset k-header k-menu-init "+y).addClass(y+"-"+this.options.orientation);e.find("li > ul").filter(function(){return!C.support.matchesSelector.call(this,t)}).addClass("k-group k-menu-group").attr("role","menu").attr("aria-hidden",e.is(":visible")).parent("li").attr("aria-haspopup","true").end().find("li > div").addClass("k-content").attr("tabindex","-1");i=e.find("> li,.k-menu-group > li");e.removeClass("k-menu-init");i.each(function(){Pe(this)})},_mouseenter:function(e){var i=this;var t=x(e.currentTarget);var n=i._itemHasChildren(t);var r=t.data(M)||t.parent().data(I);var a=H(e);var o=false;if(r){i._openedPopups[r.toString()]=true}if(i._closing){o=!!i._closing.find(t).length}if(o||e.delegateTarget!=t.parents(_e)[0]&&e.delegateTarget!=t.parents(".k-menu-scroll-wrapper,.k-popups-wrapper")[0]){return}i._keyTriggered=false;if(i.options.openOnClick.rootMenuItems&&i._isRootItem(t.closest(P))||i.options.openOnClick.subMenuItems&&!i._isRootItem(t.closest(P))){return}if((i.options.openOnClick===false||i.options.openOnClick.rootMenuItems===false&&i._isRootItem(t.closest(P))||i.options.openOnClick.subMenuItems===false&&!i._isRootItem(t.closest(P))||i.clicked)&&!b&&!(a&&i._isRootItem(t.closest(P)))){if(!f(e.currentTarget,e.relatedTarget)&&n){i.open(t)}}if(i.options.openOnClick===true&&i.clicked||b){t.siblings().each(k(function(e,t){i.close(t,true)},i))}},_mousedown:function(e){var i=this;var t=x(e.currentTarget);if(i.options.openOnClick.subMenuItems&&!i._isRootItem(t)||b){t.siblings().each(k(function(e,t){i.close(t,true)},i))}},_mouseleave:function(e){var t=this;var i=x(e.currentTarget);var n=i.data(M);var r=i.children(h).length||i.children(be).length||n;var a=x(window);if(n){delete t._openedPopups[n.toString()]}if(i.parentsUntil(h,".k-list-container,.k-calendar-container")[0]){e.stopImmediatePropagation();return}if((t.options.openOnClick===false||!t.options.openOnClick.rootMenuItems&&t._isRootItem(i)||!t.options.openOnClick.subMenuItems&&!t._isRootItem(i))&&!b&&!H(e)&&!f(e.currentTarget,e.relatedTarget||e.target)&&r&&!f(e.currentTarget,C._activeElement())){t.close(i,true);t._loading=false;return}if(C.support.browser.msie&&!e.toElement&&!e.relatedTarget&&!H(e)||e.clientX<0||e.clientY<0||e.clientY>a.height()||e.clientX>a.width()){t.close(i)}},_mouseenterPopup:function(e){var t=this;var i=x(e.currentTarget);if(i.parent().is(h)){return}i=i.children("ul");var n=i.data(I);if(n){t._openedPopups[n.toString()]=true}},_mouseleavePopup:function(e){var t=this;var i=x(e.currentTarget);if(!H(e)&&i.is(h)){t._closePopups(i.children("ul"))}},_closePopups:function(t){var i=this;var e=i._overflowWrapper();var n=t.data(I);if(n){delete i._openedPopups[n.toString()];var r=e.find(B(n));setTimeout(function(){if(i.options.openOnClick){i._closeChildPopups(t)}else{if(x.isEmptyObject(i._openedPopups)){var e=i._innerPopup(t);i._closeParentPopups(e)}else{i.close(r,true)}}},0)}},_closeChildPopups:function(e){var t=this;var i=t._overflowWrapper();x(m(e,i)).each(function(){var e=i.find(B(this.data(I)));t.close(e,true)})},_innerPopup:function(e){var t=this._overflowWrapper();var i=m(e,t);return i[i.length-1]||e},_closeParentPopups:function(e){var t=this;var i=t._overflowWrapper();var n=e.data(I);var r=i.find(B(n));n=r.parent().data(I);t.close(r,true);while(n&&!t._openedPopups[n]){if(r.parent().is(_e)){break}r=i.find(B(n));t.close(r,true);n=r.parent().data(I)}},_click:function(e){var t=this,i,n=t.options,r=x(C.eventTarget(e)),a=r[0],o=r[0]?r[0].nodeName.toUpperCase():"",s=o=="INPUT"||o=="SELECT"||o=="BUTTON"||o=="LABEL",l=r.closest(Y),d=r.closest(P),u=d[0],c=l.attr("href"),f,h,p=r.attr("href"),v=x("<a href='#' />").attr("href"),m=!!c&&c!==v,g=m&&!!c.match(/^#/),_=!!p&&p!==v,b=t._overflowWrapper(),w;if(a&&!a.parentNode){return}if(x(r).hasClass("k-menu-expand-arrow")){this._lastClickedElement=a.parentElement}while(a&&a.parentNode!=u){a=a.parentNode}if(x(a).is(Te)){return}if(d.hasClass(F)){e.preventDefault();return}if(!e.handled&&t._triggerSelect(r,u)&&!s){e.preventDefault()}e.handled=true;f=d.children(we);if(b){var k=d.data(M);if(k){f=b.find(L(k))}}h=f.is(":visible");w=n.openOnClick&&h&&t._isRootItem(d);if(n.closeOnClick&&(!m||g)&&(!f.length||w)){d.removeClass(me).css("height");t._oldHoverItem=t._findRootParent(d);var y=t._parentsUntil(l,t.element,P);t._forceClose=!!b;t.close(y);t.clicked=false;if("MSPointerUp".indexOf(e.type)!=-1){e.preventDefault()}return}if(m&&e.enterKey){l[0].click()}if((!t._isRootItem(d)||n.openOnClick===false)&&!n.openOnClick.subMenuItems&&!C.support.touch&&!(H(e)&&t._isRootItem(d.closest(P)))){return}if(!m&&!s&&!_){e.preventDefault()}t.clicked=true;i=f.is(":visible")?T:S;if(!n.closeOnClick&&i==T){return}t[i](d)},_parentsUntil:function(e,t,i){var n=this._overflowWrapper();if(!n){return e.parentsUntil(t,i)}else{var r=Ue(e,n);var a=[];x(r).each(function(){var e=x(this);if(e.is(t)){return false}if(e.is(i)){a.push(this)}});return x(a)}},_triggerSelect:function(e,t){e=e.is(".k-link")?e:e.closest(".k-link");var i=e.data("selectHandler"),n;if(i){n=this._getEventData(e);i.call(this,n)}var r=n&&n.isDefaultPrevented();var a=this._triggerEvent({item:t,type:d});return r||a},_getEventData:function(e){var t={sender:this,target:e,_defaultPrevented:false,preventDefault:function(){this._defaultPrevented=true},isDefaultPrevented:function(){return this._defaultPrevented}};return t},_documentClick:function(e){var t=this;var i=x(e.target).hasClass("k-menu-expand-arrow")?t._lastClickedElement:e.target;if(f((t._overflowWrapper()||t.element)[0],i)){t._lastClickedElement=_;return}t.clicked=false},_focus:function(e){var t=this,i=e.target,n=t._hoverItem(),r=N();if(i!=t.wrapper[0]&&!x(i).is(":kendoFocusable")){e.stopPropagation();x(i).closest(".k-content").closest(".k-menu-group").closest(".k-item").addClass(o);t.wrapper.focus();return}if(r===e.currentTarget){if(n.length){t._moveHover([],n)}else if(!t._oldHoverItem){t._moveHover([],t.wrapper.children().first())}}},_keydown:function(e){var t=this,i=e.keyCode,n=t._oldHoverItem,r,a,o,s=C.support.isRtl(t.wrapper);if(e.target!=e.currentTarget&&i!=l.ESC){return}if(!n){n=t._oldHoverItem=t._hoverItem()}a=t._itemBelongsToVertival(n);o=t._itemHasChildren(n);t._keyTriggered=true;if(i==l.RIGHT){r=t[s?"_itemLeft":"_itemRight"](n,a,o)}else if(i==l.LEFT){r=t[s?"_itemRight":"_itemLeft"](n,a,o)}else if(i==l.DOWN){r=t._itemDown(n,a,o)}else if(i==l.UP){r=t._itemUp(n,a,o)}else if(i==l.HOME){t._moveHover(n,n.parent().children().first());e.preventDefault()}else if(i==l.END){t._moveHover(n,n.parent().children().last());e.preventDefault()}else if(i==l.ESC){r=t._itemEsc(n,a)}else if(i==l.ENTER||i==l.SPACEBAR){r=n.children(".k-link");if(r.length>0){t._click({target:r[0],preventDefault:function(){},enterKey:true});if(o&&!n.hasClass(F)){t.open(n);t._moveHover(n,t._childPopupElement(n).children().first())}else{t._moveHover(n,t._findRootParent(n))}}}else if(i==l.TAB){r=t._findRootParent(n);t._moveHover(n,r);t._checkActiveElement();return}if(r&&r[0]){e.preventDefault();e.stopPropagation()}},_hoverItem:function(){return this.wrapper.find(".k-item.k-state-hover,.k-item.k-state-focused").filter(":visible")},_itemBelongsToVertival:function(e){var t=this.wrapper.hasClass("k-menu-vertical");if(!e.length){return t}return e.parent().hasClass("k-menu-group")||t},_itemHasChildren:function(e){if(!e||!e.length||!e[0].nodeType){return false}return e.children(".k-menu-group, div.k-animation-container").length>0||!!e.data(M)&&!!this._overflowWrapper().children(L(e.data(M)))},_moveHover:function(e,t){var i=this,n=i._ariaId;if(e.length&&t.length){e.removeClass(o)}if(t.length){if(t[0].id){n=t[0].id}t.addClass(o);i._oldHoverItem=t;if(n){i.element.removeAttr("aria-activedescendant");x("#"+n).removeAttr("id");t.attr("id",n);i.element.attr("aria-activedescendant",n)}i._scrollToItem(t)}},_findRootParent:function(e){if(this._isRootItem(e)){return e}else{return this._parentsUntil(e,_e,"li.k-item").last()}},_isRootItem:function(e){return e.parent().hasClass(y)},_itemRight:function(e,t,i){var n=this,r,a,o;if(!t){r=e.nextAll(c);if(!r.length){r=e.prevAll(Se)}n.close(e)}else if(i&&!e.hasClass(F)){n.open(e);r=n._childPopupElement(e).children().first()}else if(n.options.orientation=="horizontal"){a=n._findRootParent(e);o=n._overflowWrapper();if(o){var s=We(a,o);n._closeChildPopups(s)}n.close(a);r=a.nextAll(c)}if(r&&!r.length){r=n.wrapper.children(".k-item").first()}else if(!r){r=[]}n._moveHover(e,r);return r},_itemLeft:function(e,t){var i=this,n,r;if(!t){n=e.prevAll(c);if(!n.length){n=e.nextAll(Se)}i.close(e)}else{n=e.parent().closest(".k-item");r=i._overflowWrapper();if(!n.length&&r){n=Ve(e.parent(),r)}i.close(n);if(i._isRootItem(n)&&i.options.orientation=="horizontal"){n=n.prevAll(c)}}if(!n.length){n=i.wrapper.children(".k-item").last()}i._moveHover(e,n);return n},_itemDown:function(e,t,i){var n=this,r;if(!t){if(!i||e.hasClass(F)){return}else{n.open(e);r=n._childPopupElement(e).children().first()}}else{r=e.nextAll(c)}if(!r.length&&e.length){r=e.parent().children().first()}else if(!e.length){r=n.wrapper.children(".k-item").first()}n._moveHover(e,r);return r},_itemUp:function(e,t){var i=this,n;if(!t){return}else{n=e.prevAll(c)}if(!n.length&&e.length){n=e.parent().children().last()}else if(!e.length){n=i.wrapper.children(".k-item").last()}i._moveHover(e,n);return n},_scrollToItem:function(e){var t=this;if(t.options.scrollable&&e&&e.length){var i=e.parent();var n=i.hasClass(y)?t.options.orientation=="horizontal":false;var r=n?"scrollLeft":"scrollTop";var a=n?C._outerWidth:C._outerHeight;var o=i[r]();var s=a(e);var l=e[0][n?"offsetLeft":"offsetTop"];var d=a(i);var u=i.siblings(z);var c=u.length?a(u.first()):0;var f;if(o+d<l+s+c){f=l+s-d+c}else if(o>l-c){f=l-c}if(!isNaN(f)){var h={};h[r]=f;i.finish().animate(h,"fast","linear",function(){t._toggleScrollButtons(i,u.first(),u.last(),n)})}}},_itemEsc:function(e,t){var i=this,n;if(!t){return e}else{n=e.parent().closest(".k-item");i.close(n);i._moveHover(e,n)}return n},_childPopupElement:function(e){var t=e.find(".k-menu-group");var i=this._overflowWrapper();if(!t.length&&i){t=We(e,i)}return t},_triggerEvent:function(e){var t=this;return t.trigger(e.type,{type:e.type,item:e.item})},_focusHandler:function(e){var t=this,i=x(C.eventTarget(e)).closest(P);if(i.hasClass(F)){return}setTimeout(function(){t._moveHover([],i);if(i.children(".k-content")[0]){i.parent().closest(".k-item").removeClass(o)}},200)},_animations:function(e){if(e&&"animation"in e&&!e.animation){e.animation={open:{effects:{}},close:{hide:true,effects:{}}}}},_dataSource:function(e){var t=this,i=e?e.dataSource:t.options.dataSource;if(!i){return}i=O(i)?{data:i}:i;t._unbindDataSource();if(!i.fields){i.fields=[{field:"uid"},{field:"text"},{field:"url"},{field:"cssClass"},{field:"spriteCssClass"},{field:"imageUrl"},{field:"imageAttr"},{field:"attr"},{field:"contentAttr"},{field:"content"},{field:"encoded"},{field:"items"},{field:"select"}]}t.dataSource=V.create(i);t._bindDataSource();t.dataSource.fetch()},_bindDataSource:function(){this._refreshHandler=k(this.refresh,this);this._errorHandler=k(this._error,this);this.dataSource.bind(ae,this._refreshHandler);this.dataSource.bind(oe,this._errorHandler)},_unbindDataSource:function(){var e=this.dataSource;if(e){e.unbind(ae,this._refreshHandler);e.unbind(oe,this._errorHandler)}},_error:function(){},findByUid:function(e){var t=this._overflowWrapper()||this.element;return t.find("["+C.attr("uid")+"="+e+"]")},refresh:function(e){var t=this;var i=e.node;var n=e.action;var r=i?t.findByUid(i.uid):t.element;var a=e.items;var o=e.index;var s=x.proxy(t._updateItem,t);var l=x.proxy(t._removeItem,t);if(n=="add"){t._appendItems(a,o,r)}else if(n=="remove"){a.forEach(l)}else if(n=="itemchange"){a.forEach(s)}else if(n==="itemloaded"){t.append(e.items,r)}else{this._initData()}this.trigger(Ee,{item:r,dataItem:i})},_appendItems:function(e,t,i){var n=this;var r=i.find(u).eq(t);if(r.length){n.insertBefore(e,r)}else{n.append(e,i)}},_removeItem:function(e){var t=this;var i=t.findByUid(e.uid);t.remove(i)},_updateItem:function(e){var t=this;var i=t.findByUid(e.uid);var n=i.next();var r=e.parentNode();t.remove(i);if(n.length){t.insertBefore(e,n)}else{t.append(e,r&&t.findByUid(r.uid))}},_accessors:function(){var e=this,t=e.options,i,n,r,a=e.element;for(i in Ie){n=t[Ie[i]];r=a.attr(C.attr(i+"-field"));if(!n&&r){n=r}if(!n){n=i}if(!O(n)){n=[n]}t[Ie[i]]=n}},_fieldAccessor:function(e){var t=this.options[Ie[e]]||[],i=t.length,n="(function(item) {";if(i===0){n+="return item['"+e+"'];"}else{n+="var levels = ["+x.map(t,function(e){return"function(d){ return "+C.expr(e)+"}"}).join(",")+"];";n+="if(item.level){return levels[Math.min(item.level(), "+i+"-1)](item);}else";n+="{return levels["+i+"-1](item)}"}n+="})";return n},_templates:function(){var e=this,t=e.options,i=k(e._fieldAccessor,e);if(t.template&&typeof t.template==Ae){t.template=n(t.template)}else if(!t.template){t.template=n("# var text = "+i("text")+"(data.item); #"+"# if (typeof data.item.encoded != 'undefined' && data.item.encoded === false) {#"+"#= text #"+"# } else { #"+"#: text #"+"# } #")}e.templates={content:n("#var contentHtml = "+i("content")+"(item);#"+"<div #= contentCssAttributes(item.toJSON ? item.toJSON() : item) # tabindex='-1'>#= contentHtml || '' #</div>"),group:n("<ul class='#= groupCssClass(group) #'#= groupAttributes(group) # role='menu' aria-hidden='true'>"+"#= renderItems(data) #"+"</ul>"),itemWrapper:n("# var url = "+i("url")+"(item); #"+"# var imageUrl = "+i("imageUrl")+"(item); #"+"# var imgAttributes = "+i("imageAttr")+"(item);#"+"# var tag = url ? 'a' : 'span' #"+"<#= tag # class='#= textClass(item) #' #if(url){#href='#= url #'#}#>"+"# if (imageUrl) { #"+"<img #= imageCssAttributes(imgAttributes) #  alt='' src='#= imageUrl #' />"+"# } #"+"#= sprite(item) ##= data.menu.options.template(data) #"+"#= arrow(data) #"+"</#= tag #>"),item:n("#var contentHtml = "+i("content")+"(item);#"+"<li class='#= wrapperCssClass(group, item) #' #= itemCssAttributes(item.toJSON ? item.toJSON() : item) # role='menuitem'  #=item.items ? \"aria-haspopup='true'\": \"\"#"+"#=item.enabled === false ? \"aria-disabled='true'\" : ''#"+C.attr("uid")+"='#= item.uid #' >"+"#= itemWrapper(data) #"+"#if (item.hasChildren || item.items) { #"+"#= subGroup({ items: item.items, menu: menu, group: { expanded: item.expanded } }) #"+"# } else if (item.content || item.contentUrl || contentHtml) { #"+"#= renderContent(data) #"+"# } #"+"</li>"),scrollButton:n("<span class='k-button k-button-icon k-menu-scroll-button k-scroll-#= direction #' unselectable='on'>"+"<span class='k-icon k-i-arrow-60-#= direction #'></span></span>"),arrow:n("<span class='#= arrowClass(item, group) #'></span>"),sprite:n("# var spriteCssClass = "+i("spriteCssClass")+"(data); if(spriteCssClass) {#<span class='k-sprite #= spriteCssClass #'></span>#}#"),empty:n("")}},renderItem:function(e){var t=this;e=w({menu:t,group:{}},e);var i=t.templates.empty,n=e.item;return t.templates.item(w(e,{sprite:t.templates.sprite,itemWrapper:t.templates.itemWrapper,renderContent:t.renderContent,arrow:n.items||n.content||n[t.options.dataContentField[0]]?t.templates.arrow:i,subGroup:t.renderGroup},Me))},renderGroup:function(e){var t=this;var i=t.templates||e.menu.templates;return i.group(w({renderItems:function(e){var t="",i=0,n=e.items,r=n?n.length:0,a=w({length:r},e.group);for(;i<r;i++){t+=e.menu.renderItem(w(e,{group:a,item:w({index:i},n[i])}))}return t}},e,Me))},renderContent:function(e){return e.menu.templates.content(w(e,Me))}});var Ke=a.extend({init:function(e,t){var i=this;a.fn.init.call(i,e,t);i._marker=C.guid().substring(0,8);i.target=x(i.options.target);i._popup();i._wire()},_initOverflow:function(e){var t=this;if(e.scrollable&&!t._overflowWrapper()){t._openedPopups={};t._popupsWrapper=(t.element.parent().is(h)?t.element.parent():t.element).wrap("<div class='k-popups-wrapper "+e.orientation+"'></div>").parent();if(t.options.orientation=="horizontal"){$e(t.element)}if(e.appendTo){e.appendTo=x(e.appendTo);e.appendTo.append(t._popupsWrapper)}t._initialHeight=t.element[0].style.height;t._initialWidth=t.element[0].style.width}},options:{name:"ContextMenu",filter:null,showOn:"contextmenu",orientation:"vertical",alignToAnchor:false,copyAnchorStyles:true,target:"body"},events:[S,T,J,ee,d],setOptions:function(e){var t=this;a.fn.setOptions.call(t,e);t.target.off(t.showOn+g+t._marker,t._showProxy);if(t.userEvents){t.userEvents.destroy()}t.target=x(t.options.target);if(e.orientation&&t.popup.wrapper[0]){t.popup.element.unwrap()}t._wire();a.fn.setOptions.call(this,e)},destroy:function(){var e=this;e.target.off(e.options.showOn+g+e._marker);pe.off(C.support.mousedown+g+e._marker,e._closeProxy);if(e.userEvents){e.userEvents.destroy()}a.fn.destroy.call(e)},open:function(e,t){var i=this;e=x(e)[0];if(f(i.element[0],x(e)[0])||i._itemHasChildren(x(e))){a.fn.open.call(i,e)}else{if(i._triggerEvent({item:i.element,type:S})===false){if(i.popup.visible()&&i.options.filter){i.popup.close(true);i.popup.element.kendoStop(true)}if(t!==_){var n=i._overflowWrapper();if(n){var r=n.offset();e-=r.left;t-=r.top}i.popup.wrapper.hide();i._configurePopupScrolling(e,t);i.popup.open(e,t)}else{i.popup.options.anchor=(e?e:i.popup.anchor)||i.target;i.popup.element.kendoStop(true);i._configurePopupScrolling();i.popup.open()}pe.off(i.popup.downEvent,i.popup._mousedownProxy);pe.on(C.support.mousedown+g+i._marker,i._closeProxy)}}return i},_configurePopupScrolling:function(e,t){var i=this;var n=i.popup;var r=i.options.orientation=="horizontal";if(i.options.scrollable){i._wrapPopupElement(n);n.element.parent().css({position:"",height:""});n.element.css({visibility:"hidden",display:"",position:""});if(r){i._setPopupWidth(n,isNaN(e)?_:{isFixed:true,x:e,y:t})}else{i._setPopupHeight(n,isNaN(e)?_:{isFixed:true,x:e,y:t})}n.element.css({visibility:"",display:"none",position:"absolute"});i._initPopupScrollButtons(n,r,true);n.element.siblings(z).hide()}},_setPopupWidth:function(e,t){var i=e.element;var n=i.add(i.parent(h));n.width(this._initialWidth||"");var r=e._location(t);var a=x(window).width();var o=r.width;var s=Math.max(r.left,0);var l=t?0:Ge(this._overflowWrapper()[0],"scrollLeft");var d=C.getShadows(i);var u=a-d.left-d.right;var c=u+l>o+s;if(!c){n.css({overflow:"hidden",width:u-s+l+"px"})}},close:function(){var e=this;if(f(e.element[0],x(arguments[0])[0])||e._itemHasChildren(arguments[0])){a.fn.close.call(e,arguments[0])}else{if(e.popup.visible()){if(e._triggerEvent({item:e.element,type:T})===false){e.popup.close();pe.off(C.support.mousedown+g+e._marker,e._closeProxy);e.unbind(d,e._closeTimeoutProxy)}}}},_showHandler:function(e){var t=e,i,n=this,r=n.options,a=C.support.mobileOS?x(t.target):x(t.currentTarget);if(e.event){t=e.event;t.pageX=e.x.location;t.pageY=e.y.location}if(f(n.element[0],e.relatedTarget||e.target)){return}n._eventOrigin=t;t.preventDefault();t.stopImmediatePropagation();n.element.find("."+o).removeClass(o);if(r.filter&&a.is(r.filter)||!r.filter){if(r.alignToAnchor){n.popup.options.anchor=t.currentTarget;n.open(t.currentTarget)}else{n.popup.options.anchor=t.currentTarget;if(n._targetChild){i=n.target.offset();n.open(t.pageX-i.left,t.pageY-i.top)}else{n.open(t.pageX,t.pageY)}}}},_closeHandler:function(e){var t=this,i=x(e.relatedTarget||e.target),n=i.closest(t.target.selector)[0]==t.target[0],r=i.closest(u),a=t._itemHasChildren(r),o=t._overflowWrapper(),s=f(t.element[0],i[0])||o&&f(o[0],i[0]);t._eventOrigin=e;var l=e.which!==3;if(t.popup.visible()&&(l&&n||!n)&&(t.options.closeOnClick&&!a&&s||!s)){if(s){this.unbind(d,this._closeTimeoutProxy);t.bind(d,t._closeTimeoutProxy)}else{t.close()}}},_wire:function(){var e=this,t=e.options,i=e.target;e._preventProxy=null;e._showProxy=k(e._showHandler,e);e._closeProxy=k(e._closeHandler,e);e._closeTimeoutProxy=k(e.close,e);if(i[0]){if(C.support.mobileOS&&t.showOn=="contextmenu"){e.userEvents=new C.UserEvents(i,{filter:t.filter,allowSelection:false});e._preventProxy=function(){return false};e.userEvents.bind("hold",e._showProxy)}if(t.filter){i.on(t.showOn+g+e._marker,t.filter,e._preventProxy||e._showProxy)}else{i.on(t.showOn+g+e._marker,e._preventProxy||e._showProxy)}}},_triggerEvent:function(e){var t=this,i=x(t.popup.options.anchor)[0],n=t._eventOrigin;t._eventOrigin=_;return t.trigger(e.type,w({type:e.type,item:e.item||this.element[0],target:i},n?{event:n}:{}))},_popup:function(){var e=this;var t=e._overflowWrapper();e._triggerProxy=k(e._triggerEvent,e);e.popup=e.element.addClass("k-context-menu").kendoPopup({autosize:e.options.orientation==="horizontal",anchor:e.target||"body",copyAnchorStyles:e.options.copyAnchorStyles,collision:e.options.popupCollision||"fit",animation:e.options.animation,activate:e._triggerProxy,deactivate:e._triggerProxy,appendTo:t||e.options.appendTo,close:!t?x.noop:function(e){x(m(e.sender.element,t)).each(function(e,t){var i=t.data(R);if(i){i.close(true)}})}}).data(R);e._targetChild=f(e.target[0],e.popup.element[0])}});e.plugin(a);e.plugin(Ke)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.expansionpanel",["kendo.core"],e)})(function(){var e={id:"expansionpanel",name:"ExpansionPanel",category:"web",description:"The ExpansionPanel provides an expandable details-summary view",depends:["core"]};(function(a,d){var o=window.kendo,r=o.ui.Widget,e=o.ui,n=o.keys,u=a.extend,s=".kendoExpansionPanel",l="expand",c="collapse",t="complete",f="k-state-disabled",h="aria-disabled",p="aria-expanded",v="aria-hidden",m="k-expanded",g="k-expander-content",_="k-expander-content-wrapper",b=".k-expander-indicator",i="k-state-focused",w="click",k="keydown",y="height",x=a.proxy,C='<div #if(!useBareTemplate){# class="k-expander-header" #}#  data-#=ns#expander-header role="button" tabindex="0">'+"#if(!useBareTemplate){#"+'<div class="k-expander-title">#:title#</div>'+"#} else {#"+"#=title#"+"#}#"+'<span class="k-expander-spacer"></span>'+"#if(!useBareTemplate){#"+'<div class="k-expander-sub-title">#:subTitle#</div>'+"#}#"+'<span class="k-expander-indicator #:iconClass#"></span>'+"</div>";var S=r.extend({init:function(e,t){var i=this;var n=o.attr("expander-header");r.fn.init.call(i,e,t);t=a.extend(true,{},t);i._wrapper();i._animations(t);i.element.attr(v,!t.expanded);if(!i.options.useBareTemplate){i.element.addClass(g)}i.wrapper.on(w+s,"["+n+"]",x(i._click,i)).on("focus"+s,"["+n+"]",x(i._focus,i)).on("focusout"+s,"["+n+"]",x(i._blur,i)).on(k+s,x(i._keydown,i));i.toggle(i.options.expanded,false);o.notify(i)},events:[l,c,t],options:{name:"ExpansionPanel",disabled:false,expanded:false,animation:{expand:{effects:"expand:vertical",duration:200},collapse:{duration:200}},height:null,toggleable:true,expandIconClass:"k-icon k-i-arrow-chevron-down",collapseIconClass:"k-icon k-i-arrow-chevron-up",title:"",subTitle:"",headerClass:null,useBareTemplate:false},_wrapper:function(){var e=this;var t=e.element;var i=t[0];var n;var r;n=t.wrap("<div class='k-widget k-widget-2021 k-expander"+(e.options.expanded?" "+m:"")+"'></div>").parent();r=o.template(C)({title:e.options.title,subTitle:e.options.subTitle,iconClass:e.options.expanded?e.options.expandIconClass:e.options.collapseIconClass,useBareTemplate:e.options.useBareTemplate,ns:o.ns});e.header=a(r);n.prepend(e.header);e._indicator=n.find(b);n[0].style.cssText=i.style.cssText;i.style.width="100%";e.wrapper=n.addClass(e.options.disabled?f:"");e.contentWrapper=e.element.wrap("<div></div>").parent().addClass(_);e.header.attr(h,e.options.disabled).attr(p,e.options.expanded);if(!e.options.useBareTemplate){n.addClass(i.className)}if(e.options.height){e.wrapper.css(y,e.options.height)}if(e.options.headerClass){e.header.addClass(e.options.headerClass)}},_animations:function(e){if(e&&"animation"in e&&!e.animation){e.animation={expand:{effects:{}},collapse:{hide:true,effects:{}}}}},_click:function(e){var t=this;var i=t._indicator.hasClass(t.options.collapseIconClass);var n=t.element;if(!t.options.toggleable){e.preventDefault();return}if(!t.trigger(i?c:l,{item:n[0]})){t.toggle()}},toggle:function(e,t){var i=this,n=i.options.animation,r=n.expand,a=n.collapse&&"effects"in n.collapse,o=u({},n.expand,n.collapse),s=i.element,l=i.wrapper;if(e!==d){if(t===false){o=null}}else{e=!i._indicator.hasClass(i.options.collapseIconClass)}if(!a){o=u(o,{reverse:true})}if(!e){r=u(o,{hide:true});r.complete=x(i._completeHandler,i)}else{r=u({complete:x(i._completeHandler,i)},r)}if(e){i._indicator.removeClass(this.options.expandIconClass);i._indicator.addClass(this.options.collapseIconClass);l.addClass(m)}else{i._indicator.removeClass(this.options.collapseIconClass);i._indicator.addClass(this.options.expandIconClass);l.removeClass(m)}s.attr(v,!e);i.header.attr(p,e);i.contentWrapper.kendoStop(true,true).kendoAnimate(r)},_completeHandler:function(){this.trigger(t)},_keydown:function(e){var t=this,i=e.keyCode;if((i==n.ENTER||i==n.SPACEBAR)&&a(e.target).is("[data-expander-header]")){t._click(e);e.preventDefault()}},destroy:function(){var e=this;e.wrapper.off(s);r.fn.destroy.call(e)},enable:function(e){this.wrapper.toggleClass(f,!e);this.header.attr(h,!e)},_blur:function(){var e=this;if(e.header){e.header.removeClass(i)}},_focus:function(){var e=this;if(e.header){e.header.addClass(i)}}});e.plugin(S)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.columnmenu",["kendo.popup","kendo.filtermenu","kendo.menu","kendo.expansionpanel"],e)})(function(){var e={id:"columnmenu",name:"Column Menu",category:"framework",depends:["popup","filtermenu","menu","expansionpanel"],advanced:true};(function(p,u){var y=window.kendo,e=y.ui,a=p.proxy,n=p.extend,x=p.grep,o=p.map,s=p.inArray,l=y.data.Comparer,c="k-state-selected",r="asc",d="desc",f="change",t="init",i="open",h="select",v="stick",m="unstick",g="kendoPopup",_="kendoFilterMenu",b="kendoMenu",w="kendoExpansionPanel",k=".kendoColumnMenu",C=e.Widget;function S(e){return y.trim(e).replace(/&nbsp;/gi,"")}function T(e,t){var i={};var n,r,a;for(n=0,r=e.length;n<r;n++){a=e[n];i[a[t]]=a}return i}function D(e){return this.columns.indexOf(e.title)>=0||this.columns.indexOf(e.field)>=0}function A(e){var t=[];for(var i=0;i<e.length;i++){if(!e[i].columns){t.push(e[i]);continue}t=t.concat(A(e[i].columns))}return t}function E(e,t){return"["+y.attr(e)+"='"+(t||"").replace(/'/g,'"')+"']"}function I(e,t,i){if(e>0){t.insertAfter(i.children().eq(e-1))}else{i.prepend(t)}}function M(e){var t={};var i;for(var n=0;n<e.length;n++){i=JSON.stringify(e[n]);if(t[i]){t[i].push(n)}else{t[i]=[n]}}return t}function R(e,t){var i=y.attr("index");var n=y.attr("field");var r={};var a;var o;var s;var l;var d;for(var u=0;u<e.length;u++){o=t.eq(u);s=parseInt(o.attr(i),10);l=o.attr(n);d=o.attr("title");a=l?l:d;if(r[a]){r[a].push(s)}else{r[a]=[s]}}return r}var F=C.extend({init:function(e,t){var i=this,n;t=t||{};t.componentType=t.componentType||"classic";C.fn.init.call(i,e,t);e=i.element;t=i.options;i.owner=t.owner;i.dataSource=t.dataSource;i.field=e.attr(y.attr("field"));i.title=e.attr(y.attr("title"));n=e.find(".k-header-column-menu");if(!n[0]){n=e.addClass("k-with-icon").prepend('<a class="k-header-column-menu" href="#" title="'+t.messages.settings+'" aria-label="'+t.messages.settings+'"><span class="k-icon k-i-more-vertical"></span></a>').find(".k-header-column-menu")}i.link=n.attr("tabindex",-1).on("click"+k,a(i._click,i));i.wrapper=p('<div class="k-column-menu"/>');i._refreshHandler=a(i.refresh,i);i.dataSource.bind(f,i._refreshHandler)},_init:function(){var e=this;e.pane=e.options.pane;if(e.pane){e._isMobile=true}if(e._isMobile){e._createMobileMenu()}else{e._createMenu()}e.owner._muteAngularRebind(function(){e._angularItems("compile")});e._sort();e._columns();e._filter();e._lockColumns();e._stickyColumns();e.trigger(t,{field:e.field,container:e.wrapper})},events:[t,i,"sort","filtering",v,m],options:{name:"ColumnMenu",messages:{sortAscending:"Sort Ascending",sortDescending:"Sort Descending",filter:"Filter",column:"Column",columns:"Columns",columnVisibility:"Column Visibility",clear:"Clear",cancel:"Cancel",done:"Done",settings:"Edit Column Settings",lock:"Lock Column",unlock:"Unlock Column",stick:"Stick Column",unstick:"Unstick Column",setColumnPosition:"Set Column Position"},filter:"",columns:true,sortable:true,filterable:true,animations:{left:"slide"},encodeTitles:false,componentType:"classic"},_createMenu:function(){var e=this,t=e.options,i=e._ownerColumns(),n,r;if(e._hasGroups()){i=e._groupColumns(i);n=e._flattenMenuCols(i);if(n.length!==e.owner.columns.length){e._syncMenuCols(n,e.owner.columns)}}if(e._isModernComponentType()){r=y.template(P)}else{r=y.template(z)}e.wrapper.html(r({uid:y.guid(),ns:y.ns,messages:t.messages,sortable:t.sortable,filterable:t.filterable,columns:i,showColumns:t.columns,hasLockableColumns:t.hasLockableColumns,hasStickableColumns:t.hasStickableColumns,encodeTitles:t.encodeTitles,omitWrapAttribute:y.attr("omit-wrap")}));e.popup=e.wrapper[g]({anchor:e.link,copyAnchorStyles:false,open:a(e._open,e),activate:a(e._activate,e),deactivate:a(e._deactivate,e),close:function(){if(e.menu){e.menu._closing=true}if(e.options.closeCallback){e.options.closeCallback(e.element)}}}).data(g);if(e._isModernComponentType()){e.popup.element.addClass("k-grid-columnmenu-popup");e._createExpanders()}else{e.menu=e.wrapper.children()[b]({orientation:"vertical",closeOnClick:false,open:function(){e._updateMenuItems()}}).data(b)}},_createExpanders:function(){var e=this;var t=e.options;var i={expanded:false,headerClass:"k-columnmenu-item",useBareTemplate:true};e.wrapper.find(".k-columns-item")[w](p.extend(true,{},i,{title:'<span class="k-icon k-i-columns"></span><span>'+t.messages.columns+"</span>"}));e.wrapper.find(".k-column-menu-filter")[w](p.extend(true,{},i,{title:'<span class="k-icon k-i-filter"></span><span>'+t.messages.filter+"</span>"}));e.wrapper.find(".k-column-menu-position")[w](p.extend(true,{},i,{title:'<span class="k-icon k-i-set-column-position"></span><span>'+t.messages.setColumnPosition+"</span>"}))},_syncMenuCols:function(e,t){var i=t.length;var n;var r=e.map(function(e){return e.field});for(var a=0;a<i;a++){n=t[a];if(r.indexOf(n.field)<0){n.menu=false}}},_flattenMenuCols:function(e){var t=[];var i=e.length;for(var n=0;n<i;n++){if(e[n].columns){t=t.concat(this._flattenMenuCols(e[n].columns))}else if(!e[n].groupHeader){t.push(e[n])}}return t},_groupColumns:function(e,t){var i=[];var n=this.options.columns.groups;var r=n.length;var a;var o;var s;var l;var d;for(a=0;a<r;a++){o=n[a];s=D.bind(o);l={title:o.title,groupHeader:true};d=e.filter(s);i.push(l);if(t){l.columns=d}else{i=i.concat(d)}}return i},_hasGroups:function(){return this.options.columns&&this.options.columns.groups&&this.options.columns.groups.length},_isModernComponentType:function(){return this.options.componentType==="modern"&&!this._isMobile},_deactivate:function(){if(this.menu){this.menu._closing=false}},_createMobileMenu:function(){var t=this,e=t.options,i=t._ownerColumns(),n,r;if(t._hasGroups()){n=t._groupColumns(i,true);r=t._flattenMenuCols(n);if(r.length!==t.owner.columns.length){t._syncMenuCols(r,t.owner.columns)}}var a=y.template(B)({ns:y.ns,field:t.field,title:t.title||t.field,messages:e.messages,sortable:e.sortable,filterable:e.filterable,columns:i,showColumns:e.columns,hasLockableColumns:e.hasLockableColumns,hasStickableColumns:e.hasStickableColumns,hasGroups:t._hasGroups(),groups:n});t.view=t.pane.append(a);t.view.state={columns:{}};t.wrapper=t.view.element.find(".k-column-menu");t.menu=new L(t.wrapper.children(),{pane:t.pane,columnMenu:t});t.menu.element.on("transitionend"+k,function(e){e.stopPropagation()});var o=t.view.wrapper&&t.view.wrapper[0]?t.view.wrapper:t.view.element;o.on("click",".k-header-done",function(e){e.preventDefault();t.menu._applyChanges();t.menu._cancelChanges(false);t.close()});o.on("click",".k-header-cancel",function(e){e.preventDefault();t.menu._cancelChanges(true);t.close()});t.view.bind("showStart",function(){var e=t.view||{columns:{}};if(t.options.hasLockableColumns){t._updateLockedColumns()}if(t.options.hasStickableColumns){t._updateStickyColumns()}if(e.element.find(".k-sort-asc.k-state-selected").length){e.state.initialSort="asc"}else if(e.element.find(".k-sort-desc.k-state-selected").length){e.state.initialSort="desc"}})},_angularItems:function(e){var i=this;i.angular(e,function(){var e=i.wrapper.find(".k-columns-item input["+y.attr("field")+"]").map(function(){return p(this).closest("li")});var t=o(i._ownerColumns(),function(e){return{column:e._originalObject}});return{elements:e,data:t}})},destroy:function(){var e=this;e._angularItems("cleanup");C.fn.destroy.call(e);if(e.filterMenu){e.filterMenu.destroy()}if(e._refreshHandler){e.dataSource.unbind(f,e._refreshHandler)}if(e.options.columns&&e.owner){if(e._updateColumnsMenuHandler){e.owner.unbind("columnShow",e._updateColumnsMenuHandler);e.owner.unbind("columnHide",e._updateColumnsMenuHandler)}if(e._updateColumnsLockedStateHandler){e.owner.unbind("columnLock",e._updateColumnsLockedStateHandler);e.owner.unbind("columnUnlock",e._updateColumnsLockedStateHandler)}}if(e.menu){e.menu.element.off(k);e.menu.destroy()}e.wrapper.off(k);if(e.popup){e.popup.destroy()}if(e.view){e.view.purge()}e.link.off(k);e.owner=null;e.wrapper=null;e.element=null},close:function(){if(this.menu){this.menu.close()}if(this.popup){this.popup.close();this.popup.element.off("keydown"+k)}},_click:function(e){var t=this;e.preventDefault();e.stopPropagation();var i=this.options;if(i.filter&&this.element.is(!i.filter)){return}if(!this.popup&&!this.pane){this._init()}else{t._updateMenuItems()}if(this._isMobile){this.pane.navigate(this.view,this.options.animations.left)}else{this.popup.toggle()}},_updateMenuItems:function(){var e=this;if(e.options.columns){e._setMenuItemsVisibility();if(!e.options.columns.sort&&!e.options.columns.groups){e._reorderMenuItems()}else{e._updateDataIndexes()}}},_setMenuItemsVisibility:function(){var e=this;e._eachRenderedMenuItem(function(e,t,i){if(t.matchesMedia===false){i.hide()}else{i.show()}})},_reorderMenuItems:function(){var e=this;e._eachRenderedMenuItem(function(e,t,i,n){if(i[0]&&i.index()!==e){I(e,i,n)}});e._updateDataIndexes()},_updateDataIndexes:function(){var n=this;var e=n._isMobile&&n.view?p(n.view.element).find(".k-columns-item").children("ul"):p(n.wrapper).find(".k-menu-group").first(),r=n._ownerColumns(true).map(function(e){return e.title||e.field});e.find("span."+(this._isMobile?"k-listgroup-form-field-wrapper":"k-menu-link")+" input").each(function(e){var t;var i;if(n.options.columns.sort){t=n._ownerColumns();i=r.indexOf(t[e].title);p(this).attr(y.attr("index"),i)}else{p(this).attr(y.attr("index"),e)}})},_eachRenderedMenuItem:function(e){var t=this;var i;var n;var r;var a;var o=x(A(t.owner.columns),function(e){var t=true,i=S(e.title||"");if(e.menu===false||!e.field&&!i.length){t=false}return t}).map(function(e){return{field:e.field,title:e.title,matchesMedia:e.matchesMedia}});var s=t._getRenderedList();var l=t._getRenderedListElements(s);var d=R(l,s.find("input[type=checkbox]"));var u=M(o);var c;for(var f=0;f<o.length;f++){a=o[f];r=a.field?a.field:a.title;n=p.inArray(f,u[JSON.stringify(a)]);c=p();for(var h=0;h<d[r].length;h++){c=c.add(l.eq(d[r][h]))}i=c.find(E("field",r)).closest(t._isModernComponentType()?"label":"li").eq(n);e(f,a,i,s)}},_getRenderedList:function(){var e=this;if(e._isModernComponentType()){return p(e.wrapper).find(".k-columns-item")}else{return e._isMobile&&e.view?p(e.view.element).find(".k-columns-item").children("ul"):p(e.wrapper).find(".k-menu-group").first()}},_getRenderedListElements:function(e){var t=this;if(t._isModernComponentType()){return e.find("label")}else{return e.find("span."+(this._isMobile?"k-listgroup-form-field-wrapper":"k-menu-link"))}},_open:function(){var t=this;p(".k-column-menu").not(t.wrapper).each(function(){p(this).data(g).close()});t.popup.element.on("keydown"+k,function(e){if(t._isModernComponentType()&&e.keyCode===y.keys.ENTER){p(e.target).click()}if(e.keyCode==y.keys.ESC){t.close()}});if(t.options.hasLockableColumns){t._updateLockedColumns()}if(t.options.hasStickableColumns){t._updateStickyColumns()}},_activate:function(){if(this.menu){this.menu.element.focus()}else{this.popup.element.find("[tabindex=0]:eq(0)").focus()}this.trigger(i,{field:this.field,container:this.wrapper})},_ownerColumns:function(e){var t=A(this.owner.columns),i=x(t,function(e){var t=true,i=S(e.title||"");if(e.menu===false||!e.field&&!i.length){t=false}return t}),n,r=this.options.columns.sort;n=o(i,function(e){return{originalField:e.field,field:e.field||e.title,title:e.title||e.field,hidden:e.hidden,matchesMedia:e.matchesMedia,index:s(e,t),locked:!!e.locked,_originalObject:e,uid:e.headerAttributes.id}});if(r&&!e){n.sort(l.create({field:"title",dir:r}))}return n},_sort:function(){var e=this;if(e.options.sortable){e.refresh();if(e._isModernComponentType()){e.wrapper.on("click"+k,".k-sort-asc, .k-sort-desc",a(e._sortHandler,e))}else{e.menu.bind(h,a(e._sortHandler,e))}}},_sortHandler:function(e){var t=this,i=e.item?p(e.item):p(e.target),n;if(i.hasClass("k-sort-asc")){n=r}else if(i.hasClass("k-sort-desc")){n=d}if(!n){return}t._getSortItemsContainer(i).find(".k-sort-"+(n==r?d:r)).removeClass(c);t._sortDataSource(i,n);if(!t._isMobile){t.close()}},_getSortItemsContainer:function(e){return this._isModernComponentType()?e.parents(".k-columnmenu-item-wrapper").first():e.parent()},_sortDataSource:function(e,t){var i=this,n=i.options.sortable,r=n.compare===null?u:n.compare,a=i.dataSource,o,s,l=a.sort()||[];var d=e.hasClass(c)&&n&&n.allowUnsort!==false;t=!d?t:u;if(i.trigger("sort",{sort:{field:i.field,dir:t,compare:r}})){return}if(d){e.removeClass(c)}else{e.addClass(c)}if(n.mode==="multiple"){for(o=0,s=l.length;o<s;o++){if(l[o].field===i.field){l.splice(o,1);break}}l.push({field:i.field,dir:t,compare:r})}else{l=[{field:i.field,dir:t,compare:r}]}a.sort(l)},_columns:function(){var s=this;if(s.options.columns){s._updateColumnsMenu();s._updateColumnsMenuHandler=a(s._updateColumnsMenu,s);s.owner.bind(["columnHide","columnShow"],s._updateColumnsMenuHandler);s._updateColumnsLockedStateHandler=a(s._updateColumnsLockedState,s);s.owner.bind(["columnUnlock","columnLock"],s._updateColumnsLockedStateHandler);if(s._isModernComponentType()){s.wrapper.on("click"+k,".k-columns-item .k-button:not(.k-primary)",function(){s._updateColumnsMenu()});s.wrapper.on("click"+k,".k-columns-item .k-button.k-primary",a(s._applyColumnVisibility,s));s.wrapper.on("click"+k,".k-columns-item .k-checkbox",function(){s._updateColumnsMenu(true)})}else{s.menu.bind(h,function(e){var t=p(e.item),i,n,r=y.attr("uid"),a=0,o=x(A(s.owner.columns),function(e){var t=true,i=S(e.title||"");if(e.menu===false||!e.field&&!i.length){t=false}return t});if(s._isMobile){e.preventDefault()}if(!t.parent().closest("li.k-columns-item")[0]){return}i=t.find(":checkbox");if(i.attr("disabled")){return}a=o.map(function(e){return e.headerAttributes.id}).indexOf(i.attr(r));n=o[a];if(n.hidden===true){s.owner.showColumn(n)}else{s.owner.hideColumn(n)}})}}},_applyColumnVisibility:function(){var e=this;var t=y.attr("field");var i=y.attr("uid");var n=e.wrapper.find(".k-columns-item input["+t+"]");var r=x(A(this.owner.columns),function(e){var t=true,i=S(e.title||"");if(e.menu===false||!e.field&&!i.length){t=false}return t});var a=n.length;var o;var s;var l;var d;e.owner.unbind("columnShow",e._updateColumnsMenuHandler);e.owner.unbind("columnHide",e._updateColumnsMenuHandler);for(o=0;o<a;o++){l=p(n[o]);s=r.map(function(e){return e.headerAttributes.id}).indexOf(l.attr(i));d=r[s];if(l.is(":checked")&&d.hidden){e.owner.showColumn(d)}else if(l.is(":not(:checked)")&&!d.hidden){e.owner.hideColumn(d)}}e.popup.close();e.owner.bind(["columnHide","columnShow"],e._updateColumnsMenuHandler)},_updateColumnsMenu:function(t){var e,i,n,r,a,o=this;var s=y.attr("field"),l=y.attr("locked"),d=y.attr("uid"),u={},c=0,f=0;t=t===true;var h=x(A(this.owner.columns),function(e,t){var i=true,n=S(e.title||"");if(e.menu===false||!e.field&&!n.length){i=false}if(i){u[t]=c;c++}return i}),p=x(this._ownerColumns(),function(e){if(t){return o.wrapper.find("[role='menuitemcheckbox'] ["+d+"='"+e.uid+"']").prop("checked")}return!e.hidden&&e.matchesMedia!==false}),v=x(p,function(e){return e.originalField}),m=x(v,function(e){return e.locked===true}).length,g=x(v,function(e){return e.locked!==true}).length,_=x(this.owner.columns,function(e){return e.menu===false}),b=x(_,function(e){return e.hidden});this.wrapper.find("[role='menuitemcheckbox']").attr("aria-checked",false);var w=this.wrapper.find(".k-columns-item input["+s+"]").prop("disabled",false);if(!t){w.prop("checked",false)}var k;for(e=0,i=w.length;e<i;e++){n=w.eq(e);a=n.attr(l)==="true";r=false;k=n.data("kendoSwitch");f=h.map(function(e){return e.headerAttributes.id}).indexOf(n.attr(d));r=t?n.prop("checked"):!h[f].hidden&&h[f].matchesMedia!==false;n.prop("checked",r);if(k){k.enable(true);k.check(r)}n.closest("[role='menuitemcheckbox']").attr("aria-checked",r);if(r){if(m==1&&a){n.prop("disabled",true);if(k){k.enable(false)}}if((_.length===0||_.length===b.length)&&g==1&&!a){n.prop("disabled",true);if(k){k.enable(false)}}}}},_updateColumnsLockedState:function(){var e,t,i,n;var r=y.attr("field");var a=y.attr("locked");var o=T(this._ownerColumns(),"field");var s=this.wrapper.find(".k-columns-item input[type=checkbox]");for(e=0,t=s.length;e<t;e++){i=s.eq(e);n=o[i.attr(r)];if(n){i.attr(a,n.locked)}}this._updateColumnsMenu()},_filter:function(){var i=this,e=_,t=i.options;if(t.filterable!==false){if(t.filterable.multi){e="kendoFilterMultiCheck";if(t.filterable.dataSource){t.filterable.checkSource=t.filterable.dataSource;delete t.filterable.dataSource}}i.filterMenu=i.wrapper.find(".k-filterable")[e](n(true,{},{appendToElement:true,dataSource:t.dataSource,values:t.values,field:i.field,title:i.title,change:function(e){if(i.trigger("filtering",{filter:e.filter,field:e.field})){e.preventDefault()}},componentType:i.options.componentType,cycleForm:!i._isModernComponentType()},t.filterable)).data(e);if(i._isMobile){i.menu.bind(h,function(e){var t=p(e.item);if(t.hasClass("k-filter-item")){i.pane.navigate(i.filterMenu.view,i.options.animations.left)}})}}},_lockColumns:function(){var e=this;if(e._isModernComponentType()){e.wrapper.on("click"+k,".k-lock, .k-unlock",a(e._lockableHandler,e))}else{e.menu.bind(h,a(e._lockableHandler,e))}},_lockableHandler:function(e){var t=this;var i=e.item?p(e.item):p(e.target);if(i.hasClass("k-lock")){t.owner.lockColumn(t.field);if(!t._isMobile){t.close()}}else if(i.hasClass("k-unlock")){t.owner.unlockColumn(t.field);if(!t._isMobile){t.close()}}},_stickyColumns:function(){var e=this;if(e._isModernComponentType()){e.wrapper.on("click"+k,".k-stick, .k-unstick",a(e._stickableHandler,e))}else{e.menu.bind(h,a(e._stickableHandler,e))}},_stickableHandler:function(e){var t=this;var i=e.item?p(e.item):p(e.target);var n=t.field;var r=t.owner.columns;var a=x(r,function(e){return e.field==n||e.title==n})[0];if(i.hasClass("k-stick")){t.owner.stickColumn(t.field);t.trigger(v,{column:a});if(!t._isMobile){t.close()}}else if(i.hasClass("k-unstick")){t.owner.unstickColumn(t.field);t.trigger(m,{column:a});if(!t._isMobile){t.close()}}},_updateLockedColumns:function(){var t=this.field;var e=this.owner.columns;var i=x(e,function(e){return e.field==t||e.title==t})[0];if(!i){return}var n=i.locked===true;var r=x(e,function(e){return!e.hidden&&(e.locked&&n||!e.locked&&!n)}).length;var a=i.lockable===false;var o=this.wrapper.find(".k-lock").removeClass("k-state-disabled");var s=this.wrapper.find(".k-unlock").removeClass("k-state-disabled");if(n||r==1||a){o.addClass("k-state-disabled")}if(!n||r==1||a){s.addClass("k-state-disabled")}this._updateColumnsLockedState()},_updateStickyColumns:function(){var t=this.field;var e=this.owner.columns;var i=x(e,function(e){return e.field==t||e.title==t})[0];if(!i){return}var n=i.sticky===true;var r=i.stickable===true;var a=i.locked===true;var o=x(e,function(e){return!e.hidden&&(e.locked&&a||!e.locked&&!a)}).length;var s=this.wrapper.find(".k-stick").removeClass("k-state-disabled");var l=this.wrapper.find(".k-unstick").removeClass("k-state-disabled");if(n||!r||a&&o===1){s.addClass("k-state-disabled")}if(!n||!r){l.addClass("k-state-disabled")}},refresh:function(){var e=this,t=e.options.dataSource.sort()||[],i,n=e.field,r,a;e.wrapper.find(".k-sort-asc, .k-sort-desc").removeClass(c);for(r=0,a=t.length;r<a;r++){i=t[r];if(n==i.field){e.wrapper.find(".k-sort-"+i.dir).addClass(c)}}e.link[e._filterExist(e.dataSource.filter())?"addClass":"removeClass"]("k-state-active")},_filterExist:function(e){var t=false;var i;if(!e){return}e=e.filters;for(var n=0,r=e.length;n<r;n++){i=e[n];if(i.field==this.field){t=true}else if(i.filters){t=t||this._filterExist(i)}}return t}});var P="#if(sortable){#"+'<div class="k-columnmenu-item-wrapper">'+"<div>"+'<div class="k-columnmenu-item k-sort-asc" tabindex="0">'+'<span class="k-icon k-i-sort-asc-sm"></span>${messages.sortAscending}'+"</div>"+"</div>"+"<div>"+'<div class="k-columnmenu-item k-sort-desc" tabindex="0">'+'<span class="k-icon k-i-sort-desc-sm"></span>${messages.sortDescending}'+"</div>"+"</div>"+"</div>"+"#}#"+"#if(showColumns){#"+'<div class="k-columnmenu-item-wrapper">'+"<div>"+'<div class="k-columnmenu-item-content k-columns-item">'+'<div class="k-column-list-wrapper">'+'<div class="k-column-list" role="menu">'+"#for (var idx = 0; idx < columns.length; idx++) {#"+"#if(columns[idx].groupHeader){#"+'<span class="k-column-menu-group-header"><span class="k-column-menu-group-header-text">#=columns[idx].title#</span></span>'+"#} else {#"+'<label class="k-column-list-item" role="menuitemcheckbox" aria-checked="false" #=columns[idx].matchesMedia === false ? "style=\'display:none;\'" : ""#><input class="k-checkbox" type="checkbox" title="#=encodeTitles ? kendo.htmlEncode(columns[idx].title) : columns[idx].title#" data-#=ns#field="#=columns[idx].field.replace(/"/g,"&\\#34;")#" data-#=ns#index="#=columns[idx].index#" data-#=ns#locked="#=columns[idx].locked#" data-#=ns#uid="#=columns[idx].uid#"/><span class="k-checkbox-label"> #=encodeTitles ? kendo.htmlEncode(columns[idx].title) : columns[idx].title#</span></label>'+"#}#"+"#}#"+"</div>"+"</div>"+'<div class="k-columnmenu-actions">'+'<button class="k-button" type="button">Reset</button>'+'<button class="k-button k-primary" type="button">Apply</button>'+"</div>"+"</div>"+"</div>"+"</div>"+"#}#"+"#if(filterable){#"+'<div class="k-columnmenu-item-wrapper">'+'<div class="k-columnmenu-item-content k-column-menu-filter">'+'<div class="k-filterable"></div>'+"</div>"+"</div>"+"#}#"+"#if(hasLockableColumns || hasStickableColumns){#"+'<div class="k-columnmenu-item-wrapper">'+'<div class="k-column-menu-position">'+"#if(hasLockableColumns){#"+'<div class="k-columnmenu-item k-lock" tabindex="0">'+'<span class="k-icon k-i-lock"></span>${messages.lock}'+"</div>"+'<div class="k-columnmenu-item k-unlock" tabindex="0">'+'<span class="k-icon k-i-unlock"></span>${messages.unlock}'+"</div>"+"#}#"+"#if(hasStickableColumns){#"+'<div class="k-columnmenu-item k-stick" tabindex="0">'+'<span class="k-icon k-i-stick"></span>${messages.stick}'+"</div>"+'<div class="k-columnmenu-item k-unstick" tabindex="0">'+'<span class="k-icon k-i-unstick"></span>${messages.unstick}'+"</div>"+"#}#"+"</div>"+"</div>"+"#}#";var z='<ul id="#=uid#">'+"#if(sortable){#"+'<li class="k-item k-menu-item k-sort-asc"><span class="k-link k-menu-link"><span class="k-icon k-i-sort-asc-sm"></span>${messages.sortAscending}</span></li>'+'<li class="k-item k-menu-item k-sort-desc"><span class="k-link k-menu-link"><span class="k-icon k-i-sort-desc-sm"></span>${messages.sortDescending}</span></li>'+"#if(showColumns || filterable){#"+'<li class="k-separator k-menu-separator" role="presentation"></li>'+"#}#"+"#}#"+"#if(showColumns){#"+'<li class="k-item k-menu-item k-columns-item" aria-haspopup="true"><span class="k-link k-menu-link"><span class="k-icon k-i-columns"></span>${messages.columns}</span><ul>'+"#for (var idx = 0; idx < columns.length; idx++) {#"+"#if(columns[idx].groupHeader){#"+'<li class="k-column-menu-group-header" #=omitWrapAttribute#="true" ><span class="k-column-menu-group-header-text">#=columns[idx].title#</span></li>'+"#} else {#"+'<li role="menuitemcheckbox" aria-checked="false" #=columns[idx].matchesMedia === false ? "style=\'display:none;\'" : ""#><input type="checkbox" title="#=encodeTitles ? kendo.htmlEncode(columns[idx].title) : columns[idx].title#" data-#=ns#field="#=columns[idx].field.replace(/"/g,"&\\#34;")#" data-#=ns#index="#=columns[idx].index#" data-#=ns#locked="#=columns[idx].locked#" data-#=ns#uid="#=columns[idx].uid#"/>#=encodeTitles ? kendo.htmlEncode(columns[idx].title) : columns[idx].title#</li>'+"#}#"+"#}#"+"</ul></li>"+"#if(filterable || hasLockableColumns || hasStickableColumns){#"+'<li class="k-separator k-menu-separator" role="presentation"></li>'+"#}#"+"#}#"+"#if(filterable){#"+'<li class="k-item k-menu-item k-filter-item" aria-haspopup="true"><span class="k-link k-menu-link"><span class="k-icon k-i-filter"></span>${messages.filter}</span><ul>'+'<li><div class="k-filterable"></div></li>'+"</ul></li>"+"#if(hasLockableColumns || hasStickableColumns){#"+'<li class="k-separator k-menu-separator" role="presentation"></li>'+"#}#"+"#}#"+"#if(hasLockableColumns || hasStickableColumns){#"+'<li class="k-item k-menu-item k-position-item" aria-haspopup="true"><span class="k-link k-menu-link"><span class="k-icon k-i-set-column-position"></span>${messages.setColumnPosition}</span><ul>'+"#if(hasLockableColumns){#"+'<li class="k-item k-menu-item k-lock"><span class="k-link k-menu-link"><span class="k-icon k-i-lock"></span>${messages.lock}</span></li>'+'<li class="k-item k-menu-item k-unlock"><span class="k-link k-menu-link"><span class="k-icon k-i-unlock"></span>${messages.unlock}</span></li>'+"#if(hasStickableColumns){#"+'<li class="k-separator k-menu-separator" role="presentation"></li>'+"#}#"+"#}#"+"#if(hasStickableColumns){#"+'<li class="k-item k-menu-item k-stick"><span class="k-link k-menu-link"><span class="k-icon k-i-stick"></span>${messages.stick}</span></li>'+'<li class="k-item k-menu-item k-unstick"><span class="k-link k-menu-link"><span class="k-icon k-i-unstick"></span>${messages.unstick}</span></li>'+"#}#"+"</ul></li>"+"#}#"+"</ul>";var B='<div data-#=ns#role="view" class="k-grid-column-menu">'+'<div data-#=ns#role="header" class="k-header">'+'<a href="\\#" class="k-header-cancel k-link" title="#=messages.cancel#" '+'aria-label="#=messages.cancel#"><span class="k-icon k-i-arrow-chevron-left"></span></a>'+"${messages.settings}"+'<a href="\\#" class="k-header-done k-link" title="#=messages.done#" '+'aria-label="#=messages.done#"><span class="k-icon k-i-check"></span></a>'+"</div>"+'<div class="k-column-menu">'+'<ul class="k-reset">'+"<li>"+'<span class="k-list-title">#=messages.column#: ${title}</span>'+'<ul class="k-listgroup k-listgroup-flush k-mb-4">'+"#if(sortable){#"+'<li id="#=kendo.guid()#" class="k-item k-listgroup-item k-sort-asc"><span class="k-link"><span class="k-icon k-i-sort-asc-sm"></span><span class="k-item-title">${messages.sortAscending}</span></span></li>'+'<li id="#=kendo.guid()#" class="k-item k-listgroup-item k-sort-desc"><span class="k-link"><span class="k-icon k-i-sort-desc-sm"></span><span class="k-item-title">${messages.sortDescending}</span></span></li>'+"#}#"+"#if(hasLockableColumns){#"+'<li id="#=kendo.guid()#" class="k-item k-listgroup-item k-lock"><span class="k-link"><span class="k-icon k-i-lock"></span><span class="k-item-title">${messages.lock}</span></span></li>'+'<li id="#=kendo.guid()#" class="k-item k-listgroup-item k-unlock"><span class="k-link"><span class="k-icon k-i-unlock"></span><span class="k-item-title">${messages.unlock}</span></span></li>'+"#}#"+"#if(hasStickableColumns){#"+'<li id="#=kendo.guid()#" class="k-item k-listgroup-item k-stick"><span class="k-link"><span class="k-icon k-i-stick"></span><span class="k-item-title">${messages.stick}</span></span></li>'+'<li id="#=kendo.guid()#" class="k-item k-listgroup-item k-unstick"><span class="k-link"><span class="k-icon k-i-unstick"></span><span class="k-item-title">${messages.unstick}</span></span></li>'+"#}#"+"#if(filterable){#"+'<li id="#=kendo.guid()#" class="k-item k-listgroup-item k-filter-item">'+'<span class="k-link k-filterable">'+'<span class="k-icon k-i-filter"></span>'+'<span class="k-item-title">${messages.filter}</span>'+'<span class="k-select"><span class="k-icon k-i-arrow-chevron-right"></span></span>'+"</span>"+"</li>"+"#}#"+"</ul>"+"</li>"+"#if(showColumns){#"+'<li class="k-columns-item"><span class="k-list-title">${messages.columnVisibility}</span>'+"#if(hasGroups){#"+"#for (var i = 0; i < groups.length; i++) {#"+'<span class="k-list-group-header k-pb-1">#:groups[i].title#</span>'+'<ul class="k-listgroup k-listgroup-flush k-mb-4">'+"#for (var idx = 0; idx < groups[i].columns.length; idx++) {#"+'<li id="#=kendo.guid()#" class="k-item k-listgroup-item">'+'<span class="k-listgroup-form-row">'+'<span class="k-listgroup-form-field-label k-item-title">'+"#=groups[i].columns[idx].title#"+"</span>"+'<span class="k-listgroup-form-field-wrapper">'+'<input type="checkbox" title="#=groups[i].columns[idx].title#" '+' data-#=ns#field="#=groups[i].columns[idx].field.replace(/"/g,"&\\#34;")#"'+' data-#=ns#index="#=groups[i].columns[idx].index#"'+' data-#=ns#uid="#=groups[i].columns[idx].uid#"'+' data-#=ns#locked="#=groups[i].columns[idx].locked#" />'+"</span>"+"</span>"+"</li>"+"#}#"+"</ul>"+"#}#"+"#} else {#"+'<ul class="k-listgroup k-listgroup-flush k-mb-4">'+"#for (var idx = 0; idx < columns.length; idx++) {#"+'<li id="#=kendo.guid()#" class="k-item k-listgroup-item">'+'<span class="k-listgroup-form-row">'+'<span class="k-listgroup-form-field-label k-item-title">'+"#=columns[idx].title#"+"</span>"+'<span class="k-listgroup-form-field-wrapper">'+'<input type="checkbox" title="#=columns[idx].title#" '+' data-#=ns#field="#=columns[idx].field.replace(/"/g,"&\\#34;")#"'+' data-#=ns#index="#=columns[idx].index#"'+' data-#=ns#uid="#=columns[idx].uid#"'+' data-#=ns#locked="#=columns[idx].locked#" />'+"</span>"+"</span>"+"</li>"+"#}#"+"</ul>"+"#}#"+"</li>"+"#}#"+'<li class="k-item k-clear-wrap">'+'<ul class="k-listgroup k-listgroup-flush">'+'<li class="k-listgroup-item">'+'<span class="k-link k-label k-clear" title="#=messages.clear#" aria-label="#=messages.clear#">'+"#=messages.clear#"+"</span>"+"</li>"+"</ul>"+"</li>"+"</ul>"+"</div>"+"</div>";var L=C.extend({init:function(e,t){var i=this;C.fn.init.call(i,e,t);i._createCheckBoxes();i.element.on("click"+k,"li.k-item:not(.k-separator):not(.k-state-disabled):not(:has(.k-switch))","_click")},events:[h],_click:function(e){var t=this;if(!p(e.target).is("[type=checkbox]")){e.preventDefault()}if(p(e.target).hasClass("k-clear")){t._cancelChanges(true);return}if(p(e.target).hasClass("k-filterable")){t._cancelChanges(true);t.trigger(h,{item:e.currentTarget});return}t._updateSelectedItems(e.currentTarget)},_updateSelectedItems:function(e){var t=this;var i=p(e);var n=t.options.columnMenu.view.state||{columns:{}};var r=i.prop("id");if(i.hasClass("k-filter-item")){return}if(n[r]){n[r]=false}else{n[r]=true}if(i.hasClass("k-sort-asc")||i.hasClass("k-sort-desc")){var a;var o;var s;if(i.hasClass("k-sort-asc")){a="asc";o=t.element.find(".k-sort-desc")}else{a="desc";o=t.element.find(".k-sort-asc")}s=o.prop("id");if(a===n.initialSort&&!i.hasClass("k-state-selected")){n[r]=false}if(n[s]){n[s]=false}o.removeClass(c)}if(i.hasClass(c)){i.removeClass(c)}else{i.addClass(c)}},_cancelChanges:function(e){var t=this;var i=t.options.columnMenu;var n=i.view;var r=n.state||{columns:{}};var a=r.columns;t.element.find("."+c).removeClass(c);i.refresh();if(e){var o=[];for(var s in a){if(a.hasOwnProperty(s)){if(a[s]===true){var l=n.element.find("#"+s);o.push(l[0])}}}for(var d=o.length-1;d>=0;d--){t.trigger(h,{item:o[d]})}if(i.options.hasLockableColumns){i._updateLockedColumns()}if(i.options.hasStickableColumns){i._updateStickyColumns()}}t.options.columnMenu.view.state={columns:{}}},_applyChanges:function(){var e=this;var t=e.options.columnMenu.view;var i=t.state||{columns:{}};for(var n in i){if(i.hasOwnProperty(n)){if(n!=="initialSort"&&n!=="columns"&&i[n]===true){var r=t.element.find("#"+n);if(r.hasClass(c)){r.removeClass(c)}else{r.addClass(c)}e.trigger(h,{item:r[0]})}}}},_createCheckBoxes:function(){var r=this;r.element.find(".k-columns-item").find("[type='checkbox']").kendoSwitch({messages:{checked:"",unchecked:""},change:function(e){var t=e.sender.element.closest(".k-item");var i=r.options.columnMenu.view.state||{columns:{}};var n=t.prop("id");if(i.columns[n]){i.columns[n]=false}else{i.columns[n]=true}r.trigger(h,{item:t})}})},_destroyCheckBoxes:function(){var e=this;var t=e.element.find(".k-columns-item").find("[type='checkbox']");var i;for(var n=0;n<t.length;n++){i=t.eq(n).data("kendoSwitch");if(i){i.destroy()}}},close:function(){this.options.pane.navigate("")},destroy:function(){var e=this;C.fn.destroy.call(e);e.element.off(k);e._destroyCheckBoxes()}});e.plugin(F)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.columnsorter",["kendo.core"],e)})(function(){var e={id:"columnsorter",name:"Column Sorter",category:"framework",depends:["core"],advanced:true};(function(c,f){var h=window.kendo;var e=h.ui;var r=e.Widget;var p="dir";var v="asc";var u="single";var m="field";var g="desc";var a=".kendoColumnSorter";var o=".k-link";var _="aria-sort";var s=c.proxy;var t=r.extend({init:function(e,t){var i=this,n;r.fn.init.call(i,e,t);i._refreshHandler=s(i.refresh,i);i.dataSource=i.options.dataSource.bind("change",i._refreshHandler);i.directions=i.options.initialDirection===v?[v,g]:[g,v];n=i.element.find(o);if(!n[0]){n=i.element.wrapInner('<a class="k-link" href="#"/>').find(o)}i.link=n;i.element.on("click"+a,s(i._click,i))},options:{name:"ColumnSorter",mode:u,allowUnsort:true,compare:null,filter:"",initialDirection:v,showIndexes:false},events:["change"],destroy:function(){var e=this;r.fn.destroy.call(e);e.element.off(a);e.dataSource.unbind("change",e._refreshHandler);e._refreshHandler=e.element=e.link=e.dataSource=null},refresh:function(e){if(e&&(e.action==="itemchange"||e.action==="sync")){return}var t=this,i=t.dataSource.sort()||[],n,r,a,o=t.element,s=o.attr(h.attr(m)),l=(t.dataSource._sortFields||{})[s],d,u;o.removeAttr(h.attr(p));o.removeAttr(_);if(l){n=l.dir;o.attr(h.attr(p),n);u=l.index}if(o.is("th")&&l){r=w(o);if(r){if(o.attr(h.attr("index"))){a=b(o.closest("table"));d=a.index(o)}else{d=o.parent().children(":visible").index(o)}r.find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(d).toggleClass("k-sorted",n!==f)}}o.toggleClass("k-sorted",n!==f);o.find(".k-i-sort-asc-sm,.k-i-sort-desc-sm,.k-sort-order").remove();if(n===v){c('<span class="k-icon k-i-sort-asc-sm" />').appendTo(t.link);o.attr(_,"ascending")}else if(n===g){c('<span class="k-icon k-i-sort-desc-sm" />').appendTo(t.link);o.attr(_,"descending")}if(t.options.showIndexes&&i.length>1&&u){c('<span class="k-sort-order" />').html(u).appendTo(t.link)}},_toggleSortDirection:function(e){var t=this.directions;if(e===t[t.length-1]&&this.options.allowUnsort){return f}return t[0]===e?t[1]:t[0]},_click:function(e){var t=this,i=t.element,n=i.attr(h.attr(m)),r=i.attr(h.attr(p)),a=t.options,o=t.options.compare===null?f:t.options.compare,s=t.dataSource.sort()||[],l,d;e.preventDefault();if(a.filter&&!i.is(a.filter)){return}r=this._toggleSortDirection(r);if(this.trigger("change",{sort:{field:n,dir:r,compare:o}})){return}if(a.mode===u){s=[{field:n,dir:r,compare:o}]}else if(a.mode==="multiple"){for(l=0,d=s.length;l<d;l++){if(s[l].field===n){s.splice(l,1);break}}s.push({field:n,dir:r,compare:o})}if(this.dataSource.options.endless){this.dataSource.options.endless=null;i.closest(".k-grid").getKendoGrid()._endlessPageSize=t.dataSource.options.pageSize;this.dataSource.pageSize(t.dataSource.options.pageSize)}this.dataSource.sort(s)}});function b(e){var t=e.find("tr:not(.k-filter-row)");var r=h.attr("index");var i=t.find("th["+r+"]:visible");i.sort(function(e,t){e=c(e);t=c(t);var i=e.attr(r);var n=t.attr(r);if(i===f){i=c(e).index()}if(n===f){n=c(t).index()}i=parseInt(i,10);n=parseInt(n,10);return i>n?1:i<n?-1:0});return i}function w(e){var t=null;if(e.is("th")){t=e.closest("table");if(t.parent().hasClass("k-grid-header-wrap")){t=t.closest(".k-grid").find(".k-grid-content > table")}else if(t.parent().hasClass("k-grid-header-locked")){t=t.closest(".k-grid").find(".k-grid-content-locked > table")}}return t}e.plugin(t)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.editable",["kendo.dropdownlist","kendo.datepicker","kendo.numerictextbox","kendo.validator","kendo.binder"],e)})(function(){var e={id:"editable",name:"Editable",category:"framework",depends:["dropdownlist","datepicker","numerictextbox","validator","binder"],hidden:true};(function(h,f){var p=window.kendo,e=p.ui,n=e.Widget,v=h.extend,m=p.isFunction,g=h.isPlainObject,_=h.inArray,b=".",w="off",k=/("|\%|'|\[|\]|\$|\.|\,|\:|\;|\+|\*|\&|\!|\#|\(|\)|<|>|\=|\?|\@|\^|\{|\}|\~|\/|\||`)/g,t='<div class="k-tooltip k-tooltip-error k-validator-tooltip">'+'<span class="k-tooltip-icon k-icon k-i-warning"></span>'+'<span class="k-tooltip-content">#= message #</span>'+'<span class="k-callout k-callout-n"></span>'+"</div>",d="change";var y="equalSet";var x=["url","email","number","date","boolean"];function C(e){e=e!=null?e:"";return e.type||h.type(e)||"string"}function S(e){e.find(":input:not(:button, .k-combobox .k-input, .k-checkbox-list .k-checkbox, .k-radio-list .k-radio, ["+p.attr("role")+"=listbox], ["+p.attr("role")+"=upload], ["+p.attr("skip")+"], [type=file])").each(function(){var e=p.attr("bind"),t=this.getAttribute(e)||"",i=this.type==="checkbox"||this.type==="radio"?"checked:":"value:",n=this.name;if(t.indexOf(i)===-1&&n){t+=(t.length?",":"")+i+n;h(this).attr(e,t)}})}function l(e){var t=(e.model.fields||e.model)[e.field],i=C(t),n=t?t.validation:{},r=t?t.attributes:{},a,o=p.attr("type"),s=p.attr("bind"),l,d={id:e.id||e.field,name:e.field,title:e.title?e.title:e.field};for(a in n){l=n[a];if(_(a,x)>=0){d[o]=a}else if(!m(l)){var u=p.getCulture();if(typeof l==="number"&&u.name.length){var c=u.numberFormat;var f=l.toString().replace(b,c[b]);d[a]=f}else{d[a]=g(l)?l.value||a:l}}d[p.attr(a+"-msg")]=l.message;d.autocomplete=w}for(var h in r){d[h]=r[h]}if(_(i,x)>=0){d[o]=i}d[s]=(i==="boolean"?"checked:":"value:")+e.field;return d}function o(e,t){var i=e.attr("id");if(i){t.id=i;e.removeAttr("id")}return t}function r(e){var t,i,n,r,a,o;if(e&&e.length){o=[];for(t=0,i=e.length;t<i;t++){n=e[t];a=n.text||n.value||n;r=n.value==null?n.text||n:n.value;o[t]={text:a,value:r}}}return o}function u(e,t){var i;if(!e.length){return}if(e==="DropDownTree"&&t&&t.checkboxes||e==="MultiSelect"){i="<select />"}else if(e==="RadioGroup"||e==="CheckBoxGroup"){i="<ul />"}else{i=e==="Editor"?"<textarea />":"<input />"}return i}var T=["AutoComplete","CheckBoxGroup","ColorPicker","ComboBox","DateInput","DatePicker","DateTimePicker","DropDownTree","Editor","MaskedTextBox","MultiColumnComboBox","MultiSelect","NumericTextBox","RadioGroup","Rating","Slider","Switch","TimePicker","DropDownList"];var i={number:function(e,t){var i=l(t);h('<input type="text"/>').attr(i).appendTo(e).kendoNumericTextBox({format:t.format});h("<span "+p.attr("for")+'="'+t.field+'" class="k-invalid-msg k-hidden"/>').appendTo(e)},date:function(e,t){var i=l(t),n=t.format;if(n){n=p._extractFormat(n)}i[p.attr("format")]=n;h('<input type="text"/>').attr(i).appendTo(e).kendoDatePicker({format:t.format});h("<span "+p.attr("for")+'="'+t.field+'" class="k-invalid-msg k-hidden"/>').appendTo(e)},string:function(e,t){var i=l(t);h('<input type="text" />').attr(i).addClass("k-textbox").appendTo(e)},boolean:function(e,t){var i=l(t);var n=h('<input type="checkbox" />').attr(i).addClass("k-checkbox").appendTo(e);c(n,e,t)},values:function(e,t){var i=l(t);var n=p.stringify(r(t.values));h("<select "+p.attr("text-field")+'="text"'+p.attr("value-field")+'="value"'+p.attr("source")+"='"+(n?n.replace(/\'/g,"&apos;"):n)+"'"+p.attr("role")+'="dropdownlist"/>').attr(i).appendTo(e);h("<span "+p.attr("for")+'="'+t.field+'" class="k-invalid-msg  k-hidden"/>').appendTo(e)},kendoEditor:function(e,t){var i=l(t);var n=t.editor;var r="kendo"+n;var a=t.editorOptions;var o=u(n,a);var s=h(o).attr(i).appendTo(e)[r](a);c(s,e,t)}};var D={number:function(e,t){var i=l(t);i=o(e,i);h('<input type="number"/>').attr(i).appendTo(e)},date:function(e,t){var i=l(t);i=o(e,i);h('<input type="date"/>').attr(i).appendTo(e)},string:function(e,t){var i=l(t);i=o(e,i);h('<input type="text" />').attr(i).appendTo(e)},boolean:function(e,t){var i=l(t);i=o(e,i);h('<input type="checkbox" />').attr(i).appendTo(e)},values:function(e,t){var i=l(t);var n=t.values;var r=h("<select />");i=o(e,i);for(var a in n){h('<option value="'+n[a].value+'">'+n[a].text+"</option>").appendTo(r)}r.attr(i).appendTo(e)}};function A(e,t){var i=e?e.validation||{}:{},n,r;for(n in i){r=i[n];if(g(r)&&r.value){r=r.value}if(m(r)){t[n]=r}}}function c(e,t,i){var n=i?i.shouldRenderHidden||false:false;if(n){e.val(true);t.append(h("<input type='hidden' name='"+i.field+"' value='false' data-skip='true' data-validate='false'/>"))}}var a=n.extend({init:function(e,t){var i=this;if(t.target){t.$angular=t.target.options.$angular;if(t.target.pane){i._isMobile=true}}n.fn.init.call(i,e,t);i._validateProxy=h.proxy(i._validate,i);i.refresh()},events:[d],options:{name:"Editable",editors:i,mobileEditors:D,clearContainer:true,validateOnBlur:true,validationSummary:false,errorTemplate:t,skipFocus:false},editor:function(t,e){var i=this,n=i._isMobile?D:i.options.editors,r=g(t),a=r?t.field:t,o=i.options.model||{},s=r&&t.values,l=s?"values":C(e),d=r&&t.editor,u=r&&h.inArray(t.editor,T)!==-1,c=d?t.editor:n[l],f=i.element.find("["+p.attr("container-for")+"="+a.replace(k,"\\$1")+"]");c=c?c:n.string;if(u){c=n.kendoEditor}else if(d&&typeof t.editor==="string"){c=function(e){e.append(t.editor)}}f=f.length?f:i.element;c(f,v(true,{},r?t:{field:a},{model:o}))},_validate:function(e){var t=this,i,n=e.value,r=t._validationEventInProgress,a={},o=p.attr("bind"),s=e.field.replace(k,"\\$1"),l=new RegExp("(value|checked)\\s*:\\s*"+s+"\\s*(,|$)");a[e.field]=e.value;i=h(":input["+o+'*="'+s+'"]',t.element).filter("["+p.attr("validate")+"!='false']").filter(function(){return l.test(h(this).attr(o))});if(i.length>1){i=i.filter(function(){var e=h(this);return!e.is(":radio")||e.val()==n})}try{t._validationEventInProgress=true;if(!t.validatable.validateInput(i)||!r&&t.trigger(d,{values:a})){e.preventDefault()}}finally{t._validationEventInProgress=false}},end:function(){return this.validatable.validate()},destroy:function(){var e=this;e.angular("cleanup",function(){return{elements:e.element}});n.fn.destroy.call(e);e.options.model.unbind("set",e._validateProxy);e.options.model.unbind(y,e._validateProxy);p.unbind(e.element);if(e.validatable){e.validatable.destroy()}p.destroy(e.element);e.element.removeData("kendoValidator");if(e.element.is("["+p.attr("role")+"=editable]")){e.element.removeAttr(p.attr("role"))}},refresh:function(){var e=this,t,i,n=e.options.fields||[],r=e.options.clearContainer?e.element.empty():e.element,a=e.options.model||{},o={},s,l,d,u,c;if(!h.isArray(n)){n=[n]}for(t=0,i=n.length;t<i;t++){s=n[t];l=g(s);d=l?s.field:s;u=(a.fields||a)[d];A(u,o);e.editor(s,u)}if(e.options.target){e.angular("compile",function(){return{elements:r,data:r.map(function(){return{dataItem:a}})}})}if(!i){c=a.fields||a;for(d in c){A(c[d],o)}}S(r);if(e.validatable){e.validatable.destroy()}p.bind(r,e.options.model);if(e.options.validateOnBlur){e.options.model.unbind("set",e._validateProxy).bind("set",e._validateProxy);e.options.model.unbind(y,e._validateProxy).bind(y,e._validateProxy)}e.validatable=new p.ui.Validator(r,{validateOnBlur:e.options.validateOnBlur,validationSummary:e.options.validationSummary,errorTemplate:e.options.errorTemplate||f,rules:o});if(!e.options.skipFocus){r.find(":kendoFocusable").eq(0).focus()}}});e.plugin(a)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.window",["kendo.draganddrop","kendo.popup"],e)})(function(){var e={id:"window",name:"Window",category:"web",description:"The Window widget displays content in a modal or non-modal HTML window.",depends:["draganddrop","popup"],features:[{id:"window-fx",name:"Animation",description:"Support for animation",depends:["fx"]}]};(function(k,v){var y=window.kendo,m=y.ui.Widget,O=y.ui.Popup.TabKeyTrap,n=y.ui.Draggable,V=k.isPlainObject,r=y._activeElement,o=y._outerWidth,t=y._outerHeight,g=k.proxy,l=k.extend,a=k.each,s=y.template,c="body",f,_=".kendoWindow",u=".kendoWindowModal",b=".k-window",w=".k-window-title",x=w+"bar",C=".k-window-content",W=".k-dialog-content",h=".k-resize-handle",p=".k-overlay",S="k-content-frame",e="k-i-loading",U="k-state-hover",j="k-state-focused",G="k-window-maximized",T="k-display-inline-flex",D=":visible",A="hidden",E="cursor",I="open",M="activate",q="deactivate",$="close",d="refresh",K="minimize",Y="maximize",Q="resizeStart",X="resize",Z="resizeEnd",J="dragstart",ee="dragend",te="restore",ie="kendoKeydown",ne="error",R="overflow",i="original-overflow-rule",F="zIndex",re=".k-window-actions .k-i-window-minimize,.k-window-actions .k-i-window-maximize",ae=".k-i-pin",oe=".k-i-unpin",se=ae+","+oe,P=".k-window-titlebar .k-window-action",le=".k-window-titlebar .k-i-refresh",de="WindowEventsHandled",ue=/^0[a-z]*$/i,ce=y.isLocalUrl,z={small:"k-window-sm",medium:"k-window-md",large:"k-window-lg"};function B(e){return typeof e!="undefined"}function L(e,t){return parseInt(e.css(t),10)||0}function H(e,t,i){var n;if(e&&isNaN(e)&&e.toString().indexOf("px")<0){n=e}else{n=Math.max(Math.min(parseInt(e,10),i===Infinity?i:parseInt(i,10)),t===-Infinity?t:parseInt(t,10))}return n}function fe(){return!this.type||this.type.toLowerCase().indexOf("script")>=0}function N(e){var t={top:e.offsetTop,left:e.offsetLeft},i=e.offsetParent;while(i){t.top+=i.offsetTop;t.left+=i.offsetLeft;var n=k(i).css("overflowX");var r=k(i).css("overflowY");if(r==="auto"||r==="scroll"){t.top-=i.scrollTop}if(n==="auto"||n==="scroll"){t.left-=i.scrollLeft}i=i.offsetParent}return t}var he=m.extend({init:function(e,t){var i=this,n,r={},a,o,s,l=false,d,u,c,f,h=t&&t.actions&&!t.actions.length,p;m.fn.init.call(i,e,t);t=i.options;s=t.position;e=i.element;d=t.content;f=k(window);if(h){t.actions=[]}i.appendTo=k(t.appendTo);i.containment=t.draggable.containment?k(t.draggable.containment).first():null;if(d&&!V(d)){d=t.content={url:d}}e.find("script").filter(fe).remove();if(!e.parent().is(i.appendTo)&&!i.containment&&(s.top===v||s.left===v)){if(e.is(D)){r=e.offset();l=true}else{a=e.css("visibility");o=e.css("display");e.css({visibility:A,display:""});r=e.offset();e.css({visibility:a,display:o})}if(s.top===v){s.top=r.top}if(s.left===v){s.left=r.left}}if(!B(t.visible)||t.visible===null){t.visible=e.is(D)}n=i.wrapper=e.closest(b);if(!e.is(".k-window-content")||!n[0]){e.addClass("k-window-content");i._createWindow(e,t);n=i.wrapper=e.closest(b);i.title(i.options.title);i._dimensions()}i.minTop=i.minLeft=-Infinity;i.maxTop=i.maxLeft=Infinity;i._position();if(d){i.refresh(d)}if(t.visible){i.toFront()}u=n.children(C);if(t.visible&&t.modal){i._overlay(n.is(D)).css({opacity:.5})}n.on("mouseenter"+_,P,g(i._buttonEnter,i)).on("mouseleave"+_,P,g(i._buttonLeave,i)).on("click"+_,"> "+P,g(i._windowActionHandler,i)).on("keydown"+_,i,g(i._keydown,i)).on("focus"+_,g(i._focus,i)).on("blur"+_,g(i._blur,i));u.on("keydown"+_,i,g(i._keydownContent,i));c=u.find("."+S)[0];if(c&&!f.data(de)){f.on("blur"+_,function(){var e=k(document.activeElement).parent(C);if(e.length){var t=y.widgetInstance(e);t._focus()}});f.on("focus"+_,function(){k(C).not(W).each(function(e,t){y.widgetInstance(k(t))._blur()})});f.data(de,true)}this._resizable();this._draggable();if(t.pinned&&this.wrapper.is(":visible")){i.pin()}p=e.attr("id");if(p){p=p+"_wnd_title";n.children(x).children(w).attr("id",p);u.attr({role:"dialog","aria-labelledby":p})}n.add(n.children(".k-resize-handle,"+x)).on(y.support.mousedown+_,g(i.toFront,i));i.touchScroller=y.touchScroller(e);i._resizeHandler=g(i._onDocumentResize,i);i._marker=y.guid().substring(0,8);k(window).on("resize"+_+i._marker,i._resizeHandler);if(t.visible){i.trigger(I);i.trigger(M)}y.notify(i);if(this.options.modal){this._tabKeyTrap=new O(n);this._tabKeyTrap.trap();this._tabKeyTrap.shouldTrap=function(){return n.data("isFront")}}},_buttonEnter:function(e){k(e.currentTarget).addClass(U)},_buttonLeave:function(e){k(e.currentTarget).removeClass(U)},_focus:function(){this.wrapper.addClass(j)},_blur:function(){this.wrapper.removeClass(j)},_dimensions:function(){var e=this.wrapper;var t=this.options;var i=t.width;var n=t.height;var r=t.maxHeight;var a=t.size;var o=["minWidth","minHeight","maxWidth","maxHeight"];var s=e.css("box-sizing")=="content-box";var l=s?L(e,"border-left-width")+L(e,"border-right-width"):0;var d=s?L(e,"border-top-width")+L(e,"border-bottom-width"):0;var u=s?L(e,"padding-top"):0;if(this.containment&&!this._isPinned){this._updateBoundaries();t.maxHeight=Math.min(this.containment.height-(d+u),r);t.maxWidth=Math.min(this.containment.width-l,t.maxWidth)}for(var c=0;c<o.length;c++){var f=t[o[c]]||"";if(f!=Infinity){e.css(o[c],f)}}if(r!=Infinity){this.element.css("maxHeight",r)}if(i){e.outerWidth(H(i,t.minWidth,t.maxWidth))}else{e.outerWidth("")}if(n){e.outerHeight(H(n,t.minHeight,t.maxHeight))}else{e.outerHeight("")}if(!t.visible){e.removeClass(T).hide()}if(a&&z[a]){e.addClass(z[a])}},_position:function(){var e=this.wrapper,t=this.options.position,i,n;this._updateBoundaries();if(this.containment){t.top=t.top||0;t.left=t.left||0;i=t.top.toString().indexOf("%")>0?parseInt(this.containment.height*(parseFloat(t.top)/100),10):t.top;n=t.left.toString().indexOf("%")>0?parseInt(this.containment.width*(parseFloat(t.left)/100),10):t.left;t.top=H(i,this.minTop,this.maxTop);t.left=H(n,this.minLeft,this.maxLeft)}if(t.top===0){t.top=t.top.toString()}if(t.left===0){t.left=t.left.toString()}e.css({top:t.top||"",left:t.left||""})},_updateBoundaries:function(){var e=this.containment;if(!e){return null}e.width=e.innerWidth();e.height=e.innerHeight();if(parseInt(e.width,10)>e[0].clientWidth){e.width-=y.support.scrollbar()}if(parseInt(e.height,10)>e[0].clientHeight){e.height-=y.support.scrollbar()}e.position=N(e[0]);if(this._isPinned){this.minTop=this.minLeft=-Infinity;this.maxTop=this.maxLeft=Infinity}else{this.minTop=e.scrollTop();this.minLeft=e.scrollLeft();this.maxLeft=this.minLeft+e.width-o(this.wrapper,true);this.maxTop=this.minTop+e.height-t(this.wrapper,true)}},_animationOptions:function(e){var t=this.options.animation;var i={open:{effects:{}},close:{hide:true,effects:{}}};return t&&t[e]||i[e]},_resize:function(){y.resize(this.element.children())},_resizable:function(){var e=this.options.resizable;var i=this.wrapper;if(this.resizing){i.off("dblclick"+_).children(h).remove();this.resizing.destroy();this.resizing=null}if(e){i.on("dblclick"+_,x,g(function(e){if(!k(e.target).closest(".k-window-action").length){this.toggleMaximization()}},this));a("n e s w se sw ne nw".split(" "),function(e,t){i.append(f.resizeHandle(t))});this.resizing=new pe(this)}i=null},_draggable:function(){var e=this.options.draggable;if(this.dragging){this.dragging.destroy();this.dragging=null}if(e){this.dragging=new ve(this,e.dragHandle||x)}},_actions:function(){var e=this.options;var t=e.actions;var i=e.pinned;var n=this.wrapper.children(x);var r=n.find(".k-window-actions");var a=["maximize","minimize"];t=k.map(t,function(e){e=i&&e.toLowerCase()==="pin"?"unpin":e;return{name:a.indexOf(e.toLowerCase())>-1?"window-"+e:e}});r.html(y.render(f.action,t))},setOptions:function(e){var t=this;var i=t.options.size;var n=this.containment&&!t._isPinned?this.containment:k(document);var r=JSON.parse(JSON.stringify(e));l(e.position,t.options.position);l(e.position,r.position);t._containerScrollTop=n.scrollTop();t._containerScrollLeft=n.scrollLeft();m.fn.setOptions.call(t,e);var a=t.options.scrollable!==false;t.restore();if(typeof e.title!=="undefined"){t.title(e.title)}t.wrapper.removeClass(z[i]);t._dimensions();t._position();t._resizable();t._draggable();t._actions();if(typeof e.modal!=="undefined"){var o=t.options.visible!==false;t._enableDocumentScrolling();t._overlay(e.modal&&o)}t.element.css(R,a?"":"hidden")},events:[I,M,q,$,K,Y,d,te,Q,X,Z,J,ee,ie,ne],options:{name:"Window",animation:{open:{effects:{zoom:{direction:"in"},fade:{direction:"in"}},duration:350},close:{effects:{zoom:{direction:"out",properties:{scale:.7}},fade:{direction:"out"}},duration:350,hide:true}},title:"",actions:["Close"],autoFocus:true,modal:false,size:"auto",resizable:true,draggable:true,minWidth:90,minHeight:50,maxWidth:Infinity,maxHeight:Infinity,pinned:false,scrollable:true,position:{},content:null,visible:null,height:null,width:null,appendTo:"body",isMaximized:false,isMinimized:false},_closable:function(){return k.inArray("close",k.map(this.options.actions,function(e){return e.toLowerCase()}))>-1},_keydownContent:function(e){var t=this,i=y.keys,n=e.keyCode;if(n==i.ESC&&t._closable()){e.stopPropagation();t._close(false)}},_keydown:function(e){var t=this,i=t.options,n=y.keys,r=e.keyCode,a=t.wrapper,o,s,l=10,d=i.isMaximized,u=i.isMinimized,c,f,h,p;if(r==n.ESC&&t._closable()){e.stopPropagation();t._close(false)}if(e.target!=e.currentTarget||t._closing){return}if(e.altKey&&r==82){t.refresh()}if(e.altKey&&r==80){if(t.options.pinned){t.unpin()}else{t.pin()}}if(e.altKey&&r==n.UP){if(u){t.restore();t.wrapper.focus()}else if(!d){t.maximize();t.wrapper.focus()}}else if(e.altKey&&r==n.DOWN){if(!u&&!d){t.minimize();t.wrapper.focus()}else if(d){t.restore()}}o=y.getOffset(a);if(t.containment&&!t._isPinned){o=t.options.position}if(i.draggable&&!e.ctrlKey&&!e.altKey&&!d){t._updateBoundaries();if(r==n.UP){o.top=H(o.top-l,t.minTop,t.maxTop);s=a.css("top",o.top)}else if(r==n.DOWN){o.top=H(o.top+l,t.minTop,t.maxTop);s=a.css("top",o.top)}else if(r==n.LEFT){o.left=H(o.left-l,t.minLeft,t.maxLeft);s=a.css("left",o.left)}else if(r==n.RIGHT){o.left=H(o.left+l,t.minLeft,t.maxLeft);s=a.css("left",o.left)}}if(i.resizable&&e.ctrlKey&&!d&&!u){if(r==n.UP){s=true;f=a.outerHeight()-l}else if(r==n.DOWN){s=true;if(t.containment&&!t._isPinned){f=Math.min(a.outerHeight()+l,t.containment.height-o.top-L(a,"padding-top")-L(a,"borderBottomWidth")-L(a,"borderTopWidth"))}else{f=a.outerHeight()+l}}if(r==n.LEFT){s=true;c=a.outerWidth()-l}else if(r==n.RIGHT){s=true;if(t.containment&&!t._isPinned){c=Math.min(a.outerWidth()+l,t.containment.width-o.left-L(a,"borderLeftWidth")-L(a,"borderRightWidth"))}else{c=a.outerWidth()+l}}if(s){h=H(c,i.minWidth,i.maxWidth);p=H(f,i.minHeight,i.maxHeight);if(!isNaN(h)){a.outerWidth(h);t.options.width=h+"px"}if(!isNaN(p)){a.outerHeight(p);t.options.height=p+"px"}t.resize()}}if(s){e.preventDefault()}},_overlay:function(e){var t=this.containment?this.containment.children(p):this.appendTo.children(p),i=this.wrapper,n=e?"block":"none",r=parseInt(i.css(F),10)-1;if(!t.length){t=k("<div class='k-overlay' />")}t.insertBefore(i[0]).css({zIndex:r,display:n});if(this.options.modal.preventScroll&&!this.containment){this._stopDocumentScrolling()}return t},_actionForIcon:function(e){var t=/\bk-i(-\w+)+\b/.exec(e[0].className)[0];return{"k-i-close":"_close","k-i-window-maximize":"maximize","k-i-window-minimize":"minimize","k-i-window-restore":"restore","k-i-refresh":"refresh","k-i-pin":"pin","k-i-unpin":"unpin"}[t]},_windowActionHandler:function(e){if(this._closing){return}var t=k(e.target).closest(".k-window-action").find(".k-icon");var i=this._actionForIcon(t);if(i){e.preventDefault();this[i]();return false}},_modals:function(){var e=this,t=k(b+D),i,n=[];for(var r=0;r<t.length;r+=1){i=e._object(k(t[r]));if(i&&i.options&&i.options.modal&&i.options.visible&&i.options.appendTo===e.options.appendTo&&!i.containment){n.push(i.wrapper[0])}}n.sort(function(e,t){return e.style.zIndex-t.style.zIndex});e=null;return k(n)},_object:function(e){var t=e.children(C);var i=y.widgetInstance(t);if(i){return i}return v},center:function(){var e=this,t=e.options.position,i=e.wrapper,n=k(window),r=0,a=0,o,s;if(e.options.isMaximized){return e}if(e.options.pinned&&!e._isPinned){e.pin()}if(!e.options.pinned){r=n.scrollTop();a=n.scrollLeft()}if(this.containment&&!e.options.pinned){o=this.minTop+(this.maxTop-this.minTop)/2;s=this.minLeft+(this.maxLeft-this.minLeft)/2}else{e._scrollIsAppended=true;s=a+Math.max(0,(n.width()-i.outerWidth())/2);o=r+Math.max(0,(n.height()-i.outerHeight()-L(i,"paddingTop"))/2)}i.css({left:s,top:o});t.top=o;t.left=s;return e},title:function(e){var t=this,i,n=true,r=t.wrapper,a=r.children(x),o=a.children(w);if(!arguments.length){return o.html()}if(k.isPlainObject(e)){i=typeof e.text!=="undefined"?e.text:"";n=e.encoded!==false}else{i=e}if(i===false){r.addClass("k-window-titleless");r.css("padding-top",0);a.remove()}else{if(!a.length){r.prepend(f.titlebar({title:n?y.htmlEncode(i):i}));t._actions();a=r.children(x)}else{o.html(n?y.htmlEncode(i):i)}}t.options.title=i;return t},content:function(e,i){var n=this.wrapper.children(C),t=n.children(".km-scroll-container");n=t[0]?t:n;if(!B(e)){return n.html()}this.angular("cleanup",function(){return{elements:n.children()}});y.destroy(this.element.children());n.empty().html(e);this.angular("compile",function(){var e=[];for(var t=n.length;--t>=0;){e.push({dataItem:i})}return{elements:n.children(),data:e}});return this},open:function(){var e=this,t=e.wrapper,i=e.options,n=this._animationOptions("open"),r=t.children(C),a,o,s=this.containment&&!e._isPinned,l=s?this.containment:k(document);if(!e.trigger(I)){if(e._closing){t.kendoStop(true,true)}e._closing=false;e.toFront();if(i.autoFocus){e.wrapper.focus()}i.visible=true;if(i.modal){o=!!e._modals().length;a=e._overlay(o);a.kendoStop(true,true);if(n.duration&&y.effects.Fade&&!o){var d=y.fx(a).fadeIn();d.duration(n.duration||0);d.endValue(.5);d.play()}else{a.css("opacity",.5)}a.show();k(window).on("focus"+u,function(){if(t.data("isFront")&&!k(document.activeElement).closest(t).length){e.wrapper.focus()}})}if(!t.is(D)){r.css(R,A);e.wrapper.find(P).addClass("k-flat");t.addClass(T).kendoStop().kendoAnimate({effects:n.effects,duration:n.duration,complete:g(this._activate,this)})}}if(i.isMaximized){e._containerScrollTop=l.scrollTop();e._containerScrollLeft=l.scrollLeft();e._stopDocumentScrolling()}if(this.options.pinned&&!this._isPinned){this.pin()}return e},_activate:function(){var e=this.options.scrollable!==false;if(this.options.autoFocus){this.wrapper.focus()}this.element.css(R,e?"":"hidden");y.resize(this.element.children());this.trigger(M)},_removeOverlay:function(e){var t=this._modals();var i=this.options;var n=i.modal&&!t.length;var r=this._animationOptions("close");if(n){if(!e&&r.duration&&y.effects.Fade){var a=y.fx(i.modal?this._overlay(true):k(v)).fadeOut();a.duration(r.duration||0);a.startValue(.5);a.play()}else{this._overlay(false).remove()}if(i.modal.preventScroll){this._enableDocumentScrolling()}}else if(t.length){this._object(t.last())._overlay(true);if(i.modal.preventScroll){this._stopDocumentScrolling()}}},_close:function(e){var t=this,n=t.wrapper,i=t.options,r=this._animationOptions("open"),a=this._animationOptions("close"),o=this.containment&&!t._isPinned,s=o?this.containment:k(document),l;if(t._closing){return}l=t.trigger($,{userTriggered:!e});t._closing=!l;if(n.is(D)&&!l){i.visible=false;k(b).each(function(e,t){var i=k(t).children(C);if(t!=n&&i.find("> ."+S).length>0){i.children(p).remove()}});this._removeOverlay();t.wrapper.find(P).removeClass("k-flat");n.kendoStop().kendoAnimate({effects:a.effects||r.effects,reverse:a.reverse===true,duration:a.duration,complete:g(this._deactivate,this)});k(window).off(u)}if(t.options.isMaximized){t._enableDocumentScrolling();if(t._containerScrollTop&&t._containerScrollTop>0){s.scrollTop(t._containerScrollTop)}if(t._containerScrollLeft&&t._containerScrollLeft>0){s.scrollLeft(t._containerScrollLeft)}}if(t.options.iframe){t.wrapper.blur()}},_deactivate:function(){var e=this;e.wrapper.removeClass(T).hide().css("opacity","");e.trigger(q);if(e.options.modal){var t=e._object(e._modals().last());if(t){t.toFront()}}},close:function(){this._close(true);return this},_actionable:function(e){return k(e).is(P+","+P+" .k-icon, :input, a, .k-input, .k-icon, [role='gridcell']")},_shouldFocus:function(e){var t=r(),i=this.wrapper;return this.options.autoFocus&&!k(t).is(i)&&!this._actionable(e)&&(!i.find(t).length||!i.find(e).length)},toFront:function(e){var t=this,a=t.wrapper,o=a[0],i=t.containment&&!t._isPinned,n=this._animationOptions("open"),s=+a.css(F),r=s,l=e&&e.target||null;k(b).each(function(e,t){var i=k(t),n=i.css(F),r=i.children(C);if(!isNaN(n)){s=Math.max(+n,s)}a.data("isFront",t==o);if(t!=o&&r.find("."+S).length&&!r.find(p).length){r.append(f.overlay)}});if(!a[0].style.zIndex||r<s){a.css(F,s+2)}t.element.find("> .k-overlay").remove();if(t._shouldFocus(l)){setTimeout(function(){t.wrapper.focus()},n?n.duration:0);var d=i?t.containment.scrollTop():k(window).scrollTop(),u=parseInt(a.position().top,10);if(!t.options.pinned&&u>0&&u<d){if(d>0){k(window).scrollTop(u)}else{a.css("top",d)}}}a=null;return t},toggleMaximization:function(){if(this._closing){return this}return this[this.options.isMaximized?"restore":"maximize"]()},restore:function(){var e=this;var t=e.options;var i=t.minHeight;var n=e.restoreOptions;var r;var a=e.containment&&!e._isPinned?e.containment:k(document);if(!t.isMaximized&&!t.isMinimized){return e}if(i&&i!=Infinity){e.wrapper.css("min-height",i)}if(n&&!t.isMaximized){n.height=H(n.height,e.options.minHeight,e.options.maxHeight);r=t.position.top+parseInt(n.height,10)>e.maxTop;if(r){t.position.top=H(t.position.top,e.minTop,e.maxTop-parseInt(n.height,10));l(n,{left:t.position.left,top:t.position.top})}}e.wrapper.css({position:t.pinned?"fixed":"absolute",left:n.left,top:n.top,width:n.width,height:n.height}).removeClass(G).find(".k-window-content,.k-resize-handle").show().end().find(".k-window-titlebar .k-i-window-restore").parent().remove().end().end().find(re).parent().show().end().end().find(se).parent().show();if(t.isMaximized){e.wrapper.find(".k-i-window-maximize").parent().focus()}else if(t.isMinimized){e.wrapper.find(".k-i-window-minimize").parent().focus()}e.options.width=n.width;e.options.height=n.height;if(!e.options.modal.preventScroll){e._enableDocumentScrolling()}if(e._containerScrollTop&&e._containerScrollTop>0){a.scrollTop(e._containerScrollTop)}if(e._containerScrollLeft&&e._containerScrollLeft>0){a.scrollLeft(e._containerScrollLeft)}t.isMaximized=t.isMinimized=false;e.wrapper.removeAttr("aria-labelled-by");e.resize();e.trigger(te);return e},_sizingAction:function(e,t){var i=this,n=i.wrapper,r=n[0].style,a=i.options;if(a.isMaximized||a.isMinimized){return i}i.restoreOptions={width:r.width,height:r.height};n.children(h).hide().end().children(x).find(re).parent().hide().eq(0).before(f.action({name:"window-restore"}));t.call(i);i.wrapper.children(x).find(se).parent().toggle(e!=="maximize");i.trigger(e);n.find(".k-i-window-restore").parent().focus();return i},maximize:function(){this._sizingAction("maximize",function(){var e=this,t=e.wrapper,i=this.containment&&!e._isPinned,n=t.position(),r=k(document);l(e.restoreOptions,{left:n.left+(i?this.containment.scrollLeft():0),top:n.top+(i?this.containment.scrollTop():0)});this._containerScrollTop=i?this.containment.scrollTop():r.scrollTop();this._containerScrollLeft=i?this.containment.scrollLeft():r.scrollLeft();e._stopDocumentScrolling();t.css({top:i?this.containment.scrollTop():0,left:i?this.containment.scrollLeft():0,position:i?"absolute":"fixed"}).addClass(G);e.options.isMaximized=true;e._onDocumentResize()});return this},_stopDocumentScrolling:function(){var e=this;var t=e.containment;if(t&&!e._isPinned){e._storeOverflowRule(t);t.css(R,A);e.wrapper.css({maxWidth:t.innerWidth(),maxHeight:t.innerHeight()});return}var i=k("body");e._storeOverflowRule(i);i.css(R,A);var n=k("html");e._storeOverflowRule(n);n.css(R,A)},_enableDocumentScrolling:function(){var e=this;var t=e.containment;if(t&&!e._isPinned){e._restoreOverflowRule(t);e.wrapper.css({maxWidth:t.width,maxHeight:t.height});return}e._restoreOverflowRule(k(document.body));e._restoreOverflowRule(k("html"))},_storeOverflowRule:function(e){if(this._isOverflowStored(e)){return}var t=e.get(0).style.overflow;if(typeof t==="string"){e.data(i,t)}},_isOverflowStored:function(e){return typeof e.data(i)==="string"},_restoreOverflowRule:function(e){var t=e.data(i);if(t!==null&&t!==v){e.css(R,t);e.removeData(i)}else{e.css(R,"")}},isMaximized:function(){return this.options.isMaximized},minimize:function(){this._sizingAction("minimize",function(){var e=this;e.wrapper.css({height:"",minHeight:""});e.element.hide();e.options.isMinimized=true});this.wrapper.attr("aria-labelled-by",this.element.attr("aria-labelled-by"));this._updateBoundaries();return this},isMinimized:function(){return this.options.isMinimized},pin:function(){var e=this,t=k(window),i=e.wrapper,n=e.options,r=n.position,a=this.containment?N(i[0]).top+L(this.containment,"borderTopWidth"):L(i,"top"),o=this.containment?N(i[0]).left+L(this.containment,"borderLeftWidth"):L(i,"left");if(!e.options.isMaximized){r.top=a;r.left=o;if(e._scrollIsAppended&&(!this.containment||this.containment.css("position")!=="fixed")){r.top-=t.scrollTop();r.left-=t.scrollLeft();e._scrollIsAppended=false}i.css(l(r,{position:"fixed"}));i.children(x).find(ae).addClass("k-i-unpin").removeClass("k-i-pin");e._isPinned=true;e.options.pinned=true;if(this.containment){n.maxWidth=n.maxHeight=Infinity;i.css({maxWidth:"",maxHeight:""})}}},unpin:function(){var e=this,t=k(window),i=e.wrapper,n=e.options,r=e.options.position,a=e.containment,o=parseInt(i.css("top"),10)+t.scrollTop(),s=parseInt(i.css("left"),10)+t.scrollLeft();if(!e.options.isMaximized){e._isPinned=false;e._scrollIsAppended=true;e.options.pinned=false;if(a){e._updateBoundaries();n.maxWidth=Math.min(a.width,n.maxWidth);n.maxHeight=Math.min(a.height-L(i,"padding-top"),n.maxHeight);i.css({maxWidth:n.maxWidth,maxHeight:n.maxHeight});if(o<a.position.top){o=e.minTop}else if(o>a.position.top+a.height){o=e.maxTop}else{o=o+a.scrollTop()-(a.position.top+L(a,"border-top-width"))}if(s<a.position.left){s=e.minLeft}else if(s>a.position.left+a.width){s=e.maxLeft}else{s=s+a.scrollLeft()-(a.position.left+L(a,"border-left-width"))}}r.top=H(o,e.minTop,e.maxTop);r.left=H(s,e.minLeft,e.maxLeft);i.css(l(r,{position:""}));i.children(x).find(oe).addClass("k-i-pin").removeClass("k-i-unpin")}},_onDocumentResize:function(){var e=this,t=e.wrapper,i=k(window),n=y.support.zoomLevel(),r=t.css("box-sizing")=="content-box",a,o;if(!e.options.isMaximized){return}var s=r?L(t,"border-left-width")+L(t,"border-right-width"):0;var l=r?L(t,"border-top-width")+L(t,"border-bottom-width"):0;var d=r?L(t,"padding-top"):0;if(e.containment&&!e._isPinned){a=e.containment.innerWidth()-s;o=e.containment.innerHeight()-(l+d)}else{a=i.width()/n-s;o=i.height()/n-(l+d)}t.css({width:a,height:o});e.options.width=a;e.options.height=o;e.resize()},refresh:function(e){var t=this,i=t.options,n=k(t.element),r,a,o;if(!V(e)){e={url:e}}e=l(i.content,e);a=B(i.iframe)?i.iframe:e.iframe;o=e.url;if(o){if(!B(a)){a=!ce(o)}if(!a){t._ajaxRequest(e)}else{r=n.find("."+S)[0];if(r){r.src=o||r.src}else{n.html(f.contentFrame(l({},i,{content:e})))}n.find("."+S).unbind("load"+_).on("load"+_,g(this._triggerRefresh,this))}}else{if(e.template){t.content(s(e.template)({}))}t.trigger(d)}n.toggleClass("k-window-iframecontent",!!a);return t},_triggerRefresh:function(){this.trigger(d)},_ajaxComplete:function(){clearTimeout(this._loadingIconTimeout);this.wrapper.find(le).removeClass(e)},_ajaxError:function(e,t){this.trigger(ne,{status:t,xhr:e})},_ajaxSuccess:function(i){return function(e){var t=e;if(i){t=s(i)(e||{})}this.content(t,e);this.element.prop("scrollTop",0);this.trigger(d)}},_showLoading:function(){this.wrapper.find(le).addClass(e)},_ajaxRequest:function(e){this._loadingIconTimeout=setTimeout(g(this._showLoading,this),100);k.ajax(l({type:"GET",dataType:"html",cache:false,error:g(this._ajaxError,this),complete:g(this._ajaxComplete,this),success:g(this._ajaxSuccess(e.template),this)},e))},_destroy:function(){if(this.resizing){this.resizing.destroy()}if(this.dragging){this.dragging.destroy()}this.wrapper.off(_).children(C).off(_).end().find(".k-resize-handle,.k-window-titlebar").off(_);k(window).off("resize"+_+this._marker);k(window).off(u);k(window).off(_);clearTimeout(this._loadingIconTimeout);m.fn.destroy.call(this);this.unbind(v);y.destroy(this.wrapper)},destroy:function(){this._destroy();if(this.options.modal){this._removeOverlay(true)}this.wrapper.empty().remove();this.wrapper=this.appendTo=this.element=k()},_createWindow:function(){var e=this.element,t=this.options,i,n,r=y.support.isRtl(e);if(t.scrollable===false){e.css("overflow","hidden")}n=k(f.wrapper(t));i=e.find("iframe:not(.k-content-frame)").map(function(){var e=this.getAttribute("src");this.src="";return e});n.toggleClass("k-rtl",r).attr("tabindex",0).append(e).find("iframe:not(.k-content-frame)").each(function(e){this.src=i[e]});if(this.containment){this.containment.prepend(n)}else if(this.appendTo){n.appendTo(this.appendTo)}n.find(".k-window-title").css(r?"left":"right",o(n.find(".k-window-actions"))+10);e.css("visibility","").show();e.find("[data-role=editor]").each(function(){var e=k(this).data("kendoEditor");if(e){e.refresh()}});n=e=null}});f={wrapper:s("<div class='k-widget k-widget-2021 k-window'></div>"),action:s("<a role='button' href='\\#' class='k-button k-flat k-button-icon k-window-action' aria-label='#= name #'>"+"<span class='k-icon k-i-#= name.toLowerCase() #'></span>"+"</a>"),titlebar:s("<div class='k-window-titlebar'>"+"<span class='k-window-title'>#= title #</span>"+"<div class='k-window-actions'></div>"+"</div>"),overlay:"<div class='k-overlay'></div>",contentFrame:s("<iframe frameborder='0' title='#= title #' class='"+S+"' "+"src='#= content.url #'>"+"This page requires frames in order to show content"+"</iframe>"),resizeHandle:s("<div class='k-resize-handle k-resize-#= data #'></div>")};function pe(e){var t=this;t.owner=e;t._preventDragging=false;t._draggable=new n(e.wrapper,{filter:">"+h,group:e.wrapper.id+"-resizing",dragstart:g(t.dragstart,t),drag:g(t.drag,t),dragend:g(t.dragend,t)});t._draggable.userEvents.bind("press",g(t.addOverlay,t));t._draggable.userEvents.bind("release",g(t.removeOverlay,t))}pe.prototype={addOverlay:function(){this.owner.wrapper.append(f.overlay)},removeOverlay:function(){this.owner.wrapper.find(p).remove()},dragstart:function(e){var t=this;var i=t.owner;var n=i.wrapper;t._preventDragging=i.trigger(Q);if(t._preventDragging){return}t.elementPadding=parseInt(n.css("padding-top"),10);t.initialPosition=y.getOffset(n,"position");t.resizeDirection=e.currentTarget.prop("className").replace("k-resize-handle k-resize-","");t.initialSize={width:n.outerWidth(),height:n.outerHeight()};i._updateBoundaries();t.containerOffset=i.containment?i.containment.position:y.getOffset(i.appendTo);var r=n.offsetParent();if(r.is("html")){t.containerOffset.top=t.containerOffset.left=0}else{var a=r.css("margin-top");var o=r.css("margin-left");var s=!ue.test(a)||!ue.test(o);if(s){var l=N(n[0]);var d=l.left-t.containerOffset.left-t.initialPosition.left;var u=l.top-t.containerOffset.top-t.initialPosition.top;t._relativeElMarginLeft=d>1?d:0;t._relativeElMarginTop=u>1?u:0;t.initialPosition.left+=t._relativeElMarginLeft;t.initialPosition.top+=t._relativeElMarginTop}}n.children(h).not(e.currentTarget).hide();k(c).css(E,e.currentTarget.css(E))},drag:function(e){if(this._preventDragging){return}var t=this,i=t.owner,n=i.wrapper,r=i.options,a=r.position,o=t.resizeDirection,s=t.containerOffset,l=t.initialPosition,d=t.initialSize,u=i.containment&&!i._isPinned,c=y.support.isRtl(i.containment),f=u&&c&&i.containment.innerWidth()>i.containment.width?y.support.scrollbar():0,h=u?{top:i.containment.scrollTop(),left:i.containment.scrollLeft()}:{top:0,left:0},p,v,m,g,_=Math.max(e.x.location,0),b=Math.max(e.y.location,0);if(o.indexOf("e")>=0){if(i.containment&&_-d.width>=i.maxLeft-h.left+s.left+f){p=i.maxLeft+f-l.left+d.width-h.left}else{p=_-l.left-s.left}n.outerWidth(H(p,r.minWidth,r.maxWidth))}else if(o.indexOf("w")>=0){g=l.left+d.width+s.left;p=H(g-_,r.minWidth,r.maxWidth);a.left=g-p-s.left-f-(t._relativeElMarginLeft||0)+h.left;if(i.containment&&a.left<=i.minLeft){a.left=i.minLeft;p=H(g-f-a.left-s.left+h.left,r.minWidth,r.maxWidth)}n.css({left:a.left,width:p})}var w=b;if(i.options.pinned){w-=k(window).scrollTop()}if(o.indexOf("s")>=0){v=w-l.top-t.elementPadding-s.top;if(w-d.height-t.elementPadding>=i.maxTop+s.top-h.top){v=i.maxTop-l.top+d.height-h.top}n.outerHeight(H(v,r.minHeight,r.maxHeight))}else if(o.indexOf("n")>=0){m=l.top+d.height+s.top;v=H(m-w,r.minHeight,r.maxHeight);a.top=m-v-s.top-(t._relativeElMarginTop||0)+h.top;if(a.top<=i.minTop&&i.containment){a.top=i.minTop;v=H(m-a.top-s.top+h.top,r.minHeight,r.maxHeight)}n.css({top:a.top,height:v})}if(p){i.options.width=p+"px"}if(v){i.options.height=v+"px"}i.resize()},dragend:function(e){if(this._preventDragging){return}var t=this,i=t.owner,n=i.wrapper;n.children(h).not(e.currentTarget).show();k(c).css(E,"");if(i.touchScroller){i.touchScroller.reset()}if(e.keyCode==27){n.css(t.initialPosition).css(t.initialSize)}i.trigger(Z);return false},destroy:function(){if(this._draggable){this._draggable.destroy()}this._draggable=this.owner=null}};function ve(e,t){var i=this;i.owner=e;i._preventDragging=false;i._draggable=new n(e.wrapper,{filter:t,group:e.wrapper.id+"-moving",dragstart:g(i.dragstart,i),drag:g(i.drag,i),dragend:g(i.dragend,i),dragcancel:g(i.dragcancel,i)});i._draggable.userEvents.stopPropagation=false}ve.prototype={dragstart:function(e){var t=this.owner,i=t.options.draggable,n=t.element,r=n.find(".k-window-actions"),a=y.getOffset(t.appendTo);this._preventDragging=t.trigger(J)||!i;if(this._preventDragging||t.isMaximized()){return}t.initialWindowPosition=y.getOffset(t.wrapper,"position");t.initialPointerPosition={left:t.options.position.left,top:t.options.position.top};t.startPosition={left:e.x.client-t.initialWindowPosition.left,top:e.y.client-t.initialWindowPosition.top};t._updateBoundaries();if(!t.containment){if(r.length>0){t.minLeft=o(r)+parseInt(r.css("right"),10)-o(n)}else{t.minLeft=20-o(n)}t.minLeft-=a.left;t.minTop=-a.top}t.wrapper.append(f.overlay).children(h).hide();k(c).css(E,e.currentTarget.css(E))},drag:function(e){var t=this.owner;var i=t.options.position;var n=t.options.draggable.axis;var r;var a;if(this._preventDragging||t.isMaximized()){return}if(!n||n.toLowerCase()==="x"){r=e.x.client-t.startPosition.left;if(t.containment&&!t._isPinned){r+=t.containment.scrollLeft()}i.left=H(r,t.minLeft,t.maxLeft)}if(!n||n.toLowerCase()==="y"){a=e.y.client-t.startPosition.top;if(t.containment&&!t._isPinned){a+=t.containment.scrollTop()}i.top=H(a,t.minTop,t.maxTop)}if(y.support.transforms){k(t.wrapper).css("transform","translate("+(i.left-t.initialPointerPosition.left)+"px, "+(i.top-t.initialPointerPosition.top)+"px)")}else{k(t.wrapper).css(i)}},_finishDrag:function(){var e=this.owner;e.wrapper.children(h).toggle(!e.options.isMinimized).end().find(p).remove();k(c).css(E,"")},dragcancel:function(e){if(this._preventDragging){return}this._finishDrag();e.currentTarget.closest(b).css(this.owner.initialWindowPosition)},dragend:function(){var e=this.owner;if(this._preventDragging||e.isMaximized()){return}k(e.wrapper).css(e.options.position).css("transform","");this._finishDrag();e.trigger(ee);return false},destroy:function(){if(this._draggable){this._draggable.destroy()}this._draggable=this.owner=null}};y.ui.plugin(he)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.pane",["kendo.view"],e)})(function(){var e={id:"pane",name:"Pane",category:"web",description:"Pane",depends:["view"],hidden:true};(function(t,e){var a=window.kendo,r=a.roleSelector,i=a.ui,n=i.Widget,o=a.ViewEngine,s=a.View,l=t.extend,d="navigate",u="viewShow",c="sameViewRequested",f=a.support.mobileOS,h=f.ios&&!f.appMode&&f.flatVersion>=700,p="#:back";var v=".";var m={pane:"k-pane",paneWrapper:"k-pane-wrapper",collapsiblePane:"k-collapsible-pane",vertical:"k-vertical"};var g=n.extend({init:function(e,t){var r=this;n.fn.init.call(r,e,t);t=r.options;e=r.element;e.addClass(m.pane);if(r.options.collapsible){e.addClass(m.collapsiblePane)}this.history=[];this.historyCallback=function(e,t,i){var n=r.transition;r.transition=null;if(h&&i){n="none"}return r.viewEngine.showView(e,n,t)};this._historyNavigate=function(e){if(e===p){if(r.history.length===1){return}r.history.pop();e=r.history[r.history.length-1]}else{if(e instanceof s){e=""}r.history.push(e)}r.historyCallback(e,a.parseQueryStringParams(e))};this._historyReplace=function(e){var t=a.parseQueryStringParams(e);r.history[r.history.length-1]=e;r.historyCallback(e,t)};r.viewEngine=new o(l({},{container:e,transition:t.transition,modelScope:t.modelScope,rootNeeded:!t.initial,serverNavigation:t.serverNavigation,remoteViewURLPrefix:t.root||"",layout:t.layout,$angular:t.$angular,showStart:function(){r.closeActiveDialogs()},after:function(){},viewShow:function(e){r.trigger(u,e)},loadStart:function(){},loadComplete:function(){},sameViewRequested:function(){r.trigger(c)},viewTypeDetermined:function(e){if(!e.remote||!r.options.serverNavigation){r.trigger(d,{url:e.url})}}},this.options.viewEngine));this._setPortraitWidth();a.onResize(function(){r._setPortraitWidth()})},closeActiveDialogs:function(){var e=this.element.find(r("actionsheet popover modalview")).filter(":visible");e.each(function(){a.widgetInstance(t(this),i).close()})},navigateToInitial:function(){var e=this.options.initial;if(e){this.navigate(e)}return e},options:{name:"Pane",portraitWidth:"",transition:"",layout:"",collapsible:false,initial:null,modelScope:window},events:[d,u,c],append:function(e){return this.viewEngine.append(e)},destroy:function(){var e=this;n.fn.destroy.call(e);if(e.viewEngine){e.viewEngine.destroy()}},navigate:function(e,t){if(e instanceof s){e=e.id}this.transition=t;this._historyNavigate(e)},replace:function(e,t){if(e instanceof s){e=e.id}this.transition=t;this._historyReplace(e)},view:function(){return this.viewEngine.view()},_setPortraitWidth:function(){var e,t=this.options.portraitWidth;if(t){e=a.mobile.application.element.is(v+m.vertical)?t:"auto";this.element.css("width",e)}}});g.wrap=function(e,t){if(!e.is(r("view"))){e=e.wrap("<div data-"+a.ns+'role="view" data-stretch="true"></div>').parent()}var i=e.wrap('<div class="'+m.paneWrapper+' k-widget"><div></div></div>').parent();var n=new g(i,t);n.navigate("");return n};a.Pane=g})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.progressbar",["kendo.core"],e)})(function(){var e={id:"progressbar",name:"ProgressBar",category:"web",description:"The ProgressBar offers rich functionality for displaying and tracking progress",depends:["core"]};(function(t,o){var r=window.kendo,e=r.ui,n=e.Widget,l="horizontal",d="vertical",i=0,a=100,s=0,u=5,c="k-progressbar",f="k-progressbar-reverse",h="k-progressbar-indeterminate",p="k-complete",v="k-state-selected",m="k-progress-status",g="k-progress-end",_="k-state-selected",b="k-state-default",w="k-state-disabled",k={VALUE:"value",PERCENT:"percent",CHUNK:"chunk"},y="change",x="complete",C="boolean",S=Math,T=t.extend,D=t.proxy,A=100,E=400,I=3,M={progressStatus:"<span class='k-progress-status-wrap "+g+"'><span class='k-progress-status'></span></span>"};var R=n.extend({init:function(e,t){var i=this;n.fn.init.call(this,e,t);t=i.options;i._progressProperty=t.orientation===l?"width":"height";i._fields();t.value=i._validateValue(t.value);i._validateType(t.type);i._wrapper();i._progressAnimation();if(t.value!==t.min&&t.value!==false){i._updateProgress()}},setOptions:function(e){var t=this;n.fn.setOptions.call(t,e);if(e.hasOwnProperty("reverse")){t.wrapper.toggleClass("k-progressbar-reverse",e.reverse)}if(e.hasOwnProperty("enable")){t.enable(e.enable)}t._progressAnimation();t._validateValue();t._updateProgress()},events:[y,x],options:{name:"ProgressBar",orientation:l,reverse:false,min:i,max:a,value:s,enable:true,type:k.VALUE,chunkCount:u,showStatus:true,animation:{}},_fields:function(){var e=this;e._isStarted=false;e.progressWrapper=e.progressStatus=t()},_validateType:function(i){var n=false;t.each(k,function(e,t){if(t===i){n=true;return false}});if(!n){throw new Error(r.format("Invalid ProgressBar type '{0}'",i))}},_wrapper:function(){var e=this;var t=e.wrapper=e.element;var i=e.options;var n=i.orientation;var r;t.addClass("k-widget k-widget-2021 "+c);t.addClass(c+"-"+(n===l?l:d));if(i.enable===false){t.addClass(w)}if(i.reverse){t.addClass(f)}if(i.value===false){t.addClass(h)}if(i.type===k.CHUNK){e._addChunkProgressWrapper()}else{if(i.showStatus){e.progressStatus=e.wrapper.prepend(M.progressStatus).find("."+m);r=i.value!==false?i.value:i.min;if(i.type===k.VALUE){e.progressStatus.text(r)}else{e.progressStatus.text(e._calculatePercentage(r).toFixed()+"%")}}}},value:function(e){return this._value(e)},_value:function(e){var t=this;var i=t.options;var n;if(e===o){return i.value}else{if(typeof e!==C){e=t._roundValue(e);if(!isNaN(e)){n=t._validateValue(e);if(n!==i.value){t.wrapper.removeClass(h);i.value=n;t._isStarted=true;t._updateProgress()}}}else if(!e){t.wrapper.addClass(h);i.value=false}}},_roundValue:function(e){e=parseFloat(e);var t=S.pow(10,I);return r._round(e*t)/t},_validateValue:function(e){var t=this;var i=t.options;if(e!==false){if(e<=i.min||e===true){return i.min}else if(e>=i.max){return i.max}}else if(e===false){return false}if(isNaN(t._roundValue(e))){return i.min}return e},_updateProgress:function(){var e=this;var t=e.options;var i=e._calculatePercentage();if(t.type===k.CHUNK){e._updateChunks(i);e._onProgressUpdateAlways(t.value)}else{e._updateProgressWrapper(i)}},_updateChunks:function(e){var t=this;var i=t.options;var n=i.chunkCount;var r=parseInt(A/n*100,10)/100;var a=parseInt(e*100,10)/100;var o=S.floor(a/r);var s;if(i.orientation===l&&!i.reverse||i.orientation===d&&i.reverse){s=t.wrapper.find("li.k-item:lt("+o+")")}else{s=t.wrapper.find("li.k-item:gt(-"+(o+1)+")")}t.wrapper.find("."+_).removeClass(_).addClass(b);s.removeClass(b).addClass(_)},_updateProgressWrapper:function(e){var t=this;var i=t.options;var n=t.wrapper.find("."+v);var r=t._isStarted?t._animation.duration:0;var a={};if(n.length===0){t._addRegularProgressWrapper()}a[t._progressProperty]=e+"%";t.progressWrapper.animate(a,{duration:r,start:D(t._onProgressAnimateStart,t),progress:D(t._onProgressAnimate,t),complete:D(t._onProgressAnimateComplete,t,i.value),always:D(t._onProgressUpdateAlways,t,i.value)})},_onProgressAnimateStart:function(){this.progressWrapper.show()},_onProgressAnimate:function(e){var t=this;var i=t.options;var n=parseFloat(e.elem.style[t._progressProperty],10);var r;if(i.showStatus){r=1e4/parseFloat(t.progressWrapper[0].style[t._progressProperty]);t.progressWrapper.find(".k-progress-status-wrap").css(t._progressProperty,r+"%")}if(i.type!==k.CHUNK&&n<=98){t.progressWrapper.removeClass(p)}},_onProgressAnimateComplete:function(e){var t=this;var i=t.options;var n=parseFloat(t.progressWrapper[0].style[t._progressProperty]);var r;if(i.type!==k.CHUNK&&n>98){t.progressWrapper.addClass(p)}if(i.showStatus){if(i.type===k.VALUE){r=e}else if(i.type==k.PERCENT){r=t._calculatePercentage(e).toFixed()+"%"}else{r=S.floor(t._calculatePercentage(e))+"%"}t.progressStatus.text(r)}if(e===i.min){t.progressWrapper.hide()}},_onProgressUpdateAlways:function(e){var t=this;var i=t.options;if(t._isStarted){t.trigger(y,{value:e})}if(e===i.max&&t._isStarted){t.trigger(x,{value:i.max})}},enable:function(e){var t=this;var i=t.options;i.enable=typeof e==="undefined"?true:e;t.wrapper.toggleClass(w,!i.enable)},destroy:function(){var e=this;n.fn.destroy.call(e)},_addChunkProgressWrapper:function(){var e=this;var t=e.options;var i=e.wrapper;var n=A/t.chunkCount;var r="";if(t.chunkCount<=1){t.chunkCount=1}r+="<ul class='k-reset'>";for(var a=t.chunkCount-1;a>=0;a--){r+="<li class='k-item k-state-default'></li>"}r+="</ul>";i.append(r).find(".k-item").css(e._progressProperty,n+"%").first().addClass("k-first").end().last().addClass("k-last");e._normalizeChunkSize()},_normalizeChunkSize:function(){var e=this;var t=e.options;var i=e.wrapper.find(".k-item:last");var n=parseFloat(i[0].style[e._progressProperty]);var r=A-t.chunkCount*n;if(r>0){i.css(e._progressProperty,n+r+"%")}},_addRegularProgressWrapper:function(){var e=this;e.progressWrapper=t("<div class='"+v+"'></div>").appendTo(e.wrapper);if(e.options.showStatus){e.progressWrapper.append(M.progressStatus);e.progressStatus=e.wrapper.find("."+m)}},_calculateChunkSize:function(){var e=this;var t=e.options.chunkCount;var i=e.wrapper.find("ul.k-reset");return(parseInt(i.css(e._progressProperty),10)-(t-1))/t},_calculatePercentage:function(e){var t=this;var i=t.options;var n=e!==o?e:i.value;var r=i.min;var a=i.max;t._onePercent=S.abs((a-r)/100);return S.abs((n-r)/t._onePercent)},_progressAnimation:function(){var e=this;var t=e.options;var i=t.animation;if(i===false){e._animation={duration:0}}else{e._animation=T({duration:E},t.animation)}}});r.ui.plugin(R)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("pdf/pako",["kendo.core"],e)})(function(){(function(){kendo.pdf=kendo.pdf||{};kendo.pdf.supportsDeflate=function(){return window.pako&&typeof window.pako.deflate=="function"};kendo.pdf.deflate=function(e){return window.pako.deflate(e)}})();return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("pdf/core",["pdf/pako","kendo.core","kendo.color","kendo.drawing"],e)})(function(){(function(r){window.kendo.pdf=window.kendo.pdf||{};var B=r.support;var L=B.browser;var H=r.pdf;var h=r.drawing;var N=h.util;var c=r.geometry;var D=typeof Uint8Array!=="undefined"&&r.support.browser&&(!r.support.browser.msie||r.support.browser.version>9);var A=function(){var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{decode:function(e){var t=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),i=0,n=t.length,r=[];while(i<n){var a=f.indexOf(t.charAt(i++));var o=f.indexOf(t.charAt(i++));var s=f.indexOf(t.charAt(i++));var l=f.indexOf(t.charAt(i++));var d=a<<2|o>>>4;var u=(o&15)<<4|s>>>2;var c=(s&3)<<6|l;r.push(d);if(s!=64){r.push(u)}if(l!=64){r.push(c)}}return r},encode:function(e){var t=0,i=e.length;var n="";while(t<i){var r=e[t++];var a=e[t++];var o=e[t++];var s=r>>>2;var l=(r&3)<<4|a>>>4;var d=(a&15)<<2|o>>>6;var u=o&63;if(t-i==2){d=u=64}else if(t-i==1){u=64}n+=f.charAt(s)+f.charAt(l)+f.charAt(d)+f.charAt(u)}return n}}}();function S(n){var i=0,r=0;if(n==null){n=D?new Uint8Array(256):[]}else{r=n.length}var a=D?function(e){if(e>=n.length){var t=new Uint8Array(Math.max(e+256,n.length*2));t.set(n,0);n=t}}:function(){};var e=D?function(){return new Uint8Array(n.buffer,0,r)}:function(){return n};var t=D?function(e){if(typeof e=="string"){return C(e)}var t=e.length;a(i+t);n.set(e,i);i+=t;if(i>r){r=i}}:function(e){if(typeof e=="string"){return C(e)}for(var t=0;t<e.length;++t){d(e[t])}};var o=D?function(e,t){if(n.buffer.slice){return new Uint8Array(n.buffer.slice(e,e+t))}else{var i=new Uint8Array(t);i.set(new Uint8Array(n.buffer,e,t));return i}}:function(e,t){return n.slice(e,e+t)};function s(){return i>=r}function l(){return i<r?n[i++]:0}function d(e){a(i);n[i++]=e&255;if(i>r){r=i}}function u(){return l()<<8|l()}function c(e){d(e>>8);d(e)}function f(){var e=u();return e>=32768?e-65536:e}function h(e){c(e<0?e+65536:e)}function p(){return u()*65536+u()}function v(e){c(e>>>16&65535);c(e&65535)}function m(){var e=p();return e>=2147483648?e-4294967296:e}function g(e){v(e<0?e+4294967296:e)}function _(){return p()/65536}function b(e){v(Math.round(e*65536))}function w(){return m()/65536}function k(e){g(Math.round(e*65536))}function y(e){return S(e,l)}function x(e){return String.fromCharCode.apply(String,y(e))}function C(e){for(var t=0;t<e.length;++t){d(e.charCodeAt(t))}}function S(e,t){for(var i=new Array(e),n=0;n<e;++n){i[n]=t()}return i}var T={eof:s,readByte:l,writeByte:d,readShort:u,writeShort:c,readLong:p,writeLong:v,readFixed:_,writeFixed:b,readShort_:f,writeShort_:h,readLong_:m,writeLong_:g,readFixed_:w,writeFixed_:k,read:y,write:t,readString:x,writeString:C,times:S,get:e,slice:o,offset:function(e){if(e!=null){i=e;return T}return i},skip:function(e){i+=e},toString:function(){throw new Error("FIX CALLER.  BinaryStream is no longer convertible to string!")},length:function(){return r},saveExcursion:function(e){var t=i;try{return e()}finally{i=t}},writeBase64:function(e){if(window.atob){C(window.atob(e))}else{t(A.decode(e))}},base64:function(){return A.encode(e())}};return T}function O(e){var t=[],i=0,n=e.length,r,a;while(i<n){r=e.charCodeAt(i++);if(r>=55296&&r<=56319&&i<n){a=e.charCodeAt(i++);if((a&64512)==56320){t.push(((r&1023)<<10)+(a&1023)+65536)}else{t.push(r);i--}}else{t.push(r)}}return t}function V(e){return e.map(function(e){var t="";if(e>65535){e-=65536;t+=String.fromCharCode(e>>>10&1023|55296);e=56320|e&1023}t+=String.fromCharCode(e);return t}).join("")}function W(e){var t=window.atob(e);var i=new Uint8Array(t.length);for(var n=0;n<t.length;n++){i[n]=t.charCodeAt(n)}return i}function U(e){var t=new Uint8Array(e.length);for(var i=0;i<e.length;i++){t[i]=e[i]}return t}function j(e){if(window.atob){return W(e)}return U(A.decode(e))}function m(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function T(e){return Object.keys(e).sort(function(e,t){return e-t}).map(parseFloat)}function G(e){this.raw=e;this.scalerType=e.readLong();this.tableCount=e.readShort();this.searchRange=e.readShort();this.entrySelector=e.readShort();this.rangeShift=e.readShort();var t=this.tables={};for(var i=0;i<this.tableCount;++i){var n={tag:e.readString(4),checksum:e.readLong(),offset:e.readLong(),length:e.readLong()};t[n.tag]=n}}G.prototype={readTable:function(e,t){var i=this.tables[e];if(!i){throw new Error("Table "+e+" not found in directory")}return this[e]=i.table=new t(this,i)},render:function(e){var t=this;var i=Object.keys(e).length;var n=Math.pow(2,Math.floor(Math.log(i)/Math.LN2));var r=n*16;var a=Math.floor(Math.log(n)/Math.LN2);var o=i*16-r;var s=S();s.writeLong(this.scalerType);s.writeShort(i);s.writeShort(r);s.writeShort(a);s.writeShort(o);var l=i*16;var d=s.offset()+l;var u=null;var c=S();for(var f in e){if(m(e,f)){var h=e[f];s.writeString(f);s.writeLong(t.checksum(h));s.writeLong(d);s.writeLong(h.length);c.write(h);if(f=="head"){u=d}d+=h.length;while(d%4){c.writeByte(0);d++}}}s.write(c.get());var p=this.checksum(s.get());var v=2981146554-p;s.offset(u+8);s.writeLong(v);return s.get()},checksum:function(e){e=S(e);var t=0;while(!e.eof()){t+=e.readLong()}return t&4294967295}};function e(e){function t(e,t){this.definition=t;this.length=t.length;this.offset=t.offset;this.file=e;this.rawData=e.raw;this.parse(e.raw)}t.prototype.raw=function(){return this.rawData.slice(this.offset,this.length)};for(var i in e){if(m(e,i)){t[i]=t.prototype[i]=e[i]}}return t}var q=e({parse:function(e){e.offset(this.offset);this.version=e.readLong();this.revision=e.readLong();this.checkSumAdjustment=e.readLong();this.magicNumber=e.readLong();this.flags=e.readShort();this.unitsPerEm=e.readShort();this.created=e.read(8);this.modified=e.read(8);this.xMin=e.readShort_();this.yMin=e.readShort_();this.xMax=e.readShort_();this.yMax=e.readShort_();this.macStyle=e.readShort();this.lowestRecPPEM=e.readShort();this.fontDirectionHint=e.readShort_();this.indexToLocFormat=e.readShort_();this.glyphDataFormat=e.readShort_()},render:function(e){var t=S();t.writeLong(this.version);t.writeLong(this.revision);t.writeLong(0);t.writeLong(this.magicNumber);t.writeShort(this.flags);t.writeShort(this.unitsPerEm);t.write(this.created);t.write(this.modified);t.writeShort_(this.xMin);t.writeShort_(this.yMin);t.writeShort_(this.xMax);t.writeShort_(this.yMax);t.writeShort(this.macStyle);t.writeShort(this.lowestRecPPEM);t.writeShort_(this.fontDirectionHint);t.writeShort_(e);t.writeShort_(this.glyphDataFormat);return t.get()}});var K=e({parse:function(e){e.offset(this.offset);var t=this.file.head.indexToLocFormat;if(t===0){this.offsets=e.times(this.length/2,function(){return 2*e.readShort()})}else{this.offsets=e.times(this.length/4,e.readLong)}},offsetOf:function(e){return this.offsets[e]},lengthOf:function(e){return this.offsets[e+1]-this.offsets[e]},render:function(e){var t=S();var i=e[e.length-1]>65535;for(var n=0;n<e.length;++n){if(i){t.writeLong(e[n])}else{t.writeShort(e[n]/2)}}return{format:i?1:0,table:t.get()}}});var Y=e({parse:function(e){e.offset(this.offset);this.version=e.readLong();this.ascent=e.readShort_();this.descent=e.readShort_();this.lineGap=e.readShort_();this.advanceWidthMax=e.readShort();this.minLeftSideBearing=e.readShort_();this.minRightSideBearing=e.readShort_();this.xMaxExtent=e.readShort_();this.caretSlopeRise=e.readShort_();this.caretSlopeRun=e.readShort_();this.caretOffset=e.readShort_();e.skip(4*2);this.metricDataFormat=e.readShort_();this.numOfLongHorMetrics=e.readShort()},render:function(e){var t=S();t.writeLong(this.version);t.writeShort_(this.ascent);t.writeShort_(this.descent);t.writeShort_(this.lineGap);t.writeShort(this.advanceWidthMax);t.writeShort_(this.minLeftSideBearing);t.writeShort_(this.minRightSideBearing);t.writeShort_(this.xMaxExtent);t.writeShort_(this.caretSlopeRise);t.writeShort_(this.caretSlopeRun);t.writeShort_(this.caretOffset);t.write([0,0,0,0,0,0,0,0]);t.writeShort_(this.metricDataFormat);t.writeShort(e.length);return t.get()}});var Q=e({parse:function(e){e.offset(this.offset);this.version=e.readLong();this.numGlyphs=e.readShort();this.maxPoints=e.readShort();this.maxContours=e.readShort();this.maxComponentPoints=e.readShort();this.maxComponentContours=e.readShort();this.maxZones=e.readShort();this.maxTwilightPoints=e.readShort();this.maxStorage=e.readShort();this.maxFunctionDefs=e.readShort();this.maxInstructionDefs=e.readShort();this.maxStackElements=e.readShort();this.maxSizeOfInstructions=e.readShort();this.maxComponentElements=e.readShort();this.maxComponentDepth=e.readShort()},render:function(e){var t=S();t.writeLong(this.version);t.writeShort(e.length);t.writeShort(this.maxPoints);t.writeShort(this.maxContours);t.writeShort(this.maxComponentPoints);t.writeShort(this.maxComponentContours);t.writeShort(this.maxZones);t.writeShort(this.maxTwilightPoints);t.writeShort(this.maxStorage);t.writeShort(this.maxFunctionDefs);t.writeShort(this.maxInstructionDefs);t.writeShort(this.maxStackElements);t.writeShort(this.maxSizeOfInstructions);t.writeShort(this.maxComponentElements);t.writeShort(this.maxComponentDepth);return t.get()}});var X=e({parse:function(e){e.offset(this.offset);var t=this.file,i=t.hhea;this.metrics=e.times(i.numOfLongHorMetrics,function(){return{advance:e.readShort(),lsb:e.readShort_()}});var n=t.maxp.numGlyphs-t.hhea.numOfLongHorMetrics;this.leftSideBearings=e.times(n,e.readShort_)},forGlyph:function(e){var t=this.metrics;var i=t.length;if(e<i){return t[e]}return{advance:t[i-1].advance,lsb:this.leftSideBearings[e-i]}},render:function(e){var t=this;var i=S();for(var n=0;n<e.length;++n){var r=t.forGlyph(e[n]);i.writeShort(r.advance);i.writeShort_(r.lsb)}return i.get()}});var Z=function(){function h(e){this.raw=e}h.prototype={compound:false,render:function(){return this.raw.get()}};var r=1;var a=8;var o=32;var s=64;var l=128;function p(e){this.raw=e;var t=this.glyphIds=[];var i=this.idOffsets=[];while(true){var n=e.readShort();i.push(e.offset());t.push(e.readShort());if(!(n&o)){break}e.skip(n&r?4:2);if(n&l){e.skip(8)}else if(n&s){e.skip(4)}else if(n&a){e.skip(2)}}}p.prototype={compound:true,render:function(e){var t=this;var i=S(this.raw.get());for(var n=0;n<this.glyphIds.length;++n){var r=t.glyphIds[n];i.offset(t.idOffsets[n]);i.writeShort(e[r])}return i.get()}};return e({parse:function(){this.cache={}},glyphFor:function(e){var t=this.cache;if(m(t,e)){return t[e]}var i=this.file.loca;var n=i.lengthOf(e);if(n===0){return t[e]=null}var r=this.rawData;var a=this.offset+i.offsetOf(e);var o=S(r.slice(a,n));var s=o.readShort_();var l=o.readShort_();var d=o.readShort_();var u=o.readShort_();var c=o.readShort_();var f=t[e]=s==-1?new p(o):new h(o);f.numberOfContours=s;f.xMin=l;f.yMin=d;f.xMax=u;f.yMax=c;return f},render:function(e,t,i){var n=S(),r=[];for(var a=0;a<t.length;++a){var o=t[a];var s=e[o];r.push(n.offset());if(s){n.write(s.render(i))}}r.push(n.offset());return{table:n.get(),offsets:r}}})}();var J=function(){function u(e,t){this.text=e;this.length=e.length;this.platformID=t.platformID;this.platformSpecificID=t.platformSpecificID;this.languageID=t.languageID;this.nameID=t.nameID}return e({parse:function(e){e.offset(this.offset);e.readShort();var t=e.readShort();var i=this.offset+e.readShort();var n=e.times(t,function(){return{platformID:e.readShort(),platformSpecificID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:e.readShort()+i}});var r=this.strings={};for(var a=0;a<n.length;++a){var o=n[a];e.offset(o.offset);var s=e.readString(o.length);if(!r[o.nameID]){r[o.nameID]=[]}r[o.nameID].push(new u(s,o))}this.postscriptEntry=r[6][0];this.postscriptName=this.postscriptEntry.text.replace(/[^\x20-\x7F]/g,"")},render:function(e){var t=this;var i=this.strings;var n=0;for(var r in i){if(m(i,r)){n+=i[r].length}}var a=S();var o=S();a.writeShort(0);a.writeShort(n);a.writeShort(6+12*n);for(r in i){if(m(i,r)){var s=r==6?[new u(e,t.postscriptEntry)]:i[r];for(var l=0;l<s.length;++l){var d=s[l];a.writeShort(d.platformID);a.writeShort(d.platformSpecificID);a.writeShort(d.languageID);a.writeShort(d.nameID);a.writeShort(d.length);a.writeShort(o.offset());o.writeString(d.text)}}}a.write(o.get());return a.get()}})}();var ee=function(){var d=".notdef .null nonmarkingreturn space exclam quotedbl numbersign dollar percent ampersand quotesingle parenleft parenright asterisk plus comma hyphen period slash zero one two three four five six seven eight nine colon semicolon less equal greater question at A B C D E F G H I J K L M N O P Q R S T U V W X Y Z bracketleft backslash bracketright asciicircum underscore grave a b c d e f g h i j k l m n o p q r s t u v w x y z braceleft bar braceright asciitilde Adieresis Aring Ccedilla Eacute Ntilde Odieresis Udieresis aacute agrave acircumflex adieresis atilde aring ccedilla eacute egrave ecircumflex edieresis iacute igrave icircumflex idieresis ntilde oacute ograve ocircumflex odieresis otilde uacute ugrave ucircumflex udieresis dagger degree cent sterling section bullet paragraph germandbls registered copyright trademark acute dieresis notequal AE Oslash infinity plusminus lessequal greaterequal yen mu partialdiff summation product pi integral ordfeminine ordmasculine Omega ae oslash questiondown exclamdown logicalnot radical florin approxequal Delta guillemotleft guillemotright ellipsis nonbreakingspace Agrave Atilde Otilde OE oe endash emdash quotedblleft quotedblright quoteleft quoteright divide lozenge ydieresis Ydieresis fraction currency guilsinglleft guilsinglright fi fl daggerdbl periodcentered quotesinglbase quotedblbase perthousand Acircumflex Ecircumflex Aacute Edieresis Egrave Iacute Icircumflex Idieresis Igrave Oacute Ocircumflex apple Ograve Uacute Ucircumflex Ugrave dotlessi circumflex tilde macron breve dotaccent ring cedilla hungarumlaut ogonek caron Lslash lslash Scaron scaron Zcaron zcaron brokenbar Eth eth Yacute yacute Thorn thorn minus multiply onesuperior twosuperior threesuperior onehalf onequarter threequarters franc Gbreve gbreve Idotaccent Scedilla scedilla Cacute cacute Ccaron ccaron dcroat".split(/\s+/g);return e({parse:function(e){var t=this;e.offset(this.offset);this.format=e.readLong();this.italicAngle=e.readFixed_();this.underlinePosition=e.readShort_();this.underlineThickness=e.readShort_();this.isFixedPitch=e.readLong();this.minMemType42=e.readLong();this.maxMemType42=e.readLong();this.minMemType1=e.readLong();this.maxMemType1=e.readLong();var i;switch(this.format){case 65536:case 196608:break;case 131072:i=e.readShort();this.glyphNameIndex=e.times(i,e.readShort);this.names=[];var n=this.offset+this.length;while(e.offset()<n){t.names.push(e.readString(e.readByte()))}break;case 151552:i=e.readShort();this.offsets=e.read(i);break;case 262144:this.map=e.times(this.file.maxp.numGlyphs,e.readShort);break}},glyphFor:function(e){switch(this.format){case 65536:return d[e]||".notdef";case 131072:var t=this.glyphNameIndex[e];if(t<d.length){return d[t]}return this.names[t-d.length]||".notdef";case 151552:case 196608:return".notdef";case 262144:return this.map[e]||65535}},render:function(e){var t=this;if(this.format==196608){return this.raw()}var i=S(this.rawData.slice(this.offset,32));i.writeLong(131072);i.offset(32);var n=[];var r=[];for(var a=0;a<e.length;++a){var o=e[a];var s=t.glyphFor(o);var l=d.indexOf(s);if(l>=0){n.push(l)}else{n.push(d.length+r.length);r.push(s)}}i.writeShort(e.length);for(a=0;a<n.length;++a){i.writeShort(n[a])}for(a=0;a<r.length;++a){i.writeByte(r[a].length);i.writeString(r[a])}return i.get()}})}();var te=function(){function r(g,e,_){var b=this;b.platformID=g.readShort();b.platformSpecificID=g.readShort();b.offset=e+g.readLong();g.saveExcursion(function(){var e;g.offset(b.offset);b.format=g.readShort();switch(b.format){case 0:b.length=g.readShort();b.language=g.readShort();for(var t=0;t<256;++t){_[t]=g.readByte()}break;case 4:b.length=g.readShort();b.language=g.readShort();var i=g.readShort()/2;g.skip(6);var n=g.times(i,g.readShort);g.skip(2);var r=g.times(i,g.readShort);var a=g.times(i,g.readShort_);var o=g.times(i,g.readShort);var s=(b.length+b.offset-g.offset())/2;var l=g.times(s,g.readShort);for(t=0;t<i;++t){var d=r[t],u=n[t];for(e=d;e<=u;++e){var c;if(o[t]===0){c=e+a[t]}else{var f=o[t]/2-(i-t)+(e-d);c=l[f]||0;if(c!==0){c+=a[t]}}_[e]=c&65535}}break;case 6:b.length=g.readShort();b.language=g.readShort();e=g.readShort();var h=g.readShort();while(h-- >0){_[e++]=g.readShort()}break;case 12:g.readShort();b.length=g.readLong();b.language=g.readLong();var p=g.readLong();while(p-- >0){e=g.readLong();var v=g.readLong();var m=g.readLong();while(e<=v){_[e++]=m++}}break;default:if(window.console){window.console.error("Unhandled CMAP format: "+b.format)}}})}function n(t,i){var e=T(t);var n=[];var r=[];var a=null;var o=null;function s(e){return i[t[e]]}for(var l=0;l<e.length;++l){var d=e[l];var u=s(d);var c=u-d;if(a==null||c!==o){if(a){r.push(a)}n.push(d);o=c}a=d}if(a){r.push(a)}r.push(65535);n.push(65535);var f=n.length;var h=f*2;var p=2*Math.pow(2,Math.floor(Math.log(f)/Math.LN2));var v=Math.log(p/2)/Math.LN2;var m=h-p;var g=[];var _=[];var b=[];for(l=0;l<f;++l){var w=n[l];var k=r[l];if(w==65535){g.push(0);_.push(0);break}var y=s(w);if(w-y>=32768){g.push(0);_.push(2*(b.length+f-l));for(var x=w;x<=k;++x){b.push(s(x))}}else{g.push(y-w);_.push(0)}}var C=S();C.writeShort(3);C.writeShort(1);C.writeLong(12);C.writeShort(4);C.writeShort(16+f*8+b.length*2);C.writeShort(0);C.writeShort(h);C.writeShort(p);C.writeShort(v);C.writeShort(m);r.forEach(C.writeShort);C.writeShort(0);n.forEach(C.writeShort);g.forEach(C.writeShort_);_.forEach(C.writeShort);b.forEach(C.writeShort);return C.get()}return e({parse:function(e){var t=this;var i=t.offset;e.offset(i);t.codeMap={};t.version=e.readShort();var n=e.readShort();t.tables=e.times(n,function(){return new r(e,i,t.codeMap)})},render:function(e,t){var i=S();i.writeShort(0);i.writeShort(1);i.write(n(e,t));return i.get()}})}();var ie=e({parse:function(e){e.offset(this.offset);this.version=e.readShort();this.averageCharWidth=e.readShort_();this.weightClass=e.readShort();this.widthClass=e.readShort();this.type=e.readShort();this.ySubscriptXSize=e.readShort_();this.ySubscriptYSize=e.readShort_();this.ySubscriptXOffset=e.readShort_();this.ySubscriptYOffset=e.readShort_();this.ySuperscriptXSize=e.readShort_();this.ySuperscriptYSize=e.readShort_();this.ySuperscriptXOffset=e.readShort_();this.ySuperscriptYOffset=e.readShort_();this.yStrikeoutSize=e.readShort_();this.yStrikeoutPosition=e.readShort_();this.familyClass=e.readShort_();this.panose=e.times(10,e.readByte);this.charRange=e.times(4,e.readLong);this.vendorID=e.readString(4);this.selection=e.readShort();this.firstCharIndex=e.readShort();this.lastCharIndex=e.readShort();if(this.version>0){this.ascent=e.readShort_();this.descent=e.readShort_();this.lineGap=e.readShort_();this.winAscent=e.readShort();this.winDescent=e.readShort();this.codePageRange=e.times(2,e.readLong);if(this.version>1){this.xHeight=e.readShort();this.capHeight=e.readShort();this.defaultChar=e.readShort();this.breakChar=e.readShort();this.maxContext=e.readShort()}}},render:function(){return this.raw()}});var ne=1e5;function re(){var e="",t=String(ne);for(var i=0;i<t.length;++i){e+=String.fromCharCode(t.charCodeAt(i)-48+65)}++ne;return e}function ae(e){this.font=e;this.subset={};this.unicodes={};this.ogid2ngid={0:0};this.ngid2ogid={0:0};this.ncid2ogid={};this.next=this.firstChar=1;this.nextGid=1;this.psName=re()+"+"+this.font.psName}ae.prototype={use:function(e){var i=this;if(typeof e=="string"){return O(e).reduce(function(e,t){return e+String.fromCharCode(i.use(t))},"")}var t=i.unicodes[e];if(!t){t=i.next++;i.subset[t]=e;i.unicodes[e]=t;var n=i.font.cmap.codeMap[e];if(n){i.ncid2ogid[t]=n;if(i.ogid2ngid[n]==null){var r=i.nextGid++;i.ogid2ngid[n]=r;i.ngid2ogid[r]=n}}}return t},encodeText:function(e){return this.use(e)},glyphIds:function(){return T(this.ogid2ngid)},glyphsFor:function(e,t){var i=this;if(!t){t={}}for(var n=0;n<e.length;++n){var r=e[n];if(!t[r]){var a=t[r]=i.font.glyf.glyphFor(r);if(a&&a.compound){i.glyphsFor(a.glyphIds,t)}}}return t},render:function(){var e=this;var t=this.glyphsFor(this.glyphIds());for(var i in t){if(m(t,i)){i=parseInt(i,10);if(e.ogid2ngid[i]==null){var n=e.nextGid++;e.ogid2ngid[i]=n;e.ngid2ogid[n]=i}}}var r=T(this.ngid2ogid);var a=r.map(function(e){return this.ngid2ogid[e]},this);var o=this.font;var s=o.glyf.render(t,a,this.ogid2ngid);var l=o.loca.render(s.offsets);this.lastChar=this.next-1;var d={cmap:te.render(this.ncid2ogid,this.ogid2ngid),glyf:s.table,loca:l.table,hmtx:o.hmtx.render(a),hhea:o.hhea.render(a),maxp:o.maxp.render(a),post:o.post.render(a),name:o.name.render(this.psName),head:o.head.render(l.format),"OS/2":o.os2.render()};return this.font.directory.render(d)},cidToGidMap:function(){var e=this;var t=S(),i=0;for(var n=this.firstChar;n<this.next;++n){while(i<n){t.writeShort(0);i++}var r=e.ncid2ogid[n];if(r){var a=e.ogid2ngid[r];t.writeShort(a)}else{t.writeShort(0)}i++}return t.get()}};function oe(e,t){var i=this;var n=i.contents=S(e);if(n.readString(4)=="ttcf"){var r;var a=function(){n.offset(r);i.parse()};if(!t){throw new Error("Must specify a name for TTC files")}n.readLong();var o=n.readLong();for(var s=0;s<o;++s){r=n.readLong();n.saveExcursion(a);if(i.psName==t){return}}throw new Error("Font "+t+" not found in collection")}else{n.offset(0);i.parse()}}oe.prototype={parse:function(){var e=this.directory=new G(this.contents);this.head=e.readTable("head",q);this.loca=e.readTable("loca",K);this.hhea=e.readTable("hhea",Y);this.maxp=e.readTable("maxp",Q);this.hmtx=e.readTable("hmtx",X);this.glyf=e.readTable("glyf",Z);this.name=e.readTable("name",J);this.post=e.readTable("post",ee);this.cmap=e.readTable("cmap",te);this.os2=e.readTable("OS/2",ie);this.psName=this.name.postscriptName;this.ascent=this.os2.ascent||this.hhea.ascent;this.descent=this.os2.descent||this.hhea.descent;this.lineGap=this.os2.lineGap||this.hhea.lineGap;this.scale=1e3/this.head.unitsPerEm},widthOfGlyph:function(e){return this.hmtx.forGlyph(e).advance*this.scale},makeSubset:function(){return new ae(this)}};var se=String.fromCharCode;var le="";function o(e){return se(e>>8)+se(e&255)}function de(e){var t="";for(var i=0;i<e.length;i++){var n=e.charCodeAt(i);if(n<65535){t+=o(n)}else{var r=(n-65536>>10)+55296;var a=(n-65536&1023)+56320;t+=o(r);t+=o(a)}}return t}var ue=r.support.browser;var l="\n";var u=0;var ce={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],executive:[521.86,756],folio:[612,936],legal:[612,1008],letter:[612,792],tabloid:[792,1224]};function p(){var t=0,r=S();function a(){var e=arguments;for(var t=0;t<arguments.length;++t){var i=e[t];if(i===undefined){throw new Error("Cannot output undefined to PDF")}else if(i instanceof w){i.beforeRender(a);i.render(a)}else if(we(i)){ye(i,a)}else if(ke(i)){xe(i,a)}else if(typeof i=="number"){if(isNaN(i)){throw new Error("Cannot output NaN to PDF")}var n=i.toFixed(7);if(n.indexOf(".")>=0){n=n.replace(/\.?0+$/,"")}if(n=="-0"){n="0"}r.writeString(n)}else if(/string|boolean/.test(typeof i)){r.writeString(String(i))}else if(typeof i.get=="function"){r.write(i.get())}else if(typeof i=="object"){if(!i){r.writeString("null")}else{a(new x(i))}}}}a.writeData=function(e){r.write(e)};a.withIndent=function(e){++t;e(a);--t};a.indent=function(){a(l,be("",t*2,"  "));a.apply(null,arguments)};a.offset=function(){return r.offset()};a.toString=function(){throw new Error("FIX CALLER")};a.get=function(){return r.get()};a.stream=function(){return r};return a}function fe(t,i){var n=t.beforeRender;var r=t.render;t.beforeRender=function(){};t.render=function(e){e(i," 0 R")};t.renderFull=function(e){t._offset=e.offset();e(i," 0 obj ");n.call(t,e);r.call(t,e);e(" endobj")}}function he(e){if(typeof e!="function"){var i=e;e=function(e,t){return e in i?i[e]:t}}var t=e("paperSize",ce.a4);if(!t){return{}}if(typeof t=="string"){t=ce[t.toLowerCase()];if(t==null){throw new Error("Unknown paper size")}}t[0]=b(t[0]);t[1]=b(t[1]);if(e("landscape",false)){t=[Math.max(t[0],t[1]),Math.min(t[0],t[1])]}var n=e("margin");if(n){if(typeof n=="string"||typeof n=="number"){n=b(n,0);n={left:n,top:n,right:n,bottom:n}}else{n={left:b(n.left,0),top:b(n.top,0),right:b(n.right,0),bottom:b(n.bottom,0)}}if(e("addMargin")){t[0]+=n.left+n.right;t[1]+=n.top+n.bottom}}return{paperSize:t,margin:n}}function f(i){var d=this;var n=p();var t=0;var r=[];function e(e,t){return i&&i[e]!=null?i[e]:t}d.getOption=e;d.attach=function(e){if(r.indexOf(e)<0){fe(e,++t);r.push(e)}return e};d.pages=[];d.FONTS={};d.IMAGES={};d.GRAD_COL_FUNCTIONS={};d.GRAD_OPC_FUNCTIONS={};d.GRAD_COL={};d.GRAD_OPC={};var a=d.attach(new Ee);var u=d.attach(new Ie);if(e("autoPrint")){var o={};o.JavaScript=new x({Names:[new k("JS"),d.attach(new x({S:y("JavaScript"),JS:new k("print(true);")}))]});a.props.Names=new x(o)}a.setPages(u);var s=d.attach(new x({Producer:new k(e("producer","Kendo UI PDF Generator"),true),Title:new k(e("title",""),true),Author:new k(e("author",""),true),Subject:new k(e("subject",""),true),Keywords:new k(e("keywords",""),true),Creator:new k(e("creator","Kendo UI PDF Generator"),true),CreationDate:e("date",new Date)}));d.addPage=function(i){var e=he(function(e,t){return i&&i[e]!=null?i[e]:t});var t=e.paperSize;var n=e.margin;var r=t[0];var a=t[1];if(n){r-=n.left+n.right;a-=n.top+n.bottom}var o=new C(p(),null,true);var s={Contents:d.attach(o),Parent:u,MediaBox:[0,0,t[0],t[1]]};var l=new We(d,s);l._content=o;u.addPage(d.attach(l));l.transform(1,0,0,-1,0,t[1]);if(n){l.translate(n.left,n.top);l.rect(0,0,r,a);l.clip()}d.pages.push(l);return l};d.render=function(){var e;n("%PDF-1.4",l,"%",l,l);for(e=0;e<r.length;++e){r[e].renderFull(n);n(l,l)}var t=n.offset();n("xref",l,0," ",r.length+1,l);n("0000000000 65535 f ",l);for(e=0;e<r.length;++e){n(g(r[e]._offset,10)," 00000 n ",l)}n(l);n("trailer",l);n(new x({Size:r.length+1,Root:a,Info:s}),l,l);n("startxref",l,t,l);n("%%EOF",l);return n.stream().offset(0)}}var a={"Times-Roman":true,"Times-Bold":true,"Times-Italic":true,"Times-BoldItalic":true,Helvetica:true,"Helvetica-Bold":true,"Helvetica-Oblique":true,"Helvetica-BoldOblique":true,Courier:true,"Courier-Bold":true,"Courier-Oblique":true,"Courier-BoldOblique":true,Symbol:true,ZapfDingbats:true};function pe(e,t){var i;if(ue.msie&&(i=/^data:.*?;base64,/i.exec(e))){t(j(e.substr(i[0].length)));return}function n(){if(window.console){if(window.console.error){window.console.error("Cannot load URL: %s",e)}else{window.console.log("Cannot load URL: %s",e)}}t(null)}var r=new XMLHttpRequest;r.open("GET",e,true);if(D){r.responseType="arraybuffer"}r.onload=function(){if(r.status==200||r.status==304){if(D){t(new Uint8Array(r.response))}else{t(new window.VBArray(r.responseBody).toArray())}}else{n()}};r.onerror=n;r.send(null)}function ve(i,n){var e=a[i];if(e){n(e)}else{pe(i,function(e){if(e==null){throw new Error("Cannot load font from "+i)}else{var t=new oe(e);a[i]=t;n(t)}})}}var _={};function me(){_={}}function ge(c,f,h,p){var v=_[c],m,t;if(v){h(v)}else{v=new Image;if(!/^data:/i.test(c)){v.crossOrigin="Anonymous"}if(D&&!/^data:/i.test(c)){var e=new XMLHttpRequest;e.onload=function(){t=e.response;m=URL.createObjectURL(t);i(m)};e.onerror=g;e.open("GET",c,true);e.responseType="blob";e.send()}else{i(c)}}function i(e){v.src=e;if(v.complete&&!ue.msie){r()}else{v.onload=r;v.onerror=g}}function n(){if(!f){f={width:v.width,height:v.height}}var e=document.createElement("canvas");e.width=f.width;e.height=f.height;var t=e.getContext("2d");t.drawImage(v,0,0,f.width,f.height);var i;try{i=t.getImageData(0,0,f.width,f.height)}catch(e){g();return}finally{if(m){URL.revokeObjectURL(m)}}var n=false,r=S(),a=S();var o=i.data;var s=0;while(s<o.length){r.writeByte(o[s++]);r.writeByte(o[s++]);r.writeByte(o[s++]);var l=o[s++];if(l<255){n=true}a.writeByte(l)}if(n||p.keepPNG){v=new Fe(f.width,f.height,r,a)}else{var d=e.toDataURL("image/jpeg",p.jpegQuality);d=d.substr(d.indexOf(";base64,")+8);var u=S();u.writeBase64(d);v=new Re(u)}h(_[c]=v)}function g(){h(_[c]="ERROR")}function r(){if(f){if(f.width>=v.width||f.height>=v.height){f=null}}if(!f&&t&&/^image\/jpe?g$/i.test(t.type)){var e=new FileReader;e.onload=function(){try{var e=new Re(S(new Uint8Array(this.result)));URL.revokeObjectURL(m);h(_[c]=e)}catch(e){n()}};e.readAsArrayBuffer(t)}else{n()}}}function _e(a){return function(e,t){var i=e.length,n=i;if(i===0){return t()}function r(){if(--i===0){t()}}while(n-- >0){a(e[n],r)}}}var d=_e(ve);var v=function(t,e,i){i=$.extend({jpegQuality:.92,keepPNG:false},i);var n=Object.keys(t),r=n.length;if(r===0){return e()}function a(){if(--r===0){e()}}n.forEach(function(e){ge(e,t[e],a,i)})};f.prototype={loadFonts:d,loadImages:v,getFont:function(e){var t=this.FONTS[e];if(!t){t=a[e];if(!t){throw new Error("Font "+e+" has not been loaded")}if(t===true){t=this.attach(new Pe(e))}else{t=this.attach(new E(this,t))}this.FONTS[e]=t}return t},getImage:function(e){var t=this.IMAGES[e];if(!t){t=_[e];if(!t){throw new Error("Image "+e+" has not been loaded")}if(t==="ERROR"){return null}t=this.IMAGES[e]=this.attach(t.asStream(this))}return t},getOpacityGS:function(e,t){var i=parseFloat(e).toFixed(3);e=parseFloat(i);i+=t?"S":"F";var n=this._opacityGSCache||(this._opacityGSCache={});var r=n[i];if(!r){var a={Type:y("ExtGState")};if(t){a.CA=e}else{a.ca=e}r=this.attach(new x(a));r._resourceName=y("GS"+ ++u);n[i]=r}return r},dict:function(e){return new x(e)},name:function(e){return y(e)},stream:function(e,t){return new C(t,e)}};function be(e,t,i){while(e.length<t){e=i+e}return e}function g(e,t){return be(String(e),t,"0")}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var we=Array.isArray||function(e){return e instanceof Array};function ke(e){return e instanceof Date}function ye(t,i){i("[");if(t.length>0){i.withIndent(function(){for(var e=0;e<t.length;++e){if(e>0&&e%8===0){i.indent(t[e])}else{i(" ",t[e])}}})}i(" ]")}function xe(e,t){t("(D:",g(e.getUTCFullYear(),4),g(e.getUTCMonth()+1,2),g(e.getUTCDate(),2),g(e.getUTCHours(),2),g(e.getUTCMinutes(),2),g(e.getUTCSeconds(),2),"Z)")}function Ce(e){return e*(72/25.4)}function Se(e){return Ce(e*10)}function Te(e){return e*72}function b(e,t){if(typeof e=="number"){return e}if(typeof e=="string"){var i;i=/^\s*([0-9.]+)\s*(mm|cm|in|pt)\s*$/.exec(e);if(i){var n=parseFloat(i[1]);if(!isNaN(n)){if(i[2]=="pt"){return n}return{mm:Ce,cm:Se,in:Te}[i[2]](n)}}}if(t!=null){return t}throw new Error("Can't parse unit: "+e)}function w(){}w.prototype.beforeRender=function(){};function t(e,t,i){if(!i){i=w}e.prototype=new i;for(var n in t){if(s(t,n)){e.prototype[n]=t[n]}}return e}var k=t(function e(t,i){this.value=t;this.utf16be=Boolean(i)},{render:function(e){var t=this.value;if(this.utf16be){t=le+de(t);t=t.replace(/([\(\)\\])/g,"\\$1");e("(",t,")")}else{var i=[40];for(var n=0;n<t.length;++n){var r=t.charCodeAt(n)&255;if(r==40||r==41||r==92){i.push(92)}i.push(r)}i.push(41);e.writeData(i)}},toString:function(){return this.value}});var De=t(function e(t){this.value=t},{render:function(e){var t=this;e("<");for(var i=0;i<this.value.length;++i){e(g(t.value.charCodeAt(i).toString(16),4))}e(">")}},k);var Ae=t(function e(t){this.name=t},{render:function(e){e("/"+this.escape())},escape:function(){return this.name.replace(/[^\x21-\x7E]/g,function(e){return"#"+g(e.charCodeAt(0).toString(16),2)})},toString:function(){return this.name}});var i={};Ae.get=y;function y(e){if(s(i,e)){return i[e]}return i[e]=new Ae(e)}var x=t(function e(t){this.props=t},{render:function(t){var i=this.props,n=true;t("<<");t.withIndent(function(){for(var e in i){if(s(i,e)&&!/^_/.test(e)){n=false;t.indent(y(e)," ",i[e])}}});if(!n){t.indent()}t(">>")}});var C=t(function e(t,i,n){if(typeof t=="string"){var r=S();r.write(t);t=r}this.data=t;this.props=i||{};this.compress=n},{render:function(e){var t=this.data.get(),i=this.props;if(this.compress&&H.supportsDeflate()){if(!i.Filter){i.Filter=[]}else if(!(i.Filter instanceof Array)){i.Filter=[i.Filter]}i.Filter.unshift(y("FlateDecode"));t=H.deflate(t)}i.Length=t.length;e(new x(i)," stream",l);e.writeData(t);e(l,"endstream")}});var Ee=t(function e(){this.props={Type:y("Catalog")}},{setPages:function(e){this.props.Pages=e}},x);var Ie=t(function e(){this.props={Type:y("Pages"),Kids:[],Count:0}},{addPage:function(e){this.props.Kids.push(e);this.props.Count++}},x);var Me=[192,193,194,195,197,198,199,201,202,203,205,206,207];function Re(t){t.offset(0);var e,i,n,r;var a=t.readShort();if(a!=65496){throw new Error("Invalid JPEG image")}while(!t.eof()){var o=t.readByte();if(o!=255){throw new Error("Invalid JPEG image")}var s=t.readByte();var l=t.readShort();if(Me.indexOf(s)>=0){r=t.readByte();i=t.readShort();e=t.readShort();n=t.readByte();break}t.skip(l-2)}if(n==null){throw new Error("Invalid JPEG image")}var d={Type:y("XObject"),Subtype:y("Image"),Width:e,Height:i,BitsPerComponent:r,Filter:y("DCTDecode")};switch(n){case 1:d.ColorSpace=y("DeviceGray");break;case 3:d.ColorSpace=y("DeviceRGB");break;case 4:d.ColorSpace=y("DeviceCMYK");d.Decode=[1,0,1,0,1,0,1,0];break}this.asStream=function(){t.offset(0);var e=new C(t,d);e._resourceName=y("I"+ ++u);return e}}function Fe(n,r,a,o){this.asStream=function(e){var t=new C(o,{Type:y("XObject"),Subtype:y("Image"),Width:n,Height:r,BitsPerComponent:8,ColorSpace:y("DeviceGray")},true);var i=new C(a,{Type:y("XObject"),Subtype:y("Image"),Width:n,Height:r,BitsPerComponent:8,ColorSpace:y("DeviceRGB"),SMask:e.attach(t)},true);i._resourceName=y("I"+ ++u);return i}}var Pe=t(function e(t){this.props={Type:y("Font"),Subtype:y("Type1"),BaseFont:y(t)};this._resourceName=y("F"+ ++u)},{encodeText:function(e){return new k(String(e))}},x);var E=t(function e(t,i,n){n=this.props=n||{};n.Type=y("Font");n.Subtype=y("Type0");n.Encoding=y("Identity-H");this._pdf=t;this._font=i;this._sub=i.makeSubset();this._resourceName=y("F"+ ++u);var r=i.head;this.name=i.psName;var a=this.scale=i.scale;this.bbox=[r.xMin*a,r.yMin*a,r.xMax*a,r.yMax*a];this.italicAngle=i.post.italicAngle;this.ascent=i.ascent*a;this.descent=i.descent*a;this.lineGap=i.lineGap*a;this.capHeight=i.os2.capHeight||this.ascent;this.xHeight=i.os2.xHeight||0;this.stemV=0;this.familyClass=(i.os2.familyClass||0)>>8;this.isSerif=this.familyClass>=1&&this.familyClass<=7;this.isScript=this.familyClass==10;this.flags=(i.post.isFixedPitch?1:0)|(this.isSerif?1<<1:0)|(this.isScript?1<<3:0)|(this.italicAngle!==0?1<<6:0)|1<<5},{encodeText:function(e){return new De(this._sub.encodeText(String(e)))},getTextWidth:function(e,t){var i=this;var n=0,r=this._font.cmap.codeMap;for(var a=0;a<t.length;++a){var o=r[t.charCodeAt(a)];n+=i._font.widthOfGlyph(o||0)}return n*e/1e3},beforeRender:function(){var r=this;var e=r._sub;var t=e.render();var i=new C(S(t),{Length1:t.length},true);var n=r._pdf.attach(new x({Type:y("FontDescriptor"),FontName:y(r._sub.psName),FontBBox:r.bbox,Flags:r.flags,StemV:r.stemV,ItalicAngle:r.italicAngle,Ascent:r.ascent,Descent:r.descent,CapHeight:r.capHeight,XHeight:r.xHeight,FontFile2:r._pdf.attach(i)}));var a=e.ncid2ogid;var o=e.firstChar;var s=e.lastChar;var l=[];(function e(t,i){if(t<=s){var n=a[t];if(n==null){e(t+1)}else{if(!i){l.push(t,i=[])}i.push(r._font.widthOfGlyph(n));e(t+1,i)}}})(o);var d=new x({Type:y("Font"),Subtype:y("CIDFontType2"),BaseFont:y(r._sub.psName),CIDSystemInfo:new x({Registry:new k("Adobe"),Ordering:new k("Identity"),Supplement:0}),FontDescriptor:n,FirstChar:o,LastChar:s,DW:Math.round(r._font.widthOfGlyph(0)),W:l,CIDToGIDMap:r._pdf.attach(r._makeCidToGidMap())});var u=r.props;u.BaseFont=y(r._sub.psName);u.DescendantFonts=[r._pdf.attach(d)];var c=new ze(o,s,e.subset);var f=new C(p(),null,true);f.data(c);u.ToUnicode=r._pdf.attach(f)},_makeCidToGidMap:function(){return new C(S(this._sub.cidToGidMap()),null,true)}},x);var ze=t(function e(t,i,n){this.firstChar=t;this.lastChar=i;this.map=n},{render:function(r){r.indent("/CIDInit /ProcSet findresource begin");r.indent("12 dict begin");r.indent("begincmap");r.indent("/CIDSystemInfo <<");r.indent("  /Registry (Adobe)");r.indent("  /Ordering (UCS)");r.indent("  /Supplement 0");r.indent(">> def");r.indent("/CMapName /Adobe-Identity-UCS def");r.indent("/CMapType 2 def");r.indent("1 begincodespacerange");r.indent("  <0000><ffff>");r.indent("endcodespacerange");var a=this;r.indent(a.lastChar-a.firstChar+1," beginbfchar");r.withIndent(function(){for(var e=a.firstChar;e<=a.lastChar;++e){var t=a.map[e];var i=V([t]);r.indent("<",g(e.toString(16),4),">","<");for(var n=0;n<i.length;++n){r(g(i.charCodeAt(n).toString(16),4))}r(">")}});r.indent("endbfchar");r.indent("endcmap");r.indent("CMapName currentdict /CMap defineresource pop");r.indent("end");r.indent("end")}});function I(e){return e.map(function(e){return we(e)?I(e):typeof e=="number"?(Math.round(e*1e3)/1e3).toFixed(3):e}).join(" ")}function Be(e,t,i,n,r,a,o){var s=I([t,i,n,r,a,o]);var l=e.GRAD_COL_FUNCTIONS[s];if(!l){l=e.GRAD_COL_FUNCTIONS[s]=e.attach(new x({FunctionType:2,Domain:[0,1],Range:[0,1,0,1,0,1],N:1,C0:[t,i,n],C1:[r,a,o]}))}return l}function Le(e,t,i){var n=I([t,i]);var r=e.GRAD_OPC_FUNCTIONS[n];if(!r){r=e.GRAD_OPC_FUNCTIONS[n]=e.attach(new x({FunctionType:2,Domain:[0,1],Range:[0,1],N:1,C0:[t],C1:[i]}))}return r}function He(e,t){var i=false;var n=[];var r=[];var a=[];var o=[];var s,l,d,u,c;for(s=1;s<t.length;++s){l=t[s-1];d=t[s];u=l.color;c=d.color;r.push(Be(e,u.r,u.g,u.b,c.r,c.g,c.b));if(u.a<1||c.a<1){i=true}a.push(d.offset);o.push(0,1)}if(i){for(s=1;s<t.length;++s){l=t[s-1];d=t[s];u=l.color;c=d.color;n.push(Le(e,u.a,c.a))}}a.pop();return{hasAlpha:i,colors:f(r),opacities:i?f(n):null};function f(e){if(e.length==1){return e[0]}return{FunctionType:3,Functions:e,Domain:[0,1],Bounds:a,Encode:o}}}function Ne(e,t,i,n,r,a){var o,s;if(!a){var l=[t].concat(n);i.forEach(function(e){l.push(e.offset,e.color.r,e.color.g,e.color.b)});s=I(l);o=e.GRAD_COL[s]}if(!o){o=new x({Type:y("Shading"),ShadingType:t?3:2,ColorSpace:y("DeviceRGB"),Coords:n,Domain:[0,1],Function:r,Extend:[true,true]});e.attach(o);o._resourceName="S"+ ++u;if(s){e.GRAD_COL[s]=o}}return o}function Oe(e,t,i,n,r,a){var o,s;if(!a){var l=[t].concat(n);i.forEach(function(e){l.push(e.offset,e.color.a)});s=I(l);o=e.GRAD_OPC[s]}if(!o){o=new x({Type:y("ExtGState"),AIS:false,CA:1,ca:1,SMask:{Type:y("Mask"),S:y("Luminosity"),G:e.attach(new C("/a0 gs /s0 sh",{Type:y("XObject"),Subtype:y("Form"),FormType:1,BBox:a?[a.left,a.top+a.height,a.left+a.width,a.top]:[0,1,1,0],Group:{Type:y("Group"),S:y("Transparency"),CS:y("DeviceGray"),I:true},Resources:{ExtGState:{a0:{CA:1,ca:1}},Shading:{s0:{ColorSpace:y("DeviceGray"),Coords:n,Domain:[0,1],ShadingType:t?3:2,Function:r,Extend:[true,true]}}}}))}});e.attach(o);o._resourceName="O"+ ++u;if(s){e.GRAD_OPC[s]=o}}return o}function Ve(e,t,i){var n=t.type=="radial";var r=He(e,t.stops);var a=n?[t.start.x,t.start.y,t.start.r,t.end.x,t.end.y,t.end.r]:[t.start.x,t.start.y,t.end.x,t.end.y];var o=Ne(e,n,t.stops,a,r.colors,t.userSpace&&i);var s=r.hasAlpha?Oe(e,n,t.stops,a,r.opacities,t.userSpace&&i):null;return{hasAlpha:r.hasAlpha,shading:o,opacity:s}}var We=t(function e(t,i){this._pdf=t;this._rcount=0;this._textMode=false;this._fontResources={};this._gsResources={};this._xResources={};this._patResources={};this._shResources={};this._opacity=1;this._matrix=[1,0,0,1,0,0];this._annotations=[];this._font=null;this._fontSize=null;this._contextStack=[];i=this.props=i||{};i.Type=y("Page");i.ProcSet=[y("PDF"),y("Text"),y("ImageB"),y("ImageC"),y("ImageI")];i.Resources=new x({Font:new x(this._fontResources),ExtGState:new x(this._gsResources),XObject:new x(this._xResources),Pattern:new x(this._patResources),Shading:new x(this._shResources)});i.Annots=this._annotations},{_out:function(){this._content.data.apply(null,arguments)},transform:function(e,t,i,n,r,a){if(!$e(arguments)){this._matrix=qe(arguments,this._matrix);this._out(e," ",t," ",i," ",n," ",r," ",a," cm");this._out(l)}},translate:function(e,t){this.transform(1,0,0,1,e,t)},scale:function(e,t){this.transform(e,0,0,t,0,0)},rotate:function(e){var t=Math.cos(e),i=Math.sin(e);this.transform(t,i,-i,t,0,0)},beginText:function(){this._textMode=true;this._out("BT",l)},endText:function(){this._textMode=false;this._out("ET",l)},_requireTextMode:function(){if(!this._textMode){throw new Error("Text mode required; call page.beginText() first")}},_requireFont:function(){if(!this._font){throw new Error("No font selected; call page.setFont() first")}},setFont:function(e,t){this._requireTextMode();if(e==null){e=this._font}else if(!(e instanceof E)){e=this._pdf.getFont(e)}if(t==null){t=this._fontSize}this._fontResources[e._resourceName]=e;this._font=e;this._fontSize=t;this._out(e._resourceName," ",t," Tf",l)},setTextLeading:function(e){this._requireTextMode();this._out(e," TL",l)},setTextRenderingMode:function(e){this._requireTextMode();this._out(e," Tr",l)},showText:function(e,t){this._requireFont();if(e.length>1&&t&&this._font instanceof E){var i=this._font.getTextWidth(this._fontSize,e);var n=t/i*100;this._out(n," Tz ")}this._out(this._font.encodeText(e)," Tj",l)},showTextNL:function(e){this._requireFont();this._out(this._font.encodeText(e)," '",l)},addLink:function(e,t){var i=this._toPage({x:t.left,y:t.bottom});var n=this._toPage({x:t.right,y:t.top});this._annotations.push(new x({Type:y("Annot"),Subtype:y("Link"),Rect:[i.x,i.y,n.x,n.y],Border:[0,0,0],A:new x({Type:y("Action"),S:y("URI"),URI:new k(e)})}))},setStrokeColor:function(e,t,i){this._out(e," ",t," ",i," RG",l)},setOpacity:function(e){this.setFillOpacity(e);this.setStrokeOpacity(e);this._opacity*=e},setStrokeOpacity:function(e){if(e<1){var t=this._pdf.getOpacityGS(this._opacity*e,true);this._gsResources[t._resourceName]=t;this._out(t._resourceName," gs",l)}},setFillColor:function(e,t,i){this._out(e," ",t," ",i," rg",l)},setFillOpacity:function(e){if(e<1){var t=this._pdf.getOpacityGS(this._opacity*e,false);this._gsResources[t._resourceName]=t;this._out(t._resourceName," gs",l)}},gradient:function(e,t){this.save();this.rect(t.left,t.top,t.width,t.height);this.clip();if(!e.userSpace){this.transform(t.width,0,0,t.height,t.left,t.top)}var i=Ve(this._pdf,e,t);var n=i.shading._resourceName,r;this._shResources[n]=i.shading;if(i.hasAlpha){r=i.opacity._resourceName;this._gsResources[r]=i.opacity;this._out("/"+r+" gs ")}this._out("/"+n+" sh",l);this.restore()},setDashPattern:function(e,t){this._out(e," ",t," d",l)},setLineWidth:function(e){this._out(e," w",l)},setLineCap:function(e){this._out(e," J",l)},setLineJoin:function(e){this._out(e," j",l)},setMitterLimit:function(e){this._out(e," M",l)},save:function(){this._contextStack.push(this._context());this._out("q",l)},restore:function(){this._out("Q",l);this._context(this._contextStack.pop())},moveTo:function(e,t){this._out(e," ",t," m",l)},lineTo:function(e,t){this._out(e," ",t," l",l)},bezier:function(e,t,i,n,r,a){this._out(e," ",t," ",i," ",n," ",r," ",a," c",l)},bezier1:function(e,t,i,n){this._out(e," ",t," ",i," ",n," y",l)},bezier2:function(e,t,i,n){this._out(e," ",t," ",i," ",n," v",l)},close:function(){this._out("h",l)},rect:function(e,t,i,n){this._out(e," ",t," ",i," ",n," re",l)},ellipse:function(t,i,e,n){function r(e){return t+e}function a(e){return i+e}var o=.5522847498307936;this.moveTo(r(0),a(n));this.bezier(r(e*o),a(n),r(e),a(n*o),r(e),a(0));this.bezier(r(e),a(-n*o),r(e*o),a(-n),r(0),a(-n));this.bezier(r(-e*o),a(-n),r(-e),a(-n*o),r(-e),a(0));this.bezier(r(-e),a(n*o),r(-e*o),a(n),r(0),a(n))},circle:function(e,t,i){this.ellipse(e,t,i,i)},stroke:function(){this._out("S",l)},nop:function(){this._out("n",l)},clip:function(){this._out("W n",l)},clipStroke:function(){this._out("W S",l)},closeStroke:function(){this._out("s",l)},fill:function(){this._out("f",l)},fillStroke:function(){this._out("B",l)},drawImage:function(e){var t=this._pdf.getImage(e);if(t){this._xResources[t._resourceName]=t;this._out(t._resourceName," Do",l)}},comment:function(e){var t=this;e.split(/\r?\n/g).forEach(function(e){t._out("% ",e,l)})},_context:function(e){if(e!=null){this._opacity=e.opacity;this._matrix=e.matrix}else{return{opacity:this._opacity,matrix:this._matrix}}},_toPage:function(e){var t=this._matrix;var i=t[0],n=t[1],r=t[2],a=t[3],o=t[4],s=t[5];return{x:i*e.x+r*e.y+o,y:n*e.x+a*e.y+s}}},x);function Ue(e){return e.replace(/^\s*(['"])(.*)\1\s*$/,"$2")}function M(e){var t=/^\s*((normal|italic)\s+)?((normal|small-caps)\s+)?((normal|bold|\d+)\s+)?(([0-9.]+)(px|pt))(\/(([0-9.]+)(px|pt)|normal))?\s+(.*?)\s*$/i;var i=t.exec(e);if(!i){return{fontSize:12,fontFamily:"sans-serif"}}var n=i[8]?parseInt(i[8],10):12;return{italic:i[2]&&i[2].toLowerCase()=="italic",variant:i[4],bold:i[6]&&/bold|700/i.test(i[6]),fontSize:n,lineHeight:i[12]?i[12]=="normal"?n:parseInt(i[12],10):null,fontFamily:i[14].split(/\s*,\s*/g).map(Ue)}}function je(t){function e(e){if(t.bold){e+="|bold"}if(t.italic){e+="|italic"}return e.toLowerCase()}var i=t.fontFamily;var n,r;if(i instanceof Array){for(var a=0;a<i.length;++a){n=e(i[a]);r=R[n];if(r){break}}}else{r=R[i.toLowerCase()]}while(typeof r=="function"){r=r()}if(!r){r="Times-Roman"}return r}var R={serif:"Times-Roman","serif|bold":"Times-Bold","serif|italic":"Times-Italic","serif|bold|italic":"Times-BoldItalic","sans-serif":"Helvetica","sans-serif|bold":"Helvetica-Bold","sans-serif|italic":"Helvetica-Oblique","sans-serif|bold|italic":"Helvetica-BoldOblique",monospace:"Courier","monospace|bold":"Courier-Bold","monospace|italic":"Courier-Oblique","monospace|bold|italic":"Courier-BoldOblique",zapfdingbats:"ZapfDingbats","zapfdingbats|bold":"ZapfDingbats","zapfdingbats|italic":"ZapfDingbats","zapfdingbats|bold|italic":"ZapfDingbats"};function n(e,t){e=e.toLowerCase();R[e]=function(){return R[t]};R[e+"|bold"]=function(){return R[t+"|bold"]};R[e+"|italic"]=function(){return R[t+"|italic"]};R[e+"|bold|italic"]=function(){return R[t+"|bold|italic"]}}n("Times New Roman","serif");n("Courier New","monospace");n("Arial","sans-serif");n("Helvetica","sans-serif");n("Verdana","sans-serif");n("Tahoma","sans-serif");n("Georgia","sans-serif");n("Monaco","monospace");n("Andale Mono","monospace");function Ge(e,t){if(arguments.length==1){for(var i in e){if(s(e,i)){Ge(i,e[i])}}}else{e=e.toLowerCase();R[e]=t;switch(e){case"dejavu sans":R["sans-serif"]=t;break;case"dejavu sans|bold":R["sans-serif|bold"]=t;break;case"dejavu sans|italic":R["sans-serif|italic"]=t;break;case"dejavu sans|bold|italic":R["sans-serif|bold|italic"]=t;break;case"dejavu serif":R["serif"]=t;break;case"dejavu serif|bold":R["serif|bold"]=t;break;case"dejavu serif|italic":R["serif|italic"]=t;break;case"dejavu serif|bold|italic":R["serif|bold|italic"]=t;break;case"dejavu mono":R["monospace"]=t;break;case"dejavu mono|bold":R["monospace|bold"]=t;break;case"dejavu mono|italic":R["monospace|italic"]=t;break;case"dejavu mono|bold|italic":R["monospace|bold|italic"]=t;break}}}function qe(e,t){var i=e[0],n=e[1],r=e[2],a=e[3],o=e[4],s=e[5];var l=t[0],d=t[1],u=t[2],c=t[3],f=t[4],h=t[5];return[i*l+n*u,i*d+n*c,r*l+a*u,r*d+a*c,o*l+s*u+f,o*d+s*c+h]}function $e(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[3]===1&&e[4]===0&&e[5]===0}var Ke={fill:0,stroke:1,fillAndStroke:2,invisible:3,fillAndClip:4,strokeAndClip:5,fillStrokeClip:6,clip:7};var Ye=Ke;var Qe={dash:[4],dashDot:[4,2,1,2],dot:[1,2],longDash:[8,2],longDashDot:[8,2,1,2],longDashDotDot:[8,2,1,2,1,2],solid:[]};var Xe={butt:0,round:1,square:2};var Ze={miter:0,round:1,bevel:2};function Je(t,i){var n=[],r={},a=t.options;function u(e,t,i){if(!i){i=a}if(i.pdf&&i.pdf[e]!=null){return i.pdf[e]}return t}var o=u("multiPage");var s=u("imgDPI");if(s){me()}t.traverse(function(e){it({Image:function(e){var t=e.src();if(s){var i=e.bbox().size;var n=r[t];i={width:Math.ceil(i.width*s/72),height:Math.ceil(i.height*s/72)};if(n){i.width=Math.max(n.width,i.width);i.height=Math.max(n.height,i.height)}r[t]=i}else{r[t]=null}},Text:function(e){var t=M(e.options.font);var i=je(t);if(n.indexOf(i)<0){n.push(i)}}},e)});function e(){if(--l>0){return}var d=new f({producer:u("producer"),title:u("title"),author:u("author"),subject:u("subject"),keywords:u("keywords"),creator:u("creator"),date:u("date"),autoPrint:u("autoPrint")});function e(e){var t=e.options;var i=bt(e);var n=i.bbox;e=i.root;var r=u("paperSize",u("paperSize","auto"),t),a=false;if(r=="auto"){if(n){var o=n.getSize();r=[o.width,o.height];a=true;var s=n.getOrigin();i=new h.Group;i.transform(new c.Matrix(1,0,0,1,-s.x,-s.y));i.append(e);e=i}else{r="A4"}}var l;l=d.addPage({paperSize:r,margin:u("margin",u("margin"),t),addMargin:a,landscape:u("landscape",u("landscape",false),t)});nt(e,l,d)}if(o){t.children.forEach(e)}else{e(t)}i(d.render(),d)}var l=2;d(n,e);v(r,e,{jpegQuality:u("jpegQuality",.92),keepPNG:u("keepPNG",false)})}function F(e,t){Je(e,function(e){t("data:application/pdf;base64,"+e.base64())})}function et(e,t){Je(e,function(e){t(new window.Blob([e.get()],{type:"application/pdf"}))})}function tt(e,t,i,n){if(window.Blob&&!L.safari){et(e,function(e){r.saveAs({dataURI:e,fileName:t});if(n){n(e)}})}else{F(e,function(e){r.saveAs({dataURI:e,fileName:t,proxyURL:i});if(n){n(e)}})}}function it(e,t){var i=e[t.nodeType];if(i){return i.call.apply(i,arguments)}return t}function nt(e,t,i){if(e.options._pdfDebug){t.comment("BEGIN: "+e.options._pdfDebug)}var n=e.transform();var r=e.opacity();t.save();if(r!=null&&r<1){t.setOpacity(r)}rt(e,t,i);at(e,t,i);if(n){var a=n.matrix();t.transform(a.a,a.b,a.c,a.d,a.e,a.f)}ot(e,t,i);it({Path:ut,MultiPath:ct,Circle:ft,Arc:ht,Text:pt,Image:mt,Group:vt,Rect:gt},e,t,i);t.restore();if(e.options._pdfDebug){t.comment("END: "+e.options._pdfDebug)}}function rt(e,t){var i=e.stroke&&e.stroke();if(!i){return}var n=i.color;if(n){n=_t(n);if(n==null){return}t.setStrokeColor(n.r,n.g,n.b);if(n.a!=1){t.setStrokeOpacity(n.a)}}var r=i.width;if(r!=null){if(r===0){return}t.setLineWidth(r)}var a=i.dashType;if(a){t.setDashPattern(Qe[a],0)}var o=i.lineCap;if(o){t.setLineCap(Xe[o])}var s=i.lineJoin;if(s){t.setLineJoin(Ze[s])}var l=i.opacity;if(l!=null){t.setStrokeOpacity(l)}}function at(e,t){var i=e.fill&&e.fill();if(!i){return}if(i instanceof h.Gradient){return}var n=i.color;if(n){n=_t(n);if(n==null){return}t.setFillColor(n.r,n.g,n.b);if(n.a!=1){t.setFillOpacity(n.a)}}var r=i.opacity;if(r!=null){t.setFillOpacity(r)}}function ot(e,t,i){var n=e.clip();if(n){dt(n,t,i);t.clip()}}function P(e){return e&&(e instanceof h.Gradient||e.color&&!/^(none|transparent)$/i.test(e.color)&&(e.width==null||e.width>0)&&(e.opacity==null||e.opacity>0))}function st(e,t,i,n){var r=e.fill();if(r instanceof h.Gradient){if(n){t.clipStroke()}else{t.clip()}var a=r instanceof h.RadialGradient;var o,s;if(a){o={x:r.center().x,y:r.center().y,r:0};s={x:r.center().x,y:r.center().y,r:r.radius()}}else{o={x:r.start().x,y:r.start().y};s={x:r.end().x,y:r.end().y}}var l=r.stops.elements().map(function(e){var t=e.offset();if(/%$/.test(t)){t=parseFloat(t)/100}else{t=parseFloat(t)}var i=_t(e.color());i.a*=e.opacity();return{offset:t,color:i}});l.unshift(l[0]);l.push(l[l.length-1]);var d={userSpace:r.userSpace(),type:a?"radial":"linear",start:o,end:s,stops:l};var u=e.rawBBox();var c=u.topLeft(),f=u.getSize();u={left:c.x,top:c.y,width:f.width,height:f.height};t.gradient(d,u);return true}}function z(e,t,i){if(P(e.fill())&&P(e.stroke())){if(!st(e,t,i,true)){t.fillStroke()}}else if(P(e.fill())){if(!st(e,t,i,false)){t.fill()}}else if(P(e.stroke())){t.stroke()}else{t.nop()}}function lt(e,t){var i=e.segments;if(i.length==4&&e.options.closed){var n=[];for(var r=0;r<i.length;++r){if(i[r].controlIn()){return false}n[r]=i[r].anchor()}var a=n[0].y==n[1].y&&n[1].x==n[2].x&&n[2].y==n[3].y&&n[3].x==n[0].x||n[0].x==n[1].x&&n[1].y==n[2].y&&n[2].x==n[3].x&&n[3].y==n[0].y;if(a){t.rect(n[0].x,n[0].y,n[2].x-n[0].x,n[2].y-n[0].y);return true}}}function dt(e,t,i){var n=e.segments;if(n.length===0){return}if(!lt(e,t,i)){for(var r,a=0;a<n.length;++a){var o=n[a];var s=o.anchor();if(!r){t.moveTo(s.x,s.y)}else{var l=r.controlOut();var d=o.controlIn();if(l&&d){t.bezier(l.x,l.y,d.x,d.y,s.x,s.y)}else{t.lineTo(s.x,s.y)}}r=o}if(e.options.closed){t.close()}}}function ut(e,t,i){dt(e,t,i);z(e,t,i)}function ct(e,t,i){var n=e.paths;for(var r=0;r<n.length;++r){dt(n[r],t,i)}z(e,t,i)}function ft(e,t,i){var n=e.geometry();t.circle(n.center.x,n.center.y,n.radius);z(e,t,i)}function ht(e,t,i){var n=e.geometry().curvePoints();t.moveTo(n[0].x,n[0].y);for(var r=1;r<n.length;){t.bezier(n[r].x,n[r++].y,n[r].x,n[r++].y,n[r].x,n[r++].y)}z(e,t,i)}function pt(e,t){var i=M(e.options.font);var n=e._position;var r;if(e.fill()&&e.stroke()){r=Ye.fillAndStroke}else if(e.fill()){r=Ye.fill}else if(e.stroke()){r=Ye.stroke}t.transform(1,0,0,-1,n.x,n.y+i.fontSize);t.beginText();t.setFont(je(i),i.fontSize);t.setTextRenderingMode(r);t.showText(e.content(),e._pdfRect?e._pdfRect.width():null);t.endText()}function vt(e,t,i){if(e._pdfLink){t.addLink(e._pdfLink.url,e._pdfLink)}var n=e.children;for(var r=0;r<n.length;++r){nt(n[r],t,i)}}function mt(e,t){var i=e.src();if(!i){return}var n=e.rect();var r=n.getOrigin();var a=n.getSize();t.transform(a.width,0,0,-a.height,r.x,r.y+a.height);t.drawImage(i)}function gt(e,t,i){var n=e.geometry();t.rect(n.origin.x,n.origin.y,n.size.width,n.size.height);z(e,t,i)}function _t(e){var t=r.parseColor(e,true);return t?t.toRGB():null}function bt(i){var a=false;var o=c.Matrix.unit();var n=null;var t;do{t=false;i=u(i)}while(i&&t);return{root:i,bbox:n};function r(e){t=true;return e}function s(e){return e.visible()&&e.opacity()>0&&(P(e.fill())||P(e.stroke()))}function l(e){var t=[];for(var i=0;i<e.length;++i){var n=u(e[i]);if(n!=null){t.push(n)}}return t}function e(e,t){var i=a;var n=o;if(e.transform()){o=o.multiplyCopy(e.transform().matrix())}var r=e.clip();if(r){r=r.bbox();if(r){r=r.bbox(o);a=a?c.Rect.intersect(a,r):r}}try{return t()}finally{a=i;o=n}}function d(e){if(a==null){return false}var t=e.rawBBox().bbox(o);if(a&&t){t=c.Rect.intersect(t,a)}return t}function u(t){return e(t,function(){if(!(t instanceof h.Group||t instanceof h.MultiPath)){var e=d(t);if(!e){return r(null)}n=n?c.Rect.union(n,e):e}return it({Path:function(e){if(e.segments.length===0||!s(e)){return r(null)}return e},MultiPath:function(e){if(!s(e)){return r(null)}var t=new h.MultiPath(e.options);t.paths=l(e.paths);if(t.paths.length===0){return r(null)}return t},Circle:function(e){if(!s(e)){return r(null)}return e},Arc:function(e){if(!s(e)){return r(null)}return e},Text:function(e){if(!/\S/.test(e.content())||!s(e)){return r(null)}return e},Image:function(e){if(!(e.visible()&&e.opacity()>0)){return r(null)}return e},Group:function(e){if(!(e.visible()&&e.opacity()>0)){return r(null)}var t=new h.Group(e.options);t.children=l(e.children);t._pdfLink=e._pdfLink;if(e!==i&&t.children.length===0&&!e._pdfLink){return r(null)}return t},Rect:function(e){if(!s(e)){return r(null)}return e}},t)})}}function wt(e,t){var i=N.createPromise();for(var n in t){if(n=="margin"&&e.options.pdf&&e.options.pdf._ignoreMargin){continue}e.options.set("pdf."+n,t[n])}F(e,i.resolve);return i}function kt(e,t){var i=N.createPromise();for(var n in t){if(n=="margin"&&e.options.pdf&&e.options.pdf._ignoreMargin){continue}e.options.set("pdf."+n,t[n])}if(window.Blob&&!L.safari){et(e,i.resolve)}else{F(e,i.resolve)}return i}r.deepExtend(r.pdf,{Document:f,BinaryStream:S,defineFont:Ge,parseFontDef:M,getFontURL:je,loadFonts:d,loadImages:v,getPaperOptions:he,clearImageCache:me,TEXT_RENDERING_MODE:Ke,exportPDF:wt,exportPDFToBlob:kt,saveAs:tt,toDataURL:F,toBlob:et,render:Je});r.drawing.exportPDF=r.pdf.exportPDF;r.drawing.pdf=r.pdf})(kendo);return kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("pdf/mixins",["pdf/core"],e)})(function(){(function(a,e){kendo.PDFMixin={extend:function(e){e.events.push("pdfExport");e.options.pdf=this.options;e.saveAsPDF=this.saveAsPDF;e._drawPDF=this._drawPDF;e._drawPDFShadow=this._drawPDFShadow},options:{fileName:"Export.pdf",proxyURL:"",paperSize:"auto",allPages:false,landscape:false,margin:null,title:null,author:null,subject:null,keywords:null,creator:"Kendo UI PDF Generator v."+kendo.version,date:null},saveAsPDF:function(){var t=new a.Deferred;var e=t.promise();var i={promise:e};if(this.trigger("pdfExport",i)){return}var n=this.options.pdf;n.multiPage=n.multiPage||n.allPages;this._drawPDF(t).then(function(e){return kendo.drawing.exportPDF(e,n)}).done(function(e){kendo.saveAs({dataURI:e,fileName:n.fileName,proxyURL:n.proxyURL,forceProxy:n.forceProxy,proxyTarget:n.proxyTarget});t.resolve()}).fail(function(e){t.reject(e)});return e},_drawPDF:function(i){var n=new a.Deferred;kendo.drawing.drawDOM(this.wrapper).done(function(e){var t={page:e,pageNumber:1,progress:1,totalPages:1};i.notify(t);n.resolve(t.page)}).fail(function(e){n.reject(e)});return n},_drawPDFShadow:function(e,t){e=e||{};var i=this.wrapper;var n=a("<div class='k-pdf-export-shadow'>");if(e.width){n.css({width:e.width,overflow:"visible"})}i.before(n);n.append(e.content||i.clone(true,true));var r=a.Deferred();setTimeout(function(){var e=kendo.drawing.drawDOM(n,t);e.always(function(){n.remove()}).then(function(){r.resolve.apply(r,arguments)}).fail(function(){r.reject.apply(r,arguments)}).progress(function(){r.progress.apply(r,arguments)})},15);return r.promise()}}})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.pdf",["kendo.core","kendo.drawing","pdf/core","pdf/mixins"],e)})(function(){var e={id:"pdf",name:"PDF export",description:"PDF Generation framework",mixin:true,category:"framework",depends:["core","drawing"]}},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.dialog",["kendo.core","kendo.popup"],e)})(function(){var e={id:"dialog",name:"Dialog",category:"web",description:"The dialog widget is a modal popup that brings information to the user.",depends:["core","popup"]};(function(d,r){var s=window.kendo,o=s.ui.Widget,B=s.ui.Popup.TabKeyTrap,u=d.proxy,i=s.template,a=s.keys,L=d.isFunction,c="kendoWindow",H=".k-dialog",n=".k-window",l=".k-dialog-close",N="k-window-content k-dialog-content",f=".k-window-content",h="k-scroll",p="k-dialog-titleless",v=".k-dialog-title",m=v+"bar",g=".k-dialog-buttongroup",_=".k-button",O="k-alert",V="k-confirm",W="k-prompt",b=".k-textbox",U=".k-overlay",w=":visible",k="zIndex",y="body",e="initOpen",x="touchstart",C="touchmove",S="open",T="close",t="show",D="hide",A={small:"k-window-sm",medium:"k-window-md",large:"k-window-lg"},j="hidden",E="overflow",I="original-overflow-rule",M="tap-y",G={okText:"OK",cancel:"Cancel",promptInput:"Input"},q=Math.ceil,R,$=":not(link,meta,script,style)";function F(e){return typeof e!="undefined"}function K(e,t,i){return Math.max(Math.min(parseInt(e,10),i===Infinity?i:parseInt(i,10)),parseInt(t,10))}function Y(e){return e.keyCode==a.ENTER||e.keyCode==a.SPACEBAR}var P=o.extend({init:function(e,t){var i=this;o.fn.init.call(i,e,t);i._init(i.element,i.options);s.notify(i)},_init:function(e,t){var i=this,n;i._centerCallback=u(i._center,i);i.appendTo=d(y);if(!F(t.visible)||t.visible===null){t.visible=e.is(w)}if(i.wrapperTemplate===r){i.wrapperTemplate=R.wrapper}i._createDialog();n=i.wrapper=e.closest(H);if(t._defaultFocus===r){i._defaultFocus=e[0]}i._tabindex(e);i._dimensions();this._tabKeyTrap=new B(n);if(!i.options.visible){i.wrapper.hide()}else{i._triggerOpen()}},setOptions:function(e){var t=this;var i=t.options.size;e=d.extend(t.options,e);o.fn.setOptions.call(t,e);if(e.title!==r){t.title(e.title)}if(e.content){s.destroy(t.element.children());t.element.html(e.content)}if(e.actions){t.wrapper.children(g).remove();t._createActionbar(t.wrapper)}t.wrapper.show();t._closable(t.wrapper);t.wrapper.removeClass(A[i]);t._dimensions();if(!e.visible){t.wrapper.hide()}else{t._triggerOpen()}if(typeof e.modal!=="undefined"){var n=t.options.visible!==false;t._enableDocumentScrolling();t._overlay(e.modal&&n)}},_dimensions:function(){var e=this,t=e.wrapper,i=e.options,n=i.width,r=i.height,a=i.size,o=["minWidth","minHeight","maxWidth","maxHeight"];for(var s=0;s<o.length;s++){var l=i[o[s]];if(l&&l!=Infinity){t.css(o[s],l)}}this._setElementMaxHeight();if(n){if(n.toString().indexOf("%")>0){t.width(n)}else{t.outerWidth(K(n,i.minWidth,i.maxWidth))}}if(r){if(r.toString().indexOf("%")>0){t.height(r)}else{t.outerHeight(K(r,i.minHeight,i.maxHeight))}this._setElementHeight()}if(a&&A[a]){t.addClass(A[a])}},_setElementMaxHeight:function(){var e=this,t=e.element,i=e.options.maxHeight,n;if(i!=Infinity){n=parseFloat(i,10)-e._uiHeight();if(n>0){t.css({maxHeight:q(n)+"px"})}}},_setElementHeight:function(){var e=this,t=e.element,i=e.wrapper.outerHeight(true),n=parseFloat(i,10)-e._uiHeight();if(n<0){n=0}t.css({height:q(n)+"px"});this._applyScrollClassName(t)},_applyScrollClassName:function(e){var t=e.get(0).scrollHeight>e.outerHeight();if(t){e.addClass(h)}else{e.removeClass(h)}},_uiHeight:function(){var e=this,t=e.wrapper,i=t.children(g),n=i[0]&&i[0].offsetHeight||0,r=t.children(m),a=r[0]&&r[0].offsetHeight||0;return n+a},_overlay:function(e){var t=this.appendTo.children(U),i=this.wrapper;if(!t.length){t=d(R.overlay)}t.insertBefore(i[0]).toggle(e).css(k,parseInt(i.css(k),10)-1);if(e){this._waiAriaOverlay()}else{this._removeWaiAriaOverlay()}if(this.options.modal.preventScroll){this._stopDocumentScrolling()}return t},_waiAriaOverlay:function(){var e=this.wrapper;this._overlayedNodes=e.prevAll($).add(e.nextAll($)).each(function(){var e=d(this);e.data("ariaHidden",e.attr("aria-hidden"));e.attr("aria-hidden","true")})},_removeWaiAriaOverlay:function(){return this._overlayedNodes&&this._overlayedNodes.each(function(){var e=d(this);var t=e.data("ariaHidden");if(t){e.attr("aria-hidden",t)}else{e.removeAttr("aria-hidden")}})},_closeClick:function(e){e.preventDefault();this.close(false)},_closeKeyHandler:function(e){if(Y(e)||e.keyCode==a.ESC){this.close(false)}},_keydown:function(e){var t=this,i=t.options,n=e.keyCode;if(n==a.ESC&&!t._closing&&i.closable){t.close(false)}},_createDialog:function(){var e=this,t=e.element,i=e.options,n=s.support.isRtl(t),r=d(R.titlebar(i)),a=(t.id||s.guid())+"_title",o=d(e.wrapperTemplate(i));o.toggleClass("k-rtl",n);t.addClass(N);e.appendTo.append(o);if(i.title!==false){o.append(r);r.attr("id",a);o.attr("aria-labelledby",a)}else{o.addClass(p)}e._closable(o);o.append(t);if(i.content){s.destroy(t.children());t.html(i.content)}if(i.actions.length){e._createActionbar(o)}},_closable:function(e){var t=this;var i=t.options;var n=e.children(m);var r=n.find(".k-window-actions");var a=r.length?r.find(".k-dialog-close"):e.find(".k-dialog-close");a.remove();if(i.closable!==false){if(i.title!==false&&r.length){r.append(R.close(i))}else{e.prepend(R.close(i))}e.autoApplyNS(c);t.element.autoApplyNS(c);e.find(l).on("click",u(t._closeClick,t)).on("keydown",u(t._closeKeyHandler,t));t.element.on("keydown",u(t._keydown,t))}},_createActionbar:function(e){var t=this.options.buttonLayout==="stretched";var i=t?"stretched":"normal";var n=d(R.actionbar({buttonLayout:i}));this._addButtons(n);e.append(n)},_addButtons:function(e){var t=this,i=u(t._actionClick,t),n=u(t._actionKeyHandler,t),r=t.options.actions,a=r.length,o,s;for(var l=0;l<a;l++){o=r[l];s=t._mergeTextWithOptions(o);d(R.action(o)).autoApplyNS(c).html(s).appendTo(e).addClass(o.cssClass).data("action",o.action).on("click",i).on("keydown",n)}},_mergeTextWithOptions:function(e){var t=e.text;return t?i(t)(this.options):""},_tabindex:function(e){var t=this;var i=t.wrapper;var n=i.find(l);var r=i.find(g+" "+_);o.fn._tabindex.call(this,e);var a=e.attr("tabindex");n.attr("tabIndex",a);r.attr("tabIndex",a)},_actionClick:function(e){if(this.wrapper.is(w)){this._runActionBtn(e.currentTarget)}},_actionKeyHandler:function(e){if(Y(e)){e.preventDefault();this._runActionBtn(e.currentTarget)}else if(e.keyCode==a.ESC){this.close(false)}},_runActionBtn:function(e){var t=this;if(t._closing){return}var i=d(e).data("action"),n=L(i)&&i({sender:t})===false;if(!n){t.close(false)}},_triggerOpen:function(){var e=this;var t=e.options;var i=e.wrapper;e.toFront();e._triggerInitOpen();e.trigger(S);if(t.modal){e._overlay(i.is(w)).css({opacity:.5});e._focusDialog()}},open:function(){var e=this,t=e.wrapper,i=this._animationOptions(S),n=e.options,r,a;this._triggerInitOpen();if(!e.trigger(S)){if(e._closing){t.kendoStop(true,true)}e._closing=false;e.toFront();n.visible=true;if(n.modal){a=!!e._modals().length;r=e._overlay(a);r.kendoStop(true,true);if(i.duration&&s.effects.Fade&&!a){var o=s.fx(r).fadeIn();o.duration(i.duration||0);o.endValue(.5);o.play()}else{r.css("opacity",.5)}r.show()}t.show().kendoStop().kendoAnimate({effects:i.effects,duration:i.duration,complete:u(e._openAnimationEnd,e)});t.show()}return e},_animationOptions:function(e){var t=this.options.animation;var i={open:{effects:{}},close:{hide:true,effects:{}}};return t&&t[e]||i[e]},_openAnimationEnd:function(){if(this.options.modal){this._focusDialog()}this.trigger(t)},_triggerInitOpen:function(){if(!F(this._initOpenTriggered)){this._initOpenTriggered=true;this.trigger(e)}},toFront:function(){var e=this,t=e.wrapper,r=+t.css(k),i=r;e.center();d(n).each(function(e,t){var i=d(t),n=i.css(k);if(!isNaN(n)){r=Math.max(+n,r)}});if(!t[0].style.zIndex||i<r){t.css(k,r+2)}e.element.find("> .k-overlay").remove();t=null;return e},close:function(e){if(!arguments.length){e=true}this._close(e);this._stopCenterOnResize();return this},_close:function(e){var t=this,i=t.wrapper,n=t.options,r=this._animationOptions("open"),a=this._animationOptions("close");if(i.is(w)&&!t.trigger(T,{userTriggered:!e})){if(t._closing){return}t._closing=true;n.visible=false;this._removeOverlay();i.kendoStop().kendoAnimate({effects:a.effects||r.effects,reverse:a.reverse===true,duration:a.duration,complete:u(this._closeAnimationEnd,this)})}return t},center:function(){this._center();this._centerOnResize()},_center:function(){var e=this,t=e.wrapper,i=d(window),n=0,r=0,a=r+Math.max(0,(i.width()-t.width())/2),o=n+Math.max(0,(i.height()-t.height()-parseInt(t.css("paddingTop"),10))/2);t.css({left:a,top:o});return e},_centerOnResize:function(){if(this._trackResize){return}s.onResize(this._centerCallback);this._trackResize=true},_stopCenterOnResize:function(){s.unbindResize(this._centerCallback);this._trackResize=false},_removeOverlay:function(){var e=this._modals();var t=this.options;var i=t.modal&&!e.length;if(i){this._overlay(false).remove();if(t.modal.preventScroll){this._enableDocumentScrolling()}}else if(e.length){this._object(e.last())._overlay(true);if(t.modal.preventScroll){this._stopDocumentScrolling()}}},_stopDocumentScrolling:function(){var e=this;var t=d("body");e._storeOverflowRule(t);t.css(E,j);var i=d("html");var n=i[0];e._storeOverflowRule(i);i.css(E,j);if(s.support.mobileOS.ios){n.addEventListener(x,e._touchStart,{passive:false});n.addEventListener(C,e._touchMove,{passive:false})}},_touchStart:function(e){d(this).data(M,e.changedTouches[0].pageY)},_touchMove:function(e){var t=e.target;var i=d(e.target);var n=e.changedTouches[0].pageY-d(this).data(M)>0;var r=i.is(f)&&(n&&i.scrollTop()===0)||!n&&i.scrollTop()===t.scrollHeight-t.clientHeight;if(!i.is(f)||r){e.preventDefault()}},_enableDocumentScrolling:function(){var e=this;var t=d(document.body);var i=d("html");var n=i[0];e._restoreOverflowRule(t);e._restoreOverflowRule(i);if(s.support.mobileOS.ios){i.removeData(M);n.removeEventListener(x,e._touchStart,{passive:false});n.removeEventListener(C,e._touchMove,{passive:false})}},_storeOverflowRule:function(e){if(this._isOverflowStored(e)){return}var t=e.get(0).style.overflow;if(typeof t==="string"){e.data(I,t)}},_isOverflowStored:function(e){return typeof e.data(I)==="string"},_restoreOverflowRule:function(e){var t=e.data(I);if(t!==null&&t!==r){e.css(E,t);e.removeData(I)}else{e.css(E,"")}},_closeAnimationEnd:function(){var e=this;e._closing=false;e.wrapper.hide().css("opacity","");e.trigger(D);if(e.options.modal){var t=e._object(e._modals().last());if(t){t.toFront()}}},_modals:function(){var t=this;var e=d(n).filter(function(){var e=t._object(d(this));return e&&e.options&&e.options.modal&&e.options.visible&&e.options.appendTo===t.options.appendTo&&!e.containment&&d(e.element).is(w)}).sort(function(e,t){return+d(e).css("zIndex")-+d(t).css("zIndex")});t=null;return e},_object:function(e){var t=e.children(f);var i=s.widgetInstance(t);if(i){return i}return r},destroy:function(){var e=this;e._destroy();o.fn.destroy.call(e);s.destroy(e.wrapper);e.wrapper.remove();e.wrapper=e.element=d()},_destroy:function(){var e=this;var t="."+c;e.wrapper.off(t);e.element.off(t);e.wrapper.find(l+","+g+" > "+_).off(t);e._stopCenterOnResize()},title:function(e){var t=this,i=t.wrapper,n=t.options,r=i.children(m),a=r.children(v),o=s.htmlEncode(e);if(!arguments.length){return a.html()}if(e===false){r.remove();i.addClass(p)}else{if(!r.length){r=d(R.titlebar(n)).prependTo(i);a=r.children(v);i.removeClass(p)}a.html(o)}t.options.title=o;return t},content:function(e,i){var t=this,n=t.wrapper.children(f);if(!F(e)){return n.html()}this.angular("cleanup",function(){return{elements:n.children()}});s.destroy(n.children());n.html(e);this.angular("compile",function(){var e=[];for(var t=n.length;--t>=0;){e.push({dataItem:i})}return{elements:n.children(),data:e}});t.options.content=e;return t},_focusDialog:function(){if(this._defaultFocus){this._focus(this._defaultFocus)}this._tabKeyTrap.trap()},_focus:function(e){if(e){e.focus()}},events:[e,S,T,t,D],options:{title:"",buttonLayout:"stretched",actions:[],modal:true,size:"auto",width:null,height:null,minWidth:0,minHeight:0,maxWidth:Infinity,maxHeight:Infinity,content:null,visible:null,appendTo:y,closable:true}});var Q=P.extend({options:{name:"Dialog",messages:{close:"Close"}}});s.ui.plugin(Q);var z=P.extend({_init:function(e,t){var i=this;i.wrapperTemplate=R.alertWrapper;t._defaultFocus=null;i._ensureContentId(e);P.fn._init.call(i,e,t);i.bind(D,u(i.destroy,i));i._ariaDescribedBy();i._initFocus()},_ensureContentId:function(e){var t=d(e);if(!t.attr("id")){t.attr("id",s.guid()+"_k-popup")}},_ariaDescribedBy:function(){this.wrapper.attr("aria-describedby",this.element.attr("id"))},_initFocus:function(){var e=this.options;this._defaultFocus=this._chooseEntryFocus();if(this._defaultFocus&&e.visible&&e.modal){this._focusDialog()}},_chooseEntryFocus:function(){return this.wrapper.find(g+" > "+_)[0]},options:{title:window.location.host,closable:false,messages:G}});var X=z.extend({_init:function(e,t){var i=this;z.fn._init.call(i,e,t);i.wrapper.addClass(O)},options:{name:"Alert",modal:true,actions:[{text:"#: messages.okText #"}]}});s.ui.plugin(X);var Z=function(e){return d(R.alert).kendoAlert({content:e}).data("kendoAlert").open()};var J=z.extend({_init:function(e,t){var i=this;z.fn._init.call(i,e,t);i.wrapper.addClass(V);i.result=d.Deferred()},options:{name:"Confirm",modal:true,actions:[{text:"#: messages.okText #",primary:true,action:function(e){e.sender.result.resolve()}},{text:"#: messages.cancel #",action:function(e){e.sender.result.reject()}}]}});s.ui.plugin(J);var ee=function(e){var t=d(R.confirm).kendoConfirm({content:e}).data("kendoConfirm").open();return t.result};var te=z.extend({_init:function(e,t){var i=this;z.fn._init.call(i,e,t);i.wrapper.addClass(W);i._createPrompt();i.result=d.Deferred()},_createPrompt:function(){var e=this.options.value,t=d(R.promptInputContainer(this.options)).insertAfter(this.element);if(e){t.children(b).val(e)}this._defaultFocus=this._chooseEntryFocus();this._focusDialog()},_chooseEntryFocus:function(){return this.wrapper.find(b)[0]},options:{name:"Prompt",modal:true,value:"",actions:[{text:"#: messages.okText #",primary:true,action:function(e){var t=e.sender,i=t.wrapper.find(b).val();t.result.resolve(i)}},{text:"#: messages.cancel #",action:function(e){var t=e.sender,i=t.wrapper.find(b).val();e.sender.result.reject(i)}}]}});s.ui.plugin(te);var ie=function(e,t){var i=d(R.prompt).kendoPrompt({content:e,value:t}).data("kendoPrompt").open();return i.result};R={wrapper:i("<div class='k-widget k-widget-2021 k-window k-dialog' role='dialog'></div>"),action:i("<button type='button' class='k-button# if (data.primary) { # k-primary# } role='button' #'></button>"),titlebar:i("<div class='k-window-titlebar k-dialog-titlebar'>"+"<span class='k-window-title k-dialog-title'>#: title #</span>"+"<div class='k-window-actions k-dialog-actions'></div>"+"</div>"),close:i("<a role='button' href='\\#' class='k-button k-flat k-button-icon k-window-action k-dialog-action k-dialog-close' title='#: messages.close #' aria-label='#: messages.close #' tabindex='-1'><span class='k-icon k-i-close'></span></a>"),actionbar:i("<div class='k-dialog-buttongroup k-dialog-button-layout-#: buttonLayout #' role='toolbar'></div>"),overlay:"<div class='k-overlay'></div>",alertWrapper:i("<div class='k-widget k-widget-2021 k-window k-dialog' role='alertdialog'></div>"),alert:"<div></div>",confirm:"<div></div>",prompt:"<div></div>",promptInputContainer:i("<div class='k-prompt-container'><input type='text' class='k-textbox' title='#: messages.promptInput #' aria-label='#: messages.promptInput #' /></div>")};s.alert=Z;s.confirm=ee;s.prompt=ie})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.grid",["kendo.data","kendo.columnsorter","kendo.editable","kendo.window","kendo.filtermenu","kendo.columnmenu","kendo.groupable","kendo.pager","kendo.selectable","kendo.sortable","kendo.reorderable","kendo.resizable","kendo.ooxml","kendo.excel","kendo.pane","kendo.progressbar","kendo.pdf","kendo.dialog","kendo.pane","kendo.switch"],e)})(function(){var e={id:"grid",name:"Grid",category:"web",description:"The Grid widget displays tabular data and offers rich support for interacting with data,including paging, sorting, grouping, and selection.",depends:["data","columnsorter","sortable"],features:[{id:"grid-editing",name:"Editing",description:"Support for record editing",depends:["editable","window"]},{id:"grid-filtering",name:"Filtering",description:"Support for record filtering",depends:["filtermenu"]},{id:"grid-columnmenu",name:"Column menu",description:"Support for header column menu",depends:["columnmenu"]},{id:"grid-grouping",name:"Grouping",description:"Support for grid grouping",depends:["groupable"]},{id:"grid-filtercell",name:"Row filter",description:"Support for grid header filtering",depends:["filtercell"]},{id:"grid-paging",name:"Paging",description:"Support for grid paging",depends:["pager"]},{id:"grid-selection",name:"Selection",description:"Support for row selection",depends:["selectable"]},{id:"grid-column-reorder",name:"Column reordering",description:"Support for column reordering",depends:["reorderable"]},{id:"grid-column-resize",name:"Column resizing",description:"Support for column resizing",depends:["resizable"]},{id:"grid-mobile",name:"Grid adaptive rendering",description:"Support for adaptive rendering",depends:["dialog","pane","switch"]},{id:"grid-excel-export",name:"Excel export",description:"Export grid data as Excel spreadsheet",depends:["excel"]},{id:"grid-pdf-export",name:"PDF export",description:"Export grid data as PDF",depends:["pdf","drawing","progressbar"]}]};(function(E,S){var I=window.kendo,b=I.ui,j=I.data.DataSource,a=I.data.ObservableObject,o=I.support.tbodyInnerHtml,c=I._activeElement,r=b.Widget,M=I._outerWidth,w=I._outerHeight,l=I.keys,R=E.isPlainObject,T=E.extend,G=E.map,F=E.grep,q=E.isArray,P=E.inArray,$=Array.prototype.push,x=E.proxy,d=I.isFunction,K=E.isEmptyObject,Y=E.contains,p=Math,h=".",Q="progress",X="error",Z="k-hierarchy-cell",v=":not(.k-group-cell):not(["+I.attr("virtual")+"]):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-collapse,.k-icon.k-i-expand))):visible",J="tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)",m="tr:not(.k-footer-template):visible",C=":not(.k-group-cell):not(.k-detail-cell):not(.k-hierarchy-cell):visible",ee="tr:not(.k-grouping-row):not(.k-detail-row):not(.k-footer-template):not(.k-group-footer):visible",te=ee+":first",ie=ee+":last",ne=m+":first>"+C+":first",re="th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)",_=".kendoGrid",ae="k-grid-content-locked",oe="k-group-cell",se="edit",le="beforeEdit",de="save",ue="remove",ce="detailInit",fe="filterMenuInit",he="columnMenuInit",pe="filterMenuOpen",ve="columnMenuOpen",me="cellClose",f="change",ge="columnHide",_e="columnShow",i="saveChanges",be="dataBound",we="detailExpand",ke="detailCollapse",ye="itemchange",xe="page",Ce="paging",Se="scroll",Te="sync",De="k-state-focused",n=":kendoFocusable",Ae="k-state-selected",e="k-checkbox",Ee="input[data-role='checkbox']."+e,Ie="k-grid-norecords",Me="k-link",Re="k-icon",Fe="k-sort-order",Pe="k-header-column-menu",ze="k-grid-filter",Be="k-grid-content-sticky",Le="k-grid-header-sticky",He="k-grid-footer-sticky",Ne="k-grid-no-left-border",t="resize",Oe="columnResize",Ve="columnReorder",We="columnLock",Ue="columnUnlock",je="columnStick",Ge="columnUnstick",qe="navigate",u="click",$e="mousedown",Ke="height",Ye="tabIndex",Qe="function",D="string",Xe="bottom",Ze="container-for",Je="field",et="input",tt="incell",it="inline",nt="uid",rt=1,at="colSpan",ot="overflow",st="hidden",lt="sort",dt="group-sort",ut="Are you sure you want to delete this record?",ct="No records available.",ft="Delete",ht="Cancel",pt="Collapse",vt="Expand",mt="aria-label",gt=/(\}|\#)/gi,_t=/#/gi,bt="[\\x20\\t\\r\\n\\f]",wt=new RegExp("(^|"+bt+")"+"(k-group-cell|k-hierarchy-cell)"+"("+bt+"|$)"),kt=new RegExp("(^|"+bt+")"+"(k-filter-row)"+"("+bt+"|$)"),yt="# if (iconClass) {#"+'<a role="button" class="k-button k-button-icontext #=className#" #=attr# href="\\#"><span class="#=iconClass#"></span>#=text#</a>'+"# } else { #"+'<a role="button" class="k-button k-button-icontext #=className#" #=attr# href="\\#">#=text#</a>'+"# } #",xt='<input class="'+e+'" data-role="checkbox" aria-label="Select row" aria-checked="false" type="checkbox">',Ct='<input class="'+e+'" data-role="checkbox" aria-label="Select all rows" aria-checked="false" type="checkbox">',k=false,z=I.support.browser;var St=z.msie&&z.version===11;var Tt=/Mac OS/.test(navigator.userAgent);var Dt={content:"k-content",widget:"k-widget",scrollContainer:"k-scroll-container"};var At;if(b.Pager){At=b.Pager.extend({init:function(e,t){b.Pager.fn.init.call(this,e,T(true,{},t));this.dataSource.options.useRanges=true;this.dataSource._omitPrefetch=true},options:{name:"GroupsPager"},totalPages:function(){var e=this;return Math.ceil((e._collapsedTotal()||0)/(e.pageSize()||1))},_collapsedTotal:function(){var e=this.dataSource;return e?e.groupsTotal(true)||0:0}})}var Et=r.extend({init:function(e,t){var i=this;r.fn.init.call(i,e,t);i._refreshHandler=x(i.refresh,i);i.setDataSource(t.dataSource);i.wrap()},setDataSource:function(e){var t=this;if(t.dataSource){t.dataSource.unbind(f,t._refreshHandler)}t.dataSource=e;t.dataSource.bind(f,t._refreshHandler);t.dataSource.options.useRanges=true},options:{name:"VirtualScrollable",itemHeight:E.noop,prefetch:true,maxScrollHeight:25e4},events:[Ce,xe,Se],destroy:function(){var e=this;r.fn.destroy.call(e);e.dataSource.unbind(f,e._refreshHandler);e.wrapper.add(e.verticalScrollbar).off(_);clearTimeout(e._timeout);if(e._scrollingTimeout){clearTimeout(e._scrollingTimeout)}if(e.drag){e.drag.destroy();e.drag=null}e.wrapper=e.element=e.verticalScrollbar=null;e._refreshHandler=null},wrap:function(){var t=this,e=I.support.scrollbar()+1,i=t.element,n;i.css({width:"auto",overflow:"hidden"}).css(k?"padding-left":"padding-right",e);t.content=i.children().first();n=t.wrapper=t.content.wrap('<div class="k-virtual-scrollable-wrap"/>').parent().bind("DOMMouseScroll"+_+" mousewheel"+_,x(t._wheelScroll,t));t._wrapper();if(I.support.kineticScrollNeeded||I.support.touch){t.wrapper.css("touch-action","none");t.drag=new I.UserEvents(t.wrapper,{global:true,allowSelection:true,start:function(e){e.sender.capture()},move:function(e){t.verticalScrollbar.scrollTop(t.verticalScrollbar.scrollTop()-e.y.delta);I.scrollLeft(n,I.scrollLeft(n)-e.x.delta);e.preventDefault()}})}t.verticalScrollbar=E('<div class="k-scrollbar k-scrollbar-vertical" />').css({width:e}).appendTo(i).bind("scroll"+_,x(t._scroll,t))},_wrapper:function(){var e=this;if(St){e.wrapper.css({"overflow-y":Se});e.element.css(k?"padding-left":"padding-right",0)}},_wheelScroll:function(e){if(e.ctrlKey){return}var t=this.verticalScrollbar,i=t.scrollTop(),n=I.wheelDeltaY(e);if(n&&!(n>0&&i===0)&&!(n<0&&i+t[0].clientHeight==t[0].scrollHeight)){e.preventDefault();this.verticalScrollbar.scrollTop(i+-n)}},_scroll:function(e){var t=this,i=!t.options.prefetch,n=e.currentTarget.scrollTop,r=t.dataSource,a=t.itemHeight,o=r.skip()||0,s=t._rangeStart||o,l=t.element.innerHeight(),d=!!(t._scrollbarTop&&t._scrollbarTop>n),u=p.max(p.floor(n/a),0),c=d?p.ceil(l/a):p.floor(l/a),f=p.max(u+c,0);if(t._preventScroll){t._preventScroll=false;return}t._prevScrollTop=t._scrollTop;t._scrollTop=n-s*a;t._scrollbarTop=n;t._scrolling=i;if(!t._fetch(u,f,d)){t.wrapper[0].scrollTop=t._scrollTop}t.trigger(Se);if(i){if(t._scrollingTimeout){clearTimeout(t._scrollingTimeout)}t._scrollingTimeout=setTimeout(function(){t._scrolling=false;t._page(t._rangeStart,t.dataSource.take())},100)}},scrollToTop:function(){this._scrollTo(0)},scrollToBottom:function(){var e=this.verticalScrollbar;this._scrollTo(e[0].scrollHeight-e.height())},_scrollWrapperToTop:function(){this.wrapper.scrollTop(0)},_scrollWrapperToBottom:function(){this.wrapper.scrollTop(this.wrapper[0].scrollHeight)},_scrollWrapperOnColumnResize:function(){var e=this;var t=this.wrapper;var i=t.scrollTop();if(t[0].scrollWidth>t[0].clientWidth){if(!e._wrapperScrolled&&i||e._isScrolledToBottom()){t.scrollTop(i+I.support.scrollbar());e._scrollTop=t.scrollTop();e._wrapperScrolled=true}}else if(e._wrapperScrolled){if(!e._isWrapperScrolledToBottom()){t.scrollTop(i-I.support.scrollbar());e._scrollTop=t.scrollTop()}e._wrapperScrolled=false}},_scrollTo:function(e){var t=this;var i=t.verticalScrollbar;if(i.scrollTop()!==e){t._preventScroll=true}t.wrapper.scrollTop(e);t._scrollTop=t.wrapper.scrollTop();i.scrollTop(e);t._scrollbarTop=i.scrollTop()},_isScrolledToTop:function(){return this.verticalScrollbar.scrollTop()===0},_isScrolledToBottom:function(){var e=this.verticalScrollbar;var t=e.scrollTop();return t>0&&t>=parseInt(e[0].scrollHeight-e.height(),10)},_isWrapperScrolledToBottom:function(){var e=this.wrapper;return e.scrollTop()>=parseInt(e[0].scrollHeight-e.height(),10)},itemIndex:function(e){var t=this._rangeStart||this.dataSource.skip()||0;return t+e},position:function(e){var t=this._rangeStart||this.dataSource.skip()||0;var i=this.dataSource.pageSize();var n;if(e>t){n=e-t}else{n=t-e-1}return n>i?i:n},scrollIntoView:function(e){var t=this.wrapper[0];var i=t.clientHeight;var n=!this._isScrolledToBottom()?this._scrollTop||t.scrollTop:t.scrollTop;var r=e[0].offsetTop;var a=e[0].offsetHeight;if(n>r){this.verticalScrollbar[0].scrollTop-=i/2}else if(r+a>=n+i){this.verticalScrollbar[0].scrollTop+=i/2}},_fetch:function(e,t,i){var n=this,r=n.dataSource,a=n.itemHeight,o=r.take(),s=n._rangeStart||r.skip()||0,l=p.floor(e/o)*o,d=false,u=.33;var c=n.verticalScrollbar;var f=z.webkit?1:0;var h=r._isGroupPaged()?r.groupsTotal(true):r.total();if(e<s){d=true;s=p.max(0,t-o);n._scrollTop=c.scrollTop()-s*a;n._page(s,o)}else if(t>=s+o&&!i){d=true;s=p.min(e,h-o);if(c.scrollTop()>=c[0].scrollHeight-c[0].offsetHeight-f){n._scrollTop=n.wrapper[0].scrollHeight-n.wrapper[0].offsetHeight}else if(n.dataSource._isGroupPaged()&&e>=h-o){n._scrollTop=n.wrapper[0].scrollHeight-n.wrapper[0].offsetHeight-(n._scrollTop-n._prevScrollTop)}else{n._scrollTop=a}n._page(s,o)}else if(!n._fetching&&n.options.prefetch){if(e<l+o-o*u&&e>o){r.prefetch(l-o,o,E.noop)}if(t>l+o*u){r.prefetch(l+o,o,E.noop)}}return d},fetching:function(){return this._fetching},_page:function(e,t,i){var n=this,r=!n.options.prefetch,a=n.dataSource,o=a._isGroupPaged();i=d(i)?i:E.noop;if(n.trigger(Ce,{skip:e,take:t})){return}clearTimeout(n._timeout);n._fetching=true;n._rangeStart=e;if(o&&a._groupRangeExists(e,e+t)||!o&&a.inRange(e,t)){I.ui.progress(E(n.wrapper).parent(),true);a.range(e,t,function(){I.ui.progress(E(n.wrapper).parent(),false);i();n.trigger(xe)},"page")}else{if(!r){I.ui.progress(n.wrapper.parent(),true)}n._timeout=setTimeout(function(){if(!n._scrolling){if(r){I.ui.progress(n.wrapper.parent(),true)}a.range(e,t,function(){I.ui.progress(n.wrapper.parent(),false);i();n.trigger(xe)})}},100)}},repaintScrollbar:function(e){var t=this,i="",n=t.options.maxScrollHeight,r=t.dataSource,a=!I.support.kineticScrollNeeded?I.support.scrollbar():0,o=t.wrapper[0],s,l,d;var u=t._isScrolledToBottom();d=t.itemHeight=t.options.itemHeight()||0;var c=o.scrollWidth>o.offsetWidth?a:0;s=(r._isGroupPaged()?r.groupsTotal(true):r.total())*d+c;for(l=0;l<p.floor(s/n);l++){i+='<div style="width:1px;height:'+n+'px"></div>'}if(s%n){i+='<div style="width:1px;height:'+s%n+'px"></div>'}if(webfed["getPageData"]("verticalScrollbar")==true){i=""}t.verticalScrollbar.html(i);if(u&&!t._isScrolledToBottom()&&!t.dataSource._isGroupPaged()){t.scrollToBottom()}if(typeof t._scrollTop!=="undefined"&&!!e){o.scrollTop=t._scrollTop;t._scrollWrapperOnColumnResize()}},refresh:function(e){var t=this,i=t.dataSource,n=t._rangeStart;var r=(e||{}).action;var a=t._isScrolledToBottom()||!r||r!==ye&&r!==ue&&r!==Te;I.ui.progress(t.wrapper.parent(),false);clearTimeout(t._timeout);t.repaintScrollbar(a);if(t.drag){t.drag.cancel()}if(typeof n!=="undefined"&&!t._fetching){if(!r||r!==Te&&r!==ye&&r!=="expandGroup"){t._rangeStart=i.skip()}if(i.page()===1&&(!r||r!==Te&&r!==ye&&r!=="expandGroup"&&r!=="collapseGroup")){t.verticalScrollbar[0].scrollTop=0}}t._fetching=false}});function It(e,t){return"["+I.attr(e)+"="+t+"]"}function Mt(e){return new Array(e+1).join('<td class="k-group-cell">&nbsp;</td>')}function Rt(e){var t,i=" ";if(e){if(typeof e===D){return e}for(t in e){if(e[t]!==""){i+=t+'="'+e[t]+'"'}}}return i}var s={create:{text:"Add new record",className:"k-grid-add",iconClass:"k-icon k-i-plus"},cancel:{text:"Cancel changes",className:"k-grid-cancel-changes",iconClass:"k-icon k-i-cancel"},save:{text:"Save changes",className:"k-grid-save-changes",iconClass:"k-icon k-i-check"},destroy:{text:"Delete",className:"k-grid-delete",iconClass:"k-icon k-i-close"},edit:{text:"Edit",className:"k-grid-edit",iconClass:"k-icon k-i-edit"},update:{text:"Update",className:"k-primary k-grid-update",iconClass:"k-icon k-i-check"},canceledit:{text:"Cancel",className:"k-grid-cancel",iconClass:"k-icon k-i-cancel"},excel:{text:"Export to Excel",className:"k-grid-excel",iconClass:"k-icon k-i-file-excel"},pdf:{text:"Export to PDF",className:"k-grid-pdf",iconClass:"k-icon k-i-file-pdf"},search:{text:"Search...",className:"k-grid-search"}};function Ft(e,t){E("th, th .k-grid-filter, th .k-link",e).add(document.body).css("cursor",t)}function Pt(e,t,i,n,r){var a=t;t=E();r=r||1;for(var o=0;o<r;o++){t=t.add(e.eq(a+o))}if(typeof i=="number"){t[n?"insertBefore":"insertAfter"](e.eq(i))}else{t.appendTo(i)}}function y(e,t,i){return E(e).add(t).find(i)}function zt(e,t,i){var n,r,a,o;i=!q(i)?[i]:i;for(n=0,r=i.length;n<r;n++){a=i[n];if(R(a)&&a.click){o=a.name||a.text;t.on(u+_,"a.k-grid-"+(o||"").replace(/\s/g,""),{commandName:o},x(a.click,e))}}}function Bt(e,n,r,a,o){return G(e,function(e){e=typeof e===D?{field:e}:e;var t;e.parentIds=o;if(!B(e)||r){e.attributes=Ti(e.attributes);e.footerAttributes=Ti(e.footerAttributes);e.headerAttributes=Ti(e.headerAttributes);t=true}var i=I.guid();if(a&&!e.locked){e.locked=a}e.headerAttributes=T({headers:o},e.headerAttributes);if(!e.headerAttributes.id){e.headerAttributes=T({id:i},e.headerAttributes)}else{i=e.headerAttributes.id}if(e.columns){e.columns=Bt(e.columns,n,t,e.locked,o?o+" "+i:i)}return T({encoded:n,hidden:t,locked:a},e)})}function Lt(e,t){var i=[];Ht(e,t,i);return i[i.length-1]}function Ht(e,t,i){i=i||[];for(var n=0;n<t.length;n++){if(e===t[n]){return true}else if(t[n].columns){var r=i.length;i.push(t[n]);if(!Ht(e,t[n].columns,i)){i.splice(r,i.length-r)}else{return true}}}return false}function Nt(e,t){Ot(e,t,t)}function Ot(e,t,i){var n=i?Ai:Ti;e.hidden=!t;e.attributes=n(e.attributes);e.footerAttributes=n(e.footerAttributes);e.headerAttributes=n(e.headerAttributes)}function Vt(e,t){Wt(e);var i=e._hideByMedia;Ot(e,t,i?e.matchesMedia:t)}function Wt(e){e.matchesMedia=Ut(e)}function Ut(e){return e&&($t(e.media)||!$t(e.media)&&I.matchesMedia(e.media))}function jt(){return this.style.display!=="none"}function Gt(e){return E(e)[0].style.display!=="none"}function B(e){return A([e]).length>0}function A(e){return F(e,function(e){var t=!e.hidden&&e.matchesMedia!==false;if(t&&e.columns){t=A(e.columns).length>0}return t})}function qt(e){var t=[];var i;for(var n=0;n<e.length;n++){i=e[n];if(!$t(i.media)){if(!$t(i.minScreenWidth)){throw new Error("Using 'media' and 'minScreenWidth' options at the same time is not supported.")}t.push(i)}if(i.columns){t=t.concat(qt(i.columns))}}return t}function $t(e){return typeof e==="undefined"}function Kt(e){return E(e).map(function(){return this.toArray()})}function Yt(e,t,i){var n=Zt(H(t));var r=Zt(N(t));var a=e.rowSpan;if(i){if(n>r){e.rowSpan=a-(n-r)||1}else{e.rowSpan=a+(r-n)}}else{if(n>r){e.rowSpan=a+(n-r)}else{e.rowSpan=a-(r-n)||1}}}function Qt(e,t,i,n,r,a,o,s){var l=Zt(e);var d=Zt([t]);if(l>d){var u=new Array(o+1).join('<th class="k-group-cell k-header" scope="col">&nbsp;</th>');var c=a.children(":not(.k-filter-row)");E(new Array(l-d+1).join("<tr>"+u+"</tr>")).insertAfter(c.last())}ui(a,l-d);Jt(i,n,r,a,s)}function Xt(e,t,i){i=i||0;var n;var r;var a=t;t=V(t);var o={};var s=e.find(">tr:not(.k-filter-row)");var l=function(){var e=E(this);return!e.hasClass("k-group-cell")&&!e.hasClass("k-hierarchy-cell")};for(var d=0,u=t.length;d<u;d++){n=ei(t[d],a);if(!o[n.row]){o[n.row]=s.eq(n.row).find(".k-header").filter(l)}r=o[n.row].eq(n.cell);r.attr(I.attr("index"),i+d)}return t.length}function Zt(e){var t=1;var i=0;for(var n=0;n<e.length;n++){if(e[n].columns){var r=Zt(e[n].columns);if(r>i){i=r}}}return t+i}function Jt(e,t,i,n,r){var a=ni(e[0],t);var o=i.find(">tr:not(.k-filter-row):eq("+a.row+")>th.k-header");var s=E();var l=a.cell;var d;for(d=0;d<e.length;d++){s=s.add(o.eq(l+d))}n.find(">tr:not(.k-filter-row)").eq(a.row)[r](s);var u=[];for(d=0;d<e.length;d++){if(e[d].columns){u=u.concat(e[d].columns)}}if(u.length){Jt(u,t,i,n,r)}}function ei(e,t,i,n){var r;var a;i=i||0;n=n||{};n[i]=n[i]||0;for(a=0;a<t.length;a++){if(t[a]==e){r={cell:n[i],row:i};break}else if(t[a].columns){r=ei(e,t[a].columns,i+1,n);if(r){break}}n[i]++}return r}function ti(e,t,i,n){var r;var a=!!i.locked;var o;do{r=e[t];t+=n?1:-1;o=!!r.locked}while(r&&t>-1&&t<e.length&&r!=i&&!r.columns&&o===a);return r}function ii(e,t,i,n,r){if(t.columns){t=t.columns;return t[n?0:t.length-1]}else{var a=Lt(t,e);var o;if(a){o=a.columns}else{o=e}var s=P(t,o);if(s===0&&n){s++}else if(s==o.length-1&&!n||!i.locked&&!t.columns&&!n){s--}else if(s>0||s===0&&!n){s++}var l=P(i,o);t=ti(o,s,i,l>s);var d=P(t,r);if(t.columns&&(!d||d===o.length-1)){return null}if(t&&t!=i&&t.columns){return ii(e,t,i,n,r)}}return null}function ni(e,t,i,n){var r;var a;i=i||0;n=n||{};n[i]=n[i]||0;for(a=0;a<t.length;a++){if(t[a]==e){r={cell:n[i],row:i};break}else if(t[a].columns){r=ni(e,t[a].columns,i+1,n);if(r){break}}if(!t[a].hidden){n[i]++}}return r}function ri(e){var t=L(H(e));return t.concat(L(N(e)))}function ai(e,t,i,n){var r=e[i];var a=e[n];var o=Lt(r,t);t=o?o.columns:t;return P(a,t)}function L(e){var t=[];var i=[];for(var n=0;n<e.length;n++){t.push(e[n]);if(e[n].columns){i=i.concat(e[n].columns)}}if(i.length){t=t.concat(L(i))}return t}function oi(e){var t=0;var i;for(var n=0;n<e.length;n++){i=e[n];if(i.columns){t+=oi(i.columns)}else if(i.hidden){t++}}return t}function si(e){var t=0;for(var i=0,n=e.length;i<n;i++){if(!e[i].hidden){t+=parseInt(e[i].width,10)}}return t}function li(e){var t,i=0;for(var n=0,r=e.length;n<r;n++){t=e[n].style.width;if(t&&t.indexOf("%")==-1){i+=parseInt(t,10)}}return i}function di(e,t){var i=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");var n;for(var r=0;r<i.length;r++){n=i[r].rowSpan;if(n>1){i[r].rowSpan=n-t||1}}}function ui(e,t){var i=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");for(var n=0;n<i.length;n++){i[n].rowSpan+=t}}function ci(e){var t=e.find("tr:not(.k-filter-row)");var i=t.filter(function(){return!E(this).children().length}).remove().length;var n=t.find("th:not(.k-group-cell,.k-hierarchy-cell)");for(var r=0;r<n.length;r++){if(n[r].rowSpan>1){n[r].rowSpan-=i}}return t.length-i}function fi(e,t,i,n,r){var a,o,s,l=[];for(a=0,s=e.length;a<s;a++){o=i[n]||[];o.push(t.eq(r+a));i[n]=o;if(e[a].columns){l=l.concat(e[a].columns)}}if(l.length){fi(l,t,i,n+1,r+e.length)}}function hi(e,t,i){e.css({left:t,right:i})}function pi(e,t,i){e[t]=e[t]||{};e[t][i]=e[t][i]||""}function vi(e,t,i,n){pi(e,t,i);if(e[t][i]!==""){e[t][i]+=" "+n}else{e[t][i]=n}}function g(e,t,i,n){pi(e,t,i);e[t][i]=e[t][i].replace(n,"")}function H(e){return F(e,function(e){return e.locked})}function N(e){return F(e,function(e){return!e.locked})}function mi(e){return F(e,function(e){return e.sticky&&!e.locked})}function gi(e){return F(e,function(e){return e.sticky&&!e.locked&&B(e)})}function _i(e){return F(e,function(e){return!e.locked&&B(e)})}function bi(e){return F(e,function(e){return e.locked&&B(e)})}function O(e){var t=[];for(var i=0;i<e.length;i++){if(e[i].hidden){continue}if(e[i].columns){t=t.concat(O(e[i].columns))}else{t.push(e[i])}}return t}function wi(e){var t=[];for(var i=0;i<e.length;i++){if(e[i].columns){t=t.concat(e[i].columns)}}return t}function ki(e){var t=wi(e);t=t.filter(function(e){return!e.hidden});return t}function V(e){var t=[];for(var i=0;i<e.length;i++){if(!e[i].columns){t.push(e[i]);continue}t=t.concat(V(e[i].columns))}return t}function yi(e){var t=[];e=V(e);for(var i=0;i<e.length;i++){if(typeof e[i]==="string"){t.push(e[i])}else if(e[i].field){t.push(e[i].field)}}return t}function W(e){var t=e.find(">tr:not(.k-filter-row)");var i=function(){var e=E(this);return!e.hasClass("k-group-cell")&&!e.hasClass("k-hierarchy-cell")};var n=E();if(t.length>1){n=t.find("th").filter(i).filter(function(){return this.rowSpan>1})}n=n.add(t.last().find("th").filter(i));var r=I.attr("index");n.sort(function(e,t){e=E(e);t=E(t);var i=e.attr(r);var n=t.attr(r);if(i===S){i=E(e).index()}if(n===S){n=E(t).index()}i=parseInt(i,10);n=parseInt(n,10);return i>n?1:i<n?-1:0});return n}function xi(e){var t=e.closest("table");var i=E().add(e);var n=e.closest("tr");var r=t.find("tr:not(.k-filter-row)");var a=r.index(n);if(a>0){var o=r.eq(a-1);var s=o.find("th:not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return!E(this).attr("rowspan")});var l=0;var d=n.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(e);var u=e.prevAll(":not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return this.colSpan>1});for(var c=0;c<u.length;c++){l+=u[c].colSpan||1}d+=Math.max(l-1,0);l=0;for(c=0;c<s.length;c++){var f=s.eq(c);if(f.attr("data-colspan")){l+=f[0].getAttribute("data-colspan")}else{l+=1}if(d>=c&&d<l){i=xi(f).add(i);break}}}return i}function Ci(e){var t=e.closest("thead");var i=E().add(e);var n=e.closest("tr");var r=t.find("tr:not(.k-filter-row)");var a=r.index(n)+e[0].rowSpan;var o=I.attr("colspan");if(a<=r.length-1){var s=n.next();var l=e.prevAll(":not(.k-group-cell,.k-hierarchy-cell)");var d;l=l.filter(function(){return!this.rowSpan||this.rowSpan===1});var u=0;for(d=0;d<l.length;d++){u+=parseInt(l.eq(d).attr(o),10)||1}var c=s.find("th:not(.k-group-cell,.k-hierarchy-cell)");var f=parseInt(e.attr(o),10)||1;d=0;while(d<f){s=c.eq(d+u);i=i.add(Ci(s));var h=parseInt(s.attr(o),10);if(h>1){f-=h-1}d++}}return i}function Si(e,t,i,n){var r,a=e;if(n){e.empty()}if(o){e[0].innerHTML=i}else{r=document.createElement("div");r.innerHTML="<table><tbody>"+i+"</tbody></table>";e=r.firstChild.firstChild;t[0].replaceChild(e,a[0]);e=E(e)}return e}function Ti(e){e=e||{};var t=e.style;if(!t){t="display:none"}else{t=t.replace(/display:[^;]*/i,"display:none");if(!t.match(/display:/i)){t=t.replace(/(.*)?/i,"display:none;$1")}}return T({},e,{style:t})}function Di(e){e=e||{};var t=e.style||"";return t.indexOf("display:none")!==-1}function Ai(e){e=e||{};var t=e.style;if(t){e.style=t.replace(/(display\s*:\s*none\s*;?)*/gi,"")}return e}function Ei(e,t,i,n){var r=e.find(">colgroup"),a,o=G(t,function(e){a=e.width;if(a&&parseInt(a,10)!==0){return I.format('<col style="width:{0}"/>',typeof a===D?a:a+"px")}return"<col />"});if(i||r.find(".k-hierarchy-col").length){o.splice(0,0,'<col class="k-hierarchy-col" />')}if(r.length){r.remove()}r=E(new Array(n+1).join('<col class="k-group-col">')+o.join(""));if(!r.is("colgroup")){r=E("<colgroup/>").append(r)}e.prepend(r)}function Ii(e,t){var i=0;var n,r;var a=e.find("th:not(.k-group-cell)");for(n=0,r=t.length;n<r;n++){if(t[n].locked){a.eq(n).insertBefore(a.eq(i));a=e.find("th:not(.k-group-cell)");i++}}}function Mi(e){var t={},i,n,r;for(n=0,r=e.length;n<r;n++){i=e[n];t[i.value]=i.text}return t}function Ri(e,t,i,n){var r=i&&i.length&&R(i[0])&&"value"in i[0],a=r?Mi(i)[e]:e;a=a!=null?a:"";return t?I.format(t,a):n===false?a:I.htmlEncode(a)}function Fi(e,t,i){var n=0,r,a=e[n];while(a){r=i?true:a.style.display!=="none";if(r&&!wt.test(a.className)&&--t<0){a.style.display=i?"":"none";break}a=e[++n]}}function Pi(e,t){var i=0,n=e.length,r,a;for(;i<n;i+=1){a=e.eq(i);if(a.is(".k-grouping-row,.k-detail-row")){r=a.children(":not(.k-group-cell):first,.k-detail-cell").last();r.attr("colspan",parseInt(r.attr("colspan"),10)-1)}else{if(a.hasClass("k-grid-edit-row")&&(r=a.children(".k-edit-container")[0])){r=E(r);r.attr("colspan",parseInt(r.attr("colspan"),10)-1);r.find("col").eq(t).remove();a=r.find("tr:first")}Fi(a[0].cells,t,false)}}}function zi(e){var t=[];var i;for(var n=0;n<e.length;n++){i=e[n];if(!("field"in i&&"value"in i&&"items"in i)){break}t.push(i);if(i.hasSubgroups){t=t.concat(zi(i.items))}}return t}function Bi(e){var t=[];var i;for(var n=0;n<e.length;n++){i=e[n];if(!("field"in i&&"value"in i&&"items"in i)){break}if(i.hasSubgroups){t=t.concat(Bi(i.items))}t.push(i.aggregates)}return t}function Li(e,t){var i=0,n=e.length,r,a,o;for(;i<n;i+=1){a=e.eq(i);if(a.is(".k-grouping-row,.k-detail-row")){r=a.children(":not(.k-group-cell):first,.k-detail-cell").last();r.attr("colspan",parseInt(r.attr("colspan"),10)+1)}else{if(a.hasClass("k-grid-edit-row")&&(r=a.children(".k-edit-container")[0])){r=E(r);r.attr("colspan",parseInt(r.attr("colspan"),10)+1);Ei(r.find(">form>table"),A(o),false,0);a=r.find("tr:first")}Fi(a[0].cells,t,true)}}}function Hi(e,t,i){i=i||1;var n,r,a;for(r=0,a=e.length;r<a;r++){n=e.eq(r).children().last();n.attr("colspan",parseInt(n.attr("colspan"),10)+i);n=t.eq(r).children().last();n.attr("colspan",parseInt(n.attr("colspan"),10)-i)}}function Ni(e){var t,i,n=0;var r=e.find(">colgroup>col");for(t=0,i=r.length;t<i;t+=1){n+=parseInt(r[t].style.width,10)}return n}var Oi=I.ui.DataBoundWidget.extend({init:function(e,t,i){var n=this;t=q(t)?{dataSource:t}:t;r.fn.init.call(n,e,t);if(i){n._events=i}k=I.support.isRtl(e);n._element();n._aria();n._columns(E.extend(true,[],n.options.columns));if(n._foreignKeyPromises){E.when.apply(null,n._foreignKeyPromises).then(function(){n._foreignKeyPromises=null;n._continueInit()})}else{n._continueInit()}},_continueInit:function(){var e=this;e._dataSource();e._stickyColumns();e._tbody();e._thead();e._groupable();e._toolbar();e._pageable();e._setContentHeight();e._templates();e._navigatable();e._selectable();e._clipboard();e._details();e._editable();e._attachCustomCommandsEvent();e._adaptiveColumns();e._minScreenSupport();if(e.options.autoBind){e.dataSource.fetch()}else{e._group=e._groups()>0;e._footer()}if(e.lockedContent){e.wrapper.addClass("k-grid-lockedcolumns");e._resizeHandler=function(){e.resize()};E(window).on("resize"+_,e._resizeHandler)}I.notify(e)},events:[f,"dataBinding","cancel",be,we,ke,ce,fe,pe,he,ve,se,le,de,ue,i,me,Oe,Ve,_e,ge,We,Ue,je,Ge,qe,"page","sort","filter","group","groupExpand","groupCollapse","kendoKeydown"],setDataSource:function(e){var t=this;var i=t.options.scrollable;var n;t.options.dataSource=e;t._dataSource();t._pageable();t._thead();if(i){if(i.virtual){n=t.content.find(">.k-virtual-scrollable-wrap");I.scrollLeft(n,Yi(n,k))}else{n=t.tbody;I.scrollLeft(t.content,Yi(n,k))}}if(t.options.groupable){t._groupable()}if(t.virtualScrollable){t.virtualScrollable.setDataSource(t.options.dataSource)}if(t.options.navigatable){t._navigatable()}if(t.options.selectable){t._selectable()}if(t.options.autoBind){t.dataSource.fetch()}else{t._footer()}},options:{name:"Grid",columns:[],toolbar:null,autoBind:true,filterable:false,scrollable:true,sortable:false,selectable:false,allowCopy:false,navigatable:false,pageable:false,persistSelection:false,editable:false,encodeTitles:false,groupable:false,rowTemplate:"",altRowTemplate:"",search:false,noRecords:false,dataSource:{},height:null,resizable:false,reorderable:false,columnMenu:false,detailTemplate:null,columnResizeHandleWidth:3,mobile:"",messages:{editable:{cancelDelete:ht,confirmation:ut,confirmDelete:ft},commands:{create:s.create.text,cancel:s.cancel.text,save:s.save.text,destroy:s.destroy.text,edit:s.edit.text,update:s.update.text,canceledit:s.canceledit.text,excel:s.excel.text,pdf:s.pdf.text,search:s.search.text},noRecords:ct,expandCollapseColumnHeader:"",groupHeader:"Press ctrl + space to group",ungroupHeader:"Press ctrl + space to ungroup"},width:null},destroy:function(){var e=this,t;e._angularItems("cleanup");e._destroyColumnAttachments();r.fn.destroy.call(e);if(this._navigatableTables){this._navigatableTables.off(_);this._navigatableTables=null;this._headertables=null}if(e._resizeHandler){E(window).off("resize"+_,e._resizeHandler)}if(e.pager&&e.pager.element){e.pager.destroy()}if(e.timer){clearTimeout(e.timer)}if(e._progressTimeOut){clearTimeout(e._progressTimeOut)}if(e._collapseGroupsTimeOut){clearTimeout(e._collapseGroupsTimeOut)}if(e._endlessFetchTimeOut){clearTimeout(e._endlessFetchTimeOut)}e.pager=null;e._destroyGroupable();if(e.options.reorderable){e.wrapper.data("kendoReorderable").destroy()}if(e.selectable&&e.selectable.element){e.selectable.destroy();e.clearArea();e._selectedIds=null;if(e.copyHandler){e.wrapper.off("keydown",e.copyHandler);e.unbind(e.copyHandler)}if(e.updateClipBoardState){e.unbind(e.updateClipBoardState);e.updateClipBoardState=null}if(e.clearAreaHandler){e.wrapper.off("keyup",e.clearAreaHandler)}}e.selectable=null;if(e.resizable){e.resizable.destroy();if(e._resizeUserEvents){if(e._resizeHandleDocumentClickHandler){E(document).off("click",e._resizeHandleDocumentClickHandler)}e._resizeUserEvents.destroy();e._resizeUserEvents=null}e.resizable=null}e._destroyVirtualScrollable();if(e.editableUserEvents){e.editableUserEvents.destroy();e.editableUserEvents=null}if(e._lockedContentUserEvents){e._lockedContentUserEvents.destroy();e._lockedContentUserEvents=null}e._destroyEditable();if(e.dataSource){e.dataSource.unbind(f,e._refreshHandler).unbind(Q,e._progressHandler).unbind(X,e._errorHandler).unbind(lt,e._clearSortClasses);e._refreshHandler=e._progressHandler=e._errorHandler=e._clearSortClasses=null}t=e.element.add(e.wrapper).add(e.table).add(e.thead).add(e.wrapper.find(">.k-grid-toolbar"));if(e.content){t=t.add(e.content).add(e.content.find(">.k-virtual-scrollable-wrap"))}if(e.lockedHeader){e._removeLockedContainers()}if(e.pane){e.pane.destroy()}if(e._isMobile){e.wrapper.off("transitionend"+_);e.wrapper.off("contextmenu"+_)}if(e.minScreenResizeHandler){E(window).off("resize",e.minScreenResizeHandler)}e._detachColumnMediaResizeHandler();if(e._draggableInstance&&e._draggableInstance.element){e._draggableInstance.destroy()}e._draggableInstance=null;t.off(_);I.destroy(e.wrapper);e.rowTemplate=e.altRowTemplate=e.lockedRowTemplate=e.lockedAltRowTemplate=e.detailTemplate=e.footerTemplate=e.groupFooterTemplate=e.lockedGroupFooterTemplate=e.noRecordsTemplate=null;e.scrollables=e.thead=e.tbody=e.element=e.table=e.content=e.footer=e.wrapper=e.lockedTable=e.lockedContent=e.lockedHeader=e.lockedFooter=e._groupableClickHandler=e._groupRows=e._setContentWidthHandler=null},getOptions:function(){var e=this.options;e.dataSource=null;var t=T(true,{},this.options);t.columns=I.deepExtend([],this.columns);var i=this.dataSource;var n=i.options.data&&i._data;i.options.data=null;t.dataSource=E.extend(true,{},i.options);i.options.data=n;t.dataSource.data=n;t.dataSource.page=i.page();t.dataSource.filter=E.extend(true,{},i.filter());t.dataSource.pageSize=i.pageSize();t.dataSource.sort=i.sort();t.dataSource.group=i.group();t.dataSource.aggregate=i.aggregate();if(t.dataSource.transport){t.dataSource.transport.dataSource=null}if(t.pageable&&t.pageable.pageSize){t.pageable.pageSize=i.pageSize()}t.$angular=S;return t},setOptions:function(e){var t=this.getOptions();I.deepExtend(t,e);if(!e.dataSource){t.dataSource=this.dataSource}else{if(e.dataSource.filter){t.dataSource.filter=e.dataSource.filter}}var i=this.wrapper;var n=this._events;var r=this.element;this.destroy();this.options=null;if(this._isMobile){var a=i.closest(I.roleSelector("pane")).parent();a.after(i);a.remove();i.removeClass("k-grid-mobile")}if(i[0]!==r[0]){i.before(r);i.remove()}r.empty();this.init(r,t,n);this._setEvents(t)},items:function(){if(this.lockedContent){return this._items(this.tbody).add(this._items(this.lockedTable.children("tbody")))}else{return this._items(this.tbody)}},_items:function(e,t){return e.children().filter(function(){var e=E(this);return(t?!e.hasClass("k-detail-row"):!e.hasClass("k-grouping-row"))&&!e.hasClass("k-detail-row")&&!e.hasClass("k-group-footer")})},dataItems:function(){var e=I.ui.DataBoundWidget.fn.dataItems.call(this);if(this.lockedContent){var t=e.length,i=new Array(2*t);for(var n=t;--n>=0;){i[n]=i[n+t]=e[n]}e=i}return e},_destroyColumnAttachments:function(){var e=this;e.resizeHandle=null;if(!e.thead){return}this.angular("cleanup",function(){return{elements:e.thead.get()}});e.thead.add(e.lockedHeader).find("th").each(function(){var e=E(this),t=e.data("kendoFilterMenu"),i=e.data("kendoColumnSorter"),n=e.data("kendoColumnMenu");if(t){t.destroy()}if(i){i.destroy()}if(n){n.destroy()}})},_attachCustomCommandsEvent:function(){var e=this,t=V(e.columns||[]),i,n,r;for(n=0,r=t.length;n<r;n++){i=t[n].command;if(i){zt(e,e.wrapper,i)}}},_aria:function(){var e=this.element.attr("id")||"aria";if(e){this._cellId=e+"_active_cell"}},_element:function(){var e=this,t=e.element;if(!t.is("table")){if(e.options.scrollable){t=e.element.find("> .k-grid-content > table")}else{t=e.element.children("table")}if(!t.length){t=E("<table />").appendTo(e.element)}}e.table=t.attr("role",e._hasDetails()?"treegrid":"grid");e._wrapper()},_createResizeHandle:function(e,t){var i=this;var n=i.options.columnResizeHandleWidth;var r=i.options.scrollable;var a=i.resizeHandle;var o=n*3/2;var s=0;var l;var d;var u;var c;var f;var h;var p;var v;var m;var g;if(a&&i.lockedContent&&a.data("th")[0]!==t[0]){a.off(_).remove();a=null}if(!a){a=i.resizeHandle=E('<div class="k-resize-handle"><div class="k-resize-handle-inner"></div></div>');e.append(a)}v=I.scrollLeft(e);if(k&&(z.mozilla||z.webkit&&z.version>=85)){v=v*-1}p=parseFloat(e.css("borderLeftWidth"));m=t.offset().left+v-parseFloat(t.css("marginLeft"))-(e.offset().left+p);if(!k){m+=t[0].offsetWidth}else{if(r){s=m<=v?o:0;l=t.closest(".k-grid-header-wrap, .k-grid-header-locked");h=l[0].scrollWidth-l[0].offsetWidth;f=parseFloat(l.css("marginLeft"));d=z.msie?2*I.scrollLeft(l)+p-f-s:0;u=-s;c=z.mozilla?p-f-s:0;m-=u+c+d}}g=t.offset().top-parseFloat(t.css("marginTop"))-(e.offset().top+parseFloat(e.css("borderTopWidth")));a.css({top:g,left:m-o,height:w(t),width:n*3-s}).data("th",t).show();a.off("dblclick"+_).on("dblclick"+_,function(){i._autoFitLeafColumn(parseInt(t.attr(I.attr("index")),10))})},_positionColumnResizeHandle:function(){var n=this,e=n.lockedHeader?n.lockedHeader.find("thead:first"):E();n.thead.add(e).on("mousemove"+_,"tr:not(.k-filter-row) > th",function(e){var t=typeof e.buttons!=="undefined"?e.buttons:e.which||e.button;var i=E(this);if(i.hasClass("k-group-cell")||i.hasClass("k-hierarchy-cell")){return}if(typeof t!=="undefined"&&t!==0){return}if(i[0].hasAttribute(I.attr(at))){return}n._createResizeHandle(i.closest("div"),i)})},_resizeHandleDocumentClick:function(e){if(E(e.target).closest(".k-column-active").length){return}E(document).off(e);this._resetResizeHandleHeader();this._hideResizeHandle()},_resetResizeHandleHeader:function(){var e;if(!this.resizeHandle){return}e=E(this.resizeHandle).data("th");if(e){e.find(h+Me).find(h+Re).show();e.find(h+Fe).show();e.find(h+Pe).show();e.find(h+ze).show()}},_hideResizeHandle:function(){if(this.resizeHandle){this.resizeHandle.data("th").removeClass("k-column-active");if(this.lockedContent&&!this._isMobile){this.resizeHandle.off(_).remove();this.resizeHandle=null}else{this.resizeHandle.hide()}}},_positionColumnResizeHandleTouch:function(){var i=this,e=i.lockedHeader?i.lockedHeader.find("thead:first"):E();i._resizeUserEvents=new I.UserEvents(e.add(i.thead),{filter:"th:not(.k-group-cell):not(.k-hierarchy-cell)",threshold:10,minHold:500,hold:function(e){var t=E(e.target);e.preventDefault();if(i.resizeHandle){i.resizeHandle.data("th").removeClass("k-column-active");i._resetResizeHandleHeader()}t.addClass("k-column-active");t.find(h+Me).find(h+Re).hide();t.find(h+Fe).hide();t.find(h+Pe).hide();t.find(h+ze).hide();i._createResizeHandle(t.closest("div"),t);if(!i._resizeHandleDocumentClickHandler){i._resizeHandleDocumentClickHandler=x(i._resizeHandleDocumentClick,i)}E(document).on("click",i._resizeHandleDocumentClickHandler)}})},resizeColumn:function(e,t){var i=this;var n=!!e.locked;var r=!!e.hidden;var a=this.options;var o=!I.support.mobileOS?I.support.scrollbar():0;var s=n?P(e,bi(O(i.columns))):P(e,_i(O(i.columns)));var l=n?i.lockedTable:i.table;var d=i.footer||E();var u=n?i.lockedHeader.find("table"):i.thead.closest("table");var c=e.minResizableWidth||10;var f=n?M(l.find("tbody")):M(i.tbody);var h;if(r){e.width=t>c?t:c;return}if(i.footer&&i.lockedContent){d=n?i.footer.children(".k-grid-footer-locked"):i.footer.children(".k-grid-footer-wrap")}if(a.scrollable){h=u.find("col:not(.k-group-col,.k-hierarchy-col):eq("+s+")").add(l.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+s+")")).add(d.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+s+")"))}else{h=l.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+s+")")}if(a.scrollable){var p=false;var v=i.wrapper.width()-o;var m=t=t>c?t:c;if(n&&f-t+m>v){m=t+(v-f-o*2);if(m<0){m=t}p=true}if(m>10&&m>=c){h.css("width",m);if(f){if(p){m=v-o*2}else{m=f+(t-e.width)}l.add(u).add(d).css("width",m);if(!n){i._footerWidth=m}}}i._scrollVirtualWrapperOnColumnResize()}else if(t>10&&t>=c){h.css("width",t)}e.width=t;i._applyLockedContainersWidth();i._syncLockedContentHeight();i._syncLockedHeaderHeight();i._updateStickyColumns()},_resizable:function(){var d=this,u=d.options,e,c,f,h,p,o=this._isMobile,v=!I.support.mobileOS?I.support.scrollbar():0,m,g,_;if(u.resizable){e=u.scrollable?d.wrapper.find(".k-grid-header-wrap:first"):d.wrapper;if(o){d._positionColumnResizeHandleTouch(e)}else{d._positionColumnResizeHandle(e)}if(d.resizable){d.resizable.destroy()}d.resizable=new b.Resizable(e.add(d.lockedHeader),{handle:(!!u.scrollable?"":">")+".k-resize-handle",hint:function(e){return E('<div class="k-grid-resize-indicator" />').css({height:w(e.data("th"))+d.tbody.attr("clientHeight")})},start:function(e){_=E(e.currentTarget).data("th");if(o){d._hideResizeHandle()}var t=_.closest("table"),i=E.inArray(_[0],W(_.closest("thead")).filter(":visible"));m=t.parent().hasClass("k-grid-header-locked");var n=m?d.lockedTable:d.table,r=d.footer||E();if(d.footer&&d.lockedContent){r=m?d.footer.children(".k-grid-footer-locked"):d.footer.children(".k-grid-footer-wrap")}Ft(d.wrapper,"col-resize");if(u.scrollable){g=t.find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+i+")").add(n.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+i+")")).add(r.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+i+")"))}else{g=n.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+i+")")}var a=E.map(d.columns,function(e){return!e.hidden&&(m&&e.locked||!m&&!e.locked)?e:null});c=e.x.location;f=M(_);h=V(a)[i].minResizableWidth||10;p=m?M(n.children("tbody")):M(d.tbody);if(z.webkit){d.wrapper.addClass("k-grid-column-resizing")}},resize:function(e){var t=k?-1:1,i=f+e.x.location*t-c*t;if(u.scrollable){var n;if(m&&d.lockedFooter){n=d.lockedFooter.children("table")}else if(d.footer){n=d.footer.find(">.k-grid-footer-wrap>table")}if(!n||!n[0]){n=E()}var r=_.closest("table");var a=m?d.lockedTable:d.table;var o=false;var s=d.wrapper.width()-v;var l=i;if(m&&p-f+l>s){l=f+(s-p-v*2);if(l<0){l=i}o=true}if(l>10&&l>=h){g.css("width",l);if(p){if(o){l=s-v*2}else{l=p+e.x.location*t-c*t}a.add(r).add(n).css("width",l);if(!m){d._footerWidth=l}}}d._scrollVirtualWrapperOnColumnResize()}else if(i>10&&i>=h){g.css("width",i)}},resizeend:function(){var e=M(_),t,i;Ft(d.wrapper,"");if(z.webkit){d.wrapper.removeClass("k-grid-column-resizing")}if(f!=e){i=d.lockedHeader?d.lockedHeader.find("thead:first tr:first").add(d.thead.find("tr:first")):_.parent();var n=_.attr(I.attr("index"));if(!n){n=i.find("th:not(.k-group-cell):not(.k-hierarchy-cell)").index(_)}t=V(d.columns)[n];t.width=e;d.trigger(Oe,{column:t,oldWidth:f,newWidth:e});d._applyLockedContainersWidth();d._syncLockedContentHeight();d._syncLockedHeaderHeight();d._updateStickyColumns()}d._resetResizeHandleHeader();d._hideResizeHandle();_=null}})}},_draggable:function(){var t=this;if(t.options.reorderable){if(t._draggableInstance){t._draggableInstance.destroy()}var e=t.wrapper.children(".k-grid-header");t._draggableInstance=t.wrapper.kendoDraggable({group:I.guid(),autoScroll:true,filter:t.content?".k-grid-header:first "+re:"table:first>.k-grid-header "+re,dragstart:function(){e.children(".k-grid-header-wrap").unbind("scroll"+_+"scrolling").bind("scroll"+_+"scrolling",function(e){if(t.virtualScrollable){I.scrollLeft(t.content.find(">.k-virtual-scrollable-wrap"),this.scrollLeft)}else{I.scrollLeft(t.scrollables.not(e.currentTarget),this.scrollLeft)}})},dragend:function(){t._resetResizeHandleHeader();e.children(".k-grid-header-wrap").unbind("scroll"+_+"scrolling")},drag:function(){t._hideResizeHandle()},hint:function(e){var t=e.attr(I.attr("title"));if(t){t=I.htmlEncode(t)}return E('<div class="k-header k-reorder-clue k-drag-clue" />').html(t||e.attr(I.attr("field"))||e.text()).prepend('<span class="k-icon k-drag-status k-i-cancel"></span>')}}).data("kendoDraggable")}},_reorderable:function(){var r=this;if(r.options.reorderable){if(r.wrapper.data("kendoReorderable")){r.wrapper.data("kendoReorderable").destroy()}r.wrapper.kendoReorderable({draggable:r._draggableInstance,dragOverContainers:function(e,t){var i=ri(r.columns);return i[e].lockable!==false&&ai(i,r.columns,e,t)>-1},inSameContainer:function(e){return E(e.source).parent()[0]===E(e.target).parent()[0]&&ai(ri(r.columns),r.columns,e.sourceIndex,e.targetIndex)>-1},change:function(e){var t=ri(r.columns);var i=t[e.oldIndex];var n=ai(t,r.columns,e.oldIndex,e.newIndex);r.trigger(Ve,{newIndex:n,oldIndex:P(i,t),column:i});r.reorderColumn(n,i,e.position==="before")}})}},_reorderHeader:function(e,t,i,n){var r=this;var a=ei(e[0],r.columns);var o=ei(t,r.columns);var s;var l;var d=[];for(var u=0;u<e.length;u++){if(e[u].columns){d=d.concat(e[u].columns)}}if(n){l=y(n,n,"tr:eq("+a.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)")}else{l=y(r.lockedHeader,r.thead,"tr:eq("+a.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)")}var c=H(e).length;var f=H([t]).length;if(d.length){if(c>0&&f===0){s="prepend";Qt(e,t,d,r.columns,r.lockedHeader.find("thead"),r.thead,this._groups(),s)}else if(c===0&&f>0){s=o.cell===0&&e[0].columns&&!t.columns&&!r._group?"prepend":"append";Qt(e,t,d,N(r.columns),r.thead,r.lockedHeader.find("thead"),this._groups(),s)}if(t.columns||a.cell-o.cell>1||o.cell-a.cell>1){t=ii(r.columns,t,e[0],i,r.columns);if(t){if(c>0&&f===0){r._reorderHeader(d,t,i,r.thead)}else if(c===0&&f>0){r._reorderHeader(d,t,i,r.lockedHead)}else{r._reorderHeader(d,t,i)}}}}else if(c!==f){Yt(l[a.cell],r.columns,c)}Pt(l,a.cell,o.cell,i,e.length)},_reorderContent:function(e,t,i){var n=this;var r=E();var a=e[0];var o=A(e);var s=P(a,V(n.columns));var l=P(t,V(n.columns));var d=P(o[0],O(n.columns));var u=P(t,O(n.columns));var c=H(n.columns).length;var f=!!t.locked;var h=n.footer||n.wrapper.find(".k-grid-footer");var p,v,m;p=v=u;if(t.hidden){var g=f?H(n.columns):N(n.columns);if(A(g).length>0){p=v=u=this._findClosestVisibleColumnIndex(g,l);m=A(g.slice(l)).length>0}else{if(f){u=n.lockedTable.find("colgroup");p=n.lockedHeader.find("colgroup");v=E(n.lockedFooter).find(">table>colgroup")}else{u=n.tbody.prev();p=n.thead.prev();v=h.find(".k-grid-footer-wrap").find(">table>colgroup")}}}if(n._hasFilterRow()){Pt(n.wrapper.find(".k-filter-row th:not(.k-group-cell,.k-hierarchy-cell)"),s,l,i,e.length)}if(d>=0){Pt(y(n.lockedHeader,n.thead.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),d,p,m?m:i,o.length)}if(n.options.scrollable){if(d>=0&&!n._hasVirtualColumns()){Pt(y(n.lockedTable,n.tbody.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),d,u,m?m:i,o.length)}}if(h&&h.length){if(d>=0){Pt(y(n.lockedFooter,h.find(".k-grid-footer-wrap"),">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)"),d,v,m?m:i,o.length)}Pt(h.find(".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)"),s,l,i,e.length)}var _=n.tbody.children(":not(.k-grouping-row,.k-detail-row)");if(n.lockedTable){if(c>l){if(c<=s){Hi(n.lockedTable.find(">tbody>tr.k-grouping-row"),n.table.find(">tbody>tr.k-grouping-row"),e.length)}}else if(c>s){Hi(n.table.find(">tbody>tr.k-grouping-row"),n.lockedTable.find(">tbody>tr.k-grouping-row"),e.length)}r=n.lockedTable.find(">tbody>tr:not(.k-grouping-row,.k-detail-row)")}for(var b=0,w=_.length;b<w;b+=1){Pt(y(r[b],_[b],">td:not(.k-group-cell,.k-hierarchy-cell)"),s,l,i,e.length)}},_findClosestVisibleColumnIndex:function(e,t){var i=A(e.slice(t)).length>0?e.slice(t):e.slice(0,t+1).reverse(),n=A(i)[0];return P(n,A(this.columns))},_autoFitLeafColumn:function(e){this.autoFitColumn(V(this.columns)[e])},autoFitColumn:function(t){var e=this,i=e.options,n=e.columns,r,a,o,s,l=e.lockedHeader?W(e.lockedHeader.find(">table>thead")).filter(jt).length:0,d,u,c,f,h="col:not(.k-group-col):not(.k-hierarchy-col)",p="td:visible:not(.k-group-cell):not(.k-hierarchy-cell)",v,m;if(typeof t=="number"){t=n[t]}else if(R(t)){t=F(L(n),function(e){return e===t})[0]}else{t=F(L(n),function(e){return e.field===t})[0]}if(!t||!B(t)){return}u=t.minResizableWidth;r=P(t,V(n));s=t.locked;if(s){o=e.lockedHeader.children("table")}else{o=e.thead.parent()}a=o.find("[data-index='"+r+"']");v=a.find("a.k-header-column-menu, a.k-grid-filter");var g=s?e.lockedTable:e.table,_=e.footer||E();if(e.footer&&e.lockedContent){_=s?e.footer.children(".k-grid-footer-locked"):e.footer.children(".k-grid-footer-wrap")}var b=_.find("table").first();if(e.lockedHeader&&!s){r-=l}for(var w=0;w<n.length;w++){if(n[w]===t){break}else{if(n[w].hidden){r--}}}if(i.scrollable){d=o.find(h).eq(r).add(g.children("colgroup").find(h).eq(r)).add(b.find("colgroup").find(h).eq(r));if(!s){c=g.parent();f=I.scrollLeft(c)}}else{d=g.children("colgroup").find(h).eq(r)}var k=o.add(g).add(b);if(z.safari){a.css("white-space","initial")}var y=M(a);d.width("");k.css("table-layout","fixed");d.width("auto");k.addClass("k-autofitting");k.css("table-layout","");m=v.length?M(v)+M(a):M(a);var x=Math.ceil(Math.max(m,M(g.find("tr:not(.k-grouping-row)").eq(0).children(p).eq(r)),M(b.find("tr").eq(0).children(p).eq(r))))+1;if(u&&u>x){x=u}d.width(x);t.width=x;if(z.safari){a.css("white-space","")}if(i.scrollable){var C=o.find("col"),S,T=0;for(var D=0,A=C.length;D<A;D+=1){S=C[D].style.width;if(S&&S.indexOf("%")==-1){T+=parseInt(S,10)}else if(C.eq(D).hasClass("k-group-col")){T+=parseInt(C.eq(D).width(),10)}else{T=0;break}}if(T){k.each(function(){this.style.width=T+"px"})}}k.removeClass("k-autofitting");if(f){I.scrollLeft(c,f)}e.trigger(Oe,{column:t,oldWidth:y,newWidth:x});e._applyLockedContainersWidth();e._syncLockedContentHeight();e._syncLockedHeaderHeight();e._updateStickyColumns()},reorderColumn:function(e,t,i){var n=this,r=Lt(t,n.columns),a=r?r.columns:n.columns,o=P(t,a),s=a[e],l=n.virtualScroll||{},d,u=!!s.locked,c=H(n.columns).length,f=F(V(n.columns),function(e){return e.groupHeaderColumnTemplate});if(o===e){return}if(!t.locked&&u&&N(n.columns).length==1){return}if(t.locked&&!u&&c==1){return}n._hideResizeHandle();if(i===S){i=e<o}var h=[t];n._reorderHeader(h,s,i);if(n.lockedHeader){ci(n.thead);ci(n.lockedHeader)}if(s.columns){s=V(s.columns);s=s[i?0:s.length-1]}if(t.columns){h=V(t.columns)}n._reorderContent(h,s,i);d=!!t.locked;d=d!=u;t.locked=u;a.splice(i?e:e+1,0,t);a.splice(o<e?o:o+1,1);n._updateLockedCols();n._updateCols();n._templates();n._updateColumnCellIndex();n._updateColumnSorters();if(f.length>0){n._renderGroupRows()}n._updateTablesWidth();n._applyLockedContainersWidth();n._syncLockedHeaderHeight();n._syncLockedContentHeight();n._updateFirstColumnClass();n._updateStickyColumns();if(l.columns){n.refresh()}if(!d){return}if(u){n.trigger(We,{column:t})}else{n.trigger(Ue,{column:t})}},_updateColumnCellIndex:function(){var e;var t=0;if(this.lockedHeader){e=this.lockedHeader.find("thead");t=Xt(e,H(this.columns))}Xt(this.thead,N(this.columns),t)},lockColumn:function(t){var e=this.columns;if(typeof t=="number"){t=e[t]}else{t=F(e,function(e){return e.field===t})[0]}if(!t||t.locked||t.hidden){return}if(t.sticky){this.unstickColumn(e.indexOf(t))}var i=H(e).length-1;this.reorderColumn(i,t,false)},unlockColumn:function(t){var e=this.columns;if(typeof t=="number"){t=e[t]}else{t=F(e,function(e){return e.field===t})[0]}if(!t||!t.locked||t.hidden){return}var i=H(e).length;this.reorderColumn(i,t,true)},stickColumn:function(t){var e=this.columns;if(typeof t=="number"){t=e[t]}else{t=F(e,function(e){return e.field===t})[0]}if(!t||t.sticky||t.hidden){return}if(t.locked){this.unlockColumn(e.indexOf(t));if(t.locked){return}}t.sticky=true;this._updateStickyColumns()},unstickColumn:function(t){var e=this.columns;if(typeof t=="number"){t=e[t]}else{t=F(e,function(e){return e.field===t})[0]}if(!t||!t.sticky||t.locked||t.hidden){return}this._removeStickyAttributes([t]);this._removeStickyStyles(mi(e));t.sticky=false;this._updateStickyColumns();if(this._anyStickyColumns()===0){this._templates()}},cellIndex:function(e){var t=0;if(this.lockedTable&&!E.contains(this.lockedTable[0],e[0])){t=V(H(this.columns)).length}return E(e).parent().children("td:not(.k-group-cell,.k-hierarchy-cell)").index(e)+t},_modelForContainer:function(e){e=E(e);if(!e.is("tr")&&this._editMode()!=="popup"){e=e.closest("tr")}var t=e.attr(I.attr("uid"));return this.dataSource.getByUid(t)},_calculateColumnIndex:function(e){var t=this.cellIndex(e);var i=0;if(this._hasVirtualColumns()){i=parseInt(E(e).closest("tr").find("td:first").attr("colspan"),10);i=i>1?i-1:0}return t+i},_editable:function(){var n=this,e=n.options.editable,i=function(){var e=c(),t=n._editContainer;if(t&&t[0]&&!E.contains(t[0],e)&&t[0]!==e&&!E(e).closest(".k-animation-container").length){if(n.editable.end()){n.closeCell()}else{n._scrollVirtualWrapper()}}};if(e){this.wrapper.addClass("k-editable");var t=n._editMode();if(t==="incell"){n.table.add(n.lockedTable).on("mousedown"+_,m+">"+C,function(e){var t=E(e.target);if(n._editMode()==="incell"&&t.hasClass("k-checkbox")&&t.prev().attr(I.attr("bind"))){e.preventDefault()}});if(e.update!==false){if(Tt){n.wrapper.on(u+_,".k-edit-cell > input[type='checkbox']",function(e){E(e.target).focus()}).on(u+_,".k-edit-cell",function(e){if(!E(e.target).is("input")){E(e.currentTarget).find("input[type='checkbox']").focus()}}).on($e+_,"tr:not(.k-grouping-row) > td",function(e){var t=n._editContainer;if(t&&t[0]&&(E.contains(t[0],e.target)||t[0]===e.target)){n._mousedownOnEditCell=true}else{n._mousedownOnEditCell=false}})}n.editableUserEvents=new I.UserEvents(n.wrapper,{filter:"tr:not(.k-grouping-row) > td",allowSelection:true,tap:function(e){var t=E(e.target),i=n.lockedTable&&t.closest("table")[0]===n.lockedTable[0];n._mousedownOnEditCell=false;if(t.hasClass("k-hierarchy-cell")||t.hasClass("k-detail-cell")||t.hasClass("k-group-cell")||t.hasClass("k-edit-cell")||t.has("a.k-grid-delete").length||t.has("button.k-grid-delete").length||t.closest("tbody")[0]!==n.tbody[0]&&!i||E(e.target).is(":input")){return}if(n.editable){if(n.editable.end()){E(c()).blur();n.closeCell();n.editCell(t)}else{n._scrollVirtualWrapper()}}else{n.editCell(t)}}});n.wrapper.on("focusin"+_,function(){if(!E.contains(this,c())){clearTimeout(n.timer);n.timer=null}}).on("focusout"+_,function(e){var t=true;if(Tt&&n._mousedownOnEditCell||n._virtualColScroll){t=false}n._mousedownOnEditCell=false;if(t){n.timer=setTimeout(function(){i(e)},1)}})}}else{if(e.update!==false){n.wrapper.on(u+_,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible a.k-grid-edit",function(e){e.preventDefault();n.editRow(E(this).closest("tr"))});if(n._isVirtualInlineEditable()){n.wrapper.on("focusout"+_,"tr:not(.k-grouping-row) > td",function(){if(n.editable&&!n.editable.end()){n._scrollVirtualWrapper()}})}}}if(e.destroy!==false){n.wrapper.on(u+_,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete",function(e){e.preventDefault();e.stopPropagation();n.removeRow(E(this).closest("tr"))})}else{n.wrapper.on(u+_,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible button.k-grid-delete",function(e){e.stopPropagation();if(!n._confirmation()){e.preventDefault()}})}}},editCell:function(t){t=E(t);var i=this,e=V(i.columns)[i._calculateColumnIndex(t)],n=i._modelForContainer(t);i.closeCell();if(n&&qi(e,n)&&!e.command){if(i.trigger(le,{model:n})){return}i._attachModelChange(n);i._editContainer=t;if(i._shouldClearEditableState){i._clearEditableState()}i.editable=t.addClass("k-edit-cell").kendoEditable({fields:{field:e.field,format:e.format,editor:e.editor,values:e.values},model:n,target:i,change:function(e){if(i.trigger(de,{values:e.values,container:t,model:n})){e.preventDefault()}},skipFocus:(i._isVirtualIncellEditable()||i._hasVirtualColumns())&&i._editableState?true:false}).data("kendoEditable");var r=t.parent().addClass("k-grid-edit-row");if(i.lockedContent){Wi(r[0],i._relatedRow(r).addClass("k-grid-edit-row")[0]);i._syncLockedScroll()}i.trigger(se,{container:t,model:n})}},_adjustLockedHorizontalScrollBar:function(){var e=this.table,t=e.parent();var i=e[0].offsetWidth>t[0].clientWidth?I.support.scrollbar():0;this.lockedContent.height(t[0].offsetHeight-i)},_syncLockedScroll:function(){this.lockedContent[0].scrollTop=this.content[0].scrollTop;if(this.virtualScrollable){this.lockedContent[0].scrollTop=this.wrapper.find(".k-virtual-scrollable-wrap")[0].scrollTop}},_syncLockedContentHeight:function(){if(this.lockedTable){if(!this.touchScroller){this._adjustLockedHorizontalScrollBar()}this._adjustRowsHeight(this.table,this.lockedTable)}},_syncLockedHeaderHeight:function(){if(this.lockedHeader){var e=this.lockedHeader.children("table");var t=this.thead.parent();this._adjustRowsHeight(e,t);Vi(e,t)}},_syncLockedFooterHeight:function(){if(this.lockedFooter&&this.footer&&this.footer.length){this._adjustRowsHeight(this.lockedFooter.children("table"),this.footer.find(".k-grid-footer-wrap > table"))}},_destroyEditable:function(){var t=this;var e=function(){if(t.editable){var e=t.editView?t.editView.element:t._editContainer;if(e){e.off(u+_,"a.k-grid-cancel",t._editCancelClickHandler);e.off(u+_,"a.k-grid-update",t._editUpdateClickHandler)}t._detachModelChange();t.editable.destroy();t.editable=null;t._editContainer=null;t._destroyEditView();t._editableIsClosing=null}};if(t.editable){if(t._editMode()==="popup"&&!t._isMobile){if(t._editableIsClosing){t._editContainer.data("kendoWindow").bind("deactivate",e)}else{t._editableIsClosing=true;t._editContainer.data("kendoWindow").bind("deactivate",e).close()}}else{e()}}if(t._confirmDialog){t._confirmDialog.close();t._confirmDialog.destroy();t._confirmDialog=null}},_destroyEditView:function(){if(this.editView){this.editView.purge();this.editView=null;this.pane.navigate("")}},_attachModelChange:function(e){var t=this;t._modelChangeHandler=function(e){t._modelChange({field:e.field,model:this})};e.bind("change",t._modelChangeHandler)},_detachModelChange:function(){var e=this,t=e._editContainer,i=e._modelForContainer(t);if(i){i.unbind(f,e._modelChangeHandler)}},closeCell:function(e){var t=this,i=t._editContainer,n,r,a;if(!i){return}a=t._modelForContainer(i);if(e&&t.trigger("cancel",{container:i,model:a})){return}t.trigger(me,{type:e?"cancel":"save",model:a,container:i});i.removeClass("k-edit-cell");n=V(t.columns)[t._calculateColumnIndex(i)];r=i.parent().removeClass("k-grid-edit-row");if(t.lockedContent){t._relatedRow(r).removeClass("k-grid-edit-row")}t._destroyEditable();t._displayCell(i,n,a);if(t._shouldClearEditableState){t._clearEditableState()}t.trigger("itemChange",{item:r,data:a,ns:b});if(t.lockedContent){Wi(r.css("height","")[0],t._relatedRow(r).css("height","")[0])}},_displayCell:function(e,t,i){var n=this,r={storage:{},count:0},a=T({},I.Template,n.options.templateSettings),o=I.template(n._cellTmpl(t,r),a);if(r.count>0){o=x(o,r.storage)}e.empty().html(o(i));n.angular("compile",function(){return{elements:e,data:[{dataItem:i}]}})},removeRow:function(e){if(!this._confirmation(e)){return}this._removeRow(e)},_removeRow:function(e){var t=this,i,n,r,a,o=t._editMode();if(o!=="incell"){t.cancelRow()}e=E(e);if(t.lockedContent){e=e.add(t._relatedRow(e))}e=e.hide();if(t.dataSource._isGroupPaged()){t._removeGroupIfEmpty(e)}i=t._modelForContainer(e);if(i&&!t.trigger(ue,{row:e,model:i})){a=t.dataSource.options.schema;if(t._selectedIds&&a&&a.model){n=d(t.dataSource.options.schema.model)?t.dataSource.options.schema.model.fn.idField:t.dataSource.options.schema.model.id;r=i[n];delete t._selectedIds[r]}t.dataSource.remove(i);if(o==="inline"||o==="popup"){t.dataSource.sync()}}else if(o==="incell"){t._destroyEditable()}},_editMode:function(){var e="incell",t=this.options.editable;if(t!==true){if(typeof t=="string"){e=t}else{e=t.mode||e}}return e},editRow:function(e){var i;var n=this;this.editRowStatus="edit";if(e instanceof a){i=e}else{e=E(e);i=n._modelForContainer(e)}var t=n._editMode();var r;n.cancelRow();if(i){e=n.tbody.children("["+I.attr("uid")+"="+i.uid+"]");n._attachModelChange(i);if(t==="popup"){n._createPopupEditor(i)}else if(t==="inline"){n._createInlineEditor(e,i)}else if(t==="incell"){E(e).children(v).each(function(){var e=E(this);var t=V(n.columns)[n._calculateColumnIndex(e)];i=n._modelForContainer(e);if(i&&(!i.editable||i.editable(t.field))&&t.field&&!t.selectable){n.editCell(e);return false}})}r=n.editView?n.editView.element:n._editContainer;if(r){if(!this._editCancelClickHandler){this._editCancelClickHandler=x(this._editCancelClick,this)}r.on(u+_,"a.k-grid-cancel",this._editCancelClickHandler);if(!this._editUpdateClickHandler){this._editUpdateClickHandler=x(this._editUpdateClick,this)}r.on(u+_,"a.k-grid-update",this._editUpdateClickHandler)}}},_editUpdateClick:function(e){e.preventDefault();e.stopPropagation();var t=this;if(t.editRowStatus=="edit"){console.log("edit");t.saveRow()}else if(this.editRowStatus=="update"){console.log("update");if(!t.updateCount){t.saveRow()}}},_editCancelClick:function(e){var t=this;var i=t.options.navigatable;var n=t.editable.options.model;var r=t.editView?t.editView.element:t._editContainer;e.preventDefault();e.stopPropagation();if(t.trigger("cancel",{container:r,model:n})){return}var a=t.items().index(E(t.current()).parent());t.cancelRow();if(i){t._setCurrent(t.items().eq(a).children().filter(C).first());U(t.table,true)}},_createPopupEditor:function(i){var n=this;var e="<div "+I.attr("uid")+'="'+i.uid+'" class="k-popup-edit-form"><'+(n._isMobile?'ul class="k-edit-form-container k-listgroup k-listgroup-flush">':'div class="k-edit-form-container">');var t;var r;var a=[];var o;var s;var l;var d;var u;var c;var f;var h;var p=V(n.columns);var v;var m=I.guid();var g=n.options.editable;var _=g.template;var b=R(g)?g.window:{};var w=T({},I.Template,n.options.templateSettings);var k;if(n.trigger(le,{model:i})){return}b=b||{};if(_){if(typeof _===D){_=I.unescape(_)}e+=I.template(_,w)(i);for(o=0,s=p.length;o<s;o++){t=p[o];if(t.command){h=Ui(t.command,"edit");if(h){r=h}}}}else{for(o=0,s=p.length;o<s;o++){t=p[o];if(t.selectable){continue}if(!t.command){if(!n._isMobile){e+='<div class="k-edit-label"><label for="'+t.field+'">'+(t.title&&(n.options.encodeTitles?an(t.title):t.title)||t.field||"")+"</label></div>";if(qi(t,i)){a.push({field:t.field,title:t.title,format:t.format,editor:t.editor,values:t.values});e+="<div "+I.attr("container-for")+'="'+t.field+'" class="k-edit-field"></div>'}else{k={storage:{},count:0};l=I.template(n._cellTmpl(t,k),w);if(k.count>0){l=x(l,k.storage)}e+='<div class="k-edit-field k-no-editor">'+l(i)+"</div>"}}else{e+='<li class="k-item k-listgroup-item">';if(qi(t,i)){a.push({field:t.field,title:t.title,format:t.format,editor:t.editor,values:t.values});e+='<label class="k-label k-listgroup-form-row">';e+='<span class="k-item-title k-listgroup-form-field-label">'+(t.title&&(n.options.encodeTitles?an(t.title,true):t.title)||t.field||"")+"</span>";e+='<div class="k-listgroup-form-field-wrapper" id="'+t.field+"_"+m+'" '+I.attr("container-for")+'="'+t.field+'"></div>';e+="</label>"}else{k={storage:{},count:0};l=I.template(n._cellTmpl(t,k),w);if(k.count>0){l=x(l,k.storage)}e+='<label class="k-label k-listgroup-form-row k-no-click">';e+='<span class="k-item-title k-listgroup-form-field-label">'+(t.title&&(n.options.encodeTitles?an(t.title,true):t.title)||t.field||"")+"</span>";e+='<span class="k-no-editor k-listgroup-form-field-wrapper">'+l(i)+"</span>";e+="</label>"}e+="</li>"}}else if(t.command){h=Ui(t.command,"edit");if(h){r=h}}}}if(r){if(R(r)){if(R(r.text)){d=r.text.update;u=r.text.cancel}if(R(r.iconClass)){c=r.iconClass.update;f=r.iconClass.cancel}if(r.attr){v=r.attr}}}var y;if(!n._isMobile){e+='<div class="k-edit-buttons k-state-default">';e+=n._createButton({name:"update",text:d,attr:v,iconClass:c})+n._createButton({name:"canceledit",text:u,attr:v,iconClass:f});e+="</div></div></div>";y=n._editContainer=E(e).appendTo(n.wrapper).eq(0).kendoWindow(T({modal:true,resizable:false,draggable:true,title:n.options.messages.commands.edit||"Edit",visible:false,close:function(e){if(e.userTriggered){e.sender.element.focus();if(n.trigger("cancel",{container:y,model:i})){e.preventDefault();return}var t=n.items().index(E(n.current()).parent());n._editableIsClosing=true;n.cancelRow();if(n.options.navigatable){n._setCurrent(n.items().eq(t).children().filter(C).first());U(n.table,true)}}}},b))}else{e+="</ul></div>";n.editView=n.pane.append("<div data-"+I.ns+'role="view" class="k-grid-edit-form">'+"<div data-"+I.ns+'role="header" class="k-header">'+'<a href="\\#" class="k-header-cancel k-link k-grid-cancel" title="#=messages.cancel#" '+'aria-label="#=messages.cancel#"><span class="k-icon k-i-arrow-chevron-left"></span></a>'+(n.options.messages.commands.edit||"Edit")+'<a href="\\#" class="k-header-done k-link k-grid-update" title="#=messages.done#" '+'aria-label="#=messages.done#"><span class="k-icon k-i-check"></span></a>'+"</div>"+"<div data-"+I.ns+'role="content" class="'+Dt.content+'">'+e+"</div>"+"</div>");y=n._editContainer=n.editView.element.find(".k-popup-edit-form")}n.editable=n._editContainer.kendoEditable({fields:a,model:i,clearContainer:false,target:n}).data("kendoEditable");n._openPopUpEditor();n.trigger(se,{container:y,model:i})},_openPopUpEditor:function(){var e=this;var t=e._editContainer?e._editContainer.data("kendoWindow"):null;var i=(e.options.editable||{}).window||{};if(!this._isMobile){if(t){if(!i.position){t.center()}t.open()}}else{this.pane.navigate(this.editView,this._editAnimation)}},_createInlineEditor:function(e,a){var o=this;var s;var l;var d;var u=[];if(o.trigger(le,{model:a})){return}if(o.lockedContent){e=e.add(o._relatedRow(e))}e.children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){l=E(this);s=V(o.columns)[o._calculateColumnIndex(l)];if(!s.command&&qi(s,a)){u.push({field:s.field,title:s.title,format:s.format,editor:s.editor,values:s.values});l.attr(I.attr("container-for"),s.field);l.empty()}else if(s.command){d=Ui(s.command,"edit");if(d){l.empty();var e,t,i,n,r;if(R(d)){if(R(d.text)){e=d.text.update;t=d.text.cancel}if(R(d.iconClass)){i=d.iconClass.update;n=d.iconClass.cancel}if(d.attr){r=d.attr}}E(o._createButton({name:"update",text:e,attr:r,iconClass:i})+o._createButton({name:"canceledit",text:t,attr:r,iconClass:n})).appendTo(l)}}});o._editContainer=e;o._editContainer.addClass("k-grid-edit-row");if(o._shouldClearEditableState){o._clearEditableState()}o.editable=new I.ui.Editable(o._editContainer,{target:o,fields:u,model:a,skipFocus:o._isVirtualInlineEditable()&&o._editableState&&(o._editableState.field?true:false)||o._hasVirtualColumns(),clearContainer:false});if(e.length>1){Wi(e[0],e[1]);o._applyLockedContainersWidth()}o.trigger(se,{container:e,model:a})},cancelRow:function(e){var t=this,i=t._editContainer,n;if(i){n=t._modelForContainer(i);if(!n||e&&t.trigger("cancel",{container:i,model:n})){return}t._destroyEditable();t.dataSource.cancelChanges(n);t._clearEditableState();if(t._editMode()!=="popup"){t._displayRow(i)}else{t._displayRow(t.tbody.find("["+I.attr("uid")+"="+n.uid+"]"))}}},saveRow:function(){var e=this;var t=this._editContainer;var i=this._modelForContainer(t);var n=E.Deferred();var r;if(!t||!this.editable){this.editRowStatus="edit";return n.resolve().promise()}if(!this.editable.end()||this.trigger(de,{container:t,model:i})){this.editRowStatus="edit";return n.reject().promise()}e.updateCount=window.setTimeout(function(){window.clearTimeout(e.updateCount)},1e3);this.editRowStatus="update";e._clearEditableState();return this.dataSource.sync()},_displayRow:function(e){var t=this,i=t._modelForContainer(e),n,r,a,o=e.hasClass("k-state-selected"),s=e.hasClass("k-alt");if(i){if(t.lockedContent){n=E((s?t.lockedAltRowTemplate:t.lockedRowTemplate)(i));t._relatedRow(e.last()).replaceWith(n)}t.angular("cleanup",function(){return{elements:e.get()}});r=E((s?t.altRowTemplate:t.rowTemplate)(i));if(!e.is(":visible")){r.hide()}e.replaceWith(r);t.trigger("itemChange",{item:r,data:i,ns:b});if(n&&n.length){t.trigger("itemChange",{item:n,data:i,ns:b})}var l=r;var d=[{dataItem:i}];if(n&&n.length){l=r.add(n);d.push({dataItem:i})}t.angular("compile",function(){return{elements:l.get(),data:d}});if(o&&(t.options.selectable||t._checkBoxSelection)){t.select(r.add(n))}if(n){Wi(r[0],n[0])}a=r.next();if(a.hasClass("k-detail-row")&&a.is(":visible")){r.find(".k-hierarchy-cell .k-icon").removeClass("k-i-expand").addClass("k-i-collapse")}}},_showMessage:function(e,t){var i=this;if(!i._isMobile){return window.confirm(e.title)}var n=i._confirmDialog=new I.ui.Confirm(E("<div />").appendTo(document.body),{modal:{preventScroll:true},closable:false,title:false,content:e.title,messages:{okText:e.confirmDelete,cancel:e.cancelDelete},open:function(){if(i.content){i.content.data(ot,i.content.css(ot));i.content.css(ot,st)}},close:function(){if(i.content){i.content.css(ot,i.content.data(ot))}}});n.result.done(function(){i._removeRow(t)}).fail(function(){var e=i._confirmDialog;if(e){e.close();e.destroy()}});return false},_confirmation:function(e){var t=this,i=t.options.editable,n=i===true||typeof i===D?t.options.messages.editable.confirmation:i.confirmation;if(R(i)&&typeof i.mode===D&&typeof n!==Qe&&typeof n!==D&&n!==false){n=t.options.messages.editable.confirmation}if(n!==false&&n!=null){if(typeof n===Qe){n=n(t._modelForContainer(e))}return t._showMessage({confirmDelete:i.confirmDelete||t.options.messages.editable.confirmDelete,cancelDelete:i.cancelDelete||t.options.messages.editable.cancelDelete,title:n===true?t.options.messages.editable.confirmation:n},e)}return true},cancelChanges:function(){var e=this;e.dataSource.cancelChanges();if(e._isVirtualEditable()){e._virtualPageToTop(function(){e.virtualScrollable.scrollToTop()})}},saveChanges:function(){var e=this;var t=e.editable&&e.editable.end();if((t||!e.editable)&&!e.trigger(i)){e.dataSource.sync()}else if(!t){e._scrollVirtualWrapper()}},addRow:function(){var e=this,t,i=e.dataSource,n=e._editMode(),r=e.options.editable.createAt||"",a=i.pageSize(),o=i.view()||[];var s=r.toLowerCase()===Xe;var l;var d=e._isVirtualEditable();if(e.editable&&e.editable.end()||!e.editable){if(n!="incell"){e.cancelRow()}t=i.indexOf(o[0]);if(s){t+=o.length;if(a&&!i.options.serverPaging&&a<=o.length){t-=1}}if(t<0){if(i.page()>i.totalPages()){t=(i.page()-1)*a}else{t=0}}if(e.options.navigatable&&n=="incell"){e._removeCurrent()}if(d){e._virtualAddRow()}else{l=i.insert(t,{});e._editModel(l)}}else{e._scrollVirtualWrapper()}},_editModel:function(e){var t=this;var i=t.options.editable.createAt||"";var n=t._editMode();if(e){var r=e.uid,a=t.lockedContent?t.lockedTable:t.table,o=a.find("tr["+I.attr("uid")+"="+r+"]"),s=o.children("td:not(.k-group-cell,.k-hierarchy-cell)").eq(t._firstEditableColumnIndex(o));if(n==="inline"&&o.length){t.editRow(o)}else if(n==="popup"){t.editRow(e)}else if(s.length){t.editCell(s)}if(i.toLowerCase()=="bottom"&&t.lockedContent){t.lockedContent[0].scrollTop=t.content[0].scrollTop=t.table[0].offsetHeight}}},_virtualAddRow:function(){var e=this;var t=(e.options.editable.createAt||"").toLowerCase()===Xe;e._clearEditableState();if(t){e._virtualAddRowAtBottom()}else{e._virtualAddRowAtTop()}},_virtualAddRowAtTop:function(){var e=this;var t=e.dataSource;var i=e.virtualScrollable;var n;if(t.page()===1){n=t.insert(0,{});e._editModel(n);i.scrollToTop()}else{e._virtualPageToTop(function(){n=t.insert(0,{});e._editModel(n);i.scrollToTop()})}},_virtualAddRowAtBottom:function(){var e=this;var t=e.dataSource;var i=e.virtualScrollable;var n=t.total();var r;if(t.at(n-1)instanceof a){r=t.insert(n,{});e._virtualPageToBottom(function(){e._editModel(r);i.scrollToBottom()})}else{e._virtualPageToBottom(function(){r=t.insert(n,{});e._editModel(r);i.scrollToBottom()})}},_virtualPageToTop:function(e){var t=this;t._virtualPage(0,t.dataSource.take(),function(){e()})},_virtualPageToBottom:function(e){var t=this;var i=t.dataSource;var n=i.take();var r=i.total();var a=r>n?r-n:0;t._virtualPage(a,n,function(){e()})},_virtualPage:function(e,t,i){var n=this;if(n._isVirtualEditable()){n.virtualScrollable._preventScroll=true;n.virtualScrollable._page(e,t,i)}},_firstEditableColumnIndex:function(e){var t=this,i,n=V(t.columns),r,a,o=t._modelForContainer(e);for(r=0,a=n.length;r<a;r++){i=n[r];if(o&&(!o.editable||o.editable(i.field))&&!i.command&&i.field&&i.hidden!==true){return r}}return-1},_toolbar:function(){var o=this,e=o.wrapper,t=o.options.toolbar,i=o.options.editable,n;if(t){n=o.wrapper.find(".k-grid-toolbar");if(!n.length){if(!d(t)){t=typeof t===D?t:o._toolbarTmpl(t).replace(_t,"\\#");t=x(I.template(t),o)}n=E('<div class="k-toolbar k-grid-toolbar" />').html(t({})).prependTo(e);o.angular("compile",function(){return{elements:n.get()}})}if(i&&i.create!==false){n.on(u+_,".k-grid-add",function(e){e.preventDefault();o.addRow()}).on(u+_,".k-grid-cancel-changes",function(e){e.preventDefault();o.cancelChanges()}).on(u+_,".k-grid-save-changes",function(e){e.preventDefault();o.saveChanges()})}n.on(u+_,".k-grid-excel",function(e){e.preventDefault();o.saveAsExcel()});n.on(u+_,".k-grid-pdf",function(e){e.preventDefault();o.saveAsPDF()});n.on(et+_,".k-grid-search input",function(e){var a=e.currentTarget;clearTimeout(o._searchTimeOut);o._searchTimeOut=setTimeout(function(){o._searchTimeOut=null;var e=o.options;var t=e.search?e.search.fields:null;var i={filters:[],logic:"or"};var n=a.value;if(!t){t=yi(e.columns)}if(o.dataSource.options.endless){o.dataSource.options.endless=null;o._endlessPageSize=o.dataSource.options.pageSize}if(n){for(var r=0;r<t.length;r++){i.filters.push({field:t[r],operator:"contains",value:n})}}else{i={}}o.dataSource.filter(i)},300)})}},_toolbarTmpl:function(e){var t=this,i,n,r="",a,o="",s=t.options.messages.commands;if(q(e)){for(i=0,n=e.length;i<n;i++){a=typeof e[i]==="string"?e[i].toLowerCase():(e[i].name||"").toLowerCase();if(a==="search"){if(typeof e[i]!=="string"){o=e[i].text}o=o||s.search;r+="<span class='k-textbox k-grid-search k-display-flex'>";r+="<input autocomplete='off' placeholder='"+o+"' title='"+o+"' class='k-input' />";r+="<span class='k-input-icon'><span class='k-icon k-i-search'></span></span>";r+="</span>"}else{r+=t._createButton(e[i])}}}return r},_createButton:function(e){var t=e.template||yt,i=typeof e===D?e:e.name||e.text,n=s[i]?s[i].className:"k-grid-"+(i||"").replace(/\s/g,""),r={className:n,text:i,attr:"",iconClass:""},a=this.options.messages.commands,o;if(!i&&!(R(e)&&e.template)){throw new Error("Custom commands should have name specified")}if(R(e)){e=T(true,{},e);if(e.className&&P(r.className,e.className.split(" "))<0){e.className+=" "+r.className}else if(e.className===S){e.className=r.className}if(i==="edit"){e=T(true,{},e);e.text=R(e.text)?e.text.edit:e.text;e.iconClass=R(e.iconClass)?e.iconClass.edit:e.iconClass}if(e.attr){if(R(e.attr)){e.attr=Rt(e.attr)}if(typeof e.attr===D){o=e.attr.match(/class="(.+?)"/);if(o&&P(o[1],e.className.split(" "))<0){e.className+=" "+o[1]}}}r=T(true,r,s[i],{text:a[i]},e)}else{r=T(true,r,s[i],{text:a[i]})}return I.template(t)(r)},_hasFooters:function(){return!!this.footerTemplate||!!this.groupFooterTemplate||this.footer&&this.footer.length>0||this.wrapper.find(".k-grid-footer").length>0},_groupable:function(){var r=this;if(r._groupableClickHandler){r.table.add(r.lockedTable).off(u+_,r._groupableClickHandler)}else{r._groupableClickHandler=function(e){var t=E(this),i=t.closest("tr");var n=r._groupRows?r._groupRows[r.wrapper.find(".k-grouping-row").index(i)]:{};if(t.hasClass("k-i-collapse")){if(!r.trigger("groupCollapse",{group:n,element:i})){r.collapseGroup(i)}}else{if(!r.trigger("groupExpand",{group:n,element:i})){r.expandGroup(i)}}e.preventDefault();e.stopPropagation()}}if(r._isLocked()){r.lockedTable.on(u+_,".k-grouping-row .k-i-expand, .k-grouping-row .k-i-collapse",r._groupableClickHandler)}else{r.table.on(u+_,".k-grouping-row .k-i-expand, .k-grouping-row .k-i-collapse",r._groupableClickHandler)}r._attachGroupable()},_attachGroupable:function(){var t=this,e=t.wrapper,i=t.options.groupable,n=re+"["+I.attr("field")+"]",r=t.content?".k-grid-header:first "+n:"table:first>.k-grid-header "+n;if(i&&i.enabled!==false){if(!e.has("div.k-grouping-header")[0]){E("<div>&nbsp;</div>").addClass("k-grouping-header").prependTo(e)}if(t.groupable){t._destroyGroupable()}if(z.chrome){e.find("div.k-grouping-header").css("touch-action","none");e.find(r).css("touch-action","none")}t.groupable=new b.Groupable(e,T({},i,{draggable:t._draggableInstance,groupContainer:">div.k-grouping-header",dataSource:t.dataSource,draggableElements:r,filter:r,allowDrag:t.options.reorderable,change:function(e){if(t.trigger("group",{groups:e.groups})){e.preventDefault()}else{t._clearEditableState();if(t.dataSource.options.endless){t.dataSource.options.endless=null;t._endlessPageSize=t.dataSource.options.pageSize;t.dataSource._skip=0;t.dataSource._pageSize=t.dataSource._take=t._endlessPageSize;t.dataSource._page=1}}}}));t._addGroupableOptionsToHeader()}},_addGroupableOptionsToHeader:function(){var e=this;var t=L(e.columns);var i={};var n="";var r=e._headerCells();var a="";var o;var s;var l;for(l=0;l<t.length;l++){n=t[l].field;i[t[l].field]=t[l]}for(l=0;l<r.length;l++){o=r.eq(l);a=o.attr(I.attr(Je));s=i[a];if(s&&s.groupable&&s.groupable.sort){o.data(dt,s.groupable.sort)}}},_destroyGroupable:function(){var e=this;if(e.groupable&&e.groupable.element){e.groupable.element.kendoGroupable("destroy")}e.groupable=null;e._removeGroupableOptionsFromHeader()},_removeGroupableOptionsFromHeader:function(){var e=this;var t=e._headerCells();for(var i=0;i<t.length;i++){t.eq(i).removeData(dt)}},_continuousItems:function(e,t){if(!this.lockedContent){return}var i=this;var n=i.table.add(i.lockedTable);var r=E(e,n[0]);var a=E(e,n[1]);var o=t?H(i.columns).length:1;var s=t?i.columns.length-o:1;var l=[];for(var d=0;d<r.length;d+=o){$.apply(l,r.slice(d,d+o));$.apply(l,a.splice(0,s))}return l},_selectable:function(){var a=this,n,o,e=[],s=a._isLocked(),t=a.options.selectable;if(t){if(a.selectable){a.selectable.destroy()}a._selectedIds={};t=I.ui.Selectable.parseOptions(t);n=t.multiple;o=t.cell;if(a._hasDetails()){e[e.length]=".k-detail-row"}if(a.options.groupable||a._hasFooters()||a._groups()){e[e.length]=".k-grouping-row,.k-group-footer"}e=e.join(",");if(e!==""){e=":not("+e+")"}var r=a.table;if(s){r=r.add(a.lockedTable)}var i=">"+(o?J:"tbody>tr"+e);a.selectable=new I.ui.Selectable(r,{filter:i,aria:true,multiple:n,change:function(){var e;if(!o){a._persistSelectedRows()}if(a._checkBoxSelection){e=a.selectable.value();a._uncheckCheckBoxes();a._checkRows(e);if(e.length&&e.length===a.items().length){a._toggleHeaderCheckState(true)}else{a._toggleHeaderCheckState(false)}}a.trigger(f)},useAllItems:s&&n&&o,relatedTarget:function(e){if(o||!s){return}var t;var i=E();for(var n=0,r=e.length;n<r;n++){t=a._relatedRow(e[n]);if(P(t[0],e)<0){i=i.add(t)}}return i},continuousItems:function(){return a._continuousItems(i,o)},ignoreOverlapped:a.options.selectable&&a.options.selectable.ignoreOverlapped});if(a.options.navigatable){r.on("keydown"+_,function(e){var t=a.current();var i=e.target;if(!t){return}if(e.keyCode===l.SPACEBAR&&!e.shiftKey&&E.inArray(i,r)>-1&&!t.is(".k-edit-cell,.k-header")&&t.parent().is(":not(.k-grouping-row,.k-detail-row,.k-group-footer)")){e.preventDefault();e.stopPropagation();t=o?t:t.parent();if(s&&!o){t=t.add(a._relatedRow(t))}if(n){if(!e.ctrlKey){a.selectable.clear()}else{if(t.hasClass(Ae)){a._deselectCheckRows(t);return}}}else{a.selectable.clear()}if(!o){a.selectable._lastActive=t}a.selectable.value(t)}else if(!o&&(E(i).is("td")||E(i).is("table")&&P(i,this._navigatableTables))&&(e.shiftKey&&e.keyCode==l.LEFT||e.shiftKey&&e.keyCode==l.RIGHT||e.shiftKey&&e.keyCode==l.UP||e.shiftKey&&e.keyCode==l.DOWN||e.keyCode===l.SPACEBAR&&e.shiftKey)){e.preventDefault();e.stopPropagation();t=t.parent();if(s){t=t.add(a._relatedRow(t))}if(n){if(!a.selectable._lastActive){a.selectable._lastActive=t}a.selectable.selectRange(a.selectable._firstSelectee(),t)}else{a.selectable.clear();a.selectable.value(t)}}})}}},_clipboard:function(){var e=this.options;var t=e.selectable;if(t&&e.allowCopy){var i=this;if(!e.navigatable){i.table.add(i.lockedTable).attr("tabindex",0).on("mousedown"+_+" keydown"+_,".k-detail-cell",function(e){if(e.target!==e.currentTarget){e.stopImmediatePropagation()}}).on("mousedown"+_,m+">"+C,x(Ki,i))}i.copyHandler=x(i.copySelection,i);i.updateClipBoardState=function(){if(i.areaClipBoard){i.areaClipBoard.val(i.getTSV()).focus().select()}};i.bind("change",i.updateClipBoardState);i.wrapper.on("keydown",i.copyHandler);i.clearAreaHandler=x(i.clearArea,i);i.wrapper.on("keyup",i.clearAreaHandler)}},copySelection:function(e){if(e instanceof jQuery.Event&&!(e.ctrlKey||e.metaKey)||E(e.target).is("input:visible,textarea:visible")||window.getSelection&&window.getSelection().toString()||document.selection&&document.selection.createRange().text){return}if(!this.areaClipBoard){this.areaClipBoard=E("<textarea />").css({position:"fixed",top:"50%",left:"50%",opacity:0,width:0,height:0}).appendTo(this.wrapper)}this.areaClipBoard.val(this.getTSV()).focus().select()},getTSV:function(){var o=this;var e=o.select();var i="\t";var t=o.options.allowCopy;var s=true;if(E.isPlainObject(t)&&t.delimeter){i=t.delimeter}var n="";if(e.length){if(e.eq(0).is("tr")){e=e.find("td:not(.k-group-cell)")}if(s){e.filter(":visible")}var l=[];var d=this.columns.length;var u=o._isLocked()&&H(o.columns).length;var c=true;E.each(e,function(e,t){t=E(t);var i=t.closest("tr");var n=i.index();var r=t.index();if(s){r-=t.prevAll(":hidden").length}if(u&&c){c=E.contains(o.lockedTable[0],t[0])}if(o._groups()&&c){r-=o._groups()}r=c?r:r+u;if(d>r){d=r}var a=t.text();if(!l[n]){l[n]=[]}l[n][r]=a});var r=l.length;l=E.each(l,function(e,t){if(t){l[e]=t.slice(d);if(r>e){r=e}}});E.each(l.slice(r),function(e,t){if(t){n+=t.join(i)+"\r\n"}else{n+="\r\n"}})}return n},clearArea:function(e){var t;if(this.areaClipBoard&&e&&e.target===this.areaClipBoard[0]){if(this.options.navigatable){t=E(this.current()).closest("table")}else{t=this.table}U(t,true)}if(this.areaClipBoard){this.areaClipBoard.remove();this.areaClipBoard=null}},_adaptiveColumns:function(){var e=this;if(e._anyColumnHasMediaQuery()){e._setColumnsMediaVisibility(e.columns);e._attachColumnMediaResizeHandler()}},_anyColumnHasMediaQuery:function(){return this._columnsWithMediaQuery().length},_columnsWithMediaQuery:function(){return qt(this.columns)},_attachColumnMediaResizeHandler:function(){var e=this;e._detachColumnMediaResizeHandler();e._columnMediaResizeHandler=x(e._onColumnMediaResize,e);E(window).on(t+_,e._columnMediaResizeHandler)},_detachColumnMediaResizeHandler:function(){var e=this;if(e._columnMediaResizeHandler){E(window).off(t+_,e._columnMediaResizeHandler)}},_onColumnMediaResize:function(){var e=this;e._setColumnsMediaVisibility(e.columns);e._setContentMediaWidth()},_setColumnsMediaVisibility:function(e){var t=e||[];for(var i=0;i<t.length;i++){this._setColumnMediaVisibility(t[i])}},_setColumnMediaVisibility:function(e){var t=this;if($t(e.media)){t._setColumnsMediaVisibility(e.columns)}else{if(Ut(e)){t._showColumnByMedia(e);if(!e.hidden){t._setColumnsMediaVisibility(e.columns)}}else{t._hideColumnByMedia(e)}}},_showColumnByMedia:function(e){if(!e.hidden){this.showColumn(e)}Wt(e)},_hideColumnByMedia:function(e){var t=e.hidden;if(!t){e._hideByMedia=true;this.hideColumn(e);e._hideByMedia=false;e.hidden=t}Wt(e)},_setContentMediaWidth:function(){var e=this;var t=e.options;var i=e._isLocked();var n;if(t.scrollable&&t.resizable){if(i&&e.lockedFooter){n=e.lockedFooter.children("table")}else if(e.footer){n=e.footer.find(">.k-grid-footer-wrap>table")}if(!n||!n[0]){n=E()}var r=i?e.wrapper.find(".k-grid-header-locked").find("table"):e.wrapper.find(".k-grid-header").find("table");var a=i?e.lockedTable:e.table;var o=r.find("th");var s=r.find("colgroup");var l=o.length;var d=o.filter(jt).length;var u=o.length-d;var c=0;if(r[0].style.width!==""&&parseFloat(r[0].style.width)!==c){var f=r.css("width");for(var h=0;h<l;h++){if(Gt(o[h])){var p;var v=Math.max(h,h-u);var m=s.children()[v];var g=m?m.style.width:"";if(g!==""){p=parseFloat(g)}else{r.css("width","auto");p=M(o.eq(h));r.css("width",f)}c+=p}}a.css("width",c-1);r.css("width",c);n.css("width",c);e._updateStickyColumns()}}},_minScreenSupport:function(){var e=this.hideMinScreenCols();if(e){this.minScreenResizeHandler=x(this.hideMinScreenCols,this);E(window).on("resize",this.minScreenResizeHandler)}},hideMinScreenCols:function(){var e=this.columns,t=window.innerWidth>0?window.innerWidth:screen.width;return this._iterateMinScreenCols(e,t)},_iterateMinScreenCols:function(e,t){var i=false;for(var n=0;n<e.length;n++){var r=e[n];var a=r.minScreenWidth;if(a!==S&&a!==null){i=true;if(a>t){this.hideColumn(r)}else{this.showColumn(r)}}if(!r.hidden&&r.columns){i=this._iterateMinScreenCols(r.columns,t)||i}}return i},_stickyColumns:function(){var e=this;if(e._anyStickyColumns()){e._setStickyColumns(false)}},_updateStickyColumns:function(){var e=this;var t=F(V(e.columns),function(e){return e.groupHeaderColumnTemplate});if(e._anyStickyColumns()){e._setStickyColumns(true);e._templates();if(t.length>0){e._renderGroupRows()}}},_anyStickyColumns:function(){var e=this;return mi(e.columns).length},_setStickyColumns:function(e){var t=this;var i=mi(t.columns);var n=gi(t.columns);var r=t._calculateStickyWidths(n);t._removeStickyAttributes(i);t._setStickyClassAttributes(i);t._setStickyStyleAttributes(n,r,e);if(e){t._setStickyStyles(n,r)}},_calculateStickyWidths:function(e,t,i){var n=this;var r;var a;var o;var s;var l;var d=k?"right":"left";var u=k?"left":"right";var c={left:new Array(e.length).fill(t?t:0),right:new Array(e.length).fill(i?i:0)};for(r=0;r<e.length-1;r++){a=e[r];o=n._sumColumnWidth(a);s=o+c[d][r];c[d][r+1]=s}for(r=e.length-1;r>0;r--){a=e[r];o=n._sumColumnWidth(a);l=o+c[u][r];c[u][r-1]=l}return c},_setStickyClassAttributes:function(e,t){var i=this;var n;var r;for(n=0;n<e.length;n++){r=e[n];if(r.columns){if(!t&&n){t=n}i._setStickyClassAttributes(wi([r]),t)}if(t){vi(r,"headerAttributes","class",Ne)}vi(r,"attributes","class",Be);vi(r,"headerAttributes","class",Le);vi(r,"footerAttributes","class",He)}},_setStickyStyleAttributes:function(e,t,i){var n=this;var r;var a;var o;var s;var l;var d;var u;for(r=0;r<e.length;r++){a=e[r];o=t.left[r];s=t.right[r];l="left: "+o+"px; right: "+s+"px;";if(a.columns){d=ki([a]);u=n._calculateStickyWidths(d,o,s);n._setStickyStyleAttributes(d,u,i);if(i){n._setStickyStyles(d,u)}}vi(a,"attributes","style",l);vi(a,"headerAttributes","style",l);vi(a,"footerAttributes","style",l);a.stickyStyle=l}},_removeStickyAttributes:function(e){var t=this;var i;var n=new RegExp("(\\s*"+Be+")*","ig");var r=new RegExp("(\\s*"+Le+")*","ig");var a=new RegExp("(\\s*"+He+")*","ig");var o=new RegExp("(\\s*"+Ne+")*","ig");var s=new RegExp("(\\s*left\\s*:\\s*\\d*px;?)*","ig");var l=new RegExp("(\\s*right\\s*:\\s*\\d*px;?)*","ig");var d;for(i=0;i<e.length;i++){d=e[i];if(d.columns){t._removeStickyAttributes(wi([d]))}g(d,"attributes","class",n);g(d,"attributes","style",s);g(d,"attributes","style",l);g(d,"headerAttributes","class",r);g(d,"headerAttributes","class",o);g(d,"headerAttributes","style",s);g(d,"headerAttributes","style",l);g(d,"footerAttributes","class",a);g(d,"footerAttributes","style",s);g(d,"footerAttributes","style",l)}},_setStickyStyles:function(e,t){var i=this;var n;var r;var a=V(N(i.columns));var o=i.tbody.children(":not(.k-detail-row)");var s;var l;var d;var u;var c;var f;var h;var p;var v;for(n=0;n<e.length;n++){l=e[n];u=t.left[n];c=t.right[n];d=a.indexOf(l);f=i._getColumnHeader(l);f.addClass(Le);if(l.headerAttributes["class"]&&l.headerAttributes["class"].indexOf(Ne)!==-1){f.addClass(Ne)}hi(f,u,c);if(l.columns){continue}if(i.footer){h=i.footer.find(".k-grid-footer-wrap tr.k-footer-template").children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(d);h.addClass(He);hi(h,u,c)}for(r=0;r<o.length;r++){s=E(o[r]);if(s.hasClass("k-grouping-row")){p=s.find("."+l.groupHeaderColumnTemplateClass);p.addClass(Be);hi(p,u,c)}else{v=s.children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(d);v.addClass(Be);hi(v,u,c)}}}},_removeStickyStyles:function(e){var t=this;var i;var n;var r=V(N(t.columns));var a=t.tbody.children(":not(.k-detail-row)");var o;var s;var l;var d;var u;var c;var f;for(i=0;i<e.length;i++){s=e[i];l=r.indexOf(s);d=t._getColumnHeader(s);d.removeClass(Le);d.removeClass(Ne);hi(d,"","");if(s.columns){t._removeStickyStyles(s.columns);continue}if(s.footerTemplate&&t.footer){u=t.footer.find(".k-grid-footer-wrap tr.k-footer-template").children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(l);u.removeClass(He);hi(u,"","")}for(n=0;n<a.length;n++){o=E(a[n]);if(o.hasClass("k-grouping-row")){c=o.find("."+s.groupHeaderColumnTemplateClass);c.removeClass(Be);hi(c,"","")}else{f=o.children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(l);f.removeClass(Be);hi(f,"","")}}}},_getColumnHeader:function(e){var t=this;var i=E("#"+e.headerAttributes.id).length?E("#"+e.headerAttributes.id):E("#"+t._cellId);return i},_sumColumnWidth:function(e){var t=this;var i=0;if(e.columns){i=t._sumCurrentWidths(V([e]))}else{i=t._sumCurrentWidths([e])}return i},_sumCurrentWidths:function(e){var t=this;var i=0;var n=0;var r;var a;var o;var s=e.length;for(o=0;o<s;o++){r=e[o];a=t._getColumnHeader(r);if(!r.hidden&&Ut(r)){n=a.is(":visible")?a.outerWidth():r.width;i+=n?parseInt(n,10):0}}return i},_relatedRow:function(e){var t=this.lockedTable;e=E(e);if(!t){return e}var i=e.closest(this.table.add(this.lockedTable));var n=i.find(">tbody>tr").index(e);i=i[0]===this.table[0]?t:this.table;return i.find(">tbody>tr").eq(n)},_relatedCell:function(e){var t=this.lockedTable;e=E(e);if(!t){return e}var i=e.closest(this.table.add(this.lockedTable));var n=i.find(">tbody>tr>td").index(e);i=i[0]===this.table[0]?t:this.table;return i.find(">tbody>tr>td").index(n)},clearSelection:function(){var e=this;if(e.selectable&&!e._checkBoxSelection){e.selectable.clear()}if(e._checkBoxSelection){e._deselectCheckRows(e.select());return}if(e.options.persistSelection){e._persistSelectedRows()}else{e._selectedIds={}}e.trigger(f)},select:function(e){var t=this,i=t.selectable,n=I.ui.Selectable.parseOptions(this.options.selectable),r=n.cell;e=t.table.add(t.lockedTable).find(e);if(e.length){if(i&&!i.options.multiple){i.clear();e=e.first()}if(t._isLocked()){e=e.add(e.map(function(){if(r){return t._relatedCell(this)}else{return t._relatedRow(this)}}))}if(i&&!t._checkBoxSelection){i.value(e)}else{t._checkRows(e);if(t.select().length===t.items().length){t._toggleHeaderCheckState(true)}if(!r){t._persistSelectedRows()}t.trigger(f)}return}return i?i.value():t.items().filter("."+Ae)},_toggleHeaderCheckState:function(e){var t=this;if(e){t.thead.add(t.lockedHeader).find("tr "+Ee).prop("checked",true).attr("aria-checked",true).attr("aria-label","Deselect all rows")}else{t.thead.add(t.lockedHeader).find("tr "+Ee).prop("checked",false).attr("aria-checked",false).attr("aria-label","Select all rows")}},_uncheckCheckBoxes:function(){var e=this;var t=e.table.add(e.lockedTable);t.find("tbody "+Ee).attr("aria-checked",false).prop("checked",false).attr("aria-label","Select row")},_deselectCheckRows:function(e){var t=this;e=t.table.add(t.lockedTable).find(e);if(t._isLocked()){e=e.add(e.map(function(){return t._relatedRow(this)}))}e.each(function(){E(this).removeClass(Ae).find(Ee).attr("aria-checked",false).prop("checked",false).attr("aria-label","Select row")});t._toggleHeaderCheckState(false);t._persistSelectedRows();t.trigger(f)},_checkRows:function(e){e.each(function(){E(this).addClass(Ae).find(Ee).prop("checked",true).attr("aria-label","Deselect row").attr("aria-checked",true)})},_persistSelectedRows:function(){var e=this,t,i,n=e.items(),r=e.dataSource.options,a=r.schema,o,s={};if(!a||!a.model||!e._data){return}o=d(a.model)?a.model.fn.idField:a.model.id;if(!o){return}e.select().each(function(){i=e.dataItem(this);s[i[o]]=true});for(var l=0;l<n.length;l++){i=e.dataItem(n[l]);t=i[o];if(s[t]){e._selectedIds[t]=true}else{delete e._selectedIds[t]}}},selectedKeyNames:function(){var e=this,t=[];for(var i in e._selectedIds){t.push(i)}t.sort();return t},_updateCurrentAttr:function(e,t){var i=E(e).data("headerId");var n;E(e).removeClass(De).closest("table").removeAttr("aria-activedescendant");if(i){i=i.replace(this._cellId,"");E(e).attr("id",i)}else{E(e).removeAttr("id")}n=t.attr("id");if(n!=this._cellId){t.data("headerId",n)}t.attr("id",this._cellId).addClass(De).closest("table").attr("aria-activedescendant",this._cellId);this._current=t},_scrollCurrent:function(){var e=this._current;var t=this.options.scrollable;if(!e||!t){return}var i=e.parent();var n=i.closest("table").parent();var r=n.is(".k-grid-content-locked,.k-grid-header-locked");var a=n.is(".k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap");var o=E(this.content).find(">.k-virtual-scrollable-wrap").addBack().last()[0];if(a){if(this.virtualScroll){var s=Math.max(P(i[0],this._items(i.parent())),0);if(this.virtualScroll.rows){this._rowVirtualIndex=this.virtualScrollable.itemIndex(s);this.virtualScrollable.scrollIntoView(i)}else{this._rowVirtualIndex=s;this._scrollTo(this._relatedRow(i)[0],o)}}else{this._scrollTo(this._relatedRow(i)[0],o)}}if(this.lockedContent){this.lockedContent[0].scrollTop=o.scrollTop}if(!r){this._scrollTo(e[0],o)}},current:function(e){return this._setCurrent(e,true)},_setCurrent:function(e,t,i){var n=this._current;e=E(e);if(e.length){if(!n||n[0]!==e[0]){var r=e.parent();var a=r.children(v);var o=parseInt(r.children().first().attr("colspan"),10);if(this._hasVirtualColumns()){this._virtualCellIndex=(o>1?o:0)+a.index(e)}this._updateCurrentAttr(n,e);if(!i){this._scrollCurrent()}if(!t){this.trigger(qe,{element:e})}}}if(e&&e.length){this._lastCellIndex=e.parent().children(v).index(e)}return this._current},_removeCurrent:function(){if(this._current){this._current.removeClass(De);this._current=null}},_scrollTo:function(e,t){var i=e.tagName.toLowerCase();var n=i==="td"||i==="th";var r=E(e).closest("table")[0];var a=e[n?"offsetWidth":"offsetHeight"];var o=t[n?"scrollLeft":"scrollTop"];var s=t[n?"clientWidth":"clientHeight"];var l=E(e).css("position")==="relative"&&k&&n?Math.abs(r.offsetLeft-e.offsetLeft):e[n?"offsetLeft":"offsetTop"];var d=l+a;var u=0;var c=0;var f=0;if(k&&n){if(z.msie||z.edge){c=r.offsetLeft}else if(z.mozilla||z.webkit&&z.version>85){f=r.offsetLeft-I.support.scrollbar()}}o=Math.abs(o+c-f);if(o>l){u=l}else if(d>o+s){if(a<=s){u=d-s}else{u=l}}else{u=o}u=Math.abs(u+c)+f;t[n?"scrollLeft":"scrollTop"]=u},_navigatable:function(){var e=this;if(!e.options.navigatable){return}var t=e.table.add(e.lockedTable);var i=e.thead.parent().add(E(">table",e.lockedHeader));var n=t;if(e.options.scrollable){n=n.add(i);i.attr(Ye,-1)}this._navigatableTables=n;this._headertables=i;n.off("mousedown"+_+" focus"+_+" focusout"+_+" keydown"+_);i.on("keydown"+_,x(e._openHeaderMenu,e)).find("a.k-link").attr("tabIndex",-1);t.attr(Ye,p.max(t.attr(Ye)||0,0)).on("keydown"+_,".k-detail-cell",function(e){if(e.target!==e.currentTarget){e.stopImmediatePropagation()}});n.on(I.support.touch?"touchstart"+_:"mousedown"+_,m+">"+C,x(Ki,e)).on("focus"+_,x(e._tableFocus,e)).on("focusout"+_,x(e._tableBlur,e)).on("keydown"+_,e,x(e._tableKeyDown,e))},_openHeaderMenu:function(e){if(e.altKey&&e.keyCode==l.DOWN){this.current().find(".k-grid-filter, .k-header-column-menu").click();e.stopImmediatePropagation()}},_setTabIndex:function(e){this._navigatableTables.attr(Ye,-1);e.attr(Ye,0)},_tableFocus:function(e){var t=this.current();var i=E(e.currentTarget);if(t&&t.is(":visible")){t.addClass(De)}else{if(this._virtualColScroll){this._setCurrent(i.find(ne),true,true)}else{this._setCurrent(i.find(ne))}}this._setTabIndex(i)},_tableBlur:function(){var e=this.current();if(e){e.removeClass(De)}},_findCellIndex:function(e,t,i){var n;var r;if(i){for(r=t;r>=0;r--){n=r;if(!e[r].hidden){break}}}else{for(r=t;r<e.length;r++){n=r;if(!e[r].hidden){break}}}return n},_scrollToColumn:function(e,t){if(this._virtualCellIndex===S){return false}var i=this;var n=i._virtualCellIndex;var r=V(N(i.columns));var a=0;if(e==(k?l.LEFT:l.RIGHT)&&n!==r.length-1){n=i._findCellIndex(r,n+1)}else if(e==(k?l.RIGHT:l.LEFT)&&n){n=i._findCellIndex(r,n-1,true)}else if(e==l.HOME){n=i._findCellIndex(r,0)}else if(e==l.END){n=i._findCellIndex(r,r.length-1,true)}for(var o=0;o<n;o++){a+=r[o].width}i._virtualCellIndex=n;if(t){t.preventDefault();t.stopPropagation()}I.scrollLeft(i.content,a);return true},_tableKeyDown:function(e){var t=this.current();var i=this.virtualScroll||{};var n=this.virtualScrollable&&this.virtualScrollable.fetching();var r=E(e.target);var a=!e.isDefaultPrevented()&&!r.is(":button,a,:input,a>.k-icon");if(n){e.preventDefault();return}if(i.columns&&(!t||!document.body.contains(t[0]))&&this._scrollToColumn(e.keyCode,e)){return}if(!t){t=E(this.lockedTable).add(this.options.scrollable?this.table:this.tbody).find(ne)}if(!t.length){return}var o=false;if(a&&e.keyCode==l.UP){o=this._moveUp(t,e.shiftKey)}if(a&&e.keyCode==l.DOWN){o=this._moveDown(t,e.shiftKey)}if(a&&e.keyCode==(k?l.LEFT:l.RIGHT)){o=this._moveRight(t,e.altKey,e.shiftKey,e.ctrlKey,e.currentTarget)}if(a&&e.keyCode==(k?l.RIGHT:l.LEFT)){o=this._moveLeft(t,e.altKey,e.shiftKey,e.ctrlKey,e.currentTarget)}if(a&&e.keyCode==l.PAGEDOWN){o=this._handlePageDown()}if(a&&e.keyCode==l.PAGEUP){o=this._handlePageUp()}if(a&&e.keyCode==l.HOME){o=this._handleHome(t,e.ctrlKey)}if(a&&e.keyCode==l.END){o=this._handleEnd(t,e.ctrlKey)}if(a&&e.keyCode==l.SPACEBAR){o=this._handleSpaceKey(t,e.ctrlKey)}if(e.keyCode==l.ENTER||e.keyCode==l.F2){o=this._handleEnterKey(t,e.currentTarget,r)}if(e.keyCode==l.ESC){o=this._handleEscKey(t,e.currentTarget)}if(e.keyCode==l.TAB){o=this._handleTabKey(t,e.currentTarget,e.shiftKey,r)}if(o){e.preventDefault();e.stopPropagation()}},_moveLeft:function(e,t,i,n,r){var a,o;var s=e.parent();var l=s.parent();if(t){this.collapseRow(s)}else if(n&&e.is(".k-header")&&this.options.reorderable){this._moveColumn(e,true)}else{o=l.find(m).index(s);a=this._prevHorizontalCell(l,e,o);if(!a[0]){if(i){if(this.lockedTable){a=this._relatedRow(s);if(E.contains(this.lockedTable[0],s[0])){a=a.prevAll(ee+":first")}a=a.children(v+":last")}else{a=this._tabNext(e,r,true)}}else{l=this._horizontalContainer(l);a=this._prevHorizontalCell(l,e,o);if(a[0]!==e[0]){U(l.parent(),true)}}}this._setCurrent(a)}return true},_moveRight:function(e,t,i,n,r){var a,o;var s=e.parent();var l=s.parent();if(t){this.expandRow(s)}else if(n&&e.is(".k-header")&&this.options.reorderable){this._moveColumn(e,false)}else{o=l.find(m).index(s);a=this._nextHorizontalCell(l,e,o);if(!a[0]){if(i){if(this.lockedTable){a=this._relatedRow(s);if(E.contains(this.table[0],s[0])){a=a.nextAll(ee+":first")}a=a.children(v+":first")}else{a=this._tabNext(e,r,false)}}else{l=this._horizontalContainer(l,true);a=this._nextHorizontalCell(l,e,o);if(a[0]!==e[0]){U(l.parent(),true)}}}this._setCurrent(a)}return true},_moveUp:function(e,t){var i=e.parent().parent();var n;if(t){n=e.parent();n=n.prevAll(ee+":first");n=e.parent().is(ee)?n.children().eq(e.index()):n.children(v+":last")}else{n=this._prevVerticalCell(i,e);if(!n[0]){this._lastCellIndex=0;i=this._verticalContainer(i,true);n=this._prevVerticalCell(i,e);if(n[0]){U(i.parent(),true)}}}var r=this._lastCellIndex||0;this._setCurrent(n);this._lastCellIndex=r;return true},_moveDown:function(e,t){var i=e.parent().parent();var n;if(t){n=e.parent();n=n.nextAll(ee+":first");n=e.parent().is(ee)?n.children().eq(e.index()):n.children(v+":first")}else{n=this._nextVerticalCell(i,e);if(!n[0]){this._lastCellIndex=0;i=this._verticalContainer(i);n=this._nextVerticalCell(i,e);if(n[0]){U(i.parent(),true)}}}var r=this._lastCellIndex||0;this._setCurrent(n);this._lastCellIndex=r;return true},_moveColumn:function(e,t){var i=this.wrapper.data().kendoReorderable.element.find(this._draggableInstance.options.filter+":visible");var n=A(ri(this.columns));var r=i.index(E(e));var a=t?-1:1;var o=n[r];var s=ai(n,this.columns,r,r+a);if(s>=0){this.reorderColumn(s,o,t);this.trigger(Ve,{newIndex:s,oldIndex:r,column:o})}},_handleHome:function(e,t){var i=e.parent();var n=i.parent();var r=this.lockedTable&&this.lockedTable.children("tbody")[0]===n[0];var a=n[0]===this.tbody[0];var o;if(this._hasVirtualColumns()){this._scrollToColumn(I.keys.HOME);return true}if(t){if(this.lockedTable){o=this.lockedTable.find(te+">"+C+":first")}else{o=this.table.find(te+">"+C+":first")}}else if(a||r){if(a&&this.lockedTable){i=this._relatedRow(i)}o=i.children(v+":first")}if(o&&o.length){this._setCurrent(o);return true}},_handleEnd:function(e,t){var i=e.parent();var n=i.parent();var r=this.lockedTable&&this.lockedTable.children("tbody")[0]===n[0];var a=n[0]===this.tbody[0];var o;if(this._hasVirtualColumns()){this._scrollToColumn(I.keys.END);return true}if(t){o=this.table.find(ie+">"+C+":last")}else if(a||r){if(!a&&this.lockedTable){i=this._relatedRow(i)}o=i.children(v+":last")}if(o&&o.length){this._setCurrent(o);return true}},_handlePageDown:function(){if(!this.options.pageable){return false}this.dataSource.page(this.dataSource.page()+1);return true},_handlePageUp:function(){if(!this.options.pageable){return false}this.dataSource.page(this.dataSource.page()-1);return true},_handleTabKey:function(e,t,i,n){var r=this.options.editable&&this._editMode()=="incell";var a;if(!r||e.is("th")||(this.options.scrollable?this._headertables.filter(t).length:this.thead.filter(n).length)){return false}a=E(c()).closest(".k-edit-cell");if(a[0]&&a[0]!==e[0]){e=a}a=this._tabNext(e,t,i);if(a[0]===e[0]){return false}if(a.length){this._handleEditing(e,a,a.closest("table"));return true}return false},_handleEscKey:function(e,t){var i=c();var n=this._editMode()=="incell";if(!Zi(e)){if(e.has(i).length){U(t,true);return true}return false}if(n){this.closeCell(true)}else{var r=E(e).parent().index();if(i){i.blur()}this.cancelRow(true);if(r>=0){this._setCurrent(this.items().eq(r).children(C).first())}}U(t,true);return true},_toggleCurrent:function(e,t,i){var n=e.parent();if(n.is(".k-grouping-row")){n.find(".k-icon:first").click();return true}if(!t&&i){n.find(".k-icon:first").click();return true}return false},_handleSpaceKey:function(e,t){var i=this;if(!t||!i.groupable||!e.hasClass("k-header")){return}var n=i.groupable.descriptors();var r=e.attr(I.attr("field"));var a=i.groupable.aggregates();var o=e.attr(I.attr("title"))||r;if(i.groupable._canDrag(e)){n.push({field:r,dir:"asc",aggregates:a||[]});o+=" "+i.options.messages.ungroupHeader}else{n=E.grep(n,function(e){return e.field!==r});o+=" "+i.options.messages.groupHeader}e.attr("aria-label",o);i.dataSource.group(n);return true},_handleEnterKey:function(e,t,i){var n=this.options.editable&&this.options.editable.update!==false;var r=i.closest("[role=gridcell]");var a=this._hasDetails();var o;if(!i.is("table")&&!E.contains(e[0],i[0])){e=r}if(e.is("th")){o=e.find(".k-link");if(o.length){o.click()}else{e.find(Ee).focus()}return true}if(this._toggleCurrent(e,n,a)){return true}var s=e.find(":kendoFocusable:first");if(s[0]&&!e.hasClass("k-edit-cell")&&e.hasClass("k-state-focused")){s.focus();return true}if(n&&!i.is(":button,.k-button,textarea")){if(!r[0]){r=e}this._handleEditing(r,false,t);return true}return false},_nextHorizontalCell:function(e,t,i){var n=t.nextAll(v);if(!n.length){var r=e.find(m);var a=r.index(t.parent());if(a==-1){if(t.hasClass("k-header")){var o=[];fi([H(this.columns)[0]],Ci(r.eq(0).children(":visible").first()),o,0,0);if(o[i]){return o[i][0]}return t}if(t.parent().hasClass("k-filter-row")){return r.last().children(v).first()}return r.eq(i).children(v).first()}}return n.first()},_prevHorizontalCell:function(e,t,i){var n=t.prevAll(v);if(!n.length){var r=e.find(m);var a=r.index(t.parent());if(a==-1){if(t.hasClass("k-header")){var o=[];var s=H(this.columns);fi([s[s.length-1]],Ci(r.eq(0).children().last()),o,0,0);if(o[i]){return o[i][0]}return t}if(t.parent().hasClass("k-filter-row")){return r.last().children(v).last()}return r.eq(i).children(v).last()}}return n.first()},_currentDataIndex:function(e,t){var i=t.attr("data-index");if(!i){return S}var n=H(this.columns).length;if(n&&!e.closest("div").hasClass("k-grid-content-locked")[0]){return i-n}return i},_prevVerticalCell:function(e,t){var i;var n=t.parent();var r=e.children(m);var a=r.index(n);var o=this._currentDataIndex(e,t);if(o||t.hasClass("k-header")){i=xi(t);return i.eq(i.length-2)}o=Math.max(n.children(v).index(t),this._lastCellIndex||0);if(n.hasClass("k-filter-row")){return W(e).filter(jt).eq(o)}if(a==-1){if(this._hasVirtualColumns()){o=this._virtualCellIndex}n=e.find("tr.k-filter-row:visible");if(!n[0]){if((this._hasDetails()||t.parent().find(".k-hierarchy-cell").length)&&o){o--}return W(e).filter(jt).eq(o)}}else{n=a===0?E():r.eq(a-1)}i=n.children(v);if(i.length>o){return i.eq(o)}return i.eq(0)},_nextVerticalCell:function(e,t){var i;var n=t.parent();var r=e.children(m);var a=r.index(n);var o=this._currentDataIndex(e,t);var s=this.virtualScroll||{};var l;if(a!=-1&&o===S&&t.hasClass("k-header")){return Ci(t).eq(1)}o=o?parseInt(o,10):n.children(v).index(t);o=Math.max(o,this._lastCellIndex||0);if(a==-1){n=r.eq(0);if(s.columns){l=parseInt(n.children().first().attr("colspan"),10);o=this._virtualCellIndex-(l>1?l:0)}if(this._hasDetails()||n.find(".k-hierarchy-cell").length){o++}}else{n=r.eq(a+t[0].rowSpan)}var d=o;if(this._currentDataIndex(e,t)!==S){var u=n.children(":not(.k-group-cell):not(.k-hierarchy-cell)");var c=u.filter(":hidden");for(var f=0,h=c.length;f<h;f++){if(u.index(c[f])<o){d--}}}o=d;i=n.children(v);if(i.length>o){return i.eq(o)}return i.eq(0)},_verticalContainer:function(e,t){var i=e.parent();var n=this._navigatableTables.length;var r=Math.floor(n/2);var a=P(i[0],this._navigatableTables);if(t){r*=-1}a+=r;if(a>=0||a<n){i=this._navigatableTables.eq(a)}return i.find(t?">thead":">tbody")},_horizontalContainer:function(e,t){var i=this._navigatableTables.length;if(i<=2){return e}var n=e.parent();var r=P(n[0],this._navigatableTables);r+=t?1:-1;if(t&&(r==2||r==i)){return e}if(!t&&(r==1||r<0)){return e}return this._navigatableTables.eq(r).find("thead, tbody")},_tabNext:function(e,t,i){var n=true;var r=i?e.prevAll(v+":first"):e.nextAll(":visible:first");if(!r.length){r=e.parent();if(this.lockedTable){n=i&&t==this.lockedTable[0]||!i&&t==this.table[0];r=this._relatedRow(r)}if(n){if(this._hasVirtualColumns()){return e}r=r[i?"prevAll":"nextAll"]("tr:not(.k-grouping-row):not(.k-detail-row):visible:first")}r=r.children(v+(i?":last":":first"))}return r},_handleEditing:function(e,t,i){var n=this,r=E(c()),a=n._editMode(),o=z.msie,s=n._editContainer,l,d=n.options.editable&&n.options.editable.update!==false,u;i=E(i);if(a=="incell"){u=e.hasClass("k-edit-cell")}else{u=e.parent().hasClass("k-grid-edit-row")}if(n.editable){if(E.contains(s[0],r[0])){r.blur();if(o){r.blur()}}if(!n.editable){U(i);return}if(n.editable.end()){if(a=="incell"){n.closeCell()}else{n.saveRow();u=true}}else{if(a=="incell"){n._setCurrent(s)}else{n._setCurrent(s.children().filter(v).first())}l=s.find(":kendoFocusable:first")[0];if(l){l.focus()}return}}if(t){n._setCurrent(t)}U(i,true);if(!d){return}if(!u&&!t||t){if(a===tt){if(!E(n.current()).hasClass(Z)){n.editCell(n.current())}}else{n.editRow(n.current().parent())}}},_wrapper:function(){var e=this,t=e.table,i=e.options.height,n=e.options.width,r=e.element;if(!r.is("div")){r=r.wrap("<div/>").parent()}e.wrapper=r.addClass("k-grid k-widget k-widget-2021 k-grid-display-block");if(i){e.wrapper.css(Ke,i);t.css(Ke,"auto")}if(n){e.wrapper.css("width",n)}e._initMobile()},_initMobile:function(){var e=this.options;var t=this;this._isMobile=e.mobile===true&&I.support.mobileOS||e.mobile==="phone"||e.mobile==="tablet";if(this._isMobile){var i=this.wrapper.addClass("k-grid-mobile").wrap("<div data-"+I.ns+'stretch="true" data-'+I.ns+'role="view" '+"data-"+I.ns+'init-widgets="false"></div>').parent();this.pane=this._createPane(i);this.view=this.pane.view();if(e.height){this.pane.element.parent().css(Ke,e.height)}else{this.pane.element.parent().css(Ke,this.wrapper[0].style.height)}this._editAnimation="slide";t.wrapper.on("transitionend"+_,function(e){e.stopPropagation()});t.wrapper.on("contextmenu"+_,"th a",function(e){e.preventDefault();return false});this.view.bind("showStart",function(){if(t._isLocked()){t._updateTablesWidth();t._applyLockedContainersWidth();t._syncLockedContentHeight();t._syncLockedHeaderHeight();t._syncLockedFooterHeight()}})}},_createPane:function(e){var t=I.Pane.wrap(e,{viewEngine:{viewOptions:{renderOnInit:true,wrap:false,wrapInSections:true,detachOnHide:false,detachOnDestroy:false}}});return t},_tbody:function(){var e=this,t=e.table,i;i=t.find(">tbody");if(!i.length){i=E("<tbody/>").appendTo(t)}e.tbody=i.attr("role","rowgroup")},_scrollable:function(){var i=this,e,t,n=i.options,r=n.scrollable,a=r!==true&&r.virtual,o=a?Qi(r.virtual):null,s=!I.support.kineticScrollNeeded||o&&o.rows?I.support.scrollbar():0,l;if(r){e=i.wrapper.children(".k-grid-header");if(!e[0]){e=E('<div class="k-grid-header" />').insertBefore(i.table)}e.css(k?"padding-left":"padding-right",r.virtual?s+1:s);t=E('<table role="grid" />');t.width(i.table[0].style.width);t.append(i.thead);e.empty().append(E('<div class="k-grid-header-wrap k-auto-scrollable" />').append(t));i.content=i.table.parent();i.virtualScroll=o;if(i.content.is(".k-virtual-scrollable-wrap, "+h+Dt.scrollContainer)){i.content=i.content.parent()}if(!i.content.is(".k-grid-content, .k-virtual-scrollable-wrap")){i.content=i.table.wrap('<div class="k-grid-content k-auto-scrollable" />').parent()}if(o&&o.rows&&!i.virtualScrollable){i._createVirtualScrollable()}if(o&&o.columns){i.table.css({width:si(O(_i(i.columns)))})}l=e.children(".k-grid-header-wrap");i.scrollables=l.add(i.content);var d=i.wrapper.find(".k-grid-footer");if(d.length){i.scrollables=i.scrollables.add(d.children(".k-grid-footer-wrap"))}l.unbind("scroll"+_).bind("scroll"+_,function(e){if(i._scrollLeft!==this.scrollLeft){I.scrollLeft(i.scrollables.not(e.currentTarget),this.scrollLeft)}});if(o&&o.rows){i.content.find(">.k-virtual-scrollable-wrap").unbind("scroll"+_).bind("scroll"+_,function(){var e=this.scrollLeft!=i._scrollLeft;i._scrollLeft=this.scrollLeft;I.scrollLeft(i.scrollables,this.scrollLeft);if(i.lockedContent){i.lockedContent[0].scrollTop=this.scrollTop}if(o.columns&&e){i.refresh()}})}else{var u=r.endless;var c=i.dataSource.options.pageSize;if(u){i._endlessPageSize=c}i.content.unbind("scroll"+_).bind("scroll"+_,function(e){var t=this.scrollLeft!=i._scrollLeft;i._scrollLeft=this.scrollLeft;I.scrollLeft(i.scrollables.not(e.currentTarget),i._scrollLeft);if(i.lockedContent&&e.currentTarget==i.content[0]){i.lockedContent[0].scrollTop=this.scrollTop}if(u){if(this.scrollTop+this.clientHeight-this.scrollHeight>=-10&&!i._endlessFetchInProgress&&i._endlessPageSize<i.dataSource.total()){i._skipRerenderItemsCount=i._endlessPageSize;i._endlessPageSize=i._endlessPageSize+c;i.dataSource.options.endless=true;i._endlessFetchInProgress=true;i.dataSource.pageSize(i._endlessPageSize)}}if(o&&o.columns&&t){i._virtualColScroll=true;i._cacheEditableState();i.refresh();i._restoreEditableState();i._virtualColScroll=false}});var f=i.content.data("kendoTouchScroller");if(f){f.destroy()}f=I.touchScroller(i.content);if(f&&f.movable){i.touchScroller=f;f.movable.bind("change",function(e){I.scrollLeft(i.scrollables,-e.sender.x);if(i.lockedContent){i.lockedContent.scrollTop(-e.sender.y)}});i.one(be,function(e){e.sender.wrapper.addClass("k-grid-backface")})}}}},_createVirtualScrollable:function(){var e=this;if(e.virtualScrollable){e.virtualScrollable.destroy()}e.virtualScrollable=new Et(e.content,{dataSource:e.dataSource,itemHeight:function(){return e._averageRowHeight()},page:function(){e._restoreEditableState()},scroll:function(){e._focusEditable()}});e.virtualScrollable.bind(Ce,x(e._onVirtualPaging,e))},_onVirtualPaging:function(){var e=this;e._cacheEditableState();if(e._isVirtualIncellEditable()){e._shouldClearEditableState=false;e.closeCell();e._shouldClearEditableState=true}},_isVirtualEditable:function(){return this._isVirtualIncellEditable()||this._isVirtualInlineEditable()||this._isVirtualPopupEditable()},_isVirtualInlineEditable:function(){return this.virtualScrollable&&this._editMode()===it},_isVirtualIncellEditable:function(){return this.virtualScrollable&&this._editMode()===tt},_isVirtualPopupEditable:function(){return this.virtualScrollable&&this._editMode()==="popup"},_hasVirtualColumns:function(){return(this.virtualScroll||{}).columns?true:false},_scrollVirtualWrapper:function(){var e=this;var t=e.virtualScrollable;if(e._isVirtualInlineEditable()||e._isVirtualIncellEditable()){if(t._isScrolledToBottom()){t._scrollWrapperToBottom()}else if(t._isScrolledToTop()){t._scrollWrapperToTop()}}},_scrollVirtualWrapperOnColumnResize:function(){var e=this.virtualScrollable;if(e){e._scrollWrapperOnColumnResize()}},_restoreEditableState:function(){var e=this;var t=e._editableState||{};var i=t.model;var n=e.dataSource;var r=e._isVirtualInlineEditable();var a=e._isVirtualIncellEditable();var o=e._hasVirtualColumns();var s;var l;if((r||a||o)&&i&&n._getByUid(i.uid,n.view())){if(e._editMode()===it){e._shouldClearEditableState=false;e.editRow(i);if(!o){e._focusEditable()}}else if(e._editMode()===tt){s=e.tbody.children(It(nt,i.uid));l=E(s).children(It(Je,t.field));if(l[0]){e._shouldClearEditableState=false;e.editCell(l);if(!o){e._focusEditable()}}}}e._shouldClearEditableState=true},_focusEditable:function(){var e=this;var t=(e._editableState||{}).field;var i=e._editContainer;if(i&&i.length&&!Y(i[0],c())&&e._canFocusEditable()){if(e._isVirtualInlineEditable()||e._hasVirtualColumns()){i.find(It(Ze,t)).find(n).eq(0).focus()}else if(e._isVirtualIncellEditable()||e._hasVirtualColumns()){i.find(n).eq(0).focus()}}},_canFocusEditable:function(){var e=this;var t=(e._isVirtualIncellEditable()||e._isVirtualInlineEditable()||e._hasVirtualColumns())&&(Xi((e.virtualScrollable||{}).wrapper,e._editContainer)||Xi(e.content,e._editContainer));return t},_cacheEditableState:function(){var e=this;var t=e._editContainer;var i=t?e._modelForContainer(t):null;var n=e._isVirtualInlineEditable();var r=e._isVirtualIncellEditable();var a=e._hasVirtualColumns();var o;var s;if((n||r||a)&&i){e._clearEditableState();o=E(c());if(t&&o[0]&&Y(t[0],o[0])){o.change();s=I.widgetInstance(o,I.ui);if(s&&d(s.value)&&o.is(et)){s.value(o.val());s.trigger(f)}}if(e._editMode()===it){e._editableState={model:i,field:o.closest("["+I.attr(Ze)+"]").attr(I.attr(Ze))}}else if(e._editMode()===tt){e._editableState={model:i,field:t.attr(I.attr(Je))}}}},_clearSortClasses:function(){var e=this;if(e.content){e.content.find("col:not(.k-group-col):not(.k-hierarchy-col)").removeClass("k-sorted")}if(e.lockedContent){e.lockedContent.find("col:not(.k-group-col):not(.k-hierarchy-col)").removeClass("k-sorted")}},_clearEditableState:function(){var e=this;if(e.virtualScrollable||e.virtualScroll&&e._hasVirtualColumns()){e._editableState=null}},_destroyVirtualScrollable:function(){var e=this;e._clearEditableState();if(e.virtualScrollable&&e.virtualScrollable.element){e.virtualScrollable.destroy()}e.virtualScrollable=null},_renderNoRecordsContent:function(){var e=this;if(e.options.noRecords){var t=e.table.parent().children("."+Ie);if(t.length){e.angular("cleanup",function(){return{elements:t.get()}});t.remove()}if(!e.dataSource||!e.dataSource.view().length){t=E(e.noRecordsTemplate({})).insertAfter(e.table);e.angular("compile",function(){return{elements:t.get(),data:[{}]}})}}},_setContentWidth:function(e){var t=this,i="k-grid-content-expander",n='<div class="'+i+'"></div>',r=t.resizable,a;if(t.options.scrollable&&t.wrapper.is(":visible")){a=t.table.parent().children("."+i);t._setContentWidthHandler=x(t._setContentWidth,t);if(!t.dataSource||!t.dataSource.view().length){if(!a[0]){a=E(n).appendTo(t.table.parent());if(r){r.bind("resize",t._setContentWidthHandler)}}if(t.thead){a.width(t.thead.width());if(!isNaN(parseFloat(e,10))){I.scrollLeft(t.content,e)}}}else if(a[0]){a.remove();if(r){r.unbind("resize",t._setContentWidthHandler)}}t._applyLockedContainersWidth();t._syncLockedContentHeight();if(t.lockedHeader&&t.table[0].clientWidth===0){t.table[0].style.width="1px"}}},_applyLockedContainersWidth:function(){if(this.options.scrollable&&this.lockedHeader){var e=this.thead.parent(),t=e.parent(),i=this.wrapper[0].clientWidth,n=this._groups(),r=I.support.scrollbar(),a=this.lockedHeader.find(">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)"),o=e.find(">colgroup>col:not(.k-group-col, .k-hierarchy-col)"),s=li(a),l=li(o),d;if(n>0){s+=M(this.lockedHeader.find(".k-group-cell:first"))*n}if(s>=i){s=i-3*r}this.lockedHeader.add(this.lockedContent).width(s);t[0].style.width=t.parent().width()-s-2+"px";e.add(this.table).width(l);if(this.virtualScrollable&&!St){i-=r}this.content[0].style.width=i-s-1+"px";if(this.lockedFooter&&this.lockedFooter.length){this.lockedFooter.width(s);d=this.footer.find(".k-grid-footer-wrap");d[0].style.width=t[0].clientWidth+"px";d.children().first().width(l)}}},_setContentHeight:function(){var e=this,t=e.options,i,n=e.wrapper.children(".k-grid-header"),r=I.support.scrollbar();var a=(t.scrollable||{}).height;if(t.scrollable&&e.wrapper.is(":visible")){if(a&&e.content[0].style.height===""){e.content[0].style.height=a}i=e.wrapper.innerHeight();i-=w(n);if(e.pager&&e.pager.element.is(":visible")){i-=w(e.pager.element)}if(t.groupable){i-=w(e.wrapper.children(".k-grouping-header"))}if(t.toolbar){i-=w(e.wrapper.children(".k-grid-toolbar"))}if(e.footerTemplate){i-=w(e.wrapper.children(".k-grid-footer"))}var o=function(e){var t,i;if(e[0].style.height){return true}else{t=e.height()}e.height("auto");i=e.height();if(t!=i){e.height("");return true}e.height("");return false};if(o(e.wrapper)){if(i>r*2){if(e.lockedContent){r=e.table[0].offsetWidth>e.table.parent()[0].clientWidth?r:0;e.lockedContent.height(i-r)}e.content.height(i)}else{e.content.height(r*2+1)}}if(e.lockedContent&&e.content&&e.lockedContent.height&&e.content.height){r=e.table[0].offsetWidth>e.table.parent()[0].clientWidth?r:0;e.lockedContent.height(e.content.outerHeight()-r)}}},_averageRowHeight:function(){var e=this,t=e._items(e.tbody,true).length,i=e._rowHeight;if(t===0){return i}if(!e._rowHeight){e._rowHeight=i=w(e.table)/t;e._sum=i;e._measures=1}var n=w(e.table)/t;if(i!==n){e._measures++;e._sum+=n;e._rowHeight=e._sum/e._measures}return i},_dataSource:function(){var e=this,t=e.options,i,n=t.dataSource;n=q(n)?{data:n}:n;if(R(n)){T(n,{table:e.table,fields:e.columns});i=t.pageable;if(R(i)&&i.pageSize!==S){n.pageSize=i.pageSize}}if(e.dataSource&&e._refreshHandler){e.dataSource.unbind(f,e._refreshHandler).unbind(Q,e._progressHandler).unbind(X,e._errorHandler).unbind(lt,e._sortHandler)}else{e._refreshHandler=x(e.refresh,e);e._progressHandler=x(e._requestStart,e);e._errorHandler=x(e._error,e);e._sortHandler=x(e._clearSortClasses,e)}e.dataSource=j.create(n).bind(f,e._refreshHandler).bind(Q,e._progressHandler).bind(X,e._errorHandler).bind(lt,e._sortHandler)},_error:function(){this._progress(false)},_requestStart:function(){this._progress(true)},_modelChange:function(e){var t=this,i=t.tbody,n=e.model,r=t.tbody.find("tr["+I.attr("uid")+"="+n.uid+"]"),a,o,s,l=r.hasClass("k-alt"),d,u=t._items(i).index(r),c=t.lockedContent,f,h,p,v,m;if(c){a=t._relatedRow(r)}if(r.add(a).children(".k-edit-cell").length&&!t.options.rowTemplate){r.add(a).children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){o=E(this);s=V(t.columns)[t._calculateColumnIndex(o)];if(s.field===e.field){if(!o.hasClass("k-edit-cell")){t._displayCell(o,s,n)}else{o.addClass("k-dirty-cell")}}})}else if(!r.hasClass("k-grid-edit-row")){h=E().add(r);if(c){d=(l?t.lockedAltRowTemplate:t.lockedRowTemplate)(n);h=h.add(a);a.replaceWith(d)}t.angular("cleanup",function(){return{elements:h.get()}});d=(l?t.altRowTemplate:t.rowTemplate)(n);r.replaceWith(d);d=t._items(i).eq(u);var g=[{dataItem:n}];if(c){r=r.add(a);a=t._relatedRow(d)[0];Wi(d[0],a);d=d.add(a);g.push({dataItem:n})}t.angular("compile",function(){return{elements:d.get(),data:g}});f=t.options.selectable;if((f||t._checkBoxSelection)&&r.hasClass("k-state-selected")){t.select(d)}v=h.children(":not(.k-group-cell,.k-hierarchy-cell)");p=d.children(":not(.k-group-cell,.k-hierarchy-cell)");for(u=0,m=t.columns.length;u<m;u++){s=t.columns[u];o=p.eq(u);if(f&&v.eq(u).hasClass("k-state-selected")){o.addClass("k-state-selected")}}t.trigger("itemChange",{item:d,data:n,ns:b})}},_pageable:function(){var t=this,e,i=t.options.pageable;if(i){e=t.wrapper.children("div.k-grid-pager");if(!e.length){e=E('<div class="k-pager-wrap k-grid-pager"/>')}if(i.position==="top"){e.prependTo(t.wrapper).addClass("k-grid-pager-top")}else{e.appendTo(t.wrapper)}if(t.pager){t.pager.destroy()}if(typeof i==="object"&&i instanceof I.ui.Pager){t.pager=i}else{if(t.dataSource._groupPaging){t.pager=new At(e,T({},i,{dataSource:t.dataSource}))}else{t.pager=new I.ui.Pager(e,T({},i,{dataSource:t.dataSource}))}}t.pager.bind("pageChange",function(e){if(t.trigger("page",{page:e.index})){e.preventDefault()}});t._togglePagerVisibility()}},_footer:function(){var e=this,t=e.dataSource.aggregates(),i="",n=e.footerTemplate,r=e.options,a,o=e.footer||e.wrapper.find(".k-grid-footer");if(n){i=E(e._wrapFooter(n(t)));if(o.length){var s=i;e.angular("cleanup",function(){return{elements:o.get()}});o.replaceWith(s);o=e.footer=s}else{if(r.scrollable){o=e.footer=r.pageable&&r.pageable.position!=="top"?i.insertBefore(e.wrapper.children("div.k-grid-pager")):i.appendTo(e.wrapper)}else{o=e.footer=i.insertBefore(e.tbody)}}e.angular("compile",function(){return{elements:o.find("td:not(.k-group-cell, .k-hierarchy-cell)").get(),data:G(e.columns,function(e){return{column:e,aggregate:t[e.field]}})}})}else if(o&&!e.footer){e.footer=o}if(o.length){if(r.scrollable){a=o.attr("tabindex",-1).children(".k-grid-footer-wrap");e.scrollables=E(e.scrollables.filter(function(){return!E(this).is(".k-grid-footer-wrap")}).toArray()).add(a)}if(e._footerWidth){o.find("table").css("width",e._footerWidth)}if(a){var l=I.scrollLeft(e.content);if(r.scrollable!==true&&e.virtualScroll&&e.virtualScroll.rows){l=I.scrollLeft(e.wrapper.find(".k-virtual-scrollable-wrap"))}I.scrollLeft(a,l)}}if(e.lockedContent){e._appendLockedColumnFooter();e._applyLockedContainersWidth();e._syncLockedFooterHeight()}},_wrapFooter:function(e){var t=this,i="",n=!I.support.mobileOS?I.support.scrollbar():0;if(t.options.scrollable){i=E('<div class="k-grid-footer"><div class="k-grid-footer-wrap"><table><tbody>'+e+"</tbody></table></div></div>");t._appendCols(i.find("table"));i.css(k?"padding-left":"padding-right",n);return i}return'<tfoot class="k-grid-footer">'+e+"</tfoot>"},_columnMenu:function(){var t=this,e,i=V(t.columns),n,r=t.options,a=r.columnMenu,o,s,l,d,u=F(t.columns,function(e){return e.columns!==S}).length>0,c=F(t.columns,function(e){return e.lockable!==false}).length>0,f=F(t.columns,function(e){return e.stickable===true}).length>0,h=this._isMobile,p=function(e){t.trigger(he,{field:e.field,container:e.container})},v=function(e){t.trigger(ve,{field:e.field,container:e.container})},m=function(e){U(e.closest("table"),true)},g=function(e){t.trigger(je,{column:e.column})},_=function(e){t.trigger(Ge,{column:e.column})},b=function(e){if(t.trigger("sort",{sort:e.sort})){e.preventDefault()}else{t._clearEditableState();if(t.dataSource.options.endless){t.dataSource.options.endless=null;t._endlessPageSize=t.dataSource.options.pageSize;t.dataSource.pageSize(t.dataSource.options.pageSize)}}},w=function(e){if(t.trigger("filter",{filter:e.filter,field:e.field})){e.preventDefault()}else{t._clearEditableState();if(t.dataSource.options.endless){t.dataSource.options.endless=null;t._endlessPageSize=t.dataSource.options.pageSize;t.dataSource.pageSize(t.dataSource.options.pageSize)}}},k=r.$angular;if(a){if(typeof a=="boolean"){a={}}t._setColumnsMediaVisibility(i);d=W(t.thead);for(var y=0,x=d.length;y<x;y++){n=i[y];var C=d.eq(y);if(!n.command&&(n.field||C.attr("data-"+I.ns+"field"))){e=C.data("kendoColumnMenu");if(e){e.destroy()}s=n.sortable!==false&&a.sortable!==false&&r.sortable!==false?T({},r.sortable,{compare:(n.sortable||{}).compare}):false;l=r.filterable&&n.filterable!==false&&a.filterable!==false?T({pane:t.pane},r.filterable,n.filterable):false;if(n.filterable&&n.filterable.dataSource){l.forceUnique=false;l.checkSource=n.filterable.dataSource}if(l){l.format=n.format}o={dataSource:t.dataSource,values:n.values,columns:a.columns,sortable:s,filterable:l,messages:a.messages,owner:t,closeCallback:m,init:p,open:v,stick:g,unstick:_,pane:t.pane,sort:b,filtering:w,filter:h?":not(.k-column-active)":"",hasLockableColumns:H(i).length>0&&c&&!u,hasStickableColumns:f&&!u,encodeTitles:t.options.encodeTitles,componentType:a.componentType};if(k){o.$angular=k}C.kendoColumnMenu(o)}}}},_headerCells:function(){return E(this.thead).find("th").filter(function(){var e=E(this);return!e.hasClass("k-group-cell")&&!e.hasClass("k-hierarchy-cell")})},_filterable:function(){var t=this,e=V(t.columns),i,n,r,a=function(e){t.trigger(fe,{field:e.field,container:e.container})},o=function(e){U(e.closest("table"),true)},s=function(e){if(t.trigger("filter",{filter:e.filter,field:e.field})){e.preventDefault()}else{t._clearEditableState();if(t.dataSource.options.endless){t.dataSource.options.endless=null;t._endlessPageSize=t.dataSource.options.pageSize;t.dataSource.pageSize(t.dataSource.options.pageSize)}}},l=function(e){t.trigger(pe,{field:e.field,container:e.container})},d=t.options.filterable;if(d&&typeof d.mode==D&&d.mode.indexOf("menu")==-1){d=false}if(d&&!t.options.columnMenu){n=W(t.thead);for(var u=0,c=n.length;u<c;u++){r=n.eq(u);if(e[u].filterable!==false&&!e[u].command&&(e[u].field||r.attr("data-"+I.ns+"field"))){i=r.data("kendoFilterMenu");if(i){i.destroy()}i=r.data("kendoFilterMultiCheck");if(i){i.destroy()}var f=e[u].filterable;var h=T({},d,f,{dataSource:t.dataSource,values:e[u].values,format:e[u].format,closeCallback:o,title:e[u].title||e[u].field,init:a,open:l,pane:t.pane,change:s});if(f&&f.messages){h.messages=T(true,{},d.messages,f.messages)}if(f&&f.dataSource){h.forceUnique=false;h.checkSource=f.dataSource}if(f&&f.multi){r.kendoFilterMultiCheck(h)}else{r.kendoFilterMenu(h)}}}}},_filterRow:function(){var t=this;if(!t._hasFilterRow()){return}var e;var i=t.options.$angular;var n=V(t.columns),r=t.options.filterable,a=t.thead.find(".k-filter-row"),o=function(e){if(t.trigger("filter",{filter:e.filter,field:e.field})){e.preventDefault()}else{t._clearEditableState();if(t.dataSource.options.endless){t.dataSource.options.endless=null;t._endlessPageSize=t.dataSource.options.pageSize;t.dataSource.pageSize(t.dataSource.options.pageSize)}}};this._updateHeader(this.dataSource.group().length);for(var s=0;s<n.length;s++){var l,d=n[s],u=t.options.filterable.operators,c=false,f=E("<th/>"),h=d.field;if(d.hidden){f.hide()}a.append(f);if(h&&d.filterable!==false){var p=d.filterable&&d.filterable.cell||{};l=t.options.dataSource;if(l instanceof j){l=t.options.dataSource.options}var v=T(true,{},r.messages);if(d.filterable){T(true,v,d.filterable.messages)}if(p.enabled===false){f.html("&nbsp;");continue}if(p.dataSource){l=p.dataSource;c=true}if(d.filterable&&d.filterable.operators){u=d.filterable.operators}e={column:d,dataSource:t.dataSource,suggestDataSource:l,customDataSource:c,field:h,messages:v,values:d.values,template:p.template,delay:p.delay,inputWidth:p.inputWidth,suggestionOperator:p.suggestionOperator,minLength:p.minLength,dataTextField:p.dataTextField,operator:p.operator,operators:u,showOperators:p.showOperators,change:o};if(i){e.$angular=i}E("<span/>").attr(I.attr("field"),h).appendTo(f).kendoFilterCell(e)}else{f.html("&nbsp;")}}},_sortable:function(){var t=this,e=V(t.columns),i,n,r,a=t.options.sortable,o=function(e){if(t.trigger("sort",{sort:e.sort})){e.preventDefault()}else{t._clearEditableState()}};if(a){var s=W(t.thead);for(var l=0,d=s.length;l<d;l++){i=e[l];if(i.sortable!==false&&!i.command&&i.field){r=s.eq(l);n=r.data("kendoColumnSorter");if(n){n.destroy()}r.attr("data-"+I.ns+"field",i.field).kendoColumnSorter(T({},a,i.sortable,{dataSource:t.dataSource,aria:true,filter:":not(.k-column-active)",change:o}))}}s=null}},_columns:function(e){var t=this,i=t.table,n,d=i.find("col"),r,a=t.element.find("thead tr"),o=t.options.dataSource;e=e.length?e:G(i.find("th:not(.k-group-cell):not(.k-hierarchy-cell)"),function(e,t){e=E(e);var i=e.attr(I.attr("sortable")),n=e.attr(I.attr("filterable")),r=e.attr(I.attr("type")),a=e.attr(I.attr("groupable")),o=e.attr(I.attr("field")),s=e.attr(I.attr("title")),l=e.attr(I.attr("menu"));if(!o){o=e.text().replace(/\s|[^A-z0-9]/g,"")}return{field:o,type:r,title:s,sortable:i!=="false",filterable:n!=="false",groupable:a!=="false",menu:l,template:e.attr(I.attr("template")),width:d.eq(t).css("width")}});n=!(t.table.find("tbody tr").length>0&&(!o||!o.transport));if(t.options.scrollable){var s=e;r=H(e);e=N(e);if(r.length>0&&e.length===0){throw new Error("There should be at least one non locked column")}Ii(t.element.find("tr:has(th):first"),s);e=r.concat(e)}if(a.length&&e.length){t._updateColumnIDs(e,a.first())}t.columns=Bt(e,n);if(E.grep(V(t.columns),function(e){return e.selectable}).length){t._selectedIds={};t._checkBoxSelection=true;t.wrapper.on(u+_,"tbody > tr "+Ee,x(t._checkboxClick,t));t.wrapper.on(u+_,"thead > tr "+Ee,x(t._headerCheckboxClick,t))}t._foreignKeyBindings(t.columns)},_foreignKeyBindings:function(e){var t=this;var i=e.length;var n;for(var r=0;r<i;r++){n=e[r];if(n.dataSource){t._fetchForeignKeyValues(n)}}},_fetchForeignKeyValues:function(t){var e=this;var i=E.Deferred();e._hasBoundForeignKey=true;t.dataSource=j.create(t.dataSource);if(!e._foreignKeyPromises){e._foreignKeyPromises=[]}e._foreignKeyPromises.push(i);t.dataSource.fetch().then(function(){var e=t.dataSource.data();t.values=e.map(function(e){return{value:e[t.dataValueField],text:e[t.dataTextField]}});i.resolve()})},_updateColumnIDs:function(e,t){if(!e.length){return}var i=t.find("th:not(.k-group-cell):not(.k-hierarchy-cell)");var n;for(var r=0;r<e.length;r++){n=i.eq(r).attr("id");if(n){e[r].headerAttributes=T(e[r].headerAttributes,{id:n})}}this._updateColumnIDs(wi(e),t.next())},_headerCheckboxClick:function(e){var t=this,i=E(e.target),n=i.prop("checked"),r=i.closest(".k-grid.k-widget").getKendoGrid();if(t!==r){return}if(n){t.select(r.items())}else{t.clearSelection()}},_checkboxClick:function(e){var t=this,i=E(e.target).closest("tr"),n=!i.hasClass(Ae);if(t!==i.closest(".k-grid.k-widget").getKendoGrid()){return}if(n){t.select(i)}else{t._deselectCheckRows(i)}},_groups:function(){var e=this.dataSource.group();return e?e.length:0},_tmpl:function(e,t,i,n){var r=this,a=T({},I.Template,r.options.templateSettings),o=a.paramName,s,l=t.length,d,u={storage:{},count:0},c,f,h=r._hasDetails(),p=[],v=r._groups(),m=r.options.navigatable;var g=I.attr("field");var _;var b="";if(!e){e="<tr";if(i){p.push("k-alt")}p.push("k-master-row");if(p.length){e+=' class="'+p.join(" ")+'"'}if(l){e+=" "+I.attr("uid")+'="#='+I.expr("uid",a.paramName)+'#"'}e+=" role='row'>";if(v>0&&!n){e+=Mt(v)}if(h){e+='<td class="k-hierarchy-cell" aria-expanded="false"><a class="k-icon k-i-expand" href="\\#" '+mt+'="'+vt+'" tabindex="-1"></a></td>'}for(s=0;s<l;s++){c=t[s];d=c.template;f=typeof d;_=c.field;if(r._editMode()===tt&&_){c.attributes=c.attributes||{};if(r.virtualScroll){c.attributes[g]=_}b=r._dirtyCellTemplate(_,o);c.attributes["class"]=c.attributes["class"]||"";if(c.attributes["class"].indexOf(b)<0){c.attributes["class"]+=b}}if(c.colSpan&&c.colSpan>0&&Di(c.attributes)){c.attributes=Ai(c.attributes)}else if(!c.colSpan&&c.hidden){c.attributes=Ti(c.attributes)}if(c.command){c.attributes=c.attributes||{};if(typeof c.attributes["class"]!=="undefined"){c.attributes["class"]+=" k-command-cell"}else{c.attributes["class"]="k-command-cell"}}e+="<td"+Rt(c.attributes);if(m){e+=" aria-describedby='"+c.headerAttributes.id+"'"}if(c.colSpan){if(c.colSpan>1){e+=" "+I.attr("virtual")}e+=" colSpan='"+c.colSpan+"'"}e+=" role='gridcell'>";e+=r._cellTmpl(c,u);e+="</td>"}e+="</tr>"}e=I.template(e,a);if(u.count>0){return x(e,u.storage)}return e},_dirtyCellTemplate:function(e,t){var i;if(e&&t){i=e.charAt(0)==="["?I.expr(e,t+".dirtyFields"):t+".dirtyFields['"+e+"']";return"#= "+t+" && "+t+".dirty && "+t+".dirtyFields && "+i+" ? ' k-dirty-cell' : '' #"}return""},_headerCellText:function(e){var t=this,i=T({},I.Template,t.options.templateSettings),n=e.headerTemplate,r=typeof n,a=e.title&&(t.options.encodeTitles?an(e.title):e.title)||e.field||"";if(r===Qe){a=I.template(n,i)({})}else if(r===D){a=n}return a},_cellTmpl:function(e,t){var i=this,n=T({},I.Template,i.options.templateSettings),r=e.template,a=n.paramName,o=e.field,s="",l,d,u=e.format,c=typeof r,f=e.values;if(e.command){if(q(e.command)){for(l=0,d=e.command.length;l<d;l++){if(e.command[l].visible){s+=I.format("#= {0}(data)? '{1}':'' #",e.command[l].visible,i._createButton(e.command[l]).replace(_t,"\\#").replace(/'/gi,"\\'"))}else{s+=i._createButton(e.command[l]).replace(_t,"\\#")}}return s}return i._createButton(e.command).replace(_t,"\\#")}if(e.selectable){return xt}s+=i._dirtyIndicatorTemplate(o,a);if(c===Qe){t.storage["tmpl"+t.count]=r;s+="#=this.tmpl"+t.count+"("+a+")#";t.count++}else if(c===D){s+=r}else if(f&&f.length&&R(f[0])&&"value"in f[0]&&o){s+="#var v ="+I.stringify(Mi(f)).replace(_t,"\\#")+"#";s+="#var f = v[";if(!n.useWithBlock){s+=a+"."}s+=o+"]#";s+="${f != null ? f : ''}"}else{s+=e.encoded?"#:":"#=";if(u){s+='kendo.format("'+u.replace(gt,"\\$1")+'",'}if(o){o=I.expr(o,a);s+=o+"==null?'':"+o}else{s+="''"}if(u){s+=")"}s+="#"}return s},_dirtyIndicatorTemplate:function(e,t){var i;if(e&&t){i=e.charAt(0)==="["?I.expr(e,t+".dirtyFields"):t+".dirtyFields['"+e+"']";return"#= "+t+" && "+t+".dirty && "+t+".dirtyFields && "+i+" ? '<span class=\"k-dirty\"></span>' : '' #"}return""},_virtualCols:function(e){var t=this;var i=E.map(e,function(e){return e.hidden?0:parseInt(e.width,10)});var n=t.virtualScrollable?I.scrollLeft(t.content.find(">.k-virtual-scrollable-wrap")):I.scrollLeft(t.content);var r=M(t.content);var a=si(e);var o=[];var s=0;var l=0;var d=0;var u=0;var c=0;var f;for(u=0;u<e.length;u++){f=u<i.length-1?i[u+1]:0;if(c+i[u]+2*f<n){if(i[u]){d++}c+=i[u]}else{s=1+d;break}}d=0;c=0;for(var h=e.length-1;h>=0;h--){if(c+3*i[h]<a-r-n){if(i[h]){d++}c+=i[h]}else{l=1+d;for(var p=u;p<=h;p++){if(e[p].locked){continue}o.push(e[p]);if(e[p].colSpan){delete e[p].colSpan}}o[0].colSpan=s;o[o.length-1].colSpan=l;break}}if(o[0].hidden){o[0].colSpan--}t.virtualCols=o;return o},_templates:function(){var e=this,t=e.options,i=e.dataSource,n=i.group(),r=e.footer||e.wrapper.find(".k-grid-footer"),a=i.aggregate(),o=V(e.columns),s=V(H(e.columns)),l=t.scrollable?V(N(e.columns)):o,d=(e.virtualScroll||{}).columns?e._virtualCols(l):l,u=F(A(s),function(e,t){return e.groupHeaderColumnTemplate&&t!==0}),c=F(A(d),function(e){return e.groupHeaderColumnTemplate});if(t.scrollable&&s.length){if(t.rowTemplate||t.altRowTemplate){throw new Error("Having both row template and locked columns is not supported")}e.rowTemplate=e._tmpl(t.rowTemplate,d,false,true);e.altRowTemplate=e._tmpl(t.altRowTemplate||t.rowTemplate,d,true,true);e.lockedRowTemplate=e._tmpl(t.rowTemplate,s);e.lockedAltRowTemplate=e._tmpl(t.altRowTemplate||t.rowTemplate,s,true)}else{e.rowTemplate=e._tmpl(t.rowTemplate,d);e.altRowTemplate=e._tmpl(t.altRowTemplate||t.rowTemplate,d,true)}if(e._hasDetails()){e.detailTemplate=e._detailTmpl(t.detailTemplate||"")}if(e._group&&!K(a)||!K(a)&&!r.length||F(o,function(e){return e.footerTemplate}).length){e.footerTemplate=e._footerTmpl(o,a,"footerTemplate","k-footer-template")}if(n&&F(o,function(e){return e.groupFooterTemplate}).length){a=E.map(n,function(e){return e.aggregates});e.groupFooterTemplate=e._footerTmpl(d,a,"groupFooterTemplate","k-group-footer",s.length);if(t.scrollable&&s.length){e.lockedGroupFooterTemplate=e._footerTmpl(s,a,"groupFooterTemplate","k-group-footer")}}if(n&&(u.length||c.length)){a=E.map(n,function(e){return e.aggregates});e.groupHeaderColumnTemplate=e._groupHeaderTmpl(A(d),a,"groupHeaderColumnTemplate","k-grouping-row",s.length,c);if(t.scrollable&&s.length){e.lockedGroupHeaderColumnTemplate=e._groupHeaderTmpl(A(s),a,"groupHeaderColumnTemplate","k-grouping-row",0,u)}}else{e.groupHeaderColumnTemplate=null;e.lockedGroupHeaderColumnTemplate=null}if(e.options.noRecords){e.noRecordsTemplate=e._noRecordsTmpl()}},_noRecordsTmpl:function(){var e='<div class="{0}">{1}</div>';var t='<div class="k-grid-norecords-template"{1}>{0}</div>';var i=this.options.scrollable&&!this.wrapper[0].style.height?' style="margin:0 auto;position:static;"':"";var n={storage:{},count:0};var r=E.extend({},I.Template,this.options.templateSettings);var a=r.paramName;var o;var s="";var l;var d;if(this.options.noRecords.template){o=this.options.noRecords.template}else{o=I.format(t,this.options.messages.noRecords,i)}l=typeof o;if(l==="function"){n.storage["tmpl"+n.count]=o;s+="#=this.tmpl"+n.count+"("+a+")#";n.count++}else if(l==="string"){s+=o}d=I.template(I.format(e,Ie,s),r);if(n.count>0){d=E.proxy(d,n.storage)}return d},_footerTmpl:function(e,t,i,n,r){var a=this,o=T({},I.Template,a.options.templateSettings),s=o.paramName,l="",d,u,c,f,h={},p=0,v={},m=a._groups(),g=a.dataSource._emptyAggregates(t),_;l+='<tr class="'+n+'">';if(m>0&&!r){l+=Mt(m)}if(a._hasDetails()){l+='<td class="k-hierarchy-cell">&nbsp;</td>'}for(d=0,u=e.length;d<u;d++){_=e[d];c=_[i];f=typeof c;l+="<td"+Rt(_.footerAttributes)+">";if(c){if(f!==Qe){v=g[_.field]?T({},o,{paramName:s+"['"+_.field+"']"}):{};c=I.template(c,v)}h["tmpl"+p]=c;l+="#=this.tmpl"+p+"("+s+")#";p++}else{l+="&nbsp;"}l+="</td>"}l+="</tr>";l=I.template(l,o);if(p>0){return x(l,h)}return l},_groupHeaderTmpl:function(e,t,i,n,r,a){var o=this,s=T({},I.Template,o.options.templateSettings),l=s.paramName,d="",u,c,f,h,p={},v=0,m={},g=o.dataSource._emptyAggregates(t),_,b=a.length?P(a[0],e):-1,w;d+='<tr role="row" class="'+n+'">';if(!r){d+="# for (var i = 0; i < data.groupCells; i++) { #"+'<td class="k-group-cell">'+"&nbsp;"+"</td>"+"# } #"}if(o._hasDetails()){d+='<td class="k-hierarchy-cell">&nbsp;</td>'}if(b<0){d+=!r?Ji(e.length):"";return}if(b<rt&&a.length<=1&&!r){d+=!r?Ji(e.length):"";return I.template(d,s)}if(b<rt){b=!r?1:0;d+=!r?Ji(b):""}else{d+=!r?Ji(b):en(b)}for(u=b,c=e.length;u<c;u++){_=e[u];f=_[i];h=typeof f;if(_.sticky){w=_.groupHeaderColumnTemplateClass||"";if(!w){w=_.groupHeaderColumnTemplateClass="group-header-column-template-"+I.guid()}d+="<td class='"+Be+" "+w+"' style='"+(_.stickyStyle||"")+"'>"}else{d+="<td>"}if(f){if(h!==Qe){m=g[_.field]?T({},s,{paramName:l+"['"+_.field+"']"}):{};f=I.template(f,m)}p["tmpl"+v]=f;d+="#=this.tmpl"+v+"("+l+")#";v++}else{d+="&nbsp;"}d+="</td>"}d+="</tr>";d=I.template(d,s);if(v>0){return x(d,p)}return d},_detailTmpl:function(e){var t=this,i="",n=T({},I.Template,t.options.templateSettings),r=n.paramName,a={},o=0,s=t._groups(),l=A(V(t.columns)).length,d=typeof e;i+='<tr class="k-detail-row">';if(s>0){i+=Mt(s)}i+='<td class="k-hierarchy-cell"></td><td class="k-detail-cell"'+(l?' colspan="'+l+'"':"")+">";if(d===Qe){a["tmpl"+o]=e;i+="#=this.tmpl"+o+"("+r+")#";o++}else{i+=e}i+="</td></tr>";i=I.template(i,n);if(o>0){return x(i,a)}return i},_hasDetails:function(){var e=this;return e.options.detailTemplate!==null||(e._events[ce]||[]).length},_hasFilterRow:function(){var e=this.options.filterable;var t=e&&typeof e.mode==D&&e.mode.indexOf("row")!=-1;var i=this.columns;var n=E.grep(i,function(e){return e.filterable===false});if(i.length&&n.length==i.length){t=false}return t},_details:function(){var i=this;if(i.options.scrollable&&i._hasDetails()&&H(i.columns).length){throw new Error("Having both detail template and locked columns is not supported")}i.table.on(u+_,".k-hierarchy-cell .k-i-expand, .k-hierarchy-cell .k-i-collapse",function(e){var t=E(this);i._toggleDetails(t);e.preventDefault();return false})},_toggleDetails:function(e,t){var i=this,n=e.closest("td.k-hierarchy-cell"),r=e.hasClass("k-i-expand"),a=e.closest("tr.k-master-row"),o,s=i.detailTemplate,l,d=i._hasDetails(),u=r?pt:vt,c=r?true:false;e.toggleClass("k-i-expand",!r).toggleClass("k-i-collapse",r).attr(mt,u);n.attr("aria-expanded",c);o=a.next();if(d&&!o.hasClass("k-detail-row")){l=i.dataItem(a);o=E(s(l)).addClass(a.hasClass("k-alt")?"k-alt":"").insertAfter(a);i.angular("compile",function(){return{elements:o.get(),data:[{dataItem:l}]}});i.trigger(ce,{masterRow:a,detailRow:o,data:l,detailCell:o.find(".k-detail-cell")})}i.trigger(r?we:ke,{masterRow:a,detailRow:o});if(t){rn(o,r)}else{o.toggle(r)}},dataItem:function(e){e=E(e)[0];if(!e){return null}var t=this.tbody.children(),i=/k-grouping-row|k-detail-row|k-group-footer/,n=e.sectionRowIndex,r,a;a=n;for(r=0;r<n;r++){if(i.test(t[r].className)){a--}}return this._data[a]},expandRow:function(e,t){var i=E(e).find("> td .k-i-expand");if(i.length){this._toggleDetails(i,t)}},collapseRow:function(e,t){var i=E(e).find("> td .k-i-collapse");if(i.length){this._toggleDetails(i,t)}},_createHeaderCells:function(e,t){var i=this,n,r,a,o="",s,l,d=i.options.messages,u=V(i.columns),c=i.dataSource.group(),f;for(n=0,s=e.length;n<s;n++){r=e[n].column||e[n];a=i._headerCellText(r);f="";var h=P(r,u);if(r.selectable){o+="<th scope='col'"+Rt(r.headerAttributes);if(t&&!e[n].colSpan){o+=" rowspan='"+t+"'"}if(h>-1){o+=I.attr("index")+"='"+h+"'"}a=r.headerTemplate?a:I.template(Ct)({});o+=">"+a+"</th>"}else if(r.command){o+="<th scope='col'"+Rt(r.headerAttributes);if(t&&!e[n].colSpan){o+=" rowspan='"+t+"'"}if(h>-1){o+=I.attr("index")+"='"+h+"'"}o+=">"+a+"</th>"}else{if(r.field){f=I.attr("field")+"='"+r.field+"' "}o+="<th scope='col' role='columnheader' "+f;o+=" aria-haspopup='true'";if(t&&!e[n].colSpan){o+=" rowspan='"+t+"'"}if(e[n].colSpan>1){o+='colspan="'+(e[n].colSpan-oi(r.columns))+'" ';o+=I.attr("colspan")+"='"+e[n].colSpan+"'"}else if(e[n].colSpan===1){o+=I.attr("colspan")+"='"+e[n].colSpan+"'"}if(r.title){l=r.title&&(i.options.encodeTitles?an(r.title,true):r.title);o+=I.attr("title")+'="'+l+'" '}if(r.groupable!==S){o+=I.attr("groupable")+"='"+r.groupable+"' "}if(ji(i,r)){o+="aria-label='"+(l||r.field)+" ";o+=Gi(c,r.field)?d.ungroupHeader:d.groupHeader;o+="' "}if(r.aggregates&&r.aggregates.length){o+=I.attr("aggregates")+"='"+r.aggregates+"'"}if(h>-1){o+=I.attr("index")+"='"+h+"'"}o+=Rt(r.headerAttributes);o+=">"+a+"</th>"}}return o},_appendLockedColumnContent:function(){var e=this.columns,t,i=this.table.find("colgroup"),n=i.find("col:not(.k-group-col,.k-hierarchy-col)"),r,a=E(),o=0,s,l,d,u=0;for(t=0,r=e.length;t<r;t++){if(e[t].locked){if(B(e[t])){l=1;if(e[t].columns){l=V(e[t].columns).length-oi(e[t].columns)}l=l||1;for(d=0;d<l;d++){a=a.add(n.eq(t+u+d-o))}u+=l-1}else{o++}}}s=E('<div class="k-grid-content-locked"><table><colgroup></colgroup><tbody></tbody></table></div>');i.detach();s.find("colgroup").append(a);i.insertBefore(this.table.find("tbody"));this.lockedContent=s.insertBefore(this.content);this.lockedTable=s.children("table")},_appendLockedColumnFooter:function(){var e=this;var t=e.footer;var i=t.find(".k-footer-template>td");var n=t.find(".k-grid-footer-wrap>table>colgroup>col");var r=E('<div class="k-grid-footer-locked"><table><colgroup></colgroup><tbody><tr class="k-footer-template"></tr></tbody></table></div>');var a,o;var s=e._groups();var l=E(),d=E();l=l.add(i.filter(".k-group-cell"));for(a=0,o=V(H(e.columns)).length;a<o;a++){l=l.add(i.eq(a+s))}d=d.add(n.filter(".k-group-col"));for(a=0,o=A(V(bi(e.columns))).length;a<o;a++){d=d.add(n.eq(a+s))}l.appendTo(r.find("tr"));d.appendTo(r.find("colgroup"));e.lockedFooter=r.prependTo(t)},_appendLockedColumnHeader:function(e){var t=this,i=this.columns,n,r,a,o,s,l,d,u,c,f=[],h=0,p=E(),v=t._hasFilterRow(),m=0,g=E(),_,b=0,w=E();o=t.thead.prev().find("col:not(.k-group-col,.k-hierarchy-col)");u=t.thead.find("tr:first .k-header:not(.k-group-cell,.k-hierarchy-cell)");c=t.thead.find(".k-filter-row").find("th:not(.k-group-cell,.k-hierarchy-cell)");var k=0;for(n=0,a=i.length;n<a;n++){if(i[n].locked){_=u.eq(n);b=V(i[n].columns||[]).length;if(B(i[n])){var y=null;if(i[n].columns){y=b-oi(i[n].columns)}y=y||1;for(var x=0;x<y;x++){p=p.add(o.eq(n+k+x-h))}k+=y-1}fi([i[n]],Ci(_),f,0,0);b=b||1;for(var C=0;C<b;C++){g=g.add(c.eq(m+C))}m+=b}if(i[n].columns){h+=oi(i[n].columns)}if(!B(i[n])){h++}}if(f.length){r='<div class="k-grid-header-locked" style="width:1px"><table><colgroup></colgroup><thead>';r+=new Array(f.length+1).join("<tr></tr>");r+=(v?'<tr class="k-filter-row"></tr>':"")+"</thead></table></div>";d=E(r);o=d.find("colgroup");o.append(t.thead.prev().find("col.k-group-col").add(p));s=d.find("thead tr:not(.k-filter-row)");for(n=0,a=f.length;n<a;n++){w=Kt(f[n]);s.eq(n).append(t.thead.find("tr:eq("+n+") .k-group-cell").add(w))}var S=ci(this.thead);if(f.length<S){di(d,S-f.length)}l=d.find(".k-filter-row");l.append(t.thead.find(".k-filter-row .k-group-cell").add(g));this.lockedHeader=d.prependTo(e);this.thead.find(".k-group-cell").remove();return true}return false},_removeLockedContainers:function(){var e=this.lockedHeader.add(this.lockedContent).add(this.lockedFooter);I.destroy(e);e.off(_).remove();this.lockedHeader=this.lockedContent=this.lockedFooter=null;this.selectable=null},_thead:function(){var t=this,e=t.columns,i=t._hasDetails()&&e.length,n=t._hasFilterRow(),r,a="",o=t.table.find(">thead"),s=t.element.find("thead:first").length>0,l=t.options.messages.expandCollapseColumnHeader,d;if(!o.length){o=E("<thead/>").insertBefore(t.tbody)}if(t.lockedHeader&&t.thead){d=t.thead.find("tr:has(th):not(.k-filter-row)").html("");d.remove();d=E();t._removeLockedContainers()}else if(s){d=t.element.find("thead:first tr:has(th):not(.k-filter-row)")}else{d=t.element.find("tr:has(th):first")}if(!d.length){d=o.children().first();if(!d.length){var u=[{rowSpan:1,cells:[],index:0}];t._prepareColumns(u,e);for(r=0;r<u.length;r++){a+="<tr>";if(i){a+='<th class="k-hierarchy-cell" scope="col">'+l+"</th>"}a+=t._createHeaderCells(u[r].cells,u[r].rowSpan);a+="</tr>"}d=E(a)}}else{for(r=0;r<e.length;r++){var c=P(e[r],V(e));var f=W(d.parent()).filter("th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(c);if(e[r].hidden&&c>=0){f[0].style.display="none"}}t._updateHeadersAttr(wi(e))}if(n){var h=E("<tr/>");h.addClass("k-filter-row");if(i||d.find(".k-hierarchy-cell").length){h.prepend('<th class="k-hierarchy-cell" scope="col">&nbsp;</th>')}var p=(t.thead||o).find(".k-filter-row");if(p.length){I.destroy(p);p.remove()}o.append(h)}if(!d.children().length){a="";if(i){a+='<th class="k-hierarchy-cell" scope="col">&nbsp;</th>'}a+=t._createHeaderCells(e);d.html(a)}else if(i&&!d.find(".k-hierarchy-cell")[0]){d.prepend('<th class="k-hierarchy-cell" scope="col">'+(l?l:"&nbsp;")+"</th>")}d.attr("role","row").find("th").addClass("k-header");if(!t.options.scrollable){o.addClass("k-grid-header")}d.find("script").remove().end().prependTo(o);if(t.thead){t._destroyColumnAttachments()}this.angular("cleanup",function(){return{elements:o.find("th"+C).get()}});this.angular("compile",function(){return{elements:o.find(re).get(),data:G(e,function(e){return{column:e}})}});t.thead=o.attr("role","rowgroup");t._sortable();t._filterable();t._filterRow();t._scrollable();t._columnMenu();var v;var m=this.options.scrollable&&H(this.columns).length;if(m){v=t._appendLockedColumnHeader(t.thead.closest(".k-grid-header"));t._appendLockedColumnContent();t.lockedContent.bind("DOMMouseScroll"+_+" mousewheel"+_,x(t._wheelScroll,t));if(I.support.touch){t._lockedContentUserEvents=new I.UserEvents(t.lockedContent,{move:function(e){t.content.scrollTop(t.content.scrollTop()+-e.y.delta);e.preventDefault()}})}t._updateLockedCols()}t._updateCols();t._updateColumnCellIndex();t._updateFirstColumnClass();t._resizable();t._draggable();t._reorderable();t._updateHeader(t._groups());t._updateStickyColumns();if(m){if(v){t._syncLockedHeaderHeight()}t._applyLockedContainersWidth()}if(t.groupable){t._attachGroupable()}},_retrieveFirstColumn:function(e,t){var i=E();if(t.length&&e[0]){var n=e[0];while(n.columns&&n.columns.length){n=n.columns[0];t=t.filter(":not(:first())")}i=i.add(t)}return i},_updateFirstColumnClass:function(){var e=this,t=e.columns||[],i=e._hasDetails()&&t.length;if(!i&&!e._groups()){var n=e.thead.find(">tr:not(.k-filter-row):not(:first)");t=N(t);var r=e._retrieveFirstColumn(t,n);if(e._isLocked()){n=e.lockedHeader.find("thead>tr:not(.k-filter-row):not(:first)");t=H(e.columns);r=r.add(e._retrieveFirstColumn(t,n))}r.each(function(){var e=E(this).find("th");e.removeClass("k-first");e.eq(0).addClass("k-first")})}},_prepareColumns:function(e,t,i,n){var r=n||e[e.length-1];var a=e[r.index+1];var o=0;for(var s=0;s<t.length;s++){var l={column:t[s],colSpan:0};r.cells.push(l);if(t[s].columns&&t[s].columns.length){if(!a){a={rowSpan:0,cells:[],index:e.length};e.push(a)}l.colSpan=t[s].columns.length;this._prepareColumns(e,t[s].columns,l,a);o+=l.colSpan-1;r.rowSpan=e.length-r.index}}if(i){i.colSpan+=o}},_wheelScroll:function(e){if(e.ctrlKey){return}var t=this.content;if(this.virtualScroll&&this.virtualScroll.rows){t=this.virtualScrollable.verticalScrollbar}var i=t.scrollTop(),n=I.wheelDeltaY(e);if(n){if(t[0].scrollHeight>t[0].clientHeight&&(t[0].scrollTop<t[0].scrollHeight-t[0].clientHeight&&n<0||t[0].scrollTop>0&&n>0)){e.preventDefault()}t.scrollTop(i+-n)}},_isLocked:function(){return this.lockedHeader!=null},_updateHeaderCols:function(){var e=this.thead.parent().add(this.table);if(this._isLocked()){Ei(e,O(_i(this.columns)),this._hasDetails(),0)}else{Ei(e,O(A(this.columns)),this._hasDetails(),0)}},_updateColumnSorters:function(){var e=this;var t=W(e.thead);var i=V(e.columns);var n;var r;var a;if(!e.options.sortable){return}for(var o=0,s=t.length;o<s;o++){n=i[o];if(n.sortable!==false&&!n.command&&n.field){r=t.eq(o);a=r.data("kendoColumnSorter");if(a){a.refresh()}}}},_updateHeadersAttr:function(e){if(!e.length){return}var t=this;for(var i=0;i<e.length;i++){if(e[i].headerAttributes){var n=t.element.find("[id='"+e[i].headerAttributes.id+"']");n.attr("headers",e[i].headerAttributes.headers)}}t._updateHeadersAttr(wi(e))},_updateCols:function(e){e=e||this.thead.parent().add(this.table);this._appendCols(e,this._isLocked())},_updateLockedCols:function(e){if(this._isLocked()){e=e||this.lockedHeader.find("table").add(this.lockedTable);Ei(e,O(bi(this.columns)),this._hasDetails(),this._groups())}},_appendCols:function(e,t){if(t){Ei(e,O(_i(this.columns)),this._hasDetails(),0)}else{Ei(e,O(A(this.columns)),this._hasDetails(),this._groups())}},_autoColumns:function(e){if(e&&e.toJSON){var t=this,i,n;e=e.toJSON();n=!(t.table.find("tbody tr").length>0&&(!t.dataSource||!t.dataSource.transport));for(i in e){t.columns.push({field:i,encoded:n,headerAttributes:{id:I.guid()}})}t._thead();t._templates()}},_rowsHtml:function(e,t){var i=this,n="",r,a=t.rowTemplate,o=t.altRowTemplate,s;for(r=0,s=e.length;r<s;r++){if(i._skipRerenderItemsCount>0){i._skipRerenderItemsCount--}else{if(r%2){n+=o(e[r])}else{n+=a(e[r])}}i._data.push(e[r])}return n},_groupData:function(e,t,i){var n=this,r=n._groupAggregatesDefaultObject||{},a=e.items,o=T({},r,e.aggregates),s=T({},{field:e.field,value:e.value,items:a,aggregates:o},e.aggregates[i?i.field:e.field]),l={};if(!t){for(var d in o){l[d]=T({},o[d],{group:{field:e.field,value:e.value,items:a}})}}return T({},l,s)},_removeGroupIfEmpty:function(e){var t=this,i,n,r=t.dataSource._group.length;for(var a=0;a<r;a++){e=e.prev();i=+e.attr("data-group-item-count");n=+e.attr("data-sub-group-count");if(i==1||n==1){e.hide()}}},_groupRowHtml:function(e,t,i,n,r,a,o){var s=this,l="",d,u,c=e.field,f=F(V(s.columns),function(e){return e.field==c})[0]||{},h=A(s.columns)[0],p=h?h.groupHeaderColumnTemplate:null,v=f.groupHeaderTemplate?f.groupHeaderTemplate:p,m=(f.title&&(s.options.encodeTitles?an(f.title,true):f.title)||c)+": "+Ri(e.value,f.format,f.values,f.encoded),g=e.currentItems||e.items,_=s._groups(),b=r.groupFooterTemplate,w=r.groupHeaderColumnTemplate,k,y=s.dataSource._isGroupPaged()?s.dataSource._groupsState[e.uid]:true;if(s.options.editable&&e.items&&e.items[0]&&e.items[0].isNew&&e.items[0].isNew()){y=true}if(r.groupFooterTemplate||r.groupHeaderColumnTemplate||f.groupHeaderTemplate){k=s._groupData(e,false,!f.groupHeaderTemplate&&A(s.columns)[0].groupHeaderColumnTemplate?A(s.columns)[0]:false)}if(v&&!a){m=typeof v===Qe?v(k):I.template(v)(k)}if(!s._skipRerenderItemsCount){if(w){if(!e.excludeHeader){l+=w(T({},k,{groupCells:i,colspan:_-i,text:m}))}else{e.excludeHeader=false}}else{if(!e.excludeHeader){l+=n(t,i,m,y,e.uid,s.dataSource._isGroupPaged())}else{e.excludeHeader=false}}}else{n(t,i,m,y,e.uid,s.dataSource._isGroupPaged())}if(y){if(e.hasSubgroups){for(d=0,u=g.length;d<u;d++){l+=s._groupRowHtml(g[d],a?t:t-1,i+1,n,r,a,o&&d===g.length-1)}}else{l+=s._rowsHtml(g,r)}}if(b){if(o){if(!P(e.value,s._skippedGroups)){s._skippedGroups.push(e.value)}}else{if(s._skippedGroups.length&&s._skippedGroups[0]===e.value){s._skippedGroups.shift()}if(!s._skipRerenderItemsCount){l+=b(k)}}}return l},collapseGroup:function(e){var t,i=this,n=e,r=this.options.groupable,a=r.showFooter,o=a?0:1,s,l=E(),d,u,c;e=E(e);t=e.find(".k-group-cell").length;if(this.dataSource._isGroupPaged()){var f=e.attr("data-group-uid");var h=i.dataSource._getGroupByUid(f);var p=i.dataSource._calculateGroupsTotal([h],true);var v;i.dataSource._groupsState[f]=false;v=i.dataSource._calculateGroupsTotal([h],true);i.dataSource._serverGroupsTotal-=p-v;i._progress(true);i.dataSource.range(i.dataSource._currentRangeStart,i.dataSource.take(),function(){i._progress(false)},"collapseGroup");return}if(this._isLocked()){if(!e.closest("div").hasClass("k-grid-content-locked")){l=e.nextAll("tr");e=this.lockedTable.find(">tbody>tr:eq("+e.index()+")")}else{l=this.tbody.children("tr:eq("+e.index()+")").nextAll("tr")}}e.find(".k-i-collapse").addClass("k-i-expand").removeClass("k-i-collapse");e.find("td[aria-expanded='true']:first").attr("aria-expanded",false).find("a").attr(mt,vt);e=e.nextAll("tr");var m=[];for(d=0,u=e.length;d<u;d++){c=e.eq(d);s=c.find(".k-group-cell").length;if(c.hasClass("k-grouping-row")){o++}else if(c.hasClass("k-group-footer")){o--}if(s<=t||c.hasClass("k-group-footer")&&o<0){break}if(l.length){m.push(l[d])}m.push(c[0])}E(m).hide();if(this.options.scrollable.endless&&this.content){clearTimeout(i._collapseGroupsTimeOut);i._collapseGroupsTimeOut=setTimeout(function(){i.content.scroll();i._groupToCollapse=n})}},expandGroup:function(e){e=E(e);var t=this,i=t.options.groupable.showFooter,n,r,a,o=E(),s,l,d=[],u=1;n=e.find(".k-group-cell").length;if(this.dataSource._isGroupPaged()){var c=e.attr("data-group-uid");var f=t.dataSource._getGroupByUid(c);var h=t.dataSource._calculateGroupsTotal([f],true);var p;t.dataSource._groupsState[c]=true;if(f.items&&f.items.length){p=t.dataSource._calculateGroupsTotal([f],true);t.dataSource._serverGroupsTotal+=p-h}t._progress(true);t.dataSource.range(t.dataSource._currentRangeStart,t.dataSource.take(),function(){t._progress(false)},"expandGroup");return}if(this._isLocked()){if(!e.closest("div").hasClass("k-grid-content-locked")){o=e.nextAll("tr");e=this.lockedTable.find(">tbody>tr:eq("+e.index()+")")}else{o=this.tbody.children("tr:eq("+e.index()+")").nextAll("tr")}}e.find(".k-i-expand").addClass("k-i-collapse").removeClass("k-i-expand");e.find("td[aria-expanded='false']:first").attr("aria-expanded",true).find("a").attr(mt,pt);e=e.nextAll("tr");for(s=0,l=e.length;s<l;s++){r=e.eq(s);a=r.find(".k-group-cell").length;if(a<=n){break}if(a==n+1&&!r.hasClass("k-detail-row")){r.show();o.eq(s).show();if(r.hasClass("k-grouping-row")&&r.find(".k-icon").hasClass("k-i-collapse")){t.expandGroup(r)}if(r.hasClass("k-master-row")&&r.find(".k-icon").hasClass("k-i-collapse")){r.next().show();o.eq(s+1).show()}}if(r.hasClass("k-grouping-row")){if(i){d.push(r.is(":visible"))}u++}if(r.hasClass("k-group-footer")){if(i){var v=d.pop();r.toggle(v);o.eq(s).toggle(v)}if(u==1){r.show();o.eq(s).show()}else{u--}}}if(n===0&&t.options.scrollable.endless&&this._isLocked()){t._syncLockedContentHeight()}},_updateHeader:function(e){var t=this,i=t._isLocked()?t.lockedHeader.find("thead"):t.thead,n=i.find("tr.k-filter-row").find("th.k-group-cell").length,r=i.find("tr:first").find("th.k-group-cell").length,a=i.children("tr:not(:first)").filter(function(){return!E(this).children(":visible").length});if(e>r){E(new Array(e-r+1).join('<th class="k-group-cell k-header" scope="col">'+t.options.messages.expandCollapseColumnHeader+"</th>")).prependTo(i.children("tr:not(.k-filter-row)"));if(t.element.is(":visible")){a.find("th.k-group-cell").hide()}}else if(e<r){i.find("tr").each(function(){E(this).find("th.k-group-cell").filter(":eq("+e+"),"+":gt("+e+")").remove()})}if(e>n){E(new Array(e-n+1).join('<th class="k-group-cell k-header" scope="col">&nbsp;</th>')).prependTo(i.find(".k-filter-row"))}},_firstDataItem:function(e,t){if(e&&t){if(e.hasSubgroups){e=this._firstDataItem(e.items[0],t)}else{e=e.items[0]}}return e},_updateTablesWidth:function(){var e=this,t;if(!e._isLocked()){return}t=E(">.k-grid-footer>.k-grid-footer-wrap>table",e.wrapper).add(e.thead.parent()).add(e.table);e._footerWidth=Ni(t.eq(0));t.width(e._footerWidth);t=E(">.k-grid-footer>.k-grid-footer-locked>table",e.wrapper).add(e.lockedHeader.find(">table")).add(e.lockedTable);t.width(Ni(t.eq(0)))},hideColumn:function(t){var e=this,i,n,r,a,o,s,l=0,d,u,c=e.footer||e.wrapper.find(".k-grid-footer"),f=e.virtualScroll||{},h=e.columns,p=e.lockedHeader?W(e.lockedHeader.find(">table>thead")).filter(jt).length:0,v,m=F(V(e.columns),function(e){return e.groupHeaderColumnTemplate});if(typeof t=="number"){t=h[t]}else if(R(t)){t=F(L(h),function(e){return e===t})[0]}else{t=F(L(h),function(e){return e.field===t})[0]}if(!t||!B(t)){return}var g=e._columnVisibilitySetter(t);if(t.columns&&t.columns.length){s=ni(t,h);g(t,false);Fi(y(E(">table>thead",e.lockedHeader),e.thead,">tr:eq("+s.row+")>th"),s.cell,false);for(r=0;r<t.columns.length;r++){this.hideColumn(t.columns[r])}e.trigger(ge,{column:t});return}v=P(t,A(V(h)));g(t,false);e._setParentsVisibility(t,false);e._templates();e._updateCols();e._updateLockedCols();var _=e.thead;d=v;if(e.lockedHeader&&p>v){_=e.lockedHeader.find(">table>thead")}else{d-=p}i=W(_).filter(jt).eq(d);i[0].style.display="none";Fi(y(E(">table>thead",e.lockedHeader),e.thead,">tr.k-filter-row>th"),v,false);if(c[0]){e._updateCols(c.find(">.k-grid-footer-wrap>table"));e._updateLockedCols(c.find(">.k-grid-footer-locked>table"));Fi(c.find(".k-footer-template>td"),v,false)}if(f.columns&&!t.locked){e._updateContentWidth();e.trigger(ge,{column:t});return}if(e.lockedTable&&p>v){Pi(e.lockedTable.find(">tbody>tr"),v)}else{Pi(e.tbody.children(),v-p)}if(e.lockedTable){e._updateTablesWidth();e._applyLockedContainersWidth();e._syncLockedContentHeight();e._syncLockedHeaderHeight();e._syncLockedFooterHeight()}else{a=e.thead.prev().find("col");for(r=0,u=a.length;r<u;r+=1){o=a[r].style.width;if(a[r].className.indexOf("k-hierarchy-col")>-1){l+=M(a[r]);continue}if(a[r].className.indexOf("k-group-col")>-1){l+=M(a[r]);continue}if(o&&o.indexOf("%")==-1){l+=parseInt(o,10)}else{l=0;break}}n=E(">.k-grid-header table:first,>.k-grid-footer table:first",e.wrapper).add(e.table);e._footerWidth=null;if(l){n.each(function(){this.style.width=l+"px"});e._footerWidth=l;e._setContentWidth()}}e._updateFirstColumnClass();e._updateStickyColumns();if(m.length>0){e._renderGroupRows()}e.trigger(ge,{column:t})},_setParentsVisibility:function(e,t){var i=this;var n=i.columns;var r;var a=[];var o;var s;var l;var d;var u=i._columnVisibilitySetter(e);var c=t?function(e){return A(e.columns).length&&e.hidden}:function(e){return!A(e.columns).length&&!e.hidden};if(Ht(e,n,a)&&a.length){for(r=a.length-1;r>=0;r--){o=a[r];s=ei(o,n);l=y(E(">table>thead",this.lockedHeader),this.thead,">tr:eq("+s.row+")>th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(s.cell);if(c(o)){u(o,t);l[0].style.display=t?"":"none"}if(l.filter("["+I.attr("colspan")+"]").length){d=parseInt(l.attr(I.attr("colspan")),10);l[0].colSpan=d-oi(o.columns)||1}}}},_updateContentWidth:function(){var e=this;var t=e.table.add(e.thead.parent());t.css({width:si(O(_i(e.columns)))});e.refresh()},showColumn:function(i){var e=this,t,n,r,a,o,s,l,d,u,c=e.columns,f=e.virtualScroll||{},h=e.footer||e.wrapper.find(".k-grid-footer"),p=e.lockedHeader?W(e.lockedHeader.find(">table>thead")).length:0,v,m,g,_=F(V(e.columns),function(e){return e.groupHeaderColumnTemplate});if(typeof i=="number"){v=i;i=c[i]}else if(R(i)){E.each(L(c),function(e,t){if(t===i){i=t;v=e;return false}})}else{E.each(L(c),function(e,t){if(t.field===i){i=t;v=e;return false}})}if(!i||B(i)){return}var b=e._columnVisibilitySetter(i);if(i.columns&&i.columns.length){l=ei(i,c);m=L(e.options.columns)[v];b(i,true);Fi(y(E(">table>thead",e.lockedHeader),e.thead,">tr:eq("+l.row+")>th"),l.cell,true);for(t=0;t<i.columns.length;t++){if(!m.columns[t].hidden){this.showColumn(i.columns[t])}}e.trigger(_e,{column:i});return}g=P(i,V(c));b(i,true);e._setParentsVisibility(i,true);e._templates();e._updateCols();e._updateLockedCols();var w=e.thead;s=g;if(e.lockedHeader&&p>g){w=e.lockedHeader.find(">table>thead")}else{s-=p}r=W(w).eq(s);r[0].style.display="";Fi(y(E(">table>thead",e.lockedHeader),e.thead,">tr.k-filter-row>th"),g,true);if(h[0]){e._updateCols(h.find(">.k-grid-footer-wrap>table"));e._updateLockedCols(h.find(">.k-grid-footer-locked>table"));Fi(h.find(".k-footer-template>td"),g,true)}if(f.columns&&!i.locked){e._updateContentWidth();e.trigger(_e,{column:i});return}if(e.lockedTable&&p>g){Li(e.lockedTable.find(">tbody>tr"),g)}else{Li(e.tbody.children(),g-p)}if(e.lockedTable){e._updateTablesWidth();e._applyLockedContainersWidth();e._syncLockedContentHeight();e._syncLockedHeaderHeight()}else{a=E(">.k-grid-header table:first,>.k-grid-footer table:first",e.wrapper).add(e.table);if(!i.width){a.width("")}else{o=0;u=e.thead.prev().find("col");for(t=0,n=u.length;t<n;t+=1){d=u[t].style.width;if(u[t].className.indexOf("k-hierarchy-col")>-1){o+=M(u[t]);continue}if(u[t].className.indexOf("k-group-col")>-1){o+=M(u[t]);continue}if(d.indexOf("%")>-1){o=0;break}o+=parseInt(d,10)}e._footerWidth=null;if(o){a.each(function(){this.style.width=o+"px"});e._footerWidth=o;e._setContentWidth()}}}e._updateFirstColumnClass();e._updateStickyColumns();if(_.length>0){e._renderGroupRows()}e.trigger(_e,{column:i})},_columnVisibilitySetter:function(e){var t=e||{};if($t(t.media)){return Nt}else{return Vt}},_progress:function(e){var t=this.element;var i=this.options.scrollable&&this.options.scrollable.endless;if(this._editContainer&&this._editMode()==="popup"){t=this._editContainer}else if(this.lockedContent||i){t=this.wrapper}else if(this.element.is("table")){t=this.element.parent()}else if(this.content&&this.content.length){t=this.content}if(i&&e){I.ui.progress(t,e,{height:this.content.height(),top:this.content[0].offsetTop,opacity:true})}else{I.ui.progress(t,e)}},_resize:function(e,t){this._syncLockedContentHeight();this._syncLockedHeaderHeight();if(this.content){this._setContentWidth();this._setContentHeight()}if(this.lockedTable){this._syncLockedScroll()}if(this.virtualScrollable&&(t||this._rowHeight)){if(t){this._rowHeight=null}this.virtualScrollable.repaintScrollbar()}if(this.pager&&this.pager.element){this.pager.resize(t)}if(this._anyStickyColumns()){this._updateStickyColumns(false)}},_isActiveInTable:function(){var e=c();if(!e){return false}return this.table[0]===e||E.contains(this.table[0],e)||this._isLocked()&&(this.lockedTable[0]===e||E.contains(this.lockedTable[0],e))},refresh:function(e){var t=this,i=t.dataSource.view(),n=t.options.navigatable,r=t.virtualScroll||{},a,o=E(t.current()),s=false,l=(t.dataSource.group()||[]).length,d=l+O(A(t.columns)).length,u,c;if(e&&e.action==="itemchange"&&(t.editable||t.options.scrollable.endless)){if(this._editMode()!="popup"||this._editMode()==="popup"&&!t._editableIsClosing){return}}if(r.columns){t._templates()}if(e&&e.action==="remove"&&t.editable&&t.editable.options.model&&P(t.editable.options.model,e.items)>-1){t.editable.options.model.unbind(f,t._modelChangeHandler)}e=e||{};if(t.trigger("dataBinding",{action:e.action||"rebind",index:e.index,items:e.items})){return}if(e.action===Te&&t._isVirtualEditable()){t._destroyEditable();t._clearEditableState()}t._angularItems("cleanup");if(!t._endlessFetchInProgress){if(n&&(t._isActiveInTable()||t._editContainer&&t._editContainer.data("kendoWindow"))){s=o.is("th");a=s?o.parent().children(":not(.k-group-cell)").index(o[0]):Math.max(t.cellIndex(o),0)}t._destroyEditable()}if(t.options.scrollable&&t.options.scrollable.endless){clearTimeout(t._progressTimeOut);t._progressTimeOut=setTimeout(function(){if(!t._endlessFetchInProgress){t._progress(false)}},100)}else{t._progress(false)}t._hideResizeHandle();t._data=[];if(!t.columns.length){t._autoColumns(t._firstDataItem(i[0],l));d=l+t.columns.length}t._group=l>0||t._group;if(t._group){t._templates();t._updateCols();t._updateLockedCols();if(!t._virtualColScroll){t._updateHeader(l)}t._group=l>0;t._groupRows=zi(i)}if(t.content){u=I.scrollLeft(t.content)}c=t._skipRerenderItemsCount;t._renderContent(i,d,l);if(t.options.scrollable&&t.options.scrollable.endless&&this.lockedContent){t._skipRerenderItemsCount=c}t._renderLockedContent(i,d,l);if(!t._virtualColScroll){t._footer();t._renderNoRecordsContent();t._togglePagerVisibility();t._setContentHeight();t._setContentWidth(t.content&&u)}if(t.lockedTable){if(r.rows){t.content.find(">.k-virtual-scrollable-wrap").trigger("scroll")}else if(t.touchScroller){t.touchScroller.movable.trigger("change")}else{t.wrapper.one("scroll",function(e){e.stopPropagation()});t.content.trigger("scroll")}}if(!t._endlessFetchInProgress){t._restoreCurrent(a,s)}if(t.touchScroller){t.touchScroller.contentResized()}if(t.selectable){t.selectable.resetTouchEvents()}t._muteAngularRebind(function(){t._angularItems("compile")});if(t._checkBoxSelection){t._toggleHeaderCheckState(false)}if(t.options.persistSelection&&(t.selectable&&!I.ui.Selectable.parseOptions(t.options.selectable).cell||t._checkBoxSelection)&&(t.items().length||t.dataSource._isGroupPaged())){t._restoreSelection()}t.trigger(be);t._myAdjustRowsHeight(t);E(window).scroll(function(){t._myAdjustRowsHeight(t)});E(window).resize(function(){t._myAdjustRowsHeight(t)})},_myAdjustRowsHeight:function(e){if(e.lockedTable){if(webfed["getPageData"]("verticalScrollbar")!=true){return}if(webfed["getPageData"]("grid")==""){return}var t=e.lockedTable;var i=e.table;var n=t[0].rows,r=n.length,a,o=i[0].rows,s=[],l=0;for(a=0;a<r;a++){if(!o[a]){break}var d=n[a].offsetHeight;var u=o[a].offsetHeight;if(d>l)l=d;if(u>l)l=u;var c=0;if(d>u&&u!=0){c=d}else if(d<u&&u!=0){c=u}else{c=l}s.push(c)}for(a=0;a<r;a++){if(s[a]){n[a].style.height=o[a].style.height=s[a]+"px"}}}},_restoreCurrent:function(e,t){if(e===S||e<0){return}this._removeCurrent();if(t){this._setCurrent(this.thead.find("th:not(.k-group-cell)").eq(e))}else{var i=0;var n=this.virtualScroll||{};if(this._rowVirtualIndex){if(n.rows){i=this.virtualScrollable.position(this._rowVirtualIndex)}else{i=this._rowVirtualIndex}}else{e=0}var r=E();var a;if(this.lockedTable){r=this.lockedTable.find(">tbody>tr").eq(i)}r=r.add(this.tbody.children().eq(i));if(this._hasVirtualColumns()){a=parseInt(r.find("td:first").attr("colspan"),10);e=this._virtualCellIndex-(a>1?a-1:0)}var o=r.find(">td:not(.k-group-cell):not(.k-hierarchy-cell)").eq(e);if(!o.length||e<0){return}if(this._hasVirtualColumns()){this._setCurrent(o,true,true)}else{this._setCurrent(o)}}if(this._current){U(this._current.closest("table")[0],true)}},_restoreSelection:function(){var i=this,e=i.items(),t,n=d(i.dataSource.options.schema.model)?i.dataSource.options.schema.model.fn.idField:i.dataSource.options.schema.model.id;t=F(e,function(e){var t=i.dataItem(e)[n];if(i._selectedIds[t]){return e}});i.select(t)},_angularItems:function(e){I.ui.DataBoundWidget.fn._angularItems.call(this,e);if(e==="cleanup"&&(!this.dataSource||!this.dataSource.options.endless)){this._cleanupDetailItems()}this._angularGroupItems(e);this._angularGroupFooterItems(e)},_cleanupDetailItems:function(){var e=this;if(e._hasDetails()){e.angular("cleanup",function(){return{elements:e.tbody.children(".k-detail-row")}});e.tbody.find(".k-detail-cell").empty()}},_angularGroupItems:function(e){var t=this,i=t.tbody;if(t.lockedContent){i=t.lockedTable.find("tbody")}if(t._group){t.angular(e,function(){return{elements:i.children(".k-grouping-row"),data:E.map(zi(t.dataSource.view()),function(e){return{dataItem:e}})}})}},_angularGroupFooterItems:function(e){var t=this,i=t.tbody;if(t.lockedContent){i=t.element}if(t._group&&t.groupFooterTemplate){t.angular(e,function(){return{elements:i.find(".k-group-footer"),data:E.map(Bi(t.dataSource.view()),function(e){return{dataItem:e}})}})}},_renderContent:function(e,t,i){var n=this,r,a,o="",s=n.lockedContent!=null,l=null,d,u,c=n.options.scrollable,f={rowTemplate:n.rowTemplate,altRowTemplate:n.altRowTemplate,groupFooterTemplate:n.groupFooterTemplate,groupHeaderColumnTemplate:n.groupHeaderColumnTemplate};if(c&&c.endless&&!n.dataSource.options.endless){n._skipRerenderItemsCount=0;if(n.content){n.content[0].scrollTop=0}}l=n._skipRerenderItemsCount>0;t=s?t-O(bi(n.columns)).length:t;if(i>0){t=s?t-i:t;if(n.detailTemplate){t++}if(n.groupFooterTemplate){n._groupAggregatesDefaultObject=n.dataSource.aggregates()}if(n.options.scrollable.endless){u=n.dataSource.flatView().length}for(r=0,a=e.length;r<a;r++){if(!n._skippedGroups){n._skippedGroups=[]}d=u&&r===e.length-1&&u!==n.dataSource.total();o+=n._groupRowHtml(e[r],t,0,s?nn:tn,f,s,d)}}else{o+=n._rowsHtml(e,f)}if(l){n.tbody.append(o);clearTimeout(n._endlessFetchTimeOut);n._endlessFetchTimeOut=setTimeout(function(){if(n._groupToCollapse){n.collapseGroup(n._groupToCollapse);n._groupToCollapse=null}});n._endlessFetchInProgress=null}else{n.tbody=Si(n.tbody,n.table,o,this.options.$angular)}},_renderGroupRows:function(){var i=this,n=i._groupRows,e=i.wrapper.find(".k-grouping-row"),r=i._groups(),a,o=i.lockedContent!=null,s,l,d,u,c,f,h,p,v,m,g,_,b,w,k,y;e.each(function(e,t){b=E(t);v=b.closest("table").parent();m=v.is("."+ae);s=m?O(A(H(i.columns))):O(A(N(i.columns)));w=b.find("."+oe).length;if(o){a=m?tn:nn;l=m?s.length+r-w:s.length}else{a=tn;l=s.length+r-w}d=e>=n.length?n[e-n.length]:n[e];u=d.field;c=F(V(i.columns),function(e){return e.field==u})[0]||{};y=!c.groupHeaderTemplate&&A(i.columns)[0].groupHeaderColumnTemplate?A(i.columns)[0]:false;f=c.groupHeaderTemplate?c.groupHeaderTemplate:A(i.columns)[0].groupHeaderColumnTemplate;h=(c.title&&(i.options.encodeTitles?an(c.title,true):c.title)||u)+": "+Ri(d.value,c.format,c.values,c.encoded);r=r;p=i._groupData(d,false,y);k=m?i.lockedGroupHeaderColumnTemplate:i.groupHeaderColumnTemplate;if(f){h=typeof f===Qe?f(p):I.template(f)(p)}g=b.prev().length?b.prev():b.parent();_=E(k?k(T({},p,{groupCells:w,colspan:r-w,text:h})):a(l,w,h));if(g.is("tbody")){g.prepend(_)}else{g.after(_)}b.remove()})},_renderLockedContent:function(e,t,i){var n="",r,a,o=null,s={rowTemplate:this.lockedRowTemplate,altRowTemplate:this.lockedAltRowTemplate,groupFooterTemplate:this.lockedGroupFooterTemplate,groupHeaderColumnTemplate:this.lockedGroupHeaderColumnTemplate};if(this.lockedContent){var l=this.lockedTable;o=this._skipRerenderItemsCount>0;if(i>0){t=t-A(V(N(this.columns))).length;for(r=0,a=e.length;r<a;r++){n+=this._groupRowHtml(e[r],t,0,tn,s,false,this.options.scrollable.endless&&r===e.length-1)}}else{n=this._rowsHtml(e,s)}if(o){l.children("tbody").append(n)}else{Si(l.children("tbody"),l,n,this.options.$angular)}this._syncLockedContentHeight()}},_togglePagerVisibility:function(){if(this.options.pageable.alwaysVisible===false){this.wrapper.find(".k-grid-pager").toggle(this.dataSource.total()>=this.dataSource.pageSize())}},_adjustRowsHeight:function(e,t){var i=e[0].rows,n=i.length,r,a=t[0].rows,o=e.add(t),s=o.length,l=[];for(r=0;r<n;r++){if(!a[r]){break}if(i[r].style.height){i[r].style.height=a[r].style.height=""}}for(r=0;r<n;r++){if(!a[r]){break}var d=i[r].offsetHeight;var u=a[r].offsetHeight;var c=0;if(d>u){c=d}else if(d<u){c=u}l.push(c)}for(r=0;r<s;r++){o[r].style.display="none"}for(r=0;r<n;r++){if(l[r]){i[r].style.height=a[r].style.height=l[r]+1+"px"}}for(r=0;r<s;r++){o[r].style.display=""}}});if(I.ExcelMixin){I.ExcelMixin.extend(Oi.prototype)}if(I.PDFMixin){I.PDFMixin.extend(Oi.prototype);Oi.prototype._drawPDF_autoPageBreak=function(t){var i=this;var n=new E.Deferred;var r=i.dataSource;var a=i.options.pdf.allPages;var o=i.wrapper.find('table[role$="grid"] > tbody').first();var s=E("<div>").css({position:"absolute",left:-1e4,top:-1e4});var l;i.toggleUnexportableColumns(i.columns);l=i.wrapper.clone().css({height:"auto",width:"auto"}).appendTo(s);l.find(".k-grid-content").css({height:"auto",width:"auto",overflow:"visible"});l.find('table[role$="grid"], .k-grid-footer table').css({height:"auto",width:"100%",overflow:"visible"});l.find(".k-grid-pager, .k-grid-toolbar, .k-grouping-header").remove();l.find(".k-grid-header, .k-grid-footer, .k-auto-scrollable").css({paddingRight:0});this._initPDFProgress(t);var d=l.find('table[role$="grid"] > tbody').first().empty();var e=r.page();function u(){if(a&&e!==S){r.one("change",c);r.page(e)}else{i.refresh();c()}}function c(){s.appendTo(document.body);var e=E.extend({},i.options.pdf,{_destructive:true,progress:function(e){t.notify({page:e.page,pageNumber:e.pageNum,progress:.5+e.pageNum/e.totalPages/2,totalPages:e.totalPages})}});I.drawing.drawDOM(l,e).always(function(){s.remove()}).then(function(e){n.resolve(e);i.toggleUnexportableColumns(i.columns,true)}).fail(function(e){n.reject(e)})}function f(){var e=r.page();var t=a?r.totalPages():1;d.append(o.children("tr:not(.k-detail-row)"));if(e<t){r.page(e+1)}else{r.unbind("change",f);u()}}if(a){r.bind("change",f);r.page(1)}else{f()}return n.promise()};Oi.prototype.toggleUnexportableColumns=function(e,t){var i=e.length;var n;var r;var a;var o;for(var s=0;s<i;s++){n=e[s];r=n.exportable;if(!t){if(typeof n.exportable==="object"){r=n.exportable.pdf}a=!n.hidden&&r!==false;o=n.hidden&&r===true;r=a||o;if(!r&&!n.hidden){n._toggledDuringExport=true;this.hideColumn(n)}else if(r&&n.hidden){n._toggledDuringExport=true;this.showColumn(n)}else if(r&&n.columns){this.toggleUnexportableColumns(n.columns)}}else{if(n._toggledDuringExport){n._toggledDuringExport=false;if(n.hidden){this.showColumn(n)}else{this.hideColumn(n)}}else if(n.columns){this.toggleUnexportableColumns(n.columns,t)}}}};Oi.prototype._drawPDF=function(r){var a=this;if(a.options.pdf.paperSize&&a.options.pdf.paperSize!="auto"){return a._drawPDF_autoPageBreak(r)}var t=new E.Deferred;var o=a.dataSource;var s=a.options.pdf.allPages;this._initPDFProgress(r);var l=new I.drawing.Group;var e=o.page();function d(){if(s&&e!==S){o.unbind("change",i);o.one("change",function(){t.resolve(l)});o.page(e)}else{t.resolve(l)}}function i(){a.toggleUnexportableColumns(a.columns);a._drawPDFShadow({width:a.wrapper.width()},{avoidLinks:a.options.pdf.avoidLinks}).done(function(e){var t=o.page();var i=s?o.totalPages():1;var n={page:e,pageNumber:t,progress:t/i,totalPages:i};a.toggleUnexportableColumns(a.columns,true);r.notify(n);l.append(n.page);if(t<i){o.page(t+1)}else{d()}}).fail(function(e){t.reject(e)})}if(s){o.bind("change",i);o.page(1)}else{i()}return t.promise()};Oi.prototype._initPDFProgress=function(e){var t=E("<div class='k-loading-pdf-mask'><div class='k-loading-color'></div></div>");t.prepend(this.wrapper.clone().css({position:"absolute",top:0,left:0}));this.wrapper.append(t);var i=E("<div class='k-loading-pdf-progress'>").appendTo(t).kendoProgressBar({type:"chunk",chunkCount:10,min:0,max:1,value:0}).data("kendoProgressBar");e.progress(function(e){i.value(e.progress)}).always(function(){I.destroy(t);t.remove()})}}function Vi(e,t){e=e[0];t=t[0];if(e.rows.length!==t.rows.length){var i=e.offsetHeight;var n=t.offsetHeight;var r;var a;if(i>n){r=t.rows[t.rows.length-1];if(kt.test(r.className)){r=t.rows[t.rows.length-2]}a=i-n}else{r=e.rows[e.rows.length-1];if(kt.test(r.className)){r=e.rows[e.rows.length-2]}a=n-i}r.style.height=r.offsetHeight+a+"px"}}function Wi(e,t){var i;var n=e.offsetHeight;var r=t.offsetHeight;if(n>r){i=n+"px"}else if(n<r){i=r+"px"}if(i){e.style.height=t.style.height=i}}function Ui(e,t){var i,n,r;if(typeof e===D&&e===t){return e}if(R(e)&&e.name===t){return e}if(q(e)){for(i=0,n=e.length;i<n;i++){r=e[i];if(typeof r===D&&r===t||r.name===t){return r}}}return null}function U(e,t){if(t===true){e=E(e);var i=I.scrollLeft(e.parent());I.focusElement(e);I.scrollLeft(e.parent(),i)}else{E(e).one("focusin",function(e){e.preventDefault()}).focus()}}function ji(e,t){return e.options.groupable&&(t.groupable||t.groupable===S)}function Gi(e,t){return!!E.grep(e,function(e){return e.field===t}).length}function qi(e,t){if(!e.field||e.selectable){return false}if(t.editable&&!t.editable(e.field)){return false}if(e.editable&&!e.editable(t)){return false}return true}function $i(e){return E(e).is(":button,a,:input,a>.k-icon,textarea,span.k-select,span.k-icon,span.k-link,label.k-checkbox-label,.k-input,.k-multiselect-wrap,.k-picker-wrap,.k-picker-wrap>.k-selected-color,.k-tool-icon,.k-dropdown")}function Ki(e){var t=E(e.currentTarget),i=t.is("th"),n=this.table.add(this.lockedTable),r=this.thead.parent().add(E(">table",this.lockedHeader)),a=$i(e.target),o=E(e.target).is(".k-checkbox"),s=E(e.target),l=t.closest("table")[0];if(a&&t.find(I.roleSelector("filtercell")).length){this._setCurrent(t);return}if(l!==n[0]&&l!==n[1]&&l!==r[0]&&l!==r[1]){return}if(s.is("a.k-i-expand, a.k-i-collapse")){return}if(this.options.navigatable){this._setCurrent(t,false,o)}if(i||!a){setTimeout(function(){if(E(I._activeElement()).hasClass("k-widget")){return}if(E(I._activeElement()).is(Ee)||!$i(I._activeElement())||!E.contains(l,I._activeElement())){U(l,true)}})}if(i&&!I.support.touch){e.preventDefault()}}function Yi(e,t){if(!t){return 0}var i=0;if(I.support.browser.webkit){i=e.width()}return i}function Qi(e){var t;if(typeof e==="string"){t=e.toLowerCase();if(t==="true"){return{rows:true}}else{return{rows:t.indexOf("rows")>-1,columns:t.indexOf("columns")>-1}}}else if(e===true){return{rows:true}}}function Xi(e,t){var i;var n;if(!e){return false}t=E(t);if(t[0]&&Y(e[0],t[0])){i=t.offset().top-e.offset().top;n=t.outerHeight()/2;if((i>=0||p.abs(i)<=n)&&p.floor(i+n)<=e.height()){return true}}return false}function Zi(e){return e&&(e.hasClass("k-edit-cell")||e.parent().hasClass("k-grid-edit-row"))}function Ji(e){return'<td colspan="#=data.colspan +'+e+'#">'+'<p class="k-reset">'+'<a class="k-icon k-i-collapse" href="\\#" tabindex="-1" '+mt+'="'+pt+'"></a>#=data.text#'+"</p></td>"}function en(e){return'<td colspan="'+e+'">'+'<p class="k-reset">&nbsp;</p></td>'}function tn(e,t,i,n,r,a){return'<tr role="row"'+(a?'data-group-uid="'+r+'"':"")+'class="k-grouping-row">'+Mt(t)+'<td colspan="'+e+'" aria-expanded="'+!!n+'">'+'<p class="k-reset">'+'<a class="k-icon '+(n?"k-i-collapse":"k-i-expand")+'" href="#" tabindex="-1" '+mt+'="'+(n?pt:vt)+'"></a>'+i+"</p></td></tr>"}function nn(e){return'<tr role="row" class="k-grouping-row">'+'<td colspan="'+e+'" aria-expanded="true">'+'<p class="k-reset">&nbsp;</p></td></tr>'}function rn(e,t){e=E(e)[0];if(t){e.style.display=""}else{e.style.display="none"}}function an(e,t){var i=/&/g,n=/</g,r=/"/g,a=/'/g,o=/>/g;return(""+e).replace(i,"&amp;").replace(n,"&lt;").replace(o,"&gt;").replace(r,function(e){if(t){return"\\"+e}return"&quot;"}).replace(a,"&#39;")}b.plugin(Oi);b.plugin(Et)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.listview",["kendo.data","kendo.editable","kendo.selectable"],e)})(function(){var e={id:"listview",name:"ListView",category:"web",description:"The ListView widget offers rich support for interacting with data.",depends:["data"],features:[{id:"listview-editing",name:"Editing",description:"Support for record editing",depends:["editable"]},{id:"listview-selection",name:"Selection",description:"Support for selection",depends:["selectable"]}]};(function(p,l){var g=window.kendo,a="change",e="kendoKeydown",r="cancel",_="dataBound",b="dataBinding",n=g.ui.Widget,v=g.keys,d="",o="> *:not(.k-loading-mask)",t="progress",i="error",s="k-state-focused",u="k-state-selected",m="k-edit-item",c="edit",f="remove",h="save",w="mousedown",k="click",y="touchstart",x=".kendoListView",C=p.proxy,S=g._activeElement,T=g.ui.progress,D=g.data.DataSource;var A=g.ui.DataBoundWidget.extend({init:function(e,t){var i=this;t=p.isArray(t)?{dataSource:t}:t;n.fn.init.call(i,e,t);t=i.options;i.wrapper=e=i.element;if(e[0].id){i._itemId=e[0].id+"_lv_active"}i._element();i._layout();i._dataSource();i._setContentHeight();i._templates();i._navigatable();i._selectable();i._pageable();i._crudHandlers();i._scrollable();if(i.options.autoBind){i.dataSource.fetch()}g.notify(i)},events:[a,r,b,_,c,f,h,e],options:{name:"ListView",autoBind:true,selectable:false,navigatable:false,height:null,template:d,altTemplate:d,editTemplate:d,contentTemplate:"<div data-content='true' />",contentElement:"div",bordered:true,borders:"",layout:"",flex:{direction:"row",wrap:"nowrap"},grid:{},scrollable:false},setOptions:function(e){n.fn.setOptions.call(this,e);this._layout();this._templates();if(this.selectable){this.selectable.destroy();this.selectable=null}this._selectable()},_templates:function(){var e=this.options;this.template=g.template(e.template||d);this.altTemplate=g.template(e.altTemplate||e.template);this.editTemplate=g.template(e.editTemplate||d)},_item:function(e){return this.content.children()[e]()},items:function(){return this.content.children(":not(.k-loading-mask)")},dataItem:function(e){var t=g.attr("uid");var i=p(e).closest("["+t+"]").attr(t);return this.dataSource.getByUid(i)},setDataSource:function(e){this.options.dataSource=e;this._dataSource();if(this.options.autoBind){e.fetch()}if(this.options.scrollable==="endless"){this._bindScrollable()}},_unbindDataSource:function(){var e=this;e.dataSource.unbind(a,e._refreshHandler).unbind(t,e._progressHandler).unbind(i,e._errorHandler)},_dataSource:function(){var e=this;if(e.dataSource&&e._refreshHandler){e._unbindDataSource()}else{e._refreshHandler=C(e.refresh,e);e._progressHandler=C(e._progress,e);e._errorHandler=C(e._error,e)}e.dataSource=D.create(e.options.dataSource).bind(a,e._refreshHandler).bind(t,e._progressHandler).bind(i,e._errorHandler)},_progress:function(e){var t=this.content;T(t,e,{opacity:true})},_error:function(){T(this.content,false)},_element:function(){var e=this.options;var t=e.height;this.element.addClass("k-widget k-widget-2021 k-listview");if(e.navigatable||e.selectable){this.element.attr("role","listbox")}else{this.element.attr("role","list")}if(e.contentElement){this.content=p(document.createElement(e.contentElement)).appendTo(this.element)}else{this.content=this.element}if(t){this.element.css("height",t)}},_layout:function(){var e=this;var t=e.options;var i=t.flex;var n=t.grid;var r=e.element;var a=["k-widget","k-listview"];var o=e.content;var s=["k-listview-content"];r.add(o).removeClass(function(e,t){if(t.indexOf("k-")>=0){return true}});if(t.bordered===true){a.push("k-listview-bordered")}if(typeof t.borders==="string"&&t.borders!==d){a.push("k-listview-borders-"+t.borders)}if(typeof t.contentPadding==="string"&&t.contentPadding!==d){s.push("k-listview-content-padding-"+t.contentPadding)}if(typeof t.layout==="string"&&t.layout!==d){s.push("k-d-"+t.layout)}if(t.layout==="flex"&&typeof i==="object"){if(typeof i.direction==="string"&&i.direction!==""){s.push("k-flex-"+i.direction)}if(typeof i.wrap==="string"&&i.wrap!==""){s.push("k-flex-"+i.wrap)}}if(t.layout==="grid"&&typeof n==="object"){if(typeof n.cols==="number"){o.css("grid-template-columns","repeat("+n.cols+", 1fr)")}else if(typeof n.cols==="string"){o.css("grid-template-columns",n.cols)}if(typeof n.rows==="number"){o.css("grid-template-rows","repeat("+n.rows+", "+(n.rowHeight!==l?n.rowHeight:"1fr")+")")}else if(typeof n.rows==="string"){o.css("grid-template-rows",n.rows)}if(typeof n.gutter==="number"){o.css("grid-gap",n.gutter)}else if(typeof n.gutter==="string"){o.css("grid-gap",n.gutter)}}e.element.addClass(a.join(" "));e.content.addClass(s.join(" "))},_setContentHeight:function(){var e=this,t=e.options,i;if(t.scrollable&&e.wrapper.is(":visible")){i=e.wrapper.innerHeight();e.content.height(i)}},refresh:function(e){var t=this,i=t.dataSource.view(),n,r,a,o="",s,l,d=t.template,u=t.altTemplate,c=t.options,f=c.selectable||c.navigatable?"option":"listitem",h=S(),p=t._endlessFetchInProgress,v=p?t._skipRerenderItemsCount:0,m=t.options.scrollable;e=e||{};if(e.action==="itemchange"){if(!t._hasBindingTarget()&&!t.editable){n=e.items[0];a=t.items().filter("["+g.attr("uid")+"="+n.uid+"]");if(a.length>0){s=a.index();t.angular("cleanup",function(){return{elements:[a]}});a.replaceWith(d(n));a=t.items().eq(s);a.attr(g.attr("uid"),n.uid);t.angular("compile",function(){return{elements:[a],data:[{dataItem:n}]}});t.trigger("itemChange",{item:a,data:n})}}return}if(t.trigger(b,{action:e.action||"rebind",items:e.items,index:e.index})){return}t._angularItems("cleanup");if(!p){t._destroyEditable()}for(s=v,l=i.length;s<l;s++){if(s%2){o+=u(i[s])}else{o+=d(i[s])}}if(p){t.content.append(o)}else{t.content.html(o)}r=t.items().not(".k-loading-mask");for(s=v,l=i.length;s<l;s++){a=r.eq(s);a.attr(g.attr("uid"),i[s].uid).attr("role",f);if(t.options.selectable){a.attr("aria-selected","false")}}if(t.content[0]===h&&t.options.navigatable){if(t._focusNext){t.current(t.current().next())}else{if(!m){t.current(r.eq(0))}}}t._setContentHeight();t._angularItems("compile");t._progress(false);t._endlessFetchInProgress=null;t.trigger(_,{action:e.action||"rebind",items:e.items,index:e.index})},_pageable:function(){var e=this,t=e.options.pageable,i,n;if(p.isPlainObject(t)){n=t.pagerId;i=p.extend({},t,{dataSource:e.dataSource,pagerId:null});e.pager=new g.ui.Pager(p("#"+n),i)}},_selectable:function(){var t=this,i,n,e=t.options.selectable,r=t.options.navigatable;if(e){i=g.ui.Selectable.parseOptions(e).multiple;t.selectable=new g.ui.Selectable(t.element,{aria:true,multiple:i,filter:t.options.contentElement?".k-listview-content "+o:o,change:function(){t.trigger(a)}});if(r){t.element.on("keydown"+x,function(e){if(e.keyCode===v.SPACEBAR){n=t.current();if(e.target==e.currentTarget){e.preventDefault()}if(i){if(!e.ctrlKey){t.selectable.clear()}else{if(n&&n.hasClass(u)){n.removeClass(u);return}}}else{t.selectable.clear()}t.selectable.value(n)}})}}},_scrollable:function(){var e=this;var t=e.options.scrollable;if(t){e.content.css({"overflow-y":"scroll",position:"relative","-webkit-overflow-scrolling":"touch"});if(t==="endless"){e._bindScrollable()}}},_bindScrollable:function(){var e=this;var t=e._endlessPageSize=e.dataSource.options.pageSize;e.content.off("scroll"+x).on("scroll"+x,function(){if(this.scrollTop+this.clientHeight-this.scrollHeight>=-15&&!e._endlessFetchInProgress&&e._endlessPageSize<e.dataSource.total()){e._skipRerenderItemsCount=e._endlessPageSize;e._endlessPageSize=e._skipRerenderItemsCount+t;e.dataSource.options.endless=true;e._endlessFetchInProgress=true;e.dataSource.pageSize(e._endlessPageSize)}})},current:function(e){var t=this,i=t.element,n=t._current,r=t._itemId;if(e===l){return n}if(n&&n[0]){if(n[0].id===r){n.removeAttr("id")}n.removeClass(s);i.removeAttr("aria-activedescendant")}if(e&&e[0]){r=e[0].id||r;t._scrollTo(e[0]);i.attr("aria-activedescendant",r);e.addClass(s).attr("id",r)}t._current=e},_scrollTo:function(o){var e=this,t=e.content,s,l=false,d="scroll";if(t.css("overflow")==="auto"||t.css("overflow")===d||t.css("overflow-y")===d){s=t[0]}else{s=window;l=true}var i=function(e,t){var i=l?p(o).offset()[e.toLowerCase()]:o["offset"+e],n=o["client"+t],r=p(s)[d+e](),a=p(s)[t.toLowerCase()]();if(i+n>r+a){p(s)[d+e](i+n-a)}else if(i<r){p(s)[d+e](i)}};i("Top","Height");i("Left","Width")},_navigatable:function(){var f=this,e=f.options.navigatable,t=f.element,h=f.content,i=function(e){f.current(p(e.currentTarget));if(!p(e.target).is(":button, a, :input, a > .k-icon, textarea")){g.focusElement(t)}};if(e){f._tabindex();t.on("focus"+x,function(){var e=f._current;if(!e||!e.is(":visible")){e=f._item("first")}f.current(e)}).on("focusout"+x,function(){if(f._current){f._current.removeClass(s)}}).on("keydown"+x,f,function(e){var t=e.keyCode,i=f.current(),n=p(e.target),r=!n.is(":button, textarea, a, a > .t-icon, input"),a=n.is(":text, :password"),o=g.preventDefault,s=h.find("."+m),l=S(),d,u=f.options.scrollable;if(!r&&!a&&t!==v.ESC||a&&t!==v.ESC&&t!==v.ENTER){return}if(t===v.UP||t===v.LEFT){if(i&&i[0]){i=i.prev()}if(i&&i[0]){f.current(i)}else if(!u){f.current(f._item("last"))}o(e)}if(t===v.DOWN||t===v.RIGHT){if(u){if(f.options.scrollable==="endless"&&!i.next().length){f.content[0].scrollTop=f.content[0].scrollHeight;f._focusNext=true}else{i=i.next();if(i&&i[0]){f.current(i)}}}else{i=i.next();f.current(!i||!i[0]?f._item("first"):i)}o(e)}if(t===v.PAGEUP){f.current(null);f.dataSource.page(f.dataSource.page()-1);o(e)}if(t===v.PAGEDOWN){f.current(null);f.dataSource.page(f.dataSource.page()+1);o(e)}if(t===v.HOME){f.current(f._item("first"));o(e)}if(t===v.END){f.current(f._item("last"));o(e)}if(t===v.ENTER){if(s.length!==0&&(r||a)){d=f.items().index(s);if(l){l.blur()}f.save();var c=function(){f.element.trigger("focus");f.current(f.items().eq(d))};f.one("dataBound",c)}else if(f.options.editTemplate!==""){f.edit(i)}}if(t===v.ESC){s=h.find("."+m);if(s.length===0){return}d=f.items().index(s);f.cancel();f.element.trigger("focus");f.current(f.items().eq(d))}});t.on(w+x+" "+y+x,f.options.contentElement?".k-listview-content "+o:o,C(i,f))}},clearSelection:function(){var e=this;e.selectable.clear();e.trigger(a)},select:function(e){var t=this,i=t.selectable;e=p(e);if(e.length){if(!i.options.multiple){i.clear();e=e.first()}i.value(e);return}return i.value()},_destroyEditable:function(){var e=this;if(e.editable){e.editable.destroy();delete e.editable}},_modelFromElement:function(e){var t=e.attr(g.attr("uid"));return this.dataSource.getByUid(t)},_closeEditable:function(){var e=this,t=e.editable,i=e.options,n=i.selectable||i.navigatable?"option":"listitem",r,a,o,s=e.template;if(t){if(t.element.index()%2){s=e.altTemplate}e.angular("cleanup",function(){return{elements:[t.element]}});r=e._modelFromElement(t.element);e._destroyEditable();o=t.element.index();t.element.replaceWith(s(r));a=e.items().eq(o);a.attr(g.attr("uid"),r.uid);a.attr("role",n);if(e._hasBindingTarget()){g.bind(a,r)}e.angular("compile",function(){return{elements:[a],data:[{dataItem:r}]}})}return true},edit:function(e){var t=this,i=t._modelFromElement(e),n,r=i.uid,a;t.cancel();e=t.items().filter("["+g.attr("uid")+"="+r+"]");a=e.index();e.replaceWith(t.editTemplate(i));n=t.items().eq(a).addClass(m).attr(g.attr("uid"),i.uid);t.editable=n.kendoEditable({model:i,clearContainer:false,errorTemplate:false,target:t}).data("kendoEditable");t.trigger(c,{model:i,item:n})},save:function(){var e=this,t=e.editable,i;if(!t){return}var n=t.element;i=e._modelFromElement(n);if(t.end()&&!e.trigger(h,{model:i,item:n})){e._closeEditable();e.dataSource.sync()}},remove:function(e){var t=this,i=t.dataSource,n=t._modelFromElement(e);if(t.editable){i.cancelChanges(t._modelFromElement(t.editable.element));t._closeEditable()}if(!t.trigger(f,{model:n,item:e})){e.hide();i.remove(n);i.sync()}},add:function(){var e=this,t,i=e.dataSource,n=i.indexOf((i.view()||[])[0]);if(n<0){n=0}e.cancel();t=i.insert(n,{});e.edit(e.element.find("[data-uid='"+t.uid+"']"))},cancel:function(){var e=this,t=e.dataSource;if(e.editable){var i=e.editable.element;var n=e._modelFromElement(i);if(!e.trigger(r,{model:n,container:i})){t.cancelChanges(n);e._closeEditable()}}},_crudHandlers:function(){var i=this,e=w+x,t=y+x,n=k+x;i.content.on(e+" "+t,".k-edit-button",function(e){e.preventDefault();var t=p(this).closest("["+g.attr("uid")+"]");setTimeout(function(){i.edit(t)})});i.content.on(e+" "+t,".k-delete-button",function(e){e.preventDefault();var t=p(this).closest("["+g.attr("uid")+"]");setTimeout(function(){i.remove(t)})});i.content.on(n,".k-update-button",function(e){i.save();e.preventDefault()});i.content.on(n,".k-cancel-button",function(e){i.cancel();e.preventDefault()})},destroy:function(){var e=this;n.fn.destroy.call(e);e._unbindDataSource();e._destroyEditable();e.element.off(x);e.content.off(x);e._endlessFetchInProgress=e._endlessPageSize=e._skipRerenderItemsCount=e._focusNext=null;if(e.pager){e.pager.destroy()}g.destroy(e.element)}});g.ui.plugin(A)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.listbox",["kendo.draganddrop","kendo.data","kendo.selectable"],e)})(function(){var e={id:"listbox",name:"ListBox",category:"web",depends:["draganddrop","data","selectable"]};(function(u,n){var o=window.kendo;var a=o.attr;var B=o.data;var s=o.keys;var L=o.template;var H=o.ui.Widget;var N=B.DataSource;var O=o.ui.Selectable;var V=o.ui.DataBoundWidget;var e=o.Class;var d=u.extend;var t=u.noop;var r=u.proxy;var l="-";var W=".";var U=" ";var j="#";var c="kendoListBox";var i=W+c;var f="k-state-disabled";var h="k-state-selected";var p=".k-item:not(.k-state-disabled)";var v=".k-list:not(.k-state-disabled) >"+p;var m="k-listbox-toolbar";var G="li > a.k-button:not(.k-state-disabled)";var g="k-state-focused";var q="k-drag-clue";var $="k-drop-hint";var K="k-reset k-list";var Y=".k-reset.k-list";var Q="k-reset";var X="click"+i;var Z="keydown"+i;var J="blur"+i;var ee=o._outerWidth;var te=o._outerHeight;var _="change";var ie="dataBound";var b="add";var w="remove";var k="reorder";var y="moveUp";var x="moveDown";var C="transferTo";var S="transferFrom";var T="transferAllTo";var D="transferAllFrom";var A="k-ghost";var E="uid";var I="tabindex";var ne="command";var re=-1;var ae=1;var oe="dragstart";var se="drag";var le="drop";var de="dragend";var ue="ul.k-reset.k-list>li.k-item";var M="right";var ce="bottom";var fe=[m+l+"left",m+l+M,m+l+"top",m+l+ce];function R(e){var t=u.map(e,function(e){return u(e).index()});return t}function he(e){return typeof e==="undefined"}function pe(e){return e.clone().removeClass(A).removeClass(g).addClass(o.format("{0} {1} {2}",h,Q,q)).width(e.width())}function ve(){return u("<li>").addClass($)}var me=V.extend({init:function(e,t){var i=this;H.fn.init.call(i,e,t);i._wrapper();i._list();e=i.element.attr("multiple","multiple").hide();if(e[0]&&!i.options.dataSource){i.options.dataTextField=i.options.dataTextField||"text";i.options.dataValueField=i.options.dataValueField||"value"}i._templates();i._selectable();i._dataSource();i._createToolbar();i._createDraggable();i._createNavigatable()},destroy:function(){var e=this;V.fn.destroy.call(e);if(!isNaN(e._listTabIndex)){e._getList().off();e._listTabIndex=null}e._unbindDataSource();e._destroySelectable();e._destroyToolbar();e.wrapper.off(i);if(e._target){e._target=null}if(e._draggable){e._draggable.destroy();e.placeholder=null}o.destroy(e.element)},setOptions:function(e){H.fn.setOptions.call(this,e);this._templates();this._dataSource()},events:[_,ie,b,w,k,oe,se,le,de],options:{name:"ListBox",autoBind:true,template:"",dataTextField:"",dataValueField:"",selectable:"single",draggable:null,dropSources:[],connectWith:"",navigatable:true,toolbar:{position:M,tools:[]},messages:{tools:{remove:"Delete",moveUp:"Move Up",moveDown:"Move Down",transferTo:"Transfer To",transferFrom:"Transfer From",transferAllTo:"Transfer All To",transferAllFrom:"Transfer All From"}}},add:function(e){var t=this;var i=e&&e.length?e:[e];var n=i.length;var r=t._getList();var a;t._unbindDataSource();t._unbindDataChange();for(a=0;a<n;a++){t._addItem(i[a],r)}t._bindDataChange();t._bindDataSource();t._syncElement()},_addItem:function(e,t){var i=this;var n=i.templates.itemTemplate({item:e,r:i.templates.itemContent});u(n).attr(a(E),e.uid).appendTo(t);if(typeof e===typeof""){i.dataSource._data.push(e)}else{i.dataSource.add(e)}},_addItemAt:function(e,t){var i=this;var n=i.templates.itemTemplate({item:e,r:i.templates.itemContent});i._unbindDataSource();if(typeof e===typeof""){i._insertElementAt(n,t);i.dataSource._data.push(e)}else{i._insertElementAt(u(n).attr(a(E),e.uid),t);i.dataSource.add(e)}i._bindDataSource();i._syncElement()},_insertElementAt:function(e,t){var i=this;var n=i._getList();if(t>0){u(e).insertAfter(n.children().eq(t-1))}else{u(n).prepend(e)}},_createNavigatable:function(){var e=this;var t=e.options;if(t.navigatable){e._getList().on(X,p,r(e._click,e)).on(Z,r(e._keyDown,e)).on(J,r(e._blur,e))}},_getTabIndex:function(){var e=this;var t;if(!isNaN(e._listTabIndex)){return e._listTabIndex}t=e.element.attr(I);e._listTabIndex=!isNaN(t)?t:0;e.element.removeAttr(I);return e._listTabIndex},_blur:function(){if(this._target){this._target.removeClass(g);this._getList().removeAttr("aria-activedescendant")}this._target=null},_click:function(e){var t=this;var i=u(e.currentTarget);var n=t._target;var r=Te(e.target);if(n){n.removeClass(g)}t._target=i;i.addClass(g);t._getList().attr("aria-activedescendant",i.attr("id"));if(t._getList()[0]!==o._activeElement()&&!r){t.focus()}},_getNavigatableItem:function(e){var t=this;var i;if(!t._target){i=t.items().filter(p).first()}else{i=t._target}if(e===s.UP&&t._target){i=t._target.prevAll(p).first()}if(e===s.DOWN&&t._target){i=t._target.nextAll(p).first()}return i.length?i:null},_scrollIntoView:function(e){if(!e){return}if(e[0]){e=e[0]}var t=this._getList().parent()[0];var i=e.offsetTop;var n=t.scrollTop;var r=t.clientHeight;var a=i+e.offsetHeight;if(n>i){n=i}else if(a>n+r){n=a-r}t.scrollTop=n},_keyDown:function(e){var t=this;var i=e.keyCode;var n=t._getNavigatableItem(i);var r;if(t._target){t._target.removeClass(g)}if(!(e.shiftKey&&!e.ctrlKey&&(i===s.DOWN||i===s.UP))){t._shiftSelecting=false}if(i==s.DELETE){t._executeCommand(w);if(t._target){t._target.removeClass(g);t._getList().removeAttr("aria-activedescendant");t._target=null}r=true}else if(i===s.DOWN||i===s.UP){if(!n){e.preventDefault();return}if(e.shiftKey&&!e.ctrlKey){if(!t._shiftSelecting){t.clearSelection();t._shiftSelecting=true}if(t._target&&n.hasClass("k-state-selected")){t._target.removeClass(h);t.trigger(_)}else if(t.options.selectable=="single"){t.select(n)}else{t.select(n.add(t._target))}}else if(e.shiftKey&&e.ctrlKey){t._executeCommand(i===s.DOWN?x:y);t._scrollIntoView(t._target);e.preventDefault();return}else if(!e.shiftKey&&!e.ctrlKey){if(t.options.selectable==="multiple"){t.clearSelection()}t.select(n)}t._target=n;if(t._target){t._target.addClass(g);t._scrollIntoView(t._target);t._getList().attr("aria-activedescendant",t._target.attr("id"))}else{t._getList().removeAttr("aria-activedescendant")}r=true}else if(i==s.SPACEBAR){if(e.ctrlKey&&t._target){if(t._target.hasClass(h)){t._target.removeClass(h);t.trigger(_)}else{t.select(t._target)}}else{t.clearSelection();t.select(t._target)}r=true}else if(e.ctrlKey&&i==s.RIGHT){if(e.shiftKey){t._executeCommand(T)}else{t._executeCommand(C)}t._target=t.select().length?t.select():null;r=true}else if(e.ctrlKey&&i==s.LEFT){if(e.shiftKey){t._executeCommand(D)}else{t._executeCommand(S)}r=true}if(r){e.preventDefault()}},focus:function(){o.focusElement(this._getList())},_createDraggable:function(){var e=this;var t=e.options.draggable;var i;if(t){i=t.hint;if(!e.options.selectable){throw new Error("Dragging requires selection to be enabled")}if(!i){i=pe}e._draggable=new o.ui.Draggable(e.wrapper,{filter:t.filter?t.filter:ue,hint:o.isFunction(i)?i:u(i),dragstart:r(e._dragstart,e),dragcancel:r(e._clear,e),drag:r(e._drag,e),dragend:r(e._dragend,e)})}},_dragstart:function(e){var t=this;var i=t.draggedElement=e.currentTarget;var n=t.options.draggable.placeholder;var r=t.dataItem(i);var a={dataItems:r,items:u(i),draggableEvent:e};if(t.options.draggable.enabled===false){e.preventDefault();return}if(!n){n=ve}t.placeholder=o.isFunction(n)?u(n.call(t,i)):u(n);if(i.is(W+f)){e.preventDefault()}else{if(t.trigger(oe,a)){e.preventDefault()}else{t.clearSelection();t.select(i);i.addClass(A)}}},_clear:function(){this.draggedElement.removeClass(A);this.placeholder.remove()},_findElementUnderCursor:function(e){var t=o.elementUnderCursor(e);var i=e.sender;if(u.contains(i.hint[0],t)||i.hint[0]===t){i.hint.hide();t=o.elementUnderCursor(e);i.hint.show()}return t},_findTarget:function(e){var t=this;var i=t._findElementUnderCursor(e);var n=u(i);var r=t._getList();var a;var o;if(u.contains(r[0],i)){a=t.items();i=n.is("li")?i:n.closest("li")[0];o=a.filter(i)[0]||a.has(i)[0];if(o){o=u(o);return!o.hasClass(f)?{element:o,listBox:t}:null}else{return null}}else if(r[0]==i||r.parent()[0]==i){return{element:u(r),appendToBottom:true,listBox:t}}else{return t._searchConnectedListBox(n)}},_getElementCenter:function(e){var t=e.length?o.getOffset(e):null;if(t){t.top+=te(e)/2;t.left+=ee(e)/2}return t},_searchConnectedListBox:function(e){var t;var i;var n;var r=e;var a;if(e.hasClass("k-list-scroller k-selectable")){a=e}else{a=e.closest(".k-list-scroller.k-selectable")}if(a.length){t=a.parent().find("[data-role='listbox']").getKendoListBox()}else{return null}if(t&&u.inArray(this.element[0].id,t.options.dropSources)!==-1){i=t.items();e=e.is("li")?e[0]:e.closest("li")[0];n=i.filter(e)[0]||i.has(e)[0];if(n){n=u(n);return!n.hasClass(f)?{element:n,listBox:t}:null}else if(!i.length||r.hasClass("k-list-scroller k-selectable")||r.hasClass("k-reset k-list")){return{element:t._getList(),listBox:t,appendToBottom:true}}else{return null}}return null},_drag:function(e){var t=this;var i=t.draggedElement;var n=t._findTarget(e);var r={left:e.x.location,top:e.y.location};var a=t.dataItem(i);var o={dataItems:[a],items:u(i),draggableEvent:e};var s;var l;var d;if(t.trigger(se,o)){e.preventDefault();return}if(n){s=this._getElementCenter(n.element);l={left:Math.round(r.left-s.left),top:Math.round(r.top-s.top)};if(n.appendToBottom){t._movePlaceholder(n,null,i);return}if(l.top<0){d="prev"}else if(l.top>0){d="next"}if(d){if(n.element[0]!=t.placeholder[0]){t._movePlaceholder(n,d,i)}}}else if(t.placeholder.parent().length){t.placeholder.remove()}},_movePlaceholder:function(e,t,i){var n=this;var r=n.placeholder;var a=e.listBox.options.draggable;if(r.parent().length){n.placeholder.remove();if(a&&a.placeholder){n.placeholder=o.isFunction(a.placeholder)?u(a.placeholder.call(n,i)):u(a.placeholder)}else{n.placeholder=u(ve.call(n,i))}}if(!t){e.element.append(n.placeholder)}else if(t==="prev"){e.element.before(n.placeholder)}else if(t==="next"){e.element.after(n.placeholder)}},_dragend:function(e){var t=this;var i=t.draggedElement;var n=t.items();var r=n.not(t.draggedElement).index(t.placeholder);var a=n.not(t.placeholder).index(t.draggedElement);var o=t.dataItem(i);var s={dataItems:[o],items:u(i)};var l=t.placeholder.closest(".k-widget.k-listbox").find("[data-role='listbox']").getKendoListBox();if(t.trigger(le,d({},s,{draggableEvent:e}))){e.preventDefault();this._clear();return}if(r>=0){if(r!==a&&!t.trigger(k,d({},s,{offset:r-a}))){i.removeClass(A);t.reorder(i,r)}}else if(l){if(!t.trigger(w,s)){t.remove(u(i))}if(!l.trigger(b,s)){l._addItemAt(o,l.items().index(t.placeholder))}}t._clear();t._draggable.dropped=true;t.trigger(de,d({},s,{draggableEvent:e}));t._updateToolbar();t._updateAllToolbars()},reorder:function(e,t){var i=this;var n=i.dataSource;var r=i.dataItem(e);var a=n.at(t);var o=i.items()[t];var s=u(e);if(r&&o&&a){i._removeElement(s);i._insertElementAt(s,t);i._updateToolbar()}},remove:function(e){var t=this;var i=t._getItems(e);var n=i.length;var r;t._unbindDataSource();t._unbindDataChange();for(r=0;r<n;r++){t._removeItem(u(i[r]))}t._bindDataChange();t._bindDataSource();t._syncElement();t._updateToolbar();t._updateAllToolbars()},_removeItem:function(e){var t=this;var i=t.dataSource;var n=t.dataItem(e);var r=i.transport;if(!n||!i){return}if(typeof n===typeof""){var a=i._data;for(var o=0;o<a.length;o++){if(n===a[o]){a[o]=a[a.length-1];a.pop();break}}}else{i.remove(n);if(r&&(r.destroy||(r.options||{}).destroy)&&(!n.isNew||!n.isNew())){i._destroyed.push(n)}}t._removeElement(e)},_removeElement:function(e){o.destroy(e);u(e).off().remove()},dataItem:function(e){var t=a(E);var i=u(e).attr(t)||u(e).closest("["+t+"]").attr(t);if(i){return this.dataSource.getByUid(i)}else{return u(e).html()}},_dataItems:function(e){var t=[];var i=u(e);var n=i.length;var r;for(r=0;r<n;r++){t.push(this.dataItem(i.eq(r)))}return t},items:function(){var e=this._getList();return e.children()},select:function(e){var t=this;var i=t.selectable;var n;if(he(e)){return i.value()}n=t.items().filter(e).filter(v);if(!i.options.multiple){i.clear();n=n.first()}return i.value(n)},clearSelection:function(){var e=this;var t=e.selectable;if(t){t.clear()}},enable:function(e,t){var i=this;var n=he(t)?true:!!t;var r=i._getItems(e);var a=r.length;var o;for(o=0;o<a;o++){i._enableItem(u(r[o]),n)}i._updateAllToolbars()},_enableItem:function(e,t){var i=this;var n=i.dataItem(e);if(n){if(t){u(e).removeClass(f)}else{u(e).addClass(f).removeClass(h)}}},setDataSource:function(e){var t=this;t.options.dataSource=e;t._dataSource()},_dataSource:function(){var e=this;var t=e.options;var i=t.dataSource||{};i=u.isArray(i)?{data:i}:i;i.select=e.element;i.fields=[{field:t.dataTextField},{field:t.dataValueField}];e._unbindDataSource();e.dataSource=N.create(i);e._bindDataSource();if(e.options.autoBind){e.dataSource.fetch()}},_bindDataChange:function(){var e=this.dataSource;if(e._data&&e._changeHandler){e._data.bind(_,e._changeHandler);e._data.trigger(_)}},_unbindDataChange:function(){var e=this.dataSource;if(e._data&&e._changeHandler){e._data.unbind(_,e._changeHandler)}},_bindDataSource:function(){var e=this;var t=e.dataSource;e._dataChangeHandler=r(e.refresh,e);if(t){t.bind(_,e._dataChangeHandler)}},_unbindDataSource:function(){var e=this;var t=e.dataSource;if(t){t.unbind(_,e._dataChangeHandler)}},_wrapper:function(){var e=this,t=e.element,i=t.parent("div.k-listbox");if(!i[0]){i=t.wrap('<div class="k-widget k-widget-2021 k-listbox" unselectable="on" />').parent();i[0].style.cssText=t[0].style.cssText;i[0].title=t[0].title;u('<div class="k-list-scroller" />').insertBefore(t)}e.wrapper=i.addClass(t[0].className).css("display","");e._innerWrapper=u(i[0].firstChild)},_list:function(){var e=this;u("<ul class='"+K+"' role='listbox'></ul>").appendTo(e._innerWrapper);if(e.options.navigatable){e._getList().attr(I,e._getTabIndex())}},_templates:function(){var e=this;var t=this.options;var i;if(t.template&&typeof t.template=="string"){i=o.template(t.template)}else if(!t.template){i=o.template("${"+o.expr(t.dataTextField,"data")+"}",{useWithBlock:false})}else{i=t.template}e.templates={itemTemplate:o.template("# var item = data.item, r = data.r; # <li class='k-item' role='option' aria-selected='false'>#=r(item)#</li>",{useWithBlock:false}),itemContent:i,toolbar:"<div class='"+m+"'></div>"}},refresh:function(){var e=this;var t=e.dataSource.view();var i=e.templates.itemTemplate;var n="";for(var r=0;r<t.length;r++){n+=i({item:t[r],r:e.templates.itemContent})}e._getList().html(n);e._setItemIds();e._createToolbar();e._syncElement();e._updateToolbar();e._updateAllToolbars();e.trigger(ie)},_syncElement:function(){var e="";var t=this.dataSource.view();for(var i=0;i<t.length;i++){e+=this._option(t[i][this.options.dataValueField]||t[i],t[i][this.options.dataTextField]||t[i],true)}this.element.html(e)},_option:function(e,t){var i="<option";if(e!==n){e+="";if(e.indexOf('"')!==-1){e=e.replace(/"/g,"&quot;")}i+=' value="'+e+'"'}i+=" selected>";if(t!==n){i+=o.htmlEncode(t)}return i+="</option>"},_setItemIds:function(){var e=this;var t=e.items();var i=e.dataSource.view();var n=i.length;var r;for(r=0;r<n;r++){t.eq(r).attr(a(E),i[r].uid).attr("id",i[r].uid)}},_selectable:function(){var e=this;var t=e.options.selectable;var i=O.parseOptions(t);if(i.multiple){e.element.attr("aria-multiselectable","true")}e.selectable=new O(e._innerWrapper,{aria:true,multiple:i.multiple,filter:p,change:r(e._onSelect,e)})},_onSelect:function(){var e=this;e._updateToolbar();e._updateAllToolbars();e.trigger(_)},_destroySelectable:function(){var e=this;if(e.selectable&&e.selectable.element){e.selectable.destroy();e.selectable=null}},_getList:function(){return this.wrapper.find(Y)},_getItems:function(e){return this.items().filter(e)},_createToolbar:function(){var e=this;var t=e.options.toolbar;var i=t.position||M;var n=i===ce?"insertAfter":"insertBefore";var r=t.tools||[];var a=e.options.messages;e._destroyToolbar();e.wrapper.removeClass(fe.join(U));if(r.length&&r.length>0){var o=u(e.templates.toolbar)[n](e._innerWrapper);e.toolbar=new z(o,d({},t,{listBox:e,messages:a}));e.wrapper.addClass(m+l+i)}},_destroyToolbar:function(){var e=this;if(e.toolbar){e.toolbar.destroy();e.toolbar=null}},_executeCommand:function(e){var t=this;var i=F.current.create(e,{listBox:t});if(i){i.execute();t._updateToolbar();t._updateAllToolbars()}},_updateToolbar:function(){var e=this.toolbar;if(e){e._updateToolStates()}},_updateAllToolbars:function(){var e=u("select[data-role='listbox']");var t=e.length;var i;var n;for(n=0;n<t;n++){i=u(e[n]).data(c);if(i){i._updateToolbar()}}}});o.ui.plugin(me);var F=e.extend({init:function(){this._commands=[]},register:function(e,t){this._commands.push({commandName:e,commandType:t})},create:function(e,t){var i=this._commands;var n=i.length;var r=e?e.toLowerCase():"";var a;var o;var s;for(s=0;s<n;s++){o=i[s];if(o.commandName.toLowerCase()===r){a=o;break}}if(a){return new a.commandType(t)}}});F.current=new F;var P=e.extend({init:function(e){var t=this;t.options=d({},t.options,e);t.listBox=t.options.listBox},options:{listBox:null},getItems:function(){return u(this.listBox.select())},execute:t,canExecute:t});var ge=P.extend({execute:function(){var e=this;var t=e.listBox;var i=e.getItems();if(!t.trigger(w,{dataItems:t._dataItems(i),items:i})){t.remove(i)}},canExecute:function(){return this.listBox.select().length>0}});F.current.register(w,ge);var _e=P.extend({execute:function(){var e=this;if(e.canExecute()){e.moveItems()}},canExecute:t,moveItems:function(){var e=this;var t=e.listBox;var i=e.options;var n=e.getItems();var r=i.offset;var a=R(n);var o=u.makeArray(n.sort(e.itemComparer));var s=i.moveAction;var l;if(!t.trigger(k,{dataItems:t._dataItems(o),items:u(o),offset:r})){while(o.length>0&&a.length>0){l=o[s]();t.reorder(l,a[s]()+r)}}},options:{offset:0,moveAction:"pop"},itemComparer:function(e,t){var i=u(e).index();var n=u(t).index();if(i===n){return 0}else{return i>n?1:-1}}});var be=_e.extend({options:{offset:re,moveAction:"shift"},canExecute:function(){var e=this.getItems();var t=R(e);return t.length>0&&t[0]>0}});F.current.register(y,be);var we=_e.extend({options:{offset:ae,moveAction:"pop"},canExecute:function(){var e=this;var t=e.getItems();var i=R(t);return i.length>0&&u(i).last()[0]<e.listBox.items().length-1}});F.current.register(x,we);var ke=P.extend({options:{filter:p},execute:function(){var e=this;var t=e.getSourceListBox();var i=e.getItems().filter(e.options.filter);var n=t?t._dataItems(i):[];var r=e.getDestinationListBox();var a=e.getUpdatedSelection(i);if(r&&i.length>0){if(!r.trigger(b,{dataItems:n,items:i})){r.add(n)}if(!t.trigger(w,{dataItems:n,items:i})){t.remove(i);e.updateSelection(a)}}},getUpdatedSelection:function(e){if(e.length!==1){return null}var t=this;var i=t.options.filter;var n=t.getSourceListBox();var r=n?n.items().filter(i).last():null;var a=u(e).filter(r).length>0;var o=a?u(e).prevAll(i)[0]:u(e).nextAll(i)[0];if(o){return o}else{return null}},updateSelection:function(e){var t=this.getSourceListBox();if(t&&e){u(t.select(u(e)));t._scrollIntoView(e)}},getSourceListBox:t,getDestinationListBox:t});var ye=ke.extend({canExecute:function(){var e=this.getSourceListBox();return e?e.select().length>0:false},getSourceListBox:function(){return this.listBox},getDestinationListBox:function(){var e=this.getSourceListBox();return e&&e.options.connectWith?u(j+e.options.connectWith).data(c):null},getItems:function(){var e=this.getSourceListBox();return e?u(e.select()):u()}});F.current.register(C,ye);var xe=ke.extend({canExecute:function(){var e=this.getSourceListBox();return e?e.select().length>0:false},getSourceListBox:function(){var e=this.getDestinationListBox();return e&&e.options.connectWith?u(j+e.options.connectWith).data(c):null},getDestinationListBox:function(){return this.listBox},getItems:function(){var e=this.getSourceListBox();return e?u(e.select()):u()}});F.current.register(S,xe);var Ce=ye.extend({canExecute:function(){var e=this.getSourceListBox();return e?e.wrapper.find(v).length>0:false},getItems:function(){var e=this.getSourceListBox();return e?e.items():u()},getUpdatedSelection:t,updateSelection:t});F.current.register(T,Ce);var Se=xe.extend({canExecute:function(){var e=this.getSourceListBox();return e?e.wrapper.find(v).length>0:false},getItems:function(){var e=this.getSourceListBox();return e?e.items():u()},getUpdatedSelection:t,updateSelection:t});F.current.register(D,Se);var z=e.extend({init:function(e,t){var i=this;i.element=u(e).addClass(m);i.options=d({},i.options,t);i.listBox=i.options.listBox;i._initTemplates();i._createTools();i._updateToolStates();i._attachEventHandlers()},destroy:function(){var e=this;e._detachEventHandlers();o.destroy(e.element);e.element.remove();e.element=null},options:{position:M,tools:[]},_initTemplates:function(){this.templates={tool:L("<li>"+"<a href='\\\\#' class='k-button k-button-icon' data-command='#= command #' title='#= text #' aria-label='#= text #' role='button'>"+"<span class='k-icon #= iconClass #'></span>"+"</a>"+"</li>")}},_createTools:function(){var e=this;var t=e.options.tools;var i=t.length;var n=e.options.messages.tools;var r=e._createToolList();var a;var o;for(o=0;o<i;o++){a=d({},z.defaultTools[t[o]],{text:n[t[o]]});if(a){r.append(u(e.templates.tool(a)))}}e.element.append(r)},_createToolList:function(){return u("<ul class='k-reset' />")},_attachEventHandlers:function(){var e=this;e.element.on(X,G,r(e._onToolClick,e))},_detachEventHandlers:function(){this.element.off(i).find("*").off(i)},_onToolClick:function(e){e.preventDefault();this._executeToolCommand(u(e.currentTarget).data(ne))},_executeToolCommand:function(e){var t=this;var i=t.listBox;if(i){i._executeCommand(e)}},_updateToolStates:function(){var e=this;var t=e.options.tools;var i=t.length;var n;for(n=0;n<i;n++){e._updateToolState(t[n])}},_updateToolState:function(e){var t=this;var i=F.current.create(e,{listBox:t.listBox});var n=t.element.find("[data-command='"+e+"']");var r=n[0];if(r&&i&&i.canExecute){if(i.canExecute()){n.removeClass(f).removeAttr(I)}else{n.addClass(f).attr(I,"-1")}}}});z.defaultTools={remove:{command:w,iconClass:"k-i-x"},moveUp:{command:y,iconClass:"k-i-arrow-60-up"},moveDown:{command:x,iconClass:"k-i-arrow-60-down"},transferTo:{command:C,iconClass:"k-i-arrow-60-right"},transferFrom:{command:S,iconClass:"k-i-arrow-60-left"},transferAllTo:{command:T,iconClass:"k-i-arrow-double-60-right"},transferAllFrom:{command:D,iconClass:"k-i-arrow-double-60-left"}};d(me,{ToolBar:z});function Te(e){return u(e).is(":button,a,:input,a>.k-icon,textarea,span.k-select,span.k-icon,span.k-link,label.k-checkbox-label,.k-input,.k-multiselect-wrap,.k-picker-wrap,.k-picker-wrap>.k-selected-color,.k-tool-icon,.k-dropdown")}})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.loader",["kendo.core"],e)})(function(){var e={id:"loader",name:"Loader",category:"web",description:"The Loader is a visual indicator of loading data across different parts of the page.",depends:["core"]};(function(u,c){var n=window.kendo,r=n.ui.Widget,e=n.ui,f="k-hidden",o="aria-label",h="aria-hidden";var p={loader:"k-widget k-widget-2021 k-loader",canvas:"k-loader-canvas",segment:"k-loader-segment"};var v={pulsing:{className:"pulsing-2",segments:2},"infinite-spinner":{className:"spinner-3",segments:3},"converging-spinner":{className:"spinner-4",segments:4}};var t=r.extend({init:function(e,t){var i=this;r.fn.init.call(i,e,t);i._render();i._appearance();n.notify(i)},destroy:function(){var e=this;r.fn.destroy.call(e)},options:{name:"Loader",themeColor:"primary",sizes:{small:"sm",medium:"md",large:"lg"},size:"medium",type:"pulsing",visible:true,messages:{loading:"Loading"},_classNames:[]},_render:function(){var e=this,t=e.element,i=e.options.type,n=v[i]===c?i:v[i],r=[];t.empty().attr(o,e.options.messages.loading);if(n.segments){for(var a=0;a<n.segments;a+=1){r.push(u("<span/>").addClass(p.segment))}}u("<div>").addClass(p.canvas).append(r).appendTo(t)},_appearance:function(){var e=this;e._themeColor=e.options.themeColor;e._sizes=e.options.sizes;e._size=e.options.size;e._type=e.options.type;e._visible=e.options.visible;e._updateClassNames()},_updateClassNames:function(){var i=this,e=[p.loader],n=i.options._classNames,t=i._themeColor,r=i._sizes,a=i._size,o=i._type,s=v[o]===c?o:v[o],l=r[a]===c?a:r[a],d=i._visible;i.element.removeClass(function(e,t){if(t.indexOf("k-")===0&&n.indexOf(t)===-1){i.element.removeClass(t)}});if(typeof t==="string"&&t!==""&&t!=="inherit"){e.push("k-loader-"+t)}if(typeof a==="string"&&a!==""&&l!==""){e.push("k-loader-"+l)}if(typeof o==="string"&&o!==""){e.push("k-loader-"+(u.isPlainObject(s)?s.className:o))}if(d===false){e.push(f)}i.element.attr(h,!d);i.element.addClass(e.join(" "))},setOptions:function(e){var t=this;r.fn.setOptions.call(t,e);t._render();t._appearance()},themeColor:function(e){var t=this;if(arguments.length===0||e===c){return t._themeColor}t._themeColor=e;t._updateClassNames()},hide:function(){var e=this;e._visible=false;e._updateClassNames()},show:function(){var e=this;e._visible=true;e._updateClassNames()}});e.plugin(t)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.upload",["kendo.core"],e)})(function(){var e={id:"upload",name:"Upload",category:"web",description:"The Upload widget uses progressive enhancement to deliver the best possible uploading experience to users.",depends:["core"]};(function(c,B){var f=window.kendo,a=f.ui.Widget,u=f.antiForgeryTokens,l=f.logToConsole,L=/\.([^\.]+)$/,o=".kendoUpload",s="select",h="upload",d="success",p="error",e="complete",v="cancel",n="clear",m="pause",g="resume",r="progress",_="remove",b="validationErrors",w="invalidMaxFileSize",k="invalidMinFileSize",i="invalidFileExtension",H=1e3,N=2e3;var y={loading:"k-i-upload",warning:"k-i-warning",success:"k-i-check"};var x=a.extend({init:function(e,t){var i=this;a.fn.init.call(i,e,t);i.name=e.name;i.multiple=i.options.multiple;i.directory=i.options.directory;i.localization=i.options.localization;var n=i.element;i.wrapper=n.closest(".k-upload");if(i.wrapper.length===0){i.wrapper=i._wrapInput(n)}i._activeInput(n);i.toggle(i.options.enabled);var r=i._ns=o+"-"+f.guid();n.closest("form").on("submit"+r,c.proxy(i._onParentFormSubmit,i)).on("reset"+r,c.proxy(i._onParentFormReset,i));i._initUploadModule();i._toggleDropZone();i.wrapper.on("click",".k-upload-action",c.proxy(i._onFileAction,i)).on("click",".k-clear-selected",c.proxy(i._onClearSelected,i)).on("click",".k-upload-selected",c.proxy(i._onUploadSelected,i));if(i.element.val()){i._onInputChange({target:i.element})}},events:[s,h,d,p,e,v,n,r,_,m,g],options:{name:"Upload",enabled:true,multiple:true,directory:false,showFileList:true,template:"",files:[],async:{autoRetryAfter:0,bufferChunkSize:1e7,maxAutoRetries:1,removeVerb:"POST",autoUpload:true,withCredentials:true,accept:"*/*; q=0.5, application/json",useArrayBuffer:false},localization:{select:"Select files...",cancel:"Cancel",retry:"Retry",remove:"Remove",pause:"Pause",resume:"Resume",clearSelectedFiles:"Clear",uploadSelectedFiles:"Upload",dropFilesHere:"Drop files here to upload",invalidFiles:"Invalid file(s). Please check file upload requirements.",statusUploading:"uploading",statusUploaded:"uploaded",statusWarning:"warning",statusFailed:"failed",headerStatusUploading:"Uploading...",headerStatusPaused:"Paused",headerStatusUploaded:"Done",uploadSuccess:"File(s) uploaded successfully.",uploadFail:"File(s) failed to upload.",invalidMaxFileSize:"File size too large.",invalidMinFileSize:"File size too small.",invalidFileExtension:"File type not allowed."},validation:{allowedExtensions:[],maxFileSize:0,minFileSize:0},dropZone:""},_initUploadModule:function(){var e=this,t=e.options;if(t.async.saveUrl){e._module=e._supportsFormData()?new T(e):new S(e);e._async=true;var i=t.files;if(i.length>0){e._renderInitialFiles(i)}}else{e._module=new C(e)}},setOptions:function(e){var t=this,i=t.element;c(t.options.dropZone).off(t._ns);a.fn.setOptions.call(t,e);t.multiple=t.options.multiple;t.directory=t.options.directory;i.attr("multiple",t._supportsMultiple()?t.multiple:false);if(t.directory){i.attr("webkitdirectory",t.directory);i.attr("directory",t.directory)}t.toggle(t.options.enabled);t._initUploadModule();t._toggleDropZone()},enable:function(e){e=typeof e==="undefined"?true:e;this.toggle(e)},disable:function(){this.toggle(false)},toggle:function(e){e=typeof e==="undefined"?e:!e;this.wrapper.toggleClass("k-state-disabled",e);this.element.prop("disabled",e)},focus:function(){this.element.focus()},destroy:function(){var e=this;var t=c(e.options.dropZone);c(document).add(c(".k-dropzone",e.wrapper)).add(e.wrapper.closest("form")).off(e._ns);if(t.length>0){t.off(e._ns)}c(e.element).off(o);a.fn.destroy.call(e)},pause:function(e){this._module.onPause({target:c(e,this.wrapper)});var t=e.find(".k-i-pause-sm");t.removeClass("k-i-pause-sm").addClass("k-i-play-sm").attr("title",this.localization.resume);c(t).parent().attr("aria-label",this.localization.resume)},resume:function(e){this._module.onResume({target:c(e,this.wrapper)});var t=e.find(".k-i-play-sm");t.removeClass("k-i-play-sm").addClass("k-i-pause-sm").attr("title",this.localization.pause);c(t).parent().attr("aria-label",this.localization.pause)},upload:function(){var e=this;e._module.onSaveSelected()},getFiles:function(){var e=this;var t;var i=[];var n=e.wrapper.find(".k-file");for(var r=0;r<n.length;r++){t=c(n[r]).data("fileNames");if(t){for(var a=0;a<t.length;a++){i.push(t[a])}}}return i},clearAllFiles:function(){var i=this;var e=i.wrapper.find(".k-file");e.each(function(e,t){i._removeFileByDomElement(t,false)})},removeAllFiles:function(){var i=this;var e=i.wrapper.find(".k-file");e.each(function(e,t){i._removeFileByDomElement(t,true)})},removeFileByUid:function(e){this._removeFileByUid(e,true)},clearFileByUid:function(e){this._removeFileByUid(e,false)},_removeFileByUid:function(e,t){var i=this;var n;if(typeof e!=="string"){return}n=c(".k-file["+f.attr("uid")+'="'+e+'"]',i.wrapper);if(n.length>0){i._removeFileByDomElement(n,t)}},clearFile:function(e){this._removeFile(e,false)},removeFile:function(e){this._removeFile(e,true)},_removeFile:function(i,n){var r=this;var e=r.wrapper.find(".k-file");var a;if(typeof i==="function"){e.each(function(e,t){a=c(t).data("fileNames");if(i(a)){r._removeFileByDomElement(t,n)}})}},_removeFileByDomElement:function(e,t){var i=this;var n={target:c(e,i.wrapper)};var r;if(i.options.async.saveUrl){if(c(e).hasClass("k-file-progress")){i._module.onCancel(n)}else{i._module.onRemove(n,{},t)}r=c(".k-file",i.wrapper);if(r.length===0){i._hideHeaderUploadstatus()}else{i._updateHeaderUploadStatus()}}else{i._module.onRemove(n,{},t)}},_addInput:function(e){if(!e[0].nodeType){return}var t=this,i=e.clone().val("");i.insertAfter(t.element).data("kendo"+t.options.prefix+t.options.name,t);c(t.element).hide().attr("tabindex","-1").removeAttr("id").off(o);t._activeInput(i);t.element.focus()},_activeInput:function(e){var t=this,i=t.wrapper;t.element=e;if(t.directory){e.attr("webkitdirectory",t.directory);e.attr("directory",t.directory)}e.attr("multiple",t._supportsMultiple()?t.multiple:false).attr("autocomplete","off").on("click"+o,function(e){if(i.hasClass("k-state-disabled")){e.preventDefault()}}).on("focus"+o,function(){c(this).parent().addClass("k-state-focused")}).on("blur"+o,function(){c(this).parent().removeClass("k-state-focused")}).on("change"+o,c.proxy(t._onInputChange,t)).on("keydown"+o,c.proxy(t._onInputKeyDown,t))},_onInputKeyDown:function(e){var t=this;var i=t.wrapper.find(".k-upload-action:visible:first");if(e.keyCode===f.keys.TAB&&i.length>0&&!e.shiftKey){e.preventDefault();i.focus()}},_onInputChange:function(e){var t=this;var i=c(e.target);var n=I(t._inputFiles(i),t._isAsyncNonBatch());M(n,t.options.validation);var r=t.trigger(s,{files:n});if(r){t._addInput(i);i.remove()}else{t._module.onSelect({target:i},n)}},_readDirectory:function(e){var t=new c.Deferred;var i=e.createReader();var n=[];var r=function(){i.readEntries(function(e){if(!e.length){t.resolve(n)}else{n=n.concat(e);r()}},t.reject)};r();return t.promise()},_readFile:function(e){var t=this;var i=e.fullPath;e.file(function(e){e.relativePath=i.slice(1);t.droppedFolderFiles.push(e);t.droppedFolderCounter--;if(t.droppedFolderCounter===0){setTimeout(function(){if(t.droppedFolderCounter===0){if(t.droppedFolderFiles.length){t._proceedDroppedItems(t.droppedFolderFiles);t.droppedFolderFiles=[]}}},0)}},function(){l("File error.")})},_traverseFileTree:function(e,t){var i=this;if(!t){i.droppedFolderCounter--}this._readDirectory(e).then(function(e){i.droppedFolderCounter+=e.length;for(var t=0;t<e.length;t++){if(e[t].isFile){i._readFile(e[t])}else if(e[t].isDirectory){i._traverseFileTree(e[t])}}})},_onDrop:function(e){var t=e.originalEvent.dataTransfer;var i=this;var n=t.files;var r;F(e);if(i.options.directoryDrop&&t.items){r=t.items.length;i.droppedFolderCounter=0;i.droppedFolderFiles=[];for(var a=0;a<r;a++){if(t.items[a].webkitGetAsEntry){var o=t.items[a].webkitGetAsEntry();if(o.isDirectory){i._traverseFileTree(o,true)}else if(o.isFile){i.droppedFolderFiles.push(t.files[a])}}else{i._proceedDroppedItems(n)}}}else{i._proceedDroppedItems(n)}},_proceedDroppedItems:function(e){var t=this;var i=I(A(e),t._isAsyncNonBatch());if(e.length>0&&!t.wrapper.hasClass("k-state-disabled")){if(!t.multiple&&i.length>1){i.splice(1,i.length-1)}M(i,t.options.validation);var n=t.trigger(s,{files:i});if(!n){t._module.onSelect({target:c(".k-dropzone",t.wrapper)},i)}}},_filesContainValidationErrors:function(e){var i=false;c(e).each(function(e,t){if(t[b]&&t[b].length>0){i=true;return false}});return i},_isAsyncNonBatch:function(){return this._async&&!this.options.async.batch||false},_renderInitialFiles:function(e){var t=this;var i=0;e=I(e,true);for(i=0;i<e.length;i++){var n=e[i];var r=t._enqueueFile(n.name,{fileNames:[n]});r.addClass("k-file-success").data("files",[e[i]]);if(t._supportsRemove()){t._fileAction(r,_)}}},_prepareTemplateData:function(e,t){var i=t.fileNames,n={},r=0,a=0;for(a=0;a<i.length;a++){r+=i[a].size}n.name=e;n.size=r;n.files=t.fileNames;return n},_prepareDefaultSingleFileEntryTemplate:function(e){var t=this;var i=e.fileNames[0];var n=R(e.fileNames);var r=f.getFileGroup(i.extension,true);var a=i[b];var o="";if(a&&a.length>0){o+="<li class='k-file k-file-invalid'><div class='k-progressbar k-hidden'><span class='k-progress'></span></div>"+"<span class='k-file-invalid-group-wrapper'>"+"<span class='k-file-group k-icon k-i-"+r+"'></span>"+"<span class='k-file-state'></span>"+"</span>"+"<span class='k-file-name-size-wrapper'>"+"<span class='k-file-name k-file-name-invalid' title='"+i.name+"'>"+i.name+"</span>"+"<span class='k-file-validation-message k-text-error'>"+t.localization[a[0]]+"</span>"+"</span>"}else{o+="<li class='k-file'><div class='k-progressbar k-hidden'><span class='k-progress'></span></div>"+"<span class='k-file-group-wrapper'>"+"<span class='k-file-group k-icon k-i-"+r+"'></span>"+"<span class='k-file-state'></span>"+"</span>"+"<span class='k-file-name-size-wrapper'><span class='k-file-name' title='"+i.name+"'>"+i.name+"</span>"+"<span class='k-file-size'>"+n+"</span></span>"}o+="<strong class='k-upload-status'></strong>";return c(o)},_prepareDefaultMultipleFileEntriesTemplate:function(e){var t=this;var i=e.fileNames;var n=t._filesContainValidationErrors(i);var r=R(i);var a="";var o,s;if(n){a+="<li class='k-file k-file-invalid'><div class='k-progressbar k-hidden'><span class='k-progress'></span></div>"+"<span class='k-multiple-files-invalid-group-wrapper'>"+"<span class='k-file-group k-icon k-i-files'></span>"}else{a+="<li class='k-file'><div class='k-progressbar k-hidden'><span class='k-progress'></span></div>"+"<span class='k-multiple-files-group-wrapper'>"+"<span class='k-file-group k-icon k-i-files'></span>"}a+="<span class='k-file-state'></span></span>";i.sort(function(e,t){if(e[b]){return-1}if(t[b]){return 1}return 0});a+="<span class='k-multiple-files-wrapper'>";for(o=0;o<i.length;o++){s=i[o];var l=R([s]);a+="<span class='k-file-name-size-wrapper'>";if(s[b]&&s[b].length>0){a+="<span class='k-file-name k-file-name-invalid' title='"+s.name+"'>"+s.name+"</span>"}else{a+="<span class='k-file-name' title='"+s.name+"'>"+s.name+"</span>"}a+="<span class='k-file-size'>"+l+"</span></span>"}if(n){a+="<span class='k-file-validation-message k-text-error'>"+t.localization.invalidFiles+"</span>"}else{a+="<span class='k-file-information'>Total: "+i.length+" files, "+r+"</span>"}a+="</span><strong class='k-upload-status'></strong>";return c(a)},_enqueueFile:function(e,t){var i=this;var n;var r;var a=t.fileNames[0].uid;var o=c(".k-upload-files",i.wrapper);var s=i.options;var l=s.template;var d;var u;if(o.length===0){o=c("<ul class='k-upload-files k-reset'></ul>").appendTo(i.wrapper);if(!i.options.showFileList){o.hide()}i.wrapper.removeClass("k-upload-empty")}n=c(".k-file",o);if(!l){if(t.fileNames.length===1){r=i._prepareDefaultSingleFileEntryTemplate(t)}else{r=i._prepareDefaultMultipleFileEntriesTemplate(t)}}else{d=i._prepareTemplateData(e,t);l=f.template(l);r=c("<li class='k-file'>"+l(d)+"</li>");r.find(".k-upload-action").addClass("k-button k-button-icon k-flat");i.angular("compile",function(){return{elements:r,data:[d]}})}r.attr(f.attr("uid"),a).appendTo(o).data(t);if(!i._async){c(".k-progress",r).width("100%")}if(!i.multiple&&n.length>0){u={files:n.data("fileNames"),headers:{}};if(!i.trigger(_,u)){i._module.onRemove({target:c(n,i.wrapper)},u)}}return r},_removeFileEntry:function(e){var t=this;var i=e.closest(".k-upload-files");var n,r,a;e.remove();n=c(".k-file",i);r=c(".k-file-success, .k-file-error",i);a=c(".k-file-invalid",i);if(r.length===n.length||a.length===n.length){this._hideActionButtons()}if(n.length===0){i.remove();t.wrapper.addClass("k-upload-empty");t._hideHeaderUploadstatus()}else{t._updateHeaderUploadStatus()}},_fileAction:function(e,t,i){var n={remove:"k-i-x",cancel:"k-i-cancel",retry:"k-i-retry",pause:"k-i-pause-sm"};var r={remove:"k-i-close",cancel:"k-i-cancel",retry:"k-i-reload-sm",pause:"k-i-pause-sm"};var a;if(!n.hasOwnProperty(t)){return}if(!i){this._clearFileAction(e)}if(!this.options.template){if(!i){e.find(".k-upload-status .k-upload-action").remove()}e.find(".k-upload-status").append(this._renderAction(n[t],this.localization[t],r[t]))}else{a=e.find(".k-upload-action").first();if(!a.find(".k-icon").length){a.addClass("k-button").append("<span class='k-icon "+r[t]+" "+n[t]+"' title='"+this.localization[t]+"'"+"aria-label='"+this.localization[t]+"'></span>").show()}else if(a.next(".k-upload-action").length){a.next(".k-upload-action").addClass("k-button").append("<span class='k-icon "+r[t]+" "+n[t]+"' title='"+this.localization[t]+"'"+"aria-label='"+this.localization[t]+"'></span>").show()}}},_fileState:function(e,t){var i=this.localization,n={uploading:{text:i.statusUploading},uploaded:{text:i.statusUploaded},failed:{text:i.statusFailed}},r=n[t];if(r){c("span.k-file-state",e).text(r.text)}},_renderAction:function(e,t,i){if(e!==""){return c("<button type='button' class='k-button k-button-icon k-flat k-upload-action' aria-label='"+t+"'>"+"<span class='k-icon "+i+" "+e+"' title='"+t+"'></span>"+"</button>").on("focus",function(){c(this).addClass("k-state-focused")}).on("blur",function(){c(this).removeClass("k-state-focused")})}else{return c("<button type='button' class='k-button'>"+t+"</button>")}},_clearFileAction:function(e){c(".k-upload-action",e).empty().hide()},_onFileAction:function(e){var t=this;if(!t.wrapper.hasClass("k-state-disabled")){var i=c(e.target).closest(".k-upload-action");var n=i.find(".k-icon");var r=i.closest(".k-file");var a=r.data("fileNames");var o=t._filesContainValidationErrors(a);var s={files:a,headers:{}};t._retryClicked=false;if(n.hasClass("k-i-x")){if(!t.trigger(_,s)){t._module.onRemove({target:c(r,t.wrapper)},s,!o)}}else if(n.hasClass("k-i-cancel")){t.trigger(v,s);t._module.onCancel({target:c(r,t.wrapper)});t._checkAllComplete();t._updateHeaderUploadStatus()}else if(n.hasClass("k-i-pause-sm")){t.trigger(m,s);t.pause(r);t._updateHeaderUploadStatus()}else if(n.hasClass("k-i-play-sm")){t.trigger(g,s);t.resume(r)}else if(n.hasClass("k-i-retry")){c(".k-i-warning",r).remove();c(".k-progressbar",r).finish().show();t._module.onRetry({target:c(r,t.wrapper)});t._retryClicked=true}}return false},_onUploadSelected:function(){var e=this;var t=e.wrapper;if(!t.hasClass("k-state-disabled")){this._module.onSaveSelected()}return false},_onClearSelected:function(){var e=this;var t=e.wrapper;var i={};if(!t.hasClass("k-state-disabled")&&!e.trigger(n,i)){e.clearAllFiles()}return false},_onFileProgress:function(e,t){var i;if(t>100){t=100}c(".k-progressbar",e.target).removeClass("k-hidden");if(!this.options.template){i=c(".k-upload-pct",e.target);if(i.length===0){c(".k-upload-status",e.target).prepend("<span class='k-upload-pct'></span>")}if(t!==100){c(".k-upload-pct",e.target).text(t+"%")}else{c(".k-upload-pct",e.target).remove()}c(".k-progress",e.target).width(t+"%")}else{c(".k-progress",e.target).width(t+"%")}this.trigger(r,{files:z(e).data("fileNames"),percentComplete:t})},_onUploadSuccess:function(e,t,i){var n=this;var r=z(e);var a=r.data("fileNames");var o=r.find(".k-file-information");var s=r.find(".k-file-size");var l=n.trigger(d,{files:r.data("fileNames"),response:t,operation:"upload",XMLHttpRequest:i});if(l){n._setUploadErrorState(r)}else{n._fileState(r,"uploaded");r.removeClass("k-file-progress").addClass("k-file-success");if(o.length>0){o.addClass("k-hidden").after('<span class="k-file-validation-message k-text-success">'+a.length+" "+n.localization.uploadSuccess+"</span>")}else if(s.length>0){s.addClass("k-hidden").after('<span class="k-file-validation-message k-text-success">'+n.localization.uploadSuccess+"</span>")}n._updateHeaderUploadStatus();if(n._supportsRemove()){n._fileAction(r,_)}else{n._clearFileAction(r)}}n._hideUploadProgress(r);n._checkAllComplete()},_onUploadError:function(e,t){var i=this;var n=i._module;var r=z(e);var a=r.data("uid");i._setUploadErrorState(r);i.trigger(p,{operation:"upload",files:r.data("fileNames"),XMLHttpRequest:t});l("Server response: "+t.responseText);if(!i.options.async.chunkSize){i._hideUploadProgress(r)}else{if(n._decreasePosition){n._decreasePosition(a)}}i._checkAllComplete();if(this.options.async.autoRetryAfter){this._autoRetryAfter(r)}},_autoRetryAfter:function(e){var t=this;var i=this._module.retries;if(!i){return}if(!i[e.data("uid")]){i[e.data("uid")]=1}if(i[e.data("uid")]<=this.options.async.maxAutoRetries){i[e.data("uid")]++;setTimeout(function(){t._module.performUpload(e)},this.options.async.autoRetryAfter)}},_setUploadErrorState:function(e){var t=this,i,n=e.data("fileNames"),r=e.find(".k-file-information"),a=e.find(".k-file-size");t._fileState(e,"failed");e.removeClass("k-file-progress").addClass("k-file-error");if(r.length>0){r.addClass("k-hidden").after('<span class="k-file-validation-message k-text-error">'+n.length+" "+t.localization.uploadFail+"</span>")}else if(a.length>0){a.addClass("k-hidden").after('<span class="k-file-validation-message k-text-error">'+t.localization.uploadFail+"</span>")}t._updateUploadProgress(e);i=c(".k-upload-pct",e);if(i.length>0){i.remove()}this._updateHeaderUploadStatus();this._fileAction(e,"retry");this._fileAction(e,_,true);if(t._retryClicked){e.find(".k-i-retry").parent().focus()}},_updateUploadProgress:function(e){var t=this;if(!t.options.async.chunkSize){c(".k-progress",e).width("100%")}else{var i=e.data("uid");if(t._module.metaData){var n=t._module.metaData[i];if(n){var r=n.totalChunks?Math.round(n.chunkIndex/n.totalChunks*100):100;t._onFileProgress({target:c(e,t.wrapper)},r)}}}},_hideUploadProgress:function(e){c(".k-progressbar",e).delay(H).fadeOut(N,function(){c(this).find(".k-progress").css("width","0%")})},_showActionButtons:function(){var e=this;var t=c(".k-action-buttons",e.wrapper);var i=c(".k-upload-selected",e.wrapper);var n=c(".k-clear-selected",e.wrapper);if(i.length===0){i=e._renderAction("",this.localization.uploadSelectedFiles).addClass("k-upload-selected").addClass("k-primary");n=e._renderAction("",this.localization.clearSelectedFiles).addClass("k-clear-selected")}if(!t.length){t=c("<div />").addClass("k-action-buttons").append(n,i)}this.wrapper.append(t)},_hideActionButtons:function(){c(".k-action-buttons",this.wrapper).remove()},_showHeaderUploadStatus:function(e){var t=this;var i=t.localization;var n=c(".k-dropzone",t.wrapper);var r=c(".k-upload-status-total",t.wrapper);if(r.length!==0){r.remove()}c(".k-dropzone-hint",t.wrapper).addClass("k-hidden");r='<strong class="k-upload-status k-upload-status-total"><span class="k-icon"></span></strong>';if(e){r=c(r).append(i.headerStatusUploading);r.find(".k-icon").addClass(y.loading)}else{r=c(r).append(i.headerStatusUploaded);r.find(".k-icon").addClass(y.warning)}if(n.length>0){n.append(r)}else{c(".k-upload-button",t.wrapper).after(r)}},_updateHeaderUploadStatus:function(){var e=this;var t=c(".k-upload-status-total",this.wrapper);var i=c(".k-file",e.wrapper).not(".k-file-success, .k-file-error, .k-file-invalid");var n=c(".k-file-invalid",e.wrapper);var r=c(".k-file-error",e.wrapper);var a=c(".k-file",e.wrapper).find(".k-i-play-sm");var o,s;if(a.length&&(a.length===i.length||!e.options.async.concurrent)){s=c(".k-icon",t).removeClass().addClass("k-icon").addClass("k-i-pause-sm");t.html(s).append(e.localization.headerStatusPaused)}else if(i.length===0||n.length>0||r.length>0){o=c(".k-file.k-file-error, .k-file.k-file-invalid",e.wrapper);t=c(".k-upload-status-total",e.wrapper);s=c(".k-icon",t).removeClass().addClass("k-icon").addClass(o.length!==0?y.warning:y.success);t.html(s).append(e.localization.headerStatusUploaded)}},_hideHeaderUploadstatus:function(){var e=this,t=e.options.dropZone;c(".k-upload-status-total",this.wrapper).remove();if(t===""){c(".k-dropzone-hint",e.wrapper).removeClass("k-hidden")}},_onParentFormSubmit:function(){var e=this,t=e.element;if(typeof this._module.onAbort!=="undefined"){this._module.onAbort()}if(!t.value){var i=c(t);i.attr("disabled","disabled");window.setTimeout(function(){i.removeAttr("disabled")},0)}},_onParentFormReset:function(){c(".k-upload-files",this.wrapper).remove()},_supportsFormData:function(){return typeof FormData!="undefined"},_supportsMultiple:function(){var e=this._userAgent().indexOf("Windows")>-1;return!f.support.browser.opera&&!(f.support.browser.safari&&e)},_supportsDrop:function(){var e=this._userAgent().toLowerCase();var t=/chrome/.test(e);var i=!t&&/safari/.test(e);var n=i&&/windows/.test(e);return!n&&this._supportsFormData()&&this.options.async.saveUrl},_userAgent:function(){return navigator.userAgent},_setupDropZone:function(){var e=this;var t=e._ns;var i=c(".k-dropzone",e.wrapper).on("dragenter"+t,F).on("dragover"+t,function(e){if(e.originalEvent){e.originalEvent.dataTransfer.dropEffect="copy"}e.preventDefault()}).on("drop"+t,c.proxy(e._onDrop,e));if(!i.find(".k-dropzone-hint").length){i.append(c("<em class='k-dropzone-hint'>"+e.localization.dropFilesHere+"</em>"))}P(i,t,function(){if(!i.closest(".k-upload").hasClass("k-state-disabled")){i.addClass("k-dropzone-hovered")}},function(){i.removeClass("k-dropzone-hovered")});e._bindDocumentDragEventWrappers(i)},_setupCustomDropZone:function(){var t=this;var i=c(t.options.dropZone);if(!t.wrapper.find(".k-dropzone-hint").length){c(".k-dropzone",t.wrapper).append(c("<em class='k-dropzone-hint k-hidden'>"+t.localization.dropFilesHere+"</em>"))}else{c(".k-dropzone-hint",t.wrapper).addClass("k-hidden")}var e=t._ns;i.on("dragenter"+e,F).on("dragover"+e,function(e){if(e.originalEvent){e.originalEvent.dataTransfer.dropEffect="copy"}e.preventDefault()}).on("drop"+e,c.proxy(t._onDrop,t));P(i,e,function(e){if(!t.wrapper.hasClass("k-state-disabled")){i.removeClass("k-dropzone-hovered");i.addClass("k-dropzone-hovered");c(e.target).addClass("k-dropzone-hovered")}},function(){i.removeClass("k-dropzone-hovered");i.find(".k-dropzone-hovered").removeClass("k-dropzone-hovered")});t._bindDocumentDragEventWrappers(i)},_bindDocumentDragEventWrappers:function(e){var t=this;var i=t._ns;P(c(document),i,function(){if(!t.wrapper.hasClass("k-state-disabled")){e.addClass("k-dropzone-active");e.closest(".k-upload").removeClass("k-upload-empty");e.find(".k-dropzone-hint").removeClass("k-hidden")}},function(){e.removeClass("k-dropzone-active");e.find(".k-dropzone-hint").addClass("k-hidden");if(c("li.k-file",e.closest(".k-upload")).length===0){e.closest(".k-upload").addClass("k-upload-empty")}})},_toggleDropZone:function(){var e=this,t=e.options.dropZone;if(!e._supportsDrop()){return}c(t).off(e._ns);c(".k-dropzone",e.wrapper).off(e._ns);if(t!==""){e._setupCustomDropZone()}else{e._setupDropZone()}},_supportsRemove:function(){return!!this.options.async.removeUrl},_submitRemove:function(e,t,i,n){var r=this,a=r.options.async.removeField||"fileNames",o=c.extend(t.data,u());o[a]=e;jQuery.ajax({type:this.options.async.removeVerb,dataType:"json",dataFilter:K,url:this.options.async.removeUrl,traditional:true,data:o,headers:t.headers,success:i,error:n,xhrFields:{withCredentials:this.options.async.withCredentials}})},_wrapInput:function(e){var t=this;var i=t.options;e.wrap("<div class='k-widget k-widget-2021 k-upload'><div class='k-dropzone'><div class='k-button k-upload-button' aria-label='"+this.localization.select+"'></div></div></div>");if(!i.async.saveUrl){e.closest(".k-upload").addClass("k-upload-sync")}else{e.closest(".k-upload").addClass("k-upload-async")}e.closest(".k-upload").addClass("k-upload-empty");e.closest(".k-button").append("<span>"+this.localization.select+"</span>");return e.closest(".k-upload")},_checkAllComplete:function(){if(c(".k-file.k-file-progress",this.wrapper).length===0){this.trigger(e)}},_inputFiles:function(e){return t(e)}});var C=function(e){this.name="syncUploadModule";this.element=e.wrapper;this.upload=e;this.element.closest("form").attr("enctype","multipart/form-data").attr("encoding","multipart/form-data")};C.prototype={onSelect:function(e,t){var i=this.upload;var n=c(e.target);var r=i._filesContainValidationErrors(t);i._addInput(n);var a={fileNames:t};if(r){n.remove()}else{a.relatedInput=n}var o=i._enqueueFile(D(n),a);if(r){i._hideUploadProgress(o)}i._fileAction(o,_)},onRemove:function(e){var t=z(e);var i=t.data("relatedInput");if(i){i.remove()}this.upload._removeFileEntry(t)}};var S=function(e){this.name="iframeUploadModule";this.element=e.wrapper;this.upload=e;this.iframes=[]};x._frameId=0;S.prototype={onSelect:function(e,t){var i=this.upload;var n=c(e.target);var r=i._filesContainValidationErrors(t);var a=this.prepareUpload(n,t,r);if(i.options.async.autoUpload){if(!r){this.performUpload(a)}else{i._fileAction(a,_);i._showHeaderUploadStatus(false)}}else{i._fileAction(a,_);if(!r){i._showActionButtons()}else{i._updateHeaderUploadStatus()}}if(r){i._hideUploadProgress(a)}},prepareUpload:function(e,t,i){var n=this.upload;var r=c(n.element);var a=n.options.async.saveField||e.attr("name");var o,s,l,d;n._addInput(e);e.attr("name",a);if(!i){l=this.createFrame(n.name+"_"+x._frameId++);this.registerFrame(l);d=this.createForm(n.options.async.saveUrl,l.attr("name")).append(r);s={frame:l,relatedInput:r,fileNames:t}}else{e.remove();s={fileNames:t}}o=n._enqueueFile(D(e),s);if(l){l.data({form:d,file:o})}return o},performUpload:function(e){var t={files:e.data("fileNames")};var i=e.data("frame");var n=this.upload;var r=e.find(".k-file-validation-message");var a=e.find(".k-file-information");var o=e.find(".k-file-size");if(!n.trigger(h,t)){n._hideActionButtons();n._showHeaderUploadStatus(true);i.appendTo(document.body);var s=i.data("form").attr("action",n.options.async.saveUrl).appendTo(document.body);t.data=c.extend({},t.data,u());for(var l in t.data){var d=s.find("input[name='"+l+"']");if(d.length===0){d=c("<input>",{type:"hidden",name:l}).prependTo(s)}d.val(t.data[l])}n._fileAction(e,v);n._fileState(e,"uploading");c(e).removeClass("k-file-error").addClass("k-file-progress");if(r.length>0){r.remove()}if(a.length>0){a.removeClass("k-hidden")}else if(o.length>0){o.removeClass("k-hidden")}i.one("load",c.proxy(this.onIframeLoad,this));s[0].submit()}else{n._removeFileEntry(i.data("file"));this.cleanupFrame(i);this.unregisterFrame(i)}},onSaveSelected:function(){var n=this;var r=n.upload;c(".k-file",this.element).each(function(){var e=c(this);var t=Y(e);var i=r._filesContainValidationErrors(e.data("fileNames"));if(!t&&!i){n.performUpload(e)}})},onIframeLoad:function(e){var t=c(e.target),i;try{i=t.contents().text()}catch(e){i="Error trying to get server response: "+e}this.processResponse(t,i)},processResponse:function(t,e){var i=t.data("file"),n=this,r={responseText:e};$(e,function(e){c.extend(r,{statusText:"OK",status:"200"});n.upload._onFileProgress({target:c(i,n.upload.wrapper)},100);n.upload._onUploadSuccess({target:c(i,n.upload.wrapper)},e,r);n.cleanupFrame(t);n.unregisterFrame(t)},function(){c.extend(r,{statusText:"error",status:"500"});n.upload._onUploadError({target:c(i,n.upload.wrapper)},r)})},onCancel:function(e){var t=c(e.target).data("frame");this.stopFrameSubmit(t);this.cleanupFrame(t);this.unregisterFrame(t);this.upload._removeFileEntry(t.data("file"))},onRetry:function(e){var t=z(e);this.performUpload(t)},onRemove:function(e,t,i){var n=this;var r=n.upload;var a=z(e);var o=a.data("frame");if(o){n.unregisterFrame(o);r._removeFileEntry(a);n.cleanupFrame(o)}else{if(a.hasClass("k-file-success")){q(a,r,t,i)}else{r._removeFileEntry(a)}}},onAbort:function(){var e=this.element,t=this;c.each(this.iframes,function(){c("input",this.data("form")).appendTo(e);t.stopFrameSubmit(this[0]);this.data("form").remove();this.remove()});this.iframes=[]},createFrame:function(e){return c("<iframe"+" name='"+e+"'"+" id='"+e+"'"+" style='display:none;' />")},createForm:function(e,t){return c("<form enctype='multipart/form-data' method='POST'"+" action='"+e+"'"+" target='"+t+"'"+"/>")},stopFrameSubmit:function(e){if(typeof e.stop!="undefined"){e.stop()}else if(e.document){e.document.execCommand("Stop")}},registerFrame:function(e){this.iframes.push(e)},unregisterFrame:function(t){this.iframes=c.grep(this.iframes,function(e){return e.attr("name")!=t.attr("name")})},cleanupFrame:function(e){var t=e.data("form");e.data("file").data("frame",null);setTimeout(function(){t.remove();e.remove()},1)}};var T=function(e){this.name="formDataUploadModule";this.element=e.wrapper;this.upload=e;this.position={};this.metaData={};this.cancelled={};this.resume={};this.paused={};this.retries={}};T.prototype={onSelect:function(e,t){var i=this.upload;var n=this;var r=c(e.target);var a=this.prepareUpload(r,t);var o;var s;c.each(a,function(e){o=i._filesContainValidationErrors(c(this.data("fileNames")));if(i.options.async.autoUpload){if(!o){if(i.options.async.chunkSize){n.prepareChunk(this);s=this.prev();if(i.options.async.concurrent||e===0&&!s.length||e===0&&s.hasClass("k-file-success")){n.performUpload(this)}}else{n.performUpload(this)}}else{i._fileAction(this,_);i._showHeaderUploadStatus(false)}}else{i._fileAction(this,_);if(!o){i._showActionButtons();this.addClass("k-toupload")}else{i._updateHeaderUploadStatus()}}if(o){i._hideUploadProgress(this)}})},prepareUpload:function(e,t){var i=this.enqueueFiles(t);if(e.is("input")){c.each(i,function(){c(this).data("relatedInput",e)});e.data("relatedFileEntries",i);this.upload._addInput(e)}return i},enqueueFiles:function(e){var t=this.upload;var i;var n;var r=e.length;var a;var o;var s=[];if(t.options.async.batch===true){i=c.map(e,function(e){return e.name}).join(", ");if(t.directory||t.options.directoryDrop){c(e).each(function(){if(this.rawFile.webkitRelativePath||this.rawFile.relativePath){this.name=this.rawFile.webkitRelativePath||this.rawFile.relativePath}})}o=t._enqueueFile(i,{fileNames:e});o.data("files",e);s.push(o)}else{for(n=0;n<r;n++){a=e[n];i=a.name;if(t.directory||t.options.directoryDrop){if(a.rawFile.webkitRelativePath||a.rawFile.relativePath){a.name=a.rawFile.webkitRelativePath||a.rawFile.relativePath}}o=t._enqueueFile(i,{fileNames:[a]});o.data("files",[a]);s.push(o)}}return s},performUpload:function(e){var t=this.upload,i=this.createFormData(),n=this.createXHR(),r={files:e.data("fileNames"),XMLHttpRequest:n},a;var o=e.find(".k-file-validation-message");var s=e.find(".k-file-information");var l=e.find(".k-file-size");if(!t.trigger(h,r)){if(e.find(".k-i-cancel").length===0){if(t.options.async.chunkSize){t._fileAction(e,m)}t._fileAction(e,v,t.options.async.chunkSize)}if(!t.wrapper.find(".k-toupload").length){t._hideActionButtons()}t._showHeaderUploadStatus(true);if(r.formData){i=r.formData}else{r.data=c.extend({},r.data,u());for(var d in r.data){i.append(d,r.data[d])}a=e.data("files");if(a){this.populateFormData(i,a)}}t._fileState(e,"uploading");c(e).removeClass("k-file-error").addClass("k-file-progress");if(o.length>0){o.remove()}if(s.length>0){s.removeClass("k-hidden")}else if(l.length>0){l.removeClass("k-hidden")}if(t.options.async.useArrayBuffer&&window.FileReader){this._readFile(t.options.async.saveUrl,i,e,n)}else{this.postFormData(t.options.async.saveUrl,i,e,n)}}else{this.removeFileEntry(e)}},_readFile:function(t,i,n,r){var a=this;var o=a.upload;var s=n.data("files")[0];var e=new FileReader;e.onload=function(e){try{if(!a.fileArrayBuffer){a.fileArrayBuffer=e.target.result}else{a.fileArrayBuffer=a._appendBuffer(a.fileArrayBuffer,e.target.result)}}catch(e){o._onUploadError({target:c(n,o.wrapper)},r);return}if(a.position[s.uid]>s.size){a.postFormData(o.options.async.saveUrl,a.fileArrayBuffer,n,r);a.fileArrayBuffer=null}else{a._readFile(t,i,n,r)}};e.onerror=function(){o._onUploadError({target:c(n,o.wrapper)},r)};e.readAsArrayBuffer(a._getCurrentChunk(s.rawFile,s.uid))},_appendBuffer:function(e,t){var i=new Uint8Array(e.byteLength+t.byteLength);i.set(new Uint8Array(e),0);i.set(new Uint8Array(t),e.byteLength);return i.buffer},onSaveSelected:function(){var n=this;var r=n.upload;c(".k-toupload",this.element).filter(function(){var e=c(this);var t=Y(e);var i=r._filesContainValidationErrors(e.data("fileNames"));return!t&&!i}).each(function(e){var t=c(this);var i=t.prev();t.removeClass("k-toupload");if(r.options.async.chunkSize){n.prepareChunk(t);if(r.options.async.concurrent||e===0&&!i.length||(e===0&&i.hasClass("k-file-success")||i.hasClass("k-file-error"))){n.performUpload(t)}}else{n.performUpload(t)}})},onCancel:function(e){var t=z(e);if(this.upload.options.async.chunkSize){this.cancelled[t.data("uid")]=true}this.stopUploadRequest(t);this.removeFileEntry(t)},onPause:function(e){var t=z(e);var i=t.data("uid");var n=this.upload.options.async;if(n.chunkSize){this.retries[i]=n.maxAutoRetries+1;this.paused[i]=true;this.resume[i]=false}},onResume:function(e){var t=z(e);var i=t.data("uid");if(this.upload.options.async.chunkSize){delete this.paused[i];this.resume[i]=true;this.retries[t.data("uid")]=1;this._increaseChunkIndex(i);this.performUpload(t)}},onRetry:function(e){var t=z(e);var i=this.upload.options.async;if(i.chunkSize){this.retries[t.data("uid")]=i.maxAutoRetries+1;delete this.paused[t.data("uid")]}this.performUpload(t)},onRemove:function(e,t,i){var n=this;var r=n.upload;var a=z(e);var o=this.upload.options.async;if(o.chunkSize){this.retries[a.data("uid")]=o.maxAutoRetries+1}if(a.hasClass("k-file-success")){q(a,r,t,i)}else{n.removeFileEntry(a)}},createXHR:function(){return new XMLHttpRequest},postFormData:function(e,t,i,n){var r=this;i.data("request",n);n.addEventListener("load",function(e){r.onRequestSuccess.call(r,e,i)},false);n.addEventListener(p,function(e){r.onRequestError.call(r,e,i)},false);n.upload.addEventListener("progress",function(e){r.onRequestProgress.call(r,e,i)},false);n.open("POST",e,true);n.withCredentials=this.upload.options.async.withCredentials;var a=this.upload.options.async.accept;if(a){n.setRequestHeader("Accept",a)}n.send(t)},createFormData:function(){return new FormData},populateFormData:function(e,t){var i;var n;var r=t.length;var a;var o=this.upload;if(o.options.async.chunkSize){a=t[0].uid;i=this._getCurrentChunk(t[0].rawFile,a);e.append(o.options.async.saveField||o.name,i);var s=JSON.stringify(this.metaData[a]);e.append("metadata",s)}else{for(n=0;n<r;n++){e.append(o.options.async.saveField||o.name,t[n].rawFile)}}return e},onRequestSuccess:function(e,a){var o=e.target,s=this;function t(){s.upload._onUploadError({target:c(a,s.upload.wrapper)},o)}function i(e){var t=s.upload.options.async.batch;var i=s.upload.options.async.chunkSize;var n=s.upload.options.async.concurrent;var r=e.fileUid;if(s.paused[r]||s.cancelled[r]){return}delete s.retries[r];if(i&&!t&&!e.uploaded){s._increaseChunkIndex(r);s.performUpload(a)}else if(i&&!t&&!n&&a.next().length&&!a.next().hasClass("k-toupload")){s.upload._onFileProgress({target:c(a,s.upload.wrapper)},100);s._resetChunkIndex(r);s.upload._onUploadSuccess({target:c(a,s.upload.wrapper)},e,o);s.performUpload(a.next())}else{s.upload._onFileProgress({target:c(a,s.upload.wrapper)},100);s.upload._onUploadSuccess({target:c(a,s.upload.wrapper)},e,o);s.cleanupFileEntry(a)}}if(o.status>=200&&o.status<=299){$(o.responseText,i,t)}else{t()}},onRequestError:function(e,t){var i=e.target;this.upload._onUploadError({target:c(t,this.upload.wrapper)},i)},cleanupFileEntry:function(e){var t=e.data("relatedInput"),i=true;if(t){c.each(t.data("relatedFileEntries")||[],function(){if(this.parent().length>0&&this[0]!=e[0]){i=i&&this.hasClass("k-file-success")}});if(i){t.remove()}}},removeFileEntry:function(e){var t=this.upload.options.async.chunkSize;var i=this.upload.options.async.concurrent;var n=this.upload.wrapper.find(".k-upload-selected").length>0;this.cleanupFileEntry(e);if(t&&!i&&!n){if(e.next().length){this.performUpload(e.next())}}this.upload._removeFileEntry(e)},onRequestProgress:function(e,t){var i=Math.round(e.loaded*100/e.total);var n=t.data("uid");var r;if(this.upload.options.async.chunkSize){r=this.metaData[n];i=r&&r.totalChunks?Math.round(r.chunkIndex/r.totalChunks*100):100}this.upload._onFileProgress({target:c(t,this.upload.wrapper)},i)},stopUploadRequest:function(e){e.data("request").abort()},prepareChunk:function(e){var t=e.data("files")[0];var i=t.rawFile;var n=t.uid;var r=this.upload.options.async.chunkSize;this.position[n]=0;this.metaData[n]={chunkIndex:0,contentType:i.type,fileName:i.name,relativePath:t.name,totalFileSize:i.size,totalChunks:Math.ceil(i.size/r),uploadUid:n}},_decreaseChunkIndex:function(e){this.metaData[e].chunkIndex--},_increaseChunkIndex:function(e){this.metaData[e].chunkIndex++},_resetChunkIndex:function(e){this.metaData[e].chunkIndex=0},_decreasePosition:function(e){this.position[e]-=this.upload.options.async.chunkSize},_getCurrentChunk:function(e,t){var i=this.position[t];var n;var r=this.upload.options.async;var a=r.chunkSize||r.bufferChunkSize;if(!this.position[t]){this.position[t]=0}this.position[t]+=a;if(!!(n=this._getChunker(e))){return e[n](i,this.position[t])}else{return e}},_getChunker:function(e){if(e.slice){return"slice"}else if(e.mozSlice){return"mozSlice"}else if(e.webkitSlice){return"webkitSlice"}else{return null}}};function D(e){return c.map(t(e),function(e){return e.name}).join(", ")}function t(e){var t=e[0];if(t.files){return A(t.files)}else{return[{name:V(t.value),extension:E(t.value),size:null}]}}function A(e){return c.map(e,function(e){return O(e)})}function O(e){var t=e.name||e.fileName;return{name:f.htmlEncode(t),extension:E(t),size:typeof e.size=="number"?e.size:e.fileSize,rawFile:e}}function E(e){var t=e.match(L);return t?t[0]:""}function V(e){var t=e.lastIndexOf("\\");return t!=-1?e.substr(t+1):e}function I(e,t){var i=f.guid();return c.map(e,function(e){e.uid=t?f.guid():i;return e})}function M(e,t){var i=W(t.allowedExtensions);var n=t.maxFileSize;var r=t.minFileSize;for(var a=0;a<e.length;a++){U(e[a],i);j(e[a],r,n)}}function W(e){var t=c.map(e,function(e){var t=e.substring(0,1)==="."?e:"."+e;return t.toLowerCase()});return t}function U(e,t){if(t.length>0){if(t.indexOf(e.extension.toLowerCase())<0){e.validationErrors=e.validationErrors||[];if(c.inArray(i,e.validationErrors)===-1){e.validationErrors.push(i)}}}}function j(e,t,i){if(t!==0&&e.size<t){e.validationErrors=e.validationErrors||[];if(c.inArray(k,e.validationErrors)===-1){e.validationErrors.push(k)}}if(i!==0&&e.size>i){e.validationErrors=e.validationErrors||[];if(c.inArray(w,e.validationErrors)===-1){e.validationErrors.push(w)}}}function R(e){var t=0;if(typeof e[0].size=="number"){for(var i=0;i<e.length;i++){if(e[i].size){t+=e[i].size}}}else{return""}t/=1024;if(t<1024){return t.toFixed(2)+" KB"}else{return(t/1024).toFixed(2)+" MB"}}function G(e){return!e.multiple&&c(".k-file",e.wrapper).length>1}function q(a,o,e,t){if(!o._supportsRemove()){if(G(o)||!t){o._removeFileEntry(a)}return}var s=a.data("fileNames");var i=c.map(s,function(e){return e.name});if(t===false){o._removeFileEntry(a);return}o._submitRemove(i,e,function e(t,i,n){var r=o.trigger(d,{operation:"remove",files:s,response:t,XMLHttpRequest:n});if(!r){o._removeFileEntry(a)}},function e(t){if(G(o)){o._removeFileEntry(a)}o.trigger(p,{operation:"remove",files:s,XMLHttpRequest:t});l("Server response: "+t.responseText)})}function $(e,t,i){var n=false,r="";try{r=c.parseJSON(K(e));n=true}catch(e){i()}if(n){t(r)}}function K(e){if(typeof e==="undefined"||e===""){e="{}"}return e}function F(e){if(e.originalEvent){e.originalEvent.dataTransfer.dropEffect="copy"}e.stopPropagation();e.preventDefault()}function P(e,t,i,n){var r,a;e.on("dragenter"+t,function(e){i(e);a=new Date;if(!r){r=setInterval(function(){var e=new Date-a;if(e>100){n();clearInterval(r);r=null}},100)}}).on("dragover"+t,function(){a=new Date})}function Y(e){return e.is(".k-file-progress, .k-file-success, .k-file-error")}function z(e){return c(e.target).closest(".k-file")}f.ui.plugin(x)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.filebrowser",["kendo.listview","kendo.dropdownlist","kendo.upload","kendo.breadcrumb"],e)})(function(){var e={id:"filebrowser",name:"FileBrowser",category:"web",description:"",hidden:true,depends:["selectable","listview","dropdownlist","upload","breadcrumb"]};(function(l,n){var u=window.kendo,r=u.ui.Widget,s=l.isPlainObject,d=l.proxy,c=l.extend,a=u.support.placeholder,o=u.isFunction,f=/(^\/|\/$)/g,i="change",h="apply",p="error",v="click",m=".kendoFileBrowser",g=".kendoSearchBox",_="name",b="size",w="type",k={field:w,dir:"asc"},e=u.template('<div class="k-listview-item k-listview-item-empty"><span class="k-file-preview"><span class="k-file-icon k-icon k-i-none"></span></span><span class="k-file-name">${text}</span></div>'),y='<div class="k-widget k-widget-2021 k-filebrowser-toolbar k-toolbar k-floatwrap">'+"# if (showCreate) { #"+'<button type="button" class="k-button k-icon-button"><span class="k-icon k-i-folder-add"></span></button>'+"# } #"+"# if (showUpload) { # "+'<div class="k-widget k-widget-2021 k-upload"><div class="k-button k-button-icontext k-upload-button">'+'<span class="k-icon k-i-plus"></span>#=messages.uploadFile#<input type="file" name="file" /></div></div>'+"# } #"+"# if (showDelete) { #"+'<button type="button" class="k-button k-button-icon k-state-disabled"><span class="k-icon k-i-close"></span></button>'+"# } #"+'<div class="k-tiles-arrange">'+"<label>#=messages.orderBy#: <select></select></label>"+"</div>"+'<span class="k-toolbar-spacer"></span>'+'<input data-role="searchbox" />'+"</div>";c(true,u.data,{schemas:{filebrowser:{data:function(e){return e.items||e||[]},model:{id:"name",fields:{name:"name",size:"size",type:"type"}}}}});c(true,u.data,{transports:{filebrowser:u.data.RemoteTransport.extend({init:function(e){u.data.RemoteTransport.fn.init.call(this,l.extend(true,{},this.options,e))},_call:function(e,t){t.data=l.extend({},t.data,{path:this.options.path()});if(o(this.options[e])){this.options[e].call(this,t)}else{u.data.RemoteTransport.fn[e].call(this,t)}},read:function(e){this._call("read",e)},create:function(e){this._call("create",e)},destroy:function(e){this._call("destroy",e)},update:function(){},options:{read:{type:"POST"},update:{type:"POST"},create:{type:"POST"},destroy:{type:"POST"}}})}});function t(e,t,i){var n,r;e.on("dragenter"+m,function(){t();r=new Date;if(!n){n=setInterval(function(){var e=new Date-r;if(e>100){i();clearInterval(n);n=null}},100)}}).on("dragover"+m,function(){r=new Date})}function x(e,t){if(e===n||!e.match(/\/$/)){e=(e||"")+"/"}return e+t}function C(e){if(!e){return""}var t=" bytes";if(e>=1073741824){t=" GB";e/=1073741824}else if(e>=1048576){t=" MB";e/=1048576}else if(e>=1024){t=" KB";e/=1024}return Math.round(e*100)/100+t}function S(e,t){var i=e[t];if(s(i)){return i.from||i.field||t}return i}var T=r.extend({init:function(e,t){var i=this;t=t||{};r.fn.init.call(i,e,t);i.element.addClass("k-filebrowser");i.element.on(v+m,".k-filebrowser-toolbar button:not(.k-state-disabled):has(.k-i-close)",d(i._deleteClick,i)).on(v+m,".k-filebrowser-toolbar button:not(.k-state-disabled):has(.k-i-folder-add)",d(i._addClick,i)).on("keydown"+m,".k-listview-item.k-state-selected input",d(i._directoryKeyDown,i)).on("blur"+m,".k-listview-item.k-state-selected input",d(i._directoryBlur,i));i._dataSource();i.refresh();i.path(i.options.path)},options:{name:"FileBrowser",messages:{uploadFile:"Upload",orderBy:"Arrange by",orderByName:"Name",orderBySize:"Size",directoryNotFound:"A directory with this name was not found.",emptyFolder:"Empty Folder",deleteFile:'Are you sure you want to delete "{0}"?',invalidFileType:'The selected file "{0}" is not valid. Supported file types are {1}.',overwriteFile:'A file with name "{0}" already exists in the current directory. Do you want to overwrite it?',dropFilesHere:"drop file here to upload",search:"Search"},transport:{},path:"/",fileTypes:"*.*"},events:[p,i,h],destroy:function(){var e=this;r.fn.destroy.call(e);e.dataSource.unbind(p,e._errorHandler);e.element.add(e.list).add(e.toolbar).off(m);u.destroy(e.element)},value:function(){var e=this,t=e._selectedItem(),i,n=e.options.transport.fileUrl;if(t&&t.get(w)==="f"){i=x(e.path(),t.get(_)).replace(f,"");if(n){i=o(n)?n(i):u.format(n,encodeURIComponent(i))}return i}},_selectedItem:function(){var e=this.listView,t=e.select();if(t.length){return this.dataSource.getByUid(t.attr(u.attr("uid")))}},_toolbar:function(){var t=this,e=u.template(y),i=t.options.messages,n=[{text:i.orderByName,value:"name"},{text:i.orderBySize,value:"size"}];t.toolbar=l(e({messages:i,showUpload:t.options.transport.uploadUrl,showCreate:t.options.transport.create,showDelete:t.options.transport.destroy})).appendTo(t.element).find(".k-upload input").kendoUpload({multiple:false,localization:{dropFilesHere:i.dropFilesHere},async:{saveUrl:t.options.transport.uploadUrl,autoUpload:true},upload:d(t._fileUpload,t),error:function(e){t._error({xhr:e.XMLHttpRequest,status:"error"})}}).end();t.upload=t.toolbar.find(".k-upload input").data("kendoUpload");t.arrangeBy=t.toolbar.find(".k-tiles-arrange select").kendoDropDownList({dataSource:n,dataTextField:"text",dataValueField:"value",change:function(){t.orderBy(this.value())}}).data("kendoDropDownList");t.searchBox=t.toolbar.find("input[data-role='searchbox']").kendoSearchBox({label:t.options.messages.search,change:function(){t.search(this.value())}}).data("kendoSearchBox");t._attachDropzoneEvents()},_attachDropzoneEvents:function(){var e=this;if(e.options.transport.uploadUrl){t(l(document.documentElement),l.proxy(e._dropEnter,e),l.proxy(e._dropLeave,e));e._scrollHandler=d(e._positionDropzone,e)}},_dropEnter:function(){this._positionDropzone();l(document).on("scroll"+m,this._scrollHandler)},_dropLeave:function(){this._removeDropzone();l(document).off("scroll"+m,this._scrollHandler)},_positionDropzone:function(){var e=this,t=e.element,i=t.offset();e.toolbar.find(".k-dropzone").addClass("k-filebrowser-dropzone").offset(i).css({width:t[0].clientWidth,height:t[0].clientHeight,lineHeight:t[0].clientHeight+"px"})},_removeDropzone:function(){this.toolbar.find(".k-dropzone").removeClass("k-filebrowser-dropzone").css({width:"",height:"",lineHeight:"",top:"",left:""})},_deleteClick:function(){var e=this,t=e.listView.select(),i=u.format(e.options.messages.deleteFile,t.find(".k-file-name").text());if(t.length&&e._showMessage(i,"confirm")){e.listView.remove(t)}},_addClick:function(){this.createDirectory()},_getFieldName:function(e){return S(this.dataSource.reader.model.fields,e)},_fileUpload:function(e){var i=this,t=i.options,n=t.fileTypes,r=new RegExp(("("+n.split(",").join(")|(")+")").replace(/\*\./g,".*."),"i"),a=e.files[0].name,o=e.files[0].size,s=_,l=b,d;if(r.test(a)){e.data={path:i.path()};d=i._createFile(a,o);if(!d){e.preventDefault()}else{i.upload.one("success",function(e){var t=i._insertFileToList(d);if(t._override){t.set(s,e.response[i._getFieldName(s)]);t.set(l,e.response[i._getFieldName(l)]);i.listView.dataSource.pushUpdate(t)}i._tiles=i.listView.items().filter("["+u.attr("type")+"=f]")})}}else{e.preventDefault();i._showMessage(u.format(t.messages.invalidFileType,a,n))}},_findFile:function(e){var t=this.dataSource.data(),i,n,r=w,a=_,o;e=e.toLowerCase();for(i=0,o=t.length;i<o;i++){if(t[i].get(r)==="f"&&t[i].get(a).toLowerCase()===e){n=t[i];break}}return n},_createFile:function(e,t){var i=this,n={},r=w,a=i._findFile(e);if(a){if(!i._showMessage(u.format(i.options.messages.overwriteFile,e),"confirm")){return null}else{a._override=true;return a}}n[r]="f";n[_]=e;n[b]=t;return n},_insertFileToList:function(e){var t;if(e._override){return e}var i=this.dataSource;var n=i.view();for(var r=0,a=n.length;r<a;r++){if(n[r].get(w)==="f"){t=r;break}}return i.insert(++t,e)},createDirectory:function(){var i=this,e,t,n=0,r=w,a=_,o=i.dataSource.data(),s=i._nameDirectory(),l=new i.dataSource.reader.model;for(e=0,t=o.length;e<t;e++){if(o[e].get(r)==="d"){n=e}}l.set(r,"d");l.set(a,s);i.listView.one("dataBound",function(){var e=i.listView.items().filter("["+u.attr("uid")+"="+l.uid+"]");if(e.length){this.edit(e)}this.element.scrollTop(e.attr("offsetTop")-this.element[0].offsetHeight);setTimeout(function(){i.listView.element.find(".k-edit-item input").select()})}).one("save",function(e){var t=e.model.get(a);if(!t){e.model.set(a,s)}else{e.model.set(a,i._nameExists(t,l.uid)?i._nameDirectory():t)}});i.dataSource.insert(++n,l)},_directoryKeyDown:function(e){if(e.keyCode==13){e.currentTarget.blur()}},_directoryBlur:function(){this.listView.save()},_nameExists:function(e,t){var i=this.dataSource.data(),n=w,r=_,a,o;for(a=0,o=i.length;a<o;a++){if(i[a].get(n)==="d"&&i[a].get(r).toLowerCase()===e.toLowerCase()&&i[a].uid!==t){return true}}return false},_nameDirectory:function(){var e="New folder",t=this.dataSource.data(),i=[],n=w,r=_,a,o,s;for(o=0,s=t.length;o<s;o++){if(t[o].get(n)==="d"&&t[o].get(r).toLowerCase().indexOf(e.toLowerCase())>-1){i.push(t[o].get(r))}}if(l.inArray(e,i)>-1){o=2;do{a=e+" ("+o+")";o++}while(l.inArray(a,i)>-1);e=a}return e},orderBy:function(e){this.dataSource.sort([{field:w,dir:"asc"},{field:e,dir:"asc"}])},search:function(e){this.dataSource.filter({field:_,operator:"contains",value:e})},_content:function(){var t=this;t.list=l('<div class="k-filemanager-listview" />').appendTo(t.element).on("dblclick"+m,".k-listview-item",d(t._dblClick,t));t.listView=new u.ui.ListView(t.list,{layout:"flex",flex:{direction:"row",wrap:"wrap"},dataSource:t.dataSource,template:t._itemTmpl(),editTemplate:t._editTmpl(),selectable:true,autoBind:false,dataBinding:function(e){t.toolbar.find(".k-i-close").parent().addClass("k-state-disabled");if(e.action==="remove"||e.action==="sync"){e.preventDefault();u.ui.progress(t.listView.content,false)}},dataBound:function(){if(t.dataSource.view().length){t._tiles=this.items().filter("["+u.attr("type")+"=f]")}else{this.content.append(e({text:t.options.messages.emptyFolder}))}},change:d(t._listViewChange,t)})},_dblClick:function(e){var t=this,i=l(e.currentTarget);if(i.hasClass("k-edit-item")){t._directoryBlur()}if(i.filter("["+u.attr("type")+"=d]").length){var n=t.dataSource.getByUid(i.attr(u.attr("uid")));if(n){t.path(x(t.path(),n.get(_)));t.breadcrumbs.value("/"+t.path())}}else if(i.filter("["+u.attr("type")+"=f]").length){t.trigger(h)}},_listViewChange:function(){var e=this._selectedItem();if(e){this.toolbar.find(".k-i-close").parent().removeClass("k-state-disabled");this.trigger(i,{selected:e})}},_dataSource:function(){var e=this,t=e.options,i=t.transport,n=c({},k),r={field:_,dir:"asc"},a,o={type:i.type||"filebrowser",sort:[n,r]};if(s(i)){i.path=d(e.path,e);o.transport=i}if(s(t.schema)){o.schema=t.schema}else if(i.type&&s(u.data.schemas[i.type])){a=u.data.schemas[i.type]}if(e.dataSource&&e._errorHandler){e.dataSource.unbind(p,e._errorHandler)}else{e._errorHandler=d(e._error,e)}e.dataSource=u.data.DataSource.create(o).bind(p,e._errorHandler)},_navigation:function(){var e=this,t=l('<div class="k-floatwrap"><nav></nav></div>').appendTo(this.element);e.breadcrumbs=t.find("nav:first").kendoBreadcrumb({editable:true,gap:50,value:e.options.path||"/",change:function(){e.path(this.value())}}).data("kendoBreadcrumb")},_error:function(e){var t=this,i;if(!t.trigger(p,e)){i=e.xhr.status;if(e.status=="error"){if(i=="404"){t._showMessage(t.options.messages.directoryNotFound)}else if(i!="0"){t._showMessage("Error! The requested URL returned "+i+" - "+e.xhr.statusText)}}else if(i=="timeout"){t._showMessage("Error! Server timeout.")}var n=t.dataSource;if(n.hasChanges()){n.cancelChanges()}}},_showMessage:function(e,t){return window[t||"alert"](e)},refresh:function(){var e=this;e._navigation();e._toolbar();e._content()},_editTmpl:function(){var e='<div class="k-listview-item k-state-selected" '+u.attr("uid")+'="#=uid#" ';e+=u.attr("type")+'="${'+w+'}">';e+="#if("+w+' == "d") { #';e+='<div class="k-file-preview"><span class="k-file-icon k-icon k-i-folder"></span></div>';e+="#}else{#";e+='<div class="k-file-preview"><span class="k-file-icon k-icon k-i-loading"></span></div>';e+="#}#";e+="#if("+w+' == "d") { #';e+='<span class="k-file-name"><input class="k-textbox" '+u.attr("bind")+'="value:'+_+'"/></span>';e+="#}#";e+="</div>";return d(u.template(e),{sizeFormatter:C})},_itemTmpl:function(){var e='<div class="k-listview-item" '+u.attr("uid")+'="#=uid#" ';e+=u.attr("type")+'="${'+w+'}">';e+="#if("+w+' == "d") { #';e+='<div class="k-file-preview"><span class="k-file-icon k-icon k-i-folder"></span></div>';e+="#}else{#";e+='<div class="k-file-preview"><span class="k-file-icon k-icon k-i-file"></span></div>';e+="#}#";e+='<span class="k-file-name">${'+_+"}</span>";e+="#if("+w+' == "f") { # <span class="k-file-size">${this.sizeFormatter('+b+")}</span> #}#";e+="</div>";return d(u.template(e),{sizeFormatter:C})},path:function(e){var t=this,i=t._path||"";if(e!==n){t._path=e.replace(f,"")+"/";t.dataSource.read({path:t._path});return}if(i){i=i.replace(f,"")}return i==="/"||i===""?"":i+"/"}});var D=r.extend({init:function(e,t){var i=this;t=t||{};r.fn.init.call(i,e,t);if(a){i.element.attr("placeholder",i.options.label)}i._wrapper();i.element.on("keydown"+g,d(i._keydown,i)).on("change"+g,d(i._updateValue,i));i.wrapper.on(v+g,"a",d(i._click,i));if(!a){i.element.on("focus"+g,d(i._focus,i)).on("blur"+g,d(i._blur,i))}},options:{name:"SearchBox",label:"Search",value:""},events:[i],destroy:function(){var e=this;e.wrapper.add(e.element).add(e.label).off(g);r.fn.destroy.call(e)},_keydown:function(e){if(e.keyCode===13){this._updateValue()}},_click:function(e){e.preventDefault();this._updateValue()},_updateValue:function(){var e=this,t=e.element.val();if(t!==e.value()){e.value(t);e.trigger(i)}},_blur:function(){this._updateValue();this._toggleLabel()},_toggleLabel:function(){if(!a){this.label.toggle(!this.element.val())}},_focus:function(){this.label.hide()},_wrapper:function(){var e=this.element,t=e.parents(".k-search-wrap");e[0].style.width="";e.addClass("k-input");if(!t.length){t=e.wrap(l('<div class="k-widget k-widget-2021 k-search-wrap k-textbox"/>')).parent();if(!a){l('<label style="display:block">'+this.options.label+"</label>").insertBefore(e)}l('<a href="#" class="k-icon k-i-zoom k-search"/>').appendTo(t)}this.wrapper=t;this.label=t.find(">label")},value:function(e){var t=this;if(e!==n){t.options.value=e;t.element.val(e);t._toggleLabel();return}return t.options.value}});u.ui.plugin(T);u.ui.plugin(D)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.imagebrowser",["kendo.filebrowser"],e)})(function(){var e={id:"imagebrowser",name:"ImageBrowser",category:"web",description:"",hidden:true,depends:["filebrowser"]};(function(l,u){var c=window.kendo,n=c.ui.FileBrowser,s=l.isPlainObject,d=l.proxy,f=l.extend,h=c.isFunction,r=/(^\/|\/$)/g,p="error",v=".kendoImageBrowser",m="name",g="size",a="type",_={field:a,dir:"asc"},e=c.template('<div class="k-listview-item k-listview-item-empty"><span class="k-file-preview"><span class="k-file-icon k-icon k-i-none"></span></span><span class="k-file-name">${text}</span></div>');f(true,c.data,{schemas:{imagebrowser:{data:function(e){return e.items||e||[]},model:{id:"name",fields:{name:"name",size:"size",type:"type"}}}}});f(true,c.data,{transports:{imagebrowser:c.data.RemoteTransport.extend({init:function(e){c.data.RemoteTransport.fn.init.call(this,l.extend(true,{},this.options,e))},_call:function(e,t){t.data=l.extend({},t.data,{path:this.options.path()});if(h(this.options[e])){this.options[e].call(this,t)}else{c.data.RemoteTransport.fn[e].call(this,t)}},read:function(e){this._call("read",e)},create:function(e){this._call("create",e)},destroy:function(e){this._call("destroy",e)},update:function(){},options:{read:{type:"POST"},update:{type:"POST"},create:{type:"POST"},destroy:{type:"POST"}}})}});function o(e){return e.offsetTop-l(e).height()}function b(e,t){if(e===u||!e.match(/\/$/)){e=(e||"")+"/"}return e+t}function i(e){if(!e){return""}var t=" bytes";if(e>=1073741824){t=" GB";e/=1073741824}else if(e>=1048576){t=" MB";e/=1048576}else if(e>=1024){t=" KB";e/=1024}return Math.round(e*100)/100+t}var t=n.extend({init:function(e,t){var i=this;t=t||{};n.fn.init.call(i,e,t);i.element.addClass("k-imagebrowser")},options:{name:"ImageBrowser",fileTypes:"*.png,*.gif,*.jpg,*.jpeg"},value:function(){var e=this,t=e._selectedItem(),i,n=e.options.transport.imageUrl;if(t&&t.get(a)==="f"){i=b(e.path(),t.get(m)).replace(r,"");if(n){i=h(n)?n(i):c.format(n,encodeURIComponent(i))}return i}},_fileUpload:function(e){var i=this,t=i.options,n=t.fileTypes,r=new RegExp(("("+n.split(",").join(")|(")+")").replace(/\*\./g,".*."),"i"),a=e.files[0].name,o=e.files[0].size,s=m,l=g,d;if(r.test(a)){e.data={path:i.path()};d=i._createFile(a,o);if(!d){e.preventDefault()}else{d._uploading=true;i.upload.one("error",function(){d=u});i.upload.one("success",function(e){if(d){delete d._uploading;var t=i._insertFileToList(d);t.set(s,e.response[i._getFieldName(s)]);t.set(l,e.response[i._getFieldName(l)]);i._tiles=i.listView.items().filter("["+c.attr("type")+"=f]");i._scroll()}})}}else{e.preventDefault();i._showMessage(c.format(t.messages.invalidFileType,a,n))}},_content:function(){var t=this;t.list=l('<div class="k-filemanager-listview" />').appendTo(t.element).on("dblclick"+v,".k-listview-item",d(t._dblClick,t));t.listView=new c.ui.ListView(t.list,{layout:"flex",flex:{direction:"row",wrap:"wrap"},dataSource:t.dataSource,template:t._itemTmpl(),editTemplate:t._editTmpl(),selectable:true,autoBind:false,dataBinding:function(e){t.toolbar.find(".k-i-close").parent().addClass("k-state-disabled");if(e.action==="remove"||e.action==="sync"){e.preventDefault();c.ui.progress(t.listView.content,false)}},dataBound:function(){if(t.dataSource.view().length){t._tiles=this.items().filter("["+c.attr("type")+"=f]");t._scroll()}else{this.content.append(e({text:t.options.messages.emptyFolder}))}},change:d(t._listViewChange,t)});t.listView.content.on("scroll"+v,d(t._scroll,t))},_dataSource:function(){var e=this,t=e.options,i=t.transport,n=f({},_),r={field:m,dir:"asc"},a,o={type:i.type||"imagebrowser",sort:[n,r]};if(s(i)){i.path=d(e.path,e);o.transport=i}if(s(t.schema)){o.schema=t.schema}else if(i.type&&s(c.data.schemas[i.type])){a=c.data.schemas[i.type]}if(e.dataSource&&e._errorHandler){e.dataSource.unbind(p,e._errorHandler)}else{e._errorHandler=d(e._error,e)}e.dataSource=c.data.DataSource.create(o).bind(p,e._errorHandler)},_loadImage:function(e){var t=this,i=l(e),n=t.dataSource.getByUid(i.attr(c.attr("uid"))),r=n.get(m),a=t.options.transport.thumbnailUrl,o=l("<img />",{alt:r}),s="?";if(n._uploading){return}o.hide().on("load"+v,function(){l(this).prev().remove().end().addClass("k-image k-file-image").fadeIn()});i.find(".k-i-loading").after(o);if(h(a)){a=a(t.path(),encodeURIComponent(r))}else{if(a.indexOf("?")>=0){s="&"}a=a+s+"path="+encodeURIComponent(t.path()+r);if(n._override){a+="&_="+(new Date).getTime();delete n._override}}o.attr("src",a);e.loaded=true},_scroll:function(){var r=this;if(r.options.transport&&r.options.transport.thumbnailUrl){clearTimeout(r._timeout);r._timeout=setTimeout(function(){var e=c._outerHeight(r.listView.content),i=r.listView.content.scrollTop(),n=i+e;r._tiles.each(function(){var e=o(this),t=e+this.offsetHeight;if(e>=i&&e<n||t>=i&&t<n){r._loadImage(this)}if(e>n){return false}});r._tiles=r._tiles.filter(function(){return!this.loaded})},250)}},_itemTmpl:function(){var e=this,t='<div class="k-listview-item" '+c.attr("uid")+'="#=uid#" ';t+=c.attr("type")+'="${'+a+'}">';t+="#if("+a+' == "d") { #';t+='<div class="k-file-preview"><span class="k-file-icon k-icon k-i-folder"></span></div>';t+="#}else{#";if(e.options.transport&&e.options.transport.thumbnailUrl){t+='<div class="k-file-preview"><span class="k-file-icon k-icon k-i-loading"></span></div>'}else{t+='<div class="k-file-preview"><span class="k-file-icon k-icon k-i-file"></span></div>'}t+="#}#";t+='<span class="k-file-name">${'+m+"}</span>";t+="#if("+a+' == "f") { # <span class="k-file-size">${this.sizeFormatter('+g+")}</span> #}#";t+="</div>";return d(c.template(t),{sizeFormatter:i})}});c.ui.plugin(t)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("util/undoredostack",["kendo.core"],e)})(function(){(function(t){var e=t.Observable.extend({init:function(e){t.Observable.fn.init.call(this,e);this.clear()},events:["undo","redo"],push:function(e){this.stack=this.stack.slice(0,this.currentCommandIndex+1);this.currentCommandIndex=this.stack.push(e)-1},undo:function(){if(this.canUndo()){var e=this.stack[this.currentCommandIndex--];e.undo();this.trigger("undo",{command:e})}},redo:function(){if(this.canRedo()){var e=this.stack[++this.currentCommandIndex];e.redo();this.trigger("redo",{command:e})}},clear:function(){this.stack=[];this.currentCommandIndex=-1},canUndo:function(){return this.currentCommandIndex>=0},canRedo:function(){return this.currentCommandIndex!=this.stack.length-1}});t.deepExtend(t,{util:{UndoRedoStack:e}})})(kendo)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("editor/main",["util/undoredostack","kendo.combobox","kendo.dropdownlist","kendo.window","kendo.colorpicker"],e)})(function(){(function(f,h){var p=window.kendo,e=p.Class,v=p.ui.Widget,c=p.support.mobileOS,n=p.support.browser,m=f.extend,g=f.proxy,_=p.deepExtend,b=p.keys;var i="select";var r="select.k-select-overlay";var a="k-placeholder";var o="placeholder";var s=200;var w="en";var t=e.extend({init:function(e){this.options=e},getHtml:function(){var e=this.options;return p.template(e.template,{useWithBlock:false})(e)}});var k={editorWrapperTemplate:'<table cellspacing="0" cellpadding="0" class="k-widget k-widget-2021 k-editor" role="presentation">'+"<tbody>"+'<tr role="presentation"><td class="k-editor-toolbar-wrap" role="presentation"><ul class="k-toolbar k-editor-toolbar" role="toolbar"></ul></td></tr>'+'<tr><td class="k-editable-area"></td></tr>'+"</tbody>"+"</table>",buttonTemplate:'# var iconCssClass = "k-icon k-i-" + kendo.toHyphens(data.cssClass.replace("k-", ""));#'+'# var dataPopup = data.popup ? "data-popup" : "";#'+'<button tabindex="0" role="button" class="k-button k-tool" #= dataPopup # title="#= data.title #" aria-label="#= data.title #">'+'<span class="#= iconCssClass #"></span>'+'<span class="k-tool-text k-button-text">#= data.title #</span>'+"</button>",iconTextButtonTemplate:'# var iconCssClass = "k-icon k-i-" + kendo.toHyphens(data.cssClass.replace("k-", ""));#'+'# var dataPopup = data.popup ? "data-popup" : "";#'+'<button tabindex="0" role="button" class="k-i-import k-button k-button-icontext" #= dataPopup # title="#= data.title #" aria-label="#= data.title #">'+'<span class="#= iconCssClass #"></span>'+"#= data.title #"+"</button>",tableWizardButtonTemplate:'# var iconCssClass = "k-icon k-i-" + kendo.toHyphens(data.cssClass.replace("k-", ""));#'+'# var dataPopup = data.popup ? "data-popup" : "";#'+'<button tabindex="0" role="button" class="k-tool k-button" #= dataPopup # title="#= data.title #" aria-label="#= data.title #">'+'<span class="#= iconCssClass #"></span>'+'<span class="k-tool-text">#= data.title #</span>'+"</button>",colorPickerTemplate:'<input class="k-colorpicker k-icon k-i-#= data.cssClass.replace("k-", "") #" />',comboBoxTemplate:'<select title="#= data.title #" aria-label="#= data.title #" class="#= data.cssClass #"></select>',dropDownListTemplate:'<span class="k-editor-dropdown"><select title="#= data.title #" aria-label="#= data.title #" class="#= data.cssClass #"></select></span>',separatorTemplate:'<span class="k-separator"></span>',overflowAnchorTemplate:'<button tabindex="0" role="button" class="k-button k-tool k-overflow-anchor" data-popup'+' title="#= data.title #" aria-label="#= data.title #" aria-haspopup="true" aria-expanded="false">'+'<span class="k-icon k-i-more-vertical"></span>'+"</button>",formatByName:function(e,t){for(var i=0;i<t.length;i++){if(f.inArray(e,t[i].tags)>=0){return t[i]}}},getToolCssClass:function(e){var t={superscript:"sup-script",subscript:"sub-script",justifyLeft:"align-left",justifyCenter:"align-center",justifyRight:"align-right",justifyFull:"align-justify",insertUnorderedList:"list-unordered",insertOrderedList:"list-ordered",insertUpperRomanList:"list-roman-upper",insertLowerRomanList:"list-roman-lower",import:"import",indent:"indent-increase",outdent:"indent-decrease",createLink:"link-horizontal",unlink:"unlink-horizontal",insertImage:"image",insertFile:"file-add",viewHtml:"html",foreColor:"foreground-color",backColor:"paint",createTable:"table-insert",addColumnLeft:"table-column-insert-left",addColumnRight:"table-column-insert-right",addRowAbove:"table-row-insert-above",addRowBelow:"table-row-insert-below",deleteRow:"table-row-delete",deleteColumn:"table-column-delete",mergeCellsHorizontally:"cells-merge-horizontally",mergeCellsVertically:"cells-merge-vertically",splitCellHorizontally:"cell-split-horizontally",splitCellVertically:"cell-split-vertically",tableWizard:"table-properties",tableWizardInsert:"table-wizard",tableAlignLeft:"table-position-left",tableAlignCenter:"table-position-center",tableAlignRight:"table-position-right",cleanFormatting:"clear-css",copyFormat:"copy-format",applyFormat:"apply-format"};var i=t[e];if(i){return i}return e},registerTool:function(e,t){var i=t.options;if(i&&i.template){i.template.options.cssClass="k-"+k.getToolCssClass(e)}if(!t.name){t.options.name=e;t.name=e.toLowerCase()}u.defaultTools[e]=t},registerFormat:function(e,t){u.fn.options.formats[e]=t},cacheComments:function(e,t){for(var i in t){e=e.replace(t[i],"{"+i+"}")}return e},retrieveComments:function(e,t){for(var i in t){e=e.replace("{"+i+"}",t[i])}return e}};var l={bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",superscript:"Superscript",subscript:"Subscript",justifyCenter:"Center text",justifyLeft:"Align text left",justifyRight:"Align text right",justifyFull:"Justify",insertUnorderedList:"Insert unordered list",insertOrderedList:"Insert ordered list",indent:"Indent",outdent:"Outdent",createLink:"Insert hyperlink",unlink:"Remove hyperlink",insertImage:"Insert image",insertFile:"Insert file",insertHtml:"Insert HTML",viewHtml:"View HTML",fontName:"Select font family",fontNameInherit:"(inherited font)",fontSize:"Select font size",fontSizeInherit:"(inherited size)",formatBlock:"Format",formatting:"Format",foreColor:"Color",backColor:"Background color",style:"Styles",emptyFolder:"Empty Folder",editAreaTitle:"Editable area. Press F10 for toolbar.",uploadFile:"Upload",overflowAnchor:"More tools",orderBy:"Arrange by:",orderBySize:"Size",orderByName:"Name",invalidFileType:'The selected file "{0}" is not valid. Supported file types are {1}.',deleteFile:'Are you sure you want to delete "{0}"?',overwriteFile:'A file with name "{0}" already exists in the current directory. Do you want to overwrite it?',directoryNotFound:"A directory with this name was not found.",imageWebAddress:"Web address",imageAltText:"Alternate text",imageWidth:"Width (px)",imageHeight:"Height (px)",fileWebAddress:"Web address",fileTitle:"Title",fileText:"Text",linkWebAddress:"Web address",linkText:"Text",linkToolTip:"ToolTip",linkOpenInNewWindow:"Open link in new window",dialogUpdate:"Update",dialogInsert:"Insert",dialogOk:"Ok",dialogCancel:"Cancel",cleanFormatting:"Clean formatting",createTable:"Create a table",createTableHint:"Create a {0} x {1} table",addColumnLeft:"Add column on the left",addColumnRight:"Add column on the right",addRowAbove:"Add row above",addRowBelow:"Add row below",deleteRow:"Delete row",deleteColumn:"Delete column",mergeCellsHorizontally:"Merge cells horizontally",mergeCellsVertically:"Merge cells vertically",splitCellHorizontally:"Split cells horizontally",splitCellVertically:"Split cells vertically",tableAlignLeft:"Table Align Left",tableAlignCenter:"Table Align Center",tableAlignRight:"Table Align Right",tableWizard:"Table Wizard",tableTab:"Table",cellTab:"Cell",accessibilityTab:"Accessibility",caption:"Caption",summary:"Summary",width:"Width",height:"Height",units:"Units",cellSpacing:"Cell Spacing",cellPadding:"Cell Padding",cellMargin:"Cell Margin",alignment:"Alignment",background:"Background",cssClass:"CSS Class",id:"ID",border:"Border",borderStyle:"Border Style",collapseBorders:"Collapse borders",wrapText:"Wrap text",associateCellsWithHeaders:"Associate headers",alignLeft:"Align Left",alignCenter:"Align Center",alignRight:"Align Right",alignLeftTop:"Align Left Top",alignCenterTop:"Align Center Top",alignRightTop:"Align Right Top",alignLeftMiddle:"Align Left Middle",alignCenterMiddle:"Align Center Middle",alignRightMiddle:"Align Right Middle",alignLeftBottom:"Align Left Bottom",alignCenterBottom:"Align Center Bottom",alignRightBottom:"Align Right Bottom",alignRemove:"Remove Alignment",columns:"Columns",rows:"Rows",selectAllCells:"Select All Cells",exportAs:"Export As",import:"Import",print:"Print",headerRows:"Header Rows",headerColumns:"Header Cols",tableSummaryPlaceholder:"Summary attribute is not HTML5 compatible.",associateNone:"None",associateScope:"Associate using 'scope' attribute",associateIds:"Associate using Ids",copyFormat:"Copy format",applyFormat:"Apply format"};var y=!c||c.ios&&c.flatVersion>=500||!c.ios&&typeof document.documentElement.contentEditable!="undefined";var d={basic:["bold","italic","underline"],alignment:["justifyLeft","justifyCenter","justifyRight"],lists:["insertUnorderedList","insertOrderedList"],indenting:["indent","outdent"],formatPainter:["copyFormat","applyFormat"],links:["createLink","unlink"],tables:["tableWizard","createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn","mergeCellsHorizontally","mergeCellsVertically","splitCellHorizontally","splitCellVertically","tableAlignLeft","tableAlignCenter","tableAlignRight"]};var u=v.extend({init:function(e,t){var n=this,i,r=p.ui.editor,a,o,s,l;var d;var u=r.Dom;if(!y){return}v.fn.init.call(n,e,t);n.options=_({},n.options,t);n.options.tools=n.options.tools.slice();e=n.element;d=e[0];s=u.name(d);this._registerHandler(e.closest("form"),"submit",g(n.update,n,h));o=m({},n.options);o.editor=n;if(s=="textarea"){n._wrapTextarea();a=n.wrapper.find(".k-editor-toolbar");if(d.id){a.attr("aria-controls",d.id)}}else{n.element.attr("contenteditable",true).addClass("k-widget k-widget-2021 k-editor k-editor-inline");o.popup=true;a=f('<ul class="k-toolbar k-editor-toolbar" role="toolbar" />').insertBefore(e)}n.toolbar=new r.Toolbar(a[0],o);n.toolbar.bindTo(n);if(s=="textarea"){setTimeout(function(){var e=n.wrapper[0].style.height;var t=parseInt(e,10);var i=n.wrapper.height();if(e.indexOf("px")>0&&!isNaN(t)&&i>t){n.wrapper.height(t-(i-t))}})}n._resizable();n._initializeContentElement(n);n.keyboard=new r.Keyboard([new r.BackspaceHandler(n),new r.TypingHandler(n),new r.SystemHandler(n),new r.SelectAllHandler(n)]);n.clipboard=new r.Clipboard(this);n.undoRedoStack=new p.util.UndoRedoStack;if(t&&t.value){i=t.value}else if(n.textarea){i=d.value;if(!i.replace(/\s/g,"").length){i=i.replace(/\s/g,"")}if(n.options.encoded&&d.defaultValue&&d.defaultValue.trim().length){i=d.defaultValue}var c=r.Serializer.htmlToDom(i,f("<div></div>")[0],n.options.deserialization);l=u.getAllComments(c);i=k.cacheComments(i,l);i=i.replace(/[\r\n\v\f\t ]+/gi," ");i=k.retrieveComments(i,l)}else{i=d.innerHTML}n.value(i||"\ufeff");this._registerHandler(document,{mousedown:function(){n._endTyping()},mouseup:function(e){n._mouseup(e)}});n._initializeImmutables();n.toolbar.resize();p.notify(n)},setOptions:function(e){var t=this;v.fn.setOptions.call(t,e);if(e.tools){t.toolbar.bindTo(t)}this._initializePlaceholder()},_togglePlaceholder:function(e){var t=this,i=t.body,n=f(i),r=t.options.placeholder;if(!t.textarea||!r){return}n.attr("aria-label",function(){return e?r:""});n.toggleClass(a,e)},_endTyping:function(){var e=this.keyboard;try{if(e.isTypingInProgress()){e.endTyping(true);this.saveSelection()}}catch(e){}},_selectionChange:function(){this._selectionStarted=false;this.saveSelection();this.trigger("select",{})},_resizable:function(){var e=this.options.resizable;var t=f.isPlainObject(e)?e.content===h||e.content===true:e;if(t&&this.textarea){var i=f("<div class='k-resize-handle'><span class='k-icon k-i-arrow-45-down-right'></span></div>").insertAfter(this.textarea);this.wrapper.addClass("k-resizable");this.wrapper.kendoResizable(m({},this.options.resizable,{draggableElement:i,start:function(e){var t=this.editor=f(e.currentTarget).closest(".k-editor");this.initialSize=t.height();t.find("td:last").append("<div class='k-overlay' />")},resize:function(e){var t=e.y.initialDelta;var i=this.initialSize+t;var n=this.options.min||0;var r=this.options.max||Infinity;i=Math.min(r,Math.max(n,i));this.editor.height(i)},resizeend:function(){this.editor.find(".k-overlay").remove();this.editor=null}}));if(p.support.mobileOS.ios){var n=this.wrapper.getKendoResizable();n.draggable.options.ignore=r}}},_initializeTableResizing:function(){var e=this;p.ui.editor.TableResizing.create(e);e._showTableResizeHandlesProxy=g(e._showTableResizeHandles,e);e.bind(i,e._showTableResizeHandlesProxy)},_destroyTableResizing:function(){var e=this;var t=e.tableResizing;if(t){t.destroy();e.tableResizing=null}if(e._showTableResizeHandlesProxy){e.unbind(i,e._showTableResizeHandlesProxy)}},_showTableResizeHandles:function(){var e=this;var t=e.tableResizing;if(t){t.showResizeHandles()}},_initializeColumnResizing:function(){p.ui.editor.ColumnResizing.create(this)},_destroyColumnResizing:function(){var e=this;if(e.columnResizing){e.columnResizing.destroy();e.columnResizing=null}},_initializeRowResizing:function(){p.ui.editor.RowResizing.create(this)},_destroyRowResizing:function(){var e=this;if(e.rowResizing){e.rowResizing.destroy();e.rowResizing=null}},_wrapTextarea:function(){var e=this,t=e.element,i=t[0].style.width,n=t[0].style.height,r=k.editorWrapperTemplate,a=f(r).insertBefore(t).width(i).height(n),o=a.find(".k-editable-area");t.attr("autocomplete","off").appendTo(o).addClass("k-content k-raw-content").css("display","none");e.textarea=t;e.wrapper=a},_createContentElement:function(e){var t=this;var i,n,r;var a=t.textarea;var o=t.options.domain;var s=o||document.domain;var l="";var d='javascript:""';var u="";a.hide();i=f("<iframe />",{title:t.options.messages.editAreaTitle,frameBorder:"0"})[0];f(i).css("display","").addClass("k-content").attr("tabindex",a[0].tabIndex).insertBefore(a);if(o||s!=location.hostname){l='<script>document.domain="'+s+'"<\/script>';d="javascript:document.write('"+l+"')";i.src=d}if(!i.src){i.src=""}n=i.contentWindow||i;r=n.document||i.contentDocument;f(i).one("load",function(){t.toolbar.decorateFrom(r.body)});u=document.getElementsByTagName("html")[0].getAttribute("lang")||w;r.open();if(!webfed["getPageData"]("editorSingleLine")){r.write("<!DOCTYPE html><html lang='"+u+"'><head>"+"<meta charset='utf-8' />"+"<title>Kendo UI Editor content</title>"+"<style>"+"html{padding:0;margin:0;height:100%;min-height:100%;cursor:text;}"+"body{padding:0;margin:0;height:100%;min-height:100%;}"+"body{box-sizing:border-box;font-size:12px;font-family:Verdana,Geneva,sans-serif;margin-top:-1px;padding:5px .4em 0;"+"word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;"+(p.support.isRtl(a)?"direction:rtl;":"")+(c.ios?"word-break:keep-all;":"")+"}"+"h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}"+"p{margin:0 0 1em;}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}"+"ul,ol{padding-left:2.5em}"+"span{-ms-high-contrast-adjust:none;}"+"a{color:#00a}"+"code{font-size:1.23em}"+"telerik\\3Ascript{display: none;}"+".k-table{width:100%;border-spacing:0;margin: 0 0 1em;}"+".k-table td{min-width:1px;padding:.2em .3em;}"+".k-table,.k-table td{outline:0;border: 1px dotted #ccc;}"+".k-table th{outline:0;border: 1px dotted #999;}"+".k-table p{margin:0;padding:0;}"+".k-column-resize-handle-wrapper {position: absolute; height: 10px; width:10px; cursor: col-resize; z-index: 2;}"+".k-column-resize-handle {width: 100%; height: 100%;}"+".k-column-resize-handle > .k-column-resize-marker {width:2px; height:100%; margin:0 auto; background-color:#00b0ff; display:none; opacity:0.8;}"+".k-row-resize-handle-wrapper {position: absolute; cursor: row-resize; z-index:2; width: 10px; height: 10px;}"+".k-row-resize-handle {display: table; width: 100%; height: 100%;}"+".k-row-resize-marker-wrapper{display: table-cell; height:100%; width:100%; margin:0; padding:0; vertical-align: middle;}"+".k-row-resize-marker{margin: 0; padding:0; width:100%; height:2px; background-color: #00b0ff; opacity:0.8; display:none;}"+".k-table-resize-handle-wrapper {position: absolute; background-color: #fff; border: 1px solid #000; z-index: 100; width: 5px; height: 5px;}"+".k-table-resize-handle {width: 100%; height: 100%;}"+".k-table-resize-handle.k-resize-east{cursor:e-resize;}"+".k-table-resize-handle.k-resize-north{cursor:n-resize;}"+".k-table-resize-handle.k-resize-northeast{cursor:ne-resize;}"+".k-table-resize-handle.k-resize-northwest{cursor:nw-resize;}"+".k-table-resize-handle.k-resize-south{cursor:s-resize;}"+".k-table-resize-handle.k-resize-southeast{cursor:se-resize;}"+".k-table-resize-handle.k-resize-southwest{cursor:sw-resize;}"+".k-table-resize-handle.k-resize-west{cursor:w-resize;}"+".k-table.k-table-resizing{opacity:0.6;}"+".k-placeholder{color:grey}"+"k\\:script{display:none;}"+"</style>"+l+f.map(e,function(e){return"<link rel='stylesheet' href='"+e+"'>"}).join("")+"</head><body autocorrect='off' contenteditable='true'></body></html>")}else if(webfed["getPageData"]("editorSingleLine")==true){r.write("<!DOCTYPE html><html lang='"+u+"'><head>"+"<meta charset='utf-8' />"+"<title>Kendo UI Editor content</title>"+"<style>"+"html{padding:0;margin:0;height:100%;min-height:100%;cursor:text;}"+"body{padding:0;margin:0;height:100%;min-height:100%;}"+"body{box-sizing:border-box;font-size:12px;font-family:Verdana,Geneva,sans-serif;margin-top:-1px;padding:5px .4em 0;"+"word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;"+(p.support.isRtl(a)?"direction:rtl;":"")+(c.ios?"word-break:keep-all;":"")+"}"+"h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}"+"p{margin:0 0 1em;}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}"+"ul,ol{padding-left:2.5em}"+"span{-ms-high-contrast-adjust:none;}"+"a{color:#00a}"+"code{font-size:1.23em}"+"telerik\\3Ascript{display: none;}"+".k-table{width:100%;border-spacing:0;margin: 0 0 1em;}"+".k-table td{min-width:1px;padding:.2em .3em;}"+".k-table,.k-table td{outline:0;border: 1px dotted #ccc;}"+".k-table th{outline:0;border: 1px dotted #999;}"+".k-table p{margin:0;padding:0;}"+".k-column-resize-handle-wrapper {position: absolute; height: 10px; width:10px; cursor: col-resize; z-index: 2;}"+".k-column-resize-handle {width: 100%; height: 100%;}"+".k-column-resize-handle > .k-column-resize-marker {width:2px; height:100%; margin:0 auto; background-color:#00b0ff; display:none; opacity:0.8;}"+".k-row-resize-handle-wrapper {position: absolute; cursor: row-resize; z-index:2; width: 10px; height: 10px;}"+".k-row-resize-handle {display: table; width: 100%; height: 100%;}"+".k-row-resize-marker-wrapper{display: table-cell; height:100%; width:100%; margin:0; padding:0; vertical-align: middle;}"+".k-row-resize-marker{margin: 0; padding:0; width:100%; height:2px; background-color: #00b0ff; opacity:0.8; display:none;}"+".k-table-resize-handle-wrapper {position: absolute; background-color: #fff; border: 1px solid #000; z-index: 100; width: 5px; height: 5px;}"+".k-table-resize-handle {width: 100%; height: 100%;}"+".k-table-resize-handle.k-resize-east{cursor:e-resize;}"+".k-table-resize-handle.k-resize-north{cursor:n-resize;}"+".k-table-resize-handle.k-resize-northeast{cursor:ne-resize;}"+".k-table-resize-handle.k-resize-northwest{cursor:nw-resize;}"+".k-table-resize-handle.k-resize-south{cursor:s-resize;}"+".k-table-resize-handle.k-resize-southeast{cursor:se-resize;}"+".k-table-resize-handle.k-resize-southwest{cursor:sw-resize;}"+".k-table-resize-handle.k-resize-west{cursor:w-resize;}"+".k-table.k-table-resizing{opacity:0.6;}"+".k-placeholder{color:grey}"+"k\\:script{display:none;}"+"</style>"+l+f.map(e,function(e){return"<link rel='stylesheet' href='"+e+"'>"}).join("")+"</head><body style=\"white-space:nowrap;overflow-x:auto;\" onkeydown=\"if(event.keyCode==13)return false;\" autocorrect='off' contenteditable='true'></body></html>");f(i).css("height","40px")}r.close();return n},_blur:function(){var e=this.textarea;var t=e?e.val():this._oldValue;var i=this.options.encoded?this.encodedValue():this.value();this.update();if(e){e.trigger("blur")}if(i!=t){this.trigger("change");if(e){e.trigger("change")}}},_spellCorrect:function(e){var t;var i=false;this._registerHandler(e.body,{contextmenu:function(){e.one("select",function(){t=null});e._spellCorrectTimeout=setTimeout(function(){t=new p.ui.editor.RestorePoint(e.getRange(),e.body);i=false},10)},input:function(){if(!t){return}if(p.support.browser.mozilla&&!i){i=true;return}p.ui.editor._finishUpdate(e,t)}})},_registerHandler:function(e,t,i){var n=this;var r=".kendoEditor";var a;var o;e=f(e);if(!this._handlers){this._handlers=[]}if(e.length){if(f.isPlainObject(t)){for(var s in t){if(t.hasOwnProperty(s)){this._registerHandler(e,s,t[s])}}}else{a=p.applyEventMap(t).split(" ");for(o=0;o<a.length;o++){n._handlers.push({element:e,type:a[o]+r,handler:i});e.on(a[o]+r,i)}}}},_deregisterHandlers:function(){var e=this._handlers;for(var t=0;t<e.length;t++){var i=e[t];i.element.off(i.type,i.handler)}this._handlers=[]},_initializeContentElement:function(){var c=this;var e;var t;var i;if(c.textarea){c.window=c._createContentElement(c.options.stylesheets);e=c.document=c.window.contentDocument||c.window.document;if(!e.body){var n=e.createElement("body");n.setAttribute("contenteditable","true");n.setAttribute("autocorrect","off");e.getElementsByTagName("html")[0].appendChild(n);var r=setInterval(function(){if(f(c.document).find("body").length>1){f(c.document).find("body:last").remove();window.clearInterval(r)}},10)}c.body=e.body;t=c.window;i=e;this._registerHandler(e,"mouseup",g(this._mouseup,this))}else{c.window=window;e=c.document=document;c.body=c.element[0];t=c.body;i=c.body;c.toolbar.decorateFrom(c.body)}this._registerHandler(t,"blur",g(this._blur,this));c._registerHandler(i,"down",g(c._mousedown,c));try{e.execCommand("enableInlineTableEditing",null,false)}catch(e){}if(p.support.touch){this._registerHandler(e,{keydown:function(){if(p._activeElement()!=e.body){c.window.focus()}}})}this._initializePlaceholder();this._spellCorrect(c);this._registerHandler(c.document,{"mouseover dragenter":function(e){var t=f(c.body).height();var i=f(c.body.parentElement).height();if(i>t&&e.target.nodeName.toLowerCase()==="html"){c._cachedHeight=""+c.body.style.height;c.body.style.height="100%"}},"mouseout dragleave drop contextmenu":function(e){var t=function(){if(c._cachedHeight!==h&&e.target===c.body){c.body.style.height=c._cachedHeight;delete c._cachedHeight}};if(e.type==="contextmenu"){setTimeout(function(){t()},10)}else{t()}}});this._registerHandler(c.body,{keydown:function(e){var t;if((e.keyCode===b.BACKSPACE||e.keyCode===b.DELETE)&&c.body.getAttribute("contenteditable")!=="true"){return false}if(e.keyCode===b.F10){setTimeout(g(c.toolbar.focus,c.toolbar),100);c.toolbar.preventPopupHide=true;e.preventDefault();return}else if(e.keyCode==b.LEFT||e.keyCode==b.RIGHT){t=c.getRange();var i=e.keyCode==b.LEFT;var n=t[i?"startContainer":"endContainer"];var r=t[i?"startOffset":"endOffset"];var a=i?-1:1;var o=r+a;var s=i?o:r;if(n.nodeType==3&&n.nodeValue[s]=="\ufeff"){t.setStart(n,o);t.collapse(true);c.selectRange(t)}}var l=c.toolbar.tools;var d=c.keyboard.toolFromShortcut(l,e);var u=d?l[d].options:{};if(d&&!u.keyPressCommand){e.preventDefault();if(!/^(undo|redo)$/.test(d)){c.keyboard.endTyping(true)}c.trigger("keydown",e);c.exec(d);c._runPostContentKeyCommands(e);return false}c.keyboard.clearTimeout();c.keyboard.keydown(e)},keypress:function(e){setTimeout(function(){c._runPostContentKeyCommands(e);c._showTableResizeHandles()},0)},keyup:function(e){var t=[b.BACKSPACE,b.TAB,b.PAGEUP,b.PAGEDOWN,b.END,b.HOME,b.LEFT,b.UP,b.RIGHT,b.DOWN,b.INSERT,b.DELETE];if(f.inArray(e.keyCode,t)>-1||e.keyCode==65&&e.ctrlKey&&!e.altKey&&!e.shiftKey){window.clearTimeout(this._refreshInterval);this._refreshInterval=window.setTimeout(function(){c._selectionChange()},s)}c.keyboard.keyup(e)},click:function(e){var t=p.ui.editor.Dom,i;if(t.name(e.target)==="img"){i=c.createRange();i.selectNode(e.target);c.selectRange(i)}},"cut copy paste drop dragover":function(e){c.clipboard["on"+e.type](e)},focusin:function(){if(c.body.hasAttribute("contenteditable")){f(this).addClass("k-state-active");c.toolbar.show();c._togglePlaceholder(false)}},focusout:function(){setTimeout(function(){var e=p._activeElement();var t=c.body;var i=c.toolbar;if(i.options.popup){var n=i.window.element.get(0);if(n&&!(f.contains(n,e)||n==e)){i.preventPopupHide=false}}if(e!=t&&!f.contains(t,e)&&!i.focused()&&!i.preventPopupHide){f(t).removeClass("k-state-active");i.hide()}c._togglePlaceholder(!c.value().trim())},10)}});c._initializeColumnResizing();c._initializeRowResizing();c._initializeTableResizing()},_initializePlaceholder:function(){var e=this,t=e.options.placeholder,i,n;if(!e.textarea||!t){return}i="<style id='"+o+"'>."+a+":before { content: '"+t+"'; }"+"</style>";n=f(e.document.head);n.find("#"+o).remove();n.append(i);e._togglePlaceholder(!e.value().trim())},_initializeImmutables:function(){var e=this,t=p.ui.editor;if(e.options.immutables){e.immutables=new t.Immutables(e)}},_mousedown:function(e){var t=this;t._selectionStarted=true;if(f(t.body).parents(".k-window").length){e.stopPropagation()}if(n.gecko){return}var i=f(e.target).closest("a[href]");if((e.which==2||e.which==1&&e.ctrlKey)&&i&&i.is("a[href]")){window.open(i.attr("href"),"_new")}if(e.target.tagName&&e.target.tagName.toLowerCase()==="html"){setTimeout(function(){t.body.focus()},0)}},_mouseup:function(e){var t=this;if(p.support.mobileOS.ios&&e&&f(e.target).is(r)){return}if(t._selectionStarted){setTimeout(function(){t._selectionChange()},1)}},_runPostContentKeyCommands:function(e){var t=this.getRange();var i=this.keyboard.toolsFromShortcut(this.toolbar.tools,e);for(var n=0;n<i.length;n++){var r=i[n];var a=r.options;if(!a.keyPressCommand){continue}var o=new a.command({range:t});if(o.changesContent()){this.keyboard.endTyping(true);this.exec(r.name)}}},refresh:function(){var e=this;if(e.textarea){e._destroyResizings();var t=e.value();e.textarea.val(t);e.wrapper.find("iframe").remove();e._initializeContentElement(e);e.value(t)}},events:["select","change","execute","error","paste","keydown","keyup"],options:{name:"Editor",messages:l,placeholder:"",formats:{},encoded:true,domain:null,resizable:false,deserialization:{custom:null},serialization:{entities:true,semantic:true,scripts:false},pasteCleanup:{all:false,css:false,custom:null,keepNewLines:false,msAllFormatting:false,msConvertLists:true,msTags:true,none:false,span:false},stylesheets:[],dialogOptions:{modal:true,resizable:false,draggable:true,animation:false},imageBrowser:null,fileBrowser:null,fontName:[{text:"Arial",value:"Arial, Helvetica, sans-serif"},{text:"Courier New",value:'"Courier New", Courier, monospace'},{text:"Georgia",value:"Georgia, serif"},{text:"Impact",value:"Impact, Charcoal, sans-serif"},{text:"Lucida Console",value:'"Lucida Console", Monaco, monospace'},{text:"Tahoma",value:"Tahoma, Geneva, sans-serif"},{text:"Times New Roman",value:'"Times New Roman", Times, serif'},{text:"Trebuchet MS",value:'"Trebuchet MS", Helvetica, sans-serif'},{text:"Verdana",value:"Verdana, Geneva, sans-serif"}],fontSize:[{text:"1 (8pt)",value:"xx-small"},{text:"2 (10pt)",value:"x-small"},{text:"3 (12pt)",value:"small"},{text:"4 (14pt)",value:"medium"},{text:"5 (18pt)",value:"large"},{text:"6 (24pt)",value:"x-large"},{text:"7 (36pt)",value:"xx-large"}],formatBlock:[{text:"Paragraph",value:"p"},{text:"Quotation",value:"blockquote"},{text:"Heading 1",value:"h1"},{text:"Heading 2",value:"h2"},{text:"Heading 3",value:"h3"},{text:"Heading 4",value:"h4"},{text:"Heading 5",value:"h5"},{text:"Heading 6",value:"h6"}],tools:[].concat.call(["formatting"],d.basic,d.alignment,d.formatPainter,d.lists,d.indenting,d.links,["insertImage"],d.tables)},destroy:function(){var e=this;v.fn.destroy.call(this);this._endTyping(true);this._deregisterHandlers();clearTimeout(this._spellCorrectTimeout);this._focusOutside();this.toolbar.destroy();e._destroyUploadWidget();e._destroyResizings();p.destroy(this.wrapper)},_destroyResizings:function(){var e=this;e._destroyTableResizing();p.ui.editor.TableResizing.dispose(e);e._destroyRowResizing();p.ui.editor.RowResizing.dispose(e);e._destroyColumnResizing();p.ui.editor.ColumnResizing.dispose(e)},_focusOutside:function(){if(p.support.browser.msie&&this.textarea){var e=f("<input style='position:fixed;left:1px;top:1px;width:1px;height:1px;font-size:0;border:0;opacity:0' />").appendTo(document.body).focus();e.blur().remove()}},_destroyUploadWidget:function(){var e=this;if(e._uploadWidget){e._uploadWidget.destroy();e._uploadWidget=null}},state:function(e){var t=u.defaultTools[e];var i=t&&(t.options.finder||t.finder);var n=p.ui.editor.RangeUtils;var r,a;if(i){r=this.getRange();a=n.textNodes(r);if(!a.length&&r.collapsed){a=[r.startContainer]}return i.getFormat?i.getFormat(a):i.isFormatted(a)}return false},value:function(e){var t=this.body,i=p.ui.editor,n=this.options,r=i.Serializer.domToXhtml(t,n.serialization);if(e===h){return r}if(e==r){return}i.Serializer.htmlToDom(e,t,n.deserialization);this.selectionRestorePoint=null;this.update();this.toolbar.refreshTools()},saveSelection:function(e){e=e||this.getRange();var t=e.commonAncestorContainer,i=this.body;if(t==i||f.contains(i,t)){this.selectionRestorePoint=new p.ui.editor.RestorePoint(e,i)}},_focusBody:function(){var e=this.body;var t=this.wrapper&&this.wrapper.find("iframe")[0];var i=this.document.documentElement;var n=p._activeElement();var r;if(!t&&e.scrollHeight>e.clientHeight){r=e.scrollTop;e.focus();e.scrollTop=r}else if(n!=e&&n!=t){r=i.scrollTop;e.focus();i.scrollTop=r}},restoreSelection:function(){this._focusBody();if(this.selectionRestorePoint){this.selectRange(this.selectionRestorePoint.toRange())}},focus:function(){this.restoreSelection()},update:function(e){e=e||this.options.encoded?this.encodedValue():this.value();if(this.textarea){this.textarea.val(e);this._togglePlaceholder(!e.trim())}else{this._oldValue=e}},encodedValue:function(){return p.ui.editor.Dom.encode(this.value())},createRange:function(e){return p.ui.editor.RangeUtils.createRange(e||this.document)},getSelection:function(){return p.ui.editor.SelectionUtils.selectionFromDocument(this.document)},selectRange:function(e){this._focusBody();var t=this.getSelection();t.removeAllRanges();t.addRange(e);this.saveSelection(e)},getRange:function(){var e=this.getSelection(),t=e&&e.rangeCount>0?e.getRangeAt(0):this.createRange(),i=this.document;if(t.startContainer==i&&t.endContainer==i&&!t.startOffset&&!t.endOffset){t.setStart(this.body,0);t.collapse(true)}return t},_containsRange:function(e){var t=p.ui.editor.Dom;var i=this.body;return e&&t.isAncestorOrSelf(i,e.startContainer)&&t.isAncestorOrSelf(i,e.endContainer)},_deleteSavedRange:function(){if("_range"in this){delete this._range}},selectedHtml:function(){return p.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents())},paste:function(e,t){this.focus();var i=new p.ui.editor.InsertHtmlCommand(f.extend({range:this.getRange(),html:e},t));i.editor=this;i.exec()},exec:function(e,t){var i=this;var n=null;var r,a,o;if(!e){throw new Error("kendoEditor.exec(): `name` parameter cannot be empty")}if(i.body.getAttribute("contenteditable")!=="true"&&e!=="print"&&e!=="pdf"&&e!=="exportAs"){return false}e=e.toLowerCase();if(!i.keyboard.isTypingInProgress()){i._focusBody();i.selectRange(i._range||i.getRange())}a=i.toolbar.toolById(e);if(!a){for(var s in u.defaultTools){if(s.toLowerCase()==e){a=u.defaultTools[s];break}}}if(a){r=i.getRange();if(a.command){n=a.command(m({range:r,body:i.body,immutables:!!i.immutables},t))}o=i.trigger("execute",{name:e,command:n});if(o){return}if(/^(undo|redo)$/i.test(e)){i.undoRedoStack[e]()}else if(n){i.execCommand(n);if(n.async){n.change=g(i._selectionChange,i);return}}i._selectionChange()}},execCommand:function(e){if(!e.managesUndoRedo){this.undoRedoStack.push(e)}e.editor=this;e.exec()}});u.defaultTools={undo:{options:{key:"Z",ctrl:true}},redo:{options:{key:"Y",ctrl:true}}};p.ui.plugin(u);var x=e.extend({init:function(e){this.options=e},initialize:function(e,t){e.attr({unselectable:"on",title:t.title,"aria-label":t.title})},command:function(e){return new this.options.command(e)},update:f.noop});x.exec=function(e,t,i){e.exec(t,{value:i})};k.registerTool("separator",new x({template:new t({template:k.separatorTemplate})}));var C="\ufeff";var S=C;if(n.msie||n.edge){S=C="&nbsp;"}m(p.ui,{editor:{ToolTemplate:t,EditorUtils:k,Tool:x,emptyElementContent:C,emptyTableCellContent:S}});if(p.PDFMixin){p.PDFMixin.extend(u.prototype);u.prototype._drawPDF=function(){return p.drawing.drawDOM(this.body,this.options.pdf)};u.prototype.saveAsPDF=function(){var t=new f.Deferred;var e=t.promise();var i={promise:e};if(this.trigger("pdfExport",i)){return}var n=this.options.pdf;this._drawPDF(t).then(function(e){return p.drawing.exportPDF(e,n)}).done(function(e){p.saveAs({dataURI:e,fileName:n.fileName,proxyURL:n.proxyURL,proxyTarget:n.proxyTarget,forceProxy:n.forceProxy});t.resolve()}).fail(function(e){t.reject(e)});return e}}})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("editor/dom",["editor/main"],e)})(function(){(function(k){var o=window.kendo,a=k.map,n=k.extend,s=o.support.browser,u="style",r="float",l="cssFloat",d="styleFloat",c="class",f="k-marker";function e(e){var t={},i,n;for(i=0,n=e.length;i<n;i++){t[e[i]]=true}return t}var i=e("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed".split(",")),t="p,div,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption".split(","),h=t.concat(["ul","ol","li"]),p=e(h),v=e("area,base,br,col,command,embed,hr,img,input,keygen,link,menuitem,meta,param,source,track,wbr".split(",")),m="span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby".split(","),g=e(m),_=e("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected".split(","));var b=function(e){if(e.nodeType==1){e.normalize()}};if(s.msie&&s.version>=8){b=function(e){if(e.nodeType==1&&e.firstChild){var t=e.firstChild,i=t;b(i);while(true){i=i.nextSibling;if(!i){break}b(i);if(i.nodeType==3&&t.nodeType==3){i.nodeValue=t.nodeValue+i.nodeValue;M.remove(t)}t=i}}}}var w=/^\s+$/,y=/^[\n\r\t]+$/,x=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i,C=/\ufeff/g,S=/^(\s+|\ufeff)$/,T,D=("color,padding-left,padding-right,padding-top,padding-bottom,"+"background-color,background-attachment,background-image,background-position,background-repeat,"+"border-top-style,border-top-width,border-top-color,"+"border-bottom-style,border-bottom-width,border-bottom-color,"+"border-left-style,border-left-width,border-left-color,"+"border-right-style,border-right-width,border-right-color,"+"font-family,font-size,font-style,font-variant,font-weight,line-height").split(","),A=/[<>\&]/g,E=/[\u00A0-\u2666<>\&]/g,I={34:"quot",38:"amp",39:"apos",60:"lt",62:"gt",160:"nbsp",161:"iexcl",162:"cent",163:"pound",164:"curren",165:"yen",166:"brvbar",167:"sect",168:"uml",169:"copy",170:"ordf",171:"laquo",172:"not",173:"shy",174:"reg",175:"macr",176:"deg",177:"plusmn",178:"sup2",179:"sup3",180:"acute",181:"micro",182:"para",183:"middot",184:"cedil",185:"sup1",186:"ordm",187:"raquo",188:"frac14",189:"frac12",190:"frac34",191:"iquest",192:"Agrave",193:"Aacute",194:"Acirc",195:"Atilde",196:"Auml",197:"Aring",198:"AElig",199:"Ccedil",200:"Egrave",201:"Eacute",202:"Ecirc",203:"Euml",204:"Igrave",205:"Iacute",206:"Icirc",207:"Iuml",208:"ETH",209:"Ntilde",210:"Ograve",211:"Oacute",212:"Ocirc",213:"Otilde",214:"Ouml",215:"times",216:"Oslash",217:"Ugrave",218:"Uacute",219:"Ucirc",220:"Uuml",221:"Yacute",222:"THORN",223:"szlig",224:"agrave",225:"aacute",226:"acirc",227:"atilde",228:"auml",229:"aring",230:"aelig",231:"ccedil",232:"egrave",233:"eacute",234:"ecirc",235:"euml",236:"igrave",237:"iacute",238:"icirc",239:"iuml",240:"eth",241:"ntilde",242:"ograve",243:"oacute",244:"ocirc",245:"otilde",246:"ouml",247:"divide",248:"oslash",249:"ugrave",250:"uacute",251:"ucirc",252:"uuml",253:"yacute",254:"thorn",255:"yuml",402:"fnof",913:"Alpha",914:"Beta",915:"Gamma",916:"Delta",917:"Epsilon",918:"Zeta",919:"Eta",920:"Theta",921:"Iota",922:"Kappa",923:"Lambda",924:"Mu",925:"Nu",926:"Xi",927:"Omicron",928:"Pi",929:"Rho",931:"Sigma",932:"Tau",933:"Upsilon",934:"Phi",935:"Chi",936:"Psi",937:"Omega",945:"alpha",946:"beta",947:"gamma",948:"delta",949:"epsilon",950:"zeta",951:"eta",952:"theta",953:"iota",954:"kappa",955:"lambda",956:"mu",957:"nu",958:"xi",959:"omicron",960:"pi",961:"rho",962:"sigmaf",963:"sigma",964:"tau",965:"upsilon",966:"phi",967:"chi",968:"psi",969:"omega",977:"thetasym",978:"upsih",982:"piv",8226:"bull",8230:"hellip",8242:"prime",8243:"Prime",8254:"oline",8260:"frasl",8472:"weierp",8465:"image",8476:"real",8482:"trade",8501:"alefsym",8592:"larr",8593:"uarr",8594:"rarr",8595:"darr",8596:"harr",8629:"crarr",8656:"lArr",8657:"uArr",8658:"rArr",8659:"dArr",8660:"hArr",8704:"forall",8706:"part",8707:"exist",8709:"empty",8711:"nabla",8712:"isin",8713:"notin",8715:"ni",8719:"prod",8721:"sum",8722:"minus",8727:"lowast",8730:"radic",8733:"prop",8734:"infin",8736:"ang",8743:"and",8744:"or",8745:"cap",8746:"cup",8747:"int",8756:"there4",8764:"sim",8773:"cong",8776:"asymp",8800:"ne",8801:"equiv",8804:"le",8805:"ge",8834:"sub",8835:"sup",8836:"nsub",8838:"sube",8839:"supe",8853:"oplus",8855:"otimes",8869:"perp",8901:"sdot",8968:"lceil",8969:"rceil",8970:"lfloor",8971:"rfloor",9001:"lang",9002:"rang",9674:"loz",9824:"spades",9827:"clubs",9829:"hearts",9830:"diams",338:"OElig",339:"oelig",352:"Scaron",353:"scaron",376:"Yuml",710:"circ",732:"tilde",8194:"ensp",8195:"emsp",8201:"thinsp",8204:"zwnj",8205:"zwj",8206:"lrm",8207:"rlm",8211:"ndash",8212:"mdash",8216:"lsquo",8217:"rsquo",8218:"sbquo",8220:"ldquo",8221:"rdquo",8222:"bdquo",8224:"dagger",8225:"Dagger",8240:"permil",8249:"lsaquo",8250:"rsaquo",8364:"euro"};var M={block:p,inline:g,findNodeIndex:function(e,t){var i=0;if(!e){return-1}while(true){e=e.previousSibling;if(!e){break}if(!(t&&e.nodeType==3)){i++}}return i},isDataNode:function(e){return e&&e.nodeValue!==null&&e.data!==null},isAncestorOf:function(e,t){try{return!M.isDataNode(e)&&(k.contains(e,M.isDataNode(t)?t.parentNode:t)||t.parentNode==e)}catch(e){return false}},isAncestorOrSelf:function(e,t){return M.isAncestorOf(e,t)||e==t},findClosestAncestor:function(e,t){if(M.isAncestorOf(e,t)){while(t&&t.parentNode!=e){t=t.parentNode}}return t},getAllComments:function(e){var t=[];var i=document.createNodeIterator(e,NodeFilter.SHOW_COMMENT,function(){return NodeFilter.FILTER_ACCEPT},false);var n=i.nextNode();while(n){t.push(n.nodeValue);n=i.nextNode()}return t},getNodeLength:function(e){return M.isDataNode(e)?e.length:e.childNodes.length},splitDataNode:function(e,t){var i=e.cloneNode(false);var n="";var r=e.nextSibling;var a;while(r&&r.nodeType==3&&r.nodeValue){n+=r.nodeValue;a=r;r=r.nextSibling;M.remove(a)}e.deleteData(t,e.length);i.deleteData(0,t);i.nodeValue+=n;M.insertAfter(i,e)},attrEquals:function(e,t){for(var i in t){var n=e[i];if(i==r){n=e[o.support.cssFloat?l:d]}if(typeof n=="object"){if(!M.attrEquals(n,t[i])){return false}}else if(n!=t[i]){return false}}return true},blockParentOrBody:function(e){return M.parentOfType(e,h)||e.ownerDocument.body},blockParents:function(e){var t=[],i,n;for(i=0,n=e.length;i<n;i++){var r=M.parentOfType(e[i],M.blockElements);if(r&&k.inArray(r,t)<0){t.push(r)}}return t},windowFromDocument:function(e){return e.defaultView||e.parentWindow},normalize:b,blockElements:h,nonListBlockElements:t,inlineElements:m,empty:i,fillAttrs:_,nodeTypes:{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12},toHex:function(e){var t=x.exec(e);if(!t){return e}return"#"+a(t.slice(1),function(e){e=parseInt(e,10).toString(16);return e.length>1?e:"0"+e}).join("")},encode:function(e,t){var i=!t||t.entities?E:A;return e.replace(i,function(e){var t=e.charCodeAt(0);var i=I[t];return i?"&"+i+";":e})},isBom:function(e){return e&&e.nodeType===3&&/^[\ufeff]+$/.test(e.nodeValue)},stripBom:function(e){return(e||"").replace(C,"")},stripBomNode:function(e){if(M.isBom(e)){e.parentNode.removeChild(e)}},insignificant:function(e){var t=e.attributes;return e.className=="k-marker"||M.is(e,"br")&&(e.className=="k-br"||t._moz_dirty||t._moz_editor_bogus_node)||M.is(e,"span")&&e.className=="k-br"},tableCell:function(e){return M.is(e,"td")||M.is(e,"th")},significantNodes:function(e){return k.grep(e,function(e){var t=M.name(e);if(t=="br"){return false}else if(M.insignificant(e)){return false}else if(M.emptyTextNode(e)){return false}else if(e.nodeType==1&&!i[t]&&M.emptyNode(e)){return false}return true})},emptyTextNode:function(e){return e&&e.nodeType==3&&S.test(e.nodeValue)},emptyNode:function(e){return e.nodeType==1&&!M.significantNodes(e.childNodes).length},name:function(e){return e.nodeName.toLowerCase()},significantChildNodes:function(e){return k.grep(e.childNodes,function(e){return e.nodeType!=3||!M.isWhitespace(e)})},lastTextNode:function(e){var t=null;if(e.nodeType==3){return e}for(var i=e.lastChild;i;i=i.previousSibling){t=M.lastTextNode(i);if(t){return t}}return t},is:function(e,t){return e&&M.name(e)==t},isMarker:function(e){return e.className==f},isWhitespace:function(e){return w.test(e.nodeValue)},allWhitespaceContent:function(e){var t=e.firstChild;while(t&&M.isWhitespace(t)){t=t.nextSibling}return!t},isEmptyspace:function(e){return y.test(e.nodeValue)},htmlIndentSpace:function(e){if(!(M.isDataNode(e)&&M.isWhitespace(e))){return false}if(y.test(e.nodeValue)){return true}var t=function(e,t){while(e[t]){e=e[t];if(M.significantNodes([e]).length>0){return e}}};var i=e.parentNode;var n=t(e,"previousSibling");var r=t(e,"nextSibling");if(C.test(e.nodeValue)){return!!(n||r)}if(k(i).is("tr,tbody,thead,tfoot,table,ol,ul")){return true}if(M.isBlock(i)||M.is(i,"body")){var a=n&&M.isBlock(n);var o=r&&M.isBlock(r);if(!r&&a||!n&&o||a&&o){return true}}return false},isBlock:function(e){return p[M.name(e)]},isSelfClosing:function(e){return v[M.name(e)]},isEmpty:function(e){return i[M.name(e)]},isInline:function(e){return g[M.name(e)]},isBr:function(e){return M.name(e)=="br"},list:function(e){var t=e?M.name(e):"";return t=="ul"||t=="ol"||t=="dl"},scrollContainer:function(e){var t=M.windowFromDocument(e),i=(t.contentWindow||t).document||t.ownerDocument||t;if(i.compatMode=="BackCompat"){i=i.body}else{i=i.scrollingElement||i.documentElement}return i},scrollTo:function(e,t){var i=e.ownerDocument;var n=M.windowFromDocument(i);var r=n.innerHeight;var a=M.scrollContainer(i);var o,s,l,d;if(M.isDataNode(e)){if(t){d=M.create(i,"span",{innerHTML:"&#xfeff;"});M.insertBefore(d,e);o=k(d)}else{o=k(e.parentNode)}}else{o=k(e)}s=o.offset().top;l=o[0].offsetHeight;if(t||!l){l=parseInt(o.css("line-height"),10)||Math.ceil(1.2*parseInt(o.css("font-size"),10))||15}if(d){M.remove(d)}if(l+s>a.scrollTop+r){a.scrollTop=l+s-r}},persistScrollTop:function(e){T=M.scrollContainer(e).scrollTop},offset:function(e,t){var i={top:e.offsetTop,left:e.offsetLeft};var n=e.offsetParent;while(n&&(!t||M.isAncestorOf(t,n))){i.top+=n.offsetTop;i.left+=n.offsetLeft;n=n.offsetParent}return i},restoreScrollTop:function(e){if(typeof T=="number"){M.scrollContainer(e).scrollTop=T;T=undefined}},insertAt:function(e,t,i){e.insertBefore(t,e.childNodes[i]||null)},insertBefore:function(e,t){if(t.parentNode){return t.parentNode.insertBefore(e,t)}else{return t}},insertAfter:function(e,t){return t.parentNode.insertBefore(e,t.nextSibling)},remove:function(e){if(e.parentNode){e.parentNode.removeChild(e)}},removeChildren:function(e){while(e.firstChild){e.removeChild(e.firstChild)}},removeTextSiblings:function(e){var t=e.parentNode;while(e.nextSibling&&e.nextSibling.nodeType==3){t.removeChild(e.nextSibling)}while(e.previousSibling&&e.previousSibling.nodeType==3){t.removeChild(e.previousSibling)}},trim:function(e){for(var t=e.childNodes.length-1;t>=0;t--){var i=e.childNodes[t];if(M.isDataNode(i)){if(!M.stripBom(i.nodeValue).length){M.remove(i)}}else if(i.className!=f){M.trim(i);if(!M.isEmpty(i)&&i.childNodes.length===0||M.isBlock(i)&&M.allWhitespaceContent(i)){M.remove(i)}}}return e},closest:function(e,t){if(typeof t==="string"){t=[t]}while(e&&t.indexOf(M.name(e))<0){e=e.parentNode}return e},closestBy:function(e,t,i){while(e&&!t(e)){if(i&&i(e)){return null}e=e.parentNode}return e},sibling:function(e,t){do{e=e[t]}while(e&&e.nodeType!=1);return e},next:function(e){return M.sibling(e,"nextSibling")},prev:function(e){return M.sibling(e,"previousSibling")},parentOfType:function(e,t){do{e=e.parentNode}while(e&&!M.ofType(e,t));return e},ofType:function(e,t){return k.inArray(M.name(e),t)>=0},changeTag:function(e,t,i){var n=M.create(e.ownerDocument,t),r=e.attributes,a,o,s,l,d;if(!i){for(a=0,o=r.length;a<o;a++){d=r[a];if(d.specified){s=d.nodeName;l=d.nodeValue;if(s==c){n.className=l}else if(s==u){n.style.cssText=e.style.cssText}else{n.setAttribute(s,l)}}}}while(e.firstChild){n.appendChild(e.firstChild)}M.insertBefore(n,e);M.remove(e);return n},editableParent:function(e){while(e&&(e.nodeType==3||e.contentEditable!=="true")){e=e.parentNode}return e},wrap:function(e,t){M.insertBefore(t,e);t.appendChild(e);return t},unwrap:function(e){var t=e.parentNode;while(e.firstChild){t.insertBefore(e.firstChild,e)}t.removeChild(e)},wrapper:function(e){var t=M.closestBy(e,function(e){return e.parentNode&&M.significantNodes(e.parentNode.childNodes).length>1});return k(t).is("body,.k-editor")?undefined:t},create:function(e,t,i){return M.attr(e.createElement(t),i)},createEmptyNode:function(e,t,i){var n=M.attr(e.createElement(t),i);n.innerHTML="\ufeff";return n},attr:function(e,t){t=n({},t);if(t&&u in t){M.style(e,t.style);delete t.style}for(var i in t){if(t[i]===null){e.removeAttribute(i);delete t[i]}else if(i=="className"){e[i]=t[i]}}return n(e,t)},mergeAttributes:function(e,t,i){if(!e.attributes.length){return}k.each(e.attributes,function(){if(this.name!=="contenteditable"&&(!i||this.name!==u)){k(t).attr(this.name,this.value)}if(i&&this.name===u){k.each(e.style,function(){t.style[this]=e.style[this]})}})},style:function(e,t){k(e).css(t||{})},unstyle:function(e,t){for(var i in t){if(i==r){i=o.support.cssFloat?l:d}e.style[i]=""}if(e.style.cssText===""){e.removeAttribute(u)}},inlineStyle:function(e,t,i){var n=k(M.create(e.ownerDocument,t,i)),r;e.appendChild(n[0]);r=a(D,function(e){if(s.msie&&e=="line-height"&&n.css(e)=="1px"){return"line-height:1.5"}else{return e+":"+n.css(e)}}).join(";");n.remove();return r},getEffectiveBackground:function(e){var t=e.css("background-color")||"";if(t.indexOf("rgba(0, 0, 0, 0")<0&&t!=="transparent"){return t}else if(e[0].tagName.toLowerCase()==="html"){return"Window"}else{return M.getEffectiveBackground(e.parent())}},innerText:function(e){var t=e.innerHTML;t=t.replace(/<!--(.|\s)*?-->/gi,"");t=t.replace(/<\/?[^>]+?\/?>/gm,"");return t},removeClass:function(e,t){var i=" "+e.className+" ",n=t.split(" "),r,a;for(r=0,a=n.length;r<a;r++){i=i.replace(" "+n[r]+" "," ")}i=o.trim(i);if(i.length){e.className=i}else{e.removeAttribute(c)}},commonAncestor:function(){var e=arguments.length,t=[],i=Infinity,n=null,r,a,o,s,l;if(!e){return null}if(e==1){return arguments[0]}for(r=0;r<e;r++){a=[];o=arguments[r];while(o){a.push(o);o=o.parentNode}t.push(a.reverse());i=Math.min(i,a.length)}if(e==1){return t[0][0]}for(r=0;r<i;r++){s=t[0][r];for(l=1;l<e;l++){if(s!=t[l][r]){return n}}n=s}return n},closestSplittableParent:function(e){var t;if(e.length==1){t=M.parentOfType(e[0],["ul","ol"])}else{t=M.commonAncestor.apply(null,e)}if(!t){t=M.parentOfType(e[0],["p","td"])||e[0].ownerDocument.body}if(M.isInline(t)){t=M.blockParentOrBody(t)}var i=a(e,M.editableParent);var n=M.commonAncestor(i)[0];if(k.contains(t,n)){t=n}return t},closestEditable:function(e,t){var i;var n=M.editableParent(e);if(M.ofType(e,t)){i=e}else{i=M.parentOfType(e,t)}if(i&&n&&k.contains(i,n)){i=n}else if(!i&&n){i=n}return i},closestEditableOfType:function(e,t){var i=M.closestEditable(e,t);if(i&&M.ofType(i,t)&&!k(i).is(".k-editor")){return i}},filter:function(t,e,i){var n=function(e){return M.name(e)==t};return M.filterBy(e,n,i)},filterBy:function(e,t,i){var n=0;var r=e.length;var a=[];var o;for(;n<r;n++){o=t(e[n]);if(o&&!i||!o&&i){a.push(e[n])}}return a},ensureTrailingBreaks:function(e){var t=k(e).find("p,td,th");var i=t.length;var n=0;if(i){for(;n<i;n++){M.ensureTrailingBreak(t[n])}}else{M.ensureTrailingBreak(e)}},removeTrailingBreak:function(e){k(e).find("br[type=_moz],.k-br").remove()},ensureTrailingBreak:function(e){M.removeTrailingBreak(e);var t=e.lastChild;var i=t&&M.name(t);var n;if(!i||i!="br"&&i!="img"||i=="br"&&t.className!="k-br"){n=e.ownerDocument.createElement("br");n.className="k-br";e.appendChild(n)}},reMapTableColumns:function(e,t){M._mapColIndices(e,t)},clearTableMappings:function(e,t){k(e).find("["+t+"]").removeAttr(t)},_mapColIndices:function(e,t){var i={};for(var n=0;n<e.rows.length;n++){var r=e.rows[n].cells;var a=0;for(var o=0;o<r.length;o++,a++){var s=r[o];if(s.rowSpan>1){this._mapColspan(s,n,a,i)}if(i[n]){while(i[n][a]){a++}}s.setAttribute(t,a);if(s.colSpan>1){a=a+s.colSpan-1}}}},_mapColspan:function(e,t,i,n){var r=e.rowSpan,a=e.colSpan,o;for(var s=0;s<a;s++){o=i+s;for(var l=t+1;l<t+r;l++){if(!n[l]){n[l]={};n[l].length=0}if(n[t]){while(n[t][o]){o++}}n[l][o]=true;n[l].length++}}},associateWithIds:function(e){var t=this;var i=0;var n=e.rows;var r=n.length;var a=[];var o=[];var s,l;if(e.tHead){s=e.tHead.rows;i=s.length}else{i=t._getNumberOfHeaderRows(e);s=[];for(l=0;l<i;l++){s.push(n[l])}}for(l=0;l<i;l++){a.push([])}for(l=0;l<r;l++){o.push([])}t._generateIdsForColumns(a,s);t._generateIdsForRows(a,o,i,n);t._assignIds(a,o,i,n)},_generateIdsForColumns:function(e,t){var i=(new Date).getTime();var n=t?t.length:0;var r,a,o,s,l,d,u,c,f,h,p;for(c=0;c<n;c++){r=t[c];a=r.cells;s=0;for(f=0;f<a.length;f++){o=a[f];l="table"+c+f+ ++i;o.setAttribute("id",l);d=o.getAttribute("colspan")||1;u=o.getAttribute("rowspan")||1;while(e[c][f+s]){s+=1}for(h=0;h<u;h++){for(p=0;p<d;p++){e[c+h][f+s+p]=l}}}}},_generateIdsForRows:function(e,t,i,n){var r=this;var a=(new Date).getTime();var o=n.length;var s,l,d,u,c,f,h,p,v,m,g,_,b;var w=function(e){b.push(e[_])};for(p=i;p<o;p++){s=n[p];l=k(s.cells).filter("th");u=0;for(v=0;v<l.length;v++){d=l[v];c="table"+p+v+ ++a;d.setAttribute("id",c);f=d.getAttribute("colspan")||1;h=d.getAttribute("rowspan")||1;while(t[p][v+u]){u+=1}for(m=0;m<h;m++){for(g=0;g<f;g++){t[p+m][v+u+g]=c}}_=d.getAttribute("col-index");b=[];e.forEach(w);b=b.filter(r._onlyUnique);d.setAttribute("headers",b.join(" ").trim())}}},_assignIds:function(e,t,i,n){var r=this;var a=n.length;var o,s,l,d,u,c,f;var h=function(e){f.push(e[c])};for(d=i;d<a;d++){o=n[d];s=k(o.cells).filter("td");for(u=0;u<s.length;u++){l=s[u];c=l.getAttribute("col-index");f=t[d].slice();e.forEach(h);f=f.filter(r._onlyUnique);l.setAttribute("headers",f.join(" ").trim())}}},_getNumberOfColumns:function(e){var t=k(e).find("th, td");var i=0;var n,r,a;for(r=0;r<t.length;r++){n=t[r];a=Number(n.getAttribute("col-index"))+1;if(a>i){i=a}}return i},_getNumberOfHeaderColumns:function(e,t){var i=e.rows;var n=0;var r,a,o,s,l;for(o=t;o<i.length;o++){a=i[o];for(s=0;s<a.cells.length;s++){l=a.cells[s];if(this.is(l,"th")){r=Number(l.getAttribute("col-index"))+1;if(r>n){n=r}}}}return n},_getNumberOfHeaderRows:function(e){var t=e.rows;var i=e.tHead;var n=i&&e.tHead.rows?e.tHead.rows.length:0;var r,a,o,s;if(n===0){a=t[0];s=a.cells&&a.cells.length;while(a&&s&&this.is(a.cells[0],"th")){for(r=0;r<s;r++){o=a?a.cells[r]:null;if(!this.is(o,"th")){a=null}}if(a){n+=1;a=this.next(a);s=a&&a.cells&&a.cells.length}}}return n},_onlyUnique:function(e,t,i){return i.indexOf(e)===t}};o.ui.editor.Dom=M})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("editor/serializer",["editor/dom"],e)})(function(){(function(w,k){var y=window.kendo;var x=y.ui.editor;var C=x.Dom;var e=w.extend;var s="xx-small,x-small,small,medium,large,x-large,xx-large".split(",");var l=/"/g;var d=/<br[^>]*>/i;var S=/^\d+(\.\d*)?(px)?$/i;var T=/<p>(?:&nbsp;)?<\/p>/i;var D=/(\*?[-#\/\*\\\w]+(?:\[[0-9a-z_-]+\])?)\s*:\s*((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/g;var A=/^sizzle-\d+/i;var E=/^k-script-/i;var t=/\s*onerror\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/i;var i='<br class="k-br">';var a="<span class='k-br'>\ufeff</span>";var n=document.createElement("div");n.innerHTML=" <hr>";var I=n.firstChild.nodeType===3;n=null;var u=w.isFunction;var M="td";var c={toEditableHtml:function(e){return(e||"").replace(/<!\[CDATA\[(.*)?\]\]>/g,"\x3c!--[CDATA[$1]]--\x3e").replace(/<(\/?)script([^>]*)>/gi,"<$1k:script$2>").replace(/<img([^>]*)>/gi,function(e){return e.replace(t,"")}).replace(/(<\/?img[^>]*>)[\r\n\v\f\t ]+/gi,"$1").replace(/^<(table|blockquote)/i,i+"<$1").replace(/^[\s]*(&nbsp;|\u00a0)/i,"$1").replace(/<\/(table|blockquote)>$/i,"</$1>"+i)},_toEditableImmutables:function(e){var t=x.Immutables.immutable,i=C.emptyTextNode,n=e.firstChild,r=e.lastChild;while(i(n)){n=n.nextSibling}while(i(r)){r=r.previousSibling}if(n&&t(n)){w(a).prependTo(e)}if(r&&t(r)){w(a).appendTo(e)}},_fillEmptyElements:function(e){w(e).find("p,td").each(function(){var e=w(this);if(/^\s*$/g.test(e.text())&&!e.find("img,input").length){var t=this;while(t.children[0]&&t.children[0].nodeType!=3){t=t.children[0]}if(t.nodeType==1&&!C.empty[C.name(t)]){if(C.is(t,"td")){t.innerHTML=y.ui.editor.emptyTableCellContent}else{t.innerHTML=y.ui.editor.emptyElementContent}}}})},_removeSystemElements:function(e){w(".k-paste-container",e).remove()},_resetOrderedLists:function(e){var t=e.getElementsByTagName("ol"),i,n,r;for(i=0;i<t.length;i++){n=t[i];r=n.getAttribute("start");n.setAttribute("start",1);if(r){n.setAttribute("start",r)}else{n.removeAttribute(r)}}},_preventScriptExecution:function(e){w(e).find("*").each(function(){var e=this.attributes;var t,i,n,r;var a=[];for(i=0,n=e.length;i<n;i++){t=e[i];r=t.nodeName;if(t.specified&&/^on/i.test(r)){this.setAttribute("k-script-"+r,t.value);a.push(r)}}for(i=0,n=a.length;i<n;i++){this.removeAttribute(a[i])}})},htmlToDom:function(e,t,i){var n=y.support.browser;var r=n.msie;var a=i||{};var o=a.immutables;e=c.toEditableHtml(e);if(u(a.custom)){e=a.custom(e)||e}t.innerHTML=e;if(o){o.deserialize(t)}if(r){C.normalize(t);c._resetOrderedLists(t)}c._preventScriptExecution(t);c._fillEmptyElements(t);c._removeSystemElements(t);c._toEditableImmutables(t);w("table",t).addClass("k-table");return t},domToXhtml:function(e,u){var c=[];var f=u&&u.immutables;function o(e){return w.grep(e,function(e){return e.name!="style"})}function t(e,t){c.push("<"+t);m(e);c.push(">")}var h={iframe:{start:function(e){t(e,"iframe")},end:function(){c.push("</iframe>")}},"k:script":{start:function(e){t(e,"script")},end:function(){c.push("<\/script>")},skipEncoding:true},span:{semantic:true,start:function(e){var t=e.style;var i=v(e);var n=o(i);if(n.length){c.push("<span");m(e,n);c.push(">")}if(t.textDecoration=="underline"){c.push("<u>")}var r=[];if(t.color){r.push('color="'+C.toHex(t.color)+'"')}if(t.fontFamily){r.push('face="'+t.fontFamily+'"')}if(t.fontSize){var a=w.inArray(t.fontSize,s);r.push('size="'+a+'"')}if(r.length){c.push("<font "+r.join(" ")+">")}},end:function(e){var t=e.style;if(t.color||t.fontFamily||t.fontSize){c.push("</font>")}if(t.textDecoration=="underline"){c.push("</u>")}if(o(v(e)).length){c.push("</span>")}}},strong:{semantic:true,start:function(e){t(e,"b")},end:function(){c.push("</b>")}},em:{semantic:true,start:function(e){t(e,"i")},end:function(){c.push("</i>")}},b:{semantic:false,start:function(e){t(e,"strong")},end:function(){c.push("</strong>")}},i:{semantic:false,start:function(e){t(e,"em")},end:function(){c.push("</em>")}},u:{semantic:false,start:function(e){c.push("<span");var t=v(e);var i=w(t).filter(function(e,t){return t.name=="style"})[0];var n={nodeName:"style",value:"text-decoration:underline;"};if(i){n.value=i.value;if(!/text-decoration/i.test(n.value)){n.value="text-decoration:underline;"+n.value}t.splice(w.inArray(i,t),1)}t.push(n);m(e,t);c.push(">")},end:function(){c.push("</span>")}},font:{semantic:false,start:function(e){c.push('<span style="');var t=e.getAttribute("color");var i=s[e.getAttribute("size")];var n=e.getAttribute("face");if(t){c.push("color:");c.push(C.toHex(t));c.push(";")}if(n){c.push("font-family:");c.push(n);c.push(";")}if(i){c.push("font-size:");c.push(i);c.push(";")}c.push('">')},end:function(){c.push("</span>")}}};h.script=h["k:script"];u=u||{};if(typeof u.semantic=="undefined"){u.semantic=true}function n(e){var t=y.trim;var i=t(e);var n;var r,a;var o=[];D.lastIndex=0;while(true){n=D.exec(i);if(!n){break}r=t(n[1].toLowerCase());a=t(n[2]);if(r=="font-size-adjust"||r=="font-stretch"){continue}if(r.indexOf("color")>=0){a=C.toHex(a)}else if(r.indexOf("font")>=0){a=a.replace(l,"'")}else if(/\burl\(/g.test(a)){a=a.replace(l,"")}o.push({property:r,value:a})}return o}function p(e){var t=n(e);var i;for(i=0;i<t.length;i++){c.push(t[i].property);c.push(":");c.push(t[i].value);c.push(";")}}function v(e){var t=[];var i=e.attributes;var n,r,a;var o,s,l;for(r=0,a=i.length;r<a;r++){n=i[r];o=n.nodeName;s=n.value;l=n.specified;if(o=="value"&&"value"in e&&e.value){l=true}else if(o=="type"&&s=="text"){l=true}else if(o=="class"&&!s){l=false}else if(A.test(o)){l=false}else if(o=="complete"){l=false}else if(o=="altHtml"){l=false}else if(o=="start"&&C.is(e,"ul")){l=false}else if(o=="start"&&C.is(e,"ol")&&s=="1"){l=false}else if(o.indexOf("_moz")>=0){l=false}else if(E.test(o)){l=!!u.scripts}else if(o=="data-role"&&s=="resizable"&&(C.is(e,"tr")||C.is(e,"td"))){l=false}if(l){t.push(n)}}return t}function m(e,t){var i,n,r,a,o;t=t||v(e);if(C.is(e,"img")){var s=e.style.width,l=e.style.height,d=w(e);if(s&&S.test(s)){d.attr("width",parseInt(s,10));C.unstyle(e,{width:k})}if(l&&S.test(l)){d.attr("height",parseInt(l,10));C.unstyle(e,{height:k})}}if(!t.length){return}for(i=0,n=t.length;i<n;i++){r=t[i];a=r.nodeName;o=r.value;if(a=="class"&&o=="k-table"){continue}a=a.replace(E,"");c.push(" ");c.push(a);c.push('="');if(a=="style"){p(o||e.style.cssText)}else if(a=="src"||a=="href"){c.push(y.htmlEncode(e.getAttribute(a,2)))}else{c.push(C.fillAttrs[a]?a:o)}c.push('"')}}function g(e,t,i){for(var n=e.firstChild;n;n=n.nextSibling){r(n,t,i)}}function _(e){return e.nodeValue.replace(/\ufeff/g,"")}function b(e){if(C.isBom(e)){do{e=e.parentNode;if(C.is(e,M)&&e.childNodes.length===1){return true}if(e.childNodes.length!==1){return false}}while(!C.isBlock(e));return true}return false}function r(e,t,i){var n=e.nodeType,r,a,o,s,l,d;if(f&&x.Immutables.immutable(e)){c.push(f.serialize(e))}else if(n==1){r=C.name(e);d=w(e);if(d.hasClass("k-table-resize-handle-wrapper")||d.hasClass("k-column-resize-handle-wrapper")||d.hasClass("k-row-resize-handle-wrapper")){return}if(!r||C.insignificant(e)){return}if(!u.scripts&&(r=="script"||r=="k:script")){return}a=h[r];if(a){if(typeof a.semantic=="undefined"||u.semantic^a.semantic){a.start(e);g(e,false,a.skipEncoding);a.end(e);return}}c.push("<");c.push(r);m(e);if(C.empty[r]){c.push(" />")}else{c.push(">");g(e,t||C.is(e,"pre"));c.push("</");c.push(r);c.push(">")}}else if(n==3){if(b(e)){c.push("&nbsp;");return}s=_(e);if(!t&&I){o=e.parentNode;l=e.previousSibling;if(!l){l=(C.isInline(o)?o:e).previousSibling}if(!l||l.innerHTML===""||C.isBlock(l)){s=s.replace(/^[\r\n\v\f\t ]+/,"")}s=s.replace(/ +/," ")}c.push(i?s:C.encode(s,u))}else if(n==4){c.push("<![CDATA[");c.push(e.data);c.push("]]>")}else if(n==8){if(e.data.indexOf("[CDATA[")<0){c.push("\x3c!--");c.push(e.data);c.push("--\x3e")}else{c.push("<!");c.push(e.data);c.push(">")}}}function i(e){var t=e.childNodes.length;var i=t&&e.firstChild.nodeType==3;return i&&(t==1||t==2&&C.insignificant(e.lastChild))}function a(){if(w.isFunction(u.custom)){c=u.custom(c)||c}}if(i(e)){c=C.encode(_(e.firstChild).replace(/[\r\n\v\f\t ]+/," "),u);a();return c}g(e);c=c.join("");a();if(c.replace(d,"").replace(T,"")===""){return""}return c}};e(x,{Serializer:c})})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("editor/components",["editor/serializer"],e)})(function(){(function(d,n){var u=window.kendo,r=u.ui.DropDownList,l=u.ui.editor.Dom;var e=r.extend({init:function(e,t){var i=this;r.fn.init.call(i,e,t);if(u.support.mobileOS.ios){this._initSelectOverlay();this.bind("dataBound",d.proxy(this._initSelectOverlay,this))}i.text(i.options.title);i.element.attr("title",i.options.title);i.wrapper.attr("title",i.options.title);i.bind("open",function(){if(i.options.autoSize){var e=i.list,t;e.css({whiteSpace:"nowrap",width:"auto"});t=e.width();if(t>0){t+=20}else{t=i._listWidth}e.css("width",t+u.support.scrollbar());i._listWidth=t}})},options:{name:"SelectBox",index:-1},_initSelectOverlay:function(){var e=this;var t=e.value();var i=this.dataSource.view();var n;var r="";var a=u.htmlEncode;for(var o=0;o<i.length;o++){n=i[o];r+="<option value='"+a(n.value)+"'";if(n.value==t){r+=" selected"}r+=">"+a(n.text)+"</option>"}var s=d("<select class='k-select-overlay'>"+r+"</select>");var l=d(this.element).closest(".k-widget");l.next(".k-select-overlay").remove();s.insertAfter(l);s.on("change",function(){e.value(this.value);e.trigger("change")})},value:function(e){var t=this,i=r.fn.value.call(t,e);if(e===n){return i}if(!r.fn.value.call(t)){t.text(t.options.title)}},decorate:function(e){var t=this,i=t.dataSource,n=i.data(),r,a,o,s;if(e){t.list.css("background-color",l.getEffectiveBackground(d(e)))}for(r=0;r<n.length;r++){a=n[r].tag||"span";o=n[r].className;s=l.inlineStyle(e,a,{className:o});s=s.replace(/"/g,"'");n[r].style=s+";display:inline-block"}i.trigger("change")}});u.ui.plugin(e);u.ui.editor.SelectBox=e})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("editor/range",["editor/components"],e)})(function(){(function(r){var t=window.kendo,e=t.Class,i=r.extend,a=t.ui.editor,l=t.support.browser,m=a.Dom,v=m.findNodeIndex,g=m.isDataNode,n=m.findClosestAncestor,u=m.getNodeLength,_=m.normalize;var o={selectionFromWindow:function(e){if(!e){return}if(!("getSelection"in e)){return new p(e.document)}return e.getSelection()},selectionFromRange:function(e){var t=A.documentFromRange(e);return o.selectionFromDocument(t)},selectionFromDocument:function(e){return o.selectionFromWindow(m.windowFromDocument(e))}};var c=e.extend({init:function(e){r.extend(this,{ownerDocument:e,startContainer:e,endContainer:e,commonAncestorContainer:e,startOffset:0,endOffset:0,collapsed:true})},setStart:function(e,t){this.startContainer=e;this.startOffset=t;f(this);d(this,true)},setEnd:function(e,t){this.endContainer=e;this.endOffset=t;f(this);d(this,false)},setStartBefore:function(e){this.setStart(e.parentNode,v(e))},setStartAfter:function(e){this.setStart(e.parentNode,v(e)+1)},setEndBefore:function(e){this.setEnd(e.parentNode,v(e))},setEndAfter:function(e){this.setEnd(e.parentNode,v(e)+1)},selectNode:function(e){this.setStartBefore(e);this.setEndAfter(e)},selectNodeContents:function(e){this.setStart(e,0);this.setEnd(e,e[e.nodeType===1?"childNodes":"nodeValue"].length)},collapse:function(e){var t=this;if(e){t.setEnd(t.startContainer,t.startOffset)}else{t.setStart(t.endContainer,t.endOffset)}},deleteContents:function(){var e=this,t=e.cloneRange();if(e.startContainer!=e.commonAncestorContainer){e.setStartAfter(n(e.commonAncestorContainer,e.startContainer))}e.collapse(true);(function e(t){while(t.next()){if(t.hasPartialSubtree()){e(t.getSubtreeIterator())}else{t.remove()}}})(new h(t))},cloneContents:function(){var r=A.documentFromRange(this);return function e(t){var i,n=r.createDocumentFragment();while(i=t.next()){i=i.cloneNode(!t.hasPartialSubtree());if(t.hasPartialSubtree()){i.appendChild(e(t.getSubtreeIterator()))}n.appendChild(i)}return n}(new h(this))},extractContents:function(){var r=this,e=r.cloneRange();if(r.startContainer!=r.commonAncestorContainer){r.setStartAfter(n(r.commonAncestorContainer,r.startContainer))}r.collapse(true);var a=A.documentFromRange(r);return function e(t){var i,n=a.createDocumentFragment();while(i=t.next()){if(t.hasPartialSubtree()){i=i.cloneNode(false);i.appendChild(e(t.getSubtreeIterator()))}else{t.remove(r.originalRange)}n.appendChild(i)}return n}(new h(e))},insertNode:function(e){var t=this;if(g(t.startContainer)){if(t.startOffset!=t.startContainer.nodeValue.length){m.splitDataNode(t.startContainer,t.startOffset)}m.insertAfter(e,t.startContainer)}else{m.insertAt(t.startContainer,e,t.startOffset)}t.setStart(t.startContainer,t.startOffset)},cloneRange:function(){return r.extend(new c(this.ownerDocument),{startContainer:this.startContainer,endContainer:this.endContainer,commonAncestorContainer:this.commonAncestorContainer,startOffset:this.startOffset,endOffset:this.endOffset,collapsed:this.collapsed,originalRange:this})},toString:function(){var e=this.startContainer.nodeName,t=this.endContainer.nodeName;return[e=="#text"?this.startContainer.nodeValue:e,"(",this.startOffset,") : ",t=="#text"?this.endContainer.nodeValue:t,"(",this.endOffset,")"].join("")}});c.fromNode=function(e){return new c(e.ownerDocument)};function s(e,t,i,n){if(e==t){return n-i}var r=t;while(r&&r.parentNode!=e){r=r.parentNode}if(r){return v(r)-i}r=e;while(r&&r.parentNode!=t){r=r.parentNode}if(r){return n-v(r)-1}var a=m.commonAncestor(e,t);var o=e;while(o&&o.parentNode!=a){o=o.parentNode}if(!o){o=a}var s=t;while(s&&s.parentNode!=a){s=s.parentNode}if(!s){s=a}if(o==s){return 0}return v(s)-v(o)}function d(e,t){function i(e){try{return s(e.startContainer,e.endContainer,e.startOffset,e.endOffset)<0}catch(e){return true}}if(i(e)){if(t){e.commonAncestorContainer=e.endContainer=e.startContainer;e.endOffset=e.startOffset}else{e.commonAncestorContainer=e.startContainer=e.endContainer;e.startOffset=e.endOffset}e.collapsed=true}}function f(e){e.collapsed=e.startContainer==e.endContainer&&e.startOffset==e.endOffset;var t=e.startContainer;while(t&&t!=e.endContainer&&!m.isAncestorOf(t,e.endContainer)){t=t.parentNode}e.commonAncestorContainer=t}var h=e.extend({init:function(e){r.extend(this,{range:e,_current:null,_next:null,_end:null});if(e.collapsed){return}var t=e.commonAncestorContainer;this._next=e.startContainer==t&&!g(e.startContainer)?e.startContainer.childNodes[e.startOffset]:n(t,e.startContainer);this._end=e.endContainer==t&&!g(e.endContainer)?e.endContainer.childNodes[e.endOffset]:n(t,e.endContainer).nextSibling},hasNext:function(){return!!this._next},next:function(){var e=this,t=e._current=e._next;e._next=e._current&&e._current.nextSibling!=e._end?e._current.nextSibling:null;if(g(e._current)){if(e.range.endContainer==e._current){t=t.cloneNode(true);t.deleteData(e.range.endOffset,t.length-e.range.endOffset)}if(e.range.startContainer==e._current){t=t.cloneNode(true);t.deleteData(0,e.range.startOffset)}}return t},traverse:function(e){var t=this,i;function n(){t._current=t._next;t._next=t._current&&t._current.nextSibling!=t._end?t._current.nextSibling:null;return t._current}while(i=n()){if(t.hasPartialSubtree()){t.getSubtreeIterator().traverse(e)}else{e(i)}}return i},remove:function(e){var t=this,i=t.range.startContainer==t._current,n=t.range.endContainer==t._current,r,a,o;if(g(t._current)&&(i||n)){r=i?t.range.startOffset:0;a=n?t.range.endOffset:t._current.length;o=a-r;if(e&&(i||n)){if(t._current==e.startContainer&&r<=e.startOffset){e.startOffset-=o}if(t._current==e.endContainer&&a<=e.endOffset){e.endOffset-=o}}t._current.deleteData(r,o)}else{var s=t._current.parentNode;if(e&&(t.range.startContainer==s||t.range.endContainer==s)){var l=v(t._current);if(s==e.startContainer&&l<=e.startOffset){e.startOffset-=1}if(s==e.endContainer&&l<e.endOffset){e.endOffset-=1}}m.remove(t._current)}},hasPartialSubtree:function(){return!g(this._current)&&(m.isAncestorOrSelf(this._current,this.range.startContainer)||m.isAncestorOrSelf(this._current,this.range.endContainer))},getSubtreeIterator:function(){return new h(this.getSubRange())},getSubRange:function(){var e=this,t=e.range.cloneRange();t.selectNodeContents(e._current);if(m.isAncestorOrSelf(e._current,e.range.startContainer)){t.setStart(e.range.startContainer,e.range.startOffset)}if(m.isAncestorOrSelf(e._current,e.range.endContainer)){t.setEnd(e.range.endContainer,e.range.endOffset)}return t}});var p=e.extend({init:function(e){this.ownerDocument=e;this.rangeCount=1},addRange:function(e){var t=this.ownerDocument.body.createTextRange();w(t,e,false);w(t,e,true);t.select()},removeAllRanges:function(){var e=this.ownerDocument.selection;if(e.type!="None"){e.empty()}},getRangeAt:function(){var e,t=new c(this.ownerDocument),i=this.ownerDocument.selection,n,r;try{e=i.createRange();n=e.item?e.item(0):e.parentElement();if(n.ownerDocument!=this.ownerDocument){return t}}catch(e){return t}if(i.type=="Control"){t.selectNode(e.item(0))}else{r=b(e);k(e,t,r,true);k(e,t,r,false);if(t.startContainer.nodeType==9){t.setStart(t.endContainer,t.startOffset)}if(t.endContainer.nodeType==9){t.setEnd(t.startContainer,t.endOffset)}if(e.compareEndPoints("StartToEnd",e)===0){t.collapse(false)}var a=t.startContainer,o=t.endContainer,s=this.ownerDocument.body;if(!t.collapsed&&t.startOffset===0&&t.endOffset==u(t.endContainer)&&!(a==o&&g(a)&&a.parentNode==s)){var l=false,d=false;while(v(a)===0&&a==a.parentNode.firstChild&&a!=s){a=a.parentNode;l=true}while(v(o)==u(o.parentNode)-1&&o==o.parentNode.lastChild&&o!=s){o=o.parentNode;d=true}if(a==s&&o==s&&l&&d){t.setStart(a,0);t.setEnd(o,u(s))}}}return t}});function b(e){var t=e.duplicate(),i=e.duplicate();t.collapse(true);i.collapse(false);return m.commonAncestor(e.parentElement(),t.parentElement(),i.parentElement())}function w(e,t,i){var n=t[i?"startContainer":"endContainer"],r=t[i?"startOffset":"endOffset"],a=0,o=g(n),s=o?n:n.childNodes[r]||null,l=o?n.parentNode:n,d=t.ownerDocument,u=d.body.createTextRange(),c;if(n.nodeType==3||n.nodeType==4){a=r}if(!l){l=d.body}if(l.nodeName.toLowerCase()=="img"){u.moveToElementText(l);u.collapse(false);e.setEndPoint(i?"StartToStart":"EndToStart",u)}else{c=l.insertBefore(m.create(d,"a"),s);u.moveToElementText(c);m.remove(c);u[i?"moveStart":"moveEnd"]("character",a);u.collapse(false);e.setEndPoint(i?"StartToStart":"EndToStart",u)}}function k(e,t,i,n){var r=m.create(t.ownerDocument,"a"),a=e.duplicate(),o=n?"StartToStart":"StartToEnd",s,l,d,u,c,f,h,p=false;r.innerHTML="\ufeff";a.collapse(n);l=a.parentElement();if(!m.isAncestorOrSelf(i,l)){l=i}do{if(p){l.insertBefore(r,r.previousSibling)}else{l.appendChild(r);p=true}a.moveToElementText(r)}while((s=a.compareEndPoints(o,e))>0&&r.previousSibling);d=r.nextSibling;if(s==-1&&g(d)){a.setEndPoint(n?"EndToStart":"EndToEnd",e);m.remove(r);f=[d,a.text.length]}else{u=!n&&r.previousSibling;c=n&&r.nextSibling;if(g(c)){f=[c,0]}else if(g(u)){f=[u,u.length]}else{h=v(r);if(l.nextSibling&&h==l.childNodes.length-1){f=[l.nextSibling,0]}else{f=[l,h]}}m.remove(r)}t[n?"setStart":"setEnd"].apply(t,f)}var y=e.extend({init:function(e){this.enumerate=function(){var t=[];function i(e){if(m.is(e,"img")||e.nodeType==3&&(!m.isEmptyspace(e)||e.nodeValue=="\ufeff")){t.push(e)}else{e=e.firstChild;while(e){i(e);e=e.nextSibling}}}new h(e).traverse(i);return t}}});var x=h.extend({hasPartialSubtree:function(){var e=a.Immutables&&a.Immutables.immutable;return e&&!e(this._current)&&h.fn.hasPartialSubtree.call(this)},getSubtreeIterator:function(){return new x(this.getSubRange())}});var C=e.extend({init:function(e){this.enumerate=function(){var t=[];var i=a.Immutables&&a.Immutables.immutable;function n(e){if(i&&!i(e)){if(m.is(e,"img")||e.nodeType==3&&(!m.isEmptyspace(e)||e.nodeValue=="\ufeff")){t.push(e)}else{e=e.firstChild;while(e){n(e);e=e.nextSibling}}}}new x(e).traverse(n);return t}}});var S=e.extend({init:function(e,t,i){var n=this;n.range=e;n.rootNode=A.documentFromRange(e);n.body=t||n.getEditable(e);if(m.name(n.body)!="body"){n.rootNode=n.body}n.startContainer=n.nodeToPath(e.startContainer);n.endContainer=n.nodeToPath(e.endContainer);n.startOffset=n.offset(e.startContainer,e.startOffset);n.endOffset=n.offset(e.endContainer,e.endOffset);n.immutables=i&&i.immutables;if(n.immutables){n.serializedImmutables=a.Immutables.removeImmutables(n.body)}n.html=n.body.innerHTML;if(n.immutables&&!n.serializedImmutables.empty){a.Immutables.restoreImmutables(n.body,n.serializedImmutables)}},index:function(e){var t=0,i=e.nodeType;while(e=e.previousSibling){var n=e.nodeType;if(n!=3||i!=n){t++}i=n}return t},getEditable:function(e){var t=e.commonAncestorContainer;while(t&&(t.nodeType==3||t.attributes&&(!t.attributes.contentEditable||t.attributes.contentEditable.nodeValue.toLowerCase()=="false"))){t=t.parentNode}return t},restoreHtml:function(){var e=this;m.removeChildren(e.body);e.body.innerHTML=e.html;if(e.immutables&&!e.serializedImmutables.empty){a.Immutables.restoreImmutables(e.body,e.serializedImmutables)}},offset:function(e,t){if(e.nodeType==3){while((e=e.previousSibling)&&e.nodeType==3){t+=e.nodeValue.length}}return t},nodeToPath:function(e){var t=[];while(e!=this.rootNode){t.push(this.index(e));e=e.parentNode}return t},toRangePoint:function(e,t,i,n){var r=this.rootNode,a=i.length,o=n;while(a--&&r){r=r.childNodes[i[a]]}while(r&&r.nodeType==3&&r.nodeValue.length<o){o-=r.nodeValue.length;r=r.nextSibling}if(r&&o>=0){e[t?"setStart":"setEnd"](r,o)}},toRange:function(){var e=this,t=e.range.cloneRange();e.toRangePoint(t,true,e.startContainer,e.startOffset);e.toRangePoint(t,false,e.endContainer,e.endOffset);return t}});var T=e.extend({init:function(){this.caret=null},addCaret:function(e){var t=this;var i=t.caret=m.create(A.documentFromRange(e),"span",{className:"k-marker"});e.insertNode(i);m.stripBomNode(i.previousSibling);m.stripBomNode(i.nextSibling);e.selectNode(i);return i},removeCaret:function(e){var t=this,i=t.caret.previousSibling,n=0;if(i){n=g(i)?i.nodeValue.length:v(i)}var r=t.caret.parentNode;var a=i?v(i):0;m.remove(t.caret);_(r);var o=r.childNodes[a];if(g(o)){e.setStart(o,n)}else if(o){var s=m.lastTextNode(o);if(s){e.setStart(s,s.nodeValue.length)}else{e[i?"setStartAfter":"setStartBefore"](o)}}else{if(!l.msie&&!r.innerHTML){r.innerHTML='<br _moz_dirty="" />'}e.selectNodeContents(r)}e.collapse(true)},add:function(e,t){var i=this;var n=e.collapsed&&!A.isExpandable(e);var r=A.documentFromRange(e);if(t&&e.collapsed){i.addCaret(e);e=A.expand(e)}var a=e.cloneRange();a.collapse(false);i.end=m.create(r,"span",{className:"k-marker"});a.insertNode(i.end);a=e.cloneRange();a.collapse(true);i.start=i.end.cloneNode(true);a.insertNode(i.start);i._removeDeadMarkers(i.start,i.end);if(n){var o=r.createTextNode("\ufeff");m.insertAfter(o.cloneNode(),i.start);m.insertBefore(o,i.end)}_(e.commonAncestorContainer);e.setStartBefore(i.start);e.setEndAfter(i.end);return e},_removeDeadMarkers:function(e,t){if(e.previousSibling&&e.previousSibling.nodeValue=="\ufeff"){m.remove(e.previousSibling)}if(t.nextSibling&&t.nextSibling.nodeValue=="\ufeff"){m.remove(t.nextSibling)}},_normalizedIndex:function(e){var t=v(e);var i=e;while(i.previousSibling){if(i.nodeType==3&&i.previousSibling.nodeType==3){t--}i=i.previousSibling}return t},remove:function(e){var t=this,i=t.start,n=t.end,r,a,o;_(e.commonAncestorContainer);while(!i.nextSibling&&i.parentNode){i=i.parentNode}while(!n.previousSibling&&n.parentNode){n=n.parentNode}r=i.previousSibling&&i.previousSibling.nodeType==3&&(i.nextSibling&&i.nextSibling.nodeType==3);a=n.previousSibling&&n.previousSibling.nodeType==3&&(n.nextSibling&&n.nextSibling.nodeType==3);o=r&&a;i=i.nextSibling;n=n.previousSibling;var s=i===n&&m.isBom(i);if(s&&i.length>1){i.nodeValue=i.nodeValue.charAt(0)}var l=s;var d=false;if(i==t.end){d=!!t.start.previousSibling;i=n=t.start.previousSibling||t.end.nextSibling;l=true}m.remove(t.start);m.remove(t.end);if(!i||!n){e.selectNodeContents(e.commonAncestorContainer);e.collapse(true);return}var u=l?g(i)?i.nodeValue.length:i.childNodes.length:0;var c=g(n)?n.nodeValue.length:n.childNodes.length;if(i.nodeType==3){while(i.previousSibling&&i.previousSibling.nodeType==3){i=i.previousSibling;u+=i.nodeValue.length}}if(n.nodeType==3){while(n.previousSibling&&n.previousSibling.nodeType==3){n=n.previousSibling;c+=n.nodeValue.length}}var f=i.parentNode;var h=n.parentNode;var p=this._normalizedIndex(i);var v=this._normalizedIndex(n);_(f);if(i.nodeType==3){i=f.childNodes[p]}_(h);if(n.nodeType==3){n=h.childNodes[v]}if(l){if(i.nodeType==3){e.setStart(i,u)}else{e[d?"setStartAfter":"setStartBefore"](i)}e.collapse(true)}else{if(i.nodeType==3){e.setStart(i,u)}else{e.setStartBefore(i)}if(n.nodeType==3){e.setEnd(n,c)}else{e.setEndAfter(n)}}if(t.caret){t.removeCaret(e)}}});var D=/[\u0009-\u000d]|\u0020|\u00a0|\ufeff|\.|,|;|:|!|\(|\)|\?/;var A={nodes:function(e){var t=A.textNodes(e);if(!t.length){e.selectNodeContents(e.commonAncestorContainer);t=A.textNodes(e);if(!t.length){t=m.significantChildNodes(e.commonAncestorContainer)}}return t},textNodes:function(e){return new y(e).enumerate()},editableTextNodes:function(e){var t=[],i=a.Immutables&&a.Immutables.immutableParent;if(i&&!i(e.commonAncestorContainer)){t=new C(e).enumerate()}return t},documentFromRange:function(e){var t=e.startContainer;return t.nodeType==9?t:t.ownerDocument},createRange:function(e){return e.createRange()},selectRange:function(e){var t=A.image(e);if(t){e.setStartAfter(t);e.setEndAfter(t)}var i=o.selectionFromRange(e);i.removeAllRanges();i.addRange(e)},stringify:function(e){return t.format("{0}:{1} - {2}:{3}",m.name(e.startContainer),e.startOffset,m.name(e.endContainer),e.endOffset)},split:function(n,r,a){function e(e){var t=n.cloneRange();t.collapse(e);t[e?"setStartBefore":"setEndAfter"](r);var i=t.extractContents();if(a){i=m.trim(i)}m[e?"insertBefore":"insertAfter"](i,r)}e(true);e(false)},mapAll:function(e,i){var n=[];new h(e).traverse(function(e){var t=i(e);if(t&&r.inArray(t,n)<0){n.push(t)}});return n},getAll:function(e,t){var i=t;if(typeof t=="string"){t=function(e){return m.is(e,i)}}return A.mapAll(e,function(e){if(t(e)){return e}})},getMarkers:function(e){return A.getAll(e,function(e){return e.className=="k-marker"})},image:function(e){var t=A.getAll(e,"img");if(t.length==1){return t[0]}},isStartOf:function(e,t){if(e.startOffset!==0){return false}var i=e.cloneRange();while(i.startOffset===0&&i.startContainer!=t){var n=m.findNodeIndex(i.startContainer);var r=i.startContainer.parentNode;while(n>0&&r[n-1]&&m.insignificant(r[n-1])){n--}i.setStart(r,n)}return i.startOffset===0&&i.startContainer==t},isEndOf:function(e,t){var i=e.cloneRange();i.collapse(false);var n=i.startContainer;if(m.isDataNode(n)&&i.startOffset==m.getNodeLength(n)){i.setStart(n.parentNode,m.findNodeIndex(n)+1);i.collapse(true)}i.setEnd(t,m.getNodeLength(t));var r=[];function a(e){if(!m.insignificant(e)&&!(m.isDataNode(e)&&/^[\ufeff]*$/.test(e.nodeValue))){r.push(e)}}new h(i).traverse(a);return!r.length},wrapSelectedElements:function(e){var t=m.editableParent(e.startContainer);var i=m.editableParent(e.endContainer);while(e.startOffset===0&&e.startContainer!=t){e.setStart(e.startContainer.parentNode,m.findNodeIndex(e.startContainer))}function n(e,t){var i=m.getNodeLength(t);if(e==i){return true}for(var n=e;n<i;n++){if(!m.insignificant(t.childNodes[n])){return false}}return true}while(n(e.endOffset,e.endContainer)&&e.endContainer!=i){e.setEnd(e.endContainer.parentNode,m.findNodeIndex(e.endContainer)+1)}return e},expand:function(e){var t=e.cloneRange();var i=t.startContainer.childNodes[t.startOffset===0?0:t.startOffset-1];var n=t.endContainer.childNodes[t.endOffset];if(!g(i)||!g(n)){return t}var r=i.nodeValue;var a=n.nodeValue;if(!r||!a){return t}var o=r.split("").reverse().join("").search(D);var s=a.search(D);if(!o||!s){return t}s=s==-1?a.length:s;o=o==-1?0:r.length-o;t.setStart(i,o);t.setEnd(n,s);return t},isExpandable:function(e){var t=e.startContainer;var i=A.documentFromRange(e);if(t==i||t==i.body){return false}var n=e.cloneRange();var r=t.nodeValue;if(!r){return false}var a=r.substring(0,n.startOffset);var o=r.substring(n.startOffset);var s=0,l=0;if(a){s=a.split("").reverse().join("").search(D)}if(o){l=o.search(D)}return s&&l}};i(a,{SelectionUtils:o,W3CRange:c,RangeIterator:h,W3CSelection:p,RangeEnumerator:y,RestorePoint:S,Marker:T,RangeUtils:A})})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("editor/immutables",["editor/range"],e)})(function(){(function(o,i){var d=window.kendo,e=d.Class,r=d.ui.editor,u=r.Dom,a=d.template,s=r.RangeUtils,c=["ul","ol","tbody","thead","table"],t=["bold","italic","underline","strikethrough","superscript","subscript","forecolor","backcolor","fontname","fontsize","createlink","unlink","autolink","addcolumnleft","addcolumnright","addrowabove","addrowbelow","deleterow","deletecolumn","mergecells","formatting","cleanformatting"],l="k-immutable",f="["+l+"]",h="[contenteditable='false']";var n=function(e){return o(e).is("body,.k-editor")};var p=function(e){return e.getAttribute&&e.getAttribute("contenteditable")=="false"};var v=function(e){return u.closestBy(e,p,n)};var m=function(e){var t=v(e.startContainer);var i=v(e.endContainer);if(t||i){if(t){e.setStartBefore(t)}if(i){e.setEndAfter(i)}}};var g=function(e){if(v(e.commonAncestorContainer)){return true}else if(v(e.startContainer)||v(e.endContainer)){var t=s.editableTextNodes(e);if(t.length===0){return true}}return false};var _=function(e){var t="";var i="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(var n=e||10;n>0;--n){t+=i.charAt(Math.round(Math.random()*(i.length-1)))}return t};var b=function(e){var i={empty:true},n,r,a;o(e).find(h).each(function(e,t){n=u.name(t);r=_();a="<"+n+" "+l+"='"+r+"'></"+n+">";i[r]={node:t,style:o(t).attr("style")};i.empty=false;o(t).replaceWith(a)});return i};var w=function(e,i){var n,r;o(e).find(f).each(function(e,t){n=t.getAttribute(l);r=i[n];o(t).replaceWith(r.node);if(r.style!=o(r.node).attr("style")){o(r.node).removeAttr("style").attr("style",r.style)}})};var k=function(e){var t=d.keys;return e===t.BACKSPACE||e==t.DELETE};var y=function(e){var t=e?e.options:i;if(t&&t.finder){t.finder._initOptions({immutables:true})}};var x=e.extend({init:function(e){this.editor=e;this.serializedImmutables={};this.options=o.extend({},e&&e.options&&e.options.immutables);var t=e.toolbar.tools;y(t.justifyLeft);y(t.justifyCenter);y(t.justifyRight);y(t.justifyFull)},serialize:function(e){var t=this._toHtml(e),i;if(t.indexOf(l)===-1){i=this.randomId();t=t.replace(/>/," "+l+'="'+i+'">')}else{i=t.match(/k-immutable\s*=\s*['"](.*)['"]/)[1]}this.serializedImmutables[i]=e;return t},_toHtml:function(e){var t=this.options.serialization;var i=typeof t;var n;switch(i){case"string":return a(t)(e);case"function":return t(e);default:n=u.name(e);return"<"+n+"></"+n+">"}},deserialize:function(e){var i=this;var n=this.options.deserialization;o(f,e).each(function(){var e=this.getAttribute(l);var t=i.serializedImmutables[e];if(d.isFunction(n)){n(this,t)}o(this).replaceWith(t)});i.serializedImmutables={}},randomId:function(e){return _(e)},keydown:function(e,t){var i=k(e.keyCode);var n=i&&this._cancelDeleting(e,t)||!i&&this._cancelTyping(e,t);if(n){e.preventDefault();return true}},_cancelTyping:function(e,t){var i=this.editor;var n=i.keyboard;return t.collapsed&&!n.typingInProgress&&n.isTypingKey(e)&&g(t)},_cancelDeleting:function(e,t){var i=d.keys;var n=e.keyCode===i.BACKSPACE;var r=e.keyCode==i.DELETE;if(!n&&!r){return false}var a=false;if(t.collapsed){if(g(t)){return true}var o=this.nextImmutable(t,r);if(o&&n){var s=u.closest(t.commonAncestorContainer,"li");if(s){var l=u.closest(o,"li");if(l&&l!==s){return a}}}if(o&&!u.tableCell(o)){if(u.parentOfType(o,c)===u.parentOfType(t.commonAncestorContainer,c)){while(o&&o.parentNode.childNodes.length==1){o=o.parentNode}if(u.tableCell(o)){return a}this._removeImmutable(o,t)}a=true}}return a},nextImmutable:function(e,t){var i=e.commonAncestorContainer;if(u.isBom(i)||(t&&s.isEndOf(e,i)||!t&&s.isStartOf(e,i))){var n=this._nextNode(i,t);if(n&&u.isBlock(n)&&!v(n)){while(n&&n.children&&n.children[t?0:n.children.length-1]){n=n.children[t?0:n.children.length-1]}}return v(n)}},_removeImmutable:function(e,t){var i=this.editor;var n=new r.RestorePoint(t,i.body);u.remove(e);r._finishUpdate(i,n)},_nextNode:function(e,t){var i=t?"nextSibling":"previousSibling";var n=e,r;while(n&&!r){r=n[i];if(r&&u.isDataNode(r)&&/^\s|[\ufeff]$/.test(r.nodeValue)){n=r;r=n[i]}if(!r){n=n.parentNode}}return r}});x.immutable=p;x.immutableParent=v;x.expandImmutablesIn=m;x.immutablesContext=g;x.toolsToBeUpdated=t;x.removeImmutables=b;x.restoreImmutables=w;r.Immutables=x})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("editor/command",["editor/immutables"],e)})(function(){(function(n){var r=window.kendo,e=r.Class,t=r.ui.editor,i=t.Dom,a=t.RestorePoint,o=t.Marker,s=n.extend;function l(e,t){var i=e.selectionRestorePoint=new a(e.getRange(),e.body);var n=new u(t,i);n.editor=e;e.undoRedoStack.push(n);return i}var d=e.extend({init:function(e){this.options=e;this.restorePoint=new a(e.range,e.body,{immutables:e.immutables});this.marker=new o;this.formatter=e.formatter},getRange:function(){return this.restorePoint.toRange()},lockRange:function(e){return this.marker.add(this.getRange(),e)},releaseRange:function(e){this.marker.remove(e);this.editor.selectRange(e)},undo:function(){var e=this.restorePoint;e.restoreHtml();this.editor.selectRange(e.toRange())},redo:function(){this.exec()},createDialog:function(e,t){var i=this.editor;return n(e).appendTo(document.body).kendoWindow(s({},i.options.dialogOptions,t)).closest(".k-window").toggleClass("k-rtl",r.support.isRtl(i.wrapper)).end()},exec:function(){var e=this.lockRange(true);this.formatter.editor=this.editor;this.formatter.toggle(e);this.releaseRange(e)},immutables:function(){return this.editor&&this.editor.options.immutables},expandImmutablesIn:function(e){if(this.immutables()){r.ui.editor.Immutables.expandImmutablesIn(e);this.restorePoint=new a(e,this.editor.body)}}});var u=e.extend({init:function(e,t){this.body=e.body;this.startRestorePoint=e;this.endRestorePoint=t},redo:function(){i.removeChildren(this.body);this.body.innerHTML=this.endRestorePoint.html;this.editor.selectRange(this.endRestorePoint.toRange())},undo:function(){i.removeChildren(this.body);this.body.innerHTML=this.startRestorePoint.html;this.editor.selectRange(this.startRestorePoint.toRange())}});s(t,{_finishUpdate:l,Command:d,GenericCommand:u})})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("editor/toolbar",["editor/range"],e)})(function(){(function(b,c){var w=window.kendo;var e=w.ui;var f=e.editor;var n=e.Widget;var l=b.extend;var k=b.proxy;var u=w.keys;var s=".kendoEditor";var t=f.EditorUtils;var i=f.ToolTemplate;var r=f.Tool;var a=w._outerWidth;var d=w._outerHeight;var y="overflowAnchor";var h=".k-tool-group:visible .k-tool:not(.k-state-disabled),"+".k-tool.k-overflow-anchor:visible,"+".k-tool-group:visible .k-colorpicker:not(input),"+".k-tool-group:visible .k-selectbox,"+".k-tool-group:visible .k-dropdown,"+".k-tool-group:visible .k-combobox .k-input";var o={"k-i-sup-script":"superscript","k-i-sub-script":"subscript","k-i-align-left":"justifyLeft","k-i-align-center":"justifyCenter","k-i-align-right":"justifyRight","k-i-align-justify":"justifyFull","k-i-list-unordered":"insertUnorderedList","k-i-list-ordered":"insertOrderedList","k-i-list-roman-upper":"insertUpperRomanList","k-i-list-roman-lower":"insertLowerRomanList","k-i-import":"import","k-i-indent-increase":"indent","k-i-indent-decrease":"outdent","k-i-link-horizontal":"createLink","k-i-unlink-horizontal":"unlink","k-i-image":"insertImage","k-i-file-add":"insertFile","k-i-html":"viewHtml","k-i-foreground-color":"foreColor","k-i-paint":"backColor","k-i-table-insert":"createTable","k-i-table-column-insert-left":"addColumnLeft","k-i-table-column-insert-right":"addColumnRight","k-i-table-row-insert-above":"addRowAbove","k-i-table-row-insert-below":"addRowBelow","k-i-table-row-delete":"deleteRow","k-i-table-column-delete":"deleteColumn","k-i-table-properties":"tableWizard","k-i-table-wizard":"tableWizardInsert","k-i-table-position-left":"tableAlignLeft","k-i-table-position-center":"tableAlignCenter","k-i-table-position-right":"tableAlignRight","k-i-clear-css":"cleanFormatting","k-i-cells-merge-horizontally":"mergeCellsHorizontally","k-i-cells-merge-vertically":"mergeCellsVertically","k-i-cell-split-horizontally":"splitCellHorizontally","k-i-cell-split-vertically":"splitCellVertically","k-i-copy-format":"copyFormat","k-i-apply-format":"applyFormat"};var p=r.extend({initialize:function(e,t){var i=t.editor.toolbar;e.attr("aria-controls",t.editor.element.attr("id")).on("click",b.proxy(function(){this.overflowPopup.toggle()},i))},options:{name:y},command:b.noop,update:b.noop,destroy:b.noop});t.registerTool(y,new p({key:"",ctrl:true,template:new i({template:t.overflowAnchorTemplate})}));var v=n.extend({init:function(e,t){var i=this;t=l({},t,{name:"EditorToolbar"});n.fn.init.call(i,e,t);if(t.popup){i._initPopup()}if(t.resizable&&t.resizable.toolbar){i._resizeHandler=w.onResize(function(){i.resize(true)});i.element.addClass("k-toolbar-resizable")}},events:["execute"],groups:{basic:["bold","italic","underline","strikethrough"],scripts:["subscript","superscript"],alignment:["justifyLeft","justifyCenter","justifyRight","justifyFull"],links:["insertImage","insertFile","createLink","unlink"],lists:["insertUnorderedList","insertOrderedList","insertUpperRomanList","insertLowerRomanList","indent","outdent"],tablesInsert:["createTable"],tablesAddDelete:["addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn"],tablesMerge:["mergeCellsHorizontally","mergeCellsVertically","splitCellHorizontally","splitCellVertically"],tablesPosition:["tableAlignLeft","tableAlignCenter","tableAlignRight"],advanced:["viewHtml","cleanFormatting","print","pdf","exportAs","import"],fonts:["fontName","fontSize"],colors:["foreColor","backColor"],formatPainter:["copyFormat","applyFormat"]},overflowFlaseTools:["formatting","fontName","fontSize","foreColor","backColor","insertHtml"],_initPopup:function(){var t=this;this.window=b(this.element).wrap("<div class='editorToolbarWindow' />").parent().prepend("<span class='k-editortoolbar-dragHandle'><span class='k-icon k-i-handler-drag'></span></span>").kendoWindow({title:false,resizable:false,draggable:{dragHandle:".k-editortoolbar-dragHandle"},animation:{open:{effects:"fade:in"},close:{effects:"fade:out"}},minHeight:42,visible:false,autoFocus:false,actions:[],dragend:function(){this._moved=true}}).on("mousedown",function(e){if(!b(e.target).is(".k-icon")){t.preventPopupHide=true}}).on("focusout",function(){t.options.editor.element.focusout()}).data("kendoWindow")},_toggleOverflowStyles:function(e,t){e.find("> li").toggleClass("k-item",t).find(".k-tool:not(.k-state-disabled), .k-overflow-button").toggleClass("k-overflow-button",t)},_initOverflowPopup:function(t){var i=this;var e="<ul class='k-editor-overflow-popup k-overflow-container k-list-container'></ul>";i.overflowPopup=b(e).appendTo("body").kendoPopup({anchor:t,origin:w.support.isRtl(i.element)?"bottom left":"bottom right",position:w.support.isRtl(i.element)?"top left":"top right",copyAnchorStyles:false,open:function(e){if(this.element.is(":empty")){e.preventDefault()}i._toggleOverflowStyles(this.element,true);t.attr("aria-expanded",true)},close:function(){t.attr("aria-expanded",false)},activate:k(i.focusOverflowPopup,i)}).data("kendoPopup")},items:function(){var e=this.options.resizable&&this.options.resizable.toolbar,t,i;i=this.element.children().find("> *, select");if(e){t=this.overflowPopup;i=i.add(t.element.children().find("> *"))}return i},focused:function(){var e=w._activeElement(),t=this.window,i=this.overflowPopup;return t&&b(e).closest(t.wrapper).length||i&&i.visible()},toolById:function(e){var t,i=this.tools;for(t in i){if(t.toLowerCase()==e){return i[t]}}},toolGroupFor:function(e){var t,i=this.groups;if(this.isCustomTool(e)){return"custom"}for(t in i){if(b.inArray(e,i[t])>=0){return t}}},bindTo:function(l){var d=this,e=d.window;if(d._editor){d._editor.unbind("select",k(d.resize,d))}d._editor=l;if(d.options.resizable&&d.options.resizable.toolbar){l.options.tools.push(y)}d.tools=d.expandTools(l.options.tools);d.render();d.element.find(".k-combobox .k-input").keydown(function(e){var t=b(this).closest(".k-combobox").data("kendoComboBox"),i=e.keyCode;if(i==u.RIGHT||i==u.LEFT){t.close()}else if(i==u.DOWN){if(!t.dropDown.isOpened()){e.stopImmediatePropagation();t.open()}}});d._attachEvents();d.items().each(function e(){var t=d._toolName(this),i=t!=="moreVertical"?d.tools[t]:d.tools.overflowAnchor,n=i&&i.options,r=l.options.messages,a=n&&n.tooltip||r[t],o=b(this);if(!i||!i.initialize){return}if(t=="fontSize"||t=="fontName"){var s=r[t+"Inherit"];o.find("input").val(s).end().find("span.k-input").text(s).end()}i.initialize(o,{title:d._appendShortcutSequence(a,i),editor:d._editor});o.closest(".k-widget",d.element).addClass("k-editor-widget");o.closest(".k-colorpicker",d.element).next(".k-colorpicker").addClass("k-editor-widget")});l.bind("select",k(d.resize,d));d.update();if(e){e.wrapper.css({top:"",left:"",width:""})}},show:function(){var e=this,t=e.window,i=e.options.editor,n,r,a,o=w.support.browser;if(t){n=t.wrapper;r=i.element;if(!n.is(":visible")||!e.window.options.visible){if(!n[0].style.width){n.width(this._getWindowWidth())}if(!t._moved){a=r.offset();n.css({top:Math.max(0,parseInt(a.top,10)-d(n)-parseInt(e.window.element.css("padding-bottom"),10)),left:Math.max(0,parseInt(a.left,10))})}if((o.msie||o.edge)&&e._overlaps(r)){setTimeout(function(){t.open()},0)}else{t.open()}}}},_getWindowWidth:function(){var e=this,t=e.window.wrapper,i=e.options.editor.element;return a(i)-parseInt(t.css("border-left-width"),10)-parseInt(t.css("border-right-width"),10)},_overlaps:function(e){var t=this.window.wrapper,i=t.offset(),n=i.left,r=i.top,a=e.offset(),o=a.left,s=a.top;return!(o+e.width()<n||o>n+t.width()||s+e.height()<r||s>r+t.height())},hide:function(){if(this.window){this.window.close()}},focus:function(){var e="tabIndex";var t=this.element;var i=this._editor.element.attr(e);t.attr(e,i||0).focus().find(h).first().focus();if(!i&&i!==0){t.removeAttr(e)}},focusOverflowPopup:function(){var e="tabIndex";var t=this.overflowPopup.element;var i=this._editor.element.attr(e);t.closest(".k-animation-container").addClass("k-overflow-wrapper");t.attr(e,i||0).find(h).first().focus();if(!i&&i!==0){t.removeAttr(e)}},_appendShortcutSequence:function(e,t){if(!t.key){return e}var i=e+" (";if(t.ctrl){i+="Ctrl + "}if(t.shift){i+="Shift + "}if(t.alt){i+="Alt + "}i+=t.key+")";return i},_nativeTools:["insertLineBreak","insertParagraph","redo","undo","autoLink"],tools:{},isCustomTool:function(e){return!(e in w.ui.Editor.defaultTools)},expandTools:function(e){var t,i,n=this._nativeTools,r,a=w.deepExtend({},w.ui.Editor.defaultTools),o={},s;for(i=0;i<e.length;i++){t=e[i];s=t.name;if(b.isPlainObject(t)){if(s&&a[s]){o[s]=l({},a[s]);l(o[s].options,t)}else{r=l({cssClass:"k-i-gear",type:"button",title:""},t);if(!r.name){r.name="custom"}r.cssClass="k-"+r.name;if(!r.template&&r.type=="button"){r.template=f.EditorUtils.buttonTemplate;r.title=r.title||r.tooltip}o[s]={options:r}}}else if(a[t]){o[t]=a[t]}}for(i=0;i<n.length;i++){if(!o[n[i]]){o[n[i]]=a[n[i]]}}return o},render:function(){var e=this,t=e.tools,i,n,r,a,o=e._editor.element,s=e.element.empty(),l,d,u=e._editor.options.tools,c,f,h=0,p=e.options.resizable&&e.options.resizable.toolbar,v=this.overflowFlaseTools;function m(e){var t="";if(e.getHtml){t=e.getHtml()}else{if(!b.isFunction(e)){e=w.template(e)}t=e(i)}return w.trim(t)}function g(){if(c.children().length){if(p){c.data("position",h);h++}c.appendTo(s)}}function _(e){if(e!==y){c=b("<li class='k-tool-group' role='presentation' />");c.data("overflow",b.inArray(e,v)===-1?true:false)}else{c=b("<li class='k-overflow-tools' />")}}s.empty();if(u.length){a=u[0].name||u[0]}_(a,v);for(f=0;f<u.length;f++){a=u[f].name||u[f];i=t[a]&&t[a].options;if(!i&&b.isPlainObject(a)){i=a}n=i&&i.template;if(a=="break"){g();b("<li class='k-row-break' />").appendTo(e.element);_(a,v)}if(!n){continue}d=e.toolGroupFor(a);if(l!=d||a==y){g();_(a,v);l=d}if(a==y){n.options.title=e.options.messages.overflowAnchor}n=m(n);r=b(n).appendTo(c);if(d=="custom"){g();_(a,v)}if(i.exec&&r.hasClass("k-tool")){r.click(k(i.exec,o[0]))}}g();b(e.element).children(":has(> .k-tool)").not(".k-overflow-tools").addClass("k-button-group");e.updateGroups();if(p){e._initOverflowPopup(e.element.find(".k-overflow-anchor"))}e.angular("compile",function(){return{elements:e.element}})},updateGroups:function(){b(this.element).children().not(".k-overflow-tools").each(function(){b(this).children().removeClass("k-group-start k-group-end").first().addClass("k-group-start").end().last().addClass("k-group-end").end()})},decorateFrom:function(t){this.items().filter(".k-decorated").each(function(){var e=b(this).data("kendoSelectBox");if(e){e.decorate(t)}})},destroy:function(){n.fn.destroy.call(this);var e,t=this.tools;for(e in t){if(t[e].destroy){t[e].destroy()}}if(this.window){this.window.destroy()}if(this._resizeHandler){w.unbindResize(this._resizeHandler)}if(this.overflowPopup){this.overflowPopup.destroy()}},_attachEvents:function(){var e=this,t=e.overflowPopup?e.overflowPopup.element:b([]);e.attachToolsEvents(e.element.add(t))},attachToolsEvents:function(e){var d=this,t="[role=button].k-tool",i=t+":not(.k-state-disabled)"+", [role=button].k-i-import:not(.k-state-disabled)",n=t+".k-state-disabled",r=".k-dropdown",a=".k-colorpicker",o=[t,r,a].join(",");e.off(s).on("mouseenter"+s,i,function(){b(this).addClass("k-state-hover")}).on("mouseleave"+s,i,function(){b(this).removeClass("k-state-hover")}).on("mousedown"+s,o,function(e){e.preventDefault()}).on("keydown"+s,h,function(e){var a=this;var t=d.options.resizable&&d.options.resizable.toolbar;var i=w.support.isRtl(d.element)?-1:1;var n;var r,o,s=e.keyCode;function l(e,t,i){var n=t.find(h);var r=n.index(a)+e;if(i){r=Math.max(0,Math.min(n.length-1,r))}return n[r]}if(s==u.RIGHT||s==u.LEFT){if(!b(a).is(".k-dropdown")){r=l(s==u.RIGHT?1*i:-1*i,d.element,true)}else{r=b(a)}}else if(t&&(s==u.UP||s==u.DOWN)){r=l(s==u.DOWN?1:-1,d.overflowPopup.element,true)}else if(s==u.HOME){r=d.element.find(h)[0];e.preventDefault()}else if(s==u.END){n=d.element.find(h).filter(function(){return b(this).css("visibility")!=="hidden"});r=n[n.length-1];e.preventDefault()}else if(s==u.ESC){if(d.overflowPopup&&d.overflowPopup.visible()){d.overflowPopup.close()}r=d._editor}else if(s==u.TAB&&!(e.ctrlKey||e.altKey)){if(t){o=b(a.parentElement).hasClass("k-overflow-tool-group")?d.overflowPopup.element:d.element}else{o=d.element}if(e.shiftKey){r=l(-1,o)}else{r=l(1,o);if(!r||b(r).closest(".k-overflow-tools").css("visibility")==="hidden"){r=d._editor}}}if(r){e.preventDefault();r.focus()}if((s===u.ENTER||s===u.SPACEBAR)&&(b(a).is("button")||b(a).is("a"))&&!b(a).attr("href")){d._executeToolCommand(a,e)}}).on("click"+s,i,function(e){d._executeToolCommand(this,e)}).on("click"+s,n,function(e){e.preventDefault()})},_executeToolCommand:function(e,t){var i=this;var n=b(e);t.preventDefault();t.stopPropagation();n.removeClass("k-state-hover");if(!n.is("[data-popup]")){i._editor.exec(i._toolName(e))}},_toolName:function(e){if(!e){return}var t=e.className;if(/k-tool\b/i.test(t)){t=e.firstChild.className}var i=b.grep(t.split(" "),function(e){return!/^k-(widget|tool|tool-icon|icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(e)});if(i[0]){var n=i[0];if(o[n]){n=o[n]}if(n.indexOf("k-i-")>=0){return w.toCamelCase(n.substring(n.indexOf("k-i-")+4))}else{return n.substring(n.lastIndexOf("-")+1)}}return"custom"},refreshTools:function(){var i=this,e=i._editor,t=e.getRange(),n=f.RangeUtils.textNodes(t),r=e.options.immutables,a=i._immutablesContext(t);n=f.Dom.filterBy(n,f.Dom.htmlIndentSpace,true);if(!n.length){n=[t.startContainer]}i.items().each(function(){var e=i.tools[i._toolName(this)];if(e){var t=b(this);if(e.update){e.update(t,n)}if(r){i._updateImmutablesState(e,t,a)}}});this.update()},_immutablesContext:function(e){if(this._editor.options.immutables){if(e.collapsed){return f.Immutables.immutablesContext(e)}else{return f.RangeUtils.editableTextNodes(e).length===0}}},_updateImmutablesState:function(e,t,i){var n=e.name;var r=t;var a=e.options.trackImmutables;if(a===c){a=b.inArray(n,f.Immutables.toolsToBeUpdated)>-1}if(a){var o=i?"none":"";if(!t.is(".k-tool")){var s=t.data();for(var l in s){if(l.match(/^kendo[A-Z][a-zA-Z]*/)){var d=s[l];r=d.wrapper;break}}}r.css("display",o);var u=r.closest("li");if(u.children(":visible").length===0){u.css("display",o)}}},update:function(){this.updateGroups()},_resize:function(e){var t=e.width;var i=this.options.resizable&&this.options.resizable.toolbar;var n=this.overflowPopup;var r=this.options.editor.element;var a=this.window;this.refreshTools();if(!i){return}if(a){a.wrapper.width(this._getWindowWidth());if(!a._moved){a.wrapper.css({left:Math.max(0,parseInt(r.offset().left,10))})}}if(n.visible()){n.close(true)}this._refreshWidths();this._shrink(t);this._stretch(t);this._toggleOverflowStyles(this.element,false);this._toggleOverflowStyles(this.overflowPopup.element,true);this.element.children("li.k-overflow-tools").css("visibility",n.element.is(":empty")?"hidden":"visible")},_refreshWidths:function(){this.element.children("li").each(function(e,t){var i=b(t);i.data("outerWidth",a(i,true))})},_shrink:function(e){var t,i;if(e<this._groupsWidth()){i=this._visibleGroups().filter(":not(.k-overflow-tools)");for(var n=i.length-1;n>=0;n--){t=i.eq(n);if(e>this._groupsWidth()){break}else{this._hideGroup(t)}}}},_stretch:function(e){var t,i;if(e>this._groupsWidth()){i=this._hiddenGroups();for(var n=0;n<i.length;n++){t=i.eq(n);if(e<this._groupsWidth()||!this._showGroup(t,e)){break}}}},_hiddenGroups:function(){var e=this.overflowPopup;var t=this.element.children("li.k-tool-group").filter(":hidden");t=t.add(e.element.children("li"));t.sort(function(e,t){return b(e).data("position")>b(t).data("position")?1:-1});return t},_visibleGroups:function(){return this.element.children("li.k-tool-group, li.k-overflow-tools").filter(":visible")},_groupsWidth:function(){var e=0;this._visibleGroups().each(function(){e+=b(this).data("outerWidth")});return Math.ceil(e)},_hideGroup:function(e){if(e.data("overflow")){var t=this.overflowPopup;e.detach().prependTo(t.element).addClass("k-overflow-tool-group")}else{e.addClass("k-hidden")}},_showGroup:function(e,t){var i,n,r;if(e.hasClass("k-state-disabled")){return true}if(e.hasClass("k-overflow-tool-group")){r=e.data("outerWidth")}else{e.removeClass("k-hidden");r=a(e,true);e.addClass("k-hidden")}if(e.length&&t>this._groupsWidth()+r){if(e.hasClass("k-overflow-tool-group")){i=e.data("position");if(i===0){e.detach().prependTo(this.element)}else{n=this.element.children().filter(function(e,t){return b(t).data("position")===i-1});e.detach().insertAfter(n)}e.removeClass("k-overflow-tool-group")}else{e.removeClass("k-hidden")}return true}return false}});b.extend(f,{Toolbar:v})})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("editor/plugins/viewhtml",["editor/command"],e)})(function(){(function(u,c){var f=window.kendo,e=u.extend,t=f.ui.editor,h=t.EditorUtils,i=t.Command,n=t.Tool,r=t.ToolTemplate,p=t.Dom;var v=i.extend({init:function(e){var t=this;t.options=e;i.fn.init.call(t,e);t.attributes=null;t.async=true},exec:function(){var t=this,i=t.editor,n=i.options,e=i.options.messages,r=u(f.template(v.template)(e)).appendTo(document.body),a=".k-editor-textarea",o,s;n.serialization.immutables=i.immutables;s=p.getAllComments(i.body);o=h.cacheComments(i.value(),s);o=v.indent(o);o=h.retrieveComments(o,s);n.serialization.immutables=c;function l(e){n.deserialization.immutables=i.immutables;i.value(r.find(a).val());n.deserialization.immutables=c;d(e);if(t.change){t.change()}i.trigger("change")}function d(e){e.preventDefault();r.data("kendoWindow").destroy();if(i.immutables){i.immutables.serializedImmutables={}}i.focus()}this.createDialog(r,{title:e.viewHtml,width:600,height:400,resizable:true,close:d,visible:false}).find(a).val(o).end().find(".k-dialog-update").click(l).end().find(".k-dialog-close").click(d).end().data("kendoWindow").center().open();r.find(a).focus()}});e(v,{template:""+"<div class='k-editor-dialog k-popup-edit-form k-viewhtml-dialog'>"+"<textarea class='k-textarea k-editor-textarea'></textarea>"+"<div class='k-edit-buttons k-state-default'>"+"<button class='k-dialog-update k-button k-primary'>#: dialogUpdate #</button>"+"<button class='k-dialog-close k-button'>#: dialogCancel #</button>"+"</div>"+"</div>",indent:function(e){return e.replace(/<\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi,"</$1>\n").replace(/<(ul|ol)([^>]*)><li/gi,"<$1$2>\n<li").replace(/<br \/>/gi,"<br />\n").replace(/\n$/,"")}});f.ui.editor.ViewHtmlCommand=v;t.EditorUtils.registerTool("viewHtml",new n({command:v,template:new r({template:h.buttonTemplate,title:"View HTML"})}))})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("editor/plugins/format",["editor/command"],e)})(function(){(function(e){var t=window.kendo,i=e.extend,n=t.ui.editor,r=n.Tool,a=n.Command,o=n.EditorUtils;var s=a.extend({init:function(e){e.formatter=e.formatter();var t=e.formatter.finder;if(t&&o.formatByName("immutable",t.format)){t._initOptions({immutables:e.immutables})}a.fn.init.call(this,e)}});var l=r.extend({init:function(e){r.fn.init.call(this,e)},command:function(e){var t=this;return new s(i(e,{formatter:t.options.formatter}))},update:function(e,t){var i=this.options.finder.isFormatted(t);e.toggleClass("k-state-selected",i);e.attr("aria-pressed",i)}});e.extend(n,{FormatCommand:s,FormatTool:l})})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("editor/plugins/inlineformat",["editor/plugins/format"],e)})(function(){(function(l){var v=window.kendo,e=v.Class,r=v.ui.editor,t=v.ui.Editor.fn.options.formats,d=r.EditorUtils,u=r.Tool,i=r.ToolTemplate,n=r.FormatTool,m=r.Dom,a=r.RangeUtils,c=l.extend,o=r.EditorUtils.registerTool,s=r.EditorUtils.registerFormat,f="mousedown.kendoEditor",h="keydown.kendoEditor",p="k-marker";var g=e.extend({init:function(e){this.format=e},numberOfSiblings:function(e){var t=0,i=0,n=0,r=e.parentNode,a;for(a=r.firstChild;a;a=a.nextSibling){if(a!=e){if(a.className==p){n++}else if(a.nodeType==3){t++}else{i++}}}if(n>1&&r.firstChild.className==p&&r.lastChild.className==p){return 0}else{return i+t}},findSuitable:function(e,t){if(!t&&this.numberOfSiblings(e)>0){return null}var i=e.parentNode;var n=this.format[0].tags;while(!m.ofType(i,n)){if(this.numberOfSiblings(i)>0){return null}i=i.parentNode}return i},findFormat:function(e){var t=this.format,i=m.attrEquals,n,r,a,o,s;for(n=0,r=t.length;n<r;n++){a=e;o=t[n].tags;s=t[n].attr;if(a&&m.ofType(a,o)&&i(a,s)){return a}while(a){a=m.parentOfType(a,o);if(a&&i(a,s)){return a}}}return null},isFormatted:function(e){var t,i;for(t=0,i=e.length;t<i;t++){if(this.findFormat(e[t])){return true}}return false}});var _=e.extend({init:function(e,t){this.finder=new g(e);this.attributes=c({},e[0].attr,t);this.tag=e[0].tags[0]},wrap:function(e){return m.wrap(e,m.create(e.ownerDocument,this.tag,this.attributes))},activate:function(e,t){if(this.finder.isFormatted(t)){this.split(e);this.remove(t)}else{this.apply(t)}},toggle:function(e){var t=this.immutables()?a.editableTextNodes:a.textNodes;var i=t(e);if(i.length>0){this.activate(e,i)}},immutables:function(){return this.editor&&this.editor.options.immutables},apply:function(e){var t=[];var i,n,r,a;if(e.length>1){for(i=0,n=e.length;i<n;i++){r=e[i];a=this.format(r,true);t.push(a)}}else{r=e[0];a=this.format(r,false)}this.consolidate(t)},format:function(e,t){var i=this.finder.findSuitable(e);var n=this.attributes;var r=n?n.style||{}:{};if(i){if(m.is(i,"font")){if(r.color){i.removeAttribute("color")}if(r.fontName){i.removeAttribute("face")}if(r.fontSize){i.removeAttribute("size")}}m.attr(i,n)}else{while(!m.isBlock(e.parentNode)&&e.parentNode.childNodes.length==1&&e.parentNode.contentEditable!=="true"&&t){e=e.parentNode}i=this.wrap(e)}return i},remove:function(e){var t,i,n;for(t=0,i=e.length;t<i;t++){n=this.finder.findFormat(e[t]);if(n){if(this.attributes&&this.attributes.style){m.unstyle(n,this.attributes.style);if(!n.style.cssText&&!n.attributes["class"]){m.unwrap(n)}}else{m.unwrap(n)}}}},split:function(e){var t=a.textNodes(e);var i=t.length;var n,r;if(i>0){for(n=0;n<i;n++){r=this.finder.findFormat(t[n]);if(r){a.split(e,r,true)}}}},consolidate:function(e){var t,i;while(e.length>1){t=e.pop();i=e[e.length-1];if(t.previousSibling&&t.previousSibling.className==p){i.appendChild(t.previousSibling)}if(t.tagName==i.tagName&&t.previousSibling==i&&t.style.cssText==i.style.cssText&&t.className===i.className){while(t.firstChild){i.appendChild(t.firstChild)}m.remove(t)}}}});var b=g.extend({init:function(e,t){this.format=e;this.greedyProperty=t;g.fn.init.call(this,e)},getInlineCssValue:function(e){var t=e.attributes;var i=v.trim;var n,r,a,o,s,l,d,u,c;var f,h,p;if(!t){return}for(n=0,r=t.length;n<r;n++){a=t[n];o=a.nodeName;s=a.nodeValue;if(a.specified&&o=="style"){l=i(s||e.style.cssText).split(";");for(u=0,c=l.length;u<c;u++){d=l[u];if(d.length){f=d.split(":");h=i(f[0].toLowerCase());p=i(f[1]);if(h!=this.greedyProperty){continue}return h.indexOf("color")>=0?m.toHex(p):p}}}}},getFormatInner:function(e){var t=l(m.isDataNode(e)?e.parentNode:e);var i=t.parentsUntil("[contentEditable]").addBack().toArray().reverse();var n,r,a;for(n=0,r=i.length;n<r;n++){a=this.greedyProperty=="className"?i[n].className:this.getInlineCssValue(i[n]);if(a){return a}}return"inherit"},getFormat:function(e){var t=this.getFormatInner(e[0]),i,n;for(i=1,n=e.length;i<n;i++){if(t!=this.getFormatInner(e[i])){return""}}return t},isFormatted:function(e){return this.getFormat(e)!==""}});var w=_.extend({init:function(e,t,i){_.fn.init.call(this,e,t);this.values=t;this.finder=new b(e,i);if(i){this.greedyProperty=v.toCamelCase(i)}},activate:function(e,t){var i=this.greedyProperty;var n="apply";this.split(e);if(i&&this.values.style[i]=="inherit"){n="remove"}this[n](t)}});var k=n.extend({init:function(e){n.fn.init.call(this,c(e,{finder:new g(e.format),formatter:function(){return new _(e.format)}}))}});var y=u.extend({update:function(e,t){var i=e.data(this.type);i.close();i.value(this.finder.getFormat(t))}});var x=y.extend({init:function(e){u.fn.init.call(this,e);this.type=v.support.browser.msie||v.support.touch?"kendoDropDownList":"kendoComboBox";this.format=[{tags:["span","font"]}];this.finder=new b(this.format,e.cssAttr)},command:function(e){var t=this.options,i=this.format,n={};return new r.FormatCommand(c(e,{formatter:function(){n[t.domAttr]=e.value;return new w(i,{style:n},t.cssAttr)}}))},initialize:function(e,t){var i=t.editor,n=this.options,r=n.name,a,o,s=[];if(n.defaultValue){s=[{text:i.options.messages[n.defaultValue[0].text],value:n.defaultValue[0].value}]}a=s.concat(n.items?n.items:i.options[r]||[]);e.attr({title:t.title});e[this.type]({dataTextField:"text",dataValueField:"value",dataSource:a,change:function(){i._range=o;u.exec(i,r,this.value())},close:function(){setTimeout(function(){i._deleteSavedRange()},0)},highlightFirst:false});e.closest(".k-widget").removeClass("k-"+r).find("*").addBack().attr("unselectable","on");var l=e.data(this.type);l.value("inherit");l.wrapper.on(f,".k-select,.k-input",function(){var e=i.getRange();o=i._containsRange(e)?e:o}).on(h,function(e){if(e.keyCode===v.keys.ENTER){i._deleteSavedRange();e.preventDefault()}})}});var C=u.extend({init:function(e){u.fn.init.call(this,e);this.format=[{tags:["span","font"]}];this.finder=new b(this.format,e.cssAttr)},options:{palette:"websafe"},update:function(){this._widget.close()},command:function(e){var t=this.options,i=this.format,n={};return new r.FormatCommand(c(e,{formatter:function(){n[t.domAttr]=e.value;return new w(i,{style:n},t.cssAttr)}}))},initialize:function(t,e){var i=this,n=e.editor,r=this.name,a=c({},C.fn.options,this.options),o=a.palette,s=a.columns;t=this._widget=new v.ui.ColorPicker(t,{toolIcon:"k-icon k-i-"+d.getToolCssClass(a.name),palette:o,columns:s,change:function(){var e=t.value();if(v.support.browser.msie&&i.storedRange&&i._inputFocused){n.selectRange(i.storedRange)}if(e){u.exec(n,r,e)}delete i.storedRange;delete i._inputFocused;n.focus()},open:function(e){var t=e.sender;i.storedRange=n.getRange();t._popup.element.on(f,function(e){if(!l(e.target).is("input.k-color-value")){e.preventDefault()}});if(!t._popup.element.is("[unselectable='on']")){t._popup.element.attr({unselectable:"on"}).find("*:not(input)").attr("unselectable","on").end().find("input").on("focus",function(){i._inputFocused=true})}},close:function(e){e.sender._popup.element.off(f);if(v.support.browser.msie&&i.storedRange&&i._inputFocused){n.selectRange(i.storedRange)}},activate:function(e){e.preventDefault();if(e.sender._value.toCssRgba()==="rgba(255, 255, 255, 0)"){return}t.trigger("change")}});t.wrapper.attr({title:e.title,unselectable:"on"}).find("*:not(input)").attr("unselectable","on");t.value("transparent")}});c(r,{InlineFormatFinder:g,InlineFormatter:_,DelayedExecutionTool:y,GreedyInlineFormatFinder:b,GreedyInlineFormatter:w,InlineFormatTool:k,FontTool:x,ColorTool:C});s("bold",[{tags:["strong","b"]},{tags:["span"],attr:{style:{fontWeight:"bold"}}}]);o("bold",new k({key:"B",ctrl:true,format:t.bold,template:new i({template:d.buttonTemplate,title:"Bold"})}));s("italic",[{tags:["em","i"]},{tags:["span"],attr:{style:{fontStyle:"italic"}}}]);o("italic",new k({key:"I",ctrl:true,format:t.italic,template:new i({template:d.buttonTemplate,title:"Italic"})}));s("underline",[{tags:["span"],attr:{style:{textDecoration:"underline"}}},{tags:["u"]}]);o("underline",new k({key:"U",ctrl:true,format:t.underline,template:new i({template:d.buttonTemplate,title:"Underline"})}));s("strikethrough",[{tags:["del","strike"]},{tags:["span"],attr:{style:{textDecoration:"line-through"}}}]);o("strikethrough",new k({format:t.strikethrough,template:new i({template:d.buttonTemplate,title:"Strikethrough"})}));s("superscript",[{tags:["sup"]}]);o("superscript",new k({format:t.superscript,template:new i({template:d.buttonTemplate,title:"Superscript"})}));s("subscript",[{tags:["sub"]}]);o("subscript",new k({format:t.subscript,template:new i({template:d.buttonTemplate,title:"Subscript"})}));o("foreColor",new C({cssAttr:"color",domAttr:"color",name:"foreColor",template:new i({template:d.colorPickerTemplate,title:"Color"})}));o("backColor",new C({cssAttr:"background-color",domAttr:"backgroundColor",name:"backColor",template:new i({template:d.colorPickerTemplate,title:"Background Color"})}));o("fontName",new x({cssAttr:"font-family",domAttr:"fontFamily",name:"fontName",defaultValue:[{text:"fontNameInherit",value:"inherit"}],template:new i({template:d.comboBoxTemplate,title:"Font Name"})}));o("fontSize",new x({cssAttr:"font-size",domAttr:"fontSize",name:"fontSize",defaultValue:[{text:"fontSizeInherit",value:"inherit"}],template:new i({template:d.comboBoxTemplate,title:"Font Size"})}))})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("editor/plugins/link",["editor/plugins/inlineformat"],e)})(function(){(function(s,l){var d=window.kendo,e=d.Class,t=s.extend,a=s.proxy,i=d.ui.editor,u=i.Dom,c=i.RangeUtils,n=i.EditorUtils,r=i.Command,o=i.Tool,f=i.ToolTemplate,h=i.InlineFormatter,p=i.InlineFormatFinder,v=c.textNodes,m=c.editableTextNodes,g=i.EditorUtils.registerTool,_=d.keys;var b="http://";var w=/^\w*:\/\//;var k=/[\w\/\$\-_\*\?]/i;var y=e.extend({findSuitable:function(e){return u.parentOfType(e,["a"])}});var x=e.extend({init:function(){this.finder=new y},apply:function(e,t){var i=this.immutables?m(e):v(e);var n,r,a,o,s;if(t.innerText){r=c.documentFromRange(e);n=c.getMarkers(e);e.deleteContents();o=u.create(r,"a",t);e.insertNode(o);s=o.parentNode;if(u.name(s)=="a"){u.insertAfter(o,s)}if(u.emptyNode(s)){u.remove(s)}var l=o;for(var d=0;d<n.length;d++){u.insertAfter(n[d],l);l=n[d]}if(n.length){u.insertBefore(r.createTextNode("\ufeff"),n[1]||n[0]);u.insertAfter(r.createTextNode("\ufeff"),n[1]||n[0]);e.setStartBefore(n[0]);e.setEndAfter(n[n.length-1])}}else{a=new h([{tags:["a"]}],t);a.finder=this.finder;a.apply(i)}}});var C=r.extend({init:function(e){var i=this;e.formatter={toggle:function(e){var t=i.immutables()?m(e):v(e);new h([{tags:["a"]}]).remove(t)}};this.options=e;r.fn.init.call(this,e)}});var S=r.extend({init:function(e){var t;this.options=e;r.fn.init.call(this,e);this.formatter=new x;if(!e.url){this.attributes=null;this.async=true}else{this.exec=function(){this.formatter.immutables=t&&t.immutables();this.formatter.apply(e.range,{href:e.url,innerText:e.text||e.url,target:e.target})}}},_dialogTemplate:function(){return d.template('<div class="k-editor-dialog k-popup-edit-form">'+'<div class="k-edit-form-container">'+"<div class='k-edit-label'>"+"<label for='k-editor-link-url'>#: messages.linkWebAddress #</label>"+"</div>"+"<div class='k-edit-field'>"+"<input type='text' class='k-textbox' id='k-editor-link-url'>"+"</div>"+"<div class='k-edit-label k-editor-link-text-row'>"+"<label for='k-editor-link-text'>#: messages.linkText #</label>"+"</div>"+"<div class='k-edit-field k-editor-link-text-row'>"+"<input type='text' class='k-textbox' id='k-editor-link-text'>"+"</div>"+"<div class='k-edit-label'>"+"<label for='k-editor-link-title'>#: messages.linkToolTip #</label>"+"</div>"+"<div class='k-edit-field'>"+"<input type='text' class='k-textbox' id='k-editor-link-title'>"+"</div>"+"<div class='k-edit-label'></div>"+"<div class='k-edit-field'>"+"<input type='checkbox' class='k-checkbox' id='k-editor-link-target'>"+"<label for='k-editor-link-target' class='k-checkbox-label'>#: messages.linkOpenInNewWindow #</label>"+"</div>"+"<div class='k-edit-buttons k-state-default'>"+'<button class="k-dialog-insert k-button k-primary">#: messages.dialogInsert #</button>'+'<button class="k-dialog-close k-button">#: messages.dialogCancel #</button>'+"</div>"+"</div>"+"</div>")({messages:this.editor.options.messages})},exec:function(){var e=this.editor.options.messages;this._initialText="";this._range=this.lockRange(true);this.formatter.immutables=this.immutables();var t=v(this._range);var i=t.length?this.formatter.finder.findSuitable(t[0]):null;var n=t.length&&u.name(t[0])=="img";var r=this.createDialog(this._dialogTemplate(),{title:e.createLink,close:a(this._close,this),visible:false});if(i){this._range.selectNodeContents(i);t=v(this._range)}this._initialText=this.linkText(t);r.find(".k-dialog-insert").click(a(this._apply,this)).end().find(".k-dialog-close").click(a(this._close,this)).end().find(".k-edit-field input").keydown(a(this._keydown,this)).end().find("#k-editor-link-url").val(this.linkUrl(i)).end().find("#k-editor-link-text").val(this._initialText).end().find("#k-editor-link-title").val(i?i.title:"").end().find("#k-editor-link-target").attr("checked",i?i.target=="_blank":false).end().find(".k-editor-link-text-row").toggle(!n);this._dialog=r.data("kendoWindow").center().open();s("#k-editor-link-url",r).focus().select()},_keydown:function(e){var t=d.keys;if(e.keyCode==t.ENTER){this._apply(e)}else if(e.keyCode==t.ESC){this._close(e)}},_apply:function(e){var t=this._dialog.element;var i=s("#k-editor-link-url",t).val();var n,r,a;var o=s("#k-editor-link-text",t);if(i&&i!=b){if(i.indexOf("@")>0&&!/^(\w+:)|(\/\/)/i.test(i)){i="mailto:"+i}this.attributes={href:i};n=s("#k-editor-link-title",t).val();if(n){this.attributes.title=n}if(o.is(":visible")){r=d.trim(o.val());if(!r&&!this._initialText){this.attributes.innerText=i}else if(r&&r!==this._initialText){this.attributes.innerText=u.stripBom(r)}}a=s("#k-editor-link-target",t).is(":checked");this.attributes.target=a?"_blank":null;this.formatter.apply(this._range,this.attributes)}this._close(e);if(this.change){this.change()}},_close:function(e){e.preventDefault();this._dialog.destroy();u.windowFromDocument(c.documentFromRange(this._range)).focus();this.releaseRange(this._range)},linkUrl:function(e){if(e){return e.getAttribute("href",2)}return b},linkText:function(e){var t="";var i;for(i=0;i<e.length;i++){t+=e[i].nodeValue}return u.stripBom(t||"")},redo:function(){var e=this.lockRange(true);this.formatter.apply(e,this.attributes);this.releaseRange(e)}});var T=r.extend({init:function(e){r.fn.init.call(this,e);this.formatter=new x},exec:function(){var e=this.detectLink();if(!e){return}var t=this.getRange();var i=new d.ui.editor.Marker;var n=t.cloneRange();n.setStart(e.start.node,e.start.offset);n.setEnd(e.end.node,e.end.offset);t=this.lockRange();i.add(n);this.formatter.apply(n,{href:this._ensureWebProtocol(e.text)});i.remove(n);this.releaseRange(t)},detectLink:function(){var e=this.getRange();var t=e.startContainer;var i=e.startOffset;var n=t.previousSibling;if(!n&&(u.isBom(t)&&!t.nextSibling||!i&&u.isDataNode(t))){t=t.parentNode;i=0}var r=new F({node:t,offset:i,cancelAtNode:function(e){return e&&u.name(e)==="a"}});var a=new A(r);return a.detectLink()},changesContent:function(){return!!this.detectLink()},_ensureWebProtocol:function(e){var t=this._hasProtocolPrefix(e);return t?e:this._prefixWithWebProtocol(e)},_hasProtocolPrefix:function(e){return w.test(e)},_prefixWithWebProtocol:function(e){return b+e}});var D=o.extend({init:function(e){this.options=e;this.finder=new p([{tags:["a"]}]);o.fn.init.call(this,s.extend(e,{command:C}))},initialize:function(e,t){o.fn.initialize.call(this,e,t);e.addClass("k-state-disabled")},update:function(e,t){e.toggleClass("k-state-disabled",!this.finder.isFormatted(t)).removeClass("k-state-hover")}});var A=e.extend({init:function(e){this.traverser=e;this.start=M();this.end=M();this.text=""},detectLink:function(){var e=this.traverser.node;var t=this.traverser.offset;if(u.isDataNode(e)){var i=e.data.substring(0,t);if(/\s{2}$/.test(u.stripBom(i))){return}}else if(t===0){var n=u.closestEditableOfType(e,u.blockElements);if(n&&n.previousSibling){this.traverser.init({node:n.previousSibling})}}this.traverser.traverse(s.proxy(this._detectEnd,this));if(!this.end.blank()){this.traverser=this.traverser.clone(this.end);this.traverser.traverse(s.proxy(this._detectStart,this));if(!this._isLinkDetected()){var r=this.traverser.extendOptions(this.start);var a=new P(r);a.traverse(s.proxy(this._skipStartPuntuation,this));if(!this._isLinkDetected()){this.start=M()}}}if(this.start.blank()){return null}else{return{start:this.start,end:this.end,text:this.text}}},_isLinkDetected:function(){return w.test(this.text)||/^w{3}\./i.test(this.text)},_detectEnd:function(e,t){var i=E(e,k);if(i>-1){this.end.node=t;this.end.offset=i+1;return false}},_detectStart:function(e,t){var i=E(e,/\s/);var n=i+1;this.text=e.substring(n)+this.text;this.start.node=t;this.start.offset=n;if(i>-1){return false}},_skipStartPuntuation:function(e,t,i){var n=I(e,/\w/);var r=n;if(n===-1){r=e.length}this.text=this.text.substring(r);this.start.node=t;this.start.offset=r+(i|0);if(n>-1){return false}}});function E(e,t){var i=e.length;while(i--&&!t.test(e[i])){}return i}function I(e,t){var i=t.exec(e);return i?i.index:-1}var M=function(){return{node:null,offset:null,blank:function(){return this.node===null&&this.offset===null}}};var R=e.extend({init:function(e){this.node=e.node;this.offset=e.offset===l?u.isDataNode(this.node)&&this.node.length||0:e.offset;this.cancelAtNode=e.cancelAtNode||this.cancelAtNode||s.noop},traverse:function(e){if(!e){return}this.cancel=false;this._traverse(e,this.node,this.offset)},_traverse:function(e,t,i){if(!t||this.cancel){return}if(t.nodeType===3){var n=t.data;if(i!==l){n=this.subText(n,i)}this.cancel=e(n,t,i)===false}else{var r=this.edgeNode(t);this.cancel=this.cancel||this.cancelAtNode(r);return this._traverse(e,r)}var a=this.next(t);if(!a){var o=t.parentNode;while(!a&&u.isInline(o)){a=this.next(o);o=o.parentNode}}this.cancel=this.cancel||this.cancelAtNode(a);this._traverse(e,a)},extendOptions:function(e){return s.extend({node:this.node,offset:this.offset,cancelAtNode:this.cancelAtNode},e||{})},edgeNode:function(e){},next:function(e){},subText:function(e,t){}});var F=R.extend({subText:function(e,t){return e.substring(0,t)},next:function(e){return e.previousSibling},edgeNode:function(e){return e.lastChild},clone:function(e){var t=this.extendOptions(e);return new F(t)}});var P=R.extend({subText:function(e,t){return e.substring(t)},next:function(e){return e.nextSibling},edgeNode:function(e){return e.firstChild},clone:function(e){var t=this.extendOptions(e);return new P(t)}});t(d.ui.editor,{LinkFormatFinder:y,LinkFormatter:x,UnlinkCommand:C,LinkCommand:S,AutoLinkCommand:T,UnlinkTool:D,DomTextLinkDetection:A,LeftDomTextTraverser:F,RightDomTextTraverser:P});g("createLink",new o({key:"K",ctrl:true,command:S,template:new f({template:n.buttonTemplate,title:"Create Link"})}));g("unlink",new D({key:"K",ctrl:true,shift:true,template:new f({template:n.buttonTemplate,title:"Remove Link"})}));g("autoLink",new o({key:[_.ENTER,_.SPACEBAR],keyPressCommand:true,command:T}))})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("editor/plugins/formatblock",["editor/plugins/format"],e)})(function(){(function(c){var e=window.kendo,t=e.Class,f=c.extend,p=e.ui.editor,i=e.ui.Editor.fn.options.formats,v=p.Dom,n=p.ToolTemplate,r=p.FormatTool,h=p.EditorUtils,a=h.registerTool,o=h.registerFormat,s=p.RangeUtils;var l=t.extend({init:function(e){this.format=e},contains:function(e,t){var i,n,r;for(i=0,n=t.length;i<n;i++){r=t[i];if(!r||!v.isAncestorOrSelf(e,r)){return false}}return true},findSuitable:function(e){var t=this.format,i=[],n,r,a;for(n=0,r=e.length;n<r;n++){for(var o=t.length-1;o>=0;o--){a=v.ofType(e[n],t[o].tags)?e[n]:v.closestEditableOfType(e[n],t[o].tags);if(a){break}}if(!a||a.contentEditable==="true"){return[]}if(c.inArray(a,i)<0){i.push(a)}}this._resolveListsItems(i);for(n=0,r=i.length;n<r;n++){if(this.contains(i[n],i)){return[i[n]]}}return i},_resolveListsItems:function(e){var t,i,n;for(t=0;t<e.length;t++){i=e[t];n=v.is(i,"li")?i:v.wrapper(i);n=n&&v.list(n)?n.children[0]:n;if(v.is(n,"li")){i=e[t]=n}}},findFormat:function(e,t){var i=this.format,n,r,a,o,s;var l=v.editableParent(e);var d=this.options&&this.options.immutables;var u=p.Immutables;for(n=0,r=i.length;n<r;n++){a=e;o=i[n].tags;s=i[n].attr;if(d&&o&&o[0]=="immutable"){var c=u.immutableParent(a);if(c&&v.attrEquals(c,s)){return a}}while(a&&v.isAncestorOf(l,a)){if(v.ofType(a,o)&&v.attrEquals(a,s)){return a}if(t&&t(a)){break}a=a.parentNode}}return null},getFormat:function(e){var t=this,i=function(e){return t.findFormat(v.isDataNode(e)?e.parentNode:e)},n=i(e[0]),r,a;if(!n){return""}for(r=1,a=e.length;r<a;r++){if(n!=i(e[r])){return""}}return n.nodeName.toLowerCase()},isFormatted:function(e,t){for(var i=0,n=e.length;i<n;i++){if(!this.findFormat(e[i],t)){return false}}return true}});var m=t.extend({init:function(e,t){this.format=e;this.values=t;this.finder=new l(e)},wrap:function(e,t,i){var n=i.length==1?v.blockParentOrBody(i[0]):v.commonAncestor.apply(null,i);if(v.isInline(n)){n=v.blockParentOrBody(n)}var r=v.significantChildNodes(n),a=v.findNodeIndex(r[0]),o=v.create(n.ownerDocument,e,t),s,l;for(s=0;s<r.length;s++){l=r[s];if(v.isBlock(l)){v.attr(l,t);if(o.childNodes.length){v.insertBefore(o,l);o=o.cloneNode(false)}a=v.findNodeIndex(l)+1;continue}o.appendChild(l)}if(o.firstChild){v.insertAt(n,o,a)}},apply:function(e){var t,i=this.values;function n(e){return f({},e&&e.attr,i)}this._handleImmutables(e,true);var r=v.filter("img",e);var a=h.formatByName("img",this.format);var o=n(a);c.each(r,function(){v.attr(this,o)});if(r.length==e.length){return}var s=v.filter("img",e,true);var l=this.finder.findSuitable(s);if(l.length){for(var d=0,u=l.length;d<u;d++){t=h.formatByName(v.name(l[d]),this.format);v.attr(l[d],n(t))}}else{t=this.format[0];this.wrap(t.tags[0],n(t),s)}},_handleImmutables:function(e,t){if(!this.immutables()){return}var i=h.formatByName("immutable",this.format);if(!i){return}var n=p.Immutables;var r=e.length-1;for(var a=r;a>=0;a--){var o=n.immutableParent(e[a]);if(!o){continue}if(o!==e[a+1]){if(t){v.attr(o,i.attr)}else{v.unstyle(o,i.attr.style)}}e.splice(a,1)}},immutables:function(){return this.editor&&this.editor.options.immutables},remove:function(e){var t,i,n,r,a;this._handleImmutables(e,false);for(t=0,i=e.length;t<i;t++){n=this.finder.findFormat(e[t]);if(n){a=v.name(n);r=h.formatByName(a,this.format);if(r.attr.style){v.unstyle(n,r.attr.style)}if(r.attr.className){v.removeClass(n,r.attr.className)}}}},toggle:function(e){var t=this,i=v.filterBy(s.nodes(e),v.htmlIndentSpace,true);if(t.finder.isFormatted(i)){t.remove(i)}else{t.apply(i)}}});var d=t.extend({init:function(e,t){var i=this;i.format=e;i.values=t;i.finder=new l(e)},apply:function(e){var t=this.format;var i=v.blockParents(e);var n=t[0].tags[0];var r,a,o,s,l;var d;var u;var c;var f;if(i.length){for(r=0,a=i.length;r<a;r++){c=i[r];f=this.immutables()&&p.Immutables.immutableParent(c);if(!f){u=v.name(c);if(u=="li"){o=c.parentNode;s=new p.ListFormatter(o.nodeName.toLowerCase(),n);l=this.editor.createRange();l.selectNode(i[r]);s.toggle(l)}else if(n&&(u=="td"||c.attributes.contentEditable)){new m(t,this.values).apply(c.childNodes)}else{d=v.changeTag(c,n);v.attr(d,t[0].attr)}}}}else{var h=new m(t,this.values);h.editor=this.editor;h.apply(e)}},toggle:function(e){var t=s.textNodes(e);if(!t.length){e.selectNodeContents(e.commonAncestorContainer);t=s.textNodes(e);if(!t.length){t=v.significantChildNodes(e.commonAncestorContainer)}}this.apply(t)},immutables:function(){return this.editor&&this.editor.options.immutables}});var u=r.extend({init:function(e){r.fn.init.call(this,f(e,{finder:new l(e.format),formatter:function(){return new m(e.format)}}))}});f(p,{BlockFormatFinder:l,BlockFormatter:m,GreedyBlockFormatter:d,BlockFormatTool:u});var g=["ul","ol","li"];o("justifyLeft",[{tags:v.nonListBlockElements,attr:{style:{textAlign:"left"}}},{tags:["img"],attr:{style:{float:"left",display:"",marginLeft:"",marginRight:""}}},{tags:["immutable"],attr:{style:{float:"left",display:"",marginLeft:"",marginRight:""}}},{tags:g,attr:{style:{textAlign:"left",listStylePosition:""}}}]);a("justifyLeft",new u({format:i.justifyLeft,template:new n({template:h.buttonTemplate,title:"Justify Left"})}));o("justifyCenter",[{tags:v.nonListBlockElements,attr:{style:{textAlign:"center"}}},{tags:["img"],attr:{style:{display:"block",marginLeft:"auto",marginRight:"auto",float:""}}},{tags:["immutable"],attr:{style:{display:"block",marginLeft:"auto",marginRight:"auto",float:""}}},{tags:g,attr:{style:{textAlign:"center",listStylePosition:"inside"}}}]);a("justifyCenter",new u({format:i.justifyCenter,template:new n({template:h.buttonTemplate,title:"Justify Center"})}));o("justifyRight",[{tags:v.nonListBlockElements,attr:{style:{textAlign:"right"}}},{tags:["img"],attr:{style:{float:"right",display:"",marginLeft:"",marginRight:""}}},{tags:["immutable"],attr:{style:{float:"right",display:"",marginLeft:"",marginRight:""}}},{tags:g,attr:{style:{textAlign:"right",listStylePosition:"inside"}}}]);a("justifyRight",new u({format:i.justifyRight,template:new n({template:h.buttonTemplate,title:"Justify Right"})}));o("justifyFull",[{tags:v.nonListBlockElements,attr:{style:{textAlign:"justify"}}},{tags:["img"],attr:{style:{display:"block",marginLeft:"auto",marginRight:"auto",float:""}}},{tags:["immutable"],attr:{style:{display:"block",marginLeft:"auto",marginRight:"auto",float:""}}},{tags:g,attr:{style:{textAlign:"justify",listStylePosition:""}}}]);a("justifyFull",new u({format:i.justifyFull,template:new n({template:h.buttonTemplate,title:"Justify Full"})}))})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("editor/plugins/lists",["editor/plugins/formatblock"],e)})(function(){(function(f){var e=window.kendo,t=e.Class,i=f.extend,u=e.ui.editor,h=u.Dom,l=u.RangeUtils,n=u.EditorUtils,r=u.Command,a=u.ToolTemplate,o=u.FormatTool,s=u.BlockFormatFinder,d=l.textNodes,c=u.EditorUtils.registerTool;var p=s.extend({init:function(e){this.tag=e.tag;this.attr=e.attr;this.altAttr=e.altAttr;var t=this.tags=[this.tag=="ul"?"ol":"ul",this.tag];var i=[{tags:t,attr:this.attr}];if(this.altAttr){i.push({tags:t,attr:this.altAttr})}s.fn.init.call(this,i)},matchesType:function(e){return h.attrEquals(e,this.attr)||this.altAttr&&h.attrEquals(e,this.altAttr)},isList:function(e){return h.list(e)},isFormatted:function(e){var t=[];var i,n;for(n=0;n<e.length;n++){i=this.findFormat(e[n],this.isList);if(i&&h.name(i)==this.tag&&this.matchesType(i)){t.push(i)}}if(t.length<1){return false}if(t.length!=e.length){return false}for(n=0;n<t.length;n++){if(t[n].parentNode!=i.parentNode){break}if(t[n]!=i){return false}}return true},findSuitable:function(e){var t=this.findFormat(e[0],this.isList);if(t&&h.name(t)==this.tag){return t}return null}});var v=t.extend({init:function(e,t){var i=this;e=f.isPlainObject(e)?e:{tag:e,attr:null};i.tag=e.tag;i.attr=e.attr;i.finder=new p(e);i.unwrapTag=t},isList:function(e){return h.list(e)},immutables:function(){return this.editor&&!!this.editor.options.immutables},wrap:function(e,t){var i=h.create(e.ownerDocument,"li"),n,r,a=this.immutables()?u.Immutables.immutable:f.noop;for(n=0;n<t.length;n++){r=t[n];if(h.is(r,"li")){e.appendChild(r);continue}if(this.isList(r)){while(r.firstChild){e.appendChild(r.firstChild)}continue}if(h.is(r,"td")){while(r.firstChild){i.appendChild(r.firstChild)}e.appendChild(i);r.appendChild(e);e=e.cloneNode(false);i=i.cloneNode(false);continue}i.appendChild(r);if(h.isBlock(r)){e.appendChild(i);if(!a(r)){h.unwrap(r)}i=i.cloneNode(false)}}if(i.firstChild){e.appendChild(i)}},containsAny:function(e,t){for(var i=0;i<t.length;i++){if(h.isAncestorOrSelf(e,t[i])){return true}}return false},suitable:function(e,t){if(e.className=="k-marker"){var i=e.nextSibling;if(i&&h.isBlock(i)){return false}i=e.previousSibling;if(i&&h.isBlock(i)){return false}}return this.containsAny(e,t)||h.isInline(e)||e.nodeType==3},_parentLists:function(e){var t=h.closestEditable(e);return f(e).parentsUntil(t,"ul,ol")},split:function(e){var t=d(e);var i,n,r;if(t.length){i=h.parentOfType(t[0],["li"]);n=h.parentOfType(t[t.length-1],["li"]);e.setStartBefore(i);e.setEndAfter(n);for(var a=0,o=t.length;a<o;a++){var s=this.finder.findFormat(t[a]);if(s){r=this._parentLists(s);if(r.length){l.split(e,r.last()[0],true)}else{l.split(e,s,true)}}}}},merge:function(e,t){var i=t.previousSibling,n;while(i&&(i.className=="k-marker"||i.nodeType==3&&h.isWhitespace(i))){i=i.previousSibling}if(i&&h.name(i)==e&&this.finder.matchesType(i)){while(t.firstChild){i.appendChild(t.firstChild)}h.remove(t);t=i}n=t.nextSibling;while(n&&(n.className=="k-marker"||n.nodeType==3&&h.isWhitespace(n))){n=n.nextSibling}if(n&&h.name(n)==e&&this.finder.matchesType(n)){while(t.lastChild){n.insertBefore(t.lastChild,n.firstChild)}h.remove(t)}},breakable:function(e){return e!=e.ownerDocument.body&&!/table|tbody|thead|tr|td/.test(h.name(e))&&!e.attributes.contentEditable},findSuitableNode:function(e){var t=this,i=t.finder,n=t.tag,r;r=i.findSuitable(e);if(!r){i=new p({tag:n=="ul"?"ol":"ul"});r=i.findSuitable(e)}if(!r){i=new p({tag:n});r=i.findSuitable(e);r=r&&t.finder.matchesType(r)?null:r}return r},applyOnSection:function(e,t){var i=this.tag;var n=this.attr;var r=h.closestSplittableParent(t);var a=[];var o=this.findSuitableNode(t);var s;if(/table|tbody|thead/.test(h.name(r))){s=f.map(t,function(e){return h.parentOfType(e,["td"])})}else{s=h.significantChildNodes(r);if(f.grep(s,h.isBlock).length){s=f.grep(s,f.proxy(function(e){return this.containsAny(e,t)},this))}if(!s.length){s=t}}function l(){a.push(this)}for(var d=0;d<s.length;d++){var u=s[d];var c=(!o||!h.isAncestorOrSelf(o,u))&&this.suitable(u,t);if(!c){continue}if(o&&this.isList(u)){f.each(u.children,l);h.remove(u)}else{a.push(u)}}if(a.length==s.length&&this.breakable(r)){a=[r]}if(!o){o=h.create(r.ownerDocument,i,n);if(h.isBlock(a[0])){h.mergeAttributes(a[0],o)}h.insertBefore(o,a[0])}this.wrap(o,a);while(h.isBom(o.nextSibling)){h.remove(o.nextSibling)}if(!this.finder.matchesType(o)){o.removeAttribute("type");o.style.listStyleType="";h.mergeAttributes(h.create(r.ownerDocument,i,n),o,true)}if(o&&o.getAttribute("type")===""){o.removeAttribute("type")}if(!h.is(o,i)){h.changeTag(o,i)}this.merge(i,o)},apply:function(e){var t=0,i=[],n,r,a,o,s=e.length,l=this.immutables()?u.Immutables.immutableParent:f.noop;function d(){if(n){i.push({section:n,nodes:r})}}for(t=0;t<s;t++){o=l(e[t])||e[t];a=h.closestEditable(o,["td","th","body"]);if(!n||a!=n){d();r=[o];n=a}else{r.push(o)}}d();for(t=0;t<i.length;t++){this.applyOnSection(i[t].section,i[t].nodes)}},unwrap:function(e){var t=e.ownerDocument.createDocumentFragment(),i=this.unwrapTag,n,r,a,o;for(r=e.firstChild;r;r=r.nextSibling){a=h.create(e.ownerDocument,i||"p");while(r.firstChild){o=r.firstChild;if(h.isBlock(o)){if(a.firstChild){t.appendChild(a);a=h.create(e.ownerDocument,i||"p")}t.appendChild(o)}else{a.appendChild(o)}}if(a.firstChild){t.appendChild(a)}}n=this._parentLists(e);if(n[0]){h.insertAfter(t,n.last()[0]);n.last().remove()}else{h.insertAfter(t,e)}h.remove(e)},remove:function(e){var t;for(var i=0,n=e.length;i<n;i++){t=this.finder.findFormat(e[i]);if(t){this.unwrap(t)}}},toggle:function(e){var t=this,i=d(e),n=e.commonAncestorContainer;if(!i.length){e.selectNodeContents(n);i=d(e);if(!i.length){var r=n.ownerDocument.createTextNode("");e.startContainer.appendChild(r);i=[r];e.selectNode(r.parentNode)}}i=h.filterBy(i,h.htmlIndentSpace,true);if(t.finder.isFormatted(i)){t.split(e);t.remove(i)}else{t.apply(i)}}});var m=r.extend({init:function(e){e.formatter=new v({tag:e.tag,attr:e.attr});r.fn.init.call(this,e)}});var g=o.extend({init:function(e){this.options=e;o.fn.init.call(this,i(e,{finder:new p(e)}))},command:function(e){return new m(i(e,{tag:this.options.tag,attr:this.options.attr}))}});i(u,{ListFormatFinder:p,ListFormatter:v,ListCommand:m,ListTool:g});c("insertUnorderedList",new g({tag:"ul",attr:{style:{listStyleType:""},type:""},template:new a({template:n.buttonTemplate,title:"Insert unordered list"})}));c("insertOrderedList",new g({tag:"ol",attr:{style:{listStyleType:""},type:""},template:new a({template:n.buttonTemplate,title:"Insert ordered list"})}));c("insertUpperRomanList",new g({tag:"ol",attr:{style:{listStyleType:"upper-roman"}},altAttr:{type:"I"},template:new a({template:n.buttonTemplate,title:"Insert upper roman list"})}));c("insertLowerRomanList",new g({tag:"ol",attr:{style:{listStyleType:"lower-roman"}},altAttr:{type:"i"},template:new a({template:n.buttonTemplate,title:"Insert lower roman list"})}))})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("editor/plugins/formatting",["editor/plugins/inlineformat"],e)})(function(){(function(d){var s=window.kendo,o=s.ui.editor,l=o.Tool,e=o.ToolTemplate,u=o.DelayedExecutionTool,t=o.Command,c=o.Dom,i=o.EditorUtils,r=o.RangeUtils,n=i.registerTool;var a=u.extend({init:function(e){var t=this;l.fn.init.call(t,s.deepExtend({},t.options,e));t.type="kendoSelectBox";t.finder={getFormat:function(){return""}}},options:{items:[{text:"Paragraph",value:"p"},{text:"Quotation",value:"blockquote"},{text:"Heading 1",value:"h1"},{text:"Heading 2",value:"h2"},{text:"Heading 3",value:"h3"},{text:"Heading 4",value:"h4"},{text:"Heading 5",value:"h5"},{text:"Heading 6",value:"h6"}],width:110},toFormattingItem:function(e){var t=e.value;if(!t){return e}if(e.tag||e.className){return e}var i=t.indexOf(".");if(i===0){e.className=t.substring(1)}else if(i==-1){e.tag=t}else{e.tag=t.substring(0,i);e.className=t.substring(i+1)}return e},command:function(e){var n=this;var r=e.value;r=this.toFormattingItem(r);return new o.FormatCommand({range:e.range,formatter:function(){var e,t=(r.tag||r.context||"span").split(","),i=[{tags:t,attr:{className:r.className||""}}];if(d.inArray(t[0],c.inlineElements)>=0){e=new o.GreedyInlineFormatter(i)}else{e=new o.GreedyBlockFormatter(i)}e.editor=n.editor;return e}})},initialize:function(e,t){var i=t.editor;var n=this.options;var r=n.name;var a=this;var o;a.editor=i;e.width(n.width);o=e.kendoSelectBox({dataTextField:"text",dataValueField:"value",dataSource:n.items||i.options[r],title:i.options.messages[r],autoSize:true,change:function(){var e=this.dataItem();if(e){l.exec(i,r,e.toJSON())}},dataBound:function(){var e,t=this.dataSource.data();for(e=0;e<t.length;e++){t[e]=a.toFormattingItem(t[e])}},highlightFirst:false,template:s.template('<span unselectable="on" style="display:block;#=(data.style||"")#">#:data.text#</span>')}).data("kendoSelectBox");e.attr("title",t.title);o.wrapper.attr("title",t.title);e.addClass("k-decorated").closest(".k-widget").removeClass("k-"+r).find("*").addBack().attr("unselectable","on")},getFormattingValue:function(e,t){for(var i=0;i<e.length;i++){var n=e[i];var r=n.tag||n.context||"";var a=n.className?"."+n.className:"";var o=r+a;var s=d(t[0]).closest(o)[0];if(!s){continue}if(t.length==1){return n.value}for(var l=1;l<t.length;l++){if(!d(t[l]).closest(o)[0]){break}else if(l==t.length-1){return n.value}}}return""},update:function(e,t){var i=d(e).data(this.type);if(!i){return}var n=i.dataSource,r=n.data(),a,o,s=c.commonAncestor.apply(null,t);if(s!=c.closestEditable(s)&&this._ancestor==s){return}else{this._ancestor=s}for(a=0;a<r.length;a++){o=r[a].context;r[a].visible=!o||!!d(s).closest(o).length}n.filter([{field:"visible",operator:"eq",value:true}]);u.fn.update.call(this,e,t);i.value(this.getFormattingValue(n.view(),t));i.wrapper.toggleClass("k-state-disabled",!n.view().length)},destroy:function(){this._ancestor=null}});var f=t.extend({exec:function(){var e=this.lockRange(true);this.tagsToClean=this.options.remove||"strong,em,span,sup,sub,del,b,i,u,font".split(",");r.wrapSelectedElements(e);var t=r.mapAll(e,function(e){return e});for(var i=t.length-1;i>=0;i--){var n=t[i];if(!this.immutableParent(n)){this.clean(n)}}this.releaseRange(e)},clean:function(e){if(!e||c.isMarker(e)){return}var t=c.name(e);if(t=="ul"||t=="ol"){var i=new o.ListFormatter(t);var n=e.previousSibling;var r=e.nextSibling;i.unwrap(e);for(;n&&n!=r;n=n.nextSibling){this.clean(n)}}else if(t=="blockquote"){c.changeTag(e,"p")}else if(e.nodeType==1&&!c.insignificant(e)){for(var a=e.childNodes.length-1;a>=0;a--){this.clean(e.childNodes[a])}e.removeAttribute("style");e.removeAttribute("class")}else{h(e)}if(d.inArray(t,this.tagsToClean)>-1){c.unwrap(e)}},immutableParent:function(e){return this.immutables()&&o.Immutables.immutableParent(e)}});function h(e){var t=c.closestEditableOfType(e,["li"]);if(t){var i=new o.ListFormatter(c.name(t.parentNode));var n=s.ui.editor.W3CRange.fromNode(e);n.selectNode(t);i.toggle(n)}}d.extend(o,{FormattingTool:a,CleanFormatCommand:f});n("formatting",new a({template:new e({template:i.dropDownListTemplate,title:"Format"})}));n("cleanFormatting",new l({command:f,template:new e({template:i.buttonTemplate,title:"Clean formatting"})}))})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("editor/plugins/image",["kendo.imagebrowser","editor/command"],e)})(function(){(function(e,_){var b=window.kendo,w=e.extend,t=b.ui.editor,i=t.EditorUtils,k=t.Dom,n=i.registerTool,r=t.ToolTemplate,y=t.RangeUtils,a=t.Command,x=b.keys,C="#k-editor-image-url",S="#k-editor-image-title",T="#k-editor-image-width",D="#k-editor-image-height";var o=a.extend({init:function(e){var t=this;a.fn.init.call(t,e);t.async=true;t.attributes={}},insertImage:function(e,t){var i=this.attributes;var n=y.documentFromRange(t);if(i.src&&i.src!="http://"){var r=function(){setTimeout(function(){if(!i.width){e.removeAttribute("width")}if(!i.height){e.removeAttribute("height")}e.removeAttribute("complete")})};if(!e){e=k.create(n,"img",i);e.onload=e.onerror=r;t.deleteContents();t.insertNode(e);if(!e.nextSibling){k.insertAfter(n.createTextNode("\ufeff"),e)}r();t.setStartAfter(e);t.setEndAfter(e);y.selectRange(t);return true}else{e.onload=e.onerror=r;k.attr(e,i);r()}}return false},_dialogTemplate:function(e){return b.template('<div class="k-editor-dialog k-popup-edit-form">'+'<div class="k-edit-form-container">'+'<div class="k-edit-form-content">'+"# if (showBrowser) { #"+'<div class="k-filebrowser k-imagebrowser"></div>'+"# } #"+"<div class='k-edit-label'>"+'<label for="k-editor-image-url">#: messages.imageWebAddress #</label>'+"</div>"+"<div class='k-edit-field'>"+'<input type="text" class="k-textbox" id="k-editor-image-url">'+"</div>"+"<div class='k-edit-label'>"+'<label for="k-editor-image-title">#: messages.imageAltText #</label>'+"</div>"+"<div class='k-edit-field'>"+'<input type="text" class="k-textbox" id="k-editor-image-title">'+"</div>"+"<div class='k-edit-label'>"+'<label for="k-editor-image-width">#: messages.imageWidth #</label>'+"</div>"+"<div class='k-edit-field'>"+'<input type="text" class="k-textbox" id="k-editor-image-width">'+"</div>"+"<div class='k-edit-label'>"+'<label for="k-editor-image-height">#: messages.imageHeight #</label>'+"</div>"+"<div class='k-edit-field'>"+'<input type="text" class="k-textbox" id="k-editor-image-height">'+"</div>"+"</div>"+'<div class="k-edit-buttons k-state-default">'+'<button class="k-dialog-insert k-button k-primary">#: messages.dialogInsert #</button>'+'<button class="k-dialog-close k-button">#: messages.dialogCancel #</button>'+"</div>"+"</div>"+"</div>")({messages:this.editor.options.messages,showBrowser:e})},redo:function(){var e=this,t=e.lockRange();if(!e.insertImage(y.image(t),t)){e.releaseRange(t)}},exec:function(){var r=this,a=r.lockRange(),o=false,s=y.image(a),e=s&&s.getAttribute("width")||"",t=s&&s.getAttribute("height")||"",l,i=b.support.browser.msie,n=r.editor.options,d=n.messages,u=n.imageBrowser,c=!!(b.ui.ImageBrowser&&u&&u.transport&&u.transport.read!==_),f={title:d.insertImage,visible:false,resizable:c};this.expandImmutablesIn(a);function h(e){var t=l.element,i=parseInt(t.find(T).val(),10),n=parseInt(t.find(D).val(),10);r.attributes={src:t.find(C).val().replace(/ /g,"%20"),alt:t.find(S).val()};r.attributes.width=null;r.attributes.height=null;if(!isNaN(i)&&i>0){r.attributes.width=i}if(!isNaN(n)&&n>0){r.attributes.height=n}o=r.insertImage(s,a);p(e);if(r.change){r.change()}}function p(e){e.preventDefault();l.destroy();k.windowFromDocument(y.documentFromRange(a)).focus();if(!o){r.releaseRange(a)}}function v(e){if(e.keyCode==x.ENTER){h(e)}else if(e.keyCode==x.ESC){p(e)}}f.close=p;if(c){f.width=750}l=this.createDialog(r._dialogTemplate(c),f).toggleClass("k-filebrowser-dialog",c).find(".k-dialog-insert").click(h).end().find(".k-dialog-close").click(p).end().find(".k-edit-field input").keydown(v).end().find(C).val(s?s.getAttribute("src",2):"http://").end().find(S).val(s?s.alt:"").end().find(T).val(e).end().find(D).val(t).end().data("kendoWindow");var m=l.element;if(c){this._imageBrowser=new b.ui.ImageBrowser(m.find(".k-imagebrowser"),w({},u));this._imageBrowser.bind("change",function(e){if(e.selected.get("type")==="f"){m.find(C).val(this.value())}});this._imageBrowser.bind("apply",h)}if(i){var g=m.closest(".k-window").height();m.css("max-height",g)}l.center().open();m.find(C).focus().select()}});b.ui.editor.ImageCommand=o;n("insertImage",new t.Tool({command:o,template:new r({template:i.buttonTemplate,title:"Insert Image"})}))})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("editor/plugins/import",["editor/main"],e)})(function(){(function(r,e){var t=window.kendo,i=r.extend,a=r.proxy,n=t.ui.editor,o=n.EditorUtils,s=n.Command,l=n.Tool,d=o.registerTool,u=n.ToolTemplate,c='<div contenteditable="false" class="k-loading-mask" style="width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;"><div class="k-loading-image"></div><div class="k-loading-color"></div></div>';var f=s.extend({exec:function(){(this.editor._uploadWidget||this._initializeUploadWidget()).element.click()},_initializeUploadWidget:function(){var e=this;var t=e.editor;var i=t.options["import"];var n=r('<input id="editorImport" name="files" type="file" />').kendoUpload({success:a(e._onUploadSuccess,e),progress:a(e._onUploadProgress,e),select:a(e._onUploadSelect,e),error:a(e._onUploadError,e),complete:a(e._onUploadComplete,e),showFileList:false,multiple:false,async:{saveUrl:i.proxyURL,autoUpload:true,saveField:"file"},validation:{allowedExtensions:i.allowedExtensions,maxFileSize:i.maxFileSize}}).getKendoUpload();t._uploadWidget=n;return n},_onUploadComplete:function(e){this._trigger("complete",e);e.sender.clearAllFiles();this._removeLoadingOverlay()},_onUploadSuccess:function(e){this.editor.value(e.response.html.replace(/<\/?body>/gi,""));this._trigger("success",e)},_onUploadProgress:function(e){this._trigger("progress",e)},_onUploadSelect:function(e){this._trigger("select",e);if(!e.files[0].validationErrors){this._initLoadingOverlay()}},_onUploadError:function(e){this._trigger("error",e)},_trigger:function(e,t){var i=this.editor;var n=i.options["import"];if(typeof n[e]==="function"){n[e].call(i,t)}},_initLoadingOverlay:function(){var e=this.editor.body;if(n.Dom.is(e,"body")){this._iframeWrapper=this._container=this.editor.wrapper.find("iframe").parent().css({position:"relative"}).append(c)}else{this._container=r(e).append(c)}t.ui.progress(this._container,true)},_removeLoadingOverlay:function(){t.ui.progress(this._container,false);r(this._iframeWrapper).css({position:""});delete this._container;delete this._iframeWrapper}});i(n,{ImportCommand:f});d("import",new l({command:f,template:new u({template:o.iconTextButtonTemplate,title:"Import"})}))})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("editor/plugins/insert",["editor/command"],e)})(function(){(function(e){var t=window.kendo,a=t.ui.editor,i=a.Command,s=a.GenericCommand,n=a.EditorUtils,r=n.registerTool,o=a.Tool,l=a.ToolTemplate,d=a.RestorePoint,u=e.extend;var c=i.extend({init:function(e){i.fn.init.call(this,e);this.managesUndoRedo=true},exec:function(){var e=this.editor;var t=this.options;var i=t.range;var n=e.body;var r=new d(i,n);var a=t.html||t.value||"";e.selectRange(i);e.clipboard.paste(a,t);if(t.postProcess){t.postProcess(e,e.getRange())}var o=new s(r,new d(e.getRange(),n));o.editor=e;e.undoRedoStack.push(o);e.focus()}});var f=o.extend({initialize:function(e,t){var i=t.editor,n=this.options,r=n.items?n.items:i.options.insertHtml;this._selectBox=new a.SelectBox(e,{dataSource:r,dataTextField:"text",dataValueField:"value",change:function(){o.exec(i,"insertHtml",this.value())},title:i.options.messages.insertHtml,highlightFirst:false});e.attr("title",t.title);this._selectBox.wrapper.attr("title",t.title)},command:function(e){return new c(e)},update:function(e){var t=e.data("kendoSelectBox")||e.find("select").data("kendoSelectBox");t.close();t.value(t.options.title)}});u(a,{InsertHtmlCommand:c,InsertHtmlTool:f});r("insertHtml",new f({template:new l({template:n.dropDownListTemplate,title:"Insert HTML",initialValue:"Insert HTML"})}))})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("editor/plugins/export",["editor/main"],e)})(function(){(function(n,e){var u=window.kendo,t=n.extend,c=n.proxy,i=u.ui.editor,r=i.EditorUtils,a=i.Command,o=i.Tool,s=r.registerTool,l=i.ToolTemplate,d=[{text:"Docx",value:"docx"},{text:"Rtf",value:"rtf"},{text:"Pdf",value:"pdf"},{text:"Html",value:"html"},{text:"Plain Text",value:"txt"}];var f=a.extend({init:function(e){var t=this;t.options=e;a.fn.init.call(t,e);t.attributes=null;t.exportType=e.exportType},exec:function(){var e=this;var t=this.lockRange(true);e.postToProxy();e.releaseRange(t)},postToProxy:function(){this.generateForm().appendTo("body").submit().remove()},generateForm:function(){var e=this;var t=e.editor.options.exportAs;var i=n("<form>").attr({action:t&&t.proxyURL||"",method:"POST"});i.append([e.valueInput(),e.exportTypeInput(),e.fileNameInput()]);return i},valueInput:function(){var e=this.editor;return n("<input>").attr({value:e.encodedValue(),name:"value",type:"hidden"})},exportTypeInput:function(){var e=this;return n("<input>").attr({value:e.exportType,name:"exportType",type:"hidden"})},fileNameInput:function(){var e=this.editor;var t=e.options.exportAs;var i=t&&t.fileName||e.element.attr("id")||"editor";return n("<input>").attr({value:i,name:"fileName",type:"hidden"})}});var h=o.extend({init:function(e){var t=this;o.fn.init.call(t,u.deepExtend({},t.options,e));t.type="kendoSelectBox"},options:{items:d,width:140},command:function(e){var t=e.value;return new i.ExportAsCommand({range:e.range,exportType:t.exportType})},initialize:function(e,t){var i=this;var n=t.editor;var r=i.options;var a=r.name;var o=c(i.changeHandler,i);var s=r.items||n.options[a];var l=n.options.messages[a];var d;s.unshift({text:l,value:""});i.editor=n;e.width(r.width);d=e.kendoSelectBox({dataTextField:"text",dataValueField:"value",dataSource:s,autoSize:true,change:o,open:function(e){var t=e.sender;t.items()[0].style.display="none";t.unbind("open")},highlightFirst:false,template:u.template('<span unselectable="on" style="display:block;#=(data.style||"")#">#:data.text#</span>'),valueTemplate:'<span class="k-editor-export"><span class="k-icon k-i-export"></span><span class="k-export-tool-text">'+l+"</span></span>"}).data("kendoSelectBox");e.attr("title",t.title);d.wrapper.attr("title",t.title);e.addClass("k-decorated").closest(".k-widget").removeClass("k-"+a).find("*").addBack().attr("unselectable","on")},changeHandler:function(e){var t=e.sender;var i=t.dataItem();var n=i&&i.value;this._exec(n);t.value("")},_exec:function(e){if(e){o.exec(this.editor,this.options.name,{exportType:e})}},destroy:function(){this._ancestor=null}});t(i,{ExportAsTool:h,ExportAsCommand:f});s("exportAs",new h({template:new l({template:r.dropDownListTemplate,title:"Export As"})}))})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("editor/plugins/indent",["editor/plugins/formatblock"],e)})(function(){(function(h,a){var e=window.kendo,t=e.Class,i=h.extend,d=e.ui.editor,p=d.Dom,n=d.EditorUtils,r=n.registerTool,o=d.Command,s=d.Tool,l=d.ToolTemplate,u=d.RangeUtils,c=p.blockElements,f=d.BlockFormatFinder,v=d.BlockFormatter;function m(e,t){var i=h(e).css("direction")=="rtl",n=i?"Right":"Left",r=p.name(e)!="td"?"margin"+n:"padding"+n;if(t===a){return e.style[r]||0}else{if(t>0){e.style[r]=t+"px"}else{e.style[r]="";if(!e.style.cssText){e.removeAttribute("style")}}}}var g=t.extend({init:function(){this.finder=new f([{tags:p.blockElements}])},apply:function(e){e=p.filterBy(e,p.htmlIndentSpace,true);var t=this.finder.findSuitable(e),i=[],n,r,a,o,s;t=this.mapImmutables(t);if(t.length){for(n=0,r=t.length;n<r;n++){if(p.is(t[n],"li")){if(!h(t[n]).index()){i.push(t[n].parentNode)}else if(h.inArray(t[n].parentNode,i)<0){i.push(t[n])}}else{i.push(t[n])}}while(i.length){a=i.shift();if(p.is(a,"li")){o=a.parentNode;s=h(a).prev("li");var l=s.find("ul,ol").last();var d=h(a).children("ul,ol")[0];if(d&&s[0]){if(l[0]){l.append(a);l.append(h(d).children());p.remove(d)}else{s.append(d);d.insertBefore(a,d.firstChild)}}else{d=s.children("ul,ol")[0];if(!d){d=p.create(a.ownerDocument,p.name(o),this.getListTypeAttr(o));s.append(d)}while(a&&a.parentNode==o){d.appendChild(a);a=i.shift()}}}else{var u=parseInt(m(a),10)+30;m(a,u);for(var c=0;c<i.length;c++){if(h.contains(a,i[c])){i.splice(c,1)}}}}}else{var f=new v([{tags:["p"]}],{style:{marginLeft:30}});f.apply(e)}},getListTypeAttr:function(e){var t=e.getAttribute("type");var i=e.style.listStyleType;return t?{type:t}:{style:{listStyleType:i}}},mapImmutables:function(e){if(!this.immutables){return e}else{var i=[];return h.map(e,function(e){var t=d.Immutables.immutableParent(e);if(t){if(h.inArray(t,i)===-1){i.push(t)}else{return null}}return t||e})}},remove:function(e){e=p.filterBy(e,p.htmlIndentSpace,true);var t=this.finder.findSuitable(e),i,n,r,a,o,s,l,d;t=this.mapImmutables(t);for(n=0,r=t.length;n<r;n++){l=h(t[n]);if(l.is("li")){a=l.parent();o=a.parent();if(o.is("li,ul,ol")&&!m(a[0])){if(i&&h.contains(i,o[0])){continue}s=l.nextAll("li");if(s.length){h(a[0].cloneNode(false)).appendTo(l).append(s)}if(o.is("li")){l.insertAfter(o)}else{l.appendTo(o)}if(!a.children("li").length){a.remove()}continue}else{if(i==a[0]){continue}i=a[0]}}else{i=t[n]}d=parseInt(m(i),10)-30;m(i,d)}}});var _=o.extend({init:function(e){var t=this;e.formatter={toggle:h.proxy(function(e){var t=new g;t.immutables=this.editor&&this.editor.options.immutables;t.apply(u.nodes(e))},t)};o.fn.init.call(this,e)}});var b=o.extend({init:function(e){var t=this;e.formatter={toggle:h.proxy(function(e){var t=new g;t.immutables=this.editor&&this.editor.options.immutables;t.remove(u.nodes(e))},t)};o.fn.init.call(this,e)}});var w=s.extend({init:function(e){s.fn.init.call(this,e);this.finder=new f([{tags:c}])},initialize:function(e,t){s.fn.initialize.call(this,e,t);h.extend(this.options,{immutables:t.editor&&t.editor.options.immutables});e.addClass("k-state-disabled")},update:function(e,t){var i=this.finder.findSuitable(t),n,r,a,o,s,l;for(a=0,o=i.length;a<o;a++){s=i[a];if(this.options.immutables){l=d.Immutables.immutableParent(s);if(l){s=l}}n=m(s);if(!n){r=h(s).parents("ul,ol").length;n=p.is(s,"li")&&(r>1||m(s.parentNode))||p.ofType(s,["ul","ol"])&&r>0}if(n){e.removeClass("k-state-disabled");return}}e.addClass("k-state-disabled").removeClass("k-state-hover")}});i(d,{IndentFormatter:g,IndentCommand:_,OutdentCommand:b,OutdentTool:w});r("indent",new s({command:_,template:new l({template:n.buttonTemplate,title:"Indent"})}));r("outdent",new w({command:b,template:new l({template:n.buttonTemplate,title:"Outdent"})}))})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("editor/plugins/linebreak",["editor/plugins/formatblock"],e)})(function(){(function(g){var s=window.kendo,e=g.extend,_=s.ui.editor,b=_.Dom,t=_.Command,i=_.Tool,w=_.BlockFormatter,k=b.normalize,y=_.RangeUtils,n=_.EditorUtils.registerTool;var r=t.extend({init:function(e){this.options=e;t.fn.init.call(this,e)},_insertMarker:function(e,t){var i=b.create(e,"a"),n;i.className="k-marker";t.insertNode(i);if(!i.parentNode){n=t.commonAncestorContainer;n.innerHTML="";n.appendChild(i)}k(i.parentNode);return i},_moveFocus:function(e,t){if(b.isEmpty(t)){e.setStartBefore(t)}else{e.selectNodeContents(t);var i=y.textNodes(e)[0];if(!i){while(t.childNodes.length&&!b.is(t.firstChild,"br")){t=t.firstChild}i=t}if(b.isEmpty(i)){e.setStartBefore(i)}else{if(b.emptyNode(i)){i.innerHTML="\ufeff"}var n=i.firstChild||i;if(b.isDataNode(n)){e.setStart(n,0)}else{e.setStartBefore(n)}}}},shouldTrim:function(e){var t="p,h1,h2,h3,h4,h5,h6".split(","),i=b.parentOfType(e.startContainer,t),n=b.parentOfType(e.endContainer,t);return i&&!n||!i&&n},_blankAfter:function(e){while(e&&(b.isMarker(e)||b.stripBom(e.nodeValue)==="")){e=e.nextSibling}return!e},exec:function(){var e=this.getRange(),t=y.documentFromRange(e),i,n,r,a=_.emptyElementContent,o,s,l,d,u,c,f;this.expandImmutablesIn(e);f=this.shouldTrim(e);e.deleteContents();s=this._insertMarker(t,e);b.stripBomNode(s.previousSibling);b.stripBomNode(s.nextSibling);l=b.closestEditableOfType(s,["li"]);d=b.closestEditableOfType(s,"h1,h2,h3,h4,h5,h6".split(","));u=b.is(s.parentNode,"table")&&s.parentNode;if(l){if(b.emptyNode(l)){o=b.create(t,"p");if(b.next(l)){c=e.cloneRange();c.selectNode(l);y.split(c,l.parentNode)}var h=g("br",l);if(h.length==1){h.remove()}var p=l.parentNode;var v=l.parentNode.children.length;var m=v>1&&l.childNodes.length==1&&l.children[0];b.insertAfter(o,p);b.remove(v==1?l.parentNode:l);if(m&&m!==s){o.appendChild(m);o.appendChild(s)}else{o.innerHTML=a}r=o}}else if(d&&this._blankAfter(s)){o=this._insertParagraphAfter(d);b.remove(s);r=o}else if(u){o=this._insertParagraphAfter(u);b.remove(s);r=o}if(!r){if(!(l||d)){new w([{tags:["p"]}]).apply([s])}e.selectNode(s);i=b.parentOfType(s,[l?"li":d?b.name(d):"p"]);y.split(e,i,f);n=i.previousSibling;if(b.is(n,"li")&&n.firstChild&&!b.is(n.firstChild,"br")){n=n.firstChild}r=i.nextSibling;this.clean(n,{links:true});this.clean(r,{links:true});if(b.is(r,"li")&&r.firstChild&&!b.is(r.firstChild,"br")){r=r.firstChild}b.remove(i);k(n)}k(r);this._moveFocus(e,r);e.collapse(true);b.scrollTo(r,true);y.selectRange(e)},_insertParagraphAfter:function(e){var t=this.getRange();var i=y.documentFromRange(t);var n=_.emptyElementContent;var r=b.create(i,"p");b.insertAfter(r,e);r.innerHTML=n;return r},clean:function(e,t){var i=e;if(e.firstChild&&b.is(e.firstChild,"br")){b.remove(e.firstChild)}if(b.isDataNode(e)&&!e.nodeValue){e=e.parentNode}if(e){var n=false;while(e.firstChild&&e.firstChild.nodeType==1){n=n||b.significantNodes(e.childNodes).length>1;e=e.firstChild}if(!b.isEmpty(e)&&/^\s*$/.test(e.innerHTML)&&!n){g(i).find(".k-br").remove();e.innerHTML=_.emptyElementContent}if(t&&t.links){while(e!=i){if(b.is(e,"a")&&b.emptyNode(e)){b.unwrap(e);break}e=e.parentNode}}}}});var a=t.extend({init:function(e){this.options=e;t.fn.init.call(this,e)},exec:function(){var e=this.getRange();this.expandImmutablesIn(e);var t=b.create(y.documentFromRange(e),"br");var i=e.startContainer;var n;var r=s.support.browser;var a=r.msie&&r.version<11;var o=b.is(i,"table")&&i;e.deleteContents();if(o){b.insertAfter(t,o)}else{e.insertNode(t)}k(t.parentNode);if(!a&&(!t.nextSibling||b.isWhitespace(t.nextSibling))){if(!!t.nextSibling&&b.isWhitespace(t.nextSibling)){t.nextSibling.remove()}n=t.cloneNode(true);n.className="k-br";b.insertAfter(n,t)}e.setStartAfter(t);e.collapse(true);b.scrollTo(t.nextSibling||t,true);y.selectRange(e)}});e(_,{ParagraphCommand:r,NewLineCommand:a});n("insertLineBreak",new i({key:13,shift:true,command:a}));n("insertParagraph",new i({key:13,command:r}))})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("editor/plugins/file",["kendo.filebrowser","editor/plugins/link"],e)})(function(){(function(e,g){var _=window.kendo,b=e.extend,t=_.ui.editor,i=t.EditorUtils,w=t.Dom,n=i.registerTool,r=t.ToolTemplate,k=t.RangeUtils,a=t.Command,o=t.LinkFormatter,y=k.textNodes,x=_.keys,C="#k-editor-file-url",S="#k-editor-file-text",T="#k-editor-file-title";var s=a.extend({init:function(e){var t=this;a.fn.init.call(t,e);t.formatter=new o;t.async=true;t.attributes={}},insertFile:function(e,t){var i=this.attributes;var n=k.documentFromRange(t);if(i.href&&i.href!="http://"){if(!e){e=w.create(n,"a",{href:i.href});e.innerHTML=i.innerHTML;e.title=i.title;t.deleteContents();t.insertNode(e);if(!e.nextSibling){w.insertAfter(n.createTextNode("\ufeff"),e)}t.setStartAfter(e);t.setEndAfter(e);k.selectRange(t);return true}else{w.attr(e,i)}}return false},_dialogTemplate:function(e){return _.template('<div class="k-editor-dialog k-popup-edit-form">'+'<div class="k-edit-form-container">'+'<div class="k-edit-form-content">'+"# if (showBrowser) { #"+'<div class="k-filebrowser"></div>'+"# } #"+"<div class='k-edit-label'>"+'<label for="k-editor-file-url">#: messages.fileWebAddress #</label>'+"</div>"+"<div class='k-edit-field'>"+'<input type="text" class="k-textbox" id="k-editor-file-url">'+"</div>"+"<div class='k-edit-label'>"+'<label for="k-editor-file-text">#: messages.fileText #</label>'+"</div>"+"<div class='k-edit-field'>"+'<input type="text" class="k-textbox" id="k-editor-file-text">'+"</div>"+"<div class='k-edit-label'>"+'<label for="k-editor-file-title">#: messages.fileTitle #</label>'+"</div>"+"<div class='k-edit-field'>"+'<input type="text" class="k-textbox" id="k-editor-file-title">'+"</div>"+"</div>"+'<div class="k-edit-buttons k-state-default">'+'<button class="k-dialog-insert k-button k-primary">#: messages.dialogInsert #</button>'+'<button class="k-dialog-close k-button">#: messages.dialogCancel #</button>'+"</div>"+"</div>"+"</div>")({messages:this.editor.options.messages,showBrowser:e})},redo:function(){var e=this,t=e.lockRange();this.formatter.apply(t,this.attributes);e.releaseRange(t)},exec:function(){var a=this,o=a.lockRange(),e=y(o),s=false,l=e.length?this.formatter.finder.findSuitable(e[0]):null,d,t=_.support.browser.msie,i=a.editor.options,n=i.messages,r=i.fileBrowser,u=!!(_.ui.FileBrowser&&r&&r.transport&&r.transport.read!==g),c={title:n.insertFile,visible:false,resizable:u};this.expandImmutablesIn(o);function f(e){var t=d.element,i=t.find(C).val().replace(/ /g,"%20"),n=t.find(S).val(),r=t.find(T).val();a.attributes={href:i,innerHTML:n!==""?n:i,title:r};s=a.insertFile(l,o);h(e);if(a.change){a.change()}}function h(e){e.preventDefault();d.destroy();w.windowFromDocument(k.documentFromRange(o)).focus();if(!s){a.releaseRange(o)}}function p(e){if(e.keyCode==x.ENTER){f(e)}else if(e.keyCode==x.ESC){h(e)}}c.close=h;if(u){c.width=750}d=this.createDialog(a._dialogTemplate(u),c).toggleClass("k-filebrowser-dialog",u).find(".k-dialog-insert").click(f).end().find(".k-dialog-close").click(h).end().find(".k-edit-field input").keydown(p).end().find(C).val(l?l.getAttribute("href",2):"http://").end().find(S).val(l?l.innerText:"").end().find(T).val(l?l.title:"").end().data("kendoWindow");var v=d.element;if(u){a._fileBrowser=new _.ui.FileBrowser(v.find(".k-filebrowser"),b({},r));a._fileBrowser.bind("change",function(e){if(e.selected.get("type")==="f"){v.find(C).val(this.value())}});a._fileBrowser.bind("apply",f)}if(t){var m=v.closest(".k-window").height();v.css("max-height",m)}d.center().open();v.find(C).focus().select()}});_.ui.editor.FileCommand=s;n("insertFile",new t.Tool({command:s,template:new r({template:i.buttonTemplate,title:"Insert File"})}))})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("editor/plugins/tables",["editor/plugins/formatblock","editor/plugins/insert"],e)})(function(){(function(h,B){var f=window.kendo,i=h.extend,o=h.proxy,p=f.ui.editor,v=p.Dom,s=p.EditorUtils,L=p.RangeUtils,H=p.Command,m="kendoEditor",e="k-state-active",l="k-state-selected",g="scope",_="row",b="col",w="rowgroup",k="colgroup",y="colspan",x="rowspan",C="table",c="thead",d="tbody",S="tr",T="td",D="th",u=p.Tool,A=p.ToolTemplate,n=p.InsertHtmlCommand,N=p.BlockFormatFinder,r=p.BlockFormatTool,a=p.FormatCommand,E=p.EditorUtils.registerTool,t=p.EditorUtils.registerFormat,I=f.ui.Editor.fn.options.formats,O=f.getTouches;var V=f.template;var W="<td style='width:#=width#%;'>#=content#</td>";var U=new N([{tags:[C]}]);var j=n.extend({init:function(e){var t=h.extend({postProcess:this.postProcess,skipCleaners:true},e||{});n.fn.init.call(this,t)},_tableHtml:function(e,t){e=e||1;t=t||1;var i=V(W)({width:100/t,content:p.emptyTableCellContent});var n=100/e;return"<table class='k-table' data-last>"+new Array(e+1).join("<tr style='height:"+n+"%;'>"+new Array(t+1).join(i)+"</tr>")+"</table>"},postProcess:function(e,t){var i=h("table[data-last]",e.document).removeAttr("data-last");t.setStart(i.find(T)[0],0);t.collapse(true);e.selectRange(t)},exec:function(){var e=this.options;e.html=this._tableHtml(e.rows,e.columns);n.fn.exec.call(this)}});var M=u.extend({initialize:function(e,t){u.fn.initialize.call(this,e,t);var i=h(this.options.popupTemplate).appendTo("body").kendoPopup({anchor:e,copyAnchorStyles:false,open:o(this._open,this),activate:o(this._activate,this),close:o(this._close,this)}).data("kendoPopup");e.click(o(this._toggle,this)).keydown(o(this._keydown,this));var n=this._editor=t.editor;this._popup=i;var r=new p.TableWizardTool({template:new A({template:s.tableWizardButtonTemplate,title:n.options.messages.tableWizard}),command:p.TableWizardCommand,insertNewTable:true});E("tableWizardInsert",r);var a=h("<div>"+r.options.template.getHtml()+"</div>");a.appendTo(i.element);if(n.toolbar){n.toolbar.attachToolsEvents(a)}},popup:function(){return this._popup},_activate:h.noop,_open:function(){this._popup.options.anchor.addClass(e)},_close:function(){this._popup.options.anchor.removeClass(e)},_keydown:function(e){var t=f.keys;var i=e.keyCode;if(i==t.DOWN&&e.altKey){this._popup.open()}else if(i==t.ESC){this._popup.close()}},_toggle:function(e){var t=h(e.target).closest(".k-tool");if(!t.hasClass("k-state-disabled")){this.popup().toggle()}},update:function(e){var t=this.popup();if(t.wrapper&&t.wrapper.css("display")=="block"){t.close()}e.removeClass("k-state-hover")},destroy:function(){this._popup.destroy()}});var G=M.extend({init:function(e){this.cols=8;this.rows=6;M.fn.init.call(this,h.extend(e,{command:j,popupTemplate:"<div class='k-ct-popup'>"+"<div>"+new Array(this.cols*this.rows+1).join("<span class='k-ct-cell k-state-disabled'></span>")+"</div>"+"<div class='k-status'></div>"+"</div>"}))},_activate:function(){var i=this,e=i._popup.element,t=e.find(".k-ct-cell"),n=t.eq(0),r=t.eq(t.length-1),a=f.getOffset(n),o=f.getOffset(r),s=i.cols,l=i.rows,d,u;e.find("*").addBack().attr("unselectable","on");o.left+=r[0].offsetWidth;o.top+=r[0].offsetHeight;d=(o.left-a.left)/s;u=(o.top-a.top)/l;function c(e){var t=h(window);return{row:Math.floor((e.clientY+t.scrollTop()-a.top)/u)+1,col:Math.floor((e.clientX+t.scrollLeft()-a.left)/d)+1}}e.autoApplyNS(m).on("mousemove",".k-ct-cell",function(e){i._setTableSize(c(e))}).on("mouseleave",".k-ct-cell",function(){i._setTableSize()}).on("down",".k-ct-cell",function(e){e.preventDefault();var t=O(e)[0];i._exec(c(t.location))})},_valid:function(e){return e&&e.row>0&&e.col>0&&e.row<=this.rows&&e.col<=this.cols},_exec:function(e){if(this._valid(e)){this._editor.exec("createTable",{rows:e.row,columns:e.col});this._popup.close()}},_setTableSize:function(t){var e=this._popup.element;var i=e.find(".k-status");var n=e.find(".k-ct-cell");var r=this.cols;var a=this._editor.options.messages;if(this._valid(t)){i.text(f.format(a.createTableHint,t.row,t.col));n.each(function(e){h(this).toggleClass(l,e%r<t.col&&e/r<t.row)})}else{i.text(a.createTable);n.removeClass(l)}},_keydown:function(e){M.fn._keydown.call(this,e);if(!this._popup.visible()){return}var t=f.keys;var i=e.keyCode;var n=this._popup.element.find(".k-ct-cell");var r=Math.max(n.filter(".k-state-selected").last().index(),0);var a=Math.floor(r/this.cols);var o=r%this.cols;var s=false;if(i==t.DOWN&&!e.altKey){s=true;a++}else if(i==t.UP){s=true;a--}else if(i==t.RIGHT){s=true;o++}else if(i==t.LEFT){s=true;o--}var l={row:Math.max(1,Math.min(this.rows,a+1)),col:Math.max(1,Math.min(this.cols,o+1))};if(i==t.ENTER){this._exec(l)}else{this._setTableSize(l)}if(s){e.preventDefault();e.stopImmediatePropagation()}},_open:function(){var e=this._editor.options.messages;M.fn._open.call(this);this.popup().element.find(".k-status").text(e.createTable).end().find(".k-ct-cell").removeClass(l)},_close:function(){M.fn._close.call(this);this.popup().element.off("."+m)}});var R=H.extend({undo:function(){var e=this.restorePoint;e.restoreHtml();h(this.editor.body).find(".k-table-resize-handle-wrapper").each(function(e,t){t.remove()});this.editor.selectRange(e.toRange())},_clearColIndexAttr:function(e){v.clearTableMappings(e,"col-index")},_mapColIndices:function(e){v.reMapTableColumns(e,"col-index")},_findRowSpanCell:function(e,t,i){var n,r;for(var a=t;a>=0;a--){n=e.rows[a];r=h(n).find("[col-index="+i+"]");if(r.length){return r}}},_resetTableResizing:function(e){e._destroyResizings();e._initializeColumnResizing();e._initializeRowResizing();e._initializeTableResizing()},_findNextTdInRow:function(e,t){var i=e.find("td:last-child"),n=parseInt(i.attr("col-index"),10)+i.prop("colSpan")-1,r;for(var a=t;a<=n;a++){r=e.find("[col-index="+a+"]");if(r.length){return r}}},_adjustColgroups:function(e,t){var i=t.getElementsByTagName(b),n=t.getElementsByTagName(k),r=e.cells,a=r.length,o,s,l;while(i.length>0){i[0].remove()}while(n.length>0){n[0].remove()}for(o=a-1;o>=0;o--){l=r[o];if(l.getAttribute(g)===k){s=v.createEmptyNode(this.editor.document,k);s.setAttribute("span",l.getAttribute(y));t.prepend(s)}else{t.prepend(v.createEmptyNode(this.editor.document,b))}}},_associateHeaderIds:function(e){v.clearTableMappings(e,"col-index");v.reMapTableColumns(e,"col-index");h(e).find("th, td").removeAttr("id headers");v.associateWithIds(e)},_getNumberOfColumns:function(e){return v._getNumberOfColumns(e,"td, th")}});var q=R.extend({exec:function(){var e=this.lockRange(true),t=v.closest(e.endContainer,[T,D]),i=v.closest(t,C),n=this.options.position||"after",r,a,o,s,l,d,u;if(!i||this.immutables()&&p.Immutables.immutableParent(t)){this.releaseRange(e);return}this._mapColIndices(i);a=t.parentNode;l=v.findNodeIndex(a,true);if(t.rowSpan>1&&n==="after"){a=i.rows[l+t.rowSpan-1]}r=this._getNumberOfColumns(i);s=a.cloneNode(true);h(s).empty();for(var c=0;c<r;c=c+o.prop("colSpan")){o=h(a).find("[col-index="+c+"]");if(o.length){if(o.prop("rowSpan")>1&&n==="after"&&o){o.attr(x,o.prop("rowSpan")+1)}else{this._appendCell(s,o)}}else{l=v.findNodeIndex(a,true);o=this._findRowSpanCell(a.parentElement,l,c);d=o.closest(S).index();if(d+o.prop("rowSpan")-1===l&&n==="after"){this._appendCell(s,o)}else{o.attr(x,o.prop("rowSpan")+1)}}u=h(s).find("[col-index="+c+"]");if(u.attr(g)===w&&!u.attr(x)){u.attr(g,_)}}if(n=="before"){v.insertBefore(s,a)}else{v.insertAfter(s,a)}if(h(i).find("[headers]").length>0){this._associateHeaderIds(i)}this._clearColIndexAttr(i);this.releaseRange(e);this._resetTableResizing(this.editor)},_appendCell:function(e,t){var i;i=t.clone();i.html(p.emptyTableCellContent);i.removeAttr(x);i.appendTo(e)}});var $=R.extend({exec:function(){var e=this.lockRange(true),t=v.closest(e.endContainer,[T,D]),i=v.closest(t,C),n=i.getElementsByTagName(b),r=i.getElementsByTagName(k),a,o,s=i&&i.rows,l,d,u=this.options.position||"after";if(!t||this.immutables()&&p.Immutables.immutableParent(t)){this.releaseRange(e);return}this._mapColIndices(i);a=parseInt(t.getAttribute("col-index"),10);if(t.colSpan>1&&u==="after"){t.setAttribute("col-index",a+t.colSpan-1);a=a+t.colSpan-1}for(o=0;o<s.length;o++){l=this._processForColSpan(s[o],a,u,t);if(!l){continue}d=l.cloneNode();d.innerHTML=p.emptyTableCellContent;d.removeAttribute(y);if(d.getAttribute(g)&&d.getAttribute(g)===k){d.setAttribute(g,b)}if(u=="before"){v.insertBefore(d,l)}else{v.insertAfter(d,l)}this._resizeCells(d,l)}if(n.length>0||r.length>0){this._adjustColgroups(s[0],i)}if(h(i).find("[headers]").length>0){this._associateHeaderIds(i)}this._clearColIndexAttr(i);this.releaseRange(e);this._resetTableResizing(this.editor)},_processForColSpan:function(e,t,i,n){var r,a,o=t-1;r=h(e).find("[col-index="+t+"]")[0];if(r&&r.colSpan>1&&i==="after"&&r!==n){r.colSpan+=1;return}if(r){return r}for(o;o>=0;o--){r=h(e).find("[col-index="+o+"]")[0];if(r&&r.colSpan>1){break}}if(!r){return}a=parseInt(r.getAttribute("col-index"),10)+r.colSpan-1;if(a===t&&i==="after"){return r}else if(t<=a){r.setAttribute(y,r.colSpan+1)}},_resizeCells:function(e,t){var i=e.style.width,n,r,a;if(!i){return}n=parseFloat(i);r=i.slice(n.toString().length);a=n/2+r;e.style.width=a;t.style.width=a}});var K=R.extend({exec:function(){var e=this.lockRange();var t=L.mapAll(e,function(e){return h(e).closest(S)[0]});var i=v.closest(e.endContainer,[T,D]);var n=t[0];var r=i?i.rowSpan:1;var a=h(t[0]).index();var o=v.closest(n,C);var s=n.parentElement;var l;if(!o||this.immutables()&&p.Immutables.immutableParent(n)){this.releaseRange(e);return}for(var d=0;d<r;d++){if(t.indexOf(s.rows[a+d])<0){t.push(s.rows[a+d])}}if(o.rows.length<=t.length){l=v.next(o);if(!l||v.insignificant(l)){l=v.prev(o)}if(l&&l.rows){l=l.rows[0].cells[0]}v.remove(o);this._resetTableResizing(this.editor)}else if(s.rows.length<=t.length){l=s.nextSibling;if(!l){l=s.previousSibling}v.remove(s)}else{this._mapColIndices(o);for(var u=0;u<t.length;u++){n=t[u];v.removeTextSiblings(n);l=v.next(n)||v.prev(n);l=l.cells[0];this._focusElement(e,l);l=null;this._handleRowSpanCells(o,n);v.remove(n)}this._clearColIndexAttr(o)}if(h(o).find("[headers]").length>0){this._associateHeaderIds(o)}else if(v.is(s,c)&&h(o).find("[scope]").length>0){this._adjustColgroups(s.rows[0],o)}if(l){this._focusElement(e,l)}this._resetTableResizing(this.editor)},_focusElement:function(e,t){e.setStart(t,0);e.collapse(true);this.editor.selectRange(e)},_handleRowSpanCells:function(e,t){var i,n,r,a,o=v.findNodeIndex(t,true),s=e.rows[0],l=s.cells[s.cells.length-1],d=parseInt(l.getAttribute("col-index"),10)+l.colSpan-1;for(i=0;i<=d;i=i+n.prop("colSpan")){n=h(t).find("[col-index="+i+"]");if(n.length&&n.prop("rowSpan")>1){a=e.rows[o+1];r=h(a).find("[col-index="+(i+1)+"]");if(r.length){r.before(n)}else{h(a).append(n)}this._reduceRowSpan(n)}if(!n.length){n=this._findRowSpanCell(t.parentElement,o,i);this._reduceRowSpan(n)}}},_reduceRowSpan:function(e){var t=e.prop("rowSpan")-1;if(t<=1){e.removeAttr(x);if(e.attr(g)===w){e.attr(g,_)}}else{e.attr(x,t)}}});var Y=R.extend({exec:function(){var e=this.lockRange(),t=v.closest(e.endContainer,[T,D]),i=v.closest(t,C),n=i&&i.rows,r=v.findNodeIndex(t,true),a=n&&n[0].cells.length,o=i.getElementsByTagName(b),s=i.getElementsByTagName(k),l,d,u,c;if(!t||this.immutables()&&p.Immutables.immutableParent(t)){this.releaseRange(e);return}if(a==1||t.colSpan==a){l=v.next(i);if(!l||v.insignificant(l)){l=v.prev(i)}if(l&&l.rows){l=l.rows[0].cells[0]}v.remove(i);this._resetTableResizing(this.editor)}else{v.removeTextSiblings(t);l=v.next(t)||v.prev(t);this._mapColIndices(i);r=parseInt(t.getAttribute("col-index"),10);for(c=0;c<t.colSpan;c++){for(d=0;d<n.length;d=d+(u.prop("rowSpan")||1)){u=h(n[d]).find("[col-index="+(r+c)+"]");if(u.length&&u.prop("colSpan")<=1){u.remove()}else{this._handleColSpanCells(n[d],r+c)}}}this._clearColIndexAttr(i)}if(o.length>0||s.length>0){this._adjustColgroups(n[0],i)}if(h(i).find("[headers]").length>0){this._associateHeaderIds(i)}if(l){e.setStart(l,0);e.collapse(true);this.editor.selectRange(e)}this._resetTableResizing(this.editor)},_handleColSpanCells:function(e,t){var i=h(e).find("[col-index="+t+"]");if(i.length&&i.prop("colSpan")>1){var n=i.clone(true);i.after(n);this._reduceColSpan(n);n.attr("col-index",parseInt(i.attr("col-index"),10)+1);i.remove();return}for(var r=t;r>=0;r--){i=h(e).find("[col-index="+r+"]");if(i.length){this._reduceColSpan(i);i.attr("col-index",parseInt(i.attr("col-index"),10)+1);return}}},_reduceColSpan:function(e){var t=e.prop("colSpan")-1;if(t<=1){e.removeAttr(y);if(e.attr(g)===k){e.attr(g,b)}}else{e.attr(y,t)}}});var Q=R.extend({exec:function(){var e=this.lockRange(),t=v.closest(e.endContainer,[T,D]),i,n,r,a,o;if(!t){this.releaseRange(e);return}i=v.closest(t,C);n=t.parentNode;r=v.findNodeIndex(t,true);a=n.children[r+1];if(this.immutables()&&p.Immutables.immutableParent(t)){this.releaseRange(e);return}this._mapColIndices(i);r=parseInt(h(t).attr("col-index"),10);a=h(n).find("[col-index="+(r+1+this._getColspan(t)-1)+"]").get(0);if(!a||a.rowSpan!==t.rowSpan||t.tagName!==a.tagName){this._clearColIndexAttr(i);this.releaseRange(e);return}o=this._getColspan(t)+this._getColspan(a);h(t).prop(y,o).append(v.emptyNode(a)?"":"<br/>"+a.innerHTML);h(t).width(t.offsetWidth);h(a).remove();if(t.getAttribute(g)===b){t.setAttribute(g,k)}if(t.getAttribute(g)===k){this._adjustColgroups(n,i)}if(h(i).find("[headers]").length>0){this._associateHeaderIds(i)}this._clearColIndexAttr(i);this.releaseRange(e);this._resetTableResizing(this.editor)},_getColspan:function(e){return parseInt(e.getAttribute(y),10)||1}});var X=R.extend({exec:function(){var e=this.lockRange(),t=v.closest(e.endContainer,[T,D]),i,n,r,a,o,s,l;if(!t){this.releaseRange(e);return}i=v.closest(t,S);n=v.closest(t,[c,d]);r=v.closest(t,C);a=v.findNodeIndex(t,true);o=v.findNodeIndex(i,true);if(o+1===n.rows.length){this.releaseRange(e);return}s=n.rows[o+this._getRowspan(t)];l=s&&s.children[a];if(this.immutables()&&p.Immutables.immutableParent(t)){this.releaseRange(e);return}this._mapColIndices(r);a=h(t).attr("col-index");l=h(s).find("[col-index="+a+"]").get(0);if(!l||l.colSpan!==t.colSpan||t.tagName!==l.tagName){this._clearColIndexAttr(r);this.releaseRange(e);return}h(t).prop(x,this._getRowspan(t)+this._getRowspan(l)).append(v.emptyNode(l)?"":"<br/>"+l.innerHTML);if(t.getAttribute(g)===_){t.setAttribute(g,w)}h(l).remove();if(h(r).find("[headers]").length>0){this._associateHeaderIds(r)}this._clearColIndexAttr(r);this.releaseRange(e)},_getRowspan:function(e){return parseInt(e.getAttribute(x),10)||1}});var F=R.extend({exec:function(){var e=this.lockRange(),t=this.options.type,i=t==="row"?y:x,n=v.closest(e.endContainer,[T,D]),r=v.closest(n,[c,d]),a=v.closest(n,C),o=v.createEmptyNode(this.editor.document,n.nodeName.toLowerCase());if(!n||this.immutables()&&p.Immutables.immutableParent(n)){this.releaseRange(e);return}this._mapColIndices(a);if(t==="row"&&h(n).is("["+i+"]")){this._splitCellHorizontally(n,r,i,o)}else if(t==="column"&&h(n).is("["+i+"]")){this._splitCellVertically(n,r,i,o)}if(h(n).prop(i.toLowerCase())<=1){h(n).removeAttr(i)}if(h(a).find("[headers]").length>0){this._associateHeaderIds(a)}this._clearColIndexAttr(a);this.releaseRange(e)},_getRowspanValue:function(e){return parseInt(e.getAttribute(x),10)},_getColspanValue:function(e){return parseInt(e.getAttribute(y),10)},_splitCellHorizontally:function(e,t,i,n){var r=e.rowSpan,a=e.colSpan,o=h(n),s=Math.floor(a/2);if(s>1){o.attr(y,s)}if(r>1){o.attr(x,r)}h(e).prop(i,a-s).after(o);h(e).width(e.offsetWidth);o.width(o[0].offsetWidth);if(e.hasAttribute(g)){if(e.getAttribute(g)===k){o.attr(g,b);if(!e.getAttribute(y)||e.getAttribute(y)==="1"){e.setAttribute(g,b)}this._adjustColgroups(e.parentNode,t.parentNode)}else{o.attr(g,e.getAttribute(g))}}},_splitCellVertically:function(e,t,i,n){var r=v.closest(e,S),a=parseInt(h(e).attr("col-index"),10),o=v.findNodeIndex(r,true),s=e.rowSpan,l=e.colSpan,d=Math.floor(s/2),u=h(t).find(S).eq(o+s-d),c=this._findNextTdInRow(u,a+l),f=h(n);if(d>1){f.attr(x,d)}if(l>1){f.attr(y,l)}if(c&&c.length){c.before(f)}else{u.append(f)}h(e).prop(i,s-d);if(e.hasAttribute(g)){if(e.getAttribute(g)===w){f.attr(g,_);if(!e.getAttribute(x)||e.getAttribute(x)==="1"){e.setAttribute(g,_)}}else{f.attr(g,e.getAttribute(g))}}}});var P=u.extend({command:function(e){var t={row:{insert:q,delete:K,merge:Q,split:F},column:{insert:$,delete:Y,merge:X,split:F}};e=i(e,this.options);e.action=e.action||"insert";return new t[e.type][e.action](e)},initialize:function(e,t){u.fn.initialize.call(this,e,t);e.addClass("k-state-disabled");e.attr("disabled","disabled")},update:function(e,t){var i=!U.isFormatted(t);if(i===true){e.parent().addClass("k-hidden k-state-disabled");e.attr("disabled","disabled");e.addClass("k-state-disabled")}else{e.parent().removeClass("k-hidden k-state-disabled");e.removeAttr("disabled");e.removeClass("k-state-disabled")}}});var Z=a.extend({exec:function(){var e=this;var t=e.editor;a.fn.exec.call(this);if(t.tableResizing){t.tableResizing._showResizeHandles()}}});var z=r.extend({initialize:function(e,t){r.fn.initialize.call(this,e,t);e.addClass("k-state-disabled");e.attr("disabled","disabled")},update:function(e,t){var i=!U.isFormatted(t);var n=this.options.finder.isFormatted(t,this.isTable);if(i===true){e.parent().addClass("k-hidden k-state-disabled");e.attr("disabled","disabled");e.addClass("k-state-disabled")}else{e.parent().removeClass("k-hidden k-state-disabled");e.removeAttr("disabled");e.removeClass("k-state-disabled")}e.toggleClass("k-state-selected",n);e.attr("aria-pressed",n)},command:function(e){var t=this;return new Z(i(e,{formatter:t.options.formatter}))},isTable:function(e){return v.is(e,"table")}});i(f.ui.editor,{PopupTool:M,TableCommand:j,InsertTableTool:G,TableFormatTool:z,TableFormatCommand:Z,TableModificationTool:P,InsertRowCommand:q,InsertColumnCommand:$,DeleteRowCommand:K,DeleteColumnCommand:Y,MergeCellsHorizontallyCommand:Q,MergeCellsVerticallyCommand:X,SplitCellCommand:F});E("createTable",new G({template:new A({template:s.buttonTemplate,popup:true,title:"Create table"})}));E("addColumnLeft",new P({type:"column",position:"before",template:new A({template:s.buttonTemplate,title:"Add column on the left"})}));E("addColumnRight",new P({type:"column",template:new A({template:s.buttonTemplate,title:"Add column on the right"})}));E("addRowAbove",new P({type:"row",position:"before",template:new A({template:s.buttonTemplate,title:"Add row above"})}));E("addRowBelow",new P({type:"row",template:new A({template:s.buttonTemplate,title:"Add row below"})}));E("deleteRow",new P({type:"row",action:"delete",template:new A({template:s.buttonTemplate,title:"Delete row"})}));E("deleteColumn",new P({type:"column",action:"delete",template:new A({template:s.buttonTemplate,title:"Delete column"})}));E("mergeCellsHorizontally",new P({type:"row",action:"merge",template:new A({template:s.buttonTemplate,title:"Merge Cell Right"})}));E("mergeCellsVertically",new P({type:"column",action:"merge",template:new A({template:s.buttonTemplate,title:"Merge Cell Down"})}));E("splitCellHorizontally",new P({type:"row",action:"split",template:new A({template:s.buttonTemplate,title:"Split Cell"})}));E("splitCellVertically",new P({type:"column",action:"split",template:new A({template:s.buttonTemplate,title:"Split Cell"})}));t("tableAlignLeft",[{tags:["table"],attr:{style:{marginLeft:"",marginRight:"auto"}}},{tags:["table"],attr:{align:"left"}}]);E("tableAlignLeft",new z({format:I.tableAlignLeft,template:new A({template:s.buttonTemplate,title:"Table Align Left"})}));t("tableAlignCenter",[{tags:["table"],attr:{style:{marginLeft:"auto",marginRight:"auto"}}},{tags:["table"],attr:{align:"center"}}]);E("tableAlignCenter",new z({format:I.tableAlignCenter,template:new A({template:s.buttonTemplate,title:"Table Align Center"})}));t("tableAlignRight",[{tags:["table"],attr:{style:{marginLeft:"auto",marginRight:""}}},{tags:["table"],attr:{align:"right"}}]);E("tableAlignRight",new z({format:I.tableAlignRight,template:new A({template:s.buttonTemplate,title:"Table Align Left"})}))})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("editor/plugins/clipboard",["editor/command"],e)})(function(){(function(y){var u=window.kendo,e=u.Class,t=u.ui.editor,w=t.RangeUtils,x=t.Dom,n=t.RestorePoint,k=t.Marker,C=u.support.browser,S=y.extend;var i=e.extend({init:function(e){this.editor=e;var t=e.options.pasteCleanup;this.cleaners=[new a(t),new o(t),new s(t),new l(t),new c(t),new f(t),new m(t),new g(t)]},htmlToFragment:function(e){var t=this.editor,i=t.document,n=x.create(i,"div"),r=i.createDocumentFragment();n.innerHTML=e;while(n.firstChild){r.appendChild(n.firstChild)}return r},isBlock:function(e){return/<(div|p|ul|ol|table|h[1-6])/i.test(e)},_startModification:function(){var e;var t;var i=this.editor;if(this._inProgress){return}this._inProgress=true;e=i.getRange();t=new n(e,i.body);x.persistScrollTop(i.document);return{range:e,restorePoint:t}},_endModification:function(e){t._finishUpdate(this.editor,e.restorePoint);this.editor._selectionChange();this._inProgress=false},_contentModification:function(e,t){var i=this;var n=i.editor;var r=i._startModification();if(!r){return}e.call(i,n,r.range);setTimeout(function(){t.call(i,n,r.range);i._endModification(r)})},_removeBomNodes:function(e){var t=w.textNodes(e);for(var i=0;i<t.length;i++){t[i].nodeValue=x.stripBom(t[i].nodeValue)||t[i].nodeValue}},_onBeforeCopy:function(e){var t=new k;t.add(e);this._removeBomNodes(e);t.remove(e);this.editor.selectRange(e)},oncopy:function(){this._onBeforeCopy(this.editor.getRange())},oncut:function(){this._onBeforeCopy(this.editor.getRange());this._contentModification(y.noop,y.noop)},_fileToDataURL:function(e){var t=y.Deferred();var i=new FileReader;if(!(e instanceof window.File)&&e.getAsFile){e=e.getAsFile()}i.onload=y.proxy(t.resolve,t);i.readAsDataURL(e);return t.promise()},_triggerPaste:function(e,t){var i={html:e||""};i.html=i.html.replace(/\ufeff/g,"");this.editor.trigger("paste",i);this.paste(i.html,t||{})},_handleImagePaste:function(e){if(!("FileReader"in window)||C.msie&&C.version>10){return}var t=e.clipboardData||e.originalEvent.clipboardData||window.clipboardData||{};var i=t.items||t.files;return this._insertImages(i)},_insertImages:function(e){if(!e){return}var t=y.grep(e,function(e){return/^image\//i.test(e.type)});var i=y.grep(e,function(e){return/^text\/html/i.test(e.type)});if(i.length||!t.length){return}var n=this._startModification();if(!n){return}y.when.apply(y,y.map(t,this._fileToDataURL)).done(y.proxy(function(){var e=Array.prototype.slice.call(arguments);var t=y.map(e,function(e){return'<img src="'+e.target.result+'" />'}).join("");this._triggerPaste(t);this._endModification(n)},this));return true},onpaste:function(d){if(this.editor.body.contentEditable==="false"){return}if(this._handleImagePaste(d)){d.preventDefault();return}this.expandImmutablesIn();this._contentModification(function e(t,i){var n=x.create(t.document,"div",{className:"k-paste-container",innerHTML:"\ufeff"});var r=u.support.browser;var a=t.body;this._decoreateClipboardNode(n,a);a.appendChild(n);if(r.webkit){this._moveToCaretPosition(n,i)}if(r.msie&&r.version<11){d.preventDefault();var o=t.createRange();o.selectNodeContents(n);t.selectRange(o);var s=t.document.body.createTextRange();s.moveToElementText(n);y(a).unbind("paste");s.execCommand("Paste");y(a).bind("paste",y.proxy(this.onpaste,this))}else{var l=t.createRange();l.selectNodeContents(n);t.selectRange(l)}i.deleteContents()},function e(t,i){var n="",r;t.selectRange(i);r=y(t.body).children(".k-paste-container");r.each(function(){var e=this.lastChild;if(e&&x.is(e,"br")){x.remove(e)}n+=this.innerHTML});r.remove();this._triggerPaste(n,{clean:true})})},ondragover:function(e){if(C.msie||C.edge){e.stopPropagation();e.preventDefault()}},ondrop:function(e){if(!("FileReader"in window)){return}var t=(e.originalEvent||e).dataTransfer||{};var i=t.items||t.files;if(this._insertImages(i)){e.preventDefault()}},_decoreateClipboardNode:function(e,t){if(!C.msie&&!C.webkit){return}e=y(e);e.css({borderWidth:"0px",width:"0px",height:"0px",overflow:"hidden",margin:"0",padding:"0"});if(C.msie){var i=y(t.ownerDocument.documentElement);e.css({fontVariant:"normal",fontWeight:"normal",lineSpacing:"normal",lineHeight:"normal",textDecoration:"none"});var n=i.css("color");if(n){e.css("color",n)}var r=i.css("fontFamily");if(r){e.css("fontFamily",r)}var a=i.css("fontSize");if(a){e.css("fontSize",a)}}},_moveToCaretPosition:function(e,t){var i=this;var n=i.editor.body;var r=x.offset(e,n);var a=i._caretOffset(t,n);var o=a.left-r.left;var s=a.top-r.top;var l="translate("+o+"px,"+s+"px)";y(e).css({"-webkit-transform":l,transform:l})},_caretOffset:function(e,t){var i=this.editor;var n=x.create(i.document,"span",{innerHTML:"\ufeff"});var r=e.startContainer;var a;if(e.collapsed){var o=x.isDataNode(r);if(o&&(x.isBom(r)||e.startOffset===0)){x.insertBefore(n,r)}else if(o&&e.startOffset===r.length){x.insertAfter(n,r)}else{e.insertNode(n);a=true}}else{r=r===t?r.childNodes[e.startOffset]:r;x.insertBefore(n,r)}var s=x.offset(n,t);var l=n.previousSibling;var d=n.nextSibling;x.remove(n);if(a&&x.isDataNode(l)&&x.isDataNode(d)&&!x.isBom(l)&&!x.isBom(d)){var u=l.length;d.data=l.data+d.data;e.setStart(d,u);x.remove(l);e.collapse(true);i.selectRange(e)}return s},expandImmutablesIn:function(e){var t=this.editor;if(t&&t.options.immutables){var i=t.body;e=e||t.getRange();u.ui.editor.Immutables.expandImmutablesIn(e);if(e.startContainer===i&&e.startOffset===0){var n=i.ownerDocument;var r=n.createTextNode("\ufeff");i.insertBefore(r,i.childNodes[0]);e.setStartBefore(r)}t.selectRange(e)}},splittableParent:function(e,t){var i,n;if(e){return x.closestEditableOfType(t,["p","ul","ol"])||t.parentNode}i=t.parentNode;n=t.ownerDocument.body;if(x.isInline(i)){while(i.parentNode!=n&&!x.isBlock(i.parentNode)){i=i.parentNode}}return i},paste:function(e,t){var i=this.editor,n,r,a;this.expandImmutablesIn();t=S({clean:false,split:true},t);if(!t.skipCleaners){for(n=0,r=this.cleaners.length;n<r;n++){if(this.cleaners[n].applicable(e)){e=this.cleaners[n].clean(e)}}}if(t.clean){e=e.replace(/(<br>(\s|&nbsp;)*)+(<\/?(div|p|li|col|t))/gi,"$3");e=e.replace(/<(a|span)[^>]*><\/\1>/gi,"")}e=e.replace(/<(a|span|font)([^>]*)> <\/\1>/gi,"<$1$2>&nbsp;</$1>");e=e.replace(/^<li/i,"<ul><li").replace(/li>$/g,"li></ul>");var o=this.isBlock(e);i.focus();var s=i.getRange();s.deleteContents();if(s.startContainer==i.document){s.selectNodeContents(i.body)}var l=new k;var d=l.addCaret(s);var u=this.splittableParent(o,d);var c=false;var f=u!=i.body&&!x.is(u,"td");if(t.split&&f&&(o||x.isInline(u))){s.selectNode(d);w.split(s,u,true);c=true}var h=this.htmlToFragment(e);if(h.firstChild&&h.firstChild.className==="k-paste-container"){var p=[];for(n=0,r=h.childNodes.length;n<r;n++){p.push(h.childNodes[n].innerHTML)}h=this.htmlToFragment(p.join("<br />"))}a=h.childNodes;y(a).filter("table").addClass("k-table").end().find("table").addClass("k-table");y(a).each(function(e,t){if(x.isBlock(t)&&!x.isSelfClosing(t)&&t.innerHTML===""){t.appendChild(i.document.createTextNode("\ufeff"))}});s.insertNode(h);u=this.splittableParent(o,d);if(c){while(d.parentNode!=u){x.unwrap(d.parentNode)}x.unwrap(d.parentNode)}x.normalize(s.commonAncestorContainer);d.style.display="inline";x.restoreScrollTop(i.document);x.scrollTo(d);l.removeCaret(s);var v=s.commonAncestorContainer.parentNode;if(s.collapsed&&x.name(v)=="tbody"||s.collapsed&&x.name(v)=="thead"){s.setStartAfter(y(v).closest("table")[0]);s.collapse(true)}var m=y(s.commonAncestorContainer.parentNode).closest("table");if(m.get(0)){var g=m.parent().contents();var _=g.length-1;var b=g.get(_);while(b.nodeValue!==null&&(b.nodeValue===" "||b.nodeValue==="")){_-=1;b=g.get(_)}if(b===m.get(0)&&!m.parents("table").length){x.insertAfter(x.createEmptyNode(i.document,"p"),m[0])}}i.selectRange(s)}});var r=e.extend({init:function(e){this.options=e||{};this.replacements=[]},clean:function(e,t){var i=this,n=t||i.replacements,r,a;for(r=0,a=n.length;r<a;r+=2){e=e.replace(n[r],n[r+1])}return e}});var a=r.extend({init:function(e){r.fn.init.call(this,e);this.replacements=[/<(\/?)script([^>]*)>/i,"<$1telerik:script$2>"]},applicable:function(e){return!this.options.none&&/<script[^>]*>/i.test(e)}});var o=r.extend({init:function(e){r.fn.init.call(this,e);var t=" ";this.replacements=[/<span\s+class="Apple-tab-span"[^>]*>\s*<\/span>/gi,t,/\t/gi,t,/&nbsp;&nbsp; &nbsp;/gi,t]},applicable:function(e){return/&nbsp;&nbsp; &nbsp;|class="?Apple-tab-span/i.test(e)}});var s=r.extend({init:function(e){r.fn.init.call(this,e);this.junkReplacements=[/<\?xml[^>]*>/gi,"",/<!--(.|\n)*?-->/g,"",/&quot;/g,"'",/<o:p>&nbsp;<\/o:p>/gi,"&nbsp;",/<\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\n)*?<\/(meta|link|style|o:|v:|x:)[^>]*>)?/gi,"",/<\/o>/g,""];this.replacements=this.junkReplacements.concat([/(?:<br>&nbsp;[\s\r\n]+|<br>)*(<\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\s\r\n]+|<br>)*/g,"$1",/<br><br>/g,"<BR><BR>",/<br>(?!\n)/g," ",/<table([^>]*)>(\s|&nbsp;)+<t/gi,"<table$1><t",/<tr[^>]*>(\s|&nbsp;)*<\/tr>/gi,"",/<tbody[^>]*>(\s|&nbsp;)*<\/tbody>/gi,"",/<table[^>]*>(\s|&nbsp;)*<\/table>/gi,"",/<BR><BR>/g,"<br>",/^\s*(&nbsp;)+/gi,"",/(&nbsp;|<br[^>]*>)+\s*$/gi,"",/mso-[^;"]*;?/gi,"",/<(\/?)b(\s[^>]*)?>/gi,"<$1strong$2>",/<(\/?)font(\s[^>]*)?>/gi,this.convertFontMatch,/<(\/?)i(\s[^>]*)?>/gi,"<$1em$2>",/style=(["|'])\s*\1/g,"",/(<br[^>]*>)?\n/g,function(e,t){return t?e:" "}])},convertFontMatch:function(e,t,i){var n=/face=['"]([^'"]+)['"]/i;var r=n.exec(i);var a=i&&r&&r[1];if(t){return"</span>"}else if(a){return'<span style="font-family:'+a+'">'}else{return"<span>"}},applicable:function(e){return/class="?Mso/i.test(e)||/style="[^"]*mso-/i.test(e)||/urn:schemas-microsoft-com:office/.test(e)},stripEmptyAnchors:function(e){return e.replace(/<a([^>]*)>\s*<\/a>/gi,function(e,t){if(!t||t.indexOf("href")<0){return""}return e})},listType:function(e,t){var i=e.innerHTML;var n=x.innerText(e);var r;var a=i.match(/^(?:<span [^>]*texhtml[^>]*>)?<span [^>]*(?:Symbol|Wingdings)[^>]*>([^<]+)/i);var o=a&&a[1];var s=/^[a-z\d]/i.test(o);var l=function(e){return e.replace(/^(?:&nbsp;|[\u00a0\n\r\s])+/,"")};if(a){r=true}i=i.replace(/<\/?\w+[^>]*>/g,"").replace(/&nbsp;/g,"");if(!r&&/^[\u2022\u00b7\u00a7\u00d8o]\u00a0+/.test(i)||r&&/^.\u00a0+/.test(i)||o&&!s&&t){return{tag:"ul",style:this._guessUnorderedListStyle(l(n))}}if(/^\s*\w+[\.\)][\u00a0 ]{2,}/.test(i)){return{tag:"ol",style:this._guessOrderedListStyle(l(n))}}},_convertToLi:function(e){var t;if(e.childNodes.length==1){t=e.firstChild.nodeType===x.nodeTypes.TEXT_NODE?x.innerText(e):e.firstChild.innerHTML.replace(/^\w+[\.\)](&nbsp;)+ /,"");t=this._checkForBullet(t)}else{t=this._getHtmlNoBullet(e)}x.remove(e);return x.create(document,"li",{innerHTML:t})},_checkForBullet:function(e){var t=x.create(document,"p",{innerHTML:e});var i=/^\s*\w+[\.\)]\s+/;if(i.test(t.innerText)){return this._getHtmlNoBullet(t)}return e},_getHtmlNoBullet:function(e){var t,i=x.name(e);x.remove(e.firstChild);if(e.firstChild.nodeType==3){if(/^[ivxlcdm]+\.$/i.test(e.firstChild.nodeValue)){x.remove(e.firstChild)}}if(/^(&nbsp;|\s)+$/i.test(e.firstChild.innerHTML)){x.remove(e.firstChild)}if(i!="p"){t="<"+i+">"+e.innerHTML+"</"+i+">"}else{t=e.innerHTML}return t},_guessUnorderedListStyle:function(e){if(/^[\u2022\u00b7\u00FC\u00D8\u002dv-]/.test(e)){return null}else if(/^o/.test(e)){return"circle"}else{return"square"}},_guessOrderedListStyle:function(e){var t=null;if(!/^\d/.test(e)){t=(/^[a-z]/.test(e)?"lower-":"upper-")+(/^[ivxlcdm]/i.test(e)?"roman":"alpha")}return t},extractListLevels:function(e){var t=/style=['"]?[^'"]*?mso-list:\s?[a-zA-Z]+(\d+)\s[a-zA-Z]+(\d+)\s(\w+)/gi;e=e.replace(t,function(e,t,i){return u.format('data-list="{0}" data-level="{1}" {2}',t,i,e)});return e},_createList:function(e,t){return x.create(document,e,{style:{listStyleType:t}})},lists:function(e){var t=y(e).find(x.blockElements.join(",")),i=-1,n,r={},a,o,s,l,d,u,c,f,h,p,v,m,g=["p","h1","h2","h3","h4","h5","h6"],_=false;for(c=0;c<t.length;c++){f=t[c];m=y(f).data();var b=m.list;n=x.name(f);_=!!y(f).parents("table").length;if(_){continue}var w=this.listType(f,m);h=w&&w.tag;if(!h||g.indexOf(n)<0){if(!f.innerHTML){x.remove(f)}else if(a&&!d){a.appendChild(f)}continue}if(C.msie){continue}p=m.level||parseFloat(f.style.marginLeft||0);var k=h+b;if(!r[p]){r[p]={}}if(!o||o<0){o=p;s=b;l=y(e).find("[data-list='"+s+"']:last")[0];u=this._createList(h,w.style);x.insertBefore(u,f);i=p;r[p][k]=u}d=l===f;v=r[p][k];if(p>i||!v){v=this._createList(h,w.style);r[p][k]=v;a.appendChild(v)}a=this._convertToLi(f);v.appendChild(a);if(d){o=i=-1}else{i=p}}},removeAttributes:function(e){var t=e.attributes,i=t.length;while(i--){if(x.name(t[i])!="colspan"){e.removeAttributeNode(t[i])}}},createColGroup:function(e){var t=e.cells;var i=y(e).closest("table");var n=i.children("colgroup");if(t.length<2){return}else if(n.length){t=n.children();n[0].parentNode.removeChild(n[0])}n=y(y.map(t,function(e){var t=e.width;if(t&&parseInt(t,10)!==0){return u.format('<col style="width:{0}px;"/>',t)}return"<col />"}).join(""));if(!n.is("colgroup")){n=y("<colgroup/>").append(n)}n.prependTo(i)},convertHeaders:function(e){var t=e.cells,i,n=y.map(t,function(e){var t=y(e).children("p").children("strong")[0];if(t&&x.name(t)=="strong"){return t}});if(n.length==t.length){for(i=0;i<n.length;i++){x.unwrap(n[i])}y(e).closest("table").find("colgroup").after("<thead></thead>").end().find("thead").append(e);for(i=0;i<t.length;i++){x.changeTag(t[i],"th")}}},removeParagraphs:function(e){var t,i,n,r,a;for(t=0;t<e.length;t++){this.removeAttributes(e[t]);r=y(e[t]);a=r.children("p");for(i=0,n=a.length;i<n;i++){if(i<n-1){x.insertAfter(x.create(document,"br"),a[i])}x.unwrap(a[i])}}},removeDefaultColors:function(e){for(var t=0;t<e.length;t++){if(/^\s*color:\s*[^;]*;?$/i.test(e[t].style.cssText)){x.unwrap(e[t])}}},removeTextNodes:function(e){var t,i,n,r;for(t=0;t<e.length;t++){n=e[t].childNodes;for(i=0;i<n.length;i++){r=n[i];if(r.nodeType===x.nodeTypes.TEXT_NODE){r.remove()}}}},tables:function(e){var t=y(e).find("table"),i=this,n,r,a,o,s;for(o=0;o<t.length;o++){n=t[o].rows;a=r=n[0];for(s=1;s<n.length;s++){if(n[s].cells.length>a.cells.length){a=n[s]}}i.createColGroup(a);i.convertHeaders(r);i.removeAttributes(t[o]);i.removeParagraphs(t.eq(o).find("td,th"));i.removeDefaultColors(t.eq(o).find("span"));i.removeTextNodes(t.eq(o).find("tr"))}},headers:function(e){var t=y(e).find("p.MsoTitle");for(var i=0;i<t.length;i++){x.changeTag(t[i],"h1")}},removeFormatting:function(e){y(e).find("*").each(function(){y(this).css({fontSize:"",fontFamily:""});if(!this.getAttribute("style")&&!this.style.cssText){this.removeAttribute("style")}})},clean:function(e){var t=this,i;var n=this.options;if(n.none){e=r.fn.clean.call(t,e,this.junkReplacements);e=t.stripEmptyAnchors(e)}else{e=n.msConvertLists?this.extractListLevels(e):e;e=r.fn.clean.call(t,e);e=t.stripEmptyAnchors(e);i=x.create(document,"div",{innerHTML:e});t.headers(i);if(n.msConvertLists){t.lists(i)}t.tables(i);if(n.msAllFormatting){t.removeFormatting(i)}e=i.innerHTML.replace(/(<[^>]*)\s+class="?[^"\s>]*"?/gi,"$1")}return e}});var l=r.extend({init:function(e){r.fn.init.call(this,e);this.replacements=[/\s+class="Apple-style-span[^"]*"/gi,"",/<(div|p|h[1-6])\s+style="[^"]*"/gi,"<$1",/^<div>(.*)<\/div>$/,"$1"]},applicable:function(e){return/class="?Apple-style-span|style="[^"]*-webkit-nbsp-mode/i.test(e)}});var d=r.extend({clean:function(e){var t=x.create(document,"div",{innerHTML:e});t=this.cleanDom(t);return t.innerHTML},cleanDom:function(e){return e}});var c=d.extend({cleanDom:function(e){var t=this.collectTags();y(e).find(t).each(function(){x.unwrap(this)});return e},collectTags:function(){if(this.options.span){return"span"}},applicable:function(){return this.options.span}});var f=d.extend({cleanDom:function(e){var t=this.collectAttr();var i=y(e).find("["+t.join("],[")+"]");i.removeAttr(t.join(" "));return e},collectAttr:function(){if(this.options.css){return["class","style"]}return[]},applicable:function(){return this.options.css}});var h=function(){this.text="";this.add=function(e){this.text+=e}};var p=e.extend({init:function(e){this.separators=e||{text:" ",line:"<br/>"};this.lines=[];this.inlineBlockText=[];this.resetLine()},appendText:function(e){if(e.nodeType===3){e=e.nodeValue}this.textContainer.add(e)},appendInlineBlockText:function(e){this.inlineBlockText.push(e)},flashInlineBlockText:function(){if(this.inlineBlockText.length){this.appendText(this.inlineBlockText.join(" "));this.inlineBlockText=[]}},endLine:function(){this.flashInlineBlockText();this.resetLine()},html:function(){var e=this.separators;var t="";var i=this.lines;this.flashInlineBlockText();for(var n=0,r=i.length,a=r-1;n<r;n++){var o=i[n];for(var s=0,l=o.length,d=l-1;s<l;s++){var u=o[s].text;t+=u;if(s!==d){t+=e.text}}if(n!==a){t+=e.line}}return t},resetLine:function(){this.textContainer=new h;this.line=[];this.line.push(this.textContainer);this.lines.push(this.line)}});var v=e.extend({init:function(e){this.callback=e},enumerate:function(e){if(!e){return}var t=this.callback(e);var i=e.firstChild;if(!t&&i){this.enumerate(i)}this.enumerate(e.nextSibling)}});var m=r.extend({init:function(e){r.fn.init.call(this,e);this.hasText=false;this.enumerator=new v(y.proxy(this.buildText,this))},clean:function(e){var t=x.create(document,"div",{innerHTML:e});return this.cleanDom(t)},cleanDom:function(e){this.separators=this.getDefaultSeparators();this.htmlLines=new p(this.separators);this.enumerator.enumerate(e.firstChild);this.hasText=false;return this.htmlLines.html()},buildText:function(e){if(x.isDataNode(e)){if(x.isEmptyspace(e)){return}this.htmlLines.appendText(e.nodeValue.replace("\n",this.separators.line));this.hasText=true}else if(x.isBlock(e)&&this.hasText){var t=this.actions[x.name(e)]||this.actions.block;return t(this,e)}else if(x.isBr(e)){this.htmlLines.appendText(this.separators.line)}},applicable:function(){var e=this.options;return e.all||e.keepNewLines},getDefaultSeparators:function(){if(this.options.all){return{text:" ",line:" "}}else{return{text:" ",line:"<br/>"}}},actions:{ul:y.noop,ol:y.noop,table:y.noop,thead:y.noop,tbody:y.noop,td:function(e,t){var i=new m({all:true});var n=i.cleanDom(t);e.htmlLines.appendInlineBlockText(n);return true},block:function(e){e.htmlLines.endLine()}}});var g=r.extend({clean:function(e){return this.options.custom(e)},applicable:function(){return typeof this.options.custom==="function"}});S(t,{Clipboard:i,Cleaner:r,ScriptCleaner:a,TabCleaner:o,MSWordFormatCleaner:s,WebkitFormatCleaner:l,HtmlTagsCleaner:c,HtmlAttrCleaner:f,HtmlContentCleaner:m,HtmlTextLines:p,CustomCleaner:g})})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("editor/plugins/keyboard",["editor/command"],e)})(function(){(function(_){var d=window.kendo,e=d.Class,b=d.ui.editor,u=b.RangeUtils,w=b.Dom,c=b.RestorePoint,f=b.Marker,h=d.support.browser,o="<span  class='k-br'>\ufeff</span>",p=_.extend;var i=w.nodeTypes;var k="previousSibling";function v(e,t){return t.startContainer===e&&t.endContainer===e&&t.startOffset===0&&t.endOffset==e.childNodes.length}function y(e,t,i){var n=e?e[t]:null;while(n&&!i(n)){n=n[t]}return n}var m="td,th,caption";var t="table,tbody,thead,tfoot,tr";var g=t+","+m;var x=function(e){return!e.collapsed&&_(e.commonAncestorContainer).is(t)};var C=e.extend({remove:function(e){var t=this;var i=new f;i.add(e,false);var n=u.getAll(e,function(e){return _(e).is(g)});var r=u.documentFromRange(e);var a=i.start;var o=i.end;var s=m.split(",");var l=w.parentOfType(a,s);var d=w.parentOfType(o,s);t._removeContent(a,l,true);t._removeContent(o,d,false);_(n).each(function(e,t){t=_(t);(t.is(m)?t:t.find(m)).each(function(e,t){t.innerHTML="&#65279;"})});if(l&&!a.previousSibling){w.insertBefore(r.createTextNode("\ufeff"),a)}if(d&&!o.nextSibling){w.insertAfter(r.createTextNode("\ufeff"),o)}if(l){e.setStartBefore(a)}else if(n[0]){l=_(n[0]);l=l.is(m)?l:l.find(m).first();if(l.length){e.setStart(l.get(0),0)}}e.collapse(true);w.remove(a);w.remove(o)},_removeContent:function(e,t,i){if(t){var n=i?"nextSibling":"previousSibling",r,a=function(e){while(e&&!e[n]){e=e.parentNode}return e&&_.contains(t,e)?e[n]:null};e=a(e);while(e){r=a(e);w.remove(e);e=r}}}});var n=e.extend({init:function(e){this.editor=e},keydown:function(e){var t=this,i=t.editor,n=i.keyboard,r=n.isTypingKey(e),a=p(_.Event(),e);t.editor.trigger("keydown",a);if(a.isDefaultPrevented()){e.preventDefault();return true}if(!a.isDefaultPrevented()&&r&&!n.isTypingInProgress()){var o=i.getRange();var s=i.body;t.startRestorePoint=new c(o,s);if(x(o)){var l=new C(i);l.remove(o);i.selectRange(o)}if(h.webkit&&!o.collapsed&&v(s,o)){s.innerHTML=""}if(i.immutables&&b.Immutables.immutablesContext(o)){var d=new b.BackspaceHandler(i);d.deleteSelection(o)}n.startTyping(function(){t.endRestorePoint=b._finishUpdate(i,t.startRestorePoint)});return true}return false},keyup:function(e){var t=this.editor.keyboard;this.editor.trigger("keyup",e);if(t.isTypingInProgress()){t.endTyping();return true}return false}});var r=e.extend({init:function(e){this.editor=e},_addCaret:function(e){var t=w.create(this.editor.document,"a");if(!d.support.browser.chrome&&e.firstChild&&e.firstChild.nodeType===i.ELEMENT_NODE){e=e.firstChild}w.insertAt(e,t,0);w.stripBomNode(t.previousSibling);w.stripBomNode(t.nextSibling);return t},_restoreCaret:function(e){var t=this.editor.createRange();if(!e.nextSibling&&w.isDataNode(e.previousSibling)){t.setStart(e.previousSibling,e.previousSibling.length)}else{t.setStartAfter(e)}t.collapse(true);this.editor.selectRange(t);w.remove(e)},_handleDelete:function(e){var t=e.endContainer;var i=w.closestEditableOfType(t,w.blockElements);if(i&&b.RangeUtils.isEndOf(e,i)){var n=w.next(i);if(!n||w.name(n)!="p"){return false}var r=this._addCaret(n);this._merge(i,n);this._restoreCaret(r);return true}return false},_cleanBomBefore:function(e){var t=e.startOffset;var i=e.startContainer;var n=i.nodeValue;var r=0;while(t-r>=0&&n[t-r-1]=="\ufeff"){r++}if(r>0){i.deleteData(t-r,r);e.setStart(i,Math.max(0,t-r));e.collapse(true);this.editor.selectRange(e)}},_handleBackspace:function(e){var t=e.startContainer;var i=w.closestEditableOfType(t,["li"]);var n=w.closestEditableOfType(t,"p,h1,h2,h3,h4,h5,h6".split(","));var r=this.editor;var a;if(w.isDataNode(t)){if(e.collapsed&&/^\s[\ufeff]+$/.test(t.nodeValue)){e.setStart(t,0);e.setEnd(t,t.length);r.selectRange(e);return false}this._cleanBomBefore(e)}a=y(n,k,function(e){return!w.htmlIndentSpace(e)});if(e.collapsed&&e.startOffset!==e.endOffset&&e.startOffset<0){e.startOffset=0;e.endOffset=0;r.selectRange(e)}var o=i&&b.RangeUtils.isStartOf(e,i);var s=i&&_(i).index();var l=o&&s>0;if(l){n=i;a=w.prev(i)}if(n&&a&&w.is(a,"table")&&b.RangeUtils.isStartOf(e,n)){if(n.innerText===""){n.innerHTML="\ufeff"}return true}if(b.RangeUtils.isStartOf(e,n)&&parseInt(n.style.marginLeft,10)>0){r.exec("outdent");return true}if(n&&a&&b.RangeUtils.isStartOf(e,n)||l){var d=this._addCaret(n);this._merge(a,n);this._restoreCaret(d);return true}if(o&&s===0){var u=i.firstChild;if(!u){i.innerHTML=b.emptyElementContent;u=i.firstChild}var c=new b.ListFormatter(w.name(i.parentNode),"p");e.selectNodeContents(i);c.toggle(e);if(w.insignificant(u)){e.setStartBefore(u)}else{e.setStart(u,0)}r.selectRange(e);return true}var f=t.childNodes[e.startOffset-1];var h=e;var p=f&&w.closestEditableOfType(f,["a"]);var v=y(f||t,k,function(e){return!w.isDataNode(e)||!w.isBom(e)&&e.length>0});if(p||(e.startOffset===0||f)&&w.is(v,"a")){p=p||v;h=r.createRange();h.setStart(p,p.childNodes.length);h.collapse(true)}p=p||w.closestEditableOfType(f||h.startContainer,["a"]);var m=p&&b.RangeUtils.isEndOf(h,p);if(m){var g=new b.UnlinkCommand({range:h,body:r.body,immutables:!!r.immutables});r.execCommand(g);r._selectionChange()}return false},_handleSelection:function(e){var t=e.commonAncestorContainer;var i=w.closest(t,"table");var n=b.emptyElementContent;var r=this.editor;var a;if(x(e)){var o=new C(r);o.remove(e);r.selectRange(e);return true}var s=new f;s.add(e,false);if(e.commonAncestorContainer===r.body){this._surroundFullyContent(s,e)}if(r.immutables){this._handleImmutables(s)}this._surroundFullySelectedAnchor(s,e);e.setStartAfter(s.start);e.setEndBefore(s.end);var l=e.startContainer;var d=e.endContainer;e.deleteContents();if(d.tagName.toLocaleLowerCase()==="li"&&w.emptyNode(d)){e.selectNode(d);e.deleteContents()}if(i&&_(i).text()===""){e.selectNode(i);e.deleteContents()}t=e.commonAncestorContainer;if(w.name(t)==="p"&&t.innerHTML===""){t.innerHTML=n;e.setStart(t,0)}this._join(l,d);w.insertAfter(r.document.createTextNode("\ufeff"),s.start);s.remove(e);l=e.startContainer;if(w.name(l)=="tr"){l=l.childNodes[Math.max(0,e.startOffset-1)];e.setStart(l,w.getNodeLength(l))}e.collapse(true);r.selectRange(e);a=l.parentElement||l.parentNode;if(w.isDataNode(l)&&!w.emptyNode(a)){this._cleanBomBefore(e)}return true},_handleImmutables:function(e){var t=b.Immutables.immutableParent;var i=t(e.start);var n=t(e.start);if(i){w.insertBefore(e.start,i)}if(n){w.insertAfter(e.end,n)}if(i){w.remove(i)}if(n&&n.parentNode){w.remove(n)}},_surroundFullyContent:function(e,t){var i=t.commonAncestorContainer.children,n=i[0],r=i[i.length-1];this._moveMarker(e,t,n,r)},_surroundFullySelectedAnchor:function(e,t){var i=e.start,n=_(i).closest("a").get(0),r=e.end,a=_(r).closest("a").get(0);this._moveMarker(e,t,n,a)},_moveMarker:function(e,t,i,n){var r=e.start,a=e.end;if(i&&u.isStartOf(t,i)){w.insertBefore(r,i)}if(n&&u.isEndOf(t,n)){w.insertAfter(a,n)}},_root:function(e){while(e&&w.name(e)!="body"&&e.parentNode&&w.name(e.parentNode)!="body"){e=e.parentNode}return e},_join:function(e,t){e=this._root(e);t=this._root(t);if(e!=t&&w.is(t,"p")){this._merge(e,t)}},_merge:function(e,t){w.removeTrailingBreak(e);while(e&&t.firstChild){if(e.nodeType==1){e=w.list(e)?e.children[e.children.length-1]:e;if(e){e.appendChild(t.firstChild)}}else if(e.nodeType===i.TEXT_NODE){this._mergeWithTextNode(e,t.firstChild)}else{e.parentNode.appendChild(t.firstChild)}}w.remove(t)},_mergeWithTextNode:function(e,t){if(e&&e.nodeType===i.TEXT_NODE){if(e.nextSibling&&this._isCaret(e.nextSibling)){w.insertAfter(t,e.nextSibling)}else{w.insertAfter(t,e)}}},_isCaret:function(e){return _(e).is("a")},keydown:function(e){var t,i;var n=this.editor;var r=n.getRange();var a=e.keyCode;var o=d.keys;var s=a===o.BACKSPACE;var l=a==o.DELETE;if(n.immutables&&n.immutables.keydown(e,r)){return}if((s||l)&&!r.collapsed){t="_handleSelection"}else if(s){t="_handleBackspace"}else if(l){t="_handleDelete"}if(!t){return}i=new c(r,n.body);if(this[t](r)){e.preventDefault();b._finishUpdate(n,i)}},deleteSelection:function(e){this._handleSelection(e)},keyup:_.noop});var a=e.extend({init:function(e){this.editor=e;this.systemCommandIsInProgress=false},createUndoCommand:function(){this.startRestorePoint=this.endRestorePoint=b._finishUpdate(this.editor,this.startRestorePoint)},changed:function(){if(this.startRestorePoint){return this.startRestorePoint.html!=this.editor.body.innerHTML}return false},keydown:function(e){var t=this,i=t.editor,n=i.keyboard;if(n.isModifierKey(e)){if(n.isTypingInProgress()){n.endTyping(true)}t.startRestorePoint=new c(i.getRange(),i.body);return true}if(n.isSystem(e)){t.systemCommandIsInProgress=true;if(t.changed()){t.systemCommandIsInProgress=false;t.createUndoCommand()}return true}return false},keyup:function(){var e=this;if(e.systemCommandIsInProgress&&e.changed()){e.systemCommandIsInProgress=false;e.createUndoCommand();return true}return false}});var s=e.extend({init:function(e){this.editor=e},keydown:function(e){if(!h.webkit||e.isDefaultPrevented()||!(e.ctrlKey&&e.keyCode==65&&!e.altKey&&!e.shiftKey)){return}if(this.editor.options.immutables){this._toSelectableImmutables()}this._selectEditorBody()},_selectEditorBody:function(){var e=this.editor;var t=e.getRange();t.selectNodeContents(e.body);setTimeout(function(){e.selectRange(t)})},_toSelectableImmutables:function(){var e=this.editor,t=e.body,i=b.Immutables.immutable,n=w.emptyTextNode,r=t.firstChild,a=t.lastChild;while(n(r)){r=r.nextSibling}while(n(a)){a=a.previousSibling}if(r&&i(r)){_(o).prependTo(t)}if(a&&i(a)){_(o).appendTo(t)}},keyup:_.noop});var l=e.extend({init:function(e){this.handlers=e;this.typingInProgress=false},isCharacter:function(e){return e>=48&&e<=90||e>=96&&e<=111||e>=186&&e<=192||e>=219&&e<=222||e==229},toolFromShortcut:function(e,t){var i=String.fromCharCode(t.keyCode),n,r,a=this._getShortcutModifier(t,navigator.platform);for(n in e){r=_.extend({ctrl:false,alt:false,shift:false},e[n].options);if((r.key==i||r.key==t.keyCode)&&r.ctrl==a&&r.alt==t.altKey&&r.shift==t.shiftKey){return n}}},_getShortcutModifier:function(e,t){var i=t.toUpperCase().indexOf("MAC")>=0;return i?e.metaKey:e.ctrlKey},toolsFromShortcut:function(e,t){var i=String.fromCharCode(t.keyCode),n,r,a,o=[];var s=function(e){return e==i||e==t.keyCode||e==t.charCode};for(n in e){r=_.extend({ctrl:false,alt:false,shift:false},e[n].options);a=_.isArray(r.key)?_.grep(r.key,s).length>0:s(r.key);if(a&&r.ctrl==t.ctrlKey&&r.alt==t.altKey&&r.shift==t.shiftKey){o.push(e[n])}}return o},isTypingKey:function(e){var t=e.keyCode;return this.isCharacter(t)&&!e.ctrlKey&&!e.altKey||t==32||t==13||t==8||t==46&&!e.shiftKey&&!e.ctrlKey&&!e.altKey},isModifierKey:function(e){var t=e.keyCode;return t==17&&!e.shiftKey&&!e.altKey||t==16&&!e.ctrlKey&&!e.altKey||t==18&&!e.ctrlKey&&!e.shiftKey},isSystem:function(e){return e.keyCode==46&&e.ctrlKey&&!e.altKey&&!e.shiftKey},startTyping:function(e){this.onEndTyping=e;this.typingInProgress=true},stopTyping:function(){if(this.typingInProgress&&this.onEndTyping){this.onEndTyping()}this.typingInProgress=false},endTyping:function(e){var t=this;t.clearTimeout();if(e){t.stopTyping()}else{t.timeout=window.setTimeout(_.proxy(t.stopTyping,t),1e3)}},isTypingInProgress:function(){return this.typingInProgress},clearTimeout:function(){window.clearTimeout(this.timeout)},notify:function(e,t){var i,n=this.handlers;for(i=0;i<n.length;i++){if(n[i][t](e)){break}}},keydown:function(e){this.notify(e,"keydown")},keyup:function(e){this.notify(e,"keyup")}});p(b,{TypingHandler:n,SystemHandler:a,BackspaceHandler:r,SelectAllHandler:s,Keyboard:l})})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("editor/plugins/exportpdf",["editor/command"],e)})(function(){(function(e){var t=window.kendo,i=t.ui.editor,n=i.Command,r=i.EditorUtils,a=r.registerTool,o=i.Tool,s=i.ToolTemplate,l=e.extend;var d=n.extend({init:function(e){this.async=true;n.fn.init.call(this,e)},exec:function(){var e=this;var t=e.lockRange(true);var i=e.editor;i._destroyResizings();i.saveAsPDF().then(function(){e.releaseRange(t);i._initializeColumnResizing();i._initializeRowResizing();i._initializeTableResizing()})}});l(i,{ExportPdfCommand:d});a("pdf",new o({command:d,template:new s({template:r.buttonTemplate,title:"Export PDF"})}))})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("editor/plugins/print",["editor/command"],e)})(function(){(function(e){var t=window.kendo,i=t.ui.editor,n=i.Command,r=i.EditorUtils,a=r.registerTool,o=i.Tool,s=i.ToolTemplate,l=e.extend;var d=n.extend({init:function(e){n.fn.init.call(this,e);this.managesUndoRedo=true},exec:function(){var e=this.editor;if(t.support.browser.msie){e.document.execCommand("print",false,null)}else if(e.window.print){e.window.print()}}});l(i,{PrintCommand:d});a("print",new o({command:d,template:new s({template:r.buttonTemplate,title:"Print"})}))})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("editor/plugins/formatpainter",["editor/command"],e)})(function(){(function(e){var t=window.kendo,i=t.ui.editor,n=i.Tool,r=i.Command,a=i.ToolTemplate,o=i.EditorUtils,w=i.Dom,s=i.RangeUtils,l=o.registerTool;var d=r.extend({init:function(e){r.fn.init.call(this,e)},exec:function(){var e=this.lockRange(true);this.inlineStyles=[];this.blockStyles=[];this.collectStyles(e);this.editor.inlineStyles=this.inlineStyles;this.editor.blockStyles=this.blockStyles;this.releaseRange(e)},collectStyles:function(e){var t=s.nodes(e);var i;if(t.length===1){i=t[0].parentNode}else{i=e.startContainer}while(i&&!w.is(i,"body")&&i.getAttribute("data-role")!=="editor"){if(w.isBlock(i)){this.populateStyles(i,"blockStyles");if(w.is(i,"li")){i=i.parentNode}else{i=null}}else{this.populateStyles(i,"inlineStyles");i=i.parentNode}}},populateStyles:function(e,t){var i=e.style;var n=e.attributes;var r={tags:[e.tagName],attr:{style:{}}};var a,o,s,l,d;for(d=0;i&&d<i.length;d++){o=i[d];a=i[o];r.attr.style[o]=a}for(d=0;n&&d<n.length;d++){s=n[d].nodeName;l=n[d].nodeValue;if(s==="style"){continue}else if(s==="class"){r.attr.className=l}else{r.attr[s]=l}}this[t].push(r)}});var u=r.extend({init:function(e){r.fn.init.call(this,e)},exec:function(){var e=this.lockRange(true);var t=s.getMarkers(e);var i=this.editor;var n=i.inlineStyles;var r=i.blockStyles;var a;if((!n||n.length===0)&&(!r||r.length===0)){return}if(t.length===3){this.marker.removeCaret(e);this.marker.caret=null}this.removeEmptyElementsFromRange(e);a=s.nodes(e);this.cleanInlineParents(a);w.normalize(e.commonAncestorContainer);if(t.length===2){e.setStartAfter(t[0]);e.setEndBefore(t[1])}else{e.setStartBefore(a[0]);e.setEndAfter(a[0])}a=s.nodes(e);if(a&&r&&r.length){this.applyBlockStyles(a,r)}if(a&&n&&n.length){this.applyInlineStyles(a,n)}this.releaseRange(e)},removeEmptyElementsFromRange:function(e){var t=function(e){return w.isInline(e)&&!e.firstChild&&!w.isMarker(e)};var i,n;i=s.getAll(e,t);if(i&&i.length>0){for(n=0;n<i.length;n++){i[n].parentNode.removeChild(i[n])}}},cleanInlineParents:function(e){var t,i,n,r,a,o,s;for(t=0;t<e.length;t++){i=e[t];n=i.parentNode;if(this.immutableParent(i)){continue}while(n&&w.isInline(n)){r=n.childNodes;for(a=0;a<r.length;a++){o=r[a];if(!w.isMarker(o)&&o!==i){s=n.cloneNode(true);s.innerHTML="";w.wrap(o,s)}}w.unwrap(n);n=i.parentNode}}},applyBlockStyles:function(e,t){var i=t[0].tags[0];var n=t[0].attr;var r=this.editor.document;var a,o,s,l,d,u;var c,f,h,p,v,m,g,_,b;for(a=0,o=e.length;a<o;a++){s=e[a];if(w.isWhitespace(s)||this.immutableParent(s)){continue}d=w.blockParentOrBody(s);if(d.tagName!=="BODY"&&d.tagName!==i){if(d.tagName!=="LI"&&d.tagName!=="TD"&&d.tagName!=="TH"){c=[];f=[];h=s.previousSibling;p=s.nextSibling;while(h){if(!w.isMarker(h)){c.push(h)}h=h.previousSibling}if(c.length){v=d.cloneNode(true);v.innerHTML="";w.insertBefore(v,c[0]);for(_=0;_<c.length;_++){g=c[_];w.insertAt(v,g,0)}}while(p){if(!w.isMarker(p)){f.push(p)}p=p.nextSibling}if(f.length){m=d.cloneNode(true);m.innerHTML="";w.insertBefore(m,f[0]);for(_=0;_<f.length;_++){g=f[_];m.appendChild(g)}}w.unwrap(d)}l=w.create(r,i,n);w.wrap(s,l)}else if(d.tagName===i){w.attr(d,n)}}if(d&&t.length===2&&d.tagName!=="LI"&&i==="LI"){b=[];while(w.is(l,"li")){b.push(l);l=w.prev(l)}u=w.create(r,t[1].tags[0],t[1].attr);w.insertBefore(u,b[b.length-1]);u.appendChild(b[0]);for(a=1,o=b.length;a<o;a++){w.insertBefore(b[a],u.firstChild)}}else if(d&&t.length===2&&d.tagName!=="LI"){u=w.create(r,t[1].tags[0],t[1].attr);w.wrap(l,u)}},applyInlineStyles:function(e,t){var i=this.editor.document;var n,r,a,o,s,l;for(o=0;o<t.length;o++){n=t[o];r=w.create(i,n.tags[0],n.attr);if(a){r.appendChild(a)}a=r}if(a){for(o=0;o<e.length;o++){l=e[o];if(w.isWhitespace(l)||this.immutableParent(l)){continue}s=a.cloneNode(true);w.insertBefore(s,l);while(s.children&&s.children.length){s=s.children[0]}s.appendChild(l)}}},immutables:function(){return this.editor&&this.editor.options.immutables},immutableParent:function(e){return this.immutables()&&i.Immutables.immutableParent(e)}});var c=n.extend({init:function(e){n.fn.init.call(this,e)},command:function(e){return new d(e)}});var f=n.extend({init:function(e){n.fn.init.call(this,e)},command:function(e){return new u(e)}});e.extend(i,{CopyFormatCommand:d,ApplyFormatCommand:u,CopyFormatTool:c,ApplyFormatTool:f});l("copyFormat",new c({template:new a({template:o.buttonTemplate,title:"Copy format"})}));l("applyFormat",new f({template:new a({template:o.buttonTemplate,title:"Apply format"})}))})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("editor/resizing/resizing-utils",["editor/main"],e)})(function(){(function(t,e){var i=window;var n=i.Math;var r=n.min;var a=n.max;var o=i.parseFloat;var s=t.jQuery;var l=s.extend;var d=t.ui.editor;var u="%";var c="px";var f=/(\d+)(\.?)(\d*)%/;var h=/(\d+)(\.?)(\d*)px/;var p="string";function v(e){var t=e.value;var i=e.min;var n=e.max;return a(r(o(t),o(n)),o(i))}function m(e){if(e&&!s(e).is("body")&&e.scrollHeight>e.clientHeight){return t.support.scrollbar()}return 0}function g(e,t){if(_(e)){return o(e)}else{return o(e)/t*100}}function _(e){return typeof e===p&&f.test(e)}function b(e){return typeof e===p&&h.test(e)}function w(e){return o(e)+u}function k(e){return o(e)+c}var y={constrain:v,getScrollBarWidth:m,calculatePercentageRatio:g,inPercentages:_,inPixels:b,toPercentages:w,toPixels:k};l(d,{ResizingUtils:y})})(window.kendo)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("editor/resizing/table-element-resizing",["editor/main","kendo.resizable","editor/resizing/resizing-utils"],e)})(function(){(function(a,e){var s=a.jQuery;var n=s.extend;var t=s.noop;var i=s.proxy;var r=a.ui.editor;var o=a.Class;var l="keydown";var d="mousedown";var u="mouseenter";var c="mouseleave";var f="mousemove";var h="mouseup";var p=",";var v=".";var m=":last-child";var g="table";var _=o.extend({init:function(e,t){var i=this;i.options=n({},i.options,t);i.options.tags=s.isArray(i.options.tags)?i.options.tags:[i.options.tags];if(s(e).is(g)){i.element=e;i._attachEventHandlers()}},destroy:function(){var e=this;var t=e.options.eventNamespace;if(e.element){s(e.element).off(t);e.element=null}s(e.options.rootElement).off(l+t);e._destroyResizeHandle()},options:{tags:[],min:0,rootElement:null,eventNamespace:"",rtl:false,handle:{dataAttribute:"",height:0,width:0,classNames:{},template:""}},_attachEventHandlers:function(){var e=this;var t=e.options;s(e.element).on(f+t.eventNamespace,t.tags.join(p),i(e.detectElementBorderHovering,e))},resizingInProgress:function(){var e=this;var t=e._resizable;if(t){return!!t.resizing}return false},resize:t,detectElementBorderHovering:function(e){var t=this;var i=t.options;var n=i.handle;var r=s(e.currentTarget);var a=t.resizeHandle;var o=n.dataAttribute;if(!t.resizingInProgress()){if(!r.is(m)&&t.elementBorderHovered(r,e)){if(a){if(a.data(o)&&a.data(o)!==r[0]){t.showResizeHandle(r,e)}}else{t.showResizeHandle(r,e)}}else{if(a){t._destroyResizeHandle()}}}},elementBorderHovered:t,showResizeHandle:function(e,t){var i=this;if(t.buttons!==0){return}i._initResizeHandle();i.setResizeHandlePosition(e);i.setResizeHandleDimensions();i.setResizeHandleDataAttributes(e[0]);i._attachResizeHandleEventHandlers();i._initResizable(e);i._hideResizeMarker();i.resizeHandle.show()},_initResizeHandle:function(){var e=this;var t=e.options;e._destroyResizeHandle();e.resizeHandle=s(t.handle.template).appendTo(t.rootElement)},setResizeHandlePosition:t,setResizeHandleDimensions:t,setResizeHandleDataAttributes:function(e){var t=this;t.resizeHandle.data(t.options.handle.dataAttribute,e)},_attachResizeHandleEventHandlers:function(){var e=this;var t=e.options;var i=t.eventNamespace;var n=t.handle.classNames.marker;var r=e.resizeHandle;e.resizeHandle.on(d+i,function(){r.find(v+n).show()}).on(h+i,function(){r.find(v+n).hide()})},_hideResizeMarker:function(){var e=this;e.resizeHandle.find(v+e.options.handle.classNames.marker).hide()},_destroyResizeHandle:function(){var e=this;if(e.resizeHandle){e._destroyResizable();e.resizeHandle.off(e.options.eventNamespace).remove();e.resizeHandle=null}},_initResizable:function(e){var t=this;if(!t.resizeHandle){return}t._destroyResizable();t._resizable=new a.ui.Resizable(e,{draggableElement:t.resizeHandle[0],start:i(t.onResizeStart,t),resize:i(t.onResize,t),resizeend:i(t.onResizeEnd,t)})},_destroyResizable:function(){var e=this;if(e._resizable){e._resizable.destroy();e._resizable=null}},onResizeStart:function(){this._disableKeyboard()},onResize:function(e){this.setResizeHandleDragPosition(e)},setResizeHandleDragPosition:t,onResizeEnd:function(e){var t=this;t.resize(e);t._destroyResizeHandle();t._enableKeyboard()},_enableKeyboard:function(){var e=this.options;s(e.rootElement).off(l+e.eventNamespace)},_disableKeyboard:function(){var e=this.options;s(e.rootElement).on(l+e.eventNamespace,function(e){e.preventDefault()})},_forceResizing:function(e){var t=this._resizable;if(t&&t.userEvents){t.userEvents._end(e)}}});var b=o.extend({create:function(n,r){var a=this;var o=r.name;var e=r.eventNamespace;s(n.body).on(u+e,g,function(e){var t=e.currentTarget;var i=n[o];e.stopPropagation();if(i){if(i.element!==t&&!i.resizingInProgress()){a._destroyResizing(n,r);a._initResizing(n,t,r)}}else{a._initResizing(n,t,r)}}).on(c+e,g,function(e){var t;var i=n[o];e.stopPropagation();if(i&&!i.resizingInProgress()&&!i.resizeHandle){t=s(i.element).parents(g)[0];if(t){a._destroyResizing(n,r);a._initResizing(n,t,r)}}}).on(c+e,function(){var e=n[o];if(e&&!e.resizingInProgress()){a._destroyResizing(n,r)}}).on(h+e,function(e){var t=n[o];var i;if(t&&t.resizingInProgress()){i=s(e.target).parents(g)[0];if(i){t._forceResizing(e);a._destroyResizing(n,r);a._initResizing(n,i,r)}}})},dispose:function(e,t){s(e.body).off(t.eventNamespace)},_initResizing:function(e,t,i){var n=i.name;var r=i.type;e[n]=new r(t,{rtl:a.support.isRtl(e.element),rootElement:e.body})},_destroyResizing:function(e,t){var i=t.name;if(e[i]){e[i].destroy();e[i]=null}}});b.current=new b;_.create=function(e,t){b.current.create(e,t)};_.dispose=function(e,t){b.current.dispose(e,t)};n(r,{TableElementResizing:_})})(window.kendo)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("editor/resizing/column-resizing",["editor/main","editor/resizing/resizing-utils","editor/resizing/table-element-resizing","editor/dom"],e)})(function(){(function(g,e){var t=window;var i=t.Math;var s=i.abs;var _=g.jQuery;var n=_.extend;var r=g.ui.editor;var f=r.Dom;var a=r.TableElementResizing;var o=r.ResizingUtils;var b=o.constrain;var l=o.calculatePercentageRatio;var w=o.getScrollBarWidth;var d=o.inPercentages;var u=o.toPercentages;var c=o.toPixels;var k=g._outerWidth;var h=".kendoEditorColumnResizing";var p="k-column-resize-handle";var v="k-column-resize-marker";var y="body";var m="tbody";var x="thead";var C="td";var S="th";var T="tr";var D="col-index";var A=",";var E="width";var I=a.extend({options:{tags:[C,S],min:20,rootElement:null,eventNamespace:h,rtl:false,handle:{dataAttribute:"column",width:10,height:0,classNames:{handle:p,marker:v},template:'<div class="k-column-resize-handle-wrapper" unselectable="on" contenteditable="false">'+'<div class="'+p+'">'+'<div class="'+v+'"></div>'+"</div>"+"</div>"}},elementBorderHovered:function(e,t){var i=this;var n=i.options;var r=n.handle.width;var a=e.offset().left+(n.rtl?0:k(e));var o=t.clientX+_(e[0].ownerDocument).scrollLeft();if(o>a-r&&o<a+r){return true}else{return false}},setResizeHandlePosition:function(e){var t=this;var i=_(t.element.tHead||t.element.tBodies[0]);var n=t.options;var r=n.rtl;var a=n.handle.width;var o=_(n.rootElement);var s=o.is(y)?0:o.scrollTop();var l=o.is(y)?0:g.scrollLeft(o);var d=r?0:k(e);var u=r?w(o[0]):0;var c=e.offset().left-(o.offset().left+parseFloat(o.css("borderLeftWidth")))-parseFloat(e.css("marginLeft"));var f=i.offset().top-(o.offset().top+parseFloat(o.css("borderTopWidth")))-parseFloat(i.css("marginTop"));var h=g.support.browser;if(r&&(h.mozilla||h.webkit&&h.version>=85)){l=l*-1}t.resizeHandle.css({top:f+s,left:c+d+(l-u)-a/2,position:"absolute"})},setResizeHandleDimensions:function(){var e=this;var t=_(e.element).children(x);var i=_(e.element).children(m);var n=t.length>0?t.height()+i.height():i.height();e.resizeHandle.css({width:e.options.handle.width,height:n})},setResizeHandleDragPosition:function(e){var t=this;var i=_(_(e.currentTarget).data(t.options.handle.dataAttribute));var n=t.options;var r=_(n.rootElement);var a=n.handle?n.handle.width:0;var o=n.min;var s=n.rtl;var l=k(i);var d=i.offset().left-(r.offset().left+parseFloat(r.css("borderLeftWidth")))-parseFloat(i.css("marginLeft"));var u=k(i.next());var c=_(t.resizeHandle);var f=r.is(y)?0:g.scrollLeft(r);var h=s?w(r[0]):0;var p=c.offset().left-(r.offset().left+parseFloat(r.css("borderLeftWidth")))-parseFloat(c.css("marginLeft"));var v=g.support.browser;if(s&&(v.mozilla||v.webkit&&v.version>=85)){f=f*-1}var m=b({value:p+(f-h)+e.x.delta,min:d+(f-h)-(s?u:0)+o,max:d+l+(f-h)+(s?0:u)-a-o});c.css({left:m})},resize:function(e){var t=this;var i=_(_(e.currentTarget).data(t.options.handle.dataAttribute));var n=t.options;var r=n.rtl?-1:1;var a=n.min;var o=r*e.x.initialDelta;var s;var l;var d;var u;var c;f.reMapTableColumns(t.element,D);u=parseInt(i.attr(D),10);if(i.prop("colSpan")>1){i=_(t.element).find("["+D+"="+(u+i.prop("colSpan")-1)+"]").eq(0);u=parseInt(i.attr(D),10)}c=_(t.element).find("["+D+"="+(u+1)+"]:not([colspan])");t._setTableComputedWidth();t._setColumnsComputedWidth();d=k(i);l=k(c);s=b({value:d+o,min:a,max:d+l-a});t._resizeColumn(i[0],s);t._resizeTopAndBottomColumns(i[0],s);t._resizeAdjacentColumns(parseInt(i.attr(D),10),l,d,d-s);f.clearTableMappings(t.element,D)},_setTableComputedWidth:function(){var e=this.element;if(e.style[E]===""){e.style[E]=c(k(_(e)))}},_setColumnsComputedWidth:function(){var e=this;var t=_(e.element.tHead||e.element.tBodies[0]);var i=k(t);var n=t.children(T).children(C);var r=n.length;var a=n.map(function(){return k(_(this))});var o;for(o=0;o<r;o++){if(d(n[o].style[E])){n[o].style[E]=u(l(a[o],i))}else{n[o].style[E]=c(a[o])}}},_resizeTopAndBottomColumns:function(t,e){var i=this;var n=_(t).attr(D);var r=_(i.element).children(m+A+x).children(T).children(i.options.tags.join(A)).filter(function(){var e=this;return _(e).attr(D)===n&&e!==t});var a=r.length;var o;for(o=0;o<a;o++){i._resizeColumn(r[o],e)}},_resizeColumn:function(e,t){var i=_(this.element.tHead||this.element.tBodies[0]);if(d(e.style[E])){e.style[E]=u(l(t,k(i)))}else{e.style[E]=c(t)}},_resizeAdjacentColumns:function(e,t,i,n){var r=this;var a=_(r.element).children(m+A+x).children(T).children(r.options.tags.join(A)).filter(function(){return parseInt(_(this).attr(D),10)===e+1});var o=a.length;var s;for(s=0;s<o;s++){r._resizeAdjacentColumn(a[s],t,i,n)}},_resizeAdjacentColumn:function(e,t,i,n){var r=this;var a=r.options.min;var o;o=b({value:t+n,min:a,max:s(i+t-a)});r._resizeColumn(e,o)}});I.create=function(e){a.create(e,{name:"columnResizing",type:I,eventNamespace:h})};I.dispose=function(e){a.dispose(e,{eventNamespace:h})};n(r,{ColumnResizing:I})})(window.kendo)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("editor/resizing/row-resizing",["editor/main","editor/resizing/resizing-utils","editor/resizing/table-element-resizing"],e)})(function(){(function(c,e){var t=window.Math;var h=t.abs;var m=c.jQuery;var i=m.extend;var n=c.ui.editor;var r=n.TableElementResizing;var a=n.ResizingUtils;var f=a.getScrollBarWidth;var g=a.constrain;var d=a.calculatePercentageRatio;var p=a.inPercentages;var u=a.toPercentages;var v=a.toPixels;var _=c._outerHeight;var o=".kendoEditorRowResizing";var s="k-row-resize-handle";var l="k-row-resize-marker-wrapper";var b="k-row-resize-marker";var w="body";var k="tr";var y="tbody";var x="thead";var C=",";var S="height";var T=r.extend({options:{tags:[k],min:20,rootElement:null,eventNamespace:o,rtl:false,handle:{dataAttribute:"row",width:0,height:10,classNames:{handle:s,marker:b},template:'<div class="k-row-resize-handle-wrapper" unselectable="on" contenteditable="false">'+'<div class="'+s+'">'+'<div class="'+l+'">'+'<div class="'+b+'"></div>'+"</div>"+"</div>"+"</div>"}},elementBorderHovered:function(e,t){var i=this;var n=i.options.handle[S];var r=e.offset().top+_(e);var a=t.clientY+m(e[0].ownerDocument).scrollTop();if(a>r-n&&a<r+n){return true}else{return false}},setResizeHandlePosition:function(e){var t=this;var i=t.options;var n=i.handle[S];var r=m(i.rootElement);var a=r.is(w)?0:r.scrollTop();var o=r.is(w)?0:c.scrollLeft(r);var s=i.rtl?f(r[0]):0;var l=e.offset().left-(r.offset().left+parseFloat(r.css("borderLeftWidth")))-parseFloat(e.css("marginLeft"));var d=e.offset().top-(r.offset().top+parseFloat(r.css("borderTopWidth")))-parseFloat(e.css("marginTop"));var u=c.support.browser;if(i.rtl&&(u.mozilla||u.webkit&&u.version>=85)){o=o*-1}t.resizeHandle.css({top:d+_(e)+a-n/2,left:l+(o-s),position:"absolute"})},setResizeHandleDimensions:function(){var e=this;var t=m(e.element.tHead||e.element.tBodies[0]);e.resizeHandle.css({width:t.width(),height:e.options.handle[S]})},setResizeHandleDragPosition:function(e){var t=this;var i=t.options;var n=i.min;var r=m(t.element).children(x);var a=m(t.element).children(y);var o=r.length>0?r:a;var s=m(t.resizeHandle);var l=m(e.currentTarget).data(i.handle.dataAttribute);var d=m(l);var u=m(i.rootElement);var c=u.is(w)?0:u.scrollTop();var f=o.offset().top-(u.offset().top+parseFloat(u.css("borderTopWidth")))-parseFloat(o.css("marginTop"));var h=d.offset().top-(u.offset().top+parseFloat(u.css("borderTopWidth")))-parseFloat(d.css("marginTop"));var p=s.offset().top-(Math.max(0,u.offset().top)+parseFloat(u.css("borderTopWidth")))-parseFloat(s.css("marginTop"));var v=g({value:p+c+e.y.delta,min:h+c+n,max:f+_(r)+_(a)+c-i.handle[S]-n});s.css({top:v})},resize:function(e){var t=this;var i=t.options;var n=m(e.currentTarget).data(i.handle.dataAttribute);var r=_(m(n));var a=m(t.element);var o=_(a);var s=a.children(x);var l=s.length>0?s.height():0;var d=a.children(y);var u=d.height();var c=n.style[S];var f=g({value:r+e.y.initialDelta,min:i.min,max:h(l+u-i.min)});t._setRowsHeightInPixels();n.style[S]=v(f);t._setTableHeight(o+(f-r));if(p(c)){t._setRowsHeightInPercentages()}},_setRowsHeightInPixels:function(){var e=this;var t=m(e.element).children(y+C+x).children(k);var i=t.length;var n=t.map(function(){return _(m(this))});var r;for(r=0;r<i;r++){t[r].style[S]=v(n[r])}},_setRowsHeightInPercentages:function(){var e=this;var t=m(e.element).children(x);var i=t.length>0?t.height():0;var n=m(e.element).children(y);var r=n.height();var a=m(e.element).children(x+C+y).children(k);var o=a.length;var s=a.map(function(){return _(m(this))});var l;for(l=0;l<o;l++){a[l].style[S]=u(d(s[l],i+r))}},_setTableHeight:function(e){var t=this.element;if(p(t.style[S])){t.style[S]=u(d(e,m(t).parent().height()))}else{t.style[S]=v(e)}}});T.create=function(e){r.create(e,{name:"rowResizing",type:T,eventNamespace:o})};T.dispose=function(e){r.dispose(e,{eventNamespace:o})};i(n,{RowResizing:T})})(window.kendo)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("editor/resizing/table-resize-handle",["editor/main","kendo.draganddrop","editor/resizing/resizing-utils"],e)})(function(){(function(o,B){var s=o.jQuery;var i=s.extend;var e=s.noop;var n=s.proxy;var t=o.ui.editor;var r=o.Class;var a=o.ui.Draggable;var l=o.Observable;var d=t.ResizingUtils.getScrollBarWidth;var u=o._outerWidth;var c=o._outerHeight;var f=".kendoEditorTableResizeHandle";var h="k-table-resize-handle";var p="dragStart";var v="drag";var m="dragEnd";var g="halfInside";var _="mouseover";var b="mouseout";var L="body";var H="table";var w="east";var k="north";var y="northeast";var x="northwest";var C="south";var S="southeast";var T="southwest";var D="west";var N=".";var O=l.extend({init:function(e){var t=this;l.fn.init.call(t);t.options=i({},t.options,e);t.element=s(t.options.template).appendTo(t.options.appendTo)[0];t._attachEventHandlers();t._addStyles();t._initDraggable();t._initPositioningStrategy();t._initDraggingStrategy();s(t.element).data(H,t.options.resizableElement)},destroy:function(){var e=this;s(e.element).off(f).remove();e.element=null;e._destroyDraggable();e.unbind()},options:{appendTo:null,direction:S,resizableElement:null,rtl:false,template:"<div class='k-table-resize-handle-wrapper' unselectable='on' contenteditable='false'>"+"<div class='"+h+"'></div>"+"</div>"},events:[p,v,m,_,b],show:function(){this._setPosition()},_setPosition:function(){var e=this;var t=e._positioningStrategy.getPosition();s(e.element).css({top:t.top,left:t.left,position:"absolute"})},_attachEventHandlers:function(){var e=this;s(e.element).on(_+f,n(e._onMouseOver,e)).on(b+f,n(e._onMouseOut,e))},_onMouseOver:function(){this.trigger(_)},_onMouseOut:function(){this.trigger(b)},_addStyles:function(){var e=this;s(e.element).children(N+h).addClass("k-resize-"+e.options.direction)},_initPositioningStrategy:function(){var e=this;var t=e.options;e._positioningStrategy=I.create({name:t.direction,handle:e.element,resizableElement:t.resizableElement,rootElement:t.rootElement,rtl:t.rtl})},_initDraggable:function(){var e=this;var t=e.element;if(e._draggable||!t){return}e._draggable=new a(t,{dragstart:n(e._onDragStart,e),drag:n(e._onDrag,e),dragend:n(e._onDragEnd,e)})},_onDragStart:function(){this.trigger(p)},_onDrag:function(e){var t=this;t.trigger(v,t._draggingStrategy.adjustDragDelta({deltaX:e.x.delta,deltaY:e.y.delta,initialDeltaX:e.x.initialDelta,initialDeltaY:e.y.initialDelta}))},_onDragEnd:function(){this.trigger(m)},_destroyDraggable:function(){var e=this;if(e._draggable){e._draggable.destroy();e._draggable=null}},_initDraggingStrategy:function(){var e=this;e._draggingStrategy=R.create({name:e.options.direction})}});var A=r.extend({init:function(){this._items=[]},register:function(e,t){this._items.push({name:e,type:t})},create:function(e){var t=this._items;var i=t.length;var n=e.name?e.name.toLowerCase():"";var r;var a;var o;for(o=0;o<i;o++){a=t[o];if(a.name.toLowerCase()===n){r=a;break}}if(r){return new r.type(e)}}});var E=A.extend({});E.current=new E;var I=r.extend({init:function(e){var t=this;t.options=i({},t.options,e)},options:{handle:null,offset:g,resizableElement:null,rootElement:null,rtl:false},getPosition:function(){var e=this;var t=e.calculatePosition();var i=e.applyHandleOffset(t);var n=e.applyScrollOffset(i);return n},calculatePosition:e,applyHandleOffset:function(e){var t=this.options;var i=s(t.handle);if(t.offset===g){return{top:e.top-c(i)/2,left:e.left-u(i)/2}}return e},applyScrollOffset:function(e){var t=this.options;var i=s(t.rootElement);var n=t.rtl?d(i[0]):0;var r=o.support.browser;var a;if(!i.is(L)){a=o.scrollLeft(i)||0;if(t.rtl&&(r.mozilla||r.webkit&&r.version>=85)){a=a*-1}return{top:e.top+(i.scrollTop()||0),left:e.left+a-n}}return e}});I.create=function(e){return E.current.create(e)};var V=I.extend({calculatePosition:function(){var e=s(this.options.resizableElement);var t=e.position();var i=parseInt(e.css("marginLeft"),10);return{top:t.top+c(e)/2,left:t.left+u(e)+i}}});E.current.register(w,V);var W=I.extend({calculatePosition:function(){var e=s(this.options.resizableElement);var t=e.position();var i=parseInt(e.css("marginLeft"),10);return{top:t.top,left:t.left+u(e)/2+i}}});E.current.register(k,W);var U=I.extend({calculatePosition:function(){var e=s(this.options.resizableElement);var t=e.position();var i=parseInt(e.css("marginLeft"),10);return{top:t.top,left:t.left+u(e)+i}}});E.current.register(y,U);var j=I.extend({calculatePosition:function(){var e=s(this.options.resizableElement);var t=e.position();var i=parseInt(e.css("marginLeft"),10);return{top:t.top,left:t.left+i}}});E.current.register(x,j);var G=I.extend({calculatePosition:function(){var e=s(this.options.resizableElement);var t=e.position();var i=parseInt(e.css("marginLeft"),10);return{top:t.top+c(e),left:t.left+u(e)/2+i}}});E.current.register(C,G);var q=I.extend({calculatePosition:function(){var e=s(this.options.resizableElement);var t=e.position();var i=parseInt(e.css("marginLeft"),10);return{top:t.top+c(e),left:t.left+u(e)+i}}});E.current.register(S,q);var $=I.extend({calculatePosition:function(){var e=s(this.options.resizableElement);var t=e.position();var i=parseInt(e.css("marginLeft"),10);return{top:t.top+c(e),left:t.left+i}}});E.current.register(T,$);var K=I.extend({calculatePosition:function(){var e=s(this.options.resizableElement);var t=e.position();var i=parseInt(e.css("marginLeft"),10);return{top:t.top+c(e)/2,left:t.left+i}}});E.current.register(D,K);var M=A.extend({});M.current=new M;var R=r.extend({init:function(e){var t=this;t.options=i({},t.options,e)},options:{deltaX:{adjustment:null,modifier:null},deltaY:{adjustment:null,modifier:null}},adjustDragDelta:function(e){var t=this.options;var i=t.deltaX.adjustment*t.deltaX.modifier;var n=t.deltaY.adjustment*t.deltaY.modifier;return{deltaX:e.deltaX*i,deltaY:e.deltaY*n,initialDeltaX:e.initialDeltaX*i,initialDeltaY:e.initialDeltaY*n}}});R.create=function(e){return M.current.create(e)};var F=R.extend({options:{deltaX:{adjustment:1,modifier:1},deltaY:{adjustment:0,modifier:0}}});var Y=F.extend({options:{deltaX:{modifier:1}}});M.current.register(w,Y);var Q=F.extend({options:{deltaX:{modifier:-1}}});M.current.register(D,Q);var P=R.extend({options:{deltaX:{adjustment:0,modifier:0},deltaY:{adjustment:1,modifier:1}}});var X=P.extend({options:{deltaY:{modifier:-1}}});M.current.register(k,X);var Z=P.extend({options:{deltaY:{modifier:1}}});M.current.register(C,Z);var z=R.extend({options:{deltaX:{adjustment:1,modifier:1},deltaY:{adjustment:1,modifier:1}}});var J=z.extend({options:{deltaX:{modifier:1},deltaY:{modifier:-1}}});M.current.register(y,J);var ee=z.extend({options:{deltaX:{modifier:-1},deltaY:{modifier:-1}}});M.current.register(x,ee);var te=z.extend({options:{deltaX:{modifier:1},deltaY:{modifier:1}}});M.current.register(S,te);var ie=z.extend({options:{deltaX:{modifier:-1},deltaY:{modifier:1}}});M.current.register(T,ie);i(t,{TableResizeHandle:O})})(window.kendo)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("editor/resizing/table-resizing",["editor/main","editor/resizing/table-resize-handle","editor/resizing/resizing-utils"],e)})(function(){(function(d,B){var e=window;var t=e.Math;var v=t.min;var m=t.max;var g=d.jQuery;var s=g.contains;var o=g.extend;var a=g.proxy;var i=d.support.browser;var n=d.ui.editor;var r=d.Class;var L=n.TableResizeHandle;var l=n.ResizingUtils;var _=l.calculatePercentageRatio;var b=l.constrain;var w=l.inPercentages;var H=l.inPixels;var k=l.toPercentages;var y=l.toPixels;var f=d._outerWidth;var x=d._outerHeight;var u=".kendoEditorTableResizing";var c="k-table-resize-handle-wrapper";var N="k-table";var h="k-table-resizing";var O="dragStart";var V="drag";var W="dragEnd";var p="keydown";var C="mousedown";var U="mouseover";var j="mouseout";var S="td";var T="tr";var D="tbody";var A="thead";var E="table";var I=",";var M="width";var R="height";var G="east";var q="north";var $="northeast";var K="northwest";var Y="south";var Q="southeast";var X="southwest";var Z="west";var J=".";function F(e){return typeof e==="undefined"}var P=r.extend({init:function(e,t){var i=this;i.options=o({},i.options,t);i.handles=[];if(g(e).is(E)){i.element=e}},destroy:function(){var e=this;g(e.element).off(u);e.element=null;g(e.options.rootElement).off(p+u);e._destroyResizeHandles()},options:{appendHandlesTo:null,rtl:false,rootElement:null,minWidth:10,minHeight:10,handles:[{direction:K},{direction:q},{direction:$},{direction:G},{direction:Q},{direction:Y},{direction:X},{direction:Z}]},resize:function(e){var t=this;var i=o({},{deltaX:0,deltaY:0,initialDeltaX:0,initialDeltaY:0},e);t._resizeWidth(i.deltaX,i.initialDeltaX);t._resizeHeight(i.deltaY,i.initialDeltaY);t.showResizeHandles()},_resizeWidth:function(e,t){var i=this;var n=g(i.element);var r=n[0].style[M];var a=f(n);var o=n.parent().width();var s=i._getMaxDimensionValue(M);var l;var d;var u;var c;if(e===0){return}if(F(i._initialElementWidth)){i._initialElementWidth=a}c=b({value:i._initialElementWidth+t,min:i.options.minWidth,max:s});if(w(r)){if(a+e>o){d=m(c,o);u=v(c,o)}else{d=v(c,o);u=m(c,o)}l=k(_(d,u))}else{l=y(c)}i._setColumnsWidth();n[0].style[M]=l},_resizeHeight:function(e,t){var i=this;var n=g(i.element);var r=n[0].style[R];var a=x(n);var o=n.parent();var s=o.height();var l=i._getMaxDimensionValue(R);var d;var u;var c;var f;var h=i.options.minHeight;var p=i._hasRowsInPixels();if(e===0){return}if(F(i._initialElementHeight)){i._initialElementHeight=a}f=b({value:i._initialElementHeight+t,min:h,max:l});if(p&&e<0){i._setRowsHeightInPercentages()}if(w(r)){if(a+e>s){u=m(f,s);c=v(f,s)}else{u=v(f,s);c=m(f,s)}d=k(_(u,c))}else{d=y(f)}n[0].style[R]=d;if(p&&e<0){i._setRowsHeightInPixels()}},_getMaxDimensionValue:function(e){var t=this;var i=g(t.element);var n=e.toLowerCase();var r=t.options.rtl?-1:1;var a=g(t.element).parent();var o=a[0];var s=a[n]();var l=r*(e===M?d.scrollLeft(a):a.scrollTop());if(o===i.closest(S)[0]){if(o.style[n]===""&&!w(t.element.style[n])){return Infinity}else{return s+l}}else{return s+l}},_setColumnsWidth:function(){var e=this;var t=g(e.element);var i=t.parent()[0];var n=t.closest(S);var r=n.closest(T).children();var a=r.length;var o;function s(e){var t=e.style.width;if(t!==""){return w(t)?true:false}else{return g(e).hasClass(N)?true:false}}if(s(t[0])&&i===n[0]&&i.style[M]===""){for(o=0;o<a;o++){r[o].style[M]=y(g(r[o]).width())}}},_hasRowsInPixels:function(){var e=this;var t=g(e.element).children(A+I+D).children(T);for(var i=0;i<t.length;i++){if(t[i].style.height===""||H(t[i].style.height)){return true}}return false},_setRowsHeightInPercentages:function(){var e=this;var t=g(e.element).children(A);var i=t.length>0?t.height():0;var n=g(e.element).children(D);var r=n.height();var a=g(e.element).children(A+I+D).children(T);var o=a.length;var s=a.map(function(){return x(g(this))});var l;for(l=0;l<o;l++){a[l].style[R]=k(_(s[l],i+r))}},_setRowsHeightInPixels:function(){var e=this;var t=g(e.element).children(A+I+D).children(T);var i=t.length;var n=t.map(function(){return x(g(this))});var r;for(r=0;r<i;r++){t[r].style[R]=y(n[r])}},showResizeHandles:function(){var e=this;e._initResizeHandles();e._showResizeHandles()},_initResizeHandles:function(){var e=this;var t=e.handles;var i=e.options;var n=e.options.handles;var r=n.length;var a;if(t&&t.length>0){return}for(a=0;a<r;a++){e.handles.push(new L(o({appendTo:i.appendHandlesTo,resizableElement:e.element,rootElement:i.rootElement,rtl:i.rtl},n[a])))}e._bindToResizeHandlesEvents()},_destroyResizeHandles:function(){var e=this;var t=e.handles?e.handles.length:0;for(var i=0;i<t;i++){e.handles[i].destroy()}},_showResizeHandles:function(){var e=this;var t=e.handles||[];var i=t.length;var n;for(n=0;n<i;n++){e.handles[n].show()}},_bindToResizeHandlesEvents:function(){var e=this;var t=e.handles||[];var i=t.length;var n;var r;for(n=0;n<i;n++){r=t[n];r.bind(O,a(e._onResizeHandleDragStart,e));r.bind(V,a(e._onResizeHandleDrag,e));r.bind(W,a(e._onResizeHandleDragEnd,e));r.bind(U,a(e._onResizeHandleMouseOver,e));r.bind(j,a(e._onResizeHandleMouseOut,e))}},_onResizeHandleDragStart:function(){var e=this;var t=g(e.element);t.addClass(h);e._initialElementHeight=x(t);e._initialElementWidth=f(t);e._disableKeyboard()},_onResizeHandleDrag:function(e){this.resize(e)},_onResizeHandleDragEnd:function(){var e=this;g(e.element).removeClass(h);e._enableKeyboard()},_enableKeyboard:function(){g(this.options.rootElement).off(p+u)},_disableKeyboard:function(){g(this.options.rootElement).on(p+u,function(e){e.preventDefault()})}});var z=r.extend({create:function(a){var o=this;g(a.body).on(C+u,E,function(e){var t=e.target;var i=e.currentTarget;var n=a.tableResizing;var r=n?n.element:null;if(n){if(r&&i!==r){if(s(i,r)&&r!==t&&s(r,t)){return}else{if(r!==t){a._destroyTableResizing();o._initResizing(a,i)}}}}else{o._initResizing(a,i)}a._showTableResizeHandles()}).on(C+u,function(e){var t=a.tableResizing;var i=t?t.element:null;var n=e.target;var r=g(n).hasClass(c)||g(n).parents(J+c).length>0;if(t&&i!==n&&!s(i,n)&&!r){a._destroyTableResizing()}})},dispose:function(e){g(e.body).off(u)},_initResizing:function(e,t){if(!i.msie&&!i.mozilla){e.tableResizing=new P(t,{appendHandlesTo:e.body,rtl:d.support.isRtl(e.element),rootElement:e.body})}}});z.current=new z;P.create=function(e){z.current.create(e)};P.dispose=function(e){z.current.dispose(e)};o(n,{TableResizing:P})})(window.kendo)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("editor/table-wizard/table-wizard-command",["editor/plugins/tables"],e)})(function(){(function(v,m){var s=window.kendo,l=s.ui.editor,e=l.EditorUtils,i=l.RangeUtils,g=l.Dom,t=e.registerTool,n=l.ToolTemplate,r=l.Command;var a=new l.BlockFormatFinder([{tags:["table"]}]);var o=new l.BlockFormatFinder([{tags:["td","th"]}]);var d=/([a-z]+|%)$/i;var u="col";var c="row";var f="colgroup";var h="scope";var _="col-index";var b="th";var w="td";var p="thead";var k="headers";var y="table";var x=r.extend({exec:function(){var e=this;var t=e.editor;var i=e.range=e.lockRange();var n=e._sourceTable=!e.options.insertNewTable?e._selectedTable(i):m;var r=e._selectedTableCells=n?e._selectedCells(i):m;var a={visible:false,messages:t.options.messages,closeCallback:v.proxy(e.onDialogClose,e),table:e.parseTable(n,r),dialogOptions:t.options.dialogOptions,isRtl:s.support.isRtl(t.wrapper)};var o=new l.TableWizardDialog(a);o.open()},onDialogClose:function(e){var t=this;t.releaseRange(t.range);if(e){if(t.options.insertNewTable){t.insertTable(t.createNewTable(e))}else{t.updateTable(e,t._sourceTable,t._selectedTableCells)}}},releaseRange:function(e){var t=this;var i=t.editor.document;g.windowFromDocument(i).focus();r.fn.releaseRange.call(t,e)},insertTable:function(e){var t=this.range;t.insertNode(e);t.collapse(true);this.editor.selectRange(t);this._ensureFocusableAfterTable(e)},_ensureFocusableAfterTable:function(e){var t=v(e).parent().contents();var i=t.length-1;var n=t.get(i);while(n.nodeValue!==null&&(n.nodeValue===" "||n.nodeValue==="")){i-=1;n=t.get(i)}if(n===e){g.insertAfter(g.createEmptyNode(this.editor.document,"p"),e)}},updateTable:function(e,t,i){var n=this;var r=v(t.rows).toArray();var a=e.tableProperties;var o=a.rows;var s=t.tHead;var l=n._lastInCollection;var d,u;while(i.length>1){i.pop()}d=i.length?l(i).parentNode:l(r);n._deleteTableRows(r,r.length-o);if(r.length<o){n._addRows(d,o,r)}g.reMapTableColumns(t,_);n._updateColumns(r,a.columns,i,d);n._updateTableProperties(t,a);u=e.cellProperties;if(i[0]){g.attr(i[0],{id:u.id||null})}(u.selectAllCells?v(r).children():v(i)).each(function(e,t){n._updateCellProperties(t,u)});n._updateCaption(t,a);if(s){n._updateHeadersWithThead(t,e)}else{n._updateHeadersNoThead(t,e)}n._updateHeaderAssociates(t,a);g.clearTableMappings(t,_)},_isHeadingRow:function(e){return g.is(e.cells[0],b)&&g.is(e.parentNode,p)},_isHeadingCell:function(e){return g.is(e,b)},cellsWithHeadersAssociated:function(e){var t=v(e.rows).children();var i=[];var r=function(e){return i.indexOf(e)>-1};t.each(function(e,t){if(t.id&&g.is(t,b)){i.push(t.id)}});var n=t.filter(function(e,t){var i=t.getAttribute(k);var n;if(i&&!g.is(t,b)){n=i.split(" ");if(n&&n.length>0){return n.some(r)}}return false});return!!n.length},_insertCells:function(e,t,i){i=isNaN(i)?-1:i;for(var n=0,r;n<e;n++){r=t.insertCell(i);r.innerHTML="&nbsp;"}},_deleteTableRows:function(e,t){for(var i=0,n,r;i<t;i++){n=e.pop();r=n.parentNode;r.removeChild(n);if(!r.rows.length){g.remove(r)}}},createNewTable:function(e){var t=this;var i=t.editor.document;var n=e.tableProperties;var r=g.create(i,y);var a=0;var o;t._updateTableProperties(r,n);t._updateCaption(r,n);if(n.headerRows&&n.headerRows>0){o=r.createTHead();t._createTableRows(e,o,a,true);a+=n.headerRows}var s=r.createTBody();t._createTableRows(e,s,a,false);g.reMapTableColumns(r,_);if(n.cellsWithHeaders==="ids"){g.associateWithIds(r)}else if(n.cellsWithHeaders==="scope"){t._addScopes(r,n.headerRows,n.headerColumns)}g.clearTableMappings(r,_);return r},_createTableRows:function(e,t,i,n){var r=this;var a=e.tableProperties;var o=e.cellProperties;var s=a.columns;var l=n?a.headerRows:a.rows;var d=o.selectAllCells;var u=a.headerColumns;for(var c=i,f;c<l;c++){f=t.insertRow();for(var h=0,p;h<s;h++){if(n||u>h){p=document.createElement(b)}else{p=document.createElement(w)}f.appendChild(p);p.innerHTML="&nbsp;";if(c===0&&h===0&&o.id){p.id=o.id}r._updateCellProperties(p,d||c===0&&h===0?o:{})}}},_addRows:function(e,t,i){var n=this;var r=v(e).index();var a=e.cells.length;var o=t-i.length;var s=e.parentNode;var l;while(o){l=s.insertRow(r+1);n._insertCells(a-l.cells.length,l);o--}},_updateColumns:function(e,r,t,i){var n=this;var a=n._lastInCollection;var o=a(e[0].cells);var s=Number(o.getAttribute(_))+o.colSpan;if(s>r){v(e).each(function(e,t){var i=a(t.cells);var n=Number(i.getAttribute(_))+i.colSpan;while(n>r){if(i.colSpan&&i.colSpan>1){i.colSpan-=1}else{t.deleteCell(-1)}i=a(t.cells);n=Number(i.getAttribute(_))+i.colSpan}})}if(s<r){var l=v(a(t)||a(i.cells)).index();v(e).each(function(e,t){var i=a(t.cells);n._insertCells(r-Number(i.getAttribute(_))-i.colSpan,t,l+1)})}},_updateTableProperties:function(e,t){var i=this._getStylesData(t);g.attr(e,{cellSpacing:t.cellSpacing||null,cellPadding:t.cellPadding||null,className:t.className||null,id:t.id||null,summary:t.summary||null,style:i||null});v(e).addClass("k-table")},_updateCellProperties:function(e,t){var i=this._getStylesData(t);i.padding=t.cellPadding||null;i.margin=t.cellMargin||null;g.attr(e,{style:i||null,className:t.className||null})},_updateCaption:function(e,t){if(e.caption&&!t.captionContent){e.deleteCaption()}else if(t.captionContent){var i=e.createCaption();i.innerHTML=t.captionContent;var n=this._getAlignmentData(t.captionAlignment);g.attr(i,{style:{textAlign:n.textAlign,verticalAlign:n.verticalAlign}})}},_updateHeadersNoThead:function(e,t){var i=this;var n=t.tableProperties;var r=e.rows;var a,o,s,l,d;for(l=0;l<r.length;l++){a=r[l];o=a.cells;for(d=0;d<o.length;d++){s=o[d];if(!i._isHeadingCell(s)&&(l<n.headerRows||n.headerColumns>s.getAttribute(_))){g.changeTag(s,b,false)}else if(i._isHeadingCell(s)&&l>=n.headerRows&&n.headerColumns<=s.getAttribute(_)){g.changeTag(s,w,false)}}}},_updateHeadersWithThead:function(e,t){var i=this;var n=t.tableProperties;var r=e.tHead;var a=0;var o=e.tBodies[0];var s,l,d;if(!o){o=e.createTBody()}if(n.headerRows&&n.headerRows>0){if(!r){r=e.createTHead()}while(r.rows.length<n.headerRows){r.appendChild(o.rows[0])}while(r.rows.length>n.headerRows){o.appendChild(r.rows[0])}i._swapToHeaderCells(r)}else if(r){while(r.rows.length>0){o.appendChild(r.rows[r.rows.length-1])}e.deleteTHead()}while(o.rows.length>a){s=o.rows[a];for(d=0;d<s.cells.length;d++){l=s.cells[d];if(i._isHeadingCell(l)&&n.headerColumns<=l.getAttribute(_)){g.changeTag(l,w,false)}else if(!i._isHeadingCell(l)&&n.headerColumns>l.getAttribute(_)){g.changeTag(l,b,false)}}a+=1}},_updateHeaderAssociates:function(e,t){var i=this;if(t.cellsWithHeaders==="ids"){if(!i.cellsWithHeadersAssociated(e)){i._removeScopes(e)}g.associateWithIds(e)}else if(t.cellsWithHeaders==="scope"){if(i.cellsWithHeadersAssociated(e)){i._removeAssociates(e)}i._addScopes(e,t.headerRows,t.headerColumns)}else{if(i.cellsWithHeadersAssociated(e)){i._removeAssociates(e)}else{i._removeScopes(e)}}},_addScopes:function(e,t,i){var n=e.rows;var r,a,o,s;for(r=0;r<n.length;r++){o=n[r];for(a=0;a<o.cells.length;a++){s=o.cells[a];if(r<t){s.setAttribute(h,u)}else if(s.getAttribute(_)<i){s.setAttribute(h,c)}}}},_removeScopes:function(e){v(e).find(b).removeAttr(h);v(e).find(u).remove();v(e).find(f).remove()},_removeAssociates:function(e){v(e).find("th, td").removeAttr("id headers")},_swapToHeaderCells:function(e){var t=v(e).find("td");var i=function(e,t){g.changeTag(t,b,false)};t.each(i)},_getStylesData:function(e){var t=this._getAlignmentData(e.alignment);var i="wrapText"in e?e.wrapText?"":"nowrap":null;return{width:e.width?e.width+e.widthUnit:null,height:e.height?e.height+e.heightUnit:null,textAlign:t.textAlign,verticalAlign:t.verticalAlign,backgroundColor:e.bgColor||"",borderWidth:e.borderWidth,borderStyle:e.borderStyle,borderColor:e.borderColor||"",borderCollapse:e.collapseBorders?"collapse":null,whiteSpace:i}},_getAlignmentData:function(e){var t="";var i=t;if(e){if(e.indexOf(" ")!=-1){var n=e.split(" ");t=n[0];i=n[1]}else{t=e}}return{textAlign:t,verticalAlign:i}},parseTable:function(e,t){if(!e){return{tableProperties:{},selectedCells:[]}}var i=this;var n=e.style;var r=e.rows;var a=e.caption;var o=v(a?a.cloneNode(true):m);o.find(".k-marker").remove();var s=e.className;s=s.replace(/^k-table\s|\sk-table$/,"");s=s.replace(/\sk-table\s/," ");s=s.replace(/^k-table$/,"");var l=i._getAlignment(e,true);var d=a?i._getAlignment(a):m;var u=g._getNumberOfHeaderRows(e);var c;if(i.cellsWithHeadersAssociated(e)){c="ids"}else if(v(e).find("th[scope]").length>0){c="scope"}else{c="none"}g.reMapTableColumns(e,_);var f=g._getNumberOfColumns(e);var h=g._getNumberOfHeaderColumns(e,u);g.clearTableMappings(e,_);var p={tableProperties:{width:n.width||e.width?parseFloat(n.width||e.width):null,height:n.height||e.height?parseFloat(n.height||e.height):null,columns:f,rows:r.length,widthUnit:i._getUnit(n.width),heightUnit:i._getUnit(n.height),cellSpacing:e.cellSpacing,cellPadding:e.cellPadding,alignment:l.textAlign,bgColor:n.backgroundColor||e.bgColor,className:s,id:e.id,borderWidth:n.borderWidth||e.border,borderColor:n.borderColor,borderStyle:n.borderStyle||"",collapseBorders:!!n.borderCollapse,summary:e.summary,captionContent:a?o.html():"",captionAlignment:a&&d.textAlign?d.textAlign+" "+d.verticalAlign:"",headerRows:u,headerColumns:h,cellsWithHeaders:c},selectedCells:[]};p.rows=i.parseTableRows(r,t,p);return p},parseTableRows:function(e,t,i){var n=this;var r=[],a,o,s,l,d;for(var u=0;u<e.length;u++){a=e[u];o={cells:[]};s=a.cells;r.push(o);for(var c=0;c<s.length;c++){l=s[c];d=n.parseCell(l);if(v.inArray(l,t)!=-1){i.selectedCells.push(d)}o.cells.push(d)}}return r},parseCell:function(e){var t=this;var i=e.style;var n=t._getAlignment(e);n=n.textAlign?n.textAlign+" "+n.verticalAlign:"";var r={width:i.width||e.width?parseFloat(i.width||e.width):null,height:i.height||e.height?parseFloat(i.height||e.height):null,widthUnit:t._getUnit(i.width),heightUnit:t._getUnit(i.height),cellMargin:i.margin,cellPadding:i.padding,alignment:n,bgColor:i.backgroundColor||e.bgColor,className:e.className,id:e.id,borderWidth:i.borderWidth||e.border,borderColor:i.borderColor,borderStyle:i.borderStyle,wrapText:i.whiteSpace!="nowrap"};return r},_getAlignment:function(e,t){var i=e.style;var n=i.textAlign||e.align||"";if(t){return{textAlign:n}}var r=i.verticalAlign||e.vAlign||"";if(n&&r){return{textAlign:n,verticalAlign:r}}if(!n&&r){return{textAlign:"left",verticalAlign:r}}if(n&&!r){return{textAlign:n,verticalAlign:"top"}}return{textAlign:"",verticalAlign:""}},_getUnit:function(e){var t=(e||"").match(d);return t?t[0]:"px"},_selectedTable:function(e){var t=g.filterBy(i.nodes(e),g.htmlIndentSpace,true);return a.findSuitable(t)[0]},_selectedCells:function(e){var t=g.filterBy(i.nodes(e),g.htmlIndentSpace,true);return o.findSuitable(t)},_lastInCollection:function(e){return e[e.length-1]}});var C=l.Tool.extend({command:function(e){e.insertNewTable=this.options.insertNewTable;return new x(e)}});var S=C.extend({update:function(e,t){var i=!a.isFormatted(t);if(i===true){e.parent().addClass("k-hidden k-state-disabled");e.attr("disabled","disabled");e.addClass("k-state-disabled")}else{e.parent().removeClass("k-hidden k-state-disabled");e.removeAttr("disabled");e.removeClass("k-state-disabled")}}});s.ui.editor.TableWizardTool=C;s.ui.editor.TableWizardCommand=x;t("tableWizard",new S({command:x,insertNewTable:false,template:new n({template:e.buttonTemplate,title:"Table Wizard"})}))})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.tabstrip",["kendo.data"],e)})(function(){var e={id:"tabstrip",name:"TabStrip",category:"web",description:"The TabStrip widget displays a collection of tabs with associated tab content.",depends:["data"],features:[{id:"tabstrip-fx",name:"Animation",description:"Support for animation",depends:["fx"]}]};(function(p,a){var g=window.kendo,B=g.ui,s=g.keys,o=p.map,t=p.each,r=g.trim,_=p.extend,L=g.isFunction,e=g.template,u=g._outerWidth,b=g._outerHeight,l=B.Widget,H=/^(a|div)$/i,c=".kendoTabStrip",i="img",v="href",d="prev",f="next",w="show",k="k-link",n="k-last",h="click",N="error",O=":empty",m="k-image",y="k-first",x="select",V="activate",C="k-content",S="contentUrl",W="mouseenter",U="mouseleave",j="contentLoad",T="k-state-disabled",D="k-state-default",A="k-state-active",E="k-state-focused",I="k-state-hover",M="k-tab-on-top",R=".k-item:not(."+T+")",G=".k-item",q=".k-tabstrip-items > "+R+":not(."+A+")",$=200,F={content:e("<div class='k-content'#= contentAttributes(data) # role='tabpanel' tabindex='0'>#= content(item) #</div>"),itemWrapper:e("<#= tag(item) # class='k-link'#= contentUrl(item) ##= textAttributes(item) #>"+"#= image(item) ##= sprite(item) ##= text(item) #"+"</#= tag(item) #>"),item:e("<li class='#= wrapperCssClass(group, item) #' role='tab' #=item.active ? \"aria-selected='true'\" : ''#>"+"#= itemWrapper(data) #"+"</li>"),image:e("<img class='k-image' alt='' src='#= imageUrl #' />"),sprite:e("<span class='k-sprite #= spriteCssClass #'></span>"),empty:e("")},K={wrapperCssClass:function(e,t){var i="k-item",n=t.index;if(t.enabled===false){i+=" k-state-disabled"}else{i+=" k-state-default"}if(n===0){i+=" k-first"}if(n==e.length-1){i+=" k-last"}return i},textAttributes:function(e){return e.url?" href='"+e.url+"'":""},text:function(e){return e.encoded===false?e.text:g.htmlEncode(e.text)},tag:function(e){return e.url?"a":"span"},contentAttributes:function(e){return e.active!==true?" style='display:none' aria-hidden='true' aria-expanded='false'":""},content:function(e){return e.content?e.content:e.contentUrl?"":"&nbsp;"},contentUrl:function(e){return e.contentUrl?g.attr("content-url")+'="'+e.contentUrl+'"':""}};function Y(e){e.children(i).addClass(m);e.children("a").addClass(k).children(i).addClass(m);e.filter(":not([disabled]):not([class*=k-state-disabled])").addClass(D);e.filter("li[disabled]").addClass(T).attr("aria-disabled","true").removeAttr("disabled");e.filter(":not([class*=k-state])").children("a").filter(":focus").parent().addClass(A+" "+M);e.attr("role","tab");e.filter("."+A).attr("aria-selected",true);e.each(function(){var e=p(this);if(!e.children("."+k).length){e.contents().filter(function(){return!this.nodeName.match(H)&&!(this.nodeType==3&&!r(this.nodeValue))}).wrapAll("<span UNSELECTABLE='on' class='"+k+"'/>")}})}function P(e){var t=e.children(".k-item");t.filter(".k-first:not(:first-child)").removeClass(y);t.filter(".k-last:not(:last-child)").removeClass(n);t.filter(":first-child").addClass(y);t.filter(":last-child").addClass(n)}function Q(e,t){return"<span class='k-button k-button-icon k-flat k-tabstrip-"+e+"' unselectable='on'><span class='k-icon "+t+"'></span></span>"}var z=l.extend({init:function(e,t){var n=this,i;l.fn.init.call(n,e,t);n._animations(n.options);t=n.options;n._contentUrls=t.contentUrls||[];n._wrapper();n._isRtl=g.support.isRtl(n.wrapper);n._tabindex();n._updateClasses();n._dataSource();if(t.dataSource){n.dataSource.fetch()}n._tabPosition();n._scrollable();if(n._contentUrls.length){n.wrapper.find(".k-tabstrip-items > .k-item").each(function(e,t){var i=n._contentUrls[e];if(typeof i==="string"){p(t).find(">."+k).data(S,i)}})}else{n._contentUrls.length=n.tabGroup.find("li.k-item").length}n.wrapper.on(W+c+" "+U+c,q,n._toggleHover).on("focus"+c,p.proxy(n._active,n)).on("blur"+c,function(){n._current(null)});n._keyDownProxy=p.proxy(n._keydown,n);if(t.navigatable){n.wrapper.on("keydown"+c,n._keyDownProxy)}if(n.options.value){i=n.options.value}n.wrapper.children(".k-tabstrip-items").on(h+c,".k-state-disabled .k-link",false).on(h+c," > "+R,function(e){var t=n.wrapper[0];if(t!==document.activeElement){var i=g.support.browser.msie;if(i){try{t.setActive()}catch(e){t.focus()}}else{t.focus()}}if(n._click(p(e.currentTarget))){e.preventDefault()}});var r=n.tabGroup.children("li."+A),a=n.contentHolder(r.index());if(r[0]&&a.length>0&&a[0].childNodes.length===0){n.activateTab(r.eq(0))}n.element.attr("role","tablist");n.value(i);g.notify(n)},_active:function(){var e=this.tabGroup.children().filter("."+A);e=e[0]?e:this._endItem("first");if(e[0]){this._current(e)}},_endItem:function(e){return this.tabGroup.children(R)[e]()},_getItem:function(e){return this.tabGroup.children(G)[e]()},_item:function(e,t){var i;if(t===d){i="last"}else{i="first"}if(!e){return this._endItem(i)}e=e[t]();if(!e[0]){e=this.tabGroup.children(G)[i]()}if(e.hasClass(T)){e.addClass(E)}if(e.hasClass(T)||e.hasClass(A)){this._focused=e}return e},_current:function(e){var t=this,i=t._focused;if(e===a){return i}if(i){i.removeClass(E)}if(e){if(!e.hasClass(A)){e.addClass(E)}if(e[0].id){t.element.attr("aria-activedescendant",e[0].id)}}t._focused=e},_keydown:function(e){var t=this,i=e.keyCode,n=t._current(),r=t._isRtl,a=/top|bottom/.test(t.options.tabPosition),o;if(e.target!=e.currentTarget||!n){return}if(i===s.DOWN&&!a){o=f}else if(i===s.UP&&!a){o=d}else if(i===s.RIGHT&&a){o=r?d:f}else if(i===s.LEFT&&a){o=r?f:d}else if(i==s.ENTER||i==s.SPACEBAR){t._click(n);e.preventDefault()}else if(i==s.HOME){t._click(t._getItem("first"));e.preventDefault();return}else if(i==s.END){t._click(t._getItem("last"));e.preventDefault();return}if(o){t._click(t._item(n,o));e.preventDefault()}},_dataSource:function(){var e=this;if(e.dataSource&&e._refreshHandler){e.dataSource.unbind("change",e._refreshHandler)}else{e._refreshHandler=p.proxy(e.refresh,e)}e.dataSource=g.data.DataSource.create(e.options.dataSource).bind("change",e._refreshHandler)},setDataSource:function(e){var t=this;t.options.dataSource=e;t._dataSource();t.dataSource.fetch()},_animations:function(e){if(e&&"animation"in e&&!e.animation){e.animation={open:{effects:{}},close:{effects:{}}}}},refresh:function(e){var t=this,i=t.options,n=g.getter(i.dataEncodedField),r=g.getter(i.dataTextField),a=g.getter(i.dataContentField),o=g.getter(i.dataContentUrlField),s=g.getter(i.dataImageUrlField),l=g.getter(i.dataUrlField),d=g.getter(i.dataSpriteCssClass),u,c=[],f,h,p=t.dataSource.view(),v;e=e||{};h=e.action;if(h){p=e.items}for(u=0,v=p.length;u<v;u++){f={text:r(p[u])};if(i.dataEncodedField){f.encoded=n(p[u])}if(i.dataContentField){f.content=a(p[u])}if(i.dataContentUrlField){f.contentUrl=o(p[u])}if(i.dataUrlField){f.url=l(p[u])}if(i.dataImageUrlField){f.imageUrl=s(p[u])}if(i.dataSpriteCssClass){f.spriteCssClass=d(p[u])}c[u]=f}if(e.action=="add"){if(e.index<t.tabGroup.children().length){t.insertBefore(c,t.tabGroup.children().eq(e.index))}else{t.append(c)}}else if(e.action=="remove"){for(u=0;u<p.length;u++){t.remove(e.index)}}else if(e.action=="itemchange"){u=t.dataSource.view().indexOf(p[0]);if(e.field===i.dataTextField){t.tabGroup.children().eq(u).find(".k-link").text(p[0].get(e.field))}if(e.field===i.dataUrlField){t._contentUrls[u]=p[0].get(e.field)}}else{t.trigger("dataBinding");t.remove("li");t._contentUrls=[];t.append(c);t.trigger("dataBound")}},value:function(e){var t=this;if(e!==a){if(e!=t.value()){t.tabGroup.children().each(function(){if(g.trim(p(this).text())==e){t.select(this)}})}}else{return t.select().text()}},items:function(){return this.tabGroup[0].children},setOptions:function(e){var t=this,i=t.options.animation;t._animations(e);if(e.contentUrls){t._contentUrls=e.contentUrls}e.animation=_(true,i,e.animation);if(e.navigatable){t.wrapper.on("keydown"+c,t._keyDownProxy)}else{t.wrapper.off("keydown"+c,t._keyDownProxy)}l.fn.setOptions.call(t,e)},events:[x,V,w,N,j,"change","dataBinding","dataBound"],options:{name:"TabStrip",dataEncodedField:"",dataTextField:"",dataContentField:"",dataImageUrlField:"",dataUrlField:"",dataSpriteCssClass:"",dataContentUrlField:"",tabPosition:"top",animation:{open:{effects:"expand:vertical fadeIn",duration:200},close:{duration:200}},collapsible:false,navigatable:true,contentUrls:false,scrollable:{distance:$}},destroy:function(){var e=this,t=e.scrollWrap;l.fn.destroy.call(e);if(e._refreshHandler){e.dataSource.unbind("change",e._refreshHandler)}e.wrapper.off(c);e.wrapper.children(".k-tabstrip-items").off(c);if(e._scrollableModeActive){e._scrollPrevButton.off().remove();e._scrollNextButton.off().remove()}g.destroy(e.wrapper);t.children(".k-tabstrip").unwrap()},select:function(e){var i=this;if(arguments.length===0){return i.tabGroup.children("li."+A)}if(!isNaN(e)){e=i.tabGroup.children().get(e)}e=i.tabGroup.find(e);p(e).each(function(e,t){t=p(t);if(!t.hasClass(A)&&!i.trigger(x,{item:t[0],contentElement:i.contentHolder(t.index())[0]})){i.activateTab(t)}});return i},enable:function(e,t){this._toggleDisabled(e,t!==false);return this},disable:function(e){this._toggleDisabled(e,false);return this},reload:function(e){e=this.tabGroup.find(e);var n=this;var r=n._contentUrls;e.each(function(){var e=p(this),t=e.find("."+k).data(S)||r[e.index()],i=n.contentHolder(e.index());if(t){n.ajaxRequest(e,i,null,t)}});return n},append:function(e){var i=this,n=i._create(e);t(n.tabs,function(e){var t=n.contents[e];i.tabGroup.append(this);if(i.options.tabPosition=="bottom"){i.tabGroup.before(t)}else if(i._scrollableModeActive){i._scrollPrevButton.before(t)}else{i.wrapper.append(t)}i.angular("compile",function(){return{elements:[t]}})});P(i.tabGroup);i._updateContentElements();i.resize(true);return i},_appendUrlItem:function(e){this._contentUrls.push(e)},_moveUrlItem:function(e,t){this._contentUrls.splice(t,0,this._contentUrls.splice(e,1)[0])},_removeUrlItem:function(e){this._contentUrls.splice(e,1)},insertBefore:function(e,n){if(p(e).is(p(n))){n=this.tabGroup.find(n).next()}else{n=this.tabGroup.find(n)}var r=this,a=r._create(e),o=r.element.find("[id='"+n.attr("aria-controls")+"']");t(a.tabs,function(e){var t=a.contents[e];var i=a.newTabsCreated?r._contentUrls.length-(a.tabs.length-e):p(t).index()-1;n.before(this);o.before(t);r._moveUrlItem(i,p(this).index());r.angular("compile",function(){return{elements:[t]}})});P(r.tabGroup);r._updateContentElements(a.newTabsCreated);r.resize(true);return r},insertAfter:function(e,n){if(p(e).is(p(n))){n=this.tabGroup.find(n).prev()}else{n=this.tabGroup.find(n)}var r=this,a=r._create(e),o=r.element.find("[id='"+n.attr("aria-controls")+"']");t(a.tabs,function(e){var t=a.contents[e];var i=a.newTabsCreated?r._contentUrls.length-(a.tabs.length-e):p(t).index()-1;n.after(this);o.after(t);r._moveUrlItem(i,p(this).index());r.angular("compile",function(){return{elements:[t]}})});P(r.tabGroup);r._updateContentElements(a.newTabsCreated);r.resize(true);return r},remove:function(e){var i=this;var t=typeof e;var n;if(t==="string"){e=i.tabGroup.find(e)}else if(t==="number"){e=i.tabGroup.children().eq(e)}n=e.map(function(){var e=p(this).index();var t=i.contentElement(e);g.destroy(t);i._removeUrlItem(e);return t});e.remove();n.empty();n.remove();i._updateContentElements();i.resize(true);return i},_create:function(i){var n=this,e,t,r,a=false;i=i instanceof g.data.ObservableArray?i.toJSON():i;if(p.isPlainObject(i)||p.isArray(i)){i=p.isArray(i)?i:[i];a=true;e=o(i,function(e,t){n._appendUrlItem(i[t].contentUrl||null);return p(z.renderItem({group:n.tabGroup,item:_(e,{index:t})}))});t=o(i,function(e,t){if(typeof e.content=="string"||e.contentUrl){return p(z.renderContent({item:_(e,{index:t})}))}})}else{if(typeof i=="string"&&i[0]!="<"){e=n.element.find(i)}else{e=p(i)}t=p();e.each(function(){if(/k-tabstrip-items/.test(this.parentNode.className)){var e=n.element.find("[id='"+this.getAttribute("aria-controls")+"']");r=e}else{r=p("<div class='"+C+"'/>")}t=t.add(r)});Y(e)}return{tabs:e,contents:t,newTabsCreated:a}},_toggleDisabled:function(e,t){e=this.tabGroup.find(e);e.each(function(){p(this).toggleClass(D,t).toggleClass(T,!t).attr("aria-disabled",!t)})},_updateClasses:function(){var e=this,t,i,n;e.wrapper.addClass("k-widget k-widget-2021 k-header k-tabstrip");e.tabGroup=e.wrapper.children("ul").addClass("k-tabstrip-items k-reset");if(!e.tabGroup[0]){e.tabGroup=p("<ul class='k-tabstrip-items k-reset'/>").appendTo(e.wrapper)}t=e.tabGroup.find("li").addClass("k-item");if(t.length){i=t.filter("."+A).index();n=i>=0?i:a;e.tabGroup.contents().filter(function(){return this.nodeType==3&&!r(this.nodeValue)}).remove()}if(i>=0){t.eq(i).addClass(M)}e.contentElements=e.wrapper.children("div");e.contentElements.addClass(C).eq(n).addClass(A).css({display:"block"});if(t.length){Y(t);P(e.tabGroup);e._updateContentElements(true)}},_elementId:function(e,t,i){var n=e.attr("id"),r=this.element.attr("id"),a=g.guid();if(!n||n.indexOf(r+"-")>-1){var o=(r||a)+"-";if(i){o+="tab-"}return o+(t+1)}return n},_updateContentElements:function(r){var a=this,o=a._contentUrls,s=a.tabGroup.children(".k-item"),l=a.wrapper.children("div"),d=a._elementId.bind(a);if(l.length&&s.length>l.length){l.each(function(e){var t=d(p(this),e),i=s.filter("[aria-controls="+(t||0)+"]")[0],n;if(!i&&r){i=s[e]}if(i){i.setAttribute("aria-controls",t);n=i.id=d(p(i),e,true);this.setAttribute("aria-labelledby",n)}this.setAttribute("id",t)})}else{s.each(function(e){var t=l.eq(e),i=d(t,e),n;this.setAttribute("aria-controls",i);n=this.id=d(p(this),e,true);if(!t.length&&o[e]){p("<div class='"+C+"'/>").appendTo(a.wrapper).attr("id",i)}else{t.attr("id",i);if(!p(this).children(".k-loading")[0]&&!o[e]){p("<span class='k-loading k-complete'/>").prependTo(this)}}t.attr("role","tabpanel");t.attr("tabindex","0");t.attr("aria-labelledby",n);t.filter(":not(."+A+")").attr("aria-hidden",true).attr("aria-expanded",false);t.filter("."+A).attr("aria-expanded",true)})}a.contentElements=a.contentAnimators=a.wrapper.children("div");a.tabsHeight=b(a.tabGroup)+parseInt(a.wrapper.css("border-top-width"),10)+parseInt(a.wrapper.css("border-bottom-width"),10);if(g.kineticScrollNeeded&&g.mobile.ui.Scroller){g.touchScroller(a.contentElements);a.contentElements=a.contentElements.children(".km-scroll-container")}},_wrapper:function(){var e=this;if(e.element.is("ul")){e.wrapper=e.element.wrapAll("<div />").parent()}else{e.wrapper=e.element}e.scrollWrap=e.wrapper.parent(".k-tabstrip-wrapper");if(!e.scrollWrap[0]){e.scrollWrap=e.wrapper.wrapAll("<div class='k-tabstrip-wrapper' />").parent()}},_tabPosition:function(){var e=this,t=e.options.tabPosition;e.wrapper.addClass("k-floatwrap k-tabstrip-"+t);if(t=="bottom"){e.tabGroup.appendTo(e.wrapper)}e.resize(true)},_setContentElementsDimensions:function(){var e=this,t=e.options.tabPosition;if(t=="left"||t=="right"){var i=e.wrapper.children(".k-content"),n=i.filter(":visible"),r="margin-"+t,a=e.tabGroup,o=u(a);var s=Math.ceil(a.height())-parseInt(n.css("padding-top"),10)-parseInt(n.css("padding-bottom"),10)-parseInt(n.css("border-top-width"),10)-parseInt(n.css("border-bottom-width"),10);setTimeout(function(){i.css(r,o).css("min-height",s)})}},_resize:function(){this._setContentElementsDimensions();this._scrollable()},_sizeScrollWrap:function(e){if(e.is(":visible")){var t=this.options.tabPosition;var i=Math.floor(b(e,true))+(t==="left"||t==="right"?2:this.tabsHeight);this.scrollWrap.css("height",i).css("height")}},_toggleHover:function(e){p(e.currentTarget).toggleClass(I,e.type==W)},_click:function(e){var t=this,i=e.find("."+k),n=i.attr(v),r=t.options.collapsible,a=e.index(),o=t.contentHolder(a),s,l,d=e.parent().children(),u=d.filter("."+E);if(e.closest(".k-widget")[0]!=t.wrapper[0]){return}if(e.is("."+T+(!r?",."+A:""))){u.removeClass(E);t._focused=e;e.addClass(E);t._current(e);if(t._scrollableModeActive){t._scrollTabsToItem(e)}return true}l=i.data(S)||t._contentUrls[a]||n&&(n.charAt(n.length-1)=="#"||n.indexOf("#"+t.element[0].id+"-")!=-1);s=!n||l;if(t.tabGroup.children("[data-animating]").length){return s}if(t.trigger(x,{item:e[0],contentElement:o[0]})){return true}if(s===false){return}if(r&&e.is("."+A)){t.deactivateTab(e);return true}if(t.activateTab(e)){s=true}return s},_scrollable:function(){var e=this,t=e.options,i,n,r,a;if(e._scrollableAllowed()){e.wrapper.addClass("k-tabstrip-scrollable");i=e.wrapper[0].offsetWidth;n=e.tabGroup[0].scrollWidth;if(n>i&&!e._scrollableModeActive){e._nowScrollingTabs=false;e._isRtl=g.support.isRtl(e.element);var o=g.support.touch?"touchstart":"mousedown";var s=g.support.touch?"touchend":"mouseup";var l=g.support.browser;var d=e._isRtl&&!l.msie&&!l.edge;e.wrapper.append(Q("prev","k-i-arrow-60-left")+Q("next","k-i-arrow-60-right"));r=e._scrollPrevButton=e.wrapper.children(".k-tabstrip-prev");a=e._scrollNextButton=e.wrapper.children(".k-tabstrip-next");e.tabGroup.css({marginLeft:u(r)+9,marginRight:u(a)+12});r.on(o+c,function(){e._nowScrollingTabs=true;e._scrollTabsByDelta(t.scrollable.distance*(d?1:-1))});a.on(o+c,function(){e._nowScrollingTabs=true;e._scrollTabsByDelta(t.scrollable.distance*(d?-1:1))});r.add(a).on(s+c,function(){e._nowScrollingTabs=false});e._scrollableModeActive=true;e._toggleScrollButtons()}else if(e._scrollableModeActive&&n<=i){e._scrollableModeActive=false;e.wrapper.removeClass("k-tabstrip-scrollable");e._scrollPrevButton.off().remove();e._scrollNextButton.off().remove();e.tabGroup.css({marginLeft:"",marginRight:""})}else if(!e._scrollableModeActive){e.wrapper.removeClass("k-tabstrip-scrollable")}else{e._toggleScrollButtons()}}},_scrollableAllowed:function(){var e=this.options;if(e.scrollable&&!e.scrollable.distance){e.scrollable={distance:$}}return e.scrollable&&!isNaN(e.scrollable.distance)&&(e.tabPosition=="top"||e.tabPosition=="bottom")},_scrollTabsToItem:function(e){var t=this,i=t.tabGroup,n=g.scrollLeft(i),r=u(e),a=t._isRtl?e.position().left:e.position().left-i.children().first().position().left,o=i[0].offsetWidth,s=Math.ceil(parseFloat(i.css("padding-left"))),l=g.support.browser,d;if(t._isRtl&&(l.mozilla||l.webkit&&l.version>=85)){n=n*-1}if(t._isRtl){if(a<0){d=n+a-(o-n)-s}else if(a+r>o){d=n+a-r+s*2}}else{if(n+o<a+r){d=a+r-o+s*2}else if(n>a){d=a-s}}i.finish().animate({scrollLeft:d},"fast","linear",function(){t._toggleScrollButtons()})},_scrollTabsByDelta:function(e){var t=this;var i=t.tabGroup;var n=g.scrollLeft(i);var r=g.support.browser;if(t._isRtl&&(r.mozilla||r.webkit&&r.version>=85)){n=n*-1}i.finish().animate({scrollLeft:n+e},"fast","linear",function(){if(t._nowScrollingTabs&&!jQuery.fx.off){t._scrollTabsByDelta(e)}else{t._toggleScrollButtons()}})},_toggleScrollButtons:function(){var e=this,t=e.tabGroup,i=g.scrollLeft(t);e._scrollPrevButton.toggle(i!==0);e._scrollNextButton.toggle(i<t[0].scrollWidth-t[0].offsetWidth-1)},deactivateTab:function(e){var t=this,i=t.options.animation,n=i.open,r=_({},i.close),a=r&&"effects"in r;e=t.tabGroup.find(e);r=_(a?r:_({reverse:true},n),{hide:true});if(g.size(n.effects)){e.kendoAddClass(D,{duration:n.duration});e.kendoRemoveClass(A,{duration:n.duration})}else{e.addClass(D);e.removeClass(A)}e.removeAttr("aria-selected");t.contentAnimators.filter("."+A).kendoStop(true,true).kendoAnimate(r).removeClass(A).attr("aria-hidden",true)},activateTab:function(e){if(this.tabGroup.children("[data-animating]").length){return}e=this.tabGroup.find(e);var t=this,i=t.options.animation,n=i.open,r=_({},i.close),a=r&&"effects"in r,o=e.parent().children(),s=o.filter("."+A),l=o.index(e),d=n&&"duration"in n&&"effects"in n;r=_(a?r:_({reverse:true},n),{hide:true});if(g.size(n.effects)){s.kendoRemoveClass(A,{duration:r.duration});e.kendoRemoveClass(I,{duration:r.duration})}else{s.removeClass(A);e.removeClass(I)}var u=t.contentAnimators;if(t.inRequest){t.xhr.abort();t.inRequest=false}if(u.length===0){t.tabGroup.find("."+M).removeClass(M);e.addClass(M).css("z-index");e.addClass(A);t._current(e);t.trigger("change");if(t._scrollableModeActive){t._scrollTabsToItem(e)}return false}var c=u.filter("."+A),f=t.contentHolder(l),h=f.closest(".k-content");t.tabsHeight=b(t.tabGroup)+parseInt(t.wrapper.css("border-top-width"),10)+parseInt(t.wrapper.css("border-bottom-width"),10);t._sizeScrollWrap(c);if(f.length===0){c.removeClass(A).attr("aria-hidden",true).kendoStop(true,true).kendoAnimate(r);return false}e.attr("data-animating",true);var p=(e.children("."+k).data(S)||t._contentUrls[l]||false)&&f.is(O),v=function(){s.removeAttr("aria-selected");e.attr("aria-selected",true);t._current(e);t._sizeScrollWrap(h);h.addClass(A).removeAttr("aria-hidden").kendoStop(true,true).attr("aria-expanded",true).kendoAnimate(_({init:function(){t.trigger(w,{item:e[0],contentElement:f[0]});g.resize(f)}},n,{complete:function(){e.removeAttr("data-animating");t.trigger(V,{item:e[0],contentElement:f[0]});g.resize(f);t.scrollWrap.css("height","").css("height");if(d&&(g.support.browser.msie||g.support.browser.edge)){f.finish().animate({opacity:.9},"fast","linear",function(){f.finish().animate({opacity:1},"fast","linear")})}}}))},m=function(){if(!p){v();t.trigger("change")}else{e.removeAttr("data-animating");t.ajaxRequest(e,f,function(){e.attr("data-animating",true);v();t.trigger("change")})}if(t._scrollableModeActive){t._scrollTabsToItem(e)}};c.removeClass(A);t.tabGroup.find("."+M).removeClass(M);e.addClass(M).css("z-index");if(g.size(n.effects)){s.kendoAddClass(D,{duration:n.duration});e.kendoAddClass(A,{duration:n.duration})}else{s.addClass(D);e.addClass(A)}c.attr("aria-hidden",true);c.attr("aria-expanded",false);if(c.length){c.kendoStop(true,true).kendoAnimate(_({complete:m},r))}else{m()}return true},contentElement:function(e){if(isNaN(e-0)){return a}var t=this.contentElements&&this.contentElements[0]&&!g.kineticScrollNeeded?this.contentElements:this.contentAnimators;var i=p(this.tabGroup.children()[e]).attr("aria-controls");if(t){for(var n=0,r=t.length;n<r;n++){if(t.eq(n).closest(".k-content")[0].id==i){return t[n]}}}return a},contentHolder:function(e){var t=p(this.contentElement(e)),i=t.children(".km-scroll-container");return g.support.touch&&i[0]?i:t},ajaxRequest:function(r,a,o,s){r=this.tabGroup.find(r);var l=this,n=p.ajaxSettings.xhr,e=r.find("."+k),t={},i=r.width()/2,d=false,u=r.find(".k-loading").removeClass("k-complete");if(!u[0]){u=p("<span class='k-loading'/>").prependTo(r)}var c=i*2-u.width();var f=function(){u.animate({marginLeft:(parseInt(u.css("marginLeft"),10)||0)<i?c:0},500,f)};if(g.support.browser.msie&&g.support.browser.version<10){setTimeout(f,40)}s=s||e.data(S)||l._contentUrls[r.index()]||e.attr(v);l.inRequest=true;var h={type:"GET",cache:false,url:s,dataType:"html",data:t,xhr:function(){var t=this,e=n(),i=t.progressUpload?"progressUpload":t.progress?"progress":false;if(e){p.each([e,e.upload],function(){if(this.addEventListener){this.addEventListener("progress",function(e){if(i){t[i](e)}},false)}})}t.noProgress=!(window.XMLHttpRequest&&"upload"in new XMLHttpRequest);return e},progress:function(e){if(e.lengthComputable){var t=parseInt(e.loaded/e.total*100,10)+"%";u.stop(true).addClass("k-progress").css({width:t,marginLeft:0})}},error:function(e,t){if(l.trigger("error",{xhr:e,status:t})){this.complete()}},stopProgress:function(){clearInterval(d);u.stop(true).addClass("k-progress")[0].style.cssText=""},complete:function(e){l.inRequest=false;if(this.noProgress){setTimeout(this.stopProgress,500)}else{this.stopProgress()}if(e.statusText=="abort"){u.remove()}},success:function(e){u.addClass("k-complete");try{var t=this,i=10;if(t.noProgress){u.width(i+"%");d=setInterval(function(){t.progress({lengthComputable:true,loaded:Math.min(i,100),total:100});i+=10},40)}l.angular("cleanup",function(){return{elements:a.get()}});g.destroy(a);a.html(e)}catch(e){var n=window.console;if(n&&n.error){n.error(e.name+": "+e.message+" in "+s)}this.error(this.xhr,"error")}if(o){o.call(l,a)}l.angular("compile",function(){return{elements:a.get()}});l.trigger(j,{item:r[0],contentElement:a[0]})}};if(typeof s==="object"){h=p.extend(true,{},h,s);if(L(h.url)){h.url=h.url()}}l.xhr=p.ajax(h)}});_(z,{renderItem:function(e){e=_({tabStrip:{},group:{}},e);var t=F.empty,i=e.item;return F.item(_(e,{image:i.imageUrl?F.image:t,sprite:i.spriteCssClass?F.sprite:t,itemWrapper:F.itemWrapper},K))},renderContent:function(e){return F.content(_(e,K))}});g.ui.plugin(z)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("editor/table-wizard/table-wizard-dialog",["editor/table-wizard/table-wizard-command","kendo.tabstrip"],e)})(function(){(function(f,e){var h=window.kendo,o={format:"0",min:0},l=["px","em"],d=["solid","dotted","dashed","double","groove","ridge","inset","outset","initial","inherit","none","hidden"];var u=4;var a={dataSource:[{className:"k-icon k-i-table-align-middle-left",value:"left"},{className:"k-icon k-i-table-align-middle-center",value:"center"},{className:"k-icon k-i-table-align-middle-right",value:"right"},{className:"k-icon k-i-align-remove",value:""}],dataTextField:"className",dataValueField:"value",template:"<span class='#: className #' title='#: tooltip #'></span>",valueTemplate:"<span class='k-align-group #: className #' title='#: tooltip #'></span>"};var s={dataSource:[{className:"k-icon k-i-table-align-top-left",value:"left top"},{className:"k-icon k-i-table-align-top-center",value:"center top"},{className:"k-icon k-i-table-align-top-right",value:"right top"},{className:"k-icon k-i-table-align-middle-left",value:"left middle"},{className:"k-icon k-i-table-align-middle-center",value:"center middle"},{className:"k-icon k-i-table-align-middle-right",value:"right middle"},{className:"k-icon k-i-table-align-bottom-left",value:"left bottom"},{className:"k-icon k-i-table-align-bottom-center",value:"center bottom"},{className:"k-icon k-i-table-align-bottom-right",value:"right bottom"},{className:"k-icon k-i-align-remove",value:""}],dataTextField:"className",dataValueField:"value",template:"<span class='#: className #' title='#: tooltip #'></span>",valueTemplate:"<span class='k-align-group #: className #' title='#: tooltip #'></span>"};var c={dataSource:[{className:"k-icon k-i-table-align-top-left",value:"left top"},{className:"k-icon k-i-table-align-top-center",value:"center top"},{className:"k-icon k-i-table-align-top-right",value:"right top"},{className:"k-icon k-i-table-align-bottom-left",value:"left bottom"},{className:"k-icon k-i-table-align-bottom-center",value:"center bottom"},{className:"k-icon k-i-table-align-bottom-right",value:"right bottom"},{className:"k-icon k-i-align-remove",value:""}],dataTextField:"className",dataValueField:"value",template:"<span class='#: className #' title='#: tooltip #'></span>",valueTemplate:"<span class='k-align-group #: className #' title='#: tooltip #'></span>"};var t='<div class="k-editor-dialog k-editor-table-wizard-dialog k-action-window k-popup-edit-form">'+'<div class="k-edit-form-container">'+'<div id="k-table-wizard-tabs" class="k-root-tabs">'+"<ul>"+'<li class="k-state-active">#= messages.tableTab #</li>'+"<li>#= messages.cellTab #</li>"+"<li>#= messages.accessibilityTab #</li>"+"</ul>"+'<div id="k-table-properties">'+'<div class="k-edit-label">'+'<label for="k-editor-table-width">#= messages.width #</label>'+"</div>"+'<div class="k-edit-field">'+'<input type="numeric" id="k-editor-table-width" />'+'<input id="k-editor-table-width-type" aria-label="#= messages.units #" />'+"</div>"+'<div class="k-edit-label">'+'<label for="k-editor-table-height">#= messages.height #</label>'+"</div>"+'<div class="k-edit-field">'+'<input type="numeric" id="k-editor-table-height" />'+'<input id="k-editor-table-height-type" aria-label="#= messages.units #" />'+"</div>"+'<div class="k-edit-label">'+'<label for="k-editor-table-columns">#= messages.columns #</label>'+"</div>"+'<div class="k-edit-field">'+'<input type="numeric" id="k-editor-table-columns" />'+"</div>"+'<div class="k-edit-label">'+'<label for="k-editor-table-rows">#= messages.rows #</label>'+"</div>"+'<div class="k-edit-field">'+'<input type="numeric" id="k-editor-table-rows" />'+"</div>"+'<div class="k-edit-label">'+'<label for="k-editor-table-cell-spacing">#= messages.cellSpacing #</label>'+"</div>"+'<div class="k-edit-field">'+'<input type="numeric" id="k-editor-table-cell-spacing" />'+"</div>"+'<div class="k-edit-label">'+'<label for="k-editor-table-cell-padding">#= messages.cellPadding #</label>'+"</div>"+'<div class="k-edit-field">'+'<input type="numeric" id="k-editor-table-cell-padding" />'+"</div>"+'<div class="k-edit-label">'+'<label for="k-editor-table-alignment">#= messages.alignment #</label>'+"</div>"+'<div class="k-edit-field">'+'<input id="k-editor-table-alignment" class="k-align" />'+"</div>"+'<div class="k-edit-label">'+'<label for="k-editor-table-bg">#= messages.background #</label>'+"</div>"+'<div class="k-edit-field">'+'<input id="k-editor-table-bg" />'+"</div>"+'<div class="k-edit-label">'+'<label for="k-editor-css-class">#= messages.cssClass #</label>'+"</div>"+'<div class="k-edit-field">'+'<input id="k-editor-css-class" class="k-textbox" type="text" />'+"</div>"+'<div class="k-edit-label">'+'<label for="k-editor-id">#= messages.id #</label>'+"</div>"+'<div class="k-edit-field">'+'<input id="k-editor-id" class="k-textbox" type="text" />'+"</div>"+'<div class="k-edit-label">'+'<label for="k-editor-border-width">#= messages.border #</label>'+"</div>"+'<div class="k-edit-field">'+'<input type="numeric" id="k-editor-border-width" />'+'<input id="k-editor-border-color" />'+"</div>"+'<div class="k-edit-label">'+'<label for="k-editor-border-style">#= messages.borderStyle #</label>'+"</div>"+'<div class="k-edit-field">'+'<input id="k-editor-border-style" />'+"</div>"+'<div class="k-edit-label">&nbsp;</div>'+'<div class="k-edit-field">'+'<input id="k-editor-collapse-borders" type="checkbox" class="k-checkbox" />'+'<label for="k-editor-collapse-borders" class="k-checkbox-label">#= messages.collapseBorders #</label>'+"</div>"+"</div>"+'<div id="k-cell-properties">'+'<div class="k-edit-field">'+'<input id="k-editor-selectAllCells" type="checkbox" class="k-checkbox" />'+'<label for="k-editor-selectAllCells" class="k-checkbox-label">#= messages.selectAllCells #</label>'+"</div>"+'<div class="k-edit-label">'+'<label for="k-editor-cell-width">#= messages.width #</label>'+"</div>"+'<div class="k-edit-field">'+'<input type="numeric" id="k-editor-cell-width" />'+'<input id="k-editor-cell-width-type" aria-label="#= messages.units #" />'+"</div>"+'<div class="k-edit-label">'+'<label for="k-editor-cell-height">#= messages.height #</label>'+"</div>"+'<div class="k-edit-field">'+'<input type="numeric" id="k-editor-cell-height" />'+'<input id="k-editor-cell-height-type" aria-label="#= messages.units #" />'+"</div>"+'<div class="k-edit-label">'+'<label for="k-editor-table-cell-margin">#= messages.cellMargin #</label>'+"</div>"+'<div class="k-edit-field">'+'<input type="numeric" id="k-editor-table-cell-margin" />'+"</div>"+'<div class="k-edit-label">'+'<label for="k-editor-table-cells-padding">#= messages.cellPadding #</label>'+"</div>"+'<div class="k-edit-field">'+'<input type="numeric" id="k-editor-table-cells-padding" />'+"</div>"+'<div class="k-edit-label">'+'<label for="k-editor-cell-alignment">#= messages.alignment #</label>'+"</div>"+'<div class="k-edit-field">'+'<input id="k-editor-cell-alignment" class="k-align" />'+"</div>"+'<div class="k-edit-label">'+'<label for="k-editor-cell-bg">#= messages.background #</label>'+"</div>"+'<div class="k-edit-field">'+'<input id="k-editor-cell-bg" />'+"</div>"+'<div class="k-edit-label">'+'<label for="k-editor-cell-css-class">#= messages.cssClass #</label>'+"</div>"+'<div class="k-edit-field">'+'<input id="k-editor-cell-css-class" class="k-textbox" type="text" />'+"</div>"+'<div class="k-edit-label">'+'<label for="k-editor-cell-id">#= messages.id #</label>'+"</div>"+'<div class="k-edit-field">'+'<input id="k-editor-cell-id" class="k-textbox" type="text" />'+"</div>"+'<div class="k-edit-label">'+'<label for="k-editor-cell-border-width">#= messages.border #</label>'+"</div>"+'<div class="k-edit-field">'+'<input type="numeric" id="k-editor-cell-border-width" />'+'<input id="k-editor-cell-border-color" />'+"</div>"+'<div class="k-edit-label">'+'<label for="k-editor-cell-border-style">#= messages.borderStyle #</label>'+"</div>"+'<div class="k-edit-field">'+'<input id="k-editor-cell-border-style" />'+"</div>"+'<div class="k-edit-label">&nbsp;</div>'+'<div class="k-edit-field">'+'<input id="k-editor-wrap-text" type="checkbox" class="k-checkbox" />'+'<label for="k-editor-wrap-text" class="k-checkbox-label">#= messages.wrapText #</label>'+"</div>"+"</div>"+'<div id="k-accessibility-properties">'+'<div class="k-edit-label">'+'<label for="k-editor-table-header-rows">#= messages.headerRows #</label>'+"</div>"+'<div class="k-edit-field">'+'<input type="numeric" id="k-editor-table-header-rows" />'+"</div>"+'<div class="k-edit-label">'+'<label for="k-editor-table-header-columns">#= messages.headerColumns #</label>'+"</div>"+'<div class="k-edit-field">'+'<input type="numeric" id="k-editor-table-header-columns" />'+"</div>"+'<div class="k-edit-label">'+'<label for="k-editor-table-caption">#= messages.caption #</label>'+"</div>"+'<div class="k-edit-field">'+'<input id="k-editor-table-caption" class="k-textbox" type="text"/>'+"</div>"+'<div class="k-edit-label">'+'<label for="k-editor-accessibility-alignment">#= messages.alignment #</label>'+"</div>"+'<div class="k-edit-field">'+'<input id="k-editor-accessibility-alignment" class="k-align" />'+"</div>"+'<div class="k-edit-label">'+'<label for="k-editor-accessibility-summary">#= messages.summary #</label>'+"</div>"+'<div class="k-edit-field">'+'<textarea id="k-editor-accessibility-summary" rows="5" class="k-textbox k-editor-accessibility-summary" placeholder="#= messages.tableSummaryPlaceholder #"></textarea>'+"</div>"+'<div class="k-edit-label">'+'<label for="k-editor-cells-headers">#= messages.associateCellsWithHeaders #</label>'+"</div>"+'<div class="k-edit-field">'+'<select id="k-editor-cells-headers">'+'<option value="none">#= messages.associateNone #</option>'+'<option value="scope">#= messages.associateScope #</option>'+'<option value="ids">#= messages.associateIds #</option>'+"</select>"+"</div>"+"</div>"+"</div>"+'<div class="k-edit-buttons k-state-default">'+'<button class="k-button k-primary k-dialog-ok">#= messages.dialogOk #</button>'+'<button class="k-button k-dialog-close">#= messages.dialogCancel #</button>'+"</div>"+"</div>"+"</div>";var i=h.Class.extend({init:function(e){this.options=e},open:function(){var t=this,i=t.options,e=i.dialogOptions,n=i.table,r,a=i.messages,o=h.support.browser.msie;function s(e){e.preventDefault();t.destroy();r.destroy()}function l(e){t.collectDialogValues(n);s(e);if(t.change){t.change()}i.closeCallback(n)}function d(e){s(e);i.closeCallback()}e.close=d;e.title=a.tableWizard;e.visible=i.visible;r=f(t._dialogTemplate(a)).appendTo(document.body).kendoWindow(e).closest(".k-window").toggleClass("k-rtl",i.isRtl).end().find(".k-dialog-ok").click(l).end().find(".k-dialog-close").click(d).end().data("kendoWindow");var u=r.element;t._initTabStripComponent(u);t._initTableViewComponents(u,n);t._initCellViewComponents(u,n);t._initAccessibilityViewComponents(u,n);r.center();r.open();if(o){var c=u.closest(".k-window").height();u.css("max-height",c)}},_initTabStripComponent:function(e){var t=this.components={};t.tabStrip=e.find("#k-table-wizard-tabs").kendoTabStrip({animation:false}).data("kendoTabStrip")},collectDialogValues:function(){var e=this;var t=e.options.table;e._collectTableViewValues(t);e._collectCellViewValues(t);e._collectAccessibilityViewValues(t)},_collectTableViewValues:function(e){var t=this.components.tableView;var i=e.tableProperties;i.width=t.width.value();i.widthUnit=t.widthUnit.value();i.height=t.height.value();i.columns=t.columns.value();i.rows=t.rows.value();i.heightUnit=t.heightUnit.value();i.cellSpacing=t.cellSpacing.value();i.cellPadding=t.cellPadding.value();i.alignment=t.alignment.value();i.bgColor=t.bgColor.value();i.className=t.className.value;i.id=t.id.value;i.borderWidth=t.borderWidth.value();i.borderColor=t.borderColor.value();i.borderStyle=t.borderStyle.value();i.collapseBorders=t.collapseBorders.checked},_collectCellViewValues:function(e){var t=e.cellProperties={};var i=this.components.cellView;t.selectAllCells=i.selectAllCells.checked;t.width=i.width.value();t.widthUnit=i.widthUnit.value();t.height=i.height.value();t.heightUnit=i.heightUnit.value();t.cellMargin=i.cellMargin.value();t.cellPadding=i.cellPadding.value();t.alignment=i.alignment.value();t.bgColor=i.bgColor.value();t.className=i.className.value;t.id=i.id.value;t.borderWidth=i.borderWidth.value();t.borderColor=i.borderColor.value();t.borderStyle=i.borderStyle.value();t.wrapText=i.wrapText.checked;if(!t.width){t.selectAllCells=true;t.width=100/e.tableProperties.columns;t.widthUnit="%"}},_collectAccessibilityViewValues:function(e){var t=e.tableProperties;var i=this.components.accessibilityView;t.captionContent=i.captionContent.value;t.captionAlignment=i.captionAlignment.value();t.summary=i.summary.value;t.cellsWithHeaders=i.cellsWithHeaders.value();t.headerRows=i.headerRows.value();t.headerColumns=i.headerColumns.value()},_addUnit:function(e,t){if(t&&f.inArray(t,e)==-1){e.push(t)}},_initTableViewComponents:function(e,t){var a=this;var i=a.components;var n=i.tableView={};var r=t.tableProperties=t.tableProperties||{};r.borderStyle=r.borderStyle||"";var o=function(e){var t=a.components.accessibilityView;var i=t.headerColumns;var n=i.value();var r=e.sender.value();if(r<n){i.value(r)}i.max(r)};var s=function(e){var t=a.components.accessibilityView;var i=t.headerRows;var n=i.value();var r=e.sender.value();if(r<n){i.value(r)}i.max(r)};a._addUnit(l,r.widthUnit);a._addUnit(l,r.heightUnit);a._initNumericTextbox(e.find("#k-editor-table-width"),"width",r,n);a._initNumericTextbox(e.find("#k-editor-table-height"),"height",r,n);a._initNumericTextbox(e.find("#k-editor-table-columns"),"columns",r,n,{min:1,value:u,change:o});a._initNumericTextbox(e.find("#k-editor-table-rows"),"rows",r,n,{min:1,value:u,change:s});a._initDropDownList(e.find("#k-editor-table-width-type"),"widthUnit",r,n,l);a._initDropDownList(e.find("#k-editor-table-height-type"),"heightUnit",r,n,l);a._initNumericTextbox(e.find("#k-editor-table-cell-spacing"),"cellSpacing",r,n);a._initNumericTextbox(e.find("#k-editor-table-cell-padding"),"cellPadding",r,n);a._initTableAlignmentDropDown(e.find("#k-editor-table-alignment"),r);a._initColorPicker(e.find("#k-editor-table-bg"),"bgColor",r,n);a._initInput(e.find("#k-editor-css-class"),"className",r,n);a._initInput(e.find("#k-editor-id"),"id",r,n);a._initNumericTextbox(e.find("#k-editor-border-width"),"borderWidth",r,n);a._initColorPicker(e.find("#k-editor-border-color"),"borderColor",r,n);a._initDropDownList(e.find("#k-editor-border-style"),"borderStyle",r,n,d);a._initCheckbox(e.find("#k-editor-collapse-borders"),"collapseBorders",r,n)},_initCellViewComponents:function(e,t){var i=this.components;var n=i.cellView={};t.selectedCells=t.selectedCells=t.selectedCells||[];var r=t.selectedCells[0]||{borderStyle:"",wrapText:true};this._addUnit(l,r.widthUnit);this._addUnit(l,r.heightUnit);this._initCheckbox(e.find("#k-editor-selectAllCells"),"selectAllCells",t.tableProperties,n);this._initNumericTextbox(e.find("#k-editor-cell-width"),"width",r,n);this._initNumericTextbox(e.find("#k-editor-cell-height"),"height",r,n);this._initDropDownList(e.find("#k-editor-cell-width-type"),"widthUnit",r,n,l);this._initDropDownList(e.find("#k-editor-cell-height-type"),"heightUnit",r,n,l);this._initNumericTextbox(e.find("#k-editor-table-cell-margin"),"cellMargin",r,n);this._initNumericTextbox(e.find("#k-editor-table-cells-padding"),"cellPadding",r,n);this._initCellAlignmentDropDown(e.find("#k-editor-cell-alignment"),r);this._initColorPicker(e.find("#k-editor-cell-bg"),"bgColor",r,n);this._initInput(e.find("#k-editor-cell-css-class"),"className",r,n);this._initInput(e.find("#k-editor-cell-id"),"id",r,n);this._initNumericTextbox(e.find("#k-editor-cell-border-width"),"borderWidth",r,n);this._initColorPicker(e.find("#k-editor-cell-border-color"),"borderColor",r,n);this._initDropDownList(e.find("#k-editor-cell-border-style"),"borderStyle",r,n,d);this._initCheckbox(e.find("#k-editor-wrap-text"),"wrapText",r,n)},_initAccessibilityViewComponents:function(e,t){var i=this.components;var n=i.accessibilityView={};var r=t.tableProperties;this._initInput(e.find("#k-editor-table-caption"),"captionContent",r,n);this._initAccessibilityAlignmentDropDown(e.find("#k-editor-accessibility-alignment"),r);this._initInput(e.find("#k-editor-accessibility-summary"),"summary",r,n);this._initAssociationDropDown(e.find("#k-editor-cells-headers"),"cellsWithHeaders",{valuePrimitive:true},r,n);this._initNumericTextbox(e.find("#k-editor-table-header-rows"),"headerRows",r,n,{max:r.rows||u});this._initNumericTextbox(e.find("#k-editor-table-header-columns"),"headerColumns",r,n,{max:r.columns||u})},_initNumericTextbox:function(e,t,i,n,r){var a=n[t]=e.kendoNumericTextBox(r?f.extend({},o,r):o).data("kendoNumericTextBox");if(t in i){a.value(parseInt(i[t],10))}},_initDropDownList:function(e,t,i,n,r){var a=n[t]=e.kendoDropDownList({dataSource:r}).data("kendoDropDownList");this._setComponentValue(a,i,t)},_initTableAlignmentDropDown:function(e,t){var i=this.options.messages;var n=this.components.tableView;var r=a.dataSource;r[0].tooltip=i.alignLeft;r[1].tooltip=i.alignCenter;r[2].tooltip=i.alignRight;r[3].tooltip=i.alignRemove;this._initAlignmentDropDown(e,a,"alignment",t,n)},_initCellAlignmentDropDown:function(e,t){var i=this.options.messages;var n=this.components.cellView;var r=s.dataSource;r[0].tooltip=i.alignLeftTop;r[1].tooltip=i.alignCenterTop;r[2].tooltip=i.alignRightTop;r[3].tooltip=i.alignLeftMiddle;r[4].tooltip=i.alignCenterMiddle;r[5].tooltip=i.alignRightMiddle;r[6].tooltip=i.alignLeftBottom;r[7].tooltip=i.alignCenterBottom;r[8].tooltip=i.alignRightBottom;r[9].tooltip=i.alignRemove;this._initAlignmentDropDown(e,s,"alignment",t,n)},_initAccessibilityAlignmentDropDown:function(e,t){var i=this.options.messages;var n=this.components.accessibilityView;var r=c.dataSource;r[0].tooltip=i.alignLeftTop;r[1].tooltip=i.alignCenterTop;r[2].tooltip=i.alignRightTop;r[3].tooltip=i.alignLeftBottom;r[4].tooltip=i.alignCenterBottom;r[5].tooltip=i.alignRightBottom;r[6].tooltip=i.alignRemove;this._initAlignmentDropDown(e,c,"captionAlignment",t,n)},_initAlignmentDropDown:function(e,t,i,n,r){var a=r[i]=e.kendoDropDownList(t).data("kendoDropDownList");a.list.addClass("k-align").css("width","110px");this._setComponentValue(a,n,i)},_initAssociationDropDown:function(e,t,i,n,r){var a=r[t]=e.kendoDropDownList(i).data("kendoDropDownList");this._setComponentValue(a,n,t)},_setComponentValue:function(e,t,i){if(i in t){e.value(t[i])}},_initColorPicker:function(e,t,i,n){var r=n[t]=e.kendoColorPicker({buttons:false,clearButton:true}).data("kendoColorPicker");if(i[t]){r.value(i[t])}},_initInput:function(e,t,i,n){var r=n[t]=e.get(0);if(t in i){r.value=i[t]}},_initCheckbox:function(e,t,i,n){var r=n[t]=e.get(0);if(t in i){r.checked=i[t]}},destroy:function(){this._destroyComponents(this.components.tableView);this._destroyComponents(this.components.cellView);this._destroyComponents(this.components.accessibilityView);this._destroyComponents(this.components);delete this.components},_destroyComponents:function(e){for(var t in e){if(e[t].destroy){e[t].destroy()}delete e[t]}},_dialogTemplate:function(e){return h.template(t)({messages:e})}});h.ui.editor.TableWizardDialog=i})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.editor",["kendo.combobox","kendo.dropdownlist","kendo.resizable","kendo.window","kendo.colorpicker","kendo.imagebrowser","kendo.numerictextbox","util/undoredostack","editor/main","editor/dom","editor/serializer","editor/range","editor/command","editor/components","editor/toolbar","editor/immutables","editor/plugins/viewhtml","editor/plugins/link","editor/plugins/lists","editor/plugins/formatting","editor/plugins/image","editor/plugins/import","editor/plugins/insert","editor/plugins/export","editor/plugins/indent","editor/plugins/linebreak","editor/plugins/format","editor/plugins/inlineformat","editor/plugins/formatblock","editor/plugins/file","editor/plugins/tables","editor/plugins/clipboard","editor/plugins/keyboard","editor/plugins/exportpdf","editor/plugins/print","editor/plugins/formatpainter","editor/resizing/column-resizing","editor/resizing/row-resizing","editor/resizing/table-resizing","editor/resizing/table-resize-handle","editor/table-wizard/table-wizard-command","editor/table-wizard/table-wizard-dialog"],e)})(function(){var e={id:"editor",name:"Editor",category:"web",description:"Rich text editor component",depends:["combobox","dropdownlist","window","colorpicker"],features:[{id:"editor-imagebrowser",name:"Image Browser",description:"Support for uploading and inserting images",depends:["imagebrowser"]},{id:"editor-resizable",name:"Resize handle",description:"Support for resizing the content area via a resize handle",depends:["resizable"]},{id:"editor-tablewizard",name:"Table wizard dialog",description:"Support for table properties configuration",depends:["tabstrip","button","numerictextbox"]},{id:"editor-pdf-export",name:"PDF export",description:"Export Editor content as PDF",depends:["pdf","drawing"]}]};return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.maskedtextbox",["kendo.core","kendo.floatinglabel"],e)})(function(){var e={id:"maskedtextbox",name:"MaskedTextBox",category:"web",description:"The MaskedTextBox widget allows to specify a mask type on an input field.",depends:["core","floatinglabel"]};(function(u,f){var e=window;var p=e.Math.min;var v=e.kendo;var m=v.caret;var i=v.keys;var t=v.ui;var a=t.Widget;var o=".kendoMaskedTextBox";var s=u.isPlainObject;var n=u.proxy;var l=window.setTimeout;var d="k-label k-input-label";var c="k-state-disabled";var r="k-state-invalid";var h="disabled";var g="readonly";var _="change";var b="mouseup";var w="drop";var k="keydown";var y="paste";var x="input";function C(e){return e+o}var S=C(v.support.propertyChangeEvent?"propertychange":x);function T(e,t){var i=0;while(i<t.length){if(e[i]!==t[i]){break}i++}return i}var D=a.extend({init:function(t,e){var i=this;var n;a.fn.init.call(i,t,e);i._rules=u.extend({},i.rules,i.options.rules);t=i.element;n=t[0];i._wrapper();i._tokenize();i._form();i.element.addClass("k-textbox").attr("autocomplete","off").on("focus"+o,function(){var e=n.value;if(!e){n.value=i._old=i._emptyMask}else{i._togglePrompt(true)}i._oldValue=e;i._timeoutId=l(function(){m(t,0,e?i._maskLength:0)})}).on("focusout"+o,function(){var e=t.val();clearTimeout(i._timeoutId);n.value=i._old="";if(e!==i._emptyMask){n.value=i._old=e}i._change();i._togglePrompt()});var r=t.is("[disabled]")||u(i.element).parents("fieldset").is(":disabled");if(r){i.enable(false)}else{i.readonly(t.is("[readonly]"))}i.value(i.options.value||t.val());i._validationIcon=u("<span class='k-icon k-i-warning'></span>").insertAfter(t);i._label();v.notify(i)},options:{name:"MaskedTextBox",clearPromptChar:false,unmaskOnPost:false,promptChar:"_",culture:"",rules:{},value:"",mask:"",label:null},events:[_],rules:{0:/\d/,9:/\d|\s/,"#":/\d|\s|\+|\-/,L:/[a-zA-Z]/,"?":/[a-zA-Z]|\s/,"&":/\S/,C:/./,A:/[a-zA-Z0-9]/,a:/[a-zA-Z0-9]|\s/},setOptions:function(e){var t=this;a.fn.setOptions.call(t,e);t._rules=u.extend({},t.rules,t.options.rules);t._tokenize();this._unbindInput();this._bindInput();t.value(t.element.val())},destroy:function(){var e=this;if(e.floatingLabel){e.floatingLabel.destroy()}e.element.off(o);if(e._formElement){e._formElement.off("reset",e._resetHandler);e._formElement.off("submit",e._submitHandler)}a.fn.destroy.call(e)},raw:function(){var e=this._unmask(this.element.val(),0);return e.replace(new RegExp(A(this.options.promptChar),"g"),"")},value:function(e){var t=this.element;var i=this._emptyMask;if(e===f){return this.element.val()}if(e===null){e=""}if(!i){this._oldValue=e;t.val(e);return}e=this._unmask(e+"");t.val(e?i:"");this._mask(0,this._maskLength,e);this._unmaskedValue=null;e=t.val();this._oldValue=e;if(v._activeElement()!==t){if(e===i){t.val("")}else{this._togglePrompt()}}},_togglePrompt:function(e){var t=this.element[0];var i=t.value;if(this.options.clearPromptChar){if(!e){i=i.replace(new RegExp(A(this.options.promptChar),"g")," ")}else{i=this._oldValue}t.value=this._old=i}},readonly:function(e){var t=this;this._editable({readonly:e===f?true:e,disable:false});if(t.floatingLabel){t.floatingLabel.readonly(e===f?true:e)}},enable:function(e){var t=this;this._editable({readonly:false,disable:!(e=e===f?true:e)});if(t.floatingLabel){t.floatingLabel.enable(e=e===f?true:e)}},_bindInput:function(){var e=this;if(e._maskLength){if(e.options.$angular){e.element.off(x)}e.element.on(C(k),n(e._keydown,e)).on(C(w),n(e._drop,e)).on(C(_),n(e._trackChange,e)).on(S,n(e._inputHandler,e));if(v.support.browser.msie){var t=v.support.browser.version;if(t>8&&t<11){var i=[C(b),C(w),C(k),C(y)].join(" ");e.element.on(i,n(e._legacyIEInputHandler,e))}}}},_unbindInput:function(){var e=[S,C(k),C(b),C(w),C(y)].join(" ");this.element.off(e)},_editable:function(e){var t=this;var i=t.element;var n=t.wrapper;var r=e.disable;var a=e.readonly;t._unbindInput();if(!a&&!r){i.removeAttr(h).removeAttr(g);n.removeClass(c);t._bindInput()}else{i.attr(h,r).attr(g,a);n.toggleClass(c,r)}},_change:function(){var e=this;var t=e.value();if(t!==e._oldValue){e._oldValue=t;e.trigger(_);e.element.trigger(_)}else if(t===""&&e.__changing){e.element.trigger(_)}},inputChange:function(e){var t=this;var i=t._old;var n=t.element[0];var r=n.value;var a=m(n);var o=a[1];var s=r.length-i.length;var l=v.support.mobileOS;if(t.__dropping&&s<0){return}if(s===-1&&l.android&&l.browser==="chrome"){e=true}var d=p(o,T(r,i));var u=r.substring(d,o);n.value=r.substring(0,d)+t._emptyMask.substring(d);var c=t._mask(d,o,u);var f=t._trimStartPromptChars(r.substring(o),p(s,c-d));var h=t._unmask(f,i.length-f.length);t._mask(c,c,h);if(e){c=t._findCaretPosBackwards(d)}m(n,c);t.__dropping=false},_trimStartPromptChars:function(e,t){var i=this.options.promptChar;while(t-- >0&&e.indexOf(i)===0){e=e.substring(1)}return e},_findCaretPosBackwards:function(e){var t=this._find(e,true);if(t<e){t+=1}return t},_inputHandler:function(){if(v._activeElement()!==this.element[0]){return}this.inputChange(this.__backward)},_legacyIEInputHandler:function(e){var t=this;var i=t.element[0];var n=i.value;var r=e.type;t.__pasting=r==="paste";l(function(){if(r==="mouseup"&&t.__pasting){return}if(i.value&&i.value!==n){t.inputChange(t.__backward)}})},_trackChange:function(){var e=this;e.__changing=true;l(function(){e.__changing=false})},_form:function(){var e=this;var t=e.element;var i=t.attr("form");var n=i?u("#"+i):t.closest("form");if(n[0]){e._resetHandler=function(){l(function(){e.value(t[0].value)})};e._submitHandler=function(){e.element[0].value=e._old=e.raw()};if(e.options.unmaskOnPost){n.on("submit",e._submitHandler)}e._formElement=n.on("reset",e._resetHandler)}},_keydown:function(e){var t=e.keyCode;this.__backward=t===i.BACKSPACE;if(t===i.ENTER){this._change()}},_drop:function(){this.__dropping=true},_find:function(e,t){var i=this.element.val()||this._emptyMask;var n=1;if(t===true){n=-1}while(e>-1||e<=this._maskLength){if(i.charAt(e)!==this.tokens[e]){return e}e+=n}return-1},_mask:function(e,t,i,n){var r=this.element[0];var a=r.value||this._emptyMask;var o=this.options.promptChar;var s;var l=0;var d;var u;var c;e=this._find(e,n);if(e>t){t=e}d=this._unmask(a.substring(t),t);i=this._unmask(i,e);s=i.length;if(i){d=d.replace(new RegExp("^_{0,"+s+"}"),"")}i+=d;a=a.split("");u=i.charAt(l);while(e<this._maskLength){a[e]=u||o;u=i.charAt(++l);if(c===f&&l>s){c=e}e=this._find(e+1)}r.value=this._old=a.join("");if(v._activeElement()===r){if(c===f){c=this._maskLength}m(r,c)}return c},_unmask:function(e,t){if(!e){return""}if(this._unmaskedValue===e){return this._unmaskedValue}e=(e+"").split("");var i;var n;var r=0;var a=t||0;var o=this.options.promptChar;var s=e.length;var l=this.tokens.length;var d="";while(a<l){i=e[r];n=this.tokens[a];if(i===n||i===o){d+=i===o?o:"";r+=1;a+=1}else if(typeof n!=="string"){if(n&&n.test&&n.test(i)||u.isFunction(n)&&n(i)){d+=i;a+=1}else{if(s===1){this._blinkInvalidState()}}r+=1}else{a+=1}if(r>=s){break}}this._unmaskedValue=d;return d},_label:function(){var e=this;var t=e.element;var i=e.options;var n=t.attr("id");var r;var a;if(i.label!==null){r=s(i.label)?i.label.floating:false;a=s(i.label)?i.label.content:i.label;if(r){e._floatingLabelContainer=e.wrapper.wrap("<span></span>").parent();e.floatingLabel=new v.ui.FloatingLabel(e._floatingLabelContainer,{widget:e})}if(v.isFunction(a)){a=a.call(e)}if(!a){a=""}if(!n){n=i.name+"_"+v.guid();t.attr("id",n)}e._inputLabel=u("<label class='"+d+"' for='"+n+"'>"+a+"</label>'").insertBefore(e.wrapper)}},_wrapper:function(){var e=this;var t=e.element;var i=t[0];var n=t.wrap("<span class='k-widget k-widget-2021 k-maskedtextbox'></span>").parent();n[0].style.cssText=i.style.cssText;i.style.width="100%";e.wrapper=n.addClass(i.className).removeClass("input-validation-error")},_blinkInvalidState:function(){var e=this;e.wrapper.addClass(r);clearTimeout(e._invalidStateTimeout);e._invalidStateTimeout=l(n(e._removeInvalidState,e),100)},_removeInvalidState:function(){var e=this;e.wrapper.removeClass(r);e._invalidStateTimeout=null},_tokenize:function(){var e=[];var t=0;var i=this.options.mask||"";var n=i.split("");var r=n.length;var a=0;var o;var s;var l="";var d=this.options.promptChar;var u=v.getCulture(this.options.culture).numberFormat;var c=this._rules;for(;a<r;a++){o=n[a];s=c[o];if(s){e[t]=s;l+=d;t+=1}else{if(o==="."||o===","){o=u[o]}else if(o==="$"){o=u.currency.symbol}else if(o==="\\"){a+=1;o=n[a]}o=o.split("");for(var f=0,h=o.length;f<h;f++){e[t]=o[f];l+=o[f];t+=1}}}this.tokens=e;this._emptyMask=l;this._maskLength=l.length}});function A(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}t.plugin(D)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.toolbar",["kendo.core","kendo.userevents","kendo.popup"],e)})(function(){var e={id:"toolbar",name:"ToolBar",category:"web",description:"The ToolBar widget displays one or more command buttons divided into groups.",depends:["core"]};(function(p,r){var d=window.kendo,i=d.Class,a=d.ui.Widget,o=p.proxy,u=d.isFunction,v=d.keys,s=d._outerWidth,l=".kendoToolBar",c="k-toolbar",f="k-button",h="k-overflow-button",n="k-toggle-button",m="k-button-group",g="k-split-button",_="k-separator",b="k-spacer",w="spacer",L="k-popup",H="k-toolbar-resizable",k="k-state-active",y="k-state-disabled",x="k-state-hidden",C="k-hidden",N="k-group-start",O="k-group-end",V="k-primary",W="aria-disabled",U="aria-pressed",S="k-icon",j="k-i-",G="k-button-icon",q="k-button-icontext",$="k-list-container k-split-container",K="k-split-button-arrow",T="k-overflow-anchor",Y="k-overflow-container",Q="k-toolbar-first-visible",X="k-toolbar-last-visible",D="click",Z="toggle",J="open",ee="close",te="overflowOpen",ie="overflowClose",ne="never",A="auto",re="always",E="k-overflow-hidden",ae="_optionlist",I=d.attr("uid");d.toolbar={};var M={overflowAnchor:'<div tabindex="0" class="k-overflow-anchor k-button" title="More tools" role="button"></div>',overflowContainer:'<ul class="k-overflow-container k-list-container"></ul>'};d.toolbar.registerComponent=function(e,t,i){M[e]={toolbar:t,overflow:i}};var e=d.Class.extend({addOverflowAttr:function(){this.element.attr(d.attr("overflow"),this.options.overflow||A)},addUidAttr:function(){this.element.attr(I,this.options.uid)},addIdAttr:function(){if(this.options.id){this.element.attr("id",this.options.id)}},addOverflowIdAttr:function(){if(this.options.id){this.element.attr("id",this.options.id+"_overflow")}},attributes:function(){if(this.options.attributes){this.element.attr(this.options.attributes)}},show:function(){this.element.removeClass(x);this.element.removeClass(C);this.options.hidden=false},hide:function(){this.element.addClass(x);this.element.addClass(C);if(this.overflow&&this.overflowHidden){this.overflowHidden()}this.options.hidden=true},remove:function(){this.element.remove()},enable:function(e){if(e===r){e=true}this.element.toggleClass(y,!e);this.element.attr(W,!e);this.options.enable=e},twin:function(){var e=this.element.attr(I);if(this.overflow&&this.options.splitContainerId){return p("#"+this.options.splitContainerId).find("["+I+"='"+e+"']").data(this.options.type)}else if(this.overflow){return this.toolbar.element.find("["+I+"='"+e+"']").data(this.options.type)}else if(this.toolbar.options.resizable){return this.toolbar.popup.element.find("["+I+"='"+e+"']").data(this.options.type)}}});d.toolbar.Item=e;var R=e.extend({init:function(e,t){var i=e.useButtonTag?p('<button tabindex="0"></button>'):p('<a role="button" href tabindex="0"></a>');this.element=i;this.options=e;this.toolbar=t;this.attributes();if(e.primary){i.addClass(V)}if(e.togglable){i.addClass(n);this.toggle(e.selected)}if(e.url!==r&&!e.useButtonTag){i.attr("href",e.url);if(e.mobile){i.attr(d.attr("role"),"button")}}if(e.group){i.attr(d.attr("group"),e.group);this.group=this.toolbar.addToGroup(this,e.group)}if(!e.togglable&&e.click&&u(e.click)){this.clickHandler=e.click}if(e.togglable&&e.toggle&&u(e.toggle)){this.toggleHandler=e.toggle}},toggle:function(e,t){e=!!e;if(this.group&&e){this.group.select(this)}else if(!this.group){this.select(e)}if(t&&this.twin()){this.twin().toggle(e)}},getParentGroup:function(){if(this.options.isChild){return this.element.closest("."+m).data("buttonGroup")}},_addGraphics:function(){var e=this.element,t=this.options.icon,i=this.options.spriteCssClass,n=this.options.imageUrl,r,a,o;if(i||n||t){r=true;e.contents().filter(function(){return!p(this).hasClass("k-sprite")&&!p(this).hasClass(S)&&!p(this).hasClass("k-image")}).each(function(e,t){if(t.nodeType==1||t.nodeType==3&&d.trim(t.nodeValue).length>0){r=false}});if(r){e.addClass(G)}else{e.addClass(q)}}if(t){a=e.children("span."+S).first();if(!a[0]){a=p('<span class="'+S+'"></span>').prependTo(e)}a.addClass(j+t)}else if(i){a=e.children("span.k-sprite").first();if(!a[0]){a=p('<span class="k-sprite '+S+'"></span>').prependTo(e)}a.addClass(i)}else if(n){o=e.children("img.k-image").first();if(!o[0]){o=p('<img alt="icon" class="k-image" />').prependTo(e)}o.attr("src",n)}}});d.toolbar.Button=R;var F=R.extend({init:function(e,t){R.fn.init.call(this,e,t);var i=this.element;i.addClass(f);this.addIdAttr();if(e.align){i.addClass("k-align-"+e.align)}if(e.showText!="overflow"&&e.text){if(e.mobile){i.html('<span class="km-text">'+e.text+"</span>")}else{i.html(e.text)}}e.hasIcon=e.showIcon!="overflow"&&(e.icon||e.spriteCssClass||e.imageUrl);if(e.hasIcon){this._addGraphics()}this.addUidAttr();this.addOverflowAttr();this.enable(e.enable);if(e.hidden){this.hide()}this.element.data({type:"button",button:this})},select:function(e){if(e===r){e=false}if(this.options.togglable){this.element.attr(U,e)}this.element.toggleClass(k,e);this.options.selected=e}});d.toolbar.ToolBarButton=F;var P=R.extend({init:function(e,t){this.overflow=true;R.fn.init.call(this,p.extend({},e),t);var i=this.element;if(e.showText!="toolbar"&&e.text){if(e.mobile){i.html('<span class="km-text">'+e.text+"</span>")}else{i.html('<span class="k-text">'+e.text+"</span>")}}e.hasIcon=e.showIcon!="toolbar"&&(e.icon||e.spriteCssClass||e.imageUrl);if(e.hasIcon){this._addGraphics()}if(!e.isChild){this._wrap()}this.addOverflowIdAttr();this.attributes();this.addUidAttr();this.addOverflowAttr();this.enable(e.enable);i.addClass(h+" "+f);if(e.hidden){this.hide()}if(e.togglable){this.toggle(e.selected)}this.element.data({type:"button",button:this})},_wrap:function(){this.element=this.element.wrap("<li></li>").parent()},overflowHidden:function(){this.element.addClass(E)},select:function(e){if(e===r){e=false}if(this.options.isChild){this.element.toggleClass(k,e)}else{this.element.find(".k-button").toggleClass(k,e)}this.options.selected=e}});d.toolbar.OverflowButton=P;d.toolbar.registerComponent("button",F,P);var t=e.extend({createButtons:function(e){var t=this.options;var i=t.buttons||[];var n;for(var r=0;r<i.length;r++){if(!i[r].uid){i[r].uid=d.guid()}n=new e(p.extend({mobile:t.mobile,isChild:true,type:"button"},i[r]),this.toolbar);n.element.appendTo(this.element)}},refresh:function(){this.element.children().filter(":not('."+x+"'):first").addClass(N);this.element.children().filter(":not('."+x+"'):last").addClass(O)}});d.toolbar.ButtonGroup=t;var oe=t.extend({init:function(e,t){var i=this.element=p("<div></div>");this.options=e;this.toolbar=t;this.addIdAttr();if(e.align){i.addClass("k-align-"+e.align)}this.createButtons(F);this.attributes();this.addUidAttr();this.addOverflowAttr();this.refresh();i.addClass(m);this.element.data({type:"buttonGroup",buttonGroup:this})}});d.toolbar.ToolBarButtonGroup=oe;var se=t.extend({init:function(e,t){var i=this.element=p("<li></li>");this.options=e;this.toolbar=t;this.overflow=true;this.addOverflowIdAttr();this.createButtons(P);this.attributes();this.addUidAttr();this.addOverflowAttr();this.refresh();i.addClass((e.mobile?"":m)+" k-overflow-group");this.element.data({type:"buttonGroup",buttonGroup:this})},overflowHidden:function(){this.element.addClass(E)}});d.toolbar.OverflowButtonGroup=se;d.toolbar.registerComponent("buttonGroup",oe,se);var le=e.extend({init:function(e,t){var i=this.element=p('<div class="'+g+'" tabindex="0"></div>');this.options=e;this.toolbar=t;this.mainButton=new F(p.extend({},e,{hidden:false}),t);this.arrowButton=p('<a class="'+f+" "+K+'"><span class="'+(e.mobile?"km-icon km-arrowdown":"k-icon k-i-arrow-60-down")+'"></span></a>');this.popupElement=p('<ul class="'+$+'"></ul>');this.mainButton.element.removeAttr("href tabindex").appendTo(i);this.arrowButton.appendTo(i);this.popupElement.appendTo(i);if(e.align){i.addClass("k-align-"+e.align)}if(!e.id){e.id=e.uid}i.attr("id",e.id+"_wrapper");this.addOverflowAttr();this.addUidAttr();this.createMenuButtons();this.createPopup();this._navigatable();this.mainButton.main=true;this.enable(e.enable);if(e.hidden){this.hide()}i.data({type:"splitButton",splitButton:this,kendoPopup:this.popup})},_navigatable:function(){var i=this;i.popupElement.on("keydown"+l,"."+f,function(e){var t=p(e.target).parent();e.preventDefault();if(e.keyCode===v.ESC||e.keyCode===v.TAB||e.altKey&&e.keyCode===v.UP){i.toggle();i.focus()}else if(e.keyCode===v.DOWN){B(t,"next").focus()}else if(e.keyCode===v.UP){B(t,"prev").focus()}else if(e.keyCode===v.SPACEBAR||e.keyCode===v.ENTER){i.toolbar.userEvents.trigger("tap",{target:p(e.target)})}else if(e.keyCode===v.HOME){t.parent().find(":kendoFocusable").first().focus()}else if(e.keyCode===v.END){t.parent().find(":kendoFocusable").last().focus()}})},createMenuButtons:function(){var e=this.options;var t=e.menuButtons;var i;for(var n=0;n<t.length;n++){i=new F(p.extend({mobile:e.mobile,type:"button",click:e.click},t[n]),this.toolbar);i.element.wrap("<li></li>").parent().appendTo(this.popupElement)}},createPopup:function(){var i=this;var e=this.options;var n=this.element;this.popupElement.attr("id",e.id+ae).attr(I,e.rootUid);if(e.mobile){this.popupElement=me(this.popupElement)}this.popup=this.popupElement.kendoPopup({appendTo:e.mobile?p(e.mobile).children(".km-pane"):null,anchor:n,isRtl:this.toolbar._isRtl,copyAnchorStyles:false,animation:e.animation,open:function(e){var t=i.toolbar.trigger(J,{target:n});if(t){e.preventDefault();return}i.adjustPopupWidth(e.sender)},activate:function(){this.element.find(":kendoFocusable").first().focus()},close:function(e){var t=i.toolbar.trigger(ee,{target:n});if(t){e.preventDefault()}n.focus()}}).data("kendoPopup");this.popup.element.on(D+l,"a.k-button",z)},adjustPopupWidth:function(e){var t=e.options.anchor,i=s(t),n;d.wrap(e.element).addClass("k-split-wrapper");if(e.element.css("box-sizing")!=="border-box"){n=i-(s(e.element)-e.element.width())}else{n=i}e.element.css({fontFamily:t.css("font-family"),"min-width":n})},remove:function(){this.popup.element.off(D+l,"a.k-button");this.popup.destroy();this.element.remove()},toggle:function(){if(this.options.enable||this.popup.visible()){this.popup.toggle()}},enable:function(e){if(e===r){e=true}this.mainButton.enable(e);this.element.toggleClass(y,!e);this.element.attr(W,!e);this.options.enable=e},focus:function(){this.element.focus()},hide:function(){if(this.popup){this.popup.close()}this.element.addClass(x);this.element.addClass(C);this.options.hidden=true},show:function(){this.element.removeClass(x);this.element.removeClass(C);this.options.hidden=false}});d.toolbar.ToolBarSplitButton=le;var de=e.extend({init:function(e,t){var i=this.element=p('<li class="'+g+'"></li>'),n=e.menuButtons,r,a;this.options=e;this.toolbar=t;this.overflow=true;a=(e.id||e.uid)+ae;this.mainButton=new P(p.extend({isChild:true},e));this.mainButton.element.appendTo(i);for(var o=0;o<n.length;o++){r=new P(p.extend({mobile:e.mobile,type:"button",splitContainerId:a,isChild:true},n[o],{click:e.click}),this.toolbar);r.element.appendTo(i)}this.addUidAttr();this.addOverflowAttr();this.mainButton.main=true;i.data({type:"splitButton",splitButton:this})},overflowHidden:function(){this.element.addClass(E)}});d.toolbar.OverflowSplitButton=de;d.toolbar.registerComponent("splitButton",le,de);var ue=e.extend({init:function(e,t){var i=this.element=p("<div>&nbsp;</div>");this.element=i;this.options=e;this.toolbar=t;this.attributes();this.addIdAttr();this.addUidAttr();this.addOverflowAttr();i.addClass(_);i.data({type:"separator",separator:this})}});var ce=e.extend({init:function(e,t){var i=this.element=p("<li>&nbsp;</li>");this.element=i;this.options=e;this.toolbar=t;this.overflow=true;this.attributes();this.addUidAttr();this.addOverflowIdAttr();i.addClass(_);i.data({type:"separator",separator:this})},overflowHidden:function(){this.element.addClass(E)}});d.toolbar.registerComponent("separator",ue,ce);var fe=e.extend({init:function(e,t){var i=this.element=p("<div>&nbsp;</div>");this.element=i;this.options=e;this.toolbar=t;i.addClass(b);i.data({type:w})}});d.toolbar.registerComponent(w,fe);var he=e.extend({init:function(e,t,i){var n=u(e)?e(t):e;if(!(n instanceof jQuery)){n=p("<div></div>").html(n)}else{n=n.wrap("<div></div>").parent()}this.element=n;this.options=t;this.options.type="template";this.toolbar=i;this.attributes();this.addUidAttr();this.addIdAttr();this.addOverflowAttr();n.data({type:"template",template:this})}});d.toolbar.TemplateItem=he;var pe=e.extend({init:function(e,t,i){var n=u(e)?p(e(t)):p(e);if(!(n instanceof jQuery)){n=p("<li></li>").html(n)}else{n=n.wrap("<li></li>").parent()}this.element=n;this.options=t;this.options.type="template";this.toolbar=i;this.overflow=true;this.attributes();this.addUidAttr();this.addOverflowIdAttr();this.addOverflowAttr();n.data({type:"template",template:this})},overflowHidden:function(){this.element.addClass(E)}});d.toolbar.OverflowTemplateItem=pe;function ve(e){if(!e.target.is(".k-toggle-button")){e.target.toggleClass(k,e.type=="press")}}function me(e){e=p(e);return e.hasClass("km-actionsheet")?e.closest(".km-popup-wrapper"):e.addClass("km-widget km-actionsheet").wrap('<div class="km-actionsheet-wrapper km-actionsheet-tablet km-widget km-popup"></div>').parent().wrap('<div class="km-popup-wrapper k-popup"></div>').parent()}function z(e){if(p(e.target).closest("a.k-button").length){e.preventDefault()}}function B(e,t){var i=t==="next"?p.fn.next:p.fn.prev;var n=t==="next"?p.fn.first:p.fn.last;var r=i.call(e);if(!r.length&&e.is("."+T)){return e}if(r.is(":kendoFocusable")||!r.length){return r}if(r.find(":kendoFocusable").length){return n.call(r.find(":kendoFocusable"))}return B(r,t)}var ge=i.extend({init:function(e){this.name=e;this.buttons=[]},add:function(e){this.buttons[this.buttons.length]=e},remove:function(e){var t=p.inArray(e,this.buttons);this.buttons.splice(t,1)},select:function(e){var t;for(var i=0;i<this.buttons.length;i++){t=this.buttons[i];t.select(false)}e.select(true);if(e.twin()){e.twin().select(true)}}});var _e=a.extend({init:function(e,t){var i=this;a.fn.init.call(i,e,t);t=i.options;e=i.wrapper=i.element;e.addClass(c+" k-widget");this.uid=d.guid();this._isRtl=d.support.isRtl(e);this._groups={};e.attr(I,this.uid);i.isMobile=typeof t.mobile==="boolean"?t.mobile:i.element.closest(".km-root")[0];i.animation=i.isMobile?{open:{effects:"fade"}}:{};if(i.isMobile){e.addClass("km-widget");S="km-icon";j="km-";f="km-button";m="km-buttongroup";k="km-state-active";y="km-state-disabled"}if(t.resizable){i._renderOverflow();e.addClass(H);i.overflowUserEvents=new d.UserEvents(i.element,{threshold:5,allowSelection:true,filter:"."+T,tap:o(i._toggleOverflow,i)});i._resizeHandler=d.onResize(function(){i.resize()})}else{i.popup={element:p([])}}if(t.items&&t.items.length){for(var n=0;n<t.items.length;n++){i.add(t.items[n])}if(t.resizable){i._shrink(i.element.innerWidth())}}i.userEvents=new d.UserEvents(document,{threshold:5,allowSelection:true,filter:"["+I+"="+this.uid+"] a."+f+", "+"["+I+"="+this.uid+"] ."+h,tap:o(i._buttonClick,i),press:ve,release:ve});i.element.on(D+l,"a.k-button",z);i._navigatable();if(t.resizable){i.popup.element.on(D+l,+"a.k-button",z)}if(t.resizable){this._toggleOverflowAnchor()}d.notify(i)},events:[D,Z,J,ee,te,ie],options:{name:"ToolBar",items:[],resizable:true,mobile:null},addToGroup:function(e,t){var i;if(!this._groups[t]){i=this._groups[t]=new ge}else{i=this._groups[t]}i.add(e);return i},destroy:function(){var e=this;e.element.find("."+g).each(function(e,t){p(t).data("kendoPopup").destroy()});e.element.off(l,"a.k-button");e.userEvents.destroy();if(e.options.resizable){d.unbindResize(e._resizeHandler);e.overflowUserEvents.destroy();e.popup.element.off(l,"a.k-button");e.popup.destroy()}a.fn.destroy.call(e)},add:function(e){var t=M[e.type],i=e.template,n,r=this,a=r.isMobile?"":"k-item k-state-default",o=e.overflowTemplate,s;p.extend(e,{uid:d.guid(),animation:r.animation,mobile:r.isMobile,rootUid:r.uid});if(e.menuButtons){for(var l=0;l<e.menuButtons.length;l++){p.extend(e.menuButtons[l],{uid:d.guid()})}}if(i&&!o||e.type===w){e.overflow=ne}else if(!e.overflow){e.overflow=A}if(e.overflow!==ne&&r.options.resizable){if(o){s=new pe(o,e,r)}else if(t){s=new t.overflow(e,r);s.element.addClass(a)}if(s){if(e.overflow===A){s.overflowHidden()}s.element.appendTo(r.popup.container);r.angular("compile",function(){return{elements:s.element.get()}})}}if(e.overflow!==re){if(i){n=new he(i,e,r)}else if(t){n=new t.toolbar(e,r)}if(n){n.element.appendTo(r.element);r.angular("compile",function(){return{elements:n.element.get()}})}}},_getItem:function(e){var t,i,n,r=this.options.resizable,a;t=this.element.find(e);if(!t.length){t=p(".k-split-container[data-uid="+this.uid+"]").find(e)}a=t.length?t.data("type"):"";i=t.data(a);if(i){if(i.main){t=t.parent("."+g);a="splitButton";i=t.data(a)}if(r){n=i.twin()}}else if(r){t=this.popup.element.find(e);a=t.length?t.data("type"):"";n=t.data(a);if(n&&n.main){t=t.parent("."+g);a="splitButton";n=t.data(a)}}return{type:a,toolbar:i,overflow:n}},remove:function(e){var t=this._getItem(e);if(t.toolbar){t.toolbar.remove()}if(t.overflow){t.overflow.remove()}this.resize(true)},hide:function(e){var t=this._getItem(e);var i;if(t.toolbar){if(t.toolbar.options.type==="button"&&t.toolbar.options.isChild){i=t.toolbar.getParentGroup();t.toolbar.hide();if(i){i.refresh()}}else if(!t.toolbar.options.hidden){t.toolbar.hide()}}if(t.overflow){if(t.overflow.options.type==="button"&&t.overflow.options.isChild){i=t.overflow.getParentGroup();t.overflow.hide();if(i){i.refresh()}}else if(!t.overflow.options.hidden){t.overflow.hide()}}this.resize(true)},show:function(e){var t=this._getItem(e);var i;if(t.toolbar){if(t.toolbar.options.type==="button"&&t.toolbar.options.isChild){i=t.toolbar.getParentGroup();t.toolbar.show();if(i){i.refresh()}}else if(t.toolbar.options.hidden){t.toolbar.show()}}if(t.overflow){if(t.overflow.options.type==="button"&&t.overflow.options.isChild){i=t.overflow.getParentGroup();t.toolbar.show();if(i){i.refresh()}}else if(t.overflow.options.hidden){t.overflow.show()}}this.resize(true)},enable:function(e,t){var i=this._getItem(e);if(typeof t=="undefined"){t=true}if(i.toolbar){i.toolbar.enable(t)}if(i.overflow){i.overflow.enable(t)}},getSelectedFromGroup:function(e){return this.element.find("."+n+"[data-group='"+e+"']").filter("."+k)},toggle:function(e,t){var i=p(e),n=i.data("button");if(n.options.togglable){if(t===r){t=true}n.toggle(t,true)}},_renderOverflow:function(){var a=this,e=M.overflowContainer,i=a._isRtl,t=i?"left":"right";a.overflowAnchor=p(M.overflowAnchor).addClass(f);a.element.append(a.overflowAnchor);if(a.isMobile){a.overflowAnchor.append('<span class="km-icon km-more"></span>');e=me(e)}else{a.overflowAnchor.append('<span class="k-icon k-i-more-vertical"></span>')}a.popup=new d.ui.Popup(e,{origin:"bottom "+t,position:"top "+t,anchor:a.overflowAnchor,isRtl:i,animation:a.animation,appendTo:a.isMobile?p(a.isMobile).children(".km-pane"):null,copyAnchorStyles:false,open:function(e){var t=d.wrap(a.popup.element).addClass("k-overflow-wrapper");if(!a.isMobile){t.css("margin-left",(i?-1:1)*((s(t)-t.width())/2+1))}else{a.popup.container.css("max-height",parseFloat(p(".km-content:visible").innerHeight())-15+"px")}if(a.trigger(te)){e.preventDefault()}},activate:function(){this.element.find(":kendoFocusable").first().focus()},close:function(e){if(a.trigger(ie)){e.preventDefault()}this.element.focus()}});a.popup.element.on("keydown"+l,"."+f,function(e){var t=p(e.target),i=t.parent(),n=i.is("."+m)||i.is("."+g),r;e.preventDefault();if(e.keyCode===v.ESC||e.keyCode===v.TAB||e.altKey&&e.keyCode===v.UP){a._toggleOverflow();a.overflowAnchor.focus()}else if(e.keyCode===v.DOWN){r=!n||n&&t.is(":last-child")?i:t;B(r,"next").focus()}else if(e.keyCode===v.UP){r=!n||n&&t.is(":first-child")?i:t;B(r,"prev").focus()}else if(e.keyCode===v.SPACEBAR||e.keyCode===v.ENTER){a.userEvents.trigger("tap",{target:p(e.target)});a.overflowAnchor.focus()}else if(e.keyCode===v.HOME){i.parent().find(":kendoFocusable").first().focus()}else if(e.keyCode===v.END){i.parent().find(":kendoFocusable").last().focus()}});if(a.isMobile){a.popup.container=a.popup.element.find("."+Y)}else{a.popup.container=a.popup.element}a.popup.container.attr(I,this.uid)},_toggleOverflowAnchor:function(){var e=false;var t=this._isRtl?"padding-left":"padding-right";if(this.options.mobile){e=this.popup.element.find("."+Y).children(":not(."+E+", ."+L+")").length>0}else{e=this.popup.element.children(":not(."+E+", ."+L+")").length>0}if(e){this.overflowAnchor.css({visibility:"visible",width:""});this.wrapper.css(t,this.overflowAnchor.outerWidth(true))}else{this.overflowAnchor.css({visibility:"hidden",width:"1px"});this.wrapper.css(t,"")}},_buttonClick:function(e){var t=this,i,n,r,a,o=e.target.closest("."+K).length,s,l,d;e.preventDefault();if(o){t._toggle(e);return}n=p(e.target).closest("."+f,t.element);if(n.hasClass(T)){return}r=n.data("button");if(!r&&t.popup){n=p(e.target).closest("."+h,t.popup.container);r=n.parent("li").data("button")}if(!r||!r.options.enable){return}if(r.options.togglable){s=u(r.toggleHandler)?r.toggleHandler:null;r.toggle(!r.options.selected,true);l={target:n,group:r.options.group,checked:r.options.selected,id:r.options.id,item:r};if(s){s.call(t,l)}t.trigger(Z,l)}else{s=u(r.clickHandler)?r.clickHandler:null;l={sender:t,target:n,id:r.options.id,item:r};if(s){s.call(t,l)}t.trigger(D,l)}if(r.options.url){if(r.options.attributes&&r.options.attributes.target){d=r.options.attributes.target}window.open(r.options.url,d||"_self")}if(n.hasClass(h)){t.popup.close()}a=n.closest(".k-split-container");if(a[0]){i=a.data("kendoPopup");(i?i:a.parents(".km-popup-wrapper").data("kendoPopup")).close()}},_navigatable:function(){var e=this;e.element.attr("tabindex",0).on("focusin"+l,function(e){var t=p(e.target);var i=p(this).find(":kendoFocusable:first");if(!t.is("."+c)||i.length===0){return}if(i.is("."+T)){i=B(i,"next")}if(i.length){i[0].focus()}}).on("keydown"+l,o(e._keydown,e))},_keydown:function(e){var t=p(e.target),i=e.keyCode,n=this.element.children(":not(.k-separator):visible"),r=this._isRtl?-1:1;if(i===v.TAB){var a=t.parentsUntil(this.element).last(),o=false,s=false,l=false;if(!n.not("."+T).length){l=true}if(!a.length){a=t}if(a.is("."+T)&&!l){var d=n.last();if(e.shiftKey){e.preventDefault()}if(d.is(":kendoFocusable")){n.last().focus()}else{n.last().find(":kendoFocusable").last().focus()}}if(!e.shiftKey&&n.index(a)===n.length-1){if(a.is("."+m)){o=t.is(":last-child")}else{o=true}}var u=n.index(a)===n.not(".k-overflow-anchor").first().index();if(e.shiftKey&&u){if(a.is("."+m)){s=t.is(":first-child")}else{s=true}}if(o&&this.overflowAnchor&&this.overflowAnchor.css("visibility")!=="hidden"&&!l){e.preventDefault();this.overflowAnchor.focus()}if(s||l&&e.shiftKey){e.preventDefault();var c=this._getPrevFocusable(this.wrapper);if(c){c.focus()}}this._preventNextFocus=false}if(e.altKey&&i===v.DOWN){var f=p(document.activeElement).data("splitButton");var h=p(document.activeElement).is("."+T);if(f){f.toggle()}else if(h){this._toggleOverflow()}return}if((i===v.SPACEBAR||i===v.ENTER)&&!t.is("input, checkbox")){if(i===v.SPACEBAR){e.preventDefault()}if(t.is("."+g)){t=t.children().first();this.userEvents.trigger("tap",{target:t})}else if(i===v.SPACEBAR){this.userEvents.trigger("tap",{target:t})}return}if(i===v.HOME){if(t.is(".k-dropdown")||t.is("input")){return}if(this.overflowAnchor){n.eq(1).focus()}else{n.first().focus()}e.preventDefault()}else if(i===v.END){if(t.is(".k-dropdown")||t.is("input")){return}if(this.overflowAnchor&&p(this.overflowAnchor).css("visibility")!="hidden"){this.overflowAnchor.focus()}else{n.last().focus()}e.preventDefault()}else if(i===v.RIGHT&&!this._preventNextFocus&&!t.is("input, select, .k-dropdown, .k-colorpicker")&&this._getNextElement(e.target,1*r)){this._getNextElement(e.target,1*r).focus();e.preventDefault()}else if(i===v.LEFT&&!this._preventNextFocus&&!t.is("input, select, .k-dropdown, .k-colorpicker")&&this._getNextElement(e.target,-1*r)){this._getNextElement(e.target,-1*r).focus();e.preventDefault()}},_getNextElement:function(e,t){var i=this.element.children(":not(.k-separator):visible");var n=i.index(e)===-1?i.index(e.parentElement):i.index(e);var r=this.overflowAnchor?1:0;var a=t;var o=t===1?i.length-1:r;var s=t===1?r:i.length-1;var l=i[n+t];this._preventNextFocus=false;if(p(e).closest("."+m).length&&!p(e).is(t===1?":last-child":":first-child")){return p(e).closest("."+m).children()[p(e).closest("."+m).children().index(e)+t]}if(this.overflowAnchor&&e===this.overflowAnchor[0]&&t===-1){l=i[i.length-1]}if(n===o){l=!this.overflowAnchor||this.overflowAnchor&&p(this.overflowAnchor).css("visibility")==="hidden"?i[s]:this.overflowAnchor}while(!p(l).is(":kendoFocusable")){if(t===-1&&p(l).closest("."+m).length){l=p(l).children(":not(label, div)").last()}else{l=p(l).children(":not(label, div)").first()}if(!l.length){a=a+t;l=i[n+a];if(!l){return this.overflowAnchor}}this._preventNextFocus=p(l).closest("."+m).length?false:true}return l},_getPrevFocusable:function(e){if(e.is("html")){return e}var t,i,n=e.prevAll();n.each(function(){i=p(this);if(i.is(":kendoFocusable")){t=i;return false}else if(i.find(":kendoFocusable").length>0){t=i.find(":kendoFocusable").last();return false}});if(t){return t}else{return this._getPrevFocusable(e.parent())}},_toggle:function(e){var t=p(e.target).closest("."+g).data("splitButton");e.preventDefault();if(!t.options.enable){return}t.toggle()},_toggleOverflow:function(){this.popup.toggle()},_resize:function(e){var t=e.width;if(!this.options.resizable){return}this.popup.close();this._shrink(t);this._stretch(t);this._markVisibles();this._toggleOverflowAnchor()},_childrenWidth:function(){var e=0;this.element.children(":visible:not(."+x+", ."+b+")").each(function(){e+=s(p(this),true)});return Math.ceil(e)},_shrink:function(e){var t,i;if(e<this._childrenWidth()){i=this.element.children(":visible:not([data-overflow='never'], ."+T+")");for(var n=i.length-1;n>=0;n--){t=i.eq(n);if(e>this._childrenWidth()){break}else{this._hideItem(t)}}}},_stretch:function(e){var t,i;if(e>this._childrenWidth()){i=this.element.children(":hidden:not('."+x+"')");for(var n=0;n<i.length;n++){t=i.eq(n);if(e<this._childrenWidth()||!this._showItem(t,e)){break}}}},_hideItem:function(e){e.addClass(C);if(this.popup){this.popup.container.find(">li[data-uid='"+e.data("uid")+"']").removeClass(E)}},_showItem:function(e,t){e.removeClass(C);var i=s(e,true);e.addClass(C);if(e.length&&t>this._childrenWidth()+i){e.removeClass(C);if(this.popup){this.popup.container.find(">li[data-uid='"+e.data("uid")+"']").addClass(E)}return true}return false},_markVisibles:function(){var e=this.popup.container.children(),t=this.element.children(":not(.k-overflow-anchor)"),i=e.filter(":not(.k-overflow-hidden)"),n=t.filter(":visible");e.add(t).removeClass(Q+" "+X);i.first().add(n.first()).addClass(Q);i.last().add(n.last()).addClass(X)}});d.ui.plugin(_e)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.mediaplayer",["kendo.slider","kendo.toolbar","kendo.dropdownlist","kendo.tooltip"],e)})(function(){var e={id:"mediaplayer",name:"MediaPlayer",category:"web",description:"",depends:["slider","toolbar","dropdownlist","tooltip"]};(function(r,t){var i=window.kendo,n="end",a="pause",o="play",s="ready",l="timeChange",d="volumeChange",u="k-i-full-screen",c="k-i-full-screen-exit",f="k-i-volume-off",h="k-i-volume-down",p="k-i-volume-up",v="k-mediaplayer-quality",m="k-i-play",g="k-i-pause",e="k-mediaplayer-titlebar",_="k-title",B="k-mediaplayer-toolbar-wrap",b="k-mediaplayer-toolbar",w="k-mediaplayer-seekbar",k="k-mediaplayer-volume",y="k-mediaplayer-media",x="k-mediaplayer-overlay",C="k-mediaplayer-yt",S=".",T=i.ui,D=".kendoMediaPlayer",A=new Date(1970,0,1),E=A.getTimezoneOffset()*60,I=i.ui.Widget,M=r.isArray,R={shortTime:"mm:ss",longTime:"HH:mm:ss"},L=i.template,F=r.proxy,P=i.keys,z={htmlPlayer:"<video class='"+y+"'> </video>",titleBar:L("<div class='"+e+"' role='heading'><span class='"+_+"'>Video Title</span></div>"),toolBar:"<div class='"+B+"'><div class='"+b+"'></div></div>",youtubePlayer:"<div class='"+C+"'> </div>",toolBarTime:"<span class='k-mediaplayer-currenttime'>00:00:00</span> / <span class='k-mediaplayer-duration'>00:00:00</span>",slider:"<input class='"+w+"' value='0' title='seekbar' />",volumeSlider:"<input class='"+k+"' title='volume'/>",qualityDropDown:"<input class='"+v+"' title='video quality' />",toolTip:"#= kendo.toString(new Date(value), 'HH:mm:ss') #"};var H=I.extend({init:function(e,t){this.wrapper=r(e);I.fn.init.call(this,e,t);this.wrapper.addClass("k-mediaplayer k-widget");t=this.options;this._currentIndex=0;this._createTitlebar();this._createToolbar();this._createDropDown();this._createSlider();this._createVolumeSlider();this._timers={};this._aria();this._navigatable();if(t.fullScreen){this.fullScreen(true)}if(t.media){this.media(this.options.media)}i.notify(this)},events:[n,a,o,s,l,d],options:{name:"MediaPlayer",autoPlay:false,autoRepeat:false,volume:100,fullScreen:false,mute:false,navigatable:false,forwardSeek:true,media:null,messages:{pause:"Pause",play:"Play",mute:"Mute",unmute:"Unmute",quality:"Quality",fullscreen:"Full Screen"}},_msToTime:function(e){var t=new Date(A.getTime());t.setSeconds(e);return t},_timeToSec:function(e){var t=new Date(e).getTime();return t/1e3},_createTitlebar:function(){this._titleBar=this.wrapper.find(S+e);if(this._titleBar.length===0){this.wrapper.append(z.titleBar);this._titleBar=this.wrapper.find(S+e)}},_createSlider:function(){var e=this.wrapper.find(S+w);if(!this._slider){this._sliderDragChangeHandler=F(this._sliderDragChange,this);this._sliderDraggingHandler=F(this._sliderDragging,this);e=this.wrapper.find(S+w);this._slider=new T.Slider(e[0],{smallStep:1e3,tickPlacement:"none",showButtons:false,change:this._sliderDragChangeHandler,slide:this._sliderDraggingHandler,tooltip:{template:z.toolTip},dragHandleTitle:""})}},_createVolumeSlider:function(){var e=this.wrapper.find(S+k);if(!this._volumeSlider){this._volumeDraggingHandler=F(this._volumeDragging,this);this._volumeChangeHandler=F(this._volumeChange,this);e.width(87);this._volumeSlider=new T.Slider(e[0],{smallStep:1,min:0,max:100,value:this.options.volume,slide:this._volumeDraggingHandler,change:this._volumeChangeHandler,tickPlacement:"none",showButtons:false,tooltip:{enabled:false},dragHandleTitle:""})}},_resetTime:function(){if(this._youTubeVideo){this._ytmedia.seekTo(0,true)}else{this._media.currentTime=0}this._mediaTimeUpdate();r.grep(this._toolBar.options.items,function(e){return!!e.template}).template=z.toolBarTime},_currentUrl:function(){var e=this.media();return M(e.source)?e.source[this._currentIndex].url:e.source},_isYouTubeUrl:function(){return!!this._currentUrl().match("youtube.com/|youtu.be/")},_setPlayerUrl:function(){var e=this._youTubeVideo;this.stop();this._youTubeVideo=this._isYouTubeUrl();if(e!==this._youTubeVideo){this.wrapper.find(S+C).toggle();this.wrapper.find(S+y).toggle()}var t=this._media||this._ytmedia;this._initializePlayer();if(t){this.mute(this.mute());this.volume(this.volume())}if(!this._youTubeVideo){this._videoOverlay.show();this.wrapper.find(S+y+" > source").remove();this.wrapper.find(S+y).attr("src",this._currentUrl());if(this.options.autoPlay){this.play()}}else if(this._ytmedia){if(this._videoOverlay){this._videoOverlay.hide()}if(this.options.autoPlay){this._ytmedia.loadVideoById(this._getMediaId());this._playStateToggle(true)}else{this._ytmedia.cueVideoById(this._getMediaId());this._playStateToggle(true)}}},_createToolbar:function(){var e=this.wrapper.find(S+b);if(e.length===0){this._toolbarClickHandler=F(this._toolbarClick,this);this.wrapper.append(z.toolBar);e=this.wrapper.find(S+b);e.width(this.wrapper.find(S+y).width());this._toolBar=new T.ToolBar(e,{click:this._toolbarClickHandler,resizable:false,items:[{type:"button",attributes:{class:"k-play-button"},icon:"play"},{template:z.toolBarTime,attributes:{class:"k-mediaplayer-currenttime-wrap"}},{type:"separator",attributes:{class:"k-toolbar-spacer"}},{type:"button",attributes:{class:"k-volume-button"},icon:"volume-up"},{template:z.volumeSlider,attributes:{class:"k-mediaplayer-volume-wrap"}},{template:z.qualityDropDown,attributes:{class:"k-mediaplayer-quality-wrap"}},{type:"button",attributes:{class:"k-fullscreen-button"},icon:"full-screen"}]});this._toolBar.wrapper.off("keydown");e.before(z.slider);this._volumeButton=e.find(".k-volume-button");this._fullscreenButton=e.find(".k-fullscreen-button");this._volumeButton.attr("title",this.options.mute?this.options.messages.unmute:this.options.messages.mute);this._volumeButton.attr("aria-label",this.options.mute?this.options.messages.unmute:this.options.messages.mute);this._fullscreenButton.attr("title",this.options.messages.fullscreen);this._fullscreenButton.attr("aria-label",this.options.messages.fullscreen);e.width("auto");this._currentTimeElement=e.find(".k-mediaplayer-currenttime");this._durationElement=e.find(".k-mediaplayer-duration");this._playButton=e.find(".k-play-button");this._playButtonSpan=this._playButton.find(".k-i-play");if(this.options.autoPlay){this._playStateToggle(true)}if(i.support.cssFlexbox===false){r([this._volumeButton[0],e.find(".k-mediaplayer-volume-wrap")[0],e.find(".k-mediaplayer-quality-wrap")[0],this._fullscreenButton[0]]).wrapAll("<div class='k-align-right' />")}e.find(".k-button").addClass("k-flat")}},_createDropDown:function(){var e=this.wrapper.find(S+v);var t=this.media();if(typeof e.data("kendoDropDownList")==="undefined"){this._dropDownSelectHandler=F(this._dropDownSelect,this);this._dropDown=new T.DropDownList(e,{dataTextField:"quality",dataValueField:"url",popup:{position:"bottom",origin:"top",appendTo:this.wrapper},animation:{open:{effects:"slideIn:up",duration:1}},select:this._dropDownSelectHandler});if(t&&M(t.source)){this._dropDown.setDataSource(t.source);this._dropDown.select(0)}this._dropDown.wrapper.addClass("k-button k-flat");this._dropDown.wrapper.attr("title",this.options.messages.quality).hide();this._dropDown.wrapper.find("span.k-i-arrow-60-down").removeClass("k-i-arrow-60-down").addClass("k-icon k-i-hd");this._dropDown.list.addClass("k-quality-list")}},_dropDownSelect:function(e){if(this._currentIndex!==e.item.index()){this._currentIndex=e.item.index();this._setPlayerUrl()}},_toolbarClick:function(e){var t=r(e.target).children().first();var i=t.hasClass(m);if(!this.media()){return}if(t.hasClass(m)||t.hasClass(g)){if(i){this.play()}else{this.pause()}}if(t.hasClass(u)||t.hasClass(c)){if(this._isInFullScreen){t.removeClass(c).addClass(u);this.fullScreen(false)}else{t.removeClass(u).addClass(c);this.fullScreen(true)}}if(t.hasClass(f)||t.hasClass(h)||t.hasClass(p)){var n=this.mute();this.mute(!n)}},_sliderDragging:function(){if(!this.media()){return}this._isDragging=true},_sliderDragChange:function(e){var t=this;var i=e.sender;var n=E*1e3;if(!this.media()){return}t._sliderChangeFired=true;t._isDragging=false;if(!this.options.forwardSeek&&i.value()>this._seekBarLastPosition){setTimeout(function(){i.value(t._seekBarLastPosition)},1)}else if(this._youTubeVideo){t._ytmedia.seekTo(t._timeToSec(e.value-n))}else{t._media.currentTime=t._timeToSec(e.value-n)}t.trigger(l);t._preventPlay=true},_changeVolumeButtonImage:function(e){var t=this._volumeButton;var i=t.find("span");var n=i.attr("class");n=n.substring(0,n.lastIndexOf(" "));if(e===0){i.attr("class",n+" "+f);t.attr("title",this.options.messages.unmute);t.attr("aria-label",this.options.messages.unmute)}else if(e>0&&e<51){i.attr("class",n+" "+h);t.attr("title",this.options.messages.mute);t.attr("aria-label",this.options.messages.mute)}else{i.attr("class",n+" "+p);t.attr("title",this.options.messages.mute);t.attr("aria-label",this.options.messages.mute)}},_volumeDragging:function(e){if(!this.media()){return}this.volume(e.value);this._changeVolumeButtonImage(e.value);this.trigger(d)},_volumeChange:function(e){if(!this.media()){return}this.volume(e.value);this._changeVolumeButtonImage(e.value);this.trigger(d)},_mediaTimeUpdate:function(){var e=this._youTubeVideo?this._ytmedia.getCurrentTime():this._media.currentTime;e=e?e:0;var t=this._msToTime(e);this._currentTimeElement.text(i.toString(t,this._timeFormat));if(!this._isDragging){this._seekBarLastPosition=(e+E)*1e3;this._slider.value(this._seekBarLastPosition)}return this.isPlaying()},_playStateToggle:function(e){if(typeof e==="undefined"){e=this._playButtonSpan.is(S+m)}if(e){this._playButtonSpan.removeClass(m).addClass(g);this._playButton.attr("title",this.options.messages.pause);this._playButton.attr("aria-label",this.options.messages.pause)}else{this._playButtonSpan.removeClass(g).addClass(m);this._playButton.attr("title",this.options.messages.play);this._playButton.attr("aria-label",this.options.messages.play)}},_mediaEnded:function(){this._playStateToggle(false);this._currentTimeElement.text(i.toString(this._msToTime(0),this._timeFormat));this._slider.value((0+E)*1e3);this.trigger(n)},_mediaPlay:function(){this.trigger(o)},_mediaReady:function(){this.trigger(s)},_mediaDurationChange:function(){var e=this._msToTime(this._youTubeVideo?this._ytmedia.getDuration():this._media.duration);this._timeFormat=e.getHours()===0?R.shortTime:R.longTime;this._durationElement.text(i.toString(e,this._timeFormat));this._slider.setOptions({min:A.getTime(),max:e.getTime()});if(!this._isFirstRun){this._resetTime();this._isFirstRun=true}},_createYoutubePlayer:function(){this._mediaTimeUpdateHandler=F(this._mediaTimeUpdate,this);this._mediaDurationChangeHandler=F(this._mediaDurationChange,this);this.wrapper.prepend(z.youtubePlayer);this._ytPlayer=this.wrapper.find(S+C)[0];r(this._ytPlayer).css({width:this.wrapper.width(),height:this.wrapper.height()});if(!window.YT||!window.YT.Player){if(!window.onYouTubeIframeAPIReadyRegister){window.onYouTubeIframeAPIReadyRegister=[];r.getScript("https://www.youtube.com/iframe_api");window.onYouTubeIframeAPIReady=function(){if(window.onYouTubeIframeAPIReadyRegister){for(var e=0;e<window.onYouTubeIframeAPIReadyRegister.length;e++){window.onYouTubeIframeAPIReadyRegister[e]._youtubeApiReady()}}window.onYouTubeIframeAPIReadyRegister.length=0;window.onYouTubeIframeAPIReadyRegister=t}}window.onYouTubeIframeAPIReadyRegister[window.onYouTubeIframeAPIReadyRegister.length]=this}else{this._configurePlayer()}},_poll:function(i,n,r,e){var a=this;if(a._timers[i]!==null){clearTimeout(a._timers[i])}a._timers[i]=setTimeout(function(t){return function e(){if(n.call(t)){a._timers[i]=setTimeout(e,r)}}}(e),r);return a._timers[i]},_youtubeApiReady:function(){this._configurePlayer()},_configurePlayer:function(){var e={autoplay:+this.options.autoPlay,wmode:"transparent",controls:0,rel:0,showinfo:0};this._onYouTubePlayerReady=F(this._onYouTubePlayerReady,this);window.onYouTubePlayerReady=this._onYouTubePlayerReady;this._onPlayerStateChangeHandler=F(this._onPlayerStateChange,this);window.onPlayerStateChange=this._onPlayerStateChange;var t=new window.YT.Player(this.wrapper.find(S+C)[0],{height:this.wrapper.height(),width:this.wrapper.width(),videoId:this._getMediaId(),playerVars:e,events:{onReady:this._onYouTubePlayerReady,onStateChange:this._onPlayerStateChangeHandler}})},_onYouTubePlayerReady:function(e){this._ytmedia=e.target;this._ytmedia.getIframe().style.width="100%";this._ytmedia.getIframe().style.height="100%";this._youTubeVideo=true;this._mediaDurationChangeHandler();if(this.options.autoPlay){this._playStateToggle(true);this._ytmedia.loadVideoById(this._getMediaId())}else{this._ytmedia.cueVideoById(this._getMediaId())}if(this.options.mute){this.mute(true)}this.trigger(s)},_updateTitle:function(){this.titlebar().text(this.media().title||this.media().source)},_onPlayerStateChange:function(e){if(e.data===0){this._slider.value(0);this._paused=false;this._playStateToggle(true);this.trigger(n);if(this.options.autoRepeat){this.play()}}else if(e.data===1){this._mediaDurationChange();this._ytmedia.setVolume(this.volume());if(this._sliderChangeFired){this._sliderChangeFired=false}else{this._uiDisplay(false)}this.trigger(o);this._playStateToggle(true);this._poll("progress",this._mediaTimeUpdate,500,this);this._paused=false}else if(e.data===2){if(!this._paused){this._uiDisplay(true);this._playStateToggle(false);this.trigger(a);this._paused=true}}},_getMediaId:function(){var e=this._currentUrl();var t=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/;var i=e.match(t);if(i&&i[7].length===11){e=i[7]}return e},_mouseClick:function(){if(this.isPaused()){this.play()}else{this.pause()}},_initializePlayer:function(){if(!this._mouseMoveHandler){this._mouseMoveHandler=F(this._mouseMove,this);this._mouseInHandler=F(this._mouseIn,this);this._mouseOutHandler=F(this._mouseOut,this);r(this.wrapper).on("mouseenter"+D,this._mouseInHandler).on("mouseleave"+D,this._mouseOutHandler).on("mousemove"+D,this._mouseMoveHandler)}if(!this._ytmedia&&this._youTubeVideo){this._createYoutubePlayer()}else if(!this._media&&!this._youTubeVideo){this._createHtmlPlayer()}},_createHtmlPlayer:function(){if(!this._videoOverlay){this._mouseClickHanlder=F(this._mouseClick,this);this.wrapper.append("<div class='"+x+"'></div>");this._videoOverlay=this.wrapper.find(".k-mediaplayer-overlay").on("click"+D,this._mouseClickHanlder)}this._mediaTimeUpdateHandler=F(this._mediaTimeUpdate,this);this._mediaDurationChangeHandler=F(this._mediaDurationChange,this);this._mediaEndedHandler=F(this._mediaEnded,this);this._mediaCanPlayHandler=F(this._mediaReady,this);this._mediaPlayHandler=F(this._mediaPlay,this);this._videoOverlay.after(z.htmlPlayer);this._media=this.wrapper.find(S+y)[0];r(this._media).css({width:"100%",height:"100%"});if(this.options.mute){this.mute(true)}this._media.ontimeupdate=this._mediaTimeUpdateHandler;this._media.ondurationchange=this._mediaDurationChangeHandler;this._media.oncanplay=this._mediaCanPlayHandler;this._media.onplay=this._mediaPlayHandler;this._media.onended=this._mediaEndedHandler;this._media.loop=this.options.autoRepeat},_mouseIn:function(){this._uiDisplay(true)},_mouseOut:function(){this._poll("mouseIdle",this._mouseIdle,3e3,this)},_mouseIdle:function(){this._uiDisplay(false);return false},_mouseMove:function(){if(!(this._titleBar.is(":animated")||this._toolBar.element.is(":animated")||this._slider.wrapper.is(":animated"))){this._uiDisplay(true)}this._poll("mouseIdle",this._mouseIdle,3e3,this)},_uiDisplay:function(e){var t="slow";var i=this._titleBar.add(this._toolBar.element.parent());if(e){i.fadeIn(t)}else{i.fadeOut(t);if(this.options.navigatable){this.wrapper.focus()}}},setOptions:function(e){I.fn.setOptions.call(this,e)},destroy:function(){I.fn.destroy.call(this);if(!this.isPaused()){this.pause()}this.element.off(D);this.element.find(S+x).off(D);this._timers=null;this._mouseMoveHandler=null;this._mouseOutHandler=null;this._mouseInHandler=null;this._mouseClickHanlder=null;this._keyDownHandler=null;this._fullscreenHandler=null;this._toolbarClickHandler=null;this._sliderDragChangeHandler=null;this._sliderDraggingHandler=null;this._volumeDraggingHandler=null;this._volumeChangeHandler=null;this._youtubeApiReadyHandler=null;this._onYouTubePlayerReady=null;this._onPlayerStateChangeHandler=null;this._dropDownSelectHandler=null;if(this._youTubeVideo){this._ytmedia.destroy()}else{this._media.ontimeupdate=this._mediaTimeUpdateHandler=null;this._media.ondurationchange=this._mediaDurationChangeHandler=null;this._media.oncanplay=this._mediaCanPlayHandler=null;this._media.onplay=this._mediaPlayHandler=null;this._media.onended=this._mediaEndedHandler=null;this._media.src="";this._media.remove()}this._mouseMoveTimer=null;clearTimeout(this._mouseMoveTimer);i.destroy(this.element)},seek:function(e){if(typeof e==="undefined"){return 1e3*this._youTubeVideo?this._ytmedia.getCurrentTime():this._media?this._media.currentTime:0}var t=e/1e3;if(this._youTubeVideo){if(t+3>=this._ytmedia.getDuration()|0){this._ytmedia.seekTo(this._ytmedia.getDuration()-3|0,true)}else{this._ytmedia.seekTo(t,true)}}else{this._media.currentTime=t}return this},play:function(){if(this._youTubeVideo){this._ytmedia.playVideo()}else{if(i.support.mobileOS){this._uiDisplay(false)}this._media.play()}this._paused=false;this._playStateToggle(true);return this},stop:function(){if(this._youTubeVideo&&this._ytmedia){this._ytmedia.stopVideo()}else if(this._media&&!this._youTubeVideo){if(i.support.mobileOS){this._uiDisplay(true)}this._media.pause();this._media.currentTime=0}this._paused=true;this._playStateToggle(false);return this},pause:function(){if(this._youTubeVideo){this._ytmedia.pauseVideo()}else{if(i.support.mobileOS){this._uiDisplay(true)}this._media.pause()}this._paused=true;this._playStateToggle(false);this.trigger(a);return this},toolbar:function(){return this._toolBar},dropdown:function(){return this._dropDown},titlebar:function(){return this._titleBar},fullScreen:function(e){if(typeof e==="undefined"){return this._isInFullScreen||false}var t=this.element.get(0);if(e){this.element.addClass("k-mediaplayer-fullscreen");if(t.requestFullscreen){t.requestFullscreen()}else if(t.webkitRequestFullscreen){t.webkitRequestFullscreen()}else if(t.mozRequestFullScreen){t.mozRequestFullScreen()}else if(t.msRequestFullscreen){t.msRequestFullscreen()}this._isInFullScreen=true}else{if(document.cancelFullscreen){document.cancelFullscreen()}else if(document.webkitCancelFullScreen){document.webkitCancelFullScreen()}else if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else if(document.msCancelFullscreen){document.msCancelFullscreen()}else if(document.exitFullscreen){document.exitFullscreen()}else if(document.msExitFullscreen){document.msExitFullscreen()}this.element.removeClass("k-mediaplayer-fullscreen");this._isInFullScreen=false}this._slider.resize()},volume:function(e){if(typeof e==="undefined"){return typeof this._volume!=="undefined"?this._volume:this._volume=this.options.volume}this._volume=e;this.mute(e<=0);if(this._youTubeVideo){this._ytmedia.setVolume(this._volume)}else{this._media.volume=this._volume/100}this._volumeSlider.value(e)},mute:function(e){var t=this._youTubeVideo?this._ytmedia&&this._ytmedia.isMuted():this._media&&this._media.muted;if(typeof e==="undefined"||e===t){return t}if(this._youTubeVideo){if(e){this._ytmedia.mute()}else{this._ytmedia.unMute()}}else{this._media.muted=e}if(e){this._volumeSlider.value(0)}else{this._volumeSlider.value(this._media&&this._media.volume*100||this._ytmedia&&this._ytmedia.getVolume())}this.trigger(d);this._changeVolumeButtonImage(this._volumeSlider.value())},isEnded:function(){if(this._youTubeVideo){return this._ytmedia.getPlayerState()===0}else{return this._media.ended}},media:function(e){var t=this.dropdown();if(typeof e==="undefined"){return typeof this._mediaData!=="undefined"?this._mediaData:this._mediaData=this.options.media}if(M(e.source)){t.setDataSource(e.source);t.wrapper.show()}else{t.wrapper.hide()}this._mediaData=e;this._updateTitle();this._setPlayerUrl()},isPaused:function(){return this._paused},isPlaying:function(){return!this.isEnded()&&!this._paused},_aria:function(){this.wrapper.attr("role","region")},_navigatable:function(){this._fullscreenHandler=F(this._fullscreen,this);r(document).on("webkitfullscreenchange mozfullscreenchange fullscreenchange"+D,this._fullscreenHandler);if(this.options.navigatable){this.wrapper.attr("tabIndex",0);this._keyDownHandler=F(this._keyDown,this);this.wrapper.on("keydown"+D,this._keyDownHandler)}},_fullscreen:function(){var e=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;this._uiDisplay(true);this._slider.resize();if(!e){this.wrapper.find('span[class*="k-i-fullscreen"]').removeClass(c).addClass(u);this.fullScreen(false)}},_keyDown:function(e){e.preventDefault();var t=this.wrapper.find('span[class*="k-i-fullscreen"]');if(e.keyCode===P.SPACEBAR){if(this.isPlaying()){this.pause()}else{this.play()}}else if(e.keyCode===P.ENTER&&!this._isInFullScreen){t.removeClass(u).addClass(c);this.fullScreen(true)}else if(e.keyCode===77){var i=this.mute();this.mute(!i)}else if(e.keyCode===P.ESC&&this._isInFullScreen){t.removeClass(c).addClass(u);this.fullScreen(false)}},_error:function(){},_progress:function(){}});T.plugin(H)})(window.kendo.jQuery);return window.kendo},typeof define==="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.pivotgrid",["kendo.dom","kendo.data"],e)})(function(){var e={id:"pivotgrid",name:"PivotGrid",category:"web",description:"The PivotGrid widget is a data summarization tool.",depends:["dom","data","data.xml","sortable"],features:[{id:"pivotgrid-configurator",name:"Configurator",description:"The PivotConfigurator widget allows the user to select data slices displayed in PivotGrid",depends:["pivot.configurator"]},{id:"pivotgrid-filtering",name:"Filtering",description:"Support for filtering",depends:["pivot.fieldmenu"]},{id:"pivotgrid-excel-export",name:"Excel export",description:"Export pivot grid data as Excel spreadsheet",depends:["ooxml"]},{id:"pivotgrid-pdf-export",name:"PDF export",description:"Export pivot grid data as PDF",depends:["pdf","drawing"]},{id:"mobile-scroller",name:"Mobile scroller",description:"Support for kinetic scrolling in mobile device",depends:["mobile.scroller"]}]};(function(b,R){var S=window.kendo,i=S.ui,e=S.Class,B=S.data.Comparer,r=i.Widget,a=S.data.DataSource,L=S._outerWidth,H=S._outerHeight,f={}.toString,o=function(e){return e},N=b.map,s=b.extend,h=S.isFunction,l="change",O="error",d="Measures",V="progress",n="stateReset",u="auto",c="<div></div>",p=".kendoPivotGrid",F="__row_total__",W="dataBinding",U="dataBound",j="expandMember",G="collapseMember",T="k-i-collapse",D="k-i-expand",q="<span>#: data.member.caption || data.member.name #</span>",$='<span class="k-icon k-i-kpi-status-#=data.dataItem.value > 0 ? "open" : data.dataItem.value < 0 ? "deny" : "hold"#" title="#:data.dataItem.value#"></span>',K='<span class="k-icon k-i-kpi-trend-#=data.dataItem.value > 0 ? "increase" : data.dataItem.value < 0 ? "decrease" : "equal"#" title="#:data.dataItem.value#"></span>',Y='#= data.dataItem ? kendo.htmlEncode(data.dataItem.fmtValue || data.dataItem.value) || "&nbsp;" : "&nbsp;" #',Q='<table class="k-pivot-layout">'+"<tr>"+"<td>"+'<div class="k-pivot-rowheaders"></div>'+"</td>"+"<td>"+'<div class="k-pivot-table k-state-default"></div>'+"</td>"+"</tr>"+"</table>";var X="rows";var Z="columns";function J(e){var t=typeof e==="string"?[{name:e}]:e;var i=f.call(t)==="[object Array]"?t:t!==R?[t]:[];return N(i,function(e){if(typeof e==="string"){return{name:e}}return{name:e.name,type:e.type}})}function P(e){var t=typeof e==="string"?[{name:[e],expand:false}]:e;var i=f.call(t)==="[object Array]"?t:t!==R?[t]:[];return N(i,function(e){if(typeof e==="string"){return{name:[e],expand:false}}return{name:f.call(e.name)==="[object Array]"?e.name.slice():[e.name],expand:e.expand}})}function ee(e){if(e.indexOf(" ")!==-1){e='["'+e+'"]'}return e}function te(e,t,i,n){var r,a;var o;var s;if(!i){i=t}if(!n){n=0}s=i.members[n];if(!s||s.measure){return}o=s.children;a=o.length;if(i===t){e[S.stringify([s.name])]=!!a}else if(a){e[S.stringify(z(i,n))]=true}if(a){for(r=0;r<a;r++){te(e,t,o[r],n)}}te(e,t,i,n+1)}function ie(e){var t={};if(e.length){te(t,e[0])}var i=[];for(var n in t){i.push({name:b.parseJSON(n),expand:t[n]})}return i}function ne(e,t){var i=t.tuples||[];var n=i[0];if(n&&e.length<n.members.length){var r=n.members;for(var a=0;a<r.length;a++){if(r[a].measure){continue}var o=false;for(var s=0;s<e.length;s++){if(C(e[s]).indexOf(r[a].hierarchy)===0){o=true;break}}if(!o){e.push({name:[r[a].name],expand:false})}}}}function re(e){var t=[];var i=e.members;for(var n=0;n<i.length;n++){if(i[n].measure){continue}t.push({name:[i[n].name],expand:i[n].children.length>0})}return t}function ae(e,t,i){e=e||{};ne(t,e);if(i.length>1){t.push({name:d,measure:true,children:P(i)})}var n={members:t};if(e.tuples){var r=y(e.tuples,n);if(r.tuple){t=re(r.tuple)}}return t}function oe(i){var n=S.getter(i.field,true);return function(e,t){return i.aggregate(n(e.dataItem),t,e)}}function v(e){return typeof e==="number"&&!isNaN(e)}function m(e){return e&&e.getTime}var se={sum:function(e,t){var i=t.accumulator;if(!v(i)){i=e}else if(v(e)){i+=e}return i},count:function(e,t){return(t.accumulator||0)+1},average:{aggregate:function(e,t){var i=t.accumulator;if(t.count===R){t.count=0}if(!v(i)){i=e}else if(v(e)){i+=e}if(v(e)){t.count++}return i},result:function(e){var t=e.accumulator;if(v(t)){t=t/e.count}return t}},max:function(e,t){var i=t.accumulator;if(!v(i)&&!m(i)){i=e}if(i<e&&(v(e)||m(e))){i=e}return i},min:function(e,t){var i=t.accumulator;if(!v(i)&&!m(i)){i=e}if(i>e&&(v(e)||m(e))){i=e}return i}};var le=e.extend({init:function(e){this.options=s({},this.options,e);this.dimensions=this._normalizeDescriptors("field",this.options.dimensions);this.measures=this._normalizeDescriptors("name",this.options.measures)},_normalizeDescriptors:function(e,t){t=t||{};var i={};var n;if(f.call(t)==="[object Array]"){for(var r=0,a=t.length;r<a;r++){n=t[r];if(typeof n==="string"){i[n]={}}else if(n[e]){i[n[e]]=n}}t=i}return t},_rootTuples:function(e,t){var i=t.length||1;var n=this.dimensions||[];var r,a,o;var s=0;var l;var d=e.length;var u=[];var c=[];if(d||t.length){for(s=0;s<i;s++){r={members:[]};for(l=0;l<d;l++){a=e[l];o=a.split("&");r.members[r.members.length]={children:[],caption:(n[a]||{}).caption||"All",name:a,levelName:a,levelNum:"0",hasChildren:true,parentName:o.length>1?o[0]:R,hierarchy:a}}if(i>1){r.members[r.members.length]={children:[],caption:t[s].caption,name:t[s].descriptor.name,levelName:"MEASURES",levelNum:"0",hasChildren:false,parentName:R,hierarchy:"MEASURES"}}u[u.length]=r}c.push(F)}return{keys:c,tuples:u}},_sortMap:function(e,t){var i=[];var n=[];var r=[];var a;var o;for(o in e){if(!e[o].directParentName){n.push(b.extend({},{name:o,parentName:e[o].parentName}))}}if(!n.length){for(o in e){n.push(b.extend({},{name:o,parentName:e[o].parentName}))}}fe(n,e);for(var s=0;s<t.length;s++){ce(t[s].field.split(".").pop(),n,B.create({field:"name",dir:t[s].dir}))}r=ue(n);for(var l=0;l<r.length;l++){a=e[r[l].name];a.index=l;i[l]=a}return i},_expandedTuples:function(e,t,i,n){var r=i.length||1;var a=this.dimensions||[];var o;var s;var l;var d;var u;var c;var f=[];var h=[];var p;var v;var m;var g;var _;if(n&&n.length&&!b.isEmptyObject(e)){e=this._sortMap(e,n)}for(l in e){d=e[l];p=this._findExpandedMember(t,d.uniquePath);u=f[p.index]||[];c=h[p.index]||[];v=p.member.names;for(o=0;o<r;o++){s={members:[]};for(_=0;_<v.length;_++){if(_===p.member.expandedIdx){s.members[s.members.length]={children:[],caption:d.value,name:d.name,hasChildren:false,levelNum:1,levelName:d.parentName+d.name,parentName:d.parentName,hierarchy:d.parentName+d.name};if(o===0){c.push(z(s,_).join(""))}}else{g=v[_];m=g.split("&");s.members[s.members.length]={children:[],caption:(a[g]||{}).caption||"All",name:g,levelName:g,levelNum:"0",hasChildren:true,parentName:m.length>1?m[0]:R,hierarchy:g}}}if(r>1){s.members[s.members.length]={children:[],caption:i[o].caption,name:i[o].descriptor.name,levelName:"MEASURES",levelNum:"0",hasChildren:true,parentName:R,hierarchy:"MEASURES"}}u[u.length]=s}f[p.index]=u;h[p.index]=c}return{keys:h,tuples:f}},_findExpandedMember:function(e,t){for(var i=0;i<e.length;i++){if(e[i].uniquePath===t){return{member:e[i],index:i}}}},_asTuples:function(e,t,i,n){i=i||[];var r=this._rootTuples(t.root,i);var a=this._expandedTuples(e,t.expanded,i,n);return{keys:[].concat.apply(r.keys,a.keys),tuples:[].concat.apply(r.tuples,a.tuples)}},_measuresInfo:function(e,t){var i=0;var n=e&&e.length;var r=[];var a={};var o={};var s=this.measures||{};var l;var d;for(;i<n;i++){d=e[i].descriptor.name;l=s[d]||{};r.push(d);if(l.result){a[d]=l.result}if(l.format){o[d]=l.format}}return{names:r,formats:o,resultFuncs:a,rowAxis:t}},_toDataArray:function(e,t,i,n){var r=[];var a;var o,s,l,d,u;var c,f,h;var p=1;var v=[];var m;var g=i.length||1;var _=n.length||1;if(t.rowAxis){v=t.names;p=v.length}else{m=t.names}for(s=0;s<g;s++){c=e[i[s]||F];for(u=0;u<p;u++){if(t.rowAxis){m=[v[u]]}for(l=0;l<_;l++){h=n[l]||F;f=c.items[h];if(h===F){a=c.aggregates}else{a=f?f.aggregates:{}}for(d=0;d<m.length;d++){o=m[d];this._addData(r,a[o],t.formats[o],t.resultFuncs[o])}}}}return r},_addData:function(e,t,i,n){var r="";var a;if(t){t=n?n(t):t.accumulator;r=i?S.format(i,t):t}a=e.length;e[a]={ordinal:a,value:t||"",fmtValue:r}},_matchDescriptors:function(e,t,i){var n;var r;var a;var o=t.names;var s=t.expandedIdx;var l;while(s>0){n=o[--s].split("&");if(n.length>1){r=n[0];a=n[1];l=i[r](e);l=l!==R&&l!==null?l.toString():l;if(l!=a){return false}}}return true},_calculateAggregate:function(e,t,i){var n={};var r;var a;for(var o=0;o<e.length;o++){a=e[o].descriptor.name;r=i.aggregates[a]||{};r.accumulator=e[o].aggregator(t,r);n[a]=r}return n},_processColumns:function(e,t,i,n,r,a,o,s){var l;var d;var u;var c;var f,h,p,v;var m=r.dataItem;var g=0;for(;g<t.length;g++){d=t[g];if(!this._matchDescriptors(m,d,i)){continue}v=d.names.slice(0,d.expandedIdx).join("");h=d.names[d.expandedIdx];l=i[h](m);l=l!==R&&l!==null?l.toString():l;p=h;h=h+"&"+l;f=v+h;u=n[f]||{index:o.columnIndex,parentName:p,name:h,directParentName:v.indexOf("&")!==-1?v:"",uniquePath:v+p,childrenMap:{},value:l};if(v&&n[v]&&!n[v].childrenMap[v+p+"&"+l]){n[v].childrenMap[v+p+"&"+l]=true}c=a.items[f]||{aggregates:{}};a.items[f]={index:u.index,aggregates:this._calculateAggregate(e,r,c)};if(s){if(!n[f]){o.columnIndex++}n[f]=u}}},_measureAggregators:function(e){var t=e.measures||[];var i=this.measures||{};var n=[];var r,a,o,s;var l,d;if(t.length){for(o=0,s=t.length;o<s;o++){r=t[o];a=i[r.name];l=null;if(a){d=a.aggregate;if(typeof d==="string"){l=se[d.toLowerCase()];if(!l){throw new Error("There is no such aggregate function")}a.aggregate=l.aggregate||l;a.result=l.result}n.push({descriptor:r,caption:a.caption,result:a.result,aggregator:oe(a)})}}}else{n.push({descriptor:{name:"default"},caption:"default",aggregator:function(){return 1}})}return n},_buildGetters:function(e){var t={};var i;var n;for(var r=0;r<e.length;r++){n=e[r];i=n.split("&");if(i.length>1){t[i[0]]=S.getter(i[0],true)}else{t[n]=S.getter(ee(n),true)}}return t},_parseDescriptors:function(e){var t=ze(e);var i=Fe(t.root);var n=t.expanded;var r=[];for(var a=0;a<n.length;a++){r.push(Pe(n[a].name,i))}return{root:i,expanded:r}},_filter:function(e,t){if(!t){return e}var i;var n=0;var r=t.filters;for(;n<r.length;n++){i=r[n];if(i.operator==="in"){r[n]=this._normalizeFilter(i)}}return new S.data.Query(e).filter(t).data},_normalizeFilter:function(e){var t=e.value.split(",");var i=[];if(!t.length){return t}for(var n=0;n<t.length;n++){i.push({field:e.field,operator:"eq",value:t[n]})}return{logic:"or",filters:i}},process:function(e,t){e=e||[];t=t||{};e=this._filter(e,t.filter);var i=t.measures||[];var n=t.measuresAxis==="rows";var r=t.columns||[];var a=t.rows||[];if(!r.length&&a.length&&(!i.length||i.length&&n)){r=a;a=[];n=false}if(!r.length&&!a.length){n=false}if(!r.length&&i.length){r=P(t.measures)}r=this._parseDescriptors(r);a=this._parseDescriptors(a);var o={};var s={};var l={};var d;var u={columnIndex:0};var c=this._measureAggregators(t);var f=this._buildGetters(r.root);var h=this._buildGetters(a.root);var p=false;var v=r.expanded;var m=a.expanded;var g;var _;var b=m.length!==0;var w,k,y,x;var C,S,T,D;var A,E;var I=e.length;var M=0;if(r.root.length||a.root.length){p=true;for(M=0;M<I;M++){g=e[M];_={dataItem:g,index:M};x=o[F]||{items:{},aggregates:{}};this._processColumns(c,v,f,s,_,x,u,!b);x.aggregates=this._calculateAggregate(c,_,x);o[F]=x;for(w=0;w<m.length;w++){k=m[w];if(!this._matchDescriptors(g,k,h)){this._processColumns(c,v,f,s,_,{items:{},aggregates:{}},u,true);continue}S=k.names.slice(0,k.expandedIdx).join("");y=k.names[k.expandedIdx];T=y;d=h[y](g);d=d!==R?d.toString():d;y=y+"&"+d;C=S+y;l[C]={uniquePath:S+T,parentName:T,name:y,value:d};D=o[C]||{items:{},aggregates:{}};this._processColumns(c,v,f,s,_,D,u,true);D.aggregates=this._calculateAggregate(c,_,D);o[C]=D}}}if(p&&I){if(c.length>1&&(!t.columns||!t.columns.length)){r={root:[],expanded:[]}}A=this._asTuples(s,r,n?[]:c,t.sort?t.sort:[]);E=this._asTuples(l,a,n?c:[],t.sort?t.sort:[]);s=A.tuples;l=E.tuples;o=this._toDataArray(o,this._measuresInfo(c,n),E.keys,A.keys)}else{o=s=l=[]}return{axes:{columns:{tuples:s},rows:{tuples:l}},data:o}}});var de=e.extend({init:function(e,t){this.transport=t;this.options=t.options||{};if(!this.transport.discover){if(h(e.discover)){this.discover=e.discover}}},read:function(e){return this.transport.read(e)},update:function(e){return this.transport.update(e)},create:function(e){return this.transport.create(e)},destroy:function(e){return this.transport.destroy(e)},discover:function(e){if(this.transport.discover){return this.transport.discover(e)}e.success({})},catalog:function(e){var t=this.options||{};if(e===R){return(t.connection||{}).catalog}var i=t.connection||{};i.catalog=e;this.options.connection=i;b.extend(this.transport.options,{connection:i})},cube:function(e){var t=this.options||{};if(e===R){return(t.connection||{}).cube}var i=t.connection||{};i.cube=e;this.options.connection=i;s(true,this.transport.options,{connection:i})}});var g=a.extend({init:function(e){var t=((e||{}).schema||{}).cube;var i="columns";var n;var r={axes:o,cubes:o,catalogs:o,measures:o,dimensions:o,hierarchies:o,levels:o,members:o};if(t){r=b.extend(r,this._cubeSchema(t));this.cubeBuilder=new le(t)}a.fn.init.call(this,s(true,{},{schema:r},e));this.transport=new de(this.options.transport||{},this.transport);this._columns=P(this.options.columns);this._rows=P(this.options.rows);n=this.options.measures||[];if(f.call(n)==="[object Object]"){i=n.axis||"columns";n=n.values||[]}this._measures=J(n);this._measuresAxis=i;this._skipNormalize=0;this._axes={}},_cubeSchema:function(c){return{dimensions:function(){var e=[];var t=c.dimensions;for(var i in t){e.push({name:i,caption:t[i].caption||i,uniqueName:i,defaultHierarchy:i,type:1})}if(c.measures){e.push({name:d,caption:d,uniqueName:d,type:2})}return e},hierarchies:function(){return[]},measures:function(){var e=[];var t=c.measures;for(var i in t){e.push({name:i,caption:i,uniqueName:i,aggregator:i})}return e},members:b.proxy(function(e,t){var i=t.levelUniqueName||t.memberUniqueName;var n=this.options.schema.data;var r=h(n)?n:S.getter(n,true);var a=this.options.data&&r(this.options.data)||this._rawData||[];var o=[];var s;var l;var d=0;var u={};if(i){i=i.split(".")[0]}if(!t.treeOp){o.push({caption:c.dimensions[i].caption||i,childrenCardinality:"1",dimensionUniqueName:i,hierarchyUniqueName:i,levelUniqueName:i,name:i,uniqueName:i});return o}s=S.getter(ee(i),true);for(;d<a.length;d++){l=s(a[d]);if((l||l===0)&&!u[l]){u[l]=true;o.push({caption:l,childrenCardinality:"0",dimensionUniqueName:i,hierarchyUniqueName:i,levelUniqueName:i,name:l,uniqueName:l})}}return o},this)}},options:{serverSorting:true,serverPaging:true,serverFiltering:true,serverGrouping:true,serverAggregates:true},catalog:function(e){if(e===R){return this.transport.catalog()}this.transport.catalog(e);this._mergeState({});this._axes={};this.data([])},cube:function(e){if(e===R){return this.transport.cube()}this.transport.cube(e);this._axes={};this._mergeState({});this.data([])},axes:function(){return this._axes},columns:function(e){if(e===R){return this._columns}this._skipNormalize+=1;this._clearAxesData=true;this._columns=P(e);this.query({columns:e,rows:this.rowsAxisDescriptors(),measures:this.measures(),sort:this.sort(),filter:this.filter()})},rows:function(e){if(e===R){return this._rows}this._skipNormalize+=1;this._clearAxesData=true;this._rows=P(e);this.query({columns:this.columnsAxisDescriptors(),rows:e,measures:this.measures(),sort:this.sort(),filter:this.filter()})},measures:function(e){if(e===R){return this._measures}this._skipNormalize+=1;this._clearAxesData=true;this.query({columns:this.columnsAxisDescriptors(),rows:this.rowsAxisDescriptors(),measures:J(e),sort:this.sort(),filter:this.filter()})},measuresAxis:function(){return this._measuresAxis||"columns"},_expandPath:function(e,t){var i=t==="columns"?"columns":"rows";var n=t==="columns"?"rows":"columns";var r=P(e);var a=C(r[r.length-1]);this._lastExpanded=i;r=ae(this.axes()[i],r,this.measures());for(var o=0;o<r.length;o++){var s=C(r[o]);if(s===a){if(r[o].expand){return}r[o].expand=true}else{r[o].expand=false}}var l={};l[i]=r;l[n]=this._descriptorsForAxis(n);this._query(l)},_descriptorsForAxis:function(e){var t=this.axes();var i=this[e]()||[];if(t&&t[e]&&t[e].tuples&&t[e].tuples[0]){i=ie(t[e].tuples||[])}return i},columnsAxisDescriptors:function(){return this._descriptorsForAxis("columns")},rowsAxisDescriptors:function(){return this._descriptorsForAxis("rows")},_process:function(e,t){this._view=e;t=t||{};t.items=t.items||this._view;this.trigger(l,t)},_query:function(e){var t=this;if(!e){this._skipNormalize+=1;this._clearAxesData=true}return t.query(s({},{page:t.page(),pageSize:t.pageSize(),sort:t.sort(),filter:t.filter(),group:t.group(),aggregate:t.aggregate(),columns:this.columnsAxisDescriptors(),rows:this.rowsAxisDescriptors(),measures:this.measures()},e))},query:function(e){var t=this._mergeState(e);if(this._data.length&&this.cubeBuilder){this._params(t);this._updateLocalData(this._pristineData);return b.Deferred().resolve().promise()}return this.read(t)},_mergeState:function(e){e=a.fn._mergeState.call(this,e);if(e!==R){this._measures=J(e.measures);if(e.columns){e.columns=P(e.columns)}else if(!e.columns){this._columns=[]}if(e.rows){e.rows=P(e.rows)}else if(!e.rows){this._rows=[]}}return e},filter:function(e){if(e===R){return this._filter}this._skipNormalize+=1;this._clearAxesData=true;this._query({filter:e,page:1})},expandColumn:function(e){this._expandPath(e,"columns")},expandRow:function(e){this._expandPath(e,"rows")},success:function(e){var t;if(this.cubeBuilder){t=(this.reader.data(e)||[]).slice(0)}a.fn.success.call(this,e);if(t){this._pristineData=t}},_processResult:function(e,t){if(this.cubeBuilder){var i=this.cubeBuilder.process(e,this._requestData);e=i.data;t=i.axes}var n,r;var a,o,s,l;var d=this.columns();var u=this.rows();var c=t.columns&&t.columns.tuples;if(!d.length&&u.length&&c&&(this._rowMeasures().length||!this.measures().length)){t={columns:{},rows:t.columns}}if(!d.length&&!u.length&&this.measuresAxis()==="rows"&&c){t={columns:{},rows:t.columns}}this._axes={columns:k(this._axes.columns),rows:k(this._axes.rows)};t={columns:k(t.columns),rows:k(t.rows)};n=this._normalizeTuples(t.columns.tuples,this._axes.columns.tuples,d,this._columnMeasures());r=this._normalizeTuples(t.rows.tuples,this._axes.rows.tuples,u,this._rowMeasures());if(this._skipNormalize>0){this._skipNormalize-=1}if(!this.cubeBuilder){e=this._normalizeData({columnsLength:t.columns.tuples.length,rowsLength:t.rows.tuples.length,columnIndexes:n,rowIndexes:r,data:e})}if(this._lastExpanded=="rows"){a=t.columns.tuples;s=this._columnMeasures();o=he(t.columns,this._axes.columns,s);if(o){l="columns";t.columns=o;pe(a,o.tuples,t.rows.tuples.length,s,e);if(!this.cubeBuilder){e=this._normalizeData({columnsLength:w(t.columns.tuples,s),rowsLength:t.rows.tuples.length,data:e})}}}else if(this._lastExpanded=="columns"){a=t.rows.tuples;s=this._rowMeasures();o=he(t.rows,this._axes.rows,s);if(o){l="rows";t.rows=o;ve(a,o.tuples,t.columns.tuples.length,s,e);if(!this.cubeBuilder){e=this._normalizeData({columnsLength:w(t.rows.tuples,s),rowsLength:t.columns.tuples.length,data:e})}}}this._lastExpanded=null;var f=this._mergeAxes(t,e,l);this._axes=f.axes;return f.data},_readData:function(e){var t=this.reader.axes(e);var i=this.reader.data(e);if(this.cubeBuilder){this._rawData=i}return this._processResult(i,t)},_createTuple:function(e,t,i){var n=e.members;var r=n.length;var a={members:[]};var o,s;var l,d;var u;var c;var f;var h;var p=0;if(t){r-=1}for(;p<r;p++){h=n[p];s=Number(h.levelNum);l=h.name;d=h.parentName;f=h.caption||l;u=h.hasChildren;c=h.hierarchy;o=h.levelName;if(i){f="All";if(s===0){d=h.name}else{s-=1}u=true;l=c=o=d}a.members.push({name:l,children:[],caption:f,levelName:o,levelNum:s.toString(),hasChildren:u,hierarchy:c,parentName:!i?d:""})}if(t){a.members.push({name:t.name,children:[]})}return a},_hasRoot:function(e,t,i){if(t.length){return y(t,e).tuple}var n=e.members;var r;var a;var o=true;var s;for(var l=0,d=n.length;l<d;l++){r=n[l];s=Number(r.levelNum)||0;a=i[l];if(!(s===0||a&&r.name===C(a))){o=false;break}}return o},_mergeAxes:function(e,t,i){var n=this._columnMeasures();var r=this._rowMeasures();var a=this.axes();var o,s;var l=w(a.rows.tuples,r);var d=e.rows.tuples.length;var u=w(a.columns.tuples,n);var c=e.columns.tuples.length;if(i=="columns"){c=u;s=e.columns.tuples}else{s=Ce(e.columns.tuples,n);t=Te(s,t)}var f=_e(a.columns.tuples,s,n);if(i=="rows"){d=w(e.rows.tuples,r);s=e.rows.tuples}else{s=Ce(e.rows.tuples,r);t=Se(s,t)}var h=_e(a.rows.tuples,s,r);a.columns.tuples=f.tuples;a.rows.tuples=h.tuples;if(u!==w(a.columns.tuples,n)){o=f.index+ge(f.parsedRoot,f.memberIndex,n);var p=u+c;t=this._mergeColumnData(t,o,d,c,p)}else if(l!==w(a.rows.tuples,r)){o=h.index+ge(h.parsedRoot,h.memberIndex,r);t=this._mergeRowData(t,o,d,c)}if(a.columns.tuples.length===0&&a.rows.tuples.length===0){t=[]}return{axes:a,data:t}},_mergeColumnData:function(e,t,i,n,r){var a=this.data().toJSON();var o,s,l=0,d;var u=Math.max(this._columnMeasures().length,1);i=Math.max(i,1);if(a.length>0){l=u;r-=u}for(o=0;o<i;o++){s=t+o*r;d=e.splice(0,n);d.splice(0,l);[].splice.apply(a,[s,0].concat(d))}return a},_mergeRowData:function(e,t,i,n){var r=this.data().toJSON();var a,o,s;var l=Math.max(this._rowMeasures().length,1);n=Math.max(n,1);if(r.length>0){i-=l;e.splice(0,n*l)}for(a=0;a<i;a++){s=e.splice(0,n);o=t*n+a*n;[].splice.apply(r,[o,0].concat(s))}return r},_columnMeasures:function(){var e=this.measures();var t=[];if(this.measuresAxis()==="columns"){if(this.columns().length===0){t=e}else if(e.length>1){t=e}}return t},_rowMeasures:function(){var e=this.measures();var t=[];if(this.measuresAxis()==="rows"){if(this.rows().length===0){t=e}else if(e.length>1){t=e}}return t},_updateLocalData:function(e,t){if(this.cubeBuilder){if(t){this._requestData=t}e=this._processResult(e)}this._data=this._observe(e);this._ranges=[];this._addRange(this._data);this._total=this._data.length;this._pristineTotal=this._total;this._process(this._data)},data:function(e){var t=this;if(e!==R){this._pristineData=e.slice(0);this._updateLocalData(e,{columns:this.columns(),rows:this.rows(),measures:this.measures()})}else{return t._data}},_normalizeTuples:function(e,t,i,n){var r=n.length||1;var a=0;var o=[];var s={};var l=0;var d,u,c;if(!e.length){return}if(this._skipNormalize<=0&&!this._hasRoot(e[0],t,i)){this._skipNormalize=0;for(;a<r;a++){o.push(this._createTuple(e[0],n[a],true));s[a]=a}e.splice.apply(e,[0,e.length].concat(o).concat(e));a=r}if(n.length){c=d=e[a];u=d.members.length-1;while(d){if(l>=r){l=0}if(d.members[u].name!==n[l].name){e.splice(a,0,this._createTuple(d,n[l]));s[a]=a}a+=1;l+=1;d=e[a];if(r>l&&(!d||Qe(c,u-1)!==Qe(d,u-1))){for(;l<r;l++){e.splice(a,0,this._createTuple(c,n[l]));s[a]=a;a+=1}d=e[a]}c=d}}return s},_addMissingDataItems:function(e,t){while(t.rowIndexes[parseInt(e.length/t.columnsLength,10)]!==R){for(var i=0;i<t.columnsLength;i++){e=_(e)}}while(t.columnIndexes[e.length%t.columnsLength]!==R){e=_(e)}return e},_normalizeOrdinals:function(e,t,i){var n=i.lastOrdinal;if(!t){return _(e)}if(t.ordinal-n>1){n+=1;while(n<t.ordinal&&e.length<i.length){e=this._addMissingDataItems(_(e),i);n+=1}}t.ordinal=e.length;e[e.length]=t;return e},_normalizeData:function(e){var t=e.data;var i=0;var n;var r=[];var a;var o;e.lastOrdinal=0;e.columnIndexes=e.columnIndexes||{};e.rowIndexes=e.rowIndexes||{};e.columnsLength=e.columnsLength||1;e.rowsLength=e.rowsLength||1;e.length=e.columnsLength*e.rowsLength;o=e.length;if(t.length===o){return t}while(r.length<o){n=t[i++];if(n){a=n.ordinal}r=this._normalizeOrdinals(this._addMissingDataItems(r,e),n,e);e.lastOrdinal=a}return r},discover:function(e,t){var r=this,i=r.transport;return b.Deferred(function(n){i.discover(s({success:function(e){e=r.reader.parse(e);if(r._handleCustomErrors(e)){return}if(t){e=t(e)}n.resolve(e)},error:function(e,t,i){n.reject(e);r.error(e,t,i)}},e))}).promise().done(function(){r.trigger("schemaChange")})},schemaMeasures:function(){var t=this;return t.discover({data:{command:"schemaMeasures",restrictions:{catalogName:t.transport.catalog(),cubeName:t.transport.cube()}}},function(e){return t.reader.measures(e)})},schemaKPIs:function(){var t=this;return t.discover({data:{command:"schemaKPIs",restrictions:{catalogName:t.transport.catalog(),cubeName:t.transport.cube()}}},function(e){return t.reader.kpis(e)})},schemaDimensions:function(){var t=this;return t.discover({data:{command:"schemaDimensions",restrictions:{catalogName:t.transport.catalog(),cubeName:t.transport.cube()}}},function(e){return t.reader.dimensions(e)})},schemaHierarchies:function(e){var t=this;return t.discover({data:{command:"schemaHierarchies",restrictions:{catalogName:t.transport.catalog(),cubeName:t.transport.cube(),dimensionUniqueName:e}}},function(e){return t.reader.hierarchies(e)})},schemaLevels:function(e){var t=this;return t.discover({data:{command:"schemaLevels",restrictions:{catalogName:t.transport.catalog(),cubeName:t.transport.cube(),hierarchyUniqueName:e}}},function(e){return t.reader.levels(e)})},schemaCubes:function(){var t=this;return t.discover({data:{command:"schemaCubes",restrictions:{catalogName:t.transport.catalog()}}},function(e){return t.reader.cubes(e)})},schemaCatalogs:function(){var t=this;return t.discover({data:{command:"schemaCatalogs"}},function(e){return t.reader.catalogs(e)})},schemaMembers:function(e){var i=this;var t=function(t){return function(e){return i.reader.members(e,t)}}(e);return i.discover({data:{command:"schemaMembers",restrictions:s({catalogName:i.transport.catalog(),cubeName:i.transport.cube()},e)}},t)},_params:function(e){if(this._clearAxesData){this._axes={};this._data=this._observe([]);this._clearAxesData=false;this.trigger(n)}var t=a.fn._params.call(this,e);t=s({measures:this.measures(),measuresAxis:this.measuresAxis(),columns:this.columns(),rows:this.rows()},t);if(this.cubeBuilder){this._requestData=t}return t}});function ue(e){var t=[];for(var i=0;i<e.length;i++){t.push(e[i]);if(e[i].children){t=t.concat(ue(e[i].children))}}return t}function ce(e,t,i){for(var n=0;n<t.length;n++){if(t[n].children&&t[n].children.length){ce(e,t[n].children,i)}}if(t[0].parentName!=e){return}t=t.sort(i)}function fe(e,t){for(var i=0;i<e.length;i++){var n=t[e[i].name];if(!b.isEmptyObject(n.childrenMap)){e[i].children=[];for(var r in n.childrenMap){e[i].children.push(b.extend({},{name:r,parentName:t[r].parentName}))}fe(e[i].children,t)}}}function _(e){e[e.length]={value:"",fmtValue:"",ordinal:e.length};return e}function he(e,t,i){if(e.tuples.length<w(t.tuples,i)){return t}return}function pe(e,t,i,n,r){var a,o,s;var l=e.length;var d=w(t,n);var u=n.length||1;for(o=0;o<i;o++){for(a=0;a<l;a++){s=me(e[a],t)*u;s+=a%u;r[o*l+a].ordinal=o*d+s}}}function ve(e,t,i,n,r){var a,o,s;var l=e.length;var d=n.length||1;for(o=0;o<l;o++){s=me(e[o],t);s*=d;s+=o%d;for(a=0;a<i;a++){r[o*i+a].ordinal=s*i+a}}}function me(e,t){return y(t,e).index}function w(e,t){if(!e.length){return 0}var i=e.slice();var n=i.shift();var r=1;while(n){if(n.members){[].push.apply(i,n.members)}else if(n.children){if(!n.measure){r+=n.children.length}[].push.apply(i,n.children)}n=i.shift()}if(t.length){r=r*t.length}return r}function k(e){if(!e){e={tuples:[]}}if(!e.tuples){e.tuples=[]}return e}function ge(e,t,i){if(!e){return 0}var n=Math.max(i.length,1);var r=e.members.slice(0,t);var a=r.shift();var o=n;while(a){if(a.name===d){o+=n-1}else if(a.children){[].push.apply(r,a.children)}else{o++;[].push.apply(r,a.members)}a=r.shift()}return o}function _e(e,t,i){if(!t[0]){return{parsedRoot:null,tuples:e,memberIndex:0,index:0}}var n=y(e,t[0]);if(!n.tuple){return{parsedRoot:null,tuples:t,memberIndex:0,index:0}}var r=n.tuple.members;var a=t[0].members;var o=-1;if(r.length!==a.length){return{parsedRoot:null,tuples:t,memberIndex:0,index:0}}for(var s=0,l=r.length;s<l;s++){if(!r[s].measure&&a[s].children[0]){if(o==-1&&a[s].children.length){o=s}r[s].children=a[s].children}}i=Math.max(i.length,1);return{parsedRoot:n.tuple,index:n.index*i,memberIndex:o,tuples:e}}function be(e,t){var i=true;var n,r;e=e.members;t=t.members;for(n=0,r=e.length;n<r;n++){if(e[n].measure||t[n].measure){continue}i=i&&C(e[n])===C(t[n])}return i}function y(e,t){var i,n,r,a,o=0;var s,l,d;for(i=0,n=e.length;i<n;i++){r=e[i];if(be(r,t)){return{tuple:r,index:o}}o++;for(s=0,l=r.members.length;s<l;s++){d=r.members[s];if(d.measure){continue}a=y(d.children,t);o+=a.index;if(a.tuple){return{tuple:a.tuple,index:o}}}}return{index:o}}function we(e,t){var i,n,r,a="";for(n=0,r=e.length;n<r;n++){i=e[n];a+=i.name;if(!t[a]){t[a]=i}}}function ke(e,t){var i=e.members;var n,r,a,o="";var s="";var l;for(n=0,r=i.length;n<r;n++){a=i[n];if(l){if(t[o+a.name]){o+=a.name;l=t[o];continue}else if(t[o+a.parentName]){return t[o+a.parentName]}else if(t[s+a.parentName]){return t[s+a.parentName]}else{return t[s]}}o+=a.name;l=t[a.parentName];if(!l){l=t[o];if(!l){return null}}if(l){s+=l.name}}return l}function ye(e,t){if(t.length===0){return-1}var i=t[0];var n=e.members;for(var r=0,a=n.length;r<a;r++){if(n[r].name==i.name){return r}}}function xe(e,t){if(t<0){return}var i={name:d,measure:true,children:[b.extend({members:[],dataIndex:e.dataIndex},e.members[t])]};e.members.splice(t,1,i);e.dataIndex=R}function Ce(e,t){if(e.length<1){return[]}var i=[];var n={};var r=ye(e[0],t);for(var a=0;a<e.length;a++){var o=e[a];o.dataIndex=a;xe(o,r);var s=ke(o,n);if(s){if(r<0||!s.measure){s.children.push(o)}else{s.children.push(o.members[r].children[0])}}else{i.push(o)}we(o.members,n)}return i}function Se(e,t){if(!e||!e.length){return t}var i=[];var n=De(e);var r=n.length;var a=Math.max(t.length/r,1);var o,s,l,d;var u;for(o=0;o<r;o++){l=a*o;d=a*n[o];for(s=0;s<a;s++){u=parseInt(d+s,10);i[parseInt(l+s,10)]=t[u]||{value:"",fmtValue:"",ordinal:u}}}return i}function Te(e,t){if(!e||!e.length){return t}var i=[];var n=De(e);var r=n.length;var a=Math.max(t.length/r,1);var o,s,l,d;for(s=0;s<a;s++){l=r*s;for(o=0;o<r;o++){d=n[o]+l;i[l+o]=t[d]||{value:"",fmtValue:"",ordinal:d}}}return i}function De(e){e=e.slice();var t=[];var i=e.shift();var n,r,a,o,s;while(i){if(i.dataIndex!==R){t.push(i.dataIndex)}a=0;for(n=0,r=i.members.length;n<r;n++){s=i.members[n];o=s.children;if(s.measure){[].splice.apply(e,[0,0].concat(o))}else{[].splice.apply(e,[a,0].concat(o))}a+=o.length}i=e.shift()}return t}g.create=function(e){e=e&&e.push?{data:e}:e;var t=e||{},i=t.data;t.data=i;if(!(t instanceof g)&&t instanceof S.data.DataSource){throw new Error("Incorrect DataSource type. Only PivotDataSource instances are supported")}return t instanceof g?t:new g(t)};function Ae(e){var t=e.split(".");if(t.length>2){return t[0]+"."+t[1]}return e}function Ee(e,t){var i=e.length-1;var n=e[i];var r;r=Ie(t,n);if(r&&r.dir){n="ORDER("+n+".Children,"+r.field+".CurrentMember.MEMBER_CAPTION,"+r.dir+")"}else{n+=".Children"}e[i]=n;return e}function Ie(e,t){for(var i=0,n=e.length;i<n;i++){if(t.indexOf(e[i].field)===0){return e[i]}}return null}function Me(e){var t="CROSSJOIN({";var i;if(e.length>2){i=e.pop();t+=Me(e)}else{t+=e.shift();i=e.pop()}t+="},{";t+=i;t+="})";return t}function Re(e,t){var i=e.slice(0);if(t.length>1){i.push("{"+x(t).join(",")+"}")}return Me(i)}function x(e){var t=0;var i=e.length;var n=[];var r;for(;t<i;t++){r=e[t];n.push(r.name!==R?r.name:r)}return n}function C(e){e=e.name||e;if(f.call(e)==="[object Array]"){e=e[e.length-1]}return e}function Fe(e){var t=e.length;var i=[];var n=0;for(;n<t;n++){i.push(e[n].name[0])}return i}function Pe(e,t){var i;var n;var r;var a=0;var o=e.length;var s=t.length;t=t.slice(0);for(;a<o;a++){i=e[a];for(r=0;r<s;r++){n=Ae(t[r]);if(i.indexOf(n)!==-1){t[r]=i;break}}}return{names:t,expandedIdx:r,uniquePath:t.slice(0,r+1).join("")}}function ze(e){var t=[];var i=[];var n=[];var r;var a,o;var s=0;var l=e.length;var d;var u;var c;for(;s<l;s++){r=e[s];d=r.name;c=false;if(f.call(d)!=="[object Array]"){r.name=d=[d]}if(d.length>1){i.push(r)}else{u=Ae(d[0]);for(a=0,o=n.length;a<o;a++){if(n[a].name[0].indexOf(u)===0){c=true;break}}if(!c){n.push(r)}if(r.expand){t.push(r)}}}t=t.concat(i);return{root:n,expanded:t}}function Be(e,t,i){var n="";e=e||[];var r=ze(e);var a=r.root;var o=Fe(a);var s=[];r=r.expanded;var l=r.length;var d=0;var u;var c=[];if(o.length>1||t.length>1){s.push(Re(o,t));for(;d<l;d++){u=Ee(r[d].name,i);c=Pe(u,o).names;s.push(Re(c,t))}n+=s.join(",")}else{for(;d<l;d++){u=Ee(r[d].name,i);c.push(u[0])}n+=o.concat(c).join(",")}return n}var Le={contains:', InStr({0}.CurrentMember.MEMBER_CAPTION,"{1}") > 0',doesnotcontain:', InStr({0}.CurrentMember.MEMBER_CAPTION,"{1}")',startswith:', Left({0}.CurrentMember.MEMBER_CAPTION,Len("{1}"))="{1}"',endswith:', Right({0}.CurrentMember.MEMBER_CAPTION,Len("{1}"))="{1}"',eq:', {0}.CurrentMember.MEMBER_CAPTION = "{1}"',neq:', {0}.CurrentMember.MEMBER_CAPTION = "{1}"'};function He(e){var t="";var i=e.value;var n=e.field;var r=e.operator;if(r=="in"){t+="{";t+=i;t+="}"}else{t+=r=="neq"||r=="doesnotcontain"?"-":"";t+="Filter(";t+=n+".MEMBERS";t+=S.format(Le[r],n,i);t+=")"}return t}function Ne(e,t){var i="",n;var r=e.filters;var a=r.length;var o;for(o=a-1;o>=0;o--){n="SELECT (";n+=He(r[o]);n+=") ON 0";if(o==a-1){n+=" FROM ["+t+"]";i=n}else{i=n+" FROM ( "+i+" )"}}return i}function Oe(e,t,i){var n="";if(t){n+="<"+e+">";var r;for(var a in t){r=t[a];if(i){a=a.replace(/([A-Z]+(?=$|[A-Z][a-z])|[A-Z]?[a-z]+)/g,"$1_").toUpperCase().replace(/_$/,"")}n+="<"+a+">"+r+"</"+a+">"}n+="</"+e+">"}else{n+="<"+e+"/>"}return n}var Ve={schemaCubes:"MDSCHEMA_CUBES",schemaCatalogs:"DBSCHEMA_CATALOGS",schemaMeasures:"MDSCHEMA_MEASURES",schemaDimensions:"MDSCHEMA_DIMENSIONS",schemaHierarchies:"MDSCHEMA_HIERARCHIES",schemaLevels:"MDSCHEMA_LEVELS",schemaMembers:"MDSCHEMA_MEMBERS",schemaKPIs:"MDSCHEMA_KPIS"};var We={read:function(e){var t='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Execute xmlns="urn:schemas-microsoft-com:xml-analysis"><Command><Statement>';t+="SELECT NON EMPTY {";var i=e.columns||[];var n=e.rows||[];var r=e.measures||[];var a=e.measuresAxis==="rows";var o=e.sort||[];if(!i.length&&n.length&&(!r.length||r.length&&a)){i=n;n=[];a=false}if(!i.length&&!n.length){a=false}if(i.length){t+=Be(i,!a?r:[],o)}else if(r.length&&!a){t+=x(r).join(",")}t+="} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON COLUMNS";if(n.length||a&&r.length>1){t+=", NON EMPTY {";if(n.length){t+=Be(n,a?r:[],o)}else{t+=x(r).join(",")}t+="} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON ROWS"}if(e.filter){t+=" FROM ";t+="(";t+=Ne(e.filter,e.connection.cube);t+=")"}else{t+=" FROM ["+e.connection.cube+"]"}if(r.length==1&&i.length){t+=" WHERE ("+x(r).join(",")+")"}t+="</Statement></Command><Properties><PropertyList><Catalog>"+e.connection.catalog+"</Catalog><Format>Multidimensional</Format></PropertyList></Properties></Execute></Body></Envelope>";return t.replace(/\&/g,"&amp;")},discover:function(e){e=e||{};var t='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Discover xmlns="urn:schemas-microsoft-com:xml-analysis">';t+="<RequestType>"+(Ve[e.command]||e.command)+"</RequestType>";t+="<Restrictions>"+Oe("RestrictionList",e.restrictions,true)+"</Restrictions>";if(e.connection&&e.connection.catalog){e.properties=b.extend({},{Catalog:e.connection.catalog},e.properties)}t+="<Properties>"+Oe("PropertyList",e.properties)+"</Properties>";t+="</Discover></Body></Envelope>";return t}};var Ue=S.data.RemoteTransport.extend({init:function(e){var t=e;e=this.options=s(true,{},this.options,e);S.data.RemoteTransport.call(this,e);if(h(t.discover)){this.discover=t.discover}else if(typeof t.discover==="string"){this.options.discover={url:t.discover}}else if(!t.discover){this.options.discover=this.options.read}},setup:function(e,t){e.data=e.data||{};b.extend(true,e.data,{connection:this.options.connection});return S.data.RemoteTransport.fn.setup.call(this,e,t)},options:{read:{dataType:"text",contentType:"text/xml",type:"POST"},discover:{dataType:"text",contentType:"text/xml",type:"POST"},parameterMap:function(e,t){return We[t](e,t)}},discover:function(e){return b.ajax(this.setup(e,"discover"))}});function A(e){if(e==null){return[]}var t=f.call(e);if(t!=="[object Array]"){return[e]}return e}function je(e){var t={tuples:[]};var i=A(S.getter("Tuples.Tuple",true)(e));var n=S.getter("Caption['#text']");var r=S.getter("UName['#text']");var a=S.getter("LName['#text']");var o=S.getter("LNum['#text']");var s=S.getter("CHILDREN_CARDINALITY['#text']",true);var l=S.getter("['@Hierarchy']");var d=S.getter("PARENT_UNIQUE_NAME['#text']",true);for(var u=0;u<i.length;u++){var c=[];var f=A(i[u].Member);for(var h=0;h<f.length;h++){c.push({children:[],caption:n(f[h]),name:r(f[h]),levelName:a(f[h]),levelNum:o(f[h]),hasChildren:parseInt(s(f[h]),10)>0,parentName:d(f[h]),hierarchy:l(f[h])})}t.tuples.push({members:c})}return t}var t={cubes:{name:S.getter("CUBE_NAME['#text']",true),caption:S.getter("CUBE_CAPTION['#text']",true),description:S.getter("DESCRIPTION['#text']",true),type:S.getter("CUBE_TYPE['#text']",true)},catalogs:{name:S.getter("CATALOG_NAME['#text']",true),description:S.getter("DESCRIPTION['#text']",true)},measures:{name:S.getter("MEASURE_NAME['#text']",true),caption:S.getter("MEASURE_CAPTION['#text']",true),uniqueName:S.getter("MEASURE_UNIQUE_NAME['#text']",true),description:S.getter("DESCRIPTION['#text']",true),aggregator:S.getter("MEASURE_AGGREGATOR['#text']",true),groupName:S.getter("MEASUREGROUP_NAME['#text']",true),displayFolder:S.getter("MEASURE_DISPLAY_FOLDER['#text']",true),defaultFormat:S.getter("DEFAULT_FORMAT_STRING['#text']",true)},kpis:{name:S.getter("KPI_NAME['#text']",true),caption:S.getter("KPI_CAPTION['#text']",true),value:S.getter("KPI_VALUE['#text']",true),goal:S.getter("KPI_GOAL['#text']",true),status:S.getter("KPI_STATUS['#text']",true),trend:S.getter("KPI_TREND['#text']",true),statusGraphic:S.getter("KPI_STATUS_GRAPHIC['#text']",true),trendGraphic:S.getter("KPI_TREND_GRAPHIC['#text']",true),description:S.getter("KPI_DESCRIPTION['#text']",true),groupName:S.getter("MEASUREGROUP_NAME['#text']",true)},dimensions:{name:S.getter("DIMENSION_NAME['#text']",true),caption:S.getter("DIMENSION_CAPTION['#text']",true),description:S.getter("DESCRIPTION['#text']",true),uniqueName:S.getter("DIMENSION_UNIQUE_NAME['#text']",true),defaultHierarchy:S.getter("DEFAULT_HIERARCHY['#text']",true),type:S.getter("DIMENSION_TYPE['#text']",true)},hierarchies:{name:S.getter("HIERARCHY_NAME['#text']",true),caption:S.getter("HIERARCHY_CAPTION['#text']",true),description:S.getter("DESCRIPTION['#text']",true),uniqueName:S.getter("HIERARCHY_UNIQUE_NAME['#text']",true),dimensionUniqueName:S.getter("DIMENSION_UNIQUE_NAME['#text']",true),displayFolder:S.getter("HIERARCHY_DISPLAY_FOLDER['#text']",true),origin:S.getter("HIERARCHY_ORIGIN['#text']",true),defaultMember:S.getter("DEFAULT_MEMBER['#text']",true)},levels:{name:S.getter("LEVEL_NAME['#text']",true),caption:S.getter("LEVEL_CAPTION['#text']",true),description:S.getter("DESCRIPTION['#text']",true),uniqueName:S.getter("LEVEL_UNIQUE_NAME['#text']",true),dimensionUniqueName:S.getter("DIMENSION_UNIQUE_NAME['#text']",true),displayFolder:S.getter("LEVEL_DISPLAY_FOLDER['#text']",true),orderingProperty:S.getter("LEVEL_ORDERING_PROPERTY['#text']",true),origin:S.getter("LEVEL_ORIGIN['#text']",true),hierarchyUniqueName:S.getter("HIERARCHY_UNIQUE_NAME['#text']",true)},members:{name:S.getter("MEMBER_NAME['#text']",true),caption:S.getter("MEMBER_CAPTION['#text']",true),uniqueName:S.getter("MEMBER_UNIQUE_NAME['#text']",true),dimensionUniqueName:S.getter("DIMENSION_UNIQUE_NAME['#text']",true),hierarchyUniqueName:S.getter("HIERARCHY_UNIQUE_NAME['#text']",true),levelUniqueName:S.getter("LEVEL_UNIQUE_NAME['#text']",true),childrenCardinality:S.getter("CHILDREN_CARDINALITY['#text']",true)}};var Ge=["axes","catalogs","cubes","dimensions","hierarchies","levels","measures"];var qe=S.data.XmlDataReader.extend({init:function(e){S.data.XmlDataReader.call(this,e);this._extend(e)},_extend:function(e){var t=0;var i=Ge.length;var n;var r;for(;t<i;t++){n=Ge[t];r=e[n];if(r&&r!==o){this[n]=r}}},parse:function(e){var t=S.data.XmlDataReader.fn.parse(e.replace(/<(\/?)(\w|-)+:/g,"<$1"));return S.getter("['Envelope']['Body']",true)(t)},errors:function(e){var t=S.getter("['Fault']",true)(e);if(t){return[{faultstring:S.getter("faultstring['#text']",true)(t),faultcode:S.getter("faultcode['#text']",true)(t)}]}return null},axes:function(e){e=S.getter('ExecuteResponse["return"].root',true)(e);var t=A(S.getter("Axes.Axis",true)(e));var i;var n={columns:{},rows:{}};for(var r=0;r<t.length;r++){i=t[r];if(i["@name"].toLowerCase()!=="sliceraxis"){if(!n.columns.tuples){n.columns=je(i)}else{n.rows=je(i)}}}return n},data:function(e){e=S.getter('ExecuteResponse["return"].root',true)(e);var t=A(S.getter("CellData.Cell",true)(e));var i=[];var n=S.getter("['@CellOrdinal']");var r=S.getter("Value['#text']");var a=S.getter("FmtValue['#text']");for(var o=0;o<t.length;o++){i.push({value:r(t[o]),fmtValue:a(t[o]),ordinal:parseInt(n(t[o]),10)})}return i},_mapSchema:function(e,t){e=S.getter('DiscoverResponse["return"].root',true)(e);var i=A(S.getter("row",true)(e));var n=[];for(var r=0;r<i.length;r++){var a={};for(var o in t){a[o]=t[o](i[r])}n.push(a)}return n},measures:function(e){return this._mapSchema(e,t.measures)},kpis:function(e){return this._mapSchema(e,t.kpis)},hierarchies:function(e){return this._mapSchema(e,t.hierarchies)},levels:function(e){return this._mapSchema(e,t.levels)},dimensions:function(e){return this._mapSchema(e,t.dimensions)},cubes:function(e){return this._mapSchema(e,t.cubes)},catalogs:function(e){return this._mapSchema(e,t.catalogs)},members:function(e){return this._mapSchema(e,t.members)}});s(true,S.data,{PivotDataSource:g,XmlaTransport:Ue,XmlaDataReader:qe,PivotCubeBuilder:le,transports:{xmla:Ue},readers:{xmla:qe}});var $e=function(e,t){if(!e){return null}for(var i=0,n=e.length;i<n;i++){if(e[i].field===t){return e[i]}}return null};var Ke=function(e,t){var i=[];for(var n=0,r=e.length;n<r;n++){if(e[n].field!==t){i.push(e[n])}}return i};S.ui.PivotSettingTarget=r.extend({init:function(e,t){var n=this;r.fn.init.call(n,e,t);n.element.addClass("k-pivot-setting");n.dataSource=S.data.PivotDataSource.create(t.dataSource);n._refreshHandler=b.proxy(n.refresh,n);n.dataSource.first(l,n._refreshHandler);if(!t.template){n.options.template="<div data-"+S.ns+'name="${data.name || data}">${data.name || data}'+(n.options.enabled?'<a class="k-button k-button-icon k-flat"><span class="k-icon k-i-close k-setting-delete"></span></a>':"")+"</div>"}n.template=S.template(n.options.template);n.emptyTemplate=S.template(n.options.emptyTemplate);n._sortable();n.element.on("click"+p,".k-button,.k-item",function(e){var t=b(e.target);var i=t.closest("["+S.attr("name")+"]").attr(S.attr("name"));if(!i){return}if(t.hasClass("k-i-close")){n.remove(i)}else if(n.options.sortable&&t[0]===e.currentTarget){n.sort({field:i,dir:t.find(".k-i-sort-asc-sm")[0]?"desc":"asc"})}});if(t.filterable||t.sortable){n.fieldMenu=new i.PivotFieldMenu(n.element,{messages:n.options.messages.fieldMenu,filter:".k-setting-fieldmenu",filterable:t.filterable,sortable:t.sortable,dataSource:n.dataSource})}n.refresh()},options:{name:"PivotSettingTarget",template:null,filterable:false,sortable:false,emptyTemplate:"<div class='k-empty'>${data}</div>",setting:"columns",enabled:true,messages:{empty:"Drop Fields Here"}},setDataSource:function(e){this.dataSource.unbind(l,this._refreshHandler);this.dataSource=this.options.dataSource=e;if(this.fieldMenu){this.fieldMenu.setDataSource(e)}e.first(l,this._refreshHandler);this.refresh()},_sortable:function(){var i=this;if(i.options.enabled){this.sortable=this.element.kendoSortable({connectWith:this.options.connectWith,hint:i.options.hint,filter:">*:not(.k-empty)",cursor:"move",start:function(e){e.item.focus().blur()},change:function(e){var t=e.item.attr(S.attr("name"));if(e.action=="receive"){i.add(t)}else if(e.action=="remove"){i.remove(t)}else if(e.action=="sort"){i.move(t,e.newIndex)}}}).data("kendoSortable")}},_indexOf:function(e,t){var i,n,r=-1;for(i=0,n=t.length;i<n;i++){if(C(t[i])===e){r=i;break}}return r},_isKPI:function(e){return e.type==="kpi"||e.measure},validate:function(e){var t=e.type==2||"aggregator"in e||this._isKPI(e);if(t){return this.options.setting==="measures"}if(this.options.setting==="measures"){return t}var i=this.dataSource[this.options.setting]();var n=e.defaultHierarchy||e.uniqueName;if(this._indexOf(n,i)>-1){return false}i=this.dataSource[this.options.setting==="columns"?"rows":"columns"]();if(this._indexOf(n,i)>-1){return false}return true},add:function(e){var t=this.dataSource[this.options.setting]();var i,n;e=b.isArray(e)?e.slice(0):[e];for(i=0,n=e.length;i<n;i++){if(this._indexOf(e[i],t)!==-1){e.splice(i,1);i-=1;n-=1}}if(e.length){t=t.concat(e);this.dataSource[this.options.setting](t)}},move:function(e,t){var i=this.dataSource[this.options.setting]();var n=this._indexOf(e,i);if(n>-1){e=i.splice(n,1)[0];i.splice(t,0,e);this.dataSource[this.options.setting](i)}},remove:function(e){var t=this.dataSource[this.options.setting]();var i=this._indexOf(e,t);var n=this.dataSource.sort();var r=this.dataSource.filter();if(i>-1){if(r){r.filters=Ke(r.filters,e);this.dataSource._filter.filters=r.filters;if(!r.filters.length){this.dataSource._filter=null}}if(n){n=Ke(n,e);this.dataSource._sort=n}t.splice(i,1);this.dataSource[this.options.setting](t)}},sort:function(e){var t=this.options.sortable;var i=t===true||t.allowUnsort;var n=i&&e.dir==="asc";var r=this.dataSource.sort()||[];var a=Ke(r,e.field);if(n&&r.length!==a.length){e=null}if(e){a.push(e)}this.dataSource.sort(a)},refresh:function(){var e="";var t=this.dataSource[this.options.setting]();var i=t.length;var n=0;var r;if(i){for(;n<i;n++){r=t[n];r=r.name===R?{name:r}:r;e+=this.template(s({sortIcon:this._sortIcon(r.name)},r))}}else{e=this.emptyTemplate(this.options.messages.empty)}this.element.html(e)},destroy:function(){r.fn.destroy.call(this);this.dataSource.unbind(l,this._refreshHandler);this.element.off(p);if(this.sortable){this.sortable.destroy()}if(this.fieldMenu){this.fieldMenu.destroy()}this.element=null;this._refreshHandler=null},_sortIcon:function(e){var t=this.dataSource.sort();var i=$e(t,C(e));var n="";if(i){n="k-i-sort-"+i.dir}return n}});var E=r.extend({init:function(e,t){var d=this;var u;var c;r.fn.init.call(d,e,t);d._dataSource();d._bindConfigurator();d._wrapper();d._createLayout();d._columnBuilder=u=new Xe;d._rowBuilder=c=new Ze;d._contentBuilder=new Je;d._templates();d.columnsHeader.add(d.rowsHeader).on("click","span.k-icon",function(){var e=b(this);var t=u;var i="expandColumn";var n;var r=e.attr(S.attr("path"));var a={axis:"columns",path:b.parseJSON(r)};if(e.parent().is("td")){t=c;i="expandRow";a.axis="rows"}var o=e.hasClass(T);var s=t.metadata[r];var l=s.expanded===R;n=o?G:j;a.childrenLoaded=s.maxChildren>s.children;if(d.trigger(n,a)){return}t.metadata[r].expanded=!o;e.toggleClass(T,!o).toggleClass(D,o);if(!o&&l){d.dataSource[i](a.path)}else{d.refresh()}});d._scrollable();if(d.options.autoBind){d.dataSource.fetch()}S.notify(d)},events:[W,U,j,G],options:{name:"PivotGrid",autoBind:true,reorderable:true,filterable:false,sortable:false,height:null,columnWidth:100,configurator:"",columnHeaderTemplate:null,rowHeaderTemplate:null,dataCellTemplate:null,kpiStatusTemplate:null,kpiTrendTemplate:null,messages:{measureFields:"Drop Data Fields Here",columnFields:"Drop Column Fields Here",rowFields:"Drop Rows Fields Here"}},_templates:function(){var e=this.options.columnHeaderTemplate;var t=this.options.rowHeaderTemplate;var i=this.options.dataCellTemplate;var n=this.options.kpiStatusTemplate;var r=this.options.kpiTrendTemplate;this._columnBuilder.template=S.template(e||q,{useWithBlock:!!e});this._contentBuilder.dataTemplate=S.template(i||Y,{useWithBlock:!!i});this._contentBuilder.kpiStatusTemplate=S.template(n||$,{useWithBlock:!!n});this._contentBuilder.kpiTrendTemplate=S.template(r||K,{useWithBlock:!!r});this._rowBuilder.template=S.template(t||q,{useWithBlock:!!t})},_bindConfigurator:function(){var e=this.options.configurator;if(e){b(e).kendoPivotConfigurator("setDataSource",this.dataSource)}},cellInfoByElement:function(e){e=b(e);return this.cellInfo(e.index(),e.parent("tr").index())},cellInfo:function(e,t){var i=this._contentBuilder;var n=i.columnIndexes[e||0];var r=i.rowIndexes[t||0];var a;if(!n||!r){return null}a=r.index*i.rowLength+n.index;return{columnTuple:n.tuple,rowTuple:r.tuple,measure:n.measure||r.measure,dataItem:this.dataSource.view()[a]}},setDataSource:function(e){this.options.dataSource=e;this._dataSource();if(this.measuresTarget){this.measuresTarget.setDataSource(e)}if(this.rowsTarget){this.rowsTarget.setDataSource(e)}if(this.columnsTarget){this.columnsTarget.setDataSource(e)}this._bindConfigurator();if(this.options.autoBind){e.fetch()}},setOptions:function(e){r.fn.setOptions.call(this,e);this._templates()},destroy:function(){r.fn.destroy.call(this);clearTimeout(this._headerReflowTimeout)},_dataSource:function(){var e=this;var t=e.options.dataSource;t=b.isArray(t)?{data:t}:t;if(e.dataSource&&this._refreshHandler){e.dataSource.unbind(l,e._refreshHandler).unbind(n,e._stateResetHandler).unbind(V,e._progressHandler).unbind(O,e._errorHandler)}else{e._refreshHandler=b.proxy(e.refresh,e);e._progressHandler=b.proxy(e._requestStart,e);e._stateResetHandler=b.proxy(e._stateReset,e);e._errorHandler=b.proxy(e._error,e)}e.dataSource=S.data.PivotDataSource.create(t).bind(l,e._refreshHandler).bind(V,e._progressHandler).bind(n,e._stateResetHandler).bind(O,e._errorHandler)},_error:function(){this._progress(false)},_requestStart:function(){this._progress(true)},_stateReset:function(){this._columnBuilder.reset();this._rowBuilder.reset()},_wrapper:function(){var e=this.options.height;this.wrapper=this.element.addClass("k-widget k-widget-2021 k-pivot");if(e){this.wrapper.css("height",e)}},_measureFields:function(){this.measureFields=b(c).addClass("k-pivot-toolbar k-header k-settings-measures");this.measuresTarget=this._createSettingTarget(this.measureFields,{setting:"measures",messages:{empty:this.options.messages.measureFields}})},_createSettingTarget:function(e,t){var i='<span tabindex="0" class="k-button" data-'+S.ns+'name="${data.name}">${data.name}';var n=t.sortable;var r="";if(n){r+="#if (data.sortIcon) {#";r+='<span class="k-icon ${data.sortIcon}-sm"></span>';r+="#}#"}if(t.filterable||n){r+='<span class="k-icon k-i-more-vertical k-setting-fieldmenu"></span>'}if(this.options.reorderable){r+='<span class="k-icon k-i-close k-setting-delete"></span>'}if(r){i+='<span class="k-field-actions">'+r+"</span>"}i+="</span>";return new S.ui.PivotSettingTarget(e,b.extend({template:i,emptyTemplate:'<span class="k-empty">${data}</span>',enabled:this.options.reorderable,dataSource:this.dataSource},t))},_initSettingTargets:function(){this.columnsTarget=this._createSettingTarget(this.columnFields,{connectWith:this.rowFields,setting:"columns",filterable:this.options.filterable,sortable:this.options.sortable,messages:{empty:this.options.messages.columnFields,fieldMenu:this.options.messages.fieldMenu}});this.rowsTarget=this._createSettingTarget(this.rowFields,{connectWith:this.columnFields,setting:"rows",filterable:this.options.filterable,sortable:this.options.sortable,messages:{empty:this.options.messages.rowFields,fieldMenu:this.options.messages.fieldMenu}})},_createLayout:function(){var e=this;var t=b(Q);var i=t.find(".k-pivot-rowheaders");var n=t.find(".k-pivot-table");var r=b(c).addClass("k-grid k-widget");e._measureFields();e.columnFields=b(c).addClass("k-pivot-toolbar k-header k-settings-columns");e.rowFields=b(c).addClass("k-pivot-toolbar k-header k-settings-rows");e.columnsHeader=b('<div class="k-grid-header-wrap" />').wrap('<div class="k-grid-header" />');e.columnsHeader.parent().css("padding-right",S.support.scrollbar());e.rowsHeader=b('<div class="k-grid k-widget k-widget-2021 k-alt"/>');e.content=b('<div class="k-grid-content" />');i.append(e.measureFields);i.append(e.rowFields);i.append(e.rowsHeader);r.append(e.columnsHeader.parent());r.append(e.content);n.append(e.columnFields);n.append(r);e.wrapper.append(t);e.columnsHeaderTree=new S.dom.Tree(e.columnsHeader[0]);e.rowsHeaderTree=new S.dom.Tree(e.rowsHeader[0]);e.contentTree=new S.dom.Tree(e.content[0]);e._initSettingTargets()},_progress:function(e){S.ui.progress(this.wrapper,e)},_resize:function(){if(this.content[0].firstChild){this._setSectionsWidth();this._setSectionsHeight();this._setContentWidth();this._setContentHeight();this._columnHeaderReflow()}},_columnHeaderReflow:function(){var e=this.columnsHeader.children("table");if(!S.support.browser.mozilla){return}clearTimeout(this._headerReflowTimeout);e.css("table-layout","auto");this._headerReflowTimeout=setTimeout(function(){e.css("table-layout","")})},_setSectionsWidth:function(){var e=this.rowsHeader;var t=e.parent(".k-pivot-rowheaders").width(u);var i;i=Math.max(L(this.measureFields),L(this.rowFields));i=Math.max(e.children("table").width(),i);t.width(i)},_setSectionsHeight:function(){var e=this.measureFields.height(u).height();var t=this.columnFields.height(u).height();var i=this.rowFields.height(u).innerHeight();var n=this.columnsHeader.height(u).innerHeight();var r=i-this.rowFields.height();var a=t>e?t:e;var o=n>i?n:i;this.measureFields.height(a);this.columnFields.height(a);this.rowFields.height(o-r);this.columnsHeader.height(o)},_setContentWidth:function(){var e=this.content.find("table");var t=this.columnsHeader.children("table");var i=e.children("colgroup").children().length;var n=i*this.options.columnWidth;var r=Math.ceil(n/this.content.width()*100);if(r<100){r=100}e.add(t).css("width",r+"%");this._resetColspan(t)},_setContentHeight:function(){var e=this;var t=e.content;var i=e.rowsHeader;var n=e.wrapper.innerHeight();var r=S.support.scrollbar();var a=t[0].offsetHeight===t[0].clientHeight;var o=e.options.height;if(e.wrapper.is(":visible")){if(!n||!o){if(a){r=0}t.height("auto");i.height(t.height()-r);return}n-=H(e.columnFields);n-=H(e.columnsHeader.parent());if(n<=r*2){n=r*2+1;if(!a){n+=r}}t.height(n);if(a){r=0}i.height(n-r)}},_resetColspan:function(e){var t=this;var i=e.children("tbody").children(":first").children(":first");if(t._colspan===R){t._colspan=i.attr("colspan")}i.attr("colspan",1);clearTimeout(t._layoutTimeout);t._layoutTimeout=setTimeout(function(){i.attr("colspan",t._colspan);t._colspan=R})},_axisMeasures:function(e){var t=[];var i=this.dataSource;var n=i.measures();var r=n.length>1||n[0]&&n[0].type;if(i.measuresAxis()===e){if(i[e]().length===0||r){t=n}}return t},items:function(){return[]},refresh:function(){var t=this;var e=t.dataSource;var i=e.axes();var n=(i.columns||{}).tuples||[];var r=(i.rows||{}).tuples||[];var a=t._columnBuilder;var o=t._rowBuilder;var s={};var l={};if(t.trigger(W,{action:"rebind"})){return}a.measures=t._axisMeasures(Z);o.measures=t._axisMeasures(X);t.columnsHeaderTree.render(a.build(n));t.rowsHeaderTree.render(o.build(r));s={indexes:a._indexes,measures:a.measures,metadata:a.metadata};l={indexes:o._indexes,measures:o.measures,metadata:o.metadata};t.contentTree.render(t._contentBuilder.build(e.view(),s,l));t._resize();if(t.touchScroller){t.touchScroller.contentResized()}else{var d=S.touchScroller(t.content);if(d&&d.movable){t.touchScroller=d;d.movable.bind("change",function(e){S.scrollLeft(t.columnsHeader,-e.sender.x);t.rowsHeader.scrollTop(-e.sender.y)})}}t._progress(false);t.trigger(U)},_scrollable:function(){var e=this;var t=e.columnsHeader;var i=e.rowsHeader;e.content.scroll(function(){S.scrollLeft(t,this.scrollLeft);i.scrollTop(this.scrollTop)});i.bind("DOMMouseScroll"+p+" mousewheel"+p,b.proxy(e._wheelScroll,e))},_wheelScroll:function(e){if(e.ctrlKey){return}var t=S.wheelDeltaY(e);var i=this.content.scrollTop();if(t){e.preventDefault();b(e.currentTarget).one("wheel"+p,false);this.rowsHeader.scrollTop(i+-t);this.content.scrollTop(i+-t)}}});var I=S.dom.element;var M=S.dom.html;var Ye=function(e,t){return{maxChildren:0,children:0,maxMembers:0,members:0,measures:1,levelNum:e,parentMember:t!==0}};var z=function(e,t){var i=[];var n=0;for(;n<=t;n++){i.push(e.members[n].name)}return i};var Qe=function(e,t){var i="";var n=0;for(;n<=t;n++){i+=e.members[n].name}return i};var Xe=e.extend({init:function(){this.measures=1;this.metadata={}},build:function(e){var t=this._tbody(e);var i=this._colGroup();return[I("table",null,[i,t])]},reset:function(){this.metadata={}},_colGroup:function(){var e=this._rowLength();var t=[];var i=0;for(;i<e;i++){t.push(I("col",null))}return I("colgroup",null,t)},_tbody:function(e){var t=e[0];this.map={};this.rows=[];this.rootTuple=t;this._indexes=[];if(t){this._buildRows(t,0);this._normalize()}else{this.rows.push(I("tr",null,[I("th",null,[M("&nbsp;")])]))}return I("tbody",null,this.rows)},_normalize:function(){var e=this.rows;var t=e.length;var i=0;var n;var r;var a;var o;var s;for(;i<t;i++){n=e[i];if(n.rowSpan===1){continue}o=n.children;a=0;r=o.length;for(;a<r;a++){s=o[a];if(s.tupleAll){s.attr.rowSpan=n.rowSpan}}}},_rowIndex:function(e){var t=this.rows;var i=t.length;var n=0;for(;n<i;n++){if(t[n]===e){break}}return n},_rowLength:function(){var e=this.rows[0]?this.rows[0].children:[];var t=e.length;var i=0;var n=0;if(t){for(;n<t;n++){i+=e[n].attr.colSpan||1}}if(!i){i=this.measures}return i},_row:function(e,t,i){var n=this.rootTuple.members[t].name;var r=e.members[t].levelNum;var a=n+r;var o=this.map;var s;var l;var d=o[a];if(!d){d=I("tr",null,[]);d.parentMember=i;d.collapsed=0;d.colSpan=0;d.rowSpan=1;o[a]=d;s=o[n+(Number(r)-1)];if(s){l=s.children;if(l[1]&&l[1].attr.className.indexOf("k-alt")===-1){d.notFirst=true}else{d.notFirst=s.notFirst}}this.rows.splice(this._rowIndex(s)+1,0,d)}else{d.notFirst=false;if(!d.parentMember||d.parentMember!==i){d.parentMember=i;d.collapsed=0;d.colSpan=0}}return d},_measures:function(e,t,i){var n=this.map;var r=n.measureRow;var a;if(!r){r=I("tr",null,[]);n.measureRow=r;this.rows.push(r)}for(var o=0,s=e.length;o<s;o++){a=e[o];r.children.push(this._cell(i||"",[this._content(a,t)],a))}return s},_content:function(e,t){return M(this.template({member:e,tuple:t}))},_cell:function(e,t,i){var n=I("th",{className:"k-header"+e},t);n.value=i.caption||i.name;return n},_buildRows:function(e,t,i){var n=e.members;var r=n[t];var a=n[t+1];var o,s,l,d;var u,c,f;var h=[];var p;var v=0;var m;var g;var _=0;var b=0;if(r.measure){this._measures(r.children,e);return}p=S.stringify(z(e,t));o=this._row(e,t,i);l=r.children;d=l.length;m=this.metadata[p];if(!m){this.metadata[p]=m=Ye(Number(r.levelNum),t);m.rootLevelNum=Number(this.rootTuple.members[t].levelNum)}this._indexes.push({path:p,tuple:e});if(r.hasChildren){if(m.expanded===false){_=m.maxChildren;o.collapsed+=_;m.children=0;d=0}f={className:"k-icon "+(d?T:D)};f[S.attr("path")]=p;h.push(I("span",f))}h.push(this._content(r,e));u=this._cell(o.notFirst?" k-first":"",h,r);o.children.push(u);o.colSpan+=1;if(d){c=this._cell(" k-alt",[this._content(r,e)],r);o.children.push(c);for(;v<d;v++){s=this._buildRows(l[v],t,r)}g=s.colSpan;_=s.collapsed;u.attr.colSpan=g;m.children=g;m.members=1;o.colSpan+=g;o.collapsed+=_;o.rowSpan=s.rowSpan+1;if(a){if(a.measure){g=this._measures(a.children,e," k-alt")}else{s=this._buildRows(e,t+1);g=s.colSpan;o.collapsed+=s.collapsed;b=s.collapsed}c.attr.colSpan=g;g-=1;m.members+=g;o.colSpan+=g}}else if(a){if(a.measure){g=this._measures(a.children,e)}else{s=this._buildRows(e,t+1);g=s.colSpan;o.collapsed+=s.collapsed;b=s.collapsed}m.members=g;if(g>1){u.attr.colSpan=g;o.colSpan+=g-1}}if(m.maxMembers<m.members+b){m.maxMembers=m.members+b}l=m.children+_;if(m.maxChildren<l){m.maxChildren=l}(c||u).tupleAll=true;return o}});var Ze=e.extend({init:function(){this.metadata={}},build:function(e){var t=this._tbody(e);var i=this._colGroup();return[I("table",null,[i,t])]},reset:function(){this.metadata={}},_rowLength:function(){var e=this.rows[0].children;var t=0;var i=0;var n=e[i];while(n){t+=n.attr.colSpan||1;n=e[++i]}return t},_colGroup:function(){var e=this._rowLength();var t=[];var i=0;for(;i<e;i++){t.push(I("col",null))}return I("colgroup",null,t)},_tbody:function(e){var t=e[0];this.rootTuple=t;this.rows=[];this.map={};this._indexes=[];if(t){this._buildRows(t,0);this._normalize()}else{this.rows.push(I("tr",null,[I("td",null,[M("&nbsp;")])]))}return I("tbody",null,this.rows)},_normalize:function(){var e=this.rows;var t=e.length;var i=0;var n=this.rootTuple.members;var r=n[0].name;var a=n.length;var o=0;var s;var l;var d;var u=this.map;var c;for(;i<t;i++){s=e[i];for(o=0;o<a;o++){d=this[n[o].name];l=s.colSpan["dim"+o];if(l&&l.colSpan<d){l.attr.colSpan=d-l.colSpan+1}}}s=u[r];c=u[r+"all"];if(s){s.children[0].attr.className="k-first"}if(c){c.children[0].attr.className+=" k-first"}},_row:function(e){var t=I("tr",null,e);t.rowSpan=1;t.colSpan={};this.rows.push(t);return t},_content:function(e,t){return M(this.template({member:e,tuple:t}))},_cell:function(e,t,i){var n=I("td",{className:e},t);n.value=i.caption||i.name;return n},_buildRows:function(e,t){var i=this.map;var n;var r=e.members;var a=r[t];var o=r[t+1];var s=a.children;var l=s.length;var d=Number(a.levelNum);var u=this.rootTuple.members[t].name;var c=z(e,t-1).join("");var f=Number(this.rootTuple.members[t].levelNum);var h=c+(f===d?"":a.parentName||"");var p=i[h+"all"]||i[h];var v=d+1;var m,g;var _,b;var w;var k;var y=[];var x;var C;if(!p||p.hasChild){p=this._row()}else{p.hasChild=true}if(a.measure){k=p.allCell?"k-grid-footer":"";p.children.push(this._cell(k,[this._content(s[0],e)],s[0]));p.rowSpan=l;for(C=1;C<l;C++){this._row([this._cell(k,[this._content(s[C],e)],s[C])])}return p}i[c+a.name]=p;n=S.stringify(z(e,t));w=this.metadata[n];if(!w){this.metadata[n]=w=Ye(d,t);w.rootLevelNum=f}this._indexes.push({path:n,tuple:e});if(a.hasChildren){if(w.expanded===false){l=0;w.children=0}x={className:"k-icon "+(l?T:D)};x[S.attr("path")]=n;y.push(I("span",x))}y.push(this._content(a,e));k=p.allCell&&!l?"k-grid-footer":"";m=this._cell(k,y,a);m.colSpan=v;p.children.push(m);p.colSpan["dim"+t]=m;if(!this[u]||this[u]<v){this[u]=v}if(l){p.allCell=false;p.hasChild=false;for(C=0;C<l;C++){_=this._buildRows(s[C],t);if(p!==_){p.rowSpan+=_.rowSpan}}if(p.rowSpan>1){m.attr.rowSpan=p.rowSpan}w.children=p.rowSpan;g=this._cell("k-grid-footer",[this._content(a,e)],a);g.colSpan=v;b=this._row([g]);b.colSpan["dim"+t]=g;b.allCell=true;i[c+a.name+"all"]=b;if(o){_=this._buildRows(e,t+1);g.attr.rowSpan=_.rowSpan}p.rowSpan+=b.rowSpan;w.members=b.rowSpan}else if(o){p.hasChild=false;this._buildRows(e,t+1);(g||m).attr.rowSpan=p.rowSpan;w.members=p.rowSpan}if(w.maxChildren<w.children){w.maxChildren=w.children}if(w.maxMembers<w.members){w.maxMembers=w.members}return p}});var Je=e.extend({init:function(){this.columnAxis={};this.rowAxis={}},build:function(e,t,i){var n=t.indexes[0];var r=t.metadata[n?n.path:R];this.columnAxis=t;this.rowAxis=i;this.data=e;this.rowLength=r?r.maxChildren+r.maxMembers:t.measures.length||1;if(!this.rowLength){this.rowLength=1}var a=this._tbody();var o=this._colGroup();return[I("table",null,[o,a])]},_colGroup:function(){var e=this.columnAxis.measures.length||1;var t=[];var i=0;if(this.rows[0]){e=this.rows[0].children.length}for(;i<e;i++){t.push(I("col",null))}return I("colgroup",null,t)},_tbody:function(){this.rows=[];if(this.data[0]){this.columnIndexes=this._indexes(this.columnAxis,this.rowLength);this.rowIndexes=this._indexes(this.rowAxis,Math.ceil(this.data.length/this.rowLength));this._buildRows()}else{this.rows.push(I("tr",null,[I("td",null,[M("&nbsp;")])]))}return I("tbody",null,this.rows)},_indexes:function(e,t){var i=[];var n;var r=e.indexes;var a=e.metadata;var o=e.measures;var s=o.length||1;var l;var d=0;var u=0;var c=0;var f=r.length;var h;var p;var v;var m;if(!f){for(h=0;h<s;h++){i[h]={index:h,measure:o[h],tuple:null}}return i}for(;c<f;c++){n=r[c];l=a[n.path];v=l.children+l.members;m=0;if(v){v-=s}if(l.expanded===false&&l.children!==l.maxChildren){m=l.maxChildren}if(l.parentMember&&l.levelNum===l.rootLevelNum){v=-1}if(v>-1){for(h=0;h<s;h++){p=v+h;if(!l.children){p+=u}i[v+u+h]={children:v,index:d,measure:o[h],tuple:n.tuple};d+=1}while(i[u]!==R){u+=1}}if(u===t){break}d+=m}return i},_buildRows:function(){var e=this.rowIndexes;var t=e.length;var i=0;for(;i<t;i++){var n=e[i];if(n){this.rows.push(this._buildRow(n))}}},_buildRow:function(e){var t=e.index*this.rowLength;var i=this.columnIndexes;var n=i.length;var r;var a=[];var o=0;var s;var l,d;var u,c,f;for(;o<n;o++){r=i[o];if(r===R){continue}u={};if(r.children){u.className="k-alt"}d="";c=this.data[t+r.index];f=r.measure||e.measure;s={columnTuple:r.tuple,rowTuple:e.tuple,measure:f,dataItem:c};if(c.value!==""&&f&&f.type){if(f.type==="status"){d=this.kpiStatusTemplate(s)}else if(f.type==="trend"){d=this.kpiTrendTemplate(s)}}if(!d){d=this.dataTemplate(s)}l=I("td",u,[M(d)]);l.value=c.value;a.push(l)}u={};if(e.children){u.className="k-grid-footer"}return I("tr",u,a)}});i.plugin(E);S.PivotExcelExporter=S.Class.extend({init:function(e){this.options=e;this.widget=e.widget;this.dataSource=this.widget.dataSource},_columns:function(){var e=this.widget.columnsHeaderTree.children[0];var t=this.widget.rowsHeaderTree.children[0];var i=e.children[0].children.length;var n=t.children[0].children.length;var r=this.widget.options.columnWidth;var a=[];var o;if(n&&this.dataSource.data()[0]){for(o=0;o<n;o++){a.push({autoWidth:true})}}for(o=0;o<i;o++){a.push({autoWidth:false,width:r})}return a},_cells:function(e,t,i){var n=[];var r=0;var a=e.length;var o;var s,l;var d,u;for(;r<a;r++){s=[];l=e[r].children;o=l.length;for(d=0;d<o;d++){u=l[d];s.push({background:"#7a7a7a",color:"#fff",value:u.value,colSpan:u.attr.colSpan||1,rowSpan:u.attr.rowSpan||1})}if(i){i(s,r)}n.push({cells:s,type:t})}return n},_rows:function(){var e=this.widget.columnsHeaderTree.children[0];var t=this.widget.rowsHeaderTree.children[0];var o=e.children[0].children.length;var i=t.children[0].children.length;var n=e.children[1].children;var r=t.children[1].children;var s=this.widget.contentTree.children[0].children[1].children;var a=this._cells(n,"header");if(i){a[0].cells.splice(0,0,{background:"#7a7a7a",color:"#fff",value:"",colSpan:i,rowSpan:n.length})}var l=function(e,t){var i=0;var n,r;var a=s[t].children;for(;i<o;i++){n=a[i];r=Number(n.value);if(isNaN(r)){r=n.value}e.push({background:"#dfdfdf",color:"#333",value:r,colSpan:1,rowSpan:1})}};var d=this._cells(r,"data",l);return a.concat(d)},_freezePane:function(){var e=this.widget.columnsHeaderTree.children[0];var t=this.widget.rowsHeaderTree.children[0];var i=t.children[0].children.length;var n=e.children[1].children;return{colSplit:i,rowSplit:n.length}},workbook:function(){var e;if(this.dataSource.view()[0]){e=b.Deferred();e.resolve()}else{e=this.dataSource.fetch()}return e.then(b.proxy(function(){return{sheets:[{columns:this._columns(),rows:this._rows(),freezePane:this._freezePane(),filter:null}]}},this))}});var et={extend:function(e){e.events.push("excelExport");e.options.excel=b.extend(e.options.excel,this.options);e.saveAsExcel=this.saveAsExcel},options:{proxyURL:"",filterable:false,fileName:"Export.xlsx"},saveAsExcel:function(){var i=this.options.excel||{};var e=new S.PivotExcelExporter({widget:this});e.workbook().then(b.proxy(function(t){if(!this.trigger("excelExport",{workbook:t})){var e=new S.ooxml.Workbook(t);e.toDataURLAsync().then(function(e){S.saveAs({dataURI:e,fileName:t.fileName||i.fileName,proxyURL:i.proxyURL,forceProxy:i.forceProxy})})}},this))}};S.PivotExcelMixin=et;if(S.ooxml&&S.ooxml.Workbook){et.extend(E.prototype)}if(S.PDFMixin){S.PDFMixin.extend(E.prototype);E.fn._drawPDF=function(){return this._drawPDFShadow({width:this.wrapper.width()},{avoidLinks:this.options.pdf.avoidLinks})}}})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.pivot.fieldmenu",["kendo.pivotgrid","kendo.menu","kendo.window","kendo.treeview","kendo.dropdownlist"],e)})(function(){var e={id:"pivot.fieldmenu",name:"PivotFieldMenu",category:"web",description:"The PivotFieldMenu widget allows the user to filter on fields displayed in PivotGrid",depends:["menu","window","treeview","dropdownlist"],advanced:true};(function(o,e){var i=window.kendo;var n=i.ui;var t="kendoContextMenu";var r=o.proxy;var a=".kendoPivotFieldMenu";var s=n.Widget;var l="k-filter-item";var d="aria-label";var u=s.extend({init:function(e,t){s.fn.init.call(this,e,t);this._dataSource();this._layout();i.notify(this)},events:[],options:{name:"PivotFieldMenu",filter:null,filterable:true,sortable:true,messages:{info:"Show items with value that:",sortAscending:"Sort Ascending",sortDescending:"Sort Descending",filterFields:"Fields Filter",filter:"Filter",include:"Include Fields...",title:"Fields to include",clear:"Clear",ok:"OK",cancel:"Cancel",operators:{contains:"Contains",doesnotcontain:"Does not contain",startswith:"Starts with",endswith:"Ends with",eq:"Is equal to",neq:"Is not equal to"}}},_layout:function(){var e=this.options;this.wrapper=o(i.template(m)({ns:i.ns,filterable:e.filterable,sortable:e.sortable,messages:e.messages}));this.menu=this.wrapper[t]({filter:e.filter,target:this.element,orientation:"vertical",showOn:"click",closeOnClick:false,open:r(this._menuOpen,this),select:r(this._select,this),copyAnchorStyles:false}).data(t);this._createWindow();if(e.filterable){this._initFilterForm()}},_initFilterForm:function(){var e=this.menu.element.find("."+l);var t=r(this._filter,this);this._filterOperator=new i.ui.DropDownList(e.find("select"));this._filterValue=e.find(".k-textbox");this._updateFilterAriaLabel();e.on("submit"+a,t).on("click"+a,".k-button-filter",t).on("click"+a,".k-button-clear",r(this._reset,this))},_setFilterForm:function(e){var t=this._filterOperator;var i="";var n="";if(e){i=e.operator;n=e.value}t.value(i);if(!t.value()){t.select(0)}this._filterValue.val(n)},_clearFilters:function(e){var t=this.dataSource.filter()||{};var i;var n=0;var r;t.filters=t.filters||[];i=f(t,e);for(r=i.length;n<r;n++){t.filters.splice(t.filters.indexOf(i[n]),1)}return t},_convert:function(e){var t=this.dataSource.options.schema;var i=((t.model||{}).fields||{})[this.currentMember];if(i){if(i.type==="number"){e=parseFloat(e)}else if(i.type==="boolean"){e=Boolean(o.parseJSON(e))}}return e},_filter:function(e){var t=this;var i=t._convert(t._filterValue.val());e.preventDefault();if(i===""){t.menu.close();return}var n={field:t.currentMember,operator:t._filterOperator.value(),value:i};var r=t._clearFilters(t.currentMember);r.filters.push(n);t.dataSource.filter(r);t.menu.close()},_updateFilterAriaLabel:function(){var e=this.menu.element.find("."+l);var t=this._filterOperator.value();var i=this.options.messages.operators[t];e.find("select").attr(d,i)},_reset:function(e){var t=this;var i=t._clearFilters(t.currentMember);e.preventDefault();if(!i.filters[0]){i={}}t.dataSource.filter(i);t._setFilterForm(null);t.menu.close()},_sort:function(e){var t=this.currentMember;var i=this.dataSource.sort()||[];i=c(i,t);i.push({field:t,dir:e});this.dataSource.sort(i);this.menu.close()},setDataSource:function(e){this.options.dataSource=e;this._dataSource()},_dataSource:function(){this.dataSource=i.data.PivotDataSource.create(this.options.dataSource)},_createWindow:function(){var e=this.options.messages;this.includeWindow=o(i.template(g)({messages:e})).on("click"+a,".k-button-ok",r(this._applyIncludes,this)).on("click"+a,".k-button-cancel",r(this._closeWindow,this));this.includeWindow=new n.Window(this.includeWindow,{title:e.title,visible:false,resizable:false,open:r(this._windowOpen,this)})},_applyIncludes:function(e){var t=[];var i;var n=this.treeView.dataSource.view();var r=n[0].checked;var a=this.dataSource.filter();var o=f(a,this.currentMember,"in")[0];p(n,t);if(o){if(r){a.filters.splice(a.filters.indexOf(o),1);if(!a.filters.length){a={}}}else{o.value=t.join(",")}i=a}if(t.length){if(!i&&!r){i={field:this.currentMember,operator:"in",value:t.join(",")};if(a){a.filters.push(i);i=a}}}if(i){this.dataSource.filter(i)}this._closeWindow(e)},_closeWindow:function(e){e.preventDefault();this.includeWindow.close()},_treeViewDataSource:function(){var r=this;return i.data.HierarchicalDataSource.create({schema:{model:{id:"uniqueName",hasChildren:function(e){return parseInt(e.childrenCardinality,10)>0}}},transport:{read:function(t){var e={};var i=r.treeView.dataSource.get(t.data.uniqueName);var n=t.data.uniqueName;if(!n){e.levelUniqueName=r.currentMember+".[(ALL)]"}else{e.memberUniqueName=i.uniqueName.replace(/\&/g,"&amp;");e.treeOp=1}r.dataSource.schemaMembers(e).done(function(e){h(r.dataSource.filter(),r.currentMember,e);t.success(e)}).fail(t.error)}}})},_createTreeView:function(e){var t=this;t.treeView=new n.TreeView(e,{autoBind:false,dataSource:t._treeViewDataSource(),dataTextField:"caption",template:"#: data.item.caption || data.item.name #",checkboxes:{checkChildren:true},dataBound:function(){n.progress(t.includeWindow.element,false)}})},_menuOpen:function(e){if(!e.event){return}var t=i.attr("name");this.currentMember=o(e.event.target).closest("["+t+"]").attr(t);if(this.options.filterable){this._setFilterForm(f(this.dataSource.filter(),this.currentMember)[0])}},_select:function(e){var t=o(e.item);o(".k-pivot-filter-window").not(this.includeWindow.element).kendoWindow("close");if(t.hasClass("k-include-item")){this.includeWindow.center().open()}else if(t.hasClass("k-sort-asc")){this._sort("asc")}else if(t.hasClass("k-sort-desc")){this._sort("desc")}else if(t.hasClass(l)){this._updateFilterAriaLabel()}},_windowOpen:function(){if(!this.treeView){this._createTreeView(this.includeWindow.element.find(".k-treeview"))}n.progress(this.includeWindow.element,true);this.treeView.dataSource.read()},destroy:function(){s.fn.destroy.call(this);if(this.menu){this.menu.destroy();this.menu=null}if(this.treeView){this.treeView.destroy();this.treeView=null}if(this.includeWindow){this.includeWindow.destroy();this.includeWindow=null}this.wrapper=null;this.element=null}});function c(e,t){var i=[];for(var n=0,r=e.length;n<r;n++){if(e[n].field!==t){i.push(e[n])}}return i}function f(e,t,i){if(!e){return[]}e=e.filters;var n=0;var r=[];var a=e.length;var o;for(;n<a;n++){o=e[n].operator;if((!i&&o!=="in"||o===i)&&e[n].field===t){r.push(e[n])}}return r}function h(e,t,i){var n,r=0,a=i.length;e=f(e,t,"in")[0];if(!e){for(;r<a;r++){i[r].checked=true}}else{n=e.value.split(",");for(;r<a;r++){i[r].checked=o.inArray(i[r].uniqueName,n)>=0}}}function p(e,t){var i,n=e.length;for(i=0;i<n;i++){if(e[i].checked&&e[i].level()!==0){t.push(e[i].uniqueName)}if(e[i].hasChildren){p(e[i].children.view(),t)}}}var v='<div class="k-filterable k-content" tabindex="-1" data-role="fieldmenu">'+'<form class="k-filter-menu">'+'<div class="k-filter-menu-container">'+'<div class="k-filter-help-text">#=messages.info#</div>'+"<select>"+"#for(var op in messages.operators){#"+'<option value="#=op#">#=messages.operators[op]#</option>'+"#}#"+"</select>"+'<input class="k-textbox" type="text" '+d+'="#=messages.filter#" title="#=messages.filter#" />'+'<div class="k-action-buttons">'+'<a class="k-button k-primary k-button-filter" href="\\#">#=messages.filter#</a>'+'<a class="k-button k-button-clear" href="\\#">#=messages.clear#</a>'+"</div>"+"</div>"+"</form>"+"</div>";var m='<ul class="k-pivot-fieldmenu">'+"# if (sortable) {#"+'<li class="k-item k-menu-item k-sort-asc">'+'<span class="k-link k-menu-link">'+'<span class="k-icon k-i-sort-asc-sm"></span>'+"${messages.sortAscending}"+"</span>"+"</li>"+'<li class="k-item k-menu-item k-sort-desc">'+'<span class="k-link k-menu-link">'+'<span class="k-icon k-i-sort-desc-sm"></span>'+"${messages.sortDescending}"+"</span>"+"</li>"+"# if (filterable) {#"+'<li class="k-separator"></li>'+"# } #"+"# } #"+"# if (filterable) {#"+'<li class="k-item k-menu-item k-include-item">'+'<span class="k-link k-menu-link">'+'<span class="k-icon k-i-filter"></span>'+"${messages.include}"+"</span>"+"</li>"+'<li class="k-separator"></li>'+'<li class="k-item k-menu-item '+l+'">'+'<span class="k-link k-menu-link">'+'<span class="k-icon k-i-filter"></span>'+"${messages.filterFields}"+"</span>"+"<ul>"+"<li>"+v+"</li>"+"</ul>"+"</li>"+"# } #"+"</ul>";var g='<div class="k-popup-edit-form k-pivot-filter-window"><div class="k-edit-form-container">'+'<div class="k-treeview"></div>'+'<div class="k-edit-buttons k-state-default">'+'<a class="k-button k-primary k-button-ok" href="\\#">'+"${messages.ok}"+"</a>"+'<a class="k-button k-button-cancel" href="\\#">'+"${messages.cancel}"+"</a>"+"</div></div>";n.plugin(u)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.filter",["kendo.core","kendo.buttongroup"],e)})(function(){var e={id:"filter",name:"Filter",category:"web",depends:["core","buttongroup"]};var p={number:"<input type='text' title='#=field#' data-#=ns#role='numerictextbox' data-#=ns#bind='value: value'/>",string:"<input type='text' title='#=field#' class='k-textbox' data-#=ns#bind='value: value'/>",boolean:"<input class='k-checkbox' data-role='checkbox' data-#=ns#bind='checked: value' type='checkbox'>",date:"<input type='text' title='#=field#' data-#=ns#role='datepicker' data-#=ns#bind='value: value'/>"};var v="<select data-#=ns#bind='value: operator' title='#=operatorsLabel#' data-#=ns#role='dropdownlist'>"+"#for(var op in operators){#"+"<option value='#=op#'>#=operators[op].text || operators[op]#</option>"+"#}#"+"</select>";var t="<div data-#=ns#bind='value: logic' data-#=ns#role='filterbuttongroup'>"+"#for(var op in operators){#"+"<span value='#=op#'>#=operators[op]#</span>"+"#}#"+"</div>";var m="<ul class='k-filter-container'>"+"<li class='k-filter-group-main'></li>"+"</ul>";var g="<div class='k-filter-toolbar'>"+"<div class='k-toolbar' id='#=uid#'>"+"<div class='k-filter-toolbar-item'>"+t+"</div>"+"<div class='k-filter-toolbar-item'>"+"<button data-role='button' class='k-button k-button-icon' role='button' aria-disabled='false' title='#=addExpression#' aria-label='#=addExpression#' tabindex='0'>"+"<span class='k-icon k-i-filter-add-expression'>"+"</span>"+"</button>"+"</div>"+"<div class='k-filter-toolbar-item'>"+"<button data-role='button' class='k-button k-button-icon' role='button' aria-disabled='false' title='#=addGroup#' aria-label='#=addGroup#' tabindex='0'>"+"<span class='k-icon k-i-filter-add-group'>"+"</span>"+"</button>"+"</div>"+"<div class='k-filter-toolbar-item'>"+"<button data-role='button' class='k-button-flat k-button k-button-icon' role='button' title='#=close#' aria-label='#=close#' aria-disabled='false' tabindex='0'>"+"<span class='k-icon k-i-close'>"+"</span>"+"</button>"+"</div>"+"</div>"+"</div>";var _="<li class='k-filter-item'>"+"<div class='k-filter-toolbar'>"+"<div class='k-toolbar'>"+"<div class='k-filter-toolbar-item'>"+t+"</div>"+"<div class='k-filter-toolbar-item'>"+"<button data-role='button' class='k-button k-button-icon' role='button' title='#=addExpression#' aria-label='#=addExpression#' aria-disabled='false' tabindex='0'>"+"<span class='k-icon k-i-filter-add-expression'>"+"</span>"+"</button>"+"</div>"+"<div class='k-filter-toolbar-item'>"+"<button data-role='button' class='k-button k-button-icon' role='button' title='#=addGroup#' aria-label='#=addGroup#' aria-disabled='false' tabindex='0'>"+"<span class='k-icon k-i-filter-add-group'>"+"</span>"+"</button>"+"</div>"+"<div class='k-filter-toolbar-item'>"+"<button data-role='button' class='k-button-flat k-button k-button-icon' role='button' title='#=close#' aria-label='#=close#' aria-disabled='false' tabindex='0'>"+"<span class='k-icon k-i-close'>"+"</span>"+"</button>"+"</div>"+"</div>"+"</div>"+"</li>";var b="<li class='k-filter-item'>"+"<div class='k-filter-toolbar'>"+"<div class='k-toolbar' id='#=uid#'>"+"<div class='k-filter-toolbar-item k-filter-field'>"+"<select data-#=ns#bind='value: field' title='#=fieldsLabel#' class='k-filter-dropdown' data-auto-width='true' data-#=ns#role='dropdownlist'>"+"#for(var current in fields){#"+"<option value='#=fields[current].name#'>#=fields[current].label#</option>"+"#}#"+"</select>"+"</div>"+"<div class='k-filter-toolbar-item k-filter-operator'>"+"</div>"+"<div class='k-filter-toolbar-item k-filter-value'>"+"</div>"+"<div class='k-filter-toolbar-item'>"+"<button data-role='button' class='k-button-flat k-button k-button-icon' role='button' title='#=close#' aria-label='#=close#' aria-disabled='false' tabindex='0'>"+"<span class='k-icon k-i-close'>"+"</span>"+"</button>"+"</div>"+"</div>"+"</div>"+"</li>";(function(l){var d=window.kendo,e=d.ui,r=e.Widget,n=e.ButtonGroup,a="change",t=".kendoFilter",i="Is equal to",o="Is not equal to",s=l.proxy;var u=n.extend({init:function(e,t){var i=this;n.fn.init.call(i,e,t)},options:{name:"FilterButtonGroup"},value:function(e){if(e===undefined){return this._value}this._value=e;n.fn.select.call(this,this.wrapper.find("[value='"+e+"']")[0]);this.trigger(a)},select:function(e){if(e!==-1){this.value(l(e).attr("value"))}}});var c=r.extend({init:function(e,t){var i=this;var n;r.fn.init.call(i,e,t);i.element=l(e).addClass("k-widget k-widget-2021 k-filter");i.dataSource=t.dataSource;i.operators=l.extend(i.options.operators,t.operators);i._getFieldsInfo();i._modelChangeHandler=s(i._modelChange,i);i._renderMain();if(t.expression){i._addExpressionTree(i.filterModel)}i._renderApplyButton();if(i.options.expressionPreview){if(!i._previewContainer){i._previewContainer=l('<div class="k-filter-preview"></div>').insertAfter(i.element.children().eq(0))}n=i._createPreview(i.filterModel.toJSON());i._previewContainer.html(n)}i._attachEvents();i.hasCustomOperators()},events:[a],options:{name:"Filter",dataSource:null,expression:null,applyButton:false,fields:[],mainLogic:"and",messages:{and:"And",or:"Or",apply:"Apply",close:"Close",addExpression:"Add Expression",fields:"Fields",operators:"Operators",addGroup:"Add Group"},operators:{string:{eq:i,neq:o,startswith:"Starts with",contains:"Contains",doesnotcontain:"Does not contain",endswith:"Ends with",isnull:"Is null",isnotnull:"Is not null",isempty:"Is empty",isnotempty:"Is not empty",isnullorempty:"Has no value",isnotnullorempty:"Has value"},number:{eq:i,neq:o,gte:"Is greater than or equal to",gt:"Is greater than",lte:"Is less than or equal to",lt:"Is less than",isnull:"Is null",isnotnull:"Is not null"},date:{eq:i,neq:o,gte:"Is after or equal to",gt:"Is after",lte:"Is before or equal to",lt:"Is before",isnull:"Is null",isnotnull:"Is not null"},boolean:{eq:i,neq:o}}},applyFilter:function(){var e=this.filterModel.toJSON();if(this._hasCustomOperators){this._mapOperators(e)}if(this._hasFieldsFilter(e.filters||[])){this._removeEmptyGroups(e.filters);this.dataSource.filter(e)}else{this.dataSource.filter({})}},destroy:function(){this.element.off(t);d.destroy(this.element.find(".k-filter-group-main"));this._previewContainer=null;this._applyButton=null;this._modelChangeHandler=null;r.fn.destroy.call(this)},setOptions:function(e){d.deepExtend(this.options,e);this.destroy();this.element.empty();this.init(this.element,this.options)},getOptions:function(){var e=l.extend(true,{},this.options);delete e.dataSource;e.expression=this.filterModel.toJSON();return e},_addExpressionTree:function(e){if(e.filters){var t=this.element.find("[id="+e.uid+"]");for(var i=0;i<e.filters.length;i++){if(e.filters[i].logic){this._addGroup(t,e.filters[i])}else{this._addExpression(t,e.filters[i])}if(e.filters[i].filters){this._addExpressionTree(e.filters[i])}}}},_attachEvents:function(){var r=this;r.element.on("click"+t,"button.k-button",function(e){e.preventDefault();var t=l(e.currentTarget);var i=t.find("span");var n=(i.length?i:t).attr("class").split("-").pop();if(n=="close"){r._removeExpression(t.closest(".k-toolbar"))}else if(n=="expression"){r._addExpression(t.closest(".k-toolbar"))}else if(n=="group"){r._addGroup(t.closest(".k-toolbar"))}else if(n=="apply"){r.applyFilter()}})},_addExpression:function(e,t){var i=this;var n=e.attr("id");var r=e.closest(".k-filter-toolbar").next("ul.k-filter-lines");var a=t?i._fields[t.field]:i._defaultField;var o;var s="";if(t){o=t}else{o=h(i.filterModel,n);if(!o.filters){o.set("filters",[])}o=i._addNewModel(o.filters,a)}if(!r.length){r=l("<ul class='k-filter-lines'></ul>").appendTo(e.closest("li"))}s=l(d.template(b)({fields:i._fields,operators:i.operators[a.type],close:i.options.messages.close,fieldsLabel:i.options.messages.fields,uid:o.uid,ns:d.ns})).appendTo(r);i._addExpressionControls(s.find(".k-toolbar"),a,o);if(!t){i._expressionChange()}},_addExpressionControls:function(e,t,i){var n=e.find(".k-filter-toolbar-item");var r=n.eq(1);var a=n.eq(2);d.destroy(r);d.destroy(a);r.empty();a.empty();this._appendOperators(r,t);this._appendEditor(a,t);this._bindModel(e,i);this._showHideEditor(e,i)},_appendOperators:function(e,t){l(d.template(v)({operators:t.operators&&t.operators[t.type]?t.operators[t.type]:this.operators[t.type],operatorsLabel:this.options.messages.operators,ns:d.ns})).appendTo(e)},_appendEditor:function(e,t){if(d.isFunction(t.editor)){t.editor(e,l.extend(true,{},{field:t.name}))}else{l(d.template(t.editor)({ns:d.ns,field:t.name})).appendTo(e)}},_addNewModel:function(e,t){var i;var n=t.type;var r=t.operators;var a;if(!r){r=this.options.operators}a=Object.keys(r[n])[0];e.push({field:t.name});i=e[e.length-1];i.set("value",t.defaultValue);i.set("operator",a);return i},_addGroup:function(e,t){var i=this;var n=i.filterModel;var r=e.attr("id");var a=e.closest(".k-filter-toolbar").next("ul.k-filter-lines");var o;if(t){n=t}else{n=h(n,r);if(!n.filters){n.set("filters",[])}n.filters.push({logic:i.options.mainLogic});n=n.filters[n.filters.length-1]}if(!a.length){a=l("<ul class='k-filter-lines'></ul>").appendTo(e.closest("li"))}o=l(d.template(_)({operators:{and:i.options.messages.and,or:i.options.messages.or},addExpression:i.options.messages.addExpression,addGroup:i.options.messages.addGroup,close:i.options.messages.close,ns:d.ns})).appendTo(a);i._bindModel(o.find(".k-toolbar"),n);if(!t){i._expressionChange()}},_bindModel:function(e,t){e.attr("id",t.uid);t.bind("change",this._modelChangeHandler);d.bind(e,t);e.parent().attr(d.attr("stop"),true)},_createPreview:function(e){var t="";var i=false;var n=this._hasFieldsFilter(e.filters||[]);var r="";var a;var o;if(!e.filters||!e.filters.length||!n){return""}t+='<span class="k-filter-preview-bracket">(</span>';for(var s=0;s<e.filters.length;s++){a=e.filters[s];if(a.filters){r=this._createPreview(a);if(r){if(i){t+='<span class="k-filter-preview-operator"> '+e.logic.toLocaleUpperCase()+" </span>"}i=true}t+=r}if(a.field){o=this._fields[a.field];if(i){t+='<span class="k-filter-preview-operator"> '+e.logic.toLocaleUpperCase()+" </span>"}i=true;t+='<span class="k-filter-preview-field">'+o.label+"</span>";t+='<span class="k-filter-preview-criteria"> '+this._getOperatorText(a.field,a.operator);if(a.operator.indexOf("is")<0){t+=" </span>";t+="<span class='k-filter-preview-value'>'"+d.htmlEncode(o.previewFormat?d.toString(a.value,o.previewFormat):a.value)+"'</span>"}else{t+="</span>"}}}t+='<span class="k-filter-preview-bracket">)</span>';return t},_expressionChange:function(){var e=this;var t=e.filterModel.toJSON();var i="";if(e.options.expressionPreview){i=e._createPreview(t);e._previewContainer.html(i)}e.trigger(a,{expression:t})},_getOperatorText:function(e,t){var i=this._fields[e].type;var n=this._fields[e].operators;if(!n){n=this.options.operators}return n[i][t].text||n[i][t]},_addField:function(e,t){var i=this;e=l.extend(true,{},{name:e.name||t,editor:e.editorTemplate||p[e.type||"string"],defaultValue:e.defaultValue||e.defaultValue===false||e.defaultValue===0?e.defaultValue:"",type:e.type||"string",label:e.label||e.name||t,operators:e.operators,previewFormat:e.previewFormat});i._fields[e.name]=e;if(!i._defaultField){i._defaultField=e}},_getFieldsInfo:function(){var e=this;var t=e.options.fields.length?e.options.fields:(e.options.dataSource.options.schema.model||{}).fields;var i;e._fields={};if(Array.isArray(t)){for(var n=0;n<t.length;n++){i=t[n];e._addField(i)}}else{for(var r in t){i=t[r];e._addField(i,r)}}},_hasFieldsFilter:function(e,t){t=!!t;for(var i=0;i<e.length;i++){if(e[i].filters){t=this._hasFieldsFilter(e[i].filters,t)}if(e[i].field){return true}}return t},_removeEmptyGroups:function(e){if(!e){return}for(var t=e.length-1;t>=0;t--){if(e[t].logic&&!e[t].filters||e[t].filters&&!this._hasFieldsFilter(e[t].filters)){e.splice(t,1);continue}if(e[t].filters){this._removeEmptyGroups(e[t].filters)}}},_modelChange:function(e){var t=this;var i=t.element.find("[id="+e.sender.uid+"]");t._showHideEditor(i,e.sender);if(e.field!=="field"){if(e.field!=="filters"){t._expressionChange()}return}var n=e.sender.field;var r=e.sender.parent();var a=t._fields[n];var o=t._addNewModel(r,a);e.sender.unbind("change",t._modelChangeHandler);r.remove(e.sender);t._addExpressionControls(i,a,o);t._expressionChange()},_renderMain:function(){var e=this;l(m).appendTo(e.element);if(e.options.expression){e.filterModel=d.observable(e.options.expression)}else{e.filterModel=d.observable({logic:e.options.mainLogic})}l(d.template(g)({operators:{and:e.options.messages.and,or:e.options.messages.or},addExpression:e.options.messages.addExpression,addGroup:e.options.messages.addGroup,close:e.options.messages.close,uid:e.filterModel.uid,ns:d.ns})).appendTo(e.element.find("li:first"));e._bindModel(e.element.find(".k-toolbar:first"),e.filterModel)},_removeExpression:function(e){var t=this;var i=e.attr("id");var n=e.closest("li");var r=n.hasClass("k-filter-group-main");var a;var o;if(r){n=n.find(".k-filter-lines");if(t.filterModel.filters){t.filterModel.filters.empty();delete t.filterModel.filters}}else{o=h(t.filterModel,i);a=o.parent();o.unbind("change",t._modelChangeHandler);a.remove(o);if(!a.length){delete a.parent().filters}if(!n.siblings().length){n=n.parent()}}d.destroy(n);n.remove();t._expressionChange()},_renderApplyButton:function(){var e=this;if(!e.options.applyButton){return}if(!e._applyButton){e._applyButton=l(d.format('<button type="button" aria-label="{0}" title="{0}" class="k-button k-filter-apply">{0}</button>',e.options.messages.apply)).appendTo(e.element)}},_showHideEditor:function(e,t){if(t.logic){return}var i=t.operator;var n=e.find(".k-filter-toolbar-item:eq(2)");if(i=="isnull"||i=="isnotnull"||i=="isempty"||i=="isnotempty"||i=="isnullorempty"||i=="isnotnullorempty"){n.hide()}else{n.show()}},_mapOperators:function(e){var r=this;if(e.filters){e.filters.forEach(function(e){if(e.filters){r._mapOperators(e)}else{var t;var i=r._fields[e.field];var n=i.type;if(i.operators&&i.operators[n][e.operator]){t=i.operators[n][e.operator]}else{t=r.operators[n][e.operator]}if(t){e.operator=t.handler||e.operator}}})}},hasCustomOperators:function(){var e=l.extend(true,{},this.operators);for(var t in this._fields){e=l.extend(true,{},e,this._fields[t].operators)}this._hasCustomOperators=f(e)}});function f(e){for(var t in e){var i=e[t];if(i.handler&&typeof i.handler==="function"||typeof i==="object"&&i!==null&&f(i)){return true}}return false}function h(e,t){if(e.uid===t){return e}if(e.filters){for(var i=0;i<e.filters.length;i++){var n=h(e.filters[i],t);if(n){return n}}}}e.plugin(c);e.plugin(u)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.filtercell",["kendo.autocomplete","kendo.datepicker","kendo.numerictextbox","kendo.combobox","kendo.dropdownlist"],e)})(function(){var e={id:"filtercell",name:"Row filter",category:"framework",depends:["autocomplete"],advanced:true};(function(v,m){var g=window.kendo,e=g.ui,n=g.data.DataSource,_=e.Widget,b="change",w="boolean",k="enums",y="string",t="Is equal to",i="Is not equal to",x=v.proxy,r=["isnull","isnotnull","isempty","isnotempty","isnullorempty","isnotnullorempty"];function C(e){var t=typeof e==="string"?e:e.operator;return v.inArray(t,r)>-1}function a(e,t){var i=[];if(v.isPlainObject(e)){if(e.hasOwnProperty("filters")){i=e.filters}else if(e.field==t){return e}}if(v.isArray(e)){i=e}for(var n=0;n<i.length;n++){var r=a(i[n],t);if(r){return r}}}function l(e,t){if(e.filters){e.filters=v.grep(e.filters,function(e){l(e,t);if(e.filters){return e.filters.length}else{return e.field!=t}})}}function o(s,e){var l=g.getter(e,true);return function(e){var t=s(e),i=[],n=0,r={};while(n<t.length){var a=t[n++],o=l(a);if(!r.hasOwnProperty(o)){i.push(a);r[o]=true}}return i}}var s=_.extend({init:function(e,t){e=v(e).addClass("k-filtercell");var i=this.wrapper=v("<span/>").appendTo(e);var n=this,r,a,o=t,s,l,d=n.operators=t.operators||{},u=n.input=v("<input/>").attr(g.attr("bind"),"value: value").appendTo(i);var c=t?t.suggestDataSource:null;if(c){t=v.extend({},t,{suggestDataSource:{}})}_.fn.init.call(n,e[0],t);if(c){n.options.suggestDataSource=c}t=n.options;r=n.dataSource=t.dataSource;n.model=r.reader.model;l=t.type=y;var f=g.getter("reader.model.fields",true)(r)||{};var h=f[t.field];if(h&&h.type){l=t.type=h.type}if(t.values){t.type=l=k}d=d[l]||t.operators[l];if(!o.operator){for(s in d){t.operator=s;break}}n._parse=function(e){return e!=null?e+"":e};if(n.model&&n.model.fields){var p=n.model.fields[t.field];if(p){if(p.parse){n._parse=x(p.parse,p)}}}n.defaultOperator=t.operator;n.viewModel=a=g.observable({operator:t.operator,value:null,operatorVisible:function(){var e=this.get("value");return e!==null&&e!==m&&e!="undefined"||C(this.get("operator"))&&!n._clearInProgress}});n._prevOperator=t.operator;a.bind(b,x(n.updateDsFilter,n));if(l==y){n.initSuggestDataSource(t)}if(t.inputWidth!==null){u.addClass("k-sized-input");u.width(t.inputWidth)}u.attr("aria-label",n._getColumnTitle());u.attr("title",n._getColumnTitle());n._setInputType(t,l);if(l!=w&&t.showOperators!==false){n._createOperatorDropDown(d)}else{v('<div unselectable="on" />').css("display","none").text("eq").appendTo(i);i.addClass("k-operator-hidden")}n._createClearIcon();g.bind(this.wrapper,a);if(l==y){if(!t.template){n.setAutoCompleteSource()}}if(l==k){n.setComboBoxSource(n.options.values)}n._refreshUI();n._refreshHandler=x(n._refreshUI,n);n.dataSource.bind(b,n._refreshHandler)},_setInputType:function(e,t){var i=this,n=i.input;if(typeof e.template=="function"){e.template.call(i.viewModel,{element:i.input,dataSource:i.suggestDataSource});i._angularItems("compile")}else if(t==y){n.attr(g.attr("role"),"autocomplete").attr(g.attr("text-field"),e.dataTextField||e.field).attr(g.attr("filter"),e.suggestionOperator).attr(g.attr("delay"),e.delay).attr(g.attr("min-length"),e.minLength).attr(g.attr("value-primitive"),true)}else if(t=="date"){n.attr(g.attr("role"),"datepicker")}else if(t==w){n.remove();var r=v("<input type='radio'/>");var a=i.wrapper;var o=g.guid();var s=v("<label/>").text(e.messages.isTrue).append(r);r.attr(g.attr("bind"),"checked:value").attr("name",o).val("true");var l=s.clone().text(e.messages.isFalse);r.clone().val("false").appendTo(l);a.append([s,l])}else if(t=="number"){n.attr(g.attr("role"),"numerictextbox").attr("title",i._getColumnTitle())}else if(t==k){n.attr(g.attr("role"),"combobox").attr(g.attr("text-field"),"text").attr(g.attr("suggest"),true).attr(g.attr("filter"),"contains").attr(g.attr("value-field"),"value").attr(g.attr("value-primitive"),true)}},_getColumnTitle:function(){var e=this.options.column;return e?e.title||e.field:""},_createOperatorDropDown:function(t){var e=[],i=this.viewModel;for(var n in t){e.push({text:t[n],value:n})}var r=v('<input class="k-dropdown-operator" '+g.attr("bind")+'="value: operator"/>').appendTo(this.wrapper);this.operatorDropDown=r.kendoDropDownList({dataSource:e,dataTextField:"text",dataValueField:"value",open:function(){this.popup.element.width(150)},valuePrimitive:true}).data("kendoDropDownList");i.bind("change",function(){var e=t[i.operator];r.attr("aria-label",e)});this.operatorDropDown.wrapper.find(".k-i-arrow-60-down").removeClass("k-i-arrow-60-down").addClass("k-i-filter")},initSuggestDataSource:function(e){var t=e.suggestDataSource;if(!(t instanceof n)){if(!e.customDataSource&&t){t.group=m}t=this.suggestDataSource=n.create(t)}if(!e.customDataSource){t._pageSize=m;t.reader.data=o(t.reader.data,this.options.field)}this.suggestDataSource=t},setAutoCompleteSource:function(){var e=this.input.data("kendoAutoComplete");if(e){e.setDataSource(this.suggestDataSource)}},setComboBoxSource:function(e){var t=n.create({data:e});var i=this.input.data("kendoComboBox");if(i&&!this.options.template){i.setDataSource(t)}},_refreshUI:function(){var e=this,t=a(e.dataSource.filter(),this.options.field)||{},i=e.viewModel;e.manuallyUpdatingVM=true;t=v.extend(true,{},t);if(e.options.type==w){if(i.value!==t.value){e.wrapper.find(":radio").prop("checked",false)}}if(t.operator){i.set("operator",t.operator)}i.set("value",t.value);e.manuallyUpdatingVM=false},_applyFilter:function(e){if(e.filters.length){this.dataSource.filter(e)}else{this.dataSource.filter({})}},updateDsFilter:function(e){var t=this,i=t.viewModel,n;if(e.field=="operator"&&i.value===m&&!C(i)&&C(t._prevOperator)){n=t.dataSource.filter()||{filters:[],logic:"and"};l(n,t.options.field);t._prevOperator=i.operator;t._applyFilter(n);return}if(t.manuallyUpdatingVM||e.field=="operator"&&i.value===m&&!C(i)||e.field=="operator"&&t._clearInProgress&&i.value!==null){return}var r=v.extend({},t.viewModel.toJSON(),{field:t.options.field});t._prevOperator=r.operator;var a={logic:"and",filters:[]};var o=false;if(r.value!==m&&r.value!==null||C(r)&&!this._clearInProgress){a.filters.push(r);o=t.trigger(b,{filter:a,field:t.options.field})}if(t._clearInProgress||r.value===null){o=t.trigger(b,{filter:null,field:t.options.field})}if(o){return}var s=t._merge(a);t._applyFilter(s)},_merge:function(e){var t=this,i=e.logic||"and",n=e.filters,r,a=t.dataSource.filter()||{filters:[],logic:"and"},o,s;l(a,t.options.field);for(o=0,s=n.length;o<s;o++){r=n[o];r.value=t._parse(r.value)}n=v.grep(n,function(e){return e.value!==""&&e.value!==null||C(e)});if(n.length){if(a.filters.length){e.filters=n;if(a.logic!=="and"){a.filters=[{logic:a.logic,filters:a.filters}];a.logic="and"}if(n.length>1){a.filters.push(e)}else{a.filters.push(n[0])}}else{a.filters=n;a.logic=i}}return a},_createClearIcon:function(){var e=this;v("<button type='button' class='k-button k-button-icon' title = '"+e.options.messages.clear+"'/>").attr("aria-label",e.options.messages.clear).attr(g.attr("bind"),"visible:operatorVisible").html("<span class='k-icon k-i-filter-clear'></span>").click(x(e.clearFilter,e)).appendTo(e.wrapper)},clearFilter:function(){this._clearInProgress=true;if(C(this.viewModel.operator)){this.viewModel.set("operator",this.defaultOperator)}this.viewModel.set("value",null);this._clearInProgress=false},_angularItems:function(e){var t=this.wrapper.closest("th").get();var i=this.options.column;this.angular(e,function(){return{elements:t,data:[{column:i}]}})},destroy:function(){var e=this;e.filterModel=null;e.operatorDropDown=null;e._angularItems("cleanup");if(e._refreshHandler){e.dataSource.bind(b,e._refreshHandler);e._refreshHandler=null}g.unbind(e.element);_.fn.destroy.call(e);g.destroy(e.element)},events:[b],options:{name:"FilterCell",delay:200,minLength:1,inputWidth:null,values:m,customDataSource:false,field:"",dataTextField:"",type:"string",suggestDataSource:null,suggestionOperator:"startswith",operator:"eq",showOperators:true,template:null,messages:{isTrue:"is true",isFalse:"is false",filter:"Filter",clear:"Clear",operator:"Operator"},operators:{string:{eq:t,neq:i,startswith:"Starts with",contains:"Contains",doesnotcontain:"Does not contain",endswith:"Ends with",isnull:"Is null",isnotnull:"Is not null",isempty:"Is empty",isnotempty:"Is not empty",isnullorempty:"Has no value",isnotnullorempty:"Has value"},number:{eq:t,neq:i,gte:"Is greater than or equal to",gt:"Is greater than",lte:"Is less than or equal to",lt:"Is less than",isnull:"Is null",isnotnull:"Is not null"},date:{eq:t,neq:i,gte:"Is after or equal to",gt:"Is after",lte:"Is before or equal to",lt:"Is before",isnull:"Is null",isnotnull:"Is not null"},enums:{eq:t,neq:i,isnull:"Is null",isnotnull:"Is not null"}}}});e.plugin(s)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.panelbar",["kendo.data"],e)})(function(){var e={id:"panelbar",name:"PanelBar",category:"web",description:"The PanelBar widget displays hierarchical data as a multi-level expandable panel bar.",depends:["core","data","data.odata"]};(function(h,f){var l=window.kendo,c=l.ui,r=l.keys,p=h.extend,a=h.proxy,n=h.each,o=h.isArray,s=l.template,d=c.Widget,H=l.data.HierarchicalDataSource,N=/^(ul|a|div)$/i,u=".kendoPanelBar",O="img",V="href",W="k-last",v="k-link",m="."+v,g="error",_=".k-item",e=".k-group",b=e+":visible",U="k-image",j="k-first",w="change",G="expand",q="select",k="click",y="k-content",$="activate",x="collapse",K="dataBound",Y="mouseenter",Q="mouseleave",X="contentLoad",Z="undefined",C="k-state-active",S="> .k-panel",T="> .k-content",J="string",ee="k-state-focused",D="k-state-disabled",A="k-state-selected",E="."+A,I="k-state-highlight",i=_+":not(.k-state-disabled)",te="> "+i+" > "+m+", .k-panel > "+i+" > "+m,ie=_+".k-state-disabled > .k-link",ne="> li > "+E+", .k-panel > li > "+E,re="k-state-default",ae="aria-disabled",M="aria-expanded",R="aria-hidden",F="aria-selected",P=":visible",oe=":empty",se="single",z={text:"dataTextField",url:"dataUrlField",spriteCssClass:"dataSpriteCssClassField",imageUrl:"dataImageUrlField"},le,B={aria:function(e){var t="";if(e.items||e.content||e.contentUrl||e.expanded){t+=M+"='"+(e.expanded?"true":"false")+"' "}if(e.enabled===false){t+=ae+"='true'"}return t},wrapperCssClass:function(e,t){var i="k-item",n=t.index;if(t.enabled===false){i+=" "+D}else if(t.expanded===true){i+=" "+C}else{i+=" k-state-default"}if(n===0){i+=" k-first"}if(n==e.length-1){i+=" k-last"}if(t.cssClass){i+=" "+t.cssClass}return i},textClass:function(e,t){var i=v;if(t.firstLevel){i+=" k-header"}if(e.selected){i+=" "+A}return i},textAttributes:function(e){return e?" href='"+e+"'":""},arrowClass:function(e){var t="k-icon";t+=e.expanded?" k-panelbar-collapse k-i-arrow-60-up":" k-panelbar-expand k-i-arrow-60-down";return t},text:function(e){return e.encoded===false?e.text:l.htmlEncode(e.text)},groupAttributes:function(e){return e.expanded!==true?" style='display:none'":""},ariaHidden:function(e){return e.expanded!==true},groupCssClass:function(){return"k-group k-panel"},contentAttributes:function(e){return e.item.expanded!==true?" style='display:none'":""},content:function(e){return e.content?e.content:e.contentUrl?"":"&nbsp;"},contentUrl:function(e){return e.contentUrl?'href="'+e.contentUrl+'"':""}};function L(e){e=h(e);e.filter(".k-first:not(:first-child)").removeClass(j);e.filter(".k-last:not(:last-child)").removeClass(W);e.filter(":first-child").addClass(j);e.filter(":last-child").addClass(W)}function de(e){var t=e,i=e.children("ul"),n=t.children(".k-link").children(".k-icon");if(e.hasClass("k-panelbar")){return}if(!n.length&&i.length){n=h("<span class='k-icon' />").appendTo(t)}else if(!i.length||!i.children().length){n.remove();i.remove()}}le=function(e){return e.children("span").children(".k-icon")};var t=l.ui.DataBoundWidget.extend({init:function(e,t){var i=this,n,r;if(o(t)){t={dataSource:t}}r=t&&!!t.dataSource;d.fn.init.call(i,e,t);e=i.wrapper=i.element.addClass("k-widget k-widget-2021 k-reset k-header k-panelbar");t=i.options;if(e[0].id){i._itemId=e[0].id+"_pb_active"}i._tabindex();i._accessors();i._dataSource();i._templates();i._initData(r);i._updateClasses();i._animations(t);e.on(k+u,te,a(i._click,i)).on(Y+u+" "+Q+u,te,i._toggleHover).on(k+u,ie,false).on(k+u,".k-request-retry",a(i._retryRequest,i)).on("keydown"+u,a(i._keydown,i)).on("focus"+u,function(){var e=i.select();i._current(e[0]?e:i._first())}).on("blur"+u,function(){i._current(null)}).attr("role","tree");n=e.find("li."+C+" > ."+y);if(n[0]){i.expand(n.parent(),false)}if(!t.dataSource){i._angularCompile()}l.notify(i)},events:[G,x,q,$,w,g,K,X],options:{name:"PanelBar",dataSource:{},animation:{expand:{effects:"expand:vertical",duration:200},collapse:{duration:200}},messages:{loading:"Loading...",requestFailed:"Request failed.",retry:"Retry"},autoBind:true,loadOnDemand:true,expandMode:"multiple",template:"",dataTextField:null},_angularCompile:function(){var e=this;e.angular("compile",function(){return{elements:e.element.children("li"),data:[{dataItem:e.options.$angular}]}})},_angularCompileElements:function(e,t){var i=this;i.angular("compile",function(){return{elements:e,data:h.map(t,function(e){return[{dataItem:e}]})}})},_angularCleanup:function(){var e=this;e.angular("cleanup",function(){return{elements:e.element.children("li")}})},destroy:function(){d.fn.destroy.call(this);this.element.off(u);this._angularCleanup();l.destroy(this.element)},_initData:function(e){var t=this;if(e){t.element.empty();if(t.options.autoBind){t._progress(true);t.dataSource.fetch()}}},_templates:function(){var e=this,t=e.options,i=a(e._fieldAccessor,e);if(t.template&&typeof t.template==J){t.template=s(t.template)}else if(!t.template){t.template=s("# var text = "+i("text")+"(data.item); #"+"# if (typeof data.item.encoded != 'undefined' && data.item.encoded === false) {#"+"#= text #"+"# } else { #"+"#: text #"+"# } #")}e.templates={content:s("<div class='k-content'#= contentAttributes(data) #>#= content(item) #</div>"),group:s("<ul role='group' aria-hidden='#= ariaHidden(group) #' class='#= groupCssClass(group) #'#= groupAttributes(group) #>"+"#= renderItems(data) #"+"</ul>"),itemWrapper:s("# var url = "+i("url")+"(item); #"+"# var imageUrl = "+i("imageUrl")+"(item); #"+"# var spriteCssClass = "+i("spriteCssClass")+"(item); #"+"# var contentUrl = contentUrl(item); #"+"# var tag = url||contentUrl ? 'a' : 'span'; #"+"<#= tag # class='#= textClass(item, group) #' #= contentUrl ##= textAttributes(url) #>"+"# if (imageUrl) { #"+"<img class='k-image' alt='' src='#= imageUrl #' />"+"# } #"+"# if (spriteCssClass) { #"+"<span class='k-sprite #= spriteCssClass #'></span>"+"# } #"+"#= data.panelBar.options.template(data) #"+"#= arrow(data) #"+"</#= tag #>"),item:s("<li role='treeitem' #=aria(item)#class='#= wrapperCssClass(group, item) #'"+l.attr("uid")+"='#= item.uid #'>"+"#= itemWrapper(data) #"+"# if (item.items && item.items.length > 0) { #"+"#= subGroup({ items: item.items, panelBar: panelBar, group: { expanded: item.expanded } }) #"+"# } else if (item.content || item.contentUrl) { #"+"#= renderContent(data) #"+"# } #"+"</li>"),loading:s("<li class='k-item'><span class='k-icon k-i-loading'></span> #: data.messages.loading #</li>"),retry:s("<li class='k-item'>"+"#: data.messages.requestFailed # "+"<button class='k-button k-request-retry'>#: data.messages.retry #</button>"+"</li>"),arrow:s("<span class='#= arrowClass(item) #'></span>"),empty:s("")}},setOptions:function(e){var t=this.options.animation;this._animations(e);e.animation=p(true,t,e.animation);if("dataSource"in e){this.setDataSource(e.dataSource)}d.fn.setOptions.call(this,e)},expand:function(r,a){var o=this,s={};r=this.element.find(r);if(o._animating&&r.find("ul").is(":visible")){o.one("complete",function(){setTimeout(function(){o.expand(r)})});return}o._animating=true;a=a!==false;r.each(function(e,t){t=h(t);var i=r.children(".k-group,.k-content");if(!i.length){i=o._addGroupElement(r)}var n=i.add(t.find(T));if(!t.hasClass(D)&&n.length>0){if(o.options.expandMode==se&&o._collapseAllExpanded(t)){return o}r.find("."+I).removeClass(I);t.addClass(I);if(!a){s=o.options.animation;o.options.animation={expand:{effects:{}},collapse:{hide:true,effects:{}}}}if(!o._triggerEvent(G,t)){o._toggleItem(t,false,false)}if(!a){o.options.animation=s}}});return o},collapse:function(e,n){var r=this,a={};r._animating=true;n=n!==false;e=r.element.find(e);e.each(function(e,t){t=h(t);var i=t.find(S).add(t.find(T));if(!t.hasClass(D)&&i.is(P)){t.removeClass(I);if(!n){a=r.options.animation;r.options.animation={expand:{effects:{}},collapse:{hide:true,effects:{}}}}if(!r._triggerEvent(x,t)){r._toggleItem(t,true)}if(!n){r.options.animation=a}}});return r},updateArrow:function(e){var t=this;e=h(e);e.children(m).children(".k-panelbar-collapse, .k-panelbar-expand").remove();e.filter(function(){var e=t.dataItem(this);if(!e){return h(this).find(".k-panel").length>0||h(this).find(".k-content").length>0}return e.hasChildren||e.content||e.contentUrl}).children(".k-link:not(:has([class*=k-i-arrow]))").each(function(){var e=h(this),t=e.parent();e.append("<span class='k-icon "+(t.hasClass(C)?" k-panelbar-collapse k-i-arrow-60-up":" k-panelbar-expand k-i-arrow-60-down")+"'/>")})},_accessors:function(){var e=this,t=e.options,i,n,r,a=e.element;for(i in z){n=t[z[i]];r=a.attr(l.attr(i+"-field"));if(!n&&r){n=r}if(!n){n=i}if(!o(n)){n=[n]}t[z[i]]=n}},_progress:function(e,t){var i=this.element;var n=this.templates.loading({messages:this.options.messages});if(arguments.length==1){t=e;if(t){i.html(n)}else{i.empty()}}else{le(e).toggleClass("k-i-loading",t).removeClass("k-i-refresh")}},_refreshRoot:function(e){var i=this;var t=i.element;var n={firstLevel:true,expanded:true,length:t.children().length};this.element.empty();var r=h.map(e,function(e,t){if(typeof e==="string"){return h(e)}else{e.items=[];return h(i.renderItem({group:n,item:p(e,{index:t})}))}});this.element.append(r);var a=this.element.children(".k-item");for(var o=0;o<e.length;o++){this.trigger("itemChange",{item:a.eq(o).find(".k-link").first(),data:e[o],ns:c})}this._angularCompileElements(r,e)},_refreshChildren:function(e,t){var i,n,r;t.children(".k-group").empty();var a=e.children.data();if(!a.length){de(t);n=t.children(".k-group").children("li");this._angularCompileElements(n,a)}else{this.append(e.children,t);if(this.options.loadOnDemand){this._toggleGroup(t.children(".k-group"),false)}n=t.children(".k-group").children("li");for(i=0;i<n.length;i++){r=n.eq(i);this.trigger("itemChange",{item:r.find(".k-link").first(),data:this.dataItem(r),ns:c})}}},findByUid:function(e){var t=this.element.find(".k-item");var i=l.attr("uid");var n;for(var r=0;r<t.length;r++){if(t[r].getAttribute(i)==e){n=t[r];break}}return h(n)},refresh:function(e){var t=this.options;var i=e.node;var n=e.action;var r=e.items;var a=this.wrapper;var o=t.loadOnDemand;if(e.field){if(!r[0]||!r[0].level){return}return this._updateItems(r,e.field)}if(i){a=this.findByUid(i.uid);this._progress(a,false)}if(n=="add"){this._appendItems(e.index,r,a)}else if(n=="remove"){this.remove(this.findByUid(r[0].uid))}else if(n=="itemchange"){this._updateItems(r)}else if(n=="itemloaded"){this._refreshChildren(i,a)}else{this._refreshRoot(r)}if(n!="remove"){for(var s=0;s<r.length;s++){if(!o||r[s].expanded){var l=r[s];if(this._hasChildItems(l)){l.load()}}}}this.trigger(K,{node:i?a:f})},_error:function(e){var t=e.node&&this.findByUid(e.node.uid);var i=this.templates.retry({messages:this.options.messages});if(t){this._progress(t,false);this._expanded(t,false);le(t).addClass("k-i-refresh");e.node.loaded(false)}else{this._progress(false);this.element.html(i)}},_retryRequest:function(e){e.preventDefault();this.dataSource.fetch()},items:function(){return this.element.find(".k-item > span:first-child")},setDataSource:function(e){var t=this.options;t.dataSource=e;this._dataSource();if(this.options.autoBind){this._progress(true);this.dataSource.fetch()}},_bindDataSource:function(){this._refreshHandler=a(this.refresh,this);this._errorHandler=a(this._error,this);this.dataSource.bind(w,this._refreshHandler);this.dataSource.bind(g,this._errorHandler)},_unbindDataSource:function(){var e=this.dataSource;if(e){e.unbind(w,this._refreshHandler);e.unbind(g,this._errorHandler)}},_fieldAccessor:function(e){var t=this.options[z[e]]||[],i=t.length,n="(function(item) {";if(i===0){n+="return item['"+e+"'];"}else{n+="var levels = ["+h.map(t,function(e){return"function(d){ return "+l.expr(e)+"}"}).join(",")+"];";n+="if(item.level){return levels[Math.min(item.level(), "+i+"-1)](item);}else";n+="{return levels["+i+"-1](item)}"}n+="})";return n},_dataSource:function(){var e=this,t=e.options,i=t.dataSource;if(!i){return}i=o(i)?{data:i}:i;e._unbindDataSource();if(!i.fields){i.fields=[{field:"text"},{field:"url"},{field:"spriteCssClass"},{field:"imageUrl"}]}e.dataSource=H.create(i);e._bindDataSource()},_appendItems:function(e,t,i){var n=this,r,a;if(i.hasClass("k-panelbar")){r=i.children("li");a=i}else{a=i.children(".k-group");if(!a.length){a=n._addGroupElement(i)}r=a.children("li")}var o={firstLevel:i.hasClass("k-panelbar"),expanded:true,length:r.length};var s=h.map(t,function(e,t){if(typeof e==="string"){return h(e)}else{return h(n.renderItem({group:o,item:p(e,{index:t})}))}});if(typeof e==Z){e=r.length}for(var l=0;l<s.length;l++){if(r.length===0||e===0){a.append(s[l])}else{s[l].insertAfter(r[e-1])}}n._angularCompileElements(s,t);if(n.dataItem(i)){n.dataItem(i).hasChildren=true;n.updateArrow(i)}},_updateItems:function(e,t){var i=this;var n,r,a,o;var s={panelBar:i.options,item:o,group:{}};var l=t!="expanded";if(t=="selected"){if(e[0][t]){var d=i.findByUid(e[0].uid);if(!d.hasClass(D)){i.select(d,true)}}else{i.clearSelection()}}else{var u=h.map(e,function(e){return i.findByUid(e.uid)});if(l){i.angular("cleanup",function(){return{elements:u}})}for(n=0;n<e.length;n++){s.item=o=e[n];s.panelBar=i;a=u[n];r=a.parent();if(l){s.group={firstLevel:r.hasClass("k-panelbar"),expanded:a.parent().hasClass(C),length:a.children().length};a.children(".k-link").remove();a.prepend(i.templates.itemWrapper(p(s,{arrow:o.hasChildren||o.content||o.contentUrl?i.templates.arrow:i.templates.empty},B)))}if(t=="expanded"){i._toggleItem(a,!o[t],o[t]?"true":true)}else if(t=="enabled"){i.enable(a,o[t]);if(!o[t]){if(o.selected){o.set("selected",false)}}}if(a.length){this.trigger("itemChange",{item:a.find(".k-link").first(),data:o,ns:c})}}if(l){i.angular("compile",function(){return{elements:u,data:h.map(e,function(e){return[{dataItem:e}]})}})}}},_toggleDisabled:function(e,t){e=this.element.find(e);e.toggleClass(re,t).toggleClass(D,!t).attr(ae,!t)},dataItem:function(e){var t=h(e).closest(_).attr(l.attr("uid")),i=this.dataSource;return i&&i.getByUid(t)},select:function(e,i){var n=this;if(e===f){return n.element.find(ne).parent()}e=n.element.find(e);if(!e.length){this._updateSelected(e)}else{e.each(function(){var e=h(this),t=e.children(m);if(e.hasClass(D)){return n}n._updateSelected(t,i)})}return n},clearSelection:function(){this.select(h())},enable:function(e,t){this._toggleDisabled(e,t!==false);return this},disable:function(e){this._toggleDisabled(e,false);return this},append:function(e,t){t=this.element.find(t);var i=this._insert(e,t,t.length?t.find(S):null);n(i.items,function(){i.group.append(this);L(this)});this.updateArrow(t);L(i.group.find(".k-first, .k-last"));i.group.height("auto");return this},insertBefore:function(e,t){t=this.element.find(t);var i=this._insert(e,t,t.parent());n(i.items,function(){t.before(this);L(this)});L(t);i.group.height("auto");return this},insertAfter:function(e,t){t=this.element.find(t);var i=this._insert(e,t,t.parent());n(i.items,function(){t.after(this);L(this)});L(t);i.group.height("auto");return this},remove:function(e){e=this.element.find(e);var t=this,i=e.parentsUntil(t.element,_),n=e.parent("ul");e.remove();if(n&&!n.hasClass("k-panelbar")&&!n.children(_).length){n.remove()}if(i.length){i=i.eq(0);t.updateArrow(i);L(i)}return t},reload:function(e){var t=this;e=t.element.find(e);e.each(function(){var e=h(this);t._ajaxRequest(e,e.children("."+y),!e.is(P))})},_first:function(){return this.element.children(i).first()},_last:function(){var e=this.element.children(i).last(),t=e.children(b);if(t[0]){return t.children(i).last()}return e},_current:function(e){var t=this,i=t._focused,n=t._itemId;if(e===f){return i}t.element.removeAttr("aria-activedescendant");if(i&&i.length){if(i[0].id===n){i.removeAttr("id")}i.children(m).removeClass(ee)}if(h(e).length){n=e[0].id||n;e.attr("id",n).children(m).addClass(ee);t.element.attr("aria-activedescendant",n)}t._focused=e},_keydown:function(e){var t=this,i=e.keyCode,n=t._current();if(e.target!=e.currentTarget){return}if(i==r.DOWN||i==r.RIGHT){t._current(t._nextItem(n));e.preventDefault()}else if(i==r.UP||i==r.LEFT){t._current(t._prevItem(n));e.preventDefault()}else if(i==r.ENTER||i==r.SPACEBAR){t._click(e);e.preventDefault()}else if(i==r.HOME){t._current(t._first());e.preventDefault()}else if(i==r.END){t._current(t._last());e.preventDefault()}},_nextItem:function(e){if(!e){return this._first()}var t=e.children(b),i=e.nextAll(":visible").first();if(t[0]){i=t.children("."+j)}if(!i[0]){i=e.parent(b).parent(_).next()}if(!i[0]){i=this._first()}if(i.hasClass(D)){i=this._nextItem(i)}return i},_prevItem:function(e){if(!e){return this._last()}var t=e.prevAll(":visible").first(),i;if(!t[0]){t=e.parent(b).parent(_);if(!t[0]){t=this._last()}}else{i=t;while(i[0]){i=i.children(b).children("."+W);if(i[0]){t=i}}}if(t.hasClass(D)){t=this._prevItem(t)}return t},_insert:function(e,t,i){var n=this,r,a=h.isPlainObject(e),o=t&&t[0],s;if(!o){i=n.element}s={firstLevel:i.hasClass("k-panelbar"),expanded:h(t).hasClass(C),length:i.children().length};if(o&&!i.length){i=h(n.renderGroup({group:s,options:n.options})).appendTo(t)}if(a||h.isArray(e)||e instanceof H){if(e instanceof H){e=e.data()}r=h.map(a?[e]:e,function(e,t){if(typeof e==="string"){return h(e)}else{return h(n.renderItem({group:s,item:p(e,{index:t})}))}});if(o){var l=n.dataItem(t);if(l){l.hasChildren=true;t.attr(M,l.expanded).not("."+C).children("ul").attr(R,!l.expanded)}else{t.attr(M,false)}}}else{if(typeof e=="string"&&e.charAt(0)!="<"){r=n.element.find(e)}else{r=h(e)}n._updateItemsClasses(r)}if(!e.length){e=[e]}n._angularCompileElements(r,e);return{items:r,group:i}},_toggleHover:function(e){var t=h(e.currentTarget);if(!t.parents("li."+D).length){t.toggleClass("k-state-hover",e.type==Y)}},_updateClasses:function(){var e=this,t,i,n,r,a;t=e.element.find("li > ul").not(function(){return h(this).parentsUntil(".k-panelbar","div").length}).addClass("k-group k-panel").attr("role","group");r=t.parent();a=e.dataItem(r);n=a&&a.expanded||false;t.parent().not("["+M+"]").attr(M,n).not("."+C).children("ul").attr(R,!n).hide();i=e.element.add(t).children();e._updateItemsClasses(i);e.updateArrow(i);L(i)},_updateItemsClasses:function(e){var t=e.length,i=0;for(;i<t;i++){this._updateItemClasses(e[i],i)}},_updateItemClasses:function(e,t){var i=this._selected,n=this.options.contentUrls,r=n&&n[t],a=this.element[0],o,s;e=h(e).addClass("k-item").attr("role","treeitem");if(l.support.browser.msie){e.css("list-style-position","inside").css("list-style-position","")}e.children(O).addClass(U);s=e.children("a").addClass(v);if(s[0]){s.attr("href",r);s.children(O).addClass(U)}e.filter(":not([disabled]):not([class*=k-state])").addClass("k-state-default");e.filter("li[disabled]").addClass("k-state-disabled").attr(ae,true).removeAttr("disabled");e.children("div").addClass(y).attr(R,true).hide().parent().attr(M,false);s=e.children(E);if(s[0]){if(i){i.removeAttr(F).children(E).removeClass(A)}s.addClass(A);this._selected=e.attr(F,true)}if(!e.children(m)[0]){o="<span class='"+v+"'></span>";if(n&&n[t]&&e[0].parentNode==a){o='<a class="k-link k-header" href="'+n[t]+'"></a>'}e.contents().filter(function(){return!this.nodeName.match(N)&&!(this.nodeType==3&&!l.trim(this.nodeValue.trim))}).wrapAll(o)}if(e.parent(".k-panelbar")[0]){e.children(m).addClass("k-header")}},_click:function(e){var t=this,i=e.type==k?h(e.target):t._current().children(m),n=t.element,r,a,o,s;if(i.parents("li."+D).length){return}if(i.closest(".k-widget")[0]!=n[0]){return}if(i.is(":kendoFocusable")&&!i.hasClass(v)){return}var l=i.closest(m),d=l.closest(_);t._updateSelected(l);var u=d.children(".k-group,.k-content");var c=this.dataItem(d);if(!u.length&&(t.options.loadOnDemand&&c&&c.hasChildren||this._hasChildItems(d)||d.content||d.contentUrl)){u=t._addGroupElement(d)}a=d.find(S).add(d.find(T));o=l.attr(V);s=o&&(o.charAt(o.length-1)=="#"||o.indexOf("#"+t.element[0].id+"-")!=-1);r=!!(s||a.length);if(a.data("animating")&&r){e.preventDefault();return}if(t._triggerEvent(q,d)){r=true}if(r===false){return}if(t.options.expandMode==se){if(t._collapseAllExpanded(d)&&r){e.preventDefault();return}}if(a.length){var f=a.is(P);if(!t._triggerEvent(!f?G:x,d)){r=t._toggleItem(d,f)}}if(r){e.preventDefault()}},_hasChildItems:function(e){return e.items&&e.items.length>0||e.hasChildren},_toggleItem:function(e,t,i){var n=this,r=e.find(S),a=e.find(m),o=a.attr(V),s,l,d=n.dataItem(e),u=!t;var c=d&&d.loaded();if(d&&!i&&d.expanded!==u){d.set("expanded",u);s=d.hasChildren||!!d.content||!!d.contentUrl;return s}if(d&&(!i||i==="true")&&!c&&!d.content&&!d.contentUrl){if(n.options.loadOnDemand){this._progress(e,true)}e.children(".k-group,.k-content").remove();s=d.hasChildren;d.load()}else{if(r.length){this._toggleGroup(r,t);s=true}else{l=e.children("."+y);if(l.length){s=true;if(!l.is(oe)||o===f){n._toggleGroup(l,t)}else{n._ajaxRequest(e,l,t)}}}}return s},_toggleGroup:function(e,t){var i=this,n=i.options.animation,r=n.expand,a=n.collapse&&"effects"in n.collapse,o=p({},n.expand,n.collapse);if(!a){o=p(o,{reverse:true})}if(e.is(P)!=t){i._animating=false;return}e.attr(R,!!t);e.parent().attr(M,!t).toggleClass(C,!t).find("> .k-link > .k-panelbar-collapse,> .k-link > .k-panelbar-expand").toggleClass("k-i-arrow-60-up",!t).toggleClass("k-panelbar-collapse",!t).toggleClass("k-i-arrow-60-down",t).toggleClass("k-panelbar-expand",t);if(t){r=p(o,{hide:true});r.complete=function(){i._animationCallback()}}else{r=p({complete:function(e){i._triggerEvent($,e.closest(_));i._animationCallback()}},r)}e.kendoStop(true,true).kendoAnimate(r)},_animationCallback:function(){var e=this;e.trigger("complete");e._animating=false},_addGroupElement:function(e){var t=h('<ul role="group" aria-hidden="true" class="k-group k-panel" style="display:none"></ul>');e.append(t);return t},_collapseAllExpanded:function(e){var n=this,t,i=false;var r=e.find(S).add(e.find(T));if(r.is(P)){i=true}if(!(r.is(P)||r.length===0)){t=e.siblings();t.find(S).add(t.find(T)).filter(function(){return h(this).is(P)}).each(function(e,t){t=h(t);i=n._triggerEvent(x,t.closest(_));if(!i){n._toggleGroup(t,true)}});n.one("complete",function(){setTimeout(function(){t.each(function(e,t){var i=n.dataItem(t);if(i){i.set("expanded",false)}})})})}return i},_ajaxRequest:function(n,r,a){var o=this,i=n.find(".k-panelbar-collapse, .k-panelbar-expand"),e=n.find(m),t=setTimeout(function(){i.addClass("k-i-loading")},100),s={},l=e.attr(V);h.ajax({type:"GET",cache:false,url:l,dataType:"html",data:s,error:function(e,t){i.removeClass("k-i-loading");if(o.trigger(g,{xhr:e,status:t})){this.complete()}},complete:function(){clearTimeout(t);i.removeClass("k-i-loading")},success:function(e){function t(){return{elements:r.get()}}try{o.angular("cleanup",t);r.html(e);o.angular("compile",t)}catch(e){var i=window.console;if(i&&i.error){i.error(e.name+": "+e.message+" in "+l)}this.error(this.xhr,"error")}o._toggleGroup(r,a);o.trigger(X,{item:n[0],contentElement:r[0]})}})},_triggerEvent:function(e,t){var i=this;return i.trigger(e,{item:t[0]})},_updateSelected:function(e,t){var i=this,n=i.element,r=e.parent(_),a=i._selected,o=i.dataItem(r);if(a){a.removeAttr(F)}i._selected=r.attr(F,true);n.find(ne).removeClass(A);n.find("> ."+I+", .k-panel > ."+I).removeClass(I);e.addClass(A);e.parentsUntil(n,_).filter(":has(.k-header)").addClass(I);i._current(r[0]?r:null);if(o){o.set("selected",true)}if(!t){i.trigger(w)}},_animations:function(e){if(e&&"animation"in e&&!e.animation){e.animation={expand:{effects:{}},collapse:{hide:true,effects:{}}}}},renderItem:function(e){var t=this;e=p({panelBar:t,group:{}},e);var i=t.templates.empty,n=e.item;return t.templates.item(p(e,{itemWrapper:t.templates.itemWrapper,renderContent:t.renderContent,arrow:t._hasChildItems(n)||n.content||n.contentUrl?t.templates.arrow:i,subGroup:!e.loadOnDemand||n.expanded?t.renderGroup:i},B))},renderGroup:function(e){var t=this;var i=t.templates||e.panelBar.templates;return i.group(p({renderItems:function(e){var t="",i=0,n=e.items,r=n?n.length:0,a=p({length:r},e.group);for(;i<r;i++){t+=e.panelBar.renderItem(p(e,{group:a,item:p({index:i},n[i])}))}return t}},e,B))},renderContent:function(e){return e.panelBar.templates.content(p(e,B))}});l.ui.plugin(t)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.responsivepanel",["kendo.core"],e)})(function(){var e={id:"responsive-panel",name:"Responsive Panel",category:"web",description:"The Responsive Panel widget allows a panel of content to be hidden on mobile devices, available through a toggle button.",depends:["core"]};(function(n,e){var i=n.proxy;var r=".kendoResponsivePanel";var t="open";var a="close";var o="click"+r+" touchstart"+r+" touchend"+r;var s=kendo.ui.Widget;var l=s.extend({init:function(e,t){s.fn.init.call(this,e,t);this._guid="_"+kendo.guid();this._toggleHandler=i(this._toggleButtonClick,this);this._closeHandler=i(this._close,this);n(document.documentElement).on(o,this.options.toggleButton,this._toggleHandler);this._registerBreakpoint();this.element.addClass("k-rpanel k-rpanel-"+this.options.orientation+" "+this._guid);this._resizeHandler=i(this.resize,this,true);n(window).on("resize"+r,this._resizeHandler)},_mediaQuery:"@media (max-width: #= breakpoint-1 #px) {"+".#= guid #.k-rpanel-animate.k-rpanel-left,"+".#= guid #.k-rpanel-animate.k-rpanel-right {"+"-webkit-transition: -webkit-transform .2s ease-out;"+"-ms-transition: -ms-transform .2s ease-out;"+"transition: transform .2s ease-out;"+"} "+".#= guid #.k-rpanel-top {"+"overflow: hidden;"+"}"+".#= guid #.k-rpanel-animate.k-rpanel-top {"+"-webkit-transition: max-height .2s linear;"+"-ms-transition: max-height .2s linear;"+"transition: max-height .2s linear;"+"}"+"} "+"@media (min-width: #= breakpoint #px) {"+"#= toggleButton # { display: none; } "+".#= guid #.k-rpanel-left { float: left; } "+".#= guid #.k-rpanel-right { float: right; } "+".#= guid #.k-rpanel-left, .#= guid #.k-rpanel-right {"+"position: relative;"+"-webkit-transform: translateX(0);"+"-ms-transform: translateX(0);"+"transform: translateX(0);"+"-webkit-transform: translateX(0) translateZ(0);"+"-ms-transform: translateX(0) translateZ(0);"+"transform: translateX(0) translateZ(0);"+"} "+".k-ie9 .#= guid #.k-rpanel-left { left: 0; } "+".#= guid #.k-rpanel-top { max-height: none; }"+"}",_registerBreakpoint:function(){var e=this.options;this._registerStyle(kendo.template(this._mediaQuery)({breakpoint:e.breakpoint,toggleButton:e.toggleButton,guid:this._guid}))},_registerStyle:function(e){var t=n("head,body")[0];var i=document.createElement("style");t.appendChild(i);if(i.styleSheet){i.styleSheet.cssText=e}else{i.appendChild(document.createTextNode(e))}},options:{name:"ResponsivePanel",orientation:"left",toggleButton:".k-rpanel-toggle",breakpoint:640,autoClose:true},events:[t,a],_resize:function(){this.element.removeClass("k-rpanel-animate k-rpanel-expanded");n(document.documentElement).off(o,this._closeHandler)},_toggleButtonClick:function(e){e.preventDefault();if(e.type=="touchend"){return}if(this.element.hasClass("k-rpanel-expanded")){this.close()}else{this.open()}},open:function(){if(!this.trigger(t)){this.element.addClass("k-rpanel-animate k-rpanel-expanded");if(this.options.autoClose){n(document.documentElement).on(o,this._closeHandler)}}},close:function(){if(!this.trigger(a)){this.element.addClass("k-rpanel-animate").removeClass("k-rpanel-expanded");n(document.documentElement).off(o,this._closeHandler)}},_close:function(e){var t=e.isDefaultPrevented();var i=n(e.target).closest(this.options.toggleButton+",.k-rpanel");if(!i.length&&!t){this.close()}},destroy:function(){s.fn.destroy.call(this);n(window).off("resize"+r,this._resizeHandler);n(document.documentElement).off(o,this._closeHandler)}});kendo.ui.plugin(l)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.timepicker",["kendo.popup","kendo.dateinput"],e)})(function(){var e={id:"timepicker",name:"TimePicker",category:"web",description:"The TimePicker widget allows the end user to select a value from a list of predefined values or to type a new value.",depends:["popup"]};(function(u,c){var w=window.kendo,f=w.keys,d=w.parseDate,B=w._activeElement,L=w._extractFormat,r=w.support,o=r.browser,h=w.ui,p=h.Widget,v="open",m="close",s="change",g=".kendoTimePicker",H="click"+g,l="k-state-default",N="disabled",O="readonly",t="li",V="<span></span>",_="k-state-focused",i="k-state-hover",W="mouseenter"+g+" mouseleave"+g,b="mousedown"+g,k=6e4,y=864e5,U="k-state-selected",x="k-state-disabled",j="aria-selected",G="aria-expanded",q="aria-hidden",$="aria-disabled",K="aria-readonly",Y="aria-activedescendant",C="id",Q=u.isArray,S=u.extend,T=u.proxy,D=Date,A=/d{1,2}|E{1,6}|e{1,6}|c{3,6}|c{1}|M{1,5}|L{1,5}|y{1,4}|H{1,2}|h{1,2}|k{1,2}|K{1,2}|m{1,2}|a{1,5}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|x{1,5}|X{1,5}|G{1,5}|q{1,5}|Q{1,5}|"[^"]*"|'[^']*'/g,X="literal",Z="month",e="hour",n="zone",a="weekday",J="quarter",ee={G:"era",y:"year",q:J,Q:J,M:Z,L:Z,d:"day",E:a,c:a,e:a,h:e,H:e,k:e,K:e,m:"minute",s:"second",a:"dayperiod",x:n,X:n,z:n,Z:n},te={month:{type:"months",minLength:3,standAlone:"L"},quarter:{type:"quarters",minLength:3,standAlone:"q"},weekday:{type:"days",minLength:{E:0,c:3,e:3},standAlone:"c"},dayperiod:{type:"dayPeriods",minLength:0},era:{type:"eras",minLength:0}},E=new D,ie='<div tabindex="0" class="k-timeselector">'+'<div class="k-time-header">'+'<span class="k-title"></span>'+'<button class="k-button k-flat k-time-now" title="Select now" aria-label="Select now">#=messages.now#</button>'+"</div>"+'<div class="k-time-list-container">'+'<span class="k-time-highlight"></span>'+"</div>"+"</div>",ne='<div class="k-time-footer k-action-buttons">'+'<button class="k-button k-time-cancel" title="Cancel changes" aria-label="Cancel changes">#=messages.cancel#</button>'+'<button class="k-time-accept k-button k-primary" title="Set time" aria-label="Set time">#=messages.set#</button>'+"</div>",re='<span class="k-time-highlight"></span>';E=new Date(E.getFullYear(),E.getMonth(),E.getDate(),0,0,0);var I=function(e){var t=this,i=e.id;t.options=e;t._dates=[];t._createList(e.timeView&&e.timeView.list==="scroll");if(i){t._timeViewID=i+"_timeview";t._optionID=i+"_option_selected";t.ul.attr(C,t._timeViewID)}t._heightHandler=T(t._height,t);t._popup()};I.prototype={_createList:function(e){if(e){this._createScrollList()}else{this._createClassicRenderingList()}},_createScrollList:function(){this.list=u(w.template(ie)(this.options)).on(b,R);if(!this.options.omitPopup){this.list.append(w.template(ne)(this.options))}this.ul=this.list.find(".k-time-list-container");this.list.on("click"+g,".k-time-header button.k-time-now",T(this._nowClickHandler,this));this.list.on("click"+g,".k-time-footer button.k-time-cancel",T(this._cancelClickHandler,this));this.list.on("click"+g,".k-time-footer button.k-time-accept",T(this._setClickHandler,this));this.list.on("mouseover"+g,".k-time-list-wrapper",T(this._mouseOverHandler,this));this.list.on("keydown"+g,T(this._scrollerKeyDownHandler,this))},_scrollerKeyDownHandler:function(e){var t=this,i=e.keyCode,n=u(e.currentTarget).find(".k-time-list-wrapper.k-state-focused"),r=t.list.find(".k-time-list-wrapper"),a=r.length,o=r.index(n),s=w.support.isRtl(t.wrapper),l=z(n.find(".k-item:visible:eq(0)")),d=n.find(".k-time-container.k-content.k-scrollable");if(!n.length){return}if(i==f.RIGHT&&!s||i==f.LEFT&&s){if(o+1<a){t._focusList(r.eq(o+1))}}else if(i==f.LEFT&&!s||i==f.RIGHT&&s){if(o-1>=0){t._focusList(r.eq(o-1))}}else if(i==f.UP){d.scrollTop(d.scrollTop()-l);e.preventDefault()}else if(i==f.DOWN){d.scrollTop(d.scrollTop()+l);e.preventDefault()}else if(i===f.ENTER){t._setClickHandler()}else if(i===f.ESC){t._cancelClickHandler()}},_mouseOverHandler:function(e){this._focusList(u(e.currentTarget))},_focusList:function(e){this.list.find(".k-time-list-wrapper").removeClass(_);e.addClass(_);this.list.focus();this._scrollTop=e.find(".k-scrollable").scrollTop()},_createClassicRenderingList:function(){var e=this;e.ul=u('<ul tabindex="-1" role="listbox" aria-hidden="true" unselectable="on" class="k-list k-reset"/>').css({overflow:r.kineticScrollNeeded?"":"auto"}).on(H,t,T(e._click,e)).on("mouseenter"+g,t,function(){u(this).addClass(i)}).on("mouseleave"+g,t,function(){u(this).removeClass(i)});e.list=u("<div class='k-list-container k-list-scroller' unselectable='on'/>").append(e.ul).on(b,R);e.template=w.template('<li tabindex="-1" role="option" class="k-item" unselectable="on">#=data#</li>',{useWithBlock:false})},current:function(e){var t=this,i=t.options.active;if(e!==c){if(t._current){t._current.removeClass(U);if(t._current&&t._current.length){t._current[0].removeAttribute(C);t._current[0].removeAttribute(j)}}if(e){e=u(e).addClass(U).attr(C,t._optionID).attr(j,true);t.scroll(e[0])}t._current=e;if(i){i(e)}}else{return t._current}},_updateTitle:function(){this.list.find(".k-time-header > .k-title").html(w.toString(this._value,this.options.format,this.options.culture))},applyValue:function(e){if(!e){return}var t=P(this.options.format.toLowerCase(),"t");var i=e.getHours();var n=e.getMinutes();var r=e.getSeconds();var a;var o=w.attr("index");var s=this.ul.find("["+o+'="1"]');var l=this.ul.find("["+o+'="2"]');var d=this.ul.find("["+o+'="3"]');var u=this.ul.find("["+o+'="4"]');if(t){if(i>=12){a="PM";if(i>12){i-=12}}else{a="AM";if(i===0){i=12}}}this._internalScroll=true;if(s.length){this._scrollListToPosition(s,i)}if(l.length){this._scrollListToPosition(l,n)}if(d.length){this._scrollListToPosition(d,r)}if(u.length){this._scrollListToPosition(u,a)}this._internalScroll=false},_scrollListToPosition:function(e,t){var i=e.find('.k-item[data-value="'+me(t)+'"]');var n=z(i);e.scrollTop(e.find(".k-item:visible").index(i)*n)},close:function(){this.popup.close()},destroy:function(){var e=this;e.ul.off(g);e.list.off(g);if(this.popup){e.popup.destroy()}},open:function(){var e=this;var t;if(!e.ul[0].firstChild||e.ul.find("li").length<1){e.bind()}t=e.popup._hovered;e.popup._hovered=true;e.popup.open();setTimeout(function(){e.popup._hovered=t},1);if(e._current){e.scroll(e._current[0])}},dataBind:function(e){var t=this,i=t.options,n=i.format,r=w.toString,a=t.template,o=e.length,s=0,l,d="";for(;s<o;s++){l=e[s];if(se(l,i.min,i.max)){d+=a(r(l,n,i.culture))}}t._html(d)},refresh:function(){var e=this,t=e.options,i=t.format,n=ae(),r=n<0,a=w.parseDate(e._value),o=a?ue(a,t.min):ue(new Date,t.min),s=t.min,l=t.max,d=M(s),u=M(l),c=M(oe(t.interval)),f=t.interval*k,h=w.toString,p=e.template,v=t.useValueToRender?o:new Date(+t.min),m=new D(v),g,_,b="";if(r){_=(y+n*k)/f}else{_=y/f}if(d!=u||c===u){if(d>u){u+=y}_=(u-d)/f+1}if(t.timeView&&t.timeView.list==="scroll"){b=e._createListContent(ve(i))}else{e.getDatesInRange(g,u,m,l,f,v).forEach(function(e){b+=p(h(e,i,t.culture))})}e._html(b)},_showAllHiddenItems:function(){var e=this.list.find(".k-time-container");var t=e.length;var i;for(var n=0;n<t;n++){i=u(e[n]);i.find(".k-item:hidden").show();this._updateListBottomOffset(i)}},_updateListBottomOffset:function(e){var t=z(e.find(".k-item:visible:eq(0)"));var i=e.outerHeight();var n=i-t;e.find(".k-scrollable-placeholder").css({height:e.find("ul").height()+n})},_updateHoursRange:function(){var n=this;var e=w.attr("index");var t=this.ul.find("["+e+'="1"]');var r=this._minHours;var a=this._maxHours;var i=P(this.options.format.toLowerCase(),"t");var o;var s;var l=this._findSelectedValue(this.ul.find("["+e+'="4"]'));if(!t.length){return}if(i&&l){if(l==="AM"){if(r<12){s=true}if(a<12){o=true}}else if(l==="PM"){if(r>12){s=true;r-=12}if(a>12){o=true;a-=12}}t.find(".k-item").each(function(e,t){t=u(t);var i=+t.attr("data-value");if(n._validateMin&&s&&i<r||n._validateMax&&o&&i>a){t.hide()}else{t.show()}})}else{t.find(".k-item").each(function(e,t){t=u(t);var i=+t.attr("data-value");if(n._validateMin&&i<r||n._validateMax&&i>a){t.hide()}else{t.show()}})}this._updateListBottomOffset(t)},_updateMinutesRange:function(){var n=this;var e=w.attr("index");var t=this.ul.find("["+e+'="2"]');var r=this._minHours;var a=this._maxHours;var o=this._minMinutes;var s=this._maxMinutes;var l=+this._findSelectedValue(this.ul.find("["+e+'="1"]'));var i=P(this.options.format.toLowerCase(),"t");var d=this._findSelectedValue(this.ul.find("["+e+'="4"]'));if(i&&d==="PM"){l+=12}if(!t.length){return}t.find(".k-item").each(function(e,t){t=u(t);var i=+t.attr("data-value");if(n._validateMin&&i<o&&r&&l===r||n._validateMax&&i>s&&a&&l===a){t.hide()}else{t.show()}});this._updateListBottomOffset(t)},_updateSecondsRange:function(){var n=this;var e=w.attr("index");var t=this.ul.find("["+e+'="3"]');var r=this._minSeconds;var a=this._minSeconds;var o=this._minMinutes;var s=this._maxMinutes;var l=+this._findSelectedValue(this.ul.find("["+e+'="2"]'));if(!t.length){return}t.find(".k-item").each(function(e,t){t=u(t);var i=+t.attr("data-value");if(n._validateMin&&i<r&&o&&l===o||n._validateMax&&i>a&&s&&l===s){t.hide()}else{t.show()}});this._updateListBottomOffset(t)},_updateDesignatorRange:function(){var e=this._minHours;var t=this._maxHours;var i=w.attr("index");var n=this.ul.find("["+i+'="4"]');if(!n.length){return}if(this._validateMin&&e>=12){n.find('.k-item[data-value="AM"]').hide()}else{n.find('.k-item[data-value="AM"]').show()}if(this._validateMax&&t<12){n.find('.k-item[data-value="PM"]').hide()}else{n.find('.k-item[data-value="PM"]').show()}},_updateRanges:function(){if(!this.options.specifiedRange){return}if(!this._currentlySelected){this._currentlySelected=new Date}var e=this.options.max;var t=this.options.min;if(this.options.validateDate){if(e.getFullYear()===this._currentlySelected.getFullYear()&&e.getMonth()===this._currentlySelected.getMonth()&&e.getDate()===this._currentlySelected.getDate()){this._validateMax=true}else{this._validateMax=false}if(t.getFullYear()===this._currentlySelected.getFullYear()&&t.getMonth()===this._currentlySelected.getMonth()&&t.getDate()===this._currentlySelected.getDate()){this._validateMin=true}else{this._validateMin=false}if(!this._validateMax&&!this._validateMin){this._showAllHiddenItems();return}}else{this._validateMax=true;this._validateMin=true}this._minMinutes=t.getMinutes();this._maxMinutes=e.getMinutes();this._minHours=t.getHours();this._maxHours=e.getHours();this._minSeconds=t.getSeconds();this._maxSeconds=e.getSeconds();this._updateDesignatorRange();this._updateHoursRange();this._updateMinutesRange();this._updateSecondsRange()},addTranslate:function(){var e=this.ul.find(".k-time-container.k-content.k-scrollable");var t=e.length;var i;var n;var r;var a;var o;var s;for(var l=0;l<t;l++){i=e.eq(l);n=z(i.find(".k-item:visible:eq(0)"));r=i.outerHeight();a=(r-n)/2;o="translateY("+a+"px)";s=r-n;i.find("ul").css({transform:o,"-ms-transform":o});i.find(".k-scrollable-placeholder").css({height:i.find("ul").height()+s});i.off(g).on("click"+g,".k-item",T(this._itemClickHandler,this)).on("scroll"+g,T(this._listScrollHandler,this))}},_nowClickHandler:function(){var e=new Date;this.value(e);this.options.change(w.toString(e,this.options.format,this.options.culture))},_cancelClickHandler:function(){this.value(this._value);this.popup.close()},_setClickHandler:function(){this._value=new Date(this._currentlySelected);this.options.change(w.toString(this._currentlySelected,this.options.format,this.options.culture),true);this.popup.close()},_listScrollHandler:function(e){var t=this;var i=z(u(e.currentTarget).find(".k-item:visible:eq(0)"));if(t._internalScroll){return}if(t._scrollingTimeout){clearTimeout(t._scrollingTimeout)}t._scrollingTimeout=setTimeout(function(){if(e.currentTarget.scrollTop%i>1){e.currentTarget.scrollTop+=i-e.currentTarget.scrollTop%i}t._scrollTop=e.currentTarget.scrollTop;t._updateCurrentlySelected();t._updateRanges()},100)},_updateCurrentlySelected:function(){var e=P(this.options.format.toLowerCase(),"t");var t=w.attr("index");var i=this.ul.find("["+t+'="1"]');var n=this.ul.find("["+t+'="2"]');var r=this.ul.find("["+t+'="3"]');var a=this.ul.find("["+t+'="4"]');var o;var s;var l;var d;if(!this.ul.is(":visible")){return}if(!this._currentlySelected){this._currentlySelected=this._value?new Date(this._value):new Date}if(i.length){o=+this._findSelectedValue(i)}if(n.length){s=+this._findSelectedValue(n)}if(r.length){l=+this._findSelectedValue(r)}if(a.length){d=this._findSelectedValue(a)}if(e){if(d=="PM"){o+=12;if(o==24){o=12}}if(d==="AM"&&o===12){o=0}}if(o!==c){this._currentlySelected.setHours(o)}if(s!==c){this._currentlySelected.setMinutes(s)}if(l!==c){this._currentlySelected.setSeconds(l)}},_findSelectedValue:function(e){var t=ge(e.scrollTop(),z(e.find(".k-item:visible:eq(0)")));return e.find(".k-item:visible").eq(t).attr("data-value")},_itemClickHandler:function(e){var t=u(e.originalEvent.currentTarget);var i=t.find(".k-item:visible").index(u(e.currentTarget));var n=z(t.find(".k-item:visible:eq(0)"));t.scrollTop(i*n)},getDatesInRange:function(e,t,i,n,r,a){var o=[];while(true){if(t&&(M(a)>=t||i.getDate()!=a.getDate())){e=M(a);if(i<a){e+=y}if(e>t){a=new D(+n)}if(M(a)>0){o.push(new Date(a))}break}if(i.getDate()!=a.getDate()){break}o.push(new Date(a));a.setTime(a.getTime()+r);if(!t&&this.options.maxSet){break}}return o},_createListContent:function(e){var t=e.length;var i="";var n;var r;for(var a=0;a<t;a++){n=e[a];if(n.type==="literal"){i+=this._literalTemplate(n)}else{r=this._getValues(n,true);i+=this._itemTemplate(r.values,n,this.options.messages[n.type],r.index)}}return i},_itemTemplate:function(e,t,i,n){var r="";var a=e.length;var o=w.attr("index");r+='<div class="k-time-list-wrapper" role="presentation">'+'<span class="k-title">'+(i||t.type)+"</span>"+'<div class="k-time-list">'+'<div class="k-time-container k-content k-scrollable" role="presentation" '+o+'="'+n+'">'+'<ul class="k-reset">';for(var s=0;s<a;s++){r+='<li class="k-item" data-value="'+e[s]+'">'+"<span>"+e[s]+"</span>"+"</li>"}r+="</ul>"+'<div class="k-scrollable-placeholder"></div>'+"</div>"+"</div>"+"</div>";return r},_getValues:function(e,t){var i=[];var n;var r=0;var a;if(e.type==="hour"){r=e.hour12?1:0;n=1;a=e.hour12?12:23}else if(e.type==="minute"){n=2;a=59}else if(e.type==="second"){n=3;a=59}for(;r<=a;r++){i.push(t?me(r):r)}return{values:i,index:n}},_literalTemplate:function(e){var t='<div class="k-time-separator">'+(e.pattern===" tt"?":":e.pattern)+"</div>";if(e.pattern===" tt"){t+=this._itemTemplate(["AM","PM"],e,"AM/PM",4)}return t},bind:function(){var e=this,t=e.options.dates;if(t&&t[0]){e.dataBind(t)}else{e.refresh()}},_html:function(e){var t=this;if(t.options.timeView&&t.options.timeView.list==="scroll"){e=re+e;t.ul.html(e)}else{t.ul[0].innerHTML=e;t.popup.unbind(v,t._heightHandler);t.popup.one(v,t._heightHandler);t.current(null);t.select(t._value)}},scroll:function(e){if(!e){return}if(e.scrollIntoViewIfNeeded){e.scrollIntoViewIfNeeded()}else{_e(e)}},select:function(t){var e=this,i=e.options,n=e._current,r;if(t instanceof Date){t=w.toString(t,i.format,i.culture)}if(typeof t==="string"){if(!n||n.text()!==t){t=u.grep(e.ul[0].childNodes,function(e){return(e.textContent||e.innerText)==t});t=t[0]?t:null}else{t=n}}r=e._distinctSelection(t);e.current(r)},_distinctSelection:function(e){var t=this,i,n;if(e&&e.length>1){i=M(t._value);n=u.inArray(i,t._dates);e=t.ul.children()[n]}return e},setOptions:function(e){var t=this.options;e.min=d(e.min);e.max=d(e.max);this.options=S(t,e,{active:t.active,change:t.change,close:t.close,open:t.open});this.bind()},toggle:function(){var e=this;if(e.popup.visible()){e.close()}else{e.open()}},value:function(e){var t=this;t._value=e;if(t.ul[0].firstChild){if(t.options.timeView&&t.options.timeView.list==="scroll"){t.applyValue(e)}else{t.select(e)}}},_click:function(e){var t=this,i=u(e.currentTarget),n=i.text(),r=t.options.dates;if(r&&r.length>0){n=r[i.index()]}if(!e.isDefaultPrevented()){t.select(i);t.options.change(n,true);t.close()}},_height:function(){var e=this;var t=e.list;var i=t.parent(".k-animation-container");var n=e.options.height;if(e.ul[0].children.length){t.add(i).show().height(e.ul[0].scrollHeight>n?n:"auto").hide()}},_parse:function(e){var t=this,i=t.options,n=M(i.min)!=M(E)?i.min:null,r=M(i.max)!=M(E)?i.max:null,a=t._value||n||r||E;if(e instanceof D){return e}e=d(e,i.parseFormats,i.culture);if(e){e=new D(a.getFullYear(),a.getMonth(),a.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}return e},_adjustListWidth:function(){var e=this.list,t=e[0].style.width,i=this.options.anchor,n,r,a=w._outerWidth;if(!e.data("width")&&t){return}n=window.getComputedStyle?window.getComputedStyle(i[0],null):0;r=n?parseFloat(n.width):a(i);if(n&&(o.mozilla||o.msie)){r+=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight)+parseFloat(n.borderLeftWidth)+parseFloat(n.borderRightWidth)}t=r-(a(e)-e.width());e.css({fontFamily:i.css("font-family"),width:t}).data("width",t)},_popup:function(){var e=this,t=e.list,i=e.options,n=i.anchor;if(!this.options.omitPopup){e.popup=new h.Popup(t,S(i.popup,{anchor:n,open:i.open,close:i.close,animation:i.animation,isRtl:r.isRtl(i.anchor),activate:function(){if(e.options.timeView&&e.options.timeView.list==="scroll"){e.addTranslate();if(e._value){e.applyValue(e._value)}else{e._updateCurrentlySelected()}e._updateRanges();e._focusList(e.list.find(".k-time-list-wrapper:eq(0)"))}}}))}else{t.appendTo(i.timeDiv)}},move:function(e){var t=this,i=e.keyCode,n=t.ul[0],r=t._current,a=i===f.DOWN;if(i===f.UP||a){if(e.altKey){t.toggle(a);return}else if(a){r=r?r[0].nextSibling:n.firstChild}else{r=r?r[0].previousSibling:n.lastChild}if(r){t.select(r)}t.options.change(t._current.text());e.preventDefault()}else if(i===f.ENTER||i===f.TAB||i===f.ESC){e.preventDefault();if(r){t.options.change(r.text(),true)}t.close()}}};function ae(){var e=new D,t=new D(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0),i=new D(e.getFullYear(),e.getMonth(),e.getDate(),12,0,0);return-1*(t.getTimezoneOffset()-i.getTimezoneOffset())}function M(e){return e.getHours()*60*k+e.getMinutes()*k+e.getSeconds()*1e3+e.getMilliseconds()}function oe(e){var t=new Date(2100,0,1);t.setMinutes(-e);return t}function se(e,t,i){var n=M(t),r=M(i),a;if(!e||n==r){return true}a=M(e);if(n>a){a+=y}if(r<n){r+=y}return a>=n&&a<=r}I.getMilliseconds=M;w.TimeView=I;var le=p.extend({init:function(i,e){var n=this,t,r,a;e=e||{};e.componentType=e.componentType||"classic";p.fn.init.call(n,i,e);i=n.element;e=n.options;e.min=d(i.attr("min"))||d(e.min);e.max=d(i.attr("max"))||d(e.max);if(+e.max!=+E||+e.min!=+E){this._specifiedRange=true}de(e);n._initialOptions=S({},e);n._wrapper();if(n.options.timeView&&n.options.timeView.list==="scroll"){n.options.height=null}n.timeView=r=new I(S({},e,{id:i.attr(C),anchor:n.wrapper,format:e.format,change:function(e,t){if(t){n._change(e)}else{i.val(e)}},open:function(e){if(n.options.timeView&&n.options.timeView.list!=="scroll"){n.timeView._adjustListWidth()}else{n.timeView._updateTitle()}if(n.trigger(v)){e.preventDefault()}else{i.attr(G,true);t.attr(q,false)}},close:function(e){if(n.trigger(m)){e.preventDefault()}else{i.attr(G,false);t.attr(q,true)}},active:function(e){if(i&&i.length){i[0].removeAttribute(Y)}if(e){i.attr(Y,r._optionID)}},specifiedRange:n._specifiedRange,maxSet:+e.max!=+E}));t=r.ul;n._icon();n._reset();try{i[0].setAttribute("type","text")}catch(e){i[0].type="text"}i.addClass("k-input").attr({role:"combobox","aria-expanded":false,"aria-owns":r._timeViewID,autocomplete:"off"});a=i.is("[disabled]")||u(n.element).parents("fieldset").is(":disabled");if(a){n.enable(false)}else{n.readonly(i.is("[readonly]"))}if(e.dateInput){var o=e.min;var s=e.max;var l=new D;if(M(o)==M(s)){o=new D(l.getFullYear(),l.getMonth(),l.getDate(),0,0,0);s=new D(l.getFullYear(),l.getMonth(),l.getDate(),24,0,0)}n._dateInput=new h.DateInput(i,{culture:e.culture,format:e.format,min:o,max:s,value:e.value,interval:e.interval})}n._old=n._update(e.value||n.element.val());n._oldText=i.val();w.notify(n)},options:{name:"TimePicker",min:E,max:E,format:"",dates:[],parseFormats:[],value:null,interval:30,height:200,animation:{},dateInput:false,messages:{set:"Set",cancel:"Cancel",hour:"hour",minute:"minute",second:"second",millisecond:"millisecond",now:"Now"},componentType:"classic"},events:[v,m,s],componentTypes:{classic:{timeView:{list:"list"}},modern:{timeView:{list:"scroll"}}},setOptions:function(e){var t=this;var i=t._value;p.fn.setOptions.call(t,e);e=t.options;if(+e.max!=+E||+e.min!=+E){this._specifiedRange=true}de(e);t.timeView.setOptions(e);if(i){t.element.val(w.toString(i,e.format,e.culture))}},dataBind:function(e){if(Q(e)){this.timeView.dataBind(e)}},_editable:function(e){var t=this,i=e.disable,n=e.readonly,r=t._arrow.off(g),a=t.element.off(g),o=t._inputWrapper.off(g);if(t._dateInput){t._dateInput._unbindInput()}if(!n&&!i){o.addClass(l).removeClass(x).on(W,t._toggleHover);if(a&&a.length){a[0].removeAttribute(N);a[0].removeAttribute(O)}a.attr($,false).attr(K,false).on("keydown"+g,T(t._keydown,t)).on("focusout"+g,T(t._blur,t)).on("focus"+g,function(){t._inputWrapper.addClass(_)});if(t._dateInput){t._dateInput._bindInput()}r.on(H,T(t._click,t)).on(b,R)}else{o.addClass(i?x:l).removeClass(i?l:x);a.attr(N,i).attr(O,n).attr($,i).attr(K,n)}},readonly:function(e){this._editable({readonly:e===c?true:e,disable:false})},enable:function(e){this._editable({readonly:false,disable:!(e=e===c?true:e)})},destroy:function(){var e=this;p.fn.destroy.call(e);e.timeView.destroy();e.element.off(g);e._arrow.off(g);e._inputWrapper.off(g);if(e._form){e._form.off("reset",e._resetHandler)}},close:function(){this.timeView.close()},open:function(){this.timeView.open()},min:function(e){if(e){this._specifiedRange=true}return this._option("min",e)},max:function(e){if(e&&this.timeView){this._specifiedRange=true;this.timeView.options.maxSet=true}else if(this.timeView){this.timeView.options.maxSet=false}return this._option("max",e)},value:function(e){var t=this;if(e===c){return t._value}t._old=t._update(e);if(t._old===null){t.element.val("")}t._oldText=t.element.val()},_blur:function(){var e=this,t=e.element.val();if(!(e.options.timeView&&e.options.timeView.list==="scroll")){e.close()}if(t!==e._oldText){e._change(t)}e._inputWrapper.removeClass(_)},_click:function(){var e=this,t=e.element;e.timeView.toggle();if(!r.touch&&t[0]!==B()){t.trigger("focus")}},_change:function(e){var t=this,i=t.element.val(),n;e=t._update(e);n=!w.calendar.isEqualDate(t._old,e);var r=n&&!t._typing;var a=i!==t.element.val();if(r||a){t.element.trigger(s)}if(n){t._old=e;t._oldText=t.element.val();t.trigger(s)}t._typing=false},_icon:function(){var e=this,t=e.element,i;i=t.next("span.k-select");if(!i[0]){i=u('<span unselectable="on" class="k-select" aria-label="select"><span class="k-icon k-i-clock"></span></span>').insertAfter(t)}e._arrow=i.attr({role:"button","aria-controls":e.timeView._timeViewID})},_keydown:function(e){var t=this,i=e.keyCode,n=t.timeView,r=t.element.val();if(n.popup.visible()||e.altKey){n.move(e);if(t._dateInput&&e.stopImmediatePropagation){e.stopImmediatePropagation()}}else if(i===f.ENTER&&r!==t._oldText){t._change(r)}else{t._typing=true}},_option:function(e,t){var i=this,n=i.options;if(t===c){return n[e]}t=i.timeView._parse(t);if(!t){return}t=new D(+t);n[e]=t;i.timeView.options[e]=t;i.timeView.bind()},_toggleHover:function(e){u(e.currentTarget).toggleClass(i,e.type==="mouseenter")},_update:function(e){var t=this,i=t.options,n=t.timeView,r=n._parse(e);if(!se(r,i.min,i.max)){r=null}t._value=r;t._currentlySelected=r;if(t._dateInput&&r){t._dateInput.value(r||e)}else{t.element.val(w.toString(r||e,i.format,i.culture))}n.value(r);return r},_wrapper:function(){var e=this,t=e.element,i;i=t.parents(".k-timepicker");if(!i[0]){i=t.wrap(V).parent().addClass("k-picker-wrap k-state-default");i=i.wrap(V).parent()}i[0].style.cssText=t[0].style.cssText;e.wrapper=i.addClass("k-widget k-widget-2021 k-timepicker").addClass(t[0].className);t.css({width:"100%",height:t[0].style.height});e._inputWrapper=u(i[0].firstChild)},_reset:function(){var e=this,t=e.element,i=t.attr("form"),n=i?u("#"+i):t.closest("form");if(n[0]){e._resetHandler=function(){e.value(t[0].defaultValue);e.max(e._initialOptions.max);e.min(e._initialOptions.min)};e._form=n.on("reset",e._resetHandler)}}});function de(e){var t=e.parseFormats;e.format=L(e.format||w.getCulture(e.culture).calendars.standard.patterns.t);t=Q(t)?t:[t];t.splice(0,0,e.format);e.parseFormats=t}function R(e){e.preventDefault()}function ue(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}function ce(e,t){var i=t.calendar;var n;if(typeof e==="string"){if(i.patterns[e]){n=i.patterns[e]}else{n=e}}if(!n){n=i.patterns.d}return n}function F(e,t){var i=e[e.length-1];if(i&&i.type==="LITERAL"){i.pattern+=t}else{e.push({type:X,pattern:t})}}function fe(e){return e==="h"||e==="K"}function he(e){var t;if(e<=3){t="abbreviated"}else if(e===4){t="wide"}else if(e===5){t="narrow"}else if(e===6){t="short"}return t}function pe(e,t,i){i=i||0;return e.indexOf(t,i)===i}function P(e,t){var i=false;if(e.indexOf(t)!==-1){i=true}return i}function ve(e){var t=w.culture();var i=ce(e,t);var n=[];var r=A.lastIndex=0;var a=A.exec(i);var o;var s;var l;var d;var u;var c;while(a){var f=a[0];if(r<a.index){F(n,i.substring(r,a.index))}if(pe(f,'"')||pe(f,"'")){F(n,f)}else{o=f[0];s=ee[o];l={type:s,pattern:f};if(s==="hour"){l.hour12=fe(f)}d=te[s];if(d){u=typeof d.minLength==="number"?d.minLength:d.minLength[o];c=f.length;if(c>=u){l.names={type:d.type,nameType:he(c),standAlone:d.standAlone===o}}}n.push(l)}r=A.lastIndex;a=A.exec(i)}if(r<i.length){F(n,i.substring(r))}return n}function me(e,t){var i=String(e);while(i.length<(t||2)){i="0"+i}return i}function ge(e,t){return Math.max(Math.round(e/t),0)}function z(e){return e.length&&e[0].getBoundingClientRect().height}function _e(e,i){function t(e,t){return{start:e,length:t,end:e+t}}function n(e,t){if(false===i||t.start<e.end&&e.start<t.end){return Math.min(e.start,Math.max(t.start,e.end-t.length))}return(e.start+e.end-t.length)/2}function a(n,r){return{x:n,y:r,translate:function e(t,i){return a(n+t,r+i)}}}function r(e,t){while(e){t=t.translate(e.offsetLeft,e.offsetTop);e=e.offsetParent}return t}var o=r(e,a(0,0)),s=a(e.offsetWidth,e.offsetHeight),l=e.parentNode,d;while(l instanceof HTMLElement){d=r(l,a(l.clientLeft,l.clientTop));l.scrollLeft=n(t(o.x-d.x,s.x),t(l.scrollLeft,l.clientWidth));l.scrollTop=n(t(o.y-d.y,s.y),t(l.scrollTop,l.clientHeight));o=o.translate(-l.scrollLeft,-l.scrollTop);l=l.parentNode}}h.plugin(le)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.datetimepicker",["kendo.datepicker","kendo.timepicker"],e)})(function(){var e={id:"datetimepicker",name:"DateTimePicker",category:"web",description:"The DateTimePicker allows the end user to select a value from a calendar or a time drop-down list.",depends:["datepicker","timepicker"]};(function(v,d){var m=window.kendo,h=m.TimeView,g=m.parseDate,i=m.support,B=m._activeElement,r=m._extractFormat,e=m.calendar,_=e.isInRange,L=e.restrictValue,b=e.isEqualDatePart,n=h.getMilliseconds,a=m.ui,o=a.Widget,p="open",w="close",k="change",l=".kendoDateTimePicker",s="click"+l,u=i.mouseAndTouchPresent?m.applyEventMap("up",l.slice(1)):s,c="disabled",f="readonly",y="k-state-default",x="k-state-focused",H="k-state-hover",C="k-state-disabled",N="mouseenter"+l+" mouseleave"+l,S="mousedown"+l,t="month",O="<span/>",T="aria-activedescendant",D="aria-expanded",A="aria-hidden",E="aria-owns",V="aria-disabled",W="aria-readonly",I=Date,M=new I(1800,0,1),R=new I(2099,11,31),U={view:"date"},j={view:"time"},F=v.extend,G='<div class="k-date-tab k-datetime-wrap">'+'<div class="k-datetime-buttongroup">'+'<div class="k-button-group k-button-group-stretched">'+'<button class="k-button k-state-active k-group-start">#=messages.date#</button>'+'<button class="k-button k-group-end">#=messages.time#</button>'+"</div>"+"</div>"+'<div class="k-datetime-selector">'+'<div class="k-datetime-calendar-wrap">'+"</div>"+'<div class="k-datetime-time-wrap">'+"</div>"+"</div>"+'<div class="k-datetime-footer k-action-buttons">'+'<button class="k-button k-time-cancel" title="Cancel" aria-label="Cancel">#=messages.cancel#</button>'+'<button class="k-time-accept k-button k-primary" title="Set" aria-label="Set">#=messages.set#</button>'+"</div>"+"</div>",P="k-state-active";var q=o.extend({init:function(t,e){var i=this,n;e=e||{};e.componentType=e.componentType||"classic";o.fn.init.call(i,t,e);t=i.element;e=i.options;e.disableDates=m.calendar.disabled(e.disableDates);e.min=g(t.attr("min"))||g(e.min);e.max=g(t.attr("max"))||g(e.max);if(+e.max!=+R||+e.min!=+M){this._specifiedRange=true}K(e);i._initialOptions=F({},e);i._wrapper();if(e.singlePopup){i._popup()}i._views();i._icons();i._reset();i._template();try{t[0].setAttribute("type","text")}catch(e){t[0].type="text"}t.addClass("k-input").attr({role:"combobox","aria-expanded":false,autocomplete:"off"});i._midnight=i._calculateMidnight(e.min,e.max);n=t.is("[disabled]")||v(i.element).parents("fieldset").is(":disabled");if(n){i.enable(false)}else{i.readonly(t.is("[readonly]"))}i._createDateInput(e);i._old=i._update(e.value||i.element.val());i._oldText=t.val();m.notify(i)},options:{name:"DateTimePicker",value:null,format:"",timeFormat:"",culture:"",parseFormats:[],dates:[],disableDates:null,min:new I(M),max:new I(R),interval:30,height:200,footer:"",start:t,depth:t,animation:{},month:{},ARIATemplate:'Current focused date is #=kendo.toString(data.current, "d")#',dateButtonText:"Open the date view",timeButtonText:"Open the time view",dateInput:false,weekNumber:false,messages:{set:"Set",cancel:"Cancel",hour:"hour",minute:"minute",second:"second",millisecond:"millisecond",now:"Now",date:"Date",time:"Time",today:"Today"},componentType:"classic"},events:[p,w,k],componentTypes:{classic:{singlePopup:false,timeView:{list:"list"}},modern:{singlePopup:true,timeView:{list:"scroll"}}},setOptions:function(e){var t=this,i=t._value,n,r,a;o.fn.setOptions.call(t,e);e=t.options;e.min=n=g(e.min);e.max=r=g(e.max);K(e);t._midnight=t._calculateMidnight(e.min,e.max);a=e.value||t._value||t.dateView._current;if(n&&!b(n,a)){n=new I(M)}if(r&&!b(r,a)){r=new I(R)}t.dateView.setOptions(e);t.timeView.setOptions(F({},e,{format:e.timeFormat,min:n,max:r}));t._createDateInput(e);if(!t._dateInput){t.element.val(m.toString(i,e.format,e.culture))}if(i){t._updateARIA(i)}},_editable:function(e){var t=this,i=t.element.off(l),n=t._dateIcon.off(l),r=t._timeIcon.off(l),a=t._inputWrapper.off(l),o=e.readonly,s=e.disable;if(!o&&!s){a.addClass(y).removeClass(C).on(N,t._toggleHover);if(i&&i.length){i[0].removeAttribute(c);i[0].removeAttribute(f,false);i[0].removeAttribute(V,false);i[0].removeAttribute(W,false)}i.on("keydown"+l,v.proxy(t._keydown,t)).on("focus"+l,function(){t._inputWrapper.addClass(x)}).on("focusout"+l,function(){t._inputWrapper.removeClass(x);if(i.val()!==t._oldText){t._change(i.val());if(!i.val()){t.dateView.current(m.calendar.getToday())}}if(t.options.singlePopup){return}t.close("date");t.close("time")});n.on(S,z).on(u,function(e){t.toggle("date");t._focusElement(e.type)});r.on(S,z).on(u,function(e){t.toggle("time");t._focusElement(e.type)})}else{a.addClass(s?C:y).removeClass(s?y:C);i.attr(c,s).attr(f,o).attr(V,s).attr(W,o)}},_focusElement:function(e){var t=this.element;if((!i.touch||i.mouseAndTouchPresent&&!(e||"").match(/touch/i))&&t[0]!==B()){t.trigger("focus")}},readonly:function(e){this._editable({readonly:e===d?true:e,disable:false})},enable:function(e){this._editable({readonly:false,disable:!(e=e===d?true:e)})},destroy:function(){var e=this;o.fn.destroy.call(e);e.dateView.destroy();e.timeView.destroy();if(e.options.singlePopup){e.popup.element.off(l);e.popup.destroy()}e.element.off(l);e._dateIcon.off(l);e._timeIcon.off(l);e._inputWrapper.off(l);if(e._form){e._form.off("reset",e._resetHandler)}},close:function(e){if(this.options.singlePopup){this.popup.close()}else{if(e!=="time"){e="date"}this[e+"View"].close()}},open:function(e){var t=this;var i;if(t.options.singlePopup){t.dateView._calendar();if(t.timeView.ul.find("li").length<1){t.timeView.bind()}i=t.popup._hovered;t.popup._hovered=true;t.popup.open();if(e==="time"){t._switchToTimeView()}else{t._switchToDateView()}this._dateIcon.toggle(e!=="time");this._timeIcon.toggle(e==="time");setTimeout(function(){t.popup._hovered=i},1)}else{if(e!=="time"){e="date"}this[e+"View"].open()}},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},toggle:function(e){if(this.options.singlePopup){if(this.popup.visible()){this.close()}else{this.open(e)}}else{var t="timeView";if(e!=="time"){e="date"}else{t="dateView"}this[e+"View"].toggle();this[t].close()}},value:function(e){var t=this;if(e===d){return t._value}t._old=t._update(e);if(t._old===null){t.element.val("")}t._oldText=t.element.val()},_change:function(e){var t=this,i=t.element.val(),n;e=t._update(e);n=+t._old!=+e;var r=n&&!t._typing;var a=i!==t.element.val();if(r||a){t.element.trigger(k)}if(n){t._old=e;t._oldText=t.element.val();t.trigger(k)}t._typing=false},_option:function(e,t){var i=this;var n=i.options;var r=i.timeView;var a=r.options;var o=i._value||i._old;var s;var l;if(t===d){return n[e]}t=g(t,n.parseFormats,n.culture);a.maxSet=false;if(!t){return}if(n.min.getTime()===n.max.getTime()){a.dates=[]}n[e]=new I(t.getTime());i.dateView[e](t);i._midnight=i._calculateMidnight(n.min,n.max);if(o){s=b(n.min,o);l=b(n.max,o)}if(s||l){a[e]=t;if(s&&!l){a.max=$(n.interval)}if(l){if(i._midnight){r.dataBind([R]);return}else if(!s){a.min=M;a.maxSet=true}}}else{a.max=R;a.min=M}r.bind()},_toggleHover:function(e){v(e.currentTarget).toggleClass(H,e.type==="mouseenter")},_update:function(e){var t=this,i=t.options,n=i.min,r=i.max,a=i.dates,o=t.timeView,s=t._value,l=g(e,i.parseFormats,i.culture),d=l===null&&s===null||l instanceof Date&&s instanceof Date,u,c,f,h,p;if(i.disableDates&&i.disableDates(l)){l=null;if(!t._old&&!t.element.val()){e=null}}if(+l===+s&&d){p=m.toString(l,i.format,i.culture);if(p!==e){t.element.val(l===null?e:p);if(e instanceof String){t.element.trigger(k)}}return l}if(l!==null&&b(l,n)){l=L(l,n,r)}else if(!_(l,n,r)){l=null}t._value=l;o.value(l);t.dateView.value(l);if(l){f=t._old;c=o.options;c.maxSet=false;if(a[0]){a=v.grep(a,function(e){return b(l,e)});if(a[0]){o.dataBind(a);h=true}}if(!h){if(b(l,n)){c.min=n;c.max=$(i.interval);u=true}if(b(l,r)){if(t._midnight){o.dataBind([R]);h=true}else{c.max=r;c.maxSet=true;if(!u){c.min=M}u=true}}}if(!h&&(!f&&u||f&&!b(f,l))){if(!u){c.max=R;c.min=M}o.bind()}}if(t._dateInput&&l){t._dateInput.value(l||e)}else{t.element.val(m.toString(l||e,i.format,i.culture))}t._updateARIA(l);return l},_keydown:function(e){var t=this,i=t.dateView,n=t.timeView,r=t.element.val(),a=t.options.singlePopup?t.popup.visible():i.popup.visible();var o=t._dateInput&&e.stopImmediatePropagation;if(e.altKey&&e.keyCode===m.keys.DOWN){t.toggle(a?"time":"date")}else if(a){i.move(e);t._updateARIA(i._current)}else if(!t.options.singlePopup&&n.popup.visible()){n.move(e)}else if(e.keyCode===m.keys.ENTER&&r!==t._oldText){t._change(r)}else{t._typing=true;o=false}if(o){e.stopImmediatePropagation()}},_views:function(){var i=this,n=i.element,r=i.options,e=n.attr("id"),a,t,o,s,l,d,u,c,f;if(r.singlePopup){r.dateDiv=i.popup.element.find(".k-datetime-calendar-wrap");u=i.popup.element.find(".k-datetime-time-wrap");r.omitPopup=c=true;f=r.timeView}i.dateView=a=new m.DateView(F({},r,{id:e,anchor:i.wrapper,change:function(){var e=i._applyDateValue();if(r.singlePopup){if(!i.timeView._currentlySelected){i.timeView._currentlySelected=new Date}i.timeView._currentlySelected.setFullYear(e.getFullYear());i.timeView._currentlySelected.setMonth(e.getMonth());i.timeView._currentlySelected.setDate(e.getDate());i._switchToTimeView();i._toggleIcons()}else{i._change(e);i.close("date")}},close:function(e){if(i.trigger(w,U)){e.preventDefault()}else{n.attr(D,false);o.attr(A,true);if(!i.options.singlePopup&&!t.popup.visible()){if(n&&n.length){n[0].removeAttribute(E)}}}},open:function(e){if(i.trigger(p,U)){e.preventDefault()}else{if(n.val()!==i._oldText){d=g(n.val(),r.parseFormats,r.culture);i.dateView[d?"current":"value"](d)}o.attr(A,false);n.attr(D,true).attr(E,a._dateViewID);i._updateARIA(d)}}}));o=a.div;l=r.min.getTime();i.timeView=t=new h({id:e,value:r.value,anchor:i.wrapper,animation:r.animation,format:r.timeFormat,culture:r.culture,height:r.componentType==="modern"?null:r.height,interval:r.interval,min:r.componentType==="modern"?r.min:new I(M),max:r.componentType==="modern"?r.max:new I(R),dates:l===r.max.getTime()?[new Date(l)]:[],parseFormats:r.parseFormats,validateDate:true,change:function(e,t){e=i._applyTimeValue(e);if(t){i._timeSelected=true;i._change(e)}else{n.val(m.toString(e,r.format,r.culture));a.value(e);i._updateARIA(e)}},close:function(e){if(i.trigger(w,j)){e.preventDefault()}else{s.attr(A,true);n.attr(D,false);if(!a.popup.visible()){if(n&&n.length){n[0].removeAttribute(E)}}}},open:function(e){if(i.options.componentType!=="modern"){t._adjustListWidth()}else{i.timeView._updateTitle()}if(i.trigger(p,j)){e.preventDefault()}else{if(n.val()!==i._oldText){d=g(n.val(),r.parseFormats,r.culture);i.timeView.value(d)}s.attr(A,false);n.attr(D,true).attr(E,t._timeViewID);t.options.active(t.current())}},active:function(e){if(n&&n.length){n[0].removeAttribute(T)}if(e){n.attr(T,t._optionID)}},popup:r.popup,useValueToRender:true,specifiedRange:i._specifiedRange,omitPopup:c,timeDiv:u,timeView:f,messages:i.options.messages});s=t.ul},_applyDateValue:function(){var e=this;var t=e.options;var i=e.dateView;var n=i.calendar.value();var r=+n;var a=+t.min;var o=+t.max;var s,l;if(r===a||r===o){s=r===a?a:o;s=new I(e._value||s);s.setFullYear(n.getFullYear(),n.getMonth(),n.getDate());if(_(s,a,o)){n=s}}if(e._value){l=m.date.setHours(new Date(n),e._value);if(_(l,a,o)){n=l}}return n},_applyTimeValue:function(e){var t=this.timeView;var i=this.options;e=t._parse(e);if(e<i.min){e=new I(+i.min);t.options.min=e}else if(e>i.max){e=new I(+i.max);t.options.max=e}return e},_icons:function(){var e=this;var t=e.element;var i=e.options;var n;n=t.next("span.k-select");if(!n[0]){n=v('<span unselectable="on" class="k-select">'+'<span class="k-link k-link-date" aria-label="'+i.dateButtonText+'"><span unselectable="on" class="k-icon k-i-calendar"></span></span>'+'<span class="k-link k-link-time" aria-label="'+i.timeButtonText+'"><span unselectable="on" class="k-icon k-i-clock"></span></span>'+"</span>").insertAfter(t)}n=n.children();e._dateIcon=n.eq(0).attr("aria-controls",e.dateView._dateViewID);e._timeIcon=n.eq(1).attr("aria-controls",e.timeView._timeViewID);if(i.singlePopup){e._timeIcon.hide()}},_wrapper:function(){var e=this,t=e.element,i;i=t.parents(".k-datetimepicker");if(!i[0]){i=t.wrap(O).parent().addClass("k-picker-wrap k-state-default");i=i.wrap(O).parent()}i[0].style.cssText=t[0].style.cssText;t.css({width:"100%",height:t[0].style.height});e.wrapper=i.addClass("k-widget k-widget-2021 k-datetimepicker").addClass(t[0].className).removeClass("input-validation-error");e._inputWrapper=v(i[0].firstChild)},_reset:function(){var e=this,t=e.element,i=t.attr("form"),n=i?v("#"+i):t.closest("form"),r=e.options,a=r.disableDates,o=r.parseFormats.length?r.parseFormats:null,s=e._initialOptions.value,l=t[0].defaultValue;if(s&&(a&&a(s))){s=null}if((!l||!m.parseDate(l,o,r.culture))&&s){t.attr("value",m.toString(s,r.format,r.culture))}if(n[0]){e._resetHandler=function(){e.value(s||t[0].defaultValue);e.max(e._initialOptions.max);e.min(e._initialOptions.min)};e._form=n.on("reset",e._resetHandler)}},_template:function(){this._ariaTemplate=m.template(this.options.ARIATemplate)},_createDateInput:function(e){if(this._dateInput){this._dateInput.destroy();this._dateInput=null}if(e.dateInput){this._dateInput=new a.DateInput(this.element,{culture:e.culture,format:e.format,min:e.min,max:e.max,interval:e.interval})}},_calculateMidnight:function(e,t){return n(e)+n(t)===0},_updateARIA:function(e){var t;var i=this;var n=i.dateView.calendar;if(i.element&&i.element.length){i.element[0].removeAttribute(T)}if(n){t=n._cell;t.attr("aria-label",i._ariaTemplate({current:e||n.current()}));i.element.attr(T,t.attr("id"))}},_popup:function(){var t=this;var e=t.options;var i=v("<div></div>").attr(A,"true").addClass("k-datetime-container k-group k-reset").appendTo(document.body);i.append(m.template(G)(t.options));t.popup=new a.Popup(i,F(e.popup,e,{name:"Popup",isRtl:m.support.isRtl(t.wrapper),anchor:t.wrapper,activate:function(){if(t.options.timeView&&t.options.timeView.list==="scroll"){t.timeView.addTranslate();t.timeView.applyValue(t._value);t.timeView._updateRanges()}},open:function(e){if(t.trigger(p,{view:this.element.find(".k-date-tab").length?"date":"time",sender:t})){e.preventDefault()}t.timeView._updateTitle()}}));i.on(s+l,".k-datetime-buttongroup .k-button",v.proxy(t._groupChangeClick,t));i.on(s+l,".k-datetime-footer button.k-time-cancel",v.proxy(t._cancelClickHandler,t));i.on(s+l,".k-datetime-footer button.k-time-accept",v.proxy(t._setClickHandler,t))},_groupChangeClick:function(e){z(e);var t=v(e.currentTarget);var i=t.index();if(i){this._switchToTimeView()}else{this._switchToDateView()}this._toggleIcons()},_switchToDateView:function(){this.popup.element.find(".k-group-start, .k-group-end").removeClass(P).eq(0).addClass(P);this.popup.element.find(".k-datetime-wrap").removeClass("k-time-tab").addClass("k-date-tab")},_switchToTimeView:function(){this.timeView.addTranslate();this.timeView.applyValue(this._value);this.timeView._updateRanges();this.popup.element.find(".k-group-start, .k-group-end").removeClass(P).eq(1).addClass(P);this.popup.element.find(".k-datetime-wrap").removeClass("k-date-tab").addClass("k-time-tab")},_toggleIcons:function(){this._dateIcon.toggle();this._timeIcon.toggle()},_cancelClickHandler:function(){if(this._value){this.value(this._value);this.dateView.value(this._value)}this.popup.close()},_setClickHandler:function(){var e=this._applyDateValue();var t;e=e||new Date;t=this.timeView._currentlySelected||e;this.timeView._updateCurrentlySelected();e.setHours(t.getHours());e.setMinutes(t.getMinutes());e.setSeconds(t.getSeconds());e=this._applyTimeValue(e);this._change(e);this.popup.close()}});function $(e){var t=new Date(2100,0,1);t.setMinutes(-e);return t}function z(e){e.preventDefault()}function K(e){var t=m.getCulture(e.culture).calendars.standard.patterns,i=!e.parseFormats.length,n;e.format=r(e.format||t.g);e.timeFormat=n=r(e.timeFormat||t.t);m.DateView.normalize(e);if(i){e.parseFormats.unshift("yyyy-MM-ddTHH:mm:ss")}if(v.inArray(n,e.parseFormats)===-1){e.parseFormats.push(n)}}a.plugin(q)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.daterangepicker",["kendo.core","kendo.multiviewcalendar","kendo.datepicker"],e)})(function(){var e={id:"daterangepicker",name:"DateRangePicker",category:"web",description:"Date range picker.",depends:["core","multiviewcalendar","datepicker"]};(function(a,r){var o=window.kendo,s=o.ui,l=o.keys,d=s.Widget,e="month",u="open",c="close",f="change",h="<div />",t="min",i="max",p=o.template,v=a.extend,m="id",n=o.support,g=n.mobileOS,_="k-state-selected",b="aria-expanded",w="aria-disabled",k="k-state-disabled",y="disabled",x="readonly",C="k-state-default",S="aria-hidden",T=".kendoDateRangePicker",D="click"+T,A="mousedown"+T,E=n.mouseAndTouchPresent?o.applyEventMap("up",T.slice(1)):D,I=a.proxy,M=o.parseDate;var R=function(e){o.DateView.call(this,e)};R.prototype=Object.create(o.DateView.prototype);function F(e){e.preventDefault()}R.prototype._calendar=function(){var e=this;var t=e.calendar;var i=e.options;var n;if(!t){n=a(h).attr(m,o.guid()).appendTo(e.popup.element).on(A,F).on(D,"td:has(.k-link)",I(e._click,e));e.calendar=t=new s.MultiViewCalendar(n);e._setOptions(i);t.navigate(e._value||e._current,i.start);e.calendar.selectRange(e._range||i.range||{})}};R.prototype._setOptions=function(e){this.calendar.setOptions({focusOnNav:false,change:e.change,culture:e.culture,dates:e.dates,depth:e.depth,footer:e.footer,format:e.format,selectable:e.selectable,max:e.max,min:e.min,month:e.month,weekNumber:e.weekNumber,start:e.start,disableDates:e.disableDates,range:e.range})};R.prototype.range=function(e){this._range=e;if(this.calendar){if(!e.start&&!e.end){this.calendar.selectRange(e);this.calendar.rangeSelectable.clear(true)}else{this.calendar.selectRange(e)}}};R.prototype.move=function(e){var t=this;var i=e.keyCode;var n=t.calendar;var r=e.ctrlKey&&i==l.DOWN||i==l.ENTER;var a=false;if(e.altKey){if(i==l.DOWN){t.open();e.preventDefault();a=true}else if(i==l.UP){t.close();e.preventDefault();a=true}}else if(t.popup.visible()){if(i==l.ESC||r&&n._cell.hasClass(_)){t.close();e.preventDefault();return true}t._current=n._move(e,true);a=true}return a};R.prototype._click=function(e){if(g.ios||g.android&&(g.browser=="firefox"||g.browser=="chrome")){if(this._range&&this._range.end){this.close()}}else if(this._range&&this._range.end===null&&e.currentTarget.className.indexOf("k-state-selected")!==-1){this.close()}};o.DateRangeView=R;var P=d.extend({init:function(e,t){var i=this;var n;var r;d.fn.init.call(i,e,t);e=i.element;t=i.options;t.disableDates=o.calendar.disabled(t.disableDates);t.min=M(e.attr("min"))||M(t.min);t.max=M(e.attr("max"))||M(t.max);i._initialOptions=v({},t);i._buildHTML();i._range=i.options.range;i._changeTriggered=false;i.dateView=new R(v({},t,{id:e.attr(m),anchor:i.wrapper,views:2,selectable:"range",range:i._range,change:function(){var e=this.selectRange();i.range(e);i.trigger(f);i._changeTriggered=true;i._startDateInput.trigger(f);i._endDateInput.trigger(f);i._changeTriggered=false},close:function(e){if(i.trigger(c)){e.preventDefault()}else{i.wrapper.attr(b,false);n.attr(S,true)}},open:function(e){if(i.trigger(u)){e.preventDefault()}else{i.wrapper.attr(b,true);n.attr(S,false);i._updateARIA()}}}));n=i.dateView.div;i._ariaTemplate=p(this.options.ARIATemplate);i._reset();i.wrapper.attr({role:"combobox","aria-expanded":false,"aria-owns":i.dateView._dateViewID,autocomplete:"off"});i._inputs.on(E+T,I(i._click,i)).on("keydown"+T,I(i._keydown,i));i._initializeDateInputs();r=e.is("[disabled]");if(r){i.enable(false)}else{i.readonly(e.is("[readonly]"))}},options:{name:"DateRangePicker",labels:true,footer:"",format:"",culture:"",min:new Date(1900,0,1),max:new Date(2099,11,31),start:e,depth:e,animation:{},month:{},startField:"",endField:"",dates:[],disableDates:null,range:null,ARIATemplate:'Current focused date is #=kendo.toString(data.current, "D")#',weekNumber:false,messages:{startLabel:"Start",endLabel:"End"}},events:[u,c,f],setOptions:function(e){var t=this;d.fn.setOptions.call(t,e);e=t.options;e.min=M(e.min);e.max=M(e.max);t._inputs.off(T);this._initializeDateInputs();t.dateView.setOptions(e);t._range=e.range},_click:function(){var e=this;if(!e._preventInputAction&&!e.dateView.popup.visible()){e.dateView.open()}},_keydown:function(e){var t=this,i=t.dateView,n=false;if(t._preventInputAction){e.stopImmediatePropagation();return}n=i.move(e);t._updateARIA(i._current);if(n&&e.stopImmediatePropagation){e.stopImmediatePropagation()}},_updateARIA:function(e){var t;var i=this;var n=i.dateView.calendar;if(i.element&&i.element.length){i.element[0].removeAttribute("aria-activedescendant")}if(n){if(e&&!n._dateInViews(e)){n.navigate(e)}t=n._cellByDate(e||n.current());n._focusCell(t);t.attr("aria-label",i._ariaTemplate({current:e||n.current()}));i.element.attr("aria-activedescendant",t.attr("id"))}},_startChange:function(e){var t=this;var i=e.sender;var n=i.value();var r=t._endDateInput.value();if(t.options.disableDates(n)){e.sender.value(null);n=null}t.range({start:n,end:r});if(!t._changeTriggered){t.trigger(f)}},_endChange:function(e){var t=this;var i=e.sender;var n=i.value();var r=t._startDateInput.value();if(t.options.disableDates(n)){e.sender.value(null);n=null}t.range({start:r,end:n});if(!t._changeTriggered){t.trigger(f)}},_initializeDateInputs:function(){var e=this;var t=e.options;var i=t.range||{};var n={footer:t.footer,format:t.format,culture:t.culture,min:t.min,max:t.max,start:t.start,startField:t.startField,endField:t.endField,depth:t.depth,animation:t.animation,month:t.month,dates:t.dates,disableDates:t.disableDates,ARIATemplate:t.ARIATemplate,weekNumber:t.weekNumber};if(e._startDateInput){e._startDateInput.destroy();e._endDateInput.destroy();e.wrapper.empty();e._buildHTML();e._inputs.on(E+T,I(e._click,e)).on("keydown"+T,I(e._keydown,e))}e._startDateInput=e._startInput.kendoDateInput(v(true,n,{value:i.start})).getKendoDateInput();e._endDateInput=e._endInput.kendoDateInput(v(true,n,{value:i.end})).getKendoDateInput();e._startChangeHandler=I(e._startChange,e);e._startDateInput.bind(f,e._startChangeHandler);e._endChangeHandler=I(e._endChange,e);e._endDateInput.bind(f,e._endChangeHandler)},_buildHTML:function(){var e=this;var t=e.element;if(!e.wrapper){e.wrapper=t.addClass("k-widget k-widget-2021 k-daterangepicker")}if(e.options.labels){a('<span class="k-textbox-container"><input/><label class="k-label">'+e.options.messages.startLabel+"</label></span>").appendTo(e.wrapper);a('<span>&nbsp;</span><span class="k-textbox-container"><input/><label class="k-label">'+e.options.messages.endLabel+"</label></span>").appendTo(e.wrapper)}else{a("<input/><span>&nbsp;</span><input/>").appendTo(e.wrapper)}e._startInput=e.wrapper.find("input").eq(0);e._endInput=e.wrapper.find("input").eq(1);if(e.options.startField!==""){e._startInput.attr(o.attr("bind"),"value: "+e.options.startField);e._startInput.attr("name",e.options.startField)}if(e.options.endField!==""){e._endInput.attr(o.attr("bind"),"value: "+e.options.endField);e._endInput.attr("name",e.options.endField)}e._inputs=e._startInput.add(e._endInput)},_option:function(e,t){var i=this,n=i.options;if(t===r){return n[e]}t=M(t,n.parseFormats,n.culture);if(!t){return}n[e]=new Date(+t);i.dateView[e](t)},_reset:function(){var e=this,t=e.element,i=t.attr("form"),n=i?a("#"+i):t.closest("form");if(n[0]){e._resetHandler=function(){e.max(e._initialOptions.max);e.min(e._initialOptions.min)};e._form=n.on("reset",e._resetHandler)}},_editable:function(e){var t=this,i=t._inputs,n=e.readonly,r=e.disable;if(!n&&!r){t.wrapper.addClass(C).removeClass(k);a.each(i,function(e,t){t.removeAttribute(y);t.removeAttribute(x)});i.attr(w,false);t._preventInputAction=false}else{t.wrapper.addClass(r?k:C).removeClass(r?C:k);i.attr(y,r).attr(x,n).attr(w,r);t._preventInputAction=true}},destroy:function(){var e=this;if(e._startDateInput){e._startDateInput.unbind(f,e._startChangeHandler);e._startDateInput.destroy();e._startChangeHandler=null}if(e._endDateInput){e._endDateInput.unbind(f,e._endChangeHandler);e._endDateInput.destroy();e._endChangeHandler=null}if(e._form){e._form.off("reset",e._resetHandler)}e._inputs.off(T);e._inputs=null;e.dateView.destroy();e.element.off(T);d.fn.destroy.call(e)},range:function(e){var t=this;if(e===r){return t._range}t._range=e;t.dateView.range({start:null,end:null});if(!e){t._startDateInput.value(null);t._endDateInput.value(null)}t._startDateInput.value(e.start?e.start:null);t._endDateInput.value(e.end?e.end:null);if(e.start&&!e.end){t.dateView.range({start:e.start,end:null})}else if(e.start&&e.end&&+e.start<=+e.end){t.dateView.range({start:e.start,end:e.end})}},open:function(){this.dateView.open()},close:function(){this.dateView.close()},min:function(e){return this._option(t,e)},max:function(e){return this._option(i,e)},readonly:function(e){this._startDateInput.readonly(e);this._endDateInput.readonly(e);this._editable({readonly:e===r?true:e,disable:false})},enable:function(e){this._startDateInput.enable(e);this._endDateInput.enable(e);if(!e){this.close()}this._editable({readonly:false,disable:!(e=e===r?true:e)})}});o.ui.plugin(P)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.scrollview",["kendo.fx","kendo.data","kendo.draganddrop"],e)})(function(){var e={id:"scrollview",name:"ScrollView",category:"web",description:"The Kendo ScrollView widget is used to scroll content wider than the device screen.",depends:["fx","data","draganddrop"]};(function(d,v){var m=window.kendo,e=m.ui,a=d.proxy,f=m.effects.Transition,B=m.ui.Pane,o=m.keys,L=m.ui.PaneDimensions,s=e.DataBoundWidget,n=m.data.DataSource,t=Math,u=t.abs,h=t.ceil,p=t.round,H=t.max,N=t.min,g=t.floor,c="change",l="click",O="changing",_="refresh",b="primary",i="scrollview-page",r="function",w="itemChange",V="cleanup",k=".ScrollView",W=".",y="keydown",x="focus",C="focusout",S="k-state-focused",T="tabindex",U=3,j=-1,G=0,q=1,D=-1,$=0,A=1;function E(e){return"k-"+e}var I=m.Observable.extend({init:function(e){var t=this;this.dataSource=e;this.pendingRequestArray=[];this.initialFetch=false;this.useRanges=e.options.serverPaging;m.Observable.fn.init.call(this);e.bind("change",function(){t._change()})},_change:function(){this.trigger("reset",{offset:this.offset})},page:function(e,t){var i=this;if(!this.useRanges){this.dataSource.page(e+1);if(t){t(i.dataSource.view())}else{i.trigger("page",{page:e})}}if(this.useRanges){this.dataSource.range(e*this.dataSource.pageSize(),this.dataSource.pageSize(),function(){if(t){t(i.dataSource.view())}else{i.trigger("page",{page:e})}})}},scrollTo:function(e){var t=Math.ceil(this.dataSource.total()/this.dataSource.pageSize()||1);var i=e-1;var n=i-1;var r=e;var a=t>0&&e+1>=t?-1:e+1;var o=t>0&&a+1>=t?-1:a+1;if(a>=0){this.pendingRequestArray.push(a)}if(i>=0){this.pendingRequestArray.push(i)}if(n>=0){this.pendingRequestArray.push(n)}if(o>=0){this.pendingRequestArray.push(o)}this.page(r)},getViewData:function(){var e=this.dataSource.view();var t;if(this.dataSource.options.pageSize>1){t=[];for(var i=0;i<e.length;i++){t.push(e[i])}}else{t=e[0]}return t},destroy:function(){var e=this;e.dataSource.unbind();e.dataSource=null}});m.ui.ScrollViewDataReader=I;var M=m.Class.extend({init:function(e){var t=this,i=d("<ul class='"+E("scrollview-nav")+"'/>"),n=d("<div class='"+E("scrollview-nav-wrap")+"'></div>");n.append(i);e._navigationContainer.append(n);this._changeProxy=a(t,"_change");this._refreshProxy=a(t,"_refresh");e.bind(c,this._changeProxy);e.bind(_,this._refreshProxy);i.on(l+k,"li.k-link",a(this._click,e));d.extend(t,{element:i,scrollView:e});t._navigatable()},items:function(){return this.element.children()},_focus:function(){var e=this;e._focused=true;e._setCurrent(e.element.find(W+E(b)))},_blur:function(){var e=this;e._focused=false;if(e._current){e._current.removeClass(S);e._current.removeAttr("id");e.element.removeAttr("aria-activedescendant")}},_keyDown:function(e){var t=this;var i;var n;var r=t._current;var a=e.keyCode;if(a==o.LEFT){i=true;n=r.prev("li.k-link");if(n.length){t._setCurrent(n)}}if(a==o.RIGHT){i=true;n=r.next("li.k-link");if(n.length){t._setCurrent(n)}}if(e.keyCode==o.SPACEBAR||e.keyCode==o.ENTER){i=true;t._current.trigger("click")}if(i){e.preventDefault();e.stopPropagation()}},_setCurrent:function(e){if(!this._focused){return}var t=this;var i=m.guid();var n=d(e);if(t._current){d(t._current).removeClass(S).removeAttr("id");t.element.removeAttr("aria-activedescendant")}n.attr("id",i).addClass(S);t.element.attr("aria-activedescendant",i);t._current=n},_navigatable:function(){var e=this;var t=e.scrollView.options.pageable||{};if(!e.scrollView.options.navigatable){return}e.element.attr(T,0).attr("role","listbox");e._ariaTemplate=m.template(t.ARIATemplate||"Item #=data.index#");e.element.on(y+k,e,a(e._keyDown,e));e.element.on(x+k,a(e._focus,e));e.element.on(C+k,a(e._blur,e))},_refresh:function(e){var t="";var i=this.scrollView.options.navigatable;var n;for(var r=0;r<e.pageCount;r++){if(i){t+='<li class="k-link" role="option" aria-label="'+this._ariaTemplate({index:r})+'" aria-selected="false"></li>'}else{t+='<li class="k-link"></li>'}}this.element.html(t);n=this.items().eq(e.page);n.addClass(E(b));if(i){n.attr("aria-selected",true)}this.scrollView._toggleNavigation({currentPage:e.page})},_change:function(e){if(e.isDefaultPrevented()){return}var t=this.scrollView._navigationContainer.find(".k-scrollview-nav");var i=this.scrollView.element.width();var n=(i-t.width())/2;var r=t.find("li.k-link:eq(0)").outerWidth(true)/2;var a=this.items();var o=this.scrollView.options.navigatable;var s;a.removeClass(E(b));s=a.eq(e.nextPage).addClass(E(b));if(o){a.attr("aria-selected",false);this._setCurrent(s);s.attr("aria-selected",true)}var l=this.items().eq(e.nextPage).length>0?this.items().eq(e.nextPage).position().left:0;if(l>i/2||l<m.scrollLeft(t)+i/2){var d=0;if(l>i/2){d=m.scrollLeft(t)+l-i/2}else{d=m.scrollLeft(t)-(i/2-l)}d+=n+r;t.animate({scrollLeft:d},300)}this.scrollView._toggleNavigation({currentPage:e.currentPage,nextPage:e.nextPage})},_click:function(e){var t=d(e.currentTarget).index();this.scrollTo(t)},destroy:function(){this.scrollView.unbind(c,this._changeProxy);this.scrollView.unbind(_,this._refreshProxy);this.element.off(k);this.element.remove()}});m.ui.ScrollViewPager=M;var R="transitionEnd",F="dragStart",K="dragEnd";var Y=m.Observable.extend({init:function(e,t){var i=this;m.Observable.fn.init.call(this);this.element=e;this.container=e.parent();var n,r,a,o,s,l;n=new m.ui.Movable(i.element);r=new f({axis:"x",movable:n,onEnd:function(){i.trigger(R)}});a=new m.UserEvents(e,{fastTap:true,start:function(e){if(u(e.x.velocity)*2>=u(e.y.velocity)){a.capture()}else{a.cancel()}i.trigger(F,e);r.cancel()},allowSelection:true,end:function(e){i.trigger(K,e)}});o=new L({element:i.element,container:i.container});s=o.x;s.bind(c,function(){i.trigger(c)});l=new B({dimensions:o,userEvents:a,movable:n,elastic:true});d.extend(i,{duration:t&&t.duration||1,movable:n,transition:r,userEvents:a,dimensions:o,dimension:s,pane:l});this.bind([R,F,K,c],t)},size:function(){return{width:this.dimensions.x.getSize(),height:this.dimensions.y.getSize()}},total:function(){return this.dimension.getTotal()},offset:function(){return-this.movable.x},updateDimension:function(){this.dimension.update(true)},refresh:function(){this.dimensions.refresh();this.dimensions.y.enabled=false},moveTo:function(e){this.movable.moveAxis("x",-e)},transitionTo:function(e,t,i){if(i){this.moveTo(-e)}else{this.transition.moveTo({location:e,duration:this.duration,ease:t})}},destroy:function(){var e=this;e.userEvents.destroy();e.unbind();e.movable=e.tansition=e.dimensions=e.dimension=e.pane=null;e.element.remove()}});m.ui.ScrollViewElasticPane=Y;var P=m.Observable.extend({init:function(e,t,i){var n=this;m.Observable.fn.init.call(this);n.element=e;n.pane=t;n._getPages();this.page=0;this.pageSize=i.pageSize||1;this.contentHeight=i.contentHeight;this.enablePager=i.enablePager;this.pagerOverlay=i.pagerOverlay},scrollTo:function(e,t){var i=this;if(e==i.page&&!t){return}if(!i.trigger("resize",{currentPage:this.page,nextPage:e,data:v})){i.page=e;i.pane.transitionTo(-e*i.pane.size().width,f.easeOutExpo,t)}},paneMoved:function(e,t,i,n){var r=this,a=r.pane,o=a.size().width*r.pageSize,s=p,l=t?f.easeOutBack:f.easeOutExpo,d,u;if(e===D){s=h}else if(e===A){s=g}u=s(a.offset()/o);if(u<0||u>=r.pageCount){var c=u<0?0:-this.page*this.pane.size().width;return this.pane.transitionTo(c,l,n)}d=H(r.minSnap,N(-u*o,r.maxSnap));if(u!=r.page){if(i&&i({currentPage:r.page,nextPage:u})){d=-r.page*a.size().width}}a.transitionTo(d,l,n)},updatePage:function(){var e=this.pane,t=p(e.offset()/e.size().width);if(t!=this.page){this.page=t;return true}return false},forcePageUpdate:function(){return this.updatePage()},resizeTo:function(e){var t=this.pane,i=e.width;this.pageElements.width(i);if(this.contentHeight==="100%"){var n=this.element.parent().height();if(this.enablePager===true){var r=this.element.parent().find("ul.k-scrollview-nav");if(!this.pagerOverlay&&r.length){n-=m._outerHeight(r,true)}}this.element.css("height",n);this.pageElements.css("height",n)}t.updateDimension();if(!this._paged){this.page=g(t.offset()/i)}this.scrollTo(this.page,true,true);this.pageCount=g(t.total()/i);this.minSnap=-(this.pageCount-1)*i;this.maxSnap=0},_getPages:function(){this.pageElements=this.element.find(m.roleSelector("page"));this._paged=this.pageElements.length>0},destroy:function(){var e=this;e.pane=null;e.element.remove()}});m.ui.ScrollViewContent=P;var z=m.Observable.extend({init:function(e,t,i){var n=this;m.Observable.fn.init.call(this);n.element=e;n.pane=t;n.options=i;n._templates();n.page=i.page||0;n.pages=[];n._initPages();n.resizeTo(n.pane.size());n.pane.dimension.forceEnabled()},setDataSource:function(e){this.dataSource=n.create(e);this._dataReader();this._pendingPageRefresh=false;this._pendingWidgetRefresh=false},_viewShow:function(){var e=this;if(e._pendingWidgetRefresh){setTimeout(function(){e._resetPages()},0);e._pendingWidgetRefresh=false}},_dataReader:function(){this.dataReader=new I(this.dataSource);this._pageProxy=a(this,"_onPage");this._resetProxy=a(this,"_onReset");this.dataReader.bind({page:this._pageProxy,reset:this._resetProxy})},_templates:function(){var e=this.options.template,t=this.options.emptyTemplate,i={},n={};if(typeof e===r){i.template=e;e="#=this.template(data)#"}this.template=a(m.template(e),i);if(typeof t===r){n.emptyTemplate=t;t="#=this.emptyTemplate(data)#"}this.emptyTemplate=a(m.template(t),n)},_initPages:function(){var e=this.pages,t=this.element,i;for(var n=0;n<U;n++){i=new Q(t);e.push(i)}this.pane.updateDimension()},resizeTo:function(e){var t=this.pages,i=this.pane;for(var n=0;n<t.length;n++){t[n].setWidth(e.width)}if(this.options.contentHeight==="auto"){this.element.css("height",this.pages[1].element.height())}else if(this.options.contentHeight==="100%"){var r=this.element.parent().height();if(this.options.enablePager===true){var a=this.element.parent().find("ul.k-scrollview-nav");if(!this.options.pagerOverlay&&a.length){r-=m._outerHeight(a,true)}}this.element.css("height",r);t[0].element.css("height",r);t[1].element.css("height",r);t[2].element.css("height",r)}else if(this.options.contentHeight){t[0].element.css("height",this.options.contentHeight);t[1].element.css("height",this.options.contentHeight);t[2].element.css("height",this.options.contentHeight)}i.updateDimension();this._repositionPages();this.width=e.width},scrollTo:function(t,i,n){var r=this;var a=r.dataReader;if(t==r.page&&!i){return}a.page(t,function(e){if(n){a.scrollTo(t);return}if(!r.trigger("resize",{currentPage:r.page,nextPage:t,data:e})){if(!i){a.pagerScroll=t>r.page?-1:1;r.page=t+a.pagerScroll}else{r.page=t}a.scrollTo(t)}})},paneMoved:function(e,t,i,n){var r=this,a=r.pane,o=a.size().width,s=a.offset(),l=Math.abs(s)>=o/3,d=t?m.effects.Transition.easeOutBack:m.effects.Transition.easeOutExpo,u=r.dataSource.options.serverPaging?r.page+2>r.pageCount:false,c,f=0,h,p;if(e===A){if(r.page!==0){f=-1}}else if(e===D&&!u){f=1}else if(s>0&&(l&&!u)){f=1}else if(s<0&&l){if(r.page!==0){f=-1}}c=r.page;if(f){c=f>0?c+1:c-1;if(r instanceof m.ui.VirtualScrollViewContent){r.dataReader.page(c);h=r.dataReader.getViewData()}else{h=v}if(!(h instanceof Array)){h=[h]}p=r.pages?r.pages[1].element:v}if(i&&r.page!=c&&i({currentPage:r.page,nextPage:c,element:p,data:h})){f=0}if(f===0){r._cancelMove(d,n)}else if(f===-1){r._moveBackward(n)}else if(f===1){r._moveForward(n)}},updatePage:function(){var e=this.pages;if(this.pane.offset()===0){return false}if(this.pane.offset()>0){e.push(this.pages.shift());this.page++;if(this.page+2<this.pageCount){this.dataReader.pendingRequestArray.push(this.page+2)}if(this.page+1<this.pageCount){this.dataReader.page(this.page+1)}if(this.page+1==this.pageCount){this.setPageContent(this.pages[2],null)}}else{e.unshift(this.pages.pop());this.page--;if(this.page-2>=0){this.dataReader.pendingRequestArray.push(this.page-2)}if(this.page-1>=0){this.dataReader.page(this.page-1)}}this._repositionPages();this._resetMovable();return true},forcePageUpdate:function(){var e=this.pane.offset(),t=this.pane.size().width*3/4;if(u(e)>t){return this.updatePage()}return false},_resetMovable:function(){this.pane.moveTo(0)},_moveForward:function(e){this.pane.transitionTo(-this.width,m.effects.Transition.easeOutExpo,e)},_moveBackward:function(e){this.pane.transitionTo(this.width,m.effects.Transition.easeOutExpo,e)},_cancelMove:function(e,t){this.pane.transitionTo(0,e,t)},_resetPages:function(){this.page=this.options.page||0;this._repositionPages();this.trigger("reset")},_onPage:function(e){if(e.page>=this.pageCount){this.setPageContent(this.pages[2],null)}if(this.page==e.page){if(!this.dataReader.pagerScroll||this.dataReader.pagerScroll===0&&this.dataReader.initialFetch){this.setPageContent(this.pages[1],this.dataReader.getViewData())}else{if(this.dataReader.pagerScroll<0){this._moveForward()}else{this._moveBackward()}this.dataReader.pagerScroll=0;this.setPageContent(this.pages[1],this.dataReader.getViewData())}}else if(this.page+1==e.page){this.setPageContent(this.pages[2],this.dataReader.getViewData())}else if(this.page-1==e.page){this.setPageContent(this.pages[0],this.dataReader.getViewData())}if(this.dataReader.pendingRequestArray.length>0&&this.dataReader.initialFetch){var t=this.dataReader.pendingRequestArray.shift();this.dataReader.page(t)}},_onReset:function(){this.pageCount=h(this.dataSource.total()/this.dataSource.pageSize())},_repositionPages:function(){var e=this.pages;e[0].position(j);e[1].position(G);e[2].position(q)},setPageContent:function(e,t){var i=this.template,n=this.emptyTemplate;if(t!==null&&t!==v){e.content(i(t))}else{e.content(n({}))}},destroy:function(){var e=this;var t=e.pages;e.dataReader.unbind();e.dataSource.unbind();e.dataReader=e.dataSource=e.pane=null;for(var i=0;i<t.length;i++){t[i].destroy()}e.element.remove()}});m.ui.VirtualScrollViewContent=z;var Q=m.Class.extend({init:function(e){this.element=d("<li class='"+E(i)+"'></li>");this.width=e.width();this.element.width(this.width);e.append(this.element)},content:function(e){this.element.html(e)},position:function(e){this.element.css("transform","translate3d("+this.width*e+"px, 0, 0)")},setWidth:function(e){this.width=e;this.element.width(e)},destroy:function(){var e=this;e.element.remove();e.element=null}});m.ui.VirtualPage=Q;var X=s.extend({init:function(e,t){var n=this;s.fn.init.call(n,e,t);t=n.options;e=n.element;m.stripWhitespace(e[0]);if(e.children().length===0){e.wrapInner("<ul class='k-scrollview-wrap'/>")}else{e.wrapInner("<div class='k-scrollview-wrap'/>")}n.itemsWrapper=e.find(".k-scrollview-wrap");e.addClass("k-widget k-widget-2021 "+E("scrollview"));n._initNavigation();if(this.options.pageable||this.options.enablePager){this.pager=new M(this);if(this.options.pagerOverlay){e.addClass(E("scrollview-overlay"))}}else{this._changeProxy=a(n,"_toggleNavigation");this.bind(c,this._changeProxy)}n.inner=e.children().first();n.page=0;n.inner.css("height",t.contentHeight);n.pane=new Y(n.inner,{duration:this.options.duration,transitionEnd:a(this,"_transitionEnd"),dragStart:a(this,"_dragStart"),dragEnd:a(this,"_dragEnd"),change:a(this,_)});n.bind("resize",function(){n.pane.refresh()});n.page=t.page;var i=this.inner.children().length===0;var r=i?new z(n.inner,n.pane,t):new P(n.inner,n.pane,t);r.page=n.page;r.bind("reset",function(){this._pendingPageRefresh=false;n.trigger(_,{pageCount:r.pageCount,page:r.page});n._toggleNavigation({currentPage:r.page,nextPage:r.page})});r.bind("resize",function(e){var t=r.page;var i=e.nextPage;if(t!=i){e._defaultPrevented=n.trigger(c,{currentPage:r.page,nextPage:e.nextPage,data:e.data})}n._toggleNavigation({currentPage:r.page,nextPage:e.nextPage})});r.bind(w,function(e){n.trigger(w,e);n.angular("compile",function(){return{elements:e.item,data:[{dataItem:e.data}]}})});r.bind(V,function(e){n.angular("cleanup",function(){return{elements:e.item}})});n._content=r;n.setDataSource(t.dataSource);n.viewInit();n.viewShow();n._navigatable()},options:{name:"ScrollView",ARIATemplate:"Item #=data.index# of #=data.total#",page:0,duration:400,velocityThreshold:.8,contentHeight:"auto",pageSize:1,bounceVelocityThreshold:1.6,enablePager:true,enableNavigationButtons:true,pagerOverlay:true,navigatable:false,autoBind:true,pageable:false,template:"",emptyTemplate:"",messages:{previousButtonLabel:"Previous",nextButtonLabel:"Next"}},events:[O,c,_],destroy:function(){s.fn.destroy.call(this);this._content.destroy();this.pane.destroy();if(this.pager){this.pager.destroy()}this._navigationContainer.off(k);this._navigationContainer=null;this.itemsWrapper.off(k);this.itemsWrapper=null;if(this.options.navigatable){this.ariaLiveEl=this._current=null}this.inner=null;m.destroy(this.element)},viewInit:function(){if(this.options.autoBind){this._content.scrollTo(this._content.page,true,true)}},viewShow:function(){this.pane.refresh()},refresh:function(){var e=this._content;var t=this.options;e.resizeTo(this.pane.size());this.page=e.page;if(e instanceof P||e.dataReader.initialFetch){if(t.enablePager){this.trigger(_,{pageCount:e.pageCount,page:e.page})}else{this.trigger(c,{pageCount:e.pageCount,currentPage:e.page})}}},content:function(e){this.element.children().first().html(e);this._content._getPages();this.pane.refresh()},scrollTo:function(e,t,i){this._content.scrollTo(e,t,i)},prev:function(){var t=this,e=t._content.page-1;if(t._content instanceof z){t._content.paneMoved(A,v,function(e){return t.trigger(c,e)})}else if(e>-1){t.scrollTo(e)}},next:function(){var t=this,e=t._content.page+1;if(t._content instanceof z){t._content.paneMoved(D,v,function(e){return t.trigger(c,e)})}else if(e<t._content.pageCount){t.scrollTo(e)}},setDataSource:function(e){var t=this;if(!(this._content instanceof z)){return}var i=!e;if(e instanceof n){e.options.pageSize=e.options.pageSize||1;this.dataSource=e=new n(e.options)}else{this.dataSource=n.create(e)}this._content.setDataSource(this.dataSource);if(this.options.autoBind&&!i){this.dataSource.fetch(function(){t._content.dataReader.initialFetch=true;t.scrollTo(t._content.page,true,true);t._content.trigger("reset")})}},items:function(){return this.element.find(".k-"+i)},_updateAria:function(){var e=this._content;if(this.options.navigatable){this.ariaLiveEl.html(this._ariaTemplate({index:e.page+1,total:e.pageCount}))}},_setCurrent:function(e){if(!this._focused){return}var t=this;var i=t._content.page;var n=m.guid();var r=t.itemsWrapper.children();var a=d(e||r.eq(i));if(t._content.pages){r.attr("aria-hidden",true);t._content.pages[1].element.removeAttr("aria-hidden");return}if(t._current){d(t._current).removeClass(S).removeAttr("id");r.attr("aria-hidden",true)}a.attr("id",n).removeAttr("aria-hidden").addClass(S);t.itemsWrapper.attr("aria-activedescendant",n);t._updateAria();t._current=a},_dragStart:function(){this._content.forcePageUpdate()},_dragEnd:function(e){var t=this,i=e.x.velocity,n=this.options.velocityThreshold,r=$,a=u(i)>this.options.bounceVelocityThreshold;if(i>n){r=A}else if(i<-n){r=D}this._content.paneMoved(r,a,function(e){return t.trigger(c,e)})},_transitionEnd:function(){this._content.updatePage();if(this.options.navigatable){this._setCurrent()}},_initNavigation:function(){var e=this;var t;var i;var n=e.options.messages;var r=e._navigationContainer=d("<div class='k-scrollview-elements'></div>");if(e.options.navigatable){t=d('<a class="k-scrollview-prev" aria-label="'+n.previousButtonLabel+'"><span class="k-icon k-i-arrowhead-w"></span></a>');i=d('<a class="k-scrollview-next" aria-label="'+n.nextButtonLabel+'"><span class="k-icon k-i-arrowhead-e"></span></a>')}else{t=d('<a class="k-scrollview-prev"><span class="k-icon k-i-arrowhead-w"></span></a>');i=d('<a class="k-scrollview-next"><span class="k-icon k-i-arrowhead-e"></span></a>')}t.hide();i.hide();r.append(t);r.append(i);e.element.append(r);if(e.options.navigatable){e.ariaLiveEl=d("<div aria-live='polite' aria-atomic='true' class='k-sr-only'></div>");e.element.append(e.ariaLiveEl)}r.on(l+k,"a.k-scrollview-prev",a(e.prev,e));r.on(l+k,"a.k-scrollview-next",a(e.next,e))},_navigatable:function(){var e=this;var t=e._navigationContainer;if(!e.options.navigatable){return}e._ariaTemplate=m.template(e.options.ARIATemplate);t.find(">a.k-scrollview-prev").attr(T,0);t.find(">a.k-scrollview-next").attr(T,0);t.on(y+k,e,function(e){var t=d(e.target);if(e.keyCode==o.SPACEBAR||e.keyCode==o.ENTER){e.preventDefault();t.click()}});e.itemsWrapper.attr("aria-roledescription","carousel").attr(T,0);e.itemsWrapper.on(y+k,e,a(e._keyDown,e));e.itemsWrapper.on(x+k,a(e._focus,e));e.itemsWrapper.on(C+k,a(e._blur,e))},_focus:function(){var e=this;e._focused=true;e._setCurrent()},_blur:function(){if(this._current){this._current.removeClass(S);this._current.removeAttr("id");this.itemsWrapper.removeAttr("aria-activedescendant")}},_keyDown:function(e){var t=this;var i;var n=e.keyCode;if(n==o.LEFT){i=true;t.prev()}if(n==o.RIGHT){i=true;t.next()}if(i){e.preventDefault();e.stopPropagation()}},_toggleNavigation:function(e){var t=e.nextPage||e.nextPage===0?e.nextPage:e.currentPage;var i=this._navigationContainer;var n=i.find(">a.k-scrollview-prev");var r=i.find(">a.k-scrollview-next");n.hide();r.hide();if(t||t===0){if(t!==0){n.show()}if(t!=this._content.pageCount-1){r.show()}}}});e.plugin(X)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.splitter",["kendo.resizable"],e)})(function(){var e={id:"splitter",name:"Splitter",category:"web",description:"The Splitter widget provides an easy way to create a dynamic layout of resizable and collapsible panes.",depends:["resizable"]};(function(_,r){var b=window.kendo,e=b.ui,d=b.keys,n=_.extend,a=_.proxy,o=e.Widget,t=/^\d+(\.\d+)?px$/i,i=/^\d+(\.\d+)?%$/i,s=".kendoSplitter",u="expand",c="collapse",l="contentLoad",f="error",h="resize",w="layoutChange",k="horizontal",p="vertical",v="mouseenter",m="click",y="pane",g="mouseleave",x="k-state-focused",C="k-"+y,S="."+C;function T(e){return i.test(e)}function D(e){return t.test(e)||/^\d+$/.test(e)}function A(e){return!T(e)&&!D(e)}function E(e,t){var i=parseInt(e,10);if(T(e)){i=Math.floor(i*t/100)}return i}function I(r,a){return function(e,t){var i=this.element.find(e).data(y);if(arguments.length==1){return i[r]}i[r]=t;if(a){var n=this.element.data("kendo"+this.options.name);n.resize(true)}}}var M=o.extend({init:function(e,t){var i=this,n;o.fn.init.call(i,e,t);i.wrapper=i.element;if(i.options.orientation){n=i.options.orientation.toLowerCase()!=p}i.orientation=n?k:p;i._dimension=n?"width":"height";i._keys={decrease:n?d.LEFT:d.UP,increase:n?d.RIGHT:d.DOWN};i._resizeStep=10;i._marker=b.guid().substring(0,8);i._initPanes();i.resizing=new P(i);i.element.triggerHandler("init"+s)},events:[u,c,l,f,h,w],_addOverlays:function(){this._panes().append("<div class='k-splitter-overlay k-overlay' />")},_removeOverlays:function(){this._panes().children(".k-splitter-overlay").remove()},_attachEvents:function(){var t=this,e=t.options.orientation;t.element.children(".k-splitbar-draggable-"+e).on("keydown"+s,a(t._keydown,t)).on("mousedown"+s,function(e){e.currentTarget.focus()}).on("focus"+s,function(e){_(e.currentTarget).addClass(x)}).on("blur"+s,function(e){_(e.currentTarget).removeClass(x);if(t.resizing){t.resizing.end()}}).on(v+s,function(){_(this).addClass("k-splitbar-"+t.orientation+"-hover")}).on(g+s,function(){_(this).removeClass("k-splitbar-"+t.orientation+"-hover")}).on("mousedown"+s,a(t._addOverlays,t)).end().children(".k-splitbar").on("dblclick"+s,a(t._togglePane,t)).children(".k-collapse-next, .k-collapse-prev").on(m+s,t._arrowClick(c)).end().children(".k-expand-next, .k-expand-prev").on(m+s,t._arrowClick(u)).end().end();_(window).on("resize"+s+t._marker,a(t.resize,t,false));_(document).on("mouseup"+s+t._marker,a(t._removeOverlays,t))},_detachEvents:function(){var e=this;e.element.children(".k-splitbar-draggable-"+e.orientation).off(s).end().children(".k-splitbar").off("dblclick"+s).children(".k-collapse-next, .k-collapse-prev, .k-expand-next, .k-expand-prev").off(s);_(window).off(s+e._marker);_(document).off(s+e._marker)},options:{name:"Splitter",orientation:k,panes:[]},destroy:function(){o.fn.destroy.call(this);this._detachEvents();if(this.resizing){this.resizing.destroy()}b.destroy(this.element);this.wrapper=this.element=null},_keydown:function(e){var t=this,i=e.keyCode,n=t.resizing,r=_(e.currentTarget),a=t._keys,o=i===a.increase,s=i===a.decrease,l;if(o||s){if(e.ctrlKey){l=r[s?"next":"prev"]();if(n&&n.isResizing()){n.end()}if(!l[t._dimension]()){t._triggerAction(u,l)}else{t._triggerAction(c,r[s?"prev":"next"]())}}else if(n){n.move((s?-1:1)*t._resizeStep,r)}e.preventDefault()}else if(i===d.HOME){n.move(-n._maxPosition,r);e.preventDefault()}else if(i===d.END){n.move(n._maxPosition,r);e.preventDefault()}else if(i===d.ENTER&&n){n.end();e.preventDefault()}},_initPanes:function(){var i=this.options.panes||[];var n=this;this.element.addClass("k-widget").addClass("k-splitter").children().each(function(e,t){if(t.nodeName.toLowerCase()!="script"){n._initPane(t,i[e])}});this.resize()},_initPane:function(e,t){e=_(e).attr("role","group").addClass(C);e.data(y,t?t:{}).toggleClass("k-scrollable",t?t.scrollable!==false:true);this.ajaxRequest(e)},ajaxRequest:function(i,e,t){var n=this,r;i=n.element.find(i);r=i.data(y);e=e||r.contentUrl;if(e){i.append("<span class='k-icon k-i-loading k-pane-loading' />");if(b.isLocalUrl(e)){jQuery.ajax({url:e,data:t||{},type:"GET",dataType:"html",success:function(e){n.angular("cleanup",function(){return{elements:i.get()}});i.html(e);n.angular("compile",function(){return{elements:i.get()}});n.trigger(l,{pane:i[0]})},error:function(e,t){n.trigger(f,{pane:i[0],status:t,xhr:e})}})}else{i.removeClass("k-scrollable").html("<iframe src='"+e+"' frameborder='0' class='k-content-frame'>"+"This page requires frames in order to show content"+"</iframe>")}}},_triggerAction:function(e,t){if(!this.trigger(e,{pane:t[0]})){this[e](t[0])}},_togglePane:function(e){var t=this,i=_(e.target),n;if(i.closest(".k-splitter")[0]!=t.element[0]){return}n=i.children(".k-icon:not(.k-resize-handle)");if(n.length!==1){return}if(n.is(".k-collapse-prev")){t._triggerAction(c,i.prev())}else if(n.is(".k-collapse-next")){t._triggerAction(c,i.next())}else if(n.is(".k-expand-prev")){t._triggerAction(u,i.prev())}else if(n.is(".k-expand-next")){t._triggerAction(u,i.next())}},_arrowClick:function(n){var r=this;return function(e){var t=_(e.target),i;if(t.closest(".k-splitter")[0]!=r.element[0]){return}if(t.is(".k-"+n+"-prev")){i=t.parent().prev()}else{i=t.parent().next()}r._triggerAction(n,i)}},_updateSplitBar:function(e,t,i){var n=function(e,t){return t?"<div class='k-icon "+e+"'></div>":""},r=this.orientation,a=t.resizable!==false&&i.resizable!==false,o=t.collapsible,s=t.collapsed,l=i.collapsible,d=i.collapsed;e.addClass("k-splitbar k-state-default k-splitbar-"+r).attr("role","separator").attr("aria-expanded",!(s||d)).removeClass("k-splitbar-"+r+"-hover").toggleClass("k-splitbar-draggable-"+r,a&&!s&&!d).toggleClass("k-splitbar-static-"+r,!a&&!o&&!l).html(n("k-collapse-prev k-i-arrow-60-up",o&&!s&&!d&&r==p)+n("k-collapse-prev k-i-arrow-60-left",o&&!s&&!d&&r==k)+n("k-expand-prev k-i-arrow-60-down",o&&s&&!d&&r==p)+n("k-expand-prev k-i-arrow-60-right",o&&s&&!d&&r==k)+n("k-resize-handle k-i-hbar",a&&r==p)+n("k-resize-handle k-i-vbar",a&&r==k)+n("k-collapse-next k-i-arrow-60-down",l&&!d&&!s&&r==p)+n("k-collapse-next k-i-arrow-60-right",l&&!d&&!s&&r==k)+n("k-expand-next k-i-arrow-60-up",l&&d&&!s&&r==p)+n("k-expand-next k-i-arrow-60-left",l&&d&&!s&&r==k));if(!a&&!o&&!l){e.removeAttr("tabindex")}},_updateSplitBars:function(){var n=this;this.element.children(".k-splitbar").each(function(){var e=_(this),t=e.prevAll(S).first().data(y),i=e.nextAll(S).first().data(y);if(!i){return}n._updateSplitBar(e,t,i)})},_removeSplitBars:function(){this.element.children(".k-splitbar").remove()},_panes:function(){if(!this.element){return _()}return this.element.children(S)},_resize:function(){var e=this,t=e.element,i=t.children(S),n=e.orientation==k,r=t.children(".k-splitbar"),a=r.length,o=n?"width":"height",s=t[o]();e.wrapper.addClass("k-splitter-resizing");if(a===0){a=i.length-1;i.slice(0,a).after("<div tabindex='0' class='k-splitbar' data-marker='"+e._marker+"' />");e._updateSplitBars();r=t.children(".k-splitbar")}else{e._updateSplitBars()}r.each(function(){s-=this[n?"offsetWidth":"offsetHeight"]});var l=0,d=0,u=_();i.css({position:"absolute",top:0})[o](function(){var e=_(this),t=e.data(y)||{},i;e.removeClass("k-state-collapsed");if(t.collapsed){i=t.collapsedSize?E(t.collapsedSize,s):0;e.css("overflow","hidden").addClass("k-state-collapsed")}else if(A(t.size)){u=u.add(this);return}else{i=E(t.size,s)}d++;l+=i;return i});s-=l;var c=u.length,f=Math.floor(s/c);u.slice(0,c-1).css(o,f).end().eq(c-1).css(o,s-(c-1)*f);var h=0,p=n?"height":"width",v=n?"left":"top",m=n?"offsetWidth":"offsetHeight";if(c===0){var g=i.filter(function(){return!(_(this).data(y)||{}).collapsed}).last();g[o](s+g[0][m])}t.children().css(p,t[p]()).each(function(e,t){if(t.tagName.toLowerCase()!="script"){t.style[v]=Math.floor(h)+"px";h+=t[m]}});e._detachEvents();e._attachEvents();e.wrapper.removeClass("k-splitter-resizing");b.resize(i);e.trigger(w)},toggle:function(e,t){var i=this,n;e=i.element.find(e);n=e.data(y);if(!t&&!n.collapsible){return}if(arguments.length==1){t=n.collapsed===r?false:n.collapsed}n.collapsed=!t;if(n.collapsed){e.css("overflow","hidden")}else{e.css("overflow","")}i.resize(true)},collapse:function(e){this.toggle(e,false)},expand:function(e){this.toggle(e,true)},_addPane:function(e,t,i){var n=this;if(i.length){n.options.panes.splice(t,0,e);n._initPane(i,e);n._removeSplitBars();n.resize(true)}return i},append:function(e){e=e||{};var t=this,i=_("<div />").appendTo(t.element);return t._addPane(e,t.options.panes.length,i)},insertBefore:function(e,t){t=_(t);e=e||{};var i=this,n=i.wrapper.children(".k-pane").index(t),r=_("<div />").insertBefore(_(t));return i._addPane(e,n,r)},insertAfter:function(e,t){t=_(t);e=e||{};var i=this,n=i.wrapper.children(".k-pane").index(t),r=_("<div />").insertAfter(_(t));return i._addPane(e,n+1,r)},remove:function(e){var i=this;e=i.wrapper.find(e);if(e.length){b.destroy(e);e.each(function(e,t){i.options.panes.splice(i.wrapper.children(".k-pane").index(t),1);_(t).remove()});i._removeSplitBars();if(i.options.panes.length){i.resize(true)}}return i},size:I("size",true),min:I("min"),max:I("max")});e.plugin(M);var R={sizingProperty:"height",sizingDomProperty:"offsetHeight",alternateSizingProperty:"width",positioningProperty:"top",mousePositioningProperty:"pageY"};var F={sizingProperty:"width",sizingDomProperty:"offsetWidth",alternateSizingProperty:"height",positioningProperty:"left",mousePositioningProperty:"pageX"};function P(e){var t=this,i=e.orientation;t.owner=e;t._element=e.element;t.orientation=i;n(t,i===k?F:R);t._resizable=new b.ui.Resizable(e.element,{orientation:i,handle:".k-splitbar-draggable-"+i+"[data-marker="+e._marker+"]",hint:a(t._createHint,t),start:a(t._start,t),max:a(t._max,t),min:a(t._min,t),invalidClass:"k-restricted-size-"+i,resizeend:a(t._stop,t)})}P.prototype={press:function(e){this._resizable.press(e)},move:function(e,t){if(!this.pressed){this.press(t);this.pressed=true}if(!this._resizable.target){this._resizable.press(t)}this._resizable.move(e)},end:function(){this._resizable.end();this.pressed=false},destroy:function(){this._resizable.destroy();this._resizable=this._element=this.owner=null},isResizing:function(){return this._resizable.resizing},_createHint:function(e){var t=this;return _("<div class='k-ghost-splitbar k-ghost-splitbar-"+t.orientation+" k-state-default' />").css(t.alternateSizingProperty,e[t.alternateSizingProperty]())},_start:function(e){var t=this,i=_(e.currentTarget),n=i.prev(),r=i.next(),a=n.data(y),o=r.data(y),s=parseInt(n[0].style[t.positioningProperty],10),l=parseInt(r[0].style[t.positioningProperty],10)+r[0][t.sizingDomProperty]-i[0][t.sizingDomProperty],d=parseInt(t._element.css(t.sizingProperty),10),u=function(e){var t=parseInt(e,10);return(D(e)?t:d*t/100)||0},c=u(a.min),f=u(a.max)||l-s,h=u(o.min),p=u(o.max)||l-s;t.previousPane=n;t.nextPane=r;t._maxPosition=Math.min(l-h,s+f);t._minPosition=Math.max(s+c,l-p)},_max:function(){return this._maxPosition},_min:function(){return this._minPosition},_stop:function(e){var t=this,i=_(e.currentTarget),n=t.owner;n._panes().children(".k-splitter-overlay").remove();if(e.keyCode!==b.keys.ESC){var r=e.position,a=i.prev(),o=i.next(),s=a.data(y),l=o.data(y),d=r-parseInt(a[0].style[t.positioningProperty],10),u=parseInt(o[0].style[t.positioningProperty],10)+o[0][t.sizingDomProperty]-r-i[0][t.sizingDomProperty],c=t._element.children(S).filter(function(){return A(_(this).data(y).size)}).length;if(!A(s.size)||c>1){if(A(s.size)){c--}s.size=d+"px"}if(!A(l.size)||c>1){l.size=u+"px"}n.resize(true)}return false}}})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.scheduler.view",["kendo.core"],e)})(function(){var e={id:"scheduler.view",name:"Scheduler View",category:"web",description:"The Scheduler Common View",depends:["core"],hidden:true};kendo.ui.scheduler={};(function(p){var v=window.kendo,e=v.ui,i=v.date.getDate,n=e.Widget,f=v._outerHeight,h=v.keys,r=".kendoSchedulerView",a="k-event-inverse",s=1024,t=Math;function l(e,r){var a=[];function o(e,t){t=t[r];if(t){var i=a[e]=a[e]||[];for(var n=0;n<t.length;n++){i.push(t[n]);o(e+1,t[n])}}}o(0,e);return a}function m(e,t){if(!e.length){return""}return'<table role="presentation" class="'+v.trim("k-scheduler-table "+(t||""))+'">'+"<tr>"+e.join("</tr><tr>")+"</tr>"+"</table>"}function g(e,t){if(!e.length){return""}return"<div style='position:relative'>"+m(e,t)+"</div>"}function o(e,t,i){var n=[];if(i>0){for(var r=0;r<e;r++){n.push("<th>&#8203;</th>")}}if(t){n.push('<th class="k-scheduler-times-all-day">'+t.text+"</th>")}if(i<1){return p()}return p('<div class="k-scheduler-times">'+m(n)+"</div>")}function d(e,t,i){var n=[];var r;for(var a=0;a<e.length;a++){var o=e[a];var s=[];var l=t/o.length;for(r=0;r<o.length;r++){var d=o[r];s.push('<th colspan="'+(d.colspan||l)+'" class="'+(d.className||"")+'">'+d.text+"</th>")}n.push(s.join(""))}var u=[];if(i){var c=e[e.length-1];var f=[];var h=i.cellContent;for(r=0;r<c.length;r++){f.push('<td class="'+(c[r].className||"")+'">'+(h?h(r):"&nbsp;")+"</td>")}u.push(f.join(""))}return p('<div class="k-scheduler-header k-state-default">'+'<div class="k-scheduler-header-wrap">'+m(n)+g(u,"k-scheduler-header-all-day")+"</div>"+"</div>")}function u(e,t,i){var n=new Array(t).join().split(",");var r=[];var a;for(var o=0;o<e.length;o++){var s=e[o];var l=t/s.length;var d;var u;for(a=0;a<s.length;a++){d=s[a].className||"";u=s[a].text;if(s[a].allDay){d="k-scheduler-times-all-day"}if(i&&d.indexOf("k-scheduler-group-cell")!==-1){u='<span class="k-scheduler-group-text">'+u+"</span>"}n[l*a]+='<th class="'+d+'" rowspan="'+l+'">'+u+"</th>"}}for(a=0;a<t;a++){r.push(n[a])}if(t<1){return p()}return p('<div class="k-scheduler-times">'+m(r)+"</div>")}function c(){return p('<div class="k-scheduler-content">'+'<table role="presentation" class="k-scheduler-table"></table>'+"</div>")}var _='<div class="k-marquee k-scheduler-marquee">'+'<div class="k-marquee-color"></div>'+'<div class="k-marquee-text">'+'<div class="k-label-top"></div>'+'<div class="k-label-bottom"></div>'+"</div>"+"</div>";var b=v.Class.extend({init:function(e,t){this._index=e;this._timeSlotCollections=[];this._daySlotCollections=[];this._isRtl=t},addTimeSlotCollection:function(e,t){return this._addCollection(e,t,this._timeSlotCollections)},addDaySlotCollection:function(e,t){return this._addCollection(e,t,this._daySlotCollections)},_addCollection:function(e,t,i){var n=new x(e,t,this._index,i.length);i.push(n);return n},timeSlotCollectionCount:function(){return this._timeSlotCollections.length},daySlotCollectionCount:function(){return this._daySlotCollections.length},daySlotByPosition:function(e,t,i){return this._slotByPosition(e,t,this._daySlotCollections,i)},timeSlotByPosition:function(e,t,i){return this._slotByPosition(e,t,this._timeSlotCollections,i)},_slotByPosition:function(e,t,i,n){for(var r=0;r<i.length;r++){var a=i[r];for(var o=0;o<a.count();o++){var s=a.at(o);var l=s.offsetWidth;var d=s.offsetHeight;var u;var c=s.offsetLeft+l;var f=s.offsetTop+d;if(!n){u=a.at(o+1)}if(u){if(u.offsetLeft!=s.offsetLeft){if(this._isRtl){c=s.offsetLeft+(s.offsetLeft-u.offsetLeft)}else{c=u.offsetLeft}}else{f=u.offsetTop}}if(e>=s.offsetLeft&&e<c&&t>=s.offsetTop&&t<f){return s}}}},refresh:function(){var e;for(e=0;e<this._daySlotCollections.length;e++){this._daySlotCollections[e].refresh()}for(e=0;e<this._timeSlotCollections.length;e++){this._timeSlotCollections[e].refresh()}},timeSlotRanges:function(e,t){var i=this._timeSlotCollections;var n=this._startSlot(e,i);if(!n.inRange&&e>=n.slot.end){n=null}var r=n;if(e<t){r=this._endSlot(t,i)}if(r&&!r.inRange&&t<=r.slot.start){r=null}if(n===null&&r===null){return[]}if(n===null){if(r.slot.end<=e){return[]}n={inRange:true,slot:i[r.slot.collectionIndex].first()}}if(r===null){if(n.slot.start>=t){return[]}r={inRange:true,slot:i[n.slot.collectionIndex].last()}}return this._continuousRange(k,i,n,r)},daySlotRanges:function(e,t,i){var n=this._daySlotCollections;var r=this._startSlot(e,n,i);if(!r.inRange&&e>=r.slot.end){r=null}var a=r;if(e<t){a=this._endSlot(t,n,i)}if(a&&!a.inRange&&t<=a.slot.start){a=null}if(r===null&&a===null){return[]}if(r===null){if(a.slot.end<=e){return[]}do{e+=v.date.MS_PER_DAY;r=this._startSlot(e,n,i)}while(!r.inRange&&e>=r.slot.end)}if(a===null){if(r.slot.start>=t){return[]}do{t-=v.date.MS_PER_DAY;a=this._endSlot(t,n,i)}while(!a.inRange&&t<=a.slot.start)}return this._continuousRange(y,n,r,a)},_continuousRange:function(e,t,i,n){var r=i.slot;var a=n.slot;var o=r.collectionIndex;var s=a.collectionIndex;var l=[];for(var d=o;d<=s;d++){var u=t[d];var c=u.first();var f=u.last();var h=false;var p=false;if(d==o){p=!i.inRange}if(d==s){h=!n.inRange}if(c.start<r.start){c=r}if(f.start>a.start){f=a}if(o<s){if(d==o){h=true}else if(d==s){p=true}else{h=p=true}}l.push(new e({start:c,end:f,collection:u,head:h,tail:p}))}return l},slotRanges:function(e,t){var i=e._startTime||v.date.toUtcTime(e.start);var n=e._endTime||v.date.toUtcTime(e.end);if(t===undefined){t=e.isMultiDay()}if(t){return this.daySlotRanges(i,n,e.isAllDay)}return this.timeSlotRanges(i,n)},ranges:function(e,t,i,n){if(typeof e!="number"){e=v.date.toUtcTime(e)}if(typeof t!="number"){t=v.date.toUtcTime(t)}if(i){return this.daySlotRanges(e,t,n)}return this.timeSlotRanges(e,t)},_startCollection:function(e,t){for(var i=0;i<t.length;i++){var n=t[i];if(n.startInRange(e)){return n}}return null},_endCollection:function(e,t,i){for(var n=0;n<t.length;n++){var r=t[n];if(r.endInRange(e,i)){return r}}return null},_getCollections:function(e){return e?this._daySlotCollections:this._timeSlotCollections},continuousSlot:function(e,t){var i=t?-1:1;var n=this._getCollections(e.isDaySlot);var r=n[e.collectionIndex+i];return r?r[t?"last":"first"]():undefined},firstSlot:function(){var e=this._getCollections(this.daySlotCollectionCount());return e[0].first()},lastSlot:function(){var e=this._getCollections(this.daySlotCollectionCount());return e[e.length-1].last()},upSlot:function(e,r,t){var a=this;var i=function(e,t,i){var n=i===0;if(!r&&!e&&n&&a.daySlotCollectionCount()){return a._daySlotCollections[0].at(t)}};if(!this.timeSlotCollectionCount()){r=true}return this._verticalSlot(e,-1,i,t)},downSlot:function(e,n,t){var r=this;var i=function(e,t,i){if(!n&&e&&r.timeSlotCollectionCount()){return r._timeSlotCollections[i].at(0)}};if(!this.timeSlotCollectionCount()){n=true}return this._verticalSlot(e,1,i,t)},leftSlot:function(e,t){return this._horizontalSlot(e,-1,t)},rightSlot:function(e,t){return this._horizontalSlot(e,1,t)},_horizontalSlot:function(e,t,i){var n=e.index;var r=e.isDaySlot;var a=e.collectionIndex;var o=this._getCollections(r);r=i?false:r;if(r){n+=t}else{a+=t}var s=o[a];return s?s.at(n):undefined},_verticalSlot:function(e,t,i,n){var r=e.index;var a=e.isDaySlot;var o=e.collectionIndex;var s=this._getCollections(a);e=i(a,o,r);if(e){return e}a=n?false:a;if(a){o+=t}else{r+=t}var l=s[o];return l?l.at(r):undefined},_collection:function(e,t){var i=t?this._daySlotCollections:this._timeSlotCollections;return i[e]},_startSlot:function(e,t,i){var n=this._startCollection(e,t);var r=true;if(!n){n=t[0];r=false}var a=n.slotByStartDate(e,i);if(!a){a=n.first();r=false}return{slot:a,inRange:r}},_endSlot:function(e,t,i){var n=this._endCollection(e,t,i);var r=true;if(!n){n=t[t.length-1];r=false}var a=n.slotByEndDate(e,i);if(!a){a=n.last();r=false}return{slot:a,inRange:r}},getSlotCollection:function(e,t){return this[t?"getDaySlotCollection":"getTimeSlotCollection"](e)},getTimeSlotCollection:function(e){return this._timeSlotCollections[e]},getDaySlotCollection:function(e){return this._daySlotCollections[e]}});var w=v.Class.extend({init:function(e){p.extend(this,e)},innerHeight:function(){var e=this.collection;var t=this.start.index;var i=this.end.index;var n=0;for(var r=t;r<=i;r++){n+=e.at(r).offsetHeight}return n},events:function(){return this.collection.events()},addEvent:function(e){this.events().push(e)},startSlot:function(){if(this.start.offsetLeft>this.end.offsetLeft){return this.end}return this.start},endSlot:function(){if(this.start.offsetLeft>this.end.offsetLeft){return this.start}return this.end}});var k=w.extend({innerHeight:function(){var e=this.collection;var t=this.start.index;var i=this.end.index;var n=0;for(var r=t;r<=i;r++){n+=e.at(r).offsetHeight}return n},outerRect:function(e,t,i){return this._rect("offset",e,t,i)},_rect:function(e,t,i,n){var r;var a;var o;var s;var l=this.start;var d=this.end;var u=v.support.isRtl(l.element);if(typeof t!="number"){t=v.date.toUtcTime(t)}if(typeof i!="number"){i=v.date.toUtcTime(i)}if(n){r=l.offsetTop;a=d.offsetTop+d[e+"Height"];if(u){o=d.offsetLeft;s=l.offsetLeft+l[e+"Width"]}else{o=l.offsetLeft;s=d.offsetLeft+d[e+"Width"]}}else{var c=t-l.start;if(c<0){c=0}var f=l.end-l.start;r=l.offsetTop+l[e+"Height"]*c/f;var h=d.end-i;if(h<0){h=0}var p=d.end-d.start;a=d.offsetTop+d[e+"Height"]-d[e+"Height"]*h/p;if(u){o=Math.round(d.offsetLeft+d[e+"Width"]*h/p);s=Math.round(l.offsetLeft+l[e+"Width"]-l[e+"Width"]*c/f)}else{o=Math.round(l.offsetLeft+l[e+"Width"]*c/f);s=Math.round(d.offsetLeft+d[e+"Width"]-d[e+"Width"]*h/p)}}return{top:r,bottom:a,left:o===0?o:o+1,right:s}},innerRect:function(e,t,i){return this._rect("client",e,t,i)}});var y=w.extend({innerWidth:function(){var e=this.collection;var t=this.start.index;var i=this.end.index;var n=0;var r=t!==i?"offsetWidth":"clientWidth";for(var a=t;a<=i;a++){n+=e.at(a)[r]}return n}});var x=v.Class.extend({init:function(e,t,i,n){this._slots=[];this._events=[];this._start=v.date.toUtcTime(e);this._end=v.date.toUtcTime(t);this._groupIndex=i;this._collectionIndex=n},refresh:function(){for(var e=0;e<this._slots.length;e++){this._slots[e].refresh()}},startInRange:function(e){return this._start<=e&&e<this._end},endInRange:function(e,t){var i=t?e<this._end:e<=this._end;return this._start<=e&&i},slotByStartDate:function(e){var t=e;if(typeof t!="number"){t=v.date.toUtcTime(e)}for(var i=0;i<this._slots.length;i++){var n=this._slots[i];if(n.startInRange(t)){return n}}return null},slotByEndDate:function(e,t){var i=e;if(typeof i!="number"){i=v.date.toUtcTime(e)}if(t){return this.slotByStartDate(e,false)}for(var n=0;n<this._slots.length;n++){var r=this._slots[n];if(r.endInRange(i)){return r}}return null},count:function(){return this._slots.length},events:function(){return this._events},addTimeSlot:function(e,t,i,n){var r=new S(e,t,i,this._groupIndex,this._collectionIndex,this._slots.length,n);this._slots.push(r)},addDaySlot:function(e,t,i,n){var r=new T(e,t,i,this._groupIndex,this._collectionIndex,this._slots.length,n);this._slots.push(r)},first:function(){return this._slots[0]},last:function(){return this._slots[this._slots.length-1]},at:function(e){return this._slots[e]}});var C=v.Class.extend({init:function(e,t,i,n,r,a){this.element=e;this.clientWidth=e.clientWidth;this.clientHeight=e.clientHeight;this.offsetWidth=e.offsetWidth;this.offsetHeight=e.offsetHeight;this.offsetTop=e.offsetTop;this.offsetLeft=e.offsetLeft;this.start=t;this.end=i;this.element=e;this.groupIndex=n;this.collectionIndex=r;this.index=a;this.isDaySlot=false},refresh:function(){var e=this.element;this.clientWidth=e.clientWidth;this.clientHeight=e.clientHeight;this.offsetWidth=e.offsetWidth;this.offsetHeight=e.offsetHeight;this.offsetTop=e.offsetTop;this.offsetLeft=e.offsetLeft},startDate:function(){return v.timezone.toLocalDate(this.start)},endDate:function(){return v.timezone.toLocalDate(this.end)},startInRange:function(e){return this.start<=e&&e<this.end},endInRange:function(e){return this.start<e&&e<=this.end},startOffset:function(){return this.start},endOffset:function(){return this.end}});var S=C.extend({init:function(e,t,i,n,r,a,o){C.fn.init.apply(this,arguments);this.isHorizontal=o?true:false},offsetX:function(e,t){if(e){return this.offsetLeft+t}else{return this.offsetLeft+t}},startInRange:function(e){return this.start<=e&&e<this.end},endInRange:function(e){return this.start<e&&e<=this.end},startOffset:function(e,t,i){if(i){return this.start}var n=p(this.element).offset();var r=this.end-this.start;var a;var o;if(this.isHorizontal){var s=v.support.isRtl(this.element);a=e-n.left;o=Math.floor(r*(a/this.offsetWidth));if(s){return this.start+r-o}}else{a=t-n.top;o=Math.floor(r*(a/this.offsetHeight))}return this.start+o},endOffset:function(e,t,i){if(i){return this.end}var n=p(this.element).offset();var r=this.end-this.start;var a;var o;if(this.isHorizontal){var s=v.support.isRtl(this.element);a=e-n.left;o=Math.floor(r*(a/this.offsetWidth));if(s){return this.start+r-o}}else{a=t-n.top;o=Math.floor(r*(a/this.offsetHeight))}return this.start+o}});var T=C.extend({init:function(e,t,i,n,r,a,o){C.fn.init.apply(this,arguments);this.eventCount=o;this.isDaySlot=true;if(this.element.children.length){var s=this.element.children[0];this.firstChildHeight=s.offsetHeight;this.firstChildTop=s.offsetTop}else{this.firstChildHeight=3;this.firstChildTop=0}},startDate:function(){var e=new Date(this.start);return v.timezone.apply(e,"Etc/UTC")},endDate:function(){var e=new Date(this.end);return v.timezone.apply(e,"Etc/UTC")},startInRange:function(e){return this.start<=e&&e<this.end},endInRange:function(e){return this.start<e&&e<=this.end}});var D;function A(){D=D?D:v.support.scrollbar();return D}v.ui.SchedulerView=n.extend({init:function(e,t){n.fn.init.call(this,e,t);this._normalizeOptions();this._scrollbar=A();this._isRtl=v.support.isRtl(e);this._resizeHint=p();this._moveHint=p();this._cellId=v.guid();this._resourcesForGroups();this._selectedSlots=[]},visibleEndDate:function(){return this.endDate()},_normalizeOptions:function(){var e=this.options;if(e.startTime){e.startTime.setMilliseconds(0)}if(e.endTime){e.endTime.setMilliseconds(0)}if(e.workDayStart){e.workDayStart.setMilliseconds(0)}if(e.workDayEnd){e.workDayEnd.setMilliseconds(0)}},_isMobile:function(){var e=this.options;return e.mobile===true&&v.support.mobileOS||e.mobile==="phone"||e.mobile==="tablet"},_addResourceView:function(){var e=new b(this.groups.length,this._isRtl);this.groups.push(e);return e},dateForTitle:function(){return v.format(this.options.selectedDateFormat,this.startDate(),this.endDate())},shortDateForTitle:function(){return v.format(this.options.selectedShortDateFormat,this.startDate(),this.endDate())},mobileDateForTitle:function(){return v.format(this.options.selectedMobileDateFormat||this.options.selectedShortDateFormat,this.startDate(),this.endDate())},_changeGroup:function(e,t){var i=t?"prevGroupSlot":"nextGroupSlot";var n=this[i](e.start,e.groupIndex,e.isAllDay);if(n){e.groupIndex+=t?-1:1}if(this._isGroupedByDate()&&!n){e.groupIndex=t?this.groups.length-1:0}return n},_changeDate:function(e,t,i){var n=this.groups[e.groupIndex];var r,a;if(i){r=n._getCollections(false);a=n.daySlotCollectionCount()?t.index-1:t.collectionIndex-1;if(a>=0){return r[a]._slots[r[a]._slots.length-1]}}else{r=n._getCollections(n.daySlotCollectionCount());a=n.daySlotCollectionCount()?0:t.collectionIndex+1;var o=n.daySlotCollectionCount()?t.collectionIndex+1:0;if(r[a]&&r[a]._slots[o]){return r[a]._slots[o]}}},_changeGroupContinuously:function(){return null},_changeViewPeriod:function(){return false},_isInRange:function(e,t){if(!e||!t||!this.options.min||!this.options.max){return false}return i(e)<=i(this.options.min)||i(t)>=i(this.options.max)},_horizontalSlots:function(e,t,i,n){var r=n?"leftSlot":"rightSlot";var a={startSlot:t[0].start,endSlot:t[t.length-1].end};var o=this.groups[e.groupIndex];var s=this._isVerticallyGrouped();if(!i){var l=this._normalizeHorizontalSelection(e,t,n);if(l){a.startSlot=a.endSlot=l}}if(this._isGroupedByDate()&&!i){var d=this._changeGroup(e,n);if(!d){a=this._getNextHorizontalRange(o,r,a)}else{a.startSlot=a.endSlot=d}}else{a.startSlot=o[r](a.startSlot);a.endSlot=o[r](a.endSlot);if(!i&&!s&&(!a.startSlot||!a.endSlot)){a.startSlot=a.endSlot=this._changeGroup(e,n)}}var u;if((!a.startSlot||!a.endSlot)&&!this._isGroupedByDate()){u=this._continuousSlot(e,t,n);u=this._changeGroupContinuously(e,u,i,n);if(u){a.startSlot=a.endSlot=u}}return a},_getNextHorizontalRange:function(e,t,i){if(!this._isVerticallyGrouped()){i.startSlot=e[t](i.startSlot);i.endSlot=e[t](i.endSlot)}return i},_verticalSlots:function(e,t,i,n){var r=this.groups[e.groupIndex];var a;var o={startSlot:t[0].start,endSlot:t[t.length-1].end};if(!i){a=this._normalizeVerticalSelection(e,t,n);if(a){o.startSlot=o.endSlot=a}}var s=n?"upSlot":"downSlot";o=this._getNextVerticalRange(r,s,o,i);if(!i&&this._isVerticallyGrouped()&&(!o.startSlot||!o.endSlot)){if(this._isGroupedByDate()){o.startSlot=o.endSlot=this._changeDate(e,a,n)}else{o.startSlot=o.endSlot=this._changeGroup(e,n)}}return o},_getNextVerticalRange:function(e,t,i,n){i.startSlot=e[t](i.startSlot,n);i.endSlot=e[t](i.endSlot,n);return i},_normalizeHorizontalSelection:function(){return null},_normalizeVerticalSelection:function(e,t,i){var n;if(i){n=t[0].start}else{n=t[t.length-1].end}return n},_continuousSlot:function(){return null},_footer:function(){var o=this;var s=o.options;if(o._isMobile()){var e='<div class="k-scheduler-footer k-toolbar">';e+='<span class="k-state-default k-scheduler-today"><a href="#" class="k-link">';e+=s.messages.today+"</a></span>";e+="</div>";o.footer=p(e).appendTo(o.element)}if(o.footer){o.footer.on("click"+r,".k-scheduler-today",function(e){e.preventDefault();var t=o.options.timezone;var i="today";var n=new Date;var r;if(t){var a=v.timezone.offset(n,t);r=v.timezone.convert(n,n.getTimezoneOffset(),a)}else{r=n}o.trigger("navigate",{view:o.name||s.name,action:i,date:r})})}},constrainSelection:function(e){var t=this.groups[0];var i;if(!this.inRange(e)){i=t.firstSlot();e.isAllDay=i.isDaySlot;e.start=i.startDate();e.end=i.endDate()}else{if(!t.daySlotCollectionCount()){e.isAllDay=false}else if(!t.timeSlotCollectionCount()){e.isAllDay=true}}if(!this.groups[e.groupIndex]){e.groupIndex=0}},move:function(e,t,i){var n=false;var r=this.groups[e.groupIndex];var a=this._isGroupedByDate()&&this._isVerticallyGrouped();if(!r.timeSlotCollectionCount()){e.isAllDay=true}var o=r.ranges(e.start,e.end,e.isAllDay,false);var s,l,d,u;if(t===h.DOWN||t===h.UP){n=true;d=t===h.UP;this._updateDirection(e,o,i,d,true);u=this._verticalSlots(e,o,i,d);if(!u.startSlot&&!i&&this._changeViewPeriod(e,d,!a)){return n}}else if(t===h.LEFT||t===h.RIGHT){n=true;d=t===h.LEFT;this._updateDirection(e,o,i,d,false);u=this._horizontalSlots(e,o,i,d);if(!u.startSlot&&!i&&this._changeViewPeriod(e,d,a)){return n}}if(n){s=u.startSlot;l=u.endSlot;if(i){var c=e.backward;if(c&&s){e.start=s.startDate()}else if(!c&&l){e.end=l.endDate()}}else if(s&&l){e.isAllDay=s.isDaySlot;e.start=s.startDate();e.end=l.endDate()}e.events=[]}return n},moveToEventInGroup:function(e,t,i,n){var r=e._continuousEvents||[];var a,o;var s=n?-1:1;var l=r.length;var d=n?l-1:0;if(i.length){var u=i[i.length-1];for(var c=0;c<r.length;c++){if(r[c].uid===u){d=c+s}}}while(d<l&&d>-1){o=r[d];if(!n&&o.start.startDate()>=t.startDate()||n&&o.start.startDate()<=t.startDate()){if(o&&p.inArray(o.uid,i)===-1){a=!!o;break}}d+=s}return o},moveToEvent:function(e,t){var i=e.groupIndex;var n=this.groups[i];var r=n.ranges(e.start,e.end,e.isAllDay,false)[0].start;var a=this.groups.length;var o=t?-1:1;var s=e.events;var l;if(this._isGroupedByDate()){var d=this._getAllEvents();var u=this._getUniqueEvents(d);var c=this._getSortedEvents(u);if(s.length===0){var f=this._getNextEventIndexBySlot(r,c,i);if(t){f--}l=c[f]}else{var h=this._getStartIdx(s,c);while(h<c.length&&h>-1){if(s.length>0){r=this._getSelectedSlot(r,c,l,h,o,t)}if(!r){break}if(!t&&c[h].start.startDate()>=r.startDate()||t&&c[h].start.startDate()<=r.startDate()){if(s[0]!=c[h].uid){l=c[h];break}}h+=o}}}else{while(i<a&&i>-1){l=this.moveToEventInGroup(n,r,s,t);i+=o;n=this.groups[i];if(!n||l){break}s=[];if(t){r=n.lastSlot()}else{r=n.firstSlot(true)}}}if(l){e.events=[l.uid];e.start=l.start.startDate();e.end=l.end.endDate();e.isAllDay=l.start.isDaySlot;e.groupIndex=l.start.groupIndex}return!!l},current:function(e){if(e!==undefined){this._current=e;if(this.content.has(e)){this._scrollTo(e,this.content[0])}}else{return this._current}},select:function(e){this.clearSelection();if(!this._selectEvents(e)){this._selectSlots(e)}},_getNextEventIndexBySlot:function(e,t,i){var n=0;var r=v.date.getDate(e.startDate());for(var a=0;a<t.length;a++){var o=v.date.getDate(t[a].start.startDate());if(r>o){n++;continue}if(r.getTime()===o.getTime()&&i>t[a].start.groupIndex){n++;continue}if(r.getTime()===o.getTime()&&i>=t[a].start.groupIndex&&e.startDate()>t[a].start.startDate()){n++;continue}break}return n},_getSelectedSlot:function(e,t,i,n,r,a){if(t[n+r]&&t[n].start.groupIndex!==t[n+r].start.groupIndex){var o=t[n+r].start.groupIndex;var s=this.groups[o];if(!s||i){e=null}if(a){e=s.lastSlot()}else{e=s.firstSlot(true)}}return e},_getStartIdx:function(e,t){var i=0;p.each(t,function(){if(this.uid===e[0]){return false}i++});return i},_getAllEvents:function(){var e=[];var t=this.groups;for(var i=0;i<t.length;i++){if(t[i]._continuousEvents){e=e.concat(t[i]._continuousEvents)}}return e},_getUniqueEvents:function(e){var t=[];for(var i=0;i<e.length;i++){var n=false;for(var r=0;r<t.length;r++){if(e[i].uid===t[r].uid){n=true;break}}if(!n){t.push(e[i])}}return t},_getSortedEvents:function(e){return e.sort(function(e,t){var i=e.start.startDate();var n=t.start.startDate();var r=v.date.getDate(i)-v.date.getDate(n);if(r===0){r=e.start.groupIndex-t.start.groupIndex}if(r===0){r=i.getTime()-n.getTime()}if(r===0){if(e.start.isDaySlot&&!t.start.isDaySlot){r=-1}if(!e.start.isDaySlot&&t.start.isDaySlot){r=1}}if(r===0){r=p(e.element).index()-p(t.element).index()}return r})},_selectSlots:function(e){var t=e.isAllDay;var i=this.groups[e.groupIndex];if(!i.timeSlotCollectionCount()){t=true}this._selectedSlots=[];var n=i.ranges(e.start,e.end,t,false);var r;var a;for(var o=0;o<n.length;o++){var s=n[o];var l=s.collection;for(var d=s.start.index;d<=s.end.index;d++){a=l.at(d);r=a.element;r.setAttribute("aria-selected",true);O(r);this._selectedSlots.push({start:a.startDate(),end:a.endDate(),element:r})}}if(e.backward){r=n[0].start.element}this.current(r)},_selectEvents:function(e){var t=false;var i=e.events;var n=this._getAllEvents();var r,a,o=n.length;if(!i[0]||!n[0]){return t}var s=p();e.events=[];for(r=0;r<o;r++){if(p.inArray(n[r].uid,i)>-1){a=n[r];s=s.add(a.element);if(e.events.indexOf(a.uid)===-1){e.events.push(a.uid)}}}if(s[0]){s.addClass("k-state-selected").attr("aria-selected",true);this.current(s.last()[0]);this._selectedSlots=[];t=true}return t},inRange:function(e){var t=this.startDate();var i=v.date.addDays(this.endDate(),1);var n=e.start;var r=e.end;return t<=n&&n<i&&t<r&&r<=i},_resourceValue:function(e,t){if(e.valuePrimitive){t=v.getter(e.dataValueField)(t)}return t},_resourceBySlot:function(e){var t=this.groupedResources;var i={};if(t.length){var n=e.groupIndex;for(var r=t.length-1;r>=0;r--){var a=t[r];var o=this._resourceValue(a,a.dataSource.view()[n%a.dataSource.total()]);if(a.multiple){o=[o]}var s=v.setter(a.field);s(i,o);n=Math.floor(n/a.dataSource.total())}}return i},_createResizeHint:function(e,t,i,n){return p(_).css({left:e,top:t,width:i,height:n})},_removeResizeHint:function(){this._resizeHint.remove();this._resizeHint=p()},_removeMoveHint:function(e){if(e){this._moveHint.filter("[data-uid='"+e+"']").remove();this._moveHint=this._moveHint.filter("[data-uid!='"+e+"']")}else{this._moveHint.remove();this._moveHint=p()}},_scrollTo:function(e,t){var i=e.offsetTop,n=e.offsetHeight,r=t.scrollTop,a=t.clientHeight,o=i+n,s=0;if(r>i){s=i}else if(o>r+a){if(n<=a){s=o-a}else{s=i}}else{s=r}t.scrollTop=s},_inverseEventColor:function(e){var t=e.css("color");var i=new R(t).isDark();var n=e.css("background-color");var r=new R(n).isDark();if(i==r){e.addClass(a)}},_eventTmpl:function(e,t){var i=this.options,n=p.extend({},v.Template,i.templateSettings),r=n.paramName,a="",o=typeof e,s={storage:{},count:0};if(o==="function"){s.storage["tmpl"+s.count]=e;a+="#=this.tmpl"+s.count+"("+r+")#";s.count++}else if(o==="string"){a+=e}var l=v.template(v.format(t,a),n);if(s.count>0){l=p.proxy(l,s.storage)}return l},eventResources:function(e){var t=[],i=this.options;if(!i.resources){return t}for(var n=0;n<i.resources.length;n++){var r=i.resources[n];var a=r.field;var o=v.getter(a)(e);if(o==null){continue}if(!r.multiple){o=[o]}var s=r.dataSource.view();for(var l=0;l<o.length;l++){var d=null;var u=o[l];if(!r.valuePrimitive){u=v.getter(r.dataValueField)(u)}for(var c=0;c<s.length;c++){if(s[c].get(r.dataValueField)==u){d=s[c];break}}if(d!==null){var f=v.getter(r.dataColorField)(d);t.push({field:r.field,title:r.title,name:r.name,text:v.getter(r.dataTextField)(d),value:u,color:f})}}}return t},createLayout:function(e){var t=-1;if(!e.rows){e.rows=[]}for(var i=0;i<e.rows.length;i++){if(e.rows[i].allDay){t=i;break}}var n=e.rows[t];if(t>=0){e.rows.splice(t,1)}var r=this.columnLevels=l(e,"columns");var a=this.rowLevels=l(e,"rows");if(this._isVirtualized()){this._trimRowLevels(a)}this.table=p('<table role="presentation" class="k-scheduler-layout k-scheduler-'+this.name+'view"><tbody></tbody></table>');var o=a[a.length-1].length;this.table.find("tbody:first").append(this._topSection(r,n,o));this.table.find("tbody:first").append(this._bottomSection(r,a,o));this.element.append(this.table);if(this._isVirtualized()){this._updateDomRowLevels()}if(this._isMobile()&&r.length>1&&this._groupOrientation()==="horizontal"&&v._outerWidth(p(window))<s){this.table.find(".k-scheduler-content .k-scheduler-table").width(r[r.length-2].length*100+"%");this.table.find(".k-scheduler-header .k-scheduler-table").width(r[r.length-2].length*100+"%")}this._scroller()},_isVirtualized:function(){return this.options.virtual&&this.rowLevels.length>1&&this._isVerticallyGrouped()},_trimRowLevels:function(e){var t=e[e.length-2];var i=this.cachedRowLevels||[];var n;this._hasContentToRender=true;var r=function(e,t){var i=e[t-1].length>0;if(i){return e[t].length%e[t-1][0].rows.length!==0}else{return true}};for(var a=e.length-2;a>=0;a--){var o=false;if(a>0&&r(e,a)){o=true;n=a}i[a]=e[a].splice(1);if(o){break}}i[e.length-1]=e[e.length-1].splice(t[0].rows.length);this.cachedRowLevels=i;if(!i[i.length-1].length){this._hasContentToRender=false}return{levelMarker:n||0,rowLevels:e}},createNextLayout:function(){var e=[];var t;var i;var n;var r;for(var a=0;a<this.cachedRowLevels.length;a++){e[a]=this.cachedRowLevels[a]}t=this._trimRowLevels(e);i=t.rowLevels.splice(t.levelMarker);n=t.levelMarker;r=i[i.length-1].length;delete this._height;for(var o=n;o<this.rowLevels.length;o++){this.rowLevels[o]=this.rowLevels[o].concat(i[o-n])}this.table.find(".k-scheduler-times:last tbody").append(u(i,r,this._isMobile()).find("tr"));this._updateDomRowLevels();if(n>0){for(o=0;o<n;o++){var s=this.table.find("[data-row-level="+o+"]:last");var l=parseInt(s.attr("rowspan"),10)+r;s.attr("rowspan",l)}}this._virtualContent(i,this.columnLevels);this.render(this._cachedEvents)},_tryRenderContent:function(){var e=this;var t=e.table.innerHeight();var i=e.content.find("table").innerHeight();var n=e.content.scrollTop();while(e._hasContentToRender&&i-t<n){e.createNextLayout();i=e.content.find("table").innerHeight()}},_updateDomRowLevels:function(){var e=this;var t=e.times.find(".k-scheduler-group-cell:not([data-row-level])");if(!this._rowLevelIndices){this._rowLevelIndices=t.map(function(e,t){p(t).attr("data-row-level",e);return e}).toArray().reverse();return}t=t.toArray().reverse();for(var i=0;i<=t.length;i++){p(t[i]).attr("data-row-level",this._rowLevelIndices[i])}},refreshLayout:function(){var e=this,t=e.element.find("> .k-scheduler-toolbar"),i=e.element.innerHeight(),n=this._scrollbar,r=0,a=this._isRtl?"left":"right";for(var o=0;o<t.length;o++){i-=f(t.eq(o))}if(e.datesHeader){r=f(e.datesHeader)}if(e.timesHeader&&f(e.timesHeader)>r){r=f(e.timesHeader)}if(e.datesHeader&&e.timesHeader){var s=e.datesHeader.find("table:first tr");e.timesHeader.find("tr").height(function(e){p(this).height(s.eq(e).height())})}if(r){i-=r}if(e.footer){i-=f(e.footer)}var l=function(e){var t,i;if(e[0].style.height){return true}else{t=e.height()}e.height("auto");i=e.height();if(t!=i){e.height("");return true}e.height("");return false};var d=e.content[0],u=!v.support.kineticScrollNeeded?n:0;if(l(e.element)){if(i>n*2){e.content.height(i)}else{e.content.height(n*2+1)}e.times.height(d.clientHeight);var c=e.times.find("table");if(c.length){c.height(e.content.find("table")[0].clientHeight)}}if(d.offsetWidth-d.clientWidth>0){e.table.addClass("k-scrollbar-v");e.datesHeader.css("padding-"+a,u-parseInt(e.datesHeader.children().css("border-"+a+"-width"),10))}else{e.datesHeader.css("padding-"+a,"")}if(d.offsetHeight-d.clientHeight>0||d.clientHeight>e.content.children(".k-scheduler-table").height()){e.table.addClass("k-scrollbar-h")}else{e.table.removeClass("k-scrollbar-h")}},_topSection:function(e,t,i){var n=p("<tr>");var r=e[e.length-1].length;this.timesHeader=o(e.length,t,i);this.datesHeader=d(e,r,t);var a=this.datesHeader.find(".k-nav-day");if(a.length){a.closest("tr").addClass("k-scheduler-date-group")}if(this._isMobile()){n.addClass("k-mobile-header");n.addClass("k-mobile-"+this._groupOrientation()+"-header")}return p(n).append(this.timesHeader.add(this.datesHeader).wrap("<td>").parent())},_bottomSection:function(e,t,i){this.times=u(t,i,this._isMobile());this.content=c(e[e.length-1],t[t.length-1]);return p("<tr>").append(this.times.add(this.content).wrap("<td>").parent())},_scroller:function(){var t=this;this.content.bind("scroll"+r,function(){v.scrollLeft(t.datesHeader.find(">.k-scheduler-header-wrap"),this.scrollLeft);t.times.scrollTop(this.scrollTop);if(t._isVirtualized()){t._tryRenderContent()}});var e=v.touchScroller(this.content,{avoidScrolling:function(e){return p(e.event.target).closest(".k-event.k-event-active").length>0}});if(e&&e.movable){this._touchScroller=e;this.content=e.scrollElement;e.movable.bind("change",function(e){v.scrollLeft(t.datesHeader.find(">.k-scheduler-header-wrap"),-e.sender.x);t.times.scrollTop(-e.sender.y);if(t._isVirtualized()){t._tryRenderContent()}})}},_resourcesForGroups:function(){var e=[];var t=this.options.group;var i=this.options.resources;t=t&&t.resources?t.resources:[];if(i&&t.length){for(var n=0,r=i.length;n<r;n++){for(var a=0,o=t.length;a<o;a++){if(i[n].name===t[a]){e.push(i[n])}}}}this.groupedResources=e},_createDateLayout:function(e,t,i){return P("rows",e,t,i)},_createColumnsLayout:function(e,t,i,n,r){return z("columns",e,t,i,n,r)},_groupOrientation:function(){var e=this.options.group;return e&&e.resources?e.orientation:"horizontal"},_isGroupedByDate:function(){return this.options.group&&this.options.group.date},_isVerticallyGrouped:function(){return this.groupedResources.length&&this._groupOrientation()==="vertical"},_createRowsLayout:function(e,t,i,n){return z("rows",e,t,i,n)},selectionByElement:function(){return null},clearSelection:function(){this.content.find(".k-state-selected").removeAttr("id").attr("aria-selected",false).removeClass("k-state-selected")},destroy:function(){var e=this;n.fn.destroy.call(this);if(e.table){v.destroy(e.table);e.table.remove()}if(e.footer){v.destroy(e.footer);e.footer.remove()}e.groups=null;e.table=null;e.content=null;e.times=null;e.datesHeader=null;e.timesHeader=null;e.footer=null;e._resizeHint=null;e._moveHint=null},calendarInfo:function(){return v.getCulture().calendars.standard},prevGroupSlot:function(e,t,i){var n;var r=this.groups[t];var a=r.ranges(e,e,i,false)[0].start;if(t<=0){return}if(this._isGroupedByDate()){return a}if(this._isVerticallyGrouped()){if(!r.timeSlotCollectionCount()){n=r._collection(r.daySlotCollectionCount()-1,true);return n.at(a.index)}else{n=r._collection(i?a.index:a.collectionIndex,false);return n.last()}}else{if(!r.timeSlotCollectionCount()){n=r._collection(a.collectionIndex,true);return n.last()}else{n=r._collection(i?0:r.timeSlotCollectionCount()-1,i);return i?n.last():n.at(a.index)}}},nextGroupSlot:function(e,t,i){var n;var r=this.groups[t];var a=r.ranges(e,e,i,false)[0].start;var o;if(t>=this.groups.length-1){return}if(this._isGroupedByDate()){return a}if(this._isVerticallyGrouped()){if(!r.timeSlotCollectionCount()){n=r._collection(0,true);return n.at(a.index)}else{o=r.daySlotCollectionCount();n=r._collection(o?0:a.collectionIndex,o);return i?n.first():n.at(a.collectionIndex)}}else{if(!r.timeSlotCollectionCount()){n=r._collection(a.collectionIndex,true);return n.first()}else{n=r._collection(0,i);return i?n.first():n.at(a.index)}}},_eventOptionsForMove:function(){return{}},_updateEventForResize:function(){return},_updateEventForSelection:function(e){return e}});function E(e,t,i){var n,r,a,o,s;for(n=e.length-1;n>=0;n--){r=I(e[n]);a=r.start;s=r.end;o=a<=t&&s>=t;if(o||a>=t&&s<=i||t<=a&&i>=a){if(a<t){t=a}if(s>i){i=s}}}return M(e,t,i)}function I(e){return{start:e.start,end:e.end}}function M(e,t,i){var n=[];for(var r=0;r<e.length;r++){var a=I(e[r]);if(a.start<t&&a.end>t||a.start>=t&&a.end<=i){n.push(e[r])}}return n}function B(e){return F(e)}function L(e){return F(e)}var R=function(e){var t=this,i=R.formats,n,r,a,o,s;if(arguments.length===1){e=t.resolveColor(e);for(o=0;o<i.length;o++){n=i[o].re;r=i[o].process;a=n.exec(e);if(a){s=r(a);t.r=s[0];t.g=s[1];t.b=s[2]}}}else{t.r=arguments[0];t.g=arguments[1];t.b=arguments[2]}t.r=t.normalizeByte(t.r);t.g=t.normalizeByte(t.g);t.b=t.normalizeByte(t.b)};R.prototype={resolveColor:function(e){e=e||"#000";if(e.charAt(0)=="#"){e=e.substr(1,6)}e=e.replace(/ /g,"");e=e.toLowerCase();e=R.namedColors[e]||e;return e},normalizeByte:function(e){return e<0||isNaN(e)?0:e>255?255:e},percBrightness:function(){var e=this;return t.sqrt(.241*e.r*e.r+.691*e.g*e.g+.068*e.b*e.b)},isDark:function(){var e=this;var t=e.percBrightness();return t<180}};R.formats=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(e){return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}];R.namedColors={aqua:"00ffff",azure:"f0ffff",beige:"f5f5dc",black:"000000",blue:"0000ff",brown:"a52a2a",coral:"ff7f50",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgray:"a9a9a9",darkgreen:"006400",darkorange:"ff8c00",darkred:"8b0000",dimgray:"696969",fuchsia:"ff00ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lightblue:"add8e6",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumblue:"0000cd",navy:"000080",olive:"808000",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",pink:"ffc0cb",plum:"dda0dd",purple:"800080",red:"ff0000",royalblue:"4169e1",salmon:"fa8072",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",steelblue:"4682b4",tan:"d2b48c",teal:"008080",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};function F(e){var t=[];for(var i=0;i<e.length;i++){var n=e[i];var r=I(n);var a=null;for(var o=0,s=t.length;o<s;o++){var l=r.start>t[o].end;if(r.start<t[o].start||l){a=t[o];if(a.end<r.end){a.end=r.end}break}}if(!a){a={start:r.start,end:r.end,events:[]};t.push(a)}a.events.push(n)}return t}function P(r,e,a,o){var s=[];p.each(e,function(e,t){var i=t.className?"k-slot-cell "+t.className:"k-slot-cell";var n={text:t.text,className:i};if(o&&!t.minorTicks){n[r]=P(r,t.columns,a,o)}else{n[r]=a}s.push(n)});return s}function z(i,n,e,r,t,a){var o=n[0];var s=[];if(o){if(t&&e){p.each(t,function(e,t){if(a&&!t.minorTicks){t[i]=z(i,n,t.columns,r,t.columns,a)}else{t[i]=z(i,n,null,r)}});s=t}else{var l=o.dataSource.view();for(var d=0;d<l.length;d++){var u={text:r({text:v.htmlEncode(v.getter(o.dataTextField)(l[d])),color:v.getter(o.dataColorField)(l[d]),field:o.field,title:o.title,name:o.name,value:v.getter(o.dataValueField)(l[d])}),className:"k-slot-cell k-scheduler-group-cell"};u[i]=z(i,n.slice(1),e,r);s.push(u)}}return s}return e}function H(i){return function(e){if(p.isArray(e)||e instanceof v.data.ObservableArray){for(var t=0;t<e.length;t++){if(e[t]==i){return true}}return false}return e==i}}var N=/\s*k-state-selected/;function O(e){e.className=e.className.replace(N,"")+" k-state-selected"}p.extend(e.SchedulerView,{createColumns:B,createRows:L,rangeIndex:I,collidingEvents:E,groupEqFilter:H})})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.scheduler.dayview",["kendo.scheduler.view"],e)})(function(){var e={id:"scheduler.dayview",name:"Scheduler Day View",category:"web",description:"The Scheduler Day View",depends:["scheduler.view"],hidden:true};(function(y,o){var S=window.kendo,e=S.ui,w=S.date.setTime,b=e.SchedulerView,x=S._outerWidth,C=S._outerHeight,T=y.extend,n=y.proxy,D=S.date.getDate,k=S.date.MS_PER_MINUTE,A=S.date.MS_PER_DAY,E="k-current-time",I="k-current-time-arrow",_="k-event-inverse",M=.8666,R=S.date.getMilliseconds,i=".kendoMultiDayView";var t=S.template('<div title="(#=kendo.format("{0:t} - {1:t}", start, end)#): #=title.replace(/"/g,"&\\#34;")#">'+'<div class="k-event-template k-event-time">#:kendo.format("{0:t} - {1:t}", start, end)#</div>'+'<div class="k-event-template">${title}</div>'+"</div>"),r=S.template('<div title="(#=kendo.format("{0:t}", start)#): #=title.replace(/"/g,"&\\#34;")#">'+'<div class="k-event-template">${title}</div>'+"</div>"),a=S.template("#var dateString = isMobile ? kendo.toString(date,'ddd')[0] : kendo.toString(date,'ddd M/dd'); #"+"<span class='k-link k-nav-day'>#=dateString#</span>"),s='<div role="gridcell" aria-selected="false" '+'data-#=ns#uid="#=uid#"'+"#if (resources[0]) { #"+'style="background-color:#=resources[0].color#; border-color: #=resources[0].color#"'+'class="k-event"'+"#} else {#"+'class="k-event"'+"#}#"+">"+'<span class="k-event-actions">'+"# if(data.tail || data.middle) {#"+'<span class="k-icon k-i-arrow-60-left"></span>'+"#}#"+"# if(data.isException()) {#"+'<span class="k-icon k-i-non-recurrence"></span>'+"# } else if(data.isRecurring()) {#"+'<span class="k-icon k-i-reload"></span>'+"# } #"+"</span>"+"{0}"+'<span class="k-event-actions">'+"#if (showDelete) {#"+'<a href="\\#" class="k-link k-event-delete" title="${data.messages.destroy}" aria-label="${data.messages.destroy}"><span class="k-icon k-i-close"></span></a>'+"#}#"+"# if(data.head || data.middle) {#"+'<span class="k-icon k-i-arrow-60-right"></span>'+"#}#"+"</span>"+"#if(resizable && !singleDay && !data.tail && !data.middle){#"+'<span class="k-resize-handle k-resize-w"></span>'+"#}#"+"#if(resizable && !singleDay && !data.head && !data.middle){#"+'<span class="k-resize-handle k-resize-e"></span>'+"#}#"+"</div>",l='<div role="gridcell" aria-selected="false" '+'data-#=ns#uid="#=uid#" '+"#if (resources[0]) { #"+'style="background-color:#=resources[0].color #; border-color: #=resources[0].color#"'+'class="k-event"'+"#} else {#"+'class="k-event"'+"#}#"+">"+'<span class="k-event-actions">'+"# if(data.isException()) {#"+'<span class="k-icon k-i-non-recurrence"></span>'+"# } else if(data.isRecurring()) {#"+'<span class="k-icon k-i-reload"></span>'+"# } #"+"</span>"+"{0}"+'<span class="k-event-actions">'+"#if (showDelete) {#"+'<a href="\\#" class="k-link k-event-delete" title="${data.messages.destroy}" aria-label="${data.messages.destroy}"><span class="k-icon k-i-close"></span></a>'+"#}#"+"</span>"+'<span class="k-event-top-actions">'+"# if(data.tail || data.middle) {#"+'<span class="k-icon k-i-arrow-60-up"></span>'+"# } #"+"</span>"+'<span class="k-event-bottom-actions">'+"# if(data.head || data.middle) {#"+'<span class="k-icon k-i-arrow-60-down"></span>'+"# } #"+"</span>"+"# if(resizable && !data.tail && !data.middle) {#"+'<span class="k-resize-handle k-resize-n"></span>'+"# } #"+"# if(resizable && !data.head && !data.middle) {#"+'<span class="k-resize-handle k-resize-s"></span>'+"# } #"+"</div>";function F(e){var t=new Date(1980,1,1,0,0,0);w(t,R(e));return t}function P(e,t,i){return e>=t&&e<=i}function d(e,t,i,n){n=n?e<=i:e<i;return e>t&&n}function z(e,t,i,n){var r=e._continuousEvents;var a=r[r.length-1];var o=D(t.start.startDate()).getTime();if(n&&a&&D(a.start.startDate()).getTime()==o){var s=r.length-1;for(;s>-1;s--){if(r[s].isAllDay||D(r[s].start.startDate()).getTime()<o){break}}r.splice(s+1,0,{element:i,isAllDay:true,uid:i.attr(S.attr("uid")),start:t.start,end:t.end})}else{r.push({element:i,isAllDay:n,uid:i.attr(S.attr("uid")),start:t.start,end:t.end})}}function u(e){if(e.workDays&&e.workDays.length){return e.workDays}var t=[];var i=e.workWeekStart%7;var n=Math.abs(e.workWeekEnd%7);t.push(i);while(n!=i){if(i>6){i-=7}else{i++}t.push(i)}return t}var c=b.extend({init:function(e,t){var i=this;b.fn.init.call(i,e,t);i.title=i.options.title||i.options.name;i._workDays=u(i.options);i._templates();i._editable();i.calculateDateRange();i._groups();i._currentTime(true)},_currentTimeMarkerUpdater:function(){this._updateCurrentTimeMarker(new Date)},_updateCurrentTimeMarker:function(e){var t=this.options,i,n,r,a,o="<div class='"+E+"'></div>";if(t.currentTimeMarker.useLocalTimezone===false){var s=t.dataSource.options.schema.timezone;if(t.dataSource&&s){var l=S.timezone.offset(e,s);e=S.timezone.convert(e,e.getTimezoneOffset(),l)}}i=this.times.find("."+E);n=this.content.find("."+E);var d=!t.group||t.group.orientation=="horizontal"?1:this.groups.length;var u=this.times.find("tr:first th:first");var c=this.times.find("tr:first th:last");if(u.length>0&&c.length>0){if(this._isRtl){a=u.position().left+C(u)-C(c)}else{a=c.position().left}}for(var f=0;f<d;f++){var h=this.groups[f];if(!h){return}var p=S.date.toUtcTime(e);var v=h.timeSlotRanges(p,p+1);if(v.length===0){return}var m=v[0].collection;var g=m.slotByStartDate(e);if(g){var _=i[f]?i.eq(f):y(o).prependTo(this.times);var b=Math.round(v[0].innerRect(e,new Date(e.getTime()+1),false).top);var w={};if(this._isRtl){w.right=a;_.addClass(I+"-left")}else{w.left=a;_.addClass(I+"-right")}if(!r){r=x(_)*M/2}w.top=b-r;_.css(w);var k=n[f]?n.eq(f):y(o).prependTo(this.content);k.css({top:b,height:"1px",right:0,left:0})}}},_currentTime:function(e){var t=this;var i=t.options.currentTimeMarker;if(i!==false&&i.updateInterval!==o){t._currentTimeMarkerUpdater();if(e){t._currentTimeUpdateTimer=setInterval(n(this._currentTimeMarkerUpdater,t),i.updateInterval)}}},_updateResizeHint:function(e,t,i,n){var r=e.isMultiDay();var a=this.groups[t];var o=a.ranges(i,n,r,e.isAllDay);var s,l,d,u;this._removeResizeHint();for(var c=0;c<o.length;c++){var f=o[c];var h=f.startSlot();if(this._isGroupedByDate()&&r){for(var p=h.index;p<=f.end.index;p++){var v=f.collection._slots[p];s=v.offsetWidth;l=v.clientHeight;d=v.offsetTop;u=b.fn._createResizeHint.call(this,v.offsetLeft,d,s,l);this._resizeHint=this._resizeHint.add(u)}}else{s=h.offsetWidth;l=h.clientHeight;d=h.offsetTop;if(r){s=f.innerWidth()}else{var m=f.outerRect(i,n,this.options.snap);d=m.top;l=m.bottom-m.top}u=b.fn._createResizeHint.call(this,h.offsetLeft,d,s,l);this._resizeHint=this._resizeHint.add(u)}}var g="t";var _=this.content;if(r){g="M/dd";_=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day) > div");if(!_.length){_=this.content}}this._resizeHint.appendTo(_);this._resizeHint.find(".k-label-top,.k-label-bottom").text("");this._resizeHint.first().addClass("k-first").find(".k-label-top").text(S.toString(S.timezone.toLocalDate(i),g));this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(S.toString(S.timezone.toLocalDate(n),g))},_updateMoveHint:function(e,t,i){var n=e.isMultiDay();var r=this.groups[t];var a=S.date.toUtcTime(e.start)+i;var o=a+e.duration();var s=r.ranges(a,o,n,e.isAllDay);a=S.timezone.toLocalDate(a);o=S.timezone.toLocalDate(o);this._removeMoveHint(e.uid);if(!n&&(R(o)===0||R(o)<R(this.startTime()))){if(s.length>1){s.pop()}}var l=y();for(var d=0;d<s.length;d++){var u=s[d];var c=u.start;var f;var h={left:c.offsetLeft+2,top:c.offsetTop};if(this._isGroupedByDate()&&n){for(var p=c.index;p<=u.end.index;p++){var v=u.collection._slots[p];h.left=this._isRtl?v.clientWidth*.1+v.offsetLeft+2:v.offsetLeft+2;h.height=v.offsetHeight;h.width=v.clientWidth*.9-2;f=this._createEventElement(e.clone({start:a,end:o}),!n);if(e.inverseColor){f.addClass(_)}this._appendMoveHint(f,h);l=l.add(f)}}else{if(this._isRtl){h.left=c.clientWidth*.1+c.offsetLeft+2}if(n){h.width=u.innerWidth()-2}else{var m=u.outerRect(a,o,this.options.snap);h.top=m.top;h.height=m.bottom-m.top;h.width=c.clientWidth*.9-2}f=this._createEventElement(e.clone({start:a,end:o}),!n);if(e.inverseColor){f.addClass(_)}this._appendMoveHint(f,h);l=l.add(f)}}var g=this.content;if(n){g=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day) > div");if(!g.length){g=this.content}}l.appendTo(g)},_appendMoveHint:function(e,t){e.addClass("k-event-drag-hint");e.css(t);this._moveHint=this._moveHint.add(e)},_slotByPosition:function(e,t){var i,n;if(this._isVerticallyGrouped()){n=this.content.offset();t+=this.content[0].scrollTop;e+=this.content[0].scrollLeft}else{n=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day)").find(">div").offset()}if(n){e-=n.left;t-=n.top}e=Math.ceil(e);t=Math.ceil(t);var r;var a;for(a=0;a<this.groups.length;a++){r=this.groups[a];i=r.daySlotByPosition(e,t,this._isGroupedByDate());if(i){return i}}if(n){e+=n.left;t+=n.top}n=this.content.offset();e-=n.left;t-=n.top;if(!this._isVerticallyGrouped()){t+=this.content[0].scrollTop;e+=this.content[0].scrollLeft}e=Math.ceil(e);t=Math.ceil(t);for(a=0;a<this.groups.length;a++){r=this.groups[a];i=r.timeSlotByPosition(e,t);if(i){return i}}return null},_groupCount:function(){var e=this.groupedResources;var t=this._isGroupedByDate();if(e.length){if(this._groupOrientation()==="vertical"){if(t){return this._columnCountForLevel(e.length-1)}else{return this._rowCountForLevel(e.length-1)}}else{if(t){return this._columnCountForLevel(e.length)/this._columnCountForLevel(0)}else{return this._columnCountForLevel(e.length)/this._columnOffsetForResource(e.length)}}}return 1},_columnCountInResourceView:function(){var e=this.groupedResources;var t=this._isGroupedByDate();if(!e.length||this._isVerticallyGrouped()){if(t){return this._rowCountForLevel(0)}else{return this._columnCountForLevel(0)}}if(t){return this._columnCountForLevel(0)}else{return this._columnOffsetForResource(e.length)}},_timeSlotGroups:function(e,t){var i=this._timeSlotInterval();var n=e;var r=this._isGroupedByDate();var a=this.content.find("tr:not(.k-scheduler-header-all-day)");var o,s,l,d;a.attr("role","row");var u=a.length;if(this._isVerticallyGrouped()){if(r){n=t}u=Math.floor(u/n)}for(var c=0;c<n;c++){var f=0;var h=0;if(this._isVerticallyGrouped()){f=c}else{h=c}l=f*u;while(l<(f+1)*u){var p=a[l].children;if(l%u===0){s=R(new Date(+this.startTime()))}var v=0;if(r){if(this._isVerticallyGrouped()){for(d=0;d<e;d++){o=this.groups[d];this._addTimeSlotGroup(o,p,d,s,i,c)}}else{o=this.groups[c];for(d=h;d<e*t;d=d+e){this._addTimeSlotGroup(o,p,d,s,i,v);v++}}}else{o=this.groups[c];for(d=h*t;d<(h+1)*t;d++){this._addTimeSlotGroup(o,p,d,s,i,v);v++}}s+=i;l++}}},_addTimeSlotGroup:function(e,t,i,n,r,a){var o=t[i];var s=e.getTimeSlotCollection(a);var l=this._dates[a];if(!l||!o){return}var d=Date.UTC(l.getFullYear(),l.getMonth(),l.getDate());var u=d+n;var c=u+r;o.setAttribute("role","gridcell");o.setAttribute("aria-selected",false);s.addTimeSlot(o,u,c)},_addDaySlotGroup:function(e,t,i,n,r){var a=t[i];var o=this._dates[r];if(!o){return}var s=Date.UTC(o.getFullYear(),o.getMonth(),o.getDate());a.setAttribute("role","gridcell");a.setAttribute("aria-selected",false);e.addDaySlot(a,s,s+S.date.MS_PER_DAY)},_daySlotGroups:function(e,t){var i,n;var r=e;var a=this._isGroupedByDate();if(this._isVerticallyGrouped()){if(a){r=t}i=this.element.find(".k-scheduler-header-all-day")}else{i=this.element.find(".k-scheduler-header-all-day tr")}i.attr("role","row");for(var o=0;o<r;o++){var s=0;var l,d;if(this._isVerticallyGrouped()){s=o}var u=i[s].children;var c=0;if(!this._isVerticallyGrouped()){c=o}var f=0;if(a){if(this._isVerticallyGrouped()){for(n=0;n<e;n++){l=this.groups[n];d=l.getDaySlotCollection(0);this._addDaySlotGroup(d,u,n,t,o)}}else{l=this.groups[o];d=l.getDaySlotCollection(0);for(n=c;n<e*t;n=n+e){this._addDaySlotGroup(d,u,n,t,f);f++}}}else{l=this.groups[o];d=l.getDaySlotCollection(0);for(n=c*t;n<(c+1)*t;n++){this._addDaySlotGroup(d,u,n,t,f);f++}}}},_groups:function(){var e=this._groupCount();var t=this._columnCountInResourceView();this.groups=[];for(var i=0;i<e;i++){var n=this._addResourceView(i);for(var r=0;r<t;r++){if(this._dates[r]){n.addTimeSlotCollection(this._dates[r],S.date.addDays(this._dates[r],1))}}if(this.options.allDaySlot){n.addDaySlotCollection(this._dates[0],S.date.addDays(this._dates[this._dates.length-1],1))}}this._timeSlotGroups(e,t);if(this.options.allDaySlot){this._daySlotGroups(e,t)}},options:{name:"MultiDayView",selectedDateFormat:"{0:D}",selectedShortDateFormat:"{0:d}",selectedMobileDateFormat:"{0:MMM} {0:dd} - {1:dd}",allDaySlot:true,showWorkHours:false,title:"",startTime:S.date.today(),endTime:S.date.today(),minorTickCount:2,majorTick:60,majorTimeHeaderTemplate:"<span>#=kendo.toString(date, 't')#</span>",minorTimeHeaderTemplate:"&\\#8203;",groupHeaderTemplate:"#=text#",slotTemplate:"&nbsp;",allDaySlotTemplate:"&nbsp;",eventTemplate:t,allDayEventTemplate:r,dateHeaderTemplate:a,editable:true,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,footer:{command:"workDay"},messages:{allDay:"all day",showFullDay:"Show full day",showWorkDay:"Show business hours"},currentTimeMarker:{updateInterval:1e4,useLocalTimezone:true}},events:["remove","add","edit"],_templates:function(){var e=this.options,t=T({},S.Template,e.templateSettings);this.eventTemplate=this._eventTmpl(e.eventTemplate,l);this.allDayEventTemplate=this._eventTmpl(e.allDayEventTemplate,s);this.majorTimeHeaderTemplate=S.template(e.majorTimeHeaderTemplate,t);this.minorTimeHeaderTemplate=S.template(e.minorTimeHeaderTemplate,t);this.dateHeaderTemplate=S.template(e.dateHeaderTemplate,t);this.slotTemplate=S.template(e.slotTemplate,t);this.allDaySlotTemplate=S.template(e.allDaySlotTemplate,t);this.groupHeaderTemplate=S.template(e.groupHeaderTemplate,t)},_editable:function(){if(this.options.editable){if(this._isMobile()){this._touchEditable()}else{this._mouseEditable()}}},_mouseEditable:function(){var n=this;n.element.on("click"+i,".k-event a:has(.k-i-close)",function(e){n.trigger("remove",{uid:y(this).closest(".k-event").attr(S.attr("uid"))});e.preventDefault()});if(n.options.editable.create!==false){n.element.on("dblclick"+i,".k-scheduler-content > table td",function(e){if(!y(this).parent().hasClass("k-scheduler-header-all-day")){var t=n._slotByPosition(e.pageX,e.pageY);if(t){var i=n._resourceBySlot(t);n.trigger("add",{eventInfo:T({start:t.startDate(),end:t.endDate()},i)})}e.preventDefault()}}).on("dblclick"+i,".k-scheduler-header-all-day td",function(e){var t=n._slotByPosition(e.pageX,e.pageY);if(t){var i=n._resourceBySlot(t);n.trigger("add",{eventInfo:T({},{isAllDay:true,start:S.date.getDate(t.startDate()),end:S.date.getDate(t.startDate())},i)})}e.preventDefault()})}if(n.options.editable.update!==false){n.element.on("dblclick"+i,".k-event",function(e){n.trigger("edit",{uid:y(this).closest(".k-event").attr(S.attr("uid"))});e.preventDefault()})}},_touchEditable:function(){var a=this;var e=0;if(S.support.mobileOS.android){e=5}if(a.options.editable.create!==false){a._addUserEvents=new S.UserEvents(a.element,{threshold:e,filter:".k-scheduler-content td",useClickAsTap:!S.support.browser.edge,tap:function(e){if(a._scrolling){return}if(!y(e.target).parent().hasClass("k-scheduler-header-all-day")){var t=e.x.location!==o?e.x.location:e.x;var i=e.y.location!==o?e.y.location:e.y;var n=a._slotByPosition(t,i);if(n){var r=a._resourceBySlot(n);a.trigger("add",{eventInfo:T({start:n.startDate(),end:n.endDate()},r)})}e.preventDefault()}}});a._allDayUserEvents=new S.UserEvents(a.element,{threshold:e,useClickAsTap:!S.support.browser.edge,filter:".k-scheduler-header-all-day td",tap:function(e){if(a._scrolling){return}var t=e.x.location!==o?e.x.location:e.x;var i=e.y.location!==o?e.y.location:e.y;var n=a._slotByPosition(t,i);if(n){var r=a._resourceBySlot(n);a.trigger("add",{eventInfo:T({},{isAllDay:true,start:S.date.getDate(n.startDate()),end:S.date.getDate(n.startDate())},r)})}e.preventDefault()}})}if(a.options.editable.update!==false){a._editUserEvents=new S.UserEvents(a.element,{threshold:e,useClickAsTap:!S.support.browser.edge,filter:".k-event",tap:function(e){if(a._scrolling){return}var t=y(e.target).closest(".k-event");var i=y(e.touch.initialTouch);if(i.hasClass("k-i-close")){a.trigger("remove",{uid:t.attr(S.attr("uid"))})}else if(!t.hasClass("k-event-active")){a.trigger("edit",{uid:t.attr(S.attr("uid"))})}e.preventDefault()}})}},_layout:function(i){var e=[];var o=[];var t=this.options;var s=this;var n=s._isGroupedByDate();for(var r=0;r<i.length;r++){var a={};a.text=s.dateHeaderTemplate({date:i[r],isMobile:s._isMobile()});if(S.date.isToday(i[r])){a.className="k-today"}e.push(a)}var l=this.groupedResources;if(t.allDaySlot){o.push({text:t.messages.allDay,allDay:true,cellContent:function(e){var t=e;e=l.length&&s._groupOrientation()!=="vertical"?e%i.length:e;return s.allDaySlotTemplate({date:i[e],resources:function(){return s._resourceBySlot({groupIndex:t})}})}})}this._forTimeRange(this.startTime(),this.endTime(),function(e,t,i,n){var r=t?s.majorTimeHeaderTemplate:s.minorTimeHeaderTemplate;var a={text:r({date:e}),className:n?"k-slot-cell":""};o.push(a)});if(l.length){if(this._groupOrientation()==="vertical"){if(n){o=this._createDateLayout(e,o);e=this._createColumnsLayout(l,null,this.groupHeaderTemplate)}else{o=this._createRowsLayout(l,o,this.groupHeaderTemplate)}}else{if(n){e=this._createColumnsLayout(l,e,this.groupHeaderTemplate,e)}else{e=this._createColumnsLayout(l,e,this.groupHeaderTemplate)}}}return{columns:e,rows:o}},_footer:function(){var o=this.options;if(o.footer!==false){var e='<div class="k-scheduler-footer k-toolbar">';var t=o.footer.command;if(this._isMobile()){e+='<span class="k-state-default k-scheduler-today"><a href="#" class="k-link">';e+=o.messages.today+"</a></span>"}if(t&&t==="workDay"){if(this._isMobile()){e+='<span class="k-state-default k-scheduler-fullday"><a href="#" class="k-link">';e+=(o.showWorkHours?o.messages.showFullDay:o.messages.showWorkDay)+"</a></span>"}else{e+='<button type="button" class="k-button k-scheduler-fullday">';e+='<span class="k-icon k-i-clock"></span>';e+='<span class="k-button-text">';e+=o.showWorkHours?o.messages.showFullDay:o.messages.showWorkDay;e+="</span>";e+="</button>"}}e+="</div>";this.footer=y(e).appendTo(this.element);var s=this;this.footer.on("click"+i,".k-scheduler-fullday",function(e){e.preventDefault();s.trigger("navigate",{view:s.name||o.name,date:o.date,isWorkDay:!o.showWorkHours})});this.footer.on("click"+i,".k-scheduler-today",function(e){e.preventDefault();var t=s.options.timezone;var i="today";var n=new Date;var r;if(t){var a=S.timezone.offset(n,t);r=S.timezone.convert(n,n.getTimezoneOffset(),a)}else{r=n}s.trigger("navigate",{view:s.name||o.name,action:i,date:r})})}},_forTimeRange:function(e,t,i,n){e=F(e);t=F(t);var r=this,a=R(e),o=R(t),s=r.options.minorTickCount,l=r.options.majorTick*k,d=l/s||1,u=new Date(+e),c=u.getDate(),f,h=0,p,v="";p=A/d;if(a!=o){if(a>o){o+=A}p=(o-a)/d}p=Math.round(p);for(;h<p;h++){var m=h%(l/d),g=m===0,_=m<s-1,b=m===s-1;v+=i(u,g,_,b);w(u,d,false)}if(o){f=R(u);if(c<u.getDate()){f+=A}if(f>o){u=new Date(+t)}}if(n){v+=n(u)}return v},_content:function(e){var t=this;var i="";i+="<tbody>";i+=t._renderRows(e,t.rowLevels,t.columnLevels);i+="</tbody>";this.content.find("table").append(i)},_virtualContent:function(e,t){var i=this;var n="";var r=i._dates;n+=i._renderRows(r,e,t);i.content.find("table tbody").append(n)},_renderRows:function(l,e,t){var d=this;var u=d._groupOrientation()==="vertical";var c=d._isGroupedByDate();var f=0;var h=l.length;var i=d.options;var n=d.startTime();var r=this.endTime();var p=1;var a=1;var o=this.groupedResources;var s="";if(o.length){var v=d._recalculateLevels(e,t);a=v.rowCount;p=v.groupsCount}var m=function(e,t,i){var n="";var r=0;var a,o;n="<tr"+(i?' class="k-middle-row"':"")+">";if(c){for(a=0,o=h;a<o;a++){for(r=0;r<p;r++){var s=a;if(u){s=f}n=d._addCellsToContent(n,l,e,s,r,g)}if(u){break}}}else{for(;r<p;r++){for(a=0,o=h;a<o;a++){n=d._addCellsToContent(n,l,e,a,r,g)}}}n+="</tr>";return n};for(var g=0;g<a;g++){s+=i.allDaySlot&&u?this._allDayVerticalGroupRow(l,g,p,f):"";s+=this._forTimeRange(n,r,m);if(u){f++}}return s},_recalculateLevels:function(e,t){var i=this;var n=i._isGroupedByDate();var r=i._groupOrientation()==="vertical";var a=1;var o=1;if(r){o=i._rowCountForLevel(e.length-2,e);if(n){a=i._columnCountForLevel(t.length-1)}}else{if(n){a=i._columnCountForLevel(t.length-1)/this._columnCountForLevel(0)}else{a=i._columnCountForLevel(t.length-2)}}return{rowCount:o,groupsCount:a}},_allDayVerticalGroupRow:function(e,t,i,n){var r=this;var a='<tr class="k-scheduler-header-all-day">';var o=r._isGroupedByDate();var s=o?0:t;var l=r.allDaySlotTemplate;var d=function(){return r._resourceBySlot({groupIndex:s})};if(o){for(;s<i;s++){a+="<td>"+l({date:e[n],resources:d})+"</td>"}}else{for(var u=0;u<e.length;u++){a+="<td>"+l({date:e[u],resources:d})+"</td>"}}return a+"</tr>"},_addCellsToContent:function(e,t,i,n,r,a){var o=this;var s="";var l;var d=this.slotTemplate;var u=this._groupOrientation()==="vertical";var c=function(e){return function(){return o._resourceBySlot({groupIndex:e})}};if(S.date.isToday(t[n])){s+="k-today"}if(S.date.getMilliseconds(i)<S.date.getMilliseconds(this.options.workDayStart)||S.date.getMilliseconds(i)>=S.date.getMilliseconds(this.options.workDayEnd)||!this._isWorkDay(t[n])){s+=" k-nonwork-hour"}e+="<td"+(s!==""?' class="'+s+'"':"")+">";l=S.date.getDate(t[n]);S.date.setTime(l,S.date.getMilliseconds(i));e+=d({date:l,resources:c(u&&!o._isGroupedByDate()?a:r)});e+="</td>";return e},_isWorkDay:function(e){var t=e.getDay();var i=this._workDays;for(var n=0;n<i.length;n++){if(i[n]===t){return true}}return false},_render:function(e){var o=this;e=e||[];this._dates=e;this._startDate=e[0];this._endDate=e[e.length-1||0];this.createLayout(this._layout(e));this._content(e);this._footer();this.refreshLayout();if(this._isVirtualized()){this._tryRenderContent()}var t=this.element.find(".k-scheduler-header-all-day td");if(t.length){this._allDayHeaderHeight=t.first()[0].clientHeight}o.element.on("click"+i,".k-nav-day",function(e){var t=y(e.currentTarget).closest("th");var i=t.offset();var n=0;var r=C(t);if(o._isGroupedByDate()){if(o._isVerticallyGrouped()){n=x(o.times);r=0}else{r=C(o.datesHeader)}}var a=o._slotByPosition(i.left+n,i.top+r);o.trigger("navigate",{view:"day",date:a.startDate()})})},startTime:function(){var e=this.options;return e.showWorkHours?e.workDayStart:e.startTime},endTime:function(){var e=this.options;return e.showWorkHours?e.workDayEnd:e.endTime},startDate:function(){return this._startDate},endDate:function(){return this._endDate},_end:function(e){var t=R(this.endTime())||A;if(e){t=0}return new Date(this._endDate.getTime()+t)},nextDate:function(){return S.date.nextDay(this.endDate())},previousDate:function(){return S.date.previousDay(this.startDate())},calculateDateRange:function(){this._render([this.options.date])},destroy:function(){var e=this;if(e._currentTimeUpdateTimer){clearInterval(e._currentTimeUpdateTimer)}if(e.datesHeader){e.datesHeader.off(i)}if(e.element){e.element.off(i)}if(e.footer){e.footer.remove()}b.fn.destroy.call(this);if(this._isMobile()&&e.options.editable){if(e.options.editable.create!==false){e._addUserEvents.destroy();e._allDayUserEvents.destroy()}if(e.options.editable.update!==false){e._editUserEvents.destroy()}}},inRange:function(e){var t=b.fn.inRange.call(this,e);if(e.isAllDay){return t}var i=R(this.startTime());var n=R(this.endTime())||S.date.MS_PER_DAY;var r=R(e.start);var a=R(e.end)||S.date.MS_PER_DAY;return t&&i<=r&&a<=n},selectionByElement:function(e){var t=e.offset();var i=Math.round(e.innerHeight())-5;return this._slotByPosition(t.left,t.top+i)},_timeSlotInterval:function(){var e=this.options;return e.majorTick/e.minorTickCount*k},_timeSlotIndex:function(e){var t=this.options;var i=R(e);var n=R(this.startTime());var r=t.majorTick/t.minorTickCount*k;return(i-n)/r},_slotIndex:function(e,t){if(t){return this._dateSlotIndex(e)}return this._timeSlotIndex(e)},_dateSlotIndex:function(e,t){var i;var n;var r=this._dates||[];var a;var o;var s=1;for(i=0,n=r.length;i<n;i++){a=S.date.getDate(r[i]);o=new Date(S.date.getDate(r[i]).getTime()+A-(t?0:1));if(P(e,a,o)){return i*s}}return-1},_positionAllDayEvent:function(e,t){var i=t.innerWidth();var n=t.start.index;var r=t.end.index;var a=b.collidingEvents(t.events(),n,r);var o=this._headerColumnCount||0;var s=2;var l=n!==r?3:2;var d=this._allDayHeaderHeight;var u=t.startSlot();e.css({left:u.offsetLeft+s,width:i-l});t.addEvent({slotIndex:n,start:n,end:r,element:e});a.push({slotIndex:n,start:n,end:r,element:e});var c=b.createRows(a);if(c.length&&c.length>o){this._headerColumnCount=c.length}var f=t.start.offsetTop;for(var h=0,p=c.length;h<p;h++){var v=c[h].events;for(var m=0,g=v.length;m<g;m++){y(v[m].element).css({top:f+h*d,height:d-2})}}},_arrangeColumns:function(e,t,i,n){var r=n.start;e={element:e,slotIndex:r.index,start:t,end:t+i};var a,o=r.clientWidth,s=o*.1,l,d=n.events(),u=b.collidingEvents(d,e.start,e.end);n.addEvent(e);u.push(e);a=b.createColumns(u);var c=(o-s)/a.length;for(var f=0,h=a.length;f<h;f++){l=a[f].events;for(var p=0,v=l.length;p<v;p++){var m=c-2;l[p].element[0].style.width=(m>0?m:c)+"px";l[p].element[0].style.left=(this._isRtl?s:0)+r.offsetLeft+f*c+2+"px"}}},_positionEvent:function(e,t,i){var n=e._startTime||e.start;var r=e._endTime||e.end;var a=S.getComputedStyles(i.start.element,["border-top-width","border-bottom-width"]);var o=i.innerRect(n,r,false);var s=o.bottom-o.top-parseFloat(a["border-top-width"])-parseFloat(a["border-bottom-width"]);if(s<0){s=0}t.css({top:o.top,height:s});this._arrangeColumns(t,o.top,t[0].clientHeight,i)},_createEventElement:function(e,t,i,n){var r=t?this.eventTemplate:this.allDayEventTemplate;var a=this.options;var o=a.editable;var s=this._isMobile();var l=o&&o.destroy!==false&&!s;var d=o&&o.resize!==false;var u=D(this.startDate());var c=D(this.endDate());var f=R(this.startTime());var h=R(this.endTime());var p=e._time("start");var v=e._time("end");var m;if(f>=h){h=R(new Date(this.endTime().getTime()+A-1))}if(!t&&!e.isAllDay){c=new Date(c.getTime()+A)}var g=e.start;var _=e.end;if(e.isAllDay){_=D(e.end)}if(!P(D(g),u,c)&&!P(_,u,c)||t&&p<f&&v>h){m=true}else if(D(g)<u||t&&p<f){n=true}else if(_>c&&!t||t&&v>h){i=true}var b=this.eventResources(e);if(e._startTime&&p!==S.date.getMilliseconds(e.start)){g=new Date(p);g=S.timezone.apply(g,"Etc/UTC")}if(e._endTime&&v!==S.date.getMilliseconds(e.end)){_=new Date(v);_=S.timezone.apply(_,"Etc/UTC")}var w=T({},{ns:S.ns,resizable:d,showDelete:l,middle:m,head:i,tail:n,singleDay:this._dates.length==1,resources:b,inverseColor:false,messages:a.messages},e,{start:g,end:_});var k=y(r(w));this.angular("compile",function(){return{elements:k,data:[{dataItem:w}]}});return k},_isInTimeSlot:function(e){var t=this.startTime(),i=this.endTime(),n=e._startTime||e.start,r=e._endTime||e.end;if(R(i)===R(S.date.getDate(i))){i=S.date.getDate(i);w(i,A-1)}if(e._date("end")>e._date("start")){r=+e._date("end")+(A-1)}r=e._endTime?r-e._date("end"):R(new Date(r));n=e._startTime?n-e._date("start"):R(new Date(n));i=R(i);t=R(t);if(t===n&&n===r){return true}var a=n!==i;return d(n,t,i,a)||d(r,t,i,a)||d(t,n,r)||d(i,n,r)},_isInDateSlot:function(e){var t=this.groups[0];var i=t.firstSlot().start;var n=t.lastSlot().end-1;var r=S.date.toUtcTime(e.start);var a=S.date.toUtcTime(e.end);return(P(r,i,n)||P(a,i,n)||P(i,r,a)||P(n,r,a))&&(!P(a,i,i)||P(a,r,r)||e.isAllDay)},_updateAllDayHeaderHeight:function(e){if(this._height!==e){this._height=e;var t=this.element.find(".k-scheduler-header-all-day td");if(t.length){t.parent().add(this.element.find(".k-scheduler-times-all-day").parent()).height(e);for(var i=0;i<this.groups.length;i++){this.groups[i].refresh()}}}},_renderEvents:function(e,t){var i=this.datesHeader.find(".k-scheduler-header-wrap > div");var n=this._isGroupedByDate();var r;var a;var o;for(a=0,o=e.length;a<o;a++){r=e[a];if(this._isInDateSlot(r)){var s=r.isAllDay||r.duration()>=A;var l=s&&!this._isVerticallyGrouped()?i:this.content;var d,u,c,f,h,p;if(!s){if(this._isInTimeSlot(r)){p=this.groups[t];if(!p){continue}if(!p._continuousEvents){p._continuousEvents=[]}u=p.slotRanges(r);var v=u.length;for(var m=0;m<v;m++){c=u[m];f=r.start;h=r.end;if(v>1){if(m===0){h=c.end.endDate()}else if(m==v-1){f=c.start.startDate()}else{f=c.start.startDate();h=c.end.endDate()}}var g=r.clone({start:f,end:h,_startTime:r._startTime,_endTime:r.endTime});if(this._isInTimeSlot(g)){var _=c.head;d=this._createEventElement(r,!s,_,c.tail);d.appendTo(l);this._inverseEventColor(d);this._positionEvent(g,d,c);z(p,c,d,false)}}}}else if(this.options.allDaySlot){p=this.groups[t];if(!p){continue}if(!p._continuousEvents){p._continuousEvents=[]}u=p.slotRanges(r);if(u.length){c=u[0];var b=c.start.index;var w=c.end.index;if(n&&b!==w){f=c.start.start;h=c.end.end;var k=f;var y=f;for(var x=c.start.index;x<=c.end.index;x++){d=this._createEventElement(r,!s,x!==w,x!==b);var C=p.daySlotRanges(k,y,true)[0];k=y+=S.date.MS_PER_DAY;this._positionAllDayEvent(d,C);z(p,C,d,true);d.appendTo(l);this._inverseEventColor(d)}}else{d=this._createEventElement(r,!s);this._positionAllDayEvent(d,u[0]);z(p,u[0],d,true);d.appendTo(l);this._inverseEventColor(d)}}}}}},render:function(e){this._headerColumnCount=0;this._cachedEvents=e;this._groups();this.element.find(".k-event").remove();e=new S.data.Query(e).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray();var i=[];this._eventsByResource(e,this.groupedResources,i);var t=y.map(this._dates,function(t){return Math.max.apply(null,y.map(i,function(e){return y.grep(e,function(e){return e.isMultiDay()&&P(t,D(e.start),D(e.end))}).length}))});var n=Math.max.apply(null,t);this._updateAllDayHeaderHeight((n+1)*this._allDayHeaderHeight);for(var r=0;r<i.length;r++){this._renderEvents(i[r],r)}this.refreshLayout();this._currentTime(false);this.trigger("activate")},_eventsByResource:function(e,t,i){var n=t[0];if(n){var r=n.dataSource.view();for(var a=0;a<r.length;a++){var o=this._resourceValue(n,r[a]);var s=new S.data.Query(e).filter({field:n.field,operator:b.groupEqFilter(o)}).toArray();if(t.length>1){this._eventsByResource(s,t.slice(1),i)}else{i.push(s)}}}else{i.push(e)}},_columnOffsetForResource:function(e){return this._columnCountForLevel(e)/this._columnCountForLevel(e-1)},_columnCountForLevel:function(e){var t=this.columnLevels[e];return t?t.length:0},_rowCountForLevel:function(e,t){t=t||this.rowLevels;var i=t[e];return i?i.length:0},clearSelection:function(){this.content.add(this.datesHeader).find(".k-state-selected").removeAttr("id").attr("aria-selected",false).removeClass("k-state-selected")},_updateDirection:function(e,t,i,n,r){var a=e.isAllDay;var o=t[0].start;var s=t[t.length-1].end;if(i){if(r){if(!a&&o.index===s.index&&o.collectionIndex===s.collectionIndex){e.backward=n}}else{if(a&&o.index===s.index||!a&&o.collectionIndex===s.collectionIndex){e.backward=n}}}},_changeViewPeriod:function(e,t,i){if(!i){var n=t?this.previousDate():this.nextDate();var r=e.start;var a=e.end;var o=this._isGroupedByDate()&&this._isVerticallyGrouped();var s=this.groups[e.groupIndex];var l=t?s._timeSlotCollections:s._getCollections(s.daySlotCollectionCount());var d=l[l.length-1]._slots;var u=!t&&!s.daySlotCollectionCount()?0:d.length-1;var c;var f,h;f=new Date(n);h=new Date(n);if(this._isInRange(f,h)){return false}e.start=f;e.end=h;if(o){var p=new Date(d[u].startDate());var v=new Date(d[u].endDate());c=R(v)?R(v):A;w(e.start,R(p));w(e.end,c);if(s.daySlotCollectionCount()){e.isAllDay=!e.isAllDay}}else{c=e.isAllDay||!R(a)?A:R(a);w(e.start,R(r));w(e.end,c)}if(!this._isVerticallyGrouped()){e.groupIndex=t?this.groups.length-1:0}e.events=[];return true}}});T(true,e,{MultiDayView:c,DayView:c.extend({options:{name:"DayView",title:"Day",selectedMobileDateFormat:"{0:MMM d}"},name:"day"}),WeekView:c.extend({options:{name:"WeekView",title:"Week",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}"},name:"week",calculateDateRange:function(){var e=this.options.date,t=S.date.dayOfWeek(e,this.calendarInfo().firstDay,-1),i,n,r=[];for(i=0,n=7;i<n;i++){r.push(t);t=S.date.nextDay(t)}this._render(r)}}),WorkWeekView:c.extend({options:{name:"WorkWeekView",title:"Work Week",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}"},name:"workWeek",nextDate:function(){var e=S.date.dayOfWeek(S.date.nextDay(this.startDate()),this.calendarInfo().firstDay,1);return S.date.addDays(e,this._workDays[0])},previousDate:function(){var e=S.date.dayOfWeek(this.startDate(),this.calendarInfo().firstDay,-1);var t=this._workDays;return S.date.addDays(e,t[t.length-1]-7)},calculateDateRange:function(){var e=this.options,t=e.date,i=S.date.dayOfWeek,n=i(t,this.calendarInfo().firstDay,-1),r=i(n,e.workWeekStart,1),a=i(r,e.workWeekEnd,1),o=[],s=e.workDays&&e.workDays.length?e.workDays.map(function(e){return i(n,e,1).getTime()}):null;if(s){r=n;a=i(r,this.calendarInfo().firstDay+6,1)}while(r<=a){if(s&&s.indexOf(r.getTime())>-1){o.push(r)}else if(!s){o.push(r)}r=S.date.nextDay(r)}this._render(o)}})})})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.scheduler.agendaview",["kendo.scheduler.view"],e)})(function(){var e={id:"scheduler.agendaview",name:"Scheduler Agenda View",category:"web",description:"The Scheduler Agenda View",depends:["scheduler.view"],hidden:true};(function(r){var g=window.kendo,p=g.ui,i=".kendoAgendaView";var n='<div class="k-task" title="#:(data.title || "").replace(/"/g,"\'")#" data-#=kendo.ns#uid="#=uid#">'+"# if (resources[0]) {#"+'<span class="k-scheduler-mark" style="background-color:#=resources[0].color#"></span>'+"# } #"+"# if (data.isException()) { #"+'<span class="k-icon k-i-non-recurrence"></span>'+"# } else if (data.isRecurring()) {#"+'<span class="k-icon k-i-reload"></span>'+"# } #"+'<span class="k-scheduler-task-text">{0}</span>'+"#if (showDelete) {#"+'<a href="\\#" class="k-link k-event-delete" title="${data.messages.destroy}" aria-label="${data.messages.destroy}"><span class="k-icon k-i-close"></span></a>'+"#}#"+"</div>";var e="# if (!isMobile) { #"+'<strong class="k-scheduler-agendaday">'+'#=kendo.toString(date, "dd")#'+"</strong>"+'<em class="k-scheduler-agendaweek">'+'#=kendo.toString(date,"dddd")#'+"</em>"+'<span class="k-scheduler-agendadate">'+'#=kendo.toString(date, "y")#'+"</span>"+"# } else { #"+'<div class="k-scheduler-datecolumn-wrap">'+'<span class="k-mobile-scheduler-agendadate">'+'<span class="k-mobile-scheduler-agendaday">#=kendo.toString(date, "dd")#</span>'+"&nbsp"+'<span class="k-mobile-scheduler-agendamonth">#=kendo.toString(date, "MMMM")#</span>'+"</span>"+'<span class="k-mobile-scheduler-agendaweekday">'+'#=kendo.toString(date, "dddd")#'+"</span>"+"</div>"+"# } #";var t="# if (!isMobile) { #"+'<strong class="k-scheduler-adgendagroup">'+"#=value#"+"</strong>"+"# } else { #"+'<span class="k-scheduler-group-text">'+"#=value#"+"</span>"+"# } #";var a=g.Class.extend({init:function(e){this._view=e},_getColumns:function(e,t){return e.concat(t)},_getGroupsInDay:function(){return[]},_getSumOfItemsForDate:function(){return 0},_renderTaskGroupsCells:function(e,t,i,n){var r=this._view;if(i===0&&n===0&&t.length){r._renderTaskGroupsCells(e,t)}},_renderDateCell:function(e,t,i,n,r,a){var o=this._view;var s=o._isMobile();e.push(g.format('<td class="k-scheduler-datecolumn{3}{2}" rowspan="{0}">{1}</td>',i.length,o._dateTemplate({date:n,isMobile:s}),r==a.length-1&&!t.length?" k-last":"",!t.length?" k-first":""))},_renderDates:function(){return undefined},_getParents:function(e){return e.splice(0)},_getGroupsByDate:function(){return undefined},_renderTaskGroups:function(e,t,i){var n=this._view;e.append(n._renderTaskGroups(t,i))}});var o=g.Class.extend({init:function(e){this._view=e},_getColumns:function(e,t){var i=this._view;if(i._isMobile()){return e.concat(t)}else{var n=t.slice(0,1);var r=t.slice(1);return n.concat(e).concat(r)}},_compareDateGroups:function(e,t,i){if(e[i].text==t[i].text){if(i===0){return true}else{return this._compareDateGroups(e,t,i-1)}}return false},_getGroupsInDay:function(e,t){var i=[];var n=null;for(var r=0;r<e.length;r++){for(var a=0;a<e[r].items.length;a++){var o=0;if(i.length===0){for(o;o<t[r].length;o++){i.push([1])}}else{for(o;o<t[r].length;o++){if(this._compareDateGroups(t[r],n,o)){i[o][i[o].length-1]++}else{var s=i[o][i[o].length-1]-1;for(var l=0;l<s;l++){i[o].push(0)}i[o].push(1)}}}n=t[r]}}return i},_getSumOfItemsForDate:function(e){var t=0;for(var i=0;i<e.length;i++){t+=e[i].items.length}return t},_renderTaskGroupsCells:function(e,t,i,n,r,a,o,s){var l=this._view;var d=l._isMobile();if(!d){if(i===0&&n===0){e.push(g.format('<td class="k-scheduler-datecolumn k-first" rowspan="{0}">{1}</td>',a,l._dateTemplate({date:o,isMobile:d})))}for(var u=0;u<t[i].length;u++){if(r[u][s]){e.push(g.format('<td class="k-scheduler-groupcolumn" rowspan="{0}">{1}</td>',r[u][s],l._groupTemplate({value:t[i][u].text,isMobile:d}),t[i][u].className))}}}else{if(i===0&&n===0&&t.length){l._renderTaskGroupsCells(e,t)}}},_renderDateCell:function(){return undefined},_renderDates:function(e){var t=this._view;var i=t._groupsByDate.sort(function(e,t){return e.array[0].value.getTime()-t.array[0].value.getTime()});for(var n=0;n<i.length;n++){e.append(t._renderTaskGroups(i[n].array,i[n].groups))}},_getParents:function(e){return e.slice(0)},_getGroupsByDate:function(e,t,i){var n=this._view;if(e[t].items){for(var r=0;r<e[t].items.length;r++){var a=e[t].items[r].value;var o=false;for(var s=0;s<n._groupsByDate.length;s++){if(n._groupsByDate[s].array[0].value.getTime()===a.getTime()){o=true;n._groupsByDate[s].array.push(e[t].items[r]);n._groupsByDate[s].groups.push(i)}}if(!o){n._groupsByDate.push({array:[e[t].items[r]],groups:[i]})}}}},_renderTaskGroups:function(){return undefined}});g.ui.scheduler.AgendaGroupedView=a;g.ui.scheduler.AgendaGroupedByDateView=o;p.AgendaView=p.SchedulerView.extend({init:function(e,t){p.SchedulerView.fn.init.call(this,e,t);this._groupedView=this._getGroupedView();t=this.options;if(t.editable){t.editable=r.extend({delete:true},t.editable,{create:false,update:false},{messages:t.messages})}this.title=t.title;this._eventTemplate=this._eventTmpl(t.eventTemplate,n);this._dateTemplate=g.template(t.eventDateTemplate);this._groupTemplate=g.template(t.eventGroupTemplate);this._timeTemplate=g.template(t.eventTimeTemplate);this.element.on("mouseenter"+i,".k-scheduler-agenda .k-scheduler-content tr","_mouseenter").on("mouseleave"+i,".k-scheduler-agenda .k-scheduler-content tr","_mouseleave").on("click"+i,".k-scheduler-agenda .k-scheduler-content .k-link:has(.k-i-close)","_remove");this._renderLayout(t.date);this.refreshLayout()},name:"agenda",_isVirtualized:function(){return false},_getGroupedView:function(){if(this._isGroupedByDate()){return new g.ui.scheduler.AgendaGroupedByDateView(this)}else{return new g.ui.scheduler.AgendaGroupedView(this)}},_mouseenter:function(e){r(e.currentTarget).addClass("k-state-hover")},_mouseleave:function(e){r(e.currentTarget).removeClass("k-state-hover")},_remove:function(e){e.preventDefault();this.trigger("remove",{uid:r(e.currentTarget).closest(".k-task").attr(g.attr("uid"))})},nextDate:function(){return g.date.nextDay(this.startDate())},startDate:function(){return this._startDate},endDate:function(){return this._endDate},previousDate:function(){return g.date.previousDay(this.startDate())},_renderLayout:function(e){this._startDate=e;this._endDate=g.date.addDays(e,7);this.createLayout(this._layout());this._footer();this.table.addClass("k-scheduler-agenda")},_layout:function(){var e=[{text:this.options.messages.time,className:"k-scheduler-timecolumn"},{text:this.options.messages.event}];if(!this._isMobile()){e.splice(0,0,{text:this.options.messages.date,className:"k-scheduler-datecolumn"})}var t=this.groupedResources;if(t.length){var i=[];for(var n=0;n<t.length;n++){i.push({text:"",className:"k-scheduler-groupcolumn"})}e=this._groupedView._getColumns(i,e)}return{columns:e}},_tasks:function(e){var t=[];for(var i=0;i<e.length;i++){var n=e[i];var r=n.start;var a=n.isAllDay?g.date.getDate(n.end):n.end;var o=g.date.getDate(r);var s=(o.getTimezoneOffset()-a.getTimezoneOffset())*6e4;var l=Math.ceil((a-o+s)/g.date.MS_PER_DAY);if(n.isAllDay){l+=1}var d=n.clone();d.startDate=g.date.getDate(r);if(d.startDate>=this.startDate()){t.push(d)}if(l>1){d.end=g.date.nextDay(r);d.head=true;for(var u=1;u<l;u++){r=d.end;d=n.clone();d.start=d.startDate=g.date.getDate(r);d.end=g.date.nextDay(r);if(u==l-1){d.end=new Date(d.start.getFullYear(),d.start.getMonth(),d.start.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds());d.tail=true}else{d.isAllDay=true;d.middle=true}if(g.date.getDate(d.end)<=this.endDate()&&d.start>=this.startDate()||g.date.getDate(d.start).getTime()==this.endDate().getTime()){t.push(d)}}}}return new g.data.Query(t).sort([{field:"start",dir:"asc"},{field:"end",dir:"asc"}]).groupBy({field:"startDate"}).toArray()},_renderTaskGroups:function(e,t){var i=[];var n=this.options.editable;var r=n&&n.destroy!==false&&!this._isMobile();var a=this._isMobile();var o=this._groupedView._getSumOfItemsForDate(e);var s=this._groupedView._getGroupsInDay(e,t);var l=0;for(var d=0;d<e.length;d++){var u=e[d].value;var c=e[d].items;var f=g.date.isToday(u);for(var h=0;h<c.length;h++){var p=c[h];var v=[];var m=!a?v:[];this._groupedView._renderTaskGroupsCells(m,t,d,h,s,o,u,l);l++;if(h===0){if(a){m.push(g.format('<td class="k-scheduler-datecolumn {1}" colspan="2">{0}</td>',this._dateTemplate({date:u,isMobile:a}),!this.groupedResources.length?"k-first":""));i.push('<tr role="row" aria-selected="false"'+(f?' class="k-today">':">")+m.join("")+"</tr>")}else{this._groupedView._renderDateCell(v,t,c,u,d,e)}}if(p.head){p.format="{0:t}"}else if(p.tail){p.format="{1:t}"}else{p.format="{0:t}-{1:t}"}p.resources=this.eventResources(p);v.push(g.format('<td class="k-scheduler-timecolumn {4}"><div>{0}{1}{2}</div></td><td>{3}</td>',p.tail||p.middle?'<span class="k-icon k-i-arrow-60-left"></span>':"",this._timeTemplate(p.clone({start:p._startTime||p.start,end:p.endTime||p.end})),p.head||p.middle?'<span class="k-icon k-i-arrow-60-right"></span>':"",this._eventTemplate(p.clone({showDelete:r,messages:this.options.messages})),!this.groupedResources.length&&a?"k-first":""));i.push('<tr role="row" aria-selected="false"'+(f?' class="k-today">':">")+v.join("")+"</tr>")}}return i.join("")},_renderTaskGroupsCells:function(e,t){var i=this._isMobile();for(var n=0;n<t.length;n++){e.push(g.format('<td class="k-scheduler-groupcolumn{2}" rowspan="{0}">{1}</td>',t[n].rowSpan,this._groupTemplate({value:t[n].text,isMobile:i}),t[n].className))}},render:function(e){var t=this.content.find("table").empty();var i=[];if(e.length>0){var n=this.groupedResources;if(n.length){i=this._createGroupConfiguration(e,n,null);this._groupsByDate=[];this._renderGroups(i,t,[]);this._groupedView._renderDates(t)}else{i=this._tasks(e);t.append(this._renderTaskGroups(i,[]))}}var r=this._eventsList=s(i);this._angularItems(t,r);this.refreshLayout();this.trigger("activate")},_angularItems:function(i,n){this.angular("compile",function(){var t=[],e=n.map(function(e){t.push({dataItem:e});return i.find(".k-task["+g.attr("uid")+"="+e.uid+"]")});return{elements:e,data:t}})},_renderGroups:function(e,t,i){for(var n=0,r=e.length;n<r;n++){var a=this._groupedView._getParents(i);a.push(e[n]);this._groupedView._getGroupsByDate(e,n,a);if(e[n].groups){this._renderGroups(e[n].groups,t,a)}else{this._groupedView._renderTaskGroups(t,e[n].items,a)}}},_createGroupConfiguration:function(e,t,i){var n=t[0];var r=[];var a=n.dataSource.view();var o=this._isMobile();for(var s=0;s<a.length;s++){var l=m(n,a[s]);var d=new g.data.Query(e).filter({field:n.field,operator:p.SchedulerView.groupEqFilter(l)}).toArray();if(d.length){var u=this._tasks(d);var c=i?"":" k-first";if(s===a.length-1&&(!i||i.className.indexOf("k-last")>-1)){c+=" k-last"}var f={text:g.getter(n.dataTextField)(a[s]),value:l,rowSpan:0,className:c};if(t.length>1){f.groups=this._createGroupConfiguration(d,t.slice(1),f);if(i){i.rowSpan+=f.rowSpan}}else{f.items=u;var h=v(f.items);if(o){h+=f.items.length}f.rowSpan=h;if(i){i.rowSpan+=h}}r.push(f)}}return r},selectionByElement:function(e){var t,i;e=r(e);if(e.hasClass("k-scheduler-datecolumn")||!this._eventsList.length){return}if(e.is(".k-task")){e=e.closest("td")}if(this._isMobile()){var n=e.parent();t=n.parent().children().filter(function(){return r(this).children(":not(.k-scheduler-datecolumn)").length}).index(n)}else{t=e.parent().index()}i=this._eventsList[t];return{index:t,start:i.start,end:i.end,isAllDay:i.isAllDay,uid:i.uid}},select:function(e){this.clearSelection();var t=this.table.find(".k-task").eq(e.index).closest("tr").addClass("k-state-selected").attr("aria-selected",true)[0];this.current(t)},move:function(e,t){var i=false;var n=e.index;if(t==g.keys.UP){n--;i=true}else if(t==g.keys.DOWN){n++;i=true}if(i){var r=this._eventsList[n];if(r){e.start=r.start;e.end=r.end;e.isAllDay=r.isAllDay;e.events=[r.uid];e.index=n}}return i},moveToEvent:function(){return false},constrainSelection:function(e){var t=this._eventsList[0];if(t){e.start=t.start;e.end=t.end;e.isAllDay=t.isAllDay;e.events=[t.uid];e.index=0}},isInRange:function(){return true},destroy:function(){if(this.element){this.element.off(i)}p.SchedulerView.fn.destroy.call(this)},options:{title:"Agenda",name:"agenda",editable:true,selectedDateFormat:"{0:D}-{1:D}",selectedShortDateFormat:"{0:d} - {1:d}",selectedMobileDateFormat:"{0: MMM} {0:dd} - {1:dd}",eventTemplate:"#:title#",eventTimeTemplate:"#if(data.isAllDay) {#"+"#=this.options.messages.allDay#"+"#} else { #"+"#=kendo.format(format, start, end)#"+"# } #",eventDateTemplate:e,eventGroupTemplate:t,messages:{event:"Event",date:"Date",time:"Time",allDay:"all day"}}});function v(e){var t=0;for(var i=0,n=e.length;i<n;i++){t+=e[i].items.length}return t}function m(e,t){if(e.valuePrimitive){t=g.getter(e.dataValueField)(t)}return t}function s(e){var t=0,i=e.length,n,r=[];for(;t<i;t++){n=e[t];if(n.groups){n=l(n.groups);r=r.concat(n)}else{r=r.concat(l(n.items))}}return r}function l(e){var t=[].concat(e),i=t.shift(),n=[],r=[].push;while(i){if(i.groups){r.apply(t,i.groups)}else if(i.items){r.apply(t,i.items)}else{r.call(n,i)}i=t.shift()}return n}})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.scheduler.monthview",["kendo.scheduler.view"],e)})(function(){var e={id:"scheduler.monthview",name:"Scheduler Month View",category:"web",description:"The Scheduler Month View",depends:["scheduler.view"],hidden:true};(function(C){var S=window.kendo,e=S.ui,T=e.SchedulerView,t=".kendoMonthView",a=C.extend,h=S.date.getDate,r=S.date.MS_PER_DAY,k=6,y=7,l="k-event-inverse",i=S.template('<span class="k-link k-nav-day">#:kendo.toString(date, "dd")#</span>'),n='<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#"'+"#if (resources[0]) { #"+'style="background-color:#=resources[0].color #; border-color: #=resources[0].color#"'+'class="k-event"'+"#} else {#"+'class="k-event"'+"#}#"+">"+'<span class="k-event-actions">'+"# if (data.tail || data.middle) {#"+'<span class="k-icon k-i-arrow-60-left"></span>'+"#}#"+"# if (data.isException()) {#"+'<span class="k-icon k-i-non-recurrence"></span>'+"# } else if (data.isRecurring()) {#"+'<span class="k-icon k-i-reload"></span>'+"#}#"+"</span>"+"{0}"+'<span class="k-event-actions">'+"#if (showDelete) {#"+'<a href="\\#" class="k-link k-event-delete" title="${data.messages.destroy}" aria-label="${data.messages.destroy}"><span class="k-icon k-i-close"></span></a>'+"#}#"+"# if (data.head || data.middle) {#"+'<span class="k-icon k-i-arrow-60-right"></span>'+"#}#"+"</span>"+"# if (resizable && !data.tail && !data.middle) {#"+'<span class="k-resize-handle k-resize-w"></span>'+"#}#"+"# if (resizable && !data.head && !data.middle) {#"+'<span class="k-resize-handle k-resize-e"></span>'+"#}#"+"</div>",o=S.template('<div title="#=title.replace(/"/g,"&\\#34;")#">'+'<div class="k-event-template">#:title#</div>'+"</div>");var D=2;var A=S.template('<div style="width:#=width#px;left:#=left#px;top:#=top#px" class="k-more-events k-button"><span class="k-icon k-i-more-horizontal"></span></div>');var s=S.Class.extend({init:function(e){this._view=e},_verticalRowCountForLevel:function(e){var t=this._view;return t._rowCountForLevel(e)},_horizontalGroupCountForLevel:function(e){var t=this._view;return t._columnCountForLevel(e)},_getCalendarRowsLength:function(e,t){return t/e},_createRows:function(e,t,i,n){var r=this._view;var a=y;var o=r._isVerticallyGrouped();var s="";for(var l=0;l<i;l++){s+=r._createRow(e,t,a,o?n:l)}return s},_adjustStartDate:function(e){return S.date.addDays(e,y)},_getContent:function(e,t,i){return e({date:t,resources:i})},_getTimeSlotByPosition:function(e,t,i){var n=this._view.groups[i];return n.daySlotByPosition(e,t)},_nextSlotStartDate:function(e){return S.date.nextDay(e)},_createRowsLayout:function(e,t,i){var n=this._view;return n._createRowsLayout(e,t,i)},_createVerticalColumnsLayout:function(e,t,i,n){return n},_createColumnsLayout:function(e,t,i){var n=this._view;return n._createColumnsLayout(e,t,i)},_verticalGroupCount:function(e){var t=this._view;return t._rowCountForLevel(e)},_horizontalGroupCount:function(e){var t=this._view;return t._columnCountForLevel(e)/t._columnOffsetForResource(e)},_positionMobileEvent:function(e,t,i,n,r,a,o){var s=this._view;if(n>1){if(o===0){a=i.end.endDate()}else if(o==n-1){r=i.start.startDate()}else{r=i.start.startDate();a=i.end.endDate()}}var l=e.clone({start:r,end:a,head:i.head,tail:i.tail});s._positionMobileEvent(i,s._createEventElement(l),t)},_positionEvent:function(e,t,i,n,r,a,o){var s=this._view;if(n>1){if(o===0){a=i.end.endDate()}else if(o==n-1){r=i.start.startDate()}else{r=i.start.startDate();a=i.end.endDate()}}var l=e.clone({start:r,end:a,head:i.head,tail:i.tail});s._positionEvent(i,s._createEventElement(l),t)},_addDaySlotCollections:function(e,t,i){var n=this._view;var r=y;var a=k;for(var o=0;o<e;o++){var s=0;var l=0;if(n._isVerticallyGrouped()){l=o}for(var d=l*a;d<(l+1)*a;d++){var u=n.groups[o];var c=u.addDaySlotCollection(S.date.addDays(i,s),S.date.addDays(i,s+r));var f=t[d];var h=f.children;var p=0;f.setAttribute("role","row");if(!n._isVerticallyGrouped()){p=o}for(var v=p*r;v<(p+1)*r;v++){var m=h[v];n.addDaySlot(c,m,i,s);s++}}}},_changePeriodGroupIndex:function(e){var t=this._view;return e?t.groups.length-1:0},_createResizeHint:function(e){var t=this._view;var i=e.startSlot().offsetLeft;var n=e.start.offsetTop;var r=e.innerWidth();var a=e.start.clientHeight-2;var o=T.fn._createResizeHint.call(t,i,n,r,a);t._appendResizeHint(o)},_createMoveHint:function(e,t){var i=this._view;var n=e.startSlot();var r=e.endSlot();var a=i._createEventElement(t.clone({head:e.head,tail:e.tail}));a.css({left:n.offsetLeft+2,top:n.offsetTop+n.firstChildHeight,height:i.options.eventHeight==="auto"?25:i.options.eventHeight,width:e.innerWidth()-(n.index!==r.index?3:2)});a.addClass("k-event-drag-hint");if(t.inverseColor){a.addClass(l)}i._appendMoveHint(a)}});var d=S.Class.extend({init:function(e){this._view=e},_verticalRowCountForLevel:function(){return 1},_horizontalGroupCountForLevel:function(e){var t=this._view;return t._columnCountForLevel(e+1)/y},_createRows:function(e,t,i){var n=this._view;var r=y;var a=n._isVerticallyGrouped();var o="";var s=0;if(a){var l=new Date(e);var d=n._groupCount();for(s;s<k;s++){o+=n._createRow(l,t,d,s);l=S.date.addDays(l,r)}e=S.date.nextDay(e)}else{for(s;s<r;s++){o+=n._createRow(e,t,i,s);e=S.date.nextDay(e)}e=S.date.addDays(e,r)}return o},_adjustStartDate:function(e,t){var i=this._view;var n=i._isVerticallyGrouped();if(n){if(t){return S.date.addDays(e,y*(k-1)+1)}else{return S.date.nextDay(e)}}return S.date.addDays(e,y)},_getContent:function(e,t,i,n){if(n===0){return e({date:t,resources:i})}return""},_getTimeSlotByPosition:function(e,t,i){var n=this._view.groups[i];return n.daySlotByPosition(e,t,true)},_nextSlotStartDate:function(e){return e},_getCalendarRowsLength:function(){var e=this._view;var t=e._isVerticallyGrouped();return t?y:k},_createRowsLayout:function(e,t,i,n){var r=this._view;return r._createDateLayout(n,null,false)},_createVerticalColumnsLayout:function(e,t,i){var n=this._view;var r=e[0];var a=[];var o=r.dataSource.view();for(var s=0;s<o.length*k;s++){var l={text:i({text:S.htmlEncode(S.getter(r.dataTextField)(o[s%o.length])),color:S.getter(r.dataColorField)(o[s%o.length]),field:r.field,title:r.title,name:r.name,value:S.getter(r.dataValueField)(o[s%o.length])}),className:"k-slot-cell"};l.columns=n._createColumnsLayout(e.slice(1),null,i);a.push(l)}return a},_createColumnsLayout:function(e,t,i,n){var r=this._view;return r._createColumnsLayout(e,t,i,n,true)},_verticalGroupCount:function(e){var t=this._view;return t._columnCountForLevel(e)/k},_horizontalGroupCount:function(e){var t=this._view;return t._columnCountForLevel(e)/y},_positionMobileEvent:function(e,t,i,n,r,a){var o=this._view;var s=i.start.index;var l=i.end.index;for(var d=i.start.index;d<=i.end.index;d++){var u=i.collection._slots[d];var c=t.daySlotRanges(u.start,u.start,true)[0];var f=e.clone({start:d===s?r:u.startDate(),end:d===l?a:u.endDate(),head:d!==l||i.head,tail:d!==s||i.tail});o._positionMobileEvent(c,o._createEventElement(f),t)}},_positionEvent:function(e,t,i,n,r,a){var o=this._view;var s=i.start.index;var l=i.end.index;for(var d=i.start.index;d<=i.end.index;d++){var u=i.collection._slots[d];var c=t.daySlotRanges(u.start,u.start,true)[0];var f=e.clone({start:d===s?r:u.startDate(),end:d===l?a:u.endDate(),head:d!==l||i.head,tail:d!==s||i.tail});o._positionEvent(c,o._createEventElement(f),t)}},_addDaySlotCollections:function(e,t,i){var n=this._view;var r=y;var a=k;var o=n._isVerticallyGrouped();for(var s=0;s<r;s++){for(var l=0;l<a;l++){var d=0;var u=o?s:l;var c=t[u];var f=c.children;var h=0;c.setAttribute("role","row");if(!n._isVerticallyGrouped()){h=s}for(var p=h*e;p<(h+1)*e;p++){var v=l*r+s;var m=o?p+l*e:p;var g=f[m];var _=o?p:d;var b=n.groups[_];var w;if(s===0){w=b.addDaySlotCollection(S.date.addDays(i,v),S.date.addDays(i,v+r))}else{w=b._daySlotCollections[l]}n.addDaySlot(w,g,i,v);d++}}}},_changePeriodGroupIndex:function(e,t,i){var n=this._view;if(t&&n._isVerticallyGrouped()){return e?n.groups.length-1:0}return i},_createResizeHint:function(e){var t=this._view;var i,n,r,a,o;if(t._isVerticallyGrouped()){i=e.startSlot().offsetLeft;n=e.start.offsetTop;r=e.startSlot().offsetWidth;a=e.endSlot().offsetTop+e.startSlot().offsetHeight-e.startSlot().offsetTop-2;o=T.fn._createResizeHint.call(t,i,n,r,a);t._appendResizeHint(o)}else{for(var s=e.startSlot().index;s<=e.endSlot().index;s++){var l=e.collection._slots[s];i=l.offsetLeft;n=l.offsetTop;r=l.offsetWidth;a=l.offsetHeight-2;o=T.fn._createResizeHint.call(t,i,n,r,a);t._appendResizeHint(o)}}},_createMoveHint:function(e,t){var i=this._view;var n=e.startSlot();var r=e.endSlot();for(var a=n.index;a<=r.index;a++){var o=e.collection._slots[a];var s=i._createEventElement(t.clone({head:e.head,tail:e.tail}));s.css({left:o.offsetLeft,top:o.offsetTop+o.firstChildHeight,height:i.options.eventHeight==="auto"?25:i.options.eventHeight,width:o.offsetWidth-2});s.addClass("k-event-drag-hint");if(t.inverseColor){s.addClass(l)}i._appendMoveHint(s)}}});S.ui.scheduler.MonthGroupedView=s;S.ui.scheduler.MonthGroupedByDateView=d;e.MonthView=T.extend({init:function(e,t){var i=this;if(t.eventsPerDay===0){t.eventsPerDay=1}if(t.eventHeight===0){t.eventHeight=1}if(t.moreButtonHeight===0){t.moreButtonHeight=1}if(typeof t.eventHeight==="string"&&t.eventHeight!=="auto"){t.eventHeight=25}if(t.eventHeight==="auto"){t.adaptiveSlotHeight=true}T.fn.init.call(i,e,t);i._groupedView=i._getGroupedView();var n=this._isGroupedByDate();var r=this.options.adaptiveSlotHeight;var a=this.options.eventHeight;if(n===true&&r===true){throw new Error("Incompatible options: adaptive slot height and date grouping!")}if(n===true&&a==="auto"){throw new Error("Incompatible options: auto event height and date grouping!")}i.title=i.options.title;i._templates();i._editable();i._renderLayout(i.options.date);i._groups()},name:"month",_getGroupedView:function(){if(this._isGroupedByDate()){return new S.ui.scheduler.MonthGroupedByDateView(this)}else{return new S.ui.scheduler.MonthGroupedView(this)}},_updateDirection:function(e,t,i,n,r){if(i){var a=t[0].start;var o=t[t.length-1].end;var s=a.index===o.index;var l=a.collectionIndex===o.collectionIndex;var d;if(r){d=s&&l||l}else{d=s&&l}if(d){e.backward=n}}},_changeDate:function(e,t,i){var n=this.groups[e.groupIndex];var r,a;if(i){r=n._getCollections(n.daySlotCollectionCount());a=t.collectionIndex-1;if(a>=0){return r[a]._slots[r[a]._slots.length-1]}}else{r=n._getCollections(n.daySlotCollectionCount());a=t.collectionIndex+1;var o=0;if(r[a]&&r[a]._slots[o]){return r[a]._slots[o]}}},_getNextHorizontalRange:function(e,t,i){var n=this._isVerticallyGrouped();i.startSlot=e[t](i.startSlot,n);i.endSlot=e[t](i.endSlot,n);return i},_getNextVerticalRange:function(e,t,i,n){var r=this._isVerticallyGrouped()&&this._isGroupedByDate();i.startSlot=e[t](i.startSlot,n,r);i.endSlot=e[t](i.endSlot,n,r);return i},_changeViewPeriod:function(e,t,i){var n=i?7:1;var r,a;if(t){n*=-1}r=S.date.addDays(e.start,n);a=S.date.addDays(e.end,n);if(this._isInRange(r,a)){return false}e.start=r;e.end=a;if(!i||i&&this._isVerticallyGrouped()){e.groupIndex=this._groupedView._changePeriodGroupIndex(t,i,e.groupIndex)}e.events=[];return true},_continuousSlot:function(e,t,i){var n=e.backward?0:t.length-1;var r=this.groups[e.groupIndex];return r.continuousSlot(t[n].start,i)},_changeGroupContinuously:function(e,t,i,n){if(!i){var r=e.groupIndex;var a=this.groups.length-1;var o=this._isVerticallyGrouped();var s=this.groups[r];if(!t&&o){t=s[n?"lastSlot":"firstSlot"]();r+=n?-1:1}else if(t&&!o){r=n?a:0}if(r<0||r>a){r=n?a:0;t=null}e.groupIndex=r}return t},_normalizeHorizontalSelection:function(e,t,i){var n;if(i){n=t[0].start}else{n=t[t.length-1].end}return n},_normalizeVerticalSelection:function(e,t){var i;if(e.backward){i=t[0].start}else{i=t[t.length-1].end}return i},_templates:function(){var e=this.options,t=a({},S.Template,e.templateSettings);this.eventTemplate=this._eventTmpl(e.eventTemplate,n);this.dayTemplate=S.template(e.dayTemplate,t);this.groupHeaderTemplate=S.template(e.groupHeaderTemplate,t)},dateForTitle:function(){return S.format(this.options.selectedDateFormat,this._firstDayOfMonth,this._lastDayOfMonth)},shortDateForTitle:function(){return S.format(this.options.selectedShortDateFormat,this._firstDayOfMonth,this._lastDayOfMonth)},mobileDateForTitle:function(){return S.format(this.options.selectedMobileDateFormat,this._firstDayOfMonth,this._lastDayOfMonth)},nextDate:function(){return S.date.nextDay(this._lastDayOfMonth)},previousDate:function(){return S.date.previousDay(this._firstDayOfMonth)},startDate:function(){return this._startDate},endDate:function(){return this._endDate},_renderLayout:function(e){var n=this;this._firstDayOfMonth=S.date.firstDayOfMonth(e);this._lastDayOfMonth=S.date.lastDayOfMonth(e);this._startDate=c(e,this.calendarInfo());this.createLayout(this._layout());this._content();this._initSlotHeight();this.refreshLayout();if(this._isVirtualized()){this._tryRenderContent()}this.content.on("click"+t,".k-nav-day,.k-more-events",function(e){var t=C(e.currentTarget).offset();var i=n._slotByPosition(t.left,t.top);e.preventDefault();n.trigger("navigate",{view:"day",date:i.startDate()})});this._footer()},_editable:function(){if(this.options.editable){if(this._isMobile()){this._touchEditable()}else{this._mouseEditable()}}},_mouseEditable:function(){var r=this;r.element.on("click"+t,".k-scheduler-monthview .k-event a:has(.k-i-close)",function(e){r.trigger("remove",{uid:C(this).closest(".k-event").attr(S.attr("uid"))});e.preventDefault()});if(r.options.editable.create!==false){r.element.on("dblclick"+t,".k-scheduler-monthview .k-scheduler-content td",function(e){var t=C(e.currentTarget).offset();var i=r._slotByPosition(t.left,t.top);if(i){var n=r._resourceBySlot(i);r.trigger("add",{eventInfo:a({isAllDay:true,start:i.startDate(),end:i.startDate()},n)})}e.preventDefault()})}if(r.options.editable.update!==false){r.element.on("dblclick"+t,".k-scheduler-monthview .k-event",function(e){r.trigger("edit",{uid:C(this).closest(".k-event").attr(S.attr("uid"))});e.preventDefault()})}},_touchEditable:function(){var r=this;var e=0;if(S.support.mobileOS.android){e=5}if(r.options.editable.create!==false){r._addUserEvents=new S.UserEvents(r.element,{threshold:e,useClickAsTap:!S.support.browser.edge,filter:".k-scheduler-monthview .k-scheduler-content td",tap:function(e){if(r._scrolling){return}var t=C(e.target).offset();var i=r._slotByPosition(t.left,t.top);if(i){var n=r._resourceBySlot(i);r.trigger("add",{eventInfo:a({isAllDay:true,start:i.startDate(),end:i.startDate()},n)})}e.preventDefault()}})}},selectionByElement:function(e){var t=C(e).offset();return this._slotByPosition(t.left,t.top)},_columnCountForLevel:function(e){var t=this.columnLevels[e];return t?t.length:0},_rowCountForLevel:function(e){var t=this.rowLevels[e];return t?t.length:0},_content:function(){var e="<tbody>";var t=1;var i=this._groupedView;var n=this.groupedResources;if(n.length){if(this._isVerticallyGrouped()){t=i._verticalRowCountForLevel(n.length-1)}}for(var r=0;r<t;r++){e+=this._createCalendar(r);this._cachedGroupIndex=r}e+="</tbody>";this.content.find("table").html(e)},_virtualContent:function(){var e=this;var t="";t+=this._createCalendar(++this._cachedGroupIndex);e.content.find("table tbody").append(t);e._initSlotHeight()},_calcSlotHeight:function(e){var t=this.options;var i=t.eventHeight;var n=t.eventSpacing;var r=t.moreButtonHeight;var a=this.content.find("table tr td")[0];var o;if(i==="auto"||!a){return undefined}o=a.firstChild;return Math.round(a.offsetHeight-a.clientHeight+o.offsetTop+o.offsetHeight+D+e*i+(e-1)*n+(D+r)+D)},_initSlotHeight:function(){var e=this.options;var t=e.eventsPerDay;var i=e.eventHeight;var n=this._isMobile();var r=this.content.find("table");var a;if(n){return}if(typeof i==="number"){r.addClass("k-scheduler-table-auto");a=this._calcSlotHeight(t);r.find("tr").height(a)}},_adjustSlotHeight:function(e){var t=this.options;var s=t.eventHeight;var l=t.eventSpacing;var d=t.moreButtonHeight;if(this._canAdjustSlotHeight!==true){return}var i=e._daySlotCollections;this.content.find("table").addClass("k-scheduler-table-auto");i.forEach(function(e){var n=e._events;var r=0;var t=e._slots;var i=t[0];var a=i.element.offsetTop;var o=0;t.forEach(function(e){if(!e.eventMeta){e.eventMeta=[];e.actualEventCount=0}else{e.actualEventCount=e.eventMeta.length}});t.forEach(function(r,e){r.eventMeta.forEach(function(i,n){if(i.startIndex!==e){return}if(i.startIndex===i.endIndex){return}t.slice(e,i.endIndex+1).forEach(function(e){var t=e.eventMeta;if(t.indexOf(i)>-1){return}t[t.length]=r.eventMeta[n];e.actualEventCount=t.length;e.dirty=true})});if(r.dirty===true){r.eventMeta.sort(function(e,t){return e.order-t.order});delete r.dirty}});if(s==="auto"){t.forEach(function(e,t){var i=e.firstChildTop+e.firstChildHeight+D;e.eventMeta.forEach(function(e,t){e.top=Math.max(e.top,a+i);i=e.top-a+l+e.height})})}t.forEach(function(e,t){var i=e.firstChildTop+e.firstChildHeight+D;e.eventMeta.forEach(function(e){e.top=Math.max(e.top,a+i);i=e.top-a+l+e.height;if(e.startIndex===t){n[r].element[0].style.top=e.top+"px";r++}});if(e.eventMeta.length>0){i-=l;i+=D}else{i+=s==="auto"?25:s}if(e.more){e.more[0].style.top=a+i+"px";i+=D+d}o=Math.max(o,i+1)});i.element.parentNode.style.height=o+"px";t.forEach(function(e){e.offsetTop=a;e.offsetHeight=o;e.clientHeight=o-1})}.bind(this))},_createCalendar:function(e){var t=this.startDate();var i=y*k;var n=y;var r=[t];var a="";var o=1;var s=this._isVerticallyGrouped();var l=this._groupedView;var d=this.groupedResources;if(d.length){if(!s){o=l._horizontalGroupCountForLevel(d.length-1)}}this._slotIndices={};var u=l._getCalendarRowsLength(n,i);for(var c=0;c<u;c++){a+="<tr>";r.push(t);var f=c*n;a+=l._createRows(t,f,o,e);t=l._adjustStartDate(t,c===u-1);a+="</tr>"}this._weekStartDates=r;this._endDate=S.date.previousDay(t);return a},_createRow:function(e,t,i,n){var r=this;var a=r._firstDayOfMonth;var o=r._lastDayOfMonth;var s=r.dayTemplate;var l="";var d="";var u=this._groupedView;var c=function(){return r._resourceBySlot({groupIndex:n})};for(var f=0;f<i;f++){l="";if(S.date.isToday(e)){l+="k-today"}if(!S.date.isInDateRange(e,a,o)){l+=" k-other-month"}d+="<td ";if(l!==""){d+='class="'+l+'"'}d+=">";d+=u._getContent(s,e,c,f);d+="</td>";r._slotIndices[h(e).getTime()]=t+f;e=u._nextSlotStartDate(e)}return d},_layout:function(){var e=this.calendarInfo();var t=this._isMobile()?e.days.namesShort.map(function(e){return e[0]}):e.days.names;var i=u(t,e.firstDay);var n=C.map(i,function(e){return{text:e}});var r=this.groupedResources;var a;var o=this._groupedView;if(r.length){if(this._isVerticallyGrouped()){var s=[];for(var l=0;l<6;l++){s.push({text:"<div>&nbsp;</div>",className:"k-hidden k-slot-cell"})}a=o._createRowsLayout(r,s,this.groupHeaderTemplate,n);n=o._createVerticalColumnsLayout(r,s,this.groupHeaderTemplate,n)}else{n=o._createColumnsLayout(r,n,this.groupHeaderTemplate,n)}}return{columns:n,rows:a}},_createEventElement:function(e){var t=this.options;var i=t.editable;var n=this._isMobile();e.showDelete=i&&i.destroy!==false&&!n;e.resizable=i&&i.resize!==false&&!n;e.ns=S.ns;e.resources=this.eventResources(e);e.inverseColor=false;e.messages=t.messages||{destroy:"Delete"};var r=C(this.eventTemplate(e));this.angular("compile",function(){return{elements:r,data:[{dataItem:e}]}});return r},_isInDateSlot:function(e){var t=this.groups[0];var i=t.firstSlot().start;var n=t.lastSlot().end-1;var r=S.date.toUtcTime(e.start);var a=S.date.toUtcTime(e.end);return(f(r,i,n)||f(a,i,n)||f(i,r,a)||f(n,r,a))&&(!f(a,i,i)||f(a,r,r)||e.isAllDay)},_slotIndex:function(e){return this._slotIndices[h(e).getTime()]},_positionMobileEvent:function(e,t,i){var n=e.start;if(e.start.offsetLeft>e.end.offsetLeft){n=e.end}var r=e.start.index;var a=r;var o=3;var s=T.collidingEvents(e.events(),r,a);s.push({element:t,start:r,end:a});var l=T.createRows(s);var d=e.collection.at(r);var u=d.container;if(!u){u=C(S.format('<div class="k-events-container" style="top:{0};left:{1};width:{2}"></div>',n.offsetTop+n.firstChildTop+n.firstChildHeight+"px",n.offsetLeft+"px",n.offsetWidth+"px"));d.container=u;this.content[0].appendChild(u[0])}if(l.length<=o){e.addEvent({element:t,start:r,end:a,groupIndex:n.groupIndex});i._continuousEvents.push({element:t,uid:t.attr(S.attr("uid")),start:e.start,end:e.end});u[0].appendChild(t[0])}},_positionEvent:function(e,t,i){var n=this.options.eventHeight;var r=this.options.eventSpacing;var a=e.start;if(e.start.offsetLeft>e.end.offsetLeft){a=e.end}var o=e.start.index;var s=e.end.index;var l=a.eventCount;var d=T.collidingEvents(e.events(),o,s);var u=o!==s?3:2;d.push({element:t,start:o,end:s});var c=T.createRows(d);for(var f=0,h=Math.min(c.length,l);f<h;f++){var p=c[f].events;var v=n==="auto"?"":a.offsetTop+a.firstChildTop+a.firstChildHeight+D+f*(n+r)+"px";for(var m=0,g=p.length;m<g;m++){p[m].element[0].style.top=v;p[m].element.attr(S.attr("order"),f)}}if(c.length>l){for(var _=o;_<=s;_++){var b=e.collection;var w=b.at(_);if(w.more){continue}w.more=C(A({ns:S.ns,start:_,end:_,width:w.clientWidth-2,left:w.offsetLeft+2,top:n==="auto"?"":w.offsetTop+w.firstChildTop+w.firstChildHeight+D+l*n+(l-1)*r+D}));this.content[0].appendChild(w.more[0])}}else{e.addEvent({element:t,start:o,end:s,groupIndex:a.groupIndex});t[0].style.width=e.innerWidth()-u+"px";t[0].style.left=a.offsetLeft+2+"px";t[0].style.height=n==="auto"?"":n+"px";i._continuousEvents.push({element:t,uid:t.attr(S.attr("uid")),start:e.start,end:e.end,order:parseInt(t.attr(S.attr("order")),10)});t.appendTo(this.content);this._inverseEventColor(t);var k=e.start.collectionIndex;var y=e.start.index;var x=i._daySlotCollections[k]._slots[y];if(!x.eventMeta){x.eventMeta=[]}x.eventMeta.push({height:n==="auto"?t.outerHeight():n,top:0,startIndex:y,endIndex:e.end.index,uid:t.attr(S.attr("uid")),order:parseInt(t.attr(S.attr("order")),10)})}},_slotByPosition:function(e,t){var i=this.content.offset();e-=i.left;t-=i.top;t+=this.content[0].scrollTop;e+=this.content[0].scrollLeft;e=Math.ceil(e);t=Math.ceil(t);for(var n=0;n<this.groups.length;n++){var r=this._groupedView._getTimeSlotByPosition(e,t,n);if(r){return r}}return null},_appendResizeHint:function(e){e.appendTo(this.content);this._resizeHint=this._resizeHint.add(e)},_updateResizeHint:function(e,t,i,n){this._removeResizeHint();var r=this.groups[t];var a=r.ranges(i,n,true,e.isAllDay);for(var o=0;o<a.length;o++){this._groupedView._createResizeHint(a[o])}this._resizeHint.find(".k-label-top,.k-label-bottom").text("");this._resizeHint.first().addClass("k-first").find(".k-label-top").text(S.toString(S.timezone.toLocalDate(i),"M/dd"));this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(S.toString(S.timezone.toLocalDate(n),"M/dd"))},_updateMoveHint:function(e,t,i){var n=S.date.toUtcTime(e.start)+i;var r=n+e.duration();var a=this.groups[t];var o=a.ranges(n,r,true,e.isAllDay);this._removeMoveHint(e.uid);for(var s=0;s<o.length;s++){this._groupedView._createMoveHint(o[s],e)}},_appendMoveHint:function(e){e.appendTo(this.content);this._moveHint=this._moveHint.add(e)},_groups:function(){var e=this._groupCount();var t=this.content[0].getElementsByTagName("tr");var i=this.startDate();this.groups=[];for(var n=0;n<e;n++){this._addResourceView(n)}this._groupedView._addDaySlotCollections(e,t,i)},addDaySlot:function(e,t,i,n){var r=S.date.addDays(i,n);var a=S.date.MS_PER_DAY;var o=this.options.eventsPerDay;if(i.getHours()!==r.getHours()){a+=(i.getHours()-r.getHours())*S.date.MS_PER_HOUR}r=S.date.toUtcTime(r);a+=r;t.setAttribute("role","gridcell");t.setAttribute("aria-selected",false);e.addDaySlot(t,r,a,o)},render:function(e){this.content.children(".k-event,.k-more-events,.k-events-container").remove();this._cachedEvents=e;this._groups();e=new S.data.Query(e).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray().filter(function(e){return this._isInDateSlot(e)}.bind(this));var t=this.groupedResources;var i=this._isMobile();var n=this._isGroupedByDate();var r=this.options.adaptiveSlotHeight;this._canAdjustSlotHeight=i!==true&&n!==true&&t.length===0&&r===true;if(t.length){this._renderGroups(e,t,0,1)}else{this._renderEvents(e,0)}this.refreshLayout();this.trigger("activate")},_renderEvents:function(e,t){var u=this.groups[t];var i=this._groupedView._view;var n=i._isMobile();if(!u){return}if(!u._continuousEvents){u._continuousEvents=[]}if(n){e.forEach(function(e){var t=u.slotRanges(e,true);var i=t[0];var n=i.start.start;var r=i.end.end;var a=new Date(i.start.start);var o=t[t.length-1].end.end;var s=new Date(a);var l=new Date(r);while(a.getTime()<=o&&e.end>=S.timezone.toLocalDate(a)&&e.start<=S.timezone.toLocalDate(o)){var d=u.daySlotRanges(s.getTime(),l.getTime(),true)[0];l.setDate(l.getDate()+1);s.setDate(s.getDate()+1);if(d){d.head=null;d.middle=null;d.tail=null;this._groupedView._positionMobileEvent(e,u,d,1,n,r,0)}a=S.date.addDays(a,1)}}.bind(this))}else{e.forEach(function(e){var t;var i=e.start;var n=e.end;var r=u.slotRanges(e,true);var a=r.length;for(var o=0;o<a;o++){t=r[o];this._groupedView._positionEvent(e,u,t,a,i,n,o)}}.bind(this));if(this._canAdjustSlotHeight===true){this._adjustSlotHeight(u)}}},_renderGroups:function(e,t,i,n){var r=t[0];if(r){var a=r.dataSource.view();for(var o=0;o<a.length;o++){var s=this._resourceValue(r,a[o]);var l=new S.data.Query(e).filter({field:r.field,operator:T.groupEqFilter(s)}).toArray();if(t.length>1){i=this._renderGroups(l,t.slice(1),i++,n+1)}else{this._renderEvents(l,i++)}}}return i},_groupCount:function(){var e=this.groupedResources;var t=this._groupedView;if(e.length){if(this._isVerticallyGrouped()){return t._verticalGroupCount(e.length-1)}else{return t._horizontalGroupCount(e.length)}}return 1},_columnOffsetForResource:function(e){return this._columnCountForLevel(e)/this._columnCountForLevel(e-1)},destroy:function(){if(this.table){this.table.removeClass("k-scheduler-monthview")}if(this.content){this.content.off(t)}if(this.element){this.element.off(t)}T.fn.destroy.call(this);if(this._isMobile()&&this.options.editable){if(this.options.editable.create!==false){this._addUserEvents.destroy()}}},events:["remove","add","edit","navigate"],options:{title:"Month",name:"month",eventHeight:25,moreButtonHeight:13,editable:true,selectedDateFormat:"{0:y}",selectedShortDateFormat:"{0:y}",selectedMobileDateFormat:"{0:MMMM}",groupHeaderTemplate:"#=text#",dayTemplate:i,eventTemplate:o,eventsPerDay:2,adaptiveSlotHeight:false,eventSpacing:3}});function u(e,t){return e.slice(t).concat(e.slice(0,t))}function c(e,t){var i=t.firstDay,n=new Date(e.getFullYear(),e.getMonth(),0,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());while(n.getDay()!=i){S.date.setTime(n,-1*r)}return n}function f(e,t,i){var n=t,r=i,a;a=e;return a>=n&&a<=r}})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.scheduler.recurrence",["kendo.dropdownlist","kendo.datepicker","kendo.numerictextbox","kendo.buttongroup"],e)})(function(){var e={id:"scheduler.recurrence",name:"Recurrence",category:"web",depends:["dropdownlist","datepicker","numerictextbox","buttongroup"],hidden:true};(function(s,j){var G=window.kendo,l=G.timezone,t=G.Class,e=G.ui,a=e.Widget,o=e.DropDownList,d=e.ButtonGroup,q=G.date,$=q.setTime,f=q.setDayOfWeek,m=q.adjustDST,E=q.firstDayOfMonth,K=q.getMilliseconds,I=[0,31,60,91,121,152,182,213,244,274,305,335,366],M=[0,31,59,90,120,151,181,212,243,273,304,334,365],i=[31,28,31,30,31,30,31,31,30,31,30,31],u={0:"SU",1:"MO",2:"TU",3:"WE",4:"TH",5:"FR",6:"SA"},g={SU:0,MO:1,TU:2,WE:3,TH:4,FR:5,SA:6},R=["yyyy-MM-ddTHH:mm:ss.fffzzz","yyyy-MM-ddTHH:mm:sszzz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm","yyyy-MM-ddTHH","yyyy-MM-dd","yyyyMMddTHHmmssfffzzz","yyyyMMddTHHmmsszzz","yyyyMMddTHHmmss","yyyyMMddTHHmm","yyyyMMddTHH","yyyyMMdd"],c=["months","weeks","yearDays","monthDays","weekDays","hours","minutes","seconds"],h=c.length,F="yyyyMMddTHHmmssZ",P={months:function(e,t,i){var n=i.months,r=k(n,e.getMonth()+1),a=false;if(r!==null){if(r.length){e.setMonth(r[0]-1,1)}else{e.setFullYear(e.getFullYear()+1,n[0]-1,1)}a=true}return a},monthDays:function(e,t,i){var n,r,a,o=false,s=e.getHours(),l=function(e){if(e<0){e=n+e+1}return e};while(e<=t){r=e.getMonth();n=re(e);a=k(i.monthDays,e.getDate(),l);if(a===null){return o}o=true;if(a.length){e.setMonth(r,a.sort(x)[0]);m(e,s);if(r===e.getMonth()){break}}else{e.setMonth(r+1,1)}}return o},yearDays:function(e,t,i){var n,r,a=false,o=e.getHours(),s=function(e){if(e<0){e=n+e}return e};while(e<t){n=ae(e)?366:365;r=k(i.yearDays,O(e),s);if(r===null){return a}a=true;n=e.getFullYear();if(r.length){e.setFullYear(n,0,r.sort(x)[0]);m(e,o);break}else{e.setFullYear(n+1,0,1)}}return a},weeks:function(e,t,i){var n=i.weekStart,r,a,o,s=false,l=e.getHours(),d=function(e){if(e<0){e=53+e}return e};while(e<t){a=k(i.weeks,V(e,n),d);if(a===null){return s}s=true;r=e.getFullYear();if(a.length){o=a.sort(x)[0]*7-1;e.setFullYear(r,0,o);f(e,n,-1);m(e,l);break}else{e.setFullYear(r+1,0,1)}}return s},weekDays:function(n,e,t){var i=new Date(n.getTime()+t.offsets.start);var r=i.getDay()-n.getDay();var a=t.weekDays;var o=t.weekStart;var s=te(a,i,o);var l=n.getHours();var d=function(e){var t=new Date(n.getFullYear(),n.getMonth()+1,1);var i=w(e.day,o);if(t.getDay()<=i){if(!u||w(u.day,o)>i){u=e}}};var u,c;if(s===null){return false}u=s[0];if(!u){if(t.freq==="monthly"&&!t.positions||t.position>0){a.forEach(d)}if(!u){u=a[0]}f(n,o)}c=u.day;c-=r;if(u.offset){while(n<=e&&!ee(n,u,o)){if(b(n,o)===U(n,o)){n.setMonth(n.getMonth()+1,1);m(n,l)}else{n.setDate(n.getDate()+7);m(n,l);f(n,o,-1)}}}if(n.getDay()!==c){f(n,c)}return true},hours:function(e,t,i){var n=i.hours,r=i._startTime,a=r.getHours(),o=k(n,a),s=false;if(o!==null){s=true;e.setHours(a);m(e,a);if(o.length){o=o[0];e.setHours(o)}else{o=e.getHours();e.setDate(e.getDate()+1);m(e,o);o=n[0];e.setHours(o);m(e,o)}if(i.minutes){e.setMinutes(0)}r.setHours(o,e.getMinutes())}return s},minutes:function(e,t,i){var n=i.minutes,r=e.getMinutes(),a=k(n,r),o=i._startTime.getHours(),s=false;if(a!==null){s=true;if(a.length){a=a[0]}else{o+=1;a=n[0]}if(i.seconds){e.setSeconds(0)}e.setHours(o,a);o=o%24;m(e,o);i._startTime.setHours(o,a,e.getSeconds())}return s},seconds:function(e,t,i){var n=i.seconds,r=i._startTime.getHours(),a=k(n,e.getSeconds()),o=e.getMinutes(),s=false;if(a!==null){s=true;if(a.length){e.setSeconds(a[0])}else{o+=1;e.setMinutes(o,n[0]);if(o>59){o=o%60;r=(r+1)%24}}i._startTime.setHours(r,o,e.getSeconds())}return s}},r=t.extend({next:function(e,t){var i=t._startTime,n=i.getDate(),r,a;if(t.seconds){a=e.getSeconds()+1;e.setSeconds(a);i.setSeconds(a);i.setDate(n)}else if(t.minutes){r=e.getMinutes()+1;e.setMinutes(r);i.setMinutes(r);i.setDate(n)}else{return false}return true},normalize:function(e){var t=e.rule;if(e.idx===4&&t.hours){t._startTime.setHours(0);this._hour(e.date,t)}},limit:function(e,t,i){var n=i.interval,r,a,o,s,l;while(e<=t){o=a=j;l=e.getDate();for(s=0;s<h;s++){r=c[s];if(i[r]){o=P[r](e,t,i);if(a!==j&&o){break}else{a=o}}if(o){this.normalize({date:e,rule:i,day:l,idx:s})}}if((n===1||!this.interval(i,e))&&s===h){break}}},interval:function(e,t){var i=new Date(e._startPeriod);var n=new Date(t);var r=t.getHours();var a=e.weekStart;var o=e.interval;var s=e.freq;var l=false;var d=0;var u=0;var c=1;var f;var h;if(s==="hourly"){f=n.getTimezoneOffset()-i.getTimezoneOffset();h=e._startTime.getHours();n=n.getTime();if(r!==h){n+=(h-r)*q.MS_PER_HOUR}n-=i;if(f){n-=f*q.MS_PER_MINUTE}f=Math.floor(n/q.MS_PER_HOUR);d=_(f,o);if(d!==0){this._hour(t,e,d);l=true}}else if(s==="daily"){q.setTime(n,-i,true);f=Math.round(n/q.MS_PER_DAY);d=_(f,o);if(d!==0){this._date(t,e,d);l=true}}else if(s==="weekly"){d=this._getNumberOfWeeksBetweenDates(i,t);var p=w(t.getDay(),a);var v=w(i.getDay(),a);if(p<v){d+=1}d=_(d,o);if(d!==0){q.setDayOfWeek(t,e.weekStart,-1);t.setDate(t.getDate()+d*7);m(t,r);l=true}}else if(s==="monthly"){f=t.getFullYear()-i.getFullYear();f=t.getMonth()-i.getMonth()+f*12;d=_(f,o);if(d!==0){c=e._hasRuleValue?1:t.getDate();t.setFullYear(t.getFullYear(),t.getMonth()+d,c);m(t,r);l=true}}else if(s==="yearly"){f=t.getFullYear()-i.getFullYear();d=_(f,o);if(!e.months){u=t.getMonth()}if(!e.yearDays&&!e.monthDays&&!e.weekDays){c=t.getDate()}if(d!==0){t.setFullYear(t.getFullYear()+d,u,c);m(t,r);l=true}}return l},_getNumberOfWeeksBetweenDates:function(e,t){var i=(t-e)/6048e5;var n=Math.floor(i);if(i-n>.99){n=Math.round(i)}return n},_hour:function(e,t,i){var n=t._startTime,r=n.getHours();if(i){r+=i}e.setHours(r);r=r%24;n.setHours(r);m(e,r)},_date:function(e,t,i){var n=e.getHours();e.setDate(e.getDate()+i);if(!m(e,n)){this._hour(e,t)}}}),z=r.extend({next:function(e,t){if(!r.fn.next(e,t)){this._hour(e,t,1)}},normalize:function(e){var t=e.rule;if(e.idx===4){t._startTime.setHours(0);this._hour(e.date,t)}}}),B=r.extend({next:function(e,t){if(!r.fn.next(e,t)){this[t.hours?"_hour":"_date"](e,t,1)}}}),L=B.extend({setup:function(e,t){if(!e.weekDays){e.weekDays=[{day:t.getDay(),offset:0}]}}}),H=r.extend({next:function(e,t){var i,n;if(!r.fn.next(e,t)){if(t.hours){this._hour(e,t,1)}else if(t.monthDays||t.weekDays||t.yearDays||t.weeks){this._date(e,t,1)}else{i=e.getDate();n=e.getHours();e.setMonth(e.getMonth()+1);m(e,n);while(e.getDate()!==i){e.setDate(i);m(e,n)}this._hour(e,t)}}},normalize:function(e){var t=e.rule,i=e.date,n=i.getHours();if(e.idx===0&&!t.monthDays&&!t.weekDays){i.setDate(e.day);m(i,n)}else{r.fn.normalize(e)}},setup:function(e,t,i){if(!e.monthDays&&!e.weekDays){i.setDate(t.getDate())}}}),N=H.extend({next:function(e,t){var i,n=e.getHours();if(!r.fn.next(e,t)){if(t.hours){this._hour(e,t,1)}else if(t.monthDays||t.weekDays||t.yearDays||t.weeks){this._date(e,t,1)}else if(t.months){i=e.getDate();e.setMonth(e.getMonth()+1);m(e,n);while(e.getDate()!==i){e.setDate(i);m(e,n)}this._hour(e,t)}else{e.setFullYear(e.getFullYear()+1);m(e,n);this._hour(e,t)}}},setup:function(){}}),J={hourly:new z,daily:new B,weekly:new L,monthly:new H,yearly:new N},p="click",v="change";function _(e,t){var i;if(e!==0&&e<t){i=t-e}else{i=e%t;if(i){i=t-i}}return i}function O(e){var t=e.getMonth();var i=ae(e)?I[t]:M[t];return i+e.getDate()}function V(e,t){var i,n;e=new Date(e.getFullYear(),e.getMonth(),e.getDate());m(e,0);i=e.getFullYear();if(t!==j){f(e,t,-1);e.setDate(e.getDate()+4)}else{e.setDate(e.getDate()+(4-(e.getDay()||7)))}m(e,0);n=Math.floor((e.getTime()-new Date(i,0,1,-6))/864e5);return 1+Math.floor(n/7)}function b(e,t){var i=E(e).getDay();var n=7-(i+7-(t||7))||7;if(n<0){n+=7}return Math.ceil((e.getDate()-n)/7)+1}function w(e,t){return e+(e<t?7:0)}function W(e,t,i){var n=t.offset;if(!n){return b(e,i)}var r=new Date(e.getFullYear(),e.getMonth()+1,0);var a=b(r,i);var o=w(t.day,i);var s=o<w(new Date(e.getFullYear(),e.getMonth(),1).getDay(),i);var l=o>w(r.getDay(),i);if(n<0){n=a+(n+1-(l?1:0))}else if(s){n+=1}a-=l?1:0;if(n<(s?1:0)||n>a){return null}return n}function U(e,t){return b(new Date(e.getFullYear(),e.getMonth()+1,0),t)}function ee(e,t,i){return b(e,i)===W(e,t,i)}function te(e,t,i){var n=w(t.getDay(),i);var r=e.length;var a;var o,s;var l;var d=[];var u=0;for(;u<r;u++){o=e[u];l=b(t,i);a=W(t,o,i);if(a===null){continue}if(l<a){d.push(o)}else if(l===a){s=w(o.day,i);if(n<s){d.push(o)}else if(n===s){return null}}}return d}function k(e,t,i){var n=0,r=e.length,a=[],o;for(;n<r;n++){o=e[n];if(i){o=i(o)}if(t===o){return null}else if(t<o){a.push(o)}}return a}function y(e,t){var i=0,n=e.length,r;for(;i<n;i++){r=parseInt(e[i],10);if(isNaN(r)||r<t.start||r>t.end||r===0&&t.start<0){return null}e[i]=r}return e.sort(x)}function ie(e){var t=0,i=e.length,n,r,a;for(;t<i;t++){n=e[t];r=n.length;a=n.substring(r-2).toUpperCase();a=g[a];if(a===j){return null}e[t]={offset:parseInt(n.substring(0,r-2),10)||0,day:a}}return e}function ne(e){var t=0,i=e.length,n,r,a=[];for(;t<i;t++){n=e[t];if(typeof n==="string"){r=n}else{r=""+u[n.day];if(n.offset){r=n.offset+r}}a.push(r)}return a.toString()}function re(e){var t=e.getMonth();if(t===1){if(new Date(e.getFullYear(),1,29).getMonth()===1){return 29}return 28}return i[t]}function ae(e){e=e.getFullYear();return e%4===0&&e%100!==0||e%400===0}function x(e,t){return e-t}function oe(e,t){var i=0,n,r,a=[];if(e){e=e.split(e.indexOf(";")!==-1?";":",");n=e.length;for(;i<n;i++){r=C(e[i],t);if(r){a.push(r)}}}return a}function Y(e,t,i){var n=s.isArray(e)?e:oe(e,i),r=t.getTime()-t.getMilliseconds(),a=0,o=n.length;for(;a<o;a++){if(n[a].getTime()===r){return true}}return false}function se(e,t){var i=0;var n;var r;var a=[].concat(e);for(n=a.length;i<n;i++){r=a[i];r=G.timezone.convert(r,t||r.getTimezoneOffset(),"Etc/UTC");a[i]=G.toString(r,F)}return a.join(",")}function le(e,t){var i=new Date(e);switch(t.freq){case"yearly":i.setFullYear(i.getFullYear(),0,1);break;case"monthly":i.setFullYear(i.getFullYear(),i.getMonth(),1);break;case"weekly":f(i,t.weekStart,-1);break;default:break}if(t.hours){i.setHours(0)}if(t.minutes){i.setMinutes(0)}if(t.seconds){i.setSeconds(0)}return i}function Q(e,t){var i=new Date(e);switch(t.freq){case"yearly":i.setFullYear(i.getFullYear(),11,31);break;case"monthly":i.setFullYear(i.getFullYear(),i.getMonth()+1,0);break;case"weekly":f(i,t.weekStart,-1);i.setDate(i.getDate()+6);break;default:break}if(t.hours){i.setHours(23)}if(t.minutes){i.setMinutes(59)}if(t.seconds){i.setSeconds(59)}return i}function de(e,t,i,n){var r=e.length;var a=[];var o;var s;var l;for(var d=0,u=i.length;d<u;d++){o=i[d];if(o<0){o=r+o}else{o-=1}s=e[o];l=n?s.start<n:true;if(s&&s.start>=t&&l){a.push(s)}}return a}function ue(e,t,i){var n=[];var r;for(var a=0;a<e.length;a++){r=e[a];if(!Y(t,r.start,i)){n.push(r)}}return n}function ce(e,t,i,n){var r,a,o,s,l,d,u,c,f,h,p,v,m,g,_,b,w,k,y,x,C,S,T,D=[],A,E,I,M;r=Z(e.recurrenceRule,n,{start:(X(e.start,n)-X(e.start,e.startTimezone))*G.date.MS_PER_MINUTE,end:(X(e.end,n)-X(e.end,e.endTimezone))*G.date.MS_PER_MINUTE});if(!r){return[e]}C=r.positions;S=C?0:1;p=r.start;v=r.end;if(p||v){e=e.clone({start:p?new Date(p.value[0]):j,end:v?new Date(v.value[0]):j})}k=e.start;w=k.getTime();b=K(k);_=oe(e.recurrenceException,n);if(!_[0]&&r.exdates){_=r.exdates.value;e.set("recurrenceException",se(_,n))}f=t=new Date(t);i=new Date(i);g=r.freq;x=J[g];y=r.count;if(r.until&&r.until<i){i=new Date(r.until)}m=g==="yearly"||g==="monthly"||g==="weekly";if(t<w||y||r.interval>1||m||(g==="daily"||g==="hourly")&&!r.seconds){t=new Date(w)}else{l=t.getHours();d=t.getMinutes();u=t.getSeconds();if(!r.hours){l=k.getHours()}if(!r.minutes){d=k.getMinutes()}if(!r.seconds){u=k.getSeconds()}t.setHours(l,d,u,k.getMilliseconds())}r._startPeriod=new Date(t);if(C){t=le(t,r);i=Q(i,r);var B=K(i)-K(t);if(B<0){l=t.getHours();i.setHours(l,t.getMinutes(),t.getSeconds(),t.getMilliseconds());q.adjustDST(i,l)}r._startPeriod=new Date(t);r._endPeriod=Q(t,r)}c=e.duration();var L=e.isAllDay?864e5:0;r._startTime=a=q.toInvariantTime(t);if(x.setup){x.setup(r,k,t)}x.limit(t,i,r);while(t<=i){s=new Date(t);$(s,c);var R=new Date(t);$(R,c+L);h=t>=f||R>f;if(h&&!Y(_,t,n)||C){a=q.toUtcTime(q.getDate(t))+K(r._startTime);o=a+c;if(w!==t.getTime()||b!==K(r._startTime)){var F=e.startTimezone||e.endTimezone;var P=e.endTimezone||e.startTimezone;if(!e.isAllDay){if(n&&F||!n&&!F){var z=X(t,n)-X(e.start,n);var H=X(s,n)-X(e.end,n);var N=X(t,F)-X(e.start,F);var O=X(s,P)-X(e.end,P);if(z!==N){var V=(z-N)*6e4;A=new Date(t.getTime()-V);I=a-V}if(H!==O){var W=(H-O)*6e4;E=new Date(s.getTime()-W);M=o-W}}}D.push(e.toOccurrence({start:A||new Date(t),end:E||s,_startTime:I||a,_endTime:M||o}));A=E=I=M=null}else{e._startTime=a;e._endTime=o;D.push(e)}}if(C){x.next(t,r);x.limit(t,i,r);if(t>r._endPeriod){T=de(D.slice(S),k,C,r.until);T=ue(T,_,n);D=D.slice(0,S).concat(T);r._endPeriod=Q(t,r);S=D.length}if(y&&y===S){break}}else{if(y&&y===S){break}S+=1;var U=fe(t);x.next(t,r);if(U&&r.freq!=="hourly"&&q.toInvariantTime(e.start).getTime()!==q.toInvariantTime(t).getTime()){r._startTime=a=new Date(t.getTime()-36e5)}x.limit(t,i,r)}}return D}function fe(e){var t=e.getTimezoneOffset();var i=new Date(e.getTime()-36e5);var n=i.getTimezoneOffset();return t<n}function X(e,t){return t?G.timezone.offset(e,t):e.getTimezoneOffset()}function C(e,t){e=G.parseDate(e,R);if(e&&t){e=l.apply(e,t)}return e}function S(e,t){var i=e.split(";");var n;var r;var a;var o;var s,l;for(var d=0,u=i.length;d<u;d++){n=i[d].split(":");r=n[0];a=n[1];if(r.indexOf("TZID")!==-1){o=r.substring(r.indexOf("TZID")).split("=")[1]}if(a){a=a.split(",");for(s=0,l=a.length;s<l;s++){a[s]=C(a[s],o||t)}}}if(a){return{value:a,tzid:o}}}function Z(e,t,i){var n={};var r,a;var o=0,s;var l=false;var d,u,c;var f,h,p;var v=function(e,t){var i=e.day,n=t.day;if(i<h){i+=7}if(n<h){n+=7}return i-n};if(!e){return null}c=e.split("\n");if(!c[1]&&(e.indexOf("DTSTART")!==-1||e.indexOf("DTEND")!==-1||e.indexOf("EXDATE")!==-1)){c=e.split(" ")}for(o=0,s=c.length;o<s;o++){u=G.trim(c[o]);if(u.indexOf("DTSTART")!==-1){n.start=S(u,t)}else if(u.indexOf("DTEND")!==-1){n.end=S(u,t)}else if(u.indexOf("EXDATE")!==-1){n.exdates=S(u,t)}else if(u.indexOf("RRULE")!==-1){d=u.substring(6)}else if(G.trim(u)){d=u}}d=d.split(";");for(o=0,s=d.length;o<s;o++){f=d[o];r=f.split("=");a=G.trim(r[1]).split(",");switch(G.trim(r[0]).toUpperCase()){case"FREQ":n.freq=a[0].toLowerCase();break;case"UNTIL":n.until=C(a[0],t);break;case"COUNT":n.count=parseInt(a[0],10);break;case"INTERVAL":n.interval=parseInt(a[0],10);break;case"BYSECOND":n.seconds=y(a,{start:0,end:60});l=true;break;case"BYMINUTE":n.minutes=y(a,{start:0,end:59});l=true;break;case"BYHOUR":n.hours=y(a,{start:0,end:23});l=true;break;case"BYMONTHDAY":n.monthDays=y(a,{start:-31,end:31});l=true;break;case"BYYEARDAY":n.yearDays=y(a,{start:-366,end:366});l=true;break;case"BYMONTH":n.months=y(a,{start:1,end:12});l=true;break;case"BYDAY":n.weekDays=p=ie(a);l=true;break;case"BYWEEKNO":n.weeks=y(a,{start:-53,end:53});l=true;break;case"BYSETPOS":n.positions=y(a,{start:-366,end:366});break;case"WKST":n.weekStart=h=g[a[0]];break}}if(n.freq===j||n.count!==j&&n.until){return null}if(!n.interval){n.interval=1}if(h===j){n.weekStart=h=G.culture().calendar.firstDay}if(p){n.weekDays=p.sort(v)}if(n.positions&&!l){n.positions=null}n._hasRuleValue=l;n.offsets=i;return n}function T(e,t){var i=e.value;var n=e.tzid||"";var r=i.length;var a=0;var o;for(;a<r;a++){o=i[a];o=l.convert(o,n||t||o.getTimezoneOffset(),"Etc/UTC");i[a]=G.toString(o,"yyyyMMddTHHmmssZ")}if(n){n=";TZID="+n}return n+":"+i.join(",")+" "}function D(e,t){var i=e.weekStart;var n="FREQ="+e.freq.toUpperCase();var r=e.exdates||"";var a=e.start||"";var o=e.end||"";var s=e.until;if(i===j){i=G.culture().calendar.firstDay}if(e.interval>1){n+=";INTERVAL="+e.interval}if(e.count){n+=";COUNT="+e.count}if(s){s=l.convert(s,t||s.getTimezoneOffset(),"Etc/UTC");n+=";UNTIL="+G.toString(s,"yyyyMMddTHHmmssZ")}if(e.months){n+=";BYMONTH="+e.months}if(e.weeks){n+=";BYWEEKNO="+e.weeks}if(e.yearDays){n+=";BYYEARDAY="+e.yearDays}if(e.monthDays){n+=";BYMONTHDAY="+e.monthDays}if(e.weekDays){n+=";BYDAY="+ne(e.weekDays)}if(e.hours){n+=";BYHOUR="+e.hours}if(e.minutes){n+=";BYMINUTE="+e.minutes}if(e.seconds){n+=";BYSECOND="+e.seconds}if(e.positions){n+=";BYSETPOS="+e.positions}if(i!==j){n+=";WKST="+u[i]}if(a){a="DTSTART"+T(a,t)}if(o){o="DTEND"+T(o,t)}if(r){r="EXDATE"+T(r,t)}if(a||o||r){n=a+o+r+"RRULE:"+n}return n}G.recurrence={rule:{parse:Z,serialize:D},expand:ce,dayInYear:O,weekInYear:V,weekInMonth:b,numberOfWeeks:U,isException:Y,toExceptionString:se};var he=G.template('# if (frequency !== "never") { #'+'<div class="k-edit-label"><label>#:messages.repeatEvery#</label></div>'+'<div class="k-edit-field"><input class="k-recur-interval" title="#:messages.repeatEvery# #:messages.interval#"/>#:messages.interval#</div>'+"# } #"+'# if (frequency === "weekly") { #'+'<div class="k-edit-label"><label>#:messages.repeatOn#</label></div>'+'<div class="k-edit-field"><div class="k-button-group-stretched k-recur-weekday-buttons" title="#:messages.repeatOn#"></div></div>'+'# } else if (frequency === "monthly") { #'+'<div class="k-edit-label"><label>#:messages.repeatOn#</label></div>'+'<div class="k-edit-field">'+'<ul class="k-reset">'+"<li>"+'<label class="k-radio-label"><input class="k-recur-month-radio k-radio" type="radio" name="month" value="monthday" title="#:messages.repeatOn#" />#:messages.date#:</label>'+'<input class="k-recur-monthday" title="#:messages.date#" />'+"</li>"+"<li>"+'<input class="k-recur-month-radio k-radio" type="radio" name="month" value="weekday" title="#:messages.repeatOn# #:messages.day#" />'+'<input class="k-recur-weekday-offset" title="#:messages.repeatOn#" /><input class="k-recur-weekday" title="#:messages.day#" />'+"</li>"+"</ul>"+"</div>"+'# } else if (frequency === "yearly") { #'+'<div class="k-edit-label"><label>#:messages.repeatOn#</label></div>'+'<div class="k-edit-field">'+'<ul class="k-reset">'+"<li>"+'<input class="k-recur-year-radio k-radio" type="radio" name="year" value="monthday" title="#:messages.repeatOn# #:messages.month#" />'+'<input class="k-recur-month" title="#:messages.month#" /><input class="k-recur-monthday" title="#:messages.date#" />'+"</li>"+"<li>"+'<input class="k-recur-year-radio k-radio" type="radio" name="year" value="weekday" title="#:messages.repeatOn# #:messages.day#" />'+'<input class="k-recur-weekday-offset" title="#:messages.repeatOn#" /><input class="k-recur-weekday" title="#:messages.day#"  />#:messages.of#<input class="k-recur-month" title="#:messages.of + messages.month#"/>'+"</li>"+"</ul>"+"</div>"+"# } #"+'# if (frequency !== "never") { #'+'<div class="k-edit-label"><label>#:end.label#</label></div>'+'<div class="k-edit-field">'+'<ul class="k-reset">'+"<li>"+'<label class="k-radio-label"><input class="k-recur-end-never k-radio" type="radio" name="end" value="never" title="#:end.label#" />#:end.never#</label>'+"</li>"+"<li>"+'<label class="k-radio-label"><input class="k-recur-end-count k-radio" type="radio" name="end" value="count" title="#:end.label#" />#:end.after#</label>'+'<input class="k-recur-count" title="#:end.occurrence#" />#:end.occurrence#'+"</li>"+"<li>"+'<label class="k-radio-label"><input class="k-recur-end-until k-radio" type="radio" name="end" value="until" title="#:end.label#" />#:end.on#</label>'+'<input class="k-recur-until" title="#:end.on#" name="recur-until" />'+"</li>"+"</ul>"+"</div>"+"# } #");var pe=[{day:0,offset:0},{day:1,offset:0},{day:2,offset:0},{day:3,offset:0},{day:4,offset:0},{day:5,offset:0},{day:6,offset:0}];var ve=[{day:1,offset:0},{day:2,offset:0},{day:3,offset:0},{day:4,offset:0},{day:5,offset:0}];var me=[{day:0,offset:0},{day:6,offset:0}];var n=a.extend({init:function(e,t){var i;var n=this;var r=t&&t.frequencies;a.fn.init.call(n,e,t);n.wrapper=n.element;t=n.options;t.start=i=t.start||q.today();if(r){t.frequencies=r}if(typeof i==="string"){t.start=G.parseDate(i,"yyyyMMddTHHmmss")}if(t.firstWeekDay===null){t.firstWeekDay=G.culture().calendar.firstDay}n._namespace="."+t.name},options:{value:"",start:"",timezone:"",spinners:true,firstWeekDay:null,frequencies:["never","daily","weekly","monthly","yearly"],mobile:false,messages:{repeat:"Repeat",recurrenceEditorTitle:"Recurrence editor",frequencies:{never:"Never",hourly:"Hourly",daily:"Daily",weekly:"Weekly",monthly:"Monthly",yearly:"Yearly"},hourly:{repeatEvery:"Repeat every: ",interval:" hour(s)"},daily:{repeatEvery:"Repeat every: ",interval:" day(s)"},weekly:{interval:" week(s)",repeatEvery:"Repeat every: ",repeatOn:"Repeat on: "},monthly:{repeatEvery:"Repeat every: ",repeatOn:"Repeat on: ",interval:" month(s)",day:"Day ",date:"Date"},yearly:{repeatEvery:"Repeat every: ",repeatOn:"Repeat on: ",interval:" year(s)",of:" of ",month:"month",day:"day",date:"Date"},end:{label:"End:",mobileLabel:"Ends",never:"Never",after:"After ",occurrence:" occurrence(s)",on:"On "},offsetPositions:{first:"first",second:"second",third:"third",fourth:"fourth",last:"last"},weekdays:{day:"day",weekday:"weekday",weekend:"weekend day"}}},events:["change"],_initInterval:function(){var e=this;var t=e._value;e._container.find(".k-recur-interval").kendoNumericTextBox({spinners:e.options.spinners,value:t.interval||1,decimals:0,format:"#",min:1,change:function(){t.interval=this.value();e._trigger()}})},_weekDayButtons:function(e){var i=this,t=G.culture().calendar.days.names,n=G.culture().calendar.days.namesAbbr,r=i.options.messages.weekly.repeatOn,a=t.length,o=0,s=[],l=[];for(;o<a;o++){s.push(o)}t=t.slice(e).concat(t.slice(0,e));n=n.slice(e).concat(n.slice(0,e));s=s.slice(e).concat(s.slice(0,e));for(o=0;o<a;o++){l.push({text:n[o],attributes:{"data-value":s[o],"aria-label":r+" "+t[o]}})}i._weekDayButtonGroup=new d(i._container.find(".k-recur-weekday-buttons"),{items:l,selection:"multiple",select:function(){var e=i._value,t=i._weekDayButtonGroup.current();e.weekDays=t.map(function(e,t){return{day:Number(t.getAttribute("data-value")),offset:0}});if(!i.options.mobile){i._trigger()}}})},_weekDayRule:function(e){var t=this;var i=(t._weekDay.element||t._weekDay).val();var n=Number((t._weekDayOffset.element||t._weekDayOffset).val());var r=null;var a=null;if(!e){if(i==="day"){r=pe;a=n}else if(i==="weekday"){r=ve;a=n}else if(i==="weekend"){r=me;a=n}else{r=[{offset:n,day:Number(i)}]}}t._value.weekDays=r;t._value.positions=a},_weekDayView:function(){var e=this;var t=e._value.weekDays;var i=e._value.positions;var n=e._weekDayOffset;var r;var a;var o;var s;if(t){o=t.length;if(i){if(o===7){a="day";r=i}else if(o===5){a="weekday";r=i}else if(o===2){a="weekend";r=i}}if(!a){t=t[0];a=t.day;r=t.offset||""}s=n.value?"value":"val";n[s](r);e._weekDay[s](a)}},_initWeekDay:function(){var e=this,t;var i=e.options.messages.weekdays;var n=e.options.messages.offsetPositions;var r=e._container.find(".k-recur-weekday");var a=function(){e._weekDayRule();e._trigger()};if(r[0]){e._weekDayOffset=new o(e._container.find(".k-recur-weekday-offset"),{change:a,dataTextField:"text",dataValueField:"value",dataSource:[{text:n.first,value:"1"},{text:n.second,value:"2"},{text:n.third,value:"3"},{text:n.fourth,value:"4"},{text:n.last,value:"-1"}]});t=[{text:i.day,value:"day"},{text:i.weekday,value:"weekday"},{text:i.weekend,value:"weekend"}];e._weekDay=new o(r,{value:e.options.start.getDay(),change:a,dataTextField:"text",dataValueField:"value",dataSource:t.concat(s.map(G.culture().calendar.days.names,function(e,t){return{text:e,value:t}}))});e._weekDayView()}},_initWeekDays:function(){var e=this;var t=e._value;var i=e._weekDayButtonGroup;if(i&&t.weekDays&&t.weekDays.length){var n=t.weekDays,r=n.length,a=[],o=0,s;for(;o<r;o++){a.push("[data-value='"+n[o].day+"']")}s=i.element.find(a.join(","));i.select(s)}},_initMonthDay:function(){var t=this;var i=t._value;var e=t._container.find(".k-recur-monthday");if(e[0]){t._monthDay=new G.ui.NumericTextBox(e,{spinners:t.options.spinners,min:1,max:31,decimals:0,format:"#",value:i.monthDays?i.monthDays[0]:t.options.start.getDate(),change:function(){var e=this.value();i.monthDays=e?[e]:e;t._trigger()}})}},_initCount:function(){var e=this,t=e._container.find(".k-recur-count"),i=e._value;e._count=t.kendoNumericTextBox({spinners:e.options.spinners,value:i.count||1,decimals:0,format:"#",min:1,change:function(){i.count=this.value();e._trigger()}}).data("kendoNumericTextBox")},_initUntil:function(){var t=this,e=t._container.find(".k-recur-until"),i=t.options.start,n=t._value,r=n.until,a=r&&r<i?r:i,o=t.wrapper.closest(".k-scheduler-edit-form").find("[name=start]:visible"),s=G.format(G.ui.Validator.prototype.options.messages.date,t.options.messages.end.on),l=G.ui.Validator.prototype.options.messages.dateCompare,d=new Date(i.getFullYear(),i.getMonth(),i.getDate(),23,59,59);e.attr("data-validDate-msg",s);e.attr("data-untilDateCompare-msg",l);if(o.length===0){o=t.wrapper.closest(".k-scheduler-edit-form").find("[name=start]")}if(o.length>0&&o.val()){a=G.parseDate(o.val());if(d<a){d=a}}t._until=e.kendoDatePicker({min:a,value:r||d,change:function(){var e=this.value();if(e){n.until=new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,59)}t._trigger()}}).data("kendoDatePicker");if(o){o.on("change",function(){t._until.setOptions({min:o.val()})})}},_trigger:function(){if(!this.options.mobile){this.trigger("change")}}});var ge=n.extend({init:function(e,t){var i=this;n.fn.init.call(i,e,t);i._initFrequency();i._initContainer();i.value(i.options.value)},options:{name:"RecurrenceEditor"},events:["change"],destroy:function(){var e=this;e._frequency.destroy();if(this._weekDayButtonGroup){this._weekDayButtonGroup.destroy()}e._container.find("input[type=radio],input[type=checkbox]").off(p+e._namespace);G.destroy(e._container);n.fn.destroy.call(e)},value:function(e){var t=this;var i=t.options.timezone;var n,r;if(e===j){if(!t._value.freq){return""}return D(t._value,i)}t._value=Z(e,i)||{};n=t._value.freq;if(n){r=t._frequency.element.find("[data-value='"+n+"']");t._frequency.select(r)}else{t._frequency.select(0)}t._initView(t._frequency.current().data("value"))},_initContainer:function(){var e=this.element,t=s('<div class="k-recur-view" />'),i=e.parent(".k-edit-field");if(i[0]){t.insertAfter(i)}else{e.append(t)}this._container=t},_initFrequency:function(){var e=this,t=e.options,i=t.frequencies,n=t.messages.frequencies,r=s('<div class="k-button-group-stretched" />').attr({title:t.messages.recurrenceEditorTitle}),a;i=s.map(i,function(e){return{text:n[e],attributes:{"data-value":e,"aria-label":t.messages.repeat+n[e]}}});a=i[0];if(a&&a.attributes&&a.attributes["data-value"]==="never"){a.attributes["data-value"]=""}e.element.append(r);e._frequency=new d(r,{items:i,select:function(){e._value={};e._initView(e._frequency.current().data("value"));e.trigger("change")}})},_initView:function(e){var t=this;var i=t._value;var n=t.options;var r={frequency:e||"never",firstWeekDay:n.firstWeekDay,messages:n.messages[e],end:n.messages.end};G.destroy(t._container);t._container.html(he(r));if(!e){t._value={};return}i.freq=e;if(e==="weekly"&&!i.weekDays){i.weekDays=[{day:n.start.getDay(),offset:0}]}t._weekDayButtons(n.firstWeekDay);t._initInterval();t._initWeekDays();t._initMonthDay();t._initWeekDay();t._initMonth();t._initCount();t._initUntil();t._period();t._end()},_initMonth:function(){var e=this;var t=e._value;var i=t.months||[e.options.start.getMonth()+1];var n=e._container.find(".k-recur-month");var r;if(n[0]){r={change:function(){t.months=[Number(this.value())];e.trigger("change")},dataTextField:"text",dataValueField:"value",dataSource:s.map(G.culture().calendar.months.names,function(e,t){return{text:e,value:t+1}})};e._month1=new o(n[0],r);e._month2=new o(n[1],r);if(i){i=i[0];e._month1.value(i);e._month2.value(i)}}},_end:function(){var t=this;var e=t._value;var i=t._container;var n=t._namespace;var r=function(e){t._toggleEnd(e.currentTarget.value);t.trigger("change")};var a;t._buttonNever=i.find(".k-recur-end-never").on(p+n,r);t._buttonCount=i.find(".k-recur-end-count").on(p+n,r);t._buttonUntil=i.find(".k-recur-end-until").on(p+n,r);if(e.count){a="count"}else if(e.until){a="until"}t._toggleEnd(a)},_period:function(){var t=this;var e=t._value;var i=e.freq==="monthly";var n=i?t._toggleMonthDay:t._toggleYear;var r=".k-recur-"+(i?"month":"year")+"-radio";var a=t._container.find(r);if(!i&&e.freq!=="yearly"){return}a.on(p+t._namespace,function(e){n.call(t,e.currentTarget.value);t.trigger("change")});t._buttonMonthDay=a.eq(0);t._buttonWeekDay=a.eq(1);n.call(t,e.weekDays?"weekday":"monthday")},_toggleEnd:function(e){var t=this;var i,n;var r,a;if(e==="count"){t._buttonCount.prop("checked",true);r=true;a=false;i=t._count.value();n=null}else if(e==="until"){t._buttonUntil.prop("checked",true);r=false;a=true;i=null;n=t._until.value()}else{t._buttonNever.prop("checked",true);r=a=false;i=n=null}if(t._count){t._count.enable(r)}if(t._until){t._until.enable(a)}t._value.count=i;t._value.until=n},_toggleMonthDay:function(e){var t=this;var i=false;var n=true;var r=false;var a;if(e==="monthday"){t._buttonMonthDay.prop("checked",true);a=[t._monthDay.value()];i=true;n=false;r=true}else{t._buttonWeekDay.prop("checked",true);a=null}t._weekDay.enable(n);t._weekDayOffset.enable(n);t._monthDay.enable(i);t._value.monthDays=a;t._weekDayRule(r)},_toggleYear:function(e){var t=this;var i=false;var n=true;var r;if(e==="monthday"){i=true;n=false;r=t._month1.value()}else{r=t._month2.value()}t._month1.enable(i);t._month2.enable(n);t._value.months=[r];t._toggleMonthDay(e)}});e.plugin(ge);var _e=G.template('<div data-role="content">'+'<ul class="k-listgroup k-listgroup-flush">'+'<li class="k-item k-listgroup-item">'+'<label class="k-label k-listgroup-form-row">'+'<span class="k-item-title k-listgroup-form-field-label">#:headerTitle#</span>'+'<div class="k-recur-pattern k-listgroup-form-field-wrapper"></div>'+"</label>"+"</li>"+'<li class="k-item k-listgroup-item k-recur-view"></li>'+"</ul>"+"</div>");var be=G.template('# if (frequency !== "never") { #'+'<label class="k-label k-listgroup-form-row">'+'<span class="k-item-title k-listgroup-form-field-label">#:messages.repeatEvery#</span>'+'<div class="k-recur-editor-wrap k-listgroup-form-field-wrapper">'+'<input class="k-recur-interval" type="number" pattern="\\\\d*"/>'+"# if (messages.interval.length) { #"+'<span class="k-recur-editor-text">#:messages.interval#</span>'+"# } #"+"</div>"+"</label>"+"# } #"+'# if (frequency === "weekly") { #'+'<ul class="k-recur-items-wrap k-listgroup k-listgroup-flush">'+'<li class="k-item k-listgroup-item k-no-click">'+'<label class="k-label k-listgroup-form-row">'+'<span class="k-item-title k-listgroup-form-field-label">#:messages.repeatOn#</span>'+"</label>"+"</li>"+'<div class="k-button-group-stretched k-recur-weekday-buttons" title="#:messages.repeatOn#">'+"</ul>"+'# } else if (frequency === "monthly") { #'+'<ul class="k-recur-items-wrap k-listgroup k-listgroup-flush">'+'<li class="k-item k-listgroup-item">'+'<label class="k-label k-listgroup-form-row">'+'<span class="k-item-title k-listgroup-form-field-label">#:messages.repeatBy#</span>'+'<div class="k-repeat-rule k-listgroup-form-field-wrapper"></div>'+"</label>"+"</li>"+'<li class="k-monthday-view k-item k-listgroup-item" style="display:none">'+'<label class="k-label k-listgroup-form-row">'+'<span class="k-item-title k-listgroup-form-field-label">#:messages.day#</span>'+'<div class="k-listgroup-form-field-wrapper"><input class="k-recur-monthday" type="number" title="#:messages.day#" pattern="\\\\d*"/></div>'+"</label>"+"</li>"+'<li class="k-weekday-view k-item k-listgroup-item" style="display:none">'+'<label class="k-label k-listgroup-form-row">'+'<span class="k-item-title k-listgroup-form-field-label">#:messages.every#</span>'+'<div class="k-listgroup-form-field-wrapper"><select class="k-recur-weekday-offset" title="#:messages.every#"></select></div>'+"</label>"+"</li>"+'<li class="k-weekday-view k-item k-listgroup-item" style="display:none">'+'<label class="k-label k-listgroup-form-row">'+'<span class="k-item-title k-listgroup-form-field-label">#:messages.day#</span>'+'<div class="k-listgroup-form-field-wrapper"><select class="k-recur-weekday" title="#:messages.day#"></select></div>'+"</label>"+"</li>"+"</ul>"+'# } else if (frequency === "yearly") { #'+'<ul class="k-recur-items-wrap k-listgroup k-listgroup-flush">'+'<li class="k-item k-listgroup-item">'+'<label class="k-label k-listgroup-form-row">'+'<span class="k-item-title k-listgroup-form-field-label">#:messages.repeatBy#</span>'+'<div class="k-repeat-rule k-listgroup-form-field-wrapper"></div>'+"</label>"+"</li>"+'<li class="k-monthday-view k-item k-listgroup-item" style="display:none">'+'<label class="k-label k-listgroup-form-row">'+'<span class="k-item-title k-listgroup-form-field-label">#:messages.day#</span>'+'<div class="k-listgroup-form-field-wrapper"><input class="k-recur-monthday" type="number" title="#:messages.day#" pattern="\\\\d*"/></div>'+"</label>"+"</li>"+'<li class="k-weekday-view k-item k-listgroup-item" style="display:none">'+'<label class="k-label k-listgroup-form-row">'+'<span class="k-item-title k-listgroup-form-field-label">#:messages.every#</span>'+'<div class="k-listgroup-form-field-wrapper"><select class="k-recur-weekday-offset" title="#:messages.every#"></select></div>'+"</label>"+"</li>"+'<li class="k-weekday-view k-item k-listgroup-item" style="display:none">'+'<label class="k-label k-listgroup-form-row">'+'<span class="k-item-title k-listgroup-form-field-label">#:messages.day#</span>'+'<div class="k-listgroup-form-field-wrapper"><select class="k-recur-weekday" title="#:messages.day#"></select></div>'+"</label>"+"</li>"+'<li class="k-item k-item k-listgroup-item">'+'<label class="k-label k-listgroup-form-row">'+'<span class="k-item-title k-listgroup-form-field-label">#:messages.month#</span>'+'<div class="k-listgroup-form-field-wrapper"><select class="k-recur-month" title="#:messages.month#"></select></div>'+"</label>"+"</li>"+"</ul>"+"# } #");var we=G.template('# if (endPattern === "count") { #'+'<label class="k-label k-listgroup-form-row">'+'<span class="k-item-title k-listgroup-form-field-label">#:messages.after#</span>'+'<div class="k-listgroup-form-field-wrapper"><input class="k-recur-count" type="number" pattern="\\\\d*" /></div>'+"</label>"+'# } else if (endPattern === "until") { #'+'<label class="k-label k-listgroup-form-row">'+'<span class="k-item-title k-listgroup-form-field-label">#:messages.on#</span>'+'<div class="k-listgroup-form-field-wrapper"><input type="date" class="k-recur-until" name="recur-until"/></div>'+"</label>"+"# } #");var A=G.template('<select class="k-scheduler-select">'+"#for (var i = 0, length = dataSource.length; i < length; i++) {#"+'<option value="#=dataSource[i].value#" #= value === dataSource[i].value  ? "selected" : "" #>#:dataSource[i].text#</option>'+"#}#"+"</select>");var ke=n.extend({init:function(e,t){var i=this;n.fn.init.call(i,e,t);t=i.options;i._optionTemplate=G.template('<option value="#:value#">#:text#</option>');i.value(t.value);i._pane=t.pane||i.wrapper.closest("[data-role=pane]").data("kendoPane");i._initRepeatButton();i._initParentRepeatEnd();i._defaultValue=i._value},options:{name:"MobileRecurrenceEditor",animations:{left:"slide",right:"slide:right"},mobile:true,messages:{cancel:"Cancel",update:"Save",endTitle:"Repeat ends",repeatTitle:"Repeat pattern",headerTitle:"Repeat event",end:{patterns:{never:"Never",after:"After...",on:"On..."},never:"Never",after:"End repeat after",on:"End repeat on"},daily:{interval:""},hourly:{interval:""},weekly:{interval:""},monthly:{interval:"",repeatBy:"Repeat by: ",dayOfMonth:"Day of the month",dayOfWeek:"Day of the week",repeatEvery:"Repeat every",every:"Every",day:"Day "},yearly:{interval:"",repeatBy:"Repeat by: ",dayOfMonth:"Day of the month",dayOfWeek:"Day of the week",repeatEvery:"Repeat every: ",every:"Every",month:"Month",day:"Day"}}},events:["change"],value:function(e){var t=this;var i=t.options.timezone;if(e===j){if(!t._value.freq){return""}return D(t._value,i)}t._value=Z(e,i)||{}},destroy:function(){this._destroyView();G.destroy(this._endFields);if(this._weekDayButtonGroup){this._weekDayButtonGroup.destroy()}this.element.off(p+this._namespace);n.fn.destroy.call(this)},_initInterval:function(){var t=this;var i=t._value;t._container.find(".k-recur-interval").val(t._value.interval||1).on(v+t._namespace,function(e){i.interval=e.target.value;t._trigger()})},_initRepeatButton:function(){var t=this;var e=t.options.messages.frequencies[this._value.freq||"never"];t._chevronButton=s('<span class="k-icon k-i-arrow-chevron-right"></span>');t._repeatValue=s('<span class="">'+e+"</span>");t.element.append(t._repeatValue).append(t._chevronButton);t.element.parents("li.k-item").on(p+t._namespace,function(e){e.preventDefault();t._createView("repeat");t._pane.navigate(t._view,t.options.animations.left)})},_endLiItem:function(){var e=this;return'<li class="k-item k-listgroup-item"><label class="k-label k-listgroup-form-row"><span class="k-item-title k-listgroup-form-field-label">'+e.options.messages.end.mobileLabel+"</span></label></li>"},_initParentRepeatEnd:function(){var t=this;var e=s(t._endLiItem()).insertAfter(t.element.parents("li.k-item"));var i=s('<div class="k-scheduler-recur-end-wrap k-listgroup-form-field-wrapper"><span class="k-scheduler-recur-end"></span></div>').appendTo(e.find(".k-label"));e.on(p+t._namespace,function(e){e.preventDefault();t._navigateToView("repeat")});t._endParentLabelField=e.toggle(!!t._value.freq);t._endParentEndButton=i.find(".k-scheduler-recur-end").text(t._endText())},_initRepeatEnd:function(){var t=this;var e=s(t._endLiItem()).insertAfter(t._container);var i=s('<div class="k-scheduler-recur-end-wrap k-listgroup-form-field-wrapper"><span class="k-scheduler-recur-end"></span><span class="k-icon k-i-arrow-chevron-right"></span></div>').appendTo(e.find(".k-label"));e.on(p+t._namespace,function(e){e.preventDefault();t._navigateToView("end")});t._endLabelField=e.toggleClass("k-state-disabled",!t._value.freq);t._endButton=i.find(".k-scheduler-recur-end").text(t._endText())},_navigateToView:function(e){var t=this;t._createView(e);t._pane.navigate(t._view,t.options.animations.left)},_endText:function(){var e=this._value;var t=this.options.messages.end;var i=t.never;if(e.count){i=G.format("{0} {1}",t.after,e.count)}else if(e.until){i=G.format("{0} {1:d}",t.on,e.until)}return i},_initFrequency:function(){var i=this;var t=i.options.messages.frequencies;var e=A({dataSource:s.map(this.options.frequencies,function(e){return{text:t[e],value:e!=="never"?e:""}}),value:i._value.freq||"",ns:G.ns});i._view.element.find(".k-recur-pattern").append(e);i._view.element.find(".k-scheduler-select").on(v+i._namespace,function(e){var t=e.target.value;i._value={freq:t};i._defaultValue=s.extend({},i._value);i._initRepeatView();i._endButton.text(i._endText());i._endParentEndButton.text(i._endText())})},_initEndNavigation:function(){var r=this;var e=r.options.messages.end.patterns;var a=r._value;var t="";if(a.count){t="count"}else if(a.until){t="until"}var i=A({dataSource:[{text:e.never,value:""},{text:e.after,value:"count"},{text:e.on,value:"until"}],value:t,ns:G.ns});r._view.element.find(".k-recur-pattern").append(i);r._view.element.find(".k-scheduler-select").on(v+r._namespace,function(e){var t=e.target.value;var i=null;var n=null;r._initEndView(t);if(r._count.length){i=r._count.val();n=null}else if(r._until.length){i=null;n=r._until.val?G.parseDate(r._until.val(),"yyyy-MM-dd"):r._until.value()}a.count=i;a.until=n})},_createView:function(e){var i=this;var t=i.options;var n=t.messages;var r=n[e==="repeat"?"repeatTitle":"endTitle"];var a='<div data-role="view" class="k-popup-edit-form k-scheduler-edit-form" id="recurrence">'+'<div data-role="header" class="k-header">'+'<a href="#" class="k-header-cancel k-scheduler-cancel k-link" title="'+n.cancel+'"'+'aria-label="'+n.cancel+'"><span class="k-icon k-i-arrow-chevron-left"></span></a>'+n.headerTitle+'<a href="#" class="k-header-done k-scheduler-update k-link" title="'+n.update+'" '+'aria-label="'+n.update+'"><span class="k-icon k-i-check"></span></a>'+"</div>";var o=i._pane.view().id;i._view=i._pane.append(a+_e({headerTitle:r}));i._view.element.on(p+i._namespace,"a.k-scheduler-cancel, a.k-scheduler-update",function(e){e.preventDefault();e.stopPropagation();if(s(this).hasClass("k-scheduler-update")){i.trigger("change");i._defaultValue=s.extend({},i._value)}else{i._value=i._defaultValue}var t=i._value.freq;i._endParentEndButton.text(i._endText());i._endParentLabelField.toggle(!!t&&t!=="never");i._endButton.text(i._endText());i._repeatValue.text(n.frequencies[t||"never"]);i._pane.one("viewShow",function(){i._destroyView()});i._pane.navigate(o,i.options.animations.right)});i._container=i._view.element.find(".k-recur-view");if(e==="repeat"){i._initFrequency();i._initRepeatView();i._initRepeatEnd()}else{i._initEndNavigation();i._initEndView()}},_destroyView:function(){if(this._view){this._view.destroy();this._view.element.remove();this._container=null}this._view=null},_initRepeatView:function(){var e=this;var t=e._value.freq||"never";var i={frequency:t,firstWeekDay:e.options.firstWeekDay,messages:e.options.messages[t]};var n=be(i);var r=e._container=e._container||this._pane.view().content.find("li.k-recur-view");var a=e._value;if(e._endLabelField){e._endLabelField.toggleClass("k-state-disabled",t==="never")}G.destroy(r);r.html(n);if(!n){e._value={};r.hide();return}else{r.show()}if(t==="weekly"&&!a.weekDays){a.weekDays=[{day:e.options.start.getDay(),offset:0}]}e._weekDayButtons(e.options.firstWeekDay);e._initInterval();e._initMonthDay();e._initWeekDays();e._initWeekDay();e._initMonth();e._period()},_initMonthDay:function(){var t=this;var i=t._value;var e=t._monthDay=t._container.find(".k-recur-monthday");e.attr({min:1,max:31}).val(i.monthDays?i.monthDays[0]:t.options.start.getDate()).on(v+t._namespace,function(e){i.count=e.target.value;t._trigger()})},_initCount:function(){var t=this,e=t._count=t._container.find(".k-recur-count"),i=t._value;e.val(i.count||1).on(v+t._namespace,function(e){i.count=e.target.value;t._trigger()})},_initEndView:function(e){var t=this;var i=t._value;if(e===j){if(i.count){e="count"}else if(i.until){e="until"}}var n={endPattern:e,messages:t.options.messages.end};G.destroy(t._container);t._container.html(we(n));t._initCount();t._initUntil()},_initWeekDay:function(){var e=this,t;var i=e.options.messages.weekdays;var n=e.options.messages.offsetPositions;var r=e._container.find(".k-recur-weekday");var a=function(){e._weekDayRule();e.trigger("change")};if(r[0]){e._weekDayOffset=e._container.find(".k-recur-weekday-offset").html(e._options([{text:n.first,value:"1"},{text:n.second,value:"2"},{text:n.third,value:"3"},{text:n.fourth,value:"4"},{text:n.last,value:"-1"}])).change(a);t=[{text:i.day,value:"day"},{text:i.weekday,value:"weekday"},{text:i.weekend,value:"weekend"}];t=t.concat(s.map(G.culture().calendar.days.names,function(e,t){return{text:e,value:t}}));e._weekDay=r.html(e._options(t)).change(a).val(e.options.start.getDay());e._weekDayView()}},_initMonth:function(){var e=this;var t=e._value;var i=e.options.start;var n=t.months||[i.getMonth()+1];var r=e._container.find(".k-recur-month");var a=G.culture().calendar.months.names;if(r[0]){var o=s.map(a,function(e,t){return{text:e,value:t+1}});r.html(e._options(o)).change(function(){t.months=[Number(this.value)]});e._monthSelect=r;if(n){r.val(n[0])}}},_period:function(){var a=this;var o=a._value;var e=a._container;var t=a.options.messages[o.freq];var i=e.find(".k-repeat-rule");var s=e.find(".k-weekday-view");var l=e.find(".k-monthday-view");if(i[0]){var n=o.weekDays?"weekday":"monthday";var r=A({value:n,dataSource:[{text:t.dayOfMonth,value:"monthday"},{text:t.dayOfWeek,value:"weekday"}],ns:G.ns});var d=function(e){var t=a._weekDay.val();var i=a._weekDayOffset.val();var n=a._monthDay.val();var r=a._monthSelect?a._monthSelect.val():null;if(e==="monthday"){o.weekDays=null;o.monthDays=n?[n]:n;o.months=r?[Number(r)]:r;s.hide();l.show()}else{o.monthDays=null;o.months=r?[Number(r)]:r;o.weekDays=[{offset:Number(i),day:Number(t)}];s.show();l.hide()}};i.append(r);i.find(".k-scheduler-select").on(v+a._namespace,function(e){d(e.target.value)});d(n)}},_initUntil:function(){var t=this;var e=t._container.find(".k-recur-until");var i=t.options.start;var n=t._value;var r=n.until;var a=r&&r<i?r:i;var o=G.format(G.ui.Validator.prototype.options.messages.date,t.options.messages.end.on);var s=G.ui.Validator.prototype.options.messages.dateCompare;e.attr("data-validDate-msg",o);e.attr("data-untilDateCompare-msg",s);if(G.support.input.date){t._until=e.attr("min",G.toString(a,"yyyy-MM-dd")).val(G.toString(r||i,"yyyy-MM-dd")).on("change",function(){var e=G.parseDate(this.value,"yyyy-MM-dd");if(e){n.until=e}t._trigger()})}else{t._until=e.kendoDatePicker({min:a,value:r||i,change:function(){var e=this.value();if(e){n.until=e}t._trigger()}}).data("kendoDatePicker")}},_options:function(e,t){var i=0;var n="";var r=e.length;var a=this._optionTemplate;if(t){n+=a({value:"",text:t})}for(;i<r;i++){n+=a(e[i])}return n}});e.plugin(ke)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.scheduler.timelineview",["kendo.scheduler.view"],e)})(function(){var e={id:"scheduler.timelineview",name:"Scheduler Timeline View",category:"web",description:"The Scheduler Timeline View",depends:["scheduler.view"],hidden:true};(function(m,o){var w=window.kendo,e=w.ui,k=w.date.setTime,g=e.SchedulerView,v=w._outerWidth,d=w._outerHeight,_=m.extend,n=m.proxy,f=w.date.getDate,y=w.date.getMilliseconds,x=w.date.MS_PER_DAY,C=w.date.MS_PER_MINUTE,b="k-current-time",S="k-current-time-arrow",T="k-scheduler-header-wrap",u="k-event-inverse",D=.8666,i=".kendoTimelineView";var t=w.template("<div>"+'<div class="k-event-template k-event-time">#:kendo.format("{0:t} - {1:t}", start, end)#</div>'+'<div class="k-event-template">${title}</div></div>'),r=w.template("<span class='k-link k-nav-day'>#=kendo.format('{0:m}', date)#</span>"),a='<div role="gridcell" aria-selected="false" '+'data-#=ns#uid="#=uid#"'+"#if (resources[0]) { #"+'style="background-color:#=resources[0].color#; border-color: #=resources[0].color#"'+'class="k-event" '+"#} else {#"+'class="k-event"'+"#}#"+">"+'<span class="k-event-actions">'+"# if(data.tail) {#"+'<span class="k-icon k-i-arrow-60-left"></span>'+"#}#"+"# if(data.isException()) {#"+'<span class="k-icon k-i-non-recurrence"></span>'+"# } else if(data.isRecurring()) {#"+'<span class="k-icon k-i-reload"></span>'+"# } #"+"</span>"+"{0}"+'<span class="k-event-actions">'+"#if (showDelete) {#"+'<a href="\\#" class="k-link k-event-delete" title="${data.messages.destroy}" aria-label="${data.messages.destroy}"><span class="k-icon k-i-close"></span></a>'+"#}#"+"# if(data.head) {#"+'<span class="k-icon k-i-arrow-60-right"></span>'+"#}#"+"</span>"+"#if(resizable && !data.tail){#"+'<span class="k-resize-handle k-resize-w"></span>'+"#}#"+"#if(resizable && !data.head){#"+'<span class="k-resize-handle k-resize-e"></span>'+"#}#"+"</div>";function A(e){var t=new Date(1980,1,1,0,0,0);k(t,y(e));return t}function s(e){if(e.workDays&&e.workDays.length){return e.workDays}var t=[];var i=e.workWeekStart%7;var n=Math.abs(e.workWeekEnd%7);t.push(i);while(n!=i){if(i>6){i-=7}else{i++}t.push(i)}return t}function l(e){var t=0;if(e.columns){for(var i=0;i<e.columns.length;i++){t+=l(e.columns[i])}e.colspan=t;return t}else{e.colspan=1;return 1}}function p(e,t,i){var n,r,a,o;for(n=e.length-1;n>=0;n--){r=e[n].rectLeft;o=e[n].rectRight;a=r<=t&&o>=t;if(a||r>=t&&o<=i||t<=r&&i>=r){if(r<t){t=r}if(o>i){i=o}}}return c(e,t,i)}function c(e,t,i){var n=[];for(var r=0;r<e.length;r++){var a={rectLeft:e[r].rectLeft,rectRight:e[r].rectRight};if(a.rectLeft<t&&a.rectRight>t||a.rectLeft>=t&&a.rectRight<=i){n.push(e[r])}}return n}var h=w.Class.extend({init:function(e){this._view=e},_getTimeSlotByPosition:function(e,t,i){var n=this._view.groups[i];return n.timeSlotByPosition(e,t)},_hideHeaders:function(){var e=this._view;e.timesHeader.find("table tr:last").hide();e.datesHeader.find("table tr:last").hide()},_setColspan:function(e){l(e)},_createRowsLayout:function(e,t,i){var n=this._view;return n._createRowsLayout(e,t,i)},_createVerticalColumnsLayout:function(e,t,i,n){return n},_createColumnsLayout:function(e,t,i){var n=this._view;return n._createColumnsLayout(e,t,i)},_getRowCount:function(){var e=this._view;return e._groupCount()},_getGroupsCount:function(){return 1},_addContent:function(a,e,t,i,n,r,o,s){var l=this._view;var d="";var u=l.options;var c=function(e){var t="";var i="";var n;var r=function(e){return function(){return l._resourceBySlot({groupIndex:e})}};if(w.date.isToday(a[p])){i+="k-today"}if(w.date.getMilliseconds(e)<w.date.getMilliseconds(u.workDayStart)||w.date.getMilliseconds(e)>=w.date.getMilliseconds(u.workDayEnd)||!l._isWorkDay(a[p])){i+=" k-nonwork-hour"}t+="<td"+(i!==""?' class="'+i+'"':"")+">";n=w.date.getDate(a[p]);w.date.setTime(n,w.date.getMilliseconds(e));t+=o({date:n,resources:r(s?f:h)});t+="</td>";return t};for(var f=0;f<i;f++){d+="<tr>";for(var h=0;h<t;h++){for(var p=0,v=e;p<v;p++){d+=l._forTimeRange(n,r,c)}}d+="</tr>"}return d},_addTimeSlotsCollections:function(e,t,i,n,r){var a=this._view;var o=i.length;if(r){o=Math.floor(o/e)}for(var s=0;s<e;s++){var l=0;var d=a.groups[s];var u;if(r){l=s}var c=l*o;var f=0;if(!r){f=s}var h=i[c].children;var p=h.length/(!r?e:1);var v=p/t;for(var m=0;m<t;m++){var g=m*v+p*f;u=y(new Date(+a.startTime()));for(var _=0;_<v;_++){a._addTimeSlotToCollection(d,h,_,g,m,u,n);u+=n}}}},_getVerticalGroupCount:function(e){return e},_getVerticalRowCount:function(e,t,i){var n=this._view;return n._isVerticallyGrouped()?e[t].maxRowCount:i},_renderEvent:function(e,t,i,n,r,a){var o=this._view;var s;s=o._createEventElement(i.occurrence,t,r.head||i.head,r.tail||i.tail);s.appendTo(a).css({top:0,height:o.options.eventHeight});var l={start:i.occurrence._startTime||i.occurrence.start,end:i.occurrence._endTime||i.occurrence.end,element:s,uid:t.uid,slotRange:r,rowIndex:0,offsetTop:0};e.events[t.uid]=l;o._inverseEventColor(s);o.addContinuousEvent(n,r,s,t.isAllDay);o._arrangeRows(l,r,e)},_verticalCountForLevel:function(e){var t=this._view;return t._rowCountForLevel(e)},_horizontalCountForLevel:function(e){var t=this._view;return t._columnCountForLevel(e)},_updateCurrentVerticalTimeMarker:function(e,t){var i=this._view;var n="<div class='"+b+"'></div>";var r=i.datesHeader.find("."+T);var a=Math.round(e[0].innerRect(t,new Date(t.getTime()+1),false).left);var o=m(n).prependTo(r).addClass(S+"-down");o.css({left:i._adjustLeftPosition(a-v(o)*D/2),top:r.find("tr:last").prev().position().top});m(n).prependTo(i.content).css({left:i._adjustLeftPosition(a),width:"1px",height:i.content[0].scrollHeight-1,top:0})},_changeGroup:function(){return o},_prevGroupSlot:function(e,t,i){var n=this._view;if(n._isVerticallyGrouped()){return e}else{var r=t._collection(0,i);return r.last()}},_nextGroupSlot:function(e,t,i){var n=this._view;if(n._isVerticallyGrouped()){return e}else{var r=t._collection(0,i);return r.first()}},_verticalSlots:function(e,t){var i=this._view;return i._changeGroup(e,t)},_verticalMethod:function(e){return e?"leftSlot":"rightSlot"},_normalizeVerticalSelection:function(){return o},_horizontalSlots:function(e,t,i,n,r,a,o){var s=this._view;var l={};l.startSlot=t[i](n);l.endSlot=t[i](r);if(!a&&s._isHorizontallyGrouped()&&(!l.startSlot||!l.endSlot)){l.startSlot=l.endSlot=s._changeGroup(e,o)}return l},_changeVerticalViewPeriod:function(){return false},_changeHorizontalViewPeriod:function(e,t,i,n){var r=this._view;if((!e.startSlot||!e.endSlot)&&!t&&r._changeViewPeriod(i,n,false)){return true}return false},_updateDirection:function(e,t,i,n){var r=this._view;r._updateDirection(e,t,i,n,true)},_createMoveHint:function(e,t){var i=this._view;var n=e.start;var r=i._createEventElement(t.occurrence,t.occurrence,false,false);r.addClass("k-event-drag-hint");var a=e.innerRect(t.occurrence.start,t.occurrence.end,i.options.snap);var o=a.right-a.left;if(o<0){o=0}var s=i._adjustLeftPosition(a.left);var l={left:s,top:n.offsetTop,height:n.offsetHeight,width:o};r.css(l);if(t.occurrence.inverseColor){r.addClass(u)}i._appendMoveHint(r)},_adjustLeftPosition:function(e){var t=this._view;if(t._isRtl){e-=t.content[0].scrollWidth-t.content[0].clientWidth}return e}});var E=w.Class.extend({init:function(e){this._view=e},_getTimeSlotByPosition:function(e,t,i){var n=this._view.groups[i];return n.timeSlotByPosition(e,t,true)},_hideHeaders:function(){var e=this._view;if(!e._isVerticallyGrouped()){e.timesHeader.find("table tr").eq(2).hide();e.datesHeader.find("table tr").eq(2).hide()}else{e.times.find(".k-last").hide()}},_setColspan:function(){},_createRowsLayout:function(e,t,i,n){var r=this._view;return r._createDateLayout(n,null,true)},_createVerticalColumnsLayout:function(e,t,i){var n=this._view;return n._createColumnsLayout(e,null,i)},_createColumnsLayout:function(e,t,i,n){var r=this._view;return r._createColumnsLayout(e,t,i,n,true)},_getRowCount:function(e){var t=this._view;return t._rowCountForLevel(e)},_getGroupsCount:function(){var e=this._view;return e._groupCount()},_addContent:function(c,e,t,i,n,r,f,a){var h=this._view;var o="";var p=h.options;var s=function(e,t,i,n,r,a){var o="";var s="";var l;var d=h._isVerticallyGrouped()?m:_;var u=function(e){return function(){return h._resourceBySlot({groupIndex:e})}};if(w.date.isToday(c[_])){s+="k-today"}if(w.date.getMilliseconds(e)<w.date.getMilliseconds(p.workDayStart)||w.date.getMilliseconds(e)>=w.date.getMilliseconds(p.workDayEnd)||!h._isWorkDay(c[d])){s+=" k-nonwork-hour"}o+="<td"+(s!==""?' class="'+s+'"':"")+">";l=w.date.getDate(c[_]);w.date.setTime(l,w.date.getMilliseconds(e));o+=f({date:l,resources:u(a)});o+="</td>";return o};var l=new Date(n),d=h.options.minorTickCount,u=h.options.majorTick*C,v=u/d||1,m;for(var g=0;g<i;g++){o+="<tr>";if(g%(i/h._dates.length)===0){m=g/(i/h._dates.length);l=new Date(h._dates[m]);w.date.setTime(l,w.date.getMilliseconds(n))}for(var _=0,b=e;_<b;_++){o+=h._forTimeRange(l,r,s,a,t);if(a){k(l,v,false);break}}o+="</tr>"}return o},_addTimeSlotsCollections:function(e,t,i,n,r){var a=this._view;var o=i.length;if(r){o=o/t}for(var s=0;s<t;s++){var l=0;var d;if(r){l=s}var u=l*o;var c=0;var f=i[u].children;var h=r?o:f.length/(t*e);var p=f.length/t;var v;d=y(new Date(+a.startTime()));for(var m=0;m<h;m++){if(!r){v=s*p+e*m;c++}else{v=0;f=i[m+h*s].children}for(var g=0;g<e;g++){var _=a.groups[g];a._addTimeSlotToCollection(_,f,g,v,s,d,n)}d+=n}}},_getVerticalGroupCount:function(){var e=this._view;return e.content.find("tr").length},_getVerticalRowCount:function(e,t,i){return i},_renderEvent:function(e,t,i,n,r,a,o,s){var l=this._view;var d;var u=[];for(var c=r.start.index;c<=r.end.index;c++){d=l._createEventElement(i.occurrence,t,c!==s,c!==o);d.appendTo(a).css({top:0,height:l.options.eventHeight});var f=n._timeSlotCollections[0]._slots[c];var h=n.timeSlotRanges(f.start,f.end,false)[0];var p={start:c===o?i.occurrence._startTime||i.occurrence.start:f.start,end:c===s?i.occurrence._endTime||i.occurrence.end:f.end,element:d,uid:t.uid,slotRange:h,rowIndex:0,offsetTop:0};e.events[t.uid]=p;u.push(p);l.addContinuousEvent(n,h,d,t.isAllDay);l._arrangeRows(p,h,e)}e.events[t.uid]=u},_verticalCountForLevel:function(e){var t=this._view;return t._columnCountForLevel(e)},_horizontalCountForLevel:function(e,t){var i=this._view;return i._columnCountForLevel(t)/i._columnCountForLevel(2)},_updateCurrentVerticalTimeMarker:function(e,t){var i=this._view;var n=i.times.find("tr:first th:first");var r=i.times.find("tr:first th:last");var a="<div class='"+b+"'></div>";var o=m(a).prependTo(i.times);var s=Math.round(e[0].innerRect(t,new Date(t.getTime()+1),false).top);var l={};if(this._isRtl){l.right=n.position().left+d(n)-d(r);o.addClass(S+"-left")}else{l.left=r.position().left;o.addClass(S+"-right")}l.top=s-v(o)*D/2;o.css(l);m(a).prependTo(i.content).css({top:s,height:"1px",right:"1px",width:i.content[0].scrollWidth,left:0})},_changeGroup:function(e,t,i){var n=this._view;if(!i){e.groupIndex=t?n.groups.length-1:0}},_prevGroupSlot:function(e){return e},_nextGroupSlot:function(e){return e},_changeDate:function(e,t,i){var n=this._view;var r=n.groups[e.groupIndex];var a,o;if(t){a=r._getCollections(false);o=i.index-1;if(o>=0){return a[0]._slots[o]}}else{a=r._getCollections(false);o=i.index+1;if(a[0]&&a[0]._slots[o]){return a[0]._slots[o]}}},_verticalSlots:function(e,t,i){return this._changeDate(e,t,i)},_verticalMethod:function(e,t){if(t){return e?"upSlot":"downSlot"}else{return e?"leftSlot":"rightSlot"}},_normalizeVerticalSelection:function(e,t,i,n){var r=this._view;if(!n){return r._normalizeVerticalSelection(e,t,i)}return o},_horizontalSlots:function(e,t,i,n,r,a,o){var s=this._view;var l=s._changeGroup(e,o);var d={};if(!l){if(!s._isVerticallyGrouped()){d.startSlot=t[i](n);d.endSlot=t[i](r)}}else{d.startSlot=d.endSlot=l}return d},_changeVerticalViewPeriod:function(e,t,i,n){var r=this._view;if((!e.startSlot||!e.endSlot)&&!t&&r._changeViewPeriod(i,n,r._isVerticallyGrouped())){return true}return false},_changeHorizontalViewPeriod:function(e,t,i,n){var r=this._view;if(r._isVerticallyGrouped()){return false}if((!e.startSlot||!e.endSlot)&&!t&&r._changeViewPeriod(i,n,false)){return true}return false},_updateDirection:function(e,t,i,n){var r=this._view;r._updateDirection(e,t,i,n,!r._isVerticallyGrouped())},_createMoveHint:function(e,t){var i=this._view;var n=e.start;var r=e.end;for(var a=n.index;a<=r.index;a++){var o=e.collection._slots[a];var s=i._createEventElement(t.occurrence,t.occurrence,false,false);s.addClass("k-event-drag-hint");var l={left:o.offsetLeft+2,top:o.offsetTop,height:i.options.eventHeight,width:o.offsetWidth};s.css(l);if(t.occurrence.inverseColor){s.addClass(u)}i._appendMoveHint(s)}},_adjustLeftPosition:function(e){var t=this._view;if(t._isRtl&&!t._isVerticallyGrouped()){e-=t.content[0].scrollWidth-t.content[0].offsetWidth}return e}});w.ui.scheduler.TimelineGroupedView=h;w.ui.scheduler.TimelineGroupedByDateView=E;var I=g.extend({init:function(e,t){var i=this;g.fn.init.call(i,e,t);i._groupedView=i._getGroupedView();i.title=i.options.title||i.options.name;i._workDays=s(i.options);i._templates();i._editable();i.calculateDateRange();i._groups();i._currentTime(true)},name:"timeline",_isVirtualized:function(){return false},_getGroupedView:function(){if(this._isGroupedByDate()){return new w.ui.scheduler.TimelineGroupedByDateView(this)}else{return new w.ui.scheduler.TimelineGroupedView(this)}},_getNextEventIndexBySlot:function(e,t,i){if(this._isVerticallyGrouped()){return w.ui.SchedulerView.fn._getNextEventIndexBySlot.call(this,e,t,i)}var n=0;for(var r=0;r<t.length;r++){if(e.startDate()>t[r].start.startDate()){n++;continue}if(e.startDate().getTime()===t[r].start.startDate().getTime()&&i>t[r].start.groupIndex){n++;continue}break}return n},_getSelectedSlot:function(e,t,i,n,r,a){if(this._isVerticallyGrouped()){return w.ui.SchedulerView.fn._getSelectedSlot.call(this,e,t,i,n,r,a)}return e},_getSortedEvents:function(e){if(this._isVerticallyGrouped()){return w.ui.SchedulerView.fn._getSortedEvents.call(this,e)}return e.sort(function(e,t){var i=e.start.startDate().getTime()-t.start.startDate().getTime();if(i===0){if(e.start.isDaySlot&&!t.start.isDaySlot){i=-1}if(!e.start.isDaySlot&&t.start.isDaySlot){i=1}}if(i===0){i=e.start.groupIndex-t.start.groupIndex}if(i===0){i=m(e.element).index()-m(t.element).index()}return i})},_currentTimeMarkerUpdater:function(){this._updateCurrentTimeMarker(new Date)},_updateCurrentTimeMarker:function(e){var t=this.options;this.datesHeader.find("."+b).remove();this.times.find("."+b).remove();this.content.find("."+b).remove();if(!this._isInDateSlot({start:e,end:e})){return}if(t.currentTimeMarker.useLocalTimezone===false){var i=t.dataSource.options.schema.timezone;if(t.dataSource&&i){var n=w.timezone.offset(e,i);e=w.timezone.convert(e,e.getTimezoneOffset(),n)}}var r=!t.group||t.group.orientation=="vertical"?1:this.groups.length;for(var a=0;a<r;a++){var o=this.groups[a];if(!o){return}var s=w.date.toUtcTime(e);var l=o.timeSlotRanges(s,s+1);if(l.length===0){return}var d=l[0].collection;var u=d.slotByStartDate(e);if(u){if(this._isVerticallyGrouped()){this._groupedView._updateCurrentVerticalTimeMarker(l,e)}else{var c="<div class='"+b+"'></div>";var f=this.datesHeader.find("."+T);var h=Math.round(l[0].innerRect(e,new Date(e.getTime()+1),false).left);var p=m(c).prependTo(f).addClass(S+"-down");p.css({left:this._adjustLeftPosition(h-v(p)*D/2),top:f.find("tr:last").prev().position().top});m(c).prependTo(this.content).css({left:this._adjustLeftPosition(h),width:"1px",height:this.content[0].scrollHeight-1,top:0})}}}},_adjustLeftPosition:function(e){return this._groupedView._adjustLeftPosition(e)},_currentTime:function(e){var t=this;var i=t.options.currentTimeMarker;if(i!==false&&i.updateInterval!==o){t._currentTimeMarkerUpdater();if(e){t._currentTimeUpdateTimer=setInterval(n(this._currentTimeMarkerUpdater,t),i.updateInterval)}}},_editable:function(){if(this.options.editable){if(this._isMobile()){this._touchEditable()}else{this._mouseEditable()}}},_mouseEditable:function(){var n=this;n.element.on("click"+i,".k-event a:has(.k-i-close)",function(e){n.trigger("remove",{uid:m(this).closest(".k-event").attr(w.attr("uid"))});e.preventDefault()});if(n.options.editable.create!==false){n.element.on("dblclick"+i,".k-scheduler-content td",function(e){var t=n._slotByPosition(e.pageX,e.pageY);if(t){var i=n._resourceBySlot(t);n.trigger("add",{eventInfo:_({start:t.startDate(),end:t.endDate()},i)})}e.preventDefault()})}if(n.options.editable.update!==false){n.element.on("dblclick"+i,".k-event",function(e){n.trigger("edit",{uid:m(this).closest(".k-event").attr(w.attr("uid"))});e.preventDefault()})}},_touchEditable:function(){var a=this;var e=0;if(w.support.mobileOS.android){e=5}if(a.options.editable.create!==false){a._addUserEvents=new w.UserEvents(a.element,{threshold:e,useClickAsTap:!w.support.browser.edge,filter:".k-scheduler-content td",tap:function(e){if(a._scrolling){return}var t=e.x.location!==o?e.x.location:e.x;var i=e.y.location!==o?e.y.location:e.y;var n=a._slotByPosition(t,i);if(n){var r=a._resourceBySlot(n);a.trigger("add",{eventInfo:_({start:n.startDate(),end:n.endDate()},r)})}e.preventDefault()}})}if(a.options.editable.update!==false){a._editUserEvents=new w.UserEvents(a.element,{threshold:e,useClickAsTap:!w.support.browser.edge,filter:".k-event",tap:function(e){if(a._scrolling){return}var t=m(e.target).closest(".k-event");var i=m(e.touch.initialTouch);if(i.hasClass("k-i-close")){a.trigger("remove",{uid:t.attr(w.attr("uid"))})}else if(!t.hasClass("k-event-active")){a.trigger("edit",{uid:t.attr(w.attr("uid"))})}e.preventDefault()}})}},_slotByPosition:function(e,t){var i;var n=this.content;var r=n.offset();var a;e-=r.left;t-=r.top;if(this._isRtl){var o=w.support.browser;if(o.mozilla||o.webkit&&o.version>=85){e+=n[0].scrollWidth-n[0].offsetWidth;e+=n[0].scrollLeft}else if(o.msie){e-=w.scrollLeft(n);e+=n[0].scrollWidth-n[0].offsetWidth}else if(o.webkit){e+=n[0].scrollLeft}}else{e+=n[0].scrollLeft}t+=n[0].scrollTop;e=Math.ceil(e);t=Math.ceil(t);for(a=0;a<this.groups.length;a++){i=this._groupedView._getTimeSlotByPosition(e,t,a);if(i){return i}}return null},options:{name:"TimelineView",title:"Timeline",selectedDateFormat:"{0:D}",selectedShortDateFormat:"{0:d}",selectedMobileDateFormat:"{0:MMM dd}",date:w.date.today(),startTime:w.date.today(),endTime:w.date.today(),showWorkHours:false,minorTickCount:2,editable:true,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,majorTick:60,eventHeight:25,eventMinWidth:0,columnWidth:100,groupHeaderTemplate:"#=text#",majorTimeHeaderTemplate:"#=kendo.toString(date, 't')#",slotTemplate:"&nbsp;",eventTemplate:t,dateHeaderTemplate:r,footer:{command:"workDay"},currentTimeMarker:{updateInterval:1e4,useLocalTimezone:true},messages:{defaultRowText:"All events",showFullDay:"Show full day",showWorkDay:"Show business hours"}},events:["remove","add","edit"],_templates:function(){var e=this.options,t=_({},w.Template,e.templateSettings);this.eventTemplate=this._eventTmpl(e.eventTemplate,a);this.majorTimeHeaderTemplate=w.template(e.majorTimeHeaderTemplate,t);this.dateHeaderTemplate=w.template(e.dateHeaderTemplate,t);this.slotTemplate=w.template(e.slotTemplate,t);this.groupHeaderTemplate=w.template(e.groupHeaderTemplate,t)},_render:function(e){var n=this;e=e||[];n._dates=e;n._startDate=e[0];n._endDate=e[e.length-1||0];n._calculateSlotRanges();n.createLayout(n._layout(e));n._content(e);n._footer();n._setContentWidth();n.refreshLayout();n.datesHeader.on("click"+i,".k-nav-day",function(e){var t=m(e.currentTarget).closest("th");var i=n._slotByPosition(t.offset().left,n.content.offset().top);n.trigger("navigate",{view:"timeline",date:i.startDate()})});n._groupedView._hideHeaders()},_setContentWidth:function(){var e=this.content;var t=e.width();var i=this.content.find("table");var n=i.find("tr:first").children().length;var r=100;var a=n*this.options.columnWidth;if(t<a){r=Math.ceil(a/t*100)}i.add(this.datesHeader.find("table")).css("width",r+"%")},_calculateSlotRanges:function(){var e=this._dates;var t=this.startTime();var i=this.endTime();i=y(i);t=y(t);if(i===t){i+=x-1}else if(i<t){i+=x}var n=[];for(var r=0;r<e.length;r++){var a=f(e[r]);k(a,t);var o=f(e[r]);k(o,i);n.push({start:w.date.toUtcTime(a),end:w.date.toUtcTime(o)})}this._slotRanges=n},_forTimeRange:function(e,t,i,n,r){e=A(e);t=A(t);var a=this,o=y(e),s=y(t),l=a.options.minorTickCount,d=a.options.majorTick*C,u=d/l||1,c=new Date(+e),f=0,h,p="";h=x/u;if(o!=s){if(o>s){s+=x}h=(s-o)/u}h=n?1:Math.round(h);if(r){h=h*r}for(;f<h;f++){var v=f%(d/u);var m=v===0;var g=v<l-1;var _=v===l-1;var b=l;if(h%l!==0){var w=h-(f+1)<l;if(m&&w){b=h%l}}p+=i(c,m,g,_,b,f%r);if(!n){if(r){if(f%r===r-1){k(c,u,false)}}else{k(c,u,false)}}}return p},_layout:function(e){var s=[];var t=[];var l=this;var i=[{text:l.options.messages.defaultRowText}];var d=l._groupedView;var u=[];for(var n=0;n<l.options.minorTickCount;n++){u.push({text:"&#8203;",className:"k-last",minorTicks:true})}this._forTimeRange(l.startTime(),l.endTime(),function(e,t,i,n,r){var a=l.majorTimeHeaderTemplate;if(t){var o={text:a({date:e}),className:n?"k-slot-cell":"",columns:u.slice(0,r)};d._setColspan(o);s.push(o)}});for(var r=0;r<e.length;r++){t.push({text:l.dateHeaderTemplate({date:e[r]}),className:"k-slot-cell",columns:s.slice(0)})}var a=this.groupedResources;if(a.length){if(this._groupOrientation()==="vertical"){i=d._createRowsLayout(a,null,this.groupHeaderTemplate,t);t=d._createVerticalColumnsLayout(a,null,this.groupHeaderTemplate,t)}else{t=d._createColumnsLayout(a,t,this.groupHeaderTemplate,t)}}return{columns:t,rows:i}},_footer:function(){var o=this.options;if(o.footer!==false){var e='<div class="k-scheduler-footer k-toolbar">';var t=o.footer.command;if(this._isMobile()){e+='<span class="k-state-default k-scheduler-today"><a href="#" class="k-link">';e+=o.messages.today+"</a></span>"}if(t&&t==="workDay"){if(this._isMobile()){e+='<span class="k-state-default k-scheduler-fullday"><a href="#" class="k-link">';e+=(o.showWorkHours?o.messages.showFullDay:o.messages.showWorkDay)+"</a></span>"}else{e+='<button type="button" class="k-button k-scheduler-fullday">';e+='<span class="k-icon k-i-clock"></span>';e+='<span class="k-button-text">';e+=o.showWorkHours?o.messages.showFullDay:o.messages.showWorkDay;e+="</span>";e+="</button>"}}e+="</div>";this.footer=m(e).appendTo(this.element);var s=this;this.footer.on("click"+i,".k-scheduler-fullday",function(e){e.preventDefault();s.trigger("navigate",{view:s.name||o.name,date:s.startDate(),isWorkDay:!o.showWorkHours})});this.footer.on("click"+i,".k-scheduler-today",function(e){e.preventDefault();var t=s.options.timezone;var i="today";var n=new Date;var r;if(t){var a=w.timezone.offset(n,t);r=w.timezone.convert(n,n.getTimezoneOffset(),a)}else{r=n}s.trigger("navigate",{view:s.name||o.name,action:i,date:r})})}},_columnCountForLevel:function(e){var t=this.columnLevels[e];return t?t.length:0},_rowCountForLevel:function(e){var t=this.rowLevels[e];return t?t.length:0},_isWorkDay:function(e){var t=e.getDay();var i=this._workDays;for(var n=0;n<i.length;n++){if(i[n]===t){return true}}return false},_content:function(e){var t=this;var i=t.startTime();var n=this.endTime();var r=1;var a=1;var o=e.length;var s="";var l=this.groupedResources;var d=this.slotTemplate;var u=false;if(l.length){u=t._groupOrientation()==="vertical";if(u){a=t._groupedView._getRowCount(this.rowLevels.length-1);r=t._groupedView._getGroupsCount()}else{r=t._groupCount()}}s+="<tbody>";s+=t._groupedView._addContent(e,o,r,a,i,n,d,u);s+="</tbody>";this.content.find("table").append(s)},_groups:function(){var e=this._groupCount();var t=this._dates;var i=t.length;this.groups=[];for(var n=0;n<e;n++){var r=this._addResourceView(n);var a=t[0];var o=t[t.length-1||0];var s=y(this.startTime());var l=y(this.endTime());if(s!==0&&l<=s){a=f(a);k(a,s);o=f(o);k(o,l)}r.addTimeSlotCollection(a,w.date.addDays(o,1))}this._timeSlotGroups(e,i)},_isHorizontallyGrouped:function(){return this.groupedResources.length&&this._groupOrientation()==="horizontal"},_timeSlotGroups:function(e,t){var i=this._timeSlotInterval();var n=this._isVerticallyGrouped();var r=this.content.find("tr");r.attr("role","row");this._groupedView._addTimeSlotsCollections(e,t,r,i,n)},_addTimeSlotToCollection:function(e,t,i,n,r,a,o){var s=t[i+n];var l=e.getTimeSlotCollection(0);var d=this._dates[r];var u=Date.UTC(d.getFullYear(),d.getMonth(),d.getDate());var c=u+a;var f=c+o;s.setAttribute("role","gridcell");s.setAttribute("aria-selected",false);l.addTimeSlot(s,c,f,true)},startDate:function(){return this._startDate},endDate:function(){return this._endDate},visibleEndDate:function(){var e=y(this.startTime());var t=y(this.endTime());var i=this.endDate();if(e!==0&&t<=e){i=w.date.addDays(i,1)}return i},startTime:function(){var e=this.options;return e.showWorkHours?e.workDayStart:e.startTime},endTime:function(){var e=this.options;return e.showWorkHours?e.workDayEnd:e.endTime},_timeSlotInterval:function(){var e=this.options;return e.majorTick/e.minorTickCount*C},nextDate:function(){return w.date.nextDay(this.endDate())},previousDate:function(){return w.date.previousDay(this.startDate())},calculateDateRange:function(){this._render([this.options.date])},render:function(e){this._headerColumnCount=0;this._groups();this.element.find(".k-event").remove();e=new w.data.Query(e).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray();var t=[];this._eventsByResource(e,this.groupedResources,t);var i=[];var n=0;for(var r=0;r<t.length;r++){var a={groupIndex:r,maxRowCount:0,events:{}};i.push(a);this._renderEvents(t[r],r,a);if(n<a.maxRowCount){n=a.maxRowCount}}this._setRowsHeight(i,t.length,n);this._positionEvents(i,t.length);this._currentTime(false);this.trigger("activate")},_positionEvents:function(e,t){for(var i=0;i<t;i++){var n=e[i].events;for(var r in n){var a=n[r];if(m.isArray(a)){for(var o=0;o<a.length;o++){this._positionEvent(a[o])}}else{this._positionEvent(a)}}}},_setRowsHeight:function(e,t,i){var n=this.options.eventHeight;var r=this._getBottomRowOffset();var a=this._groupedView;var o=a._getVerticalGroupCount(t);t=this._isVerticallyGrouped()?o:1;for(var s=0;s<t;s++){var l=a._getVerticalRowCount(e,s,i);l=l?l:1;var d=(n+2)*l+r;var u=m(this.times.find("tr")[s]);var c=m(this.content.find("tr")[s]);u.height(d);c.height(d)}this._setContentWidth();this.refreshLayout();this._refreshSlots()},_getBottomRowOffset:function(){var e=this.options.eventHeight*.5;var t=this._isMobile();var i;var n;if(t){i=30;n=60}else{i=15;n=30}if(e>n){e=n}else if(e<i){e=i}return e},_positionEvent:function(e){var t=this.options.eventHeight;var i=2;var n=e.slotRange.innerRect(e.start,e.end,false);var r=this._adjustLeftPosition(n.left);var a=n.right-n.left;if(a<0){a=0}if(a<this.options.eventMinWidth){var o=e.slotRange.collection;var s=o._slots[o._slots.length-1];var l=s.offsetLeft+s.offsetWidth;a=this.options.eventMinWidth;if(l<r+a){a=l-n.left}}e.element.css({top:e.slotRange.start.offsetTop+e.rowIndex*(t+i)+"px",left:r,width:a})},_refreshSlots:function(){for(var e=0;e<this.groups.length;e++){this.groups[e].refresh()}},_eventsByResource:function(e,t,i){var n=t[0];if(n){var r=n.dataSource.view();for(var a=0;a<r.length;a++){var o=this._resourceValue(n,r[a]);var s=new w.data.Query(e).filter({field:n.field,operator:g.groupEqFilter(o)}).toArray();if(t.length>1){this._eventsByResource(s,t.slice(1),i)}else{i.push(s)}}}else{i.push(e)}},_isInDateSlot:function(e){var t=e.start;var i=e.end;var n=f(this._startDate);var r=w.date.addDays(f(this.visibleEndDate()),1);if(t<r&&n<=i){return true}return false},_isInTimeSlot:function(e){var t=e._startTime||w.date.toUtcTime(e.start);var i=e._endTime||w.date.toUtcTime(e.end);var n=this._slotRanges;if(t===i){i=i+1}for(var r=0;r<n.length;r++){if(t<n[r].end&&n[r].start<i){return true}}return false},_adjustEvent:function(e){var t=e.start;var i=e.end;var n=e._time("start");var r=e._time("end");var a=y(this.startTime());var o=y(this.endTime());var s=null;var l=null;var d;var u=false;var c=false;if(e.isAllDay){t=f(t);n=0;i=f(i);r=x;l=w.date.addDays(i,1)}if(o===0){o=x}if(o<=a){if(n<a&&n>=o){s=f(t);k(s,a);c=true}if(r>o&&r<=a){l=f(i);k(l,o);u=true}}else{if(a>n){s=f(t);k(s,a);c=true}else if(o<=n){s=f(t);s=w.date.addDays(s,1);k(s,a);c=true}if(o<r){l=f(i);k(l,o);u=true}else if(a>r){l=f(i);l=w.date.addDays(l,-1);k(l,o);u=true}}d=e.clone({start:s?s:t,end:l?l:i,_startTime:s?w.date.toUtcTime(s):e._startTime,_endTime:l?w.date.toUtcTime(l):e._endTime,isAllDay:false});return{occurrence:d,head:u,tail:c}},_renderEvents:function(e,t,i){var n;var r;var a;for(r=0,a=e.length;r<a;r++){n=e[r];if(this._isInDateSlot(n)){var o=n.isAllDay||n.duration()>=x;var s=this.content;if(o||this._isInTimeSlot(n)){var l=this._adjustEvent(n);var d=this.groups[t];if(!d._continuousEvents){d._continuousEvents=[]}if(this._isInTimeSlot(l.occurrence)){var u=d.slotRanges(l.occurrence,false);var c=u[0];var f=c.start.index;var h=c.end.index;this._groupedView._renderEvent(i,n,l,d,c,s,f,h)}}}}},addContinuousEvent:function(e,t,i,n){var r=e._continuousEvents;r.push({element:i,isAllDay:n,uid:i.attr(w.attr("uid")),start:t.start,end:t.end})},_createEventElement:function(e,t,i,n){var r=this.eventTemplate;var a=this.options.editable;var o=this._isMobile();var s=a&&a.destroy!==false&&!o;var l=a&&a.resize!==false;var d=t._time("start");var u=t._time("end");var c=t.start;var f=t.end;var h=this.eventResources(t);if(t._startTime&&d!==w.date.getMilliseconds(t.start)){c=new Date(d);c=w.timezone.apply(c,"Etc/UTC")}if(t._endTime&&u!==w.date.getMilliseconds(t.end)){f=new Date(u);f=w.timezone.apply(f,"Etc/UTC")}var p=_({},{ns:w.ns,resizable:l,showDelete:s,head:i,tail:n,singleDay:this._dates.length==1,resources:h,inverseColor:false,messages:this.options.messages},t,{start:c,end:f});var v=m(r(p));this.angular("compile",function(){return{elements:v,data:[{dataItem:p}]}});return v},_arrangeRows:function(e,t,i){var n=t.start.index;var r=t.end.index;var a=e.slotRange.innerRect(e.start,e.end,false);var o=a.right+this.options.eventMinWidth;var s=p(t.events(),a.left,o);t.addEvent({slotIndex:n,start:n,end:r,rectLeft:a.left,rectRight:o,element:e.element,uid:e.uid});s.push({start:n,end:r,uid:e.uid});var l=g.createRows(s);if(i.maxRowCount<l.length){i.maxRowCount=l.length}for(var d=0,u=l.length;d<u;d++){var c=l[d].events;for(var f=0,h=c.length;f<h;f++){i.events[c[f].uid].rowIndex=d}}},_groupCount:function(){var e=this.groupedResources;var t=this._groupedView;if(e.length){if(this._groupOrientation()==="vertical"){return t._verticalCountForLevel(e.length-1)}else{return t._horizontalCountForLevel(e.length-1,this.columnLevels.length-1)}}return 1},_updateEventForSelection:function(e){var t=this._adjustEvent(e.clone());return t.occurrence},_eventOptionsForMove:function(e){if((e.end.getTime()-e.start.getTime())/1e3>=24*60*60){return{isAllDay:true}}else{return{isAllDay:false}}},_updateEventForResize:function(e){if(e.isAllDay){e.set("isAllDay",false)}},_updateMoveHint:function(e,t,i){var n=this.groups[t];var r=e.clone({start:e.start,end:e.end});var a=r.duration();r.start=new Date(r.start.getTime()+i);r.end=new Date(+r.start+a);this._removeMoveHint(e.uid);if(this._isInDateSlot(r)){if(r.isAllDay||r.duration()>=x||this._isInTimeSlot(r)){var o=this._adjustEvent(r);var s=n.slotRanges(o.occurrence,false);for(var l=0;l<s.length;l++){this._groupedView._createMoveHint(s[l],o)}}}},_appendMoveHint:function(e){e.appendTo(this.content);this._moveHint=this._moveHint.add(e)},_updateResizeHint:function(e,t,i,n){var r=this.groups[t];var a=r.ranges(i,n,false,false);this._removeResizeHint();for(var o=0;o<a.length;o++){var s=a[o];var l=s.startSlot();var d=s.innerRect(i,n,false);d.top=l.offsetTop;var u=d.right-d.left;if(u<0){for(var c=0;c<s.events().length;c++){if(s.events()[c].uid===e.uid){u=s.events()[c].rectRight-d.left;break}}}var f=s.endSlot().offsetTop+l.offsetHeight-d.top;var h=this._adjustLeftPosition(d.left);var p=g.fn._createResizeHint.call(this,h,d.top,u,f);this._resizeHint=this._resizeHint.add(p)}var v="t";var m=this.content;this._resizeHint.appendTo(m);this._resizeHint.find(".k-label-top,.k-label-bottom").text("");this._resizeHint.first().addClass("k-first").find(".k-label-top").text(w.toString(w.timezone.toLocalDate(i),v));this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(w.toString(w.timezone.toLocalDate(n),v))},selectionByElement:function(e){var t=e.offset();return this._slotByPosition(t.left,t.top)},_updateDirection:function(e,t,i,n,r){var a=t[0].start;var o=t[t.length-1].end;if(i&&!r){if(a.index===o.index&&a.collectionIndex===o.collectionIndex){e.backward=n}}},_changeGroup:function(e,t){var i=t?"prevGroupSlot":"nextGroupSlot";var n=this[i](e.start,e.groupIndex,false);if(n){e.groupIndex+=t?-1:1}this._groupedView._changeGroup(e,t,n);return n},prevGroupSlot:function(e,t,i){var n=this.groups[t];var r=n.ranges(e,e,i,false)[0].start;if(t<=0){return}return this._groupedView._prevGroupSlot(r,n,i)},nextGroupSlot:function(e,t,i){var n=this.groups[t];var r=n.ranges(e,e,i,false)[0].start;if(t>=this.groups.length-1){return}return this._groupedView._nextGroupSlot(r,n,i)},_verticalSlots:function(e,t,i,n){var r=this._groupedView;var a=r._verticalMethod(n,i);var o=t[0].start;var s=t[t.length-1].end;var l=this.groups[e.groupIndex];var d=r._normalizeVerticalSelection(e,t,n,i);if(d){o=s=d}o=l[a](o);s=l[a](s);if(!i&&this._isVerticallyGrouped()&&(!o||!s)){o=s=r._verticalSlots(e,n,d)}return{startSlot:o,endSlot:s}},_horizontalSlots:function(e,t,i,n){var r=n?"upSlot":"downSlot";var a=t[0].start;var o=t[t.length-1].end;var s=this.groups[e.groupIndex];var l={};if(!i){l=this._groupedView._horizontalSlots(e,s,r,a,o,i,n)}else{l.startSlot=s[r](a);l.endSlot=s[r](o);if(!i&&this._isHorizontallyGrouped()&&(!a||!o)){l.startSlot=l.endSlot=this._changeGroup(e,n)}}return l},_changeViewPeriod:function(e,t){var i=t?this.previousDate():this.nextDate();var n=e.start;var r=e.end;var a,o;a=new Date(i);o=new Date(i);if(this._isInRange(a,o)){return false}e.start=a;e.end=o;if(this._isHorizontallyGrouped()){e.groupIndex=t?this.groups.length-1:0}var s=r-n;if(t){r=y(this.endTime());r=r===0?x:r;k(e.start,r-s);k(e.end,r)}else{n=y(this.startTime());k(e.start,n);k(e.end,n+s)}e.events=[];return true},move:function(e,t,i){var n=false;var r=this.groups[e.groupIndex];var a=w.keys;var o=this._groupedView;var s=r.ranges(e.start,e.end,false,false);var l,d,u,c;if(t===a.DOWN||t===a.UP){n=true;u=t===a.UP;o._updateDirection(e,s,i,u);c=this._verticalSlots(e,s,i,u);if(o._changeVerticalViewPeriod(c,i,e,u)){return n}}else if(t===a.LEFT||t===a.RIGHT){n=true;u=t===a.LEFT;this._updateDirection(e,s,i,u,false);c=this._horizontalSlots(e,s,i,u);if(o._changeHorizontalViewPeriod(c,i,e,u)){return n}}if(n){l=c.startSlot;d=c.endSlot;if(i){var f=e.backward;if(f&&l){e.start=l.startDate()}else if(!f&&d){e.end=d.endDate()}}else if(l&&d){e.start=l.startDate();e.end=d.endDate()}e.events=[]}return n},destroy:function(){var e=this;if(e.element){e.element.off(i)}if(e.footer){e.footer.remove()}if(e._currentTimeUpdateTimer){clearInterval(e._currentTimeUpdateTimer)}g.fn.destroy.call(this);if(this._isMobile()&&e.options.editable){if(e.options.editable.create!==false){e._addUserEvents.destroy()}if(e.options.editable.update!==false){e._editUserEvents.destroy()}}}});_(true,e,{TimelineView:I,TimelineWeekView:I.extend({options:{name:"TimelineWeekView",title:"Timeline Week",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}",selectedMobileDateFormat:"{0:MMM dd} - {1:dd}",majorTick:120},name:"timelineWeek",calculateDateRange:function(){var e=this.options.date,t=w.date.dayOfWeek(e,this.calendarInfo().firstDay,-1),i,n,r=[];for(i=0,n=7;i<n;i++){r.push(t);t=w.date.nextDay(t)}this._render(r)}}),TimelineWorkWeekView:I.extend({options:{name:"TimelineWorkWeekView",title:"Timeline Work Week",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}",selectedMobileDateFormat:"{0:MMM dd} - {1:dd}",majorTick:120},name:"timelineWorkWeek",nextDate:function(){var e=w.date.dayOfWeek(w.date.nextDay(this.endDate()),this.calendarInfo().firstDay,1);return w.date.addDays(e,this._workDays[0])},previousDate:function(){var e=w.date.dayOfWeek(this.startDate(),this.calendarInfo().firstDay,-1);var t=this._workDays;return w.date.addDays(e,t[t.length-1]-7)},calculateDateRange:function(){var e=this.options,t=e.date,i=w.date.dayOfWeek,n=i(t,this.calendarInfo().firstDay,-1),r=i(n,e.workWeekStart,1),a=i(r,e.workWeekEnd,1),o=[],s=e.workDays&&e.workDays.length?e.workDays.map(function(e){return i(n,e,1).getTime()}):null;if(s){r=n;a=i(r,this.calendarInfo().firstDay+6,1)}while(r<=a){if(s&&s.indexOf(r.getTime())>-1){o.push(r)}else if(!s){o.push(r)}r=w.date.nextDay(r)}this._render(o)}}),TimelineMonthView:I.extend({options:{name:"TimelineMonthView",title:"Timeline Month",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}",workDayStart:new Date(1980,1,1,0,0,0),workDayEnd:new Date(1980,1,1,23,59,59),footer:false,majorTick:1440,minorTickCount:1},name:"timelineMonth",calculateDateRange:function(){var e=this.options.date,t=w.date.firstDayOfMonth(e),i=w.date.lastDayOfMonth(e),n,r,a=[];for(n=0,r=i.getDate();n<r;n++){a.push(t);t=w.date.nextDay(t)}this._render(a)}})})})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.scheduler",["kendo.dropdownlist","kendo.editable","kendo.multiselect","kendo.window","kendo.datetimepicker","kendo.scheduler.recurrence","kendo.scheduler.view","kendo.scheduler.dayview","kendo.scheduler.agendaview","kendo.scheduler.monthview","kendo.scheduler.timelineview","kendo.dialog","kendo.pane","kendo.pdf","kendo.switch"],e)})(function(){var e={id:"scheduler",name:"Scheduler",category:"web",description:"The Scheduler is an event calendar.",depends:["dropdownlist","editable","multiselect","window","datepicker","datetimepicker","scheduler.recurrence","scheduler.view"],features:[{id:"scheduler-dayview",name:"Scheduler Day View",description:"Scheduler Day View",depends:["scheduler.dayview"]},{id:"scheduler-agendaview",name:"Scheduler Agenda View",description:"Scheduler Agenda View",depends:["scheduler.agendaview"]},{id:"scheduler-monthview",name:"Scheduler Month View",description:"Scheduler Month View",depends:["scheduler.monthview"]},{id:"scheduler-timelineview",name:"Scheduler Timeline View",description:"Scheduler Timeline View",depends:["scheduler.timelineview"]},{id:"scheduler-mobile",name:"Scheduler adaptive rendering",description:"Support for adaptive rendering",depends:["dialog","pane","switch"]},{id:"scheduler-pdf-export",name:"PDF export",description:"Export the scheduler events as PDF",depends:["pdf","drawing"]},{id:"scheduler-timezones",name:"Timezones",description:"Allow selecting timezones different than Etc/UTC",depends:["timezones"]}]};(function(k,v){var y=window.kendo,B=y.date,o=B.MS_PER_DAY,m=B.getDate,d=y.date.getMilliseconds,s=y.recurrence,x=k.extend({F10:121},y.keys),e=y.ui,r=e.Widget,L=e.DataBoundWidget,u="string",H=e.Popup,N=e.Calendar,a=y.data.DataSource,g=k.isPlainObject,C=k.extend,l=k.proxy,O=Object.prototype.toString,c=k.isArray,_=".kendoScheduler",b="click",n="mousedown",V=y.support.pointers?"pointerdown":"touchstart",W=y.support.pointers?"pointermove":"touchmove",U=y.support.pointers?"pointerup":"touchend",j=y.support.mousemove,f="change",h="progress",p="error",w="cancel",S="remove",G="resetSeries",T="save",q="add",D="edit",A="k-state-focused",$="k-state-expanded",E=".k-scheduler-views",K="k-event-inverse",Y=/(?:value:start|value:end)(?:,|$)/,t=m(new Date),I=",",Q=/\;/g,M="recurrenceException",X="Are you sure you want to delete this event?",Z="Do you want to delete only this event occurrence or the whole series?",J="Do you want to edit only this event occurrence or the whole series?",ee="Are you sure you want to delete this event occurrence?",te="Are you sure you want to reset the whole series?",ie="Are you sure you want to delete the whole series?",ne='<button type="button" class="k-button #=className#" #=attr#><span class="k-button-text">#=text#</span></button>',re=y.template(""+'<select class="k-dropdown k-views-dropdown">'+"#for (var view in views) {#"+'<option value="#= view #">${views[view].title}</option>'+"#}#"+"</select>"),ae=y.template(""+'<div class="k-scheduler-toolbar k-toolbar">'+"# if (pdf) { #"+'<button class="k-button k-pdf"><span class="k-icon k-i-file-pdf"></span><span class="k-button-text">${messages.pdf}</span></button>'+"# } #"+'<span class="k-scheduler-navigation k-button-group">'+'<button class="k-button k-nav-today" title="${messages.today}"><span class="k-button-text">${messages.today}</span></button>'+'<button class="k-button k-button-icon k-icon-button k-nav-prev" title="${messages.previous}" aria-label="${messages.previous}"><span class="k-icon k-i-arrow-60-left"></span></button>'+'<button class="k-button k-button-icon k-icon-button k-nav-next" title="${messages.next}" aria-label="${messages.next}"><span class="k-icon k-i-arrow-60-right"></span></button>'+"</span>"+'<a role="button" href="\\#" class="k-nav-current">'+'<span class="k-icon k-i-calendar"></span>'+'<span class="k-sm-date-format" data-#=ns#bind="text: formattedShortDate"></span>'+'<span class="k-lg-date-format" data-#=ns#bind="text: formattedDate"></span>'+"</a>"+'<span class="k-spacer k-toolbar-spacer"></span>'+"# if (search) { #"+'<span class="k-scheduler-search k-textbox">'+'<input autocomplete="off" placeholder="Search..." title="Search..." class="k-input k-scheduler-search-input" />'+'<span class="k-input-icon"><span class="k-icon k-i-search"></span></span>'+"</span>"+"# } #"+"# if (viewsCount === 1) { #"+'<a role="button" data-#=ns#name="#=view#" href="\\#" class="k-button k-button-icon k-icon-button k-scheduler-refresh">'+'<span class="k-icon k-i-reload"></span>'+"</a>"+"# } else { #"+'<span class="k-scheduler-views-wrapper">'+'<span class="k-scheduler-views k-button-group">'+"# for (var view in views) { #"+'<button type="button" class="k-button k-view-#= view.toLowerCase() #" data-#=ns#name="#=view#">${views[view].title}</button>'+"# } #"+"</span>"+"</span>"+"# } #"+"</div>"),oe=y.template('<div class="k-scheduler-toolbar k-toolbar">'+'<span class="k-scheduler-tools k-button-group">'+"# if (pdf) { #"+'<button type="button" class="k-button k-icon-button k-button-icon k-pdf"><span class="k-icon k-i-file-pdf"></span></button>'+"# } #"+'<button type="button" class="k-button k-icon-button k-button-icon k-nav-calendar"><span class="k-icon k-i-calendar"></span></button>'+"# if (editable) { #"+'<button type="button" class="k-button k-icon-button k-button-icon k-create-event"><span class="k-icon k-i-plus"></span></button>'+"# } #"+"</span>"+'<span class="k-spacer k-toolbar-spacer"></span>'+"# if (search) { #"+'<span class="k-scheduler-search k-textbox">'+'<input autocomplete="off" placeholder="Search..." title="Search..." class="k-scheduler-search-input" />'+'<span class="k-input-icon"><span class="k-icon k-i-search"></span></span>'+"</span>"+"# } #"+"#if(viewsCount === 1){#"+'<a role="button" data-#=ns#name="#=view#" href="\\#" class="k-button k-button-icon k-icon-button k-scheduler-refresh">'+'<span class="k-icon k-i-reload"></span>'+"</a>"+"#} else {#"+'<select class="k-dropdown k-scheduler-mobile-views">'+"#for(var view in views){#"+'<option class="k-view-#= view.toLowerCase() #" value="#=view#">${views[view].title}</option>'+"#}#"+"</select>"+"#}#"+"</div>"+'<div class="k-scheduler-toolbar k-toolbar">'+'<span class="k-scheduler-navigation">'+'<button class="k-button k-button-icon k-icon-button k-nav-prev"><span class="k-icon k-i-arrow-chevron-left"></span></button>'+'<span class="k-state-default k-nav-current">'+'<span class="k-m-date-format" data-#=ns#bind="text: formattedMobileDate"></span>'+'<span class="k-y-date-format" data-#=ns#bind="text: formattedYear"></span>'+"</span>"+'<button class="k-button k-button-icon k-icon-button k-nav-next"><span class="k-icon k-i-arrow-chevron-right"></span></button>'+"</span>"+"</div>"),se=function(e,t){var i={name:t.field,title:t.title};var n=t.model.isAllDay;var r=y.attr("validate")+"='"+!n+"'";var a=y.attr("validate")+"='"+n+"'";ge(i,t);_e(i,t);be(i,t);k('<input type="datetime-local" required '+y.attr("type")+'="datetime-local" '+y.attr("bind")+'="value:'+t.field+', invisible:isAllDay" '+r+"/>").attr(i).appendTo(e);k('<input type="date" required '+y.attr("type")+'="date" '+y.attr("bind")+'="value:'+t.field+',visible:isAllDay" '+a+"/>").attr(i).appendTo(e);k("<span "+y.attr("for")+'="'+t.field+'" class="k-invalid-msg"/>').hide().appendTo(e)},le=function(e,t){var i={name:t.field,title:t.title},n=t.model.isAllDay,r=y.attr("validate")+"='"+!n+"' ",a=y.attr("validate")+"='"+n+"' ";ge(i,t);_e(i,t);be(i,t);k('<input type="text" required '+y.attr("type")+'="date"'+" "+y.attr("role")+'="datetimepicker" '+y.attr("bind")+'="value:'+t.field+',invisible:isAllDay" '+r+"/>").attr(i).appendTo(e);k('<input type="text" required '+y.attr("type")+'="date"'+" "+y.attr("role")+'="datepicker" '+y.attr("bind")+'="value:'+t.field+',visible:isAllDay" '+a+"/>").attr(i).appendTo(e);k("<span "+y.attr("bind")+'="text: '+t.field+'Timezone"></span>').appendTo(e);if(t.field==="end"){k("<span "+y.attr("bind")+'="text: startTimezone, invisible: endTimezone"></span>').appendTo(e)}k("<span "+y.attr("for")+'="'+t.field+'" class="k-invalid-msg"/>').hide().appendTo(e)},de=function(e,t){k("<div "+y.attr("bind")+'="value:'+t.field+'" />').attr({name:t.field}).appendTo(e).kendoRecurrenceEditor({start:t.model.start,timezone:t.timezone,messages:t.messages})},ue=function(e,t){k("<div "+y.attr("bind")+'="value:'+t.field+'" />').attr({name:t.field}).appendTo(e).kendoMobileRecurrenceEditor({start:t.model.start,timezone:t.timezone,messages:t.messages,pane:t.pane,value:t.model[t.field]})},ce=function(e,t){k('<input type="checkbox" data-role="switch"'+y.attr("bind")+'="value:'+t.field+'" />').appendTo(e)},fe=function(e,t){var i=me(t.model,t.messages.noTimezone);k('<span class="k-timezone-label"></span>').text(i).appendTo(e);k('<span class="k-icon k-i-arrow-chevron-right"></span>').appendTo(e);e.closest("li.k-item label").click(t.click)},he=function(e,t){k('<a href="#" class="k-button" data-bind="invisible:isAllDay">'+t.messages.timezoneEditorButton+"</a>").click(t.click).appendTo(e)},pe=function(e,t){k('<div class="k-mobiletimezoneeditor" '+y.attr("bind")+'="value:'+t.field+'" />').attr({name:t.field}).appendTo(e).kendoMobileTimezoneEditor({optionLabel:t.noTimezone})},ve=function(e,t){var i=t.visible||t.visible===v;k("<div "+y.attr("bind")+'="value:'+t.field+'" />').attr({name:t.field}).toggle(i).appendTo(e).kendoTimezoneEditor({optionLabel:t.noTimezone,title:t.title})};function me(e,t){t=t||"";if(e.startTimezone){t=e.startTimezone;if(e.endTimezone){t+=" | "+e.endTimezone}}return t}function ge(e,t){var i=t.timezone;if(i){e[y.attr("timezone")]=i}}function _e(e,t){var i=t.model.fields[t.field].validation;if(i){var n=i.validDateValidator;if(n&&g(n)&&n.message){e[y.attr("validDate-msg")]=n.message}}}function be(e,t){var i=t.model.fields[t.field].validation;if(i){var n=i.dateCompare;if(n&&g(n)&&n.message){e[y.attr("dateCompare-msg")]=n.message}}}function we(t,i){return function(e){e=t(e);ye(e,"apply",i);return e||[]}}function ke(t,i){return function(e){if(e){if(O.call(e)!=="[object Array]"&&!(e instanceof y.data.ObservableArray)){e=[e]}}ye(e,"remove",i,true);e=t(e);return e||[]}}function ye(e,t,i,n){var r,a,o,s,l;e=e||[];for(a=0,o=e.length;a<o;a++){r=e[a];s=r.start?r.start.getTimezoneOffset():null;l=r.start?r.end.getTimezoneOffset():null;if(n){if(r.startTimezone||r.endTimezone){if(i){r.start=y.timezone.convert(r.start,r.startTimezone||r.endTimezone,i);r.end=y.timezone.convert(r.end,r.endTimezone||r.startTimezone,i);r.start=y.timezone[t](r.start,i);r.end=y.timezone[t](r.end,i)}else{r.start=y.timezone[t](r.start,r.startTimezone||r.endTimezone);r.end=y.timezone[t](r.end,r.endTimezone||r.startTimezone)}}else if(i){r.start=y.timezone[t](r.start,i);r.end=y.timezone[t](r.end,i)}}else{if(r.startTimezone||r.endTimezone){r.start=y.timezone[t](r.start,r.startTimezone||r.endTimezone);r.end=y.timezone[t](r.end,r.endTimezone||r.startTimezone);if(i){r.start=y.timezone.convert(r.start,r.startTimezone||r.endTimezone,i);r.end=y.timezone.convert(r.end,r.endTimezone||r.startTimezone,i)}}else if(i){r.start=y.timezone[t](r.start,i);r.end=y.timezone[t](r.end,i)}}if(n){delete r.uid}if(t==="remove"&&r.start&&s&&s!==r.start.getTimezoneOffset()){r.start=new Date(r.start.getTime()+(s-r.start.getTimezoneOffset())*6e4)}if(t==="remove"&&r.end&&l&&l!==r.end.getTimezoneOffset()){r.end=new Date(r.end.getTime()+(l-r.end.getTimezoneOffset())*6e4)}}return e}function xe(e,t){var i=e.length,n=0,r;for(;n<i;n++){r=e[n];if(r.uid===t){return r}}}var Ce=y.Class.extend({init:function(e,t){var i=e.timezone;this.reader=t;if(t.model){this.model=t.model}this.timezone=i;this.data=we(k.proxy(this.data,this),i);this.serialize=ke(k.proxy(this.serialize,this),i)},errors:function(e){return this.reader.errors(e)},parse:function(e){return this.reader.parse(e)},data:function(e){return this.reader.data(e)},total:function(e){return this.reader.total(e)},groups:function(e){return this.reader.groups(e)},aggregates:function(e){return this.reader.aggregates(e)},serialize:function(e){return this.reader.serialize(e)}});function Se(e,t,i){if(i){e=y.timezone.convert(e,t,i)}else{e=y.timezone.remove(e,t)}return e}function i(e){if(e.filter("[name=start]").length&&e.filter("[title=Start]").length||e.filter("[name=end]").length&&e.filter("[title=End]").length||e.filter(".k-recur-until").length){var t;var i=y.widgetInstance(e,y.ui);if(i){t=y.parseDate(e.val(),i.options.format);return!!t&&i.value()}else{t=y.parseDate(e.val());return!!t}}return true}function Te(e){if(e.filter("[name=end]").length){var t=e.closest(".k-scheduler-edit-form");var i=t.find("[name=start]:visible");var n=t.find("[name=end]:visible");if(n[0]&&i[0]){var r,a;var o=y.widgetInstance(i,y.ui);var s=y.widgetInstance(n,y.ui);var l=t.data("kendoEditable");var d=l?l.options.model:null;if(o&&s){r=o.value();a=s.value()}else{r=y.parseDate(i.val());a=y.parseDate(n.val())}if(r&&a){if(d){var u=i.attr(y.attr("timezone"));var c=d.startTimezone;var f=d.endTimezone;c=c||f;f=f||c;if(c){r=Se(r,c,u);a=Se(a,f,u)}}return r<=a}}}return true}function De(e){var t,i,n,r,a,o;if(e.filter(".k-recur-until").length){t=y.widgetInstance(e,y.ui);i=t.value();n=e.closest(".k-scheduler-edit-form");r=n.find("[name=start]:visible");if(r[0]){o=y.widgetInstance(r,y.ui);if(o){a=o.value()}else{a=y.parseDate(r.val())}if(a&&i){return a<=i}}}return true}var R=y.data.Model.define({init:function(e){var t=this;y.data.Model.fn.init.call(t,e);t._defaultId=t.defaults[t.idField]},_time:function(e){var t=this[e];var i="_"+e+"Time";if(this[i]){return this[i]-y.date.toUtcTime(y.date.getDate(t))}return d(t)},_date:function(e){var t="_"+e+"Time";if(this[t]){return this[t]-this._time(e)}return y.date.getDate(this[e])},clone:function(e,t){var i=this.uid,n=new this.constructor(k.extend({},this.toJSON(),e));if(!t){n.uid=i}return n},duration:function(){var e=this.end;var t=this.start;var i=(e.getTimezoneOffset()-t.getTimezoneOffset())*y.date.MS_PER_MINUTE;return e-t-i},expand:function(e,t,i){return s?s.expand(this,e,t,i):[this]},update:function(e){for(var t in e){this.set(t,e[t])}if(this._startTime){this.set("_startTime",y.date.toUtcTime(this.start))}if(this._endTime){this.set("_endTime",y.date.toUtcTime(this.end))}},isMultiDay:function(){return this.isAllDay||this.duration()>=y.date.MS_PER_DAY},isException:function(){return!this.isNew()&&this.recurrenceId},isOccurrence:function(){return this.isNew()&&this.recurrenceId},isRecurring:function(){return!!(this.recurrenceRule||this.recurrenceId)},isRecurrenceHead:function(){return!!(this.id&&this.recurrenceRule)},toOccurrence:function(e){e=k.extend(e,{recurrenceException:null,recurrenceRule:null,recurrenceId:this.id||this.recurrenceId});e[this.idField]=this.defaults[this.idField];return this.clone(e,true)},toJSON:function(){var e=y.data.Model.fn.toJSON.call(this);e.uid=this.uid;delete e._startTime;delete e._endTime;return e},shouldSerialize:function(e){return y.data.Model.fn.shouldSerialize.call(this,e)&&e!=="_defaultId"},set:function(e,t){var i=this.isAllDay||false;y.data.Model.fn.set.call(this,e,t);if(e=="isAllDay"&&t!=i){var n=y.date.getDate(this.start);var r=new Date(this.end);var a=y.date.getMilliseconds(r);if(a===0&&t){a=o}this.set("start",n);if(t===true){y.date.setTime(r,-a);if(r<n){r=n}}else{y.date.setTime(r,o-a)}this.set("end",r)}},id:"id",fields:{id:{type:"number"},title:{defaultValue:"",type:"string"},start:{type:"date",validation:{required:true,validDate:{value:i}}},startTimezone:{type:"string"},end:{type:"date",validation:{required:true,validDate:{value:i},dateCompare:{value:Te}}},endTimezone:{type:"string"},recurrenceRule:{defaultValue:"",type:"string",validation:{validDate:{value:i},untilDateCompare:{value:De}}},recurrenceException:{defaultValue:"",type:"string"},isAllDay:{type:"boolean",defaultValue:false},description:{type:"string"}}});var F=a.extend({init:function(e){a.fn.init.call(this,C(true,{},{schema:{modelBase:R,model:R}},e));this.reader=new Ce(this.options.schema,this.reader)},expand:function(e,t){var i=this.view(),n={},r;if(e&&t){r=t.getTimezoneOffset();t=new Date(t.getTime()+o-1);if(t.getTimezoneOffset()!==r){t=y.timezone.apply(t,r)}n={logic:"or",filters:[{logic:"and",filters:[{field:"start",operator:"gte",value:e},{field:"end",operator:"gte",value:e},{field:"start",operator:"lte",value:t}]},{logic:"and",filters:[{field:"start",operator:"lte",value:new Date(e.getTime()+o-1)},{field:"end",operator:"gte",value:e}]}]};i=new y.data.Query(Ae(i,e,t,this.reader.timezone)).filter(n).toArray()}return i},cancelChanges:function(e){if(e&&e.isOccurrence()){this._removeExceptionDate(e)}a.fn.cancelChanges.call(this,e)},insert:function(e,t){if(!t){return}if(!(t instanceof R)){var i=t;t=this._createNewModel();t.accept(i)}if(!this._pushCreated&&t.isRecurrenceHead()||t.recurrenceId){t=t.recurrenceId?t:t.toOccurrence();this._addExceptionDate(t)}return a.fn.insert.call(this,e,t)},pushCreate:function(e){this._pushCreated=true;a.fn.pushCreate.call(this,e);this._pushCreated=false},remove:function(e){if(e.isRecurrenceHead()){this._removeExceptions(e)}else if(e.isRecurring()){this._addExceptionDate(e)}return a.fn.remove.call(this,e)},_removeExceptions:function(e){var t=this.data().slice(0),i=t.shift(),n=e.id;while(i){if(i.recurrenceId===n){a.fn.remove.call(this,i)}i=t.shift()}e.set(M,"")},_removeExceptionDate:function(e){if(e.recurrenceId){var t=this.get(e.recurrenceId);if(t){var i=e.defaults.start;var n=new RegExp("(\\"+I+"?)"+s.toExceptionString(i,this.reader.timezone));var r=(t.recurrenceException||"").replace(Q,I).replace(/\,$/,"");if(n.test(r)){t.set(M,r.replace(n,""))}else{i=e.start;n=new RegExp("(\\"+I+"?)"+s.toExceptionString(i,this.reader.timezone));t.set(M,r.replace(n,""))}}}},_addExceptionDate:function(e){var t=e.start;var i=this.reader.timezone;var n=this.get(e.recurrenceId);var r=(n.recurrenceException||"").replace(Q,I).replace(/\,$/,"");if(!s.isException(r,t,i)){var a=s.toExceptionString(t,i);e.defaults.start=t;n.set(M,r+(r&&a?I:"")+a)}}});function Ae(e,t,i,n){var r=e.length,a=[],o=0;for(;o<r;o++){a=a.concat(e[o].expand(t,i,n))}return a}F.create=function(e){if(c(e)||e instanceof y.data.ObservableArray){e={data:e}}var t=e||{},i=t.data;t.data=i;if(!(t instanceof F)&&t instanceof y.data.DataSource){throw new Error("Incorrect DataSource type. Only SchedulerDataSource instances are supported")}return t instanceof F?t:new F(t)};C(true,y.data,{SchedulerDataSource:F,SchedulerDataReader:Ce,SchedulerEvent:R});var Ee={update:{text:"Save",className:"k-primary k-scheduler-update"},canceledit:{text:"Cancel",className:"k-scheduler-cancel"},destroy:{text:"Delete",imageClass:"k-i-close",className:"k-primary k-scheduler-delete",iconClass:"k-icon"}};function Ie(e,t){delete e.name;delete e.prefix;delete e.remove;delete e.edit;delete e.add;delete e.navigate;for(var i in t){e[i]=t[i]}return e}function P(e,t){var i=(e.fields||e)[t];var n=["url","email","number","date","boolean"];var r=i?i.validation:{};var a=y.attr("type");var o=k.inArray;var s;var l;var d={};for(s in r){l=r[s];if(o(s,n)>=0){d[a]=s}else if(!y.isFunction(l)){d[s]=g(l)?l.value||s:l}d[y.attr(s+"-msg")]=l.message}return d}function Me(t,i){var n=P(i,t.field);return function(e){k(y.format('<select data-{0}bind="value:{1}" title="'+i.title+'">',y.ns,t.field)).appendTo(e).attr(n).kendoDropDownList({dataTextField:t.dataTextField,dataValueField:t.dataValueField,dataSource:t.dataSource,valuePrimitive:t.valuePrimitive,optionLabel:"None",template:y.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#',t.dataColorField,t.dataTextField)})}}function Re(a,e){var o=P(e,a.field);return function(e){var t="";var i=a.dataSource.view();for(var n=0,r=i.length;n<r;n++){t+=y.format('<option value="{0}">{1}</option>',y.getter(a.dataValueField)(i[n]),y.getter(a.dataTextField)(i[n]))}k(y.format('<select data-{0}bind="value:{1}">{2}</select>',y.ns,a.field,t,a.valuePrimitive)).appendTo(e).attr(o)}}function Fe(e){var i=P(e.model,e.field);return function(e,t){k('<textarea name="description" class="k-textarea" title="'+t.title+'"/>').attr(i).appendTo(e)}}function Pe(t,e){var i=P(e,t.field);return function(e){k(y.format('<select data-{0}bind="value:{1}">',y.ns,t.field)).appendTo(e).attr(i).kendoMultiSelect({dataTextField:t.dataTextField,dataValueField:t.dataValueField,dataSource:t.dataSource,valuePrimitive:t.valuePrimitive,itemTemplate:y.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#',t.dataColorField,t.dataTextField),tagTemplate:y.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#',t.dataColorField,t.dataTextField)})}}function ze(a,e){var o=P(e,a.field);return function(e){var t="";var i=a.dataSource.view();for(var n=0,r=i.length;n<r;n++){t+=y.format('<option value="{0}">{1}</option>',y.getter(a.dataValueField)(i[n]),y.getter(a.dataTextField)(i[n]))}k(y.format('<select data-{0}bind="value:{1}" multiple="multiple" data-{0}value-primitive="{3}">{2}</select>',y.ns,a.field,t,a.valuePrimitive)).appendTo(e).attr(o)}}function z(e,t){var i=e.end.getTime()-e.start.getTime();var n=new Date(e.start.getTime());y.date.setTime(n,t);var r=new Date(n.getTime());y.date.setTime(r,i,true);return{start:n,end:r}}var Be={mobile:{dateRange:se,timezonePopUp:fe,timezone:pe,recurrence:ue,description:Fe,multipleResources:ze,resources:Re,isAllDay:ce},desktop:{dateRange:le,timezonePopUp:he,timezone:ve,recurrence:de,description:Fe,multipleResources:Pe,resources:Me}};var Le=y.Observable.extend({init:function(e,t){y.Observable.fn.init.call(this);this.element=e;this.options=C(true,{},this.options,t);this.createButton=this.options.createButton;this.toggleDateValidationHandler=l(this._toggleDateValidation,this)},_toggleDateValidation:function(e){if(e.field=="isAllDay"){var t=this.container,i=this.editable.options.model.isAllDay,n=y.attr("bind"),r,a,o;t.find("["+n+"*=end],["+n+"*=start]").each(function(){r=k(this);if(Y.test(r.attr(n))){a=r.is("["+y.attr("role")+"=datetimepicker],[type*=datetime]");o=i!==a;r.attr(y.attr("validate"),o)}})}},fields:function(e,t){var i=this;var n=i.options.messages;var r=i.options.timezone;var a=function(e){e.preventDefault();i._initTimezoneEditor(t,this)};var o=[{field:"title",title:n.editor.title},{field:"start",title:n.editor.start,editor:e.dateRange,timezone:r},{field:"end",title:n.editor.end,editor:e.dateRange,timezone:r},{field:"isAllDay",title:n.editor.allDayEvent,editor:e.isAllDay}];if(y.timezone.windows_zones){o.push({field:"timezone",title:n.editor.timezone,editor:e.timezonePopUp,click:a,messages:n.editor,model:t});o.push({field:"startTimezone",title:n.editor.startTimezone,editor:e.timezone,noTimezone:n.editor.noTimezone});o.push({field:"endTimezone",title:n.editor.endTimezone,editor:e.timezone,noTimezone:n.editor.noTimezone})}if(!t.recurrenceId){o.push({field:"recurrenceRule",title:n.editor.repeat,editor:e.recurrence,timezone:r,messages:n.recurrenceEditor,pane:this.pane})}if("description"in t){o.push({field:"description",title:n.editor.description,editor:e.description({model:t,field:"description"})})}for(var s=0;s<this.options.resources.length;s++){var l=this.options.resources[s];o.push({field:l.field,title:l.title,editor:l.multiple?e.multipleResources(l,t):e.resources(l,t)})}return o},end:function(){return this.editable.end()},_buildDesktopEditTemplate:function(e,t,i){var n=this.options.messages;var r=C({},y.Template,this.options.templateSettings);var a=r.paramName;var o="";for(var s=0,l=t.length;s<l;s++){var d=t[s];if(d.field==="startTimezone"){o+='<div class="k-popup-edit-form k-scheduler-edit-form k-scheduler-timezones" style="display:none">';o+='<div class="k-edit-form-container">';o+='<div class="k-edit-label"></div>';o+='<div class="k-edit-field"><label class="k-check"><input class="k-timezone-toggle" type="checkbox" />'+n.editor.separateTimezones+"</label></div>"}o+='<div class="k-edit-label"><label for="'+d.field+'">'+(d.title||d.field||"")+"</label></div>";if(!e.editable||e.editable(d.field)){i.push(d);o+="<div "+y.attr("container-for")+'="'+d.field+'" class="k-edit-field"></div>'}else{var u="#:";if(d.field){d=y.expr(d.field,a);u+=d+"==null?'':"+d}else{u+="''"}u+="#";u=y.template(u,r);o+='<div class="k-edit-field">'+u(e)+"</div>"}if(d.field==="endTimezone"){o+=this._createEndTimezoneButton()}}return o},_buildMobileEditTemplate:function(e,t,i){var n=this.options.messages;var r=C({},y.Template,this.options.templateSettings);var a=r.paramName;var o="";o+='<ul class="k-listgroup k-listgroup-flush">';for(var s=0,l=t.length;s<l;s++){var d=t[s];if(d.field==="timezone"||d.field==="recurrenceRule"){o+='</ul><ul class="k-listgroup k-listgroup-flush">'}if(d.field==="startTimezone"){o+='<div class="k-popup-edit-form k-scheduler-edit-form k-scheduler-timezones" style="display:none">';o+='<ul class="k-listgroup k-listgroup-flush">';o+='<li class="k-item k-listgroup-item">';o+='<label class="k-label k-listgroup-form-row">';o+='<span class="k-item-title k-listgroup-form-row">'+n.editor.separateTimezones+"</span>";o+='<span class="k-listgroup-form-field-wrapper">';o+='<input class="k-timezone-toggle" data-role="switch" type="checkbox" />';o+="</span>";o+="</label>";o+="</li>"}if(!e.editable||e.editable(d.field)){o+='<li class="k-item k-listgroup-item">';if(d.field==="timezone"){o+='<label class="k-label k-listgroup-form-row" data-bind="css: { k-state-disabled: isAllDay }">'}else{o+='<label class="k-label k-listgroup-form-row">'}o+='<span class="k-item-title k-listgroup-form-field-label">'+(d.title||d.field||"")+"</span>";i.push(d);o+='<div class="k-listgroup-form-field-wrapper" '+y.attr("container-for")+'="'+d.field+'"></div>';o+="</label></li>"}else{var u="#:";o+='<li class="k-item k-listgroup-item">';o+='<label class="k-label k-no-click k-listgroup-form-row">';o+='<span class="k-item-title k-listgroup-form-field-label">'+(d.title||d.field||"")+"</span>";if(d.field){d=y.expr(d.field,a);u+=d+"==null?'':"+d}else{u+="''"}u+="#";u=y.template(u,r);o+='<span class="k-no-editor k-listgroup-form-field-wrapper">'+u(e)+"</span>";o+="</label></li>"}if(d.field==="recurrenceRule"){o+='</ul><ul class="k-listgroup k-listgroup-flush">'}if(d.field==="endTimezone"){o+="</ul></div>"}}o+="</ul>";return o},_buildEditTemplate:function(e,t,i,n){var r=C({},y.Template,this.options.templateSettings);var a=this.options.editable.template;var o="";if(a){if(typeof a===u){a=y.unescape(a)}o+=y.template(a,r)(e)}else if(n){o+='<div data-role="content">'+this._buildMobileEditTemplate(e,t,i)+"</div>"}else{o+=this._buildDesktopEditTemplate(e,t,i)}return o},_createEndTimezoneButton:function(){return"</ul></div>"},_revertTimezones:function(e){e.set("startTimezone",this._startTimezone);e.set("endTimezone",this._endTimezone);delete this._startTimezone;delete this._endTimezone}});var He=Le.extend({init:function(){Le.fn.init.apply(this,arguments);this.pane=y.Pane.wrap(this.element,{viewEngine:{viewOptions:{renderOnInit:true,wrap:false,wrapInSections:true,detachOnHide:false,detachOnDestroy:false}}});this.pane.element.parent().css("height",this.options.height);this.view=this.pane.view()},options:{animations:{left:"slide",right:"slide:right"}},destroy:function(){this.close();this.unbind();this.pane.destroy()},_initTimezoneEditor:function(n){var r=this;var a=r.pane;var o=r.options.messages;var e=r.timezoneView;var t=e?e.content.find(".k-scheduler-timezones"):r.container.find(".k-scheduler-timezones");var i=t.find("input.k-timezone-toggle").data("kendoSwitch");var s=t.find("li.k-item:not(.k-zonepicker):last");var l=function(e){if(e.field==="startTimezone"){var t=n.startTimezone;i.enable(t);if(!t){s.hide();n.set("endTimezone","");i.value(false)}}};r._startTimezone=n.startTimezone||"";r._endTimezone=n.endTimezone||"";if(!e){var d='<div data-role="view" class="k-popup-edit-form k-scheduler-edit-form">'+'<div data-role="header" class="k-header">'+'<a href="\\#" class="k-header-cancel k-scheduler-cancel k-link" title="'+o.cancel+'"'+'aria-label="'+o.cancel+'"><span class="k-icon k-i-arrow-chevron-left"></span></a>'+o.editor.timezoneTitle+'<a href="\\#" class="k-header-done k-scheduler-update k-link" title="'+o.save+'" '+'aria-label="'+o.save+'"><span class="k-icon k-i-check"></span></a>'+'</div><div data-role="content"></div>';this.timezoneView=e=a.append(d);e.contentElement.append(t.show());e.element.on(b+_,".k-scheduler-cancel, .k-scheduler-update",function(e){e.preventDefault();e.stopPropagation();if(k(this).hasClass("k-scheduler-cancel")){r._revertTimezones(n)}var t=r._editPane;var i=me(n,o.editor.noTimezone);t.content.find(".k-timezone-label").text(i);a.navigate(t,r.options.animations.right)});i.bind("change",function(e){s.toggle(e.checked);n.set("endTimezone","")});n.bind("change",l)}i.value(!!n.endTimezone);i.enable(!!n.startTimezone);if(n.endTimezone){s.show()}else{s.hide()}a.navigate(e,r.options.animations.left)},showDialog:function(e){var t=e.buttons.map(function(e){return{text:e.text,action:e.click}});t.push({text:this.options.messages.cancel,primary:true});k("<div />").appendTo(document.body).kendoDialog({close:function(){this.destroy()},modal:{preventScroll:true},closable:false,title:false,content:e.text,actions:t})},editEvent:function(n){var r=this.pane;var e="";var t=this.options.messages;var i=t.save;var a=t.destroy;var o=t.cancel;var s=t.editor.editorTitle;var l=t.resetSeries;e+='<div data-role="view" class="k-popup-edit-form k-scheduler-edit-form"'+y.attr("uid")+'="'+n.uid+'">'+'<div data-role="header" class="k-header">'+'<a href="\\#" class="k-header-cancel k-scheduler-cancel k-link" title="'+o+'"'+'aria-label="'+o+'"><span class="k-icon k-i-arrow-chevron-left"></span></a>'+s+'<a href="\\#" class="k-header-done k-scheduler-update k-link" title="'+i+'" '+'aria-label="'+i+'"><span class="k-icon k-i-check"></span></a>'+"</div>";var d=this.fields(Be.mobile,n);var u=this;var c=[];e+=this._buildEditTemplate(n,d,c,true);e+="</div>";var f=r.append(e);if(!n.isNew()&&this.options.editable&&this.options.editable.destroy!==false&&n.isRecurrenceHead()&&n.recurrenceException){var h='<ul class="k-edit-buttons k-listgroup k-listgroup-flush"><li class="k-item k-listgroup-item"><span class="k-scheduler-resetSeries k-link k-label" aria-label="'+l+'">'+l+"</span></li></ul>";f.contentElement.append(h)}if(!n.isNew()&&this.options.editable&&this.options.editable.destroy!==false){var p='<ul class="k-edit-buttons k-listgroup k-listgroup-flush"><li class="k-item k-listgroup-item"><span class="k-scheduler-delete k-link k-label" aria-label="'+a+'">'+a+"</span></li></ul>";f.contentElement.append(p)}this._editPane=f;var v=this.container=f.element;this.editable=v.kendoEditable({fields:c,model:n,clearContainer:false,target:u.options.target,validateOnBlur:true}).data("kendoEditable");if(!this.trigger("edit",{container:v,model:n})){v.on(b+_,"a.k-scheduler-edit, a.k-scheduler-cancel, a.k-scheduler-update, span.k-scheduler-delete, span.k-scheduler-resetSeries",function(e){e.preventDefault();e.stopPropagation();var t=k(this);if(!t.hasClass("k-scheduler-edit")){var i="cancel";if(t.hasClass("k-scheduler-update")){i="save"}else if(t.hasClass("k-scheduler-delete")){i="remove"}else if(t.hasClass("k-scheduler-resetSeries")){i=G}u.trigger(i,{container:v,model:n})}else{r.navigate(this._editPane,u.options.animations.right)}});r.navigate(f,u.options.animations.left);n.bind("change",u.toggleDateValidationHandler)}else{this.trigger("cancel",{container:v,model:n})}return this.editable},_views:function(){return this.pane.element.find(y.roleSelector("view")).not(this.view.element)},close:function(){if(this.container){this.pane.navigate("",this.options.animations.right);var e=this._views();var t;for(var i=0,n=e.length;i<n;i++){t=e.eq(i).data("kendoView");if(t){t.purge()}}e.remove();this.container=null;if(this.editable){this.editable.options.model.unbind("change",this.toggleDateValidationHandler);this.editable.destroy();this.editable=null}this.timezoneView=null}}});var Ne=Le.extend({destroy:function(){this.close();this.unbind()},editEvent:function(t){var i=this;var e=i.options.editable;var n="<div "+y.attr("uid")+'="'+t.uid+'" class="k-popup-edit-form k-scheduler-edit-form"><div class="k-edit-form-container">';var r=i.options.messages;var a=r.save;var o=r.cancel;var s=r.destroy;var l=r.resetSeries;var d=this.fields(Be.desktop,t);var u=[];n+=this._buildEditTemplate(t,d,u,false);var c;var f=g(e)?e.window:{};n+='<div class="k-edit-buttons k-state-default">';n+=this.createButton({name:"update",text:a,attr:c})+this.createButton({name:"canceledit",text:o,attr:c});if(!t.isNew()&&e.destroy!==false&&t.isRecurrenceHead()&&t.recurrenceException){n+=this.createButton({name:"resetSeries",text:l,attr:c})}if((!t.isNew()||t.isRecurring())&&e.destroy!==false){n+=this.createButton({name:"delete",text:s,attr:c})}n+="</div></div></div>";var h=this.container=k(n).appendTo(i.element).eq(0).kendoWindow(C({modal:true,resizable:false,draggable:true,title:r.editor.editorTitle,visible:false,close:function(e){if(e.userTriggered){if(i.trigger(w,{container:h,model:t})){e.preventDefault()}}}},f));i.editable=h.kendoEditable({fields:u,model:t,clearContainer:false,validateOnBlur:true,target:i.options.target}).data("kendoEditable");if(!i.trigger(D,{container:h,model:t})){h.data("kendoWindow").center().open();h.on(b+_,"button.k-scheduler-cancel",function(e){e.preventDefault();e.stopPropagation();i.trigger(w,{container:h,model:t})});h.on(b+_,"button.k-scheduler-update",function(e){e.preventDefault();e.stopPropagation();i.trigger("save",{container:h,model:t})});h.on(b+_,"button.k-scheduler-delete",function(e){e.preventDefault();e.stopPropagation();i.trigger(S,{container:h,model:t})});h.on(b+_,"button.k-scheduler-resetSeries",function(e){e.preventDefault();e.stopPropagation();i.trigger(G,{container:h,model:t})});y.cycleForm(h);t.bind("change",i.toggleDateValidationHandler)}else{i.trigger(w,{container:h,model:t})}return i.editable},close:function(){var e=this;var t=function(){if(e.editable){e.editable.options.model.unbind("change",e.toggleDateValidationHandler);e.editable.destroy();e.editable=null;e.container=null}if(e.popup){e.popup.destroy();e.popup=null}};if(e.editable){if(e._timezonePopup&&e._timezonePopup.data("kendoWindow")){e._timezonePopup.data("kendoWindow").destroy();e._timezonePopup=null}if(e.container.is(":visible")){e.container.data("kendoWindow").bind("deactivate",t).close()}else{t()}}else{t()}},_createEndTimezoneButton:function(){var e=this.options.messages;var t="";t+='<div class="k-edit-buttons k-state-default">';t+=this.createButton({name:"savetimezone",text:e.save})+this.createButton({name:"canceltimezone",text:e.cancel});t+="</div></div></div>";return t},showDialog:function(i){var e=y.format("<div class='k-popup-edit-form'><div class='k-edit-form-container'><p class='k-popup-message'>{0}</p>",i.text);e+='<div class="k-edit-buttons k-state-default">';for(var t=0;t<i.buttons.length;t++){e+=this.createButton(i.buttons[t])}e+="</div></div></div>";var n=this.element;if(this.popup){this.popup.destroy()}var r=this.popup=k(e).appendTo(n).eq(0).on(b,".k-button",function(e){e.preventDefault();r.close();var t=k(e.currentTarget).index();i.buttons[t].click()}).kendoWindow({modal:true,resizable:false,draggable:false,title:i.title,visible:false,close:function(){this.destroy();n.focus()}}).getKendoWindow();r.center().open()},_initTimezoneEditor:function(i,t){var n=this;var e=n.container.find(".k-scheduler-timezones");var r=e.find("input.k-timezone-toggle");var a=e.find(".k-edit-label:last").add(e.find(".k-edit-field:last"));var o=e.find(".k-scheduler-savetimezone");var s=e.find(".k-scheduler-canceltimezone");var l=n._timezonePopup;var d=function(e){if(e.field==="startTimezone"){var t=i.startTimezone;r.prop("disabled",!t);if(!t){a.hide();i.set("endTimezone","");r.prop("checked",false)}}};var u;n._startTimezone=i.startTimezone;n._endTimezone=i.endTimezone;if(!l){n._timezonePopup=l=e.kendoWindow({modal:true,resizable:false,draggable:true,title:n.options.messages.editor.timezoneEditorTitle,visible:false,close:function(e){i.unbind("change",d);if(e.userTriggered){n._revertTimezones(i)}if(t){t.focus()}}});r.click(function(){a.toggle(r.prop("checked"));i.set("endTimezone","")});o.click(function(e){e.preventDefault();u.close()});s.click(function(e){e.preventDefault();n._revertTimezones(i);u.close()});i.bind("change",d)}r.prop("checked",i.endTimezone).prop("disabled",!i.startTimezone);if(i.endTimezone){a.show()}else{a.hide()}u=l.data("kendoWindow");u.center().open()}});var Oe=L.extend({init:function(e,t){var i=this;r.fn.init.call(i,e,t);if(!i.options.views||!i.options.views.length){i.options.views=["day","week"]}i.resources=[];i._initModel();i._wrapper();i._views();i._toolbar();i._dataSource();i._resources();i._resizeHandler=function(){i.resize()};i.wrapper.on(n+_+" selectstart"+_,function(e){if(!k(e.target).is(":kendoFocusable")){e.preventDefault()}});if(i.options.editable&&i.options.editable.resize!==false){i._resizable()}i._movable();i._bindResize();if(i.options.messages&&i.options.messages.recurrence){s.options=i.options.messages.recurrence}i._selectable();i._touchHandlers();i._ariaId=y.guid();i._createEditor()},_bindResize:function(){k(window).on("resize"+_,this._resizeHandler)},_unbindResize:function(){k(window).off("resize"+_,this._resizeHandler)},dataItems:function(){var e=this;var t=e.items();var i=e._data;var n=k.map(t,function(e){return k(e).attr("data-uid")});var r;var a;var o={};var s=n.length;for(r=0;r<s;r++){o[n[r]]=null}var l=i.length;for(r=0;r<l;r++){var d=i[r];if(o[d.uid]!==v){o[d.uid]=d}}var u=[];for(a in o){u.push(o[a])}return u},_isMobile:function(){var e=this.options;return e.mobile===true&&y.support.mobileOS||e.mobile==="phone"||e.mobile==="tablet"},_isTouch:function(e){return/touch/.test(e.type)||e.originalEvent&&/touch/.test(e.originalEvent.pointerType)},_isInverseColor:function(e){return e.hasClass(K)},_groupsByResource:function(e,t,i,n,r){if(!i){i=[]}var a=e[0];if(a){var o;var s=a.dataSource.view();var l=0;for(var d=0;d<s.length;d++){var u=y.getter(a.dataValueField)(s[d]);var c=t+l+d;o=this._groupsByResource(e.slice(1),c,i,u,a.field);o[a.field]=u;l=o.groupIndex;if(r&&n){o[r]=n}if(e.length===1){o.groupIndex=t+d;i.push(o)}}return o}else{return{}}},data:function(){return this._data},select:function(e){var t=this;var i=t.view();var n=t._selection;var r=i.groups;var a;if(e===v){var o;var s=i._selectedSlots;if(!n){return[]}if(n&&n.events){o=t._selectedEvents()}return{start:n.start,end:n.end,events:o,slots:s,resources:i._resourceBySlot(n)}}if(!e){t._selection=null;t._old=null;i.clearSelection();return}if(k.isArray(e)){e={events:e.splice(0)}}if(e.resources){var l;var d=[];var u=[];if(i.groupedResources){t._groupsByResource(i.groupedResources,0,u)}for(l in e.resources){d.push({field:l,operator:"eq",value:e.resources[l]})}a=new y.data.Query(u).filter(d).toArray()}if(e.events&&e.events.length){t._selectEvents(e.events,a);t._select();return}if(r&&(e.start&&e.end)){var c=m(i._startDate);var f=y.date.addDays(m(i._endDate),1);var h;var p;if(e.start<f&&c<=e.end){if(a&&a.length){h=r[a[0].groupIndex]}else{h=r[0]}if(!h.timeSlotCollectionCount()){e.isAllDay=true}p=h.ranges(e.start,e.end,e.isAllDay,false);if(p.length){t._selection={start:y.timezone.toLocalDate(p[0].start.start),end:y.timezone.toLocalDate(p[p.length-1].end.end),groupIndex:p[0].start.groupIndex,index:p[0].start.index,isAllDay:p[0].start.isDaySlot,events:[]};t._select()}}}},_selectEvents:function(e,t){var i=this;var n;var r=i.view();var a=r.groups;var o=e.length;var s=t&&t.length;var l=i._ctrlKey;i._ctrlKey=true;for(n=0;n<o;n++){if(a&&s){var d=a[t[0].groupIndex];var u=[];var c=d.timeSlotCollectionCount();var f=d.daySlotCollectionCount();for(var h=0;h<c;h++){u=u.concat(d.getTimeSlotCollection(h).events())}for(var p=0;p<f;p++){u=u.concat(d.getDaySlotCollection(p).events())}u=new y.data.Query(u).filter({field:"element[0].getAttribute('data-uid')",operator:"eq",value:e[n]}).toArray();if(u[0]){i._createSelection(u[0].element)}}else{var v=r.element.find(y.format(".k-event[data-uid={0}], .k-task[data-uid={0}]",e[n]));if(v.length){i._createSelection(v[0])}}}i._ctrlKey=l},_touchHandlers:function(){var r=this;var a;var o;var s;var l;var d;var u=r.wrapper;var c=k.proxy(r._touchMove,r);u.on(V+_,".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event",function(e){var t=r.wrapper.find(".k-scheduler-content");if(!r._isTouch(e)){return}t.stop(true,false);r._touchPosX=a=r._tapPosition(e,"X");r._touchPosY=o=r._tapPosition(e,"Y");r._userTouched=true;r.view()._scrolling=false;d=Date.now();u.on(W+_,".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event",c)});u.on(U+_,".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event",function(e){if(!r._isTouch(e)){return}var t=Date.now()-d;var i=r.wrapper.find(".k-scheduler-content");var n=-r._amplitude*(3e3/t);s=r._tapPosition(e,"X");l=r._tapPosition(e,"Y");if(r._dragging){return}if(r.options.selectable&&(Math.abs(s-a)<=10||Math.abs(l-o)<=10)){r._mouseDownSelection(e)}if(!y.support.kineticScrollNeeded&&t<200&&Math.abs(s-a)>10){i.animate({scrollTop:i[0].scrollTop+n})}u.off(W+_,".k-scheduler-header-all-day td, .k-scheduler-content td",c)})},_selectable:function(){var r=this;var a=r.wrapper;if(!r.options.selectable){return}r._tabindex();a.on(n+_,".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event",function(e){if(r._isTouch(e)){return}r._mouseDownSelection(e)});var o=k.proxy(r._mouseMove,r);a.on(n+_,".k-scheduler-header-all-day td, .k-scheduler-content td",function(e){var t=e.which;var i=e.button;var n=t&&t===3||i&&i==2;if(r._isTouch(e)){return}if(!n){a.on(j+_,".k-scheduler-header-all-day td, .k-scheduler-content td",o)}});a.on("mouseup"+_+" mousecancel"+_,function(){a.off(j+_,".k-scheduler-header-all-day td, .k-scheduler-content td",o)});a.on("focus"+_,function(){if(!r._selection&&!r._userTouched){r._selectFirstSlot()}r._select()});a.on("focusout"+_,function(e){r._ctrlKey=r._shiftKey=false;if(!k(e.relatedTarget).closest(E).length){r.toolbar.find(E).removeClass($)}});a.on("keydown"+_,l(r._keydown,r));a.on("keyup"+_,function(e){r._ctrlKey=e.ctrlKey;r._shiftKey=e.shiftKey})},_mouseDownSelection:function(e){var t=e.which;var i=e.button;var n=t&&t===3||i&&i==2;if(!n){if(e.ctrlKey){this._ctrlKey=e.ctrlKey}if(e.shiftKey){this._shiftKey=e.shiftKey}this._createSelection(e.currentTarget)}if(y._activeElement()!==this.wrapper.get(0)){y.focusElement(this.wrapper)}else{this._select()}if(this.toolbar){this.toolbar.find("."+A).removeClass(A)}},_selectFirstSlot:function(){this._createSelection(this.wrapper.find(".k-scheduler-content").find("td:first"))},_select:function(){var e=this;var t=e.view();var i=e.wrapper;var n=t.current();var r=e._selection;var a=e._old?e._old.selection:null;var o=e._old?e._old.eventsLength:null;if(!r){return}if(n){n.removeAttribute("id");n.removeAttribute("aria-label");i.removeAttr("aria-activedescendant")}t.select(r);n=t.current();if(n&&(a!==n||r.events&&o!==r.events.length)){var s=k(n).data("uid");if(e._old&&s&&s===k(e._old.selection).data("uid")&&(r.events&&e._old.eventsLength===r.events.length)){return}var l;var d=r;var u=e._selectedEvents();var c=t._selectedSlots;if(u[0]){d=u[0]||r;l=y.format(e.options.messages.ariaEventLabel,d.title,d.start,d.start)}else{l=y.format(e.options.messages.ariaSlotLabel,d.start,d.end)}n.setAttribute("id",e._ariaId);n.setAttribute("aria-label",l);i.attr("aria-activedescendant",e._ariaId);e._old={selection:n,eventsLength:u.length};e.trigger("change",{start:r.start,end:r.end,events:u,slots:c,resources:t._resourceBySlot(r)})}},_selectedEvents:function(){var e=this._selection.events;var t=e.length;var i=0;var n;var r=[];for(;i<t;i++){n=this.occurrenceByUid(e[i]);if(n){r.push(n)}}return r},_tapPosition:function(e,t){return/touch/.test(e.type)?(e.originalEvent||e).changedTouches[0]["page"+t]:e["page"+t]},_touchMove:function(e){var t=this;var i=t.wrapper.find(".k-scheduler-content");var n=i[0].scrollHeight>i[0].clientHeight;var r=i[0].scrollWidth>i[0].clientWidth;var a=t._tapPosition(e,"Y");var o=t._tapPosition(e,"X");var s=i[0].scrollTop-Math.round(a-t._touchPosY);var l=i[0].scrollLeft-Math.round(o-t._touchPosX);var d=n&&Math.abs(a-t._touchPosY)>10;var u=r&&Math.abs(a-t._touchPosY)>10;if(t._dragging||y.support.kineticScrollNeeded||!t._isTouch(e)){return}if(d||u){t._amplitude=Math.round(a-t._touchPosY);t._touchPosY=a;t._touchPosX=o;i.animate({scrollTop:s,scrollLeft:l},0);t.view()._scrolling=true}},_mouseMove:function(a){var o=this;clearTimeout(o._moveTimer);if(o._isTouch(a)){return}o._moveTimer=setTimeout(function(){var e=o.view();var t=o._selection;if(t){var i=e.selectionByElement(k(a.currentTarget));if(i&&t.groupIndex===i.groupIndex){var n=i.startDate();var r=i.endDate();if(n>=t.end){t.backward=false}else if(r<=t.start){t.backward=true}if(t.backward){t.start=n}else{t.end=r}o._select()}}},5)},_viewByIndex:function(e){var t,i=this.views;for(t in i){if(!e){return t}e--}},_keydown:function(e){var t=this,i=e.keyCode,n=t.view(),r=n.options.editable,a=t._selection,o=k.extend(a),s=i===16||i===18||i===17||i===91||i===92,l="> .k-button,"+".k-scheduler-navigation > .k-button,"+".k-nav-current,"+".k-views-dropdown:visible,"+".k-scheduler-views > .k-button",d=t.toolbar.find(l),u=t.toolbar.find(E),c=k(e.target).closest(E).length||t.toolbar.find(".k-scheduler-views .k-state-focused").length,f=u.children().index(t.toolbar.find("."+A)),h=y.support.isRtl(t.element),p=k(e.target).is(".k-views-dropdown"),v=h?-1:1;if(f==-1){f=u.children().index(t.toolbar.find(".k-state-selected"))}t._ctrlKey=e.ctrlKey;t._shiftKey=e.shiftKey;if(i===x.F10){t._focusToolbar();e.preventDefault();return}else if(i===x.TAB){if(t.toolbar.find("."+A).length){var m=d.index(t.toolbar.find("."+A));var g=e.shiftKey?d[m-1]:d[m+1];t.toolbar.find("."+A).removeClass(A);if(g){k(g).addClass(A).focus();t._focusedView=null;e.preventDefault();return}else{t.element.focus();e.preventDefault();return}}}else if(i===x.ENTER||i===x.SPACEBAR){if(c&&t._focusedView&&!t._focusedView.hasClass("k-state-selected")){var _=t._focusedView.data().name;if(!t.trigger("navigate",{view:_,action:"changeView",date:t.date()})){t.view(_)}e.preventDefault();return}if(t.toolbar.find("."+A+":visible").length){t.toolbar.find("."+A+":visible").click();e.preventDefault();return}}else if(e.altKey&&i===x.DOWN&&!p){if(t.toolbar.find("."+A+":visible").length){t.toolbar.find("."+A+":visible").click();e.preventDefault();return}}else if(i===x.RIGHT&&c){k(t.toolbar.find("."+A)).removeClass(A);if(h){t._focusedView=f-1===0?k(u.children(":last")):k(u.children()[f+1*v])}else{t._focusedView=f+1===u.children().length?k(u.children(":first")):k(u.children()[f+1*v])}t._focusedView.focus().addClass(A);e.preventDefault();return}else if(i===x.LEFT&&c){k(t.toolbar.find("."+A)).removeClass(A);if(h){t._focusedView=f+1===u.children().length?k(u.children(":first")):k(u.children()[f-1*v])}else{t._focusedView=f-1<0?k(u.children(":last")):k(u.children()[f-1*v])}t._focusedView.focus().addClass(A);e.preventDefault();return}else if(e.altKey&&i===x.DOWN&&t.toolbar.find(".k-nav-current").hasClass(A)){t._showCalendar();e.preventDefault();return}else if(e.altKey&&i===x.DOWN&&p){return}else if(i===x.ESC&&t.popup&&t.popup.visible()){t.popup.close();e.preventDefault();return}if(s){return}if(!a){t._selectFirstSlot();t._select();t.element.focus();return}if(i===x.TAB){if(n.moveToEvent(a,e.shiftKey)){t._select();if(document.activeElement.getAttribute("id")!==t.element.attr("id")){t.element.focus()}e.preventDefault()}else{t._focusToolbar();e.preventDefault();return}}else if(i===x.ENTER||i===x.SPACEBAR){if(a.events.length&&r){if(r.update!==false){t.editEvent(a.events[0])}}else if(r&&r.create!==false){if(a.isAllDay){a=k.extend({},a,{end:y.date.addDays(a.end,-1)})}e.preventDefault();t.addEvent(C({},a,n._resourceBySlot(a)))}}else if(i===x.DELETE&&r!==false&&r.destroy!==false){t.removeEvent(a.events[0])}else if(i>=49&&i<=57){var b=t._viewByIndex(i-49);if(b&&!t.trigger("navigate",{view:b,action:"changeView",date:t.date()})){t.view(b)}}else if(n.move(a,i,e.shiftKey)){if(n.inRange(a)){t._select();k(document.activeElement).blur();t.toolbar.find("."+A).removeClass(A);t.wrapper.focus()}else{var w=t.date().getTime()>a.start.getTime()?"previous":"next";if(!t.trigger("navigate",{view:t._selectedViewName,action:w,date:a.start})){t.date(a.start)}else{a.start=o.start;a.end=o.end}}e.preventDefault()}t._adjustSelectedDate()},_focusToolbar:function(){this.toolbar.find(".k-button:first").focus().addClass(A)},_createSelection:function(e){var t=this._selection;var i;var n;e=k(e);if(e.is(".k-event")){i=e.attr(y.attr("uid"));if(t&&t.events.indexOf(i)!==-1&&!this._ctrlKey){return}}if(!t||!this._ctrlKey&&!this._shiftKey){t=this._selection={events:[],groupIndex:0}}n=this.view().selectionByElement(e);if(n){t.groupIndex=n.groupIndex||0}if(i){n=xe(this._data,i)}if(n&&n.uid){i=[n.uid]}this._updateSelection(n,i);this._adjustSelectedDate()},_updateSelection:function(e,t,i){var n=this._selection;if(e&&n){var r=this.view();if(e.uid){e=r._updateEventForSelection(e)}if(this._shiftKey&&n.start&&n.end){var a=e.end<n.end;n.end=e.endDate?e.endDate():e.end;if(a&&r._timeSlotInterval){y.date.setTime(n.end,-r._timeSlotInterval())}}else{n.start=e.startDate?e.startDate():e.start;n.end=e.endDate?e.endDate():e.end}if("isDaySlot"in e){n.isAllDay=e.isDaySlot}else{n.isAllDay=e.isAllDay}if(i!==null&&i!==v){n.groupIndex=i}n.index=e.index;if(this._ctrlKey){var o=t&&t.length?n.events.indexOf(t[0]):-1;if(o>-1){n.events.splice(o,1)}else{n.events=n.events.concat(t||[])}}else{n.events=t||[]}}},options:{name:"Scheduler",date:t,editable:true,autoBind:true,snap:true,mobile:false,timezone:"",allDaySlot:true,min:new Date(1900,0,1),max:new Date(2099,11,31),toolbar:null,workWeekStart:1,workWeekEnd:5,workDays:null,showWorkHours:false,startTime:t,endTime:t,currentTimeMarker:{updateInterval:1e4,useLocalTimezone:true},footer:{},messages:{today:"Today",pdf:"Export to PDF",save:"Save",cancel:"Cancel",destroy:"Delete",resetSeries:"Reset Series",deleteWindowTitle:"Delete event",next:"Next",previous:"Previous",ariaSlotLabel:"Selected from {0:t} to {1:t}",ariaEventLabel:"{0} on {1:D} at {2:t}",views:{day:"Day",week:"Week",workWeek:"Work Week",agenda:"Agenda",month:"Month",timeline:"Timeline",timelineWeek:"Timeline Week",timelineWorkWeek:"Timeline Work Week",timelineMonth:"Timeline Month"},recurrenceMessages:{deleteWindowTitle:"Delete Recurring Item",resetSeriesWindowTitle:"Reset Series",deleteWindowOccurrence:"Delete current occurrence",deleteWindowSeries:"Delete the series",editWindowTitle:"Edit Recurring Item",editWindowOccurrence:"Edit current occurrence",editWindowSeries:"Edit the series"},editable:{confirmation:X},editor:{title:"Title",start:"Start",end:"End",allDayEvent:"All day event",description:"Description",repeat:"Repeat",timezone:"Timezone",startTimezone:"Start timezone",endTimezone:"End timezone",separateTimezones:"Use separate start and end time zones",timezoneEditorTitle:"Timezones",timezoneEditorButton:"Time zone",timezoneTitle:"Time zones",noTimezone:"No timezone",editorTitle:"Event"}},height:null,width:null,resources:[],group:{resources:[],orientation:"horizontal"},views:[],selectable:false},events:[S,D,w,T,"add","dataBinding","dataBound","moveStart","move","moveEnd","resizeStart","resize","resizeEnd","navigate","change"],destroy:function(){var e=this,t;r.fn.destroy.call(e);if(e.dataSource){e.dataSource.unbind(f,e._refreshHandler);e.dataSource.unbind(h,e._progressHandler);e.dataSource.unbind(p,e._errorHandler)}if(e._resourceRefreshHandler){for(var i=0;i<e.resources.length;i++){var n=e.resources[i].dataSource;n.unbind(f,e._resourceRefreshHandler);n.unbind(h,e._resourceProgressHandler);n.unbind(p,e._resourceErrorHandler)}}if(e.calendar){e.calendar.destroy();e.popup.destroy()}if(e.view()){e.view().destroy()}if(e._editor){e._editor.destroy()}if(this._moveDraggable){this._moveDraggable.destroy()}if(this._resizeDraggable){this._resizeDraggable.destroy()}t=e.element.add(e.wrapper).add(e.toolbar).add(e.popup);t.off(_);clearTimeout(e._moveTimer);e._model=null;e.toolbar=null;e.element=null;k(window).off("resize"+_,e._resizeHandler);y.destroy(e.wrapper)},setDataSource:function(e){this.options.dataSource=e;this._dataSource();if(this.options.autoBind&&e.fetch){e.fetch()}else if(c(e)){this.view(this._selectedView)}},items:function(){var e=this.wrapper.find(".k-scheduler-content");var t=this.view();if(t&&t.options.name==="agenda"){return e.find(".k-task")}else{return e.find(".k-event").add(this.wrapper.find(".k-scheduler-header-wrap").find(".k-scheduler-header-all-day").siblings())}},_movable:function(){var l;var c;var f;var h;var p;var v;var m;var g=this;var _;var d;var u;var e=0;var b=[];var w=[];var t=g._isMobile();var i=g.options.editable&&g.options.editable.move!==false;var n=g.options.editable&&g.options.editable.resize!==false;if(i||n&&t){g._dragging=false;if(t&&y.support.mobileOS.android){e=5}g._moveDraggable=new y.ui.Draggable(g.element,{distance:e,filter:".k-event",ignore:".k-resize-handle",holdToDrag:t,autoScroll:true});if(i){g._moveDraggable.bind("dragstart",function(e){var t=g.view();var i=e.currentTarget;var n=g._isTouch(e);g._dragging=true;if(!t.options.editable||t.options.editable.move===false){g._dragging=false;e.preventDefault();return}if(n&&!i.hasClass("k-event-active")){g._dragging=false;g.element.find(".k-event-active").removeClass("k-event-active");e.preventDefault();return}v=g.occurrenceByUid(i.attr(y.attr("uid")));m=v.clone();u=v.clone();m.update(t._eventOptionsForMove(m));m.inverseColor=g._isInverseColor(i);b=[];if(g._selection){var r=g._selection.events;for(var a=0;a<r.length;a++){var o=g.occurrenceByUid(r[a]).clone();var s=this.element.find('div.k-event[data-uid="'+o.uid+'"]').eq(0);o.update(t._eventOptionsForMove(o));if(s.length){o.inverseColor=g._isInverseColor(s)}b.push(o)}}else{b.push(m)}l=t._slotByPosition(e.x.startLocation,e.y.startLocation);f=t._resourceBySlot(l);d=h=l.startOffset(e.x.startLocation,e.y.startLocation,g.options.snap);c=l;_=l;if(!l||g.trigger("moveStart",{event:v})){e.preventDefault()}}).bind("drag",function(e){var t=g.view();var i=t._slotByPosition(e.x.location,e.y.location);var n;var r;var a;if(!i){return}p=i.startOffset(e.x.location,e.y.location,g.options.snap);if(i.isDaySlot!==l.isDaySlot){if(i.isDaySlot!==_.isDaySlot){var o=k(l.element).index();var s=k(i.element).parent().children().eq(o);l=t._slotByPosition(s.offset().left,s.offset().top);h=l.startOffset(e.x.location,e.y.location,true);w=b.map(function(e){return e.clone()});for(a=0;a<b.length;a++){if(b[a].isAllDay!=i.isDaySlot){b[a].isAllDay=i.isDaySlot;b[a].end=y.date.getDate(b[a].start);b[a].start=y.date.getDate(b[a].start);if(!i.isDaySlot){y.date.setTime(b[a].start,y.date.getMilliseconds(t.startTime()));y.date.setTime(b[a].end,y.date.getMilliseconds(t.startTime())+t._timeSlotInterval())}}}}else{l=k.extend(true,{},_);h=d;b=w}}n=p-h;for(a=0;a<b.length;a++){t._updateMoveHint(b[a],i.groupIndex,n)}r=z(m,n);if(!g.trigger("move",{event:v,slot:{element:i.element,start:i.startDate(),end:i.endDate(),isDaySlot:i.isDaySlot},resources:t._resourceBySlot(i),start:r.start,end:r.end})){c=i}else{for(a=0;a<b.length;a++){t._updateMoveHint(b[a],i.groupIndex,n)}}}).bind("dragend",function(e){g.view()._removeMoveHint();var t=p-h;var i=z(m,t);var n=i.start;var r=i.end;g._dragging=false;var a=g.view()._resourceBySlot(c);var o=g.trigger("moveEnd",{event:v,slot:{element:c.element,start:c.startDate(),end:c.endDate()},start:n,end:r,resources:a});if(!o&&(v.start.getTime()!==n.getTime()||v.end.getTime()!==r.getTime()||_.isDaySlot!==c.isDaySlot||y.stringify(a)!==y.stringify(f))){g._isMultiDrag=b.length>1;for(var s=0;s<b.length;s++){var l=b[s];i=z(l,t);var d=g.view()._eventOptionsForMove(l);var u=k.extend({isAllDay:l.isAllDay,start:i.start,end:i.end},d,a);g._updateEvent(null,l,u)}if(g._isMultiDrag){g.dataSource.sync();g._isMultiDrag=false}}e.currentTarget.removeClass("k-event-active");this.cancelHold();b=[];w=[]}).bind("dragcancel",function(){g.view()._removeMoveHint();this.cancelHold();b=[];w=[]})}g._moveDraggable.bind("hold",function(e){if(g._isTouch(e)){g.element.find(".k-event-active").removeClass("k-event-active");if(g.options.selectable){g._createSelection(e.currentTarget)}e.currentTarget.addClass("k-event-active")}})}},_resizable:function(){var s;var l;var d;var u;var c;var f=this;var e=0;function h(e){var t={"k-resize-e":"east","k-resize-w":"west","k-resize-n":"north","k-resize-s":"south"};for(var i in t){if(e.hasClass(i)){return t[i]}}}if(f._isMobile()&&y.support.mobileOS.android){e=5}f._resizeDraggable=new y.ui.Draggable(f.element,{distance:e,filter:".k-resize-handle",autoScroll:true,dragstart:function(e){var t=k(e.currentTarget);var i=t.closest(".k-event");var n=i.attr(y.attr("uid"));var r=f.view();f._dragging=true;d=f.occurrenceByUid(n);u=d.clone();r._updateEventForResize(u);c=r._slotByPosition(e.x.startLocation,e.y.startLocation);if(f.trigger("resizeStart",{event:d})){e.preventDefault()}s=y.date.toUtcTime(u.start);l=y.date.toUtcTime(u.end)},drag:function(e){if(!c){return}var t=k(e.currentTarget);var i=h(t);var n=f.view();var r=n._slotByPosition(e.x.location,e.y.location);if(!r||c.groupIndex!=r.groupIndex){return}c=r;var a=s;var o=l;if(i=="south"){if(!c.isDaySlot&&c.end-y.date.toUtcTime(u.start)>=n._timeSlotInterval()){if(u.isAllDay){l=c.startOffset(e.x.location,e.y.location,f.options.snap)}else{l=c.endOffset(e.x.location,e.y.location,f.options.snap)}}}else if(i=="north"){if(!c.isDaySlot&&y.date.toUtcTime(u.end)-c.start>=n._timeSlotInterval()){s=c.startOffset(e.x.location,e.y.location,f.options.snap)}}else if(i=="east"){if(c.isDaySlot&&y.date.toUtcTime(y.date.getDate(c.endDate()))>=y.date.toUtcTime(y.date.getDate(u.start))){if(u.isAllDay){l=c.startOffset(e.x.location,e.y.location,f.options.snap)}else{l=c.endOffset(e.x.location,e.y.location,f.options.snap)}}else if(!c.isDaySlot&&c.end-y.date.toUtcTime(u.start)>=n._timeSlotInterval()){l=c.endOffset(e.x.location,e.y.location,f.options.snap)}}else if(i=="west"){if(c.isDaySlot&&y.date.toUtcTime(y.date.getDate(u.end))>=y.date.toUtcTime(y.date.getDate(c.startDate()))){s=c.startOffset(e.x.location,e.y.location,f.options.snap)}else if(!c.isDaySlot&&y.date.toUtcTime(u.end)-c.start>=n._timeSlotInterval()){s=c.startOffset(e.x.location,e.y.location,f.options.snap)}}if(!f.trigger("resize",{event:d,slot:{element:c.element,start:c.startDate(),end:c.endDate()},start:y.timezone.toLocalDate(s),end:y.timezone.toLocalDate(l),resources:n._resourceBySlot(c)})){n._updateResizeHint(u,c.groupIndex,s,l)}else{s=a;l=o}},dragend:function(e){var t=k(e.currentTarget);var i=new Date(u.start.getTime());var n=new Date(u.end.getTime());var r=h(t);f._dragging=false;f.view()._removeResizeHint();if(r=="south"){n=y.timezone.toLocalDate(l)}else if(r=="north"){i=y.timezone.toLocalDate(s)}else if(r=="east"){if(c.isDaySlot){n=y.date.getDate(y.timezone.toLocalDate(l))}else{n=y.timezone.toLocalDate(l)}}else if(r=="west"){if(c.isDaySlot){i=new Date(y.timezone.toLocalDate(s));i.setHours(0);i.setMinutes(0)}else{i=y.timezone.toLocalDate(s)}}var a=f.trigger("resizeEnd",{event:d,slot:{element:c.element,start:c.startDate(),end:c.endDate()},start:i,end:n,resources:f.view()._resourceBySlot(c)});if(!a&&n.getTime()>=i.getTime()){if(u.start.getTime()!=i.getTime()||u.end.getTime()!=n.getTime()){f.view()._updateEventForResize(d);f._updateEvent(r,d,{start:i,end:n})}}c=null;d=null},dragcancel:function(){f._dragging=false;f.view()._removeResizeHint();c=null;d=null}})},_updateEvent:function(n,r,a){var o=this;var s=function(e,t){try{o._preventRefresh=true;e.update(a);o._convertDates(e)}finally{o._preventRefresh=false}if(!o.trigger(T,{event:e})){if(t){t()}if(!o._isMultiDrag){o.dataSource.sync()}}};var l=function(e){if(e.recurrenceRule){return o.dataSource.getByUid(e.uid)}else{return o.dataSource.get(e.recurrenceId)}};var e=function(){var e=l(r);if(n=="south"||n=="north"){if(a.start){var t=y.date.getDate(e.start);y.date.setTime(t,d(a.start));a.start=t}if(a.end){var i=y.date.getDate(e.end);y.date.setTime(i,d(a.end));a.end=i}}o.dataSource._removeExceptions(e);s(e)};var t=function(){var e=l(r);var t;var i=function(){o._convertDates(e);if(o._selection){o._selection.events.push(t)}};var n=e.toOccurrence({start:r.start,end:r.end});t=n.uid;s(o.dataSource.add(n),i)};if(r.recurrenceRule||r.isOccurrence()){var i=o.options.messages.recurrenceMessages;o._showRecurringDialog(r,t,e,{title:i.editWindowTitle,text:i.editRecurring?i.editRecurring:J,occurrenceText:i.editWindowOccurrence,seriesText:i.editWindowSeries})}else{s(o.dataSource.getByUid(r.uid))}},_modelForContainer:function(e){e=k(e).closest("["+y.attr("uid")+"]");return this.dataSource.getByUid(e.attr(y.attr("uid")))},showDialog:function(e){this._editor.showDialog(e)},focus:function(){this.wrapper.focus()},_confirmation:function(e,t,i){var n=this.options.editable;if(n===true||n.confirmation!==false){var r=this.options.messages;var a=r.deleteWindowTitle;var o=typeof n.confirmation===u?n.confirmation:r.editable.confirmation;if(this._isEditorOpened()&&t.isRecurring()){var s=this.options.messages.recurrenceMessages;a=s.deleteWindowTitle;if(t.isException()||t.isNew()){o=s.deleteRecurringConfirmation?s.deleteRecurringConfirmation:ee}else{o=s.deleteSeriesConfirmation?s.deleteSeriesConfirmation:ie}if(i){a=s.resetSeriesWindowTitle;o=s.resetSeriesConfirmation?s.resetSeriesConfirmation:te}}var l=[{name:"destroy",text:i?r.resetSeries:r.destroy,click:function(){e()}}];if(!(this._isMobile()&&y.Pane)){l.push({name:"canceledit",text:r.cancel,click:function(){e(true)}})}this._unbindResize();this.showDialog({model:t,text:o,title:a,buttons:l});this._bindResize()}else{e()}},addEvent:function(e){var t=this._editor.editable;var i=this.dataSource;var n;e=e||{};var r=this.trigger("add",{event:e});if(!r&&(t&&t.end()||!t)){this.cancelEvent();if(e&&e.toJSON){e=e.toJSON()}n=i.add(e);if(n){this.cancelEvent();this._editEvent(n)}}},saveEvent:function(){var e=this;var t=e._editor;var i=e.dataSource;if(!t){return}var n=t.editable;var r=t.container;var a=e._modelForContainer(r);var o,s,l;if(r&&n&&n.end()&&!e.trigger(T,{container:r,event:a})){if(!a.isOccurrence()&&!!a.recurrenceException&&!a.recurrenceRule){o=i.data();for(s=o.length-1;s>=0;s-=1){l=o[s];if(l&&l.recurrenceId===a.id){i.remove(l)}}a.set("recurrenceException","")}if(!a.dirty&&!a.isOccurrence()){e._convertDates(a,"remove")}i.sync()}},cancelEvent:function(){var e=this._editor;var t=e.container;var i;if(t){i=this._modelForContainer(t);if(i&&i.isOccurrence()){this._convertDates(i,"remove");this._convertDates(this.dataSource.get(i.recurrenceId),"remove")}this.dataSource.cancelChanges(i);e.close()}},editEvent:function(e){var t=typeof e=="string"?this.occurrenceByUid(e):e;if(!t){return}this.cancelEvent();if(t.isRecurring()){this._editRecurringDialog(t)}else{this._editEvent(t)}},_editEvent:function(e){this._preventRefresh=true;this._unbindResize();this._createPopupEditor(e);this._bindResize()},_editRecurringDialog:function(e){var t=this;var i=function(){if(e.isException()){t._editEvent(e)}else{t.addEvent(e)}};var n=function(){if(e.recurrenceId){e=t.dataSource.get(e.recurrenceId)}t._editEvent(e)};var r=t.options.messages.recurrenceMessages;t._showRecurringDialog(e,i,n,{title:r.editWindowTitle,text:r.editRecurring?r.editRecurring:J,occurrenceText:r.editWindowOccurrence,seriesText:r.editWindowSeries})},_showRecurringDialog:function(e,t,i,n){var r=this.options.editable;var a=g(r)?r.editRecurringMode:"dialog";if(a==="occurrence"||this._isMultiDrag){t()}else if(a==="series"){i()}else{this._unbindResize();this.showDialog({model:e,title:n.title,text:n.text,buttons:[{text:n.occurrenceText,click:t},{text:n.seriesText,click:i}]});this._bindResize()}},_createButton:function(e){var t=e.template||ne,i=typeof e===u?e:e.name||e.text,n={className:"k-scheduler-"+(i||"").replace(/\s/g,""),text:i,attr:""};if(!i&&!(g(e)&&e.template)){throw new Error("Custom commands should have name specified")}if(g(e)){if(e.className){e.className+=" "+n.className}if(i==="edit"&&g(e.text)){e=C(true,{},e);e.text=e.text.edit}n=C(true,n,Ee[i],e)}else{n=C(true,n,Ee[i])}return y.template(t)(n)},_convertDates:function(e,t){var i=this.dataSource.reader.timezone;var n=e.startTimezone;var r=e.endTimezone;var a=e.start;var o=e.start;t=t||"apply";n=n||r;r=r||n;if(n){if(i){if(t==="apply"){a=y.timezone.convert(e.start,i,n);o=y.timezone.convert(e.end,i,r)}else{a=y.timezone.convert(e.start,n,i);o=y.timezone.convert(e.end,r,i)}}else{a=y.timezone[t](e.start,n);o=y.timezone[t](e.end,r)}e._set("start",a);e._set("end",o)}},_createEditor:function(){var i=this;var e;if(this._isMobile()&&y.Pane){e=i._editor=new He(this.wrapper,C({},this.options,{target:this,timezone:i.dataSource.reader.timezone,resources:i.resources,createButton:l(this._createButton,this)}))}else{e=i._editor=new Ne(this.wrapper,C({},this.options,{target:this,createButton:l(this._createButton,this),timezone:i.dataSource.reader.timezone,resources:i.resources}))}e.bind("cancel",function(e){if(i.trigger("cancel",{container:e.container,event:e.model})){e.preventDefault();return}i._preventRefresh=false;i.cancelEvent();if(i._attemptRefresh){i.refresh()}i.focus()});e.bind("edit",function(e){if(i.trigger(D,{container:e.container,event:e.model})){e.preventDefault()}});e.bind("save",function(){i._preventRefresh=false;i.saveEvent()});e.bind("remove",function(e){i._preventRefresh=false;i.removeEvent(e.model)});e.bind("resetSeries",function(t){i._confirmation(function(e){i._preventRefresh=false;if(!e){i.dataSource._removeExceptions(t.model);i.saveEvent()}},t.model,true)})},_createPopupEditor:function(e){var t=this._editor;if(!e.isNew()||e.isOccurrence()){if(e.isOccurrence()){this._convertDates(e.recurrenceId?this.dataSource.get(e.recurrenceId):e)}this._convertDates(e)}this.editable=t.editEvent(e)},removeEvent:function(e){var t=this,i=typeof e=="string"?t.occurrenceByUid(e):e;if(!i){return}if(i.isRecurring()){t._deleteRecurringDialog(i)}else{t._confirmation(function(e){if(!e){t._removeEvent(i)}},i)}},occurrenceByUid:function(e){var t=this.dataSource.getByUid(e);if(!t){t=xe(this._data,e)}return t},occurrencesInRange:function(e,t){return new y.data.Query(this._data).filter({logic:"or",filters:[{logic:"and",filters:[{field:"start",operator:"gte",value:e},{field:"end",operator:"gte",value:e},{field:"start",operator:"lt",value:t}]},{logic:"and",filters:[{field:"start",operator:"lte",value:e},{field:"end",operator:"gt",value:e}]}]}).toArray()},_removeEvent:function(e){if(!this.trigger(S,{event:e})){if(this.dataSource.remove(e)){this.dataSource.sync()}}},_deleteRecurringDialog:function(e){var i=this;var n=e;var t=i.options.editable;var r;var a;var o;var s;var l;var d;var u=g(t)?t.editRecurringMode:"dialog";r=function(){var e=n.recurrenceId?n:n.toOccurrence();var t=i.dataSource.get(e.recurrenceId);i._convertDates(t);i._removeEvent(e)};a=function(){if(n.recurrenceId){n=i.dataSource.get(n.recurrenceId)}i._removeEvent(n)};o=function(){i.dataSource.remove(n);i.dataSource.sync()};if(u!="dialog"||i._isEditorOpened()){s=function(){i._confirmation(function(e){if(!e){r()}},n)};l=function(){i._confirmation(function(e){if(!e){a()}},n)};d=function(){i._confirmation(function(e){if(!e){o()}},n)}}var c=l||a;var f=s||r;var h=d||o;if(i._isEditorOpened()){if(e.isException()){f()}else if(e.isNew()){h()}else{c()}}else{var p=i.options.messages.recurrenceMessages;i._showRecurringDialog(e,f,c,{title:p.deleteWindowTitle,text:p.deleteRecurring?p.deleteRecurring:Z,occurrenceText:p.deleteWindowOccurrence,seriesText:p.deleteWindowSeries})}},_isEditorOpened:function(){return!!this._editor.container},_unbindView:function(e){var t=this;t.angular("cleanup",function(){return{elements:t.items()}});e.destroy()},_bindView:function(e){var n=this;if(n.options.editable){if(n._viewRemoveHandler){e.unbind(S,n._viewRemoveHandler)}n._viewRemoveHandler=function(e){n.removeEvent(e.uid)};e.bind(S,n._viewRemoveHandler);if(n._viewAddHandler){e.unbind(q,n._viewAddHandler)}n._viewAddHandler=function(e){n.addEvent(e.eventInfo)};e.bind(q,this._viewAddHandler);if(n._viewEditHandler){e.unbind(D,n._viewEditHandler)}n._viewEditHandler=function(e){n.editEvent(e.uid)};e.bind(D,this._viewEditHandler)}if(n._viewNavigateHandler){e.unbind("navigate",n._viewNavigateHandler)}n._viewNavigateHandler=function(e){if(e.action){if(!n.trigger("navigate",{view:e.view,isWorkDay:e.isWorkDay,action:e.action,date:e.date})){n.date(e.date)}}else if(e.view){var t="isWorkDay"in e;var i=t?"changeWorkDay":"changeView";if(!n.trigger("navigate",{view:e.view,isWorkDay:e.isWorkDay,action:i,date:e.date})){if(t){n._workDayMode=e.isWorkDay}n._selectView(e.view);n.date(e.date)}}};e.bind("navigate",n._viewNavigateHandler);if(n._viewActivateHandler){e.unbind("activate",n._viewActivateHandler)}n._viewActivateHandler=function(){var e=this;if(n._selection){e.constrainSelection(n._selection);n._select();n._adjustSelectedDate()}};e.bind("activate",n._viewActivateHandler)},_selectView:function(e){var t=this;if(e&&t.views[e]){if(t._selectedView){t._unbindView(t._selectedView)}t._selectedView=t._renderView(e);t._selectedViewName=e;if(t._viewsCount>1&&!t._isMobile()){var i=t.toolbar.find(".k-views-dropdown");var n=t.toolbar.find(".k-scheduler-views > .k-button");if(t.toolbar.find(".k-views-dropdown").length===0){t.toolbar.find(".k-scheduler-views-wrapper").prepend(re({views:t.views,view:e,ns:y.ns}));i=t.toolbar.find(".k-views-dropdown")}i.val(e);n.removeClass("k-state-selected");n.filter(".k-view-"+e.replace(/\./g,"\\.").toLowerCase()).addClass("k-state-selected")}else{var r=t.toolbar.find(".k-scheduler-mobile-views");r.find("[value="+e.replace(/\./g,"\\.")+"]").prop("selected","selected")}}},view:function(e){var t=this;if(e){t._selectView(e);t.rebind();return}return t._selectedView},viewName:function(){return this.view().name},_renderView:function(e){var t=this._initializeView(e);this._bindView(t);if(y.support.mouseAndTouchPresent||y.support.pointers){t.content.css("-ms-touch-action","pinch-zoom");t.content.css("touch-action","pinch-zoom")}this._model.set("formattedDate",t.dateForTitle());this._model.set("formattedShortDate",t.shortDateForTitle());this._model.set("formattedMobileDate",t.mobileDateForTitle?t.mobileDateForTitle():t.shortDateForTitle());this._model.set("formattedYear",y.format("{0:yyyy}",t.startDate()));return t},resize:function(e){var t=this.getSize();var i=this._size;var n=this.view();if(!n||!n.groups){return}if(e||!i||t.width!==i.width||t.height!==i.height){this.refresh({action:"resize"});this._size=t}},_adjustSelectedDate:function(){var e=this._model.selectedDate,t=this._selection,i=t.start;if(i&&!y.date.isInDateRange(e,m(i),m(t.end))){e.setFullYear(i.getFullYear(),i.getMonth(),i.getDate())}},_initializeView:function(e){var t=this.views[e];if(t){var i=g(t),n={},r=t.type;if(typeof r===u){r=y.getter(t.type)(window)}if(i&&t.workDays&&t.workDays.length){n.workDays=t.workDays}if(r){t=new r(this.wrapper,Ie(C(true,{},this.options,i?t:{},{resources:this.resources,date:this.date(),startTime:y.parseDate(t.startTime)||y.parseDate(this.options.startTime),endTime:y.parseDate(t.endTime)||y.parseDate(this.options.endTime),showWorkHours:this._workDayMode}),n))}else{throw new Error("There is no such view")}}return t},_views:function(){var e=this.options.views;var t;var i;var n;var r;var a;var o;var s;var l;this.views={};this._viewsCount=0;for(s=0,l=e.length;s<l;s++){var d=false;t=e[s];r=g(t);if(r){o=a=t.type?t.type:t;if(typeof o!==u){a=t.name||t.title;d=true}}else{o=a=t}i=Ve[a];if(i&&!d){t.type=i.type;i.title=this.options.messages.views[a];if(i.type==="day"){i.messages={allDay:this.options.messages.allDay}}else if(i.type==="agenda"){i.messages={event:this.options.messages.event,date:this.options.messages.date,time:this.options.messages.time}}}t=C({title:a},i,r?t:{});if(a){this.views[a]=t;this._viewsCount++;if(!n||t.selected){n=a}}}if(n){this._selectedViewName=n}},rebind:function(){var t=this,e=t.resources,i=[];if(t._preventRebind){t._preventRebind=false;return}if(t.options.autoBind===false&&e&&e.length>0){e.forEach(function(e){if(e.dataSource.data().length===0){t._preventRebind=true;i.push(e.dataSource.fetch())}});k.when.apply(null,i).then(function(){t.dataSource.fetch();t._preventRebind=false})}else{t.dataSource.fetch()}},_dataSource:function(){var e=this,t=e.options,i=t.dataSource;i=c(i)?{data:i}:i;if(t.timezone&&!(i instanceof F)){i=C(true,i,{schema:{timezone:t.timezone}})}else if(i instanceof F){t.timezone=i.options.schema?i.options.schema.timezone:""}if(e.dataSource&&e._refreshHandler){e.dataSource.unbind(f,e._refreshHandler).unbind(h,e._progressHandler).unbind(p,e._errorHandler)}else{e._refreshHandler=l(e.refresh,e);e._progressHandler=l(e._requestStart,e);e._errorHandler=l(e._error,e)}e.dataSource=y.data.SchedulerDataSource.create(i).bind(f,e._refreshHandler).bind(h,e._progressHandler).bind(p,e._errorHandler);e.options.dataSource=e.dataSource},_error:function(){this._progress(false)},_requestStart:function(){this._progress(true)},_progress:function(e){var t=this.element.find(".k-scheduler-content");y.ui.progress(t,e)},_resources:function(){var e=this;var t=e.options.resources;var i=[];for(var n=0;n<t.length;n++){var r=t[n];var a=r.field;var o=r.name||a;var s=r.dataSource;if(!a||!s){throw new Error('The "field" and "dataSource" options of the scheduler resource are mandatory.')}e.resources.push({field:a,name:o,title:r.title||a,dataTextField:r.dataTextField||"text",dataValueField:r.dataValueField||"value",dataColorField:r.dataColorField||"color",valuePrimitive:r.valuePrimitive!=null?r.valuePrimitive:true,multiple:r.multiple||false,dataSource:e._resourceDataSource(s,o,i)})}if(!e.options.autoBind){e._selectView(e._selectedViewName)}else{k.when.apply(null,i).then(function(){e.view(e._selectedViewName)})}},_resourceDataSource:function(e,t,i){var n=this;var r=c(e)?{data:e}:e;var a=y.data.DataSource.create(r);if(n.options.autoBind){i.push(a.fetch(function(){n._bindResourceEvents(this,t)}))}else{n._bindResourceEvents(a,t)}return a},_bindResourceEvents:function(e,t){var i=this;var n=i.options.group&&i.options.group.resources.length;var r=n&&i.options.group.resources.indexOf(t)>-1;if(!i._resourceRefreshHandler&&r){i._resourceRefreshHandler=l(i._refreshResource,i);i._resourceErrorHandler=l(i._error,i)}if(r){e.bind(f,i._resourceRefreshHandler).bind(p,i._resourceErrorHandler)}},_refreshResource:function(){var e=this;var t=e._editor&&e._editor.editable||e._preventRefresh;if(!t){e.view(e._selectedViewName)}},_initModel:function(){var t=this;t._model=y.observable({selectedDate:new Date(this.options.date),formattedDate:"",formattedShortDate:""});t._model.bind("change",function(e){if(e.field==="selectedDate"){t.view(t._selectedViewName)}})},_wrapper:function(){var e=this;var t=e.options;var i=t.height;var n=t.width;e.wrapper=e.element.addClass("k-widget k-widget-2021 k-scheduler k-floatwrap").attr("role","grid").attr("aria-multiselectable",true);if(e._isMobile()){e.wrapper.addClass("k-scheduler-mobile")}if(i){e.wrapper.height(i)}if(n){e.wrapper.width(n)}},date:function(e){if(e!=null&&m(e)>=m(this.options.min)&&m(e)<=m(this.options.max)){this._model.set("selectedDate",e)}return m(this._model.get("selectedDate"))},_toolbar:function(){var s=this;var e=s.options;var t=[];if(e.toolbar){t=k.isArray(e.toolbar)?e.toolbar:[e.toolbar]}var i=this._isMobile()?oe:ae;var n=k(i({messages:e.messages,pdf:k.grep(t,function(e){return e=="pdf"||e.name=="pdf"}).length>0,search:k.grep(t,function(e){return e=="search"||e.name=="search"}).length>0,ns:y.ns,view:s._selectedViewName,views:s.views,viewsCount:s._viewsCount,editable:s.options.editable}));s.wrapper.append(n);s.toolbar=n;y.bind(s.toolbar,s._model);n.on(b+_,".k-pdf",function(e){e.preventDefault();s.saveAsPDF()});n.on("input"+_,".k-scheduler-search-input",y.throttle(function(e){s.dataSource.filter({logic:"or",filters:[{field:"title",operator:"contains",value:e.target.value},{field:"description",operator:"contains",value:e.target.value}]})},250));n.on(b+_,".k-create-event",function(e){e.preventDefault();s.addEvent()});n.on(b+_,".k-nav-calendar",function(e){e.preventDefault();s._showCalendar(e.target)});n.on(b+_,".k-scheduler-navigation > .k-button",function(e){var t=k(this);var i=new Date(s.date());var n="";var r=new Date;var a=s.options.timezone;if(k(e.target).is("input")){return}e.preventDefault();if(t.hasClass("k-nav-today")){n="today";if(a){var o=y.timezone.offset(r,a);i=y.timezone.convert(r,r.getTimezoneOffset(),o)}else{i=r}}else if(t.hasClass("k-nav-next")){n="next";i=s.view().nextDate()}else if(t.hasClass("k-nav-prev")){n="previous";i=s.view().previousDate()}if(!s.trigger("navigate",{view:s._selectedViewName,action:n,date:i})){s.date(i)}});n.on(b+_,".k-nav-current",function(e){e.preventDefault();if(!s._isMobile()){s._showCalendar()}});n.on(b+_,".k-scheduler-views > .k-button, .k-scheduler-refresh",function(e){e.preventDefault();var t=k(this).attr(y.attr("name"));s.toolbar.find(".k-scheduler-views > .k-button").removeClass(A);if(!s.trigger("navigate",{view:t,action:"changeView",date:s.date()})){s.view(t)}});n.on(f+_,".k-views-dropdown, .k-scheduler-mobile-views",function(){var e=this.value;if(!s.trigger("navigate",{view:e,action:"changeView",date:s.date()})){s.view(e)}})},_showCalendar:function(e){var t=this,i=e||t.toolbar.find(".k-nav-current"),n=k('<div class="k-calendar-container"><div class="k-scheduler-calendar"></div></div>');if(!t.popup){t.popup=new H(n,{anchor:i,activate:function(){if(t.popup&&t.calendar){t.popup._toggleResize(false);t.calendar.element.find("table").focus();t.popup._toggleResize(true)}},open:function(){if(!t.calendar){t.calendar=new N(this.element.find(".k-scheduler-calendar"),{change:function(){var e=this.value();if(!t.trigger("navigate",{view:t._selectedViewName,action:"changeDate",date:e})){t.date(e);t.popup.close()}if(!t._isMobile()){t._selectedView.element.focus();t.toolbar.find(".k-nav-current").focus().addClass(A)}},min:t.options.min,max:t.options.max})}t.calendar.element.on("keydown"+_,function(e){if(e.keyCode===x.ESC||e.keyCode===x.TAB){t.popup.close();t._selectedView.element.focus();t.toolbar.find(".k-nav-current").focus().addClass(A)}});t.calendar.value(t.date())},copyAnchorStyles:false})}t.popup.open()},refresh:function(e){var t=this;var i=this.view();var n=e&&e.action==="itemchange"&&(this._editor.editable||this._preventRefresh)||this.dataSource.options.type==="signalr"&&this._preventRefresh;this._progress(false);this.angular("cleanup",function(){return{elements:t.items()}});e=e||{};if(!i){return}if(n){this._attemptRefresh=true&&this.dataSource.options.type==="signalr";return}if(this.trigger("dataBinding",{action:e.action||"rebind",index:e.index,items:e.items})){return}if(!(e&&e.action==="resize")&&this._editor){this._editor.close()}this._data=this.dataSource.expand(i.startDate(),i.visibleEndDate());i.refreshLayout();i.render(this._data);this.trigger("dataBound");this._attemptRefresh=false},slotByPosition:function(e,t){var i=this.view();if(!i._slotByPosition){return null}var n=i._slotByPosition(e,t);if(!n){return null}return{startDate:n.startDate(),endDate:n.endDate(),groupIndex:n.groupIndex,element:n.element,isDaySlot:n.isDaySlot}},slotByElement:function(e){var t=k(e).offset();return this.slotByPosition(t.left,t.top)},resourcesBySlot:function(e){return this.view()._resourceBySlot(e)}});var Ve={day:{type:"kendo.ui.DayView"},week:{type:"kendo.ui.WeekView"},workWeek:{type:"kendo.ui.WorkWeekView"},agenda:{type:"kendo.ui.AgendaView"},month:{type:"kendo.ui.MonthView"},timeline:{type:"kendo.ui.TimelineView"},timelineWeek:{type:"kendo.ui.TimelineWeekView"},timelineWorkWeek:{type:"kendo.ui.TimelineWorkWeekView"},timelineMonth:{type:"kendo.ui.TimelineMonthView"}};e.plugin(Oe);if(y.PDFMixin){y.PDFMixin.extend(Oe.prototype);var We="k-scheduler-pdf-export";Oe.fn._drawPDF=function(i){var e=this.wrapper;var t=e[0].style.cssText;e.css({width:e.width(),height:e.height()});e.addClass(We);var n=this;var r=new k.Deferred;var a=e.find(".k-scheduler-content").find("table").css("table-layout","auto");setTimeout(function(){a.css("table-layout","fixed");n.resize(true);n._drawPDFShadow({},{avoidLinks:n.options.pdf.avoidLinks}).done(function(e){var t={page:e,pageNumber:1,progress:1,totalPages:1};i.notify(t);r.resolve(t.page)}).fail(function(e){r.reject(e)}).always(function(){e[0].style.cssText=t;e.removeClass(We);n.resize(true);n.resize(true)})});return r}}var Ue=r.extend({init:function(e,t){var i=this,n=y.timezone.windows_zones;if(!n||!y.timezone.zones_titles){throw new Error("kendo.timezones.min.js is not included.")}r.fn.init.call(i,e,t);i.wrapper=i.element;i._zonesQuery=new y.data.Query(n);i._zoneTitleId=y.guid();i._zoneTitlePicker();i._zonePicker();i._zoneTitle.bind("cascade",function(){if(!this.value()){i._zone.wrapper.hide()}});i._zone.bind("cascade",function(){i._value=this.value();i.trigger("change")});i.value(i.options.value)},options:{name:"TimezoneEditor",value:"",optionLabel:"No timezone"},events:["change"],_zoneTitlePicker:function(){var e=this,t=k('<input id="'+e._zoneTitleId+'" aria-label="'+e.options.title+'"/>').appendTo(e.wrapper);e._zoneTitle=new y.ui.DropDownList(t,{dataSource:y.timezone.zones_titles,dataValueField:"other_zone",dataTextField:"name",optionLabel:e.options.optionLabel})},_zonePicker:function(){var e=this,t=k('<input aria-label="'+e.options.title+'"/>').appendTo(this.wrapper);e._zone=new y.ui.DropDownList(t,{dataValueField:"zone",dataTextField:"territory",dataSource:e._zonesQuery.data,cascadeFrom:e._zoneTitleId,dataBound:function(){e._value=this.value();this.wrapper.toggle(this.dataSource.view().length>1)}});e._zone.wrapper.hide()},destroy:function(){r.fn.destroy.call(this);y.destroy(this.wrapper)},value:function(e){var t=this,i;if(e===v){return t._value}i=t._zonesQuery.filter({field:"zone",operator:"eq",value:e}).data[0];if(i){t._zoneTitle.value(i.other_zone);t._zone.value(i.zone)}else{t._zoneTitle.select(0)}}});e.plugin(Ue);var je=y.template('<option value="#=other_zone#">#=name#</option>');var Ge=y.template('<option value="#=zone#">#=territory#</option>');var qe=r.extend({init:function(e,t){var i=this,n=y.timezone.windows_zones;if(!n||!y.timezone.zones_titles){throw new Error("kendo.timezones.min.js is not included.")}r.fn.init.call(i,e,t);i.wrapper=i.element;i._zonesQuery=new y.data.Query(n);i._zoneTitlePicker();i._zonePicker();i.value(i.options.value)},options:{name:"MobileTimezoneEditor",optionLabel:"No timezone",value:""},events:["change"],_bindZones:function(e){var t=e?this._filter(e):[];this._zone.html(this._options(t,Ge))},_filter:function(e){return this._zonesQuery.filter({field:"other_zone",operator:"eq",value:e}).data},_options:function(e,t,i){var n=0;var r="";var a=e.length;if(i){r+=t({other_zone:"",name:i})}for(;n<a;n++){r+=t(e[n])}return r},_zoneTitlePicker:function(){var n=this;var e=n._options(y.timezone.zones_titles,je,n.options.optionLabel);n._zoneTitle=k("<select>"+e+"</select>").appendTo(n.wrapper).change(function(){var e=this.value;var t=n._zonePickerLabel;var i=t.find("select");n._bindZones(e);if(e&&i.children().length>1){t.show()}else{t.hide()}n._value=n._zone[0].value;n.trigger("change")})},_zonePicker:function(){var e=this;e._zonePickerLabel=k("<li class='k-item k-listgroup-item k-zonepicker' style='display:none'>"+"<label class='k-label k-listgroup-form-row'>"+"<span class='k-item-title k-listgroup-form-field-label'></span>"+"<div class='k-listgroup-form-field-wrapper'></div>"+"</label>"+"</li>");e._zone=k("<select></select>").appendTo(e._zonePickerLabel.find("div")).change(function(){e._value=this.value;e.trigger("change")});this.wrapper.closest(".k-item").after(e._zonePickerLabel);e._bindZones(e._zoneTitle.val());e._value=e._zone[0].value},destroy:function(){r.fn.destroy.call(this);y.destroy(this.wrapper)},value:function(e){var t=this;var i=t._zone;var n="";var r="";var a;if(e===v){return t._value}a=t._zonesQuery.filter({field:"zone",operator:"eq",value:e}).data[0];if(a){r=a.zone;n=a.other_zone}t._zoneTitle.val(n);t._bindZones(n);i.val(r);r=i[0].value;if(r&&i.children.length>1){t._zonePickerLabel.show()}else{t._zonePickerLabel.hide()}t._value=r}});e.plugin(qe)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.treelist",["kendo.dom","kendo.data","kendo.columnsorter","kendo.editable","kendo.window","kendo.filtermenu","kendo.selectable","kendo.resizable","kendo.treeview.draganddrop","kendo.pager"],e)})(function(){var e={id:"treelist",name:"TreeList",category:"web",description:"The TreeList widget displays self-referencing data and offers rich support for interacting with data, sorting, filtering, and selection.",depends:["dom","data","pager"],features:[{id:"treelist-sorting",name:"Sorting",description:"Support for column sorting",depends:["columnsorter"]},{id:"treelist-filtering",name:"Filtering",description:"Support for record filtering",depends:["filtermenu"]},{id:"treelist-editing",name:"Editing",description:"Support for record editing",depends:["editable","window"]},{id:"treelist-selection",name:"Selection",description:"Support for row selection",depends:["selectable"]},{id:"treelist-column-resize",name:"Column resizing",description:"Support for column resizing",depends:["resizable"]},{id:"treelist-dragging",name:"Drag & Drop",description:"Support for drag & drop of rows",depends:["treeview.draganddrop"]},{id:"treelist-excel-export",name:"Excel export",description:"Export data as Excel spreadsheet",depends:["excel"]},{id:"treelist-pdf-export",name:"PDF export",description:"Export data as PDF",depends:["pdf","drawing"]},{id:"treelist-paging",name:"Paging",description:"Support for treelist paging",depends:["pager"]}]};(function(y,v){var e=kendo.data;var n=kendo.dom;var p=n.element;var H=n.text;var h=n.html;var x=kendo._outerWidth;var l=kendo.keys;var C=kendo._outerHeight;var a=kendo.ui;var N=a.DataBoundWidget;var o=e.DataSource;var O=e.ObservableArray;var m=e.Query;var s=e.Model;var S=kendo.support.browser;var V=kendo.template;var W=kendo._activeElement;var U=kendo.support.touch;var j=y.isArray;var g=y.extend;var k=y.proxy;var G=y.map;var T=y.grep;var D=y.inArray;var q=y.isPlainObject;var $=Array.prototype.push;var K="string";var d="change";var Y="itemChange";var Q="error";var X="progress";var _=".";var A=".kendoTreeList";var u="click";var Z="input";var J="beforeEdit";var ee="edit";var te="page";var ie="pageChange";var ne="save";var re="saveChanges";var ae="sort";var oe="expand";var se="collapse";var le="cellClose";var de="remove";var f="td:not(.k-group-cell):not(.k-hierarchy-cell):visible";var ue="dataBinding";var ce="dataBound";var fe="cancel";var he="tabIndex";var pe="filterMenuInit";var ve="filterMenuOpen";var me="columnHide";var ge="columnShow";var _e="th.k-header";var be="columnReorder";var we="columnResize";var t="columnMenuInit";var ke="columnMenuOpen";var ye="columnLock";var xe="columnUnlock";var r="parentId";var Ce="dragstart";var Se="drag";var Te="drop";var De="dragend";var Ae="tr:visible";var b="td:visible";var Ee="th:visible";var Ie="k-grid-norecords";var Me="tr:not(.k-footer-template):visible";var Re=Ae+" > td:first:visible";var Fe=Me+":last";var E=false;var Pe="height";var ze="incell";var Be="inline";var Le="popup";var He="table";var Ne="k-checkbox";var c="input[data-role='checkbox']."+Ne;var Oe='<input class="'+Ne+'" data-role="checkbox" aria-label="Select row" aria-checked="false" type="checkbox">';var Ve='<input class="'+Ne+'" data-role="checkbox" aria-label="Select all rows" aria-checked="false" type="checkbox">';var We="k-state-selected";var I={wrapper:"k-treelist k-grid k-widget k-widget-2021 k-grid-display-block",header:"k-header",button:"k-button",alt:"k-alt",editCell:"k-edit-cell",editRow:"k-grid-edit-row",dirtyCell:"k-dirty-cell",group:"k-treelist-group",toolbar:"k-toolbar",gridToolbar:"k-grid-toolbar",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",gridContentWrap:"k-grid-content",gridFilter:"k-grid-filter",footerTemplate:"k-footer-template",focused:"k-state-focused",loading:"k-i-loading",refresh:"k-i-reload",retry:"k-request-retry",selected:"k-state-selected",status:"k-status",link:"k-link",withIcon:"k-with-icon",filterable:"k-filterable",icon:"k-icon",iconFilter:"k-i-filter",iconCollapse:"k-i-collapse",iconExpand:"k-i-expand",iconHidden:"k-i-none",iconPlaceHolder:"k-icon k-i-none",input:"k-input",dropPositions:"k-i-insert-up k-i-insert-down k-i-plus k-i-insert-middle",dropTop:"k-i-insert-up",dropBottom:"k-i-insert-down",dropAdd:"k-i-plus",dropMiddle:"k-i-insert-middle",dropDenied:"k-i-cancel",dragStatus:"k-drag-status",dragClue:"k-drag-clue",dragClueText:"k-clue-text"};var Ue={create:{imageClass:"k-i-plus",className:"k-grid-add",methodName:"addRow"},createchild:{imageClass:"k-i-plus",className:"k-grid-add",methodName:"addRow"},destroy:{imageClass:"k-i-close",className:"k-grid-delete",methodName:"removeRow"},edit:{imageClass:"k-i-edit",className:"k-grid-edit",methodName:"editRow"},update:{imageClass:"k-i-check",className:"k-primary k-grid-update",methodName:"saveRow"},canceledit:{imageClass:"k-i-cancel",className:"k-grid-cancel",methodName:"_cancelEdit"},cancel:{imageClass:"k-icon k-i-cancel",text:"Cancel changes",className:"k-grid-cancel-changes",methodName:"cancelChanges"},save:{imageClass:"k-icon k-i-check",text:"Save changes",className:"k-grid-save-changes",methodName:"saveChanges"},excel:{imageClass:"k-i-file-excel",className:"k-grid-excel",methodName:"saveAsExcel"},pdf:{imageClass:"k-i-file-pdf",className:"k-grid-pdf",methodName:"saveAsPDF"},search:{template:"<span class='k-textbox k-grid-search k-display-flex'>"+"<input autocomplete='off' placeholder='"+"#= message #"+"' title='"+"#= message #"+"' class='k-input' />"+"<span class='k-input-icon'><span class='k-icon k-i-search'></span></span>"+"</span>"}};var je=kendo.Class.extend({init:function(e,t){var i=this;i.data=e||[];i.options=g(i.options,t)},options:{defaultParentId:null,idField:"id",parentIdField:r},childrenMap:function(){var e=this;var t={};var i=e.data.length;var n;var r;var a;var o=e.options.idField;var s=e.options.parentIdField;if(e._childrenMap){return e._childrenMap}for(var l=0;l<i;l++){n=this.data[l];r=n[o];a=n[s];t[r]=t[r]||[];t[a]=t[a]||[];t[a].push(n)}e._childrenMap=t;return t},idsMap:function(){var e=this;var t={};var i=e.data;var n=i.length;var r;var a=e.options.idField;if(e._idMap){return e._idMap}for(var o=0;o<n;o++){r=i[o];t[r[a]]=r}e.idsMap=t;return t},dataMaps:function(){var e=this;var t={};var i=e.data;var n=i.length;var r={};var a;var o;var s;var l=e.options.idField;var d=e.options.parentIdField;if(e._dataMaps){return e._dataMaps}for(var u=0;u<n;u++){a=i[u];o=a[l];s=a[d];r[o]=a;t[o]=t[o]||[];t[s]=t[s]||[];t[s].push(a)}e._dataMaps={children:t,ids:r};return e._dataMaps},rootNodes:function(){var e=this;var t=e.data;var i=e.options.defaultParentId;var n=t.length;var r=[];var a;var o=e.options.parentIdField;for(var s=0;s<n;s++){a=t[s];if(a[o]===i){r.push(a)}}return r},removeCollapsedSubtreesFromRootNodes:function(e){e=e||{};var t=this;var i=t.rootNodes();var n=[];var r;t._childrenMap=e.childrenMap=e.childrenMap||t.childrenMap();e.maxDepth=e.maxDepth||Infinity;for(var a=0;a<i.length;a++){r=t.removeCollapsedSubtrees(i[a],e);n=n.concat(r)}return n},removeCollapsedSubtrees:function(e,t){t=t||{};var i=this;var n=[];var r;var a;var o=t.childrenMap||{};var s=t.maxDepth||Infinity;var l=i.options.idField;var d=o[e[l]]||[];var u=L(e.expanded)?t.expanded:e.expanded;n.push(e);if(d&&u){for(r=0;r<d.length;r++){if(n.length>=s){break}a=i.removeCollapsedSubtrees(d[r],t);n=n.concat(a)}}return n}});var w=function(e){this.data=e||[]};w.prototype=new m;w.prototype.constructor=w;w.process=function(e,t,i){t=t||{};var n=new w(e);var r=t.group;var a=m.normalizeGroup(r||[]).concat(m.normalizeSort(t.sort||[]));var o=t.filterCallback;var s=t.filter;var l=t.skip;var d=t.take;var u;var c;var f;var h;var p;if(a&&i){n=n.sort(a,v,v,i)}if(s){n=n.filter(s);if(o){n=o(n)}u=n.toArray().length}if(a&&!i){n=n.sort(a);if(r){e=n.toArray()}}if(t.processFromRootNodes){h=new je(n.toArray(),t);if(s){f=h.childrenMap()}p=h.removeCollapsedSubtreesFromRootNodes({childrenMap:s||a&&a.length?v:t.childrenMap,expanded:t.expanded,maxDepth:l+d||Infinity});c=h.childrenMap();n=new w(p)}if(l!==v&&d!==v){n=n.range(l,d)}if(r){n=n.group(r,e)}return{total:u,data:n.toArray(),childrenMap:c,filteredChildrenMap:f}};var M=s.define({id:"id",parentId:r,fields:{id:{type:"number"},parentId:{type:"number",nullable:true}},init:function(e){s.fn.init.call(this,e);this._loaded=false;if(!this.parentIdField){this.parentIdField=r}this.parentId=this.get(this.parentIdField)},accept:function(e){s.fn.accept.call(this,e);this.parentId=this.get(this.parentIdField)},set:function(e,t,i){if(e==r&&this.parentIdField!=r){this[this.parentIdField]=t}s.fn.set.call(this,e,t,i);if(e==this.parentIdField){this.parentId=this.get(this.parentIdField)}},loaded:function(e){if(e!==v){this._loaded=e}else{return this._loaded}},shouldSerialize:function(e){return s.fn.shouldSerialize.call(this,e)&&e!=="_loaded"&&e!="_error"&&e!="_edit"&&!(this.parentIdField!=="parentId"&&e==="parentId")}});M.parentIdField=r;M.define=function(e,t){if(t===v){t=e;e=M}var i=t.parentId||r;t.parentIdField=i;var n=s.define(e,t);if(i){n.parentIdField=i}return n};function i(t){return function(e){return e[t]}}function Ge(t){return function(e){return!t(e)}}var qe=o.extend({init:function(e){e=e||{};var t=this;t._dataMaps=t._getDataMaps();e.schema=g(true,{},{modelBase:M,model:M},e.schema);o.fn.init.call(this,e)},_addRange:function(){},_createNewModel:function(e){var t=this;var i={};var n=e instanceof s;var r=this._modelParentIdField();if(n){i=e}i=o.fn._createNewModel.call(this,i);if(!n){if(e.parentId){e[i.parentIdField]=e.parentId}else if(t._isPageable()&&e[r]){e[i.parentIdField]=e[r]}i.accept(e)}return i},_shouldWrap:function(){return true},_push:function(e,t){var i=o.fn._readData.call(this,e);if(!i){i=e}this[t](i)},_getData:function(){return this._data||[]},_readData:function(e){var t=this;var i=t._isPageable()?t._getData().toJSON():t.data();e=o.fn._readData.call(this,e);this._replaceData((i.toJSON?i.toJSON():i).concat(e),i);if(e instanceof O){return e}return i},_replaceData:function(e,t){var i=e.length;for(var n=0;n<i;n++){t[n]=e[n]}t.length=i},_readAggregates:function(e){var t=g(this._aggregateResult,this.reader.aggregates(e));if(""in t){t[this._defaultParentId()]=t[""];delete t[""]}return t},read:function(e){var t=this;if(t._isPageable()){t._dataMaps={};if(!t._modelOptions().expanded){t._skip=0;t._page=1;t._collapsedTotal=v}}return o.fn.read.call(t,e)},remove:function(e){this._removeChildData(e);this._removeFromDataMaps(e);return o.fn.remove.call(this,e)},_removeChildData:function(e,t){var i=this;var n=i._isPageable();var r=n?this._getData():this.data();var a=n?i._getChildrenMap()||i.childrenMap(r):i._childrenMap(r);var o=this._subtree(a,e.id);var s=L(t)?false:t;var l=this._removeItems(o,s);i._removeFromDataMaps(l)},pushDestroy:function(e){var t=this;if(!j(e)){e=[e]}for(var i=0;i<e.length;i++){t._removeChildData(e[i],true);t._removeFromDataMaps(e[i])}o.fn.pushDestroy.call(t,e)},insert:function(e,t){var i=this;var n=i._createNewModel(t);i._insertInDataMaps(n);return o.fn.insert.call(i,e,n)},_filterCallback:function(e){var t=this;var i,n;var r={};var a=[];var o=e.toArray();var s=t._modelIdField();var l=t._modelParentIdField();var d=t._isPageable();var u=[];var c;for(i=0;i<o.length;i++){n=o[i];if(d){u=[];if(!r[n[s]]){r[n[s]]=true;u.push(n)}c=t._parentNode(n);while(c){if(!r[c[s]]){r[c[s]]=true;u.unshift(c);c=t._parentNode(c)}else{break}}if(u.length){a=a.concat(u)}}else{while(n){if(!r[n[s]]){r[n[s]]=true;a.push(n)}if(!r[n[l]]){r[n[l]]=true;n=this.parentNode(n);if(n){a.push(n)}}else{break}}}}return new m(a)},_subtree:function(e,t){var i=this;var n=e[t]||[];var r=i._defaultParentId();var a=i._modelIdField();for(var o=0,s=n.length;o<s;o++){if(n[o][a]!==r){n=n.concat(i._subtree(e,n[o][a]))}}return n},_childrenMap:function(e){var t={};var i,n,r,a;e=this._observeView(e);for(i=0;i<e.length;i++){n=e[i];r=n.id;a=n.parentId;t[r]=t[r]||[];t[a]=t[a]||[];t[a].push(n)}return t},childrenMap:function(e){var t=this._createTreeView(e);var i=t.childrenMap();return i},_getChildrenMap:function(){var e=this;var t=e._getDataMaps();return t.children},_initIdsMap:function(e){var t=this;var i=t._getDataMaps();if(L(i.ids)){i.ids=t._idsMap(e)}return i.ids},_idsMap:function(e){var t=this._createTreeView(e);var i=t.idsMap();return i},_getIdsMap:function(){var e=this;var t=e._getDataMaps();return t.ids||{}},_getFilteredChildrenMap:function(){var e=this;var t=e._getDataMaps();return t.filteredChildren},_setFilteredChildrenMap:function(e){var t=this;var i=t._getDataMaps();i.filteredChildren=e},_initDataMaps:function(e){var t=this;var i=t._createTreeView(e);t._dataMaps=i.dataMaps();return t._dataMaps},_initChildrenMapForParent:function(e){var t=this;var i=t._getData();var n=t._getChildrenMap();var r=t._modelIdField();var a=t._modelParentIdField();var o=(e||{})[r];if(n&&e){n[o]=[];for(var s=0;s<i.length;s++){if(i[s][a]===o){n[o].push(i[s])}}}},_getDataMaps:function(){var e=this;e._dataMaps=e._dataMaps||{};return e._dataMaps},_createTreeView:function(e,t){var i=new je(e,g(t,this._defaultTreeModelOptions()));return i},_defaultTreeModelOptions:function(){var e=this;var t=e._modelOptions();return{defaultParentId:e._defaultParentId(),idField:e._modelIdField(),parentIdField:e._modelParentIdField(),expanded:t.expanded}},_defaultDataItemType:function(){return this.reader.model||kendo.data.ObservableObject},_calculateAggregates:function(e,t){t=t||{};var i=this;var n={};var r,a,o;var s=t.filter;var l=t.skip;var d=t.take;var u=!L(l)&&!L(d)?l+d:Infinity;var c=i._isPageable();var f=t.filteredChildrenMap;var h=t.childrenMap;var p;if(c){if(L(t.aggregate)){return n}if(f){p=f}else if(h){p=h}else{p=i.childrenMap(i._getData())}}if(!c&&s){e=m.process(e,{filter:s,filterCallback:k(this._filterCallback,this)}).data}var v=c?p:i._childrenMap(e);n[this._defaultParentId()]=new m(this._subtree(v,this._defaultParentId())).aggregate(t.aggregate);for(o=0;o<e.length;o++){if(o>=u){break}r=e[o];a=this._subtree(v,r.id);n[r.id]=new m(a).aggregate(t.aggregate)}return n},_queryProcess:function(e,t){var i=this;var n={};t=t||{};t.filterCallback=k(this._filterCallback,this);if(i._isPageable()){return i._processPageableQuery(e,t)}else{var r=this._defaultParentId();n=m.process(e,t);var a=this._childrenMap(n.data);var o,s,l,d;e=a[r]||[];for(s=0;s<e.length;s++){l=e[s];if(l.id===r){continue}d=a[l.id];o=!!(d&&d.length);if(!l.loaded()){l.loaded(o||!l.hasChildren)}if(l.loaded()||l.hasChildren!==true){l.hasChildren=o}if(o){e=e.slice(0,s+1).concat(d,e.slice(s+1))}}n.data=e}return n},_processPageableQuery:function(e,t){var i=this;var n=i._getDataMaps();var r;var a;if(i._getData()!==e||!n.children||!n.ids){n=i._initDataMaps(i._getData())}t.childrenMap=n.children||{};t.idsMap=n.ids||{};r=i._processTreeQuery(e,t);i._replaceWithObservedData(r.data,e);i._processDataItemsState(r.data,r.childrenMap);i._replaceItemsInDataMaps(r.data);r.dataToAggregate=i._dataToAggregate(r.data,t);if(t.filter||i.filter()){a=r.filteredChildrenMap;i._replaceInMapWithObservedData(a,e);i._setFilteredChildrenMap(a);t.filteredChildrenMap=a;i._calculateCollapsedTotal(r.data)}return r},_dataToAggregate:function(e){var t=this;var i=e[0]||{};var n=t._parentNodes(i);var r=n.concat(e);return r},_replaceItemsInDataMaps:function(e){var t=this;var i=j(e)?e:[e];var n=t._defaultDataItemType();var r=t._defaultParentId();var a=t._modelIdField();var o=t._modelParentIdField();var s=t._getDataMaps();var l;var d;var u;for(var c=0;c<i.length;c++){l=i[c];if(!(l instanceof n)){continue}t._insertInIdsMap(l);d=t._parentNodes(l);u=d&&d.length?d[d.length-1]:v;if(l[o]===r){t._replaceInMap(s.children,r,l,n)}else if(u){t._replaceInMap(s.children,u[a],l,n)}}},_replaceInMap:function(e,t,i,n){var r=this._modelIdField();e[t]=e[t]||[];n=n||this._defaultDataItemType();var a=e[t].filter(function(e){return i[r]===e[r]})[0];var o=a?e[t].indexOf(a):-1;if(o!==-1&&!(a instanceof n)){e[t][o]=i}},_replaceWithObservedData:function(e,t){var i=this;var n=i._getDataMaps().ids||{};var r=i._modelIdField();var a=i._defaultDataItemType();var o;var s;var l;var d;var u;for(var c=0;c<e.length;c++){o=e[c];s=o[r];if(!(o instanceof a)){if(!(n[s]instanceof a)){l=i._getById(s);d=t.indexOf(l);if(l&&d!==-1){u=t.at(d);e[c]=u}}else{e[c]=n[s]}}}},_replaceInMapWithObservedData:function(e,t){var i=this;for(var n in e){i._replaceWithObservedData(e[n],t)}},_insertInDataMaps:function(e){var t=this;if(t._isPageable()){t._insertInIdsMap(e);t._insertInChildrenMap(e)}},_insertInIdsMap:function(e){var t=this;var i=t._getIdsMap();var n=t._modelIdField();if(!L(e[n])){i[e[n]]=e}},_insertInChildrenMap:function(e,t){var i=this;var n=i._getChildrenMap()||{};var r=i._modelIdField();var a=i._modelParentIdField();var o=e[r];var s=e[a];t=t||0;n[o]=n[o]||[];n[s]=n[s]||[];n[s].splice(t,0,e)},_removeFromDataMaps:function(e){var t=this;e=j(e)?e:[e];if(t._isPageable()){for(var i=0;i<e.length;i++){t._removeFromIdsMap(e[i]);t._removeFromChildrenMap(e[i])}}},_removeFromIdsMap:function(e){var t=this;var i=t._getIdsMap();var n=t._modelIdField();if(!L(e[n])){i[e[n]]=v}},_removeFromChildrenMap:function(e){var t=this;var i=t._getChildrenMap()||{};var n=t._modelParentIdField();var r=e[n];i[r]=i[r]||[];var a=t._indexInChildrenMap(e);if(a!==-1){i[r].splice(a,1)}},_indexInChildrenMap:function(e){var t=this;return t._itemIndexInMap(e,t._getChildrenMap())},_itemIndexInMap:function(t,e){var i=this;var n=e||{};var r=i._modelParentIdField();var a=t[r];n[a]=n[a]||[];var o=n[a].filter(function(e){return t.uid===e.uid})[0];var s=o?n[a].indexOf(o):-1;return s},_getById:function(e){var t=this;var i=t._modelIdField();var n=t._getData();for(var r=0;r<n.length;r++){if(n[r][i]===e){return n[r]}}},_isLastItemInView:function(e){var t=this.view();return t.length&&t[t.length-1]===e},_defaultPageableQueryOptions:function(){var e=this;var t=e._getDataMaps();var i={skip:e.skip(),take:e.take(),page:e.page(),pageSize:e.pageSize(),sort:e.sort(),filter:e.filter(),group:e.group(),aggregate:e.aggregate(),filterCallback:k(e._filterCallback,e),childrenMap:t.children,idsMap:t.ids};return i},_isPageable:function(){var e=this.pageSize();return!L(e)&&e>0&&!this.options.serverPaging},_updateTotalForAction:function(e,t){var i=this;o.fn._updateTotalForAction.call(i,e,t);if(i._isPageable()){i._updateCollapsedTotalForAction(e,t)}},_updateCollapsedTotalForAction:function(e,t){var i=this;var n=parseInt(i._collapsedTotal,10);if(!Dt(i._collapsedTotal)){i._calculateCollapsedTotal();return}if(e==="add"){n+=t.length}else if(e==="remove"){n-=t.length}else if(e!=="itemchange"&&e!=="sync"&&!i.options.serverPaging){n=i._calculateCollapsedTotal()}else if(e==="sync"){n=i._calculateCollapsedTotal()}i._collapsedTotal=n},_setFilterTotal:function(e,t){var i=this;o.fn._setFilterTotal.call(i,e,t)},collapsedTotal:function(){var e=this;if(!L(e._collapsedTotal)){return e._collapsedTotal}return e._calculateCollapsedTotal()},_calculateCollapsedTotal:function(e){var t=this;var i=t._dataWithoutCollapsedSubtrees(e);if(i.length){t._collapsedTotal=i.length}return t._collapsedTotal},_dataWithoutCollapsedSubtrees:function(e){return this._removeCollapsedSubtrees(e||this._getData())},_removeCollapsedSubtrees:function(e){var t=this;var i=t._createTreeView(e);var n=i.removeCollapsedSubtreesFromRootNodes({expanded:t._modelOptions().expanded,childrenMap:t.filter()?t._getFilteredChildrenMap():t._getChildrenMap()});return n},_processTreeQuery:function(e,t){var i=w.process(e,g(t,this._defaultTreeModelOptions(),{processFromRootNodes:true}));return i},_processDataItemsState:function(e,t){var i=e.length;var n;for(n=0;n<i;n++){this._processDataItemState(e[n],t)}},_processDataItemState:function(e,t){var i=this._defaultParentId();if(e.id===i){return}var n=t[e.id]||[];var r=!!(n&&n.length);if(!e.loaded){return}if(!e.loaded()){e.loaded(r||!e.hasChildren)}if(e.loaded()||e.hasChildren!==true){e.hasChildren=r}},_queueRequest:function(e,t){t.call(this)},_modelLoaded:function(e){var t=this.get(e);t.loaded(true);t.hasChildren=this.childNodes(t).length>0},_modelError:function(e,t){this.get(e)._error=t},success:function(e,t){if(!t||typeof t.id=="undefined"){this._data=this._observe([])}o.fn.success.call(this,e,t);this._total=this._data.length},load:function(e){var t="_query";var i=this.options.serverSorting||this.options.serverPaging||this.options.serverFiltering||this.options.serverGrouping||this.options.serverAggregates;var n=y.Deferred().resolve().promise();if(e.loaded()){if(i){return n}}else if(e.hasChildren){t="read";this._removeChildData(e)}return this[t]({id:e.id}).done(k(this._modelLoaded,this,e.id)).fail(k(this._modelError,this,e.id))},contains:function(e,t){var i=this;var n=i._modelIdField();var r=i._modelParentIdField();var a=e[n];var o=i._isPageable();while(t){if(t[r]===a){return true}t=o?i._parentNode(t):i.parentNode(t)}return false},_byParentId:function(e,t){var i=[];var n=this.view();var r;if(e===t){return[]}for(var a=0;a<n.length;a++){r=n.at(a);if(r.parentId==e){i.push(r)}}return i},_defaultParentId:function(){return this.reader.model.fn.defaults[this.reader.model.parentIdField]},_modelOptions:function(){var e=(this.options.schema||{}).model||{};return e},_modelIdField:function(){var e=this._modelOptions();return e.id||"id"},_modelParentIdField:function(){var e=this._modelOptions();return e.parentId||r},childNodes:function(e){return this._byParentId(e.id,this._defaultParentId())},allChildNodes:function(t,e){var i=this.data().filter(function(e){return e.parentId===t.id});for(var n=0;n<i.length;n++){e.push(i[n]);this.allChildNodes(i[n],e)}},rootNodes:function(){return this._byParentId(this._defaultParentId())},_rootNode:function(e){return this._parentNodes(e)[0]},_pageableRootNodes:function(e){e=e||{};var t=this;var i=t._defaultParentId();var n=t._modelParentIdField();var r=[];var a=t._nodesWithoutParentInView(e);var o;var s;for(var l=0;l<a.length;l++){o=a[l];if(o[n]===i){r.push(o)}else{s=t._rootNode(o);if(s&&r.indexOf(s)===-1){r.push(s)}}}return r},parentNode:function(e){return this.get(e.parentId)},_parentNode:function(e){var t=this;var i=t._modelParentIdField();var n=t._initIdsMap(t._getData());var r=e[i];var a=n[r]||t._getById(r);return a},_parentNodes:function(e){var t=this;var i=t._parentNode(e);var n=[];while(i){n.unshift(i);i=t._parentNode(i)}return n},_parentNodesNotInView:function(){var e=this;var t=e.view();var i=[];var n=e._defaultParentId();var r=e._modelIdField();var a=e._modelParentIdField();var o;var s=[];var l;var d;var u;var c;for(var f=0;f<t.length;f++){d=t[f];u=d[r];c=d[a];o=e._parentInView(c);if(!o&&c!==n){s=e._parentNodes(d);l=s&&s.length?s[s.length-1]:e._getById(c);if(l&&i.indexOf(l)===-1){i.push(l)}}}return i},_nodesWithoutParentInView:function(e){e=e||{};var t=this;var i=t.view();var n=e.childrenMap||t.childrenMap(t._getData());var r=t._modelIdField();var a=t._modelParentIdField();var o;var s;var l=[];var d=[];for(var u=0;u<i.length;u++){o=i[u];l=n[o[r]];s=t._parentInView(o[a]);if(!s){d.push(o)}}return d},_parentInView:function(e){var t=this.view();for(var i=0;i<t.length;i++){if(t[i].id===e){return t[i]}}},level:function(e){var t=-1;if(!(e instanceof M)){e=this.get(e)}do{e=this.parentNode(e);t++}while(e);return t},_pageableModelLevel:function(e){var t=this;if(!e||!t._isPageable()){return 0}var i=t._parentNodes(e);return i.length},filter:function(e){var t=o.fn.filter;if(e===v){return t.call(this,e)}t.call(this,e)},_pageableQueryOptions:function(e){var t=this._getDataMaps();e.childrenMap=t.children;e.idsMap=t.ids;return e},_flatData:function(e,t){t=this._isPageable()?true:t;return o.fn._flatData.call(this,e,t)},data:function(e){var t=this;var i=o.fn.data.call(t,e);if(t._isPageable()){t._initDataMaps(t._getData());t._calculateCollapsedTotal()}return i},cancelChanges:function(e){var t=this;o.fn.cancelChanges.call(t,e);t._restorePageSizeAfterAddChild()},_modelCanceled:function(e){var t=this;if(t._isPageable()){t._removeFromDataMaps(e)}},_changesCanceled:function(){var e=this;if(e._isPageable()){e._initDataMaps(e._getData())}},_setAddChildPageSize:function(){var e=this;var t={};if(e._isPageable()){e._addChildPageSize=e.pageSize()+1;t=e._defaultPageableQueryOptions();t.take=e._addChildPageSize;t.pageSize=e._addChildPageSize;e._query(t)}},_restorePageSizeAfterAddChild:function(){var e=this;var t={};if(e._isPageable()){if(!L(e._addChildPageSize)){t=e._defaultPageableQueryOptions();t.take=e._addChildPageSize-1;t.pageSize=e._addChildPageSize-1;e._query(t)}}e._addChildPageSize=v},sync:function(){var e=this;return o.fn.sync.call(e).then(function(){e._restorePageSizeAfterAddChild()})},_syncEnd:function(){var e=this;if(e._isPageable()){e._initDataMaps(e._getData())}}});qe.create=function(e){if(y.isArray(e)){e={data:e}}else if(e instanceof O){e={data:e.toJSON()}}return e instanceof qe?e:new qe(e)};function $e(){return this.style.display!=="none"}function Ke(e){var r=kendo.attr("index");return e.sort(function(e,t){e=y(e);t=y(t);var i=e.attr(r);var n=t.attr(r);if(i===v){i=y(e).index()}if(n===v){n=y(t).index()}i=parseInt(i,10);n=parseInt(n,10);return i>n?1:i<n?-1:0})}function R(e){var t=e.find(">tr:not(.k-filter-row)");var i=function(){var e=y(this);return!e.hasClass("k-group-cell")&&!e.hasClass("k-hierarchy-cell")};var n=y();if(t.length>1){n=t.find("th[data-index]").filter(i)}n=n.add(t.last().find("th").filter(i));return Ke(n)}function Ye(e){var t=[];var i=e.className;for(var n=0,r=e.level;n<r;n++){t.push(p("span",{className:i}))}return t}function Qe(e){var t,i=0;for(var n=0,r=e.length;n<r;n++){t=e[n].style.width;if(t&&t.indexOf("%")==-1){i+=parseInt(t,10)}}return i}function Xe(e,t){e=e[0];t=t[0];if(e.rows.length&&t.rows.length&&e.rows.length!==t.rows.length){var i=e.offsetHeight;var n=t.offsetHeight;var r;var a;if(i>n){r=t.rows[t.rows.length-1];a=i-n}else{r=e.rows[e.rows.length-1];a=n-i}r.style.height=r.offsetHeight+a+"px"}}var Ze=a.Pager.extend({options:{name:"TreeListPager"},totalPages:function(){var e=this;var t=e.dataSource;if(t&&t._filter){return a.Pager.fn.totalPages.call(e)}return Math.ceil((e._collapsedTotal()||0)/(e.pageSize()||1))},_createDataSource:function(e){this.dataSource=kendo.data.TreeListDataSource.create(e.dataSource)},_collapsedTotal:function(){var e=this.dataSource;return e?e.collapsedTotal()||0:0}});var Je=kendo.Observable.extend({init:function(e,t){kendo.Observable.fn.init.call(this);t=this.options=g(true,{},this.options,t);this.element=e;this.bind(this.events,t);this.model=this.options.model;this.fields=this._fields(this.options.columns);this._initContainer();this.createEditable()},events:[],_initContainer:function(){this.wrapper=this.element},createEditable:function(){var e=this.options;this.editable=new a.Editable(this.wrapper,{fields:this.fields,target:e.target,clearContainer:e.clearContainer,model:this.model,change:e.change})},_isEditable:function(e){return St(e,this.model)},_fields:function(e){var t=[];var i,n,r;for(i=0,n=e.length;i<n;i++){r=e[i];if(this._isEditable(r)){t.push({field:r.field,format:r.format,editor:r.editor})}}return t},end:function(){return this.editable.end()},close:function(){this.destroy()},destroy:function(){this.editable.destroy();this.editable.element.find("["+kendo.attr("container-for")+"]").empty().end().removeAttr(kendo.attr("role"));this.model=this.wrapper=this.element=this.columns=this.editable=null}});var et=Je.extend({init:function(e,t){Je.fn.init.call(this,e,t);this._attachHandlers();kendo.cycleForm(this.wrapper);this.open()},events:[fe,ne],options:{window:{modal:true,resizable:false,draggable:true,title:"Edit",visible:false}},_initContainer:function(){var e=this.options;var t=[];this.wrapper=y('<div class="k-popup-edit-form"/>').attr(kendo.attr("uid"),this.model.uid).append('<div class="k-edit-form-container"/>');if(e.template){this._appendTemplate(t);this.fields=[]}else{this._appendFields(t)}this._appendButtons(t);new n.Tree(this.wrapper.children()[0]).render(t);this.wrapper.appendTo(e.appendTo);this.window=new a.Window(this.wrapper,e.window)},_appendTemplate:function(e){var t=this.options.template;if(typeof t===K){t=kendo.unescape(t)}t=kendo.template(t)(this.model);e.push(h(t))},_appendFields:function(e){var t,i,n;var r=this.options.columns;for(t=0,i=r.length;t<i;t++){n=r[t];if(n.selectable){continue}if(n.command){continue}e.push(h('<div class="k-edit-label"><label for="'+n.field+'">'+(n.title||n.field||"")+"</label></div>"));if(this._isEditable(n)){e.push(h("<div "+kendo.attr("container-for")+'="'+n.field+'" class="k-edit-field"></div>'))}else{e.push(p("div",{class:"k-edit-field"},[this.options.fieldRenderer(n,this.model)]))}}},_appendButtons:function(e){e.push(p("div",{class:"k-edit-buttons k-state-default"},this.options.commandRenderer()))},_attachHandlers:function(){var t=this._cancelProxy=k(this._cancel,this);this.wrapper.on(u+A,".k-grid-cancel",this._cancelProxy);this._saveProxy=k(this._save,this);this.wrapper.on(u+A,".k-grid-update",this._saveProxy);this.window.bind("close",function(e){if(e.userTriggered){t(e)}})},_detachHandlers:function(){this._cancelProxy=null;this._saveProxy=null;this.wrapper.off(A)},_cancel:function(e){this.trigger(fe,e)},_save:function(){this.trigger(ne)},open:function(){this.window.center().open()},close:function(){this.window.bind("deactivate",k(this.destroy,this)).close()},destroy:function(){this.window.destroy();this.window=null;this._detachHandlers();Je.fn.destroy.call(this)}});var tt=Je.extend({destroy:function(){var e=this;e.editable.destroy();e.editable.element.off().empty().removeAttr(kendo.attr("role"));e.model=e.wrapper=e.element=e.columns=e.editable=null}});var it=N.extend({init:function(e,t,i){N.fn.init.call(this,e,t);if(i){this._events=i}E=kendo.support.isRtl(e);this._dataSource(this.options.dataSource);this._aria();this._columns();this._layout();this._navigatable();this._selectable();this._sortable();this._resizable();this._filterable();this._attachEvents();this._toolbar();this._scrollable();this._reorderable();this._columnMenu();this._minScreenSupport();this._draggable();this._pageable();if(this.options.autoBind){this.dataSource.fetch()}if(this._hasLockedColumns){var n=this;this.wrapper.addClass("k-grid-lockedcolumns");this._resizeHandler=function(){n.resize()};y(window).on("resize"+A,this._resizeHandler)}kendo.notify(this)},_draggable:function(){var s=this;var e=this.options.editable;var l=s.dataSource;var d=l._modelIdField();var u=l._modelParentIdField();var c=s._isPageable();var t;if(!e||!e.move){return}t=e.move.reorderable;this._dragging=new kendo.ui.HierarchicalDragAndDrop(this.wrapper,{$angular:this.$angular,autoScroll:true,holdToDrag:U,filter:"tbody>tr",itemSelector:"tr",allowedContainers:this.wrapper,hintText:function(e){var t=function(){return y(this).text()};var i="<span class='k-header k-drag-separator'></span>";return e.children("td").map(t).toArray().join(i)},contains:k(function(e,t){var i=this.dataItem(t);var n=this.dataItem(e);return n==i||this.dataSource.contains(n,i)},this),itemFromTarget:function(e){var t=e.closest("tr");var i=t.prev();var n=t.next();var r;var a;if(i){r=!s.sameLevel(i,t)}if(n){a=!s.sameLevel(n,t)}return{item:t,content:t,first:r,last:a}},dragstart:k(function(e){this.wrapper.addClass("k-treelist-dragging");if(this.wrapper.find(".k-grid-content").length){this.wrapper.find(".k-grid-content table, .k-grid-content-locked table").css("position","relative")}var t=this.dataItem(e);return this.trigger(Ce,{source:t})},this),drag:k(function(e){e.source=this.dataItem(e.source);this.trigger(Se,e)},this),drop:k(function(e){e.source=this.dataItem(e.source);e.destination=this.dataItem(e.destination);this.wrapper.removeClass("k-treelist-dragging");if(this.wrapper.find(".k-grid-content").length){this.wrapper.find(".k-grid-content table, .k-grid-content-locked table").css("position","static")}return this.trigger(Te,e)},this),dragend:k(function(e){var t=this.dataItem(e.destination);var i=this.dataItem(e.source);var n=i[u];var r=l._indexInChildrenMap(i);var a=e.position;if(a=="over"){if(c){l._removeFromChildrenMap(i);i[u]=t?t[d]:null;l._initChildrenMapForParent(t);i[u]=n}var o=i.set("parentId",t?t.id:null);if(c&&o){l._removeFromChildrenMap(i);i[u]=n;l._removeFromChildrenMap(i);l._insertInChildrenMap(i,r)}}else{if(a=="before"){s.insertBefore(i,t)}else if(a=="after"){s.insertAfter(i,t)}}e.source=i;e.destination=t;this.trigger(De,e)},this),reorderable:t,dropHintContainer:function(e){return e.children("td:visible:eq(0)")},dropPositionFrom:function(e){var t;var i;var n;var r;var a=false;if(e.parent().find(".k-i-none").length){return e.prevAll(".k-i-none").length>0?"after":"before"}else{t=e.parent().contents();i=t.length;r=e[0];for(n=0;n<i;n++){if(t[n]===r){break}if(t[n].nodeType===3){a=true}}return a?"after":"before"}}})},sameLevel:function(){return arguments[0].find("."+I.iconHidden).length===arguments[1].find("."+I.iconHidden).length},insertAfter:function(e,t){this.insertAction(e,t,1)},insertBefore:function(e,t){this.insertAction(e,t,0)},insertAction:function(e,t,i){var n=this;var r=n.dataSource;var a=r._modelParentIdField();var o;var s=r.indexOf(e);var l=n._isPageable();var d=r._indexInChildrenMap(t);var u;var c=r._getChildrenMap()||{};var f=e[a];n._unbindDataSource();n._unbindDataChange();if(l){r._removeFromChildrenMap(e)}if(e[a]!=t[a]){e.set("parentId",t&&t.parentId?t.parentId:null)}r._data.splice(s,1);o=r.indexOf(t);u=o+i;if(l){d+=i;if(c[f].length<=d){d=c[f].length}r._insertInChildrenMap(e,d)}r._data.splice(u,0,e);r._destroyed.pop();n._bindDataChange();n._bindDataSource();n.refresh()},_bindDataChange:function(){var e=this.dataSource;if(e._data&&e._changeHandler){e._data.bind(d,e._changeHandler);e._data.trigger(d)}},_unbindDataChange:function(){var e=this.dataSource;if(e._data&&e._changeHandler){e._data.unbind(d,e._changeHandler)}},_bindDataSource:function(){var e=this;var t=e.dataSource;if(t){t.bind(d,e._refreshHandler)}},_unbindDataSource:function(){var e=this;var t=e.dataSource;if(t){t.unbind(d,e._refreshHandler)}},itemFor:function(e){if(typeof e=="number"){e=this.dataSource.get(e)}return this.tbody.find("["+kendo.attr("uid")+"="+e.uid+"]")},_itemFor:function(e){var t=this;var i=t.lockedContent?t.lockedTable:t.table;if(typeof e=="number"){e=this.dataSource.get(e)}return i.find("["+kendo.attr("uid")+"="+e.uid+"]")},_scrollable:function(){if(this.options.scrollable){var t=this.thead.closest(".k-grid-header-wrap");var i=y(this.lockedContent).bind("DOMMouseScroll"+A+" mousewheel"+A,k(this._wheelScroll,this));this.content.bind("scroll"+A,function(){kendo.scrollLeft(t,this.scrollLeft);i.scrollTop(this.scrollTop)});var e=kendo.touchScroller(this.content);if(e&&e.movable){this._touchScroller=e;e.movable.bind("change",function(e){kendo.scrollLeft(t,-e.sender.x);if(i){i.scrollTop(-e.sender.y)}})}}},_wheelScroll:function(e){if(e.ctrlKey){return}var t=kendo.wheelDeltaY(e);var i=y(e.currentTarget);if(t){if(i[0].scrollHeight>i[0].clientHeight&&(i[0].scrollTop<i[0].scrollHeight-i[0].clientHeight&&t<0||i[0].scrollTop>0&&t>0)){e.preventDefault()}i.one("wheel"+A,false);this.content.scrollTop(this.content.scrollTop()+-t)}},_progress:function(){var e=this.options.messages;if(!this.tbody.find("tr").length){this._showStatus(kendo.template("<span class='#= className #'></span> #: messages.loading #")({className:I.icon+" "+I.loading,messages:e}))}},_error:function(e){if(!this.dataSource.rootNodes().length){this._render({error:e})}},refresh:function(e){var t=this;e=e||{};if(e.action=="itemchange"&&this.editor){return}if(this.trigger(ue)){return}var i=y(this.current());var n=false;var r;this._cancelEditor();this._render();this._adjustHeight();if(this.options.navigatable){if(this._isActiveInTable()||this.editor){n=i.is("th");r=Math.max(this.cellIndex(i),0)}this._restoreCurrent(r,n)}if(t._checkBoxSelection){t._deselectCheckRows(t.items())}this.trigger(ce)},_angularFooters:function(e){var t,i,n;var r=this.dataSource.aggregates();var a=this._footerItems();for(t=0;t<a.length;t++){i=a.eq(t);n=r[i.attr("data-parentId")];this._angularFooter(e,i.find("td").get(),n)}},_angularFooter:function(e,t,i){var n=this.columns;this.angular(e,function(){return{elements:t,data:G(n,function(e){return{column:e,aggregate:i&&i[e.field]}})}})},items:function(){if(this._hasLockedColumns){return this._items(this.tbody).add(this._items(this.lockedTable))}else{return this._items(this.tbody)}},_items:function(e){return e.find("tr[data-uid]").filter(function(){return!y(this).hasClass(I.footerTemplate)})},_footerItems:function(){var e=this.tbody;if(this._hasLockedColumns){e=e.add(this.lockedTable)}return e.find("tr").filter(function(){return y(this).hasClass(I.footerTemplate)})},dataItems:function(){var e=kendo.ui.DataBoundWidget.fn.dataItems.call(this);if(this._hasLockedColumns){var t=e.length,i=new Array(2*t);for(var n=t;--n>=0;){i[n]=i[n+t]=e[n]}e=i}return e},_showNoRecordsTemplate:function(){var e='<div class="{0}">{1}</div>';var t='<div class="k-grid-norecords-template"{1}>{0}</div>';var i=this.options.scrollable&&!this.wrapper[0].style.height?' style="margin:0 auto;position:static;"':"";var n;this._contentTree.render([]);if(this._hasLockedColumns){this._lockedContentTree.render([])}n=kendo.format(t,this.options.messages.noRows,i);y(kendo.template(kendo.format(e,Ie,n))({})).insertAfter(this.table)},_showStatus:function(e){var t=this.element.find(".k-status");var i=y(this.content).add(this.lockedContent);if(!t.length){t=y("<div class='k-status' />").appendTo(this.element)}this._contentTree.render([]);if(this._hasLockedColumns){this._lockedContentTree.render([])}i.hide();t.html(e)},_hideStatus:function(){this.element.find(".k-status").remove();this._hideNoRecordsTempalte();y(this.content).add(this.lockedContent).show()},_hideNoRecordsTempalte:function(){this.element.find("."+Ie).remove()},_adjustHeight:function(){var e=this;var t=this.element;var i=t.find(_+I.gridContentWrap);var n=t.find(_+I.gridHeader);var r=t.find(_+I.gridToolbar);var a=t.find(_+I.status);var o=e._isPageable()&&e.pager&&e.pager.element.is(":visible")?C(e.pager.element):0;var s;var l=kendo.support.scrollbar();t.css(Pe,this.options.height);var d=function(e){var t,i;if(e[0].style.height){return true}else{t=e.height()}e.height("auto");i=e.height();e.height("");return t!=i};if(d(t)){s=t.height()-C(n)-C(r)-C(a)-o;i.height(s);if(this._hasLockedColumns){l=this.table[0].offsetWidth>this.table.parent()[0].clientWidth?l:0;this.lockedContent.height(s-l)}}},_resize:function(e,t){this._applyLockedContainersWidth();this._adjustHeight();if(this.pager&&this.pager.element){this.pager.resize(t)}},_minScreenSupport:function(){var e=this.hideMinScreenCols();if(e){this.minScreenResizeHandler=k(this.hideMinScreenCols,this);y(window).on("resize",this.minScreenResizeHandler)}},_iterateMinScreenCols:function(e,t){var i=false;for(var n=0;n<e.length;n++){var r=e[n];var a=r.minScreenWidth;if(a!==v&&a!==null){i=true;if(a>t){this.hideColumn(r)}else{this.showColumn(r)}}if(!r.hidden&&r.columns){i=this._iterateMinScreenCols(r.columns,t)||i}}return i},hideMinScreenCols:function(){var e=this.columns,t=window.innerWidth>0?window.innerWidth:screen.width;return this._iterateMinScreenCols(e,t)},destroy:function(){N.fn.destroy.call(this);var e=this.dataSource;e.unbind(d,this._refreshHandler);e.unbind(Q,this._errorHandler);e.unbind(X,this._progressHandler);this._navigatableTables=null;this._current=null;if(this._resizeHandler){y(window).off("resize"+A,this._resizeHandler)}if(this._dragging){this._dragging.destroy();this._dragging=null}if(this.resizable){this.resizable.destroy();this.resizable=null}if(this.reorderable){this.reorderable.destroy();this.reorderable=null}if(this._draggableInstance&&this._draggableInstance.element){this._draggableInstance.destroy();this._draggableInstance=null}if(this.selectable){this.selectable.destroy()}if(this._userEvents){this._userEvents.destroy();this._userEvents=null}if(this.minScreenResizeHandler){y(window).off("resize",this.minScreenResizeHandler)}this._destroyEditor();this.element.off(A);this.wrapper.off(A);if(this._touchScroller){this._touchScroller.destroy()}this._destroyPager();if(e){e._dataMaps=null}this._autoExpandable=null;this._refreshHandler=this._errorHandler=this._progressHandler=this._dataSourceFetchProxy=null;this.thead=this.content=this.tbody=this.table=this.element=this.lockedHeader=this.lockedContent=null;this._statusTree=this._headerTree=this._contentTree=this._lockedHeaderColsTree=this._lockedContentColsTree=this._lockedHeaderTree=this._lockedContentTree=null},options:{name:"TreeList",columns:[],autoBind:true,scrollable:true,selectable:false,sortable:false,toolbar:null,height:null,columnMenu:false,messages:{noRows:"No records to display",loading:"Loading...",requestFailed:"Request failed.",retry:"Retry",commands:{edit:"Edit",update:"Update",canceledit:"Cancel",create:"Add new record",createchild:"Add child record",destroy:"Delete",excel:"Export to Excel",pdf:"Export to PDF",search:"Search..."}},excel:{hierarchy:true},resizable:false,search:false,filterable:false,editable:false,reorderable:false,pageable:false,renderAllRows:true},events:[d,J,ee,te,ne,re,de,oe,se,ue,ce,fe,Ce,Se,Te,De,pe,Y,le,ve,me,ge,be,we,t,ke,ye,xe],getOptions:function(){var e=this.options;e.dataSource=null;var t=g(true,{},this.options);t.columns=kendo.deepExtend([],this.columns);var i=this.dataSource;var n=i.options.data&&i._data;i.options.data=null;t.dataSource=y.extend(true,{},i.options);i.options.data=n;t.dataSource.data=n;t.dataSource.page=i.page();t.dataSource.filter=y.extend(true,{},i.filter());t.dataSource.pageSize=i.pageSize();t.dataSource.sort=i.sort();t.dataSource.group=i.group();t.dataSource.aggregate=i.aggregate();if(t.dataSource.transport){t.dataSource.transport.dataSource=null}if(t.pageable&&t.pageable.pageSize){t.pageable.pageSize=i.pageSize()}t.$angular=v;return t},setOptions:function(e){var t=this.getOptions();kendo.deepExtend(t,e);if(!e.dataSource){t.dataSource=this.dataSource}var i=this.wrapper;var n=this._events;var r=this.element;this.destroy();this.options=null;if(i[0]!==r[0]){i.before(r);i.remove()}r.empty();this.init(r,t,n);this._setEvents(t)},_toggle:function(e,t){var i=this;var n=y.Deferred().resolve().promise();var r=e.loaded();if(i._isIncellEditable()&&i.editor){y(W()).change();i.closeCell()}if(e._error){e.expanded=false;e._error=v}if(!r&&e.expanded){return n}if(typeof t=="undefined"){t=!e.expanded}e.expanded=t;function a(){i._toggleData();if(i._isPageable()){i.refresh()}else{i._render()}i._syncLockedContentHeight()}if(!r){n=this.dataSource.load(e).always(k(function(){a()},this))}a();return n},_toggleData:function(){var e=this;if(e._isPageable()){e._togglePageableData()}},_togglePageableData:function(){var e=this;var t=e.dataSource;var i=t._getData();var n;var r=t._defaultPageableQueryOptions();e._renderProgress(true);var a=t._getChildrenMap()||t.childrenMap(t._getData());t._processDataItemsState(i,a);n=t._processPageableQuery(i,r);r.childrenMap=n.childrenMap;r.filteredChildrenMap=n.filteredChildrenMap;t._aggregateResult=t._calculateAggregates(n.dataToAggregate,r);t.view(n.data);if(!t.filter()){t._calculateCollapsedTotal()}e._refreshPager();e._renderProgress(false)},_refreshPager:function(){var e=this.pager;if(e){e.refresh()}},expand:function(e){return this._toggle(this.dataItem(e),true)},collapse:function(e){return this._toggle(this.dataItem(e),false)},_toggleChildren:function(e){var t=y(e.target);var i=this.dataItem(t);if(!i){return}var n=!i.expanded?oe:se;if(!this.trigger(n,{model:i})){this._toggle(i)}e.preventDefault()},_navigatable:function(){var e=this;if(!e.options.navigatable){return}var t=e.table.add(e.lockedTable);var i=e.thead.parent().add(y(">table",e.lockedHeader));if(e.options.scrollable){t=t.add(i);i.attr(he,-1)}this._navigatableTables=t;t.on(kendo.support.touch?"touchstart"+A:"mousedown"+A,Ae+">:visible",k(e._tableClick,e)).on("focus"+A,k(e._tableFocus,e)).on("focusout"+A,k(e._tableBlur,e)).on("keydown"+A,k(e._tableKeyDown,e))},cellIndex:function(e){var t=0;if(this.lockedTable&&!y.contains(this.lockedTable[0],e[0])){t=F(P(this.columns)).length}return y(e).parent().children().index(e)+t},_isActiveInTable:function(){var e=kendo._activeElement();if(!e){return false}return this.table[0]===e||y.contains(this.table[0],e)||this.lockedTable&&(this.lockedTable[0]===e||y.contains(this.lockedTable[0],e))},_restoreCurrent:function(e,t){var i;var n;var r;if(e===v||e<0){return}if(this._current){this._current.removeClass("k-state-focused")}if(t){this.current(this.thead.find("th").eq(e))}else{i=0;e=0;n=y();if(this.lockedTable){n=this.lockedTable.find(">tbody>tr:visible").eq(i)}n=n.add(this.tbody.children().eq(i));r=n.find(">td:visible").eq(e);this.current(r)}if(this._current){B(this._current.closest("table")[0],true)}},current:function(e){var t=this._current;e=y(e);if(e.length&&(!t||t[0]!==e[0])){this._updateCurrentAttr(t,e);this._scrollCurrent()}if(e&&e.length){this._lastCellIndex=e.parent().children(f).index(e)}return this._current},_setCurrent:function(e){var t=this;e=y(e);if(e[0]){t._current=e;t._updateCurrentAttr(t._current,e);t._scrollCurrent()}return t._current},_scrollCurrent:function(){var e=this._current;var t=this.options.scrollable;if(!e||!t){return}var i=e.parent();var n=i.closest("table").parent();var r=n.is(".k-grid-content-locked,.k-grid-header-locked");var a=n.is(".k-grid-content-locked,.k-grid-content");var o=y(this.content)[0];if(a){this._scrollTo(this._relatedRow(i)[0],o)}if(this.lockedContent){this.lockedContent[0].scrollTop=o.scrollTop}if(!r){this._scrollTo(e[0],o)}},_findCurrentCell:function(){var e=this;var t=e.current();var i=y(e.table).add(e.header).add(e.lockedTable).add(e.lockedHeader);if(t&&i.find(t).length>0){return t}else{return i.find(_+I.focused)}},_scrollTo:function(e,t){var i=e.tagName.toLowerCase();var n=i==="td"||i==="th";var r=y(e).closest("table")[0];var a=e[n?"offsetWidth":"offsetHeight"];var o=t[n?"scrollLeft":"scrollTop"];var s=t[n?"clientWidth":"clientHeight"];var l=y(e).css("position")==="relative"&&E&&n?Math.abs(r.offsetLeft-e.offsetLeft):e[n?"offsetLeft":"offsetTop"];var d=l+a;var u=0;var c=0;var f=0;if(E&&n){if(S.msie||S.edge){c=r.offsetLeft}else if(S.mozilla||S.webkit&&S.version>85){f=r.offsetLeft-kendo.support.scrollbar()}}o=Math.abs(o+c-f);if(o>l){u=l}else if(d>o+s){if(a<=s){u=d-s}else{u=l}}else{u=o}u=Math.abs(u+c)+f;t[n?"scrollLeft":"scrollTop"]=u},_aria:function(){var e=this.element.attr("id")||"aria";if(e){this._elementId=e+"_active_element"}},_currentDataIndex:function(e,t){var i=t.attr("data-index");if(!i){return v}var n=P(this.columns).length;if(n&&!e.closest("div").hasClass("k-grid-content-locked")[0]){return i-n}return i},_prevVerticalCell:function(e,t){var i;var n=t.parent();var r=e.children(Ae);var a=r.index(n);var o=this._currentDataIndex(e,t);if(o||t.hasClass("k-header")){i=pt(t);return i.eq(i.length-2)}o=Math.max(n.children(f).index(t),this._lastCellIndex||0);if(n.hasClass("k-filter-row")){return R(e).filter($e).eq(o)}if(a==-1){n=e.find("tr.k-filter-row:visible");if(!n[0]){return R(e).filter($e).eq(o)}}else{n=a===0?y():r.eq(a-1)}i=n.children(f);if(i.length>o){return i.eq(o)}return i.eq(0)},_nextVerticalCell:function(e,t){var i;var n=t.parent();var r=e.children(Ae);var a=r.index(n);var o=this._currentDataIndex(e,t);if(a!=-1&&o===v&&t.hasClass("k-header")){return vt(t).eq(1)}o=o?parseInt(o,10):n.children(f).index(t);o=Math.max(o,this._lastCellIndex||0);if(a==-1){n=r.eq(0)}else{n=r.eq(a+t[0].rowSpan)}var s=o;if(this._currentDataIndex(e,t)!==v){var l=n.children(":not(.k-group-cell):not(.k-hierarchy-cell)");var d=l.filter(":hidden");for(var u=0,c=d.length;u<c;u++){if(l.index(d[u])<o){s--}}}o=s;i=n.children(f);if(i.length>o){return i.eq(o)}return i.eq(0)},_verticalContainer:function(e,t){var i=e.parent();var n=this._navigatableTables.length;var r=Math.floor(n/2);var a=D(i[0],this._navigatableTables);if(t){r*=-1}a+=r;if(a>=0||a<n){i=this._navigatableTables.eq(a)}return i.find(t?"thead":"tbody")},_updateCurrentAttr:function(e,t){var i=y(e).data("headerId");y(e).removeClass(I.focused).closest("table").removeAttr("aria-activedescendant");if(i){i=i.replace(this._elementId,"");y(e).attr("id",i)}else{y(e).removeAttr("id")}t.data("headerId",t.attr("id")).attr("id",this._elementId).addClass(I.focused).closest("table").attr("aria-activedescendant",this._elementId);this._current=t},_tableKeyDown:function(e){var t=false;var i=this.current();var n=y(e.target);var r=!e.isDefaultPrevented()&&!n.is(":button,a,:input,a>.k-icon");i=i?i:y(this.lockedTable).add(this.table).find(Re);if(r&&e.keyCode==l.UP){t=this._moveUp(i,e.shiftKey)}if(r&&e.keyCode==l.DOWN){t=this._moveDown(i,e.shiftKey)}if(r&&e.keyCode==(E?l.LEFT:l.RIGHT)){if(e.altKey){t=this._handleExpand(i)}else{t=this._moveRight(i)}}if(r&&e.keyCode==(E?l.RIGHT:l.LEFT)){if(e.altKey){t=this._handleCollapse(i)}else{t=this._moveLeft(i)}}if(r&&e.keyCode==l.PAGEDOWN){t=this._handlePageDown()}if(r&&e.keyCode==l.PAGEUP){t=this._handlePageUp()}if(e.keyCode==l.ENTER||e.keyCode==l.F2){t=this._handleEnterKey(i,e.currentTarget,n)}if(e.keyCode==l.ESC){t=this._handleEscKey(i,e.currentTarget)}if(r&&e.keyCode==l.HOME){t=this._handleHome(i,e.ctrlKey)}if(r&&e.keyCode==l.END){t=this._handleEnd(i,e.ctrlKey)}if(e.keyCode==l.TAB){t=this._handleTabKey(i,e.currentTarget,e.shiftKey)}if(t){e.preventDefault();e.stopPropagation()}},_handleExpand:function(e){var t=this;var i=e.parent();var n=t.dataItem(i);if(e.hasClass("k-header")){return false}if(n&&n.hasChildren&&!n.expanded&&!t.trigger(oe,{model:n})){this.expand(i);return true}return false},_handleCollapse:function(e){var t=this;var i=e.parent();var n=t.dataItem(i);if(e.hasClass("k-header")){return false}if(n&&n.hasChildren&&n.expanded&&!t.trigger(se,{model:n})){t.collapse(i);return true}return false},_handleHome:function(e,t){var i=e.parent();var n=i.parent();var r=this.lockedTable&&this.lockedTable.children("tbody")[0]===n[0];var a=n[0]===this.tbody[0];var o;if(t){if(this.lockedTable){o=this.lockedTable.find(Re)}else{o=this.table.find(Re)}}else if(a||r){if(a&&this.lockedTable){i=this._relatedRow(i)}o=i.children(b+":first")}if(o&&o.length){this.current(o);return true}},_handleEnd:function(e,t){var i=e.parent();var n=i.parent();var r=this.lockedTable&&this.lockedTable.children("tbody")[0]===n[0];var a=n[0]===this.tbody[0];var o;if(t){o=this.table.find(Fe+">"+b+":last")}else if(a||r){if(!a&&this.lockedTable){i=this._relatedRow(i)}o=i.children(b+":last")}if(o&&o.length){this.current(o);return true}},_handlePageDown:function(){var e=this;if(!e._isPageable()){return false}e.dataSource._restorePageSizeAfterAddChild();e.dataSource.page(e.dataSource.page()+1);return true},_handlePageUp:function(){var e=this;if(!e._isPageable()){return false}e.dataSource._restorePageSizeAfterAddChild();e.dataSource.page(e.dataSource.page()-1);return true},_handleEscKey:function(e,t){var i=kendo._activeElement();var n;var r=this;var a;var o;var s;var l;if(!e||!e.parent().hasClass("k-grid-edit-row")){if(e.has(i).length){B(t,true);return true}return false}if(r._isIncellEditable()){a=e.parent();s=e.index();o=a.index();l=a.closest("tbody");r.closeCell(true);r._setCurrent(l.children().eq(o).children().eq(s))}else{n=y(e).parent().index();if(i){i.blur()}this.cancelRow();if(n>=0){this.current(this.items().eq(n).children(b).first())}}B(t,true);return true},_handleEnterKey:function(e,t,i){var n=this.options.editable;var r=i.closest("[role=gridcell]");var a;if(!i.is("table")&&!y.contains(e[0],i[0])){e=r}if(e.is("th")){e.find(".k-link").click();return true}a=e.find(":kendoFocusable:first");if(a[0]&&e.hasClass("k-state-focused")){a.focus();return true}if(n&&!i.is(":button,.k-button,textarea")){if(!r[0]){r=e}this._handleEditing(r,false,t);return true}return false},_handleTabKey:function(e,t,i){var n=this;var r=n.options.editable&&n._isIncellEditable();var a;if(!r||e.is("th")){return false}a=y(W()).closest(_+I.editCell);if(a[0]&&a[0]!==e[0]){e=a}a=n._tabNext(e,t,i);if(a.length){n._handleEditing(e,a,a.closest(He));return true}else{n._preventPageSizeRestore=false}return false},_tabNext:function(e,t,i){var n=this;var r=true;var a=i?e.prevAll(f+":first"):e.nextAll(":visible:first");if(!a.length){a=e.parent();if(n.lockedTable){r=i&&t==n.lockedTable[0]||!i&&t==n.table[0];a=n._relatedRow(a)}if(r){a=a[i?"prevAll":"nextAll"]("tr:not(.k-grouping-row):not(.k-detail-row):visible:first")}a=a.children(f+(i?":last":":first"));n.dataSource._restorePageSizeAfterAddChild()}return a},_handleEditing:function(e,t,i){var n=this,r=y(kendo._activeElement()),a=S.msie,o,s,l;var d=n.options.editable&&n.options.editable.update!==false;var u=n._isIncellEditable();var c=y(t).parents("tr").index();var f=y(t).index();var h=y(e).parents("tr").index();var p=e.index();var v;i=y(i);if(u){l=e.hasClass(I.editCell)}else{l=e.parent().hasClass("k-grid-edit-row")}if(n.editor){o=n.editor.wrapper;if(o&&y.contains(o[0],r[0])){if(S.opera){r.blur().change().triggerHandler("blur")}else{r.blur();if(a){r.blur()}}}if(!n.editor){B(i);return}if(n.editor.end()){if(u){n._preventPageSizeRestore=true;n.closeCell();n._preventPageSizeRestore=false;if(y(n.table).add(n.lockedTable).find(_+I.editCell).length===0){n.current(i.find("tbody").children().eq(h).children().eq(p))}}else{n.saveRow();l=true}}else{if(u){n.current(o)}else{n.current(o.children().filter(b).first())}s=o.find(":kendoFocusable:first")[0];if(s){s.focus()}return}}t=y(t).length&&i.find(t).length===0?i.find("tbody").children().eq(c).children().eq(f):t;if(t){n.current(t)}B(i,true);if(!d){return}if(!l&&!t||t){var m=n.current().index();if(u){n.editCell(n.current());v=y(n.table).add(n.lockedTable).find(_+I.editCell)[0];if(v){n._current=y(v)}else{n.current(n._findCurrentCell())}}else{n.editRow(n.current().parent());n.current(n.editor.wrapper.children().eq(m));n.current().removeClass("k-state-focused")}}else{n.dataSource._restorePageSizeAfterAddChild()}},_moveRight:function(e){var t=e.nextAll(b).first();var i=e.parent();if(e.hasClass("k-header")){t=e.nextAll(Ee).first();if(!t[0]&&this.lockedTable&&e.closest("table")[0]===this.lockedHeader.find("table")[0]){t=this.thead.find(Ee+":first")}}if(!t[0]&&this.lockedTable&&e.closest("table")[0]===this.lockedTable[0]){t=this._relatedRow(i).children(b).first()}if(t[0]&&t[0]!==e[0]){B(t.closest("table"),true)}this.current(t);return true},_moveLeft:function(e){var t=e.prevAll(b).first();var i=e.parent();if(e.hasClass("k-header")){t=e.prevAll(Ee).first();if(!t[0]&&this.lockedTable&&e.closest("table")[0]===this.thead.parent()[0]){t=this.lockedHeader.find(">table>thead>tr>"+Ee+":last")}}if(!t[0]&&this.lockedTable&&e.closest("table")[0]===this.table[0]){t=this._relatedRow(i).children(b).last()}if(t[0]&&t[0]!==e[0]){B(t.closest("table"),true)}this.current(t);return true},_moveUp:function(e,t){var i=e.parent().parent();var n;if(t){n=e.parent();n=n.prevAll(Me+":first");n=e.parent().is(Me)?n.children().eq(e.index()):n.children(f+":last")}else{n=this._prevVerticalCell(i,e);if(!n[0]){this._lastCellIndex=0;i=this._verticalContainer(i,true);n=this._prevVerticalCell(i,e);if(n[0]){B(i.parent(),true)}}}var r=this._lastCellIndex||0;this.current(n);this._lastCellIndex=r;return true},_moveDown:function(e,t){var i=e.parent().parent();var n;if(t){n=e.parent();n=n.nextAll(Me+":first");n=e.parent().is(Me)?n.children().eq(e.index()):n.children(f+":first")}else{n=this._nextVerticalCell(i,e);if(!n[0]){this._lastCellIndex=0;i=this._verticalContainer(i);n=this._nextVerticalCell(i,e);if(n[0]){B(i.parent(),true)}}}var r=this._lastCellIndex||0;this.current(n);this._lastCellIndex=r;return true},_tableClick:function(e){var t=y(e.currentTarget),i=t.is("th"),n=this.table.add(this.lockedTable),r=this.thead.parent().add(y(">table",this.lockedHeader)),a=nt(e.target),o=t.closest("table")[0];if(kendo.support.touch){return}if(o!==n[0]&&o!==n[1]&&o!==r[0]&&o!==r[1]){return}if(this.options.navigatable){this.current(t)}if(i||!a){setTimeout(function(){if(!nt(kendo._activeElement())||!y.contains(o,kendo._activeElement())){B(o,true)}})}if(i){e.preventDefault()}},_setTabIndex:function(e){this._navigatableTables.attr(he,-1);e.attr(he,0)},_tableFocus:function(e){var t=this.current();var i=y(e.currentTarget);if(t&&t.is(":visible")){t.addClass(I.focused)}else{this.current(i.find(Re))}this._setTabIndex(i)},_tableBlur:function(){var e=this.current();if(e){e.removeClass(I.focused)}},_attachEvents:function(){var e=this;var t=_+I.retry;e._userEvents=new kendo.UserEvents(e.element,{press:k(e._onPress,e),allowSelection:true});this.element.on(u+A,t,this._dataSourceFetchProxy).on(u+A,".k-button[data-command]",k(this._commandClick,this)).on(Z+A,".k-grid-search input",k(this._search,this));this._attachCellEditingEventHandlers()},_onPress:function(e){var t=this;var i=_+I.iconCollapse+", ."+I.iconExpand+", ."+I.refresh;if(y(e.event.target).is(i)){t._toggleChildren.call(t,e.event)}},_attachCellEditingEventHandlers:function(){var r=this;var e=r.options.editable;var n=r.selectable&&r.selectable.options.multiple;var t=function(e){var t=W();var i=r.editor||{};var n=i.element;if(n&&!y.contains(n[0],t)&&n[0]!==t&&!y(t).closest(".k-animation-container").length){if(i.end()){if(!e.relatedTarget&&r._isPageable()&&!L(r.dataSource._addChildPageSize)){r._preventPageSizeRestore=false}r.closeCell()}}r._preventPageSizeRestore=false};if(r._isIncellEditable()&&e.update!==false){r.wrapper.on(u+A,"tr:not(.k-grouping-row) > td",function(e){var t=y(this),i=r.lockedTable&&t.closest("table")[0]===r.lockedTable[0];if(t.hasClass(I.editCell)||t.has("a.k-grid-delete").length||t.has("button.k-grid-delete").length||t.closest("tbody")[0]!==r.tbody[0]&&!i||y(e.target).is(":input")||y(e.target).hasClass(I.iconExpand)||y(e.target).hasClass(I.iconCollapse)){if(!r.editor){r.dataSource._restorePageSizeAfterAddChild()}r._preventPageSizeRestore=false;return}if(r.editor){if(r.editor.end()){if(n){y(W()).blur()}r.closeCell();r.editCell(t)}}else{r.editCell(t)}}).on("mousedown"+A,"tr:not(.k-grouping-row) > td",function(e){if(r.editor&&r._isPageable()&&!L(r.dataSource._addChildPageSize)){r._preventPageSizeRestore=y(e.target).parents(_+I.editRow).length>0}else{r._preventPageSizeRestore=false}}).on("focusin"+A,function(){if(!y.contains(this,W())){clearTimeout(r._closeCellTimeout);r._closeCellTimeout=null}}).on("focusout"+A,function(e){r._closeCellTimeout=setTimeout(function(){t(e)},1)})}},_commandByName:function(e){var t=this.columns;var i=y.isArray(this.options.toolbar)?this.options.toolbar:[];var n,r,a,o;e=e.toLowerCase();if(Ue[e]){return Ue[e]}for(n=0;n<t.length;n++){a=t[n].command;if(a){for(r=0;r<a.length;r++){o=a[r].name;if(!o){continue}if(o.toLowerCase()==e){return a[r]}}}}for(n=0;n<i.length;n++){o=i[n].name;if(!o){continue}if(o.toLowerCase()==e){return i[n]}}},_commandClick:function(e){var t=y(e.currentTarget);var i=t.attr("data-command");var n=this._commandByName(i);var r=t.parentsUntil(this.wrapper,"tr");r=r.length?r:v;if(n){if(n.methodName){this[n.methodName](r)}else if(n.click){n.click.call(this,e)}e.preventDefault()}},_search:function(e){var a=this;var o=e.currentTarget;clearTimeout(a._searchTimeOut);a._searchTimeOut=setTimeout(function(){a._searchTimeOut=null;var e=a.options;var t=e.search?e.search.fields:null;var i={filters:[],logic:"or"};var n=o.value;if(!t){t=st(e.columns)}if(n){for(var r=0;r<t.length;r++){i.filters.push({field:t[r],operator:"contains",value:n})}}else{i={}}a.dataSource.filter(i)},300)},_ensureExpandableColumn:function(){if(this._autoExpandable){delete this._autoExpandable.expandable}var e=T(this.columns,Ge(i("hidden")));e=T(e,Ge(i("command")));e=T(e,Ge(i("selectable")));var t=T(e,i("expandable"));if(this.columns.length&&!t.length){this._autoExpandable=e[0];e[0].expandable=true}},_columns:function(){var t=this;var e=this.options.columns||[];this.columns=G(e,function(e){e=typeof e==="string"?{field:e}:e;return g({encoded:true},e)});var i=P(e);if(i.length>0){this._hasLockedColumns=true;this.columns=i.concat(z(this.columns))}this.columns=ct(this.columns);this._ensureExpandableColumn();this._columnTemplates();this._columnAttributes();if(y.grep(F(t.columns),function(e){if(e.selectable){t._includeChildren=e.includeChildren}return e.selectable}).length){t._checkBoxSelection=true;t.element.on(u+A,"tbody > tr "+c,k(t._checkboxClick,t));t.element.on(u+A,"thead > tr "+c,k(t._headerCheckboxClick,t))}},_columnTemplates:function(){var e,t,i;var n=F(this.columns);for(e=0,t=n.length;e<t;e++){i=n[e];if(i.template){i.template=kendo.template(i.template)}if(this._isIncellEditable()){i.dirtyCellTemplate=this._createDirtyColumnTemplate(i);i.dirtyIndicatorTemplate=this._createIndicatorTemplate(i)}if(i.headerTemplate){i.headerTemplate=kendo.template(i.headerTemplate)}if(i.footerTemplate){i.footerTemplate=kendo.template(i.footerTemplate)}}},_columnAttributes:function(){var e,t;var i=this.columns;function n(e){var t,i,n;if(e&&e.style&&e.style.split){t=e.style.split(";");e.style={};for(i=0;i<t.length;i++){n=t[i].split(":");var r=kendo.trim(n[0]);if(r){e.style[y.camelCase(r)]=kendo.trim(n[1])}}}}for(e=0,t=i.length;e<t;e++){n(i[e].attributes);n(i[e].headerAttributes)}},_clearSortClasses:function(){var e=this;if(e.content){e.content.find("col:not(.k-group-col):not(.k-hierarchy-col)").removeClass("k-sorted")}if(e.lockedContent){e.lockedContent.find("col:not(.k-group-col):not(.k-hierarchy-col)").removeClass("k-sorted")}},_layout:function(){var e=this.columns;var t=this.element;var i="";this.wrapper=t.addClass(I.wrapper);i="<div class='#= gridHeader #'>";if(this._hasLockedColumns){i+="<div class='k-grid-header-locked'>"+"<table role='grid'>"+"<colgroup></colgroup>"+"<thead role='rowgroup'></thead>"+"</table>"+"</div>"}i+="<div class='#= gridHeaderWrap #'>"+"<table role='grid'>"+"<colgroup></colgroup>"+"<thead role='rowgroup'></thead>"+"</table>"+"</div>"+"</div>";if(this._hasLockedColumns){i+="<div class='k-grid-content-locked'>"+"<table role='treegrid' tabindex='0'>"+"<colgroup></colgroup>"+"<tbody></tbody>"+"</table>"+"</div>"}i+="<div class='#= gridContentWrap # k-auto-scrollable'>"+"<table role='treegrid' tabindex='0'>"+"<colgroup></colgroup>"+"<tbody></tbody>"+"</table>"+"</div>";if(!this.options.scrollable){i="<table role='treegrid' tabindex='0'>"+"<colgroup></colgroup>"+"<thead class='#= gridHeader #' role='rowgroup'></thead>"+"<tbody></tbody>"+"</table>"}if(this.options.toolbar){i="<div class='#= toolbar # #= gridToolbar #'></div>"+i}t.append(kendo.template(i)(I)+"<div class='k-status'></div>");this.toolbar=t.find(_+I.gridToolbar);var n=t.find(_+I.gridHeader).find("thead").addBack().filter("thead");this.thead=n.last();if(this.options.scrollable){var r=kendo.support.isRtl(t);t.find("div."+I.gridHeader).css(r?"padding-left":"padding-right",kendo.support.scrollbar())}var a=t.find(_+I.gridContentWrap);if(!a.length){a=t}else{this.content=a}this.table=a.find(">table");this.tbody=this.table.find(">tbody");if(this._hasLockedColumns){this.lockedHeader=n.first().closest(".k-grid-header-locked");this.lockedContent=t.find(".k-grid-content-locked");this.lockedTable=this.lockedContent.children()}this._initVirtualTrees();this._renderCols();this._renderHeader();this.angular("compile",function(){return{elements:n.find("th.k-header").get(),data:G(e,function(e){return{column:e}})}})},_initVirtualTrees:function(){this._headerColsTree=new n.Tree(this.thead.prev()[0]);this._contentColsTree=new n.Tree(this.tbody.prev()[0]);this._headerTree=new n.Tree(this.thead[0]);this._contentTree=new n.Tree(this.tbody[0]);this._statusTree=new n.Tree(this.element.children(".k-status")[0]);if(this.lockedHeader){this._lockedHeaderColsTree=new n.Tree(this.lockedHeader.find("colgroup")[0]);this._lockedContentColsTree=new n.Tree(this.lockedTable.find(">colgroup")[0]);this._lockedHeaderTree=new n.Tree(this.lockedHeader.find("thead")[0]);this._lockedContentTree=new n.Tree(this.lockedTable.find(">tbody")[0])}},_toolbar:function(){var e=this.options.toolbar;var t=this.toolbar;if(!e){return}if(y.isArray(e)){var i=this._buildCommands(e);new n.Tree(t[0]).render(i)}else{t.append(kendo.template(e)({}))}this.angular("compile",function(){return{elements:t.get()}})},_lockedColumns:function(){return T(this.columns,i("locked"))},_nonLockedColumns:function(){return T(this.columns,Ge(i("locked")))},_templateColumns:function(){return T(this.columns,i("template"))},_flushCache:function(){if(this.options.$angular&&this._templateColumns().length){this._contentTree.render([]);if(this._hasLockedColumns){this._lockedContentTree.render([])}}},_render:function(e){var t=this;e=e||{};e=t._renderOptions(e);var i=this.options.messages;var n=t._isPageable();var r=t.dataSource;var a={children:e.filteredChildrenMap||e.childrenMap,ids:e.idsMap};var o=n?a&&a.children&&a.ids?a:r._initDataMaps(r._getData()):{};var s=o.children;var l=o.ids;e.childrenMap=s;e.idsMap=l;var d=t._dataToRender(e);var u=t._renderedModelLevel(d[0],e);var c=kendo.attr("uid");var f;var h=this.select().removeClass("k-state-selected").map(function(e,t){return y(t).attr(c)});var p;this._absoluteIndex=0;this._angularItems("cleanup");this._angularFooters("cleanup");this._flushCache();t._clearRenderMap();if(e.error){this._showStatus(kendo.template("#: messages.requestFailed # "+"<button class='#= buttonClass #'>#: messages.retry #</button>")({buttonClass:[I.button,I.retry].join(" "),messages:i}))}else if(!d.length){this._hideStatus();this._showNoRecordsTemplate()}else{if(n){p=t._viewChildrenMap(e)}this._hideStatus();f=this._hasFooterTemplate();this._contentTree.render(this._trs({columns:F(z(this.columns)),editedColumn:e.editedColumn,editedColumnIndex:e.editedColumnIndex,aggregates:e.aggregates,selected:h,data:d,childrenMap:s,viewChildrenMap:p,hasFooterTemplate:f,visible:true,level:0}));if(this._hasLockedColumns){this._absoluteIndex=0;this._lockedContentTree.render(this._trs({columns:F(P(this.columns)),editedColumn:e.editedColumn,editedColumnIndex:e.editedColumnIndex,aggregates:e.aggregates,selected:h,data:d,childrenMap:s,viewChildrenMap:p,hasFooterTemplate:f,visible:true,level:u}))}}if(this._touchScroller){this._touchScroller.contentResized()}this._muteAngularRebind(function(){this._angularItems("compile");this._angularFooters("compile")});this.items().filter(function(){return y.inArray(y(this).attr(c),h)>=0}).addClass("k-state-selected");this._syncLockedContentHeight();t._togglePagerVisibility();t._setExpanderElement()},_setExpanderElement:function(){var e=this,t="k-grid-content-expander",i='<div class="'+t+'"></div>',n;if(e.options.scrollable&&e.wrapper.is(":visible")){n=e.table.parent().children("."+t);if(!e.dataSource||!e.dataSource.view().length){if(!n[0]){n=y(i).appendTo(e.table.parent())}if(e.thead){n.width(e.thead.width())}}else if(n[0]){n.remove()}}},_renderProgress:function(e){kendo.ui.progress(this.wrapper,e)},_renderOptions:function(e){e=e||{};var t=this;var i=t.dataSource._getDataMaps();var n=t.dataSource.filter();if(t._isPageable()){e.childrenMap=i.children;e.idsMap=i.ids;if(n){e.filteredChildrenMap=i.filteredChildren}}return e},_renderedModelLevel:function(e,t){return!this._isPageable()?0:this.dataSource._pageableModelLevel(e,t)},_viewChildrenMap:function(e){e=e||{};var t=this;var i=t.dataSource;var n=i.childrenMap(i.view());var r=i._modelIdField();var a=i._parentNodesNotInView();var o;var s;var l;var d;var u;var c;var f;var h;t._clearRenderMap();for(var p=0;p<a.length;p++){o=a[p];s=o[r];t._markNodeAsNonRenderable(s);n[s]=n[s]||[];l=i._parentNodes(o);h=l.slice();h.push(o);for(var v=0;v<h.length-1;v++){d=h[v];u=d[r];t._markNodeAsNonRenderable(u);n[u]=n[u]||[];c=h[v+1];f=c[r];t._markNodeAsNonRenderable(f);n[f]=n[f]||[];if(n[u].indexOf(c)===-1){n[u].unshift(c)}}}return n},_clearRenderMap:function(){this._skipRenderingMap={}},_dataToRender:function(e){var t=this;if(t._isPageable()){return t.dataSource._pageableRootNodes(e)}return t.dataSource.rootNodes()},_markNodeAsNonRenderable:function(e){this._skipRenderingMap[e]=true},_adjustRowsHeight:function(e,t){if(!this._hasLockedColumns){return}var i=e[0].rows;var n=i.length;var r;var a=t[0].rows;var o=e.add(t);var s=o.length;var l=[];for(r=0;r<n;r++){if(!a[r]){break}if(i[r].style.height){i[r].style.height=a[r].style.height=""}}for(r=0;r<n;r++){if(!a[r]){break}var d=i[r].offsetHeight;var u=a[r].offsetHeight;var c=0;if(d>u){c=d}else if(d<u){c=u}l.push(c)}for(r=0;r<s;r++){o[r].style.display="none"}for(r=0;r<n;r++){if(l[r]){i[r].style.height=a[r].style.height=l[r]+1+"px"}}for(r=0;r<s;r++){o[r].style.display=""}},_ths:function(e,t){var i=[];var n,r,a,o,s,l;var d;var u;for(var c=0,f=e.length;c<f;c++){n=e[c];a=[];o=[I.header];if(n.selectable){u=F(e);d=D(n,u);s={scope:"col",role:"columnheader",className:o.join(" ")};if(n.headerTemplate){r=n.headerTemplate({})}r=n.headerTemplate?r:kendo.template(Ve)({});if(t&&!n.colSpan){s.rowSpan=t}if(d>-1){s[kendo.attr("index")]=d}a.push(h(r));i.push(p("th",y.extend(true,{},s,n.headerAttributes),a));continue}if(n.headerTemplate){r=n.headerTemplate({})}else{r=n.title||n.field||""}if(n.headerTemplate){l=h(r)}else{l=H(r)}if(n.sortable){a.push(p("a",{href:"#",className:I.link},[l]))}else{a.push(l)}s={"data-field":n.field,"data-title":n.title,style:n.hidden===true?{display:"none"}:{},className:o.join(" "),role:"columnheader"};if(!n.columns){s.rowSpan=t?t:1}if(n.headerAttributes){if(n.headerAttributes.colSpan===1){delete n.headerAttributes.colSpan}if(n.headerAttributes["class"]){s.className+=" "+n.headerAttributes["class"];delete n.headerAttributes["class"]}}if(n["data-index"]>-1){s["data-index"]=n["data-index"]}s=g(true,{},s,n.headerAttributes);i.push(p("th",s,a))}return i},_cols:function(e){var t=[];var i,n;for(var r=0;r<e.length;r++){if(e[r].hidden===true){continue}i=e[r].width;n={};if(i&&parseInt(i,10)!==0){n.style={width:typeof i==="string"?i:i+"px"}}t.push(p("col",n))}return t},_clearColsCache:function(){this._headerColsTree.render([]);if(this.options.scrollable){this._contentColsTree.render([])}if(this._hasLockedColumns){this._lockedHeaderColsTree.render([]);this._lockedContentColsTree.render([])}},_renderCols:function(){var e=z(this.columns);this._headerColsTree.render(this._cols(F(e)));if(this.options.scrollable){this._contentColsTree.render(this._cols(F(e)))}if(this._hasLockedColumns){e=P(this.columns);this._lockedHeaderColsTree.render(this._cols(F(e)));this._lockedContentColsTree.render(this._cols(F(e)))}},_retrieveFirstColumn:function(e,t){var i=y();if(t.length&&e[0]){var n=e[0];while(n.columns&&n.columns.length){n=n.columns[0];t=t.filter(":not(:first())")}i=i.add(t)}return i},_updateFirstColumnClass:function(){var e=this;var t=e.columns||[];var i=e.thead.find(">tr:not(:first)");var n;t=z(t);n=e._retrieveFirstColumn(t,i);if(e.lockedHeader){i=e.lockedHeader.find("thead>tr:not(.k-filter-row):not(:first)");t=P(e.columns);n=n.add(e._retrieveFirstColumn(t,i))}n.each(function(){var e=y(this).find("th");e.removeClass("k-first");e.eq(0).addClass("k-first")})},_updateRowSpans:function(e){for(var t=e.length-1;t>=0;t--){var i=lt(e[t].cells).length>0;if(i){e[t].rowSpan=e.length-t}}},_setColumnDataIndexes:function(e){for(var t=0;t<e.length;t++){e[t]["data-index"]=t}},_updateColumnCellIndex:function(){var e;var t=0;if(this.lockedHeader){e=this.lockedHeader.find("thead");t=wt(e,P(this.columns))}wt(this.thead,z(this.columns),t)},_setParentsVisibility:function(e,t){var i=this.columns;var n;var r=[];var a;var o=t?function(e){return ut(e.columns).length&&e.hidden}:function(e){return!ut(e.columns).length&&!e.hidden};if(gt(e,i,r)&&r.length){for(n=r.length-1;n>=0;n--){a=r[n];if(o(a)){a.hidden=!t}}}},_prepareColumns:function(e,t,i,n,r){var a=n||e[e.length-1];var o=e[a.index+1];var s=0;for(var l=0;l<t.length;l++){var d=y.extend({},t[l],{headerAttributes:t[l].headerAttributes||{}});a.cells.push(d);if(t[l].columns&&t[l].columns.length){if(!o){o={rowSpan:0,cells:[],index:e.length};e.push(o)}if(t[l].columns.length){d.headerAttributes.colSpan=lt(t[l].columns).length||1;d.headerAttributes["data-colspan"]=F(t[l].columns).length}this._prepareColumns(e,t[l].columns,d,o,t[l]);if(!d.hidden){s+=d.headerAttributes.colSpan-1}a.rowSpan=e.length-a.index}t[l].rowIndex=a.index;if(r){t[l].parentColumn=r}t[l].cellIndex=a.cells.length-1}if(i){i.headerAttributes.colSpan+=s}},_renderHeaderTree:function(e,t,i){var n;var r=[];var a=[];if(i){r=[{rowSpan:1,cells:[],index:0}];this._prepareColumns(r,t);this._updateRowSpans(r);for(n=0;n<r.length;n++){a.push(p("tr",{role:"row"},this._ths(r[n].cells,r[n].rowSpan)))}e.render(a)}else{e.render([p("tr",{role:"row"},this._ths(t))])}},_renderHeader:function(){var e=z(this.columns);var t=T(this.columns,function(e){return e.columns!==v}).length>0;this._setColumnDataIndexes(F(this.columns));this._renderHeaderTree(this._headerTree,e,t);if(this._hasLockedColumns){e=P(this.columns);this._renderHeaderTree(this._lockedHeaderTree,e,t);this._applyLockedContainersWidth();this._syncLockedHeaderHeight()}this._updateFirstColumnClass()},_applyLockedContainersWidth:function(){if(!this._hasLockedColumns){return}var e=Qe(this.lockedHeader.find(">table>colgroup>col"));var t=this.thead.parent();var i=Qe(t.find(">colgroup>col"));var n=this.wrapper[0].clientWidth;var r=kendo.support.scrollbar();if(e>=n){e=n-3*r}this.lockedHeader.add(this.lockedContent).width(e);t.add(this.table).width(i);var a=n-e;this.content.width(a-1);t.parent().width(a-r-2)},_trs:function(e){var t=this;var i,n,r,a,o,s,l;var d;var u=[];var c=e.level;var f=e.data;var h=this.dataSource;var p=h.aggregates()||{};var v=h._modelIdField();var m=h._modelParentIdField();var g=e.columns;var _=t._isPageable();var b=e.childrenMap||h.childrenMap(h._getData());for(s=0,l=f.length;s<l;s++){r=[];i=f[s];d=i[v];o=_?b[d]:i.loaded()?h.childNodes(i):[];a=o&&o.length;n={role:"row"};n[kendo.attr("uid")]=i.uid;if(a){n["aria-expanded"]=!!i.expanded}if(e.visible){if(!_||_&&!t._skipRenderingMap[d]){if(this._absoluteIndex%2!==0){r.push(I.alt)}this._absoluteIndex++}}else{n.style={display:"none"}}if(y.inArray(i.uid,e.selected)>=0){r.push(I.selected)}if(a){r.push(I.group)}if(i._edit){r.push("k-grid-edit-row")}n.className=r.join(" ");if(!t._skipRenderingMap[d]){var w=this._tds({model:i,attr:n,level:_?t._renderedModelLevel(i,e):c,editedColumn:e.editedColumn,editedColumnIndex:e.editedColumnIndex},g,k(this._td,this));u.push(w)}if(a&&(t.options.renderAllRows||!!i.expanded)){if(_){o=(e.viewChildrenMap||{})[d]||[]}if(o.length===0){continue}u=u.concat(this._trs({columns:g,editedColumn:e.editedColumn,editedColumnIndex:e.editedColumnIndex,aggregates:p,selected:e.selected,visible:_?e.visible:e.visible&&!!i.expanded,data:o,childrenMap:e.childrenMap||b,hasFooterTemplate:e.hasFooterTemplate,viewChildrenMap:e.viewChildrenMap,level:c+1}))}}if(e.hasFooterTemplate&&i){n={className:I.footerTemplate,"data-parentId":i[m]};if(!e.visible){n.style={display:"none"}}u.push(this._tds({model:p[i[m]],attr:n,level:c,editedColumn:e.editedColumn,editedColumnIndex:e.editedColumnIndex},g,this._footerId))}return u},_footerId:function(e){var t=[];var i=e.column;var n=e.column.footerTemplate||y.noop;var r=e.model[i.field]||{};var a={role:"gridcell",style:i.hidden===true?{display:"none"}:{}};if(i.expandable){t=t.concat(Ye({level:e.level+1,className:I.iconPlaceHolder}))}if(i.attributes){g(true,a,i.attributes,{style:i.hidden===true?{display:"none"}:{}})}t.push(h(n(r)||""));return p("td",a,t)},_hasFooterTemplate:function(){return!!T(F(this.columns),function(e){return e.footerTemplate}).length},_tds:function(e,t,i){var n=[];var r;var a=(e.editedColumn||{}).field;var o=this._isIncellEditable();var s=t.length;for(var l=0;l<s;l++){r=t[l];var d=i({model:e.model,column:r,editColumn:!o||o&&r.field===a&&e.editedColumnIndex===l,level:e.level});n.push(d)}return p("tr",e.attr,n)},_td:function(e){var t=[];var i=e.model;var n=e.column;var r;var a={role:"gridcell",style:n.hidden===true?{display:"none"}:{}};var o=this._isIncellEditable();var s=false;if(n.attributes){g(true,a,n.attributes)}if(this.options.navigatable){a["aria-describedby"]=n.headerAttributes.id}if(i._edit&&n.field&&e.editColumn&&(o||!o&&St(n,i))){a[kendo.attr("container-for")]=n.field;if(o){if(a.className&&a.className.indexOf(I.editCell)!==-1){a.className+=" "+I.editCell}else if(!a.className){a.className=I.editCell}}}else{if(n.expandable){t=Ye({level:e.level,className:I.iconPlaceHolder});r=[I.icon];if(i.hasChildren){r.push(i.expanded?I.iconCollapse:I.iconExpand)}else{r.push(I.iconHidden)}if(i._error){r.push(I.refresh)}else if(!i.loaded()&&i.expanded){r.push(I.loading)}t.push(p("span",{className:r.join(" ")}));a.style["white-space"]="nowrap"}if(Tt(n,i)){if(a.className){a.className+=I.dirtyCell}else if(!a.className){a.className=I.dirtyCell}}if(n.command){if(a.className&&a.className.indexOf("k-command-cell")!==-1){a.className+=" k-command-cell"}else if(!a.className){a.className="k-command-cell"}s=T(n.command,function(e){return e===ee||e.name===ee}).length>0;if(i._edit&&!this._isIncellEditable()&&s){t=this._buildCommands(["update","canceledit"])}else{t=this._buildCommands(n.command)}}else{t.push(this._cellContent(n,i))}if(a["class"]){a.className=a["class"]+" "+a.className}}return p("td",a,t)},_cellContent:function(e,t){var i=this;var n;var r=i._isIncellEditable();var a;if(e.selectable){return h(Oe)}if(e.template){n=i._evalColumnTemplate(e,t)}else if(e.field){n=t.get(e.field);a=r?e.dirtyIndicatorTemplate(t):"";if(n!==null&&!L(n)){if(e.format){n=kendo.format(e.format,n)}n=a+n}else{n=a}}else if(n===null||L(n)){n=""}if(e.template||!e.encoded){return h(n)}else{if(r){return h(n)}else{return H(n)}}},_evalColumnTemplate:function(e,t){if(this._isIncellEditable()){return e.dirtyCellTemplate(t)}else{return e.template(t)}},_createDirtyColumnTemplate:function(e){var t=this;var i=t._customTemplateSettings();var n="#=this.columnTemplate("+i.paramName+")#";var r=t._dirtyIndicatorTemplate(e.field)+n;var a=k(V(r,i),{columnTemplate:e.template});return a},_createIndicatorTemplate:function(e){var t=this._dirtyIndicatorTemplate(e.field);return V(t)},_dirtyIndicatorTemplate:function(e){var t=this;var i;var n=t._customTemplateSettings();var r=n.paramName;if(e&&r){i=e.charAt(0)==="["?kendo.expr(e,r+".dirtyFields"):r+".dirtyFields['"+e+"']";return"#= "+r+" && "+r+".dirty && "+r+".dirtyFields && "+i+" ? '<span class=\"k-dirty\"></span>' : '' #"}return""},_customTemplateSettings:function(){return g({},kendo.Template,this.options.templateSettings)},_buildCommands:function(e){var t,i=[];for(t=0;t<e.length;t++){i.push(this._handleCommand(e[t]))}return i},_handleCommand:function(e){var t=(e.name||e).toLowerCase();var i=this.options.messages.commands[t];var n=[];e=g({},Ue[t],{text:i},e);if(e.imageClass){n.push(p("span",{className:["k-icon",e.imageClass].join(" ")}))}if(e.template){return h(kendo.template(e.template)({message:e.text||this.options.messages.commands.search}))}else{return this._button(e,t,n)}},_button:function(e,t,i){return p("button",{type:"button","data-command":t,className:["k-button","k-button-icontext",e.className].join(" ")},i.concat([H(e.text||e.name)]))},_positionResizeHandle:function(e){var t=y(e.currentTarget);var i=this.resizeHandle;var n=t.position();var r;var a=0;var o;var s;var l;var d;var u;var c;var f;var h;var p=x(t);var v=t.closest("div");var m=typeof e.buttons!=="undefined"?e.buttons:e.which||e.button;var g=this.options.columnResizeHandleWidth||3;var _=g*3/2;r=p;if(typeof m!=="undefined"&&m!==0){return}if(!i){i=this.resizeHandle=y('<div class="k-resize-handle"><div class="k-resize-handle-inner"></div></div>')}var b=R(t.closest("thead")).filter(":visible");if(E){h=kendo.scrollLeft(v);if(S.mozilla||S.webkit&&S.version>=85){h=h*-1}f=parseFloat(v.css("borderLeftWidth"));r=t.offset().left+h-parseFloat(t.css("marginLeft"))-(v.offset().left+f);a=r<=h?_:0;o=t.closest(".k-grid-header-wrap, .k-grid-header-locked");c=o[0].scrollWidth-o[0].offsetWidth;u=parseFloat(o.css("marginLeft"));s=S.msie?2*kendo.scrollLeft(o)+f-u-a:0;l=S.webkit&&S.version<85?c-a-u+f:-a;d=S.mozilla?f-u-a:0;r-=l+d+s}else{for(var w=0;w<b.length;w++){if(b[w]==t[0]){break}r+=b[w].offsetWidth}}v.append(i);i.show().css({top:n.top,left:r-_,height:C(t),width:g*3}).data("th",t);var k=this;i.off("dblclick"+A).on("dblclick"+A,function(){var e=t.index();if(y.contains(k.thead[0],t[0])){e+=T(k.columns,function(e){return e.locked&&!e.hidden}).length}k.autoFitColumn(e)})},autoFitColumn:function(t){var e=this,i=e.options,n=e.columns,r,a,o,s,l=e.lockedHeader?R(e.lockedHeader.find(">table>thead")).filter($e).length:0,d;if(typeof t=="number"){t=n[t]}else if(q(t)){t=T(n,function(e){return e===t})[0]}else{t=T(n,function(e){return e.field===t})[0]}if(!t||t.hidden){return}r=D(t,n);s=t.locked;if(s){o=e.lockedHeader.children("table")}else{o=e.thead.parent()}a=o.find("[data-index='"+r+"']");var u=s?e.lockedTable:e.table,c=e.footer||y();if(e.footer&&e.lockedContent){c=s?e.footer.children(".k-grid-footer-locked"):e.footer.children(".k-grid-footer-wrap")}var f=c.find("table").first();if(e.lockedHeader&&l>=r&&!s){r-=l}for(var h=0;h<n.length;h++){if(n[h]===t){break}else{if(n[h].hidden){r--}}}if(i.scrollable){d=o.find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+r+")").add(u.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+r+")")).add(f.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+r+")"))}else{d=u.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+r+")")}var p=o.add(u).add(f);var v=x(a);d.width("");p.css("table-layout","fixed");d.width("auto");p.addClass("k-autofitting");p.css("table-layout","");var m=Math.ceil(Math.max(x(a),x(u.find("tr").eq(0).children("td:visible").eq(r)),x(f.find("tr").eq(0).children("td:visible").eq(r))));d.width(m);t.width=m;if(i.scrollable){var g=o.find("col"),_,b=0;for(var w=0,k=g.length;w<k;w+=1){_=g[w].style.width;if(_&&_.indexOf("%")==-1){b+=parseInt(_,10)}else{b=0;break}}if(b){p.each(function(){this.style.width=b+"px"})}}p.removeClass("k-autofitting");e.trigger(we,{column:t,oldWidth:v,newWidth:m});e._applyLockedContainersWidth();e._syncLockedContentHeight();e._syncLockedHeaderHeight()},_adjustLockedHorizontalScrollBar:function(){var e=this.table,t=e.parent();var i=e[0].offsetWidth>t[0].clientWidth?kendo.support.scrollbar():0;this.lockedContent.height(C(t)-i)},_syncLockedContentHeight:function(){if(this.lockedTable){if(!this._touchScroller){this._adjustLockedHorizontalScrollBar()}this._adjustRowsHeight(this.table,this.lockedTable);this._syncLockedScroll()}},_syncLockedHeaderHeight:function(){if(this.lockedHeader){var e=this.lockedHeader.children("table");var t=this.thead.parent();this._adjustRowsHeight(e,t);Xe(e,t)}},_syncLockedScroll:function(){if(!this.options.scrollable){return}this.lockedContent[0].scrollTop=this.content[0].scrollTop},_resizable:function(){if(!this.options.resizable){return}if(this.resizable){this.resizable.destroy()}var o=this;y(this.lockedHeader).find("thead").add(this.thead).on("mousemove"+A,"th",y.proxy(this._positionResizeHandle,this));this.resizable=new kendo.ui.Resizable(this.wrapper,{handle:".k-resize-handle",start:function(e){var t=y(e.currentTarget).data("th");var i=y.inArray(t[0],R(t.closest("thead")).filter(":visible"));var n="col:eq("+i+")";var r,a;o.wrapper.addClass("k-grid-column-resizing");if(o.lockedHeader&&y.contains(o.lockedHeader[0],t[0])){r=o.lockedHeader;a=o.lockedTable}else{r=o.thead.parent();a=o.table}this.col=a.children("colgroup").find(n).add(r.find(n));this.th=t;this.startLocation=e.x.location;this.columnWidth=x(t);this.table=this.col.closest("table");this.totalWidth=this.table.width()},resize:function(e){var t=E?-1:1;var i=11;var n=e.x.location*t-this.startLocation*t;if(this.columnWidth+n<i){n=i-this.columnWidth}this.table.width(this.totalWidth+n);this.col.width(this.columnWidth+n)},resizeend:function(){o.wrapper.removeClass("k-grid-column-resizing");var t=this.th.attr("data-field");var e=T(F(o.columns),function(e){return e.field==t});var i=Math.floor(x(this.th));e[0].width=i;o._resize();o._syncLockedContentHeight();o._syncLockedHeaderHeight();o.trigger(we,{column:e,oldWidth:this.columnWidth,newWidth:i});this.table=this.col=this.th=null}})},_sortable:function(){var e;var t;var i;var n;var r,a,o;var s=this.options.sortable;var l=T(this.columns,function(e){return e.columns!==v}).length>0;if(!s){return}if(l){if(this.lockedHeader){n=Ke(R(this.lockedHeader.find(">table>thead")).add(R(this.thead)))}else{n=R(this.thead)}}else{n=y(this.lockedHeader).add(this.thead).find("th")}e=F(this.columns);for(a=0,o=n.length;a<o;a++){t=e[a];if(t.sortable!==false&&!t.command&&t.field&&!t.selectable){r=n.eq(a);i=r.data("kendoColumnSorter");if(i){i.destroy()}r.kendoColumnSorter(g({},s,t.sortable,{dataSource:this.dataSource}))}}},_filterable:function(){var e;var t=this.options.filterable;var i;var n;var r;var a;var o;var s;var l=T(this.columns,function(e){return e.columns!==v}).length>0;if(!t||this.options.columnMenu){return}var d=k(function(e){this.trigger(pe,{field:e.field,container:e.container})},this);var u=k(function(e){this.trigger(ve,{field:e.field,container:e.container})},this);if(l){if(this.lockedHeader){e=R(this.lockedHeader.find(">table>thead").add(this.thead))}else{e=R(this.thead)}}else{e=y(this.lockedHeader).add(this.thead).find("th")}r=F(this.columns);for(i=0,n=e.length;i<n;i++){a=r[i];o=e.eq(i);s=o.data("kendoFilterMenu");if(s){s.destroy()}if(a.command||a.filterable===false||a.selectable){continue}o.kendoFilterMenu(g(true,{},t,a.filterable,{dataSource:this.dataSource,init:d,open:u}))}},_change:function(){var e=this;var t;if(e._checkBoxSelection){t=e.selectable.value();e._uncheckCheckBoxes();e._checkRows(t);if(t.length&&t.length===e.items().length){e._toggleHeaderCheckState(true)}else{e._toggleHeaderCheckState(false)}}this.trigger(d)},_isLocked:function(){return this.lockedHeader!==null},_selectable:function(){var n=this;var e=this.options.selectable;var t;var r=this.table;var i;var a=n._isLocked();var o;var s;if(e){e=kendo.ui.Selectable.parseOptions(e);if(this._hasLockedColumns){r=r.add(this.lockedTable);i=e.multiple&&e.cell}t=">tbody>tr:not(.k-footer-template)";if(e.cell){t=t+">td"}this.selectable=new kendo.ui.Selectable(r,{filter:t,aria:true,multiple:e.multiple,change:k(this._change,this),useAllItems:i,continuousItems:k(this._continuousItems,this,t,e.cell),relatedTarget:!e.cell&&this._hasLockedColumns?k(this._selectableTarget,this):v});if(n.options.navigatable){o=e.multiple;s=e.cell;r.on("keydown"+A,function(e){var t=n.current();var i=e.target;if(e.keyCode===l.SPACEBAR&&!e.shiftKey&&y.inArray(i,r)>-1&&!t.is(".k-header")){e.preventDefault();e.stopPropagation();t=s?t:t.parent();if(a&&!s){t=t.add(n._relatedRow(t))}if(o){if(!e.ctrlKey){n.selectable.clear()}else{if(t.hasClass(I.selected)){t.removeClass(I.selected);n.trigger(d);return}}}else{n.selectable.clear()}if(!s){n.selectable._lastActive=t}n.selectable.value(t)}else if(!s&&(e.shiftKey&&e.keyCode==l.LEFT||e.shiftKey&&e.keyCode==l.RIGHT||e.shiftKey&&e.keyCode==l.UP||e.shiftKey&&e.keyCode==l.DOWN||e.keyCode===l.SPACEBAR&&e.shiftKey)){e.preventDefault();e.stopPropagation();t=t.parent();if(a){t=t.add(n._relatedRow(t))}if(o){if(!n.selectable._lastActive){n.selectable._lastActive=t}n.selectable.selectRange(n.selectable._firstSelectee(),t)}else{n.selectable.clear();n.selectable.value(t)}}})}}},_continuousItems:function(e,t){if(!this.lockedContent){return}var i=y(e,this.lockedTable);var n=y(e,this.table);var r=t?P(this.columns).length:1;var a=t?this.columns.length-r:1;var o=[];for(var s=0;s<i.length;s+=r){$.apply(o,i.slice(s,s+r));$.apply(o,n.splice(0,a))}return o},_selectableTarget:function(e){var t;var i=y();for(var n=0,r=e.length;n<r;n++){t=this._relatedRow(e[n]);if(D(t[0],e)<0){i=i.add(t)}}return i},_relatedRow:function(e){var t=this.lockedTable;e=y(e);if(!t){return e}var i=e.closest(this.table.add(this.lockedTable));var n=i.find(">tbody>tr").index(e);i=i[0]===this.table[0]?t:this.table;return i.find(">tbody>tr").eq(n)},select:function(e){var t=this;var i=this.selectable;if(t._checkBoxSelection){if(e){t._checkRows(e);if(t.select().length===t.items().length){t._toggleHeaderCheckState(true)}}return t.items().filter("."+We)}if(!i){return y()}if(typeof e!=="undefined"){if(!i.options.multiple){i.clear();e=e.first()}if(this._hasLockedColumns){e=e.add(y.map(e,k(this._relatedRow,this)))}}return i.value(e)},clearSelection:function(){var e=this;var t=this.select();if(e.selectable&&!e._checkBoxSelection){e.selectable.clear()}if(e._checkBoxSelection){e._deselectCheckRows(e.select());return}if(t.length||e._checkBoxSelection){e.trigger(d)}},_uncheckCheckBoxes:function(){var e=this;var t=e.table.add(e.lockedTable);t.find("tbody "+c).attr("aria-checked",false).prop("checked",false).attr("aria-label","Select row")},_deselectCheckRows:function(e){var t=this;e=t.table.add(t.lockedTable).find(e);if(t._isLocked()){e=e.add(e.map(function(){return t._relatedRow(this)}))}e.each(function(){y(this).removeClass(We).find(c).attr("aria-checked",false).prop("checked",false).attr("aria-label","Select row")});t._toggleHeaderCheckState(false);t.trigger(d)},_headerCheckboxClick:function(e){var t=this,i=y(e.target),n=i.prop("checked"),r=i.closest(".k-grid.k-widget").getKendoTreeList();if(t!==r){return}if(n){t.select(r.items())}else{t.clearSelection()}},_checkboxClick:function(e){var t=this,i=y(e.target).closest("tr"),n=!i.hasClass(We),r=t.dataItem(i),a=[],o="";if(t!==i.closest(".k-grid.k-widget").getKendoTreeList()){return}if(t._includeChildren){t.dataSource.allChildNodes(r,a);for(var s=0;s<a.length;s++){o+="tr[data-uid='"+a[s].uid+"'],"}}o+="tr[data-uid='"+r.uid+"']";i=y(o);if(n){t.select(i)}else{t._deselectCheckRows(i)}},_checkRows:function(e){e.each(function(){y(this).addClass(We).find(c).prop("checked",true).attr("aria-label","Deselect row").attr("aria-checked",true)})},_toggleHeaderCheckState:function(e){var t=this;if(e){t.thead.add(t.lockedHeader).find("tr "+c).prop("checked",true).attr("aria-checked",true).attr("aria-label","Deselect all rows")}else{t.thead.add(t.lockedHeader).find("tr "+c).prop("checked",false).attr("aria-checked",false).attr("aria-label","Select all rows")}},_dataSource:function(e){var t=this;var i=this.dataSource;var n=t.options.pageable;if(i){i.unbind(d,this._refreshHandler);i.unbind(Q,this._errorHandler);i.unbind(ae,this._sortHandler);i.unbind(X,this._progressHandler)}this._refreshHandler=k(this.refresh,this);this._errorHandler=k(this._error,this);this._sortHandler=k(this._clearSortClasses,this);this._progressHandler=k(this._progress,this);if(q(e)){g(e,{table:t.table,fields:t.columns});if(q(n)&&n.pageSize!==v){e.pageSize=n.pageSize}}i=this.dataSource=qe.create(e);if(n){i._collapsedTotal=v}i.bind(d,this._refreshHandler);i.bind(Q,this._errorHandler);i.bind(ae,this._sortHandler);i.bind(X,this._progressHandler);this._dataSourceFetchProxy=k(function(){this.dataSource.fetch()},this)},setDataSource:function(e){this._dataSource(e);this._sortable();this._filterable();this._columnMenu();this._pageable();this._contentTree.render([]);if(this.options.autoBind){this.dataSource.fetch()}},dataItem:function(e){if(e instanceof M){return e}var t=y(e).closest("tr");var i=t.attr(kendo.attr("uid"));var n=L(i)?null:this.dataSource.getByUid(i);return n},editRow:function(e){var t=this;var i;if(this._isIncellEditable()||!this.options.editable){return}if(typeof e===K){e=this.tbody.find(e)}if(t._isPageable()&&t._isPopupEditable()&&e instanceof M){i=e}else{i=this.dataItem(e)}if(!i){return}if(t.editor){i._edit=true;this._render();this._cancelEditor()}else{t._preventPageSizeRestore=false}if(this._editMode()!="popup"){i._edit=true}if(this.trigger(J,{model:i})){t.dataSource._restorePageSizeAfterAddChild();return}this._render();this._createEditor(i);this.trigger(ee,{container:this.editor.wrapper,model:i})},_cancelEdit:function(e){if(!this.editor){return}var t;e=g(e,{container:this.editor.wrapper,model:this.editor.model});if(this.trigger(fe,e)){return}if(this.options.navigatable){t=this.items().index(y(this.current()).parent())}this.cancelRow();if(this.options.navigatable){this.current(this.items().eq(t).children().filter(b).first());B(this.table,true)}},cancelRow:function(){if(this._isIncellEditable()){return}this._cancelEditor();this._render()},saveRow:function(){var e=this.editor;var t;if(this._isIncellEditable()){return}if(!e){return}t={model:e.model,container:e.wrapper};if(e.end()&&!this.trigger(ne,t)){this.dataSource.sync()}},addRow:function(t){var i=this;var n=i.dataSource;var r=i._isPageable();var a=i._isIncellEditable();var o=i._isInlineEditable();var e=this.editor;var s=0;var l={};if(e&&!e.end()||!this.options.editable){return}if(t){if(!(t instanceof M)){t=this.dataItem(t)}l[t.parentIdField]=t.id;s=this.dataSource.indexOf(t)+1;this.expand(t).then(function(){var e=r&&n._isLastItemInView(t)&&(a||o);i._insertAt(l,s,e)});return}this._insertAt(l,s)},_insertAt:function(e,t,i){var n=this;var r=n.dataSource;e=n.dataSource.insert(t,e);if(i){r._setAddChildPageSize()}var a=this._itemFor(e);var o;if(n._isIncellEditable()){o=a.children("td").eq(n._firstEditableColumnIndex(a));n.editCell(o)}else if(a&&a[0]){n.editRow(a)}else if(n._isPageable()&&n._isPopupEditable()){n.editRow(e)}},_firstEditableColumnIndex:function(e){var t=this;var i=t.dataItem(e);var n=F(t.columns);var r=n.length;var a;var o;for(o=0;o<r;o++){a=n[o];if(i&&(!i.editable||i.editable(a.field))&&!a.command&&a.field&&a.hidden!==true){return o}}return-1},removeRow:function(e){var t=this.dataItem(e);var i={model:t,row:e};if(this.options.editable&&t&&!this.trigger(de,i)){if(document.activeElement===y(e).find(".k-grid-delete")[0]){y(e).find(".k-grid-delete").blur()}this.dataSource.remove(t);if(!this._isIncellEditable()){this.dataSource.sync()}}},_cancelEditor:function(){var e=this;var t;var i=e.editor;if(i){t=i.model;e._destroyEditor();if(!e._isIncellEditable()){e.dataSource.cancelChanges(t)}else if(e._shouldRestorePageSize()){e.dataSource._restorePageSizeAfterAddChild()}t._edit=false}e._preventPageSizeRestore=false},_shouldRestorePageSize:function(){var e=this;return e._isPageable()&&e._isIncellEditable()&&!e._preventPageSizeRestore},_destroyEditor:function(){if(!this.editor){return}this.editor.close();this.editor=null},_createEditor:function(e){var t=this.itemFor(e);var i=F(this.columns);var n=[];for(var r=0;r<i.length;r++){n.push(g({},i[r]));delete n[r].parentColumn}t=t.add(this._relatedRow(t));var a=this._editMode();var o={columns:n,model:e,target:this,clearContainer:false,template:this.options.editable.template};if(a=="inline"){this.editor=new Je(t,o)}else{g(o,{window:this.options.editable.window,commandRenderer:k(function(){return this._buildCommands(["update","canceledit"])},this),fieldRenderer:k(this._cellContent,this),save:k(this.saveRow,this),cancel:k(this._cancelEdit,this),appendTo:this.wrapper});this.editor=new et(t,o)}},_createIncellEditor:function(e,t){var i=this;var n=g({},t.columns[0]);delete n.parentColumn;return new tt(e,g({},{fieldRenderer:k(i._cellContent,i),appendTo:i.wrapper,clearContainer:false,target:i,columns:[n],model:t.model,change:t.change}))},editCell:function(e){var t=this;e=y(e);var i=F(t.columns)[t.cellIndex(e)];var n=t.dataItem(e);if(t._isIncellEditable()&&n&&St(i,n)){t._editCell(e,i,n)}},_editCell:function(t,e,i){var n=this;var r;if(n.trigger(J,{model:i})){n.dataSource._restorePageSizeAfterAddChild();return}n.closeCell();i._edit=true;n._cancelEditor();n._render({editedColumn:e,editedColumnIndex:t.index()});r=n.table.add(n.lockedTable).find(_+I.editCell).first();n.editor=n._createIncellEditor(r,{columns:[e],model:i,change:function(e){if(n.trigger(ne,{values:e.values,container:t,model:i})){e.preventDefault()}}});n._current=r;n.trigger(ee,{container:t,model:i})},closeCell:function(e){var t=this;var i=(t.editor||{}).element;var n;var r;if(!i||!i[0]||!t._isIncellEditable()){return}r=t.dataItem(i);if(e&&t.trigger(fe,{container:i,model:r})){return}t.trigger(le,{type:e?fe:ne,model:r,container:i});t._cancelEditor();i.removeClass(I.editCell);n=i.parent().removeClass(I.editRow);if(t.lockedContent){t._relatedRow(n).removeClass(I.editRow)}t._render();t.trigger(Y,{item:n,data:r,ns:a});if(t.lockedContent){Ct(n.css("height","")[0],t._relatedRow(n).css("height","")[0])}},cancelChanges:function(){this.dataSource.cancelChanges()},saveChanges:function(){var e=this;var t=(e.editor||{}).editable;var i=t&&t.end();if((i||!t)&&!e.trigger(re)){e.dataSource.sync()}},_editMode:function(){var e="inline",t=this.options.editable;if(t!==true){if(typeof t=="string"){e=t}else{e=t.mode||e}}return e.toLowerCase()},_isIncellEditable:function(){return this._editMode()===ze},_isInlineEditable:function(){return this._editMode()===Be},_isPopupEditable:function(){return this._editMode()===Le},hideColumn:function(e){this._toggleColumnVisibility(e,true)},showColumn:function(e){this._toggleColumnVisibility(e,false)},_toggleColumnVisibility:function(e,t){e=this._findColumn(e);if(!e||e.hidden===t){return}e.hidden=t;this._setParentsVisibility(e,!t);this._ensureExpandableColumn();this._clearColsCache();this._renderCols();this._renderHeader();this._render();this._adjustTablesWidth();this.trigger(t?me:ge,{column:e});if(!t&&!e.width){this.table.add(this.thead.closest("table")).width("")}this._updateFirstColumnClass()},_findColumn:function(t){if(typeof t=="number"){t=this.columns[t]}else if(q(t)){t=T(F(this.columns),function(e){return e===t})[0]}else{t=T(F(this.columns),function(e){return e.field===t})[0]}return t},_adjustTablesWidth:function(){var e,t;var i=this.thead.prev().children();var n,r=0;for(e=0,t=i.length;e<t;e++){n=i[e].style.width;if(n&&n.indexOf("%")==-1){r+=parseInt(n,10)}else{r=0;break}}if(r){this.table.add(this.thead.closest("table")).width(r)}},_reorderable:function(){if(!this.options.reorderable){return}var e=this.options.scrollable===true;var t=(e?".k-grid-header:first ":"table:first>.k-grid-header ")+_e;var r=this;this._draggableInstance=new a.Draggable(this.wrapper,{group:kendo.guid(),filter:t,hint:function(e){return y('<div class="k-header k-reorder-clue k-drag-clue" />').html(e.attr(kendo.attr("title"))||e.attr(kendo.attr("field"))||e.text()).prepend('<span class="k-icon k-drag-status k-i-cancel" />')}});this.reorderable=new a.Reorderable(this.wrapper,{draggable:this._draggableInstance,dragOverContainers:k(this._allowDragOverContainers,this),inSameContainer:function(e){return y(e.source).parent()[0]===y(e.target).parent()[0]&&ht(ft(r.columns),r.columns,e.sourceIndex,e.targetIndex)>-1},change:function(e){var t=ft(r.columns);var i=t[e.oldIndex];var n=ht(t,r.columns,e.oldIndex,e.newIndex);r.trigger(be,{newIndex:n,oldIndex:D(i,t),column:i});r.reorderColumn(n,i,e.position==="before")}})},_allowDragOverContainers:function(e,t){var i=ft(this.columns);return i[e].lockable!==false&&ht(i,this.columns,e,t)>-1},_reorderTrees:function(e,t,i,n,r,a,o,s){var l=y();var d=r.find("tr:eq("+n[0].rowIndex+")");var u=a.children[n[0].rowIndex];var c=d.children();var f;var h;var p=o?e[0]:e[e.length-1];var v;var m;var g;var _;var b;for(var w=0;w<n.length;w++){h=n[w].cellIndex;l=l.add(c.eq(h));f=i.children[p.rowIndex].children;if(i===a&&o){h+=w}f.splice(o?p.cellIndex+w:p.cellIndex+1+w,0,u.children[h])}if(i===a&&o){u.children.splice(n[0].cellIndex+n.length,n.length)}else{u.children.splice(n[0].cellIndex,n.length)}v=t.find("tr:eq("+p.rowIndex+")");b=v.find(">th.k-header:eq("+p.cellIndex+")");if(b.length&&l[0]!==b[0]){l[o?"insertBefore":"insertAfter"](b)}if(s>=n[0].rowIndex+1&&s!=1){m=[];for(w=0;w<n.length;w++){if(n[w].columns){m=m.concat(n[w].columns)}}if(!m.length){return}g=[];for(w=0;w<e.length;w++){if(e[w].columns){g=g.concat(e[w].columns)}}if(!g.length&&(t!==r||(p.cellIndex-n[0].cellIndex>1||n[0].cellIndex-p.cellIndex>1))){_=ot(this.columns,p,n[0],o,this.columns);g=[_];if(!_&&m.length&&t.find("tr").length>n[0].rowIndex+1){this._insertTree(m,r,a,t,i);return}}if(!g.length){return}this._reorderTrees(g,t,i,m,r,a,o,s)}},_insertTree:function(e,t,i,n,r){var a=[];var o;var s=y();var l;o=t.find("tr:eq("+e[0].rowIndex+")");l=i.children[e[0].rowIndex];for(var d=0;d<e.length;d++){if(e[d].columns){a=a.concat(e[d].columns)}r.children[e[0].rowIndex].children.splice(d,0,l.children[e[d].rowIndex]);s=s.add(o.find(">th.k-header:eq("+e[d].cellIndex+")"))}i.children[e[0].rowIndex].children.splice(e[0].cellIndex,e.length);n.find("tr:eq("+e[0].rowIndex+")").append(s);if(a.length){this._insertTree(a,t,i,n,r)}},_reorderHeader:function(e,t,i){var n=t.columns?kt([t]):1;var r=e.columns?kt([e]):1;var a=rt(t);var o=rt(e);var s=o?this.lockedHeader:this.thead;var l=a?this.lockedHeader:this.thead;var d=o?this._lockedHeaderTree:this._headerTree;var u=a?this._lockedHeaderTree:this._headerTree;var c;var f=s.find("tr");if(n===r||n<f.length){this._reorderTrees([e],s,d,[t],l,u,i,n);yt(s,d);xt(l,u)}else{if(s!==l){c=n-f.length;f.each(function(e){var t=this.cells;for(var i=0;i<t.length;i++){if(t[i].colSpan<=1&&t[i].attributes.rowspan){d.children[e].children[i].attr.rowSpan+=c;t[i].rowSpan+=c}}});for(var h=0;h<c;h++){d.children.push(p("tr",{role:"row"}));if(s.is("thead")){s.append("<tr role='row'></tr>")}else{s.find("thead").append("<tr role='row'></tr>")}}}this._reorderTrees([e],s,d,[t],l,u,i,n);xt(l,u)}},reorderColumn:function(e,t,i){var n;var r=t.parentColumn;var a=r?r.columns:this.columns;var o=D(t,a);var s=a[e];var l=!!s.locked;var d=T(this.columns,function(e){return e.columns!==v}).length>0;var u=z(a).length;if(o===e){return}if(l&&!t.locked&&u==1){return}if(!l&&t.locked&&a.length-u==1){return}if(i===v){i=e<o}if(d){this._reorderHeader(s,t,i)}n=!!t.locked;n=n!=l;t.locked=l;a.splice(i?e:e+1,0,t);a.splice(o<e?o:o+1,1);this._setColumnDataIndexes(F(this.columns));this._clearColsCache();this._renderCols();if(!d){var c=y(this.lockedHeader).add(this.thead).find("th");c.eq(o)[i?"insertBefore":"insertAfter"](c.eq(e));var f=this._headerTree.children[0].children;if(this._hasLockedColumns){f=this._lockedHeaderTree.children[0].children.concat(f)}f.splice(i?e:e+1,0,f[o]);f.splice(o<e?o:o+1,1);if(this._hasLockedColumns){this._lockedHeaderTree.children[0].children=f.splice(0,P(a).length);this._headerTree.children[0].children=f}}else{if(this.lockedHeader){a=z(this.columns);this._prepareColumns([{rowSpan:1,cells:[],index:0}],a);a=P(this.columns);this._prepareColumns([{rowSpan:1,cells:[],index:0}],a)}else{this._prepareColumns([{rowSpan:1,cells:[],index:0}],this.columns)}}this._updateColumnCellIndex();this._applyLockedContainersWidth();this._syncLockedHeaderHeight();this._updateFirstColumnClass();this.refresh();if(!n){return}if(l){this.trigger(ye,{column:t})}else{this.trigger(xe,{column:t})}},lockColumn:function(t){var e=this.columns;if(typeof t=="number"){t=e[t]}else{t=T(e,function(e){return e.field===t})[0]}if(!t||t.hidden){return}var i=P(e).length-1;this.reorderColumn(i,t,false)},unlockColumn:function(t){var e=this.columns;if(typeof t=="number"){t=e[t]}else{t=T(e,function(e){return e.field===t})[0]}if(!t||t.hidden){return}var i=P(e).length;this.reorderColumn(i,t,true)},_columnMenu:function(){var e=y(this.lockedHeader).add(this.thead).find("th");var t=this.columns;var i=this.options;var n=i.columnMenu;var r,a,o,s,l;var d=k(this._columnMenuInit,this);var u=k(this._columnMenuOpen,this);var c=T(this.columns,function(e){return e.lockable!==false}).length>0;var f=T(this.columns,function(e){return e.columns!==v}).length>0;if(f){t=F(t);if(this.lockedHeader){e=Ke(R(this.lockedHeader.find(">table>thead")).add(R(this.thead)))}else{e=R(this.thead)}}else{e=y(this.lockedHeader).add(this.thead).find("th")}if(!n){return}if(typeof n=="boolean"){n={}}for(var h=0;h<e.length;h++){r=t[h];if(!r.field){continue}a=e.eq(h).data("kendoColumnMenu");if(a){a.destroy()}s=false;if(r.sortable!==false&&n.sortable!==false&&i.sortable!==false){s=g({},i.sortable,{compare:(r.sortable||{}).compare})}l=false;if(i.filterable&&r.filterable!==false&&n.filterable!==false){l=g({pane:this.pane},r.filterable,i.filterable)}o={dataSource:this.dataSource,values:r.values,columns:n.columns,sortable:s,filterable:l,messages:n.messages,owner:this,closeCallback:y.noop,init:d,open:u,pane:this.pane,hasLockableColumns:P(t).length>0&&c&&!f};if(i.$angular){o.$angular=i.$angular}e.eq(h).kendoColumnMenu(o)}},_columnMenuInit:function(e){this.trigger(t,{field:e.field,container:e.container})},_columnMenuOpen:function(e){this.trigger(ke,{field:e.field,container:e.container})},_pageable:function(){var t=this,e,i=t.options.pageable;if(i){e=t.wrapper.children("div.k-grid-pager");if(!e.length){e=y('<div class="k-pager-wrap k-grid-pager"/>').appendTo(t.wrapper)}t._destroyPager();if(typeof i==="object"&&i instanceof kendo.ui.TreeListPager){t.pager=i}else if(t.dataSource&&!t.dataSource.options.serverPaging){t._createPager(e)}if(t.pager){t.pager.bind(ie,function(e){if(t.trigger(te,{page:e.index})){e.preventDefault()}})}}},_createPager:function(e,t){var i=this;i.pager=new Ze(e,g({},i.options.pageable,{dataSource:i.dataSource},t))},_destroyPager:function(){if(this.pager){this.pager.destroy();this.pager=null}},_isPageable:function(){var e=this;return e.options.pageable&&(!e.dataSource||e.dataSource&&e.dataSource._isPageable())},_togglePagerVisibility:function(){var e=this;var t=e.options.pageable;if(t&&(q(t)||t instanceof Ze)&&t.alwaysVisible===false){e.wrapper.find(".k-grid-pager").toggle((e.dataSource.collapsedTotal()||0)>=e.dataSource.pageSize())}}});function nt(e){return y(e).is(":button,a,:input,a>.k-icon,textarea,span.k-select,span.k-icon,span.k-link,.k-input,.k-multiselect-wrap,.k-tool-icon")}function rt(e){if(!e.parentColumn){return!!e.locked}return!!rt(e.parentColumn)}function at(e,t,i,n){var r;var a=!!i.locked;var o;do{r=e[t];t+=n?1:-1;o=!!r.locked}while(r&&t>-1&&t<e.length&&r!=i&&!r.columns&&o===a);return r}function ot(e,t,i,n,r){if(t.columns){t=t.columns;return t[n?0:t.length-1]}else{var a=mt(t,e);var o;if(a){o=a.columns}else{o=e}var s=D(t,o);if(s===0&&n&&o.length!==1){s++}else if(s==o.length-1&&!n&&s!==0){s--}else if(s>0||s===0&&!n&&s!==0){s+=n?-1:1}var l=D(i,o);t=at(o,s,i,l>s);var d=D(t,r);if(t.columns&&(!d||d===o.length-1)){return null}if(t&&t!=i&&t.columns){return ot(e,t,i,n,r)}}return null}function F(e){var t=[];for(var i=0;i<e.length;i++){if(!e[i].columns){t.push(e[i]);continue}t=t.concat(F(e[i].columns))}return t}function st(e){var t=[];e=F(e);for(var i=0;i<e.length;i++){if(typeof e[i]==="string"){t.push(e[i])}else if(e[i].field){t.push(e[i].field)}}return t}function lt(e){return T(e,function(e){return!e.hidden})}function dt(e){return ut([e]).length>0}function ut(e){return T(e,function(e){var t=!e.hidden;if(t&&e.columns){t=ut(e.columns).length>0}return t})}function ct(e,n,r){return G(e,function(e){var t;e.parentIds=r;if(!dt(e)||n){t=true}var i=kendo.guid();e.headerAttributes=g({headers:r},e.headerAttributes);if(!e.headerAttributes||!e.headerAttributes.id){e.headerAttributes=g({id:i},e.headerAttributes)}else{i=e.headerAttributes.id}if(e.columns){e.columns=ct(e.columns,t,r?r+" "+i:i)}return g({hidden:t},e)})}function ft(e){var t=_t(P(e));return t.concat(_t(z(e)))}function ht(e,t,i,n){var r=e[i];var a=e[n];var o=mt(r,t);t=o?o.columns:t;return D(a,t)}function pt(e){var t=e.closest("table");var i=y().add(e);var n=e.closest("tr");var r=t.find("tr");var a=r.index(n);if(a>0){var o=r.eq(a-1);var s=o.find("th").filter(function(){return!y(this).attr("rowspan")});var l=0;var d=n.find("th").index(e);var u=e.prevAll().filter(function(){return this.colSpan>1});for(var c=0;c<u.length;c++){l+=u[c].colSpan||1}d+=Math.max(l-1,0);l=0;for(c=0;c<s.length;c++){var f=s.eq(c);if(f.attr("data-colspan")){l+=f[0].getAttribute("data-colspan")}else{l+=1}if(d>=c&&d<l){i=pt(f).add(i);break}}}return i}function vt(e){var t=e.closest("thead");var i=y().add(e);var n=e.closest("tr");var r=t.find("tr");var a=r.index(n)+e[0].rowSpan;var o=kendo.attr("colspan");if(a<=r.length-1){var s=n.next();var l=e.prevAll();var d;l=l.filter(function(){return!this.rowSpan||this.rowSpan===1});var u=0;for(d=0;d<l.length;d++){u+=parseInt(l.eq(d).attr(o),10)||1}var c=s.find("th");var f=parseInt(e.attr(o),10)||1;d=0;while(d<f){s=c.eq(d+u);i=i.add(vt(s));var h=parseInt(s.attr(o),10);if(h>1){f-=h-1}d++}}return i}function mt(e,t){var i=[];gt(e,t,i);return i[i.length-1]}function gt(e,t,i){i=i||[];for(var n=0;n<t.length;n++){if(e===t[n]){return true}else if(t[n].columns){var r=i.length;i.push(t[n]);if(!gt(e,t[n].columns,i)){i.splice(r,i.length-r)}else{return true}}}return false}function _t(e){var t=[];var i=[];for(var n=0;n<e.length;n++){t.push(e[n]);if(e[n].columns){i=i.concat(e[n].columns)}}if(i.length){t=t.concat(_t(i))}return t}function bt(e,t,i,n){var r;var a;i=i||0;n=n||{};n[i]=n[i]||0;for(a=0;a<t.length;a++){if(t[a]==e){r={cell:n[i],row:i};break}else if(t[a].columns){r=bt(e,t[a].columns,i+1,n);if(r){break}}n[i]++}return r}function wt(e,t,i){i=i||0;var n;var r;var a=t;t=F(t);var o={};var s=e.find(">tr:not(.k-filter-row)");var l=function(){var e=y(this);return!e.hasClass("k-group-cell")&&!e.hasClass("k-hierarchy-cell")};for(var d=0,u=t.length;d<u;d++){n=bt(t[d],a);if(!o[n.row]){o[n.row]=s.eq(n.row).find(".k-header").filter(l)}r=o[n.row].eq(n.cell);r.attr(kendo.attr("index"),i+d)}return t.length}function kt(e){var t=1;var i=0;for(var n=0;n<e.length;n++){if(e[n].columns){var r=kt(e[n].columns);if(r>i){i=r}}}return t+i}function P(e){return T(e,i("locked"))}function z(e){return T(e,Ge(i("locked")))}function yt(e,n){var t=e.find("tr");var r=t.length;t.each(function(e){var t=this.cells;for(var i=0;i<t.length;i++){if(t[i].colSpan<=1&&t[i].attributes.rowspan){n.children[e].children[i].attr.rowSpan=r-e;t[i].rowSpan=r-e}}})}function xt(e,t){var i=e.find("tr");var n=[];i.filter(function(e){var t=!y(this).children().length;if(t){n.push(e)}return t}).remove();for(var r=n.length-1;r>=0;r--){t.children.splice(n[r],1)}yt(e,t)}function B(e,t){if(t===true){e=y(e);var i,n;i=e.parent().scrollTop();n=kendo.scrollLeft(e.parent());kendo.focusElement(e);kendo.scrollLeft(e.parent().scrollTop(i),n)}else{y(e).one("focusin",function(e){e.preventDefault()}).focus()}}function Ct(e,t){var i;var n=e.offsetHeight;var r=t.offsetHeight;if(n>r){i=n+"px"}else if(n<r){i=r+"px"}if(i){e.style.height=t.style.height=i}}function St(e,t){if(!e||!t||!e.field||e.selectable||e.command||e.editable&&!e.editable(t)){return false}return e.field&&t.editable&&t.editable(e.field)}function Tt(e,t){var i=(e||{}).field||"";return t.dirty&&t.dirtyFields&&t.dirtyFields[i]&&St(e,t)}function L(e){return typeof e==="undefined"}function Dt(e){return typeof e==="number"&&!isNaN(e)}if(kendo.ExcelMixin){kendo.ExcelMixin.extend(it.prototype)}if(kendo.PDFMixin){kendo.PDFMixin.extend(it.prototype);it.prototype._drawPDF=function(r){var e=this;if(e.options.pdf.paperSize&&e.options.pdf.paperSize!="auto"){return e._drawPDF_autoPageBreak(r)}var t=new y.Deferred;var a=e.dataSource;var o=e.options.pdf.allPages;this._initPDFProgress(r);var s=new kendo.drawing.Group;var i=a.page();function l(){if(o&&i!==v){a.unbind("change",n);a.one("change",function(){t.resolve(s)});a.page(i)}else{t.resolve(s)}}function n(){e._drawPDFShadow({width:e.wrapper.width()},{avoidLinks:e.options.pdf.avoidLinks}).done(function(e){var t=a.page();var i=o?a.totalPages():1;var n={page:e,pageNumber:t,progress:t/i,totalPages:i};r.notify(n);s.append(n.page);if(t<i){a.page(t+1)}else{l()}}).fail(function(e){t.reject(e)})}if(o){a.bind("change",n);a.page(1)}else{n()}return t.promise()};it.prototype._initPDFProgress=function(e){var t=y("<div class='k-loading-pdf-mask'><div class='k-loading-color'></div></div>");t.prepend(this.wrapper.clone().css({position:"absolute",top:0,left:0}));this.wrapper.append(t);var i=y("<div class='k-loading-pdf-progress'>").appendTo(t).kendoProgressBar({type:"chunk",chunkCount:10,min:0,max:1,value:0}).data("kendoProgressBar");e.progress(function(e){i.value(e.progress)}).always(function(){kendo.destroy(t);t.remove()})};it.prototype._drawPDF_autoPageBreak=function(t){var i=this;var n=new y.Deferred;var r=i.dataSource;var a=i.options.pdf.allPages;var o=i.wrapper.find('table[role="treeList"] > tbody');var s=y("<div>").css({position:"absolute",left:-1e4,top:-1e4});var l=i.wrapper.clone().css({height:"auto",width:"auto"}).appendTo(s);l.find(".k-grid-content").css({height:"auto",width:"auto",overflow:"visible"});l.find('table[role="treeList"], .k-grid-footer table').css({height:"auto",width:"100%",overflow:"visible"});l.find(".k-grid-pager, .k-grid-toolbar, .k-grouping-header").remove();l.find(".k-grid-header, .k-grid-footer").css({paddingRight:0});this._initPDFProgress(t);var d=l.find('table[role="treeList"] > tbody').empty();var e=r.page();function u(){if(a&&e!==v){r.one("change",c);r.page(e)}else{i.refresh();c()}}function c(){s.appendTo(document.body);var e=y.extend({},i.options.pdf,{_destructive:true,progress:function(e){t.notify({page:e.page,pageNumber:e.pageNum,progress:.5+e.pageNum/e.totalPages/2,totalPages:e.totalPages})}});kendo.drawing.drawDOM(l,e).always(function(){s.remove()}).then(function(e){n.resolve(e)}).fail(function(e){n.reject(e)})}function f(){var e=r.page();var t=a?r.totalPages():1;d.append(o.find("tr"));if(e<t){r.page(e+1)}else{r.unbind("change",f);u()}}if(a){r.bind("change",f);r.page(1)}else{f()}return n.promise()}}g(true,kendo.data,{TreeListDataSource:qe,TreeListModel:M});a.plugin(it);a.plugin(Ze)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.gantt.data",["kendo.data","kendo.treelist"],e)})(function(){var e={id:"gantt.data",name:"GanttData",category:"web",description:"The Gantt Data.",depends:["data","treelist"],hidden:true};(function(e,l){var a=e.isArray,t=e.extend,o=e.map,i=kendo.data,s=i.Query,d=i.DataSource,n=i.TreeListDataSource,r=i.TreeListModel,u="parentId";var c=function(n,r){return function(e){e=a(e)?{data:e}:e;var t=e||{};var i=t.data;t.data=i;if(!(t instanceof n)&&t instanceof d){throw new Error("Incorrect DataSource type. Only "+r+" instances are supported")}return t instanceof n?t:new n(t)}};var f=function(e){if(e.filter("[name=end], [name=start], [name=plannedEnd], [name=plannedStart]").length){var t=e.attr("name"),i=kendo.widgetInstance(e,kendo.ui),n={},r=e,a,o;while(r!==window&&!a){r=r.parent();a=r.data("kendoEditable")}o=a?a.options.model:null;if(!o){return true}if(t.indexOf("planned")>=0){n.plannedStart=o.plannedStart;n.plannedEnd=o.plannedEnd}else{n.start=o.start;n.end=o.end}n[t]=i?i.value():kendo.parseDate(e.val());if(t.indexOf("planned")>=0){return n.plannedStart<=n.plannedEnd}else{return n.start<=n.end}}return true};var h=kendo.data.Model.define({id:"id",fields:{id:{type:"number",editable:false},predecessorId:{type:"number"},successorId:{type:"number"},type:{type:"number"}}});var p=d.extend({init:function(e){d.fn.init.call(this,t(true,{},{schema:{modelBase:h,model:h}},e))},dependencies:function(e){var t=this.predecessors(e),i=this.successors(e);t.push.apply(t,i);return t},predecessors:function(e){return this._dependencies("successorId",e)},successors:function(e){return this._dependencies("predecessorId",e)},_dependencies:function(e,t){var i=this.view();var n={field:e,operator:"eq",value:t};i=new s(i).filter(n).toArray();return i}});p.create=c(p,"GanttDependencyDataSource");var v=r.define({fields:{id:{type:"number",editable:false},parentId:{type:"number",defaultValue:null,validation:{required:true},nullable:true},orderId:{type:"number",validation:{required:true}},title:{type:"string",defaultValue:"New task"},start:{type:"date",validation:{required:true}},end:{type:"date",validation:{required:true,dateCompare:f,message:"End date should be after or equal to the start date"}},percentComplete:{type:"number",validation:{required:true,min:0,max:1,step:.01}},summary:{type:"boolean"},expanded:{type:"boolean",defaultValue:true},plannedStart:{type:"date",defaultValue:null,nullable:true},plannedEnd:{type:"date",defaultValue:null,nullable:true,validation:{dateCompare:f,message:"Planned end date should be after or equal to the planned start date"}}},duration:function(){var e=this.end,t=this.start;return e-t},plannedDuration:function(){var e=this.plannedEnd,t=this.plannedStart;if(e&&t){return e-t}return 0},isMilestone:function(){return this.duration()===0},_offset:function(e){var t=["start","end"],i;for(var n=0;n<t.length;n++){i=new Date(this.get(t[n]).getTime()+e);this.set(t[n],i)}},_offsetPlanned:function(e){var t=["plannedStart","plannedEnd"],i;for(var n=0;n<t.length;n++){i=new Date(this.get(t[n]).getTime()+e);this.set(t[n],i)}}});v.define=function(e,t){if(t===l){t=e;e=v}var i=t.parentId||u;t.parentIdField=i;var n=r.define(e,t);if(i){n.parentIdField=i}return n};var m=n.extend({init:function(e){n.fn.init.call(this,t(true,{},{schema:{modelBase:v,model:v},sort:{field:"orderId",dir:"asc"}},e))},add:function(e){if(!e){return}e=this._toGanttTask(e);return this.insert(this.taskSiblings(e).length,e)},insert:function(e,t){if(!t){return}t=this._toGanttTask(t);t.set("orderId",e);t=d.fn.insert.call(this,e,t);this._reorderSiblings(t,this.taskSiblings(t).length-1);this._resolveSummaryFields(this.taskParent(t));return t},remove:function(e){var t=e.get("parentId"),i=this.taskAllChildren(e);this._removeItems(i);e=n.fn.remove.call(this,e);this._childRemoved(t,e.get("orderId"));return e},taskAllChildren:function(e){var i=[],n=this;var r=function(e){var t=n.taskChildren(e);i.push.apply(i,t);o(t,r)};if(!!e){r(e)}else{i=this.view()}return i},taskChildren:function(e){var t=this.view();var i={field:"parentId",operator:"eq",value:null};var n=this._sort&&this._sort.length?this._sort:{field:"orderId",dir:"asc"};var r;if(!!e){r=e.get("id");if(r===l||r===null||r===""){return[]}i.value=r}t=new s(t).filter(i).sort(n).toArray();return t},taskLevel:function(e){var t=0,i=this.taskParent(e);while(i!==null){t+=1;i=this.taskParent(i)}return t},taskParent:function(e){if(!e||e.get("parentId")===null){return null}return this.get(e.parentId)},taskSiblings:function(e){if(!e){return null}var t=this.taskParent(e);return this.taskChildren(t)},taskTree:function(e){var t=[],i,n=this.taskChildren(e);for(var r=0,a=n.length;r<a;r++){i=n[r];t.push(i);if(i.get("expanded")){var o=this.taskTree(i);t.push.apply(t,o)}}return t},update:function(e,t){var a=this,n;var r=function(e,t){var i=a.taskAllChildren(e);for(var n=0,r=i.length;n<r;n++){i[n]._offset(t)}};var o=function(e,t){var i=a.taskAllChildren(e);for(var n=0,r=i.length;n<r;n++){i[n]._offsetPlanned(t)}};var i=function(e){var t=e.field,i=e.sender;switch(t){case"start":a._resolveSummaryStart(a.taskParent(i));r(i,i.get(t).getTime()-n.getTime());break;case"end":a._resolveSummaryEnd(a.taskParent(i));break;case"plannedStart":a._resolveSummaryPlannedStart(a.taskParent(i));if(i.get(t)&&n){o(i,i.get(t).getTime()-n.getTime())}break;case"plannedEnd":a._resolveSummaryPlannedEnd(a.taskParent(i));break;case"percentComplete":a._resolveSummaryPercentComplete(a.taskParent(i));break;case"orderId":a._reorderSiblings(i,n);break}};if(t.parentId!==l){n=e.get("parentId");if(n!==t.parentId){e.set("parentId",t.parentId);a._childRemoved(n,e.get("orderId"));e.set("orderId",a.taskSiblings(e).length-1);a._resolveSummaryFields(a.taskParent(e))}delete t.parentId}e.bind("change",i);e.bind("equalSet",i);for(var s in t){n=e.get(s);if(s==="plannedStart"||s==="plannedEnd"){if(n!==l||t[s]!==null){e.set(s,t[s])}}else{e.set(s,t[s])}}e.unbind("change",i);e.unbind("equalSet",i)},_childRemoved:function(e,t){var i=e===null?null:this.get(e),n=this.taskChildren(i);for(var r=t,a=n.length;r<a;r++){n[r].set("orderId",r)}this._resolveSummaryFields(i)},_resolveSummaryFields:function(e){if(!e){return}this._updateSummary(e);if(!this.taskChildren(e).length){return}this._resolveSummaryStart(e);this._resolveSummaryEnd(e);this._resolveSummaryPlannedStart(e);this._resolveSummaryPlannedEnd(e);this._resolveSummaryPercentComplete(e)},_resolveSummaryStart:function(e){var o=this;var t=function(e){var t=o.taskChildren(e);var i=t[0].start.getTime();var n;for(var r=1,a=t.length;r<a;r++){n=t[r].start.getTime();if(n<i){i=n}}return new Date(i)};this._updateSummaryRecursive(e,"start",t)},_resolveSummaryEnd:function(e){var o=this;var t=function(e){var t=o.taskChildren(e);var i=t[0].end.getTime();var n;for(var r=1,a=t.length;r<a;r++){n=t[r].end.getTime();if(n>i){i=n}}return new Date(i)};this._updateSummaryRecursive(e,"end",t)},_resolveSummaryPlannedStart:function(e){var o=this;var t=function(e){var t=o.taskChildren(e),i=null,n;for(var r=0,a=t.length;r<a;r++){if(t[r].plannedStart){n=t[r].plannedStart.getTime();if(!i||n<i){i=n}}}if(!i){return null}return new Date(i)};this._updateSummaryRecursive(e,"plannedStart",t)},_resolveSummaryPlannedEnd:function(e){var o=this;var t=function(e){var t=o.taskChildren(e),i=null,n;for(var r=0,a=t.length;r<a;r++){if(t[r].plannedEnd){n=t[r].plannedEnd.getTime();if(!i||n>i){i=n}}}if(!i){return null}return new Date(i)};this._updateSummaryRecursive(e,"plannedEnd",t)},_resolveSummaryPercentComplete:function(e){var n=this;var t=function(e){var t=n.taskChildren(e);var i=new s(t).aggregate([{field:"percentComplete",aggregate:"average"}]);return i.percentComplete.average};this._updateSummaryRecursive(e,"percentComplete",t)},_reorderSiblings:function(e,t){var i=e.get("orderId"),n=i>t,r=n?t:i,a=n?i:t,o=n?r:r+1,s=this.taskSiblings(e);if(!s.length){return}a=Math.min(a,s.length-1);for(var l=r;l<=a;l++){if(s[l]===e){continue}s[l].set("orderId",o);o+=1}},_toGanttTask:function(e){if(!(e instanceof v)){var t=e;e=d.fn._createNewModel.call(this);e.accept(t)}return e},_updateSummary:function(e){if(e!==null){var t=this.taskChildren(e).length;e.set("summary",t>0)}},_updateSummaryRecursive:function(e,t,i){if(!e){return}var n=i(e);e.set(t,n);var r=this.taskParent(e);if(r){this._updateSummaryRecursive(r,t,i)}}});m.create=c(m,"GanttDataSource");t(true,kendo.data,{GanttDataSource:m,GanttTask:v,GanttDependencyDataSource:p,GanttDependency:h})})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.gantt.editors",["kendo.data","kendo.popup","kendo.window","kendo.gantt.data","kendo.grid","kendo.datetimepicker","kendo.numerictextbox"],e)})(function(){var e={id:"gantt.editors",name:"GanttEditors",category:"web",description:"The Gantt component editors.",depends:["data","popup","window","gantt.data","grid","datetimepicker","numerictextbox"],hidden:true};(function(c,e){var h=window.kendo,t=h.ui,o=h.support.browser,i=h.Observable,n=t.Widget,s=h._outerWidth,a=c.extend({F10:121},h.keys),l=c.proxy,p=c.extend,r=c.isPlainObject,f=".kendoGantt",d="p0",u="tabIndex",v="click",m="width",g="string",_="aria-activedescendant",b="action-option-focused",w=".",k={down:{origin:"bottom left",position:"top left"},up:{origin:"top left",position:"bottom left"}},y=h.template('<div class="#=styles.popupWrapper#">'+'<ul class="#=styles.popupList#" role="listbox">'+"#for(var i = 0, l = actions.length; i < l; i++){#"+'<li class="#=styles.item#" data-action="#=actions[i].data#" role="option">#=actions[i].text#</span>'+"#}#"+"</ul>"+"</div>");var x={buttonDelete:"k-gantt-delete",buttonCancel:"k-gantt-cancel",buttonSave:"k-gantt-update",focused:"k-state-focused",gridContent:"k-grid-content",hovered:"k-state-hover",item:"k-item",popupWrapper:"k-list-container",popupList:"k-list k-reset",popup:{form:"k-popup-edit-form",editForm:"k-gantt-edit-form",formContainer:"k-edit-form-container",resourcesFormContainer:"k-resources-form-container",message:"k-popup-message",buttonsContainer:"k-edit-buttons k-state-default",button:"k-button",editField:"k-edit-field",editLabel:"k-edit-label",resourcesField:"k-gantt-resources"},primary:"k-primary",toolbar:{appendButton:"k-gantt-create"}};var C=function(e,t){var i={name:t.field,title:t.title};var n=t.model.fields[t.field].validation;if(n&&r(n)&&n.message){i[h.attr("dateCompare-msg")]=n.message}c('<input type="text" required '+h.attr("type")+'="date" '+h.attr("role")+'="datetimepicker" '+h.attr("bind")+'="value:'+t.field+'" '+h.attr("validate")+"='true' />").attr(i).appendTo(e);c("<span "+h.attr("for")+'="'+t.field+'" class="k-invalid-msg"/>').hide().appendTo(e)};var S=function(e,t){c('<a href="#" class="'+t.styles.button+'">'+t.messages.assignButton+"</a>").click(t.click).appendTo(e)};var T=i.extend({init:function(e,t){i.fn.init.call(this);this.element=e;this.options=p(true,{},this.options,t);this._popup()},options:{direction:"down",navigatable:false},destroy:function(){clearTimeout(this._focusTimeout);this.popup.destroy();this.element.off(f);this.list.off(f);this.unbind()},_adjustListWidth:function(){var e=this.list;var t=e[0].style.width;var i=this.element;var n=s(e);var r;var a;if(!e.data(m)&&t){return}r=window.getComputedStyle?window.getComputedStyle(i[0],null):0;a=r?parseFloat(r.width):s(i);if(r&&(o.mozilla||o.msie)){a+=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)+parseFloat(r.borderLeftWidth)+parseFloat(r.borderRightWidth)}if(e.css("box-sizing")!=="border-box"){t=a-(s(e)-e.width())}else{t=a}if(n>t){t=n}e.css({fontFamily:i.css("font-family"),width:t}).data(m,t)},_current:function(e){var t=this.list.find(w+x.focused);var i=t[e]();if(i.length){t.removeClass(x.focused).removeAttr("id");i.addClass(x.focused).attr("id",b);this.list.find("ul").removeAttr(_).attr(_,b)}},_popup:function(){var n=this;var e="li"+w+x.item;var t=this.options.messages.actions;var r=this.options.navigatable;this.list=c(y({styles:x,actions:[{data:"add",text:t.addChild},{data:"insert-before",text:t.insertBefore},{data:"insert-after",text:t.insertAfter}]}));this.element.append(this.list);this.popup=new h.ui.Popup(this.list,p({anchor:this.element,open:function(){n._adjustListWidth()},animation:this.options.animation},k[this.options.direction]));this.element.on(v+f,function(e){var t=c(this);var i=t.attr(h.attr("action"));e.preventDefault();if(i){n.trigger("command",{type:i})}else{n.popup.open();if(r){n.list.find("li:first").addClass(x.focused).attr("id",b).end().find("ul").attr({TABINDEX:0,"aria-activedescendant":b}).focus()}}});this.list.find(e).hover(function(){c(this).addClass(x.hovered)},function(){c(this).removeClass(x.hovered)}).end().on(v+f,e,function(){n.trigger("command",{type:c(this).attr(h.attr("action"))});n.popup.close()});if(r){this.popup.bind("close",function(){n.list.find(e).removeClass(x.focused).end().find("ul").attr(u,0);n.element.parents("["+h.attr("role")+'="gantt"]').find(w+x.gridContent+" > table:first").focus()});this.list.find("ul").on("keydown"+f,function(e){var t=e.keyCode;switch(t){case a.UP:e.preventDefault();n._current("prev");break;case a.DOWN:e.preventDefault();n._current("next");break;case a.ENTER:n.list.find(w+x.focused).click();break;case a.ESC:e.preventDefault();n.popup.close();break}})}}});var D={desktop:{dateRange:C,resources:S}};var A=h.Observable.extend({init:function(e,t){h.Observable.fn.init.call(this);this.element=e;this.options=p(true,{},this.options,t);this.createButton=this.options.createButton},fields:function(e,t,i){var n=this;var r=this.options;var a=r.messages.editor;var o=r.resources;var s;var l=function(e){e.preventDefault();o.editor(n.container.find(w+x.popup.resourcesField),t)};if(r.editable.template){s=c.map(t.fields,function(e,t){return{field:t}})}else{s=[{field:"title",title:a.title},{field:"start",title:a.start,editor:e.dateRange},{field:"end",title:a.end,editor:e.dateRange},{field:"percentComplete",title:a.percentComplete,format:d}];if(i){s.splice.apply(s,[1,0].concat([{field:"plannedStart",title:a.plannedStart,editor:e.dateRange},{field:"plannedEnd",title:a.plannedEnd,editor:e.dateRange}]))}if(t.get(o.field)){s.push({field:o.field,title:a.resources,messages:a,editor:e.resources,click:l,styles:x.popup})}}return s},_buildEditTemplate:function(e,t,i){var n=this.options.resources;var r=this.options.editable.template;var a=p({},h.Template,this.options.templateSettings);var o=a.paramName;var s=x.popup;var l="";if(r){if(typeof r===g){r=h.unescape(r)}l+=h.template(r,a)(e)}else{for(var d=0,u=t.length;d<u;d++){var c=t[d];l+='<div class="'+s.editLabel+'"><label for="'+c.field+'">'+(c.title||c.field||"")+"</label></div>";if(c.field===n.field){l+='<div class="'+s.resourcesField+'" style="display:none"></div>'}if(!e.editable||e.editable(c.field)){i.push(c);l+="<div "+h.attr("container-for")+'="'+c.field+'" class="'+s.editField+'"></div>'}else{var f="#:";if(c.field){c=h.expr(c.field,o);f+=c+"==null?'':"+c}else{f+="''"}f+="#";f=h.template(f,a);l+='<div class="'+s.editField+'">'+f(e)+"</div>"}}}return l}});var E=A.extend({destroy:function(){this.close();this.unbind()},close:function(){var e=this;var t=function(){if(e.editable){e.editable.destroy();e.editable=null;e.container=null}if(e.popup){e.popup.destroy();e.popup=null}};if(this.editable&&this.container.is(":visible")){e.trigger("close",{window:e.container});this.container.data("kendoWindow").bind("deactivate",t).close()}else{t()}},editTask:function(e,t){this.editable=this._createPopupEditor(e,t)},showDialog:function(e){var i=e.buttons;var t=x.popup;var n=h.format('<div class="{0}"><div class="{1}"><p class="{2}">{3}</p><div class="{4}">',t.form,t.formContainer,t.message,e.text,t.buttonsContainer);for(var r=0,a=i.length;r<a;r++){n+=this.createButton(i[r])}n+="</div></div></div>";var o=this.element;if(this.popup){this.popup.destroy()}var s=this.popup=c(n).appendTo(o).eq(0).on("click",w+t.button,function(e){e.preventDefault();s.close();var t=c(e.currentTarget).index();i[t].click()}).kendoWindow({modal:true,autoFocus:false,resizable:false,draggable:false,title:e.title,visible:false,deactivate:function(){this.destroy();o.focus()}}).getKendoWindow();s.center().open();s.element.find(".k-primary").focus()},_createPopupEditor:function(o,s){var l=this;var e={};var t=this.options.messages;var i=x.popup;var n=h.format('<div {0}="{1}" class="{2} {3}"><div class="{4}">',h.attr("uid"),o.uid,i.form,i.editForm,i.formContainer);var r=this.fields(D.desktop,o,s);var a=[];n+=this._buildEditTemplate(o,r,a);n+='<div class="'+i.buttonsContainer+'">';n+=this.createButton({name:"update",text:t.save,className:x.primary});n+=this.createButton({name:"cancel",text:t.cancel});if(l.options.editable.destroy!==false){n+=this.createButton({name:"delete",text:t.destroy})}n+="</div></div></div>";var d=this.container=c(n).appendTo(this.element).eq(0).kendoWindow(p({modal:true,resizable:false,draggable:true,title:t.editor.editorTitle,visible:false,close:function(e){if(e.userTriggered){if(l.trigger("cancel",{container:d,model:o})){e.preventDefault()}}}},e));var u=d.kendoEditable({fields:a,model:o,clearContainer:false,validateOnBlur:true,target:l.options.target}).data("kendoEditable");h.cycleForm(d);if(!this.trigger("edit",{container:d,model:o})){d.data("kendoWindow").center().open();d.on(v+f,w+x.buttonCancel,function(e){e.preventDefault();e.stopPropagation();l.trigger("cancel",{container:d,model:o})});d.on(v+f,w+x.buttonSave,function(e){e.preventDefault();e.stopPropagation();var t=l.fields(D.desktop,o,s);var i={};var n;for(var r=0,a=t.length;r<a;r++){n=t[r].field;i[n]=o.get(n)}l.trigger("save",{container:d,model:o,updateInfo:i})});d.on(v+f,w+x.buttonDelete,function(e){e.preventDefault();e.stopPropagation();l.trigger("remove",{container:d,model:o})})}else{l.trigger("cancel",{container:d,model:o})}return u}});var I=n.extend({init:function(e,t){n.fn.init.call(this,e,t);this.wrapper=this.element;this.model=this.options.model;this.resourcesField=this.options.resourcesField;this.createButton=this.options.createButton;this._initContainer();this._attachHandlers()},events:["save"],close:function(){this.window.bind("deactivate",l(this.destroy,this)).close()},destroy:function(){this._dettachHandlers();this.grid.destroy();this.grid=null;this.window.destroy();this.window=null;n.fn.destroy.call(this);h.destroy(this.wrapper);this.element=this.wrapper=null},open:function(){this.window.center().open()},_attachHandlers:function(){var r=this.grid;var t=this._cancelProxy=l(this._cancel,this);this.container.on(v+f,w+x.buttonCancel,this._cancelProxy);this._saveProxy=l(this._save,this);this.container.on(v+f,w+x.buttonSave,this._saveProxy);this.window.bind("close",function(e){if(e.userTriggered){t(e)}});r.wrapper.on(v+f,"input[type='checkbox']",function(){var e=c(this);var t=c(e).closest("tr");var i=r.dataSource.getByUid(t.attr(h.attr("uid")));var n=c(e).is(":checked")?1:"";i.set("value",n)})},_cancel:function(e){e.preventDefault();this.close()},_createButtons:function(){var e=this.options.buttons;var t='<div class="'+x.popup.buttonsContainer+'">';for(var i=0,n=e.length;i<n;i++){t+=this.createButton(e[i])}t+="</div>";this.container.append(t)},_dettachHandlers:function(){this._cancelProxy=null;this._saveProxy=null;this.container.off(f);this.grid.wrapper.off()},_initContainer:function(){var e=this;var t=x.popup;var i=h.format('<div class="{0} {1}"><div class="{2} {3}"></div></div>"',t.form,t.editForm,t.formContainer,t.resourcesFormContainer);i=c(i);this.container=i.find(w+t.resourcesFormContainer);this.window=i.kendoWindow({modal:true,resizable:false,draggable:true,visible:false,title:this.options.messages.resourcesEditorTitle,open:function(){e.grid.resize(true)}}).data("kendoWindow");this._resourceGrid();this._createButtons()},_resourceGrid:function(){var e=this;var t=this.options.messages;var i=c('<div id="resources-grid"/>').appendTo(this.container);this.grid=new h.ui.Grid(i,{columns:[{field:"name",title:t.resourcesHeader,template:"<label><input type='checkbox' value='#=name#'"+"# if (value > 0 && value !== null) {#"+"checked='checked'"+"# } #"+"/>#=name#</labe>"},{field:"value",title:t.unitsHeader,template:function(e){var t=e.format;var i=e.value!==null?e.value:"";return t?h.toString(i,t):i}}],height:280,sortable:true,editable:true,filterable:true,dataSource:{data:e.options.data,schema:{model:{id:"id",fields:{id:{from:"id"},name:{from:"name",type:"string",editable:false},value:{from:"value",type:"number",validation:this.options.unitsValidation},format:{from:"format",type:"string"}}}}},save:function(e){var t=!!e.values.value;e.container.parent().find("input[type='checkbox']").prop("checked",t)}})},_save:function(e){e.preventDefault();this._updateModel();if(!this.wrapper.is(w+x.popup.resourcesField)){this.trigger("save",{container:this.wrapper,model:this.model})}this.close()},_updateModel:function(){var e=[];var t;var i=this.grid.dataSource.data();for(var n=0,r=i.length;n<r;n++){t=i[n].get("value");if(t!==null&&t>0){e.push(i[n])}}this.model[this.resourcesField]=e}});h.gantt={TaskDropDown:T,Editor:A,PopupEditor:E,ResourceEditor:I}})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.gantt.list",["kendo.treelist","kendo.treeview.draganddrop"],e)})(function(){var e={id:"gantt.list",name:"Gantt List",category:"web",description:"The Gantt List",depends:["treelist","treeview.draganddrop"],hidden:true};(function(s){var o=s.extend,l=s.map,d=s.proxy,u=s.isFunction,a=kendo.ui,i=a.TreeList,c=kendo._outerHeight,f=kendo._activeElement,h=kendo.keys,t=kendo.support.mobileOS,e=kendo.attr("type"),n=kendo.attr("bind"),r=kendo.attr("format"),p="string",v=".kendoGanttList",m="dblclick",g="focusin",_="focusout",b="keydown",w="keyup",k="mousedown",y="beforeEdit",x="edit",C="save",S="cancel",T="render",D=".",A="{0:"+kendo.getCulture().calendar.patterns.d+"}",E={title:"Title",start:"Start Time",end:"End Time",percentComplete:"% Done",parentId:"Predecessor ID",id:"ID",orderId:"Order ID"},I="<table style='visibility: hidden;'>"+"<tbody>"+"<tr style='height:{0}'>"+"<td>&nbsp;</td>"+"</tr>"+"</tbody>"+"</table>",M={gridHeader:"k-grid-header",gridContentWrap:"k-grid-content",editCell:"k-edit-cell",iconCollapse:"k-i-collapse",iconExpand:"k-i-expand"};var R=a.GanttList=i.extend({init:function(e,t){if(this.options.columns.length===0){this.options.columns.push("title")}i.fn.init.call(this,e,t);this._unbindDataSource();this._adjustHeight();this._setWidth()},options:{name:"GanttList",autoBind:false,sortable:true,selectable:true,navigatable:false,editable:{move:true,mode:"incell"},resizable:false,renderAllRows:false},destroy:function(){i.fn.destroy.call(this);kendo.destroy(this.element)},closeCell:function(e){var t=this;var i=(t.editor||{}).element;var n;var r;if(!i||!i[0]||!t._isIncellEditable()){return}r=t.dataItem(i);t._cancelEditor();i.removeClass(M.editCell);n=i.parent().removeClass(M.editRow);if(t.lockedContent){t._relatedRow(n).removeClass(M.editRow)}if(e){t._render()}t.trigger("itemChange",{item:n,data:r,ns:a});if(t.lockedContent){t._adjustRowHeight(n.css("height","")[0],t._relatedRow(n).css("height","")[0])}},insertAfter:function(e,t){if(!e||!t){return}var i=t.orderId;var n={parentId:t.parentId};if(t.parentId===e.parentId&&t.orderId>e.orderId){n.orderId=i}else{n.orderId=i+1}this.trigger("reorder",{task:e,updateInfo:n})},insertBefore:function(e,t){if(!e||!t){return}var i=t.orderId;var n={parentId:t.parentId};if(t.parentId===e.parentId&&t.orderId>e.orderId){n.orderId=i-1}else{n.orderId=i}this.trigger("reorder",{task:e,updateInfo:n})},_adjustHeight:function(){var e=this.element;var t=e.find(D+M.gridContentWrap);var i=e.find(D+M.gridHeader);var n;var r=kendo.support.scrollbar();if(this._isHeightSet(e)){n=e.height()-c(i);t.height(n);if(this._hasLockedColumns){r=this.table[0].offsetWidth>this.table.parent()[0].clientWidth?r:0;this.lockedContent.height(n-r)}}},_adjustRowHeight:function(e,t){var i;var n=e.offsetHeight;var r=t.offsetHeight;if(n>r){i=n+"px"}else if(n<r){i=r+"px"}if(i){e.style.height=t.style.height=i}},_isHeightSet:function(e){var t,i;if(e[0].style.height){return true}else{t=e.height()}e.height("auto");i=e.height();e.height("");return t!=i},_attachCellEditingEventHandlers:function(){var n=this,e=n.options.editable;if(n._isIncellEditable()&&e.update!==false){n._startEditHandler=function(e){var t=e.currentTarget?s(e.currentTarget):e;var i=n._columnFromElement(t);if(n.editable){return}if(i&&i.editable()){n._editCell(t,i,n._modelFromElement(t))}};n.content.on(g+v,d(n._focusInEditableHandler,n)).on(_+v,d(n._focusoutCellHandler,n)).on(b+v,"tr:not(.k-grouping-row) > td",d(n._keydownHandler,n)).on(w+v,"tr:not(.k-grouping-row) > td",d(n._keyupHandler,n));if(!t){n.content.on(k+v,"tr:not(.k-grouping-row) > td",d(n._mouseDownHandler,n)).on(m+v,"tr:not(.k-grouping-row) > td",d(n._openEditorHandler,n))}else{n.touch=n.content.kendoTouch({filter:"td",touchstart:function(e){n._mouseDownHandler(e.touch)},doubletap:function(e){if(e.event.target.classList.contains("k-icon")){return}n._openEditorHandler(e.touch)}}).data("kendoTouch")}}},_blurActiveElement:function(){var e=kendo._activeElement();if(e&&e.nodeName.toLowerCase()!=="body"){s(e).blur()}},_closeCellTimeouted:function(){var e=this,t=f(),i=e.editor||{},n=i.element;if(n&&n[0]&&t&&!s.contains(n[0],t)&&n[0]!==t&&!s(t).closest(".k-animation-container").length){if(i.end()){e.closeCell()}}},_columns:function(){var t=this,e=this.options.columns;t._hasExpandable=false;e.forEach(function(e){if(e.expandable){t._hasExpandable=true}});t.columns=t.options.columns=l(e,d(t._eachColumn,t));i.fn._columns.call(t)},_columnEditor:function(a){var o={name:a.field,required:true};o[n]="value:"+a.field;o[e]="date";o[r]=kendo._extractFormat(a.format);return function(e,t){var i=t.model,n=i.fields[a.field]||i[a.field],r=n.validation;if(r&&r.dateCompare&&u(r.dateCompare)&&r.message){s("<span "+kendo.attr("for")+'="'+a.field+'" class="k-invalid-msg"/>').hide().appendTo(e);o[kendo.attr("dateCompare-msg")]=r.message}s('<input type="text"/>').attr(o).prependTo(e).kendoDateTimePicker({format:t.format})}},_columnFromElement:function(e){var t=e.closest("td"),i=t.parent(),n=i.children().index(t);return this.columns[n]},_eachColumn:function(e){var t=this,r=t.options.resourcesField,i=this.options.sortable;var n=function(){this.field="";this.title="";this.editable=function(){return false};this.sortable=false};var a=function(e){var t=e.get(r)||[],i=[];for(var n=0;n<t.length;n++){i.push(kendo.format("{0} [{1}]",t[n].get("name"),t[n].get("formatedValue")))}return i.join(", ")};if(e.columns){t.hasNestedColumns=true;e.columns=l(e.columns,d(this._eachColumn,this))}if(typeof e===p){e={field:e,title:E[e]}}if(e.editable===true){e.editable=function(){return true}}else{e.editable=function(){return false}}if(e.field==="start"||e.field==="end"){e.format=kendo.getCulture().calendar.patterns[e.format]||e.format||A;if(!e.editor){if(e.format===A||e.format.toLowerCase().indexOf("h")>-1){e.editor=t._columnEditor(e)}}}if(e.field===r){e.sortable=false;e.template=e.template||a}if(!t._hasExpandable&&e.field==="title"){e.expandable=true}if(i&&!e.sortable){e.sortable=false}return o(new n,e)},_editCell:function(t,e,i){var n=this,r=n.options.resourcesField,a=n.dataSource._createNewModel(i.toJSON()),o;if(e.field===r){e.editor(t,a);return}else{if(n.trigger(y,{model:i,container:t})){n.dataSource._restorePageSizeAfterAddChild();return}n.closeCell();i._edit=true;n._cancelEditor();n._render({editedColumn:e,editedColumnIndex:t.index()});o=n.table.add(n.lockedTable).find(D+M.editCell).first();n.editor=n._createIncellEditor(o,{columns:[e],model:i,change:function(e){if(n.trigger(C,{values:e.values,container:t,model:i})){e.preventDefault()}}});n._current=o;n.trigger(x,{container:t,model:i})}},_focusInEditableHandler:function(e){var t=this,i=e.target;if(!s.contains(i,f())){clearTimeout(t._closeCellTimeout);t._closeCellTimeout=null}},_focusoutCellHandler:function(e){var t=this;t._closeCellTimeout=setTimeout(function(){t._closeCellTimeouted(e)},1)},_keydownHandler:function(e){if(e.keyCode===h.ENTER){e.preventDefault()}},_keyupHandler:function(e){var t=this,i=e.keyCode,n,r;switch(i){case h.ENTER:t._blurActiveElement();t._closeCellTimeouted(e);break;case h.ESC:if(t.editor){n=s(e.target);r=t._modelFromElement(n);t.trigger(S,{model:r,cell:n})}break}},_modelFromElement:function(e){var t=e.closest("tr"),i=this.dataSource.getByUid(t.attr(kendo.attr("uid")));return i},_mouseDownHandler:function(e){var t=s(e.currentTarget);if(!t.hasClass(M.editCell)){this._blurActiveElement()}},_openEditorHandler:function(e){var t=this,i=s(e.currentTarget),n=t.lockedTable&&i.closest("table")[0]===t.lockedTable[0],r=t.selectable&&t.selectable.options.multiple;if(i.hasClass(M.editCell)||i.has("a.k-grid-delete").length||i.has("button.k-grid-delete").length||i.closest("tbody")[0]!==t.tbody[0]&&!n||s(e.target).is(":input")||s(e.target).hasClass(M.iconExpand)||s(e.target).hasClass(M.iconCollapse)){return}if(t.editor){if(t.editor.end()){if(r){s(f()).blur()}t.closeCell();t.editCell(i)}}else{t.editCell(i)}},_renderTree:function(e){i.fn._render.call(this);if(this.hasNestedColumns){this.element.addClass("k-gantt-treelist-nested-columns")}if(e&&e.length&&!e.editedColumn){if(this.options.rowHeight){this._rowHeight(e)}this.trigger(T)}},_rowHeight:function(e){var t=this.content,i=this.options,n=typeof i.rowHeight===p?i.rowHeight:i.rowHeight+"px",r=s(kendo.format(I,n)),a;t.append(r);a=c(r.find("tr"));r.remove();this.element.find('[role="treegrid"]').css("height",e.length*a+"px")},_setData:function(e){this.dataSource.data(e)},_setWidth:function(){this.element.find(".k-grid-header table").css("minWidth",this.options.listWidth);this.content.find("table").css("minWidth",this.options.listWidth)}});a.plugin(R)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.touch",["kendo.core","kendo.userevents"],e)})(function(){var e={id:"touch",name:"Touch",category:"mobile",description:"The kendo Touch widget provides a cross-platform compatible API for handling user-initiated touch events, multi-touch gestures and event sequences (drag, swipe, etc.). ",depends:["core","userevents"]};(function(e,t){var a=window.kendo,o=a.ui.Widget,s=e.proxy,l=Math.abs,r=20;var i=o.extend({init:function(e,t){var i=this;o.fn.init.call(i,e,t);t=i.options;e=i.element;i.wrapper=e;function n(t){return function(e){i._triggerTouch(t,e)}}function r(t){return function(e){i.trigger(t,{touches:e.touches,distance:e.distance,center:e.center,event:e.event})}}i.events=new a.UserEvents(e,{filter:t.filter,surface:t.surface,minHold:t.minHold,multiTouch:t.multiTouch,allowSelection:true,fastTap:t.fastTap,press:n("touchstart"),hold:n("hold"),tap:s(i,"_tap"),gesturestart:r("gesturestart"),gesturechange:r("gesturechange"),gestureend:r("gestureend")});if(t.enableSwipe){i.events.bind("start",s(i,"_swipestart"));i.events.bind("move",s(i,"_swipemove"))}else{i.events.bind("start",s(i,"_dragstart"));i.events.bind("move",n("drag"));i.events.bind("end",n("dragend"))}a.notify(i)},events:["touchstart","dragstart","drag","dragend","tap","doubletap","hold","swipe","gesturestart","gesturechange","gestureend"],options:{name:"Touch",surface:null,global:false,fastTap:false,filter:null,multiTouch:false,enableSwipe:false,minXDelta:30,maxYDelta:20,maxDuration:1e3,minHold:800,doubleTapTimeout:800},cancel:function(){this.events.cancel()},destroy:function(){o.fn.destroy.call(this);this.events.destroy()},_triggerTouch:function(e,t){if(this.trigger(e,{touch:t.touch,event:t.event})){t.preventDefault()}},_tap:function(e){var t=this,i=t.lastTap,n=e.touch;if(i&&n.endTime-i.endTime<t.options.doubleTapTimeout&&a.touchDelta(n,i).distance<r){t._triggerTouch("doubletap",e);t.lastTap=null}else{t._triggerTouch("tap",e);t.lastTap=n}},_dragstart:function(e){this._triggerTouch("dragstart",e)},_swipestart:function(e){if(l(e.x.velocity)*2>=l(e.y.velocity)){e.sender.capture()}},_swipemove:function(e){var t=this,i=t.options,n=e.touch,r=e.event.timeStamp-n.startTime,a=n.x.initialDelta>0?"right":"left";if(l(n.x.initialDelta)>=i.minXDelta&&l(n.y.initialDelta)<i.maxYDelta&&r<i.maxDuration){t.trigger("swipe",{direction:a,touch:e.touch});n.cancel()}}});a.ui.plugin(i)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.gantt.timeline",["kendo.dom","kendo.touch","kendo.draganddrop"],e)})(function(){var e={id:"gantt.timeline",name:"Gantt Timeline",category:"web",description:"The Gantt Timeline",depends:["dom","touch","draganddrop"],hidden:true};(function(_){var i=kendo.ui.Widget;var y=kendo.dom.element;var f=kendo.dom.text;var h=kendo.dom.html;var l=_.isPlainObject;var v=kendo._outerWidth;var b=kendo._outerHeight;var d=_.extend;var t=_.proxy;var x=false;var r=kendo.keys;var a=kendo.data.Query;var u="string";var o=".kendoGanttTimeline";var s="click";var c="dblclick";var p="mousemove";var m="mouseenter";var g="mouseleave";var w="keydown";var k=".";var e=kendo.template("#=kendo.toString(start, 't')#");var n=kendo.template("#=kendo.toString(start, 'ddd M/dd')#");var C=kendo.template("#=kendo.toString(start, 'ddd M/dd')# - #=kendo.toString(kendo.date.addDays(end, -1), 'ddd M/dd')#");var S=kendo.template("#=kendo.toString(start, 'MMM')#");var T=kendo.template("#=kendo.toString(start, 'yyyy')#");var D=kendo.template('<div class="#=styles.marquee#">'+'<div class="#=styles.marqueeColor#"></div>'+"</div>");var A=kendo.template('<div style="z-index: 100002;" class="#=styles.tooltipWrapper# k-gantt-resize-hint">'+'<div class="#=styles.tooltipContent#">'+"<div>#=messages.start#: #=kendo.toString(start, format)#</div>"+"<div>#=messages.end#: #=kendo.toString(end, format)#</div>"+"</div>"+"</div>");var E=kendo.template('<div style="z-index: 100002;" class="#=styles.tooltipWrapper#" >'+'<div class="#=styles.tooltipContent#">#=text#%</div>'+'<div class="#=styles.tooltipCallout#" style="left:13px;"></div>'+"</div>");var I=kendo.template('<div class="#=kendo.htmlEncode(styles.taskDetails)#">'+"<strong>#=kendo.htmlEncode(task.title)#</strong>"+'<div class="#=styles.taskDetailsPercent#">#=kendo.toString(task.percentComplete, "p0")#</div>'+'<ul class="#=styles.reset#">'+'<li>#=messages.start#: #=kendo.toString(task.start, "h:mm tt ddd, MMM d")#</li>'+'<li>#=messages.end#: #=kendo.toString(task.end, "h:mm tt ddd, MMM d")#</li>'+"</ul>"+"</div>");var M=kendo.template("<span>#=offsetPrefix#: #=offsetText#</span>");var R=kendo.template('<div class="k-task-content">'+"<div>#=plannedStart#: #=startDate#</div>"+"<div>#=plannedEnd#: #=endDate#</div>"+"</div>");var B="<table style='visibility: hidden;'>"+"<tbody>"+"<tr style='height:{0}'>"+"<td>&nbsp;</td>"+"</tr>"+"</tbody>"+"</table>";var L={day:{type:"kendo.ui.GanttDayView"},week:{type:"kendo.ui.GanttWeekView"},month:{type:"kendo.ui.GanttMonthView"},year:{type:"kendo.ui.GanttYearView"}};function H(e){delete e.name;delete e.prefix;delete e.views;return e}function N(e){var t=[];var i=e.workWeekStart;t.push(i);while(e.workWeekEnd!=i){if(i>6){i-=7}else{i++}t.push(i)}return t}function F(){var e=kendo._activeElement();if(e&&e.nodeName.toLowerCase()!=="body"){_(e).blur()}}var O={alt:"k-alt",reset:"k-reset",nonWorking:"k-nonwork-hour",header:"k-header",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",tasksWrapper:"k-gantt-tables",rowsTable:"k-gantt-rows",columnsTable:"k-gantt-columns",tasksTable:"k-gantt-tasks",dependenciesWrapper:"k-gantt-dependencies",resource:"k-resource",resourceAlt:"k-resource k-alt",task:"k-task",taskSingle:"k-task-single",taskMilestone:"k-task-milestone",taskSummary:"k-task-summary",taskWrap:"k-task-wrap",taskMilestoneWrap:"k-milestone-wrap",taskSummaryWrap:"k-summary-wrap",taskPlanned:"k-task-planned",taskPlannedMoment:"k-task-moment",taskPlannedDuration:"k-task-duration",taskPlannedMomentLeft:"k-moment-left",taskAdvanced:"k-task-advanced",taskDelayed:"k-task-delayed",taskOffset:"k-task-offset",taskOffsetWrap:"k-task-offset-wrap",taskInnerWrap:"k-task-inner-wrap",resourcesWrap:"k-resources-wrap",taskDot:"k-task-dot",taskDotStart:"k-task-start",taskDotEnd:"k-task-end",taskDragHandle:"k-task-draghandle",taskContent:"k-task-content",taskTemplate:"k-task-template",taskActions:"k-task-actions",taskDelete:"k-task-delete",taskComplete:"k-task-complete",taskDetails:"k-task-details",taskDetailsPercent:"k-task-pct",link:"k-link",icon:"k-icon",iconDelete:"k-i-close",taskResizeHandle:"k-resize-handle",taskResizeHandleWest:"k-resize-w",taskResizeHandleEast:"k-resize-e",taskSummaryProgress:"k-task-summary-progress",taskSummaryComplete:"k-task-summary-complete",line:"k-gantt-line",lineHorizontal:"k-gantt-line-h",lineVertical:"k-gantt-line-v",arrowWest:"k-arrow-w",arrowEast:"k-arrow-e",dragHint:"k-drag-hint",dependencyHint:"k-gantt-dependency-hint",tooltipWrapper:"k-tooltip",tooltipContent:"k-tooltip-content",tooltipCallout:"k-callout k-callout-s",callout:"k-callout",marquee:"k-marquee k-gantt-marquee",marqueeColor:"k-marquee-color",offsetTooltipAdvanced:"k-offset-tooltip-advanced",offsetTooltipDelay:"k-offset-tooltip-delayed",plannedTooltip:"k-planned-tooltip"};var P=kendo.ui.GanttView=i.extend({init:function(e,t){i.fn.init.call(this,e,t);this.title=this.options.title||this.options.name;this.header=this.element.find(k+P.styles.gridHeader);this.content=this.element.find(k+P.styles.gridContent);this.contentWidth=this.content.width();this._workDays=N(this.options);this._headerTree=t.headerTree;this._taskTree=t.taskTree;this._taskTemplate=t.taskTemplate?kendo.template(t.taskTemplate,d({},kendo.Template,t.templateSettings)):null;this._dependencyTree=t.dependencyTree;this._taskCoordinates={};this._currentTime()},destroy:function(){i.fn.destroy.call(this);clearTimeout(this._tooltipTimeout);this.headerRow=null;this.header=null;this.content=null;this._dragHint=null;this._resizeHint=null;this._resizeTooltip=null;this._taskTooltip=null;this._percentCompleteResizeTooltip=null;this._headerTree=null;this._taskTree=null;this._dependencyTree=null},options:{showWorkHours:false,showWorkDays:false,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,hourSpan:1,slotSize:100,currentTimeMarker:{updateInterval:1e4}},renderLayout:function(){this._slots=this._createSlots();this._tableWidth=this._calculateTableWidth();this.createLayout(this._layout());this._slotDimensions();this._adjustHeight();this.content.find(k+P.styles.dependenciesWrapper).width(this._tableWidth)},_adjustHeight:function(){if(this.content){this.content.height(this.element.height()-b(this.header))}},createLayout:function(e){var t=this._headers(e);var i=this._colgroup();var n=this._headerTree;var r=y("tbody",null,t);var a=y("table",{style:{width:this._tableWidth+"px"},role:"presentation"},[i,r]);n.render([a]);this.headerRow=this.header.find("table:first tr").last()},_slotDimensions:function(){var e=this.headerRow[0].children;var t=this._timeSlots();var i;var n;for(var r=0,a=e.length;r<a;r++){n=e[r];i=t[r];i.offsetLeft=n.offsetLeft;i.offsetWidth=n.offsetWidth}},render:function(e){var t=e.length;var i=P.styles;var n;var r=this._rowsTable(t);var a=this._columnsTable(t);var o=this._tasksTable(e);var s=this.options.currentTimeMarker;var l=this.options.calculatedSize;var d;this._taskTree.render([r,a,o]);n=this.content.find(k+i.rowsTable);if(l){d=l.row*e.length;this.content.find(k+i.tasksTable).height(d);n.height(d)}this._contentHeight=n.height();this._rowHeight=l?l.row:this._contentHeight/n.find("tr").length;this.content.find(k+i.columnsTable).height(this._contentHeight);if(s!==false&&s.updateInterval!==undefined){this._renderCurrentTime()}},_rowsTable:function(e){var t=[];var i;var n=P.styles;var r=[null,{className:n.alt}];for(var a=0;a<e;a++){i=y("tr",r[a%2],[y("td",null,[f("")])]);t.push(i)}return this._createTable(1,t,{className:n.rowsTable})},_columnsTable:function(){var e=[];var t;var i=P.styles;var n=this._timeSlots();var r=n.length;var a;var o;var s=0;var l;for(var d=0;d<r;d++){a=n[d];l={};o=a.span;s+=o;if(o!==1){l.colspan=o}if(a.isNonWorking){l.className=i.nonWorking}e.push(y("td",l,[f("")]))}t=y("tr",null,e);return this._createTable(s,[t],{className:i.columnsTable})},_tasksTable:function(e){var t=[];var i;var n;var r;var a;var o;var s=P.styles;var l=this._taskCoordinates={};var d=this._calculateMilestoneWidth();var u=Math.round(d.width);var c=this.options.resourcesField;var f=[s.resource,s.resourceAlt];var h=this.options.calculatedSize;var p;var v=this._calculateResourcesMargin();var m=this._calculateTaskBorderWidth();var g;var _=this.options.showPlannedTasks;var b=function(e){var t;var i;t=r.left;i=t+r.width;if(o.isMilestone()){t-=u/2;i=t+u}l[o.id]={start:t,end:i,rowIndex:e}};for(var w=0,k=e.length;w<k;w++){o=e[w];r=this._taskPosition(o);if(_){a=this._taskPositionPlanned(o);a.borderWidth=m}r.borderWidth=m;i=y("tr",null);n=y("td");if(o.start<=this.end&&o.end>=this.start){n.children.push(this._renderTask(e[w],r,a));if(o[c]&&o[c].length){if(x){p=this._tableWidth-r.left}else{p=Math.max(r.width||d.clientWidth,0)+r.left}g={width:this._tableWidth-(p+v)+"px"};g[x?"right":"left"]=p+"px";if(h){g.height=h.cell+"px"}n.children.push(y("div",{className:s.resourcesWrap,style:g},this._renderResources(o[c],f[w%2])))}b(w)}i.children.push(n);t.push(i)}return this._createTable(1,t,{className:P.styles.tasksTable})},_createTable:function(e,t,i){var n=[];var r;var a;for(var o=0;o<e;o++){n.push(y("col"))}r=y("colgroup",null,n);a=y("tbody",null,t);if(!i.style){i.style={}}i.style.width=this._tableWidth+"px";i.role="presentation";return y("table",i,[r,a])},_calculateTableWidth:function(){var e=this._timeSlots();var t=0;var i=0;var n;var r;for(var a=0,o=e.length;a<o;a++){n=e[a].span;i+=n;if(n>t){t=n}}r=Math.round(i*this.options.slotSize/t);return r},_calculateMilestoneWidth:function(){var e;var t=P.styles.task+" "+P.styles.taskMilestone;var i=_("<div class='"+t+"' style='visibility: hidden; position: absolute'>");var n;this.content.append(i);n=i[0].getBoundingClientRect();e={width:n.right-n.left,clientWidth:i[0].clientWidth};i.remove();return e},_calculateResourcesMargin:function(){var e;var t=_("<div class='"+P.styles.resourcesWrap+"' style='visibility: hidden; position: absolute'>");this.content.append(t);e=parseInt(t.css(x?"margin-right":"margin-left"),10);t.remove();return e},_calculateTaskBorderWidth:function(){var e;var t=P.styles.task+" "+P.styles.taskSingle;var i=_("<div class='"+t+"' style='visibility: hidden; position: absolute'>");var n;this.content.append(i);n=kendo.getComputedStyles(i[0],["border-left-width"]);e=parseFloat(n["border-left-width"],10);i.remove();return e},_renderTask:function(e,t,i){var n=this.options.editable;var r=t.left;var a=P.styles;var o=a.taskWrap;var s=this.options.calculatedSize;var l={};var d={className:o,style:{left:r+"px"}};var u=[];var c=0;var f=t.width;var h,p,v,m;var g,_,b,w;if(s){d.style.height=s.cell+"px"}if(i){if(e.isMilestone()){m=this._renderPlannedMilestone(t,i)}else{m=this._renderPlannedSingleTask(t,i,e)}u.push(m);if(x&&i.left<=t.left){d.style.left=i.left+"px"}}if(e.summary){p=this._renderSummary(e,t,i);d.className+=" "+a.taskSummaryWrap}else if(e.isMilestone()){p=this._renderMilestone(e,t);d.className+=" "+a.taskMilestoneWrap}else{p=this._renderSingleTask(e,t,i)}if(i&&!e.isMilestone()&&e.plannedStart<e.end&&e.plannedEnd>e.start&&e.plannedEnd<e.end){if(x){f=t.left+t.width-i.left}else{f=i.left+i.width-t.left}if(x){w=i.left-t.left}else{w=t.left+t.width-(i.left+i.width)}b=y("div",{className:a.taskOffset,style:{width:w-2*i.borderWidth+"px"}});if(n&&n.resize!==false&&n.update!==false&&!e.summary){if(n.destroy!==false){b.children.push(y("span",{className:a.taskActions},[y("a",{className:a.link+" "+a.taskDelete,href:"#","aria-label":"Delete"},[y("span",{className:a.icon+" "+a.iconDelete})])]))}if(x){b.children.push(y("span",{className:a.taskResizeHandle+" "+a.taskResizeHandleWest,style:{right:t.width-5+"px"}}))}else{b.children.push(y("span",{className:a.taskResizeHandle+" "+a.taskResizeHandleEast}))}}_=y("div",{className:a.taskOffsetWrap+" "+a.taskInnerWrap},[p,b]);u.push(_)}else if(i){u.push(y("div",{className:a.taskInnerWrap},[p]))}else{u.push(p)}h=y("div",d,u);if(n&&n.dependencyCreate!==false){if(i&&e.plannedEnd>e.end){c=i.left+i.width-t.left-t.width-3+"px"}h.children.push(y("div",{className:a.taskDot+" "+a.taskDotStart}));if(x){c="auto";if(i&&e.plannedEnd>e.end){g=t.left-i.left+"px"}}h.children.push(y("div",{className:a.taskDot+" "+a.taskDotEnd,style:{right:c,left:g}}))}if(!e.summary&&!e.isMilestone()&&n&&n.dragPercentComplete!==false&&n.update!==false&&this._taskTemplate===null){v=Math.round(f*e.percentComplete);l[x?"right":"left"]=v+"px";h.children.push(y("div",{className:a.taskDragHandle,style:l}))}return h},_renderSingleTask:function(e,t,i){var n=P.styles;var r;var a=[];var o;var s=this.options.editable;var l=n.task+" "+n.taskSingle;var d=t.width;if(i){if(e.plannedEnd&&e.plannedEnd<=e.start){l+=" "+n.taskDelayed}else if(e.plannedEnd&&e.plannedEnd>e.end){l+=" "+n.taskAdvanced}else if(e.plannedEnd&&e.plannedEnd<e.end){if(!x){d=d-(t.left+t.width-i.left-i.width)}else{d=d+t.left-i.left}}}r=Math.round(d*e.percentComplete);if(this._taskTemplate!==null){o=h(this._taskTemplate(e))}else{o=f(e.title);a.push(y("div",{className:n.taskComplete,style:{width:r+"px"}}))}var u=y("div",{className:n.taskContent},[y("div",{className:n.taskTemplate},[o])]);a.push(u);if(s){if(s.destroy!==false&&(!i||!e.plannedEnd||(e.end<=e.plannedEnd||e.start>=e.plannedEnd))){u.children.push(y("span",{className:n.taskActions},[y("a",{className:n.link+" "+n.taskDelete,href:"#","aria-label":"Delete"},[y("span",{className:n.icon+" "+n.iconDelete})])]))}if(s.resize!==false&&s.update!==false){u.children.push(y("span",{className:n.taskResizeHandle+" "+n.taskResizeHandleWest}));u.children.push(y("span",{className:n.taskResizeHandle+" "+n.taskResizeHandleEast}))}}var c=y("div",{className:l,"data-uid":e.uid,style:{width:Math.max(d-t.borderWidth*2,0)+"px"}},a);return c},_renderMilestone:function(e){var t=P.styles;var i=t.task+" "+t.taskMilestone;var n=this.options.showPlannedTasks;if(n&&e.plannedEnd&&e.plannedEnd<e.start){i+=" "+t.taskDelayed}else if(e.plannedStart&&e.plannedStart>e.end){i+=" "+t.taskAdvanced}return y("div",{className:i,"data-uid":e.uid})},_renderSummary:function(e,t,i){var n=P.styles;var r=t.width;var a;var o=n.task+" "+n.taskSummary;if(i){if(e.plannedEnd&&e.plannedEnd<=e.start){o+=" "+n.taskDelayed}else if(e.plannedEnd&&e.plannedEnd>e.end){o+=" "+n.taskAdvanced}else if(e.plannedEnd&&e.plannedEnd<e.end){if(!x){r=r-(t.left+t.width-i.left-i.width)}else{r=r+t.left-i.left}}}a=Math.round(r*e.percentComplete);var s=y("div",{className:o,"data-uid":e.uid,style:{width:r+"px"}},[y("div",{className:n.taskSummaryProgress,style:{width:a+"px"}},[y("div",{className:n.taskSummaryComplete,style:{width:t.width+"px"}})])]);return s},_renderPlannedSingleTask:function(e,t,i){var n=P.styles;var r=[];var a={};if(i.plannedStart&&i.plannedEnd){r.push(y("div",{className:n.taskPlannedMoment+" "+n.taskPlannedMomentLeft}));r.push(y("div",{className:n.taskPlannedDuration,style:{width:Math.max(t.width-t.borderWidth*2-16,0)+"px"}}));r.push(y("div",{className:n.taskPlannedMoment}))}else if(i.plannedStart){r.push(y("div",{className:n.taskPlannedMoment+" "+n.taskPlannedMomentLeft}))}else if(i.plannedEnd){r.push(y("div",{className:n.taskPlannedMoment,style:{"margin-left":Math.max(t.width-5,0)+"px"}}))}if(x){a={"margin-right":e.left-t.left+e.width-t.width+"px"}}else{a={"margin-left":t.left-e.left+"px"}}var o=y("div",{className:n.taskPlanned,style:a},r);return o},_renderPlannedMilestone:function(e,t){var i=P.styles;var n={};var r;if(x){n={"margin-right":e.left-t.left+"px"}}else{n={"margin-left":t.left-e.left+"px"}}r=y("div",{className:i.taskPlanned,style:n},[y("div",{className:i.taskPlannedMoment})]);return r},_renderResources:function(e,t){var i=[];var n;for(var r=0,a=e.length;r<a;r++){n=e[r];i.push(y("span",{className:t,style:{color:n.get("color")}},[f(n.get("name"))]))}if(x){i.reverse()}return i},_taskPosition:function(e){var t=Math.round;var i=t(this._offset(x?e.end:e.start));var n=t(this._offset(x?e.start:e.end));return{left:i,width:n-i}},_taskPositionPlanned:function(e){var t=Math.round;var i=t(this._offset(x?e.plannedEnd:e.plannedStart));var n=t(this._offset(x?e.plannedStart:e.plannedEnd));return{left:i,width:n-i}},_offset:function(e){var t=this._timeSlots();var i;var n;var r;var a=0;var o;if(!t.length){return 0}o=this._slotIndex("start",e);i=t[o];if(i.end<e){a=i.offsetWidth}else if(i.start<=e){n=e-i.start;r=i.end-i.start;a=n/r*i.offsetWidth}if(x){a=i.offsetWidth+1-a}return i.offsetLeft+a},_slotIndex:function(e,t,i){var n=this._timeSlots();var r=0;var a=n.length-1;var o;if(i){n=[].slice.call(n).reverse()}do{o=Math.ceil((a+r)/2);if(n[o][e]<t){r=o}else{if(o===a){o--}a=o}}while(r!==a);if(i){r=n.length-1-r}return r},_timeByPosition:function(e,t,i){var n=this._slotByPosition(e);if(t){return i?n.end:n.start}var r=e-this.element.find(k+P.styles.tasksTable).offset().left;var a=n.end-n.start;var o=r-n.offsetLeft;if(x){o=n.offsetWidth-o}return new Date(n.start.getTime()+a*(o/n.offsetWidth))},_slotByPosition:function(e){var t=e-this.element.find(k+P.styles.tasksTable).offset().left;var i=this._slotIndex("offsetLeft",t,x);return this._timeSlots()[i]},_renderDependencies:function(e){var t=[];var i=this._dependencyTree;for(var n=0,r=e.length;n<r;n++){t.push.apply(t,this._renderDependency(e[n]))}i.render(t)},_renderDependency:function(e){var t=this._taskCoordinates[e.predecessorId];var i=this._taskCoordinates[e.successorId];var n;var r;if(!t||!i){return[]}r="_render"+["FF","FS","SF","SS"][x?3-e.type:e.type];n=this[r](t,i);for(var a=0,o=n.length;a<o;a++){n[a].attr["data-uid"]=e.uid}return n},_renderFF:function(e,t){var i=this._dependencyFF(e,t,false);i[i.length-1].children[0]=this._arrow(true);return i},_renderSS:function(e,t){var i=this._dependencyFF(t,e,true);i[0].children[0]=this._arrow(false);return i.reverse()},_renderFS:function(e,t){var i=this._dependencyFS(e,t,false);i[i.length-1].children[0]=this._arrow(false);return i},_renderSF:function(e,t){var i=this._dependencyFS(t,e,true);i[0].children[0]=this._arrow(true);return i.reverse()},_dependencyFF:function(e,t,i){var n=this;var r=[];var a=0;var o=0;var s=0;var l=0;var d=i?"start":"end";var u;var c=2;var f=1;var h=this._rowHeight;var p=10;var v=e.rowIndex*h+Math.floor(h/2)-1;var m=t.rowIndex*h+Math.floor(h/2)-1;var g=P.styles;var _=function(){r.push(n._line(g.line+" "+g.lineHorizontal,{left:a+"px",top:o+"px",width:s+"px"}))};var b=function(){r.push(n._line(g.line+" "+g.lineVertical,{left:a+"px",top:o+"px",height:l+"px"}))};a=e[d];o=v;s=p;u=t[d]-e[d];if(u>0!==i){s=Math.abs(u)+p}if(i){a-=s;s-=f;_()}else{_();a+=s-c}if(m<o){l=o-m;l+=c;o=m;b()}else{l=m-o;l+=c;b();o+=l-c}s=Math.abs(a-t[d]);if(!i){s-=f;a-=s}_();return r},_dependencyFS:function(e,t,i){var n=this;var r=[];var a=0;var o=0;var s=0;var l=0;var d=this._rowHeight;var u=Math.floor(d/2);var c=10;var f=2*c;var h=t.start-e.end;var p=2;var v=1;var m=e.rowIndex*d+Math.floor(d/2)-1;var g=t.rowIndex*d+Math.floor(d/2)-1;var _=P.styles;var b=function(){r.push(n._line(_.line+" "+_.lineHorizontal,{left:a+"px",top:o+"px",width:s+"px"}))};var w=function(){r.push(n._line(_.line+" "+_.lineVertical,{left:a+"px",top:o+"px",height:l+"px"}))};a=e.end;o=m;s=c;if(i){a+=v;if(h>f){s=h-(c-p)}s-=v}b();a+=s-p;if(h<=f){l=i?Math.abs(g-m)-u:u;if(g<m){o-=l;l+=p;w()}else{w();o+=l}s=e.end-t.start+f;if(s<c){s=c}a-=s-p;b()}if(g<m){l=o-g;o=g;l+=p;w()}else{l=g-o;w();o+=l}s=t.start-a;if(!i){s-=v}b();return r},_line:function(e,t){return y("div",{className:e,style:t})},_arrow:function(e){return y("span",{className:e?P.styles.arrowWest:P.styles.arrowEast})},_colgroup:function(){var e=this._timeSlots();var t=e.length;var i=[];for(var n=0;n<t;n++){for(var r=0,a=e[n].span;r<a;r++){i.push(y("col"))}}return y("colgroup",null,i)},_createDragHint:function(e){var t=P.styles;var i;this._dragHint=e.clone().addClass(t.dragHint).css({cursor:"move"});i=this._dragHint.find(k+t.taskPlanned);i.css({visibility:"hidden"});if(x&&e.find(k+t.taskAdvanced).length>0){i.css({"margin-right":"auto",width:0});this._dragHint.find(k+t.taskDotEnd).css({left:0})}e.closest("td").append(this._dragHint)},_updateDragHint:function(e){var t=this._offset(e);this._dragHint.css({left:t})},_removeDragHint:function(){this._dragHint.remove();this._dragHint=null},_createResizeHint:function(e){var t=P.styles;var i=this._taskCoordinates[e.id].rowIndex*this._rowHeight;var n;var r;var a=this.options;var o=a.messages;this._resizeHint=_(D({styles:t})).css({top:0,height:this._contentHeight});this.content.append(this._resizeHint);this._resizeTooltip=_(A({styles:t,start:e.start,end:e.end,messages:o.views,format:a.resizeTooltipFormat})).css({top:0,left:0});this.content.append(this._resizeTooltip);this._resizeTooltipWidth=v(this._resizeTooltip);n=b(this._resizeTooltip);r=i-n;if(r<0){r=i+this._rowHeight}this._resizeTooltipTop=r},_updateResizeHint:function(e,t,i){var n=this._offset(x?t:e);var r=this._offset(x?e:t);var a=r-n;var o=i!==x?n:r;var s=this._tableWidth-kendo.support.scrollbar();var l=this._resizeTooltipWidth;var d=this.options;var u=d.messages;var c=this.element.find(k+P.styles.tasksTable).offset().left-this.element.find(k+P.styles.tasksWrapper).offset().left;if(x){n+=c}this._resizeHint.css({left:n,width:a});if(this._resizeTooltip){this._resizeTooltip.remove()}o-=Math.round(l/2);if(o<0){o=0}else if(o+l>s){o=s-l}if(x){o+=c}this._resizeTooltip=_(A({styles:P.styles,start:e,end:t,messages:u.views,format:d.resizeTooltipFormat})).css({top:this._resizeTooltipTop,left:o,"min-width":l}).appendTo(this.content)},_removeResizeHint:function(){this._resizeHint.remove();this._resizeHint=null;this._resizeTooltip.remove();this._resizeTooltip=null},_updatePercentCompleteTooltip:function(e,t,i){this._removePercentCompleteTooltip();var n=this._percentCompleteResizeTooltip=_(E({styles:P.styles,text:i})).appendTo(this.element);var r=Math.round(v(n)/2);var a=n.find(k+P.styles.callout);var o=Math.round(v(a)/2);n.css({top:e-(b(n)+o),left:t-r});a.css("left",r-o)},_removePercentCompleteTooltip:function(){if(this._percentCompleteResizeTooltip){this._percentCompleteResizeTooltip.remove()}this._percentCompleteResizeTooltip=null},_updateDependencyDragHint:function(e,t){this._removeDependencyDragHint();this._creteDependencyDragHint(e,t)},_creteDependencyDragHint:function(e,t){var i=P.styles;var n=t.x-e.x;var r=t.y-e.y;var a=Math.sqrt(n*n+r*r);var o=Math.atan(r/n);if(n<0){o+=Math.PI}_("<div class='"+i.line+" "+i.lineHorizontal+" "+i.dependencyHint+"'></div>").css({top:e.y,left:e.x,width:a,"transform-origin":"0% 0","-ms-transform-origin":"0% 0","-webkit-transform-origin":"0% 0",transform:"rotate("+o+"rad)","-ms-transform":"rotate("+o+"rad)","-webkit-transform":"rotate("+o+"rad)"}).appendTo(this.content)},_removeDependencyDragHint:function(){this.content.find(k+P.styles.dependencyHint).remove()},_createTaskTooltip:function(e,t,i){var n=P.styles;var r=this.options;var a=this.content;var o=a.offset();var s=kendo.scrollLeft(a);var l=_(t).parents("tr").first();var d=l.offset();var u=r.tooltip&&r.tooltip.template?kendo.template(r.tooltip.template):I;var c=x?i-(o.left+s+kendo.support.scrollbar()):i-(o.left-s);var f=d.top+b(l)-o.top+a.scrollTop();var h=this._taskTooltip=_('<div style="z-index: 100002;" class="'+n.tooltipWrapper+'" >'+'<div class="'+n.taskContent+'"></div></div>');h.css({left:c,top:f}).appendTo(a).find(k+n.taskContent).append(u({styles:n,task:e,messages:r.messages.views}));this._adjustTooltipDimensions(h,d,o,c,s)},_removeTaskTooltip:function(){if(this._taskTooltip){this._taskTooltip.remove()}this._taskTooltip=null},_createOffsetTooltip:function(e,t,i){var n=P.styles;var r=this.content;var a=r.offset();var o=kendo.scrollLeft(r);var s=t.parents("tr").first();var l=s.offset();var d=x?i-(a.left+o+kendo.support.scrollbar()):i-(a.left-o);var u=l.top+b(s)-a.top+r.scrollTop();var c=this._offsetTooltip=_('<div style="z-index: 100002;" class="'+n.tooltipWrapper+'" ></div>');var f=Math.round((e.end.getTime()-e.plannedEnd.getTime())/6e4);var h=this.options.messages.plannedTasks;var p=f%60;var v=p+" "+h.minutes;var m,g;if(f>=60){m=f=Math.floor(f/60);v=m+" "+h.hours;if(p!==0){v+=" "+p+" "+h.minutes}if(f>=24){m=f%24;g=f=Math.floor(f/24);v=g+" "+h.days;if(m!==0){v+=" "+m+" "+h.hours}}}c.css({left:d,top:u}).addClass(n.offsetTooltipDelay).appendTo(r).append(M({offsetPrefix:h.offsetTooltipDelay,offsetText:v}));this._adjustTooltipDimensions(c,l,a,d,o)},_removeOffsetTooltip:function(){if(this._offsetTooltip){this._offsetTooltip.remove()}this._offsetTooltip=null},_createPlannedTooltip:function(e,t,i){var n=P.styles;var r=this.content;var a=r.offset();var o=kendo.scrollLeft(r);var s=t.parents("tr").first();var l=s.offset();var d=x?i-(a.left+o+kendo.support.scrollbar()):i-(a.left-o);var u=l.top+b(s)-a.top+r.scrollTop();var c=this._plannedTooltip=_('<div style="z-index: 100002;" class="'+n.tooltipWrapper+" "+n.plannedTooltip+'" ></div>');var f=this.options.messages.editor;c.css({left:d,top:u}).appendTo(r).append(R({plannedStart:f.plannedStart,startDate:kendo.toString(e.plannedStart,"H:mm tt ddd, MMM dd"),plannedEnd:f.plannedEnd,endDate:kendo.toString(e.plannedEnd,"H:mm tt ddd, MMM dd")}));this._adjustTooltipDimensions(c,l,a,d,o)},_removePlannedTooltip:function(){if(this._plannedTooltip){this._plannedTooltip.remove()}this._plannedTooltip=null},_adjustTooltipDimensions:function(e,t,i,n,r){var a=this.content;var o=a.width();var s;if(b(e)<t.top-i.top){e.css("top",t.top-i.top-b(e)+a.scrollTop())}s=v(e);if(s+n-r>o){n-=s;if(n<r){n=r+o-(s+17)}e.css("left",n)}},_scrollTo:function(e){var t=e.offset().left;var i=e.width();var n=t+i;var r=e.closest("tr");var a=r.offset().top;var o=r.height();var s=a+o;var l=this.content;var d=l.offset();var u=d.top;var c=l.height();var f=u+c;var h=d.left;var p=l.width();var v=h+p;var m=kendo.support.scrollbar();if(a<u){l.scrollTop(l.scrollTop()+(a-u))}else if(s>f){l.scrollTop(l.scrollTop()+(s+m-f))}if(t<h&&i>p&&n<v||n>v&&i<p){kendo.scrollLeft(l,kendo.scrollLeft(l)+(n+m-v))}else if(n>v&&i>p&&t>h||t<h&&i<p){kendo.scrollLeft(l,kendo.scrollLeft(l)+(t-h))}},_scrollToDate:function(e){var t=this.start;var i=this.end;var n;if(e>=t&&e<i){n=this._offset(e);if(kendo.support.isRtl(this.element)){n=this._tableWidth-n}kendo.scrollLeft(this.content,n)}},_timeSlots:function(){if(!this._slots||!this._slots.length){return[]}return this._slots[this._slots.length-1]},_headers:function(e){var t=[];var i;var n;var r;var a;var o=P.styles;for(var s=0,l=e.length;s<l;s++){i=e[s];n=[];for(var d=0,u=i.length;d<u;d++){r=i[d];a=h(r.text);n.push(y("td",{colspan:r.span,className:o.header+(r.isNonWorking?" "+o.nonWorking:"")},[a]))}t.push(y("tr",null,n))}return t},_hours:function(e,t){var i;var n=[];var r=this.options;var a=r.workDayStart.getHours();var o=r.workDayEnd.getHours();var s;var l;var d=r.hourSpan;e=new Date(e);t=new Date(t);if(r.showWorkHours){e.setHours(a)}while(e<t){i=new Date(e);l=i.getHours();s=l>=a&&l<o;i.setHours(i.getHours()+d);if(l==i.getHours()){i.setHours(i.getHours()+2*d)}if(!r.showWorkHours||s){n.push({start:e,end:i,isNonWorking:!s,span:1})}e=i}return n},_days:function(e,t){var i;var n=[];var r;e=new Date(e);t=new Date(t);while(e<t){i=t<kendo.date.nextDay(e)?t:kendo.date.nextDay(e);r=this._isWorkDay(e);if(!this.options.showWorkDays||r){n.push({start:e,end:i,isNonWorking:!r,span:1})}e=i}return n},_weeks:function(e,t){var i;var n=[];var r=this.calendarInfo().firstDay;var a;var o;e=new Date(e);t=new Date(t);while(e<t){i=kendo.date.dayOfWeek(kendo.date.addDays(e,1),r,1);if(i>t){i=t}a=this._days(e,i);o=a.length;if(o>0){n.push({start:a[0].start,end:a[o-1].end,span:o})}e=i}return n},_months:function(e,t){var i;var n;var r=[];var a;var o;e=new Date(e);t=new Date(t);while(e<t){i=new Date(e);n=kendo.date.firstDayOfMonth(new Date(i.setMonth(i.getMonth()+1)));i=t<n?t:n;a=this._days(e,i);o=a.length;if(o>0){r.push({start:a[0].start,end:a[o-1].end,span:o})}e=i}return r},_years:function(e,t){var i;var n;var r;var a=[];e=new Date(e);t=new Date(t);while(e<t){i=new Date(e);i=kendo.date.firstDayOfMonth(new Date(i.setMonth(12)));if(i>=t){i=t}r=i.getMonth()||12;n=r-e.getMonth();a.push({start:e,end:i,span:n});e=i}return a},_slotHeaders:function(e,t){var i=[];var n;for(var r=0,a=e.length;r<a;r++){n=e[r];i.push({text:t(n),isNonWorking:!!n.isNonWorking,span:n.span})}return i},_isWorkDay:function(e){var t=e.getDay();var i=this._workDays;for(var n=0,r=i.length;n<r;n++){if(i[n]===t){return true}}return false},calendarInfo:function(){return kendo.getCulture().calendars.standard},_renderCurrentTime:function(){var e=this._getCurrentTime();var t=this._offset(e);var i=_("<div class='k-current-time'></div>");var n=P.styles;var r=this.element.find(k+n.tasksWrapper);var a=this.element.find(k+n.tasksTable);var o;if(!this.content||!this._timeSlots().length){return}this.content.find(".k-current-time").remove();o=this._timeSlots()[this._slotIndex("start",e)];if(e<o.start||e>o.end){return}if(r.length&&a.length){t+=a.offset().left-r.offset().left}i.css({left:t+"px",top:"0px",width:"1px",height:this._contentHeight+"px"}).appendTo(this.content)},_getCurrentTime:function(){return new Date},_currentTime:function(){var e=this.options.currentTimeMarker;if(e!==false&&e.updateInterval!==undefined){this._renderCurrentTime();this._currentTimeUpdateTimer=setInterval(t(this._renderCurrentTime,this),e.updateInterval)}}});d(true,P,{styles:O});kendo.ui.GanttDayView=P.extend({name:"day",options:{timeHeaderTemplate:e,dayHeaderTemplate:n,resizeTooltipFormat:"h:mm tt ddd, MMM d"},range:function(e){var t=this.options.range;this.start=kendo.date.getDate(e.start);this.end=kendo.date.getDate(e.end);if(kendo.date.getMilliseconds(e.end)>0||this.end.getTime()===this.start.getTime()){this.end=kendo.date.addDays(this.end,1)}if(t&&t.start){this.start=kendo.date.getDate(t.start);this.start.setHours(t.start.getHours())}if(t&&t.end){this.end=kendo.date.getDate(t.end);this.end.setHours(t.end.getHours())}},_createSlots:function(){var e;var t;var i;var n;var r=[];e=this._days(this.start,this.end);i=[];for(var a=0,o=e.length;a<o;a++){t=e[a];n=this._hours(t.start,t.end);t.span=n.length;i.push.apply(i,n)}r.push(e);r.push(i);return r},_layout:function(){var e=[];var t=this.options;e.push(this._slotHeaders(this._slots[0],kendo.template(t.dayHeaderTemplate)));e.push(this._slotHeaders(this._slots[1],kendo.template(t.timeHeaderTemplate)));return e}});kendo.ui.GanttWeekView=P.extend({name:"week",options:{dayHeaderTemplate:n,weekHeaderTemplate:C,resizeTooltipFormat:"h:mm tt ddd, MMM d"},range:function(e){var t=this.options.range;var i=this.calendarInfo();var n=i.firstDay;var r=e.end;var a;if(n===r.getDay()){r.setDate(r.getDate()+7)}this.start=kendo.date.getDate(kendo.date.dayOfWeek(e.start,n,-1));this.end=kendo.date.getDate(kendo.date.dayOfWeek(r,n,1));if(t&&t.start){this.start=kendo.date.getDate(t.start)}if(t&&t.end){a=new Date(t.end);if(kendo.date.getDate(a)<t.end){this.end=kendo.date.getDate(new Date(a.setDate(a.getDate()+1)))}else{this.end=kendo.date.getDate(a)}}},_createSlots:function(){var e=[];e.push(this._weeks(this.start,this.end));e.push(this._days(this.start,this.end));return e},_layout:function(){var e=[];var t=this.options;e.push(this._slotHeaders(this._slots[0],kendo.template(t.weekHeaderTemplate)));e.push(this._slotHeaders(this._slots[1],kendo.template(t.dayHeaderTemplate)));return e}});kendo.ui.GanttMonthView=P.extend({name:"month",options:{weekHeaderTemplate:C,monthHeaderTemplate:S,resizeTooltipFormat:"dddd, MMM d, yyyy"},range:function(e){var t=this.options.range;var i;this.start=kendo.date.firstDayOfMonth(e.start);this.end=kendo.date.addDays(kendo.date.getDate(kendo.date.lastDayOfMonth(e.end)),1);if(t&&t.start){this.start=kendo.date.getDate(t.start)}if(t&&t.end){i=new Date(t.end);if(kendo.date.getDate(i)<t.end){this.end=kendo.date.getDate(new Date(i.setDate(i.getDate()+1)))}else{this.end=kendo.date.getDate(i)}}},_createSlots:function(){var e=[];e.push(this._months(this.start,this.end));e.push(this._weeks(this.start,this.end));return e},_layout:function(){var e=[];var t=this.options;e.push(this._slotHeaders(this._slots[0],kendo.template(t.monthHeaderTemplate)));e.push(this._slotHeaders(this._slots[1],kendo.template(t.weekHeaderTemplate)));return e}});kendo.ui.GanttYearView=P.extend({name:"year",options:{yearHeaderTemplate:T,monthHeaderTemplate:S,resizeTooltipFormat:"dddd, MMM d, yyyy"},range:function(e){var t=this.options.range;var i;this.start=kendo.date.firstDayOfMonth(new Date(e.start.setMonth(0)));this.end=kendo.date.firstDayOfMonth(new Date(e.end.setMonth(12)));if(t&&t.start){this.start=kendo.date.firstDayOfMonth(t.start)}if(t&&t.end){i=kendo.date.firstDayOfMonth(t.end);this.end=kendo.date.getDate(new Date(i.setMonth(i.getMonth()+1)))}},_createSlots:function(){var e=[];var t=this._months(this.start,this.end);_(t).each(function(e,t){t.span=1});e.push(this._years(this.start,this.end));e.push(t);return e},_layout:function(){var e=[];var t=this.options;e.push(this._slotHeaders(this._slots[0],kendo.template(t.yearHeaderTemplate)));e.push(this._slotHeaders(this._slots[1],kendo.template(t.monthHeaderTemplate)));return e}});var V={wrapper:"k-timeline k-grid k-widget",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",gridContentWrap:"k-grid-content",tasksWrapper:"k-gantt-tables",dependenciesWrapper:"k-gantt-dependencies",task:"k-task",taskOffset:"k-task-offset",taskOffsetWrap:"k-task-offset-wrap",taskPlanned:"k-task-planned",line:"k-gantt-line",taskResizeHandle:"k-resize-handle",taskResizeHandleWest:"k-resize-w",taskDragHandle:"k-task-draghandle",taskComplete:"k-task-complete",taskDelete:"k-task-delete",taskWrapActive:"k-task-wrap-active",taskWrap:"k-task-wrap",taskDot:"k-task-dot",taskDotStart:"k-task-start",taskDotEnd:"k-task-end",hovered:"k-state-hover",selected:"k-state-selected",origin:"k-origin"};var z=kendo.ui.GanttTimeline=i.extend({init:function(e,t){i.fn.init.call(this,e,t);if(!this.options.views||!this.options.views.length){this.options.views=["day","week","month"]}x=kendo.support.isRtl(e);this._wrapper();this._domTrees();this._views();this._selectable();this._draggable();this._resizable();this._percentResizeDraggable();this._createDependencyDraggable();this._attachEvents();this._tooltip()},options:{name:"GanttTimeline",messages:{views:{day:"Day",week:"Week",month:"Month",year:"Year",start:"Start",end:"End"}},snap:true,selectable:true,editable:true},destroy:function(){i.fn.destroy.call(this);clearTimeout(this._tooltipTimeout);if(this._currentTimeUpdateTimer){clearInterval(this._currentTimeUpdateTimer)}this._unbindView(this._selectedView);if(this._moveDraggable){this._moveDraggable.destroy()}if(this._resizeDraggable){this._resizeDraggable.destroy()}if(this._percentDraggable){this._percentDraggable.destroy()}if(this._dependencyDraggable){this._dependencyDraggable.destroy()}if(this.touch){this.touch.destroy()}this._headerTree=null;this._taskTree=null;this._dependencyTree=null;this.wrapper.off(o);kendo.destroy(this.wrapper)},_wrapper:function(){var a=z.styles;var o=this;var s=this.options;var e=function(){var e=typeof s.rowHeight===u?s.rowHeight:s.rowHeight+"px";var t=_(kendo.format(B,e));var i;var n;var r=o.wrapper.find(k+a.tasksWrapper);r.append(t);i=b(t.find("tr"));n=t.find("td").height();t.remove();return{row:i,cell:n}};this.wrapper=this.element.addClass(a.wrapper).append("<div class='"+a.gridHeader+"'><div class='"+a.gridHeaderWrap+"'></div></div>").append("<div class='"+a.gridContentWrap+"'><div class='"+a.tasksWrapper+"'></div><div class='"+a.dependenciesWrapper+"'></div></div>");if(s.rowHeight){this._calculatedSize=e()}},_domTrees:function(){var e=z.styles;var t=kendo.dom.Tree;var i=this.wrapper;this._headerTree=new t(i.find(k+e.gridHeaderWrap)[0]);this._taskTree=new t(i.find(k+e.tasksWrapper)[0]);this._dependencyTree=new t(i.find(k+e.dependenciesWrapper)[0])},_views:function(){var e=this.options.views;var t;var i;var n;var r;var a;this.views={};for(var o=0,s=e.length;o<s;o++){t=e[o];i=l(t);if(i&&t.selectable===false){continue}n=i?typeof t.type!=="string"?t.title:t.type:t;r=L[n];if(r){if(i){t.type=r.type}r.title=this.options.messages.views[n]}t=d({title:n},r,i?t:{});if(n){this.views[n]=t;if(!a||t.selected){a=n}}}if(a){this._selectedViewName=a}},view:function(e){if(e){this._selectView(e);this.trigger("navigate",{view:e,action:"changeView"})}return this._selectedView},_selectView:function(e){if(e&&this.views[e]){if(this._selectedView){this._unbindView(this._selectedView)}this._selectedView=this._initializeView(e);this._selectedViewName=e}},_viewByIndex:function(e){var t;var i=this.views;for(t in i){if(!e){return t}e--}},_initializeView:function(e){var t=this.views[e];if(t){var i=t.type;if(typeof i==="string"){i=kendo.getter(t.type)(window)}if(i){var n={};d(n,this.options.range,t.range);var r=t.date||this.options.date;t=new i(this.wrapper,H(d(true,{headerTree:this._headerTree,taskTree:this._taskTree,dependencyTree:this._dependencyTree,calculatedSize:this._calculatedSize},t,this.options,{date:r,range:n})))}else{throw new Error("There is no such view")}}return t},_unbindView:function(e){if(e){e.destroy()}},_range:function(e){var t={field:"start",dir:"asc"};var i={field:"end",dir:"desc"};if(!e||!e.length){return{start:new Date,end:new Date}}var n=new a(e).sort(t).toArray()[0].start||new Date;var r=new a(e).sort(i).toArray()[0].end||new Date;return{start:new Date(n),end:new Date(r)}},_render:function(e){var t=this.view();var i=this._range(e);var n=t.options.date;this._tasks=e;t.range(i);t.renderLayout();t.render(e);if(n){t._scrollToDate(n)}},_renderDependencies:function(e){this.view()._renderDependencies(e)},_taskByUid:function(e){var t=this._tasks;var i=t.length;var n;for(var r=0;r<i;r++){n=t[r];if(n.uid===e){return n}}},_draggable:function(){var r=this;var i;var a;var o;var s;var l=this.options.snap;var n=z.styles;var e=this.options.editable;var t=function(){r.view()._removeDragHint();if(i){i.css("opacity",1)}i=null;a=null;r.dragInProgress=false};if(!e||e.move===false||e.update===false){return}this._moveDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:k+n.task+","+k+n.taskOffset,holdToDrag:kendo.support.mobileOS,ignore:k+n.taskResizeHandle});this._moveDraggable.bind("dragstart",function(e){var t=r.view();i=e.currentTarget.closest(k+n.taskWrap);a=r._taskByUid(e.currentTarget.parent().find(k+n.task).attr("data-uid"));if(r.trigger("moveStart",{task:a})){e.preventDefault();return}o=a.start;s=t._timeByPosition(e.x.location,l)-o;t._createDragHint(i);i.css("opacity",.5);clearTimeout(r._tooltipTimeout);r.dragInProgress=true}).bind("drag",kendo.throttle(function(e){if(!r.dragInProgress){return}var t=r.view();var i=new Date(t._timeByPosition(e.x.location,l)-s);var n=i;if(!r.trigger("move",{task:a,start:i})){o=i;if(x){n=new Date(o.getTime()+a.duration())}t._updateDragHint(n)}},15)).bind("dragend",function(){r.trigger("moveEnd",{task:a,start:o});t()}).bind("dragcancel",function(){t()}).userEvents.bind("select",function(){F()})},_resizable:function(){var n=this;var t;var r;var a;var o;var s;var l=this.options.snap;var i=z.styles;var e=this.options.editable;var d=function(){n.view()._removeResizeHint();t=null;r=null;n.dragInProgress=false};if(!e||e.resize===false||e.update===false){return}this._resizeDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:k+i.taskResizeHandle,holdToDrag:false});this._resizeDraggable.bind("dragstart",function(e){s=e.currentTarget.hasClass(i.taskResizeHandleWest);if(x){s=!s}t=e.currentTarget.closest(k+i.taskWrap).find(k+i.task);r=n._taskByUid(t.attr("data-uid"));if(n.trigger("resizeStart",{task:r})){e.preventDefault();return}a=r.start;o=r.end;n.view()._createResizeHint(r);clearTimeout(n._tooltipTimeout);n.dragInProgress=true}).bind("drag",kendo.throttle(function(e){if(!n.dragInProgress){return}var t=n.view();var i=t._timeByPosition(e.x.location,l,!s);if(s){if(i<o){a=i}else{a=o}}else{if(i>a){o=i}else{o=a}}if(!n.trigger("resize",{task:r,start:a,end:o})){t._updateResizeHint(a,o,s)}},15)).bind("dragend",function(){n.trigger("resizeEnd",{task:r,resizeStart:s,start:a,end:o});d()}).bind("dragcancel",function(){d()}).userEvents.bind("select",function(){F()})},_percentResizeDraggable:function(){var i=this;var t;var n;var r;var a;var o;var s;var l;var d;var u;var c=z.styles;var f;var e=this.options.editable;var h=function(){i.view()._removePercentCompleteTooltip();n=null;t=null;i.dragInProgress=false};var p=function(e){var t=n.siblings(k+c.taskDragHandle);if(!t.length){t=n.closest(k+c.taskWrap).find(k+c.taskDragHandle)}t.css(x?"right":"left",e);n.find(k+c.taskComplete).width(e)};if(!e||e.dragPercentComplete===false||e.update===false){return}this._percentDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:k+c.taskDragHandle,holdToDrag:false});this._percentDraggable.bind("dragstart",function(e){if(i.trigger("percentResizeStart")){e.preventDefault();return}n=e.currentTarget.siblings(k+c.task);if(!n.length){n=e.currentTarget.closest(k+c.taskWrap).find(k+c.task)}t=i._taskByUid(n.attr("data-uid"));l=t.percentComplete;r=n.offset();a=this.element.offset();o=n.find(k+c.taskComplete).width();s=v(n);clearTimeout(i._tooltipTimeout);i.dragInProgress=true}).bind("drag",kendo.throttle(function(e){if(!i.dragInProgress){return}f=x?-e.x.initialDelta:e.x.initialDelta;var t=Math.max(0,Math.min(s,o+f));l=Math.round(t/s*100);p(t);d=r.top-a.top;u=r.left+t-a.left;if(x){u+=s-2*t}i.view()._updatePercentCompleteTooltip(d,u,l)},15)).bind("dragend",function(){i.trigger("percentResizeEnd",{task:t,percentComplete:l/100});h()}).bind("dragcancel",function(){p(o);h()}).userEvents.bind("select",function(){F()})},_createDependencyDraggable:function(){var s=this;var l;var d=_();var a=_();var o;var u;var c=z.styles;var e=this.options.editable;var f=function(){l.css("display","").removeClass(c.hovered);l.parent().removeClass(c.origin);l=null;h(false);a=_();d=_();s.view()._removeDependencyDragHint();s.dragInProgress=false};var h=function(e){if(!a.hasClass(c.origin)){a.find(k+c.taskDot).css("display",e?"block":"");d.toggleClass(c.hovered,e)}};if(!e||e.dependencyCreate===false){return}this._dependencyDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:k+c.taskDot,holdToDrag:false});this._dependencyDraggable.bind("dragstart",function(e){if(s.trigger("dependencyDragStart")){e.preventDefault();return}l=e.currentTarget.css("display","block").addClass(c.hovered);l.parent().addClass(c.origin);var t=l.offset();var i=s.wrapper.find(k+c.tasksWrapper).offset();o=Math.round(t.left-i.left+b(l)/2);u=Math.round(t.top-i.top+v(l)/2);clearTimeout(s._tooltipTimeout);s.dragInProgress=true}).bind("drag",kendo.throttle(function(e){if(!s.dragInProgress){return}s.view()._removeDependencyDragHint();var t=_(kendo.elementUnderCursor(e));var i=s.wrapper.find(k+c.tasksWrapper).offset();var n=e.x.location-i.left;var r=e.y.location-i.top;s.view()._updateDependencyDragHint({x:o,y:u},{x:n,y:r});h(false);d=t.hasClass(c.taskDot)?t:_();a=t.closest(k+c.taskWrap);h(true)},15)).bind("dragend",function(){if(d.length){var e=l.hasClass(c.taskDotStart);var t=d.hasClass(c.taskDotStart);var i=e?t?3:2:t?1:0;var n=l.siblings(k+c.task);if(!n.length){n=l.closest(k+c.taskWrap).find(k+c.task)}var r=s._taskByUid(n.attr("data-uid"));var a=d.siblings(k+c.task);if(!a.length){a=d.closest(k+c.taskWrap).find(k+c.task)}var o=s._taskByUid(a.attr("data-uid"));if(r!==o){s.trigger("dependencyDragEnd",{type:i,predecessor:r,successor:o})}}f()}).bind("dragcancel",function(){f()}).userEvents.bind("select",function(){F()})},_selectable:function(){var i=this;var n=z.styles;if(this.options.selectable){this.wrapper.on(s+o,k+n.task+","+k+n.taskOffset,function(e){e.stopPropagation();var t=_(this).attr("data-uid");if(!t){t=_(this).closest(k+n.taskWrap).find(k+n.task).data("uid")}if(!e.ctrlKey){i.trigger("select",{uid:t})}else{i.trigger("clear")}}).on(s+o,k+n.taskWrap,function(e){e.stopPropagation();_(this).css("z-index","0");var t=_(document.elementFromPoint(e.clientX,e.clientY));if(t.hasClass(n.line)){t.click()}_(this).css("z-index","")}).on(s+o,k+n.tasksWrapper,function(){if(i.selectDependency().length>0){i.clearSelection()}else{i.trigger("clear")}}).on(s+o,k+n.line,function(e){e.stopPropagation();i.selectDependency(this)})}},select:function(e){var t=this.wrapper.find(e);var i=z.styles;if(t.length){this.clearSelection();t.addClass(i.selected);if(kendo.support.mobileOS){t.parent().addClass(i.taskWrapActive)}return}return this.wrapper.find(k+i.task+k+i.selected)},selectDependency:function(e){var t=this.wrapper.find(e);var i;var n=z.styles;if(t.length){this.clearSelection();this.trigger("clear");i=_(t).attr("data-uid");this.wrapper.find(k+n.line+"[data-uid='"+i+"']").addClass(n.selected);return}return this.wrapper.find(k+n.line+k+n.selected)},clearSelection:function(){var e=z.styles;this.wrapper.find(k+e.selected).removeClass(e.selected);if(kendo.support.mobileOS){this.wrapper.find(k+e.taskWrapActive).removeClass(e.taskWrapActive)}},_attachEvents:function(){var n=this;var t=z.styles;var e=this.options.editable;if(e){this._tabindex();this.wrapper.on(s+o,k+t.taskDelete,function(e){n.trigger("removeTask",{uid:_(this).closest(k+t.taskWrap).find(k+t.task).attr("data-uid")});e.stopPropagation();e.preventDefault()}).on(w+o,function(e){var t;var i=n.options.editable;if(e.keyCode===r.DELETE&&i&&i.dependencyDestroy!==false){t=n.selectDependency();if(t.length){n.trigger("removeDependency",{uid:t.attr("data-uid")});n.clearSelection()}}});if(!kendo.support.mobileOS){this.wrapper.on(c+o,k+t.task+","+k+t.taskOffset,function(e){if(n.options.editable.update!==false){n.trigger("editTask",{uid:_(this).closest(k+t.taskWrap).find(k+t.task).attr("data-uid")});e.stopPropagation();e.preventDefault()}})}else{this.touch=this.wrapper.kendoTouch({filter:k+t.task+","+k+t.taskOffset,doubletap:function(e){if(n.options.editable.update!==false){n.trigger("editTask",{uid:_(e.touch.currentTarget).closest(k+t.taskWrap).find(k+t.task).attr("data-uid")})}}}).data("kendoTouch")}}},_tooltip:function(){var r=this;var e=this.options.tooltip;var a=z.styles;var i;var n=function(e){i=e.clientX};if(e&&e.visible===false){return}if(!kendo.support.mobileOS){this.wrapper.on(m+o,k+a.task,function(){var e=this;var t=r._taskByUid(_(this).attr("data-uid"));if(r.dragInProgress){return}r._tooltipTimeout=setTimeout(function(){r.view()._createTaskTooltip(t,e,i)},800);_(this).on(p,n)}).on(g+o,k+a.task,function(){clearTimeout(r._tooltipTimeout);r.view()._removeTaskTooltip();_(this).off(p,n)}).on(m+o,k+a.taskOffset,function(){var e=_(this).closest(k+a.taskWrap).find(k+a.task);var t=r._taskByUid(e.attr("data-uid"));if(r.dragInProgress){return}r._offsetTooltipTimeout=setTimeout(function(){r.view()._createOffsetTooltip(t,e,i)},800);_(this).on(p,n)}).on(g+o,k+a.taskOffset,function(){clearTimeout(r._offsetTooltipTimeout);r.view()._removeOffsetTooltip();_(this).off(p,n)}).on(m+o,k+a.taskPlanned,function(){var e=_(this).closest(k+a.taskWrap).find(k+a.task);var t=r._taskByUid(e.attr("data-uid"));r._plannedTooltipTimeout=setTimeout(function(){r.view()._createPlannedTooltip(t,e,i)},800);_(this).on(p,n)}).on(g+o,k+a.taskPlanned,function(){clearTimeout(r._plannedTooltipTimeout);r.view()._removePlannedTooltip();_(this).off(p,n)})}else{this.wrapper.on(s+o,k+a.taskDelete,function(e){e.stopPropagation();r.view()._removeTaskTooltip()}).on(g+o,k+a.task,function(e){var t=_(e.relatedTarget).parents(k+a.taskWrap,k+a.task);if(t.length===0){r.view()._removeTaskTooltip()}}).on(g+o,k+a.taskOffset,function(e){var t=_(e.relatedTarget).parents(k+a.taskWrap,k+a.task);if(t.length===0){r.view()._removeOffsetTooltip()}}).on(g+o,k+a.taskPlanned,function(e){var t=_(e.relatedTarget).parents(k+a.taskWrap,k+a.task);if(t.length===0){r.view()._removePlannedTooltip()}});if(this.touch){this.touch.bind("tap",function(e){var t=_(e.touch.target);var i=e.touch.x.client;var n;if(!t.hasClass(a.task)){n=r._taskByUid(t.closest(k+a.taskWrap).find(k+a.task).attr("data-uid"));if(r.view()._offsetTooltip){r.view()._removeOffsetTooltip()}r.view()._createOffsetTooltip(n,t,i)}else{n=r._taskByUid(t.attr("data-uid"));if(r.view()._taskTooltip){r.view()._removeTaskTooltip()}r.view()._createTaskTooltip(n,t,i)}}).bind("doubletap",function(){r.view()._removeTaskTooltip();r.view()._removeOffsetTooltip()})}}},_setPlanned:function(e){this.options.showPlannedTasks=e;this.view().options.showPlannedTasks=e}});d(true,z,{styles:V})})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.gantt",["kendo.data","kendo.resizable","kendo.switch","kendo.gantt.data","kendo.gantt.editors","kendo.gantt.list","kendo.gantt.timeline","kendo.pdf"],e)})(function(){var e={id:"gantt",name:"Gantt",category:"web",description:"The Gantt component.",depends:["data","resizable","switch","gantt.data","gantt.editors","gantt.list","gantt.timeline","pdf"]};(function(w,n){var k=window.kendo,y=w.extend({F10:121},k.keys),v="matchMedia"in window,l=k.support.mobileOS,r=k.ui.Widget,f=k.data.ObservableObject,s=k.data.ObservableArray,p=k.data.Query,d=w.isArray,o=w.inArray,m=k.isFunction,g=w.proxy,u=w.extend,c=w.isPlainObject,h=k._outerWidth,_=k._outerHeight,e=3,x=".kendoGantt",b="p0",C="tabIndex",S="click",T="string",a="aria-activedescendant",t="aria-label",D="gantt_active_cell",A=".",i="Are you sure you want to delete this task?",E="Are you sure you want to delete this dependency?",B=k.template('<button class="#=styles.buttonToggle#" type="button" '+t+'="Toggle"><span class="#=styles.iconToggle#"></span></button>'),I='<button class="#=styles.button# #=className#" type="button" '+"#if (action) {#"+'data-action="#=action#"'+"#}#"+'><span class="#=iconClass#"></span><span class="k-button-text">#=text#</span></button>',L='<a class="#=className#" #=attr# href="\\#">#=text#</a>',H=k.template('<select class="k-dropdown #= styles.viewsDropdown #">'+"#for(var view in views){#"+'<option value="#=view#">#=views[view].title#</option>'+"#}#"+"</select>"),N=k.template('<div class="#=styles.viewsWrapper#">'+'<span class="k-button-group #=styles.views#">'+"#for(var view in views){#"+'<button type="button" class="#=styles.button# #=styles.viewButton#-#= view.toLowerCase() #" data-#=ns#name="#=view#"><span class="k-button-text">#=views[view].title#</span></button>'+"#}#"+"</span>"+"</div>");var M={wrapper:"k-widget k-widget-2021 k-gantt",plannedTasks:"k-gantt-planned",rowHeight:"k-gantt-rowheight",content:"k-gantt-content",listWrapper:"k-gantt-treelist",list:"k-gantt-treelist",timelineWrapper:"k-gantt-timeline",timeline:"k-gantt-timeline",splitBarWrapper:"k-splitbar k-state-default k-splitbar-horizontal k-splitbar-draggable-horizontal",splitBar:"k-splitbar",splitBarHover:"k-splitbar-horizontal-hover",popupWrapper:"k-list-container",popupList:"k-list k-reset",resizeHandle:"k-resize-handle",icon:"k-icon",item:"k-item",line:"k-gantt-line",buttonDelete:"k-gantt-delete",buttonCancel:"k-gantt-cancel",buttonSave:"k-gantt-update",buttonToggle:"k-gantt-toggle",primary:"k-primary",hovered:"k-state-hover",selected:"k-state-selected",focused:"k-state-focused",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",tasks:"k-gantt-tasks",popup:{form:"k-popup-edit-form",editForm:"k-gantt-edit-form",formContainer:"k-edit-form-container",resourcesFormContainer:"k-resources-form-container",message:"k-popup-message",buttonsContainer:"k-edit-buttons k-state-default",button:"k-button",editField:"k-edit-field",editLabel:"k-edit-label",resourcesField:"k-gantt-resources"},toolbar:{headerWrapper:"k-gantt-header k-toolbar k-gantt-toolbar",footerWrapper:"k-gantt-footer k-toolbar k-gantt-toolbar",toolbar:"k-gantt-toolbar",views:"k-gantt-views",viewsWrapper:"k-gantt-views-wrapper",viewsDropdown:"k-views-dropdown",button:"k-button k-button-icontext",buttonToggle:"k-button k-button-icon k-gantt-toggle",iconPlus:"k-icon k-i-plus",iconPdf:"k-icon k-i-file-pdf",iconToggle:"k-icon k-i-layout-1-by-4",viewButtonDefault:"k-state-default",viewButton:"k-view",link:"k-link",pdfButton:"k-gantt-pdf",appendButton:"k-gantt-create"}};function R(e){return"["+k.attr("uid")+(e?"='"+e+"']":"]")}function O(e){delete e.name;delete e.prefix;delete e.remove;delete e.edit;delete e.add;delete e.navigate;return e}function F(t,e){var i=t.parents("["+k.attr("role")+'="gantt"]');var n=[];var r=V(i);t.attr(C,0);if(e){r.each(function(e,t){n[e]=w(t).scrollTop()})}try{t[0].setActive()}catch(e){t[0].focus()}if(e){r.each(function(e,t){w(t).scrollTop(n[e])})}}function V(e){return w(e).parentsUntil("body").filter(function(e,t){var i=k.getComputedStyles(t,["overflow"]);return i.overflow!="visible"}).add(window)}var P;var z=r.extend({init:function(e,t,i){if(d(t)){t={dataSource:t}}P={append:{text:"Add Task",action:"add",className:z.styles.toolbar.appendButton,iconClass:z.styles.toolbar.iconPlus},pdf:{text:"Export to PDF",className:z.styles.toolbar.pdfButton,iconClass:z.styles.toolbar.iconPdf}};r.fn.init.call(this,e,t);if(i){this._events=i}this._wrapper();this._resources();if(!this.options.views||!this.options.views.length){this.options.views=["day","week","month"]}this._timeline();this._toolbar();this._footer();this._adjustDimensions();this._preventRefresh=true;this.view(this.timeline._selectedViewName);this._preventRefresh=false;this._dataSource();this._assignments();this._dropDowns();this._list();this._dependencies();this._resizable();this._scrollable();this._dataBind();this._attachEvents();this._createEditor();k.notify(this)},events:["dataBinding","dataBound","add","edit","remove","cancel","save","change","navigate","moveStart","move","moveEnd","resizeStart","resize","resizeEnd","columnHide","columnReorder","columnResize","columnShow","togglePlannedTasks"],options:{name:"Gantt",autoBind:true,navigatable:false,selectable:true,editable:true,resizable:false,columnResizeHandleWidth:e,columns:[],views:[],dataSource:{},dependencies:{},resources:{},assignments:{},taskTemplate:null,messages:{save:"Save",cancel:"Cancel",destroy:"Delete",deleteTaskConfirmation:i,deleteDependencyConfirmation:E,deleteTaskWindowTitle:"Delete task",deleteDependencyWindowTitle:"Delete dependency",views:{day:"Day",week:"Week",month:"Month",year:"Year",start:"Start",end:"End"},actions:{append:"Add Task",addChild:"Add Child",insertBefore:"Add Above",insertAfter:"Add Below",pdf:"Export to PDF"},editor:{editorTitle:"Task",resourcesEditorTitle:"Resources",title:"Title",start:"Start",end:"End",plannedStart:"Planned Start",plannedEnd:"Planned End",percentComplete:"Complete",resources:"Resources",assignButton:"Assign",resourcesHeader:"Resources",unitsHeader:"Units"},plannedTasks:{switchText:"Planned Tasks",offsetTooltipAdvanced:"Met deadline earlier",offsetTooltipDelay:"Delay",seconds:"seconds",minutes:"minutes",hours:"hours",days:"days"}},showWorkHours:true,showWorkDays:true,toolbar:null,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,hourSpan:1,snap:true,height:600,listWidth:"30%",rowHeight:null,showPlannedTasks:false},select:function(e){var t=this.list;if(!e){return t.select()}if(typeof e===T){e=t.content.find(e)}t.select(e);this.list.element.find("table[role=treegrid]").focus();return},clearSelection:function(){this.list.clearSelection()},destroy:function(){r.fn.destroy.call(this);if(this.dataSource){this.dataSource.unbind("change",this._refreshHandler);this.dataSource.unbind("progress",this._progressHandler);this.dataSource.unbind("error",this._errorHandler)}if(this.dependencies){this.dependencies.unbind("change",this._dependencyRefreshHandler);this.dependencies.unbind("error",this._dependencyErrorHandler)}if(this.timeline){this.timeline.unbind();this.timeline.destroy()}if(this.list){this.list.unbind();this.list.destroy()}if(this.footerDropDown){this.footerDropDown.destroy()}if(this.headerDropDown){this.headerDropDown.destroy()}if(this._editor){this._editor.destroy()}if(this._resizeDraggable){this._resizeDraggable.destroy()}this.toolbar.off(x);if(v){this._mediaQuery.removeListener(this._mediaQueryHandler);this._mediaQuery=null}w(window).off("resize"+x,this._resizeHandler);w(this.wrapper).off(x);this.toolbar=null;this.footer=null;k.destroy(this.element)},setOptions:function(e){var t=k.deepExtend({},this.options,e);var i=this._events;if(!e.views){var n=this.view().name;t.views=w.map(this.options.views,function(e){var t=c(e);var i=t?typeof e.type!=="string"?e.title:e.type:e;if(n===i){if(t){e.selected=true}else{e={type:i,selected:true}}}else if(t){e.selected=false}return e})}if(!e.dataSource){t.dataSource=this.dataSource}if(!e.dependencies){t.dependencies=this.dependencies}if(!e.resources){t.resources=this.resources}if(!e.assignments){t.assignments=this.assignments}this.destroy();this.element.empty();this.options=null;this.init(this.element,t,i);r.fn._setEvents.call(this,t)},_attachEvents:function(){this._resizeHandler=g(this.resize,this,false);w(window).on("resize"+x,this._resizeHandler);if(v&&this._mediaQuery.matches===true){this._mediaQueryHandler({matches:true})}},_wrapper:function(){var e=z.styles;var t=[e.icon,e.resizeHandle].join(" ");var i=this.options;var n=i.height;var r=i.width;this.wrapper=this.element.addClass(e.wrapper);this.layout=w("<div class='"+e.content+"' />").appendTo(this.wrapper).append("<div class='"+e.listWrapper+"'><div></div></div>").append("<div class='"+e.splitBarWrapper+"'><div class='"+t+"'></div></div>").append("<div class='"+e.timelineWrapper+"'><div></div></div>");if(i.showPlannedTasks){this.wrapper.addClass(e.plannedTasks)}if(n){this.wrapper.css("height",n)}if(r){this.wrapper.css("width",r)}if(i.rowHeight){this.wrapper.addClass(e.rowHeight)}this.treelistWrapper=this.wrapper.find(A+e.list);this.splitbar=this.wrapper.find(A+e.splitBar);this.timelineWrapper=this.wrapper.find(A+e.timeline);this.treelistWrapper.css("width",i.listWidth);this.timelineWrapper.css("width",this.wrapper.width()-this.treelistWrapper.outerWidth()-this.splitbar.outerWidth())},_toolbar:function(){var n=this;var r=z.styles;var e=A+r.toolbar.views+" > button";var t=A+r.toolbar.viewsDropdown;var i=A+r.toolbar.pdfButton;var a=A+r.buttonToggle;var o=A+r.gridContent;var s=n.splitbar;var l=n.treelistWrapper;var d=n.timelineWrapper;var u=this.options.toolbar;var c;var f;var h;var p=function(e){if(e.matches){l.addClass("k-hidden");s.addClass("k-hidden");l.width("100%")}else{l.removeClass("k-hidden");s.removeClass("k-hidden");d.removeClass("k-hidden");l.width(l.outerWidth());n.refresh();d.find(o).scrollTop(n.scrollTop)}n._resize()};if(!m(u)){u=typeof u===T?u:this._actions(u);u=g(k.template(u),this)}h=w(B({styles:r.toolbar}));f=w(N({ns:k.ns,views:this.timeline.views,styles:r.toolbar}));c=w("<div class='"+r.toolbar.headerWrapper+"'>").append(h).append(u({})).append("<span class='k-spacer k-toolbar-spacer' />").append(f);if(f.find("button").length>1){f.prepend(H({ns:k.ns,views:this.timeline.views,styles:r.toolbar}))}if(this.toggeSwitchWrap){this.toggeSwitchWrap.insertBefore(f)}this.wrapper.prepend(c);this.toolbar=c;if(v){this._mediaQueryHandler=g(p,this);this._mediaQuery=window.matchMedia("(max-width: 480px)");this._mediaQuery.addListener(this._mediaQueryHandler)}c.on("change"+x,t,function(){var e=n.list;var t=w(this).val();if(e.editable&&e.editable.trigger("validate")){return}if(!n.trigger("navigate",{view:t})){n.view(t)}n.toolbar.find(A+r.focused).removeClass(r.focused)}).on(S+x,e,function(e){e.preventDefault();var t=n.list;var i=w(this).attr(k.attr("name"));if(t.editor&&!t.editor.end()){return}if(!n.trigger("navigate",{view:i})){n.view(i)}n.toolbar.find(A+r.focused).removeClass(r.focused)}).on("keydown"+x,e,function(e){var t=w(A+r.toolbar.views).children(":not(.k-current-view)");var i=t.index(n._focusedView&&n._focusedView[0]||t.closest(A+r.selected)[0]);if(e.keyCode===y.RIGHT){w(n.toolbar.find(A+r.focused)).removeClass(r.focused);n._focusedView=i+1===t.length?w(t[0]):w(t[i+1]);n._focusedView.focus().addClass(r.focused);e.preventDefault()}else if(e.keyCode===y.LEFT){w(n.toolbar.find(A+r.focused)).removeClass(r.focused);n._focusedView=i===0?w(t[t.length-1]):w(t[i-1]);n._focusedView.focus().addClass(r.focused);e.preventDefault()}else if((e.keyCode===y.ENTER||e.keyCode===y.SPACEBAR)&&n._focusedView){n.view(n._focusedView.text().toLowerCase());e.preventDefault()}else if(e.keyCode>=49&&e.keyCode<=57){n.view(n.timeline._viewByIndex(e.keyCode-49))}}).on(S+x,i,function(e){e.preventDefault();n.saveAsPDF()}).on(S+x,a,function(e){e.preventDefault();if(l.is(":visible")){l.addClass("k-hidden");d.removeClass("k-hidden");n.refresh();d.find(o).scrollTop(n.scrollTop)}else{l.removeClass("k-hidden");d.addClass("k-hidden");l.find(o).scrollTop(n.scrollTop)}n._resize()});this.wrapper.on("focusout"+x,function(e){if(!w(e.relatedTarget).closest(A+r.toolbar.toolbar).length){n.toolbar.find(A+r.focused).removeClass(r.focused)}if(!w(e.relatedTarget).closest(A+r.toolbar.views).length){n.toolbar.find(A+r.toolbar.views).removeClass(r.toolbar.expanded)}})},_actions:function(){var e=this.options;var t=e.editable;var i=e.toolbar;var n="";var r;if(!d(i)){if(t&&t.create!==false){i=["append"]}else{return n}}for(var a=0,o=i.length;a<o;a++){r=i[a];if(r==="plannedTasks"||r.name==="plannedTasks"){this._createPlannedTasksSwitch();continue}n+=this._createButton(r)}return n},_footer:function(){var e=this.options.editable;if(!e||e.create===false){return}var t=z.styles.toolbar;var i=this.options.messages.actions;var n=w(k.template(I)(u(true,{styles:t},P.append,{text:i.append})));var r=w("<div class='"+t.footerWrapper+"'>").append(n);this.wrapper.append(r);this.footer=r},_createButton:function(e){var t=e.template||I;var i=this.options.messages.actions;var n=typeof e===T?e:e.name||e.text;var r=P[n]?P[n].className:"k-gantt-"+(n||"").replace(/\s/g,"");var a={iconClass:"",action:"",text:n,className:r,styles:z.styles.toolbar};if(!n&&!(c(e)&&e.template)){throw new Error("Custom commands should have name specified")}a=u(true,a,P[n],{text:i[n]});if(c(e)){if(e.className&&o(a.className,e.className.split(" "))<0){e.className+=" "+a.className}a=u(true,a,e)}return k.template(t)(a)},_adjustDimensions:function(){var e=this.element;var t=_(this.toolbar);var i=this.footer?_(this.footer):0;var n=e.height();var r=e.width();var a=this.splitbar.is(":visible")?h(this.splitbar):0;var o=this.treelistWrapper.is(":visible")?h(this.treelistWrapper):0;var s=r-(o+a);this.layout.children().height(n-(t+i));this.timelineWrapper.width(s);if(r<o+a){this.treelistWrapper.width(r-a)}},_scrollTo:function(e){var t=this.timeline.view();var i=this.list;var n=k.attr("uid");var r=typeof e==="string"?e:e.closest("tr"+R()).attr(n);var a;var o;var s=function(){if(o.length!==0){a()}};if(t.content.is(":visible")){o=t.content.find(R(r));a=function(){t._scrollTo(o)}}else{o=i.element.find(R(r));a=function(){o.get(0).scrollIntoView()}}s()},_dropDowns:function(){var u=this;var e=A+z.styles.toolbar.appendButton;var t=this.options.messages.actions;var c=this.timeline;var i=this.options.editable;var n=function(e){var t=e.type;var i;var n=u.dataSource;var r=n._createNewModel({});var a=u.dataItem(u.select());var o=n.taskParent(a);var s=c.view()._timeSlots()[0];var l=t==="add"?a:o;var d=u.list.editor;if(d&&d.trigger("validate")){return}r.set("title","New task");if(l){r.set("parentId",l.get("id"));r.set("start",l.get("start"));r.set("end",l.get("end"));r.set("plannedStart",l.get("plannedStart"));r.set("plannedEnd",l.get("plannedEnd"))}else{r.set("start",s.start);r.set("end",s.end)}if(t!=="add"){i=a.get("orderId");i=t==="insert-before"?i:i+1}u._createTask(r,i)};if(!i||i.create===false){return}this.footerDropDown=new k.gantt.TaskDropDown(this.footer.children(e).eq(0),{messages:{actions:t},direction:"up",animation:{open:{effects:"slideIn:up"}},navigatable:u.options.navigatable});this.headerDropDown=new k.gantt.TaskDropDown(this.toolbar.children(e).eq(0),{messages:{actions:t},navigatable:u.options.navigatable});this.footerDropDown.bind("command",n);this.headerDropDown.bind("command",n)},_getListEditable:function(){var e=false,t=this.options;if(t.editable!==false){e="incell";if(t.editable&&t.editable.update===false){e=false}else{if(!t.editable||t.editable.reorder!==false){e={mode:"incell",move:{reorderable:true}}}}}return e},_getListOptions:function(){var e=this.options,t=this._getListEditable(),i=this.wrapper.find(A+M.list),n={columns:e.columns||[],dataSource:this.dataSource,selectable:e.selectable,reorderable:e.reorderable,editable:t,resizable:e.resizable,filterable:e.filterable,columnMenu:e.columnMenu,columnResizeHandleWidth:this.options.columnResizeHandleWidth,listWidth:h(i),resourcesField:this.resources.field,rowHeight:this.options.rowHeight};return n},_attachResourceEditor:function(e){var t;for(var i=0;i<e.length;i++){t=e[i];if(t.field===this.resources.field&&typeof t.editor!=="function"){t.editor=g(this._createResourceEditor,this)}}},_attachListEvents:function(){var r=this,t=r.options.navigatable,i=this.wrapper.find(A+M.toolbar.toolbar+" "+A+M.toolbar.appendButton),a=function(){var e;if(t&&r._cachedCurrent){e=r.list.content.find("tr").eq(r._cachedCurrent.rowIndex).find("td").eq(r._cachedCurrent.columnIndex);r._current(e);F(r.list.content.find("table"),true)}delete r._cachedCurrent};r.list.bind("columnShow",function(e){r.trigger("columnShow",{column:e.column})}).bind("columnHide",function(e){r.trigger("columnHide",{column:e.column})}).bind("columnReorder",function(e){r.trigger("columnReorder",{column:e.column,oldIndex:e.oldIndex,newIndex:e.newIndex})}).bind("columnResize",function(e){r.trigger("columnResize",{column:e.column,oldWidth:e.oldWidth,newWidth:e.newWidth})}).bind("render",function(){r._navigatable()},true).bind("beforeEdit",function(e){r._cachedCurrent={rowIndex:e.container.closest("tr").index(),columnIndex:e.container.index()};if(r.trigger("edit",{task:e.model,container:e.container})){e.preventDefault()}}).bind("cancel",function(e){if(r.trigger("cancel",{task:e.model,container:e.cell})){e.preventDefault();return}r._preventItemChange=true;r.list.closeCell(true);a()}).bind("save",function(e){var t=e.values;r._preventRefresh=true;if(r.updateDuration===null||r.updateDuration===n){r.updateDuration=e.model.duration()}if(r.updatePlannedDuration===null||r.updatePlannedDuration===n){r.updatePlannedDuration=e.model.plannedDuration()}if(t.hasOwnProperty("start")){r.previousStart=e.model.get("start");t.end=new Date(t.start.getTime()+r.updateDuration)}if(t.hasOwnProperty("plannedStart")&&t.plannedStart){r.previousPlannedStart=e.model.get("plannedStart");t.plannedEnd=new Date(t.plannedStart.getTime()+r.updatePlannedDuration)}r.updatedValues=t}).bind("itemChange",function(e){var t=r.updatedValues;var i=e.data;var n=r.resources.field;if(r._preventItemChange){r._preventItemChange=false;return}if(r.previousStart){i.set("start",r.previousStart);r.previousStart=null}if(r.previousPlannedStart){i.set("plannedStart",r.previousPlannedStart);r.previousPlannedStart=null}if(!r.trigger("save",{task:i,values:t})){if(t){r._preventRefresh=true;r.dataSource.update(i,t);if(t[n]){r._updateAssignments(i.get("id"),t[n])}}r._preventRefresh=false;r._requestStart();r.dataSource.sync().then(function(){a()})}else if(r.dataSource.hasChanges()){r.dataSource.cancelChanges();r._preventRefresh=false;r.refresh()}r.updatedValues=null;r.updateDuration=null}).bind("change",function(){r.trigger("change");var e=r.list.select();if(e.length){i.removeAttr("data-action","add");r.timeline.select("[data-uid='"+e.attr("data-uid")+"']")}else{i.attr("data-action","add");r.timeline.clearSelection()}}).bind("collapse",function(e){e.preventDefault();var t=r.list.element.find("tr[data-uid='"+e.model.uid+"']");e.model.set("expanded",false);r._cachedCurrent={rowIndex:t.index(),columnIndex:t.find(".k-state-focused").index()};a()}).bind("expand",function(e){e.preventDefault();var t=r.list.element.find("tr[data-uid='"+e.model.uid+"']");e.model.set("expanded",true);r._cachedCurrent={rowIndex:t.index(),columnIndex:t.find(".k-state-focused").index()};a()}).bind("dragend",function(e){var t=r.dataSource,i,n;if(e.position==="over"){n={parentId:e.source.parentId};t.cancelChanges();i=t.get(e.source.id);if(!r.trigger("save",{task:i,values:n})){t.update(i,n)}}t.sync()}).bind("dataBound",function(){if(r.dataSource.sort().length===0){r.dataSource.sort([{field:"orderId",dir:"asc"}])}}).bind("reorder",function(e){r._updateTask(e.task,e.updateInfo);a()})},_list:function(){var e=z.styles,t=this.wrapper.find(A+e.list),i=t.find("> div"),n=this._getListOptions();this._attachResourceEditor(n.columns);this.list=new k.ui.GanttList(i,n);this._attachListEvents()},_timeline:function(){var r=this;var i=z.styles;var e=O(u(true,{resourcesField:this.resources.field},this.options));var t=this.wrapper.find(A+i.timeline+" > div");this.timeline=new k.ui.GanttTimeline(t,e);this.timeline.bind("navigate",function(e){var t=e.view.replace(/\./g,"\\.").toLowerCase();r.toolbar.find(A+i.toolbar.views+" > button").removeClass(i.selected).end().find(A+i.toolbar.viewButton+"-"+t).addClass(i.selected);r.toolbar.find(A+i.toolbar.viewsDropdown).val(t);r.refresh()}).bind("moveStart",function(e){var t=r.list.editor;if(t&&!t.end()){e.preventDefault();return}if(r.trigger("moveStart",{task:e.task})){e.preventDefault()}}).bind("move",function(e){var t=e.task;var i=e.start;var n=new Date(i.getTime()+t.duration());if(r.trigger("move",{task:t,start:i,end:n})){e.preventDefault()}}).bind("moveEnd",function(e){var t=e.task;var i=e.start;var n=new Date(i.getTime()+t.duration());if(!r.trigger("moveEnd",{task:t,start:i,end:n})){r._updateTask(r.dataSource.getByUid(t.uid),{start:i,end:n})}}).bind("resizeStart",function(e){var t=r.list.editor;if(t&&!t.end()){e.preventDefault();return}if(r.trigger("resizeStart",{task:e.task})){e.preventDefault()}}).bind("resize",function(e){if(r.trigger("resize",{task:e.task,start:e.start,end:e.end})){e.preventDefault()}}).bind("resizeEnd",function(e){var t=e.task;var i={};if(e.resizeStart){i.start=e.start}else{i.end=e.end}if(!r.trigger("resizeEnd",{task:t,start:e.start,end:e.end})){r._updateTask(r.dataSource.getByUid(t.uid),i)}}).bind("percentResizeStart",function(e){var t=r.list.editor;if(t&&!t.end()){e.preventDefault()}}).bind("percentResizeEnd",function(e){r._updateTask(r.dataSource.getByUid(e.task.uid),{percentComplete:e.percentComplete})}).bind("dependencyDragStart",function(e){var t=r.list.editor;if(t&&!t.end()){e.preventDefault()}}).bind("dependencyDragEnd",function(e){var t=r.dependencies._createNewModel({type:e.type,predecessorId:e.predecessor.id,successorId:e.successor.id});r._createDependency(t)}).bind("select",function(e){var t=r.list.editor;if(t){t.end()}r.select("[data-uid='"+e.uid+"']")}).bind("editTask",function(e){var t=r.list.editor;if(t&&!t.end()){return}r.editTask(e.uid)}).bind("clear",function(){r.clearSelection()}).bind("removeTask",function(e){var t=r.list.editor;if(t&&!t.end()){return}r.removeTask(r.dataSource.getByUid(e.uid))}).bind("removeDependency",function(e){var t=r.list.editor;if(t&&!t.end()){return}r.removeDependency(r.dependencies.getByUid(e.uid))})},_dataSource:function(){var e=this.options;var t=e.dataSource;t=d(t)?{data:t}:t;if(this.dataSource&&this._refreshHandler){this.dataSource.unbind("change",this._refreshHandler).unbind("progress",this._progressHandler).unbind("error",this._errorHandler)}else{this._refreshHandler=g(this.refresh,this);this._progressHandler=g(this._requestStart,this);this._errorHandler=g(this._error,this)}this.dataSource=k.data.GanttDataSource.create(t).bind("change",this._refreshHandler).bind("progress",this._progressHandler).bind("error",this._errorHandler)},_dependencies:function(){var e=this.options.dependencies||{};var t=d(e)?{data:e}:e;if(this.dependencies&&this._dependencyRefreshHandler){this.dependencies.unbind("change",this._dependencyRefreshHandler).unbind("error",this._dependencyErrorHandler)}else{this._dependencyRefreshHandler=g(this.refreshDependencies,this);this._dependencyErrorHandler=g(this._error,this)}this.dependencies=k.data.GanttDependencyDataSource.create(t).bind("change",this._dependencyRefreshHandler).bind("error",this._dependencyErrorHandler)},_resources:function(){var e=this.options.resources;var t=e.dataSource||{};this.resources={field:"resources",dataTextField:"name",dataColorField:"color",dataFormatField:"format"};u(this.resources,e);this.resources.dataSource=k.data.DataSource.create(t)},_assignments:function(){var e=this.options.assignments;var t=e.dataSource||{};if(this.assignments){this.assignments.dataSource.unbind("change",this._assignmentsRefreshHandler)}else{this._assignmentsRefreshHandler=g(this.refresh,this)}this.assignments={dataTaskIdField:"taskId",dataResourceIdField:"resourceId",dataValueField:"value"};u(this.assignments,e);this.assignments.dataSource=k.data.DataSource.create(t);this.assignments.dataSource.bind("change",this._assignmentsRefreshHandler)},_createEditor:function(){var i=this;var e=this._editor=new k.gantt.PopupEditor(this.wrapper,u({},this.options,{target:this,resources:{field:this.resources.field,editor:g(this._createResourceEditor,this)},createButton:g(this._createPopupButton,this)}));e.bind("cancel",function(e){var t=i.dataSource.getByUid(e.model.uid);if(i.trigger("cancel",{container:e.container,task:t})){e.preventDefault();return}i.cancelTask()}).bind("edit",function(e){var t=i.dataSource.getByUid(e.model.uid);if(i.trigger("edit",{container:e.container,task:t})){e.preventDefault()}}).bind("save",function(e){var t=i.dataSource.getByUid(e.model.uid);i.saveTask(t,e.updateInfo)}).bind("remove",function(e){i.removeTask(e.model.uid)}).bind("close",i._onDialogClose)},_onDialogClose:function(){},_createResourceEditor:function(e,t){var i=this;var n=t instanceof f?t:t.model;var r=n.get("id");var a=this.options.messages;var o=this.resources.field;var s={step:.01};var l=this.assignments.dataSource.options.schema.model;if(l&&l.fields.Units&&l.fields.Units.validation){u(true,s,l.fields.Units.validation)}var d=this._resourceEditor=new k.gantt.ResourceEditor(e,{resourcesField:o,unitsValidation:s,data:this._wrapResourceData(r),model:n,messages:u({},a.editor),buttons:[{name:"update",text:a.save,className:z.styles.primary},{name:"cancel",text:a.cancel}],createButton:g(this._createPopupButton,this),save:function(e){i._updateAssignments(e.model.get("id"),e.model.get(o))}});d.open()},_createPopupButton:function(e){var t=e.name||e.text;var i={className:z.styles.popup.button+" k-gantt-"+(t||"").replace(/\s/g,""),text:t,attr:""};if(!t&&!(c(e)&&e.template)){throw new Error("Custom commands should have name specified")}if(c(e)){if(e.className){e.className+=" "+i.className}i=u(true,i,e)}return k.template(L)(i)},view:function(e){return this.timeline.view(e)},range:function(e){var t=this.dataSource;var i=this.view();var n=this.timeline;if(e){i.options.range={start:e.start,end:e.end};n._render(t.taskTree());n._renderDependencies(this.dependencies.view())}return{start:i.start,end:i.end}},date:function(e){var t=this.view();if(e){t.options.date=e;t._scrollToDate(e)}return t.options.date},dataItem:function(e){if(!e){return null}var t=this.list;var i=t.element.find(e);return t._modelFromElement(i)},setDataSource:function(e){this.options.dataSource=e;this._dataSource();this.list.setDataSource(this.dataSource);if(this.options.autoBind){e.fetch()}},setDependenciesDataSource:function(e){this.options.dependencies=e;this._dependencies();if(this.options.autoBind){e.fetch()}},items:function(){return this.wrapper.children(".k-task")},_updateAssignments:function(e,t){var i=this.assignments.dataSource;var n=this.assignments.dataTaskIdField;var r=this.assignments.dataResourceIdField;var a=false;var o=new p(i.view()).filter({field:n,operator:"eq",value:e}).toArray();var s;var l;var d;while(o.length){s=o[0];for(var u=0,c=t.length;u<c;u++){l=t[u];if(s.get(r)===l.get("id")){d=t[u].get("value");this._updateAssignment(s,d);t.splice(u,1);a=true;break}}if(!a){this._removeAssignment(s)}a=false;o.shift()}for(var f=0,h=t.length;f<h;f++){l=t[f];this._createAssignment(l,e)}i.sync()},cancelTask:function(){var e=this._editor;var t=e.container;if(t){e.close()}},editTask:function(e){var t=typeof e==="string"?this.dataSource.getByUid(e):e;if(!t){return}var i=this.dataSource._createNewModel(t.toJSON());i.uid=t.uid;this.cancelTask();this._editTask(i)},_editTask:function(e){this._editor.editTask(e,this.options.editable.plannedTasks)},saveTask:function(e,t){var i=this._editor;var n=i.container;var r=i.editable;if(n&&r&&r.end()){this._updateTask(e,t)}},_updateTask:function(e,t){var i=this;var n=i.resources.field;if(!i.trigger("save",{task:e,values:t})){if(t){i._preventRefresh=true;i.dataSource.update(e,t);if(t[n]){i._updateAssignments(e.get("id"),t[n])}}i._syncDataSource()}else if(i.dataSource.hasChanges()){i.dataSource.cancelChanges();i._preventRefresh=false;i.refresh()}},_updateAssignment:function(e,t){var i=this.assignments.dataValueField;e.set(i,t)},removeTask:function(e){var t=this;var i=typeof e==="string"?this.dataSource.getByUid(e):e;if(!i){return}this._taskConfirm(function(e){if(!e){t._removeTask(i)}},i)},_createTask:function(e,t){if(!this.trigger("add",{task:e,dependency:null})){var i=this.dataSource;this._preventRefresh=true;if(t===n){i.add(e)}else{i.insert(t,e)}this._scrollToUid=e.uid;this._syncDataSource()}},_createDependency:function(e){if(!this.trigger("add",{task:null,dependency:e})){this._preventDependencyRefresh=true;this.dependencies.add(e);this._preventDependencyRefresh=false;this.dependencies.sync()}},_createAssignment:function(e,t){var i=this.assignments;var n=i.dataSource;var r=i.dataTaskIdField;var a=i.dataResourceIdField;var o=i.dataValueField;var s=n._createNewModel();s[r]=t;s[a]=e.get("id");s[o]=e.get("value");n.add(s)},removeDependency:function(e){var t=this;var i=typeof e==="string"?this.dependencies.getByUid(e):e;if(!i){return}this._dependencyConfirm(function(e){if(!e){t._removeDependency(i)}},i)},_removeTaskDependencies:function(e,t){this._preventDependencyRefresh=true;for(var i=0,n=t.length;i<n;i++){this.dependencies.remove(t[i])}this._preventDependencyRefresh=false;this.dependencies.sync()},_removeTaskAssignments:function(e){var t=this.assignments.dataSource;var i=t.view();var n={field:this.assignments.dataTaskIdField,operator:"eq",value:e.get("id")};i=new p(i).filter(n).toArray();this._preventRefresh=true;for(var r=0,a=i.length;r<a;r++){t.remove(i[r])}this._preventRefresh=false;t.sync()},_removeTask:function(e){var t=this.dependencies.dependencies(e.id);if(!this.trigger("remove",{task:e,dependencies:t})){this._removeTaskDependencies(e,t);this._removeTaskAssignments(e);this._preventRefresh=true;if(this.dataSource.remove(e)){this._syncDataSource()}this._preventRefresh=false}},_removeDependency:function(e){if(!this.trigger("remove",{task:null,dependencies:[e]})){if(this.dependencies.remove(e)){this.dependencies.sync()}}},_removeAssignment:function(e){this.assignments.dataSource.remove(e)},_taskConfirm:function(e,t){var i=this.options.messages;this._confirm(e,{model:t,text:i.deleteTaskConfirmation,title:i.deleteTaskWindowTitle})},_dependencyConfirm:function(e,t){var i=this.options.messages;this._confirm(e,{model:t,text:i.deleteDependencyConfirmation,title:i.deleteDependencyWindowTitle})},_confirm:function(e,t){var i=this.options.editable;var n;var r;if(i===true||i.confirmation!==false){n=this.options.messages;r=[{name:"delete",text:n.destroy,className:z.styles.primary,click:function(){e()}},{name:"cancel",text:n.cancel,click:function(){e(true)}}];this.showDialog(u(true,{},t,{buttons:r}))}else{e()}},showDialog:function(e){this._editor.showDialog(e)},refresh:function(){if(this._preventRefresh||!this.list||this.list.editor){return}this._progress(false);var e=this.dataSource;var t=e.taskTree();var i=this._scrollToUid;var n;var r;var a=-1;if(this.current){r=this.current.closest("tr").attr(k.attr("uid"));a=this.current.index()}if(this.trigger("dataBinding")){return}if(this.resources.dataSource.data().length!==0){this._assignResources(t)}if(this._editor){this._editor.close()}this.clearSelection();this.list._renderTree(t);this.timeline._render(t);this.timeline._renderDependencies(this.dependencies.view());if(i){this._scrollTo(i);this.select(R(i))}if((i||r)&&a>=0){n=this.list.element.find("tr"+R(i||r)+" > td:eq("+a+")");this._current(n)}this._scrollToUid=null;this.trigger("dataBound")},refreshDependencies:function(){if(this._preventDependencyRefresh){return}if(this.trigger("dataBinding")){return}this.timeline._renderDependencies(this.dependencies.view());this.trigger("dataBound")},_assignResources:function(e){var u=this.resources;var c=this.assignments;var t=function(){var e=c.dataSource.view();var t={field:c.dataTaskIdField};e=new p(e).group(t).toArray();return e};var a=t();var i=function(e,t){var i=e.get("id");k.setter(u.field)(e,new s([]));for(var n=0,r=a.length;n<r;n++){if(a[n].value===i){t(e,a[n].items)}}};var n=function(e,t){for(var i=0,n=t.length;i<n;i++){var r=t[i];var a=u.dataSource.get(r.get(c.dataResourceIdField));var o=r.get(c.dataValueField);var s=r.get(c.dataResourceIdField);var l=a.get(u.dataFormatField)||b;var d=k.toString(o,l);e[u.field].push(new f({id:s,name:a.get(u.dataTextField),color:a.get(u.dataColorField),value:o,formatedValue:d}))}};for(var r=0,o=e.length;r<o;r++){i(e[r],n)}},_wrapResourceData:function(e){var i=this;var t=[];var n;var r=this.resources.dataSource.view();var a=this.assignments.dataSource.view();var o=new p(a).filter({field:i.assignments.dataTaskIdField,operator:"eq",value:e}).toArray();var s=function(e){var t=null;new p(o).filter({field:i.assignments.dataResourceIdField,operator:"eq",value:e}).select(function(e){t+=e.get(i.assignments.dataValueField)});return t};for(var l=0,d=r.length;l<d;l++){n=r[l];t.push({id:n.get("id"),name:n.get(i.resources.dataTextField),format:n.get(i.resources.dataFormatField)||b,value:s(n.id)})}return t},_syncDataSource:function(){this._preventRefresh=false;this._requestStart();this.dataSource.sync()},_requestStart:function(){this._progress(true)},_error:function(){this._progress(false)},_progress:function(e){k.ui.progress(this.element,e)},_resizable:function(){var i=this;var n=this.wrapper;var e=z.styles;var r=A+e.gridContent;var a=n.find(A+e.list);var o=n.find(A+e.timeline);var s;var l;var d;this._resizeDraggable=n.find(A+e.splitBar).height(a.height()).hover(function(){w(this).addClass(e.splitBarHover)},function(){w(this).removeClass(e.splitBarHover)}).end().kendoResizable({orientation:"horizontal",handle:A+e.splitBar,start:function(){s=a.width();l=o.width();d=k.scrollLeft(o.find(r))},resize:function(e){var t=e.x.initialDelta;if(k.support.isRtl(n)){t*=-1}if(s+t<0||l-t<0){return}a.width(s+t);o.width(l-t);k.scrollLeft(o.find(r),d+t);i.timeline.view()._renderCurrentTime()}}).data("kendoResizable")},_scrollable:function(){var e=this;var t=z.styles;var i=A+t.gridContent;var n=A+t.gridHeaderWrap;var r=this.timeline.element.find(n);var a=this.timeline.element.find(i);var o=this.list.element.find(n);var s=this.list.element.find(i);if(l){s.css("overflow-y","auto")}a.on("scroll",function(){e.scrollTop=this.scrollTop;k.scrollLeft(r,this.scrollLeft);s.scrollTop(this.scrollTop)});s.on("scroll",function(){k.scrollLeft(o,this.scrollLeft)}).on("DOMMouseScroll"+x+" mousewheel"+x,function(e){var t=a.scrollTop();var i=k.wheelDeltaY(e);if(i){e.preventDefault();w(e.currentTarget).one("wheel"+x,false);a.scrollTop(t+-i)}})},_navigatable:function(){var r=this;var a=this.options.navigatable;var o=this.options.editable;var s=z.styles;var e=A+s.gridContent;var t=A+s.gridHeaderWrap;var l=this.list.element.find(t).find("table");var d=this.list.element.find(e).find("table");var n=k.support.isRtl(this.wrapper);var i=this.timeline.element.find(A+s.gridContent);var u=l.add(d);var c=R();var f;var h={collapse:false,expand:true};var p=function(e){var t=r.timeline.view()._timeSlots()[0].offsetWidth;k.scrollLeft(i,k.scrollLeft(i)+(e?-t:t))};var v=function(e){var t=r.timeline.view()._rowHeight;i.scrollTop(i.scrollTop()+(e?-t:t))};var m=function(e){var t=r.current.parent("tr"+R());var i=r.current.index();var n=t[e]("tr:visible").first();if(r.select().length!==0){r.clearSelection()}if(n.length!==0){r._current(n.children("td:eq("+i+")"));r._scrollTo(r.current)}else{if(r.current.is("td")&&e=="prevAll"){F(l)}else if(r.current.is("th")&&e=="nextAll"){F(d)}}};var g=function(e){var t=r.current[e]();if(t.length!==0){r._current(t);f=r.current.index()}};var _=function(e){var t=r.dataItem(r.current);if(t.summary&&t.expanded!==e){t.set("expanded",e)}};var b=function(){var e=r.options.editable;if(!e||e.destroy===false||r.list.editor){return}var t=r.select();var i=k.attr("uid");if(t.length){r.removeTask(t.attr(i))}};w(this.wrapper).on("mousedown"+x,"tr"+c+", div"+c+":not("+A+s.line+")",function(e){var t=w(e.currentTarget);var i=w(e.target).is(":button,a,:input,a>.k-icon,textarea,span.k-icon:not(.k-i-none),span.k-link,.k-input,.k-multiselect-wrap");var n;if(e.ctrlKey){return}if(a){if(t.is("tr")){n=w(e.target).closest("td")}else{n=r.list.content.find("tr"+R(t.attr(k.attr("uid")))+" > td:first")}r._current(n)}if((a||o)&&!i){r._focusTimeout=setTimeout(function(){F(r.list.content.find("table"),true)},2)}}).on("keydown"+x,function(e){var t=e.keyCode;var i=this;var n=w(i._getToolbarItems());var r=n.index(i.toolbar.find(A+s.focused)[0]);if(r===-1&&w(e.target).closest(A+s.toolbar.views).length){r=n.index(i.toolbar.find(".k-gantt-views > .k-state-selected:visible, .k-views-dropdown:visible")[0])}var a=e.shiftKey?n[r-1]:n[r+1];if(t===y.F10){i.toolbar.find(".k-button:visible:first").addClass(s.focused).focus();e.preventDefault()}else if(t==y.TAB&&w(e.target).closest(A+s.toolbar.toolbar).length){i.toolbar.find(A+s.focused).removeClass(s.focused).blur();if(a){w(a).addClass(s.focused).focus();e.preventDefault();return}if(this.list.element.is(":visible")){this.list.element.find("table[role=treegrid]").focus()}else{this.element.find(A+s.tasks)[0].focus()}e.preventDefault()}}.bind(this));if(a!==true){d.on("keydown"+x,function(e){if(e.keyCode==y.DELETE){b()}});return}u.on("focus"+x,function(){var e=this===d.get(0)?"td":"th";var t=r.select();var i=r.current||w(t.length?t:this).find(e+":eq("+(f||0)+")");r._current(i);w(r.toolbar.find(A+s.focused)).removeClass(s.focused)}).on("blur"+x,function(){r._current();if(this==l){w(this).attr(C,-1)}}).on("keydown"+x,function(e){var t=e.keyCode;var i;if(!r.current){return}i=r.current.is("td");switch(t){case y.RIGHT:e.preventDefault();if(e.altKey){p()}else if(e.ctrlKey){_(n?h.collapse:h.expand)}else{g(n?"prev":"next")}break;case y.LEFT:e.preventDefault();if(e.altKey){p(true)}else if(e.ctrlKey){_(n?h.expand:h.collapse)}else{g(n?"next":"prev")}break;case y.UP:e.preventDefault();if(e.altKey){v(true)}else{m("prevAll")}break;case y.DOWN:e.preventDefault();if(e.altKey){v()}else{m("nextAll")}break;case y.SPACEBAR:e.preventDefault();if(i){r.select(r.current.closest("tr"))}break;case y.ENTER:e.preventDefault();if(i){if(r.options.editable&&r.options.editable.update!==false){r.list._startEditHandler(r.current);w(this).one("keyup",function(e){e.stopPropagation()})}}else{r.current.children("a.k-link").click()}break;case y.DELETE:if(i){b()}break;default:if(t>=49&&t<=57&&e.target.tagName.toLowerCase()!=="input"){r.view(r.timeline._viewByIndex(t-49))}break}})},_getToolbarItems:function(){return this.toolbar.find("> .k-button:visible").toArray().concat(this.toolbar.find(".k-views-dropdown:visible").toArray(),this.toolbar.find(".k-gantt-views > .k-state-selected:visible").toArray())},_current:function(e){var t=z.styles;var i;if(this.current&&this.current.length){this.current.removeClass(t.focused).removeAttr("id")}if(e&&e.length){this.current=e.addClass(t.focused).attr("id",D);i=w(k._activeElement());if(i.is("table")&&this.wrapper.find(i).length>0){i.removeAttr(a).attr(a,D)}}else{this.current=null}},_dataBind:function(){var e=this;if(e.options.autoBind){this._preventRefresh=true;this._preventDependencyRefresh=true;var t=w.map([this.dataSource,this.dependencies,this.resources.dataSource,this.assignments.dataSource],function(e){return e.fetch()});w.when.apply(null,t).done(function(){e._preventRefresh=false;e._preventDependencyRefresh=false;e.refresh()})}},_resize:function(){this._adjustDimensions();this.timeline.view()._adjustHeight();this.timeline.view()._renderCurrentTime();this.list._adjustHeight()},_createPlannedTasksSwitch:function(){var e=this;var t=e.options.messages.plannedTasks.switchText;var i=w("<span class='k-gantt-planned-wrap'><label>"+t+"</label></span>");var n=new k.ui.Switch(w("<input id='planned-switch' class='k-gantt-planned-switch'>"),{checked:e.options.showPlannedTasks,change:g(e._togglePlannedTasks,e),messages:{checked:"",unchecked:""}});i.append(n.wrapper);e.toggeSwitchWrap=i;e.toggleSwitch=n},_togglePlannedTasks:function(e){var t=this.timeline;if(!this.trigger("togglePlannedTasks",{showPlannedTasks:!t.options.showPlannedTasks})){this.wrapper.toggleClass(M.plannedTasks);t._setPlanned(!t.options.showPlannedTasks);t._render(this.dataSource.taskTree());t._renderDependencies(this.dependencies.view())}else{e.preventDefault()}}});if(k.PDFMixin){k.PDFMixin.extend(z.fn);z.fn._drawPDF=function(){var e=z.styles;var t=this.wrapper.find(A+e.list+" "+A+e.gridContent+">table").width();var i=this.wrapper.clone();i.find(A+e.list).css("width",t);return this._drawPDFShadow({content:i},{avoidLinks:this.options.pdf.avoidLinks})}}k.ui.plugin(z);u(true,z,{styles:M})})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.timeline",["kendo.fx","kendo.data","kendo.draganddrop"],e)})(function(){var e={id:"timeline",name:"Timeline",category:"web",description:"The Kendo Timeline widget display events over time",depends:["userevents"]};(function(h,n){var s=window.kendo,e=s.ui,r=e.Widget,a=s.data.DataSource,p=s.effects.Transition,l=h.proxy,o=s.keys,d=h.isArray,t=-1,i=0,u=1,c="vertical",f="transitionEnd",v=3,m="timeline-event",g="k-timeline-flag-wrap",_="k-timeline-track-item",b="k-timeline-scrollable-wrap",w=".kendoTimeline",k="change",y="# var titleField = data.titleField, subtitleField = data.subtitleField, descriptionField = data.descriptionField, imagesField = data.imagesField, actionsField = data.actionsField, altField = data.altField, data = data.data; #"+'<div class="k-card-inner">'+'<div class="k-card-header">'+"# if(data[titleField]) { #"+'<h5 class="k-card-title">#: data[titleField] #</h5>'+"# }"+"if(data[subtitleField]) { #"+'<h6 class="k-card-subtitle">#: data[subtitleField] #</h6>'+"# } #"+"</div>"+'<div class="k-card-body">'+'<div class="k-card-description">'+"# if(data[descriptionField]) { #"+"<p>#: data[descriptionField] #</p>"+"# }"+"if(data[imagesField] && data[imagesField].length > 0) { #"+'<img src="#: data[imagesField][0].src #"  #if(data[altField]){# alt="#:data[altField]#" #}# class="k-card-image" />'+"# } #"+"</div>"+"</div>"+"# if(data[actionsField] && data[actionsField].length > 0) { #"+'<div class="k-card-actions">'+"# for (var i = 0; i < data[actionsField].length; i++) { #"+'<a class="k-button k-flat k-primary" href="#: data[actionsField][i].url ? data[actionsField][i].url : "\\#" #">#: data[actionsField][i].text #</a>'+"# } #"+"</div>"+"# } #"+"</div>",x="# var titleField = data.titleField, subtitleField = data.subtitleField, descriptionField = data.descriptionField, imagesField = data.imagesField, navigatable = data.navigatable, collapsibleEvents = data.collapsibleEvents, actionsField = data.actionsField, altField = data.altField, data = data.data; #"+'<div class="k-card-inner">'+'<div class="k-card-header">'+'<h5 class="k-card-title">'+"# if(data[titleField]) { #"+'<span class="k-event-title">#: data[titleField] #</span>'+"# } #"+'<span class="k-event-collapse k-button k-button-icon k-flat">'+'<span class="k-icon k-i-arrow-chevron-right"></span>'+"</span></h5>"+"# if(data[subtitleField]) { #"+'<h6 class="k-card-subtitle">#: data[subtitleField] #</h6>'+"# } #"+"</div>"+'<div class="k-card-body">'+'<div class="k-card-description">'+"# if(data[descriptionField]) { #"+"<p>#: data[descriptionField] #</p>"+"# } #"+"# if(data[imagesField] && data[imagesField].length > 0) { #"+'<img src="#: data[imagesField][0].src #" #if(data[altField]){# alt="#:data[altField]#" #}# class="k-card-image" />'+"# } #"+"</div>"+"</div>"+"# if(data[actionsField] && data[actionsField].length > 0) { #"+'<div class="k-card-actions">'+"# for (var i = 0; i < data[actionsField].length; i++) { #"+'<a class="k-button k-flat k-primary" href="#: data[actionsField][i].url ? data[actionsField][i].url : "\\#" #">#: data[actionsField][i].text #</a>'+"# } #"+"</div>"+"# } #"+"</div>",C="# var itemTemplate = data.itemTemplate, dateField = data.dateField, dateFormat = data.dateFormat, showDateLabels = data.showDateLabels, data = data.data, year = 0; #"+"# for (var i = 0; i < data.length; i++) {"+"if(!(data[i][dateField] instanceof Date)) {"+"continue;"+"}"+"var currentYear = data[i][dateField].getFullYear();"+"if(year != currentYear) {"+"year = currentYear; #"+'<li class="k-timeline-track-item k-timeline-flag-wrap">'+'<span class="k-timeline-flag">#= year #</span>'+"</li>"+"# } #"+'<li class="k-timeline-track-item">'+'<div class="k-timeline-date-wrap">'+"# if(showDateLabels) { #"+'<span class="k-timeline-date">#= kendo.toString(data[i][dateField], dateFormat) #</span>'+"# } #"+"</div>"+'<a class="k-timeline-circle"></a>'+"</li>"+"# } #",S="# var itemTemplate = data.itemTemplate, dateField = data.dateField, titleField = data.titleField, descriptionField = data.descriptionField, subtitleField = data.subtitleField, imagesField = data.imagesField, actionsField = data.actionsField, alterMode = data.alterMode, collapsibleEvents = data.collapsibleEvents, dateFormat = data.dateFormat, showDateLabels = data.showDateLabels, navigatable = data.navigatable, altField = data.altField, data = data.data, counter = 0, year = 0, reverse = false;"+"for (var i = 0; i < data.length; i++) {"+"if(!(data[i][dateField] instanceof Date)) {"+"continue;"+"}"+"var currentYear = data[i][dateField].getFullYear();"+"if(currentYear != year) {"+"year = currentYear; #"+'<li class="k-timeline-flag-wrap">'+'<span class="k-timeline-flag">#= year #</span>'+"</li>"+"# } "+"reverse = counter % 2 === 0 && alterMode; #"+"<li class=\"#= reverse ? 'k-timeline-event k-reverse' : 'k-timeline-event' #\" data-uid=\"#: data[i].uid #\">"+"# if(showDateLabels) { #"+'<div class="k-timeline-date-wrap">'+'<span class="k-timeline-date">#= kendo.toString(data[i][dateField], dateFormat) #</span>'+"</div>"+"# } #"+'<a class="k-timeline-circle"></a>'+"<div class=\"#= collapsibleEvents ? 'k-timeline-card k-collapsed' : 'k-timeline-card' #\">"+"<div class=\"k-card\" #= (navigatable) ? \"tabindex='0' aria-live='polite' aria-atomic='true' role='button'\" : \"\" #>"+"<span class=\"#= reverse ? 'k-timeline-card-callout k-card-callout k-callout-e' : 'k-timeline-card-callout k-card-callout k-callout-w' #\"></span>"+"#= itemTemplate({titleField: titleField, subtitleField: subtitleField, descriptionField: descriptionField, imagesField: imagesField, actionsField: actionsField, data: data[i], altField: altField, navigatable: navigatable, collapsibleEvents: collapsibleEvents}) #"+"</div>"+"</div>"+"</li>"+"# counter ++;"+"} #",T='<a class="k-button k-timeline-arrow k-timeline-arrow-left k-state-disabled" title="previous">'+'<span class="k-icon k-i-arrow-60-left"></span>'+"</a>"+'<a class="k-button k-timeline-arrow k-timeline-arrow-right k-state-disabled" title="next">'+'<span class="k-icon k-i-arrow-60-right"></span>'+"</a>";function D(e){return"k-"+e}function A(e){var t=e.css("transform");var i;var n;if(t!="none"){n=t.match(/-?[\d\.]+/g);i=n[4];return i/e.width()*100}else{return 0}}function E(e,t){return e.offset().left-t.offset().left+e.width()/2}function I(e,t,i){e.css(t,i)}var M=s.Class.extend({init:function(e){this.cardContainer=h("<div class='k-card' />");var t=h("<div class='k-timeline-card'></div>").append(this.cardContainer);this.element=h("<li class='"+D(m)+"'></li>").append(t);e.append(this.element)},content:function(e,t){var i=h("<span class='k-timeline-card-callout k-card-callout k-callout-n'></span>");this.cardContainer.html(e);this.cardContainer.append(i);this.element.attr("data-uid",t)},position:function(e){this.element.css("transform","translate3d("+this.element.width()*e+"px, 0, 0)")},setPageCallout:function(e,t){var i=this.element;var n=i.find(".k-timeline-card-callout");n.css(e,t)},destroy:function(){var e=this;e.cardContainer=null;e.element.remove();e.element=null}});var R=s.Observable.extend({init:function(e,t){var i=this;s.Observable.fn.init.call(this);this.element=e;var n,r,a;n=new s.ui.Movable(i.element);r=new p({axis:"x",movable:n,onEnd:function(){i.trigger(f)}});a=[];h.extend(i,{duration:t&&t.duration||1,movable:n,transition:r,pages:a,eventTemplate:t.eventTemplate,eventHeight:t.eventHeight,dataFieldMappings:t.dataFieldMappings});this.bind([f],t)},initPages:function(){var e=this.pages,t=this.element,i;for(var n=0;n<v;n++){i=new M(t);e.push(i)}},repositionPages:function(){var e=this.pages;e[0].position(t);e[1].position(i);e[2].position(u)},setPageContent:function(e,t){var i=typeof this.eventTemplate===Function?this.eventTemplate:s.template(this.eventTemplate);var n=this.dataFieldMappings;var r;r=i({data:t,titleField:n.title,subtitleField:n.subtitle,descriptionField:n.description,imagesField:n.images,actionsField:n.actions,altField:n.altField});e.content(r,t.uid)},updatePage:function(e,t,i){var n=this.pages;var r=e===null?n[1]:e?n[n.length-1]:n[0];this.setPageContent(r,t);r.setPageCallout("left",i/r.element.width()*100+"%")},moveTo:function(e){this.movable.moveAxis("x",-e)},transitionTo:function(e,t){this.transition.moveTo({location:e,duration:this.duration,ease:t})},destroy:function(){var e=this;for(var t=0;t<e.pages.length;t++){e.pages[t].destroy()}e.unbind();e.movable=e.transition=e.dataFieldMappings=e.eventTemplate=e.duration=e.pages=null}});var F=s.ui.Widget.extend({init:function(e,t){var n=this;var i=t.orientation||n.options.orientation;r.fn.init.call(this,e,t);this.element.addClass(i===c?"k-timeline k-widget k-widget-2021 k-timeline-vertical":"k-timeline k-widget k-widget-2021 k-timeline-horizontal");if(i!=c){n._horizontal()}else{n._vertical()}this.element.on("click",".k-card-actions",function(){var e=h(event.target);var t=h(event.target).closest(".k-timeline-event").data("uid");var i=n.dataSource.getByUid(t);n.trigger("actionClick",{sender:n,element:e,dataItem:i})});n.currentEventIndex=0;n._forward=null;n._eventPage=1;n._currentIndex=0;n._firstIndexInView=0;n._initDataFieldMappings();n.setDataSource(t.dataSource)},_horizontal:function(){var e=this;var t=this.element;var i=this.options;var n=h("<div />");var r=h("<div />");var a=h("<ul />");var o=h("<div />");var s=h("<ul />");e._trackWrap=n;e._trackEl=r;e._scrollableWrap=a;e._eventsWrap=o;e._eventsList=s;n.addClass("k-timeline-track-wrap");r.addClass("k-timeline-track");a.addClass("k-timeline-scrollable-wrap");o.addClass("k-timeline-events-list");s.addClass("k-timeline-scrollable-wrap");if(i.eventHeight){s.height(i.eventHeight)}r.append(a);n.append(T);n.append(r);o.append(s);n.appendTo(t);o.appendTo(t)},_vertical:function(){var n=this;var e=this.options;var t=this.element;var i=n._eventsList=h("<ul />");var r=e.navigatable;var a=e.collapsibleEvents;n.element.append(i);if(e.alternatingMode){t.addClass("k-timeline-alternating")}if(a){t.addClass("k-timeline-collapsible");this.element.on("click",".k-card-header",function(){var e=h(this).closest(".k-timeline-card");var t=e.find(".k-card-body");var i=n.dataSource.getByUid(e.closest("li").data("uid"));if(e.hasClass("k-collapsed")){if(!n.trigger("expand",{sender:n,dataItem:i})){s.fx(t).expand("vertical").stop().play();e.toggleClass("k-collapsed");if(r&&a){e.find(".k-card").attr("aria-expanded",true)}}}else{if(!n.trigger("collapse",{sender:n,dataItem:i})){s.fx(t).expand("vertical").stop().reverse();e.toggleClass("k-collapsed");if(r&&a){e.find(".k-card").attr("aria-expanded",false)}}}})}if(r){if(a){this.element.on("keydown"+w,n,function(e){if(e.keyCode==o.SPACEBAR||e.keyCode==o.ENTER){var t=h(e.target);var i=t.find(".k-card-header");if(i.length){e.preventDefault();i.trigger("click")}}})}}},_renderContentVertical:function(e){var t=this;var i=t.options;var n;var r;if(typeof i.eventTemplate===Function){r=i.eventTemplate}else{r=i.eventTemplate?s.template(i.eventTemplate):s.template(x,{useWithBlock:false})}var a=s.template(S,{useWithBlock:false});n=a({data:e,dateField:i.dataDateField,titleField:i.dataTitleField,subtitleField:i.dataSubtitleField,descriptionField:i.dataDescriptionField,imagesField:i.dataImagesField,actionsField:i.dataActionsField,itemTemplate:r,alterMode:i.alternatingMode,collapsibleEvents:i.collapsibleEvents,dateFormat:i.dateFormat,showDateLabels:i.showDateLabels,altField:i.dataImagesAltField,navigatable:i.navigatable});this._eventsList.html(n);if(i.eventWidth){t.element.find(".k-card").width(i.eventWidth)}},_renderContentHorizontal:function(e){var t=this;var i=t.options;var n;var r;var a=t._dataFieldMappings;if(typeof i.eventTemplate===Function){r=i.eventTemplate}else{r=i.eventTemplate?s.template(i.eventTemplate):s.template(y,{useWithBlock:false})}var o=s.template(C,{useWithBlock:false});n=o({data:e,itemTemplate:r,dateFormat:i.dateFormat,dateField:i.dataDateField,showDateLabels:i.showDateLabels});if(i.initialEventIndex){t._trackWrap.append(h(n).find(".k-timeline-scrollable-wrap").css("transform","translateX(-100%)").parent())}else{t._scrollableWrap.html(n)}if(t.pane){t.pane.destroy()}t.pane=new R(t._eventsList,{transitionEnd:l(this,"_transitionEnd"),eventTemplate:r,dataFieldMappings:a,eventHeight:i.eventHeight})},_initDataFieldMappings:function(){var e=this;var t=e.options;e._dataFieldMappings={title:t.dataTitleField,subtitle:t.dataSubtitleField,date:t.dataDateField,description:t.dataDescriptionField,images:t.dataImagesField,actions:t.dataActionsField,altField:t.dataImagesAltField}},_transitionEnd:function(){if(this._forward){this.pane.pages.push(this.pane.pages.shift())}else{this.pane.pages.unshift(this.pane.pages.pop())}this._forward=null;this.pane.repositionPages();this.pane.movable.moveAxis("x",0);if(this.options.navigatable){this._transition=null;this._eventsList.find(".k-card").removeAttr("id");this.pane.pages[1].cardContainer.attr("id",this._cardId);this._setCurrent(this._currentBullet)}this._animationInProgress=false},_setCurrentEvent:function(e){var t=this;var i=h(e.currentTarget);var n;var r=t.dataSource.view()[i.parent().children(":not(.k-timeline-flag-wrap)").index(i)];n=t._forward?t.pane.pages[2].element:t.pane.pages[0].element;if(!t.trigger("change",{eventContainer:n,dataItem:r})){t.open(i)}},open:function(e){var t=this;var i=h(e);var n=i.find(".k-timeline-circle");var r=i.parent().children(":not(.k-timeline-flag-wrap)");var a=r.index(i);var o;if(this.options.navigatable){t._removeCurrent();r.attr("aria-selected",false);i.attr("aria-selected",true);t._currentBullet=i}var s=t.dataSource.view()[a];if(t.currentEventIndex===a){return}t._currentIndex=i.index();o=t._forward=t.currentEventIndex<a;t.currentEventIndex=a;t.pane.updatePage(o,s,E(n,t._trackWrap));if(t._forward){clearTimeout(t.navigateTimeOut);t.navigateTimeOut=setTimeout(function(){t.pane.transition.moveTo({location:-t.pane.pages[2].element.width(),duration:800,ease:p.easeOutExpo})},200)}else{clearTimeout(t.navigateTimeOut);t.navigateTimeOut=setTimeout(function(){t.pane.transition.moveTo({location:t.pane.pages[0].element.width(),duration:800,ease:p.easeOutExpo})},200)}t._repositionEvents()},_navigateToView:function(e){var t=this;var i=h(e.currentTarget).hasClass("k-timeline-arrow-right")?1:-1;if(!t.trigger("navigate",{sender:t,action:i>0?"next":"previous"})&&!t._animationInProgress){t._animationInProgress=true;if(i>0){t.next()}else{t.previous()}t._updateArrows()}},_updateArrows:function(){var e=this;var t=e.element.find(".k-timeline-arrow");var i=t.filter(".k-timeline-arrow-left");var n=t.filter(".k-timeline-arrow-right");if(e._validateNavigation(false)){i.addClass("k-state-disabled")}else{i.removeClass("k-state-disabled")}if(e._validateNavigation(true)){n.addClass("k-state-disabled")}else{n.removeClass("k-state-disabled")}},_validateNavigation:function(e){var t=this;var i=t._end||0;if(e){return t._firstIndexInView+t.numOfEvents>=t.maxEvents}else{return Math.abs(i)<=1}},next:function(){var e=this;var t=e.options;if(!e._validateNavigation(true)&&t.orientation!=c){e._forward=true;e._navigate()}e._updateArrows()},_navigate:function(){var i=this;var e;var n;var t;var r;var a=i._forward;var o=A(this._trackWrap.find("."+b));var s=a?-h("."+b).width():h("."+b).width();var l=i._currentIndex;var d;var u=i._firstIndexInView;o=a?o-100:o+100;if(o>=0){o=0}i._end=o;r=i._tackItemWidth;d=Math.floor(l/i.numOfEvents);if(a){if(i.numOfEvents===1){e=u===0?1:u;n=this._trackWrap.find("."+_).eq(e).nextAll(":not(."+g+")").first();i._firstIndexInView=n.index()}else{e=u+i.numOfEvents-1;n=this._trackWrap.find("."+_).eq(e).nextAll(":not(."+g+")").first();i._firstIndexInView=u+i.numOfEvents}}else{if(i.numOfEvents===1){e=u;n=this._trackWrap.find("."+_).eq(e).prevAll(":not(."+g+")").first();i._firstIndexInView=n.index()}else{e=u;n=this._trackWrap.find("."+_).eq(e).prevAll(":not(."+g+")").first();n=n.length>0?n:this._trackWrap.find("."+_+":not(."+g+")").first();i._firstIndexInView=u-i.numOfEvents<0?0:u-i.numOfEvents}}t=i.dataSource.view()[n.index("li[class='k-timeline-track-item']")];this._trackWrap.find("."+b).css("transform","translateX("+o+"%)");if(i._currentIndex!=n.index()){i.currentEventIndex=n.index("li[class='k-timeline-track-item']");i._currentIndex=n.index();i.pane.updatePage(i._forward,t,d===0&&!a?n.find(".k-timeline-circle").offset().left+15:E(n.find(".k-timeline-circle"),i._trackWrap)+s);clearTimeout(i.navigateTimeOut);i.navigateTimeOut=setTimeout(function(){if(a&&i.pane&&i.pane.pages.length>0){i.pane.transition.moveTo({location:-i.pane.pages[2].element.width(),duration:800,ease:p.easeOutExpo})}else{i.pane.transition.moveTo({location:i.pane.pages[0].element.width(),duration:800,ease:p.easeOutExpo})}},200)}else{var c=this._trackWrap.find("."+b);var f=function(){if(i.numOfEvents!=1){var e=i.pane.pages[1];var t=E(n.find(".k-timeline-circle"),i._trackWrap);e.setPageCallout("left",t/e.element.width()*100+"%")}this._transition=null;c.off("transitionend"+w,f)};c.on("transitionend"+w,f)}},previous:function(){var e=this;var t=e.options;if(!e._validateNavigation(false)&&t.orientation!=c){e._forward=false;e._navigate()}e._updateArrows()},expand:function(e){var t=h(e).find(".k-timeline-card");var i=h(e).find(".k-card-body");if(t.hasClass("k-collapsed")){s.fx(i).expand("vertical").stop().play();t.removeClass("k-collapsed")}},collapse:function(e){var t=h(e).find(".k-timeline-card");var i=h(e).find(".k-card-body");if(!t.hasClass("k-collapsed")){s.fx(i).expand("vertical").stop().reverse();t.addClass("k-collapsed")}},items:function(){return this.element.find("li[data-uid]")},_resizeHandler:function(){var e=this;clearTimeout(e.resizeTimeOut);e.resizeTimeOut=setTimeout(function(){e._redrawEvents();e.pane.repositionPages()})},redraw:function(){var e=this.options;if(e.orientation!=c){this._redrawEvents();this.pane.repositionPages()}},_redrawEvents:function(){var e=this;var t=Math.floor(e.element.find(".k-timeline-scrollable-wrap").width()/150);var i;if(e.element.width()<=480){e.element.addClass("k-timeline-mobile");i=100;e.numOfEvents=1;e._tackItemWidth=i;e.element.find("li.k-timeline-track-item").css("flex","1 0 "+i+"%");e._repositionEvents()}else{e.element.removeClass("k-timeline-mobile");if(t!=e.numOfEvents){e.numOfEvents=t;i=100/t;I(e.element.find("li.k-timeline-track-item"),"flex","1 0 "+i+"%");e._tackItemWidth=i;e._repositionEvents()}}e._updateArrows()},_repositionEvents:function(){var n=this;var e=n._tackItemWidth;var t=n._forward===null?n.pane.pages[1]:n._forward?n.pane.pages[2]:n.pane.pages[0];var i=this._trackWrap.find("."+b);var r=A(i);var a;var o;var s;var l;if(n.numOfEvents===1){o=n.currentEventIndex*e}else{o=n._currentIndex*e}if(t){if(n.numOfEvents===1){t.setPageCallout("left","50%");s=o;I(i,"transform","translateX(-"+s+"%)");n._firstIndexInView=n._currentIndex;n._updateArrows();return}if(o>=Math.abs(r)+100){s=Math.abs(r)+(o-(Math.abs(r)+100)+e);n._end=-s;I(i,"transform","translateX(-"+s+"%)");n._firstIndexInView=n._currentIndex-n.numOfEvents+1}else if(o<=Math.abs(r)){s=o;n._end=-s;I(i,"transform","translateX(-"+s+"%)");n._firstIndexInView=n._currentIndex}else{l=i.find("li.k-timeline-track-item").eq(n._currentIndex).find(".k-timeline-circle");a=E(l,n._trackWrap);t.setPageCallout("left",a/t.element.width()*100+"%");n._firstIndexInView=Math.round(Math.abs(r)/e)}var d=this._trackWrap.find("."+b);var u=function(){if(n.numOfEvents!=1){var e=n.pane.pages[1];var t=n._trackWrap.find("."+_).eq(n._currentIndex);var i=E(t.find(".k-timeline-circle"),n._trackWrap);e.setPageCallout("left",i/e.element.width()*100+"%")}d.off("transitionend"+w,u)};d.on("transitionend"+w,u)}n._updateArrows()},_initHorizontal:function(){var a=this;var e=a._trackWrap.find(".k-timeline-circle").first();var t=a.dataSource.view()[0];var i=a.options.navigatable;a.maxEvents=a._trackWrap.find(".k-timeline-track-item").length;a._currentIndex=1;a.pane.initPages();a.pane.repositionPages();a.pane.updatePage(a._forward,t,E(e,a._trackWrap));a._updateArrows();h(window).on("resize"+w,l(this,"_resizeHandler"));a._trackWrap.on("click",".k-timeline-track-item:not(.k-timeline-flag-wrap)",l(this,"_setCurrentEvent"));a._trackWrap.on("click",".k-timeline-arrow:not(.k-state-disabled)",l(this,"_navigateToView"));if(i){a._trackWrap.find(".k-timeline-track-item.k-timeline-flag-wrap").attr("aria-hidden",true);a._trackWrap.find(".k-timeline-track-item:not(.k-timeline-flag-wrap)").attr("role","option").attr("aria-selected",false).first().attr("aria-selected",true);a._cardId=s.guid();a._scrollableWrap.attr("role","listbox").attr("tabindex",0).on("focus"+w,function(){a.pane.pages[1].cardContainer.attr("id",a._cardId);a._setCurrent(a._scrollableWrap.find(".k-timeline-track-item").eq(a._currentIndex))}).on("focusout"+w,function(){a._removeCurrent()}).on("keydown"+w,function(e){var t;var i=a._currentBullet;var n;var r;if(a._transition){return}if(e.keyCode==o.LEFT){t=true;r=i.prevAll(".k-timeline-track-item:not(.k-timeline-flag-wrap)").first();if(r.length){n=E(r,a._trackWrap);if(n<0||n>r.parent().width()){a._transition=true;a._removeCurrent();a.previous();a.open(r)}else{a._setCurrent(r)}}}if(e.keyCode==o.RIGHT){t=true;r=i.nextAll(".k-timeline-track-item:not(.k-timeline-flag-wrap)").first();if(r.length){n=E(r,a._trackWrap);if(n<0||n>r.parent().width()){a._transition=true;a._removeCurrent();a.next();a.open(r)}else{a._setCurrent(r)}}}if(e.keyCode==o.SPACEBAR||e.keyCode==o.ENTER){t=true;a._currentBullet.trigger("click")}if(t){e.preventDefault()}})}},_setCurrent:function(e){if(!e){return}var t=s.guid();var i=this;i._removeCurrent();i._scrollableWrap.attr("aria-activedescendant",t);e.attr("id",t).addClass("k-state-focus");e.siblings().removeAttr("aria-describedby");if(e.attr("aria-selected")==="true"){e.attr("aria-describedby",i._cardId)}i._currentBullet=e},_removeCurrent:function(){if(this._currentBullet){this._currentBullet.removeClass("k-state-focus").removeAttr("id").removeAttr("aria-describedby")}this._scrollableWrap.removeAttr("aria-activedescendant")},setDataSource:function(e){var t=this;var i=t.options;e=d(e)?{data:e}:e;if(t.dataSource&&t._refresh){t.dataSource.unbind(k,t._refresh)}else{this._refresh=l(t,"refresh")}this.dataSource=a.create(e);if(this.dataSource._sort===n){this.dataSource._sort=[{field:i.dataDateField,dir:"asc"}]}t.dataSource.bind(k,t._refresh);if(i.autoBind){this.dataSource.fetch()}},refresh:function(){var e=this;var t=e.options;var i=this.dataSource.view();if(t.orientation!=c){e._trackWrap.empty().remove();e.element.find(".k-timeline-events-list").remove();e._horizontal()}e.currentEventIndex=0;e._forward=null;e._eventPage=1;e._currentIndex=0;e._firstIndexInView=0;e.numOfEvents=null;e._end=0;e._initDataFieldMappings();if(i.length){if(t.orientation==="horizontal"){e._renderContentHorizontal(i);e._redrawEvents();e._initHorizontal()}else{e._renderContentVertical(i)}}e.trigger("dataBound",{sender:e})},destroy:function(){var e=this.options;r.fn.destroy.call(this);if(this.resizeTimeOut){clearTimeout(this.resizeTimeOut)}if(this.navigateTimeOut){clearTimeout(this.navigateTimeOut)}h(window).off("resize"+w,this._resizeHandler);this.element.off();if(e.orientation!=c){this.pane.destroy();this._trackWrap.find("."+b).off();this.element.find(".k-timeline-arrow").off();this._trackWrap.off();this.currentEventIndex=this.maxEvents=this.numOfEvents=this._currentIndex=this._eventPage=this._eventsList=this._eventsWrap=this.element=this._trackWrap=this.pane=null}s.destroy(this.element);this._dataFieldMappings=this.element=null},options:{autoBind:true,name:"Timeline",orientation:"vertical",dateFormat:"MMM d, yyyy",showDateLabels:true,collapsibleEvents:false,alternatingMode:false,dataTitleField:"title",dataDateField:"date",dataSubtitleField:"subtitle",dataDescriptionField:"description",dataImagesField:"images",dataActionsField:"actions",dataImagesAltField:"altField",navigatable:false},events:["collapse","dataBound","expand","actionClick","change","navigate"]});s.ui.plugin(F)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("util/main",["kendo.core"],e)})(function(){(function(){var r=window.kendo,e=r.deepExtend;function t(e){return e*e}var i=Date.now;if(!i){i=function(){return(new Date).getTime()}}function n(e){if(typeof e!=="string"){e+="px"}return e}function a(e){var t=[];if(e){var i=r.toHyphens(e).split("-");for(var n=0;n<i.length;n++){t.push("k-pos-"+i[n])}}return t.join(" ")}function o(e){var t={1:"i",10:"x",100:"c",2:"ii",20:"xx",200:"cc",3:"iii",30:"xxx",300:"ccc",4:"iv",40:"xl",400:"cd",5:"v",50:"l",500:"d",6:"vi",60:"lx",600:"dc",7:"vii",70:"lxx",700:"dcc",8:"viii",80:"lxxx",800:"dccc",9:"ix",90:"xc",900:"cm",1e3:"m"};var i=[1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1];var n="";while(e>0){if(e<i[0]){i.shift()}else{n+=t[i[0]];e-=i[0]}}return n}function s(e){e=e.toLowerCase();var t={i:1,v:5,x:10,l:50,c:100,d:500,m:1e3};var i=0,n=0;for(var r=0;r<e.length;++r){var a=t[e.charAt(r)];if(!a){return null}i+=a;if(a>n){i-=2*n}n=a}return i}function l(i){var n=Object.create(null);return function(){var e="";for(var t=arguments.length;--t>=0;){e+=":"+arguments[t]}return e in n?n[e]:n[e]=i.apply(this,arguments)}}function d(e){return c.test(e)}function u(e,t){try{return e.call(t,function(e){throw new i(e)})}catch(e){if(e instanceof i){return e.value}throw e}function i(e){this.value=e}}e(r,{util:{now:i,renderPos:a,renderSize:n,sqr:t,romanToArabic:s,arabicToRoman:o,memoize:l,isUnicodeLetter:d,withExit:u}});var c=new RegExp("[\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]")})();return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("util/parse-xml",["kendo.core","util/main"],e)})(function(){"use strict";var D=String.fromCharCode;var A={amp:38,lt:60,gt:62,quot:34,apos:39,nbsp:160};function e(e){var t=[];for(var i=0;i<e.length;++i){t.push(e.charCodeAt(i))}return t}function E(e,t){if(t>65535){t-=65536;e.push(t>>>10&1023|55296,56320|t&1023)}else{e.push(t)}}var I=e("<![CDATA[");var M=e("]]>");var R=e("--\x3e");var F=e("!--");var P=e("/>");var z=e("</");var B=e("?>");var L=e("?");var H=e("<");var N=e(">");var O=e(";");var V=e("=");var W=e("&");var U=e('"');var j=e("'");var G=e("#");var q=e("x");var $=e("X");var K={};function t(n,a){var r=0;var o=[];var s={is:function(e){var t=o.length,i=e.length;while(--t>=0&&--i>=0){if(o[t].$tag!=e[i]&&e[i]!="*"){return false}}return i<0?o[o.length-1]:null},exit:function(){throw K},stack:o};function i(e){var t=n[r++];if(!(t&240^240)){E(e,(t&3)<<18|(n[r++]&63)<<12|(n[r++]&63)<<6|n[r++]&63)}else if(!(t&224^224)){E(e,(t&15)<<12|(n[r++]&63)<<6|n[r++]&63)}else if(!(t&192^192)){E(e,(t&31)<<6|n[r++]&63)}else{e.push(t)}}function l(e){throw new Error(e+", at "+r)}function t(e){var t=[];while(r<n.length&&e(n[r])){t.push(n[r++])}return t}function d(e){return D.apply(0,t(e))}function u(){t(e)}function c(e){var t=r;for(var i=0;i<e.length;++i){if(n[r++]!=e[i]){r=t;return false}}return e}function f(e){if(!c(e)){l("Expecting "+e.join(", "))}}function e(e){return e==9||e==10||e==13||e==32}function h(e){return e>=48&&e<=57}function p(e){return e>=48&&e<=57||(e|=32)>=97&&e<=102}function v(e){return e==58||e==95||(e|=32)>=97&&e<=122}function m(e){return e==45||h(e)||v(e)}function g(){var e=[];while(r<n.length){if(c(R)){return S("comment",D.apply(0,e))}i(e)}}function _(){var e,t;if(c(L)){x()}else if(c(F)){g()}else{e=w();t=C(e);o.push(t);if(c(P)){S("enter",e,t,true)}else{f(N);S("enter",e,t);b(e);if(e!=w()){l("Bad closing tag")}S("leave",e,t);u();f(N)}o.pop()}}function b(e){var t=[];while(r<n.length){if(c(z)){return t.length&&S("text",D.apply(0,t))}else if(c(I)){while(r<n.length&&!c(M)){i(t)}}else if(c(H)){if(t.length){S("text",D.apply(0,t))}_();t=[]}else if(c(W)){y(t)}else{i(t)}}l("Unclosed tag "+e)}function w(){if(!v(n[r])){l("Expecting XML name")}return d(m)}function k(){var e=c(U)||c(j);if(!e){l("Expecting string")}var t=[];while(r<n.length){if(c(e)){return D.apply(0,t)}else if(c(W)){y(t)}else{i(t)}}l("Unfinished string")}function y(e){var t;if(c(G)){if(c(q)||c($)){t=parseInt(d(p),16)}else{t=parseInt(d(h),10)}if(isNaN(t)){l("Bad numeric entity")}}else{var i=w();t=A[i];if(t===undefined){l("Unknown entity "+i)}}E(e,t);f(O)}function x(){S("decl",w(),C());f(B)}function C(e){var t={$tag:e};while(r<n.length){u();var i=n[r];if(i==63||i==62||i==47){break}t[w()]=(f(V),k())}return t}function S(e,t,i,n){var r=a&&a[e];if(r){r.call(s,t,i,n)}}var T=[];i(T);if(T[0]!=65279){r=0}while(r<n.length){u();f(H);_();u()}}kendo.util.parseXML=function e(){try{return t.apply(this,arguments)}catch(e){if(e!==K){throw e}}}},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/commands",["kendo.core","kendo.binder","kendo.window","kendo.list","kendo.tabstrip"],e)})(function(){(function(g){var n=g.jQuery;var d={AUTO_FILL:"autoFill",CLEAR:"clear",CUT:"cut",EDIT:"edit",PASTE:"paste",VALIDATION:"validation"};var t=g.spreadsheet.Command=g.Class.extend({init:function(e){this.options=e;this._workbook=e.workbook;this._property=e&&e.property;this._state={}},range:function(e){if(e!==undefined){this._setRange(e)}return this._range},_setRange:function(e){this._range=e},redo:function(){this.range().select();this.exec()},undo:function(){this.setState(this._state)},getState:function(){this._state=this.range().getState(this._property)},setState:function(e){this.range().setState(e)},rejectState:function(e){this.undo();return{title:e.title,body:e.message,reason:"error",type:"validationError"}},_forEachCell:function(t){var i=this.range();var e=i._ref;e.forEach(function(e){i.sheet().forEach(e.toRangeRef(),t.bind(this))}.bind(this))},usesImage:function(){return false}});g.spreadsheet.DrawingUpdateCommand=t.extend({init:function(e){this._sheet=e.sheet;this._drawing=e.drawing;this._orig=this._drawing.clone();this._previous=e.previous},exec:function(){},undo:function(){this._drawing.reset(this._previous);this._sheet._activeDrawing=this._drawing;this._sheet.triggerChange({layout:true})},redo:function(){this._drawing.reset(this._orig);this._sheet._activeDrawing=this._drawing;this._sheet.triggerChange({layout:true})},usesImage:function(e){return this._drawing.image===e||this._orig.image===e||this._previous.image===e}});var i=t.extend({init:function(e){t.fn.init.call(this,e);this._drawing=e.drawing},usesImage:function(e){return this._drawing.image===e}});g.spreadsheet.InsertImageCommand=i.extend({init:function(e){i.fn.init.call(this,e);this._blob=e.blob;this._width=e.width;this._height=e.height},exec:function(){var e=this.range();var t=e.sheet();var i=this._width;var n=this._height;var r=i/n;if(i>n){i=Math.min(i,300);n=i/r}else{n=Math.min(n,300);i=n*r}this._drawing=t.addDrawing({topLeftCell:e.topLeft(),offsetX:5,offsetY:5,width:i,height:n,opacity:1,image:this._workbook.addImage(this._blob)},true);this._blob=null},undo:function(){var e=this.range().sheet();e._activeDrawing=null;e.removeDrawing(this._drawing)},redo:function(){var e=this.range().sheet();e._activeDrawing=this._drawing;e.addDrawing(this._drawing)}});g.spreadsheet.DeleteDrawingCommand=i.extend({exec:function(){var e=this.range().sheet();e._activeDrawing=null;e.removeDrawing(this._drawing)},undo:function(){var e=this.range().sheet();e._activeDrawing=this._drawing;e.addDrawing(this._drawing)},redo:function(){this.exec()}});var e=i.extend({exec:function(){var e=this.range().sheet();this._origIndex=e._drawings.indexOf(this._drawing);e._drawings.splice(this._origIndex,1);this._newIndex=this._reorder();e._drawings.splice(this._newIndex,0,this._drawing);e.triggerChange({drawings:true})},undo:function(){var e=this.range().sheet();e._drawings.splice(this._newIndex,1);e._drawings.splice(this._origIndex,0,this._drawing);e.triggerChange({drawings:true})}});g.spreadsheet.BringToFrontCommand=e.extend({_reorder:function(){return this.range().sheet()._drawings.length}});g.spreadsheet.SendToBackCommand=e.extend({_reorder:function(){return 0}});var r=t.extend({init:function(e){t.fn.init.call(this,e);this._target=e.target;this._value=e.value},exec:function(){this.getState();this.setState(this._value)}});g.spreadsheet.ColumnWidthCommand=r.extend({getState:function(){this._state=this.range().sheet().columnWidth(this._target)},setState:function(e){this.range().sheet().columnWidth(this._target,e)}});g.spreadsheet.RowHeightCommand=r.extend({getState:function(){this._state=this.range().sheet().rowHeight(this._target)},setState:function(e){this.range().sheet().rowHeight(this._target,e)}});g.spreadsheet.HyperlinkCommand=t.extend({init:function(e){t.fn.init.call(this,e);this._link=e.link},exec:function(){var e=this.range();this._prevLink=e.link();this._prevUnderline=e.underline();e.link(this._link);e.underline(true);if(e.value()==null){this._hasSetValue=true;e.value(this._link)}},undo:function(){var e=this.range();e.link(this._prevLink);e.underline(this._prevUnderline);if(this._hasSetValue){e.value(null)}}});g.spreadsheet.GridLinesChangeCommand=r.extend({getState:function(){this._state=this._range.sheet().showGridLines()},setState:function(e){this._range.sheet().showGridLines(e)}});var a=g.spreadsheet.PropertyChangeCommand=t.extend({_setRange:function(e){t.prototype._setRange.call(this,e.skipHiddenCells())},init:function(e){t.fn.init.call(this,e);this._value=e.value},exec:function(){var e=this.range();if(e.enable()){this.getState();if(this.options.property==="format"){this._workbook.trigger("changeFormat",{range:e})}e[this._property](this._value)}}});g.spreadsheet.ClearContentCommand=t.extend({exec:function(){var t=[],i,n,r,e,a;if(!this.range().enable()){return{reason:"error",type:"cannotModifyDisabled"}}if(!this.range().canEditArrayFormula()){return{reason:"error",type:"intersectsArray"}}this.getState();i=this.range().skipHiddenCells();if(i._ref.refs&&i._ref.refs.length>1){i._ref.refs.forEach(function(e){a=i.sheet().range(e);t=t.concat(a.values())})}else{t=i.values()}r=[];t.forEach(function(e){n=[];e.forEach(function(){n.push(null)});r.push(n)});if(i.sheet().trigger("changing",{data:r,range:i,changeType:d.CLEAR})){return}i.clearContent();e=i._getValidationState();if(e){return this.rejectState(e)}},undo:function(){var e=this.range().skipHiddenCells();var t=e.sheet();var i=this._state.data;var n=[];var r;i.forEach(function(e){r=[];e.forEach(function(e){r.push(e.value)});n.push(r)});if(t.trigger("changing",{data:n,range:e,changeType:d.CLEAR})){return}this.setState(this._state)}});g.spreadsheet.EditCommand=a.extend({init:function(e){e.property=e.property||"input";a.fn.init.call(this,e)},_setRange:function(e){a.prototype._setRange.apply(this,arguments);this._editRange=this.options.arrayFormula?e:e.sheet().activeCellSelection()},getState:function(){this._state=this.range().getState()},exec:function(){return this.range().sheet().withCultureDecimals(this._exec.bind(this))},undo:function(){var e=this._editRange;var t=this._state;if(e.sheet().trigger("changing",{data:t.data[0][0].value,range:e,changeType:d.EDIT})){return}this.setState(this._state)},_exec:function(){var e=this.options.arrayFormula;var t=this._editRange;if(!t.enable()){return{reason:"error",type:"rangeDisabled"}}if(!t.canEditArrayFormula()){return{reason:"error",type:"intersectsArray"}}var i=this._value;this.getState();if(this.range().sheet().trigger("changing",{data:i,range:this._editRange,changeType:d.EDIT})){return}if(this._property=="value"){t.value(i);return}try{t.link(null);if(i===""){t.value(null)}else{t.input(i,{arrayFormula:e});if(/\n/.test(t.value())){t.wrap(true)}}var n=t._getValidation()||undefined;if(n&&n.dataType&&n.dataType=="date"){var r="";if(i.indexOf("-")!=-1){r="-"}if(i.indexOf("/")!=-1){r="/"}if(r!=""){var a=i.split(r);if(a.length==2){var o=new Date;var s=o.getFullYear();if(a[0].length==1)a[0]="0"+a[0];if(a[1].length==1)a[1]="0"+a[1];a.unshift(s+"");i=a.join(r);t.link(null);t.input(i)}}}t._adjustRowHeight();var l=t._getValidationState();if(l){return this.rejectState(l)}}catch(e){if(e instanceof g.spreadsheet.calc.ParseError){return{title:"Error in formula",body:e+"",reason:"error"}}else{throw e}}}});g.spreadsheet.InsertCommentCommand=a.extend({init:function(e){e.property="comment";a.fn.init.call(this,e)}});g.spreadsheet.TextWrapCommand=a.extend({init:function(e){e.property="wrap";a.fn.init.call(this,e);this._value=e.value},getState:function(){var i={};this.range().forEachRow(function(e){var t=e.topLeft().row;i[t]=e.sheet().rowHeight(t)});this._state=this.range().getState(this._property);this._rowHeight=i},undo:function(){var e=this.range().sheet();var t=this._rowHeight;this.range().setState(this._state);for(var i in t){e.rowHeight(i,t[i])}}});g.spreadsheet.AdjustDecimalsCommand=t.extend({init:function(e){this._delta=e.value;e.property="format";t.fn.init.call(this,e)},exec:function(){var a=this.range().sheet();var o=this._delta;var s=g.spreadsheet.formatting;this.getState();a.batch(function(){this.range().forEachCell(function(e,t,i){var n=i.format;if(!n){var r=i.value;if(typeof r=="number"&&/\./.test(r)){n="0."+String(r).split(".")[1].replace(/\d/g,"0")}}if(n||o>0){n=s.adjustDecimals(n||"0",o);a.range(e,t).format(n)}})}.bind(this))}});g.spreadsheet.BorderChangeCommand=t.extend({init:function(e){e.property="border";t.fn.init.call(this,e);this._type=e.border;this._style=e.style},_batch:function(e){return this.range().sheet().batch(e,{})},exec:function(){var e=this;e.getState();e._batch(function(){e[e._type](e._style)})},noBorders:function(){this.range().insideBorders(null);this.outsideBorders(null)},allBorders:function(e){this.range().insideBorders(e);this.outsideBorders(e)},leftBorder:function(e){this.range().leftColumn().borderLeft(e)},rightBorder:function(e){this.range().rightColumn().borderRight(e)},topBorder:function(e){this.range().topRow().borderTop(e)},bottomBorder:function(e){this.range().bottomRow().borderBottom(e)},outsideBorders:function(e){var t=this.range();t.leftColumn().borderLeft(e);t.topRow().borderTop(e);t.rightColumn().borderRight(e);t.bottomRow().borderBottom(e)},insideBorders:function(e){this.range().insideBorders(e);this.outsideBorders(null)},insideHorizontalBorders:function(e){this.range().insideHorizontalBorders(e)},insideVerticalBorders:function(e){this.range().insideVerticalBorders(e)}});g.spreadsheet.MergeCellCommand=t.extend({init:function(e){t.fn.init.call(this,e);this._type=e.value},exec:function(){this.getState();this[this._type]()},activate:function(e){this.range().sheet().activeCell(e)},getState:function(){this._state=this.range().getState()},undo:function(){if(this._type!=="unmerge"){this.range().unmerge();this.activate(this.range().topLeft())}this.range().setState(this._state)},cells:function(){var e=this.range();var t=e._ref;e.merge();this.activate(t)},horizontally:function(){var e=this.range().topRow()._ref;this.range().forEachRow(function(e){e.merge()});this.activate(e)},vertically:function(){var e=this.range().leftColumn()._ref;this.range().forEachColumn(function(e){e.merge()});this.activate(e)},unmerge:function(){var e=this.range();var t=e._ref.topLeft;e.unmerge();this.activate(t)}});g.spreadsheet.FreezePanesCommand=t.extend({init:function(e){t.fn.init.call(this,e);this._type=e.value},exec:function(){this.getState();this._topLeft=this.range().topLeft();this[this._type]()},getState:function(){this._state=this.range().sheet().getState()},undo:function(){this.range().sheet().setState(this._state)},panes:function(){var e=this._topLeft;var t=this.range().sheet();t.frozenColumns(e.col).frozenRows(e.row)},rows:function(){var e=this._topLeft;var t=this.range().sheet();t.frozenRows(e.row)},columns:function(){var e=this._topLeft;var t=this.range().sheet();t.frozenColumns(e.col)},unfreeze:function(){var e=this.range().sheet();e.frozenRows(0).frozenColumns(0)}});g.spreadsheet.PasteCommand=t.extend({init:function(e){t.fn.init.call(this,e);this._clipboard=e.workbook.clipboard();this._clipboard.parse();this._event=e.event;this._clipboardContent=this._clipboard._content;this._clipboardPasteRef=this._clipboard.pasteRef();this._sheet=this._workbook.activeSheet();this._range=this._sheet.selection?this._sheet.selection():this._sheet.range(this._clipboard.pasteRef());this._state=this._range.getState();this._targetRangeRefs=this._range._ref instanceof g.spreadsheet.UnionRef?this._range._ref.refs:[this._range._ref]},exec:function(){return this.range().sheet().withCultureDecimals(this._exec.bind(this))},undo:function(){var e=this._sheet;var t=this._range;if(e.trigger("changing",{data:this._state.data,range:t,changeType:d.PASTE})){return}this.setState(this._state)},_exec:function(){var e=this._clipboard.canPaste();if(!e.canPaste){if(e.menuInvoked){return{reason:"error",type:"useKeyboard"}}if(e.pasteOnMerged){return{reason:"error",type:"modifyMerged"}}if(e.overflow){return{reason:"error",type:"overflow"}}if(e.pasteOnDisabled){this._event.preventDefault();return{reason:"error",type:"cannotModifyDisabled"}}return{reason:"error"}}var t=this._sheet;var i=this._range;if(this._workbook.trigger("paste",{range:i,clipboardContent:this._clipboardContent})||t.trigger("changing",{data:this._clipboardContent.data,range:i,changeType:d.PASTE})){this._event.preventDefault();return}else{this._processPaste()}},_adjustPasteTarget:function(e,t,i){var n=this;var r=n._targetRangeRefs;var a=n._sheet;var o=g.spreadsheet.RangeRef;var s=g.spreadsheet.UnionRef;var l=[];var d=function(e,t){var i=0;var n=e.topLeft;var r=t.topLeft;if(n.row>r.row){i=1}else if(n.row<r.row){i=-1}else if(n.col>r.col){i=1}else if(n.col<r.col){i=-1}return i};var u,c,f,h,p,v,m;for(v=0;v<r.length;v+=1){f=r[v];p=e[v];h=f.topLeft;m={row:p.rows*t+h.row-1,col:p.cols*i+h.col-1};u=new o(h,m);l.push(u)}if(l.length===1){c=a.range(u)}else{l.sort(d);c=a.range(new s(l))}c.select();n._range=c;n._state=n._range.getState()},_processPaste:function(){var e=this;var t=e._sheet;var i=e._clipboardContent;var n=e._range;var r=i.data;var a=r.length;var o=r[0].length;var s=e._targetRangeRefs;var l=e._targetRanges(a,o);var d;e._adjustPasteTarget(l,a,o);t.batch(function(){for(d=0;d<s.length;d++){e._populateTargetRange(s[d],a,o,l[d])}});n._adjustRowHeight()},_populateTargetRange:function(e,t,i,n){var r=e.topLeft;var a,o,s;for(o=0;o<n.rows;o++){for(s=0;s<n.cols;s++){a=this._sheet.range(r.row+t*o,r.col+i*s);a.setState(this._clipboardContent,this._clipboard)}}},_targetRangeDimensions:function(e,t,i){var n=e.topLeft;var r=e.bottomRight;var a=r.row-n.row+1;var o=r.col-n.col+1;var s=1;var l=1;if(a%t===0&&o%i===0){s=a/t;l=o/i}return{rows:s,cols:l}},_targetRanges:function(e,t){var i=this._targetRangeRefs;var n=[];var r;for(r=0;r<i.length;r++){n.push(this._targetRangeDimensions(i[r],e,t))}return n}});g.spreadsheet.AdjustRowHeightCommand=t.extend({exec:function(){var e=this.options;var t=this._workbook.activeSheet();var i=e.range||t.range(e.rowIndex);i._adjustRowHeight()}});g.spreadsheet.ToolbarPasteCommand=t.extend({init:function(e){t.fn.init.call(this,e);this._clipboard=this._workbook.clipboard();this._clipboard.parse()},getState:function(){this._range=this._workbook.activeSheet().range(this._clipboard.pasteRef());this._state=this._range.getState()},exec:function(){if(g.support.clipboard.paste){this._workbook._view.clipboard.focus().select();document.execCommand("paste")}else{var e=this._clipboard.isExternal();console.log("this._clipboard",this._clipboard);if(e){return{reason:"error",type:"useKeyboard"}}if(this._clipboard.pasteRef()===g.spreadsheet.NULLREF&&n.isEmptyObject(this._clipboard._external)){return{reason:"error",type:"useKeyboard"}}var t=this._clipboard.canPaste();this._clipboard.menuInvoked=true;if(!t.canPaste){if(t.pasteOnMerged){return{reason:"error",type:"modifyMerged"}}if(t.overflow){return{reason:"error",type:"overflow"}}}this._clipboard.paste();var i=this._workbook.activeSheet().range(this._clipboard.pasteRef());i._adjustRowHeight()}}});g.spreadsheet.CutCommand=t.extend({_eventType:"cut",init:function(e){t.fn.init.call(this,e);this._clipboard=e.workbook.clipboard();this._event=e.event},exec:function(){var e=this._clipboard.canCopy();var t=[],i,n;if(!e.canCopy){if(e.menuInvoked){return{reason:"error",type:"useKeyboard"}}else if(e.multiSelection){return{reason:"error",type:"unsupportedSelection"}}return}var r=this._workbook.activeSheet().selection();if(this._eventType=="cut"){if(!r.enable()){this._event.preventDefault();return{reason:"error",type:"cannotModifyDisabled"}}this.getState()}if(this._workbook.trigger(this._eventType,{range:r})){this._event.preventDefault()}else if(this._eventType=="cut"){i=r.values();i.forEach(function(e){n=[];e.forEach(function(){n.push({})});t.push(n)});if(r.sheet().trigger("changing",{data:t,range:r,changeType:d.CUT})){return}this._clipboard.cut()}else{this._clipboard.copy()}},undo:function(){var e=this.range();if(e.sheet().trigger("changing",{data:this._state.data,range:e,changeType:d.CUT})){return}this.setState(this._state)}});g.spreadsheet.CopyCommand=g.spreadsheet.CutCommand.extend({_eventType:"copy",undo:n.noop});g.spreadsheet.ToolbarCopyCommand=t.extend({init:function(e){t.fn.init.call(this,e);this._clipboard=e.workbook.clipboard()},undo:n.noop,exec:function(){if(g.support.clipboard.copy){document.execCommand("copy")}else{return{reason:"error",type:"useKeyboard"}}}});g.spreadsheet.AutoFillCommand=t.extend({init:function(e){t.fn.init.call(this,e)},origin:function(e){this._origin=e},exec:function(){var e=this.range(),t;if(!e.enable()){return{reason:"error",type:"rangeDisabled"}}if(e.intersectingArrayFormula()){return{reason:"error",type:"intersectsArray"}}this.getState();try{t=e._previewFillFrom(this._origin);if(e.sheet().trigger("changing",{data:t.props,range:t.dest,changeType:d.AUTO_FILL})){return}t.dest._properties(t.props,true)}catch(e){if(e instanceof g.spreadsheet.Range.FillError){return{reason:"error",type:e.code}}throw e}},undo:function(){var e=this.range();var t=this._state;if(e.sheet().trigger("changing",{data:t.data,range:e,changeType:d.AUTO_FILL})){return}this.setState(this._state)}});g.spreadsheet.ToolbarCutCommand=t.extend({cannotUndo:true,init:function(e){t.fn.init.call(this,e);this._clipboard=e.workbook.clipboard()},exec:function(){if(g.support.clipboard.copy){document.execCommand("cut")}else{return{reason:"error",type:"useKeyboard"}}}});g.spreadsheet.FilterCommand=t.extend({undo:function(){this.range().filter(this._state)},exec:function(){var e=this.range();this._state=e.hasFilter();e.filter(!this._state)}});g.spreadsheet.SortCommand=t.extend({undo:function(){var e=this.range().sheet();e.setState(this._state)},exec:function(){var e=this.range();var t=e.sheet();var i=t.activeCell();var n=this.options.sheet?i.topLeft.col:this.options.column||0;var r=this.options.value==="asc"?true:false;this._state=t.getState();if(this.options.sheet){e=this.expandRange()}var a=e.cantSort();if(a){return{reason:"error",type:a.code}}e.sort({column:n,ascending:r})},expandRange:function(){var e=this.range().sheet();return new g.spreadsheet.Range(e._sheetRef,e)}});var o=g.spreadsheet.ApplyFilterCommand=t.extend({column:function(){return this.options.column||0},undo:function(){var e=this.range().sheet();e.clearFilter(this.column());if(this._state.length){this.range().filter(this._state)}},getState:function(){var e=this.range().sheet();var t=e.filter();if(t){this._state=t.columns.filter(function(e){return e.index==this.column()}.bind(this))}},exec:function(){var e=this.range();var t=this.column();var i=e.sheet().filter();var n;var r;var a=false;if(this.options.valueFilter){r={column:t,filter:new g.spreadsheet.ValueFilter(this.options.valueFilter)}}else if(this.options.customFilter){r={column:t,filter:new g.spreadsheet.CustomFilter(this.options.customFilter)}}this.getState();if(i&&i.ref.eq(e._ref)&&i.columns.length){i.columns.forEach(function(e){if(e.index===t){a=true}});n=i.columns.map(function(e){return e.index===t?r:{column:e.index,filter:e.filter}});if(!a){n.push(r)}}else{n=r}e.filter(n)}});g.spreadsheet.ClearFilterCommand=o.extend({exec:function(){var e=this.range();var t=this.column();this.getState();e.clearFilter(t)}});g.spreadsheet.HideLineCommand=t.extend({init:function(e){t.fn.init.call(this,e);this.axis=e.axis},undo:function(){var e=this.range().sheet();e.setAxisState(this._state)},exec:function(){var e=this.range().sheet();this._state=e.getAxisState();if(this.axis=="row"){e.axisManager().hideSelectedRows()}else{e.axisManager().hideSelectedColumns()}}});g.spreadsheet.UnHideLineCommand=g.spreadsheet.HideLineCommand.extend({exec:function(){var e=this.range().sheet();this._state=e.getAxisState();if(this.axis=="row"){e.axisManager().unhideSelectedRows()}else{e.axisManager().unhideSelectedColumns()}}});var s=t.extend({exec:function(){this._expandedRange=this._expand(this.range());this._state=this._expandedRange.getState();this._indexes=this._exec(this._expandedRange.sheet())},undo:function(){var t=this;var e=t._expandedRange;var i=e.sheet();i.batch(function(){t._indexes.forEach(function(e){t._undoOne(i,e);i._restoreModifiedFormulas(e.formulas)});e.setState(t._state)},{layout:true,recalc:true,ref:e._ref})}});g.spreadsheet.DeleteRowCommand=s.extend({_expand:function(e){return e.resize({left:-Infinity,right:+Infinity})},_exec:function(e){return e.axisManager().deleteSelectedRows()},_undoOne:function(e,t){e.insertRow(t.index);e.rowHeight(t.index,t.height)}});g.spreadsheet.DeleteColumnCommand=s.extend({_expand:function(e){return e.resize({top:-Infinity,bottom:+Infinity})},_exec:function(e){return e.axisManager().deleteSelectedColumns()},_undoOne:function(e,t){e.insertColumn(t.index);e.columnWidth(t.index,t.width)}});var l=t.extend({init:function(e){t.fn.init.call(this,e);this._value=e.value},undo:function(){var t=this;var i=t.range().sheet();i.batch(function(){for(var e=t._pos.count;--e>=0;){t._undoOne(i,t._pos.base)}},{layout:true,recalc:true})}});g.spreadsheet.AddColumnCommand=l.extend({exec:function(){var e=this._value;var t=this.range().sheet();var i=t.axisManager().preventAddColumn();if(!i&&e==="right"){i=t.axisManager().preventAddColumnAfterLast()}if(i){return i}if(e==="left"){this._pos=t.axisManager().addColumnLeft()}else{this._pos=t.axisManager().addColumnRight()}},_undoOne:function(e,t){e.deleteColumn(t)}});g.spreadsheet.AddRowCommand=l.extend({exec:function(){var e=this._value;var t=this.range().sheet();var i=t.axisManager().preventAddRow();if(!i&&e==="below"){i=t.axisManager().preventAddRowAfterLast()}if(i){return i}if(e==="above"){this._pos=t.axisManager().addRowAbove()}else{this._pos=t.axisManager().addRowBelow()}},_undoOne:function(e,t){e.deleteRow(t)}});g.spreadsheet.EditValidationCommand=t.extend({init:function(e){t.fn.init.call(this,e);this._value=e.value},exec:function(){var e=this,t=e.range().sheet();this.getState();if(t.trigger("changing",{data:e._value,range:e.range(),changeType:d.VALIDATION})){return}try{t.withCultureDecimals(function(){e.range().validation(e._value)})}catch(e){if(e instanceof g.spreadsheet.calc.ParseError){return{title:"Error in formula",body:e+"",reason:"error"}}else{throw e}}},undo:function(){var e=this.range();var t=this._state;if(e.sheet().trigger("changing",{data:t.data[0][0].validation,range:e,changeType:d.VALIDATION})){return}this.setState(this._state)}});g.spreadsheet.OpenCommand=t.extend({cannotUndo:true,exec:function(){var e=this.options.file;if(e.name.match(/.xlsx$/i)===null){return{reason:"error",type:"openUnsupported"}}var t=this.options.workbook;t.fromFile(this.options.file).then(function(){var e=t.excelImportErrors;if(e&&e.length){t._view.openDialog("importError",{errors:e})}})}});g.spreadsheet.SaveAsCommand=t.extend({cannotUndo:true,exec:function(){var e=this.options.name+this.options.extension;if(this.options.extension===".xlsx"){this.options.workbook.saveAsExcel({fileName:e})}else if(this.options.extension===".pdf"){this.options.workbook.saveAsPDF(n.extend(this.options.pdf,{workbook:this.options.workbook,fileName:e}))}}});var u=t.extend({init:function(e){t.fn.init.call(this,e);this._name=e.name;this._value=e.value},getState:function(){this._state=this._workbook.nameDefinition(this._name)},setState:function(){this._workbook.nameDefinition(this._name,this._state);this._workbook.trigger("change",{recalc:true})}});g.spreadsheet.DefineNameCommand=u.extend({exec:function(){this.getState();try{this._workbook.defineName(this._name,this._value);this._workbook.trigger("change",{recalc:true})}catch(e){return{title:"Error",body:e+"",reason:"error"}}}});g.spreadsheet.DeleteNameCommand=u.extend({exec:function(){this.getState();this._workbook.undefineName(this._name);this._workbook.trigger("change",{recalc:true})}})})(kendo)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/formulabar",["kendo.core"],e)})(function(){(function(n){var r=n.jQuery;var e={wrapper:"k-spreadsheet-formula-bar"};var a=n.ui.Widget.extend({init:function(e,t){n.ui.Widget.call(this,e,t);e=this.element.addClass(a.classNames.wrapper);var i=e.width();this.formulaInput=new n.spreadsheet.FormulaInput(r("<div/>").appendTo(e),{formulaBarWidth:i})},destroy:function(){if(this.formulaInput){this.formulaInput.destroy()}this.formulaInput=null}});n.spreadsheet.FormulaBar=a;r.extend(true,a,{classNames:e})})(window.kendo)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/formulainput",["kendo.core"],e)})(function(){(function(d,l){var t=d.jQuery;var i=d.ui.Widget;var a=".kendoFormulaInput";var n=d.keys;var e={wrapper:"k-spreadsheet-formula-input",listWrapper:"k-spreadsheet-formula-list"};var r=["font-family","font-size","font-stretch","font-style","font-weight","letter-spacing","text-transform","line-height"];var o={27:"esc",37:"left",39:"right",35:"end",36:"home",32:"spacebar"};var s=/(^_|[^a-z0-9]$)/i;var u=i.extend({init:function(e,t){i.call(this,e,t);e=this.element;e.addClass(u.classNames.wrapper).attr("contenteditable",true).attr("spellcheck",false).css("white-space","pre");if(t&&t.formulaBarWidth){e.css("max-width",t.formulaBarWidth-16+"px")}if(this.options.autoScale){e.on("input",this.scale.bind(this))}this._highlightedRefs=[];this._formulaSource();this._formulaList();this._popup();this._tooltip();e.on("keydown",this._keydown.bind(this)).on("keyup",this._keyup.bind(this)).on("blur",this._blur.bind(this)).on("input click",this._input.bind(this)).on("focus",this._focus.bind(this)).on("paste",this._paste.bind(this))},options:{name:"FormulaInput",autoScale:false,filterOperator:"startswith",scalePadding:30,minLength:1,formulaBarWidth:null},events:["keyup","focus"],enable:function(e){if(e===undefined){return this.element.attr("contenteditable")==="true"}if(e){this.element.attr("contenteditable",e)}else{this.element.removeAttr("contenteditable")}this.element.toggleClass("k-state-disabled",!e)},getPos:function(){var e=this.element[0];var t=l.getSelection();var i=a(t.focusNode,t.focusOffset);var n=a(t.anchorNode,t.anchorOffset);if(i!=null&&n!=null){if(i>n){var r=i;i=n;n=r}return{begin:i,end:n,collapsed:i==n}}function a(n,r){try{(function e(t){if(t===n){throw r}else if(t.nodeType==1){for(var i=t.firstChild;i;i=i.nextSibling){e(i)}}else if(t.nodeType==3){r+=t.nodeValue.length}})(e)}catch(e){return e}}},setPos:function(e,t){var i=this.element[0];e=s(i,e);if(t!=null){t=s(i,t)}else{t=e}if(e&&t){var n=document.createRange();n.setStart(e.node,e.pos);n.setEnd(t.node,t.pos);var r=l.getSelection();var a=r.getRangeAt(0);if(o(n,a)){r.removeAllRanges();r.addRange(n)}}function o(e,t){return e.startOffset!=t.startOffset||e.endOffset!=t.endOffset||e.startContainer!=t.endContainer||e.endContainer!=t.endContainer}function s(e,r){try{(function e(t){if(t.nodeType==3){var i=t.nodeValue.length;if(i>=r){throw t}r-=i}else if(t.nodeType==1){for(var n=t.firstChild;n;n=n.nextSibling){e(n)}}})(e)}catch(e){return{node:e,pos:r}}}},end:function(){this.setPos(this.length())},home:function(){this.setPos(0)},select:function(){this.setPos(0,this.length())},length:function(){return this.value().length},_formulaSource:function(){var e=[];var t;for(var i in d.spreadsheet.calc.runtime.FUNCS){if(!s.test(i)){t=i.toUpperCase();e.push({value:t,text:t})}}this.formulaSource=new d.data.DataSource({data:e})},_formulaList:function(){this.list=new d.ui.StaticList(t("<ul />").addClass(u.classNames.listWrapper).insertAfter(this.element),{autoBind:false,selectable:true,change:this._formulaListChange.bind(this),dataSource:this.formulaSource,dataValueField:"value",template:"#:data.value#"});this.list.element.on("mousedown",function(e){e.preventDefault()})},_formulaListChange:function(){var e=this._tokenContext();if(!e||this._mute){return}var t=e.token;var i=this.list.value()[0];var n={replace:true,token:t,end:t.end};if(!e.nextToken||e.nextToken.value!="("){i+="("}this._replaceAt(n,i);this.popup.close()},_popup:function(){this.popup=new d.ui.Popup(this.list.element,{anchor:this.element})},_blur:function(){this.popup.close();clearTimeout(this._focusId);this.trigger("blur")},_isFormula:function(){return/^=/.test(this.value())},_keydown:function(e){var t=e.keyCode;var i=this;if(t==37||t==38||t==39||t==40){this.element[0].pressKey(13);return}if(o[t]){i.popup.close();i._navigated=true}else if(i._move(t)){i._navigated=true;e.preventDefault()}i._keyDownTimeout=setTimeout(i._syntaxHighlight.bind(i))},_keyup:function(){var e=this.popup;var t;if(this._isFormula()&&!this._navigated){t=((this._tokenContext()||{}).token||{}).value;this.filter(t);if(!t||!this.formulaSource.view().length){e.close()}else{e[e.visible()?"position":"open"]();this.list.focusFirst()}}this._navigated=false;this._syntaxHighlight();this.trigger("keyup")},_input:function(){this._syntaxHighlight()},_focus:function(){setTimeout(this._sync.bind(this));this._focusTimeout=setTimeout(this._syntaxHighlight.bind(this));this.trigger("focus")},_paste:function(e){e.preventDefault();var t=this.getPos();var i;if(d.support.browser.msie){i=l.clipboardData.getData("Text")}else{i=e.originalEvent.clipboardData.getData("text/plain")}var n=this.value();n=n.substr(0,t.begin)+i+n.substr(t.end);this.value(n);this.setPos(t.begin+i.length);this.scale()},_move:function(e){var t=this.list;var i=this.popup;if(i.visible()){if(e===n.DOWN){t.focusNext();if(!t.focus()){t.focusFirst()}return true}if(e===n.UP){t.focusPrev();if(!t.focus()){t.focusLast()}return true}if(e===n.ENTER){t.select(t.focus());i.close();return true}if(e===n.TAB){t.select(t.focus());i.close();return true}if(e===n.PAGEUP){t.focusFirst();return true}if(e===n.PAGEDOWN){t.focusLast();return true}}return e===n.ENTER||e===n.TAB},_tokenContext:function(){var e=this.getPos();var t=this.value();if(!t||!e||!e.collapsed){return null}var i=d.spreadsheet.calc.tokenize(t,this.row(),this.col());var n;for(var r=0;r<i.length;++r){n=i[r];if(p(n,e)&&/^(?:str|sym|func)$/.test(n.type)){return{token:n,nextToken:i[r+1]}}}return null},_sync:function(){if(this._editorToSync&&this.isActive()){this._editorToSync.value(this.value())}},_textContainer:function(){var e=d.getComputedStyles(this.element[0],r);e.position="absolute";e.visibility="hidden";e.whiteSpace="pre";e.top=-3333;e.left=-3333;this._span=t("<span style='white-space: pre'/>").css(e).insertAfter(this.element)},_tooltip:function(){this._cellTooltip=t('<div class="k-widget k-widget-2021 k-tooltip" style="position:absolute; display:none">A1</div>').insertAfter(this.element)},tooltip:function(e){this._cellTooltip.text(e)},toggleTooltip:function(e){this._cellTooltip.toggle(e)},isActive:function(){return this.element[0]===d._activeElement()},filter:function(e){if(!e||e.length<this.options.minLength){return}this._mute=true;this.list.select(-1);this._mute=false;this.formulaSource.filter({field:this.list.options.dataValueField,operator:this.options.filterOperator,value:e})},hide:function(){this.enable(false);this.element.hide();this._cellTooltip.hide()},show:function(){this.enable(true);this.element.show()},row:function(){if(this.activeCell){return this.activeCell.row}},col:function(){if(this.activeCell){return this.activeCell.col}},position:function(e){if(!e){return}this.show();this.element.css({top:e.top+1+"px",left:e.left+1+"px"});this._cellTooltip.css({top:e.top-this._cellTooltip.height()-10+"px",left:e.left})},resize:function(e){if(!e){return}this.element.css({width:e.width-1,height:e.height-1})},canInsertRef:function(e){return this._canInsertRef(e)},_canInsertRef:function(e){if(this.popup.visible()){return null}var i=e;var n=this.getPos();var t,r;if(n&&this._isFormula()){if(n.begin===0){return null}t=d.spreadsheet.calc.tokenize(this.value(),this.row(),this.col());for(var a=0;a<t.length;++a){r=t[a];if(p(r,n)){return s(r)}if(o(r)){return l(t[a-1],r)}}return l(r,null)}return null;function o(e){return e.begin>n.begin}function s(e){if(e){if(/^(?:num|str|bool|sym|ref)$/.test(e.type)){return{replace:true,token:e,end:e.end}}if(/^(?:op|punc|startexp)$/.test(e.type)){if(e.end==n.end){return l(e,t[a+1])}return l(t[a-1],e)}}}function l(e,t){if(e==null){return null}if(t==null){if(/^(?:op|startexp)$/.test(e.type)||c(e.value)){return{token:e,end:n.end}}return null}if(i){if(e.type=="op"&&/^(?:punc|op)$/.test(t.type)){return{token:e,end:n.end}}}else{if(e.type=="startexp"){return{token:e,end:n.end}}if(/^(?:op|punc)$/.test(e.type)&&/^[,;({]$/.test(e.value)){return{token:e,end:n.end}}if(/^(?:ref|sym)/.test(e.type)){return{token:e,replace:true,end:e.end}}if(/^(?:ref|sym)/.test(t.type)){return{token:t,replace:true,end:t.end}}}return false}},refAtPoint:function(e){var t=this._canInsertRef();if(t){var i=e.selection()._ref.simplify().clone().relative(0,0,3);if(e!==this.activeSheet){i=i.setSheet(e.name(),true)}this._replaceAt(t,i.print(0,0))}},_replaceAt:function(e,t){var i=this.value();var n=e.token;var r=i.substr(e.end);i=i.substr(0,e.replace?n.begin:e.end)+t;var a=i.length;i+=r;this._value(i);this.setPos(a);this.scale();this._syntaxHighlight()},syncWith:function(e){var t=this;var i="input"+a;var n=t._sync.bind(t),r;if(d.support.browser.msie){i="keydown"+a;r=function(){setTimeout(n)}}t._editorToSync=e;t.element.off(i).on(i,r||n)},scale:function(){var e=this.element;var t,i;if(!this._span){this._textContainer()}this._span.html(e.html());t=this._span.width()+this.options.scalePadding;i=this._span.height();if(t>e.width()){e.width(t)}if(i>e.height()){e.height(i)}this._sync()},_value:function(e){this.element.text(e)},value:function(e){if(e===undefined){var t=this.element[0].innerText;return t.replace(/\n$/,"")}this._value(e);this._syntaxHighlight()},highlightedRefs:function(){return this._highlightedRefs.slice()},_syntaxHighlight:function(){var i=this.getPos();var r=this.value();var n=d.spreadsheet.Pane.classNames.series;var a=[];var o=0;var s=[];var e=[];var l;if(i&&!i.collapsed){return}if(!/^=/.test(r)){if(this._highlightedRefs.length){this._highlightedRefs=[];this.element.text(r)}if(this.popup){this.popup.close()}return}else{e=d.spreadsheet.calc.tokenize(r,this.row(),this.col());e.forEach(function(e){e.active=false;e.cls=["k-syntax-"+e.type];if(e.type=="ref"){e.colorClass=n[o++%n.length];e.cls.push(e.colorClass);a.push(e)}if(i&&e.type=="punc"){if(c(e.value)){s.unshift(e)}else if(f(e.value)){var t=s.shift();if(t){if(h(e.value,t.value)){if(p(e,i)||p(t,i)){e.cls.push("k-syntax-paren-match");t.cls.push("k-syntax-paren-match")}}else{e.cls.push("k-syntax-error");t.cls.push("k-syntax-error")}}else{e.cls.push("k-syntax-error")}}}if(i&&p(e,i)){e.cls.push("k-syntax-at-point");e.active=true;l=e}if(e.type=="func"&&!v(e.value)&&(!i||!p(e,i))){e.cls.push("k-syntax-error")}});e.reverse().forEach(function(e){var t=e.begin,i=e.end;var n=d.htmlEncode(r.substring(t,i));r=r.substr(0,t)+"<span class='"+e.cls.join(" ")+"'>"+n+"</span>"+r.substr(i)});this.element.html(r)}if(i){this.setPos(i.begin,i.end)}this._highlightedRefs=a},destroy:function(){this._editorToSync=null;this.element.off(a);clearTimeout(this._focusTimeout);clearTimeout(this._keyDownTimeout);this._cellTooltip=null;this._span=null;this.popup.destroy();this.popup=null;i.fn.destroy.call(this)},insertNewline:function(){var e=this.value();var t=this.getPos();var i=t.end==e.length;e=e.substr(0,t.begin)+(i?"\n\n":"\n"+e.substr(t.end));this.value(e);this.setPos(t.begin+1)}});function c(e){return e=="("||e=="["||e=="{"}function f(e){return e==")"||e=="]"||e=="}"}function h(e,t){return t=="("?e==")":t=="["?e=="]":t=="{"?e=="}":false}function p(e,t){return e.begin<=t.begin&&e.end>=t.end}function v(e){return d.spreadsheet.calc.runtime.FUNCS[e.toLowerCase()]}d.spreadsheet.FormulaInput=u;t.extend(true,u,{classNames:e})})(kendo,window)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/eventlistener",["kendo.core"],e)})(function(){(function(e){var r=e.jQuery;var n={8:"backspace",9:"tab",13:"enter",27:"esc",37:"left",38:"up",39:"right",40:"down",35:"end",36:"home",32:"spacebar",33:"pageup",34:"pagedown",46:"delete",113:":edit"};var a=navigator.platform.toUpperCase().indexOf("MAC")>=0;var o=function(e){if(e>47&&e<58||e>64&&e<91||e>95&&e<112||e>185&&e<193||e>218&&e<223||e===229){return true}return false};var t=function(e){var t=e.keyCode;var i=n[t];if(!i&&o(t)){i=":alphanum"}if(!i&&e.key&&e.key.length==1){i=":alphanum"}return i};var i=e.Class.extend({init:function(e,t,i){this._handlers={};this.target=e;this._observer=t||window;this.keyDownProxy=this.keyDown.bind(this);this.mouseProxy=this.mouse.bind(this);this.touchProxy=this.touch.bind(this);this.threshold=5;this._pressLocation=null;e.on("keydown",this.keyDownProxy);e.on("contextmenu mousedown cut copy paste scroll wheel click dblclick focus",this.mouseProxy);e.on("touchmove touchend",this.touchProxy);r(document.documentElement).on("mousemove mouseup",this.mouseProxy);r(document.documentElement).on("touchmove touchend",this.touchProxy);if(i){for(var n in i){this.on(n,i[n])}}},keyDown:function(e){this.handleEvent(e,t(e.originalEvent))},touch:function(e){this.handleEvent(e,e.type)},mouse:function(e){var t;if(e.which){t=e.which==3}else if(e.button){t=e.button==2}var i=e.type;if(i==="mousedown"){if(t){i="rightmousedown"}else{this._pressLocation={x:e.pageX,y:e.pageY}}}if(i==="mouseup"){if(!t){this._pressLocation=null}}if(i==="mousemove"&&this._pressLocation){var n=this._pressLocation.x-e.pageX;var r=this._pressLocation.y-e.pageY;var a=Math.sqrt(n*n+r*r);if(a>this.threshold){i="mousedrag"}}this.handleEvent(e,i)},handleEvent:function(e,t){var i="";e.mod=a?e.metaKey:e.ctrlKey&&!e.altKey;if(e.altKey){i+="alt+"}if(e.shiftKey){i+="shift+"}if(e.ctrlKey){i+="ctrl+"}i+=t;var n=this._handlers["*+"+t];if(n){n.call(this._observer,e,i)}var r=this._handlers[i];if(r){r.call(this._observer,e,i)}},on:function(e,t){var i=this._handlers;if(typeof t==="string"){t=this._observer[t]}if(typeof e==="string"){e=e.split(",")}e.forEach(function(e){i[e]=t})},destroy:function(){this.target.off("keydown",this.keyDownProxy);this.target.off("keydown",this.mouseProxy);r(document.documentElement).off("mousemove mouseup",this.mouseProxy)}});e.spreadsheet.EventListener=i})(window.kendo)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/rangelist",["kendo.core"],e)})(function(){(function(e){var i=e.Class.extend({init:function e(t,i,n,r){this.level=t;this.value=i;this.left=n;this.right=r}});var r=new function e(){this.left=this;this.right=this;this.level=0};function a(e){if(e.left.level===e.level){var t=e;e=e.left;t.left=e.right;e.right=t}return e}function o(e){if(e.right.right.level===e.level){var t=e;e=e.right;t.right=e.left;e.left=t;e.level+=1}return e}function n(e,t){if(e===r){return new i(1,t,r,r)}else if(e.value.start>t.start){e.left=n(e.left,t)}else{e.right=n(e.right,t)}return o(a(e))}function s(e,t){if(e===r){return e}var i=e.value.start-t.start;if(i===0){if(e.left!==r&&e.right!==r){var n=e.left;while(n.right!==r){n=n.right}e.value=n.value;e.left=s(e.left,e.value)}else if(e.left===r){e=e.right}else{e=e.left}}else if(i>0){e.left=s(e.left,t)}else{e.right=s(e.right,t)}if(e.left.level<e.level-1||e.right.level<e.level-1){e.level-=1;if(e.right.level>e.level){e.right.level=e.level}e=a(e);e.right=a(e.right);e.right.right=a(e.right.right);e=o(e);e.right=o(e.right)}return e}var l=e.Class.extend({init:function e(t,i,n){this.start=t;this.end=i;this.value=n},intersects:function(e){return e.start<=this.end&&e.end>=this.start},clone:function(){return new l(this.start,this.end,this.value)}});var d=e.Class.extend({init:function(){this.root=r},insert:function(e){this.root=n(this.root,e)},remove:function(e){this.root=s(this.root,e)},findrange:function(e){var t=this.root;while(t!=r){if(e<t.value.start){t=t.left}else if(e>t.value.end){t=t.right}else{return t.value}}return null},values:function(){var e=[];u(this.root,e);return e},intersecting:function(e,t){var i=[];c(this.root,new l(e,t),i);return i},map:function(e){var t=new d;f(t,this.root,e);return t},clone:function(){return this.map(function(e){return e.clone()})},first:function(){var e=this.root;while(e.left!=r){e=e.left}return e},last:function(){var e=this.root;while(e.right!=r){e=e.right}return e}});function u(e,t){if(e===r){return}u(e.left,t);t.push(e.value);u(e.right,t)}function c(e,t,i){if(e===r){return}var n=e.value;if(t.start<n.start){c(e.left,t,i)}if(n.intersects(t)){i.push(n)}if(t.end>n.end){c(e.right,t,i)}}function f(e,t,i){if(t===r){return}f(e,t.left,i);e.insert(i(t.value));f(e,t.right,i)}var t=e.Class.extend({init:function(e,t,i){if(t===undefined){this.tree=e}else{this.tree=new d;this.tree.insert(new l(e,t,i))}},values:function(){return this.tree.values()},map:function(e){return new t(this.tree.map(e))},intersecting:function(e,t){return this.tree.intersecting(e,t)},first:function(){return this.tree.first().value},last:function(){return this.tree.last().value},insert:function(e,t,i){return this.tree.insert(new l(e,t,i))},value:function(e,t,i){if(i===undefined){if(t===undefined){t=e}return this.intersecting(e,t)[0].value}var n=this.tree.intersecting(e-1,t+1);if(n.length){var r=n[0],a=n[n.length-1];if(r.end<e){if(r.value===i){e=r.start}else{n.shift()}}if(a.start>t){if(a.value===i){t=a.end}else{n.pop()}}for(var o=0,s=n.length;o<s;o++){var l=n[o];var d=l.value;var u=l.start;var c=l.end;this.tree.remove(l);if(u<e){if(d!==i){this.insert(u,e-1,d)}else{e=u}}if(c>t){if(d!==i){this.insert(t+1,c,d)}else{t=c}}}}this.insert(e,t,i)},expandedValues:function(e,t){var i=this.intersecting(e,t);var n=[];var r=0;for(var a=e;a<=t;a++){if(i[r].end<a){r++}n.push({index:a-e,value:i[r].value})}return n},sortedIndices:function(e,t,r,a){var i=this.expandedValues(e,t);var n=function(e,t){if(e.value===t.value){return e.index-t.index}return r(e.value,t.value)};if(a){n=function(e,t){var i=a[e.index];var n=a[t.index];if(i.value===n.value){return r(e.value,t.value)}return e.index-t.index}}i.sort(n);return i},sort:function(e,t,i){if(this.intersecting(e,t).length===1){return}var n=this.expandedValues(e,t);for(var r=0,a=i.length;r<a;r++){this.value(r+e,r+e,n[i[r].index].value)}},copy:function(e,t,i){var n=this.intersecting(e,t);var r=i;var a;for(var o=0,s=n.length;o<s;o++){var l=n[o].start;if(l<e){l=e}var d=n[o].end;if(d>t){d=t}a=r+(d-l);this.value(r,a,n[o].value);r=++a}},iterator:function(e,t){return new h(e,t,this.intersecting(e,t))},getState:function(){return this.tree.clone()},setState:function(e){this.tree=e.clone()},toJSON:function(){return this.values()},fromJSON:function(e){e.forEach(function(e){this.value(e.start,e.end,e.value)},this)}});var h=e.Class.extend({init:function(e,t,i){this.start=e;this.end=t;this.index=0;this.ranges=i},unique:function(){return this.ranges.map(function(e){return e.value})},at:function(e){while(this.ranges[this.index]&&this.ranges[this.index].end<e){this.index++}return this.ranges[this.index]&&this.ranges[this.index].value},forEach:function(e){for(var t=this.start;t<=this.end;t++){e(this.at(t),t)}this.index=0}});var p=t.extend({init:function(e,t,i){this.tree=new d;this.range=new l(e,t,i)},intersecting:function(e,t){var i=this.tree.intersecting(e,t);var n=[];var r;if(!i.length){return[this.range]}for(var a=0,o=i.length;a<o;a++){r=i[a];if(r.start>e){n.push(new l(e,r.start-1,this.range.value))}n.push(r);e=r.end+1}if(r.end<t){n.push(new l(r.end+1,t,this.range.value))}return n},insert:function(e,t,i){if(i!==this.range.value){this.tree.insert(new l(e,t,i))}},lastRangeStart:function(){var e=this.tree.root;if(e===r){return this.range.start}while(e.right!==r){e=e.right}return e.value.end+1}});e.spreadsheet.RangeTree=d;e.spreadsheet.RangeList=t;e.spreadsheet.SparseRangeList=p;e.spreadsheet.ValueRange=l})(kendo)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/propertybag",["kendo.core"],e)})(function(){(function(o){var i=o.Class.extend({init:function(e){this.list=e},get:function(e){return this.parse(this.list.value(e,e))},set:function(e,t,i){if(i===undefined){i=t;t=e}this.list.value(e,t,i)},parse:function(e){return e},copy:function(e,t,i){this.list.copy(e,t,i)},iterator:function(e,t){return this.list.iterator(e,t)}});var e=i.extend({set:function(e,t,i){this.list.value(e,t,JSON.stringify(i))},parse:function(e){return JSON.parse(e)}});var t=i.extend({init:function(e,t){i.prototype.init.call(this,e);this.formats=t},set:function(e,t,i){if(i instanceof Date){i=o.spreadsheet.dateToNumber(i);if(!this.formats.value(e,t)){this.formats.value(e,t,n(o.culture().calendar.patterns.d))}}else if(typeof i=="number"){i=o.spreadsheet.calc.runtime.limitPrecision(i)}this.list.value(e,t,i)}});function n(e){return e.replace(/M/g,"m").replace(/'/g,'"').replace(/tt/,"am/pm")}o.spreadsheet.PropertyBag=o.Class.extend({specs:[{property:i,name:"format",value:null,sortable:true,serializable:true},{property:t,name:"value",value:null,sortable:true,serializable:true,depends:"format"},{property:i,name:"formula",value:null,sortable:true,serializable:true},{property:i,name:"background",value:null,sortable:true,serializable:true},{property:e,name:"vBorders",value:null,sortable:false,serializable:false},{property:e,name:"hBorders",value:null,sortable:false,serializable:false},{property:i,name:"color",value:null,sortable:true,serializable:true},{property:i,name:"fontFamily",value:null,sortable:true,serializable:true},{property:i,name:"underline",value:null,sortable:true,serializable:true},{property:i,name:"fontSize",value:null,sortable:true,serializable:true},{property:i,name:"italic",value:null,sortable:true,serializable:true},{property:i,name:"bold",value:null,sortable:true,serializable:true},{property:i,name:"textAlign",value:null,sortable:true,serializable:true},{property:i,name:"indent",value:null,sortable:true,serializable:true},{property:i,name:"verticalAlign",value:null,sortable:true,serializable:true},{property:i,name:"wrap",value:null,sortable:true,serializable:true},{property:i,name:"validation",value:null,sortable:false,serializable:true},{property:i,name:"enable",value:null,sortable:false,serializable:true},{property:i,name:"link",value:null,sortable:true,serializable:true},{property:i,name:"editor",value:null,sortable:true,serializable:true},{property:i,name:"comment",value:null,sortable:true,serializable:true},{property:i,name:"html",value:null,sortable:true,serializable:true}],init:function(e,t,r){r=r||{};var a=e*t-1;this.rowCount=e;this.columnCount=t;this.cellCount=a;this.properties={};this.lists={};this.specs.forEach(function(e){var t=e.name;var i=r[t];if(i===undefined){i=e.value}this.lists[t]=new o.spreadsheet.SparseRangeList(0,a,i);var n=this.properties[t]=new e.property(this.lists[t],this.lists[e.depends]);n.spec=e},this);this.lists.formula.tree.clone=s;this.lists.validation.tree.clone=s},getState:function(){var t={};this.specs.forEach(function(e){t[e.name]=this.lists[e.name].getState()},this);return t},setState:function(t){this.specs.forEach(function(e){this.lists[e.name].setState(t[e.name])},this)},get:function(e,t){if(t===undefined){return this.lists[e]}switch(e){case"borderRight":t+=this.rowCount;case"borderLeft":e="vBorders";break;case"borderBottom":t++;case"borderTop":e="hBorders";break}return t>this.cellCount?null:this.properties[e].get(t)},set:function(e,t,i,n){switch(e){case"borderRight":t+=this.rowCount;i+=this.rowCount;case"borderLeft":e="vBorders";break;case"borderBottom":t++;i++;case"borderTop":e="hBorders";break}if(t<=i&&i<=this.cellCount){this.properties[e].set(t,i,n)}},fromJSON:function(t,i){for(var e=0;e<this.specs.length;e++){var n=this.specs[e];if(n.serializable){if(i[n.name]!==undefined){this.set(n.name,t,t,i[n.name],false)}}}["borderLeft","borderRight","borderTop","borderBottom"].forEach(function(e){if(i[e]!==undefined){this.set(e,t,t,i[e])}},this)},copy:function(t,i,n){this.specs.forEach(function(e){this.properties[e.name].copy(t,i,n)},this)},iterator:function(e,t,i){var n=this.properties[e];var r=n.iterator(t,i),a=r.at;var o=this.cellCount;r.at=function(e){return e>o?null:n.parse(a.call(r,e))};r.name=e;r.value=n.spec.value;return r},sortable:function(){return this.specs.filter(function(e){return e.sortable}).map(function(e){return this.lists[e.name]},this)},iterators:function(i,n){return this.specs.reduce(function(e,t){if(t.serializable){e.push(this.iterator(t.name,i,n))}return e}.bind(this),[])},forEach:function(e,t,i){var n=this.iterators(e,t);var r=this.iterator("hBorders",e,t+1);var a=this.iterator("vBorders",e,t);var o=this.iterator("vBorders",e+this.rowCount,t+this.rowCount);var s,l;function d(e,t,i){var n=t.at(i);if(n!==t.value){s[e]=n}}for(l=e;l<=t;l++){s={};for(var u=0;u<n.length;u++){var c=n[u];var f=c.at(l);if(f!==c.value){s[c.name]=f}}d("borderLeft",a,l);d("borderRight",o,l+this.rowCount);d("borderTop",r,l);if((l+1)%this.rowCount){d("borderBottom",r,l+1)}i(s)}},forEachProperty:function(e){for(var t in this.properties){e(this.properties[t])}}});function r(e){e=e.clone();e.value=e.value.deepClone();return e}function s(){var e=this.map(r);e.clone=s;return e}o.spreadsheet.ALL_PROPERTIES=o.spreadsheet.PropertyBag.prototype.specs.reduce(function(e,t){if(t.serializable){e.push(t.name)}return e},["borderTop","borderRight","borderBottom","borderLeft"])})(window.kendo)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/references",["kendo.core"],e)})(function(){"use strict";var e=kendo.spreadsheet;var t=kendo.Class;function a(e){var t=Math.floor(e/26)-1;return(t>=0?a(t):"")+String.fromCharCode(65+e%26)}function l(e){if(/^[a-z_][a-z0-9_]*$/i.test(e)){return e}return"'"+e.replace(/\x27/g,"\\'")+"'"}function d(e,t,i,n){var r="";++t;if(!isFinite(t)){t=""}else if(n!=null&&!(n&2)){t="$"+t}if(!isFinite(i)){i=""}else{r=a(i);if(n!=null&&!(n&1)){r="$"+r}}if(e){return l(e)+"!"+r+t}else{return r+t}}var i=t.extend({type:"ref",sheet:"",clone:function(){return this},hasSheet:function(){return this._hasSheet},simplify:function(){return this},setSheet:function(e,t){this.sheet=e;if(t!=null){this._hasSheet=t}return this},absolute:function(){return this},relative:function(){return this},adjust:function(){return this},toString:function(){return this.relative(0,0,3,3).print(0,0)},forEach:function(e,t){e.call(t,this)},map:function(e,t){return e.call(t,this)},intersects:function(e){return this.intersect(e)!==u},isCell:function(){return false},toRow:function(){return this},toColumn:function(){return this},first:function(){return this},lastRange:function(){return this},size:function(){return 1},rangeAt:function(){return this},nextRangeIndex:function(){return 0},previousRangeIndex:function(){return 0},eq:function(e){var t=this;var i=e;if(t===u||i===u){return t===i}if(i instanceof f||i instanceof c&&!(t instanceof f)){t=e;i=this}if(t instanceof f){i=i.simplify();return i instanceof f&&t.row==i.row&&t.col==i.col&&t.sheet==i.sheet}else if(t instanceof c){if(i instanceof c){return i.topLeft.eq(t.topLeft)&&i.bottomRight.eq(t.bottomRight)}if(i instanceof s){return i.single()&&t.eq(i.refs[0])}}else if(t instanceof s&&i instanceof s){var n=t.refs;var r=i.refs;if(n.length!=r.length){return false}for(var a=0,o=n.length;a<o;a++){if(!n[a].eq(r[a])){return false}}return true}return t===i},concat:function(e){return new s([this,e])},replaceAt:function(e,t){return t},forEachColumnIndex:function(e){this.forEachAxisIndex("col",e)},forEachRowIndex:function(e){this.forEachAxisIndex("row",e)},forEachAxisIndex:function(i,e){var n=[];var t=i==="row"?"forEachRow":"forEachColumn";this[t](function(e){var t=e.first()[i];if(n.indexOf(t)===-1){n.push(t)}});n.sort(function(e,t){return e>t?1:e<t?-1:0}).forEach(e)},valid:function(){return false},renameSheet:function(e,t){if(this.sheet&&this.sheet.toLowerCase()==e.toLowerCase()){this.sheet=t;return true}}});i.display=d;var u=new(i.extend({init:function e(){},print:function(){return"#NULL!"},eq:function(e){return e===this},forEach:function(){}}));var n=i.extend({ref:"name",init:function e(t){this.name=t},clone:function(){return new n(this.name).setSheet(this.sheet,this.hasSheet())},print:function(){var e=l(this.name);if(this.hasSheet()){e=l(this.sheet)+"!"+e}return e}});var f=i.extend({ref:"cell",init:function e(t,i,n){this.row=t;this.col=i;this.rel=n||0},clone:function(){return new f(this.row,this.col,this.rel).setSheet(this.sheet,this.hasSheet())},intersect:function(e){if(e instanceof f){if(this.eq(e)){return this}else{return u}}return e.intersect(this)},print:function(e,t,i){var n=this.col,r=this.row,a=this.rel,o;if(e==null&&a){var s=this.hasSheet()?l(this.sheet)+"!":"";if(isFinite(n)){n=a&1?"C["+n+"]":"C"+(n+1)}else{n=""}if(isFinite(r)){r=a&2?"R["+r+"]":"R"+(r+1)}else{r=""}return s+r+n}else{o=this.absolute(e,t);if(i){r=o.row%1048576;n=o.col%16384;if(r<0){r+=1048576}if(n<0){n+=16384}return d(this._hasSheet&&this.sheet,r,n,a)}return o.valid()?d(this._hasSheet&&this.sheet,o.row,o.col,a):"#REF!"}},absolute:function(e,t){var i=this.clone();if(i.rel&3===0){return i}if(i.rel&1){i.col=(i.col+t)%16384}if(i.rel&2){i.row=(i.row+e)%1048576}i.rel=0;return i},toRangeRef:function(){return new c(this,this)},relative:function(e,t,i){if(i==null){i=this.rel}var n=i&2?this.row-e:this.row;var r=i&1?this.col-t:this.col;return new f(n,r,i).setSheet(this.sheet,this.hasSheet())},height:function(){return 1},width:function(){return 1},toString:function(){return d(null,this.row,this.col,3)},isCell:function(){return true},leftColumn:function(){return this},rightColumn:function(){return this},topRow:function(){return this},bottomRow:function(){return this},forEachRow:function(e){e(this.toRangeRef())},forEachColumn:function(e){e(this.toRangeRef())},adjust:function(e,t,i,n,r,a,o){var s=this.absolute(e,t);if(r){if(s.row>=a){if(o<0&&s.row<a-o){return u}s.row+=o}}else{if(s.col>=a){if(o<0&&s.col<a-o){return u}s.col+=o}}if(i!=null&&n!=null){s=s.relative(i,n,this.rel)}return s},valid:function(){if(this.rel){throw new Error("valid() called on relative reference")}var e=this.col,t=this.row;return!(isFinite(e)&&e<0||isFinite(t)&&t<0)}});var c=i.extend({ref:"range",init:function e(t,i){if(t._hasSheet&&i._hasSheet&&t.sheet.toLowerCase()!=i.sheet.toLowerCase()){this.endSheet=i.sheet}this.topLeft=new f(t.row,t.col,t.rel);this.bottomRight=new f(i.row,i.col,i.rel);this.normalize()},clone:function(){return new c(this.topLeft.clone(),this.bottomRight.clone()).setSheet(this.sheet,this.hasSheet())},_containsRange:function(e){return this._containsCell(e.topLeft)&&this._containsCell(e.bottomRight)},_containsCell:function(e){return e.sheet==this.sheet&&e.row>=this.topLeft.row&&e.col>=this.topLeft.col&&e.row<=this.bottomRight.row&&e.col<=this.bottomRight.col},contains:function(e){if(e instanceof Array){var t=this;return e.some(function(e){return t.contains(e)})}if(e instanceof f){return this._containsCell(e)}if(e instanceof c){return this._containsRange(e)}return false},_intersectRange:function(e){if(this.sheet!=e.sheet){return u}var t=this.topLeft.col;var i=this.topLeft.row;var n=this.bottomRight.col;var r=this.bottomRight.row;var a=e.topLeft.col;var o=e.topLeft.row;var s=e.bottomRight.col;var l=e.bottomRight.row;if(t<=s&&a<=n&&i<=l&&o<=r){return new c(new f(Math.max(i,o),Math.max(t,a)),new f(Math.min(r,l),Math.min(n,s))).setSheet(this.sheet,this.hasSheet())}else{return u}},intersect:function(e){if(e instanceof f){return this._containsCell(e)?e:u}if(e instanceof c){return this._intersectRange(e).simplify()}if(e instanceof s){return e.intersect(this)}return u},simplify:function(){if(this.isCell()){return new f(this.topLeft.row,this.topLeft.col,this.topLeft.rel).setSheet(this.sheet,this.hasSheet())}return this},normalize:function(){var e=this.topLeft,t=this.bottomRight;var i=e.row,n=e.col,r=t.row,a=t.col;var o=e.rel&2,s=e.rel&1;var l=t.rel&2,d=t.rel&1;var u,c=false;if(o===l&&s===d){if(i>r){c=true;u=i;i=r;r=u;u=o;o=l;l=u}if(n>a){c=true;u=n;n=a;a=u;u=s;s=d;d=u}if(c){this.topLeft=new f(i,n,s|o);this.bottomRight=new f(r,a,d|l)}}return this},print:function(e,t,i){if(i||this.absolute(e,t).valid()){var n=this.topLeft.print(e,t,i)+":"+this.bottomRight.print(e,t,i);if(this.hasSheet()){n=l(this.sheet)+(this.endSheet?":"+l(this.endSheet):"")+"!"+n}return n}return"#REF!"},absolute:function(e,t){return new c(this.topLeft.absolute(e,t),this.bottomRight.absolute(e,t)).setSheet(this.sheet,this.hasSheet())},relative:function(e,t,i,n){if(n==null){n=i}return new c(this.topLeft.relative(e,t,i),this.bottomRight.relative(e,t,n)).setSheet(this.sheet,this.hasSheet())},height:function(){if(this.topLeft.rel!=this.bottomRight.rel){throw new Error("Mixed relative/absolute references")}return this.bottomRight.row-this.topLeft.row+1},width:function(){if(this.topLeft.rel!=this.bottomRight.rel){throw new Error("Mixed relative/absolute references")}return this.bottomRight.col-this.topLeft.col+1},collapse:function(){return this.topLeft.toRangeRef()},leftColumn:function(){return new c(this.topLeft,new f(this.bottomRight.row,this.topLeft.col))},rightColumn:function(){return new c(new f(this.topLeft.row,this.bottomRight.col),this.bottomRight)},topRow:function(){return new c(this.topLeft,new f(this.topLeft.row,this.bottomRight.col))},bottomRow:function(){return new c(new f(this.bottomRight.row,this.topLeft.col),this.bottomRight)},toRangeRef:function(){return this},toRow:function(e){e+=Math.max(0,this.topLeft.row);return new c(new f(e,this.topLeft.col),new f(e,this.bottomRight.col)).setSheet(this.sheet,this.hasSheet())},toColumn:function(e){e+=Math.max(0,this.topLeft.col);return new c(new f(this.topLeft.row,e),new f(this.bottomRight.row,e)).setSheet(this.sheet,this.hasSheet())},toCell:function(e,t){e+=Math.max(0,this.topLeft.row);t+=Math.max(0,this.topLeft.col);return new f(e,t,0).setSheet(this.sheet,this.hasSheet())},forEachRow:function(e){var t=this.topLeft.row;var i=this.bottomRight.row;var n=this.topLeft.col;var r=this.bottomRight.col;for(var a=t;a<=i;a++){e(new c(new f(a,n),new f(a,r)))}},forEachColumn:function(e){var t=this.topLeft.row;var i=this.bottomRight.row;var n=this.topLeft.col;var r=this.bottomRight.col;for(var a=n;a<=r;a++){e(new c(new f(t,a),new f(i,a)))}},intersecting:function(e){return e.filter(function(e){return e.toRangeRef().intersects(this)},this)},union:function(e,t){var i=this.intersecting(e);var n=this.topLeft.row;var r=this.topLeft.col;var a=this.bottomRight.row;var o=this.bottomRight.col;var s=false;i.forEach(function(e){e=e.toRangeRef();if(e.topLeft.row<n){s=true;n=e.topLeft.row}if(e.topLeft.col<r){s=true;r=e.topLeft.col}if(e.bottomRight.row>a){s=true;a=e.bottomRight.row}if(e.bottomRight.col>o){s=true;o=e.bottomRight.col}if(t){t(e)}});var l=new c(new f(n,r),new f(a,o));if(s){return l.union(e,t)}else{return l}},resize:function(e){var t=Math.max.bind(Math,0);function i(e){return e||0}var n=this.topLeft.row+i(e.top);var r=this.topLeft.col+i(e.left);var a=this.bottomRight.row+i(e.bottom);var o=this.bottomRight.col+i(e.right);if(r<0&&o<0||n<0&&a<0){return u}else if(n<=a&&r<=o){return new c(new f(t(n),t(r)),new f(t(a),t(o)))}else{return u}},move:function(e,t){return new c(new f(this.topLeft.row+e,this.topLeft.col+t),new f(this.bottomRight.row+e,this.bottomRight.col+t))},first:function(){return this.topLeft.clone().setSheet(this.sheet,this.hasSheet())},isCell:function(){return!this.endSheet&&this.topLeft.eq(this.bottomRight)},toString:function(){return this.topLeft+":"+this.bottomRight},adjust:function(e,t,i,n,r,a,o){var s=this.topLeft.adjust(e,t,i,n,r,a,o);var l=this.bottomRight.adjust(e,t,i,n,r,a,o);if(s===u&&l===u){return u}if(s===u){s=this.topLeft.absolute(e,t);if(r){s.row=a}else{s.col=a}if(i!=null&&n!=null){s=s.relative(i,n,this.topLeft.rel)}}else if(l===u){l=this.bottomRight.absolute(e,t);if(r){l.row=a-1}else{l.col=a-1}if(i!=null&&n!=null){l=l.relative(i,n,this.bottomRight.rel)}}return new c(s,l).setSheet(this.sheet,this.hasSheet()).simplify()},valid:function(){return this.topLeft.valid()&&this.bottomRight.valid()}});var s=i.extend({init:function e(t){this.refs=t;this.length=t.length},clone:function(){return new s(this.refs.slice())},intersect:function(e){var t=[];for(var i=0;i<this.length;++i){var n=e.intersect(this.refs[i]);if(n!==u){t.push(n)}}if(t.length>0){return new s(t).simplify()}return u},simplify:function(){var e=new s(this.refs.reduce(function(e,t){t=t.simplify();if(t!==u){e.push(t)}return e},[]));if(e.empty()){return u}if(e.single()){return e.refs[0]}return e},absolute:function(t,i){return new s(this.refs.map(function(e){return e.absolute(t,i)}))},forEach:function(t,i){this.refs.forEach(function(e){if(e instanceof s){e.forEach(t,i)}else{t.call(i,e)}},i)},toRangeRef:function(){return this.refs[0].toRangeRef()},contains:function(t){return this.refs.some(function(e){return e.contains(t)})},map:function(t,i){var n=[];this.forEach(function(e){n.push(t.call(i,e))});return new s(n)},first:function(){return this.refs[0].first()},lastRange:function(){return this.refs[this.length-1]},size:function(){return this.length},single:function(){return this.length==1},empty:function(){return this.length===0},isCell:function(){return this.single()&&this.refs[0].isCell()},rangeAt:function(e){return this.refs[e]},nextRangeIndex:function(e){if(e===this.length-1){return 0}else{return e+1}},previousRangeIndex:function(e){if(e===0){return this.length-1}else{return e-1}},concat:function(e){return new s(this.refs.concat([e]))},print:function(t,i,n){return this.refs.map(function(e){return e.print(t,i,n)}).join(",")},replaceAt:function(e,t){var i=this.refs.slice();i.splice(e,1,t);return new s(i)},leftColumn:function(){return this.map(function(e){return e.leftColumn()})},rightColumn:function(){return this.map(function(e){return e.rightColumn()})},topRow:function(){return this.map(function(e){return e.topRow()})},bottomRow:function(){return this.map(function(e){return e.bottomRow()})},forEachRow:function(t){this.forEach(function(e){e.forEachRow(t)})},forEachColumn:function(t){this.forEach(function(e){e.forEachColumn(t)})},adjust:function(t,i,n,r,a,o,s){return this.map(function(e){return e.adjust(t,i,n,r,a,o,s)}).simplify()},toString:function(){return this.refs.map(function(e){return e.toString()}).join(", ")},valid:function(){for(var e=this.refs.length;--e>=0;){if(this.refs[e].valid()){return false}}return true},renameSheet:function(t,i){this.refs.forEach(function(e){e.renameSheet(t,i)})}});e.NULLREF=u;e.SHEETREF=new c(new f(0,0),new f(Infinity,Infinity));e.FIRSTREF=new f(0,0);e.Ref=i;e.NameRef=n;e.CellRef=f;e.RangeRef=c;e.UnionRef=s;e.SHEETREF.print=function(){return"#SHEET"}},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/autofillcalculator",["kendo.core"],e)})(function(){(function(e){var h=e.spreadsheet.RangeRef;var p=e.spreadsheet.CellRef;var t=e.Class.extend({init:function(e){this._grid=e},rectIsVertical:function(e,t,i,n){var r=this._grid.rectangle(e.toRangeRef());var a=this._grid.rectangle(t.toRangeRef());return Math.abs(a[n]-r[n])>Math.abs(r[i]-a[i])},autoFillDest:function(e,t){var i=e.topLeft;var n=e.bottomRight;var r;var a=t.row>=i.row;var o=t.col>=i.col;if(a){r=o?4:3}else{r=o?2:1}var s,l,d,u;if(r===4){s=i;l=n;u=t.row>l.row||t.col>l.col;if(u){t=new p(Math.max(t.row,l.row),Math.max(t.col,l.col))}if(this.rectIsVertical(l,t,"right","bottom")){d=new p(t.row,l.col)}else{d=new p(l.row,t.col)}}else if(r===3){var c=new p(i.col,n.row);if(t.row>n.row&&this.rectIsVertical(c,t,"left","bottom")){s=i;d=new p(t.row,n.col)}else{s=n;d=new p(i.row,t.col)}}else if(r===2){var f=new p(i.row,n.col);if(t.col>n.col&&!this.rectIsVertical(f,t,"right","top")){s=i;d=new p(n.row,t.col)}else{s=n;d=new p(t.row,i.col)}}else{s=n;if(this.rectIsVertical(i,t,"left","top")){d=new p(t.row,i.col)}else{d=new p(i.row,t.col)}}return this._grid.normalize(new h(s,d))}});e.spreadsheet.AutoFillCalculator=t})(kendo)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/navigator",["kendo.core","spreadsheet/autofillcalculator"],e)})(function(){(function(k){var p=k.spreadsheet.RangeRef;var y=k.spreadsheet.CellRef;var t=k.Class.extend({init:function(n,r,e,a){this.rangeGetter=e;this.prevLeft=function(e){var t=a(this.range(e));var i=this.range(r.prevVisible(t.topLeft[n]));return a(i).topLeft[n]};this.nextRight=function(e){var t=a(this.range(e));var i=this.range(r.nextVisible(t.bottomRight[n]));return a(i).bottomRight[n]};this.nextLeft=function(e){var t=a(this.range(e));return r.nextVisible(t.bottomRight[n])};this.prevRight=function(e){var t=a(this.range(e));return r.prevVisible(t.topLeft[n])}},boundary:function(e,t){this.top=e;this.bottom=t},range:function(e){return this.rangeGetter(e,this.top,this.bottom)}});var e=k.Class.extend({init:function(e){this._sheet=e;this.autoFillCalculator=new k.spreadsheet.AutoFillCalculator(e._grid);this.colEdge=new t("col",this._sheet._grid._columns,this.columnRange.bind(this),this.union.bind(this));this.rowEdge=new t("row",this._sheet._grid._rows,this.rowRange.bind(this),this.union.bind(this))},height:function(e){this._viewPortHeight=e},union:function(e){return this._sheet.unionWithMerged(e)},columnRange:function(e,t,i){return this._sheet._ref(t,e,i-t,1)},rowRange:function(e,t,i){return this._sheet._ref(e,t,1,i-t)},selectionIncludesMergedCells:function(){var e=this._sheet.select();if(!e.topLeft){e=e.toRangeRef()}return e.contains(this._sheet._mergedCells)},setSelectionValue:function(e){var t=this._sheet.selection();setTimeout(function(){t.value(e())})},selectAll:function(){this._sheet.select(this._sheet._sheetRef)},select:function(e,t,i){e=this.refForMode(e,t);if(i){e=this._sheet.select().concat(e)}this._sheet.select(e)},refForMode:function(e,t){var i=this._sheet._grid;switch(t){case"range":e=i.normalize(e);break;case"row":e=i.rowRef(e.row);break;case"column":e=i.colRef(e.col);break;case"sheet":e=this._sheet._sheetRef;break}return e},startSelection:function(e,t,i,n,r){if(t=="autofill"){this._sheet.startAutoFill()}else if(n&&t=="range"){var a=new p(this._sheet.activeCell().first(),e);this._sheet.select(a,false,false);this._sheet.startSelection(r)}else{this._sheet.startSelection(r);this.select(e,t,i)}},completeSelection:function(){this._sheet.completeSelection()},selectForContextMenu:function(e,t){var i=this._sheet;i._activeDrawing=null;var n=i.select();if(!n.topLeft){n=n.toRangeRef()}if(!n.contains(this.refForMode(e,t))){this.select(e,t)}},selectDrawingForContextMenu:function(e){var t=this._sheet;t._activeDrawing=e;t.triggerChange({selection:true})},modifySelection:function(e){var t=this.determineDirection(e);var i=this._sheet;var n=this._viewPortHeight;var r=i._grid._rows;var a=i._grid._columns;var o=i.currentOriginalSelectionRange();var s=i.select().toRangeRef();var l=i.activeCell();var d=o.topLeft.clone();var u=o.bottomRight.clone();var c=new y(u.row,d.col);var f;this.colEdge.boundary(s.topLeft.row,s.bottomRight.row);this.rowEdge.boundary(s.topLeft.col,s.bottomRight.col);switch(t){case"expand-left":d.col=this.colEdge.prevLeft(d.col);f=d;break;case"shrink-right":d.col=this.colEdge.nextLeft(d.col);f=d;break;case"expand-right":u.col=this.colEdge.nextRight(u.col);f=u;break;case"shrink-left":u.col=this.colEdge.prevRight(u.col);f=u;break;case"expand-up":d.row=this.rowEdge.prevLeft(d.row);f=d;break;case"shrink-down":d.row=this.rowEdge.nextLeft(d.row);f=d;break;case"expand-down":u.row=this.rowEdge.nextRight(u.row);f=u;break;case"shrink-up":u.row=this.rowEdge.prevRight(u.row);f=u;break;case"expand-page-up":d.row=r.prevPage(d.row,n);break;case"shrink-page-up":u.row=r.prevPage(u.row,n);break;case"expand-page-down":u.row=r.nextPage(u.row,n);break;case"shrink-page-down":d.row=r.nextPage(d.row,n);break;case"first-col":d.col=a.firstVisible();u.col=l.bottomRight.col;f=d;break;case"last-col":u.col=a.lastVisible();d.col=l.topLeft.col;f=u;break;case"first-row":d.row=r.firstVisible();u.row=l.bottomRight.row;f=d;break;case"last-row":u.row=r.lastVisible();d.row=l.topLeft.row;f=u;break;case"last":u.row=r.lastVisible();u.col=a.lastVisible();d=l.topLeft;f=u;break;case"first":d.row=r.firstVisible();d.col=a.firstVisible();u=l.bottomRight;f=d;break;case"expand-word-right":u.col=a.nextUntil(u.col,v(i,u,true));f=u;break;case"shrink-word-right":d.col=a.nextUntil(c.col,v(i,c,true));f=d;break;case"expand-word-left":d.col=a.prevUntil(c.col,v(i,c,true));f=d;break;case"shrink-word-left":u.col=a.prevUntil(u.col,v(i,u,true));f=u;break;case"expand-word-up":d.row=r.prevUntil(d.row,v(i,d,false));f=d;break;case"shrink-word-up":u.row=r.prevUntil(u.row,v(i,u,false));f=u;break;case"expand-word-down":u.row=r.nextUntil(u.row,v(i,u,false));f=u;break;case"shrink-word-down":d.row=r.nextUntil(d.row,v(i,d,false));f=d;break}var h=new p(d,u);if(!this.union(h).intersects(l)){this.modifySelection(t.replace("shrink","expand"));return}if(f){i.focus(f)}this.updateCurrentSelectionRange(h)},moveActiveCell:function(e){var t=this._sheet;var i=t.activeCell();var n=i.topLeft;var r=i.bottomRight;var a=t.originalActiveCell();var o=t._grid._rows;var s=t._grid._columns;var l=a.row;var d=a.col;switch(e){case"left":d=s.prevVisible(n.col);break;case"up":l=o.prevVisible(n.row);break;case"right":d=s.nextVisible(r.col);break;case"down":l=o.nextVisible(r.row);break;case"first-col":d=s.firstVisible();break;case"last-col":d=s.lastVisible();break;case"first-row":l=o.firstVisible();break;case"last-row":l=o.lastVisible();break;case"last":l=o.lastVisible();d=s.lastVisible();break;case"first":l=o.firstVisible();d=s.firstVisible();break;case"next-page":l=o.nextPage(r.row,this._viewPortHeight);break;case"prev-page":l=o.prevPage(r.row,this._viewPortHeight);break;case"word-right":d=s.nextUntil(d,v(t,r,true));break;case"word-left":d=s.prevUntil(d,v(t,r,true));break;case"word-up":l=o.prevUntil(l,v(t,r,false));break;case"word-down":l=o.nextUntil(l,v(t,r,false));break}t.select(new y(l,d))},navigateInSelection:function(e){var t=this._sheet;var i=t.activeCell();var n=i.topLeft;var r=t.originalActiveCell();var a=t._grid._rows;var o=t._grid._columns;var s=r.row;var l=r.col;var d=false;var u=false;var c,f;var h=n.col;var p=n.row;var v;function m(e){c=e.topLeft;f=e.bottomRight}m(t.currentNavigationRange());var g=false;var _=false;while(!g&&!_){var b=new y(s,l);var w=t.singleCellSelection();if(w){d=c.eq(b)&&t._sheetRef.topLeft.eq(b);u=f.eq(b)&&t._sheetRef.bottomRight.eq(b);if(!d){d=o.firstVisible()===l&&a.firstVisible()===s}if(!u){u=o.lastVisible()===l&&a.lastVisible()===s}}switch(e){case"next":if(u){_=true;k.focusNextElement()}else if(f.eq(b)){m(t.nextNavigationRange());s=c.row;l=c.col}else{l=o.nextVisible(h);if(l==h||l>f.col){l=c.col;v=a.nextVisible(s);if(v==s||v>f.row){s=c.row}else{s=v}}}break;case"previous":if(d){_=true;this._sheet._workbook._view.element.find(".k-spreadsheet-name-editor .k-input").focus()}else if(c.eq(b)){m(t.previousNavigationRange());s=f.row;l=f.col}else{l=o.prevVisible(h);if(l==h||l<c.col){l=f.col;v=a.prevVisible(s);if(v==s||v<c.row){s=f.row}else{s=v}}}break;case"lower":if(f.eq(b)){m(t.nextNavigationRange());s=c.row;l=c.col}else{s=a.nextVisible(p);if(s==p||s>f.row){s=c.row;v=o.nextVisible(l);if(v==l||v>f.col){l=c.col}else{l=v}}}break;case"upper":if(c.eq(b)){m(t.previousNavigationRange());s=f.row;l=f.col}else{s=a.prevVisible(p);if(s==p||s<c.row){s=f.row;v=o.prevVisible(l);if(v==l||v<c.col){l=f.col}else{l=v}}}break;default:throw new Error("Unknown entry navigation: "+e)}g=!this.shouldSkip(s,l);h=l;p=s}if(g){if(t.singleCellSelection()){t.select(new y(s,l))}else{t.activeCell(new y(s,l))}}},extendSelection:function(e,t){var i=this._sheet;var n=i._grid;if(t==="autofill"){this.resizeAutoFill(e);return}if(t==="range"){e=n.normalize(e)}else if(t==="row"){e=n.rowRef(e.row).bottomRight}else if(t==="column"){e=n.colRef(e.col).bottomRight}var r=i.originalActiveCell().toRangeRef();this.updateCurrentSelectionRange(new p(r.topLeft,e))},shouldSkip:function(e,t){if(this._sheet.isHiddenRow(e)||this._sheet.isHiddenColumn(t)){return true}var i=new y(e,t);var n=false;this._sheet.forEachMergedCell(function(e){if(e.intersects(i)&&!e.collapse().eq(i)){n=true}});return n},resizeAutoFill:function(e){var t=this._sheet;var i=t.select();var n=t._autoFillOrigin;var r=this.autoFillCalculator.autoFillDest(i,e);var a=this.punch(i,r);var o,s;if(!a){var l=t.range(r)._previewFillFrom(t.range(n));if(l){s=l.direction;o=l.hint}}t.updateAutoFill(r,a,o,s)},determineDirection:function(e){var t=this._sheet.currentSelectionRange();var i=this._sheet.activeCell();var n=i.topLeft.col==t.topLeft.col;var r=i.bottomRight.col==t.bottomRight.col;var a=i.topLeft.row==t.topLeft.row;var o=i.bottomRight.row==t.bottomRight.row;switch(e){case"left":e=r?"expand-left":"shrink-left";break;case"right":e=n?"expand-right":"shrink-right";break;case"up":e=o?"expand-up":"shrink-up";break;case"down":e=a?"expand-down":"shrink-down";break;case"prev-page":e=o?"expand-page-up":"shrink-page-up";break;case"next-page":e=a?"expand-page-down":"shrink-page-down";break;case"word-left":e=r?"expand-word-left":"shrink-word-left";break;case"word-right":e=n?"expand-word-right":"shrink-word-right";break;case"word-up":e=o?"expand-word-up":"shrink-word-up";break;case"word-down":e=a?"expand-word-down":"shrink-word-down";break}return e},updateCurrentSelectionRange:function(e){var t=this._sheet;t.select(t.originalSelect().replaceAt(t.selectionRangeIndex(),e),false)},punch:function(e,t){var i;if(t.topLeft.eq(e.topLeft)){if(t.bottomRight.row<e.bottomRight.row){var n=this.rowEdge.nextRight(t.bottomRight.row);i=new p(new y(n,e.topLeft.col),e.bottomRight)}else if(t.bottomRight.col<e.bottomRight.col){var r=this.colEdge.nextRight(t.bottomRight.col);i=new p(new y(e.topLeft.row,r),e.bottomRight)}}return i}});function v(r,a,o){var s=r.range(a).value();return function(e,t,i){if(i){return true}var n=(o?r.range(a.row,e):r.range(e,a.col)).value();if(s===null){return n===null?false:e}else if(!t&&n===null){s=null;return false}else{return n===null}}}k.spreadsheet.SheetNavigator=e})(kendo)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/axismanager",["kendo.core"],e)})(function(){(function(s){var e=s.Class.extend({init:function(e){this._sheet=e},forEachSelectedColumn:function(i){var n=this._sheet;n.batch(function(){n.select().forEachColumnIndex(function(e,t){i(n,e,t)})},{layout:true,recalc:true})},forEachSelectedRow:function(i){var n=this._sheet;n.batch(function(){n.select().forEachRowIndex(function(e,t){i(n,e,t)})},{layout:true,recalc:true})},includesHiddenColumns:function(e){return this._sheet._grid._columns.includesHidden(e.topLeft.col,e.bottomRight.col)},includesHiddenRows:function(e){return this._sheet._grid._rows.includesHidden(e.topLeft.row,e.bottomRight.row)},selectionIncludesHiddenColumns:function(){return this.includesHiddenColumns(this._sheet.select())},selectionIncludesHiddenRows:function(){return this.includesHiddenRows(this._sheet.select())},deleteSelectedColumns:function(){var n=[],r=0;this.forEachSelectedColumn(function(e,t){t-=r;if(e.isHiddenColumn(t)){return}r++;var i=[];n.unshift({index:t,formulas:i,width:e.columnWidth(t)});e._saveModifiedFormulas(i,function(){e.deleteColumn(t)})});return n},deleteSelectedRows:function(){var n=[],r=0;this.forEachSelectedRow(function(e,t){t-=r;if(e.isHiddenRow(t)){return}r++;var i=[];n.unshift({index:t,formulas:i,height:e.rowHeight(t)});e._saveModifiedFormulas(i,function(){e.deleteRow(t)})});return n},hideSelectedColumns:function(){this.forEachSelectedColumn(function(e,t){e.hideColumn(t)});var e=this._sheet;var t=e.select().toRangeRef();var i=t.topLeft.col;var n=t.bottomRight.col;var r=null;while(true){var a=n<e._columns._count;var o=i>=0;if(!o&&!a){break}if(a&&!e.isHiddenColumn(n)){r=n;break}if(o&&!e.isHiddenColumn(i)){r=i;break}i--;n++}if(r!==null){t=new s.spreadsheet.RangeRef(new s.spreadsheet.CellRef(0,r),new s.spreadsheet.CellRef(e._rows._count-1,r));e.range(t).select()}},hideSelectedRows:function(){this.forEachSelectedRow(function(e,t){e.hideRow(t)});var e=this._sheet;var t=e.select().toRangeRef();var i=t.topLeft.row;var n=t.bottomRight.row;var r=null;while(true){var a=n<e._rows._count;var o=i>=0;if(!o&&!a){break}if(a&&!e.isHiddenRow(n)){r=n;break}if(o&&!e.isHiddenRow(i)){r=i;break}i--;n++}if(r!==null){t=new s.spreadsheet.RangeRef(new s.spreadsheet.CellRef(r,0),new s.spreadsheet.CellRef(r,e._columns._count-1));e.range(t).select()}},unhideSelectedColumns:function(){this.forEachSelectedColumn(function(e,t){e.unhideColumn(t)})},unhideSelectedRows:function(){this.forEachSelectedRow(function(e,t){e.unhideRow(t)})},preventAddRow:function(){var e=this._sheet.select().toRangeRef();var t=e.height();return this._sheet.preventInsertRow(0,t)},preventAddRowAfterLast:function(){var e=this._sheet.select().toRangeRef();var t=e.height();return this._sheet.preventInsertBelowLastRow(e.bottomRight.row,t)},preventAddColumn:function(){var e=this._sheet.select().toRangeRef();var t=e.width();return this._sheet.preventInsertColumn(0,t)},preventAddColumnAfterLast:function(){var e=this._sheet.select().toRangeRef();var t=e.width();return this._sheet.preventInsertAfterLastColumn(e.bottomRight.col,t)},addColumnLeft:function(){var t=this._sheet;var i,n=0;t.batch(function(){t.select().forEachColumnIndex(function(e){if(!i){i=e}t.insertColumn(i);++n})},{recalc:true,layout:true});return{base:i,count:n}},addColumnRight:function(){var t=this._sheet;var i,n=0;t.batch(function(){t.select().forEachColumnIndex(function(e){i=e+1;++n});for(var e=0;e<n;++e){t.insertColumn(i)}},{recalc:true,layout:true});return{base:i,count:n}},addRowAbove:function(){var t=this._sheet;var i,n=0;var r=t._grid.rowCount;var a=t.select();var o=a.bottomRight.row-a.topLeft.row+1;t.batch(function(){a.forEachRowIndex(function(e){if(!i){i=e}if(a.bottomRight.row+o<r){t.insertRow(i)}++n})},{recalc:true,layout:true});return{base:i,count:n}},addRowBelow:function(){var t=this._sheet;var i,n=0;var r=t._grid.rowCount;t.batch(function(){t.select().forEachRowIndex(function(e){i=e+1;++n});if(i+n<r){for(var e=0;e<n;++e){t.insertRow(i)}}},{recalc:true,layout:true});return{base:i,count:n}}});s.spreadsheet.AxisManager=e})(kendo)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/clipboard",["kendo.core"],e)})(function(){(function(_){var f=_.jQuery;var b=_.spreadsheet.CellRef;var e=_.Class.extend({init:function(e){this._content={};this._externalContent={};this._internalContent={};this.workbook=e;this.origin=_.spreadsheet.NULLREF;this.iframe=document.createElement("iframe");this.iframe.className="k-spreadsheet-clipboard-paste";this.iframe.setAttribute("title","Spreadsheet clipboard iframe");this.menuInvoked=false;this._uid=_.guid();document.body.appendChild(this.iframe)},destroy:function(){document.body.removeChild(this.iframe)},canCopy:function(){var e={canCopy:true};var t=this.workbook.activeSheet().select();if(t===_.spreadsheet.NULLREF){e.canCopy=false}if(t instanceof _.spreadsheet.UnionRef){e.canCopy=false;e.multiSelection=true}if(this.menuInvoked){e.canCopy=false;e.menuInvoked=true}return e},canPaste:function(){var e=this.workbook.activeSheet();var t=this.pasteRef();var i=e.range(t);var n={canPaste:true,pasteOnMerged:false,pasteOnDisabled:false};if(!i.enable()){n.canPaste=false;n.pasteOnDisabled=true}if(!t.eq(e.unionWithMerged(t))){n.canPaste=false;n.pasteOnMerged=true}if(this.menuInvoked){n.canPaste=false;n.menuInvoked=true}if(t.bottomRight.row>=e._rows._count||t.bottomRight.col>=e._columns._count){n.canPaste=false;n.overflow=true}return n},intersectsMerged:function(){var e=this.workbook.activeSheet();this.parse();this.origin=this._content.origRef;var t=this.pasteRef();return!t.eq(e.unionWithMerged(t))},copy:function(){var e=this.workbook.activeSheet();this.origin=e.select();this._internalContent=e.selection().getState();this.contents=e.selection().getState();delete this._externalContent.html;delete this._externalContent.plain},cut:function(){var e=this.workbook.activeSheet();this.copy();e.range(e.select()).clear()},pasteRef:function(){var e=this.workbook.activeSheet();if(this.origin===_.spreadsheet.NULLREF){return e.select()}var t=e.activeCell().first();var i=this.origin.first();var n=i.row-t.row;var r=i.col-t.col;return this.origin.relative(n,r,3)},_comparerValidation:function(e,t){if(e==null||e==undefined)return true;if(t==null||t==undefined)return false;var i=[];var n=e.from;var r=e.to;var a=true;if(e.from){if(e.dataType==="list"){i=e.from.value.data[0];n=e.from.value.data[0][0];r=e.from.value.data[0][e.from.value.data[0].length-1]}if(e.dataType==="date"){n=e.from.value;r=e.to.value;a=false;t=_.spreadsheet.dateToNumber(new Date(t))}}if(a==true){var o=String(t);if(o&&o.charAt(0)=="-"){t=Number(t)?Number(t):t}}switch(e.comparerType){case"greaterThan":return t>n;break;case"lessThan":return t<n;break;case"between":return t>=n&&t<=r;break;case"equalTo":return t==n;break;case"notEqualTo":return t!=n;break;case"greaterThanOrEqualTo":return t>=n;break;case"lessThanOrEqualTo":return t<=n;break;case"notBetween":return t<n||t>r;break;case"custom":return n;break;case"list":return i.indexOf(t)>-1;break;default:return true}},paste:function(){var e={};var t=this.workbook.activeSheet();var i=true;if(this._isInternal()){i=true;e=this.contents}else{i=false;e=this.parse(this._external);this.origin=getSourceRef(e)}var n=this.pasteRef();var r={};f.extend(true,r,e);var a=n.topLeft.row;var o=n.topLeft.col;var s={};var l;var d={};for(var u=0;u<r.data.length;u++){for(var c=0;c<r.data[u].length;c++){s=r.data[u][c];l=t._grid.index(a+u,o+c);d=t._validation(a+u,o+c);if(i==false){s.borderBottom=null;s.borderLeft=null;s.borderRight=null;s.borderTop=null;s["validation"]=d;if(s["value"]){if(!this._comparerValidation(d,s["value"])){s["value"]=t._value(a+u,o+c)}}continue}if(d==null||d["dataType"]==undefined||s["validation"]==undefined||s["validation"]["dataType"]==undefined){continue}if(d["dataType"]!=s["validation"]["dataType"]){s["validation"]=d;s["format"]=t._properties.get("format",l);s["formula"]=t._properties.get("formula",l);s["value"]=t._value(a+u,o+c)}else{s["validation"]=d;if(s["value"]){if(!this._comparerValidation(d,s["value"])){s["value"]=t._value(a+u,o+c)}}}}}t.range(n).setState(r,this);t.triggerChange({recalc:true,ref:n})},external:function(e){if(e&&(e.html||e.plain)){this._externalContent=e}else{return this._externalContent}},isExternal:function(){return!this._isInternal()},parse:function(){var e=w();if(this._isInternal()){e=this._internalContent}else{var t=this._externalContent;if(t.html){var i=this.iframe.contentWindow.document;i.open();i.write(t.html);i.close();var n=i.querySelector("table");if(n){e=r(n)}else{e=a(t.plain)}}else{e=a(t.plain)}this.origin=e.origRef}this._content=e},_isInternal:function(){if(this._externalContent.html===undefined){return true}var e=f("<div/>").html(this._externalContent.html).find("table.kendo-clipboard-"+this._uid).length?true:false;var t=f("<div/>").html(this._externalContent.plain).find("table.kendo-clipboard-"+this._uid).length?true:false;return e||t}});_.spreadsheet.Clipboard=e;function w(){var e=new b(0,0,0);return{ref:e,mergedCells:[],data:[],foreign:true,origRef:e.toRangeRef()}}function k(e,t,i,n){var r=e.data||(e.data=[]);if(!r[t]){r[t]=[]}r[t][i]=n;var a=e.origRef.bottomRight;a.row=Math.max(a.row,t);a.col=Math.max(a.col,i)}function d(e){return e.replace(/^-(?:ms|moz|webkit)-/,"")}function u(t){var i={};["borderBottom","borderRight","borderLeft","borderTop"].forEach(function(e){i[e]=t[e+"Style"]=="none"?null:{size:1,color:t[e+"Color"]}});return i}function y(e,t,i,n,r){var a=window.getComputedStyle(i);var o=i.innerText.replace(/\t$/,"");var s=u(a);var l={value:o===""?null:o,borderTop:s.borderTop||n.get(e,t)||null,borderBottom:s.borderBottom||n.get(e+1,t)||null,borderLeft:s.borderLeft||r.get(e,t)||null,borderRight:s.borderRight||r.get(e,t+1)||null,fontSize:parseInt(a["font-size"],10)};n.set(e,t,l.borderTop);n.set(e+1,t,l.borderBottom);r.set(e,t,l.borderLeft);r.set(e,t+1,l.borderRight);if(a["background-color"]!=="rgb(0, 0, 0)"&&a["background-color"]!=="rgba(0, 0, 0, 0)"){l.background=a["background-color"]}if(a.color!=="rgb(0, 0, 0)"&&a.color!=="rgba(0, 0, 0, 0)"){l.color=a.color}if(a["text-decoration"]=="underline"){l.underline=true}if(a["font-style"]=="italic"){l.italic=true}if(a["font-weight"]=="bold"){l.bold=true}if(d(a["text-align"])!=="right"){l.textAlign=d(a["text-align"])}if(a["vertical-align"]!=="middle"){l.verticalAlign=a["vertical-align"]}if(a["word-wrap"]!=="normal"){l.wrap=true}return l}function r(e){var t=w();var i=[],n=0,r=0;for(var a=0;a<e.rows.length;++a){i.push([])}var o=new _.spreadsheet.calc.runtime.Matrix;var s=new _.spreadsheet.calc.runtime.Matrix;for(var l=0;l<e.rows.length;++l,++n){var d=e.rows[l];r=0;for(var u=0;u<d.cells.length;++u){var c=d.cells[u];var f=c.rowSpan;var h=c.colSpan;while(i[n][r]){r++}var p=c.getAttribute("style");var v=/mso-ignore:colspan/.test(p);k(t,n,r,y(n,r,c,o,s));if(f>1||h>1&&!v){t.mergedCells.push(new _.spreadsheet.RangeRef(new b(n,r),new b(n+f-1,r+h-1)).toString())}for(var m=n+f;--m>=n;){for(var g=r+h;--g>=r;){if(m<i.length){i[m][g]=true;if(!(m==n&&g==r)){k(t,m,g,{})}}}}}}return t}function a(e){var t=w();if(e.indexOf("\t")===-1&&e.indexOf("\n")==-1){k(t,0,0,{value:e})}else{var i=e.split("\n");for(var n=0;n<i.length;n++){var r=i[n].split("\t");for(var a=0;a<r.length;a++){k(t,n,a,{value:r[a]})}}}return t}})(kendo)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/range",["kendo.core","util/text-metrics","util/main"],e)})(function(){(function(h){var d=h.jQuery;var p=h.spreadsheet.UnionRef;var f=h.spreadsheet.CellRef;var c=h.spreadsheet.RangeRef;var r=["color","fontFamily","underline","italic","bold","textAlign","indent","verticalAlign","background","format","link","editor","borderTop","borderRight","borderBottom","borderLeft","comment","html"];var i=h.Class.extend({init:function(e,t){this._sheet=t;this._ref=e},clone:function(){return new i(this._ref.clone(),this._sheet)},skipHiddenCells:function(){var s=[];var l=this,e=l._sheet;var d=e.isHiddenRow.bind(e);var u=e.isHiddenColumn.bind(e);l._ref.forEach(function(e){e=l._normalize(e.toRangeRef());var t=e.topLeft,i=e.bottomRight;var n=v(t.row,i.row,d);var r=v(t.col,i.col,u);for(var a=0;a<n.length;++a){for(var o=0;o<r.length;++o){s.push(new c(new f(n[a].begin,r[o].begin),new f(n[a].end,r[o].end)))}}});return e.range(s.length>1?new p(s):s[0])},_normalize:function(e){return this._sheet._grid.normalize(e)},_set:function(r,a,e){var t=this;var o=t._sheet;t._ref.forEach(function(e){var t=e;var i=r==="value"||r==="formula"||r==="link";if(i&&e.topLeft){var n=new f(e.topLeft.row,e.topLeft.col);o.forEachMergedCell(function(e){if(e.intersects(n)){t=n}})}o._set(t.toRangeRef(),r,a)});if(!e){o.triggerChange({recalc:r=="formula"||r=="value"||r=="validation",value:a,range:t,ref:t._ref})}return t},_get:function(e){return this._sheet._get(this._ref.toRangeRef(),e)},_property:function(e,t){if(t===undefined){return this._get(e)}else{return this._set(e,t)}},value:function(e){if(e!==undefined){this._set("formula",null,true)}return this._property("value",e)},html:function(e){return this._property("html",e)},resize:function(e){var t=this._resizedRef(e);return new i(t,this._sheet)},_resizedRef:function(t){return this._ref.map(function(e){return e.toRangeRef().resize(t)})},input:function(i,n){n=d.extend({arrayFormula:false},n);var r=this._get("format"),a;if(i!==undefined){var e=this._ref.toRangeRef().topLeft;a=h.spreadsheet.calc.parse(this._sheet.name(),e.row,e.col,i,r);this._sheet.batch(function(){var e=null;if(a.type=="exp"){e=h.spreadsheet.calc.compile(a)}else if(r!="@"){var t=r&&h.spreadsheet.formatting.type(a.value,r);if(a.type=="date"&&t!="date"){this.format(a.format||u(h.culture().calendar.patterns.d))}else if(a.type=="percent"&&t!="percent"){this.format(a.value*100==(a.value*100|0)?"0%":"0.00%")}else if(a.format){if(!r||a.currency||t=="number"&&a.type=="number"&&a.format.length>r.length){this.format(a.format)}}}else if(a.type!="string"){a.value=i}this.formula(e,n.arrayFormula);if(!e){this.value(a.value)}}.bind(this),{recalc:true,value:i,ref:this._ref,editorChange:this._sheet.isInEditMode()});return this}else{i=this._get("value");var t=this._get("formula");var o=r&&!t&&h.spreadsheet.formatting.type(i,r);if(t){i="="+t}else e:{if(r&&o=="date"){var s=h.spreadsheet.formatting.text(i,r);a=h.spreadsheet.calc.parse(null,null,null,s,r);var l=h.spreadsheet.formatting.text(a.value,r);if(s==l){i=s;break e}}if(o==="date"){i=h.toString(h.spreadsheet.numberToDate(i),h.culture().calendar.patterns.d)}else if(o==="percent"){i=h.spreadsheet.calc.runtime.limitPrecision(i*100)+"%"}else if(typeof i=="string"&&(/^[=']/.test(i)||/^(?:true|false)$/i.test(i)||m(i))){i="'"+i}else if(this._sheet._useCultureDecimals()&&typeof i=="number"&&i!=Math.floor(i)){i=String(i).replace(".",h.culture().numberFormat["."])}}return i}},enable:function(e){if(e===undefined){return!h.util.withExit(function(n){this._sheet.forEach(this._ref,function(e,t,i){if(i.enable===false){n(true)}})},this)}return this._property("enable",e)},formula:function(e,t){var i=this;if(e===undefined){var n=i._get("formula");return n?""+n:null}if(t){var r=this._ref.toRangeRef();e=i._sheet.range(r.topLeft)._set("formula",e)._get("formula");if(e){e.setArrayFormulaRange(r)}}else{i._set("formula",e)}return i},intersectingArrayFormula:function(){var n=this._ref.clone().simplify().setSheet(this._sheet.name());return h.util.withExit(function(i){this._sheet._forFormulas(function(e){var t=e.arrayFormulaRange;if(t&&(t=n.intersect(t))!==h.spreadsheet.NULLREF){i({formula:e,intersection:t})}})},this)},canEditArrayFormula:function(){var e=this.intersectingArrayFormula();if(e){return e.formula.arrayFormulaRange.eq(e.intersection)}return true},validation:function(e){if(e===undefined){var t=this._get("validation");return t?t.toJSON():null}return this._property("validation",e)},_getValidationState:function(){var e=this._ref.toRangeRef();var t=e.topLeft.row;var i=e.topLeft.col;var n=e.bottomRight.row;var r=e.bottomRight.col;var a,o;for(a=i;a<=r;a++){for(o=t;o<=n;o++){var s=this._sheet._validation(o,a);if(s&&s.type==="reject"&&s.value===false){return s}}}return false},_getValidation:function(){var e=this._ref.toRangeRef();var t=e.topLeft.row;var i=e.topLeft.col;var n=e.bottomRight.row;var r=e.bottomRight.col;var a,o;for(a=i;a<=r;a++){for(o=t;o<=n;o++){var s=this._sheet._validation(o,a);return s}}return false},merge:function(){this._ref=this._sheet._merge(this._ref);return this},unmerge:function(){var t=this._sheet._mergedCells;this._ref.forEach(function(e){e.toRangeRef().intersecting(t).forEach(function(e){t.splice(t.indexOf(e),1)})});this._sheet.triggerChange({});return this},select:function(){this._sheet.select(this._ref);return this},values:function(e){if(this._ref instanceof p){throw new Error("Unsupported for multiple ranges.")}if(this._ref===h.spreadsheet.NULLREF){if(e!==undefined){throw new Error("Unsupported for NULLREF.")}else{return[]}}var t=this._ref.toRangeRef();var i=t.topLeft.row;var n=t.topLeft.col;var r=t.bottomRight.row;var a=t.bottomRight.col;var o,s;if(e===undefined){e=new Array(t.height());for(var l=0;l<e.length;l++){e[l]=new Array(t.width())}for(o=n;o<=a;o++){for(s=i;s<=r;s++){e[s-i][o-n]=this._sheet._value(s,o)}}return e}else{this._sheet._set(t,"formula",null);for(o=n;o<=a;o++){for(s=i;s<=r;s++){var d=e[s-i];if(d){var u=d[o-n];if(u!==undefined){this._sheet._value(s,o,u)}}}}this._sheet.triggerChange({recalc:true,ref:t});return this}},_properties:function(r,e){if(this._ref instanceof p){throw new Error("Unsupported for multiple ranges.")}if(this._ref===h.spreadsheet.NULLREF){if(r!==undefined){throw new Error("Unsupported for NULLREF.")}else{return[]}}var i=this._ref.toRangeRef();var a=i.topLeft.row;var o=i.topLeft.col;var t=i.bottomRight.row;var n=i.bottomRight.col;var s,l;var d=this._sheet;if(r===undefined){r=new Array(i.height());d.forEach(i,function(e,t,i){e-=a;t-=o;var n=r[e]||(r[e]=[]);n[t]=i});return r}else{var u;i=i.clone();var c=function(e){var t=u[e];i.topLeft.row=i.bottomRight.row=l;i.topLeft.col=i.bottomRight.col=s;if(e=="value"){d._set(i,"formula",null)}d._set(i,e,t)};for(s=o;s<=n;s++){if(!e&&d.isHiddenColumn(s)){continue}for(l=a;l<=t;l++){if(!e&&d.isHiddenRow(l)){continue}if(e&&d.isFilteredRow(l)){continue}var f=r[l-a];if(f){u=f[s-o];if(u){Object.keys(u).forEach(c)}}}}d.triggerChange({recalc:true,ref:this._ref});return this}},clear:function(t){t=t||{};var e=t.clearAll||!Object.keys(t).length;var i=this._sheet;var n={recalc:e||t.contentsOnly,ref:this._ref};i.batch(function(){if(n.recalc){this.formula(null)}if(e){this.validation(null)}if(e||t.formatOnly){r.forEach(function(e){if(!(t.keepBorders&&/^border/i.test(e))){this[e](null)}}.bind(this));this.fontSize(null);this.wrap(null);this.unmerge()}}.bind(this),n);return this},clearContent:function(){return this.clear({contentsOnly:true})},clearFormat:function(){return this.clear({formatOnly:true})},isSortable:function(){return!this.cantSort()},cantSort:function(){if(this._ref instanceof p){return{code:"cantSortMultipleSelection",message:"Unsupported for multiple ranges."}}if(this._ref===h.spreadsheet.NULLREF){return{code:"cantSortNullRef",message:"Unsupported for NULLREF."}}var r=this._sheet._getMergedCells(this._ref.toRangeRef());var a=r.primary;var o=r.secondary;var s=null,l=null;var d={};try{this._sheet.forEach(this,function(e,t){var i=new f(e,t).print();var n=a[i];if(n){if(s===null){s=n.width();l=n.height()}else if(!(s==n.width()&&l==n.height())){throw d}}else if(!o[i]&&r.hasMerged){throw d}})}catch(e){if(e!==d){throw e}return{code:"cantSortMixedCells",message:"Unsupported for range containing cells of different shapes."}}return false},sort:function(e){var t=this.cantSort();if(t){throw new Error(t.message)}if(e===undefined){e={column:0}}e=e instanceof Array?e:[e];this._sheet._sortBy(this._ref.toRangeRef(),e.map(function(e,t){if(typeof e==="number"){e={column:e}}return{index:e.column===undefined?t:e.column,ascending:e.ascending===undefined?true:e.ascending}}));return this},isFilterable:function(){return!(this._ref instanceof p)},filter:function(e){if(this._ref instanceof p){throw new Error("Unsupported for multiple ranges.")}if(e===false){this.clearFilters()}else{e=e===true?[]:e instanceof Array?e:[e];this._sheet._filterBy(this._ref.toRangeRef(),e.map(function(e,t){return{index:e.column===undefined?t:e.column,filter:e.filter}}))}return this},clearFilter:function(e){this._sheet.clearFilter(e)},clearFilters:function(){var e=this._sheet.filter();var t=[];if(e){for(var i=0;i<e.columns.length;i++){t.push(e.columns[i].index)}this._sheet.batch(function(){this.clearFilter(t);this._filter=null},{layout:true,filter:true})}},hasFilter:function(){var e=this._sheet.filter();return!!e},leftColumn:function(){return new i(this._ref.leftColumn(),this._sheet)},rightColumn:function(){return new i(this._ref.rightColumn(),this._sheet)},topRow:function(){return new i(this._ref.topRow(),this._sheet)},bottomRow:function(){return new i(this._ref.bottomRow(),this._sheet)},column:function(e){return new i(this._ref.toColumn(e),this._sheet)},row:function(e){return new i(this._ref.toRow(e),this._sheet)},forEachRow:function(t){this._ref.forEachRow(function(e){t(new i(e,this._sheet))}.bind(this))},forEachColumn:function(t){this._ref.forEachColumn(function(e){t(new i(e,this._sheet))}.bind(this))},sheet:function(){return this._sheet},topLeft:function(){return this._ref.toRangeRef().topLeft},intersectingMerged:function(){var e=this._sheet;var t=[];e._mergedCells.forEach(function(e){if(e.intersects(this._ref)){t.push(e.toString())}}.bind(this));return t},getState:function(e){var o=this._ref.first();var t={ref:o,data:[],origRef:this._ref,rows:this._sheet._rows.getState()};var s;if(!e){s=h.spreadsheet.ALL_PROPERTIES;t.mergedCells=this.intersectingMerged()}else if(e==="input"){s=["value","formula"]}else if(e==="border"){s=["borderLeft","borderTop","borderRight","borderBottom"]}else{s=[e]}var l=t.data;this.forEachCell(function(e,t,i){var n={};var r=e-o.row;var a=t-o.col;if(!l[r]){l[r]=[]}l[r][a]=n;s.forEach(function(e){var t=typeof i[e]=="undefined"?null:i[e];if(t instanceof h.spreadsheet.calc.runtime.Formula||t instanceof h.spreadsheet.validation.Validation){t=t.deepClone()}n[e]=t})});return t},setState:function(l,d){var u=this._sheet;var c=this._ref.first();var t=l.ref.row-c.row;var i=l.ref.col-c.col;var f=d&&!d.isExternal();var h=d&&!f;u.batch(function(){if(l.mergedCells){this.unmerge()}if(!d){this._sheet._rows.setState(l.rows)}var o=c.row;var s=this.hasFilter();l.data.forEach(function(e,r){if(s&&f&&u.isHiddenRow(l.ref.row+r)){return}var a=c.col;e.forEach(function(t,e){if(s&&f&&u.isHiddenColumn(l.ref.col+e)){return}var i=d?u.range(o,a):u.range(c.row+r,c.col+e);if(i.enable()){for(var n in t){if(n!="value"){if(!(d&&n=="enable")){i._set(n,t[n])}}}if(!t.formula){if(h){try{if(t.value==null){i._set("value",null)}else{i.input(t.value)}}catch(e){i._set("value",t.value)}}else{i._set("value",t.value)}}}a++});o++});if(l.mergedCells){l.mergedCells.forEach(function(e){e=u._ref(e).relative(t,i,3);u.range(e).merge()},this)}}.bind(this),{recalc:true,ref:this._ref})},_adjustRowHeight:function(){var e=this;var d=e._sheet;var t=d._getMergedCells(e._ref.toRangeRef());var u=t.primary;var c=t.secondary;d.batch(function(){e.forEachRow(function(e){var t=e._ref.topLeft.row;var l=d.rowHeight(t);e.forEachCell(function(e,t,i){var n=new f(e,t).print();if(c[n]){return}var r=u[n];var a;if(r){a=d._columns.sum(r.topLeft.col,r.bottomRight.col)}else{a=d.columnWidth(t)}var o=i.value;if(i.format&&o!=null){o=h.spreadsheet.formatting.format(o,i.format)}var s=h.spreadsheet.util.getTextHeight(o,a,i.fontFamily,i.fontSize,i.wrap);l=Math.max(l,s)});d.rowHeight(t,l)})},{layout:true})},forEachCell:function(t){this._ref.forEach(function(e){this._sheet.forEach(e.toRangeRef(),t.bind(this))}.bind(this))},hasValue:function(){var o=this._sheet._defaultCellStyle;return h.util.withExit(function(a){this.forEachCell(function(e,t,i){for(var n in i){var r=i[n];if(r!==undefined&&r!==null&&r!==o[n]){a(true)}}})},this)},wrap:function(e){if(e===undefined){return!!this._property("wrap")}this._property("wrap",e);if(e!==null){this._adjustRowHeight()}return this},fontSize:function(e){if(e===undefined){return this._property("fontSize")}this._property("fontSize",e);if(e!==null){this._adjustRowHeight()}return this},draw:function(e,t){this._sheet.draw(this,e,t)},insideBorders:function(e){return this.insideVerticalBorders(e).insideHorizontalBorders(e)},insideVerticalBorders:function(t){this._ref.forEach(function(e){if(e instanceof c&&e.width()>1){e=e.clone();e.topLeft.col++;this._sheet.range(e)._set("vBorders",t)}},this);return this},insideHorizontalBorders:function(t){this._ref.forEach(function(e){if(e instanceof c&&e.height()>1){e=e.clone();e.topLeft.row++;this._sheet.range(e)._set("hBorders",t)}},this);return this}});function v(e,t,i){while(e<=t&&i(e)){e++}if(e>t){return[]}for(var n=e+1;n<=t;++n){if(i(n)){return[{begin:e,end:n-1}].concat(v(n+1,t,i))}}return[{begin:e,end:t}]}d.each(r,function(e,t){i.prototype[t]=function(e){return this._property(t,e)}});function u(e){return e.replace(/M/g,"m").replace(/'/g,'"').replace(/tt/,"am/pm")}function m(e){return!/^=/.test(e)&&/number|percent/.test(h.spreadsheet.calc.parse(null,0,0,e).type)}var o=d('<div style="position: absolute !important; top: -4000px !important; height: auto !important;'+"padding: 1px 3px !important; box-sizing: border-box; margin: 0 !important; border: 1px solid black !important;"+"line-height: normal !important; visibility: hidden !important;"+'white-space: pre-wrap;"></div>')[0];function e(e,t,i,n,r){var a={baselineMarkerSize:0,width:r===true?t+"px":"auto","font-size":(n||12)+"px","font-family":i||"Arial","white-space":r===true?"pre-wrap":"pre","overflow-wrap":r===true?"break-word":"normal","word-wrap":r===true?"break-word":"normal"};return h.util.measureText(e,a,{box:o,normalizeText:false}).height}h.spreadsheet.util={getTextHeight:e};h.spreadsheet.Range=i})(window.kendo)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/runtime",["spreadsheet/references"],e)})(function(){"use strict";var e={};var a=kendo.spreadsheet;a.calc=e;var t=e.runtime={};var i=kendo.Class;var l=a.Ref;var n=a.CellRef;var d=a.RangeRef;var r=a.UnionRef;var p=a.NULLREF;function m(e){if(e instanceof m){return e}this.code=e}m.prototype.toString=function(){return"#"+this.code+(this.code=="NAME"?"?":"!")};var o=i.extend({init:function e(t,i,n,r){this.callback=t;this.formula=i;this.ss=n;this.parent=r},resolve:function(e){var t=this;if(e instanceof l){t.resolveCells([e],function(){t._resolve(e)})}else{t._resolve(e)}},error:function(e){return new m(e)},_resolve:function(e){if(e===undefined){e=null}else if(Array.isArray(e)){e=this.asMatrix(e)}else{e=L(e)}var t=this.formula;if(t.arrayFormulaRange){e=this.asMatrix(e)||this.asMatrix([[e]])}else if(e instanceof d){e=this._arrayArg(e)}t.value=e;if(this.ss.onFormula(t)&&this.callback){this.callback.call(t,e)}},resolveCells:function(e,t){var r=this,n=[];(function e(t){for(var i=0;i<t.length;++i){var n=t[i];if(n instanceof l){s(r.getRefCells(n))}if(Array.isArray(n)){e(n)}}})(e);if(!n.length){return t.call(r)}for(var i=n.length,a=0;a<n.length;++a){o(n[a])}function o(e){e.exec(r.ss,function(){if(!--i){t.call(r)}},r)}function s(e){for(var t=0;t<e.length;++t){var i=e[t];if(i.formula){n.push(i.formula)}}return true}},cellValues:function(e,t){var i=[];for(var n=0;n<e.length;++n){var r=e[n];if(r instanceof l){r=this.getRefData(r,t);i=i.concat(r)}else if(Array.isArray(r)){i=i.concat(this.cellValues(r,t))}else if(r instanceof h){i=i.concat(this.cellValues(r.data,t))}else{i.push(r)}}return i},fetchName:function(e,t){var i=this.formula;var n=this.ss.nameValue(e,i.sheet,i.row,i.col);if(n instanceof v){n=n.clone(i.sheet,i.row,i.col,true);var r=new a.ValidationFormulaContext(this.ss.workbook);n.exec(r,t,this)}else{if(n instanceof l){n=n.absolute(i.row,i.col);if(!n.sheet){n.sheet=i.sheet}}t(n==null?new m("NAME"):n)}},force:function(e){if(e instanceof l){return this.getRefData(e)}return e},func:function(e,t,i){e=e.toLowerCase();var n=s[e];if(n){return n.call(this,t,i)}t(new m("NAME"))},bool:function(e){if(e instanceof l){e=this.getRefData(e)}if(typeof e=="string"){return e.toLowerCase()=="true"}if(typeof e=="number"){return e!==0}if(typeof e=="boolean"){return e}return e!=null},_arrayArg:function(e){var t=this.formula;if(!t.arrayFormulaRange&&e instanceof d){if(e.height()==1&&t.col>=e.topLeft.col&&t.col<=e.bottomRight.col){return this.getRefData(new n(e.topLeft.row,t.col).setSheet(e.sheet))}if(e.width()==1&&t.row>=e.topLeft.row&&t.row<=e.bottomRight.row){return this.getRefData(new n(t.row,e.topLeft.col).setSheet(e.sheet))}return new m("VALUE")}else{return this.asMatrix(e)}},asMatrix:function(e){if(e instanceof h){return e}var r=this;if(e instanceof d){var t=e.topLeft;var i=t.row,n=t.col;var a=r.getRefCells(e);var o=new h(r);if(isFinite(e.width())){o.width=e.width()}if(isFinite(e.height())){o.height=e.height()}if(!isFinite(i)){i=0}if(!isFinite(n)){n=0}a.forEach(function(e){o.set(e.row-i,e.col-n,e.value)});return o}if(Array.isArray(e)&&e.length>0){var o=new h(r),s=0;e.forEach(function(e){var n=0;var i=1;e.forEach(function(e){var t=e instanceof d;if(e instanceof l&&!t){e=r.getRefData(e)}if(t||Array.isArray(e)){e=r.asMatrix(e)}if(e instanceof h){e.each(function(e,t,i){o.set(s+t,n+i,e)});i=Math.max(i,e.height);n+=e.width}else{if(typeof e==="string"&&e.length&&!isNaN(e)){e=Number(e)}o.set(s,n++,e)}});s+=i});return o}},getRefCells:function(e,t,i){var n=this.formula;return this.ss.getRefCells(e,t,n.sheet,n.row,n.col,i)},getRefData:function(e,t){var i=this.formula;return this.ss.getData(e,i.sheet,i.row,i.col,t)},workbook:function(){return this.ss.workbook}});var h=i.extend({init:function e(t){this.context=t;this.height=0;this.width=0;this.data=[]},clone:function(){var e=new h(this.context);e.height=this.height;e.width=this.width;e.data=this.data.map(function(e){return e.slice()});return e},get:function(e,t){var i=this.data[e];var n=i?i[t]:null;return n instanceof l?this.context.getRefData(n):n},getNA:function(e,t){if(e<this.height&&t<this.width){return this.get(e,t)}return new m("N/A")},set:function(e,t,i){var n=this.data[e];if(n==null){n=this.data[e]=[]}n[t]=i;if(e>=this.height){this.height=e+1}if(t>=this.width){this.width=t+1}},each:function(e,t){for(var i=0;i<this.height;++i){for(var n=0;n<this.width;++n){var r=this.get(i,n);if(t||r!=null){r=e.call(this.context,r,i,n);if(r!==undefined){return r}}}}},map:function(n,e){var r=new h(this.context);this.each(function(e,t,i){r.set(t,i,n.call(this,e,t,i))},e);return r},eachRow:function(e){for(var t=0;t<this.height;++t){var i=e.call(this.context,t);if(i!==undefined){return i}}},eachCol:function(e){for(var t=0;t<this.width;++t){var i=e.call(this.context,t);if(i!==undefined){return i}}},mapRow:function(t){var i=new h(this.context);this.eachRow(function(e){i.set(e,0,t.call(this.context,e))});return i},mapCol:function(t){var i=new h(this.context);this.eachCol(function(e){i.set(0,e,t.call(this.context,e))});return i},toString:function(){return JSON.stringify(this.data)},transpose:function(){var n=new h(this.context);this.each(function(e,t,i){n.set(i,t,e)});return n},unit:function(e){this.width=this.height=e;var t=this.data=new Array(e);for(var i=e;--i>=0;){var n=t[i]=new Array(e);for(var r=e;--r>=0;){n[r]=i==r?1:0}}return this},multiply:function(e){var t=this,i=new h(t.context);for(var n=0;n<t.height;++n){for(var r=0;r<e.width;++r){var a=0;for(var o=0;o<t.width;++o){var s=t.get(n,o);var l=e.get(o,r);if(typeof s!="number"||typeof l!="number"){throw new m("VALUE")}a+=s*l}i.set(n,r,a)}}return i},adds:function(e,t){var i=this,n=new h(i.context);var r=t?-1:1;for(var a=0;a<i.height;++a){for(var o=0;o<i.width;++o){var s=i.get(a,o),l=e.get(a,o);n.set(a,o,s+r*l)}}return n},determinant:function(){var e=this.clone().data;var t=e.length;var i=1,n,r,a,o;for(n=0;n<t;n++){for(r=n;r<t&&!e[r][n];r++){}if(r==t){return 0}if(r!=n){i=-i;for(o=n;o<t;o++){var s=e[n][o];e[n][o]=e[r][o];e[r][o]=s}}for(a=n+1;a<t;a++){for(o=n+1;o<t;o++){e[a][o]-=e[n][o]*e[a][n]/e[n][n]}}i*=e[n][n]}return i},inverse:function(){var e=this.width;var t=this.augment(new h(this.context).unit(e));var i=t.data;var n;for(var r=0;r<e;++r){var a=B(r,e,function(e){return i[e][r]});if(!i[a][r]){return null}if(r!=a){n=i[r];i[r]=i[a];i[a]=n}for(var o=r+1;o<e;++o){for(var s=r+1;s<2*e;++s){i[o][s]-=i[r][s]*i[o][r]/i[r][r]}i[o][r]=0}}for(var o=0;o<e;++o){for(var l=i[o][o],s=0;s<2*e;++s){i[o][s]/=l}}for(var r=e;--r>=0;){for(var o=r;--o>=0;){if(i[o][r]){for(var s=2*e;--s>=e;){i[o][s]-=i[r][s]*i[o][r]}}}}return t.slice(0,e,e,e)},augment:function(e){var n=this.clone(),r=n.width;e.each(function(e,t,i){n.set(t,i+r,e)});return n},slice:function(e,t,i,n){var r=new h(this.context);for(var a=0;a<i;++a){for(var o=0;o<n;++o){r.set(a,o,this.get(e+a,t+o))}}return r}});function B(e,t,i){var n=i(e),r=e;while(++e<t){var a=i(e);if(a>n){n=a;r=e}}return r}var v=i.extend({init:function e(t,i,n,r,a,o,s){this.refs=t;this.handler=i;this.print=n;this.absrefs=null;this.sheet=r;this.row=a;this.col=o;this.onReady=[];this.pending=false;this.arrayFormulaRange=s},setArrayFormulaRange:function(e){this.arrayFormulaRange=e.clone().setSheet(this.sheet)},clone:function(t,e,i,n){var r=t.toLowerCase();var a=this.refs;var o=this.arrayFormulaRange;if(n||r!=this.sheet.toLowerCase()){a=a.map(function(e){if(!e.hasSheet()&&(!e.sheet||e.sheet.toLowerCase()!=r)){e=e.clone().setSheet(t)}return e});if(o){o=o.clone().setSheet(t)}}return new v(a,this.handler,this.print,t,e,i,o)},deepClone:function(){var e=this.refs.map(function(e){return e.clone()});return new v(e,this.handler,this.print,this.sheet,this.row,this.col,this.arrayFormulaRange)},resolve:function(t){this.pending=false;this.onReady.forEach(function(e){e(t)})},exec:function(e,t,i){if("value"in this){if(t){t(this.value)}}else{if(t){this.onReady.push(t)}var n=new o(this.resolve,this,e,i);var r=0;while(i){if(i.formula===this){this.pending=false;n.resolve(new m("CIRCULAR"));return}i=i.parent;++r}if(this.pending){return}this.pending=true;var a=function(){if(!this.absrefs){this.absrefs=this.refs.map(function(e){return e.absolute(this.row,this.col)},this)}this.handler.call(n)}.bind(this);if(r<20){a()}else{setTimeout(a,0)}}},reset:function(){this.onReady=[];this.pending=false;delete this.value},renameSheet:function(t,i){t=t.toLowerCase();this.absrefs=null;if(this.sheet.toLowerCase()==t){this.sheet=i}this.refs.forEach(function(e){e.renameSheet(t,i)})},adjust:function(t,i,n,r){t=t.toLowerCase();var a=this.row;var o=this.col;var e=this.sheet.toLowerCase();var s=false;if(e==t){if(i=="row"&&a>=n){this.row+=r;s=true}if(i=="col"&&o>=n){this.col+=r;s=true}}var l=this.row;var d=this.col;this.absrefs=null;var u=this.refs;var c=s;this.refs=u.map(function(e){var t=h(e);if(!c&&!g(t,e)){c=true}return t});var f=this.arrayFormulaRange;if(f){this.arrayFormulaRange=h(f);if(!c&&!g(f,this.arrayFormulaRange)){c=true}}if(c){return new v(u,this.handler,this.print,this.sheet,a,o,f)}function h(e){if(e===p){return e}if(e.sheet.toLowerCase()!=t){if(s){if(i=="row"&&a>=n){e=e.relative(r,0)}if(i=="col"&&o>=n){e=e.relative(0,r)}}return e}return e.adjust(a,o,l,d,i=="row",n,r)}},toString:function(){return this.print(this.row,this.col)}});function g(e,t){if(e.constructor!==t.constructor){return false}if(e instanceof n){return e.sheet==t.sheet&&e.row==t.row&&e.col==t.col&&e.rel==t.rel}if(e instanceof d){return g(e.topLeft,t.topLeft)&&g(e.bottomRight,t.bottomRight)&&e.endSheet==t.endSheet}if(e instanceof r){var i=e.refs.length;if(i!=t.refs.length){return false}while(--i>=0){if(!g(e.refs[i],t.refs[i])){return false}}}return true}var s=Object.create(null);s["if"]=function(t,e){var s=this;var i=e[0],n=e[1],r=e[2];this.resolveCells([i],function(){var e=s.asMatrix(i);if(e){n(function(o){r(function(n){var r=s.asMatrix(o);var a=s.asMatrix(n);t(e.map(function(e,t,i){if(e instanceof m){return e}else if(s.bool(e)){return r?r.get(t,i):o}else{return a?a.get(t,i):n}}))})})}else{i=this.force(i);if(i instanceof m){t(i)}else if(s.bool(i)){n(t)}else{r(t)}}})};s[""]=function(e){e((1+Math.sqrt(5))/2)};function u(e,t){var o="function arrayArgs(args) { var xargs = [], width = 0, height = 0, arrays = [], i = 0; ";var s="function resolve(args, callback) { var toResolve = [], i = 0; ";var l,n,i="'use strict'; function check(args) { var stack = [], tmp, xargs = [], i = 0, m, err = 'VALUE'; ",r=false;var d=false,u=false;i+=t.map(c).join("");i+="if (i < args.length) return new CalcError('N/A'); ";i+="return xargs; } ";o+="return { args: xargs, width: width, height: height, arrays: arrays }; } ";var a;if(r){s+="this.resolveCells(toResolve, callback); } ";a=new Function("CalcError","round",i+s+o+" return { resolve: resolve, check: check, arrayArgs: arrayArgs };")}else{a=new Function("CalcError","round",i+" return { check: check };")}a=a(m,_);if(!u){delete a.arrayArgs}return a;function c(e){l=e[0];var t="{ ";if(Array.isArray(l)){o+="while (i < args.length) { ";s+="while (i < args.length) { ";t+="xargs.push(tmp = []); stack.push(xargs); xargs = tmp; ";t+="while (i < args.length) { ";t+=e.map(c).join("");t+="} ";t+="xargs = stack.pop(); ";s+="} ";o+="} "}else if(l=="+"){o+="while (i < args.length) { ";s+="while (i < args.length) { ";t+="if (i >= args.length) return new CalcError('N/A'); ";t+="xargs.push(tmp = []); stack.push(xargs); xargs = tmp; ";t+="do { ";t+=e.slice(1).map(c).join("");t+="} while (i < args.length); ";t+="xargs = stack.pop(); ";s+="} ";o+="} "}else if(l=="?"){t+="if (!("+v(e[1])+")) return new CalcError(err); "}else{var i=e[1];if(Array.isArray(i)&&/^#?collect/.test(i[0])){var n=/!$/.test(i[0]);var r=i[2];f();t+="try {"+"var $"+l+" = this.cellValues(args.slice(i";if(r){t+=", i + "+r}t+=")"+(n?",true":"")+").reduce(function(ret, $"+l+"){ ";if(i[0].charAt(0)!="#"){t+="if ($"+l+" instanceof CalcError) throw $"+l+"; "}t+="if ("+v(i[1])+") ret.push($"+l+"); ";t+="return ret; ";t+="}.bind(this), []); ";if(r){t+="i += "+r+"; "}else{t+="i = args.length; "}t+="xargs.push($"+l+")"+"} catch(ex) { if (ex instanceof CalcError) return ex; throw ex; } ";s+="toResolve.push(args.slice(i)); "}else if(i=="rest"){t+="xargs.push(args.slice(i)); i = args.length; "}else{if(d=/^\*/.test(l)){u=true;l=l.substr(1)}t+="var $"+l+" = args[i++]; ";var a=false;if(/!$/.test(i)){i=i.substr(0,i.length-1);a=true}else{t+="if ($"+l+" instanceof CalcError) return $"+l+"; "}t+=p(i,a)+"xargs.push($"+l+"); "}}t+="} ";return t}function f(){if(n){return"$"+l+""}r=true;n=true;s+="toResolve.push(args[i++]); ";return"($"+l+" = this.force($"+l+"))"}function h(e){return"("+(e?"(typeof "+f()+" == 'number' ? ($"+l+" = round($"+l+"), true) : false) || ":"(typeof "+f()+" == 'number') || ")+"(typeof $"+l+" == 'boolean' ? ($"+l+" = +$"+l+", true) : false) || "+"(typeof $"+l+" == 'string' && !/^(?:=|true|false)/i.test($"+l+") ? ("+"tmp = kendo.spreadsheet.calc.parse(0, 0, 0, $"+l+"), "+"/^date|number|percent$/.test(tmp.type) ? ($"+l+" = +tmp.value, true) : false"+") : false)"+")"}function p(e,t){n=false;var i="if (!("+v(e)+")) { ";if(n&&!t){i+=" if ($"+l+" instanceof CalcError) return $"+l+"; "}i+="return new CalcError(err); } ";if(!n){s+="i++; "}if(d){o+="var $"+l+" = this._arrayArg(args[i]); "+"if ($"+l+") { "+"xargs.push($"+l+"); "+"width = Math.max(width, $"+l+".width); "+"height = Math.max(height, $"+l+".height); "+"arrays.push(true) } else { "+"xargs.push(args[i]); "+"arrays.push(false); } i++; "}else{o+="xargs.push(args[i++]); arrays.push(false); "}return i}function v(e){if(Array.isArray(e)){if(e[0]=="or"){return"("+e.slice(1).map(v).join(") || (")+")"}if(e[0]=="and"){return"("+e.slice(1).map(v).join(") && (")+")"}if(e[0]=="values"){return"("+e.slice(1).map(function(e){return f()+" === "+e}).join(") || (")+")"}if(e[0]=="null"){return"("+v("null")+" ? (($"+l+" = "+e[1]+"), true) : false)"}if(e[0]=="between"||e[0]=="[between]"){return"("+f()+" >= "+e[1]+" && "+"$"+l+" <= "+e[2]+" ? true : ((err = 'NUM'), false))"}if(e[0]=="(between)"){return"("+f()+" > "+e[1]+" && "+"$"+l+" < "+e[2]+" ? true : ((err = 'NUM'), false))"}if(e[0]=="(between]"){return"("+f()+" > "+e[1]+" && "+"$"+l+" <= "+e[2]+" ? true : ((err = 'NUM'), false))"}if(e[0]=="[between)"){return"("+f()+" >= "+e[1]+" && "+"$"+l+" < "+e[2]+" ? true : ((err = 'NUM'), false))"}if(e[0]=="assert"){var t=e[2]||"N/A";return"(("+e[1]+") ? true : (err = "+JSON.stringify(t)+", false))"}if(e[0]=="not"){return"!("+v(e[1])+")"}throw new Error("Unknown array type condition: "+e[0])}if(e=="number"||e=="datetime"){return h(true)}if(e=="number!"){return"(typeof "+f()+" == 'number' ? ($"+l+" = round($"+l+"), true) : false)"}if(e=="integer"||e=="date"){return"("+h()+" && (($"+l+" |= 0), true))"}if(e=="divisor"){return"("+h(true)+" && ($"+l+" == 0 ? ((err = 'DIV/0'), false) : true))"}if(e=="number+"){return"("+h(true)+" && ($"+l+" >= 0 ? true : ((err = 'NUM'), false)))"}if(e=="integer+"){return"("+h()+" && (($"+l+" |= 0) >= 0 ? true : ((err = 'NUM'), false)))"}if(e=="number++"){return"("+h(true)+" && ($"+l+" > 0 ? true : ((err = 'NUM'), false)))"}if(e=="integer++"){return"("+h()+" && (($"+l+" |= 0) > 0 ? true : ((err = 'NUM'), false)))"}if(e=="string"){return"((typeof "+f()+" == 'string' || typeof $"+l+" == 'boolean' || typeof $"+l+" == 'number') ? ($"+l+" += '', true) : ($"+l+" === undefined ? (($"+l+" = ''), true) : false))"}if(e=="boolean"){return"(typeof "+f()+" == 'boolean')"}if(e=="logical"){return"(typeof "+f()+" == 'boolean' || (typeof $"+l+" == 'number' ? ($"+l+" = !!$"+l+", true) : false))"}if(e=="matrix"){f();return"((m = this.asMatrix($"+l+")) ? ($"+l+" = m) : false)"}if(e=="#matrix"){return"((m = this.asMatrix($"+l+")) ? ($"+l+" = m) : false)"}if(e=="ref"){return"($"+l+" instanceof kendo.spreadsheet.Ref)"}if(e=="area"){return"($"+l+" instanceof kendo.spreadsheet.CellRef || $"+l+" instanceof kendo.spreadsheet.RangeRef)"}if(e=="cell"){return"($"+l+" instanceof kendo.spreadsheet.CellRef)"}if(e=="null"){return"("+f()+" == null)"}if(e=="anyvalue"){return"("+f()+" != null && i <= args.length)"}if(e=="forced"){return"("+f()+", i <= args.length)"}if(e=="anything"){return"(i <= args.length)"}if(e=="blank"){return"("+f()+" == null || $"+l+" === '')"}throw new Error("Can't check for type: "+e)}}function _(e){return e===parseInt(e,10)?e:+e.toPrecision(14)}function L(e){if(typeof e=="number"){return _(e)}else{return e}}function c(e,t,i){if(i instanceof m){return i}try{return t.apply(e,i)}catch(e){if(e instanceof m){return e}else{throw e}}}function H(l,t,d,u){return function(o,s){function e(){if(u){var e=u.call(this,s);s=e.args;if(e.width>0&&e.height>0){var t=new h(this);for(var i=0;i<e.height;++i){for(var n=0;n<e.width;++n){var r=[];for(var a=0;a<s.length;++a){if(e.arrays[a]){r[a]=s[a].getNA(i,n)}else{r[a]=s[a]}}r=d.call(this,r);t.set(i,n,c(this,l,r))}}return o(t)}}var r=d.call(this,s);o(c(this,l,r))}if(t){t.call(this,s,e)}else{e.call(this)}}}function N(u,t,c,f){return function(l,d){function e(){if(f){var e=f.call(this,d);d=e.args;if(e.width>0&&e.height>0){var n=new h(this);var r=e.width*e.height;var t=function(t,i){return function(e){n.set(t,i,e);--r;if(r===0){return l(n)}}};for(var i=0;i<e.height&&r>0;++i){for(var a=0;a<e.width&&r>0;++a){var o=[];for(var s=0;s<d.length;++s){if(e.arrays[s]){o[s]=d[s].getNA(i,a)}else{o[s]=d[s]}}o=c.call(this,o);if(o instanceof m){n.set(i,a,o);--r;if(r===0){return l(n)}}else{o.unshift(t(i,a));u.apply(this,o)}}}return}}var e=c.call(this,d);if(e instanceof m){l(e)}else{e.unshift(l);u.apply(this,e)}}if(t){t.call(this,d,e)}else{e.call(this)}}}function f(r,a){r=r.toLowerCase();s[r]=a;return{args:function(e,t){var i=u(r,e);if(t){if(i.arrayArgs){console.log(i.arrayArgs.toString())}if(i.resolve){console.log(i.resolve.toString())}if(i.check){console.log(i.check.toString())}}var n=s[r]=H(a,i.resolve,i.check,i.arrayArgs);n.kendoSpreadsheetArgs=e;return this},argsAsync:function(e,t){var i=u(r,e);if(t){if(i.arrayArgs){console.log(i.arrayArgs.toString())}if(i.resolve){console.log(i.resolve.toString())}if(i.check){console.log(i.check.toString())}}var n=s[r]=N(a,i.resolve,i.check,i.arrayArgs);n.kendoSpreadsheetArgs=e;return this}}}function b(e,t,i){t++;return(1461*(e+4800+((t-14)/12|0))/4|0)+(367*(t-2-12*((t-14)/12|0))/12|0)-(3*((e+4900+((t-14)/12|0))/100|0)/4|0)+i-32075}function O(e){var t,i,n,r,a,o,s;t=e+68569;i=4*t/146097|0;t=t-((146097*i+3)/4|0);r=4e3*(t+1)/1461001|0;t=t-(1461*r/4|0)+31;n=80*t/2447|0;o=t-(2447*n/80|0);t=n/11|0;a=n+2-12*t;s=100*(i-49)+r+t;a--;return{year:s,month:a,date:o,day:(e+1)%7,ord:W[k(s)][a]+o}}var w=b(1900,0,-1);var V=[31,28,31,30,31,30,31,31,30,31,30,31];var W=[[0,31,59,90,120,151,181,212,243,273,304,334],[0,31,60,91,121,152,182,213,244,274,305,335]];function k(e){if(e%4){return 0}if(e%100){return 1}if(e%400){return 0}return 1}function U(e){return k(e)?366:365}function y(e,t){return k(e)&&t==1?29:V[t]}function j(e,t,i){return t>=1&&t<=12&&i>=1&&i<=y(e,t-1)}function x(e){return O((e|0)+w)}function C(e,t,i){return b(e,t,i)-w}var S=60*1e3;var T=60*S;var G=24*T;function D(e){var t=e-(e|0);if(t<0){t++}var i=Math.round(G*t);var n=Math.floor(i/T);i-=n*T;var r=Math.floor(i/S);i-=r*S;var a=Math.floor(i/1e3);i-=a*1e3;return{hours:n,minutes:r,seconds:a,milliseconds:i}}function A(e){var t=x(e),i=D(e);return new Date(t.year,t.month,t.date,i.hours,i.minutes,i.seconds,i.milliseconds)}function E(e,t,i,n){return(e+(t+(i+n/1e3)/60)/60)/24}function I(e){var t=E(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());e=C(e.getFullYear(),e.getMonth(),e.getDate());if(e<0){return e-1+t}else{return e+t}}function q(e,t){if(t){t=kendo.spreadsheet.formatting.makeDateFormat(t)}return kendo.parseExactDate(e,t)||kendo.parseExactDate(e)||kendo.parseExactDate(e,["MMMM dd yyyy","MMMM dd yy","MMM dd yyyy","MMM dd yy","dd MMMM yyyy","dd MMMM yy","dd MMM yyyy","dd MMM yy","MMMM dd, yyyy","MMMM dd, yy","MMM dd, yyyy","MMM dd, yy","MMMM dd","MMM dd","MMMM yyyy","MMM yyyy","dd MMMM","dd MMM"])}t.CalcError=m;t.Formula=v;t.Matrix=h;t.packDate=C;t.unpackDate=x;t.packTime=E;t.unpackTime=D;t.serialToDate=A;t.dateToSerial=I;t.daysInMonth=y;t.validDate=j;t.isLeapYear=k;t.daysInYear=U;t.parseDate=q;t.limitPrecision=_;a.dateToNumber=I;a.numberToDate=A;a.defineFunction=f;a.CalcError=m;t.defineFunction=f;t.defineAlias=function(e,t){var i=s[t];if(!i){throw new Error("Function "+t+" is not yet defined")}if(!i.kendoSpreadsheetAliases){i.kendoSpreadsheetAliases=[t]}i.kendoSpreadsheetAliases.push(e);s[e]=i};t.FUNCS=s;var M=["or","number",["null",0]];var R=[["*a",M],["*b",M]];var F=[["*a","forced"],["*b","forced"]];f("binary+",function(e,t){return e+t}).args(R);f("binary-",function(e,t){return e-t}).args(R);f("binary*",function(e,t){return e*t}).args(R);f("binary/",function(e,t){return e/t}).args([["*a",M],["*b","divisor"]]);f("binary^",function(e,t){return Math.pow(e,t)}).args(R);f("binary&",function(e,t){if(e==null){e=""}if(t==null){t=""}return""+e+t}).args([["*a",["or","number","string","boolean","null"]],["*b",["or","number","string","boolean","null"]]]);function P(e,t){e=typeof e==="string"?e.toLowerCase():e;t=typeof t==="string"?t.toLowerCase():t;if(e===false&&t==null){return true}if(t===false&&e==null){return true}if(e===0&&t==null){return true}if(t===0&&e==null){return true}if(e===""&&t==null){return true}if(t===""&&e==null){return true}return e===t}f("binary=",P).args(F);f("binary<>",function(e,t){return!P(e,t)}).args(F);f("binary<",z(function(e,t){return e<t})).args(F);f("binary<=",z(function(e,t){return e<=t})).args(F);f("binary>",z(function(e,t){return e>t})).args(F);f("binary>=",z(function(e,t){return e>=t})).args(F);f("unary+",function(e){return e}).args([["*a",M]]);f("unary-",function(e){return-e}).args([["*a",M]]);f("unary%",function(e){return e/100}).args([["*a",M]]);f("binary:",function(e,t){return new d(e,t).setSheet(e.sheet||this.formula.sheet,e.hasSheet())}).args([["a","cell"],["b","cell"]]);f("binary,",function(e,t){return new r([e,t])}).args([["a","ref"],["b","ref"]]);f("binary ",function(e,t){return e.intersect(t)}).args([["a","ref"],["b","ref"]]);f("not",function(e){return!this.bool(e)}).args([["*a",["or","anyvalue",["null",0]]]]);f("isblank",function(e){if(e instanceof n){e=this.getRefData(e);return e==null}return false}).args([["*value","anything!"]]);f("iserror",function(e){return e instanceof m}).args([["*value","forced!"]]);f("iserr",function(e){return e instanceof m&&e.code!="N/A"}).args([["*value","forced!"]]);f("isna",function(e){return e instanceof m&&e.code=="N/A"}).args([["*value","forced!"]]);f("islogical",function(e){return typeof e=="boolean"}).args([["*value","forced!"]]);f("isnontext",function(e){return typeof e!="string"}).args([["*value","forced!"]]);f("istext",function(e){return typeof e=="string"}).args([["*value","forced!"]]);f("isnumber",function(e){return typeof e=="number"}).args([["*value","forced!"]]);f("isref",function(e){return e instanceof n||e instanceof d}).args([["*value","anything!"]]);s[",getname"]=function(e,t){this.fetchName(t[0],e)};function z(i){return function(e,t){if(typeof e=="string"&&typeof t!="string"){t=t==null?"":t+""}if(typeof e!="string"&&typeof t=="string"){e=e==null?"":e+""}if(typeof e=="number"&&t==null){t=0}if(typeof t=="number"&&e==null){e=0}if(typeof e=="string"&&typeof t=="string"){e=e.toLowerCase();t=t.toLowerCase()}if(typeof t==typeof e){return i(e,t)}else{return new m("VALUE")}}}},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/validation",["spreadsheet/runtime"],e)})(function(){"use strict";var l=kendo.jQuery;var e=kendo.spreadsheet;var d={};e.validation=d;var u=e.calc;var t=kendo.Class;var c="_matrix({0})";var f='DATEVALUE("{0}")';u.runtime.defineFunction("_matrix",function(e){if(typeof e=="string"){e=this.asMatrix([e.split(/\s*,\s*/)])}return e}).args([["m",["or","matrix","string"]]]);function i(e,t,i,n){var r;var a;var o;var s;if(typeof n==="string"){n=JSON.parse(n)}if(n.from){if(n.dataType==="list"&&!n.fromIsListValue){if(n.from.indexOf("{")>-1){n.from=n.from.replace(/\"/g,"").replace("{",'"').replace("}",'"')}n.from=kendo.format(c,n.from);n.fromIsListValue=true}if(n.dataType==="date"){o=u.runtime.parseDate(n.from);if(o){n.from=kendo.format(f,n.from);n.fromIsDateValue=true}}n.from=u.compile(u.parseFormula(e,t,i,n.from))}if(n.to){if(n.dataType==="date"){s=u.runtime.parseDate(n.to);if(s){n.to=kendo.format(f,n.to);n.toIsDateValue=true}}n.to=u.compile(u.parseFormula(e,t,i,n.to))}if(n.dataType=="custom"){a=d.validationComparers.custom}else if(n.dataType=="list"){a=d.validationComparers.list}else{a=d.validationComparers[n.comparerType]}if(!a){throw kendo.format("'{0}' comparer is not implemented.",n.comparerType)}r=function(e){var t=this.to&&(this.to_value||this.to_value===0)?this.to_value:undefined;if(e===null||e===""){if(this.allowNulls){this.value=true}else{this.value=false}}else if(this.dataType=="custom"){this.value=a(e,this.from_value,t)}else if(this.dataType=="list"){var i=this._getListData();this.value=a(e,i,t)}else{this.value=a(e,this.from_value,t)}return this.value};return new kendo.spreadsheet.validation.Validation(l.extend(n,{handler:r,sheet:e,row:t,col:i}))}var h=t.extend({init:function e(t){this.handler=t.handler;this.from=t.from;this.to=t.to;this.dataType=t.dataType;this.comparerType=t.comparerType;this.type=t.type?t.type:"warning";this.allowNulls=t.allowNulls?true:false;this.fromIsDateValue=t.fromIsDateValue?true:false;this.toIsDateValue=t.toIsDateValue?true:false;this.showButton=t.showButton;this.fromIsListValue=t.fromIsListValue?true:false;this.ntp=t.ntp||{};this.sheet=t.sheet;this.row=t.row;this.col=t.col;if(t.tooltipMessageTemplate){this.tooltipMessageTemplate=t.tooltipMessageTemplate}if(t.tooltipTitleTemplate){this.tooltipTitleTemplate=t.tooltipTitleTemplate}if(t.messageTemplate){this.messageTemplate=t.messageTemplate}if(t.titleTemplate){this.titleTemplate=t.titleTemplate}},_formatMessages:function(e){var t=this.from?this.from_value:"";var i=this.to?this.to_value:"";var n=this.from?this.from.toString():"";var r=this.to?this.to.toString():"";var a=this.dataType;var o=this.type;var s=this.comparerType;return kendo.format(e,t,i,n,r,a,o,s)},_setMessages:function(){this.title="";this.message="";if(this.tooltipTitleTemplate){this.tooltipTitle=this._formatMessages(this.tooltipTitleTemplate)}if(this.tooltipMessageTemplate){this.tooltipMessage=this._formatMessages(this.tooltipMessageTemplate)}if(this.titleTemplate){this.title=this._formatMessages(this.titleTemplate)}if(this.messageTemplate){this.message=this._formatMessages(this.messageTemplate)}},_getListData:function(){if(!this.from_value||!this.from_value.data){return[]}var e=this.from_value.data;var t;var i;var n=[];for(t=0;t<e.length;t++){var r=e[t];if(r){for(i=0;i<r.length;i++){n.push(r[i])}}}return n},clone:function(e,t,i){var n=this._getOptions();if(n.from){n.from=n.from.clone(e,t,i)}if(n.to){n.to=n.to.clone(e,t,i)}return new h(l.extend(n,{handler:this.handler},{sheet:e,row:t,col:i}))},deepClone:function(){var e=new h(this);e.from=e.from.deepClone();if(e.to){e.to=e.to.deepClone()}return e},exec:function(t,i,n,r){var a=this;function o(e){if(e instanceof kendo.spreadsheet.Ref){e=t.getData(e);if(Array.isArray(e)){e=e[0]}}return e}var s=function(e){a.from_value=o(e);a.value=a.handler.call(a,i,n);a._setMessages();if(r){r(a.value)}};if(a.to){a.to.exec(t,function(e){a.to_value=o(e);a.from.exec(t,s)})}else{a.from.exec(t,s)}},reset:function(){if(this.from){this.from.reset()}if(this.to){this.to.reset()}delete this.value},adjust:function(e,t,i,n){var r,a,o;var s=this.row;var l=this.col;if(this.from){r=this.from.adjust(e,t,i,n)}if(this.to){a=this.to.adjust(e,t,i,n)}if(this.sheet.toLowerCase()==e.toLowerCase()){switch(t){case"row":if(s>=i){o=true;this.row+=n}break;case"col":if(l>=i){o=true;this.col+=n}break}}if(o||r||a){var d=new h(this);d.from=r;d.to=a;d.row=s;d.col=l;return d}},toJSON:function(){var e=this._getOptions();if(e.from){e.from=e.from.toString();if(e.dataType==="list"){e.from=e.from.replace(/^_matrix\((.*)\)$/i,"$1");delete e.fromIsListValue}if(e.dataType==="date"){if(this.fromIsDateValue){e.from=e.from.replace(/^DATEVALUE\("(.*)"\)$/i,"$1");delete e.fromIsDateValue}}}if(e.to){e.to=e.to.toString();if(e.dataType==="date"){if(this.toIsDateValue){e.to=e.to.replace(/^DATEVALUE\("(.*)"\)$/i,"$1");delete e.toIsDateValue}}}return e},_getOptions:function(){return{from:this.from,to:this.to,dataType:this.dataType,type:this.type,comparerType:this.comparerType,row:this.row,col:this.col,sheet:this.sheet,allowNulls:this.allowNulls,fromIsListValue:this.fromIsListValue,fromIsDateValue:this.fromIsDateValue,toIsDateValue:this.toIsDateValue,tooltipMessageTemplate:this.tooltipMessageTemplate,tooltipTitleTemplate:this.tooltipTitleTemplate,messageTemplate:this.messageTemplate,titleTemplate:this.titleTemplate,showButton:this.showButton,ntp:this.ntp}}});d.compile=i;d.validationComparers={greaterThan:function(e,t){return e>t},lessThan:function(e,t){return e<t},between:function(e,t,i){return e>=t&&e<=i},equalTo:function(e,t){return e==t},notEqualTo:function(e,t){return e!=t},greaterThanOrEqualTo:function(e,t){return e>=t},lessThanOrEqualTo:function(e,t){return e<=t},notBetween:function(e,t,i){return e<t||e>i},custom:function(e,t){return t},list:function(e,t){return t.indexOf(e)>-1}};d.Validation=h},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/sheet",["kendo.core","kendo.color","spreadsheet/runtime","spreadsheet/validation","spreadsheet/references"],e)})(function(){(function(h){var c=h.spreadsheet.RangeRef;var i=h.spreadsheet.UnionRef;var f=h.spreadsheet.CellRef;var p=h.spreadsheet.Range;var s;var l=h.Class.extend({init:function(e){this._sheet=e;this.selection=h.spreadsheet.FIRSTREF.toRangeRef();this.originalSelection=h.spreadsheet.FIRSTREF.toRangeRef();this._activeCell=h.spreadsheet.FIRSTREF.toRangeRef();this.originalActiveCell=h.spreadsheet.FIRSTREF},currentSelectionRange:function(){return this.selection.rangeAt(this.selectionRangeIndex).toRangeRef()},currentOriginalNavigationRange:function(){return this.originalSelection.rangeAt(this.selectionRangeIndex).toRangeRef()},currentNavigationRange:function(){if(this.singleCellSelection()){return this._sheet._sheetRef}else{return this.selection.rangeAt(this.selectionRangeIndex).toRangeRef()}},nextNavigationRange:function(){if(!this.singleCellSelection()){this.selectionRangeIndex=this.selection.nextRangeIndex(this.selectionRangeIndex)}return this.currentNavigationRange()},previousNavigationRange:function(){if(!this.singleCellSelection()){this.selectionRangeIndex=this.selection.previousRangeIndex(this.selectionRangeIndex)}return this.currentNavigationRange()},activeCell:function(e){if(e){this.originalActiveCell=e.first();this._activeCell=this._sheet.unionWithMerged(e.toRangeRef());this._sheet.focus(e);this._sheet.triggerChange({activeCell:true,selection:true})}return this._activeCell},select:function(t,e,i,n){if(t){if(t.eq(this.originalSelection)){return}this._sheet.triggerSelect(new p(t,this._sheet));this.originalSelection=t;this.selection=e;if(i!==false){if(t.isCell()){this._sheet.forEachMergedCell(t,function(e){t=e.topLeft});this.activeCell(t)}else{t=this.selection.lastRange();if(n&&n._sheet===this._sheet&&n.panes[0]){var r=n.panes;var a,o,s,l,d,u;for(a=0;a<r.length;a++){o=r[a];s=o._currentView.rows.values;l=o._currentView.columns.values;d=new c(new f(s.start,l.start),new f(s.end,l.end));u=t.intersect(d);if(u!==h.spreadsheet.NULLREF){break}}if(u&&u!==h.spreadsheet.NULLREF){t=u}}this.activeCell(t.first())}this.selectionRangeIndex=this.selection.size()-1}else{this._sheet.triggerChange({selection:true})}}return this.selection},singleCellSelection:function(){return this._activeCell.eq(this.selection)}});var e=h.Observable.extend({init:function(){h.Observable.prototype.init.call(this);this._reinit.apply(this,arguments)},events:["changing","commandRequest","afterInsertRow","afterDeleteRow","insertRow","insertColumn","deleteRow","deleteColumn","hideRow","hideColumn","unhideRow","unhideColumn","select","dataBinding","dataBound"],_reinit:function(e,t,i,n,r,a,o){o=o||{};this._defaultCellStyle={background:o.background,color:o.color,fontFamily:o.fontFamily,fontSize:o.fontSize,italic:o.italic,bold:o.bold,underline:o.underline,wrap:o.wrap,verticalAlign:o.verticalAlign,textAlign:o.textAlign};this._rows=new h.spreadsheet.Axis(e,i);this._columns=new h.spreadsheet.Axis(t,n);this._filteredRows=new h.spreadsheet.RangeList(0,e-1,false);this._mergedCells=[];this._frozenRows=0;this._frozenColumns=0;this._suspendChanges=false;this._filter=null;this._showGridLines=true;this._gridLinesColor=null;this._grid=new h.spreadsheet.Grid(this._rows,this._columns,e,t,r,a);this._sheetRef=this._grid.normalize(h.spreadsheet.SHEETREF);this._properties=new h.spreadsheet.PropertyBag(e,t,this._defaultCellStyle);this._sorter=new h.spreadsheet.Sorter(this._grid,this._properties.sortable());this._viewSelection=new l(this);this._editSelection=new l(this);this._formulaSelections=[];this._drawings=[]},_selectionState:function(){return this._inEdit?this._editSelection:this._viewSelection},navigator:function(){if(!this._navigator){this._navigator=new h.spreadsheet.SheetNavigator(this)}return this._navigator},axisManager:function(){if(!this._axisManager){this._axisManager=new h.spreadsheet.AxisManager(this)}return this._axisManager},_name:function(e){if(!e){return this._sheetName}this._sheetName=e;return this},name:function(){return this._name()},_property:function(e,t,i){if(t===undefined){return e()}else{e(t);return this.triggerChange(i)}},_field:function(e,t,i){if(t===undefined){return this[e]}else{this[e]=t;return this.triggerChange(i)}},suspendChanges:function(e){if(e===undefined){return this._suspendChanges}this._suspendChanges=e;return this},triggerChange:function(e){if(!this._suspendChanges){this.trigger("change",e)}return this},triggerSelect:function(e){this.trigger("select",{range:e})},setDataSource:function(e,t){if(this.dataSourceBinder){this.dataSourceBinder.destroy()}this.dataSourceBinder=new h.spreadsheet.SheetDataSourceBinder({dataSource:e,sheet:this,columns:t});this.dataSource=this.dataSourceBinder.dataSource},hideColumn:function(e){if(this.trigger("hideColumn",{index:e})){return}return this._property(this._columns.hide.bind(this._columns),e,{layout:true})},unhideColumn:function(e){if(this.trigger("unhideColumn",{index:e})){return}return this._property(this._columns.unhide.bind(this._columns),e,{layout:true})},isHiddenColumn:function(e){return this._grid._columns.hidden(e)},_copyRange:function(e,t){var i=this._grid;var n=i.rowCount;var r=i.normalize(e.topLeft);var a=i.normalize(e.bottomRight);var o=r.col*n+r.row;var s=a.col*n+a.row;var l=t.col*n+t.row;this._properties.copy(o,s,l)},_saveModifiedFormulas:function(e,t){var i=s;s=e;var n=t();s=i;return n},_restoreModifiedFormulas:function(e){var n=this._workbook;e.forEach(function(e){var t=n.sheetByName(e.sheet),i;if(e instanceof h.spreadsheet.calc.runtime.Formula){i=t._grid.cellRefIndex(e);t._properties.set("formula",i,i,e)}if(e instanceof h.spreadsheet.validation.Validation){i=t._grid.cellRefIndex(e);t._properties.set("validation",i,i,e)}})},_adjustReferences:function(i,n,r,e){this._mergedCells=e.reduce(function(e,t){t=t.adjust(null,null,null,null,i=="row",n,r);if(t instanceof c){e.push(t)}return e},[]);if(this._workbook){var a=this._name();this._workbook._sheets.forEach(function(e){e._forFormulas(function(e){var t=e.adjust(a,i,n,r);if(t&&s){s.push(t)}});e._forValidations(function(e){var t=e.adjust(a,i,n,r);if(t&&s){s.push(t)}})});this._workbook.adjustNames(a,i=="row",n,r)}var t=this.select();t=t.adjust(null,null,null,null,i=="row",n,r);if(t!==h.spreadsheet.NULLREF){this.select(t)}var o=i=="col"?this._columns:this._rows;o.adjust(n,r);if(i=="row"){if(r<0){this._filteredRows.copy(n-r,this._rows._count-1,n)}else{this._filteredRows.copy(n,this._rows._count,n+r);this._filteredRows.value(n,n+r-1,false)}}this._drawings.forEach(function(e){if(e.topLeftCell){e.topLeftCell=e.topLeftCell.adjust(null,null,null,null,i=="row",n,r)}})},_forFormulas:function(i){var e=this._properties;var t=e.get("formula").values();var n=t.length;t.forEach(function(e,t){i.call(this,e.value,t,n)},this)},_forValidations:function(t){var e=this._properties;e.get("validation").values().forEach(function(e){t.call(this,e.value)},this)},preventInsertRow:function(e,t){if(this.selectedHeaders().allRows){return{reason:"error",type:"insertRowWhenColumnIsSelected"}}t=t||1;var i=this._grid;var n=this.range(i.rowCount-t,0,t,i.columnCount);if(n.hasValue()){return{reason:"error",type:"shiftingNonblankCells"}}return false},preventInsertBelowLastRow:function(e,t){t=t||1;if(e+t===this._rows._count){return{reason:"error",type:"insertRowBelowLastRow"}}return false},preventInsertColumn:function(e,t){if(this.selectedHeaders().allCols){return{reason:"error",type:"insertColumnWhenRowIsSelected"}}t=t||1;var i=this._grid;var n=this.range(0,i.columnCount-t,i.rowCount,t);if(n.hasValue()){return{reason:"error",type:"shiftingNonblankCells"}}return false},preventInsertAfterLastColumn:function(e,t){t=t||1;if(e+t===this._columns._count){return{reason:"error",type:"insertColAfterLastCol"}}return false},insertRow:function(u,e){var t=this.preventInsertRow(u);if(t){throw new Error("Shifting nonblank cells off the worksheet is not supported!")}if(this.trigger("insertRow",{index:u})){return}this.batch(function(){var e=this._grid;var t=e.columnCount;var i=e.rowCount;var n=this.frozenRows();if(u<n){this.frozenRows(n+1)}var r=this._mergedCells.slice();for(var a=0;a<t;a++){var o=new c(new f(u,a),new f(u,a));var s=e.normalize(o.topLeft);var l=e.normalize(o.bottomRight);var d=new c(new f(s.row,s.col),new f(i-2,l.col));this._copyRange(d,new f(s.row+1,s.col));new p(o,this).clear({clearAll:true,keepBorders:true})}this._adjustReferences("row",u,1,r)},{recalc:true,layout:true,insertRow:{index:u},ref:new c(new f(u,0),new f(Infinity,Infinity))});if(!e){this.trigger("afterInsertRow",{index:u})}return this},isEnabledRow:function(e){var t=new c(new f(e,0),new f(e,this._grid.columnCount));return new p(t,this).enable()},deleteRow:function(u,e){if(!this.isEnabledRow(u)){return this}if(this.trigger("deleteRow",{index:u})){return}this.batch(function(){var e=this._grid;var t=e.columnCount;var i=this.frozenRows();if(u<i){this.frozenRows(i-1)}var n=this._mergedCells.slice();for(var r=0;r<t;r++){var a=new c(new f(u,r),new f(u,r));new p(a,this).clear({clearAll:true,keepBorders:true});var o=e.normalize(a.topLeft);var s=e.normalize(a.bottomRight);var l=new c(new f(o.row+1,o.col),new f(Infinity,s.col));this._copyRange(l,o);var d=e.normalize(l.bottomRight);new p(new c(d,d),this).clear()}this._adjustReferences("row",u,-1,n)},{recalc:true,layout:true,deleteRow:{index:u},ref:new c(new f(u,0),new f(Infinity,Infinity))});if(!e){this.trigger("afterDeleteRow",{index:u})}return this},insertColumn:function(d){if(this.trigger("insertColumn",{index:d})){return}this.batch(function(){var e=this._grid;var t=e.columnCount;var i=this.frozenColumns();if(d<i){this.frozenColumns(i+1)}var n=this._mergedCells.slice();for(var r=t;r>=d;r--){var a=new c(new f(0,r),new f(Infinity,r));new p(a,this).clear({clearAll:true,keepBorders:true});if(r==d){break}var o=e.normalize(a.topLeft);var s=e.normalize(a.bottomRight);var l=new c(new f(o.row,o.col-1),new f(s.row,s.col-1));this._copyRange(l,o)}this._adjustReferences("col",d,1,n)},{recalc:true,layout:true,insertColumn:{index:d},ref:new c(new f(0,d),new f(Infinity,Infinity))});return this},isEnabledColumn:function(e){var t=new c(new f(0,e),new f(Infinity,e));return new p(t,this).enable()},deleteColumn:function(d){if(!this.isEnabledColumn(d)){return this}if(this.trigger("deleteColumn",{index:d})){return}this.batch(function(){var e=this._grid;var t=e.columnCount;var i=this.frozenColumns();if(d<i){this.frozenColumns(i-1)}var n=this._mergedCells.slice();for(var r=d;r<t;r++){var a=new c(new f(0,r),new f(Infinity,r));new p(a,this).clear({clearAll:true,keepBorders:true});if(r==t-1){break}var o=e.normalize(a.topLeft);var s=e.normalize(a.bottomRight);var l=new c(new f(o.row,o.col+1),new f(s.row,s.col+1));this._copyRange(l,o)}this._adjustReferences("col",d,-1,n)},{recalc:true,layout:true,deleteColumn:{index:d},ref:new c(new f(0,d),new f(Infinity,Infinity))});return this},_filterRow:function(e){this._rows.hide(e);this._filteredRows.value(e,e,true);this.triggerChange({layout:true})},hideRow:function(e){if(this.trigger("hideRow",{index:e})){return}return this._property(this._rows.hide.bind(this._rows),e,{layout:true})},unhideRow:function(e){if(this.trigger("unhideRow",{index:e})){return}return this._property(this._rows.unhide.bind(this._rows),e,{layout:true})},isHiddenRow:function(e){return this._grid._rows.hidden(e)},isFilteredRow:function(e){return this._filteredRows.value(e)},columnWidth:function(e,t){return this._property(this._columns.value.bind(this._columns,e,e),t,{layout:true})},rowHeight:function(e,t){return this._property(this._rows.value.bind(this._rows,e,e),t,{layout:true})},frozenRows:function(e){return this._field("_frozenRows",e,{layout:true})},frozenColumns:function(e){return this._field("_frozenColumns",e,{layout:true})},showGridLines:function(e){return this._field("_showGridLines",e,{layout:true})},gridLinesColor:function(e){return this._field("_gridLinesColor",e,{layout:true})},_ref:function(e,t,i,n){var r=null;if(e instanceof h.spreadsheet.Ref){return e}if(e instanceof h.spreadsheet.Range){return e._ref.toRangeRef()}if(typeof e==="string"){r=h.spreadsheet.calc.parseReference(e)}else{if(!i){i=1}if(!n){n=1}r=new c(new f(e,t),new f(e+i-1,t+n-1))}return r},range:function(e,t,i,n){return new p(this._ref(e,t,i,n),this)},_getMergedCells:function(n){var e=this._grid;var r={};var a={};var o=false;this.forEachMergedCell(n,function(t){var i=t.topLeft;e.forEach(t,function(e){if(i.eq(e)){r[e.print()]=t;o=true}else if(n.contains(e)){a[e.print()]=i;o=true}})});return{primary:r,secondary:a,hasMerged:o}},forEachMergedCell:function(t,i){var n=false;if(typeof i==="undefined"){i=t;n=true}this._mergedCells.forEach(function(e){if(n||e.intersects(t)){i(e)}})},forEachFilterHeader:function(t,e){var i=false;if(typeof e==="undefined"){e=t;i=true}if(this._filter){var n=[];this._filter.ref.forEachColumn(function(e){if(i||e.intersects(t)){n.push(e.topLeft)}});this._mergedCells.forEach(function(t){n=n.map(function(e){if(t.intersects(e)){return t}return e})});n.reduce(function e(t,i){if(t.indexOf(i)<0){t.push(i)}return t},[]).forEach(e)}},forEach:function(e,l){var d=this;function t(e){if(!(e instanceof c)){e=e.toRangeRef()}var t=d._grid.normalize(e.topLeft);var i=d._grid.normalize(e.bottomRight);var n,r;function a(e){l(r++,n,e)}for(n=t.col;n<=i.col;n++){r=t.row;var o=d._grid.index(r,n);var s=d._grid.index(i.row,n);d._properties.forEach(o,s,a)}}if(!(e instanceof c)){e=d._ref(e)}if(e instanceof i){e.forEach(t)}else{t(e)}},startResizing:function(e){this._initialPosition=e;this._resizeInProgress=true},startAutoFill:function(){this._autoFillInProgress=true;var e=this.select();this._autoFillOrigin=e;this._autoFillDest=e;this.triggerChange({selection:true})},updateAutoFill:function(e,t,i,n){this._autoFillDest=e;this._autoFillPunch=t;this._autoFillHint=i;this._autoFillDirection=n;this.triggerChange({selection:true})},autoFillRef:function(){return this._autoFillDest},autoFillPunch:function(){return this._autoFillPunch},autoFillInProgress:function(){return this._autoFillInProgress},resizingInProgress:function(){return this._resizeInProgress},draggingInProgress:function(){return this._draggingInProgress},completeResizing:function(){if(this._resizeInProgress){this._resizeInProgress=false;var e=this.resizeHintPosition();if(this._initialPosition&&e){var t=this.resizeHandlePosition();if(t.col!==-Infinity){this.trigger("commandRequest",{command:"ColumnWidthCommand",options:{target:t.col,value:this.columnWidth(t.col)-(this._initialPosition.x-e.x)}})}else{this.trigger("commandRequest",{command:"RowHeightCommand",options:{target:t.row,value:this.rowHeight(t.row)-(this._initialPosition.y-e.y)}})}}else{this.trigger("change",{resize:true})}}},_renderComment:function(e){var t=e?this.range(e).comment():null;if(t){if(!this._commentRef||!e.eq(this._commentRef)){this._commentRef=e;this.trigger("change",{comment:true})}}else{if(this._commentRef){this._commentRef=null;this.trigger("change",{comment:true})}}},resizeHandlePosition:function(){return this._resizeHandlePosition},resizeHintPosition:function(e){if(e!==undefined){this._resizeHintPosition=e;this.trigger("change",{resize:true})}return this._resizeHintPosition},removeResizeHandle:function(){if(this._resizeHandlePosition){this._resizeHintPosition=undefined;this._resizeHandlePosition=undefined;this._initialPosition=undefined;this.trigger("change",{resize:true})}},positionResizeHandle:function(e){this._resizeHandlePosition=e;this.trigger("change",{resize:true})},startDragging:function(e){this._draggingInProgress=e},completeDragging:function(){var e=this._draggingInProgress;if(e){this._draggingInProgress=null;var t=e.drawing;if(t.eq(e.copy)){return}if(t.topLeftCell){var i=this.drawingBoundingBox(t);var n=this._rows.indexVisible(i.top);var r=this._columns.indexVisible(i.left);var a=new f(n,r);var o=this.refBoundingBox(a);t.offsetX=i.left-o.left;t.offsetY=i.top-o.top;t.topLeftCell=a;this.triggerChange({dragging:true})}this.trigger("commandRequest",{command:"DrawingUpdateCommand",options:{sheet:this,drawing:t,previous:e.copy}})}},startSelection:function(e){if(this.frozenRows()||this.frozenColumns()){this._currentView=null}else if(e&&e._sheet===this){this._currentView=e}this._selectionInProgress=true},completeSelection:function(){if(this._selectionInProgress){this._selectionInProgress=false;this._resizeHintPosition=undefined;this.trigger("change",{selection:true})}if(this._autoFillInProgress){this._autoFillInProgress=false;var e=this._autoFillDest;var t=this._autoFillOrigin;if(this._autoFillPunch){this.trigger("commandRequest",{command:"ClearContentCommand",options:{operatingRange:this.range(this._autoFillPunch)}})}else{if(!e.eq(t)){var i=h.ucas.getData("selectVertical");if(i==true){if(e.bottomRight.col==t.bottomRight.col){this.trigger("commandRequest",{command:"AutoFillCommand",options:{operatingRange:this.range(e),origin:this.range(t)}})}}else if(i==false){this.trigger("commandRequest",{command:"AutoFillCommand",options:{operatingRange:this.range(e),origin:this.range(t)}})}}else{this.triggerChange({selection:true})}}this._autoFillDest=null;this._autoFillPunch=null;this._autoFillOrigin=null;this.select(e)}},selectionInProgress:function(){return this._selectionInProgress},select:function(e,t){var i=this._selectionState();var n;if(e){e=this._ref(e);e=this._grid.normalize(e);n=this._grid.isAxis(e)?e:this.unionWithMerged(e)}return i.select(e,n,t,this._currentView)},originalSelect:function(){return this._selectionState().originalSelection},currentSelectionRange:function(){return this._selectionState().currentSelectionRange()},currentOriginalSelectionRange:function(){return this._selectionState().currentOriginalNavigationRange()},currentNavigationRange:function(){return this._selectionState().currentNavigationRange()},nextNavigationRange:function(){return this._selectionState().nextNavigationRange()},previousNavigationRange:function(){return this._selectionState().previousNavigationRange()},selectionRangeIndex:function(){return this._selectionState().selectionRangeIndex},activeCell:function(e){return this._selectionState().activeCell(e)},originalActiveCell:function(){return this._selectionState().originalActiveCell},singleCellSelection:function(){return this._selectionState().singleCellSelection()},unionWithMerged:function(e){var t=this._mergedCells;return e.map(function(e){return e.toRangeRef().union(t)})},trim:function(t){var i=[];var n=this._grid;this._properties.forEachProperty(function(e){i.push(n.trim(t,e.list))});return this.unionWithMerged(t.topLeft.toRangeRef().union(i))},focus:function(e){if(e){this._focus=e.toRangeRef()}else{var t=this._focus;this._focus=null;return t}},activeCellSelection:function(){return new p(this._grid.normalize(this.activeCell()),this)},selection:function(){return new p(this._grid.normalize(this._selectionState().selection),this)},selectedHeaders:function(){var e=this.select();var l={};var d={};var u=false;var c=false;var f=this._grid.rowCount-1;var h=this._grid.columnCount-1;e.forEach(function(e){var t;var i="partial";var n="partial";e=e.toRangeRef();var r=e.bottomRight;var a=e.topLeft;var o=a.col<=0&&r.col>=h;var s=a.row<=0&&r.row>=f;if(s){c=true;n="full"}if(o){u=true;i="full"}if(!s){for(t=a.row;t<=r.row;t++){if(l[t]!=="full"){l[t]=i}}}if(!o){for(t=a.col;t<=r.col;t++){if(d[t]!=="full"){d[t]=n}}}});return{rows:l,cols:d,allRows:c,allCols:u,all:c&&u}},isInEditMode:function(e){if(e===undefined){return this._inEdit}this._inEdit=e;if(e){this._editSelection.selection=this._viewSelection.selection.clone();this._editSelection.originalSelection=this._viewSelection.originalSelection.clone();this._editSelection._activeCell=this._viewSelection._activeCell.clone();this._editSelection.originalActiveCell=this._viewSelection.originalActiveCell.clone()}},_setFormulaSelections:function(e){this._formulaSelections=(e||[]).slice();this.triggerChange({selection:true})},_viewActiveCell:function(){return this._viewSelection._activeCell.toRangeRef()},toJSON:function(){var r={};var a=this._rows.toJSON("height",r);var e=this._columns.toJSON("width",{});var t=this._viewSelection;var o=[];var i=this._defaultCellStyle||{};function s(t){Object.keys(i).forEach(function(e){if(t[e]===i[e]){delete t[e]}})}this.forEach(h.spreadsheet.SHEETREF,function(e,t,i){s(i);if(Object.keys(i).length===0){return}if(i.link){o.push({ref:h.spreadsheet.Ref.display(null,e,t),target:i.link})}var n=r[e];if(n===undefined){n=a.length;a.push({index:e});r[e]=n}e=a[n];i.index=t;if(e.cells===undefined){e.cells=[]}if(i.formula){if(i.formula.arrayFormulaRange){i.formula={src:i.formula.toString(),ref:i.formula.arrayFormulaRange.toString()}}else{i.formula=i.formula.toString()}}if(i.validation){i.validation=i.validation.toJSON()}if(i.color){i.color=h.parseColor(i.color).toCss()}if(i.background){i.background=h.parseColor(i.background).toCss()}if(i.borderTop&&i.borderTop.color){i.borderTop.color=h.parseColor(i.borderTop.color).toCss()}if(i.borderBottom&&i.borderBottom.color){i.borderBottom.color=h.parseColor(i.borderBottom.color).toCss()}if(i.borderRight&&i.borderRight.color){i.borderRight.color=h.parseColor(i.borderRight.color).toCss()}if(i.borderLeft&&i.borderLeft.color){i.borderLeft.color=h.parseColor(i.borderLeft.color).toCss()}e.cells.push(i)});var n={name:this._name(),rows:a,columns:e,selection:t.selection.toString(),activeCell:t.activeCell().toString(),frozenRows:this.frozenRows(),frozenColumns:this.frozenColumns(),showGridLines:this.showGridLines(),gridLinesColor:this.gridLinesColor(),mergedCells:this._mergedCells.map(function(e){return e.toString()}),hyperlinks:o,defaultCellStyle:i,drawings:this._drawings.map(function(e){return e.toJSON()})};if(this._sort){n.sort={ref:this._sort.ref.toString(),columns:this._sort.columns.map(function(e){return{index:e.index,ascending:e.ascending}})}}if(this._filter){n.filter={ref:this._filter.ref.toString(),columns:this._filter.columns.map(function(e){var t=e.filter.toJSON();t.index=e.index;return t})}}return n},fromJSON:function(f){this.batch(function(){if(f.name!==undefined){this._name(f.name)}if(f.frozenColumns!==undefined){this.frozenColumns(f.frozenColumns)}if(f.frozenRows!==undefined){this.frozenRows(f.frozenRows)}if(f.columns!==undefined){this._columns.fromJSON("width",f.columns)}if(f.rows!==undefined){this._rows.fromJSON("height",f.rows);for(var e=0;e<f.rows.length;e++){var t=f.rows[e];var i=t.index;if(i===undefined){i=e}if(t.cells){for(var n=0;n<t.cells.length;n++){var r=t.cells[n];var a=r.index;if(a===undefined){a=n}if(r.formula){var o=typeof r.formula!="string";var s=o?r.formula.src:r.formula;var l=this._compileFormula(i,a,s);if(o){l.setArrayFormulaRange(h.spreadsheet.calc.parseReference(r.formula.ref))}r.formula=l}if(r.validation){r.validation=this._compileValidation(i,a,r.validation)}this._properties.fromJSON(this._grid.index(i,a),r)}}}}if(f.drawings){this._drawings=f.drawings.map(v.fromJSON)}if(f.selection){this._viewSelection.selection=this._viewSelection.originalSelection=this._ref(f.selection)}if(f.activeCell){var d=this._ref(f.activeCell);this._viewSelection._activeCell=d.toRangeRef();this._viewSelection.originalActiveCell=d.first()}if(f.mergedCells){f.mergedCells.forEach(function(e){this.range(e).merge()},this)}if(f.sort){this._sort={ref:this._ref(f.sort.ref),columns:f.sort.columns.slice(0)}}if(f.filter){var u=f.filter.ref;var c=f.filter.columns===undefined?[]:f.filter.columns;if(!u){h.logToConsole("Dropping filter for sheet '"+f.name+"' due to missing ref")}else{this._filter={ref:this._ref(u),columns:c.map(function(e){return{index:e.index,filter:h.spreadsheet.Filter.create(e)}})};this._refreshFilter()}}if(f.showGridLines!==undefined){this._showGridLines=f.showGridLines}this._gridLinesColor=f.gridLinesColor});this._rows._refresh();this._columns._refresh()},formula:function(e){return this._properties.get("formula",this._grid.cellRefIndex(e))},validation:function(e){return this._properties.get("validation",this._grid.cellRefIndex(e))},resetFormulas:function(){this._forFormulas(function(e){e.reset()})},resetValidations:function(){this._forValidations(function(e){e.reset()})},recalc:function(e,t){var i=this._properties.get("formula").values();var n=i.length,r=0,a=0;if(!n&&t){return t()}function o(){r--;if(a==n&&!r){t()}}while(a<n){r++;i[a++].value.exec(e,t?o:null)}},revalidate:function(n){var r=this;this._forValidations(function(e){var t=new f(e.row,e.col);var i=new c(t,t);e.exec(n,r._get(i,"value"),r._get(i,"format"))})},_value:function(e,t,i){var n=this._grid.index(e,t);if(i!==undefined){this._properties.set("value",n,n,i)}else{return this._properties.get("value",n)}},_validation:function(e,t){var i=this._grid.index(e,t);return this._properties.get("validation",i)},_compileValidation:function(e,t,i){if(i instanceof h.spreadsheet.validation.Validation){return i.clone(this._name(),e,t)}if(i.from!=null){i.from=(i.from+"").replace(/^=/,"")}if(i.to!=null){i.to=(i.to+"").replace(/^=/,"")}return h.spreadsheet.validation.compile(this._name(),e,t,i)},_compileFormula:function(e,t,i){i=i.replace(/^=/,"");i=h.spreadsheet.calc.parseFormula(this._name(),e,t,i);return h.spreadsheet.calc.compile(i)},_copyValuesInRange:function(e,t,i,n){var r,a,o;for(r=e.col;r<=t.col;r++){a=this._grid.index(e.row,r);o=this._grid.index(t.row,r);for(var s=a,l=e.row;s<=o;++s,++l){i=i.clone(this._name(),l,r);this._properties.set(n,s,s,i)}}return i},_set:function(e,t,i){var n=this._grid.normalize(e.topLeft);var r=this._grid.normalize(e.bottomRight);var a,o,s;if(typeof i=="number"){i=h.spreadsheet.calc.runtime.limitPrecision(i)}if(i&&t=="formula"){if(typeof i=="string"){i=this._compileFormula(n.row,n.col,i)}i=this._copyValuesInRange(n,r,i,"formula")}else if(i&&t=="validation"){i=this._compileValidation(n.row,n.col,i);i=this._copyValuesInRange(n,r,i,"validation")}else{for(a=n.col;a<=r.col;a++){o=this._grid.index(n.row,a);s=this._grid.index(r.row,a);this._properties.set(t,o,s,i);if(t=="formula"){this._properties.set("value",o,s,null)}}}},_get:function(e,t){var i=this._grid.normalize(e.topLeft);var n=this._grid.index(i.row,i.col);return this._properties.get(t,n)},batch:function(e,t){var i=this.suspendChanges();this.suspendChanges(true);e.call(this);return this.suspendChanges(i).triggerChange(t||{recalc:true})},_sortBy:function(t,e){var i=null;e.forEach(function(e){i=this._sorter.sortBy(t,e.index,this._properties.get("value"),e.ascending,i)},this);this._sort={ref:t,columns:e};this._refreshFilter();this.forEach(t,function(e,t,i){var n=i.formula;if(n){var r=e-n.row;if(r!==0){var a=r>0?n.row:n.row+r;n.adjust(this.name(),"row",a,r)}}}.bind(this));this.triggerChange({recalc:true})},_refreshFilter:function(){if(this._filter){this._filterBy(this._filter.ref,this._filter.columns)}},_filterBy:function(o,t){this.batch(function(){for(var e=o.topLeft.row;e<=o.bottomRight.row;e++){if(this.isFilteredRow(e)){this._filteredRows.value(e,e,false);this._rows.unhide(e)}}t.forEach(function(e){var t=o.resize({top:1}).toColumn(e.index);var n=[];if(t===h.spreadsheet.NULLREF){return}this.forEach(t,function(e,t,i){i.row=e;n.push(i)});e.filter.prepare(n);for(var i=0;i<n.length;i++){var r=n[i];var a=e.filter.value(r);if(e.filter.matches(a)===false){this._filterRow(r.row)}}},this);this._filter={ref:o,columns:t}},{recalc:true,layout:true,filter:true})},filterColumn:function(e){var t=this.filter().ref;return e.toRangeRef().topLeft.col-t.topLeft.col},filter:function(){return this._filter},clearFilter:function(e){this._clearFilter(e instanceof Array?e:[e])},_clearFilter:function(t){if(this._filter){this.batch(function(){this._filter.columns=this._filter.columns.filter(function(e){return t.indexOf(e.index)<0});this._refreshFilter()},{recalc:true,layout:true,filter:true})}},getAxisState:function(){return{rows:this._rows.getState(),columns:this._columns.getState()}},setAxisState:function(e){this._rows.setState(e.rows);this._columns.setState(e.columns);this.triggerChange({layout:true})},getState:function(){return{rows:this._rows.getState(),columns:this._columns.getState(),mergedCells:this._mergedCells.map(function(e){return e.clone()}),properties:this._properties.getState()}},setState:function(e){this._rows.setState(e.rows);this._columns.setState(e.columns);this._mergedCells=e.mergedCells;this._properties.setState(e.properties);this.triggerChange(h.spreadsheet.ALL_REASONS)},_merge:function(t){var l=this._mergedCells;var d=this;var i;this.batch(function(){i=t.map(function(e){if(e instanceof h.spreadsheet.CellRef){return e}var t=e.toRangeRef().union(l,function(e){l.splice(l.indexOf(e),1)});var i=new p(t,d);var n=i._get("formula");var r=i.value();var a=i.format();var o=i.background();i.value(null);i.format(null);i.background(null);var s=new p(t.collapse(),d);if(n){s._set("formula",n)}else{s.value(r)}s.format(a);s.background(o);l.push(t);return t});var e=d._viewSelection;e.selection=d.unionWithMerged(e.originalSelection);e._activeCell=d.unionWithMerged(e.originalActiveCell)},{activeCell:true,selection:true});return i},_useCultureDecimals:function(){return this._workbook&&this._workbook.options.useCultureDecimals},withCultureDecimals:function(e){var t=".";if(this._useCultureDecimals()){t=h.culture().numberFormat["."]}return h.spreadsheet.calc.withDecimalSeparator(t,e)},drawingBoundingBox:function(e){var t=e.offsetX;var i=e.offsetY;if(e.topLeftCell){t+=this._columns.sum(0,e.topLeftCell.col-1);i+=this._rows.sum(0,e.topLeftCell.row-1)}return new h.spreadsheet.Rectangle(t,i,e.width,e.height)},refBoundingBox:function(e){return this._grid.rectangle(e.toRangeRef())},addDrawing:function(e,t){if(!(e instanceof v)){e=new v(e)}this._drawings.push(e);if(t){this._activeDrawing=e}this.triggerChange({layout:true});return e},removeDrawing:function(e){var t=this._drawings.indexOf(e);if(t>=0){this._drawings.splice(t,1);this.triggerChange({layout:true})}},usesImage:function(e){for(var t=this._drawings.length;--t>=0;){if(this._drawings[t].image===e){return true}}return false}});var v=h.Class.extend({init:function e(t){this.reset(t)},toJSON:function(){return{topLeftCell:this.topLeftCell.toString(),offsetX:this.offsetX,offsetY:this.offsetY,width:this.width,height:this.height,image:this.image,opacity:this.opacity}},clone:function(){return new v(this)},reset:function(e){var t=e.topLeftCell;if(typeof t=="string"){t=h.spreadsheet.calc.parseReference(t)}this.topLeftCell=t;this.offsetX=e.offsetX||0;this.offsetY=e.offsetY||0;this.width=e.width;this.height=e.height;this.image=e.image;this.opacity=e.opacity!=null?e.opacity:1},eq:function(e){return(!this.topLeftCell&&!e.topLeftCell||this.topLeftCell&&e.topLeftCell&&this.topLeftCell.eq(e.topLeftCell))&&this.offsetX===e.offsetX&&this.offsetY===e.offsetY&&this.width===e.width&&this.height===e.height&&this.image===e.image&&this.opacity===e.opacity}});v.fromJSON=function(e){return new v(e)};h.spreadsheet.Sheet=e;h.spreadsheet.Drawing=v})(kendo)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/sheetsbar",["kendo.core","kendo.sortable"],e)})(function(){(function(m){var n=m.jQuery;var g=m._outerWidth;var _=".";var b=" ";var e={sheetsBarWrapper:"k-widget k-widget-2021 k-header",sheetsBarSheetsWrapper:"k-tabstrip k-floatwrap k-tabstrip-bottom",sheetsBarActive:"k-spreadsheet-sheets-bar-active",sheetsBarInactive:"k-spreadsheet-sheets-bar-inactive",sheetsBarAdd:"k-spreadsheet-sheets-bar-add",sheetsBarRemove:"k-spreadsheet-sheets-remove",sheetsBarItems:"k-spreadsheet-sheets-items",sheetsBarEditor:"k-spreadsheet-sheets-editor",sheetsBarScrollable:"k-tabstrip-scrollable",sheetsBarNext:"k-tabstrip-next",sheetsBarPrev:"k-tabstrip-prev",sheetsBarKItem:"k-item k-state-default",sheetsBarKActive:"k-state-active k-state-tab-on-top",sheetsBarKTextbox:"k-textbox",sheetsBarKLink:"k-link",sheetsBarKIcon:"k-icon",sheetsBarKFontIcon:"k-icon",sheetsBarKButton:"k-button k-button-icon",sheetsBarKButtonBare:"k-flat",sheetsBarKArrowW:"k-i-arrow-60-left",sheetsBarKArrowE:"k-i-arrow-60-right",sheetsBarKReset:"k-reset k-tabstrip-items",sheetsBarKIconX:"k-i-close",sheetsBarKSprite:"k-sprite",sheetsBarKIconPlus:"k-i-plus",sheetsBarHintWrapper:"k-widget k-widget-2021 k-tabstrip k-tabstrip-bottom k-spreadsheet-sheets-items-hint",sheetsBarKResetItems:"k-reset k-tabstrip-items"};var w=m.ui.Widget.extend({init:function(e,t){var i=w.classNames;m.ui.Widget.call(this,e,t);e=this.element;e.addClass(i.sheetsBarWrapper);this._openDialog=t.openDialog;this._tree=new m.dom.Tree(e[0]);this._tree.render([this._addButton(),this._createSheetsWrapper([])]);this._toggleScrollEvents(true);this._createSortable();this._sortable.bind("start",this._onSheetReorderStart.bind(this));this._sortable.bind("end",this._onSheetReorderEnd.bind(this));e.on("click",_+i.sheetsBarRemove,this._onSheetRemove.bind(this));e.on("click","li",this._onSheetSelect.bind(this));e.on("dblclick","li"+_+i.sheetsBarActive,this._createEditor.bind(this));e.on("click",_+i.sheetsBarAdd,this._onAddSelect.bind(this))},options:{name:"SheetsBar",scrollable:{distance:200}},events:["select","reorder","rename"],_createEditor:function(){if(this._editor){return}this._renderSheets(this._sheets,this._selectedIndex,true);this._editor=this.element.find(m.format("input{0}{1}",_,w.classNames.sheetsBarEditor)).focus().on("keydown",this._onEditorKeydown.bind(this)).on("blur",this._onEditorBlur.bind(this))},_destroyEditor:function(e){var t=e?null:this._editor.val();this._editor.off();this._editor=null;this._renderSheets(this._sheets,this._selectedIndex,false);this._onSheetRename(t)},renderSheets:function(e,t){if(!e||t<0){return}this._renderSheets(e,t,false)},_renderSheets:function(e,t,i){var n=this;var r;var a;var o=w.classNames;n._isRtl=m.support.isRtl(n.element);n._sheets=e;n._selectedIndex=t;n._renderHtml(i,true);if(!n._scrollableAllowed()){return}var s=n._sheetsWrapper();var l=s.children(_+o.sheetsBarPrev);var d=s.children(_+o.sheetsBarNext);var u=2;var c=n.element.find(_+o.sheetsBarAdd);var f=g(c)+c.position().left+u;var h=g(l)+u;var p=n._sheetsGroup();l.css({left:f});s.addClass(o.sheetsBarScrollable+b+o.sheetsBarSheetsWrapper);p.css({marginLeft:f});r=s[0].offsetWidth;a=p[0].scrollWidth;if(a+f>r){var v=Math.ceil(m.parseFloat(d.css("right")));if(!n._scrollableModeActive){n._nowScrollingSheets=false;n._scrollableModeActive=true}p.css({marginLeft:h+f,marginRight:g(d)+v+u})}else{if(n._scrollableModeActive&&a<=r){n._scrollableModeActive=false;p.css({marginLeft:f,marginRight:""})}else{p.css({marginLeft:f})}}n._toggleScrollButtons()},_toggleScrollButtons:function(e){var t=this;var i=t._sheetsGroup();var n=t._sheetsWrapper();var r=m.scrollLeft(i);var a=n.find(_+w.classNames.sheetsBarPrev);var o=n.find(_+w.classNames.sheetsBarNext);if(e===false){a.toggle(false);o.toggle(false)}else{a.toggle(t._isRtl?r<i[0].scrollWidth-i[0].offsetWidth-1:r!==0);o.toggle(t._isRtl?r!==0:r<i[0].scrollWidth-i[0].offsetWidth-1)}},_toggleScrollEvents:function(e){var t=this;var i=w.classNames;var n=t.options;var r;var a;var o=t._sheetsWrapper();r=o.children(_+i.sheetsBarPrev);a=o.children(_+i.sheetsBarNext);if(e){r.on("mousedown",function(){t._nowScrollingSheets=true;t._scrollSheetsByDelta(n.scrollable.distance*(t._isRtl?1:-1))});a.on("mousedown",function(){t._nowScrollingSheets=true;t._scrollSheetsByDelta(n.scrollable.distance*(t._isRtl?-1:1))});r.add(a).on("mouseup",function(){t._nowScrollingSheets=false})}else{r.off();a.off()}},_renderHtml:function(e,t){var i;var n=[];var r=m.dom;var a=r.element;var o=this._sheets;var s=this._selectedIndex;var l=w.classNames;for(i=0;i<o.length;i++){var d=o[i];var u=i===s;var c={className:l.sheetsBarKItem+b};var f=[];if(u){c.className+=l.sheetsBarKActive+b+l.sheetsBarActive}else{c.className+=l.sheetsBarInactive}if(u&&e){f.push(a("input",{type:"text",value:d.name(),className:l.sheetsBarKTextbox+b+l.sheetsBarEditor,maxlength:50},[]))}else{f.push(a("span",{className:l.sheetsBarKLink,title:d.name()},[r.text(d.name())]));if(o.length>1){var h=a("span",{className:l.sheetsBarKIcon+b+l.sheetsBarKFontIcon+b+l.sheetsBarKIconX},[]);f.push(a("span",{className:l.sheetsBarKLink+b+l.sheetsBarRemove},[h]))}}n.push(a("li",c,f))}this._tree.render([this._addButton(),this._createSheetsWrapper(n,t)])},_createSheetsWrapper:function(e,t){var i=m.dom.element;var n=w.classNames;var r=[i("ul",{className:n.sheetsBarKReset},e)];t=true;if(t){var a=n.sheetsBarKButton+b+n.sheetsBarKButtonBare+b;r.push(i("span",{className:a+n.sheetsBarPrev},[i("span",{className:n.sheetsBarKIcon+b+n.sheetsBarKArrowW},[])]));r.push(i("span",{className:a+n.sheetsBarNext},[i("span",{className:n.sheetsBarKIcon+b+n.sheetsBarKArrowE},[])]))}return i("div",{className:n.sheetsBarItems},r)},_createSortable:function(){var i=w.classNames;this._sortable=new m.ui.Sortable(this.element,{filter:m.format("ul li.{0},ul li.{1}",i.sheetsBarActive,i.sheetsBarInactive),container:_+i.sheetsBarItems,axis:"x",animation:false,ignore:"input",end:function(){if(this.draggable.hint){this.draggable.hint.remove()}},hint:function(e){var t=n(e).clone();return t.wrap("<div class='"+i.sheetsBarHintWrapper+"'><ul class='"+i.sheetsBarKResetItems+"'></ul></div>").closest("div")}})},_onEditorKeydown:function(e){if(this._editor){if(e.which===13){this._destroyEditor()}if(e.which===27){this._destroyEditor(true)}}},_onEditorBlur:function(){if(this._editor){this._destroyEditor()}},_onSheetReorderEnd:function(e){e.preventDefault();this.trigger("reorder",{oldIndex:e.oldIndex,newIndex:e.newIndex})},_onSheetReorderStart:function(e){if(this._editor){e.preventDefault()}},_onSheetRemove:function(e){var i=n(e.target).closest("li").text();if(this._editor){this._destroyEditor()}var t=function(e){var t=e.sender;if(t.isConfirmed()){this.trigger("remove",{name:i,confirmation:true})}}.bind(this);this._openDialog("confirmation",{close:t})},_onSheetSelect:function(e){var t=n(e.target).text();if(n(e.target).is(_+w.classNames.sheetsBarEditor)||!t){e.preventDefault();return}if(this._editor){this._destroyEditor()}this._scrollSheetsToItem(n(e.target).closest("li"));this.trigger("select",{name:t,isAddButton:false})},_onSheetRename:function(e){if(this._sheets[this._selectedIndex].name()===e||e===null){return}this.trigger("rename",{name:e,sheetIndex:this._selectedIndex})},_onAddSelect:function(){this.trigger("select",{isAddButton:true})},_addButton:function(){var e=m.dom.element;var t=w.classNames;return e("a",{className:t.sheetsBarAdd+b+t.sheetsBarKButton},[e("span",{className:t.sheetsBarKIcon+b+t.sheetsBarKFontIcon+b+t.sheetsBarKIconPlus},[])])},destroy:function(){this._sortable.destroy()},_scrollableAllowed:function(){var e=this.options;return e.scrollable&&!isNaN(e.scrollable.distance)},_scrollSheetsToItem:function(e){var t=this;if(!t._scrollableModeActive){return}var i=t._sheetsGroup();var n=m.scrollLeft(i);var r=g(e);var a=t._isRtl?e.position().left:e.position().left-i.children().first().position().left;var o=i[0].offsetWidth;var s=Math.ceil(parseFloat(i.css("padding-left")));var l;if(t._isRtl){if(a<0){l=n+a-(o-n)-s}else if(a+r>o){l=n+a-r+s*2}}else{if(n+o<a+r){l=a+r-o+s*2}else if(n>a){l=a-s}}i.finish().animate({scrollLeft:l},"fast","linear",function(){t._toggleScrollButtons()})},_sheetsGroup:function(){return this._sheetsWrapper().children("ul")},_sheetsWrapper:function(){return this.element.find(_+w.classNames.sheetsBarItems)},_scrollSheetsByDelta:function(e){var t=this;var i=t._sheetsGroup();var n=m.scrollLeft(i);i.finish().animate({scrollLeft:n+e},"fast","linear",function(){if(t._nowScrollingSheets){t._scrollSheetsByDelta(e)}else{t._toggleScrollButtons()}})}});m.spreadsheet.SheetsBar=w;n.extend(true,w,{classNames:e})})(window.kendo)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/calc",["spreadsheet/runtime"],e)})(function(){"use strict";var C=kendo.util;var l=kendo.spreadsheet;var r=l.Ref;var b=l.RangeRef;var w=l.CellRef;var k=l.NameRef;var e=l.calc;var p=e.runtime;var n=Object.create(null);var a=Object.create(null);(function(i){i.forEach(function(e,t){e.forEach(function(e){n[e]=i.length-t;a[e==","?";":e]=i.length-t})})})([[":"],[" "],[","],["%"],["^"],["*","/"],["+","-"],["&"],["=","<",">","<=",">=","<>"]]);var S=n;var T={DEC:".",ARG:",",COL:","};function o(e){T.DEC=e;T.ARG=e==","?";":",";T.COL=e==","?"\\":",";S=e==","?a:n}e.withDecimalSeparator=function(e,t){if(T.DEC==e){return t()}var i=T.DEC;o(e);try{return t()}finally{o(i)}};e._separators=T;var v=kendo.Class.extend({init:function e(t,i){this.message=t;this.pos=i},toString:function(){return this.message}});var g={type:"bool",value:true};var _={type:"bool",value:false};function y(e){e=e.toUpperCase();for(var t=0,i=0;i<e.length;++i){t=t*26+e.charCodeAt(i)-64}return t-1}function x(e){return parseInt(e,10)-1}function t(e,t){if(e.toLowerCase()=="#sheet"){return l.SHEETREF}e:{var i;if(i=/^(\$)?([a-z]+)(\$)?(\d+)$/i.exec(e)){var n=x(i[4]),r=y(i[2]);if(n<1048576&&r<16384){return new w(x(i[4]),y(i[2]))}break e}var a=A(e,{});var o=[];while(true){var s=a.next();if(s instanceof w){s.rel=0}else if(s instanceof b){s.topLeft.rel=0;s.bottomRight.rel=0}else{break e}o.push(s);if(a.eof()){break}if(!a.is("op",T.ARG)){break e}a.next()}return o.length==1?o[0]:new l.UnionRef(o)}if(!t){throw new Error("Cannot parse reference: "+e)}}function u(t,e,i,o){var n=[];o=A(o,{row:e,col:i});var s=o.is;return{type:"exp",ast:l(true),refs:n,sheet:t,row:e,col:i};function r(e){e.index=n.length;n.push(e);return e}function a(e,t,i){if(s(e,t)){return o.next()}else{var n=o.peek();if(n){o.croak("Expected "+e+" "+t+" but found "+n.type+" "+n.value+"")}else if(!i){o.croak("Expected "+e+" "+t+"")}}}function l(e){return m(p(f()),0,e)}function d(e){if(e.upper=="TRUE"||e.upper=="FALSE"){return e.upper=="TRUE"?g:_}return r(new k(e.value))}function u(){var e=o.next();e=e.value;a("punc","(");var t=[];while(1){if(s("punc",")")){break}if(s("op",T.ARG)){t.push({type:"null"});o.next();continue}t.push(l(false));if(o.eof()||s("punc",")")){break}a("op",T.ARG)}a("punc",")",true);return{type:"func",func:e,args:t}}function c(e){if(!e.hasSheet()){e.setSheet(t)}return r(e)}function f(){var e;if(s("ref")){e=c(o.next())}else if(s("func")){e=u()}else if(s("punc","(")){o.next();e=l(true);a("punc",")",true)}else if(s("punc","{")){o.next();e=h();a("punc","}",true)}else if(s("num")||s("str")||s("error")){e=o.next()}else if(s("sym")){e=d(o.next())}else if(s("op","+")||s("op","-")){e={type:"prefix",op:o.next().value,exp:f()}}else if(!o.peek()){o.croak("Incomplete expression")}else if(s("punc","[")){o.croak("External reference not supported")}else{o.croak("Parse error")}return v(e)}function h(){var e=[],t=[e],i=true;while(!o.eof()&&!s("punc","}")){if(i){i=false}else if(s(null,";")){t.push(e=[]);o.next()}else{a(null,T.COL)}e.push(l(false))}return{type:"matrix",value:t}}function p(e){if(s("punc","(")||s("ref")||s("num")||s("func")){return{type:"binary",op:" ",left:e,right:l(false)}}else{return e}}function v(e){if(s("op","%")){o.next();return v({type:"postfix",op:"%",exp:e})}else{return e}}function m(e,t,i){var n=s("op");if(n&&(i||n.value!=T.ARG)){var r=S[n.value];if(r>t){o.next();var a=m(f(),r,i);return m({type:"binary",op:n.value==";"?",":n.value,left:e,right:a},t,i)}}return e}}function i(e,t){var i=u(null,0,0,e);if(!(i.ast instanceof k)){throw new v("Invalid name: "+e)}i=i.ast;if(!(t instanceof r)){var n=u(i.sheet,0,0,t);if(n.ast instanceof r){t=n.ast}else if(/^(?:str|num|bool|error)$/.test(n.ast.type)){t=n.ast.value}else{t=h(n)}}return{name:i,value:t}}var s=function(i){return function(e){var t=i[e];if(!t){t=i[e]=new Function("'use strict';return("+e+")")()}return t}}(Object.create(null));function d(e){return s("function(row, col, mod){return("+i(e.ast,e,0)+")}");function i(n,r,a){switch(n.type){case"num":return"(kendo.spreadsheet.calc._separators.DEC == '.' ? "+JSON.stringify(JSON.stringify(n.value))+" : "+JSON.stringify(JSON.stringify(n.value))+".replace('.' , kendo.spreadsheet.calc._separators.DEC))";case"bool":return JSON.stringify(n.value);case"error":return JSON.stringify("#"+n.value);case"str":return JSON.stringify(JSON.stringify(n.value));case"ref":return"this.refs["+n.index+"].print(row, col, mod)";case"prefix":return e(function(){return JSON.stringify(n.op)+" + "+i(n.exp,n,S[n.op])});case"postfix":return e(function(){return i(n.exp,n,S[n.op])+" + "+JSON.stringify(n.op)});case"binary":return e(function(){var e=o(i(n.left,n,S[n.op]),n.left instanceof k&&n.op==":");var t=o(i(n.right,n,S[n.op]),n.right instanceof k&&n.op==":");if(/^[,;]/.test(n.op)){return e+" + kendo.spreadsheet.calc._separators.ARG + "+t}else{return e+" + "+JSON.stringify(n.op)+" + "+t}});case"func":return JSON.stringify(n.func+"(")+" + "+(n.args.length>0?n.args.map(function(e){return i(e,n,0)}).join(" + kendo.spreadsheet.calc._separators.ARG + ' ' + "):"''")+" + ')'";case"matrix":return"'{ ' + "+n.value.map(function(e){return e.map(function(e){return i(e,n,0)}).join(" + kendo.spreadsheet.calc._separators.COL + ' ' + ")}).join(" + '; ' + ")+"+ ' }'";case"null":return"''"}throw new Error("Cannot make printer for node "+n.type);function e(e){var t=n.op;var i=S[t]<a||!a&&t==","||r.type=="prefix"&&a==S[t]&&r.op=="-"||r.type=="binary"&&a==S[t]&&n===r.right;return o(e(),i)}}function o(e,t){return t?"'(' + "+e+" + ')'":e}}function c(e,t){var i=0;return s(e,t);function s(e,t){switch(e.type){case"ref":return n(e,t);case"num":case"str":case"null":case"error":case"bool":return r(e,t);case"prefix":case"postfix":return o(e,t);case"binary":return l(e,t);case"func":return f(e,t);case"lambda":return h(e,t);case"matrix":return p(e.value,t,true)}throw new Error("Cannot CPS "+e.type)}function n(e,t){return e.ref=="name"?a(e,t):r(e,t)}function r(e,t){return t(e)}function a(e,t){return{type:"func",func:",getname",args:[v(t),e]}}function o(e,t){return s({type:"func",func:"unary"+e.op,args:[e.exp]},t)}function l(e,t){return s({type:"func",func:"binary"+e.op,args:[e.left,e.right]},t)}function d(e,r,a,o){return s(e,function(e){var t=v(o);var i=m("T");var n=m("E");return{type:"func",func:"if",args:[t,e,{type:"lambda",vars:[i],body:s(r||g,function(e){return{type:"call",func:{type:"var",name:i},args:[e]}})},{type:"lambda",vars:[n],body:s(a||_,function(e){return{type:"call",func:{type:"var",name:n},args:[e]}})}]}})}function u(e,t){if(e.length===0){return r(g,t)}return s({type:"func",func:"IF",args:[e[0],{type:"func",func:"AND",args:e.slice(1)},_]},t)}function c(e,t){if(e.length===0){return r(_,t)}return s({type:"func",func:"IF",args:[e[0],g,{type:"func",func:"OR",args:e.slice(1)}]},t)}function f(e,t){switch(e.func.toLowerCase()){case"if":return d(e.args[0],e.args[1],e.args[2],t);case"and":return u(e.args,t);case"or":return c(e.args,t);case"true":return t(g);case"false":return t(_)}return function t(i,n){if(n==e.args.length){return{type:"func",func:e.func,args:i}}else{return s(e.args[n],function(e){return t(i.concat([e]),n+1)})}}([v(t)],0)}function h(e,t){var i=m("K");var n=s(e.body,function(e){return{type:"call",func:{type:"var",value:i},args:[e]}});return t({type:"lambda",vars:[i].concat(e.vars),body:n})}function p(e,n,r){var a=[];return function t(i){if(i==e.length){return n({type:"matrix",value:a})}else{return(r?p:s)(e[i],function(e){a[i]=e;return t(i+1)})}}(0)}function v(e){var t=m("R");return{type:"lambda",vars:[t],body:e({type:"var",name:t})}}function m(e){if(!e){e=""}e="_"+e;return e+ ++i}}var f=Object.create(null);function h(e){var t=d(e);var i=t.call(e);var n=f[i];if(n){return n.clone(e.sheet,e.row,e.col)}var r=a(c(e.ast,function(e){return{type:"return",value:e}}));r=["function(){","var context = this, refs = context.formula.absrefs",r,"}"].join(";\n");n=new p.Formula(e.refs,s(r),t,e.sheet,e.row,e.col);f[i]=n.clone(e.sheet,e.row,e.col);return n;function a(e){var t=e.type;if(t=="num"){return e.value+""}else if(t=="str"){return JSON.stringify(e.value)}else if(t=="error"){return"context.error("+JSON.stringify(e.value)+")"}else if(t=="return"){return"context.resolve("+a(e.value)+")"}else if(t=="func"){return"context.func("+JSON.stringify(e.func)+", "+a(e.args[0])+", "+o(e.args.slice(1))+")"}else if(t=="call"){return a(e.func)+"("+e.args.map(a).join(", ")+")"}else if(t=="ref"){return"refs["+e.index+"]"}else if(t=="bool"){return""+e.value}else if(t=="if"){return"(context.bool("+a(e.co)+") ? "+a(e.th)+" : "+a(e.el)+")"}else if(t=="lambda"){return"(function("+e.vars.join(", ")+"){ return("+a(e.body)+") })"}else if(t=="var"){return e.name}else if(t=="matrix"){return o(e.value)}else if(t=="null"){return"null"}else{throw new Error("Cannot compile expression "+t)}}function o(e){return"[ "+e.map(a).join(", ")+" ]"}}function D(e){return e}function A(s,l){s=M(R(s),l);var i=s.ahead;var u=s.skip;var t=null;var d=l.row!=null&&l.col!=null?function(e){if(e.rel&1){e.col-=l.col}if(e.rel&2){e.row-=l.row}return e}:D;var c=l.forEditor?function(e,t,i){e.begin=t.begin;e.end=i.end;return e}:D;return{peek:n,next:r,croak:s.croak,eof:s.eof,is:e};function e(e,t){var i=n();return i!=null&&(e==null||i.type===e)&&(t==null||i.value===t)?i:null}function n(){if(t==null){t=a()}return t}function r(){if(t!=null){var e=t;t=null;return e}return a()}function a(){var e;var t=s.peek();if(t){if(t.type=="sym"||t.type=="rc"||t.type=="num"){e=i(8,o)||i(6,h)||i(6,p)||i(4,v)||i(4,m)||i(2,g)||i(2,_)}if(!e){e=s.next()}}return e}function f(e,t){if(e.type=="rc"){if(e.rel&&!l.forEditor&&(l.row==null||l.col==null)){s.croak("Cannot read relative cell in RC notation")}return new w(e.row,e.col,e.rel)}if(e.type=="num"){if(e.value<=1048577){return d(new w(x(e.value),t?-Infinity:+Infinity,2))}else{return null}}var i=e.value;var n=/^(\$)?([a-z]+)(\$)?(\d+)$/i.exec(i);if(n){var r=x(n[4]),a=y(n[2]);if(r<=1048576&&a<=16383){return d(new w(x(n[4]),y(n[2]),(n[1]?0:1)|(n[3]?0:2)))}else{return null}}var o=i.charAt(0)=="$";if(o){i=i.substr(1)}if(/^\d+$/.test(i)){var r=x(i);if(r<=1048576){return d(new w(x(i),t?-Infinity:+Infinity,o?0:2))}}else{var a=y(i);if(a<=16383){return d(new w(t?-Infinity:+Infinity,y(i),o?0:1))}}}function o(e,t,i,n,r,a,o,s){if(e.type=="sym"&&t.type=="op"&&t.value==":"&&i.type=="sym"&&n.type=="punc"&&n.value=="!"&&(r.type=="sym"||r.type=="rc"||r.type=="num"&&r.value==r.value|0)&&a.type=="op"&&a.value==":"&&(o.type=="sym"||o.type=="rc"||o.type=="num"&&o.value==o.value|0)&&o.type==r.type&&!(s.type=="punc"&&s.value=="("&&!o.space)){var l=f(r,true),d=f(o,false);if(l&&d){u(7);return c(new b(l.setSheet(e.value,true),d.setSheet(i.value,true)).setSheet(e.value,true),e,o)}}}function h(e,t,i,n,r,a){if(e.type=="sym"&&t.type=="op"&&t.value==":"&&i.type=="sym"&&n.type=="punc"&&n.value=="!"&&(r.type=="sym"||r.type=="rc"||r.type=="num"&&r.value==r.value|0)&&!(a.type=="punc"&&a.value=="("&&!r.space)){var o=f(r);if(o){u(5);var s=o.clone();return c(new b(o.setSheet(e.value,true),s.setSheet(i.value,true)).setSheet(e.value,true),e,r)}}}function p(e,t,i,n,r,a){if(e.type=="sym"&&t.type=="punc"&&t.value=="!"&&(i.type=="sym"||i.type=="rc"||i.type=="num"&&i.value==i.value|0)&&n.type=="op"&&n.value==":"&&(r.type=="sym"||r.type=="rc"||r.type=="num"&&r.value==r.value|0)&&!(a.type=="punc"&&a.value=="("&&!r.space)){var o=f(i,true),s=f(r,false);if(o&&s){u(5);return c(new b(o,s).setSheet(e.value,true),e,r)}}}function v(e,t,i,n){if(e.type=="sym"&&t.type=="punc"&&t.value=="!"&&(i.type=="sym"||i.type=="rc"||i.type=="num"&&i.value==i.value|0)&&!(n.type=="punc"&&n.value=="("&&!i.space)){u(3);var r=f(i);if(!r||!isFinite(r.row)){r=new k(i.value)}return c(r.setSheet(e.value,true),e,i)}}function m(e,t,i,n){if((e.type=="sym"||e.type=="rc"||e.type=="num"&&e.value==e.value|0)&&(t.type=="op"&&t.value==":")&&(i.type=="sym"||i.type=="rc"||i.type=="num"&&i.value==i.value|0)&&!(n.type=="punc"&&n.value=="("&&!i.space)){var r=f(e,true),a=f(i,false);if(r&&a){u(3);return c(new b(r,a),e,i)}}}function g(e,t){if((e.type=="sym"||e.type=="rc")&&!(t.type=="punc"&&t.value=="("&&!e.space)){var i=f(e);if(i&&isFinite(i.row)&&isFinite(i.col)){u(1);return c(i,e,e)}}}function _(e,t){if(e.type=="sym"&&t.type=="punc"&&t.value=="("&&!e.space){e.type="func";u(1);return e}}}function E(e){return" \t\r\n".indexOf(e)>=0}var I={type:"eof"};function M(n,i){var r=[],a=0;var o=n.readWhile;return{next:k,peek:t,eof:x,croak:n.croak,ahead:e,skip:y};function s(e){return/[0-9]/i.test(e)}function l(e){return/[a-z$_]/i.test(e)||C.isUnicodeLetter(e)}function d(e){return l(e)||s(e)||e=="."}function u(e){return e in S}function c(e){return"\\!;(){}[]".indexOf(e)>=0}function f(){var t=false;var e=o(function(e){if(e==T.DEC){if(t){return false}t=true;return true}return s(e)});if(e==T.DEC){return{type:"punc",value:T.DEC}}else{return{type:"num",value:parseFloat(e.replace(T.DEC,"."))}}}function h(e,t){return{type:"sym",value:e,upper:e.toUpperCase(),space:E(n.peek()),quote:t}}function p(e,t,i){if(!e&&!t&&!i){return null}if(!e&&!i||e&&i){var n=t?parseInt(t,10):0;return e?n:n-1}}function v(){var e=n.lookingAt(/^R(\[)?(-?[0-9]+)?(\])?C(\[)?(-?[0-9]+)?(\])?/i);if(e){var t=p(e[1],e[2],e[3]);var i=p(e[4],e[5],e[6]);if(t!=null&&i!=null){n.skip(e);return{type:"rc",row:t,col:i,rel:(e[4]||!(e[4]||e[5]||e[6])?1:0)|(e[1]||!(e[1]||e[2]||e[3])?2:0)}}}return h(o(d))}function m(){n.next();return{type:"str",value:n.readEscaped('"')}}function g(){n.next();return h(n.readEscaped("'"),true)}function _(){return{type:"op",value:o(function(e,t){return t+e in S})}}function b(){return{type:"punc",value:n.next()}}function w(){if(n.eof()){return null}var e=n.peek(),t;if(e=='"'){return m()}if(e=="'"){return g()}if(s(e)||e==T.DEC){return f()}if(l(e)){return v()}if(u(e)){return _()}if(c(e)){return b()}if(t=n.lookingAt(/^#([a-z\/]+)[?!]?/i)){n.skip(t);return{type:"error",value:t[1]}}if(!i.forEditor){n.croak("Can't handle character with code: "+e.charCodeAt(0))}return{type:"error",value:n.next()}}function t(){while(r.length<=a){o(E);var e=n.pos();var t=w();if(i.forEditor&&t){t.begin=e;t.end=n.pos()}r.push(t)}return r[a]}function k(){var e=t();if(e){a++}return e}function e(e,t){var i=a,n=[];while(e-- >0){n.push(k()||I)}a=i;return t.apply(n,n)}function y(e){a+=e}function x(){return t()==null}}function R(i){var n=0,t=1,r=0;return{next:a,peek:o,eof:s,croak:l,readWhile:f,readEscaped:c,lookingAt:h,skip:d,forward:u,pos:e};function e(){return n}function a(){var e=i.charAt(n++);if(e=="\n"){t++;r=0}else{r++}return e}function o(){return i.charAt(n)}function s(){return o()===""}function l(e){throw new v(e+" (input: "+i+")",n)}function d(e){if(typeof e=="string"){if(i.substr(n,e.length)!=e){l("Expected "+e)}u(e.length)}else if(e instanceof RegExp){var t=e.exec(i.substr(n));if(t){u(t[0].length);return t}}else{u(e[0].length)}}function u(e){while(e-- >0){a()}}function c(e){var t=false,i="";while(!s()){var n=a();if(t){i+=n;t=false}else if(n=="\\"){t=true}else if(n==e){break}else{i+=n}}return i}function f(e){var t="";while(!s()&&e(o(),t)){t+=a()}return t}function h(e){return e.exec(i.substr(n))}}var m=[];var F=e.registerFormatParser=function(e){m.push(e)};e.parse=function(e,t,i,n,r){if(n instanceof Date){return{type:"date",value:p.dateToSerial(n)}}if(typeof n=="number"){return{type:"number",value:n}}if(typeof n=="boolean"){return{type:"boolean",value:n}}n+="";if(/^'/.test(n)){return{type:"string",value:n.substr(1)}}if(/^-?[0-9]+%$/.test(n)){var a=n.substr(0,n.length-1);var o=parseFloat(a);if(!isNaN(o)&&o==a){return{type:"percent",value:o/100}}}if(/^=/.test(n)){n=n.substr(1);if(/\S/.test(n)){return u(e,t,i,n)}else{return{type:"string",value:"="+n}}}for(var s=0;s<m.length;++s){var l=m[s](n);if(l){return l}}if(n.toLowerCase()=="true"){return{type:"boolean",value:true}}if(n.toLowerCase()=="false"){return{type:"boolean",value:false}}var d=p.parseDate(n,r);if(d){return{type:"date",value:p.dateToSerial(d)}}var o=parseFloat(n);if(!isNaN(o)&&n.length>0&&o==n){r=null;if(o!=Math.floor(o)){r="0."+String(o).split(".")[1].replace(/\d/g,"0")}return{type:"number",value:o,format:r}}return{type:"string",value:n}};function B(t,i,n){var e=[];t=A(t,{forEditor:true,row:i,col:n});while(!t.eof()){e.push(a())}var r=e[0];if(r.type=="op"&&r.value=="="){r.type="startexp"}return e;function a(){var e=t.next();if(e.type=="sym"){if(e.upper=="TRUE"){e.type="bool";e.value=true}else if(e.upper=="FALSE"){e.type="bool";e.value=false}}else if(e.type=="ref"){e={type:"ref",ref:i!=null&&n!=null?e.absolute(i,n):e,begin:e.begin,end:e.end}}return e}}function L(e,t,i){t=t||0;i=i||0;e=A(e,{row:t,col:i});var n=[];while(!e.eof()){var r=e.next();if(r.type!="ref"){throw new v("Expecting a reference but got: "+JSON.stringify(r))}n.push(r.absolute(t,i))}return n}e.parseNameDefinition=i;e.parseFormula=u;e.parseReference=t;e.compile=h;e.parseSqref=L;e.InputStream=R;e.ParseError=v;e.tokenize=B;F(function(e){var t,i=0,n="";if(t=/^(\d+)([-\/.])(\d+)\2(\d{2}(?:\d{2})?)(\s*)/.exec(e)){var r=parseInt(t[1],10);var a=t[2];var o=parseInt(t[3],10);var s=parseInt(t[4],10);if(s<30){s+=2e3}else if(s<100){s+=1900}var l=true;if(r>12){var d=r;r=o;o=d;l=false}if(!p.validDate(s,r,o)){return null}i=p.packDate(s,r-1,o);if(i<0){i--}if(l){n=["mm","dd","yyyy"].join(a)}else{n=["dd","mm","yyyy"].join(a)}n+=t[5];e=e.substr(t[0].length)}if(t=/^(\d+):(\d+)$/.exec(e)){var u=parseInt(t[1],10);var c=parseInt(t[2],10);return{type:"date",format:n+"hh:mm",value:i+p.packTime(u,c,0,0)}}if(t=/^(\d+):(\d+)(\.\d+)$/.exec(e)){var c=parseInt(t[1],10);var f=parseInt(t[2],10);var h=parseFloat(t[3])*1e3;return{type:"date",format:n+"mm:ss.00",value:i+p.packTime(0,c,f,h)}}if(t=/^(\d+):(\d+):(\d+)$/.exec(e)){var u=parseInt(t[1],10);var c=parseInt(t[2],10);var f=parseInt(t[3],10);return{type:"date",format:n+"hh:mm:ss",value:i+p.packTime(u,c,f,0)}}if(t=/^(\d+):(\d+):(\d+)(\.\d+)$/.exec(e)){var u=parseInt(t[1],10);var c=parseInt(t[2],10);var f=parseInt(t[3],10);var h=parseFloat(t[4])*1e3;return{type:"date",format:n+"hh:mm:ss.00",value:i+p.packTime(u,c,f,h)}}});F(function(e){var t,i;var n=kendo.culture();var r=n.numberFormat[","];var a=n.numberFormat["."];var o=n.numberFormat.currency.symbol;var s=H(r,a);var l=new RegExp("^\\s*\\"+o+"\\s*");var d=1;var u="";var c="";var f=false;var h=false;e=R(e.replace(/^\s+|\s+$/g,""));if(e.skip(/^-\s*/)){d=-1}if(t=e.skip(l)){f=true;u+='"'+t[0]+'"'}if(e.skip(/^-\s*/)){if(d<0){return null}d=-1}if(!(i=e.skip(s))){return null}u+="0";if(t=e.skip(l)){if(f){return null}f=true;c='"'+t[0]+'"'}if(!f&&(t=e.skip(/^\s*%\s*/))){h=true;c=t[0]}if(!e.eof()){return null}if(i[2]||f){u=u.replace("0","#");u+=",0"}if(i[3]){u+="."+z("0",i[3].length-1)}var p=i[0].replace(new RegExp("\\"+r,"g"),"").replace(new RegExp("\\"+a,"g"),".");p=parseFloat(p);if(h){p/=100}u+=c;if(f){u+=";-"+u}return{type:"number",currency:f,format:u,value:d*p}});F(function(e){var t;if(t=/^([0-9]*)\.([0-9]+)(\s*%)$/.exec(e)){return{type:"number",value:parseFloat(e)/100,format:"0."+z("0",t[2].length)+t[3]}}});var P={};function H(e,t){var i=e+t;var n=P[i];if(!n){n="^(\\d+(COM\\d{3})*(DOT\\d+)?)";n=n.replace(/DOT/g,"\\"+t).replace(/COM/g,"\\"+e);n=new RegExp(n);P[i]=n}return n}function z(e,t){var i="";while(t-- >0){i+=e}return i}},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/excel-reader",["kendo.core","kendo.color","util/parse-xml","spreadsheet/calc"],e)})(function(){"use strict";var n=kendo.jQuery;var r=kendo.util.parseXML;var F=kendo.spreadsheet.calc.parseReference;var d={greaterThanOrEqual:"greaterThanOrEqualTo",lessThanOrEqual:"lessThanOrEqualTo"};var h=null;function e(e,i,n){var t=new FileReader;t.onload=function(e){var t=new JSZip(e.target.result);l(t,i,n)};t.readAsArrayBuffer(e)}var P=["sheetData","row","c"];var z=["cols","col"];var a=["definedNames","definedName"];var B=["sheetData","row","c","f"];var L=["mergeCells","mergeCell"];var Y=["sheetViews","sheetView","pane"];var H=["sheetData","row"];var Q=["sheetViews","sheetView","selection"];var y=["sheets","sheet"];var X=["sheetData","row","c","is"];var x=["t"];var C=["si"];var Z=["sheetData","row","c","v"];var S=["bookViews","workbookView"];var J=["sheetViews","sheetView"];var ee=["hyperlinks","hyperlink"];var te=["dataValidations","dataValidation"];var ie=["dataValidations","dataValidation","formula1"];var ne=["dataValidations","dataValidation","formula2"];var re=["x14:dataValidations","x14:dataValidation"];var ae=["x14:dataValidations","x14:dataValidation","xm:sqref"];var oe=["x14:dataValidations","x14:dataValidation","x14:formula1","xm:f"];var se=["x14:dataValidations","x14:dataValidation","x14:formula2","xm:f"];var o=["commentList","comment"];var s=["authors","author"];var T=["t"];function u(e){if(!/^\//.test(e)){if(!/^xl\//.test(e)){e="xl/"+e}}else{e=e.substr(1)}return e}function l(o,s,t){h=s.excelImportErrors=[];var l=p(o);var d=G(o,"_rels/workbook.xml");var e=b(o,d.byType.theme[0]);var u=_(o,e);var c=[];var f=0;j(o,"xl/workbook.xml",{enter:function(e,t){if(this.is(y)){var i=t["r:id"];var n=d.byId[i];var r=t.name;var a=I(o,n);s.options.columnWidth=a.columnWidth||s.options.columnWidth;s.options.rowHeight=a.rowHeight||s.options.rowHeight;c.push({workbook:s,zip:o,strings:l,styles:u,file:n,options:{name:r,rows:Math.max(s.options.rows||0,a.rows),columns:Math.max(s.options.columns||0,a.cols),columnWidth:a.columnWidth,rowHeight:a.rowHeight}})}else if(this.is(S)){if(t.activeTab){f=q(t.activeTab)}}},text:function(e){var t=this.is(a);if(t&&!($(t["function"])||$(t.vbProcedure))){var i=t.localSheetId;var n=null;if(i!=null){n=c[i].options.name}var r=t.name;if(r!="_xlnm._FilterDatabase"){if(n){r="'"+n.replace(/\'/g,"\\'")+"'!"+r}W(n,null,function(){s.defineName(r,e,$(t.hidden))},"reading user-defined name: "+r)}}}});var i=new n.Deferred;i.progress(function(e){if(t){t.notify(e)}}).then(function(){var e=s.sheets();E(e);s.activeSheet(e[f]);if(t){t.resolve()}});D(c,s,i)}function D(a,o,s){var e=(new n.Deferred).resolve();for(var t=0;t<a.length;t++){(function(n,r){e=e.then(function(){var e=o.insertSheet(n.options);e.suspendChanges(true);var t=A(e,n);var i={sheet:e,progress:r/(a.length-1)};t.then(function(){s.notify(i)});return t})})(a[t],t)}e.then(function(){s.resolve()})}function A(e,t){var i=new n.Deferred;setTimeout(function(){c(t.zip,t.file,e,t.strings,t.styles);i.resolve()},0);return i}function E(e){for(var t=0;t<e.length;t++){e[t].suspendChanges(false).triggerChange({recalc:true})}}function I(e,t){var n={rows:0,cols:0};j(e,u(t),{enter:function(e,t){if(e=="dimension"){var i=F(t.ref);if(i.bottomRight){n.cols=i.bottomRight.col+1;n.rows=i.bottomRight.row+1}}else if(e==="sheetFormatPr"){if(t.defaultColWidth){n.columnWidth=N(parseFloat(t.defaultColWidth))}if(t.defaultRowHeight){n.rowHeight=O(parseFloat(t.defaultRowHeight))}}else if(this.is(H)){this.exit()}}});return n}function N(e){var t=7;var i=(256*e+Math.floor(128/t))/256;return i*t}function O(e){return e*(4/3)}function c(e,t,p,r,v){var m={};var g,_,b,w,k,a;var y=p._columns._count;var x=null;var i=t.replace(/worksheets\//,"worksheets/_rels/");var C=G(e,i);var o,s;var S;var T;var D;var A;var E;var I;var M=[];h=p._workbook.excelImportErrors;t=u(t);j(e,t,{enter:function(e,t,i){var n;if(this.is(B)){if(i){if(t.t=="shared"&&t.si!=null){w=p.range(m[t.si])._get("formula")}}}else if(this.is(P)){b=null;w=null;g=t.r;k=null;if(g==null){g=F(x);g.col++;g=g.toString()}x=g;_=t.t;var r=t.s;if(r!=null){U(p,g,v,r)}}else if(this.is(L)){p.range(t.ref).merge()}else if(this.is(z)){var a=q(t.min)-1;var o=Math.min(y,q(t.max))-1;var s;if(t.width){s=N(parseFloat(t.width));if(s!==0){p._columns.values.value(a,o,s)}}if(t.hidden==="1"||s===0){for(var l=a;l<=o;l++){p.hideColumn(l)}}if(t.style!=null){U(p,new kendo.spreadsheet.RangeRef(new kendo.spreadsheet.CellRef(-Infinity,a),new kendo.spreadsheet.CellRef(+Infinity,o)),v,t.style)}}else if(this.is(H)){var d=q(t.r)-1;var u;if(t.ht){u=O(parseFloat(t.ht));if(u!==0){p._rows.values.value(d,d,u)}}if(t.hidden==="1"||u===0){p.hideRow(d)}}else if(this.is(Q)){if(t.activeCell){var c=F(t.activeCell);p.select(c,true)}}else if(this.is(Y)){if(t.state&&t.state.indexOf("frozen")>-1){if(t.xSplit){p.frozenColumns(q(t.xSplit))}if(t.ySplit){p.frozenRows(q(t.ySplit))}}}else if(this.is(J)){p.showGridLines($(t.showGridLines,true))}else if(this.is(ee)){var f=t["r:id"];var h=C.byId[f];if(h){p.range(t.ref).link(h)}}else if(this.is(["autoFilter"])){S=t.ref;if(i){R()}}else if(S){if(this.is(["filterColumn"])){T=parseInt(t.colId,10)}else if(this.is(["customFilters"])){D=$(t.and)?"and":"or";A=[]}else if(this.is(["customFilter"])){n=ue(t.operator,t.val);if(n){A.push({operator:n.operator,value:n.value})}}else if(this.is(["dynamicFilter"])){M.push({column:T,filter:new kendo.spreadsheet.DynamicFilter({type:ce(t.type)})})}else if(this.is(["top10"])){M.push({column:T,filter:new kendo.spreadsheet.TopFilter({value:V(t.val),type:function(e,t){return e&&t?"topPercent":t?"topNumber":e?"bottomPercent":"bottomNumber"}($(t.percent),$(t.top))})})}else if(this.is(["filters"])){E=$(t.blank);I=[]}else if(this.is(["filter"])){I.push(V(t.val))}}},leave:function(e,n){if(this.is(B)){if(!w&&n.t=="shared"&&n.si!=null){w=p.range(m[n.si])._get("formula")}}else if(this.is(P)){if(w!=null){var t=W(p,k||g,function(){p.range(k||g).formula(w,a)},"parsing formula");if(t){p.range(k||g).value(w).background("#ffaaaa")}}else if(b!=null){var i=p.range(g);if(!i._get("formula")){if(!_||_=="n"){b=parseFloat(b)}else if(_=="s"){b=r[q(b)]}else if(_=="b"){b=b==="1"}else if(_=="d"){b=kendo.parseDate(b)}if(b!=null){i.value(b)}}}}else if(this.is(te)||this.is(re)){(function(){var e=kendo.spreadsheet.calc.parseSqref(n.sqref);var t=n.type.toLowerCase();var i=n.operator;if(/^(?:whole|decimal)$/.test(t)){t="number"}else if(t=="list"){i="list"}if(!i&&/^(?:number|date)$/.test(t)){i="between"}e.forEach(function(e){W(p,e,function(){p.range(e).validation({type:$(n.showErrorMessage,true)?"reject":"warning",from:o,to:s,dataType:t,comparerType:d[i]||i,allowNulls:$(n.allowBlank),showButton:$(n.showDropDown)||t=="date"||t=="list",messageTemplate:n.error,titleTemplate:n.errorTitle})},"parsing validation")})})()}else if(e=="cols"){p._columns._refresh()}else if(e=="sheetData"){p._rows._refresh()}else if(e=="autoFilter"){R()}else if(S){if(e=="customFilters"){M.push({column:T,filter:new kendo.spreadsheet.CustomFilter({logic:D,criteria:A})})}else if(e=="filters"){M.push({column:T,filter:new kendo.spreadsheet.ValueFilter({values:I,blanks:E})})}}},text:function(e){var t;if(this.is(Z)||this.is(X)){b=e}else if(t=this.is(B)){w=e;a=t.t=="array";if(a){k=t.ref}else if(t.t=="shared"){m[t.si]=g}}else if(this.is(ie)||this.is(oe)){o=e}else if(this.is(ne)||this.is(se)){s=e}else if(this.is(ae)){this.stack[this.stack.length-2].sqref=e}}});if(C.byType.comments){var n=K(t,C.byType.comments[0]);de(e,n,p)}if(C.byType.drawing){var l=K(t,C.byType.drawing[0]);le(e,l,p)}function R(){p.range(S).filter(M);S=null}}function M(e){var t=/\.([^.]+)$/.exec(e);if(t&&t[1]){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif"}[t[1].toLowerCase()]}}function R(e){var t=/[^\/]+$/.exec(e);return t&&t[0]}function le(o,s,l){var r=["xdr:twoCellAnchor"];var n=["xdr:ext"];var a=["xdr:oneCellAnchor"];var d=["xdr:from"];var u=["xdr:to"];var t=["xdr:row"];var i=["xdr:col"];var c=["xdr:rowOff"];var f=["xdr:colOff"];var h=["xdr:blipFill","a:blip"];var e=s.replace(/drawings\//,"drawings/_rels/");var p=G(o,e);if(p.byType.image){Object.keys(p.byId).forEach(function(e){var t=K(s,p.byId[e]);var i=M(t);if(i){var n=o.files[t].asArrayBuffer();var r=R(t);var a=r&&!(kendo.support.browser.msie||kendo.support.browser.edge)?new window.File([n],r,{type:i}):new window.Blob([n],{type:i});p.byId[e]=l._workbook.addImage(a)}})}var v,m,g,_;j(o,s,{enter:function(e,t){if(this.is(r)||this.is(a)){v={}}else if(this.is(d)||this.is(u)){m={}}else if(this.is(h)){var i=t["r:embed"];v.image=p.byId[i]}else if(this.is(n)){g=k(parseFloat(t.cx));_=k(parseFloat(t.cy))}},leave:function(){if(this.is(d)){v.topLeftCell=new kendo.spreadsheet.CellRef(m.row,m.col);v.offsetX=k(m.colOffset);v.offsetY=k(m.rowOffset)}else if(this.is(u)){v.brCell=new kendo.spreadsheet.CellRef(m.row,m.col);v.brX=k(m.colOffset);v.brY=k(m.rowOffset)}else if(this.is(r)&&v.image){var e=l._columns.sum(0,v.topLeftCell.col-1)+v.offsetX;var t=l._rows.sum(0,v.topLeftCell.row-1)+v.offsetY;var i=l._columns.sum(0,v.brCell.col-1)+v.brX;var n=l._rows.sum(0,v.brCell.row-1)+v.brY;l.addDrawing({topLeftCell:v.topLeftCell,offsetX:v.offsetX,offsetY:v.offsetY,width:g!=null?g:i-e,height:_!=null?_:n-t,image:v.image,opacity:1})}else if(this.is(a)&&v.image){l.addDrawing({topLeftCell:v.topLeftCell,offsetX:v.offsetX,offsetY:v.offsetY,width:g,height:_,image:v.image,opacity:1})}},text:function(e){if(this.is(t)){m.row=parseFloat(e)}else if(this.is(i)){m.col=parseFloat(e)}else if(this.is(c)){m.rowOffset=parseFloat(e)}else if(this.is(f)){m.colOffset=parseFloat(e)}}})}function de(e,t,i){var n=[];var r;var a;j(e,t,{enter:function(e,t){if(this.is(o)){a={author:n[t.authorId],ref:t.ref,text:""}}else if(this.is(s)){r=""}},leave:function(){if(this.is(o)){i.range(a.ref).comment(a.text)}else if(this.is(s)){n.push(r)}},text:function(e){if(this.is(T)){a.text+=e}else if(this.is(s)){r+=e}}})}function ue(e,t){var i={equal:"eq",notEqual:"ne",greaterThan:"gt",greaterThanOrEqual:"gte",lessThan:"lt",lessThanOrEqual:"lte"}[e];t=V(t);if(i&&typeof t=="number"){return{operator:i,value:t}}if((e=="notEqual"||!e)&&typeof t=="string"){return{operator:e?"doesnotmatch":"matches",value:t}}}function ce(e){return{Q1:"quarter1",Q2:"quarter2",Q3:"quarter3",Q4:"quarter4",M1:"january",M2:"february",M3:"march",M4:"april",M5:"may",M6:"june",M7:"july",M8:"august",M9:"september",M10:"october",M11:"november",M12:"december"}[e.toUpperCase()]||e}function V(e){var t=parseFloat(e);if(!isNaN(t)&&t==e){return t}return e}function W(t,i,e,n){try{e();return false}catch(e){var r={context:n,error:String(e)};if(t&&t.name){r.sheet=t.name()}else if(t){r.sheet=t}if(i){r.location=String(i)}h.push(r);return true}}var fe={none:0,thin:1,medium:2,dashed:1,dotted:1,thick:3,double:3,hair:1,mediumDashed:2,dashDot:1,mediumDashDot:2,dashDotDot:1,mediumDashDotDot:2,slantDashDot:1};var he={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"mm-dd-yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@"};function U(e,t,i,n){var o=e.range(t);var r=i.inlineStyles[n],a,s;if(r.xfId){a=i.namedStyles[r.xfId]}if(f("applyBorder","borderId")){c(i.borders[s])}if(f("applyFont","fontId")){u(i.fonts[s])}if(f("applyAlignment","textAlign")){o.textAlign(s)}if(f("applyAlignment","verticalAlign")){o.verticalAlign(s)}if(f("applyAlignment","indent")){o.indent(s)}if(f("applyAlignment","wrapText")){o._property("wrap",s)}if(f("applyFill","fillId")){d(i.fills[s])}if(f("applyNumberFormat","numFmtId")){l(i.numFmts[s]||he[s])}function l(e){var t=typeof e=="string"?e:e.formatCode;if(t!=null&&!/^general$/i.test(t)){t=t.replace(/^\[\$-[0-9]+\]/,"");o.format(t)}}function d(e){if(e.type=="solid"){o.background(e.color)}}function u(e){o.fontFamily(e.name);if(e.size){o._property("fontSize",e.size*4/3)}if(e.bold){o.bold(true)}if(e.italic){o.italic(true)}if(e.underline){o.underline(true)}if(e.color){o.color(e.color)}}function c(a){function e(e,t){var i=a[e];if(!i){return}var n=fe[i.style];if(n===0){return}var r=i.color;if(r==null){r="#000"}o._property(t,{size:n,color:r})}e("left","borderLeft");e("top","borderTop");e("right","borderRight");e("bottom","borderBottom")}function f(e,t){var i=r[e];if(i!=null&&!i){return false}s=r[t];if(a&&s==null){i=a[e];if(i!=null&&!i){return false}s=a[t]}return s!=null}}function j(e,t,i){var n=e.files[t];if(n){r(n.asUint8Array(),i)}}function p(e){var t=[];var i=null;j(e,"xl/sharedStrings.xml",{leave:function(){if(this.is(C)){t.push(i);i=null}},text:function(e){if(this.is(x)){if(i==null){i=""}i+=e}}});return t}function G(e,t){var r={byId:{},byType:{theme:[]}};j(e,u(t)+".rels",{enter:function(e,t){if(e=="Relationship"){r.byId[t.Id]=t.Target;var i=t.Type.match(/\w+$/)[0];var n=r.byType[i]||[];n.push(t.Target);r.byType[i]=n}}});return r}var f=["borders","border"];var v=["fills","fill"];var m=["fonts","font"];var pe=["cellXfs","xf"];var ve=["cellStyleXfs","xf"];var me=["numFmts","numFmt"];var g=[w("FF000000"),w("FFFFFFFF"),w("FFFF0000"),w("FF00FF00"),w("FF0000FF"),w("FFFFFF00"),w("FFFF00FF"),w("FF00FFFF"),w("FF000000"),w("FFFFFFFF"),w("FFFF0000"),w("FF00FF00"),w("FF0000FF"),w("FFFFFF00"),w("FFFF00FF"),w("FF00FFFF"),w("FF800000"),w("FF008000"),w("FF000080"),w("FF808000"),w("FF800080"),w("FF008080"),w("FFC0C0C0"),w("FF808080"),w("FF9999FF"),w("FF993366"),w("FFFFFFCC"),w("FFCCFFFF"),w("FF660066"),w("FFFF8080"),w("FF0066CC"),w("FFCCCCFF"),w("FF000080"),w("FFFF00FF"),w("FFFFFF00"),w("FF00FFFF"),w("FF800080"),w("FF800000"),w("FF008080"),w("FF0000FF"),w("FF00CCFF"),w("FFCCFFFF"),w("FFCCFFCC"),w("FFFFFF99"),w("FF99CCFF"),w("FFFF99CC"),w("FFCC99FF"),w("FFFFCC99"),w("FF3366FF"),w("FF33CCCC"),w("FF99CC00"),w("FFFFCC00"),w("FFFF9900"),w("FFFF6600"),w("FF666699"),w("FF969696"),w("FF003366"),w("FF339966"),w("FF003300"),w("FF333300"),w("FF993300"),w("FF993366"),w("FF333399"),w("FF333333"),w("FF000000"),w("FFFFFFFF")];function _(e,a){var r={fonts:[],numFmts:{},fills:[],borders:[],namedStyles:[],inlineStyles:[]};var o=null;var s=null;var l=null;var d=null;j(e,"xl/styles.xml",{enter:function(e,t,i){if(this.is(me)){r.numFmts[t.numFmtId]=t}else if(this.is(m)){r.fonts.push(o={});if(i){o=null}}else if(o){if(e=="sz"){o.size=parseFloat(t.val)}else if(e=="name"){o.name=t.val}else if(e=="b"){o.bold=$(t.val,true)}else if(e=="i"){o.italic=$(t.val,true)}else if(e=="u"){o.underline=t.val==null||t.val=="single"}else if(e=="color"){o.color=c(t,null)}}else if(this.is(v)){r.fills.push(s={});if(i){s=null}}else if(s){if(e=="patternFill"){s.type=t.patternType}else if(e=="fgColor"&&s.type==="solid"){s.color=c(t,g[0])}else if(e=="bgColor"&&s.type!=="solid"){s.color=c(t,g[0])}}else if(this.is(f)){r.borders.push(l={});if(i){l=null}}else if(l){if(/^(?:left|top|right|bottom)$/.test(e)){l[e]={style:t.style||"none"}}if(e=="color"){var n=this.stack[this.stack.length-2].$tag;l[n].color=c(t,g[0])}}else if(this.is(ve)){d=u(t);r.namedStyles.push(d);if(i){d=null}}else if(this.is(pe)){d=u(t);r.inlineStyles.push(d);if(i){d=null}}else if(d){if(e=="alignment"){if(/^(?:left|center|right|justify)$/.test(t.horizontal)){d.textAlign=t.horizontal}if(/^(?:top|center|bottom)$/.test(t.vertical)){d.verticalAlign=t.vertical}if(t.wrapText!=null){d.wrapText=$(t.wrapText)}if(t.indent!=null){d.indent=q(t.indent)}}}},leave:function(e){if(this.is(m)){o=null}else if(this.is(v)){s=null}else if(this.is(f)){l=null}else if(e=="xf"){d=null}}});function u(t){var i={borderId:q(t.borderId),fillId:q(t.fillId),fontId:q(t.fontId),numFmtId:q(t.numFmtId),pivotButton:$(t.pivotButton),quotePrefix:$(t.quotePrefix),xfId:q(t.xfId)};e("applyAlignment");e("applyBorder");e("applyFill");e("applyFont");e("applyNumberFormat");e("applyProtection");function e(e){if(t[e]!=null){i[e]=$(t[e])}}return i}function c(e,t){if(e.rgb){return w(e.rgb)}else if(e.indexed){return g[q(e.indexed)]}else if(e.theme){var i=a.colorScheme[q(e.theme)];if(!i){return t}var n=kendo.parseColor(i);if(e.tint){n=n.toHSL();var r=parseFloat(e.tint);if(r<0){n.l=n.l*(1+r)}else{n.l=n.l*(1-r)+(100-100*(1-r))}}return n.toCssRgba()}}return r}var ge=["a:clrScheme","*","a:srgbClr"];var _e=["a:clrScheme","*","a:sysClr"];function b(e,t){var i=[];var n={colorScheme:i};var r=u(t);if(e.files[r]){j(e,r,{enter:function(e,t){if(this.is(_e)){i.push(w(t.val=="window"?"FFFFFFFF":"FF000000"))}else if(this.is(ge)){i.push(w("FF"+t.val))}}});if(i.length>3){a(i,0,1);a(i,2,3)}}function a(e,t,i){var n=e[t];e[t]=e[i];e[i]=n}return n}function q(e){return e==null?null:parseInt(e,10)}function $(e,t){if(e==null){return t}return e=="true"||e===true||e==1}function w(e){var t=/^([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(e);return"rgba("+parseInt(t[2],16)+", "+parseInt(t[3],16)+", "+parseInt(t[4],16)+", "+parseInt(t[1],16)/255+")"}function K(e,t){e=e.split(/\/+/);t=t.split(/\/+/);e.pop();while(t.length){var i=t.shift();if(i===""){e=[]}else if(i==="."){continue}else if(i===".."){e.pop()}else{e.push(i)}}return e.join("/")}function k(e){return e/9525}kendo.spreadsheet.readExcel=e;kendo.spreadsheet._readSheet=c;kendo.spreadsheet._readStrings=p;kendo.spreadsheet._readStyles=_;kendo.spreadsheet._readTheme=b;kendo.spreadsheet._readWorkbook=l},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/workbook",["kendo.core","spreadsheet/runtime","spreadsheet/references","spreadsheet/excel-reader"],e)})(function(){(function(s){var l=s.jQuery;var d=s.spreadsheet.calc.runtime.Formula;var u=s.spreadsheet.Ref;var n=s.spreadsheet.CalcError;s.spreadsheet.messages.workbook={defaultSheetName:"Sheet"};function c(e,t){var i=new XMLHttpRequest;i.onload=function(){t(i.response,i.getResponseHeader("Content-Type"))};i.onerror=function(){t(null)};i.open("GET",e);i.responseType="arraybuffer";i.send()}var e=s.Observable.extend({options:{},init:function(e,t){s.Observable.fn.init.call(this);this.options=e;this._view=t;this._sheets=[];this._images={};this._imgID=0;this._sheetsSearchCache={};this._sheet=this.insertSheet({rows:this.options.rows,columns:this.options.columns,rowHeight:this.options.rowHeight,columnWidth:this.options.columnWidth,headerHeight:this.options.headerHeight,headerWidth:this.options.headerWidth,dataSource:this.options.dataSource});this.undoRedoStack=new s.util.UndoRedoStack;this.undoRedoStack.bind(["undo","redo"],this._onUndoRedo.bind(this));this._context=new s.spreadsheet.FormulaContext(this);this._validationContext=new s.spreadsheet.ValidationFormulaContext(this);this._names=Object.create(null);this.fromJSON(this.options)},clipboard:function(){if(!this._clipboard){this._clipboard=new s.spreadsheet.Clipboard(this)}return this._clipboard},destroy:function(){this.unbind();if(this._clipboard){this._clipboard.destroy()}},events:["cut","copy","paste","changing","change","excelImport","excelExport","insertSheet","removeSheet","selectSheet","renameSheet","insertRow","insertColumn","deleteRow","deleteColumn","hideRow","hideColumn","unhideRow","unhideColumn","select","changeFormat","dataBinding","dataBound"],_sheetChanging:function(e){if(this.trigger("changing",e)){e.preventDefault()}},_sheetChange:function(e){this.trigger("change",e)},_sheetInsertRow:function(e){if(this.trigger("insertRow",{sheet:e.sender,index:e.index})){e.preventDefault()}},_sheetInsertColumn:function(e){if(this.trigger("insertColumn",{sheet:e.sender,index:e.index})){e.preventDefault()}},_sheetDeleteRow:function(e){if(this.trigger("deleteRow",{sheet:e.sender,index:e.index})){e.preventDefault()}},_sheetDeleteColumn:function(e){if(this.trigger("deleteColumn",{sheet:e.sender,index:e.index})){e.preventDefault()}},_sheetHideRow:function(e){if(this.trigger("hideRow",{sheet:e.sender,index:e.index})){e.preventDefault()}},_sheetHideColumn:function(e){if(this.trigger("hideColumn",{sheet:e.sender,index:e.index})){e.preventDefault()}},_sheetUnhideRow:function(e){if(this.trigger("unhideRow",{sheet:e.sender,index:e.index})){e.preventDefault()}},_sheetUnhideColumn:function(e){if(this.trigger("unhideColumn",{sheet:e.sender,index:e.index})){e.preventDefault()}},_sheetSelect:function(e){this.trigger("select",e)},_sheetDataBinding:function(e){if(this.trigger("dataBinding",{sheet:e.sender})){e.preventDefault()}},_sheetDataBound:function(e){this.trigger("dataBound",{sheet:e.sender})},_sheetCommandRequest:function(e){this.trigger("commandRequest",e)},_inputForRef:function(e){var t=this;return t._sheet.withCultureDecimals(function(){return new s.spreadsheet.Range(e,t._sheet).input()})},_onUndoRedo:function(e){e.command.range().select()},execute:function(e){var t=l.extend({workbook:this},e.options);var i=new s.spreadsheet[e.command](t);var n=this.activeSheet();if(t.origin){i.origin(t.origin)}if(t.operatingRange){i.range(t.operatingRange)}else{i.range(n.selection())}if(t.editRange){i._editRange=t.editRange}var r=i.exec();if(!r||r.reason!=="error"){if(!i.cannotUndo){this.undoRedoStack.push(i)}}this.cleanupImages();return r},resetFormulas:function(){this._sheets.forEach(function(e){e.resetFormulas()})},resetValidations:function(){this._sheets.forEach(function(e){e.resetValidations()})},refresh:function(e){if(e.recalc){this.resetFormulas();this.resetValidations();this._sheet.recalc(this._context);this._sheet.revalidate(this._validationContext)}},activeSheet:function(e){if(e===undefined){return this._sheet}if(!this.sheetByName(e.name())){return}this._sheet=e;e.triggerChange(s.spreadsheet.ALL_REASONS)},moveSheetToIndex:function(e,t){var i=this.sheetIndex(e);var n=this._sheets;if(i===-1){return}this._sheetsSearchCache={};n.splice(t,0,n.splice(i,1)[0]);this.trigger("change",{sheetSelection:true})},insertSheet:function(e){e=e||{};var i=this;var t=typeof e.index==="number"?e.index:i._sheets.length;var n;var r=i._sheets;var a=function(e){e=e?e:1;var t=s.spreadsheet.messages.workbook.defaultSheetName+e;if(!i.sheetByName(t)){return t}return a(e+1)};if(e.name&&i.sheetByName(e.name)){return}this._sheetsSearchCache={};n=e.name||a();var o=new s.spreadsheet.Sheet(e.rows||this.options.rows,e.columns||this.options.columns,e.rowHeight||this.options.rowHeight,e.columnWidth||this.options.columnWidth,e.headerHeight||this.options.headerHeight,e.headerWidth||this.options.headerWidth,e.defaultCellStyle||this.options.defaultCellStyle);o._workbook=this;o._name(n);this._bindSheetEvents(o);r.splice(t,0,o);if(e.data){o.fromJSON(e.data)}if(e.dataSource){o.setDataSource(e.dataSource)}this.trigger("change",{sheetSelection:true});return o},_bindSheetEvents:function(e){e.bind("changing",this._sheetChanging.bind(this));e.bind("change",this._sheetChange.bind(this));e.bind("insertRow",this._sheetInsertRow.bind(this));e.bind("insertColumn",this._sheetInsertColumn.bind(this));e.bind("deleteRow",this._sheetDeleteRow.bind(this));e.bind("deleteColumn",this._sheetDeleteColumn.bind(this));e.bind("hideRow",this._sheetHideRow.bind(this));e.bind("hideColumn",this._sheetHideColumn.bind(this));e.bind("unhideRow",this._sheetUnhideRow.bind(this));e.bind("unhideColumn",this._sheetUnhideColumn.bind(this));e.bind("select",this._sheetSelect.bind(this));e.bind("commandRequest",this._sheetCommandRequest.bind(this));e.bind("dataBinding",this._sheetDataBinding.bind(this));e.bind("dataBound",this._sheetDataBound.bind(this))},sheets:function(){return this._sheets.slice()},sheetByName:function(e){return this._sheets[this.sheetIndex(e)]},sheetByIndex:function(e){return this._sheets[e]},sheetIndex:function(e){var t=this._sheets;var i=(typeof e=="string"?e:e.name()).toLowerCase();var n=this._sheetsSearchCache[i];if(n>=0){return n}for(n=0;n<t.length;n++){var r=t[n].name().toLowerCase();this._sheetsSearchCache[r]=n;if(r===i){return n}}return-1},renameSheet:function(e,i){var n=e.name().toLowerCase();if(!i||n===i.toLowerCase()||this.sheetByName(i)){return}e=this.sheetByName(n);if(!e){return}this._sheetsSearchCache={};if(this.trigger("renameSheet",{sheet:e,newSheetName:i})){return}this._sheets.forEach(function(e){e._forFormulas(function(e){e.renameSheet(n,i)})});this.forEachName(function(e,t){if(e.nameref.renameSheet(n,i)){this.undefineName(t);e.name=e.nameref.print();this.nameDefinition(e.name,e)}if(e.value instanceof u||e.value instanceof d){e.value.renameSheet(n,i)}}.bind(this));e._name(i);this.trigger("change",{sheetSelection:true});return e},removeSheet:function(e){var t=this;var i=t._sheets;var n=e.name();var r=t.sheetIndex(e);if(i.length===1){return}if(this.trigger("removeSheet",{sheet:e})){return}this._sheetsSearchCache={};if(r>-1){e.unbind();i.splice(r,1);if(t.activeSheet().name()===n){var a=i[r===i.length?r-1:r];t.activeSheet(a)}else{this.trigger("change",{recalc:true,sheetSelection:true})}}},_clearSheets:function(){for(var e=0;e<this._sheets.length;e++){this._sheets[e]._activeDrawing=[];this._sheets[e]._drawings=[];this._sheets[e].unbind()}this._sheets=[];this._sheetsSearchCache={};this._names={};this._images={};this._imgID=0},fromJSON:function(i){if(i.sheets){this._clearSheets();if(i.images){this._imgID=0;this._images={};Object.keys(i.images).forEach(function(e){if(!isNaN(e)){var t=parseFloat(e);if(isFinite(t)){this._imgID=Math.max(this._imgID,t)}}this._images[e]={url:i.images[e]}},this)}for(var e=0;e<i.sheets.length;e++){var t=i.sheets[e];var n=a(t,this.options);var r=this.insertSheet({rows:n.rowCount,columns:n.columnCount,rowHeight:n.rowHeight,columnWidth:n.columnWidth,headerHeight:n.headerHeight,headerWidth:n.headerWidth,data:t});if(t.dataSource){r.setDataSource(t.dataSource)}}}if(i.activeSheet){this.activeSheet(this.sheetByName(i.activeSheet))}else{this.activeSheet(this._sheets[0])}if(i.names){i.names.forEach(function(e){this.defineName(e.name,e.value,e.hidden)},this)}},toJSON:function(){this.resetFormulas();this.resetValidations();var e=Object.keys(this._names).map(function(e){var t=this._names[e];var i=t.value;if(i instanceof u||i instanceof d){i=i.print(0,0,true)}else if(i instanceof n){i=i+""}else{i=JSON.stringify(i)}return{value:i,hidden:t.hidden,name:t.name,sheet:t.nameref.sheet,localName:t.nameref.name}},this);return{activeSheet:this.activeSheet().name(),sheets:this._sheets.map(function(e){e.recalc(this._context);e.revalidate(this._validationContext);return e.toJSON()},this),names:e,columnWidth:this.options.columnWidth,rowHeight:this.options.rowHeight}},saveJSON:function(){var n=this;var e=new l.Deferred;var r=n.toJSON();var t=Object.keys(n._images).filter(function(e){return n.usesImage(e)===1});var i=t.length;r.images={};if(i){t.forEach(function(e){var t=n._images[e];if(t.blob){var i=new FileReader;i.onload=function(){r.images[e]=i.result;a()};i.readAsDataURL(t.blob)}else{r.images[e]=t.url;a()}})}else{a()}return e.promise();function a(){if(--i<=0){e.resolve(r)}}},fromFile:function(e){var t=new l.Deferred;var i=t.promise();var n={file:e,promise:i};if(e&&!this.trigger("excelImport",n)){this._clearSheets();s.spreadsheet.readExcel(e,this,t)}else{t.reject()}return i},saveAsExcel:function(t){var n=this;t=l.extend({},n.options.excel,t);var i=n.toJSON();if(n.trigger("excelExport",{workbook:i})){return}var e=Object.keys(n._images).filter(function(e){return n.usesImage(e)===1});var r=e.length;var a=r?{}:null;if(r){e.forEach(function(i){var e=n._images[i];if(e.blob){var t=new FileReader;t.onload=function(){a[i]={type:e.blob.type,name:e.blob.name,data:t.result};o()};t.readAsArrayBuffer(e.blob)}else{c(e.url,function(e,t){a[i]={type:t,data:e};o()})}})}else{o()}function o(){if(--r<=0){i.images=a;var e=new s.ooxml.Workbook(i);s.saveAs({dataURI:t.forceProxy?e.toDataURL():e.toBlob(),fileName:i.fileName||t.fileName,proxyURL:t.proxyURL,forceProxy:t.forceProxy})}}},draw:function(n,r){if(typeof n=="function"&&!r){r=n;n={}}var a=[],o=this._sheets;(function t(i){if(i<o.length){o[i].draw(s.spreadsheet.SHEETREF,n,function(e){a.push(e);t(i+1)})}else{var e=a[0];for(i=1;i<a.length;++i){e.children=e.children.concat(a[i].children)}r(e)}})(0)},nameForRef:function(e,t){if(t===undefined){t=e.sheet}t=t.toLowerCase();var i=e+"";for(var n in this._names){var r=this._names[n];var a=r.value;if(a instanceof u){if(!a.sheet||a.sheet&&t==a.sheet.toLowerCase()){if(a+""==i){return r}}}}return{name:i}},defineName:function(e,t,i){var n=s.spreadsheet.calc.parseNameDefinition(e,t);e=n.name.print();this._names[e.toLowerCase()]={value:n.value,hidden:i,name:e,nameref:n.name}},undefineName:function(e){delete this._names[e.toLowerCase()]},nameValue:function(e){e=e.toLowerCase();if(e in this._names){return this._names[e].value}return null},nameDefinition:function(e,t){e=e.toLowerCase();if(arguments.length>1){if(t===undefined){delete this._names[e]}else{this._names[e]=t}}return this._names[e]},forEachName:function(t){Object.keys(this._names).forEach(function(e){t(this._names[e],e)},this)},adjustNames:function(n,r,a,o){n=n.toLowerCase();Object.keys(this._names).forEach(function(e){var t=this._names[e];var i=t.value;if(i instanceof u&&i.sheet.toLowerCase()==n){t.value=i.adjust(null,null,null,null,r,a,o)}else if(i instanceof d){i.adjust(n,r?"row":"col",a,o)}},this)},addImage:function(e){var t=String(++this._imgID);if(typeof e=="string"){this._images[t]={url:e}}else{this._images[t]={blob:e}}return t},imageUrl:function(e){var t=this._images[e];var i=t.url;if(!i){i=t.url=window.URL.createObjectURL(t.blob)}return i},cleanupImages:function(){Object.keys(this._images).forEach(function(e){if(!this.usesImage(e)){var t=this._images[e].url;if(t){window.URL.revokeObjectURL(t)}delete this._images[e]}},this)},usesImage:function(e){var t;var i=this._sheets;for(t=i.length;--t>=0;){if(i[t].usesImage(e)){return 1}}var n=this.undoRedoStack.stack;for(t=n.length;--t>=0;){if(n[t].usesImage(e)){return 2}}return false}});function a(e,t){function i(e,t,i){return e!==undefined?e:t!==undefined?t:i}var n=i(e.rowCount,t.rows,200),r=i(e.columnCount,t.columns,50),a=i(e.rowHeight,t.rowHeight,20),o=i(e.columnWidth,t.columnWidth,64),s=i(e.headerHeight,t.headerHeight,20),l=i(e.headerWidth,t.headerWidth,32);if(e.rows!==undefined){for(var d=0;d<e.rows.length;++d){var u=e.rows[d];var c=i(u.index,d);if(c>=n){n=c+1}if(u.cells){for(var f=0;f<u.cells.length;++f){var h=u.cells[f];var p=i(h.index,f);if(p>=r){r=p+1}}}}}return{rowCount:n,columnCount:r,rowHeight:a,columnWidth:o,headerHeight:s,headerWidth:l}}s.spreadsheet.Workbook=e;if(s.PDFMixin){s.PDFMixin.extend(e.prototype);e.prototype.saveAsPDF=function(t){var i=new l.Deferred;var e=i.promise();var n={promise:e};if(this.trigger("pdfExport",n)){return}this._drawPDF(t,i).then(function(e){return t.forceProxy?s.pdf.exportPDF(e):s.pdf.exportPDFToBlob(e)}).done(function(e){s.saveAs({dataURI:e,fileName:t.fileName,proxyURL:t.proxyURL,forceProxy:t.forceProxy,proxyTarget:t.proxyTarget});i.resolve()}).fail(function(e){i.reject(e)});return e};e.prototype._drawPDF=function(e){var t=new l.Deferred;var i=function(e){t.resolve(e)};switch(e.area){case"workbook":e.workbook.draw(e,i);break;case"sheet":e.workbook.activeSheet().draw(e,i);break;case"selection":e.workbook.activeSheet().selection().draw(e,i);break}return t.promise()}}})(kendo)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/formulacontext",["kendo.core"],e)})(function(){var e=kendo.spreadsheet;var x=e.CellRef;var C=e.RangeRef;var S=e.UnionRef;var T=e.NameRef;var D=e.Ref;var t=kendo.Class.extend({init:function(e){this.workbook=e},getRefCells:function(e,t,i,n,r,a){var o,s,l,d;if(e instanceof x){o=this.workbook.sheetByName(e.sheet);if(!o||!e.valid()){return[{value:new kendo.spreadsheet.calc.runtime.CalcError("REF")}]}s=o.formula(e);l=o.range(e.row,e.col).value();if(a||s!=null||l!=null){return[{formula:s,value:l,row:e.row,col:e.col,sheet:e.sheet,hidden:t?o.columnWidth(e.col)===0||o.rowHeight(e.row)===0:false}]}else{return[]}}if(e instanceof C){d=this.workbook.sheetIndex(e.sheet);var u=[],c=d;if(e.endSheet){c=this.workbook.sheetIndex(e.endSheet);if(d>c){var f=d;d=c;c=f}}if(d<0||c<0||!e.valid()){return[{value:new kendo.spreadsheet.calc.runtime.CalcError("REF")}]}while(d<=c){o=this.workbook.sheetByIndex(d++);var h=o._grid.normalize(e.topLeft);var p=o._grid.normalize(e.bottomRight);var v=o._grid.cellRefIndex(h);var m=o._grid.cellRefIndex(p);var g=o._properties.iterator("value",v,m);for(var _=h.col;_<=p.col;++_){for(var b=h.row;b<=p.row;++b){var w=o._grid.index(b,_);s=o._properties.get("formula",w);l=g.at(w);if(a||s!=null||l!=null){u.push({formula:s,value:l,row:b,col:_,sheet:o.name(),hidden:t?o.columnWidth(_)===0||o.rowHeight(b)===0:false})}}}}return u}if(e instanceof S){var k=[];for(d=0;d<e.refs.length;++d){k=k.concat(this.getRefCells(e.refs[d],t,i,n,r))}return k}if(e instanceof T){var y=this.nameValue(e,i,n,r);if(y instanceof D){return this.getRefCells(y,t,i,n,r)}return[{value:y==null?new kendo.spreadsheet.calc.runtime.CalcError("NAME"):y}]}return[]},nameValue:function(e,t,i,n){var r;if(e.hasSheet()){r=this.workbook.nameValue(e.print())}else{e=e.clone().setSheet(t,true);r=this.workbook.nameValue(e.print());if(r==null){r=this.workbook.nameValue(e.name)}}if(r instanceof D){r=r.absolute(i,n)}return r},getData:function(e,t,i,n,r){var a=e instanceof x;if(e instanceof T){a=this.workbook.nameValue(e.name)instanceof x}var o=this.getRefCells(e,false,t,i,n,r).map(function(e){var t=e.value;if(t instanceof kendo.spreadsheet.calc.runtime.Formula){t=t.value}return t});return a?o[0]:o},onFormula:function(e){var a=this.workbook.sheetByName(e.sheet);var t=e.row,i=e.col,o=e.value;var n=a.formula({row:t,col:i});if(n!==e){return false}var r=e.arrayFormulaRange;if(r){var s,l;var d=o.width;var u=o.height;a.forEach(r,function(e,t){if(s===undefined){s=e;l=t}var i=e-s;var n=t-l;var r;if(i<u&&n<d){r=o.get(i,n)}else{r=new kendo.spreadsheet.calc.runtime.CalcError("N/A")}a._value(e,t,r)})}else{if(o instanceof D){o=this.getData(o,e.sheet,t,i);if(Array.isArray(o)){o=o[0]}if(o===undefined){o=null}}if(o instanceof kendo.spreadsheet.calc.runtime.Matrix){o=o.get(0,0)}a._value(t,i,o)}clearTimeout(a._formulaContextRefresh);a._formulaContextRefresh=setTimeout(function(){a.batch(function(){},{layout:true})},50);return true}});var i=t.extend({onFormula:function(){return true}});e.FormulaContext=t;e.ValidationFormulaContext=i},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/controller",["kendo.core"],e)})(function(){(function(u){"use strict";var o=u.jQuery;var s=/:alphanum$/;var r={up:"up",down:"down",left:"left",right:"right",home:"first-col",end:"last-col","ctrl+left":"word-left","ctrl+right":"word-right","ctrl+up":"word-up","ctrl+down":"word-down","ctrl+home":"first","ctrl+end":"last",pageup:"prev-page",pagedown:"next-page"};var l={tab:"next","shift+tab":"previous",enter:"lower","shift+enter":"upper",delete:"clearContents",backspace:"clearContents","shift+:alphanum":"edit","alt+:alphanum":"edit",":alphanum":"edit","ctrl+:alphanum":"ctrl","alt+ctrl+:alphanum":"edit",":edit":"edit"};var i={wheel:"onWheel","*+mousedown":"onMouseDown",contextmenu:"onContextMenu","*+mousedrag":"onMouseDrag","*+mouseup":"onMouseUp","*+dblclick":"onDblClick",mousemove:"onMouseMove"};var t={pageup:"onPageUp",pagedown:"onPageDown",mouseup:"onMouseUp","*+cut":"onCut","*+paste":"onPaste","*+copy":"onCopy"};var e={esc:"onEditorEsc",enter:"onEditorBlur","alt+enter":"insertNewline","shift+enter":"onEditorBlur",tab:"onEditorBlur","shift+tab":"onEditorBlur","shift+ctrl+enter":"onEditorArrayFormula"};var n=o.extend({focus:"onEditorBarFocus"},e);var a=o.extend({focus:"onEditorCellFocus"},e);var d={cell:"range",rowheader:"row",columnheader:"column",topcorner:"sheet",autofill:"autofill"};function c(e){return e.map(function(e){return'[data-action="'+e+'"]'}).join(",")}var f=c(["cut","copy","paste","insert-left","insert-right","insert-above","insert-below"]);var h=c(["unhide-row","unhide-column"]);var p=[];var v=[];var m=[];for(var g in r){p.push(g);v.push("shift+"+g)}for(g in l){m.push(g)}t[p]="onAction";t[v]="onShiftAction";t[m]="onEntryAction";a[p]="onEditorAction";a[v]="onEditorShiftAction";var _=u.Class.extend({init:function(e,t){this.view=e;this.workbook(t);this.container=o(e.container);this.clipboardElement=o(e.clipboard);this.cellContextMenu=e.cellContextMenu;this.rowHeaderContextMenu=e.rowHeaderContextMenu;this.colHeaderContextMenu=e.colHeaderContextMenu;this.drawingContextMenu=e.drawingContextMenu;this.scroller=e.scroller;this.tabstrip=e.tabstrip;this.sheetsbar=e.sheetsbar;e.nameEditor.bind("enter",this.onNameEditorEnter.bind(this));e.nameEditor.bind("cancel",this.onNameEditorCancel.bind(this));e.nameEditor.bind("select",this.onNameEditorSelect.bind(this));e.nameEditor.bind("delete",this.onNameEditorDelete.bind(this));this.editor=e.editor;this.editor.bind("change",this.onEditorChange.bind(this));this.editor.bind("activate",this.onEditorActivate.bind(this));this.editor.bind("deactivate",this.onEditorDeactivate.bind(this));this.editor.bind("update",this.onEditorUpdate.bind(this));o(e.scroller).on("scroll",this.onScroll.bind(this));this.listener=new u.spreadsheet.EventListener(this.container,this,i);o(e.scroller).on("mousedown",this.onMouseDown.bind(this));this._enableEditorEvents();if(this.sheetsbar){this.sheetsbar.bind("select",this.onSheetBarSelect.bind(this));this.sheetsbar.bind("reorder",this.onSheetBarReorder.bind(this));this.sheetsbar.bind("rename",this.onSheetBarRename.bind(this));this.sheetsbar.bind("remove",this.onSheetBarRemove.bind(this))}this.cellContextMenu.bind("select",this.onContextMenuSelect.bind(this));this.rowHeaderContextMenu.bind("select",this.onContextMenuSelect.bind(this));this.colHeaderContextMenu.bind("select",this.onContextMenuSelect.bind(this));this.drawingContextMenu.bind("select",this.onContextMenuSelect.bind(this));this.cellContextMenu.element.add(this.rowHeaderContextMenu.element).add(this.colHeaderContextMenu.element).add(this.drawingContextMenu.element).on("contextmenu",false);if(this.tabstrip){this.tabstrip.bind("action",this.onCommandRequest.bind(this));this.tabstrip.bind("dialog",this.onDialogRequest.bind(this))}},_enableEditorEvents:function(e){if(e===undefined||e){this.keyListener=new u.spreadsheet.EventListener(this.clipboardElement,this,t);this.barKeyListener=new u.spreadsheet.EventListener(this.editor.barElement(),this,n);this.inputKeyListener=new u.spreadsheet.EventListener(this.editor.cellElement(),this,a)}else{this.keyListener.destroy();this.barKeyListener.destroy();this.inputKeyListener.destroy()}},_execute:function(e){var t=this._workbook.execute(e);if(e.command==="EditCommand"&&!t){this._workbook.trigger("change",{editorClose:true})}if(t){this._preventNavigation=true;if(t.reason==="error"){this.editor.deactivate(true);this.view.showError(t,function(){this.activateEditor(false);this.editor.value(this._lastEditorValue);this.editor._value=this._workbook._inputForRef(this._workbook.activeSheet()._viewActiveCell());this.editor.select()}.bind(this))}else{this.view.openDialog(t.reason)}}return t},_activeTooltip:function(){return this._workbook.activeSheet().activeCell().simplify().toString()},onContextMenuSelect:function(e){var t=o(e.item).data("action");var i;switch(t){case"cut":i={command:"ToolbarCutCommand",options:{workbook:this._workbook}};break;case"copy":i={command:"ToolbarCopyCommand",options:{workbook:this._workbook}};break;case"paste":i={command:"ToolbarPasteCommand",options:{workbook:this._workbook}};break;case"delete-drawing":i={command:"DeleteDrawingCommand",options:{drawing:this.navigator._sheet._activeDrawing}};break;case"bring-to-front":i={command:"BringToFrontCommand",options:{drawing:this.navigator._sheet._activeDrawing}};break;case"send-to-back":i={command:"SendToBackCommand",options:{drawing:this.navigator._sheet._activeDrawing}};break;case"unmerge":i={command:"MergeCellCommand",options:{value:"unmerge"}};break;case"merge":this.view.openDialog("merge");break;case"hide-row":i={command:"HideLineCommand",options:{axis:"row"}};break;case"hide-column":i={command:"HideLineCommand",options:{axis:"column"}};break;case"unhide-row":i={command:"UnHideLineCommand",options:{axis:"row"}};break;case"unhide-column":i={command:"UnHideLineCommand",options:{axis:"column"}};break;case"delete-row":i={command:"DeleteRowCommand"};break;case"delete-column":i={command:"DeleteColumnCommand"};break}if(i){this._execute(i)}},onSheetBarRemove:function(e){var t=this._workbook.sheetByName(e.name);if(!t){return}this._workbook.removeSheet(t)},destroy:function(){this.listener.destroy();this._enableEditorEvents(false);this.keyListener.destroy();this.inputKeyListener.destroy()},onSheetBarSelect:function(e){var t;var i=this._workbook;if(e.isAddButton){if(this._workbook.trigger("insertSheet")){return}t=i.insertSheet()}else{t=i.sheetByName(e.name)}if(i.activeSheet().name()!==t.name()){if(this._workbook.trigger("selectSheet",{sheet:t})){return}if(!this.editor.canInsertRef(false)){this.editor.deactivate()}i.activeSheet(t)}},onSheetBarReorder:function(e){var t=this._workbook;var i=t.sheetByIndex(e.oldIndex);var n=t.activeSheet();var r=n.name();t.moveSheetToIndex(i,e.newIndex);if(r!==i.name()){if(t.trigger("selectSheet",{sheet:i})){t.activeSheet(n);return}if(!this.editor.canInsertRef(false)){this.editor.deactivate()}t.activeSheet(i)}},onSheetBarRename:function(e){var t=this._workbook.sheetByIndex(e.sheetIndex);if(this._workbook.sheetByName(e.name)){this.view.showError({reason:"error",type:"duplicateSheetName"});return}this._workbook.renameSheet(t,e.name);this.clipboardElement.focus()},sheet:function(e){this.navigator=e.navigator();this.axisManager=e.axisManager()},workbook:function(e){this._workbook=e;this.clipboard=e.clipboard();e.bind("commandRequest",this.onCommandRequest.bind(this))},refresh:function(){var e=this.editor;var t=this._workbook;var i=t.activeSheet();this._viewPortHeight=this.view.scroller.clientHeight;this.navigator.height(this._viewPortHeight);if(!e.isActive()&&!this.isEditorDisabled){e.enable(i.selection().enable()!==false);this.resetEditorValue()}var n=i.selection()._ref.simplify();var r=this._workbook.nameForRef(n,i.name());this.view.nameEditor.value(r.name)},onScroll:function(){this.view.render({scroll:true})},onWheel:function(e){var t=e.originalEvent.deltaX;var i=e.originalEvent.deltaY;if(e.originalEvent.deltaMode===1){t*=10;i*=10}this.scrollWith(t,i);e.preventDefault()},onAction:function(e,t){var i=this._workbook.activeSheet();i._activeDrawing=null;this.navigator.moveActiveCell(r[t]);e.preventDefault()},onPageUp:function(){this.scrollDown(-this._viewPortHeight)},onPageDown:function(){this.scrollDown(this._viewPortHeight)},onEntryAction:function(e,t){var i=this._workbook.activeSheet();if(e.mod){var n=String.fromCharCode(e.keyCode);var r=true;switch(n){case"A":i._activeDrawing=null;this.navigator.selectAll();break;case"Y":this._workbook.undoRedoStack.redo();break;case"Z":this._workbook.undoRedoStack.undo();break;default:r=false;break}if(r){e.preventDefault()}}else{var a=i.selection().enable()===false;var o=t!==":edit";if(t=="delete"||t=="backspace"){if(i._activeDrawing){this._execute({command:"DeleteDrawingCommand",options:{drawing:i._activeDrawing}})}else if(!a){this._execute({command:"ClearContentCommand"})}e.preventDefault()}else if(s.test(t)||!o){i._activeDrawing=null;if(a){e.preventDefault();return}if(o){this.editor.value("")}this.activateEditor(o)}else{this.navigator.navigateInSelection(l[t]);e.preventDefault()}}},onShiftAction:function(e,t){this.navigator.modifySelection(r[t.replace("shift+","")],this.appendSelection);e.preventDefault()},onMouseMove:function(e){var t=this._workbook.activeSheet();if(t.resizingInProgress()||t.selectionInProgress()){return}var i=this.objectAt(e);if(i.type==="columnresizehandle"||i.type==="rowresizehandle"){t.positionResizeHandle(i.ref)}else{t.removeResizeHandle()}t._renderComment(i.type=="cell"?i.ref:null)},onMouseDown:function(e){var t=this.objectAt(e);if(t.pane){this.originFrame=t.pane}if(this._startResizingDrawing(e,t)){e.stopPropagation();return}var i=this._workbook.activeSheet();var n=this.container.closest('[data-role="window"]');if(n.length){n=u.widgetInstance(n);if(n&&n.options.modal){e.stopPropagation()}}i._activeDrawing=null;if(t.type==="drawing"){i._activeDrawing=t.drawing;t.copy=t.drawing.clone();t.startBox=i.drawingBoundingBox(t.copy);i.startDragging(t);i.triggerChange({dragging:true});e.preventDefault();return}if(t.type==="editor"){this.onEditorEsc();this.openCustomEditor();e.preventDefault();return}if(this.editor.canInsertRef(false)&&t.ref){this._workbook.activeSheet()._setFormulaSelections(this.editor.highlightedRefs());this.navigator.startSelection(t.ref,this._selectionMode,this.appendSelection,e.shiftKey,this.view);e.preventDefault();return}else{this._preventNavigation=false;this.editor.deactivate();if(this._preventNavigation){return}}if(t.type==="columnresizehandle"||t.type==="rowresizehandle"){i.startResizing({x:t.x,y:t.y});e.preventDefault();return}if(t.type==="filtericon"){this.openFilterMenu(e);e.preventDefault();return}this._selectionMode=d[t.type];this.appendSelection=e.mod;this.navigator.startSelection(t.ref,this._selectionMode,this.appendSelection,e.shiftKey,this.view)},_startResizingDrawing:function(e){var t=o(e.target).closest(".k-spreadsheet-drawing-handle");if(t.length){var i=this.translateCoords(e);var n=t.data("direction");var r=this._workbook.activeSheet();var a=r._activeDrawing;r.startDragging({pane:this.originFrame,drawing:a,copy:a.clone(),startBox:r.drawingBoundingBox(a),resize:n,startX:i.x,startY:i.y});return true}},onContextMenu:function(e){var t=this._workbook.activeSheet();e.preventDefault();if(t.resizingInProgress()||t.draggingInProgress()){return}this.cellContextMenu.close();this.colHeaderContextMenu.close();this.rowHeaderContextMenu.close();this.drawingContextMenu.close();var i;var n=this.objectAt(e);if(n.type==="columnresizehandle"||n.type==="rowresizehandle"){return}if(n.ref){this.navigator.selectForContextMenu(n.ref,d[n.type])}else if(n.type=="drawing"){this.navigator.selectDrawingForContextMenu(n.drawing)}var r=this.navigator._sheet.select()instanceof u.spreadsheet.UnionRef;var a=false;var o=false;if(n.type=="columnheader"){i=this.colHeaderContextMenu;a=!r&&this.axisManager.selectionIncludesHiddenColumns()}else if(n.type=="rowheader"){i=this.rowHeaderContextMenu;a=!r&&this.axisManager.selectionIncludesHiddenRows()}else if(n.type=="drawing"){i=this.drawingContextMenu}else{i=this.cellContextMenu;o=this.navigator.selectionIncludesMergedCells()}i.element.find(f).toggle(!r);i.element.find(h).toggle(a);i.element.find("[data-action=unmerge]").toggle(o);setTimeout(function(){i.open(e.pageX,e.pageY)})},prevent:function(e){e.preventDefault()},constrainResize:function(e,t){var i=this._workbook.activeSheet();var n=i.resizeHandlePosition();return!n||e==="outside"||e==="topcorner"||t.col<n.col||t.row<n.row},_dragDrawing:function(e){var t=this._workbook.activeSheet();var i=t.draggingInProgress();if(!i){return false}var n=this.translateCoords(e);var r=i.drawing;var a=n.x-i.startX;var o=n.y-i.startY;if(i.resize=="SE"){if(i.aspect){if(Math.abs(a)>Math.abs(o)){r.width=Math.max(i.copy.width+a,20);r.height=r.width/i.aspect}else{r.height=Math.max(i.copy.height+o,20);r.width=r.height*i.aspect}}else{r.width=Math.max(i.copy.width+a,20);r.height=Math.max(i.copy.height+o,20)}}else if(i.resize=="E"){r.width=Math.max(i.copy.width+a,20)}else if(i.resize=="S"){r.height=Math.max(i.copy.height+o,20)}else if(i.resize=="N"){if(i.copy.height-o>20){r.height=i.copy.height-o;r.offsetY=i.copy.offsetY+o}}else if(i.resize=="W"){if(i.copy.width-a>20){r.width=i.copy.width-a;r.offsetX=i.copy.offsetX+a}}else if(i.resize=="NE"){r.width=Math.max(i.copy.width+a,20);if(i.copy.height-o>20){r.height=i.copy.height-o;r.offsetY=i.copy.offsetY+o}}else if(i.resize=="SW"){r.height=Math.max(i.copy.height+o,20);if(i.copy.width-a>20){r.width=i.copy.width-a;r.offsetX=i.copy.offsetX+a}}else if(i.resize=="NW"){if(i.copy.height-o>20){r.height=i.copy.height-o;r.offsetY=i.copy.offsetY+o}if(i.copy.width-a>20){r.width=i.copy.width-a;r.offsetX=i.copy.offsetX+a}}else{r.offsetX=i.copy.offsetX+a;r.offsetY=i.copy.offsetY+o}t.triggerChange({dragging:true});return true},onMouseDrag:function(e){if(this._selectionMode==="sheet"){return}var t={clientX:e.clientX,clientY:e.clientY};var i=this._workbook.activeSheet();if(this._dragDrawing(e)){return}var n=this.objectAt(t);if(i.resizingInProgress()){if(!this.constrainResize(n.type,n.ref)){i.resizeHintPosition({x:n.x,y:n.y})}return}if(n.type==="outside"){this.startAutoScroll(n);return}if(this.originFrame===n.pane){this.selectToLocation(t)}else{var r=this.originFrame._grid;if(n.x>r.right){u.scrollLeft(this)}if(n.y>r.bottom){this.scrollTop()}if(n.y<r.top||n.x<r.left){this.startAutoScroll(n,t)}else{this.selectToLocation(t)}}e.preventDefault()},onMouseUp:function(e){var t=this._workbook.activeSheet();t.completeResizing();t.completeDragging();this.navigator.completeSelection();this.stopAutoScroll();var i=this.editor.activeEditor();if(!i){return}var n=e.target;while(n){if(n===i.element[0]){return}n=n.parentNode}var r=this.objectAt(e);if(r&&r.ref&&i.canInsertRef(false)){i.refAtPoint(t);t._setFormulaSelections(i.highlightedRefs())}},onDblClick:function(e){var t=this.objectAt(e);var i=this._workbook.activeSheet().selection().enable()===false;if(t.type!=="cell"||i){return}var n=this._workbook.activeSheet().selection();this.activateEditor(!n.value()&&!n.formula());this.onEditorUpdate()},onCut:function(e){var t=this;setTimeout(function(){t.clipboard.menuInvoked=e===undefined;t._execute({command:"CutCommand",options:{workbook:t.view._workbook,event:e.originalEvent||e}})})},clipBoardValue:function(){return this.clipboardElement.html()},_pasteImage:function(e){var t=this;var i=new window.Image;i.src=window.URL.createObjectURL(e);i.onload=function(){t._execute({command:"InsertImageCommand",options:{blob:e,width:i.width,height:i.height}})};setTimeout(function(){window.URL.revokeObjectURL(i.src)},10)},onPaste:function(e){var t=this;var i="";var n="";t.clipboard.menuInvoked=e===undefined;if(e){var r=e.originalEvent.clipboardData;if(r&&r.getData){e.preventDefault();var a=false;var o=false;if(window.DOMStringList&&r.types instanceof window.DOMStringList){a=r.types.contains("text/html");o=r.types.contains("text/plain")}else if(Array.isArray(r.types)){a=r.types.indexOf("text/html")>=0;o=r.types.indexOf("text/plain")>=0}else{a=/text\/html/.test(r.types);o=/text\/plain/.test(r.types)}if(a){i=r.getData("text/html").trim()}if(o){n=r.getData("text/plain").trim()}if(!i&&!n&&r.items&&r.items.length){for(var s=0;s<r.items.length;++s){var l=r.items[s];if(l.kind=="file"&&/^image\/(?:png|jpe?g|gif)$/i.test(l.type)){return t._pasteImage(l.getAsFile())}}}}else{if(window.clipboardData.files&&window.clipboardData.files.length){var d=window.clipboardData.files[0];if(/^image\/(?:png|jpe?g|gif)$/i.test(d.type)){return t._pasteImage(d)}}n=window.clipboardData.getData("Text");if(n){n=n.trim()}t.clipboardElement.empty();setTimeout(function(){i=t.clipboardElement.html();if(i||n){t.clipboard.external({html:i,plain:n});t._execute({command:"PasteCommand",options:{workbook:t.view._workbook,event:e.originalEvent||e}})}});return}}else{if(u.support.browser.msie){t.clipboardElement.focus().select();document.execCommand("paste");return}else{t.clipboard.menuInvoked=true}}if(!i&&!n){return}t.clipboard.external({html:i,plain:n});t._execute({command:"PasteCommand",options:{workbook:t.view._workbook,event:e.originalEvent||e}})},onCopy:function(e){this.clipboard.menuInvoked=e===undefined;this._execute({command:"CopyCommand",options:{workbook:this.view._workbook,event:e.originalEvent||e}})},scrollTop:function(){this.scroller.scrollTop=0},scrollLeft:function(){this.scroller.scrollLeft=0},scrollDown:function(e){this.scroller.scrollTop+=e},scrollRight:function(e){this.scroller.scrollLeft+=e},scrollWith:function(e,t){this.scroller.scrollTop+=t;this.scroller.scrollLeft+=e},translateCoords:function(e){var t=this.container[0].getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}},objectAt:function(e,t){if(!e){return}e=this.translateCoords(e);return this.view.objectAt(e.x,e.y,t)},selectToLocation:function(e){var t=this.objectAt(e,true);if(t.pane&&t.ref){this.extendSelection(t);this.lastKnownCellLocation=e;this.originFrame=t.pane}this.stopAutoScroll()},extendSelection:function(e){this.navigator.extendSelection(e.ref,this._selectionMode)},autoScroll:function(){var e=this._autoScrollTarget.x;var t=this._autoScrollTarget.y;var i=this.originFrame._grid;var n=this.view.scroller;var r=8;var a=n.scrollLeft;var o=n.scrollTop;if(e<i.left){this.scrollRight(-r)}if(e>i.right){this.scrollRight(r)}if(t<i.top){this.scrollDown(-r)}if(t>i.bottom){this.scrollDown(r)}if(o===n.scrollTop&&a===n.scrollLeft){this.selectToLocation(this.finalLocation)}else{this.extendSelection(this.objectAt(this.lastKnownCellLocation))}},startAutoScroll:function(e,t){if(!this._scrollInterval){this._scrollInterval=setInterval(this.autoScroll.bind(this),50)}this.finalLocation=t||this.lastKnownCellLocation;this._autoScrollTarget=e},stopAutoScroll:function(){clearInterval(this._scrollInterval);this._scrollInterval=null},openCustomEditor:function(){this.view.openCustomEditor()},openFilterMenu:function(e){var t=this.objectAt(e);var i=this._workbook.activeSheet();var n=i.filterColumn(t.ref);var r=this.view.createFilterMenu(n);r.bind("action",this.onCommandRequest.bind(this));r.bind("action",r.close.bind(r));r.openFor(e.target)},_saveEditorValue:function(e){var t=this.editor._range.sheet();var i=this.editor.value();if(this._workbook.activeSheet()!==t){this._workbook.activeSheet()._setFormulaSelections();this._workbook.activeSheet(t)}t.isInEditMode(false);this._lastEditorValue=i;this._execute({command:"EditCommand",options:{value:i,arrayFormula:e}})},onEditorChange:function(){this._saveEditorValue(false)},onEditorArrayFormula:function(){this._saveEditorValue(true);this.editor.deactivate(true)},onEditorActivate:function(){var e=this._workbook;var t=e.activeSheet();t._setFormulaSelections(this.editor.highlightedRefs());t.isInEditMode(true)},onEditorDeactivate:function(){var e=this._workbook.activeSheet();e.isInEditMode(false);e._setFormulaSelections([])},onEditorUpdate:function(){this._workbook.activeSheet()._setFormulaSelections(this.editor.highlightedRefs())},onEditorBarFocus:function(){var e=this._workbook.activeSheet().selection().enable()===false;if(e){return}this.editor.activate({range:this._workbook.activeSheet().selection(),rect:this.view.activeCellRectangle(),tooltip:this._activeTooltip()})},onEditorCellFocus:function(){this.editor.scale()},onEditorEsc:function(){this.resetEditorValue();this.editor.deactivate();this.clipboardElement.focus()},insertNewline:function(e){e.preventDefault();this.editor.insertNewline()},onEditorBlur:function(e,t){if(this.editor.isFiltered()){return}this._preventNavigation=false;this.editor.deactivate();if(!this._preventNavigation){this.clipboardElement.focus();this.navigator.navigateInSelection(l[t])}},onEditorAction:function(e,t){var i=this.editor;var n=this._workbook.activeSheet();if(this._casualEditing&&/^(?:up|right|down|left)$/.test(t)){this.deactivateEditor();this.navigator.moveActiveCell(r[t]);e.preventDefault()}else if(i.canInsertRef(true)){this.navigator.moveActiveCell(r[t]);i.activeEditor().refAtPoint(n);n._setFormulaSelections(i.highlightedRefs());e.preventDefault()}},onEditorShiftAction:function(e,t){var i=this.editor;var n=this._workbook.activeSheet();if(i.canInsertRef(true)){this.navigator.modifySelection(r[t.replace("shift+","")],this.appendSelection);i.activeEditor().refAtPoint(n);n._setFormulaSelections(i.highlightedRefs());e.preventDefault()}},resetEditorValue:function(){var e=this._workbook.activeSheet();var t=e.activeCell();var i=this._workbook._inputForRef(t);var n=e.range(t).intersectingArrayFormula();if(n){i="="+n.formula}this.editor.value(i,!!n)},activateEditor:function(e){this._casualEditing=e;this.editor.activate({range:this._workbook.activeSheet().selection(),rect:this.view.activeCellRectangle(),tooltip:this._activeTooltip()}).focus()},deactivateEditor:function(){this.view.editor.deactivate()},onCommandRequest:function(e){if(e.command){this._execute(e)}else{this._workbook.undoRedoStack[e.action]()}},onDialogRequest:function(e){var t={pdfExport:this._workbook.options.pdf,excelExport:this._workbook.options.excel};if(e.options){o.extend(true,e.options,t)}else{e.options=t}this.view.openDialog(e.name,e.options)},onNameEditorEnter:function(){var e;var t=this._workbook;var i=t.activeSheet();var n=this.view.nameEditor.value();e=u.spreadsheet.calc.parseReference(n,true)||t.nameValue(n);if(e instanceof u.spreadsheet.Ref){if(e.sheet&&e.sheet.toLowerCase()!=i.name().toLowerCase()){var r=t.sheetByName(e.sheet);if(r){t.activeSheet(r);i=r}}i.range(e).select();return}e=i.selection()._ref.clone().simplify().setSheet(i.name(),true);this._execute({command:"DefineNameCommand",options:{name:n,value:e}});this.clipboardElement.focus()},onNameEditorCancel:function(){this.clipboardElement.focus()},onNameEditorSelect:function(e){var t=e.name;var i=this._workbook;var n=i.activeSheet();var r=i.nameValue(t);if(r instanceof u.spreadsheet.Ref){if(r.sheet&&r.sheet.toLowerCase()!=n.name().toLowerCase()){var a=i.sheetByName(r.sheet);if(a){i.activeSheet(a);n=a}}n.range(r).select();return}this.clipboardElement.focus()},onNameEditorDelete:function(e){this._execute({command:"DeleteNameCommand",options:{name:e.name}});this.clipboardElement.focus()}});u.spreadsheet.Controller=_})(window.kendo)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/view",["kendo.core","kendo.menu","spreadsheet/sheetsbar","util/main"],e)})(function(){(function(b){var c=b.jQuery;var f=b.spreadsheet.CellRef;var r=".";var o=7;var d=20;var l="Error";var h={view:"k-spreadsheet-view",fixedContainer:"k-spreadsheet-fixed-container",editContainer:"k-spreadsheet-edit-container",scroller:"k-spreadsheet-scroller",viewSize:"k-spreadsheet-view-size",clipboard:"k-spreadsheet-clipboard",cellEditor:"k-spreadsheet-cell-editor",barEditor:"k-spreadsheet-editor",topCorner:"k-spreadsheet-top-corner",filterHeadersWrapper:"k-filter-wrapper",filterRange:"k-filter-range",filterButton:"k-spreadsheet-filter",filterButtonActive:"k-state-active",horizontalResize:"k-horizontal-resize",verticalResize:"k-vertical-resize",icon:"k-icon",iconFilterDefault:"k-i-arrow-60-down",sheetsBar:"k-spreadsheet-sheets-bar",sheetsBarActive:"k-spreadsheet-sheets-bar-active",sheetsBarInactive:"k-spreadsheet-sheets-bar-inactive",cellContextMenu:"k-spreadsheet-cell-context-menu",rowHeaderContextMenu:"k-spreadsheet-row-header-context-menu",colHeaderContextMenu:"k-spreadsheet-col-header-context-menu",drawingContextMenu:"k-spreadsheet-drawing-context-menu"};b.spreadsheet.messages.view={nameBox:"Name Box",errors:{openUnsupported:"Unsupported format. Please select an .xlsx file.",shiftingNonblankCells:"Cannot insert cells due to data loss possibility. Select another insert location or delete the data from the end of your worksheet.",insertColumnWhenRowIsSelected:"Cannot insert column when all columns are selected.",insertRowWhenColumnIsSelected:"Cannot insert row when all rows are selected.",filterRangeContainingMerges:"Cannot create a filter within a range containing merges",sortRangeContainingMerges:"Cannot sort a range containing merges",cantSortMultipleSelection:"Cannot sort multiple selection",cantSortNullRef:"Cannot sort empty selection",cantSortMixedCells:"Cannot sort range containing cells of mixed shapes",validationError:"The value that you entered violates the validation rules set on the cell.",cannotModifyDisabled:"Cannot modify disabled cells.",insertRowBelowLastRow:"Cannot insert row below the last row.",insertColAfterLastCol:"Cannot insert column to the right of the last column."},tabs:{home:"Home",insert:"Insert",data:"Data"}};b.spreadsheet.messages.menus={cut:"",copy:"",paste:"",merge:"",unmerge:"",delete:"",hide:"",unhide:"",bringToFront:"",sendToBack:""};function e(e){var t=window.getSelection();t.removeAllRanges();var i=document.createRange();i.selectNodeContents(e);t.addRange(i)}function p(e,t){var i=e.trs[t].children;return i[i.length-2]}function v(e,t){var i=e.trs[t-1];var n=e.trs[t].children.length-1;if(i&&n>=0){return i.children[n]}}function w(e){return(e.size||1)+"px solid "+(e.color||"#000")}function k(e){if(!/:\/\//.test(e)){e="http://"+e}return e}function _(e,n,t,i){function r(e){var t=n.link;if(!t){if(typeof n.value=="object"){t=n.value.link}}if(t){var i={textDecoration:"none"};if(n.color){i.color=n.color}if(n.underline){i.textDecoration="underline"}return b.dom.element("a",{href:k(t),style:i,target:"_blank"},e?[e]:[])}return e}var a=n.value!=null||n.validation!=null&&!n.validation.value||n.background||n.merged||n.comment;if(!t&&!a){return}var o={};var s=n.background;if(s){var l=s;if(i){l=b.parseColor(l).toHSV();l.v*=.9;l=l.toCssRgba()}l=w({color:l});o.outline=l}if(s){o.backgroundColor=s}if(n.color){o.color=n.color}if(n.fontFamily){o.fontFamily=n.fontFamily}if(n.underline){o.textDecoration="underline"}if(n.italic){o.fontStyle="italic"}if(n.textAlign){o.textAlign=n.textAlign}if(n.bold){o.fontWeight="bold"}if(n.fontSize){o.fontSize=n.fontSize+"px"}if(n.wrap===true){o.whiteSpace="pre-wrap";o.overflowWrap="break-word";o.wordWrap="break-word"}else{o.whiteSpace="pre";o.overflowWrap="normal";o.wordWrap="normal"}o.left=n.left+1+"px";o.top=n.top+1+"px";o.width=n.width-1+"px";o.height=n.height-1+"px";var d=n.value,u=typeof d,c=n.format;if(!c&&u=="number"&&d!=Math.floor(d)){c="0.##############"}if(c&&d!=null){d=b.spreadsheet.formatting.format(d,c);if(d.__dataType){u=d.__dataType}}else if(d!==null&&d!==undefined){if(n.html){d=b.dom.html(d)}else{d=b.dom.text(d)}}if(u=="number"&&!o.textAlign&&n.validation&&d!=null){var f=n.validation.ntp;if(f!=null&&f.inputType=="string"){o.textAlign="left"}}if(!o.textAlign){switch(u){case"number":case"date":case"percent":case"currency":o.textAlign="right";break;case"boolean":o.textAlign="center";break}}b.spreadsheet.draw.applyIndent(n,o);var h=[x.cell];if(t){h.push(t)}if(n.enable===false){h.push("k-state-disabled")}if(n.merged){h.push("k-spreadsheet-merged-cell")}if(n.comment){h.push("k-spreadsheet-has-comment")}var p=n.verticalAlign||"bottom";if(p&&d){d=b.dom.element("div",{className:"k-vertical-align-"+p},[r(d)])}else{d=r(d)}var v=d?[d]:[];var m={style:o};var g=n.validation;if(g&&!g.value){v.push(b.dom.element("span",{className:"k-dirty"}));h.push("k-dirty-cell");m.title=g.message}m.className=h.join(" ");var _=b.dom.element("div",m,v);e.push(_);return _}function u(e,t,i){var n={};if(i.background){n.backgroundColor=i.background}if(i.color){n.color=i.color}if(i.fontFamily){n.fontFamily=i.fontFamily}if(i.underline){n.textDecoration="underline"}if(i.italic){n.fontStyle="italic"}if(i.textAlign){n.textAlign=i.textAlign}if(i.verticalAlign){n.verticalAlign=i.verticalAlign==="center"?"middle":i.verticalAlign}if(i.bold){n.fontWeight="bold"}if(i.fontSize){n.fontSize=i.fontSize+"px"}if(i.wrap===true){n.whiteSpace="pre-wrap"}if(i.borderRight){n.borderRight=w(i.borderRight)}else if(i.background){n.borderRightColor=i.background}if(i.borderBottom){n.borderBottom=w(i.borderBottom)}else if(i.background){n.borderBottomColor=i.background}var r=i.value,a=typeof r,o=i.format;if(!o&&a=="number"&&r!=Math.floor(r)){o="0.##############"}if(o&&r!=null){r=b.spreadsheet.formatting.format(r,o);if(r.__dataType){a=r.__dataType}}if(a=="number"&&!n.textAlign&&i.validation&&r!=null){var s=i.validation.ntp;if(s!=null&&s.inputType=="string"){n.textAlign="left"}}if(!n.textAlign){switch(a){case"number":case"date":case"percent":case"currency":n.textAlign="right";break;case"boolean":n.textAlign="center";break}}var l=null;if(i.enable===false){l="k-state-disabled"}var d=e.addCell(t,r,n,l,i.validation);var u,c;if(i.borderLeft){c=p(e,t);u=w(i.borderLeft);if(c&&u){c.attr.style.borderRight=u}}else if(i.background){n.borderLeftColor=i.background}if(i.borderTop){c=v(e,t);u=w(i.borderTop);if(c&&u){c.attr.style.borderBottom=u}}else if(i.background){n.borderTopColor=i.background}return d}var a=b.Class.extend({init:function(){this.cols=[];this.trs=[];this._height=0;this._width=0},addColumn:function(e){this._width+=e;var t=b.dom.element("col",{style:{width:e+"px"}});t.visible=e>0;this.cols.push(t)},addRow:function(e){var t=null;t={style:{height:e+"px"}};this._height+=e;var i=b.dom.element("tr",t);i.visible=e>0;this.trs.push(i)},addCell:function(e,t,i,n,r){if(t===null||t===undefined){t=""}if(!(t instanceof b.dom.Node)){t=b.dom.text(t)}var a=[t];var o={style:i};if(r&&!r.value){a.push(b.dom.element("span",{className:"k-dirty"}));n=(n||"")+(n?" ":"")+"k-dirty-cell";o.title=r.message}if(n){o.className=n}var s=b.dom.element("td",o,a);this.trs[e].children.push(s);return s},toDomTree:function(e,t,i){this.trs=this.trs.filter(function(e){return e.visible});var n=0;this.cols=this.cols.filter(function(e,t){if(!e.visible){this.trs.forEach(function(e){e.children.splice(t-n,1)});n++}return e.visible},this);return b.dom.element("table",{style:{left:e+"px",top:t+"px",height:this._height+"px",width:this._width+"px"},className:i,role:"presentation"},[b.dom.element("colgroup",null,this.cols),b.dom.element("tbody",null,this.trs)])}});var t='<ul class="#=classNames.cellContextMenu#">'+"<li data-action=cut>#: messages.cut #</li>"+"<li data-action=copy>#: messages.copy #</li>"+"<li data-action=paste>#: messages.paste #</li>"+'<li class="k-separator"></li>'+"<li data-action=merge>#: messages.merge #</li>"+"<li data-action=unmerge>#: messages.unmerge #</li>"+"</ul>";var i='<ul class="#=classNames.rowHeaderContextMenu#">'+"<li data-action=cut>#: messages.cut #</li>"+"<li data-action=copy>#: messages.copy #</li>"+"<li data-action=paste>#: messages.paste #</li>"+'<li class="k-separator"></li>'+'<li data-action="delete-row">#: messages.delete #</li>'+'<li data-action="hide-row">#: messages.hide #</li>'+'<li data-action="unhide-row">#: messages.unhide #</li>'+"</ul>";var n='<ul class="#=classNames.colHeaderContextMenu#">'+"<li data-action=cut>#: messages.cut #</li>"+"<li data-action=copy>#: messages.copy #</li>"+"<li data-action=paste>#: messages.paste #</li>"+'<li class="k-separator"></li>'+'<li data-action="delete-column">#: messages.delete #</li>'+'<li data-action="hide-column">#: messages.hide #</li>'+'<li data-action="unhide-column">#: messages.unhide #</li>'+"</ul>";var s='<ul class="#=classNames.drawingContextMenu#">'+'<li data-action="bring-to-front">#: messages.bringToFront #</li>'+'<li data-action="send-to-back">#: messages.sendToBack #</li>'+'<li class="k-separator"></li>'+'<li data-action="delete-drawing">#: messages.delete #</li>'+"</ul>";b.spreadsheet.ContextMenu=b.ui.ContextMenu;var m=b.template('<div class="#=classNames.view#"><div class="#=classNames.fixedContainer#"></div><div class="#=classNames.scroller#"><div class="#=classNames.viewSize#"></div></div>'+'<div tabindex="0" class="#=classNames.clipboard#" contenteditable=true></div><div class="#=classNames.cellEditor#"></div></div><div class="#=classNames.sheetsBar#"></div>'+t+i+n+s);function g(e,t,i){return e>=t&&e<=i}var y=b.Class.extend({init:function(e,t){var i=y.classNames;this.element=e;this.options=c.extend(true,{messages:b.spreadsheet.messages.view},this.options,t);this._chrome();this._dialogs=[];e.append(m({classNames:i,messages:b.spreadsheet.messages.menus}));this._formulaInput();this.wrapper=e.find(r+i.view);this.container=e.find(r+i.fixedContainer)[0];this.scroller=e.find(r+i.scroller)[0];this.clipboard=e.find(r+i.clipboard);this.viewSize=c(this.scroller.firstChild);this.tree=new b.dom.Tree(this.container);this.clipboardContents=new b.dom.Tree(this.clipboard[0]);this.editor=new b.spreadsheet.SheetEditor(this);this._sheetsbar();var n={target:e,animation:false,showOn:"never"};this.cellContextMenu=new b.spreadsheet.ContextMenu(e.find(r+i.cellContextMenu),n);this.colHeaderContextMenu=new b.spreadsheet.ContextMenu(e.find(r+i.colHeaderContextMenu),n);this.rowHeaderContextMenu=new b.spreadsheet.ContextMenu(e.find(r+i.rowHeaderContextMenu),n);this.drawingContextMenu=new b.spreadsheet.ContextMenu(e.find(r+i.drawingContextMenu),n)},enableClipboard:function(e){this.isClipboardDeactivated=!e;if(e){this.clipboard.attr("contenteditable",e)}else{this.clipboard.removeAttr("contenteditable")}},_resize:function(){var e=c(this.formulaBar.element).parents(".k-spreadsheet-action-bar");var t=b._outerHeight;var i=this.tabstrip?t(this.tabstrip.element):0;var n=e?t(e):0;var r=this.sheetsbar?t(this.sheetsbar.element):0;this.wrapper.height(this.element.height()-(i+n+r));if(this.tabstrip){this.tabstrip.quickAccessAdjust()}},_chrome:function(){var e=c("<div class='k-spreadsheet-action-bar' />").prependTo(this.element);var t=c("<div class='k-spreadsheet-name-editor' />").appendTo(e);this.nameEditor=new b.spreadsheet.NameEditor(t,this.options);var i=c("<div />").appendTo(e);this.formulaBar=new b.spreadsheet.FormulaBar(i);if(this.options.toolbar){this._tabstrip()}},_formulaInput:function(){var e=this.element.find(r+y.classNames.cellEditor);this.formulaInput=new b.spreadsheet.FormulaInput(e,{autoScale:true})},_sheetsbar:function(){if(this.options.sheetsbar){var e=c.extend(true,{openDialog:this.openDialog.bind(this)},this.options.sheetsbar);this.sheetsbar=new b.spreadsheet.SheetsBar(this.element.find(r+y.classNames.sheetsBar),e)}},_tabstrip:function(){var e=this.options.messages.tabs;var t=c.extend(true,{home:true,insert:true,data:true},this.options.toolbar);var i=[];if(this.tabstrip){this.tabstrip.destroy();this.element.children(".k-tabstrip").remove()}for(var n in t){if(t[n]===true||t[n]instanceof Array){i.push({id:n,text:e[n],content:""})}}this.tabstrip=new b.spreadsheet.TabStrip(c("<div />").prependTo(this.element),{animation:false,dataTextField:"text",dataContentField:"content",dataSource:i,toolbarOptions:t,view:this});this.tabstrip.select(0)},_executeCommand:function(e){this._sheet.trigger("commandRequest",e)},workbook:function(e){this._workbook=e;e._view=this;this.nameEditor._workbook=e},sheet:function(e){this._sheet=e},activeCellRectangle:function(){return this.cellRectangle(this._sheet._viewActiveCell())},_rectangle:function(e,t){return e._grid.boundingRectangle(t.toRangeRef())},isColumnResizer:function(t,e,i){t-=this._sheet._grid._headerWidth;if(!e._grid.columns.frozen){t+=this.scroller.scrollLeft}i=this._sheet._grid._columns.locate(0,i,function(e){return Math.abs(t-e)<=o/2});return i!==null&&!this._sheet.isHiddenColumn(i)?i:null},isRowResizer:function(t,e,i){t-=this._sheet._grid._headerHeight;if(!e._grid.rows.frozen){t+=this.scroller.scrollTop}i=this._sheet._grid._rows.locate(0,i,function(e){return Math.abs(t-e)<=o/2});return i!==null&&!this._sheet.isHiddenRow(i)?i:null},isFilterIcon:function(n,r,a,e){var o=this;var t=a._grid;var i=t.rows.frozen?0:o.scroller.scrollTop;var s=t.columns.frozen?0:o.scroller.scrollLeft;n-=o._sheet._grid._headerWidth-s;r-=o._sheet._grid._headerHeight-i;return b.util.withExit(function(i){o._sheet.forEachFilterHeader(e,function(e){var t=o._rectangle(a,e);if(a.filterIconRect(t).intersects(n,r)){i(true)}})})},isAutoFill:function(e,t,i){var n=this._sheet.select();if(n.size>1){return false}e-=this._sheet._grid._headerWidth;t-=this._sheet._grid._headerHeight;if(!i._grid.columns.frozen){e+=this.scroller.scrollLeft}if(!i._grid.rows.frozen){t+=this.scroller.scrollTop}var r=this._rectangle(i,n);return Math.abs(r.right-e)<8&&Math.abs(r.bottom-t)<8},isEditButton:function(e,t,i){var n=this._sheet.activeCellCustomEditor();if(n){var r=this.activeCellRectangle();if(t>=r.top&&t<=r.bottom){return e>r.right&&e<=r.right+20}}},drawingAt:function(e,t,i){e-=this._sheet._grid._headerWidth;t-=this._sheet._grid._headerHeight;if(!i._grid.columns.frozen){e+=this.scroller.scrollLeft}if(!i._grid.rows.frozen){t+=this.scroller.scrollTop}var n=this._sheet;var r=this._sheet._drawings;for(var a=r.length;--a>=0;){var o=r[a];var s=n.drawingBoundingBox(o);if(s.intersects(e,t)){return{drawing:o,drx:s.left-e,dry:s.top-t}}}},objectAt:function(e,t,i){var n=this._sheet._grid;var r,a;if(e<0||t<0||e>this.scroller.clientWidth||t>this.scroller.clientHeight){r={type:"outside"}}else if(e<n._headerWidth&&t<n._headerHeight){r={type:"topcorner"}}else{a=this.paneAt(e,t);if(!a){r={type:"outside"}}else{if(!i){var o=this.drawingAt(e,t,a);if(o){return{type:"drawing",drawing:o.drawing,drx:o.drx,dry:o.dry,pane:a,startX:e,startY:t}}}var s=a._grid.rows.indexVisible(t,this.scroller.scrollTop);var l=a._grid.columns.indexVisible(e,this.scroller.scrollLeft);var d="cell";var u=new f(s,l);var c=this._sheet.selectionInProgress();if(this.isAutoFill(e,t,a)){d="autofill"}else if(this.isFilterIcon(e,t,a,u)){d="filtericon"}else if(!c&&e<n._headerWidth){d="rowheader";if((s=this.isRowResizer(t,a,s))!==null){u=new f(s,-Infinity);d="rowresizehandle"}}else if(!c&&t<n._headerHeight){d="columnheader";if((l=this.isColumnResizer(e,a,l))!==null){u=new f(-Infinity,l);d="columnresizehandle"}}else if(this.isEditButton(e,t,a)){d="editor"}r={type:d,ref:u}}}r.pane=a;r.x=e;r.y=t;return r},paneAt:function(n,r){return this.panes.filter(function e(t){var i=t._grid;return g(r,i.top,i.bottom)&&g(n,i.left,i.right)})[0]},containingPane:function(t){return this.panes.filter(function(e){if(e._grid.contains(t)){return true}return false})[0]},cellRectangle:function(e){var t=this.containingPane(e)._grid;var i=this._sheet._grid.rectangle(e);return i.offset(t.headerWidth-(t.columns.frozen?0:this.scroller.scrollLeft),t.headerHeight-(t.rows.frozen?0:this.scroller.scrollTop))},refresh:function(e){var t=this._sheet;if(this.tabstrip){this.tabstrip.refreshTools(t.range(t.activeCell()))}if(e.sheetSelection&&this.sheetsbar){this.sheetsbar.renderSheets(this._workbook.sheets(),this._workbook.sheetIndex(this._sheet))}this._resize();this.viewSize[0].style.height=t._grid.totalHeight()+"px";this.viewSize[0].style.width=t._grid.totalWidth()+16+"px";if(e.layout){var i=t.frozenColumns();var n=t.frozenRows();this.panes=[this._pane(n,i)];if(i>0){this.panes.push(this._pane(n,0,null,i))}if(n>0){this.panes.push(this._pane(0,i,n,null))}if(n>0&&i>0){this.panes.push(this._pane(0,0,n,i))}}if(e.filter){this._destroyFilterMenu()}if(e.activeCell){this._focus=t.activeCell().toRangeRef()}},createFilterMenu:function(e){this._destroyFilterMenu();var t=this._sheet;var i=t.filter().ref;var n=new b.spreadsheet.Range(i,t);var r=c("<div />").appendTo(this.element);var a={column:e,range:n};var o=new b.spreadsheet.FilterMenu(r,a);this._filterMenu=o;return o},selectClipboardContents:function(){if(!this.isClipboardDeactivated){this.clipboard.focus();e(this.clipboard[0])}},scrollIntoView:function(e){var t=false;var i=this.containingPane(e)._grid;var n=i.scrollBoundaries(e);var r=this.scroller;var a=i.rows.frozen?0:r.scrollTop;var o=i.columns.frozen?0:r.scrollLeft;if(n.top<a){t=true;r.scrollTop=n.scrollTop}if(n.bottom>a){t=true;r.scrollTop=n.scrollBottom}if(n.left<o){t=true;r.scrollLeft=n.scrollLeft}if(n.right>o){t=true;r.scrollLeft=n.scrollRight}return t},_destroyDialog:function(){this._dialogs.pop()},openCustomEditor:function(){var i=this;var e=i._sheet.activeCell().first();var t=i._sheet.activeCellCustomEditor();var n=i._sheet.range(e);t.edit({range:n,rect:i.activeCellRectangle(),view:this,validation:this._sheet.validation(e),callback:function(e,t){i._executeCommand({command:"EditCommand",options:{operatingRange:n,editRange:n,property:t?"input":"value",value:e}})}})},openDialog:function(n,r){var a=this._sheet;return a.withCultureDecimals(function(){var e=b.spreadsheet.dialogs.create(n,r);if(e){e.bind("action",this._executeCommand.bind(this));e.bind("deactivate",this._destroyDialog.bind(this));this._dialogs.push(e);var t=a.activeCell();var i=new b.spreadsheet.Range(t,a);e.open(i);return e}}.bind(this))},showError:function(e,i){var t=this._dialogs;var n=this.options.messages.errors;var r=false;if(t.length>0){t.forEach(function(e){if(e.options&&e.options.title===l){r=true}})}if(r){return}var a=function(t){var e=t.sender.dialog().element;e.find(".k-button:first").focus();e.find(".k-button, input").on("keydown",function(e){if(e.keyCode==b.keys.ESC){t.sender.close()}})};var o=function(e){var t=e.sender;this.selectClipboardContents();if(t._retry&&i){i()}}.bind(this);if(b.spreadsheet.dialogs.registered(e.type)){var s={close:o};if(e.type==="validationError"){s=c.extend(s,{title:e.title||"Error",text:e.body?e.body:n[e.type],activate:a})}this.openDialog(e.type,s)}else{this.openDialog("message",{title:e.title||"Error",text:e.body?e.body:n[e.type],activate:a,close:o})}},destroy:function(){this._dialogs.forEach(function(e){e.destroy()});this.cellContextMenu.destroy();this.rowHeaderContextMenu.destroy();this.colHeaderContextMenu.destroy();this.drawingContextMenu.destroy();this.cellContextMenu=this.rowHeaderContextMenu=this.colHeaderContextMenu=this.drawingContextMenu=null;if(this.tabstrip){this.tabstrip.destroy();this.tabstrip=null}this._destroyFilterMenu()},_destroyFilterMenu:function(){if(this._filterMenu){this._filterMenu.destroy();this._filterMenu=undefined;this._filterMenuColumn=undefined}},render:function(e){if(!this.element.is(":visible")){return}var t=this._sheet;var i=t.focus();var n=b.support.scrollbar();var r=this.wrapper[0].clientWidth-n;var a=this.wrapper[0].clientHeight-n;if(i&&this.scrollIntoView(i)){return}var o=!t.resizingInProgress()?"none":t.resizeHandlePosition().col===-Infinity?"column":"row";this.wrapper.toggleClass(h.editContainer,this.editor.isActive()).toggleClass(h.horizontalResize,o=="row").toggleClass(h.verticalResize,o=="column");var s=t._grid;var l=[];var d={scroller:this.scroller,toplevelElements:l,contentWidth:r,contentHeight:a};this.panes.forEach(function(e){l.push(e.render(d))});var u=b.dom.element("div",{style:{width:s._headerWidth+"px",height:s._headerHeight+"px"},className:y.classNames.topCorner});l.push(u);if(t.resizeHandlePosition()&&t.resizeHintPosition()){l.push(this.renderResizeHint())}this.tree.render(l);c(this.container).css({width:r,height:a});if(this.editor.isActive()){this.editor.toggleTooltip(this.activeCellRectangle())}else if(!(e.resize||e.comment||t.selectionInProgress()||t.resizingInProgress()||t.draggingInProgress()||t.isInEditMode())){this.renderClipboardContents()}},renderResizeHint:function(){var e=this._sheet;var t=e.resizeHandlePosition();var i=t.col!==-Infinity;var n;if(i){n={height:this.scroller.clientHeight+"px",width:o+"px",left:e.resizeHintPosition().x+"px",top:"0px"}}else{n={height:o+"px",width:this.scroller.clientWidth+"px",top:e.resizeHintPosition().y+"px",left:"0px"}}var r=C.classNames;return b.dom.element("div",{className:r.resizeHint+(!i?" "+r.resizeHintVertical:""),style:n},[b.dom.element("div",{className:r.resizeHintHandle}),b.dom.element("div",{className:r.resizeHintMarker})])},renderClipboardContents:function(){var e=this._sheet;var t=e._grid;var o=t.normalize(e.select().toRangeRef());var i=this._workbook.clipboard().canCopy();if(i.canCopy===false&&i.multiSelection){this.clipboardContents.render([]);this.selectClipboardContents();return}o=e.trim(o);var s=new a;var n=t.rangeDimensions(o);n.rows.forEach(function(e){s.addRow(e)});n.columns.forEach(function(e){s.addColumn(e)});var r=e._getMergedCells(o);var l=r.primary;var d=r.secondary;e.forEach(o,function(e,t,i){var n=new f(e,t).print();if(!d[n]){var r=u(s,e-o.topLeft.row,i);var a=l[n];if(a){r.attr.colspan=a.width();r.attr.rowspan=a.height()}}});if(b.support.browser.msie){this.clipboard.empty()}this.clipboardContents.render([s.toDomTree(0,0,"kendo-clipboard-"+this._workbook.clipboard()._uid)]);this.selectClipboardContents()},_pane:function(e,t,i,n){var r=new C(this._sheet,this._sheet._grid.pane({row:e,column:t,rowCount:i,columnCount:n}));r.refresh(this.scroller.clientWidth,this.scroller.clientHeight);return r}});var x={cell:"k-spreadsheet-cell",vaxis:"k-spreadsheet-vaxis",haxis:"k-spreadsheet-haxis",vborder:"k-spreadsheet-vborder",hborder:"k-spreadsheet-hborder",rowHeader:"k-spreadsheet-row-header",columnHeader:"k-spreadsheet-column-header",pane:"k-spreadsheet-pane",data:"k-spreadsheet-data",mergedCell:"k-spreadsheet-merged-cell",mergedCellsWrapper:"k-merged-cells-wrapper",activeCell:"k-spreadsheet-active-cell",selection:"k-spreadsheet-selection",selectionWrapper:"k-selection-wrapper",autoFillWrapper:"k-auto-fill-wrapper",single:"k-single",top:"k-top",right:"k-right",bottom:"k-bottom",left:"k-left",resizeHandle:"k-resize-handle",columnResizeHandle:"k-column-resize-handle",rowResizeHandle:"k-row-resize-handle",resizeHint:"k-resize-hint",resizeHintHandle:"k-resize-hint-handle",resizeHintMarker:"k-resize-hint-marker",resizeHintVertical:"k-resize-hint-vertical",selectionHighlight:"k-spreadsheet-selection-highlight",series:["k-series-a","k-series-b","k-series-c","k-series-d","k-series-e","k-series-f"]};var C=b.Class.extend({init:function(e,t){this._sheet=e;this._grid=t},refresh:function(e,t){this._grid.refresh(e,t)},isVisible:function(e,t,i){return this._grid.view(e,t).ref.intersects(i)},render:function(e){var t=e.scroller;var i=t.scrollLeft;var n=t.scrollTop;if(n<0){n=0}if(i<0){i=0}var r=C.classNames;var a=this._sheet;var o=this._grid;var s=o.view(i,n);this._currentView=s;this._currentRect=this._rectangle(s.ref);this._selectedHeaders=a.selectedHeaders();var l=[];l.push(this.renderData(e));if(!a._activeDrawing){l.push(this.renderSelection(t))}l.push(this.renderAutoFill());l.push(this.renderEditorSelection());l.push(this.renderFilterHeaders());if(o.hasRowHeader){var d=b.dom.element("div",{className:r.rowHeader,style:{width:o.headerWidth+"px",top:s.rowOffset+"px"}});l.push(d);a.forEach(s.ref.leftColumn(),function(e){if(!a.isHiddenRow(e)){var t=e+1,i=a.rowHeight(e);d.children.push(b.dom.element("div",{className:this.headerClassName(e,"row"),style:{width:o.headerWidth+"px",height:i+"px"}},[b.dom.element("div",{className:"k-vertical-align-center"},[b.dom.text(t+"")])]))}}.bind(this))}if(o.hasColumnHeader){var u=b.dom.element("div",{className:r.columnHeader,style:{top:"0px",left:s.columnOffset+"px",width:this._currentRect.width+"px",height:o.headerHeight+"px"}});l.push(u);var c=0;a.forEach(s.ref.topRow(),function(e,t){if(!a.isHiddenColumn(t)){var i=b.spreadsheet.Ref.display(null,Infinity,t),n=a.columnWidth(t);u.children.push(b.dom.element("div",{className:this.headerClassName(t,"col"),style:{position:"absolute",left:c+"px",width:n+"px",height:o.headerHeight+"px"}},[b.dom.element("div",{className:"k-vertical-align-center"},[b.dom.text(i+"")])]));c+=n}}.bind(this))}if(a.resizeHandlePosition()&&(o.hasColumnHeader||o.hasRowHeader)){if(!a.resizeHintPosition()){this.renderResizeHandle(l)}}var f=[r.pane];if(o.hasColumnHeader){f.push(r.top)}if(o.hasRowHeader){f.push(r.left)}return b.dom.element("div",{style:o.style,className:f.join(" ")},l)},headerClassName:function(e,t){var i=this._selectedHeaders;var n;var r;if(t==="row"){n=i.rows[e];r=i.allRows}else{n=i.cols[e];r=i.allCols}var a=n||(i.all?"full":r?"partial":"none");if(a){a="k-selection-"+a}return a},renderData:function(d){var u=this._sheet;var c=this._currentView;var f=b.dom.element("div",{className:C.classNames.data,style:{position:"relative",left:c.columnOffset+"px",top:c.rowOffset+"px"}});var t=this._currentRect;var e=b.spreadsheet.draw.doLayout(u,c.ref,{forScreen:true}),i;var h=this._grid;var p=u._showGridLines;if(p){i=null;e.xCoords.forEach(function(e){if(e!==i){i=e;f.children.push(b.dom.element("div",{className:x.vaxis,style:{left:e+"px",height:t.height+"px",borderColor:u.gridLinesColor()}}))}});i=null;e.yCoords.forEach(function(e){if(e!==i){i=e;f.children.push(b.dom.element("div",{className:x.haxis,style:{top:e+"px",width:t.width+"px",borderColor:u.gridLinesColor()}}))}})}var v=b.spreadsheet.draw.Borders();var m=u.activeCell().toRangeRef();var g=m.topLeft;e.cells.forEach(function(e){var t=null;var i=e.row+c.ref.topLeft.row;var n=e.col+c.ref.topLeft.col;if(u._activeDrawing){var r=u._activeDrawing.topLeftCell;if(r&&r.row==i&&r.col==n){t="k-spreadsheet-drawing-anchor-cell"}}else if(i==g.row&&n==g.col){t=[C.classNames.activeCell].concat(this._activeFormulaColor(),this._directionClasses(m));if(u.singleCellSelection()){t.push(C.classNames.single)}t=t.join(" ")}v.add(e);_(f.children,e,t,p);if(e.comment&&u._commentRef&&i==u._commentRef.row&&n==u._commentRef.col){var a=4;var o=e.right+h.left+c.columnOffset+a;var s={top:e.top+h.top+c.rowOffset+"px"};if(o+200>d.contentWidth){s.right=d.contentWidth-h.left-e.left-c.columnOffset+a+"px"}else{s.left=o+"px"}var l=b.dom.element("div",{className:"k-tooltip k-spreadsheet-cell-comment",style:s},[b.dom.text(e.comment)]);d.toplevelElements.push(l)}},this);v.vert.forEach(function(e){e.forEach(function(e){if(!e.rendered){e.rendered=true;var t={left:e.x+"px",top:e.top+"px",height:e.bottom-e.top+1+"px",borderWidth:e.size+"px",borderColor:e.color};if(e.size!=1){t.transform="translateX(-"+(e.size-1)/2+"px)"}f.children.push(b.dom.element("div",{className:x.vborder,style:t}))}})});v.horiz.forEach(function(e){e.forEach(function(e){if(!e.rendered){e.rendered=true;var t={top:e.y+"px",left:e.left+"px",width:e.right-e.left+"px",borderWidth:e.size+"px",borderColor:e.color};if(e.size!=1){t.transform="translateY(-"+(e.size-1)/2+"px)"}f.children.push(b.dom.element("div",{className:x.hborder,style:t}))}})});this.renderDrawings(e,f.children);return f},renderDrawings:function(e,r){var a=this._sheet;var o=a._workbook;e.drawings.forEach(function(e){var t=e.drawing;var i=e.box;var n=i.toDiv("k-spreadsheet-drawing");if(t.image){n.children.push(b.dom.element("div",{className:"k-spreadsheet-drawing-image",style:{backgroundImage:"url('"+o.imageUrl(t.image)+"')",opacity:t.opacity}}))}if(t===a._activeDrawing){n.attr.className+=" k-spreadsheet-active-drawing";S(n.children)}r.push(n)})},renderResizeHandle:function(e){var t=this._sheet;var i=t.resizeHandlePosition();var n=this._rectangle(i);var r=[C.classNames.resizeHandle];var a;if(i.col!==-Infinity){if(this._grid.rows._start>0){return}a={height:this._grid.headerHeight+"px",width:o+"px",left:n.right-o/2+"px",top:"0px"};r.push(h.horizontalResize)}else{if(this._grid.columns._start>0){return}a={height:o+"px",width:this._grid.headerWidth+"px",top:n.bottom-o/2+"px",left:"0px"};r.push(h.verticalResize)}e.push(b.dom.element("div",{className:r.join(" "),style:a}))},filterIconRect:function(e){var t=16;var i=3;return new b.spreadsheet.Rectangle(e.right-t-i,e.top+i,t,t)},renderFilterHeaders:function(){var e=this._sheet;var a=[];var o=y.classNames;var s=e.filter();function l(e){return b.dom.element("span",{className:o.icon+" "+e})}function d(e,t,i){var n={left:t.left+"px",top:t.top+"px"};var r=s&&s.columns.some(function(e){return e.index===i});var a=e.filterButton;if(r){a+=" "+e.filterButtonActive}var o=b.dom.element("span",{className:a,style:n},[l(e.iconFilterDefault)]);return o}if(s){this._addDiv(a,s.ref,o.filterRange)}e.forEachFilterHeader(this._currentView.ref,function(e){var t=this._rectangle(e);var i=this.filterIconRect(t);var n=this._sheet.filterColumn(e);var r=d(o,i,n);a.push(r)}.bind(this));return b.dom.element("div",{className:o.filterHeadersWrapper},a)},renderEditorSelection:function(){var i=C.classNames;var e=this._sheet;var n=[];e._formulaSelections.forEach(function(e){var t=e.ref;if(t===b.spreadsheet.NULLREF){return}this._addDiv(n,t,i.selectionHighlight+" "+e.colorClass)}.bind(this));return b.dom.element("div",{className:i.selectionWrapper},n)},renderSelection:function(e){var t=C.classNames;var i=[];var n=[t.selection];var r=this._sheet;var a=r.activeCell().toRangeRef();var o=r.select();n=n.concat(this._activeFormulaColor());if(o.size()===1){n.push("k-single-selection")}if(this._sheet.autoFillPunch()){n.push("k-dim-auto-fill-handle")}o.forEach(function(e){if(e!==b.spreadsheet.NULLREF){this._addDiv(i,e,n.join(" "))}}.bind(this));this._renderCustomEditorButton(i,a,e);return b.dom.element("div",{className:t.selectionWrapper},i)},renderAutoFill:function(){var e=[];if(this._sheet.autoFillInProgress()){var t=this._sheet.autoFillRef();var i=this._sheet.autoFillPunch();var n=this._sheet._autoFillDirection;this._addDiv(e,t,"k-auto-fill");if(i){this._addDiv(e,i,"k-auto-fill-punch")}else if(n!==undefined){var r,a;switch(n){case 0:r=t.bottomRight;a="k-auto-fill-br-hint";break;case 1:r=t.bottomRight;a="k-auto-fill-br-hint";break;case 2:r=new f(t.topLeft.row,t.bottomRight.col);a="k-auto-fill-tr-hint";break;case 3:r=new f(t.bottomRight.row,t.topLeft.col);a="k-auto-fill-bl-hint";break}var o=this._addDiv(e,r,a);if(o){var s=b.dom.element("span",{className:"k-tooltip"},[b.dom.text(this._sheet._autoFillHint)]);o.children.push(s)}}}return b.dom.element("div",{className:C.classNames.autoFillWrapper},e)},_addDiv:function(e,t,i){var n=this._currentView,r;if(n.ref.intersects(t)){r=this._rectangle(t).resize(1,1).toDiv(i);e.push(r)}return r},_renderCustomEditorButton:function(o,e,s){var l=this;var t=l._sheet;var i=l._currentView;var d=l._grid.columns._axis._count;var u=t.activeCellCustomEditor();if(u&&i.ref.intersects(e)){var c=l._rectangle(e);t.forEach(e.collapse(),function(e,t,i){i.left=c.left;i.top=c.top;i.width=c.width;i.height=c.height;var n="k-button k-spreadsheet-editor-button";var r=t==d-1||l._buttonOutOfVisiblePane(e,t,s);l._editorInLastColumn=r;var a=b.dom.element("div",{className:n,style:{left:i.left+i.width+"px",top:i.top+"px",height:i.height+"px"}});if(u.icon){a.children.push(b.dom.element("span",{className:"k-icon "+u.icon}))}o.push(a)})}},_activeFormulaColor:function(){var e;var t=[];if(this._sheet.isInEditMode()){e=this._sheet._formulaSelections.filter(function(e){return e.active&&e.type=="ref"})[0];if(e){t.push(e.colorClass)}}return t},_directionClasses:function(e){var t=[];var i=C.classNames;var n=this._currentView.ref;if(!e.move(0,-1).intersects(n)){t.push(i.left)}if(!e.move(-1,0).intersects(n)){t.push(i.top)}if(!e.move(0,1).intersects(n)){t.push(i.right)}if(!e.move(1,0).intersects(n)){t.push(i.bottom)}return t},_rectangle:function(e){return this._grid.boundingRectangle(e.toRangeRef()).offset(-this._currentView.mergedCellLeft,-this._currentView.mergedCellTop)},_buttonOutOfVisiblePane:function(e,t,i){var n=this;var r=n._grid;var a=n._sheet;var o=a.range(e,t)._ref;var s=r.scrollBoundaries(o);var l=r.columns.frozen?0:i.scrollLeft;if(s.right+d>l||t+1===a.frozenColumns()){return true}}});function S(t){["N","NE","E","SE","S","SW","W","NW"].forEach(function(e){t.push(b.dom.element("div",{className:"k-spreadsheet-drawing-handle "+e,"data-direction":e}))})}b.spreadsheet.View=y;b.spreadsheet.Pane=C;b.spreadsheet.drawCell=_;c.extend(true,y,{classNames:h});c.extend(true,C,{classNames:x})})(window.kendo)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/customeditors",["kendo.core","kendo.popup","kendo.calendar","kendo.listview","spreadsheet/sheet"],e)})(function(){(function(h){"use strict";var e=h.jQuery;var r={};var t=h.spreadsheet.registerEditor=function(e,t){r[e]=t};h.spreadsheet.Sheet.prototype.activeCellCustomEditor=function(){var e=this.activeCell().first();if(this.range(e).enable()){var t=this.validation(e);var i=this._properties.get("editor",this._grid.cellRefIndex(e));var n;if(i!=null){n=r[i]}else if(t&&t.showButton){i="_validation_"+t.dataType;n=r[i]}if(typeof n=="function"){n=r[i]=n()}return n}};t("_validation_date",function(){var l,d,u;function c(){d=e("<div>").kendoCalendar();u=e("<div>").kendoPopup();d.appendTo(u);d=d.getKendoCalendar();u=u.getKendoPopup();d.bind("change",function(){u.close();var e=d.value();if(!l.range.format()){l.range.format("yyyy-mm-dd")}l.callback(h.spreadsheet.dateToNumber(e))});u.setOptions({anchor:l.view.element.find(".k-spreadsheet-editor-button")})}function t(){c();var e=l.range.value();var n=l.range.sheet();if(e!=null){d.value(h.spreadsheet.numberToDate(e))}else{d.value(null)}var r=l.validation;if(r){var t=h.ui.Calendar.fn.options.min;var i=h.ui.Calendar.fn.options.max;var a=r.from;var o=r.to;var s=h.spreadsheet.calc.runtime.Formula;if(/^(?:greaterThan|between)/.test(r.comparerType)){if(a instanceof s&&f(a.value)){t=h.spreadsheet.numberToDate(n.range(a.value.row,a.value.col).value())}else{t=h.spreadsheet.numberToDate(a.value)}}if(r.comparerType=="between"){if(o instanceof s&&f(o.value)){i=h.spreadsheet.numberToDate(n.range(o.value.row,o.value.col).value())}else{i=h.spreadsheet.numberToDate(r.to.value)}}if(r.comparerType=="lessThan"||r.comparerType=="lessThanOrEqualTo"){if(a instanceof s&&f(a.value)){i=h.spreadsheet.numberToDate(n.range(a.value.row,a.value.col).value())}else{i=h.spreadsheet.numberToDate(r.from.value)}}d.setOptions({disableDates:function(e){var t,i;if(a&&a instanceof s&&f(a.value)){t=n.range(a.value.row,a.value.col).value()}else{t=a?a.value|0:0}if(o&&o instanceof s&&f(o.value)){i=n.range(o.value.row,o.value.col).value()}else{i=o?o.value|0:0}e=h.spreadsheet.dateToNumber(e)|0;return!h.spreadsheet.validation.validationComparers[r.comparerType](e,t,i)},min:t,max:i})}else{d.setOptions({disableDates:null,min:null,max:null})}u.open()}function f(e){return e&&e.row!==null&&e.col!==null&&e.row>-1&&e.col>-1}return{edit:function(e){l=e;t()},icon:"k-i-calendar"}});t("_validation_list",function(){var r,a,o;function s(){if(!a){a=e("<ul class='k-list k-reset'/>").kendoStaticList({template:"#:value#",selectable:true,autoBind:false});o=e("<div class='k-spreadsheet-list-popup'>").kendoPopup();a.appendTo(o);o=o.getKendoPopup();a=a.getKendoStaticList();a.bind("change",function(){o.close();var e=a.value()[0];if(e){r.callback(e.value)}})}o.setOptions({anchor:r.view.element.find(".k-spreadsheet-editor-button")})}function t(){s();var e=r.validation.from.value;var t=[],i=function(e){t.push({value:e})};if(e instanceof h.spreadsheet.calc.runtime.Matrix){e.each(i)}else{(e+"").split(/\s*,\s*/).forEach(i)}var n=new h.data.DataSource({data:t});a.setDataSource(n);n.read();o.open()}return{edit:function(e){r=e;t()},icon:"k-i-arrow-60-down"}})})(window.kendo)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/grid",["kendo.core","spreadsheet/references"],e)})(function(){(function(t){var c=t.spreadsheet.CellRef;var f=t.spreadsheet.RangeRef;var i=t.spreadsheet.UnionRef;var n=t.Class.extend({init:function e(t,i,n,r){this.left=t;this.top=i;this.width=n;this.height=r;this.right=this.left+this.width;this.bottom=this.top+this.height},offset:function(e,t){return new n(this.left+e,this.top+t,this.width,this.height)},resize:function(e,t){return new n(this.left,this.top,this.width+e,this.height+t)},intersects:function(e,t){if(e instanceof n){return this.intersectsRect(e)}return this.left<e&&e<this.left+this.width&&this.top<t&&t<this.top+this.height},intersectsRect:function(e){var t=this;return t.left<=e.right&&e.left<=t.right&&t.top<=e.bottom&&e.top<=t.bottom},toDiv:function(e){return t.dom.element("div",{className:e,style:{width:this.width+"px",height:this.height+"px",top:this.top+"px",left:this.left+"px"}})}});var e=t.Class.extend({init:function(e,t,i,n,r,a){this.rowCount=i;this.columnCount=n;this._columns=t;this._rows=e;this._headerHeight=r;this._headerWidth=a},isAxis:function(e){e=e.toRangeRef();var t=e.topLeft;var i=e.bottomRight;return t.row===0&&i.row===this.rowCount-1||t.col===0&&i.col===this.columnCount-1},width:function(e,t){return this._columns.sum(e,t)},height:function(e,t){return this._rows.sum(e,t)},totalHeight:function(){return this._rows.total+this._headerHeight},totalWidth:function(){return this._columns.total+this._headerWidth},index:function(e,t){return t*this.rowCount+e},cellRef:function(e){return new c(e%this.rowCount,e/this.rowCount>>0)},rowRef:function(e){return new f(new c(e,0),new c(e,this.columnCount-1))},colRef:function(e){return new f(new c(0,e),new c(this.rowCount-1,e))},cellRefIndex:function(e){return this.index(e.row,e.col)},normalize:function(e){if(e instanceof f){return new f(this.normalize(e.topLeft),this.normalize(e.bottomRight)).setSheet(e.sheet,e.hasSheet())}if(e instanceof i){return e.map(function(e){return this.normalize(e)},this)}if(e instanceof c){e=e.clone();e.col=Math.max(0,Math.min(this.columnCount-1,e.col));e.row=Math.max(0,Math.min(this.rowCount-1,e.row))}return e},rectangle:function(e){var t=this.normalize(e.topLeft);var i=this.normalize(e.bottomRight);return new n(this.width(0,t.col-1),this.height(0,t.row-1),this.width(t.col,i.col),this.height(t.row,i.row))},pane:function(e){return new r(new t.spreadsheet.PaneAxis(this._rows,e.row,e.rowCount,this._headerHeight),new t.spreadsheet.PaneAxis(this._columns,e.column,e.columnCount,this._headerWidth),this)},rangeDimensions:function(e){return{rows:this._rows.values.iterator(e.topLeft.row,e.bottomRight.row),columns:this._columns.values.iterator(e.topLeft.col,e.bottomRight.col)}},forEach:function(e,t){var i=this.normalize(e.topLeft);var n=this.normalize(e.bottomRight);for(var r=i.col;r<=n.col;r++){for(var a=i.row;a<=n.row;a++){t(new c(a,r))}}},trim:function(e,t){var i=this.normalize(e.topLeft);var n=this.normalize(e.bottomRight);var r=i.row;var a=i.col;for(var o=i.col;o<=n.col;o++){var s=this.index(i.row,o);var l=this.index(n.row,o);var d=t.tree.intersecting(s,l);if(d.length){var u=this.cellRef(d[d.length-1].end);r=Math.max(r,u.row);a=o}}return new f(e.topLeft,new c(Math.min(r,e.bottomRight.row),a))}});var r=t.Class.extend({init:function(e,t,i){this.rows=e;this.columns=t;this._grid=i;this.headerHeight=e.headerSize;this.headerWidth=t.headerSize;this.hasRowHeader=t.hasHeader;this.hasColumnHeader=e.hasHeader},refresh:function(e,t){this.columns.viewSize(e);this.rows.viewSize(t);var i=this.columns.paneSegment();var n=this.rows.paneSegment();this.left=i.offset;this.top=n.offset;this.right=i.offset+i.length;this.bottom=n.offset+n.length;this.style={top:n.offset+"px",left:i.offset+"px",height:n.length+"px",width:i.length+"px"}},view:function(e,t){var i=this.rows.visible(t);var n=this.columns.visible(e);return{rows:i,columns:n,rowOffset:i.offset,columnOffset:n.offset,mergedCellLeft:n.start,mergedCellTop:i.start,ref:new f(new c(i.values.start,n.values.start),new c(i.values.end,n.values.end))}},contains:function(e){return this.rows.contains(e.topLeft.row,e.bottomRight.row)&&this.columns.contains(e.topLeft.col,e.bottomRight.col)},index:function(e,t){return this._grid.index(e,t)},boundingRectangle:function(e){return this._grid.rectangle(e)},cellRefIndex:function(e){return this._grid.cellRefIndex(e)},scrollBoundaries:function(e){var t=this.boundingRectangle(e);var i={top:Math.max(0,t.top-this.top+(this.hasColumnHeader?0:this.headerHeight)),left:Math.max(0,t.left-this.left+(this.hasRowHeader?0:this.headerWidth)),right:t.right-this.columns._viewSize+this.headerWidth,bottom:t.bottom-this.rows._viewSize+this.headerHeight};var n=this.columns.defaultValue/2;var r=this.rows.defaultValue/2;i.scrollTop=i.top-r;i.scrollBottom=i.bottom+r;i.scrollLeft=i.left-n;i.scrollRight=i.right+n;return i}});t.spreadsheet.Grid=e;t.spreadsheet.PaneGrid=r;t.spreadsheet.Rectangle=n})(kendo)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/axis",["kendo.core"],e)})(function(){(function(r){var e=r.Class.extend({init:function(e,t){this._value=t;this._count=e;this.values=new r.spreadsheet.RangeList(0,e-1,t);this._hidden=new r.spreadsheet.RangeList(0,e-1,0);this.scrollBarSize=r.support.scrollbar();this._refresh()},adjust:function(e,t){if(t<0){this.values.copy(e-t,this._count-1,e);this._hidden.copy(e-t,this._count-1,e)}else{this.values.copy(e,this._count,e+t);this._hidden.copy(e,this._count,e+t);this.values.value(e,e+t-1,this._value);this._hidden.value(e,e+t-1,0)}this._refresh()},toJSON:function(e,t){var i=[];var n=this.values.iterator(0,this._count-1);for(var r=0;r<this._count;r++){var a=n.at(r);var o=this._hidden.value(r,r);if(a===this._value&&!o){continue}var s=t[r];if(s===undefined){s=i.length;var l={index:r};l[e]=a;if(o){l.hidden=o}i.push(l);t[r]=s}}return i},fromJSON:function(e,t){for(var i=0;i<t.length;i++){var n=t[i];var r=n.index;if(r===undefined){r=i}var a=n[e];if(a===0){this._hidden.value(r,r,n.hidden||this._value);this.value(r,r,0)}else{this.value(r,r,a)}}},hide:function(e){if(!this.hidden(e)){var t=this.value(e,e);this._hidden.value(e,e,t);this.value(e,e,0)}},hidden:function(e){return this._hidden.value(e,e)!==0},includesHidden:function(e,t){return this._hidden.intersecting(e,t).length>1},nextVisible:function(e){var t=this._count-1,i=e;while(++i<=t){if(!this.hidden(i)){return i}}return e},nextUntil:function(e,t){var i=this._count-1,n=e,r=false;while(++n<=i){var a=t(n,r,this.hidden(n));if(typeof a=="number"){return a}else if(a){break}r=true}return n-1},nextPage:function(e,t){return this.index(this.sum(0,e-1)+t)},prevPage:function(e,t){return this.index(this.sum(0,e)-t)},firstVisible:function(){var e=this._hidden.first();if(e.value===0){return 0}else{return e.end+1}},lastVisible:function(){var e=this._hidden.last();if(e.value===0){return this._count-1}else{return e.start-1}},prevVisible:function(e){var t=e;while(--t>=0){if(!this.hidden(t)){return t}}return e},prevUntil:function(e,t){var i=e,n=false;while(--i>=0){var r=t(i,n,this.hidden(i));if(typeof r=="number"){return r}else if(r){break}n=true}return i+1},unhide:function(e){if(this.hidden(e)){var t=this._hidden.value(e,e);this._hidden.value(e,e,0);this.value(e,e,t)}},value:function(e,t,i){if(i!==undefined){this.values.value(e,t,i);this._refresh()}else{return this.values.iterator(e,t).at(0)}},sum:function(e,t){var i=this.values.iterator(e,t);var n=0;for(var r=e;r<=t;r++){n+=i.at(r)}return n},locate:function(e,t,i){var n=this.values.iterator(e,t);var r=0;for(var a=e;a<=t;a++){r+=n.at(a);var o=i(r);if(o){return a}}return null},visible:function(e,t){var i=null;var n=null;var r=false;if(t>=this.total+this.scrollBarSize){r=true}var a=this._pixelValues.intersecting(e,t);i=a[0];n=a[a.length-1];if(!i){return{values:this.values.iterator(0,0),offset:0}}var o=e-i.start;var s=(o/i.value.value>>0)+i.value.start;var l=o-(s-i.value.start)*i.value.value;var d=t-n.start;var u=(d/n.value.value>>0)+n.value.start;if(u>n.value.end){u=n.value.end}if(r){l+=n.value.value-(d-(u-n.value.start)*n.value.value)}l=Math.min(-l,0);return{values:this.values.iterator(s,u),offset:l}},index:function(e){var t=0;var i=this.values.iterator(0,this._count-1);var n=i.at(0);while(n<e&&t<this._count-1){n+=i.at(++t)}return t},indexVisible:function(e){var t=this.index(e);if(this.hidden(t)){t=this.prevVisible(t)}return t},_refresh:function(){var n=0;this._pixelValues=this.values.map(function(e){var t=n;n+=(e.end-e.start+1)*e.value;var i=n-1;return new r.spreadsheet.ValueRange(t,i,e)});this.total=n},getState:function(){return{values:this.values.getState(),hidden:this._hidden.getState()}},setState:function(e){this.values.setState(e.values);this._hidden.setState(e.hidden);this._refresh()}});var t=r.Class.extend({init:function(e,t,i,n){this._axis=e;this._start=t;this._count=i;this.hasHeader=t===0;this.headerSize=n;this.defaultValue=e._value;this.frozen=i>0},viewSize:function(e){this._viewSize=e},sum:function(e,t){return this._axis.sum(e,t-1)},start:function(){return this.sum(0,this._start)},size:function(){return this.sum(this._start,this._start+this._count)},index:function(e,t){return this._axis.index(e+(this.frozen?0:t)-this.headerSize)},indexVisible:function(e,t){return this._axis.indexVisible(e+(this.frozen?0:t)-this.headerSize)},paneSegment:function(){var e=this.start();var t;if(!this.hasHeader){e+=this.headerSize}if(this.frozen){t=this.size();if(this.hasHeader){t+=this.headerSize}else{t-=this.headerSize}}else{t=this._viewSize-e}return{offset:e,length:t}},visible:function(e){var t=this.start();var i;if(this.frozen){i=this.size();if(!this.hasHeader){i-=this.headerSize}}else{i=this._viewSize-t-this.headerSize;t+=e}var n=this._axis.visible(t,t+i-1);if(this.frozen){n.offset=0}n.start=t;if(this.hasHeader){n.offset+=this.headerSize;n.start-=this.headerSize}return n},contains:function(e,t){if(this.frozen){if(e>this._start+this._count){return false}if(t<this._start){return false}return true}else{return t>=this._start}}});r.spreadsheet.Axis=e;r.spreadsheet.PaneAxis=t})(kendo)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/filter",["kendo.core","kendo.data"],e)})(function(){(function(a){var e=a.spreadsheet.Filter=a.Class.extend({prepare:function(){},value:function(e){return e.value},matches:function(){throw new Error("The 'matches' method is not implemented.")},toJSON:function(){throw new Error("The 'toJSON' method is not implemented.")}});e.create=function(e){var t=e.filter;if(!t){throw new Error("Filter type not specified.")}var i=a.spreadsheet[t.charAt(0).toUpperCase()+t.substring(1)+"Filter"];if(!i){throw new Error("Filter type not recognized.")}return new i(e)};a.spreadsheet.ValueFilter=e.extend({_values:[],_dates:[],_blanks:false,init:function e(t){if(t.values!==undefined){this._values=t.values}if(t.blanks!==undefined){this._blanks=t.blanks}if(t.dates!==undefined){this._dates=t.dates}},value:function(e){var t=e.value;if(this._dates.length>0&&e.format&&typeof t==="number"){var i=a.spreadsheet.formatting.type(t,e.format);if(i==="date"){t=a.spreadsheet.numberToDate(t)}}return t},matches:function(t){if(t===null||t===undefined){return this._blanks}if(t instanceof Date){return this._dates.some(function(e){return e.year===t.getFullYear()&&(e.month===undefined||e.month===t.getMonth())&&(e.day===undefined||e.day===t.getDate())&&(e.hours===undefined||e.hours===t.getHours())&&(e.minutes===undefined||e.minutes===t.getMinutes())&&(e.seconds===undefined||e.seconds===t.getSeconds())})}return this._values.indexOf(t)>=0},toJSON:function(){return{filter:"value",blanks:this._blanks,values:this._values.slice(0)}}});a.spreadsheet.CustomFilter=e.extend({_logic:"and",init:function e(t){if(t.logic!==undefined){this._logic=t.logic}if(t.criteria===undefined){throw new Error("Must specify criteria.")}this._criteria=t.criteria;var i=a.data.Query.filterExpr({logic:this._logic,filters:this._criteria,accentFoldingFiltering:a.culture().name}).expression;this._matches=new Function("d","return "+i)},matches:function(e){if(e===null){return false}return this._matches(e)},value:function(e){var t=e.value;var i=this._criteria[0].value;var n=i instanceof Date?"date":typeof i;var r=typeof t;if(e.format){r=a.spreadsheet.formatting.type(t,e.format)}if(r!=n){if(n=="string"){if(e.format){t=a.spreadsheet.formatting.text(t,e.format)}t=t+""}}else if(r=="date"){t=a.spreadsheet.numberToDate(t)}return t},toJSON:function(){return{filter:"custom",logic:this._logic,criteria:this._criteria}}});a.spreadsheet.TopFilter=e.extend({init:function e(t){this._type=t.type;this._value=t.value;this._values=[]},prepare:function(e){var t=e.map(this.value).sort().filter(function(e,t,i){return t===0||e!==i[t-1]});if(this._type==="topNumber"||this._type=="topPercent"){t.sort(function(e,t){return t-e})}else{t.sort(function(e,t){return e-t})}var i=this._value;if(this._type==="topPercent"||this._type==="bottomPercent"){i=t.length*i/100>>0}this._values=t.slice(0,i)},matches:function(e){return this._values.indexOf(e)>=0},toJSON:function(){return{filter:"top",type:this._type,value:this._value}}});a.spreadsheet.DynamicFilter=e.extend({init:function e(t){this._type=t.type;this._predicate=this[t.type];if(typeof this._predicate!=="function"){throw new Error("DynamicFilter type '"+t.type+"' not recognized.")}},value:function(e){var t=e.value;if(e.format){var i=a.spreadsheet.formatting.type(t,e.format);if(i==="date"){t=a.spreadsheet.numberToDate(t)}}return t},prepare:function(e){var t=0;var i=0;for(var n=0;n<e.length;n++){var r=this.value(e[n]);if(typeof r==="number"){t+=r;i++}}if(i>0){this._average=t/i}else{this._average=0}},matches:function(e){return this._predicate(e)},aboveAverage:function(e){if(e instanceof Date){e=a.spreadsheet.dateToNumber(e)}if(typeof e!=="number"){return false}return e>this._average},belowAverage:function(e){if(e instanceof Date){e=a.spreadsheet.dateToNumber(e)}if(typeof e!=="number"){return false}return e<this._average},tomorrow:function(e){if(e instanceof Date){var t=a.date.addDays(a.date.today(),1);return a.date.getDate(e).getTime()===t.getTime()}return false},today:function(e){if(e instanceof Date){return a.date.isToday(e)}return false},yesterday:function(e){if(e instanceof Date){var t=a.date.addDays(a.date.today(),-1);return a.date.getDate(e).getTime()===t.getTime()}return false},nextWeek:function(e){return r(a.date.addDays(a.date.today(),7),e)},thisWeek:function(e){return r(a.date.today(),e)},lastWeek:function(e){return r(a.date.addDays(a.date.today(),-7),e)},nextMonth:function(e){return i(e,1)},thisMonth:function(e){return i(e,0)},lastMonth:function(e){return i(e,-1)},nextQuarter:function(e){if(e instanceof Date){var t=a.date.today();var i=n(e)-n(t);return i===1&&t.getFullYear()===e.getFullYear()||i==-3&&t.getFullYear()+1===e.getFullYear()}return false},thisQuarter:function(e){if(e instanceof Date){var t=a.date.today();var i=n(e)-n(t);return i===0&&t.getFullYear()===e.getFullYear()}return false},lastQuarter:function(e){if(e instanceof Date){var t=a.date.today();var i=n(t)-n(e);return i===1&&t.getFullYear()===e.getFullYear()||i==-3&&t.getFullYear()-1===e.getFullYear()}return false},nextYear:function(e){return t(e,1)},thisYear:function(e){return t(e,0)},lastYear:function(e){return t(e,-1)},yearToDate:function(e){if(e instanceof Date){var t=a.date.today();return e.getFullYear()===t.getFullYear()&&e<=t}return false},toJSON:function(){return{filter:"dynamic",type:this._type}}});[1,2,3,4].forEach(function(t){a.spreadsheet.DynamicFilter.prototype["quarter"+t]=function(e){if(e instanceof Date){return n(e)===t}return false}});a.cultures["en-US"].calendar.months.names.forEach(function(e,t){a.spreadsheet.DynamicFilter.prototype[e.toLowerCase()]=function(e){if(e instanceof Date){return e.getMonth()===t}return false}});function n(e){var t=e.getMonth()+1;if(t>=1&&t<=3){return 1}else if(t>=4&&t<=6){return 2}else if(t>=7&&t<=9){return 3}else{return 4}}function t(e,t){if(e instanceof Date){var i=a.date.today();i.setFullYear(i.getFullYear()+t);return i.getFullYear()===e.getFullYear()}return false}function i(e,t){if(e instanceof Date){var i=a.date.firstDayOfMonth(a.date.today());i.setMonth(i.getMonth()+t,1);return i.getTime()===a.date.firstDayOfMonth(e).getTime()}return false}function r(e,t){if(t instanceof Date){var i=a.date.dayOfWeek(a.date.getDate(e),1);var n=a.date.dayOfWeek(a.date.getDate(t),1);return i.getTime()===n.getTime()}return false}})(kendo)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/sorter",["kendo.core"],e)})(function(){(function(r){var a=r.Class.extend({init:function(e,t){this._grid=e;this._lists=t},indices:function(e,t,i,n){var r=a.ascendingComparer;if(i===false){r=a.descendingComparer}return t.sortedIndices(this._grid.cellRefIndex(e.topLeft),this._grid.cellRefIndex(e.bottomRight),r,n)},sortBy:function(e,t,i,n,r){var a=this.indices(e.toColumn(t),i,n,r);for(var o=e.topLeft.col;o<=e.bottomRight.col;o++){var s=this._grid.index(e.topLeft.row,o);var l=this._grid.index(e.bottomRight.row,o);for(var d=0;d<this._lists.length;d++){if(s<this._lists[d].lastRangeStart()){this._lists[d].sort(s,l,a)}}}return a}});a.ascendingComparer=function(e,t){if(e===null&&t===null){return 0}if(e===null){return 1}if(t===null){return-1}var i=typeof e;var n=typeof t;if(i==="number"){if(n==="number"){return e-t}else{return-1}}if(i==="string"){switch(n){case"number":return 1;case"string":return e.localeCompare(t);default:return-1}}if(i==="boolean"){switch(n){case"number":return 1;case"string":return 1;case"boolean":return e-t;default:return-1}}if(e instanceof r.spreadsheet.calc.runtime.CalcError){if(t instanceof r.spreadsheet.calc.runtime.CalcError){return 0}else{return 1}}throw new Error("Cannot compare "+e+" and "+t)};a.descendingComparer=function(e,t){if(e===null&&t===null){return 0}if(e===null){return 1}if(t===null){return-1}return a.ascendingComparer(t,e)};r.spreadsheet.Sorter=a})(kendo)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/numformat",["spreadsheet/calc","kendo.dom","util/main"],e)})(function(){"use strict";var e=kendo.util;var c=kendo.spreadsheet.calc;var l=kendo.dom;var f=/^\[(black|green|white|blue|magenta|yellow|cyan|red)\]/i;var h=/^\[(<=|>=|<>|<|>|=)(-?[0-9.]+)\]/;function d(n){n=c.InputStream(n);var e=[],t=false,i;while(!n.eof()){var r=u();e.push(r);if(r.cond){t=true}}if(!t){if(e.length==1){e[0].cond="num"}else if(e.length==2){e[0].cond={op:">=",value:0};e[1].cond={op:"<",value:0}}else if(e.length>=3){e[0].cond={op:">",value:0};e[1].cond={op:"<",value:0};e[2].cond={op:"=",value:0};if(e.length>3){e[3].cond="text";e=e.slice(0,4)}}}return e;function a(){var e=n.skip(f);if(e){return e[1].toLowerCase()}}function o(){var e=n.skip(h);if(e){var t=parseFloat(e[2]);if(!isNaN(t)){return{op:e[1],value:t,custom:true}}}}function s(){var e=[],t,i=null;while(!n.eof()&&(t=d())){if(t.type=="date"){if(i&&/^(el)?time$/.test(i.type)&&i.part=="h"&&t.part=="m"&&t.format<3){t.type="time"}}else if(/^(el)?time$/.test(t.type)&&t.part=="s"){if(i&&i.type=="date"&&i.part=="m"&&i.format<3){i.type="time"}}if(!/^(?:str|space|fill)$/.test(t.type)){i=t}e.push(t)}return e}function l(e){if(e.type!="date"||e.part=="m"&&e.format<3){var t=n.skip(/^\.(0+)/);if(t){e.fraction=t[1].length;if(e.type=="date"){e.type="time"}}}return e}function d(){var e,t;if(t=n.skip(/^([#0?]+)(?:,([#0?]+))+/)){return{type:"digit",sep:true,format:t[1]+t[2],decimal:i}}if(t=n.skip(/^[#0?]+/)){return{type:"digit",sep:false,format:t[0],decimal:i}}if(t=n.skip(/^(e)([+-])/i)){return{type:"exp",ch:t[1],sign:t[2]}}if(t=n.skip(/^(d{1,4}|m{1,5}|yyyy|yy)/i)){t=t[1].toLowerCase();return l({type:"date",part:t.charAt(0),format:t.length})}if(t=n.skip(/^(hh?|ss?)/i)){t=t[1].toLowerCase();return l({type:"time",part:t.charAt(0),format:t.length})}if(t=n.skip(/^\[(hh?|mm?|ss?)\]/i)){t=t[1].toLowerCase();return l({type:"eltime",part:t.charAt(0),format:t.length})}if(t=n.skip(/^(a[.]?m[.]?\/p[.]?m[.]?|a\/p)/i)){t=t[1].split("/");return{type:"ampm",am:t[0],pm:t[1]}}switch(e=n.next()){case";":return null;case"\\":return{type:"str",value:n.next()};case'"':return{type:"str",value:n.readEscaped(e)};case"@":return{type:"text"};case"_":return{type:"space",value:n.next()};case"*":return{type:"fill",value:n.next()};case".":if(n.lookingAt(/^\s*[#0?]/)){i=true;return{type:"dec"}}return{type:"str",value:"."};case"%":return{type:"percent"};case",":return{type:"comma"}}return{type:"str",value:e}}function u(){i=false;var e=a(),t=o();if(!e&&t){e=a()}return{color:e,cond:t,body:s()}}}function n(e){return e.map(t).join(";");function t(e){var t="";if(e.color){t+="["+e.color+"]"}if(e.cond){if(!(e.cond=="text"||e.cond=="num")){t+="["+e.cond.op+e.cond.value+"]"}}t+=e.body.map(n).join("");return t}function i(e,t){if(t.fraction){e+="."+p("",t.fraction,"0")}return e}function n(e){if(e.type=="digit"){if(e.sep){return e.format.charAt(0)+","+e.format.substr(1)}else{return e.format}}else if(e.type=="exp"){return e.ch+e.sign}else if(e.type=="date"||e.type=="time"){return i(p("",e.format,e.part),e)}else if(e.type=="eltime"){return i("["+p("",e.format,e.part)+"]",e)}else if(e.type=="ampm"){return e.am+"/"+e.pm}else if(e.type=="str"){return JSON.stringify(e.value)}else if(e.type=="text"){return"@"}else if(e.type=="space"){return"_"+e.value}else if(e.type=="fill"){return"*"+e.value}else if(e.type=="dec"){return"."}else if(e.type=="percent"){return"%"}else if(e.type=="comma"){return","}}}function r(e,s){e.forEach(function(e){var t=s;if(e.cond=="text"){return}var i=e.body,n=false,r=i.length;while(t!==0&&--r>=0){var a=i[r];if(a.type=="digit"){if(a.decimal){n=true;if(t>0){a.format+=p("",t,"0")}else if(t<0){var o=a.format.length;a.format=a.format.substr(0,o+t);t+=o-a.format.length}if(a.format.length===0){i.splice(r,1);while(--r>=0){a=i[r];if(a.type=="digit"&&a.decimal){++r;break}if(a.type=="dec"){i.splice(r,1);break}}}}if(t>0){break}}}if(!n&&t>0){i.splice(r+1,0,{type:"dec"},{type:"digit",sep:false,decimal:true,format:p("",t,"0")})}})}function _(n){var r=0;return{next:function(){return n[r++]},eof:function(){return r>=n.length},ahead:function(e,t){if(r+e<=n.length){var i=t.apply(null,n.slice(r,r+e));if(i){r+=e}return i}},restart:function(){r=0}}}function a(e){var t=_(e.body);var i=false;var n=false;var r=false;var a=0;var o=/[\$\xA2-\xA5\u058F\u060B\u09F2\u09F3\u09FB\u0AF1\u0BF9\u0E3F\u17DB\u20A0-\u20BD\uA838\uFDFC\uFE69\uFF04\uFFE0\uFFE1\uFFE5\uFFE6]/;var s=0;var l="var intPart, decPart, isNegative, date, time; ";var d=false;var u=0;var c=[],f=[];var h=e.cond;var p="";if(h=="text"){p="if (typeof value == 'string' || value instanceof kendo.spreadsheet.CalcError) { "}else if(h=="num"){p="if (typeof value == 'number') { "}else if(h){var v=h.op=="="?"==":h.op;p="if (typeof value == 'number' && value "+v+" "+h.value+") { ";if(!h.custom){l+="value = Math.abs(value); "}}if(e.color){l+="result.color = "+JSON.stringify(e.color)+"; "}function m(e,t){if(e.type=="digit"&&t.type=="comma"||e.type=="comma"&&e.hidden&&t.type=="comma"){t.hidden=true;s++}}while(!t.eof()){t.ahead(2,m);var g=t.next();if(g.type=="percent"){a++}else if(g.type=="digit"){if(g.decimal){u+=g.format.length;f.push(g.format)}else{c.push(g.format);if(g.sep){d=true}}}else if(g.type=="time"){n=true}else if(g.type=="date"){i=true}else if(g.type=="ampm"){r=n=true}}if(a>0){l+="value *= "+Math.pow(100,a)+"; "}if(s>0){l+="value /= "+Math.pow(1e3,s)+"; "}if(c.length){l+="intPart = runtime.formatInt(culture, value, "+JSON.stringify(c)+", "+u+", "+d+"); ";l+="isNegative = parseInt(intPart[0]) < 0;"}if(f.length){l+="decPart = runtime.formatDec(value, "+JSON.stringify(f)+", "+u+"); "}if(c.length||f.length){l+="type = 'number'; "}if(i){l+="date = runtime.unpackDate(value); "}if(n){l+="time = runtime.unpackTime(value); "}if(i||n){l+="type = 'date'; "}if(a>0||s>0||c.length||f.length||i||n){if(!p){p="if (typeof value == 'number') { "}}t.restart();l+="var matchedCurrency = false;";while(!t.eof()){var g=t.next();if(g.type=="dec"){l+="output += culture.numberFormat['.']; "}else if(g.type=="comma"&&!g.hidden){l+="output += ','; "}else if(g.type=="percent"){l+="type = 'percent'; ";l+="output += culture.numberFormat.percent.symbol; "}else if(g.type=="str"){if(o.test(g.value)){l+="type = 'currency'; ";l+="if (isNegative) { output += '-'; matchedCurrency = true; }"}l+="output += "+JSON.stringify(g.value)+"; "}else if(g.type=="text"){l+="type = 'text'; ";l+="output += value; "}else if(g.type=="space"){l+="if (output) result.body.push(output); ";l+="output = ''; ";l+="result.body.push({ type: 'space', value: "+JSON.stringify(g.value)+" }); "}else if(g.type=="fill"){l+="output += runtime.fill("+JSON.stringify(g.value)+"); "}else if(g.type=="digit"){l+="if (isNegative && intPart[0] && matchedCurrency) {intPart[0] = intPart[0].replace('-', '');}";l+="output += "+(g.decimal?"decPart":"intPart")+".shift(); "}else if(g.type=="date"){l+="output += runtime.date(culture, date, "+JSON.stringify(g.part)+", "+g.format+"); "}else if(g.type=="time"){l+="output += runtime.time(time, "+JSON.stringify(g.part)+", "+g.format+", "+r+", "+g.fraction+"); "}else if(g.type=="eltime"){l+="output += runtime.eltime(value, "+JSON.stringify(g.part)+", "+g.format+", "+g.fraction+"); "}else if(g.type=="ampm"){l+="output += time.hours < 12 ? "+JSON.stringify(g.am)+" : "+JSON.stringify(g.pm)+"; "}}l+="if (output) result.body.push(output); ";l+="result.type = type; ";l+="return result; ";if(p){l=p+l+"}"}return l}var o=a({cond:"text",body:[{type:"text"}]});var u=e.memoize(function(e){var t=d(e);var i=t.map(a);i.push(o);i=i.join("\n");i="'use strict'; return function(value, culture){ "+"if (!culture) culture = kendo.culture(); "+"var output = '', type = null, result = { body: [] }; "+i+"; return result; };";return new Function("runtime",i)(m)});var t=e.memoize(function(e){var t=d(e);var i,n=false,r=false;for(var a=0;a<t.length;++a){i=t[a];for(var o=0;o<i.body.length;++o){if(/^(?:date|time|ampm)$/.test(i.body[o].type)){n=true;if(i.body[o].type=="ampm"){r=true}}}if(n){break}}if(!n){return null}return i.body.map(l).join("");function s(e,t){if(t.fraction){e+=p("",Math.max(t.fraction,3),"f")}return e}function l(e){if(e.type=="digit"){if(e.sep){return e.format.charAt(0)+","+e.format.substr(1)}else{return e.format}}else if(e.type=="exp"){return e.ch+e.sign}else if(e.type=="date"||e.type=="time"){var t=e.part;if(e.type=="date"&&/^m/.test(t)){t="M"}else if(e.type=="time"&&/^h/.test(t)){if(!r){t=t.toUpperCase()}}return s(p("",e.format,t),e)}else if(e.type=="ampm"){return"tt"}else if(e.type=="str"){return e.value}else if(e.type=="space"){return" "}else if(e.type=="dec"){return"."}else if(e.type=="percent"){return"%"}else if(e.type=="comma"){return","}else{return""}}});var m={unpackDate:c.runtime.unpackDate,unpackTime:c.runtime.unpackTime,date:function(e,t,i,n){switch(i){case"d":switch(n){case 1:return t.date;case 2:return p(t.date,2,"0");case 3:return e.calendars.standard.days.namesAbbr[t.day];case 4:return e.calendars.standard.days.names[t.day]}break;case"m":switch(n){case 1:return t.month+1;case 2:return p(t.month+1,2,"0");case 3:return e.calendars.standard.months.namesAbbr[t.month];case 4:return e.calendars.standard.months.names[t.month];case 5:return e.calendars.standard.months.names[t.month].charAt(0)}break;case"y":switch(n){case 2:return t.year%100;case 4:return t.year}break}return"##"},time:function(e,t,i,n,r){var a,o;switch(t){case"h":a=p(n?e.hours%12||12:e.hours,i,"0");if(r){o=(e.minutes+(e.seconds+e.milliseconds/1e3)/60)/60}break;case"m":a=p(e.minutes,i,"0");if(r){o=(e.seconds+e.milliseconds/1e3)/60}break;case"s":a=p(e.seconds,i,"0");if(r){o=e.milliseconds/1e3}break}if(o){a+=m.toFixed(o,r).replace(/^0+/,"")}return a},eltime:function(e,t,i,n){var r,a;switch(t){case"h":r=e*24;break;case"m":r=e*24*60;break;case"s":r=e*24*60*60;break}if(n){a=r-(r|0)}r=p(r|0,i,"0");if(a){r+=m.toFixed(a,n).replace(/^0+/,"")}return r},fill:function(e){return e},formatInt:function(i,e,t,n,r){e=m.toFixed(e,n).replace(/\..*$/,"");var a=t[t.length-1];if(n>0&&a[t.length-1]!="0"){if(e==="0"){e=""}else if(e==="-0"){e="-"}}var o=false;var s=e.length-1;var l=[];var d=0,u;function c(e,t){if(r&&d&&d%3===0&&/^[0-9]$/.test(e)){u=i.numberFormat[","]+u}if(t&&e==="-"){o=true;e="0"}u=e+u;d++}for(var f=t.length;--f>=0;){var h=t[f];u="";for(var p=h.length;--p>=0;){var v=h.charAt(p);if(s<0){if(v=="0"){c("0")}else if(v=="?"){c(" ")}}else{if(e=="0"&&v=="?"){c(" ")}else if(v=="0"){c(e.charAt(s),true)}else{c(e.charAt(s))}s--}}if(f===0){while(s>=0){c(e.charAt(s--))}}l.unshift(u)}if(o){l[0]="-"+l[0]}return l},formatDec:function(e,t,i){e=m.toFixed(e,i);var n=e.indexOf(".");if(n>=0){e=e.substr(n+1).replace(/0+$/,"")}else{e=""}var r=0;var a=[];for(var o=0;o<t.length;++o){var s=t[o];var l="";for(var d=0;d<s.length;++d){var u=s.charAt(d);if(r<e.length){l+=e.charAt(r++)}else if(u=="0"){l+="0"}else if(u=="?"){l+=" "}}a.push(l)}return a},toFixed:function(e,s){return function e(t,i){if(!isFinite(t)){return"#NUM!"}if(t<0){return"-"+e(-t)}if(s===0){return String(Math.round(t))}if(t===Math.round(t)&&!/e/i.test(String(t))){return t.toFixed(s)}var n=v(t);var r=n.intpart;var a=n.decpart;if(a.length<=s){while(a.length<s){a+="0"}return r+"."+a}if(i){return r+"."+a.substr(0,s)}var o=Math.pow(10,s);return e(Math.round(t*o)/o,true)}(Number(e.toFixed(14)))}};function p(e,t,i){e+="";while(e.length<t){e=i+e}return e}function s(e,t,i){e+="";while(e.length<t){e+=i}return e}function v(e){var t=String(e).toLowerCase();var i,n,r;var a=t.indexOf(".");if(a<0){a=t.indexOf("e");if(a<0){i=t;n=""}else{i=t.substr(0,a);n=t.substr(a)}}else{i=t.substr(0,a);n=t.substr(a+1)}if(r=/(\d*)e([-+]?\d+)/.exec(n)){var o=parseInt(r[2],10);if(o>=0){n=s(r[1],o,"0");i+=n.substr(0,o);n=n.substr(o)}else{i=p(i,-o,"0");n=i.substr(o)+r[1];i=i.substr(0,i.length+o)}}return{intpart:i||"0",decpart:n}}function g(e){var t=e.body;var i="";for(var n=0;n<t.length;++n){var r=t[n];if(typeof r=="string"){i+=r}else if(r.type=="space"){i+=" "}}return i}kendo.spreadsheet.formatting={compile:u,parse:d,format:function(e,t,i){var n=u(t)(e,i);var r=l.element("span");r.__dataType=n.type;var a=n.body;if(n.color){r.attr.style={color:n.color}}for(var o=0;o<a.length;++o){var s=a[o];if(typeof s=="string"){r.children.push(l.text(s))}else if(s.type=="space"){r.children.push(l.element("span",{style:{visibility:"hidden"}},[l.text(s.value)]))}}return r},text:function(e,t,i){var n=u(t)(e,i);return g(n)},textAndColor:function(e,t,i){var n=u(t)(e,i);return{text:g(n),color:n.color,type:n.type}},type:function(e,t){return u(t)(e).type},adjustDecimals:function(e,t){var i=d(e);r(i,t);return n(i)},makeDateFormat:t}},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/runtime.functions",["spreadsheet/runtime","util/main"],e)})(function(){"use strict";var i=kendo.util;var a=kendo.spreadsheet;var r=a.calc;var o=r.runtime;var t=o.defineFunction;var e=o.defineAlias;var d=o.CalcError;var u=a.RangeRef;var c=a.CellRef;var f=a.UnionRef;var h=o.Matrix;var p=a.Ref;var B=a.NameRef;var s=o.daysInMonth;var l=o.packDate;var v=o.unpackDate;var L=o.daysInYear;["abs","cos","sin","acos","asin","tan","atan","exp","sqrt"].forEach(function(e){t(e,Math[e]).args([["*n","number"]])});t("ln",Math.log).args([["*n","number"]]);t("log",function(e,t){return Math.log(e)/Math.log(t)}).args([["*num","number++"],["*base",["or","number++",["null",10]]],["?",["assert","$base != 1","DIV/0"]]]);t("log10",function(e){return Math.log(e)/Math.log(10)}).args([["*num","number++"]]);t("pi",function(){return Math.PI}).args([]);t("sqrtpi",function(e){return Math.sqrt(e*Math.PI)}).args([["*num","number+"]]);t("degrees",function(e){return 180*e/Math.PI%360}).args([["*radians","number"]]);t("radians",function(e){return Math.PI*e/180}).args([["*degrees","number"]]);function n(e){return(Math.exp(e)+Math.exp(-e))/2}t("cosh",n).args([["*num","number"]]);t("acosh",function(e){return Math.log(e+Math.sqrt(e-1)*Math.sqrt(e+1))}).args([["*num","number"],["?",["assert","$num >= 1"]]]);function m(e){return(Math.exp(e)-Math.exp(-e))/2}t("sinh",m).args([["*num","number"]]);t("asinh",function(e){return Math.log(e+Math.sqrt(e*e+1))}).args([["*num","number"]]);t("sec",function(e){return 1/Math.cos(e)}).args([["*num","number"]]);t("sech",function(e){return 1/n(e)}).args([["*num","number"]]);t("csc",function(e){return 1/Math.sin(e)}).args([["*num","number"]]);t("csch",function(e){return 1/m(e)}).args([["*num","number"]]);t("atan2",function(e,t){return Math.atan(t/e)}).args([["*x","divisor"],["*y","number"]]);function g(e){return m(e)/n(e)}t("tanh",g).args([["*num","number"]]);t("atanh",function(e){return Math.log(Math.sqrt(1-e*e)/(1-e))}).args([["*num",["and","number",["(between)",-1,1]]]]);t("cot",function(e){return 1/Math.tan(e)}).args([["*num","divisor"]]);t("coth",function(e){return 1/g(e)}).args([["*num","divisor"]]);t("acot",function(e){return Math.PI/2-Math.atan(e)}).args([["*num","number"]]);t("acoth",function(e){return Math.log((e+1)/(e-1))/2}).args([["*num","number"],["?",["or",["assert","$num < -1"],["assert","$num > 1"]]]]);t("power",function(e,t){return Math.pow(e,t)}).args([["*a","number"],["*b","number"]]);t("mod",function(e,t){return e%t}).args([["*a","number"],["*b","divisor"]]);t("quotient",function(e,t){return Math.floor(e/t)}).args([["*a","number"],["*b","divisor"]]);t("ceiling",function(e,t){return t?t*Math.ceil(e/t):0}).args([["*number","number"],["*significance","number"],["?",["assert","$significance >= 0 || $number < 0"]]]);t("ceiling.precise",function(e,t){t=Math.abs(t);return t?t*Math.ceil(e/t):0}).args([["*number","number"],["*significance",["or","number",["null",1]]]]);e("iso.ceiling","ceiling.precise");t("ceiling.math",function(e,t,i){if(!t||!e){return 0}if(e<0&&(!i&&t<0||i&&t>0)){t=-t}return t?t*Math.ceil(e/t):0}).args([["*number","number"],["*significance",["or","number",["null","$number < 0 ? -1 : 1"]]],["*mode",["or","logical",["null",0]]]]);t("floor",function(e,t){return t?t*Math.floor(e/t):0}).args([["*number","number"],["*significance","number"],["?",["assert","$significance >= 0 || $number < 0"]]]);t("floor.precise",function(e,t){t=Math.abs(t);return t?t*Math.floor(e/t):0}).args([["*number","number"],["*significance",["or","number",["null",1]]]]);t("floor.math",function(e,t,i){if(!t||!e){return 0}if(e<0&&(!i&&t<0||i&&t>0)){t=-t}return t?t*Math.floor(e/t):0}).args([["*number","number"],["*significance",["or","number",["null","$number < 0 ? -1 : 1"]]],["*mode",["or","logical",["null",0]]]]);t("int",Math.floor).args([["*number","number"]]);t("mround",function(e,t){return t?t*Math.round(e/t):0}).args([["*number","number"],["*multiple","number"]]);t("round",function(e,t){var i=e<0?-1:1;if(i<0){e=-e}t=Math.pow(10,t);e*=t;e=Math.round(e);return i*e/t}).args([["*number","number"],["*digits","number"]]);t("roundup",function(e,t){t=Math.pow(10,t);e*=t;e=e<0?Math.floor(e):Math.ceil(e);return e/t}).args([["*number","number"],["*digits","number"]]);t("rounddown",function(e,t){t=Math.pow(10,t);e*=t;e=e<0?Math.ceil(e):Math.floor(e);return e/t}).args([["*number","number"],["*digits","number"]]);t("even",function(e){var t=e<0?Math.floor(e):Math.ceil(e);return t%2?t+(t<0?-1:1):t}).args([["*number","number"]]);t("odd",function(e){var t=e<0?Math.floor(e):Math.ceil(e);return t%2?t:t+(t<0?-1:1)}).args([["*number","number"]]);t("sign",function(e){return e<0?-1:e>0?1:0}).args([["*number","number"]]);function _(e,t){while(t){var i=e%t;e=t;t=i}return e}function H(e,t){return Math.abs(e*t)/_(e,t)}t("gcd",function(e){var t=e[0];for(var i=1;i<e.length;++i){t=_(t,e[i])}return t}).args([["numbers",["collect","number"]]]);t("lcm",function(e){var t=e[0];for(var i=1;i<e.length;++i){t=H(t,e[i])}return t}).args([["numbers",["collect","number"]]]);t("sum",function(e){return e.reduce(function(e,t){return e+t},0)}).args([["numbers",["collect","number"]]]);t("product",function(e){return e.reduce(function(e,t){return e*t},1)}).args([["numbers",["collect","number"]]]);t("sumproduct",function(e,a){var o=0;e.each(function(e,t,i){if(typeof e=="number"){for(var n=0;n<a.length;++n){var r=a[n].get(t,i);if(typeof r!="number"){return}e*=r}o+=e}});return o}).args([["a1","matrix"],["+",["a2",["and","matrix",["assert","$a2.width == $a1.width"],["assert","$a2.height == $a1.height"]]]]]);t("sumsq",function(e){return e.reduce(function(e,t){return e+t*t},0)}).args([["numbers",["collect","number"]]]);t("sumx2my2",function(e,r){var a=0;e.each(function(e,t,i){var n=r.get(t,i);if(typeof e=="number"&&typeof n=="number"){a+=e*e-n*n}});return a}).args([["a","matrix"],["b",["and","matrix",["assert","$b.width == $a.width"],["assert","$b.height == $a.height"]]]]);t("sumx2py2",function(e,r){var a=0;e.each(function(e,t,i){var n=r.get(t,i);if(typeof e=="number"&&typeof n=="number"){a+=e*e+n*n}});return a}).args([["a","matrix"],["b",["and","matrix",["assert","$b.width == $a.width"],["assert","$b.height == $a.height"]]]]);t("sumxmy2",function(e,r){var a=0;e.each(function(e,t,i){var n=r.get(t,i);if(typeof e=="number"&&typeof n=="number"){a+=(e-n)*(e-n)}});return a}).args([["a","matrix"],["b",["and","matrix",["assert","$b.width == $a.width"],["assert","$b.height == $a.height"]]]]);t("seriessum",function(t,i,n,e){var r=0;e.each(function(e){if(typeof e!="number"){throw new d("VALUE")}r+=e*Math.pow(t,i);i+=n});return r}).args([["x","number"],["y","number"],["m","number"],["a","matrix"]]);t("min",function(e){return e.length?Math.min.apply(Math,e):0}).args([["numbers",["collect","number"]]]);t("max",function(e){return e.length?Math.max.apply(Math,e):0}).args([["numbers",["collect","number"]]]);t("counta",function(e){return e.length}).args([["values",["#collect","anyvalue"]]]);t("count",function(e){return e.length}).args([["numbers",["#collect","number"]]]);t("countunique",function(e){var t=0,i=[];e.forEach(function(e){if(i.indexOf(e)<0){t++;i.push(e)}});return t}).args([["values",["#collect","anyvalue"]]]);t("countblank",function(e){var t=0;function n(e){if(e==null||e===""){t++}}function i(e){for(var t=0;t<e.length;++t){var i=e[t];if(i instanceof h){i.each(n,true)}else{n(i)}}}i(e);return t}).args([["+",["args",["or","matrix","anyvalue"]]]]);t("iseven",function(e){return e%2===0}).args([["*number","number"]]);t("isodd",function(e){return e%2!==0}).args([["*number","number"]]);t("n",function(e){if(typeof e=="boolean"){return e?1:0}if(typeof e=="number"){return e}return 0}).args([["*value","anyvalue"]]);t("na",function(){return new d("N/A")}).args([]);function b(e,t){var i=[],n=0,r=e[0];while(n<e.length){i.push({matrix:e[n++],pred:R(e[n++])})}e:for(var a=0;a<r.height;++a){t:for(var o=0;o<r.width;++o){for(n=0;n<i.length;++n){var s=i[n].matrix.get(a,o);if(!i[n].pred(s==null||s===""?0:s)){continue t}}t(a,o)}}}var w=[["m1","matrix"],["c1","anyvalue"],[["m2","matrix"],["c2","anyvalue"]]];t("countifs",function(e,t,i){var n=0;i.unshift(e,t);b(i,function(){n++});return n}).args(w);var k=[["range","matrix"]].concat(w);t("sumifs",function(n,e,t,i){i.unshift(n,F,e,t);var r=0;b(i,function(e,t){var i=n.get(e,t);if(i){r+=i}});return r}).args(k);t("averageifs",function(n,e,t,i){i.unshift(n,F,e,t);var r=0,a=0;b(i,function(e,t){var i=n.get(e,t);if(i==null||i===""){i=0}r+=i;a++});return a?r/a:new d("DIV/0")}).args(k);t("countif",function(e,t){t=R(t);var i=0;e.each(function(e){if(t(e)){i++}});return i}).args([["range","matrix"],["*criteria","anyvalue"]]);var y=[["range","matrix"],["*criteria","anyvalue"],["sumRange",["or","area","#matrix",["null","$range"]]]];function x(o){return function(e,t,i,n){var r=this;if(n instanceof p){var a=n.clone().toRangeRef();if(a.width()!=t.width||a.height()!=t.height){if(!isFinite(a.topLeft.row)){a.topLeft.row=0}if(!isFinite(a.topLeft.col)){a.topLeft.col=0}a.bottomRight.row=a.topLeft.row+t.height-1;a.bottomRight.col=a.topLeft.col+t.width-1;return r.resolveCells([a],function(){e(o(t,i,r.asMatrix(a)))})}}e(o(t,i,r.asMatrix(n)))}}t("sumif",x(function(e,r,a){var o=0;r=R(r);e.each(function(e,t,i){if(r(e)){var n=a.get(t,i);if(F(n)){o+=n||0}}});return o})).argsAsync(y);t("averageif",x(function(e,r,a){var o=0,s=0;r=R(r);e.each(function(e,t,i){if(r(e)){var n=a.get(t,i);if(F(n)){o+=n||0;s++}}});return s?o/s:new d("DIV/0")})).argsAsync(y);(function(e){e("large",function(e,t){return e.sort(z)[t]});e("small",function(e,t){return e.sort(P)[t]})})(function(e,r){t(e,function(e,t){var i=[];var n=e.each(function(e){if(e instanceof d){return e}if(typeof e=="number"){i.push(e)}});if(n){return n}if(t>i.length){return new d("NUM")}return r(i,t-1)}).args([["array","matrix"],["*nth","number++"]])});function C(e){return e.reduce(function(e,t){return e+t},0)/e.length}function S(e,t,i){if(i==null){i=C(e)}return e.reduce(function(e,t){return e+Math.pow(t-i,2)},0)/t}function T(e,t){return Math.sqrt(S(e,t))}t("stdev.s",function(e){return T(e,e.length-1)}).args([["numbers",["collect","number"]],["?",["assert","$numbers.length >= 2","NUM"]]]);t("stdev.p",function(e){return T(e,e.length)}).args([["numbers",["collect","number"]],["?",["assert","$numbers.length >= 2","NUM"]]]);t("var.s",function(e){return S(e,e.length-1)}).args([["numbers",["collect","number"]],["?",["assert","$numbers.length >= 2","NUM"]]]);t("var.p",function(e){return S(e,e.length)}).args([["numbers",["collect","number"]],["?",["assert","$numbers.length >= 2","NUM"]]]);t("median",function(e){var t=e.length;e.sort(P);if(t%2){return e[t>>1]}return(e[t>>=1]+e[t-1])/2}).args([["numbers",["collect","number"]],["?",["assert","$numbers.length > 0","N/A"]]]);t("mode.sngl",function(e){e.sort(P);var t=null,i=0,n=1,r=null;for(var a=0;a<e.length;++a){var o=e[a];if(o!=t){i=1;t=o}else{i++}if(i>n){n=i;r=o}}return r==null?new d("N/A"):r}).args([["numbers",["collect","number"]]]);t("mode.mult",function(e){var i=Object.create(null),n=2,r=[];e.forEach(function(e){var t=i[e]||0;i[e]=++t;if(t==n){r.push(e)}else if(t>n){n=t;r=[e]}});var a=new h(this);r.forEach(function(e,t){a.set(t,0,e)});return a}).args([["numbers",["collect","number"]]]);t("geomean",function(e){var t=e.length;var i=e.reduce(function(e,t){if(t<0){throw new d("NUM")}return e*t},1);return Math.pow(i,1/t)}).args([["numbers",["collect","number"]],["?",["assert","$numbers.length > 0","NUM"]]]);t("harmean",function(e){var t=e.length;var i=e.reduce(function(e,t){if(!t){throw new d("DIV/0")}return e+1/t},0);return t/i}).args([["numbers",["collect","number"]],["?",["assert","$numbers.length > 0","NUM"]]]);t("trimmean",function(e,t){var i=e.length;e.sort(P);var n=Math.floor(i*t);if(n%2){--n}n/=2;var r=0;for(var a=n;a<i-n;++a){r+=e[a]}return r/(i-n*2)}).args([["numbers",["collect","number",1]],["percent",["and","number",["[between)",0,1]]],["?",["assert","$numbers.length > 0","NUM"]]]);t("frequency",function(i,e){i.sort(P);e.sort(P);var n=-Infinity;var r=0;function a(e){var t=0;while(r<i.length&&i[r]>n&&i[r]<=e){++t;++r}return t}var o=new h(this);e.forEach(function(e,t){var i=a(e);n=e;o.set(t,0,i)});o.set(o.height,0,i.length-r);return o}).args([["data",["collect","number",1]],["bins",["collect","number",1]]]);t("rank.eq",function(e,t,i){t.sort(i?P:z);var n=t.indexOf(e);return n<0?new d("N/A"):n+1}).args([["value","number"],["numbers",["collect","number"]],["order",["or","logical",["null",false]]]]);e("rank","rank.eq");t("rank.avg",function(e,t,i){t.sort(i?P:z);var n=t.indexOf(e);if(n<0){return new d("N/A")}for(var r=n;t[r]==e;++r){}return(n+r+1)/2}).args([["value","number"],["numbers",["collect","number"]],["order",["or","logical",["null",false]]]]);t("kurt",function(e){var t=e.length;var i=C(e);var n=S(e,t-1,i);var r=Math.sqrt(n);var a=e.reduce(function(e,t){return e+Math.pow((t-i)/r,4)},0);return t*(t+1)/((t-1)*(t-2)*(t-3))*a-3*Math.pow(t-1,2)/((t-2)*(t-3))}).args([["numbers",["collect","number"]],["?",["assert","$numbers.length >= 4","NUM"]]]);function D(e,t,i){var n=0,r=0,a=null,o=null,s=false;e.forEach(function(e){if(e<t){n++;a=a==null?e:Math.max(a,e)}else if(e>t){r++;o=o==null?e:Math.min(o,e)}else{s=true}});if(!n&&!r){return new d("N/A")}if(s){if(i){return(n+1)/(e.length+1)}return n/(n+r)}return((o-t)*D(e,a,i)+(t-a)*D(e,o,i))/(o-a)}var N=[["array",["collect","number",1]],["x","number"],["significance",["or",["null",3],"integer++"]],["?",["assert","$array.length > 0","NUM"]]];t("percentrank.inc",function(e,t,i){var n=D(e,t,0);n=n.toFixed(i+1);return parseFloat(n.substr(0,n.length-1))}).args(N);t("percentrank.exc",function(e,t,i){var n=D(e,t,1);n=n.toFixed(i+1);return parseFloat(n.substr(0,n.length-1))}).args(N);e("percentrank","percentrank.inc");function O(e,t,i){var n=0;var r=C(e);var a=C(t);var o=e.length;for(var s=0;s<o;++s){n+=(e[s]-r)*(t[s]-a)}return n/i}t("covariance.p",function(e,t){return O(e,t,e.length)}).args([["array1",["collect","number",1]],["array2",["collect","number",1]],["?",["assert","$array1.length == $array2.length","N/A"]],["?",["assert","$array1.length > 0","DIV/0"]]]);t("covariance.s",function(e,t){return O(e,t,e.length-1)}).args([["array1",["collect","number",1]],["array2",["collect","number",1]],["?",["assert","$array1.length == $array2.length","N/A"]],["?",["assert","$array1.length > 1","DIV/0"]]]);e("covar","covariance.p");var A=i.memoize(function(e){for(var t=2,i=1;t<=e;++t){i*=t}return i});t("fact",A).args([["*n","integer+"]]);t("factdouble",function(e){for(var t=2+(e&1),i=1;t<=e;t+=2){i*=t}return i}).args([["*n","integer+"]]);t("multinomial",function(e){var t=1,i=0;e.forEach(function(e){if(e<0){throw new d("NUM")}i+=e;t*=A(e)});return A(i)/t}).args([["numbers",["collect","number"]]]);var E=i.memoize(function(e,t){for(var i=t+1,n=1,r=1,a=1;n<=e-t;++i,++n){r*=i;a*=n}return r/a});t("combin",E).args([["*n","integer++"],["*k",["and","integer",["[between]",0,"$n"]]]]);t("combina",function(e,t){return E(e+t-1,e-1)}).args([["*n","integer++"],["*k",["and","integer",["[between]",1,"$n"]]]]);t("average",function(e){var t=e.reduce(function(e,t){return e+t},0);return t/e.length}).args([["numbers",["collect","number!"]],["?",["assert","$numbers.length > 0","DIV/0"]]]);t("averagea",function(e){var t=0,i=0;e.forEach(function(e){if(typeof e!="string"){t+=e}++i});return i?t/i:new d("DIV/0")}).args([["values",["collect","anyvalue"]]]);function V(e,t){e.sort(P);var i=e.length;var n=t|0,r=t-n;if(n===0){return e[0]}if(n>=i){return e[i-1]}--n;return e[n]+r*(e[n+1]-e[n])}function W(e,t){var i=t*(e.length-1)+1;return V(e,i)}function U(e,t){var i=t*(e.length+1);return V(e,i)}t("percentile.inc",W).args([["numbers",["collect","number",1]],["p",["and","number",["[between]",0,1]]]]);t("percentile.exc",U).args([["numbers",["collect","number",1]],["p",["and","number",["(between)",0,1]]]]);t("quartile.inc",function(e,t){return W(e,t/4)}).args([["numbers",["collect","number",1]],["quarter",["values",0,1,2,3,4]]]);t("quartile.exc",function(e,t){return U(e,t/4)}).args([["numbers",["collect","number",1]],["quarter",["values",0,1,2,3,4]]]);e("quartile","quartile.inc");e("percentile","percentile.inc");var j=["AVERAGE","COUNT","COUNTA","MAX","MIN","PRODUCT","STDEV.S","STDEV.P","SUM","VAR.S","VAR.P","MEDIAN","MODE.SNGL","LARGE","SMALL","PERCENTILE.INC","QUARTILE.INC","PERCENTILE.EXC","QUARTILE.EXC"];function I(n,e,r){var a=[];var o=1;var s=2;var l=4;(function e(t){if(t instanceof p){n.getRefCells(t,true).forEach(function(e){var t=e.value;if(r&o&&e.hidden){return}if(e.formula){var i=e.formula.print(e.row,e.col);if(/^\s*(?:aggregate|subtotal)\s*\(/i.test(i)){if(!(r&l)){return}}}if(r&s&&t instanceof d){return}if(typeof t=="number"||t instanceof d){a.push(t)}})}else if(Array.isArray(t)){for(var i=0;i<t.length;++i){e(t[i])}}else if(t instanceof h){t.each(e)}else if(typeof t=="number"){a.push(t)}else if(t instanceof d&&!(r&s)){a.push(t)}})(e);return a}t("aggregate",function(i,n,r,a){var o=this;o.resolveCells(a,function(){var e;if(n>12){e=I(o,a[0],r);var t=a[1];if(t instanceof c){t=o.getRefData(t)}if(typeof t!="number"){return i(new d("VALUE"))}}else{e=I(o,a,r)}o.func(j[n-1],i,e)})}).argsAsync([["funcId",["values",1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]],["options",["or",["null",0],["values",0,1,2,3,4,5,6,7]]],["args","rest"]]);t("subtotal",function(t,i){var n=this;var r=i>100;if(r){i-=100}var a=[];for(var e=2;e<arguments.length;++e){a.push(arguments[e])}n.resolveCells(a,function(){var e=I(n,a,r?1:0);n.func(j[i-1],t,e)})}).argsAsync([["funcId",["values",1,2,3,4,5,6,7,8,9,10,11,101,102,103,104,105,106,107,108,109,110,111]],["+",["ref",["or","ref","#matrix"]]]]);t("avedev",function(e){var i=e.reduce(function(e,t){return e+t},0)/e.length;return e.reduce(function(e,t){return e+Math.abs(t-i)},0)/e.length}).args([["numbers",["collect","number"]],["?",["assert","$numbers.length >= 2","NUM"]]]);function G(e,t,i,n){if(!n){return E(t,e)*Math.pow(i,e)*Math.pow(1-i,t-e)}else{var r=0;for(var a=0;a<=e;++a){r+=E(t,a)*Math.pow(i,a)*Math.pow(1-i,t-a)}return r}}t("binom.dist",G).args([["successes","integer+"],["trials",["and","integer",["assert","$trials >= $successes"]]],["probability",["and","number",["[between]",0,1]]],["cumulative","logical"]]);e("binomdist","binom.dist");t("binom.inv",function(e,t,i){for(var n=0;n<=e;++n){if(G(n,e,t,true)>=i){return n}}return new d("N/A")}).args([["trials","integer+"],["probability",["and","number",["[between]",0,1]]],["alpha",["and","number",["[between]",0,1]]]]);e("critbinom","binom.inv");t("binom.dist.range",function(e,t,i,n){var r=0;for(var a=i;a<=n;++a){r+=E(e,a)*Math.pow(t,a)*Math.pow(1-t,e-a)}return r}).args([["trials","integer+"],["probability",["and","number",["[between]",0,1]]],["successes_min",["and","integer",["[between]",0,"$trials"]]],["successes_max",["or",["and","integer",["[between]","$successes_min","$trials"]],["null","$successes_min"]]]]);t("negbinom.dist",function(e,t,i,n){if(n){var r=0;while(e>=0){r+=E(e+t-1,e)*Math.pow(i,t)*Math.pow(1-i,e);e--}return r}return E(e+t-1,e)*Math.pow(i,t)*Math.pow(1-i,e)}).args([["number_f","integer+"],["number_s","integer+"],["probability_s",["and","number",["[between]",0,1]]],["cumulative","logical"]]);e("negbinomdist","negbinom.dist");t("address",function(e,t,i,n,r){var a=new c(e-1,t-1,i-1);if(r){a.setSheet(r,true)}return n?a.print(0,0):a.print()}).args([["row","integer++"],["col","integer++"],["abs",["or",["null",1],["values",1,2,3,4]]],["a1",["or",["null",true],"logical"]],["sheet",["or","null","string"]]]);t("areas",function(e){var i=0;(function e(t){if(t instanceof c||t instanceof u){i++}else if(t instanceof f){t.refs.forEach(e)}})(e);return i}).args([["ref","ref"]]);t("choose",function(e,t){if(e>t.length){return new d("N/A")}else{return t[e-1]}}).args([["*index","integer"],["+",["value","anything"]]]);t("column",function(t){if(!t){return this.formula.col+1}if(t instanceof c){return t.col+1}return this.asMatrix(t).mapCol(function(e){return e+t.topLeft.col+1})}).args([["ref",["or","area","null"]]]);t("columns",function(e){return e instanceof p?e.width():e.width}).args([["ref",["or","area","#matrix"]]]);t("formulatext",function(e){var t=this.getRefCells(e)[0];if(!t.formula){return new d("N/A")}return t.formula.print(t.row,t.col)}).args([["ref","ref"]]);t("hlookup",function(i,n,e,r){var a=null;n.eachCol(function(e){var t=n.get(0,e);if(r){if(t>i){return true}a=e}else if(t===i){a=e;return true}});if(a==null){return new d("N/A")}return n.get(e-1,a)}).args([["value","anyvalue"],["range","matrix"],["row","integer++"],["approx",["or","logical",["null",true]]]]);t("index",function(e,t,i,n,r){var a=this;if(t instanceof f){t=t.refs[r-1]}if(!i&&!n||!t){return e(new d("N/A"))}if(t instanceof c){t=t.toRangeRef()}if(t instanceof u){if(i&&n){if(n>t.width()||i>t.height()){return e(new d("REF"))}var o=t.toCell(i-1,n-1);a.resolveCells([o],function(){e(a.getRefData(o))});return}if(!i){var s=t.toColumn(n-1);a.resolveCells([s],function(){e(a.asMatrix(s))});return}if(!n){var l=t.toRow(i-1);a.resolveCells([l],function(){e(a.asMatrix(l))});return}}else if(t instanceof h){if(t.width>1&&t.height>1){if(i&&n){return e(t.get(i-1,n-1))}if(!i){return e(t.mapRow(function(e){return t.get(e,n-1)}))}if(!n){return e(t.mapCol(function(e){return t.get(i-1,e)}))}}if(t.width==1){return e(t.get(i-1,0))}if(t.height==1){return e(t.get(0,n-1))}}else{e(new d("REF"))}}).argsAsync([["range",["or","ref","matrix"]],["row",["or","integer+","null"]],["col",["or","integer+","null"]],["areanum",["or","integer++",["null",1]]]]);t("indirect",function(e){try{var t=this.formula;var i=r.parseFormula(t.sheet,t.row,t.col,e);var n=i.ast;if(n instanceof B){n=this.ss.nameValue(n,t.sheet,t.row,t.col)}if(!(n instanceof p)){throw 1}return n.absolute(t.row,t.col)}catch(e){return new d("REF")}}).args([["thing","string"]]);t("match",function(t,e,i){var n=1,r;if(i===0){r=R(t)}else if(i===-1){r=R("<="+t)}else if(i===1){r=R(">="+t)}if(e.each(function(e){if(e!=null&&r(e)){if(i!==0&&t!=e){--n}return true}n++},true)&&n>0){return n}else{return new d("N/A")}}).args([["value","anyvalue"],["range","matrix"],["type",["or",["values",-1,0,1],["null",1]]]]);t("offset",function(e,t,i,n,r){var a=(e instanceof c?e:e.topLeft).clone();a.row+=t;a.col+=i;if(a.row<0||a.col<0){return new d("VALUE")}if(n>1||r>1){return new u(a,new c(a.row+n-1,a.col+r-1)).setSheet(e.sheet,e.hasSheet())}return a}).args([["ref","area"],["*rows","integer"],["*cols","integer"],["*height",["or","integer++",["null","$ref.height()"]]],["*width",["or","integer++",["null","$ref.width()"]]]]);t("row",function(t){if(!t){return this.formula.row+1}if(t instanceof c){return t.row+1}return this.asMatrix(t).mapRow(function(e){return e+t.topLeft.row+1})}).args([["ref",["or","area","null"]]]);t("rows",function(e){return e instanceof p?e.height():e.height}).args([["ref",["or","area","#matrix"]]]);t("vlookup",function(i,n,e,r){var a=null;if(typeof i!="number"){r=false}if(typeof i=="string"){i=i.toLowerCase()}n.eachRow(function(e){var t=n.get(e,0);if(r){if(t>i){return true}a=e}else{if(typeof t=="string"){t=t.toLowerCase()}if(t===i){a=e;return true}}});if(a==null){return new d("N/A")}return n.get(a,e-1)}).args([["value","anyvalue"],["range","matrix"],["col","integer++"],["approx",["or","logical",["null",true]]]]);t("date",function(e,t,i){return l(e,t-1,i)}).args([["*year","integer"],["*month","integer"],["*date","integer"]]);t("day",function(e){return v(e).date}).args([["*date","date"]]);t("month",function(e){return v(e).month+1}).args([["*date","date"]]);t("year",function(e){return v(e).year}).args([["*date","date"]]);t("weekday",function(e){return v(e).day+1}).args([["*date","date"]]);t("weeknum",function(e,t){var i=l(v(e).year,0,1);var n=v(i);var r;if(t==21){r=3-(n.day+6)%7;if(r<0){r+=7}i+=r;n.date+=r;n.day=4;t=1}else{if(t==1){t=0}else if(t==2){t=1}else{t=(t-10)%7}}r=n.day-t;if(r<0){r+=7}i-=r;return Math.ceil((e+1-i)/7)}).args([["*date","date"],["*type",["or",["null",1],["values",1,2,11,12,13,14,15,16,17,21]]]]);function q(e){var t=v(l(e,0,1));if(t.day==4||t.day==3&&o.isLeapYear(e)){return 53}return 52}t("isoweeknum",function e(t){var i=v(t);var n=i.day||7;var r=Math.floor((i.ord-n+10)/7);if(r<1){return q(i.year-1)}else if(r==53&&r>q(i.year)){return 1}return r}).args([["*date","date"]]);t("now",function(){return o.dateToSerial(new Date)}).args([]);t("today",function(){return o.dateToSerial(new Date)|0}).args([]);t("time",function(e,t,i){return o.packTime(e,t,i,0)}).args([["*hours","integer"],["*minutes","integer"],["*seconds","integer"]]);t("hour",function(e){return o.unpackTime(e).hours}).args([["*time","datetime"]]);t("minute",function(e){return o.unpackTime(e).minutes}).args([["*time","datetime"]]);t("second",function(e){return o.unpackTime(e).seconds}).args([["*time","datetime"]]);t("edate",function(e,t){var i=v(e);var n=i.month+t;var r=i.year+Math.floor(n/12);n%=12;if(n<0){n+=12}i=Math.min(i.date,s(r,n));return l(r,n,i)}).args([["*start_date","date"],["*months","integer"]]);t("eomonth",function(e,t){var i=v(e);var n=i.month+t;var r=i.year+Math.floor(n/12);n%=12;if(n<0){n+=12}i=s(r,n);return l(r,n,i)}).args([["*start_date","date"],["*months","integer"]]);t("workday",function(e,t,i){var n=t>0?1:-1;t=Math.abs(t);var r=v(e).day;while(t>0){e+=n;r=(r+n)%7;if(r>0&&r<6&&i.indexOf(e)<0){--t}}return e}).args([["start_date","date"],["days","integer"],["holidays",["collect","date"]]]);t("networkdays",function(e,t,i){if(e>t){var n=e;e=t;t=n}var r=0;var a=v(e).day;while(e<=t){if(a>0&&a<6&&i.indexOf(e)<0){r++}e++;a=(a+1)%7}return r}).args([["start_date","date"],["end_date","date"],["holidays",["collect","date"]]]);t("days",function(e,t){return t-e}).args([["*start_date","date"],["*end_date","date"]]);function M(e,t,i){var n=v(e);var r=v(t);if(i){if(n.date==31){n.date=30}if(r.date==31){r.date=30}}else{if(n.month==1&&r.month==1&&n.date==s(n.year,1)&&r.date==s(r.year,1)){r.date=30}if(n.date==s(n.year,n.month)){n.date=30;if(r.date==31){r.date=30}}else{if(n.date==30&&r.date==31){r.date=30}}}return 360*(r.year-n.year)+30*(r.month-n.month)+(r.date-n.date)}o._days_360=M;t("days360",M).args([["*start_date","date"],["*end_date","date"],["*method",["or","logical",["null",false]]]]);t("yearfrac",function(e,t,i){switch(i){case 0:return M(e,t,false)/360;case 1:return(t-e)/L(v(e).year);case 2:return(t-e)/360;case 3:return(t-e)/365;case 4:return M(e,t,true)/360}}).args([["*start_date","date"],["*end_date","date"],["*method",["or",["null",0],["values",0,1,2,3,4]]]]);t("datevalue",function(e){var t=o.parseDate(e);if(t){return o.dateToSerial(t)}return new d("VALUE")}).args([["*text","string"]]);t("timevalue",function(e){var t=e.toLowerCase().match(/(\d+):(\d+)(:(\d+)(\.(\d+))?)?\s*(am?|pm?)?/);if(t){var i=parseFloat(t[1]);var n=parseFloat(t[2]);var r=t[3]?parseFloat(t[4]):0;var a=t[7];if(a&&(i>12||i<1)){return new d("VALUE")}if(/^p/.test(a)){i+=12}return o.packTime(i,n,r,0)}return new d("VALUE")}).args([["*text","string"]]);t("mdeterm",function(e){var t=e.each(function(e){if(typeof e!="number"){return new d("VALUE")}},true);return t||e.determinant()}).args([["m",["and","matrix",["assert","$m.width == $m.height"]]]]);t("transpose",function(e){return e.transpose()}).args([["range","matrix"]]);t("mmult",function(e,t){return e.multiply(t)}).args([["a","matrix"],["b",["and","matrix",["assert","$b.height == $a.width"]]]]);t("munit",function(e){return new h(this).unit(e)}).args([["n","integer+"]]);t("minverse",function(e){var t=e.each(function(e){if(typeof e!="number"){return new d("VALUE")}},true);return t||e.inverse()||new d("VALUE")}).args([["m",["and","matrix",["assert","$m.width == $m.height"]]]]);t("rand",function(){return Math.random()}).args([]);t("randbetween",function(e,t){return e+Math.floor((t-e+1)*Math.random())}).args([["min","integer"],["max",["and","integer",["assert","$max >= $min"]]]]);t("true",function(){return true}).args([]);t("false",function(){return true}).args([]);t("roman",function(e){return i.arabicToRoman(e).toUpperCase()}).args([["*number","integer"]]);t("arabic",function(e){var t=i.romanToArabic(e);return t==null?new d("VALUE"):t}).args([["*roman","string"]]);t("base",function(e,t,i){var n=e.toString(t).toUpperCase();while(n.length<i){n="0"+n}return n}).args([["*number","integer"],["*radix",["and","integer",["[between]",2,36]]],["*minLen",["or","integer+",["null",0]]]]);t("decimal",function(e,t){e=e.toUpperCase();var i=0;for(var n=0;n<e.length;++n){var r=e.charCodeAt(n);if(r>=48&&r<=57){r-=48}else if(r>=65&&r<55+t){r-=55}else{return new d("VALUE")}i=i*t+r}return i}).args([["*text","string"],["*radix",["and","integer",["[between]",2,36]]]]);t("char",function(e){return String.fromCharCode(e)}).args([["*code","integer+"]]);var $=/[\0-\x1F\x7F-\x9F\xAD\u0378\u0379\u037F-\u0383\u038B\u038D\u03A2\u0528-\u0530\u0557\u0558\u0560\u0588\u058B-\u058E\u0590\u05C8-\u05CF\u05EB-\u05EF\u05F5-\u0605\u061C\u061D\u06DD\u070E\u070F\u074B\u074C\u07B2-\u07BF\u07FB-\u07FF\u082E\u082F\u083F\u085C\u085D\u085F-\u089F\u08A1\u08AD-\u08E3\u08FF\u0978\u0980\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA\u09BB\u09C5\u09C6\u09C9\u09CA\u09CF-\u09D6\u09D8-\u09DB\u09DE\u09E4\u09E5\u09FC-\u0A00\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A58\u0A5D\u0A5F-\u0A65\u0A76-\u0A80\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA\u0ABB\u0AC6\u0ACA\u0ACE\u0ACF\u0AD1-\u0ADF\u0AE4\u0AE5\u0AF2-\u0B00\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A\u0B3B\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B55\u0B58-\u0B5B\u0B5E\u0B64\u0B65\u0B78-\u0B81\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE\u0BCF\u0BD1-\u0BD6\u0BD8-\u0BE5\u0BFB-\u0C00\u0C04\u0C0D\u0C11\u0C29\u0C34\u0C3A-\u0C3C\u0C45\u0C49\u0C4E-\u0C54\u0C57\u0C5A-\u0C5F\u0C64\u0C65\u0C70-\u0C77\u0C80\u0C81\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA\u0CBB\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CDD\u0CDF\u0CE4\u0CE5\u0CF0\u0CF3-\u0D01\u0D04\u0D0D\u0D11\u0D3B\u0D3C\u0D45\u0D49\u0D4F-\u0D56\u0D58-\u0D5F\u0D64\u0D65\u0D76-\u0D78\u0D80\u0D81\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DF1\u0DF5-\u0E00\u0E3B-\u0E3E\u0E5C-\u0E80\u0E83\u0E85\u0E86\u0E89\u0E8B\u0E8C\u0E8E-\u0E93\u0E98\u0EA0\u0EA4\u0EA6\u0EA8\u0EA9\u0EAC\u0EBA\u0EBE\u0EBF\u0EC5\u0EC7\u0ECE\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F48\u0F6D-\u0F70\u0F98\u0FBD\u0FCD\u0FDB-\u0FFF\u10C6\u10C8-\u10CC\u10CE\u10CF\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B\u135C\u137D-\u137F\u139A-\u139F\u13F5-\u13FF\u169D-\u169F\u16F1-\u16FF\u170D\u1715-\u171F\u1737-\u173F\u1754-\u175F\u176D\u1771\u1774-\u177F\u17DE\u17DF\u17EA-\u17EF\u17FA-\u17FF\u180F\u181A-\u181F\u1878-\u187F\u18AB-\u18AF\u18F6-\u18FF\u191D-\u191F\u192C-\u192F\u193C-\u193F\u1941-\u1943\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DB-\u19DD\u1A1C\u1A1D\u1A5F\u1A7D\u1A7E\u1A8A-\u1A8F\u1A9A-\u1A9F\u1AAE-\u1AFF\u1B4C-\u1B4F\u1B7D-\u1B7F\u1BF4-\u1BFB\u1C38-\u1C3A\u1C4A-\u1C4C\u1C80-\u1CBF\u1CC8-\u1CCF\u1CF7-\u1CFF\u1DE7-\u1DFB\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FC5\u1FD4\u1FD5\u1FDC\u1FF0\u1FF1\u1FF5\u1FFF\u200B-\u200F\u202A-\u202E\u2060-\u206F\u2072\u2073\u208F\u209D-\u209F\u20BB-\u20CF\u20F1-\u20FF\u218A-\u218F\u23F4-\u23FF\u2427-\u243F\u244B-\u245F\u2700\u2B4D-\u2B4F\u2B5A-\u2BFF\u2C2F\u2C5F\u2CF4-\u2CF8\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D71-\u2D7E\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF\u2E3C-\u2E7F\u2E9A\u2EF4-\u2EFF\u2FD6-\u2FEF\u2FFC-\u2FFF\u3040\u3097\u3098\u3100-\u3104\u312E-\u3130\u318F\u31BB-\u31BF\u31E4-\u31EF\u321F\u32FF\u4DB6-\u4DBF\u9FCD-\u9FFF\uA48D-\uA48F\uA4C7-\uA4CF\uA62C-\uA63F\uA698-\uA69E\uA6F8-\uA6FF\uA78F\uA794-\uA79F\uA7AB-\uA7F7\uA82C-\uA82F\uA83A-\uA83F\uA878-\uA87F\uA8C5-\uA8CD\uA8DA-\uA8DF\uA8FC-\uA8FF\uA954-\uA95E\uA97D-\uA97F\uA9CE\uA9DA-\uA9DD\uA9E0-\uA9FF\uAA37-\uAA3F\uAA4E\uAA4F\uAA5A\uAA5B\uAA7C-\uAA7F\uAAC3-\uAADA\uAAF7-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F-\uABBF\uABEE\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBC2-\uFBD2\uFD40-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFE\uFDFF\uFE1A-\uFE1F\uFE27-\uFE2F\uFE53\uFE67\uFE6C-\uFE6F\uFE75\uFEFD-\uFF00\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFDF\uFFE7\uFFEF-\uFFFB\uFFFE\uFFFF]/g;t("clean",function(e){return e.replace($,"")}).args([["*text","string"]]);t("code",function(e){return e.charAt(0)}).args([["*text","string"]]);e("unichar","char");e("unicode","code");t("concatenate",function(e){var t="";for(var i=0;i<e.length;++i){t+=e[i]}return t}).args([["+",["*text","string"]]]);t("dollar",function(e,t){var i="$#,##0DECIMALS;($#,##0DECIMALS)";var n="";var r=1;while(t-- >0){n+="0"}while(++t<0){r*=10}if(n!==""){n="."+n}else if(r!==1){e=Math.round(e/r)*r}i=i.replace(/DECIMALS/g,n);return a.formatting.text(e,i)}).args([["*number","number"],["*decimals",["or","integer",["null",2]]]]);t("exact",function(e,t){return e===t}).args([["*text1","string"],["*text2","string"]]);t("find",function(e,t,i){var n=t.indexOf(e,i-1);return n<0?new d("VALUE"):n+1}).args([["*substring","string"],["*string","string"],["*start",["or","integer++",["null",1]]]]);t("fixed",function(e,t,i){var n=Math.pow(10,t);e=Math.round(e*n)/n;var r=i?"0":"#,##0";if(t>0){r+=".";while(t-- >0){r+="0"}}return a.formatting.text(e,r)}).args([["*number","number"],["*decimals",["or","integer",["null",2]]],["*noCommas",["or","boolean",["null",false]]]]);t("left",function(e,t){return e.substr(0,t)}).args([["*text","string"],["*length",["or","integer+",["null",1]]]]);t("right",function(e,t){return e.substr(-t)}).args([["*text","string"],["*length",["or","integer+",["null",1]]]]);t("len",function(e){return e.length}).args([["*text","string"]]);t("lower",function(e){return e.toLowerCase()}).args([["*text","string"]]);t("upper",function(e){return e.toUpperCase()}).args([["*text","string"]]);t("ltrim",function(e){return e.replace(/^\s+/,"")}).args([["*text","string"]]);t("rtrim",function(e){return e.replace(/\s+$/,"")}).args([["*text","string"]]);t("trim",function(e){return e.replace(/^\s+|\s+$/,"")}).args([["*text","string"]]);t("mid",function(e,t,i){return e.substr(t-1,i)}).args([["*text","string"],["*start","integer++"],["*length","integer+"]]);t("proper",function(e){return e.toLowerCase().replace(/\b./g,function(e){return e.toUpperCase()})}).args([["*text","string"]]);t("replace",function(e,t,i,n){return e.substr(0,--t)+n+e.substr(t+i)}).args([["*text","string"],["*start","integer++"],["*length","integer+"],["*newText","string"]]);t("rept",function(e,t){var i="";while(t-- >0){i+=e}return i}).args([["*text","string"],["*number","integer+"]]);t("search",function(e,t,i){var n=t.toLowerCase().indexOf(e.toLowerCase(),i-1);return n<0?new d("VALUE"):n+1}).args([["*substring","string"],["*string","string"],["*start",["or","integer++",["null",1]]]]);t("substitute",function(e,t,i,n){if(t===i){return e}var r=e.split(t);if(n==null){return r.join(i)}e="";n--;for(var a=0;a<r.length;++a){e+=r[a];if(a<r.length-1){if(a===n){e+=i}else{e+=t}}}return e}).args([["*text","string"],["*oldText","string"],["*newText","string"],["*nth",["or","integer++","null"]]]);t("t",function(e){return typeof e=="string"?e:""}).args([["*value","anyvalue"]]);t("text",function(e,t){return a.formatting.text(e,t)}).args([["*value","anyvalue"],["*format","string"]]);t("value",function(e){if(typeof e=="number"){return e}if(typeof e=="boolean"){return+e}e=(e+"").replace(/[$,]/g,"");e=parseFloat(e);return isNaN(e)?new d("VALUE"):e}).args([["*value","anyvalue"]]);function K(e,t){this.link=e;this.text=t}K.prototype.toString=function(){return this.text};t("hyperlink",function(e,t){return new K(e,t)}).args([["*link","string"],["*text",["or","string",["null","$link"]]]]);t("iferror",function(e,t){return e instanceof d?t:e}).args([["*value","forced!"],["*value_if_error","anyvalue!"]]);var R=function(){var n=Object.create(null);function r(i,n){if(typeof n=="string"){var e=parseFloat(n);if(!isNaN(e)&&e==n){n=e}}return function(e){var t=n;if(typeof e=="string"&&typeof t=="string"){e=e.toLowerCase();t=t.toLowerCase()}return i(e,t)}}function i(e){var t,i;if(typeof e=="string"){e=e.toLowerCase()}if(/^[0-9.]+%$/.test(e)){i=e.substr(0,e.length-1);t=parseFloat(i);if(!isNaN(t)&&t==i){e=t/100}}else if(/^[0-9.]+$/.test(e)){t=parseFloat(e);if(!isNaN(t)&&t==e){e=t}}return e}function a(e,t){return i(e)<i(t)}function o(e,t){return i(e)<=i(t)}function s(e,t){return i(e)>i(t)}function l(e,t){return i(e)>=i(t)}function d(e,t){return!u(e,t)}function u(e,t){if(t instanceof RegExp){return t.test(e)}if(typeof e=="string"||typeof t=="string"){e=String(e);t=String(t)}return i(e)==i(t)}return function(e){if(typeof e=="function"){return e}var t;if(t=/^=(.*)$/.exec(e)){return r(u,t[1])}if(t=/^<>(.*)$/.exec(e)){return r(d,t[1])}if(t=/^<=(.*)$/.exec(e)){return r(o,t[1])}if(t=/^<(.*)$/.exec(e)){return r(a,t[1])}if(t=/^>=(.*)$/.exec(e)){return r(l,t[1])}if(t=/^>(.*)$/.exec(e)){return r(s,t[1])}if(/[?*]/.exec(e)){var i=n[e];if(!i){i=e.replace(/(~\?|~\*|[\]({\+\.\|\^\$\\})\[]|[?*])/g,function(e){switch(e){case"~?":return"\\?";case"~*":return"\\*";case"?":return".";case"*":return".*";default:return"\\"+e}});i=n[e]=new RegExp("^"+i+"$","i")}return r(u,i)}return r(u,e)}}();function F(e){return typeof e=="number"||typeof e=="boolean"||e==null||e===""}function P(e,t){return e===t?0:e<t?-1:1}function z(e,t){return e===t?0:e<t?1:-1}},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/runtime.functions.2",["spreadsheet/runtime"],e)})(function(){"use strict";var B=kendo.spreadsheet;var L=B.calc;var e=L.runtime;var t=e.defineFunction;var h=e.CalcError;var H=e.packDate;var d=e.unpackDate;var o=e.isLeapYear;var N=e.daysInMonth;var O=e._days_360;t("ERF",function(e,t){if(t==null){return a(e)}return a(t)-a(e)}).args([["lower_limit","number"],["upper_limit",["or","number","null"]]]);t("ERFC",s).args([["x","number"]]);t("GAMMALN",u).args([["x","number++"]]);t("GAMMA",r).args([["x","number"]]);t("GAMMA.DIST",f).args([["x","number+"],["alpha","number++"],["beta","number++"],["cumulative","logical"]]);t("GAMMA.INV",n).args([["p",["and","number",["[between]",0,1]]],["alpha","number++"],["beta","number++"]]);t("NORM.S.DIST",g).args([["z","number"],["cumulative","logical"]]);t("NORM.S.INV",_).args([["p",["and","number",["[between]",0,1]]]]);t("NORM.DIST",j).args([["x","number"],["mean","number"],["stddev","number++"],["cumulative","logical"]]);t("NORM.INV",b).args([["p",["and","number",["[between]",0,1]]],["mean","number"],["stddev","number++"]]);t("BETADIST",K).args([["x","number"],["alpha","number++"],["beta","number++"],["A",["or","number",["null",0]]],["B",["or","number",["null",1]]],["?",["assert","$x >= $A","NUM"]],["?",["assert","$x <= $B","NUM"]],["?",["assert","$A < $B","NUM"]]]);t("BETA.DIST",Y).args([["x","number"],["alpha","number++"],["beta","number++"],["cumulative","logical"],["A",["or","number",["null",0]]],["B",["or","number",["null",1]]],["?",["assert","$x >= $A","NUM"]],["?",["assert","$x <= $B","NUM"]],["?",["assert","$A < $B","NUM"]]]);t("BETA.INV",k).args([["p",["and","number",["[between]",0,1]]],["alpha","number++"],["beta","number++"],["A",["or","number",["null",0]]],["B",["or","number",["null",1]]]]);t("CHISQ.DIST",x).args([["x","number+"],["deg_freedom","integer++"],["cumulative","logical"]]);t("CHISQ.DIST.RT",Q).args([["x","number+"],["deg_freedom","integer++"]]);t("CHISQ.INV",X).args([["p",["and","number",["[between]",0,1]]],["deg_freedom","integer++"]]);t("CHISQ.INV.RT",Z).args([["p",["and","number",["[between]",0,1]]],["deg_freedom","integer++"]]);t("CHISQ.TEST",function(e,t){return J(e.data,t.data)}).args([["actual_range","matrix"],["expected_range","matrix"],["?",["assert","$actual_range.width == $expected_range.width"]],["?",["assert","$actual_range.height == $expected_range.height"]]]);t("EXPON.DIST",ee).args([["x","number+"],["lambda","number++"],["cumulative","logical"]]);t("POISSON.DIST",te).args([["x","integer+"],["mean","number+"],["cumulative","logical"]]);t("F.DIST",C).args([["x","number+"],["deg_freedom1","integer++"],["deg_freedom2","integer++"],["cumulative","logical"]]);t("F.DIST.RT",ie).args([["x","number+"],["deg_freedom1","integer++"],["deg_freedom2","integer++"]]);t("F.INV",re).args([["p",["and","number",["[between]",0,1]]],["deg_freedom1","integer++"],["deg_freedom2","integer++"]]);t("F.INV.RT",ne).args([["p",["and","number",["[between]",0,1]]],["deg_freedom1","integer++"],["deg_freedom2","integer++"]]);t("F.TEST",ae).args([["array1",["collect","number",1]],["array2",["collect","number",1]],["?",["assert","$array1.length >= 2","DIV/0"]],["?",["assert","$array2.length >= 2","DIV/0"]]]);t("FISHER",oe).args([["x",["and","number",["(between)",-1,1]]]]);t("FISHERINV",se).args([["y","number"]]);t("T.DIST",le).args([["x","number"],["deg_freedom","integer++"],["cumulative","logical"]]);t("T.DIST.RT",D).args([["x","number"],["deg_freedom","integer++"]]);t("T.DIST.2T",A).args([["x","number+"],["deg_freedom","integer++"]]);t("T.INV",E).args([["p",["and","number",["(between]",0,1]]],["deg_freedom","integer++"]]);t("T.INV.2T",de).args([["p",["and","number",["(between]",0,1]]],["deg_freedom","integer++"]]);t("T.TEST",ue).args([["array1",["collect","number",1]],["array2",["collect","number",1]],["tails",["and","integer",["values",1,2]]],["type",["and","integer",["values",1,2,3]]],["?",["assert","$type != 1 || $array1.length == $array2.length","N/A"]],["?",["assert","$array1.length >= 2","DIV/0"]],["?",["assert","$array2.length >= 2","DIV/0"]]]);t("CONFIDENCE.T",ce).args([["alpha",["and","number",["(between)",0,1]]],["standard_dev","number++"],["size",["and","integer++",["assert","$size != 1","DIV/0"]]]]);t("CONFIDENCE.NORM",fe).args([["alpha",["and","number",["(between)",0,1]]],["standard_dev","number++"],["size",["and","integer++"]]]);t("GAUSS",he).args([["z","number"]]);t("PHI",pe).args([["x","number"]]);t("LOGNORM.DIST",ve).args([["x","number++"],["mean","number"],["standard_dev","number++"],["cumulative","logical"]]);t("LOGNORM.INV",me).args([["probability",["and","number",["(between)",0,1]]],["mean","number"],["standard_dev","number++"]]);t("PROB",ge).args([["x_range",["collect","number",1]],["prob_range",["collect","number",1]],["lower_limit","number"],["upper_limit",["or","number",["null","$lower_limit"]]],["?",["assert","$prob_range.length == $x_range.length","N/A"]]]);t("SLOPE",_e).args([["known_y",["collect","number",1]],["known_x",["collect","number",1]],["?",["assert","$known_x.length == $known_y.length","N/A"]],["?",["assert","$known_x.length > 0 && $known_y.length > 0","N/A"]]]);t("INTERCEPT",be).args([["known_y",["collect","number",1]],["known_x",["collect","number",1]],["?",["assert","$known_x.length == $known_y.length","N/A"]],["?",["assert","$known_x.length > 0 && $known_y.length > 0","N/A"]]]);t("PEARSON",we).args([["array1",["collect!","anything",1]],["array2",["collect!","anything",1]],["?",["assert","$array2.length == $array1.length","N/A"]],["?",["assert","$array2.length > 0 && $array1.length > 0","N/A"]]]);t("RSQ",ke).args([["known_y",["collect","number",1]],["known_x",["collect","number",1]],["?",["assert","$known_x.length == $known_y.length","N/A"]],["?",["assert","$known_x.length > 0 && $known_y.length > 0","N/A"]],["?",["assert","$known_x.length != 1 && $known_y.length != 1","N/A"]]]);t("STEYX",ye).args([["known_y",["collect","number",1]],["known_x",["collect","number",1]],["?",["assert","$known_x.length == $known_y.length","N/A"]],["?",["assert","$known_x.length >= 3 && $known_y.length >= 3","DIV/0"]]]);t("FORECAST",xe).args([["x","number"],["known_y",["collect","number",1]],["known_x",["collect","number",1]],["?",["assert","$known_x.length == $known_y.length","N/A"]],["?",["assert","$known_x.length > 0 && $known_y.length > 0","N/A"]]]);t("LINEST",Te).args([["known_y","matrix"],["known_x",["or","matrix","null"]],["const",["or","logical",["null",true]]],["stats",["or","logical",["null",false]]]]);t("LOGEST",De).args([["known_y","matrix"],["known_x",["or","matrix","null"]],["const",["or","logical",["null",true]]],["stats",["or","logical",["null",false]]]]);t("TREND",Ae).args([["known_y","matrix"],["known_x",["or","matrix","null"]],["new_x",["or","matrix","null"]],["const",["or","logical",["null",true]]]]);t("GROWTH",Ee).args([["known_y","matrix"],["known_x",["or","matrix","null"]],["new_x",["or","matrix","null"]],["const",["or","logical",["null",true]]]]);t("FV",Ie).args([["rate","number"],["nper","number"],["pmt",["or","number",["null",0]]],["pv",["or","number",["null",0]]],["type",["or",["values",0,1],["null",0]]],["?",["assert","$pmt || $pv"]]]);t("PV",Me).args([["rate","number"],["nper","number"],["pmt",["or","number",["null",0]]],["fv",["or","number",["null",0]]],["type",["or",["values",0,1],["null",0]]]]);t("PMT",M).args([["rate","number"],["nper","number"],["pmt","number"],["fv",["or","number",["null",0]]],["type",["or",["values",0,1],["null",0]]]]);t("NPER",Re).args([["rate","number"],["pmt","number"],["pv","number"],["fv",["or","number",["null",0]]],["type",["or",["values",0,1],["null",0]]]]);t("RATE",Fe).args([["nper","number"],["pmt",["or","number",["null",0]]],["pv","number"],["fv",["or","number",["null",0]]],["type",["or",["values",0,1],["null",0]]],["guess",["or","number++",["null",.01]]],["?",["assert","$pmt || $fv"]]]);t("IPMT",R).args([["rate","number"],["per","number++"],["nper","number++"],["pv","number"],["fv",["or","number",["null",0]]],["type",["or",["values",0,1],["null",0]]],["?",["assert","$per >= 1 && $per <= $nper"]]]);t("PPMT",Pe).args([["rate","number"],["per","number++"],["nper","number++"],["pv","number"],["fv",["or","number",["null",0]]],["type",["or",["values",0,1],["null",0]]],["?",["assert","$per >= 1 && $per <= $nper"]]]);t("CUMPRINC",ze).args([["rate","number++"],["nper","number++"],["pv","number++"],["start_period","number++"],["end_period","number++"],["type",["or",["values",0,1],["null",0]]],["?",["assert","$end_period >= $start_period","NUM"]]]);t("CUMIPMT",Be).args([["rate","number++"],["nper","number++"],["pv","number++"],["start_period","number++"],["end_period","number++"],["type",["or",["values",0,1],["null",0]]],["?",["assert","$end_period >= $start_period","NUM"]]]);t("NPV",Le).args([["rate","number"],["values",["collect","number"]],["?",["assert","$values.length > 0","N/A"]]]);t("IRR",He).args([["values",["collect","number",1]],["guess",["or","number",["null",.1]]]]);t("EFFECT",Ne).args([["nominal_rate","number++"],["npery","integer++"]]);t("NOMINAL",Oe).args([["effect_rate","number++"],["npery","integer++"]]);t("XNPV",Ve).args([["rate","number"],["values",["collect","number",1]],["dates",["collect","date",1]],["?",["assert","$values.length == $dates.length","NUM"]]]);t("XIRR",We).args([["values",["collect","number",1]],["dates",["collect","date",1]],["guess",["or","number",["null",.1]]],["?",["assert","$values.length == $dates.length","NUM"]]]);t("ISPMT",Ue).args([["rate","number"],["per","number++"],["nper","number++"],["pv","number"],["?",["assert","$per >= 1 && $per <= $nper"]]]);t("DB",je).args([["cost","number"],["salvage","number"],["life","number++"],["period","number++"],["month",["or","number",["null",12]]]]);t("DDB",Ge).args([["cost","number"],["salvage","number"],["life","number++"],["period","number++"],["factor",["or","number",["null",2]]]]);t("SLN",qe).args([["cost","number"],["salvage","number"],["life","number++"]]);t("SYD",$e).args([["cost","number"],["salvage","number"],["life","number++"],["per","number++"]]);t("VDB",Ke).args([["cost","number+"],["salvage","number+"],["life","number++"],["start_period","number+"],["end_period","number+"],["factor",["or","number+",["null",2]]],["no_switch",["or","logical",["null",false]]],["?",["assert","$end_period >= $start_period","NUM"]]]);var i=[["settlement","date"],["maturity","date"],["frequency",["and","integer",["values",1,2,4]]],["basis",["or",["null",0],["and","integer",["values",0,1,2,3,4]]]],["?",["assert","$settlement < $maturity","NUM"]]];t("COUPDAYBS",Qe).args(i);t("COUPDAYS",Xe).args(i);t("COUPDAYSNC",Ze).args(i);t("COUPPCD",Je).args(i);t("COUPNCD",et).args(i);t("COUPNUM",tt).args(i);t("ACCRINTM",nt).args([["issue","date"],["settlement","date"],["rate","number++"],["par",["or",["null",1e3],"number++"]],["basis",["or",["null",0],["and","integer",["values",0,1,2,3,4]]]],["?",["assert","$issue < $settlement","NUM"]]]);t("ACCRINT",rt).args([["issue","date"],["first_interest","date"],["settlement","date"],["rate","number++"],["par",["or",["null",1e3],"number++"]],["frequency",["and","integer",["values",1,2,4]]],["basis",["or",["null",0],["and","integer",["values",0,1,2,3,4]]]],["calc_method",["or","logical",["null",true]]],["?",["assert","$issue < $settlement","NUM"]]]);t("DISC",at).args([["settlement","date"],["maturity","date"],["pr","number++"],["redemption","number++"],["basis",["or",["null",0],["and","integer",["values",0,1,2,3,4]]]],["?",["assert","$settlement < $maturity","NUM"]]]);t("INTRATE",ot).args([["settlement","date"],["maturity","date"],["investment","number++"],["redemption","number++"],["basis",["or",["null",0],["and","integer",["values",0,1,2,3,4]]]],["?",["assert","$settlement < $maturity","NUM"]]]);t("RECEIVED",st).args([["settlement","date"],["maturity","date"],["investment","number++"],["discount","number++"],["basis",["or",["null",0],["and","integer",["values",0,1,2,3,4]]]],["?",["assert","$settlement < $maturity","NUM"]]]);t("PRICE",lt).args([["settlement","date"],["maturity","date"],["rate","number++"],["yld","number++"],["redemption","number++"],["frequency",["and","integer",["values",1,2,4]]],["basis",["or",["null",0],["and","integer",["values",0,1,2,3,4]]]],["?",["assert","$settlement < $maturity","NUM"]]]);t("PRICEDISC",dt).args([["settlement","date"],["maturity","date"],["discount","number++"],["redemption","number++"],["basis",["or",["null",0],["and","integer",["values",0,1,2,3,4]]]],["?",["assert","$settlement < $maturity","NUM"]]]);var p=300,v=22204e-20,m=1e-30,y=Math.abs;function a(e){if(y(e)>=3.3){return 1-s(e)}var t=e>0?1:-1;if(t==-1){e=-e}var i=0,n=1;for(var r=1;r<100;r++){i+=n;n*=2*e*e/(2*r+1)}return t*2/Math.sqrt(Math.PI)*e*Math.exp(-e*e)*i}function s(e){if(y(e)<3.3){return 1-a(e)}var t=1;if(e<0){t=-1;e=-e}var i=e;for(var n=8;n>=1;n-=.5){i=e+n/i}i=1/(e+i);return t==1?Math.exp(-e*e)/Math.sqrt(Math.PI)*i:2-Math.exp(-e*e)/Math.sqrt(Math.PI)*i}function u(e){var t=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];var i=e,n=e+5.5,r=t[0];n-=(e+.5)*Math.log(n);for(var a=1;a<=6;a++){i+=1;r+=t[a]/i}return-n+Math.log(Math.sqrt(2*Math.PI)*r/e)}function r(e){if(e>0){return Math.exp(u(e))}var t=Math.PI,i=-e;return-t/(i*r(i)*Math.sin(t*i))}function l(e,t){return u(e)+u(t)-u(e+t)}function c(e,t){return Math.exp(l(e,t))}function V(e,t){return t<e+1?W(e,t):1-U(e,t)}function W(e,t){var i=1/e,n=i,r=e;var a=u(e),o;for(o=1;o<=p;o++){r++;n*=t/r;i+=n;if(y(n)<y(i)*v){break}}return i*Math.exp(-t+e*Math.log(t)-a)}function U(e,t){var i=m,n=i,r=0,a=1,o=t+1-e;var s=u(e);for(var l=1;l<=p;l++){r=o+a*r;if(y(r)<m){r=m}n=o+a/n;if(y(n)<m){n=m}r=1/r;var d=n*r;i*=d;if(y(d-1)<v){break}o+=2;a=-l*(l-e)}return i*Math.exp(-t-s+e*Math.log(t))}function f(e,t,i,n){if(!n){return Math.pow(e/i,t-1)*Math.exp(-e/i)/(i*r(t))}return V(t,e/i)}function n(e,t,i){if(e===0){return 0}if(e==1){return Infinity}var n=0,r=10,a=0,o=t*i;if(o>1){r*=o}for(var s=0;s<p;s++){a=.5*(n+r);var l=f(a,t,i,true);if(y(e-l)<1e-16){break}if(l>e){r=a}else{n=a}}return a}function g(e,t){if(!t){return Math.exp(-e*e/2)/Math.sqrt(2*Math.PI)}return.5+.5*a(e/Math.sqrt(2))}function _(e){var t=[-39.69683028665376,220.9460984245205,-275.9285104469687,138.357751867269,-30.66479806614716,2.506628277459239],i=[-54.47609879822406,161.5858368580409,-155.6989798598866,66.80131188771972,-13.28068155288572],n=[-.007784894002430293,-.3223964580411365,-2.400758277161838,-2.549732539343734,4.374664141464968,2.938163982698783],r=[.007784695709041462,.3224671290700398,2.445134137142996,3.754408661907416];var a=.02425,o=1-a;var s,l;if(e<a){s=Math.sqrt(-2*Math.log(e));return(((((n[0]*s+n[1])*s+n[2])*s+n[3])*s+n[4])*s+n[5])/((((r[0]*s+r[1])*s+r[2])*s+r[3])*s+1)}if(o<e){s=Math.sqrt(-2*Math.log(1-e));return-(((((n[0]*s+n[1])*s+n[2])*s+n[3])*s+n[4])*s+n[5])/((((r[0]*s+r[1])*s+r[2])*s+r[3])*s+1)}s=e-.5;l=s*s;return(((((t[0]*l+t[1])*l+t[2])*l+t[3])*l+t[4])*l+t[5])*s/(((((i[0]*l+i[1])*l+i[2])*l+i[3])*l+i[4])*l+1)}function j(e,t,i,n){if(!n){return Math.exp(-(e-t)*(e-t)/(2*i*i))/(i*Math.sqrt(2*Math.PI))}return g((e-t)/i,true)}function b(e,t,i){return t+i*_(e)}function G(e,t,i){return Math.exp((t-1)*Math.log(e)+(i-1)*Math.log(1-e)-l(t,i))}function w(e,t,i){var n=Math.exp(t*Math.log(e)+i*Math.log(1-e)-l(t,i));return e<(t+1)/(t+i+2)?n*q(t,i,e)/t:1-n*q(i,t,1-e)/i}function q(e,t,i){var n,r;var a,o,s,l,d,u,c,f;u=e+t;f=e+1;c=e-1;o=1;s=1-u*i/f;if(y(s)<m){s=m}s=1/s;d=s;for(n=1;n<=p;n++){r=2*n;a=n*(t-n)*i/((c+r)*(e+r));s=1+a*s;if(y(s)<m){s=m}o=1+a/o;if(y(o)<m){o=m}s=1/s;d*=s*o;a=-(e+n)*(u+n)*i/((e+r)*(f+r));s=1+a*s;if(y(s)<m){s=m}o=1+a/o;if(y(o)<m){o=m}s=1/s;l=s*o;d*=l;if(y(l-1)<v){break}}return d}function $(e,t,i){var n=0,r=1,a=0;for(var o=0;o<p;o++){a=.5*(n+r);var s=w(a,t,i);if(y(e-s)<v){break}if(s>e){r=a}else{n=a}}return a}function K(e,t,i,n,r){return w((e-n)/(r-n),t,i)}function Y(e,t,i,n,r,a){if(n){return w((e-r)/(a-r),t,i)}return G((e-r)/(a-r),t,i)/(a-r)}function k(e,t,i,n,r){return n+(r-n)*$(e,t,i)}function x(e,t,i){return f(e,t/2,2,i)}function Q(e,t){return 1-x(e,t,true)}function X(e,t){return n(e,t/2,2)}function Z(e,t){return X(1-e,t)}function J(e,t){var i=e.length,n=e[0].length;var r=0,a,o;for(a=0;a<i;a++){for(o=0;o<n;o++){var s=t[a][o];var l=e[a][o]-s;l*=l;r+=l/s}}var d=(i-1)*(n-1);return Q(r,d)}function ee(e,t,i){if(i){return 1-Math.exp(-t*e)}return t*Math.exp(-t*e)}function te(e,t,i){if(i){return 1-x(2*t,2*(e+1),true)}var n=0;for(var r=2;r<=e;r++){n+=Math.log(r)}return Math.exp(e*Math.log(t)-t-n)}function C(e,t,i,n){if(n){return w(t*e/(i+t*e),t/2,i/2)}var r=t/i;t/=2;i/=2;return r/c(t,i)*Math.pow(r*e,t-1)/Math.pow(1+r*e,t+i)}function ie(e,t,i){return 1-C(e,t,i,true)}function ne(e,t,i){return i/t*(1/k(e,i/2,t/2,0,1)-1)}function re(e,t,i){return i/t*(1/k(1-e,i/2,t/2,0,1)-1)}function S(e){var t=0,i=e.length;for(var n=0;n<i;n++){t+=e[n]}return t/i}function T(e,t){var i=0,n=e.length;for(var r=0;r<n;r++){var a=e[r]-t;i+=a*a}return i/(n-1)}function ae(e,t){var i=e.length-1,n=t.length-1;var r=T(e,S(e)),a=T(t,S(t));if(!r||!a){throw new h("DIV/0")}return 2*C(r/a,i,n,true)}function oe(e){return.5*Math.log((1+e)/(1-e))}function se(e){var t=Math.exp(2*e);return(t-1)/(t+1)}function le(e,t,i){if(i){return 1-.5*w(t/(e*e+t),t/2,.5)}return 1/(Math.sqrt(t)*c(.5,t/2))*Math.pow(1+e*e/t,-(t+1)/2)}function D(e,t){return 1-le(e,t,true)}function A(e,t){if(e<0){e=-e}return 2*D(e,t)}function E(e,t){var i=$(2*Math.min(e,1-e),t/2,.5);i=Math.sqrt(t*(1-i)/i);return e>.5?i:-i}function de(e,t){return E(1-e/2,t)}function ue(e,t,i,n){var r=e.length,a=t.length;var o,s;if(n==1){var l=0,d=0;for(var u=0;u<r;u++){var c=e[u]-t[u];l+=c;d+=c*c}var f=l/r;o=f/Math.sqrt((d-l*f)/(r*(r-1)));return i==1?D(o,r-1):A(o,r-1)}var h=S(e),p=S(t),v=T(e,h),m=T(t,p);if(n==3){var g=v/r,_=m/a,b=g+_;var w=g/b,k=_/b;s=1/(w*w/(r-1)+k*k/(a-1));o=y(h-p)/Math.sqrt(b);return i==1?D(o,s):A(o,s)}else{s=r+a-2;o=y(h-p)*Math.sqrt(s*r*a/((r+a)*((r-1)*v+(a-1)*m)));return i==1?D(o,s):A(o,s)}}function ce(e,t,i){return-E(e/2,i-1)*t/Math.sqrt(i)}function fe(e,t,i){return-_(e/2)*t/Math.sqrt(i)}function he(e){return g(e,true)-.5}function pe(e){return g(e)}function ve(e,t,i,n){if(n){return.5+.5*a((Math.log(e)-t)/(i*Math.sqrt(2)))}var r=Math.log(e)-t;return Math.exp(-r*r/(2*i*i))/(e*i*Math.sqrt(2*Math.PI))}function me(e,t,i){return Math.exp(b(e,t,i))}function ge(e,t,i,n){var r=e.length;var a=0,o;for(o=0;o<r;o++){if(t[o]<=0||t[o]>1){throw new h("NUM")}a+=t[o]}if(a!=1){throw new h("NUM")}var s=0;for(o=0;o<r;o++){var l=e[o];if(l>=i&&l<=n){s+=t[o]}}return s}function _e(e,t){var i=S(t),n=S(e),r=0,a=0;for(var o=0,s=e.length;o<s;o++){var l=t[o]-i;r+=l*(e[o]-n);a+=l*l}return r/a}function be(e,t){var i=S(t),n=S(e);var r=0,a=0;for(var o=0,s=e.length;o<s;o++){var l=t[o]-i;r+=l*(e[o]-n);a+=l*l}return n-r*i/a}function we(e,t){ut(e,t);var i=S(e),n=S(t);var r=0,a=0,o=0;for(var s=0,l=e.length;s<l;s++){var d=e[s]-i,u=t[s]-n;r+=d*u;a+=d*d;o+=u*u}return r/Math.sqrt(a*o)}function ke(e,t){var i=we(e,t);return i*i}function ye(e,t){var i=t.length;var n=S(t),r=S(e);var a=0,o=0,s=0;for(var l=0;l<i;l++){var d=t[l]-n,u=e[l]-r;a+=u*u;o+=d*u;s+=d*d}return Math.sqrt((a-o*o/s)/(i-2))}function xe(e,t,i){var n=S(i),r=S(t);var a=0,o=0;for(var s=0,l=i.length;s<l;s++){var d=i[s]-n,u=t[s]-r;a+=d*u;o+=d*d}if(o===0){throw new h("N/A")}var c=a/o,f=r-c*n;return f+c*e}function Ce(e){var t=e.height,i=0;for(var n=0;n<t;n++){i+=e.data[n][0]}return i/t}function Se(e,t){var i=e.height,n=0;for(var r=0;r<i;r++){var a=e.data[r][0]-t;n+=a*a}return n}function Te(e,t,i,n){var r=0;if(!t){t=e.map(function(){return++r})}if(i){t=t.clone();t.eachRow(function(e){t.data[e].unshift(1)});++t.width}var a=t.transpose();var o=a.multiply(t).inverse().multiply(a).multiply(e);var s=[];for(r=o.height-1;r>=0;r--){s.push(o.data[r][0])}if(!i){s.push(0)}if(!n){return this.asMatrix([s])}var l=t.multiply(o);var d=e.adds(l,true);var u=!i?0:Ce(l);var c=Se(l,u);var f=!i?0:Ce(d);var h=Se(d,f);var p=[];p.push(c,h);var v=c/(c+h);var m=e.height-t.width;var g=Math.sqrt(h/m);var _=[];_.push(v,g);var b=!i?v/t.width/((1-v)/m):c/(t.width-1)/(h/m);var w=[];w.push(b,m);var k=a.multiply(t).inverse();var y=[];for(r=k.height-1;r>=0;r--){y.push(Math.sqrt(k.data[r][r]*h/m))}return this.asMatrix([s,y,_,w,p])}function De(e,t,i,n){return Te.call(this,e.map(Math.log),t,i,n).map(Math.exp)}function Ae(e,t,i,n){var r=0;if(!t){t=e.map(function(){return++r})}if(n){t=t.clone();t.eachRow(function(e){t.data[e].unshift(1)});++t.width}var a=t.transpose();var o=a.multiply(t).inverse().multiply(a).multiply(e);if(!i){i=t}else{if(n){i=i.clone();i.eachRow(function(e){i.data[e].unshift(1)});++i.width}}return i.multiply(o)}function Ee(e,t,i,n){return Ae.call(this,e.map(Math.log),t,i,n).map(Math.exp)}function I(e,t,i,n){var r=i||20,a=n||1e-7;var o=t;for(var s=1;s<=r;s++){var l=e(o),d=l[0],u=l[1];var c=d/u;o-=c;if(Math.abs(c)<a){return o}}return new h("NUM")}function Ie(e,t,i,n,r){var a=Math.pow(1+e,t);var o=e?(a-1)/e:t;return-(n*a+i*o*(1+e*r))}function Me(e,t,i,n,r){if(!e){return-n-i*t}var a=Math.pow(1+e,t);return-(n+i*(a-1)/e*(1+e*r))/a}function M(e,t,i,n,r){if(!e){return-(n+i)/t}var a=Math.pow(1+e,t);return-e*(n+i*a)/((1+e*r)*(a-1))}function Re(e,t,i,n,r){if(!e){return-(n+i)/t}var a=t*(1+e*r);return Math.log((a-n*e)/(a+i*e))/Math.log(1+e)}function Fe(n,r,a,o,s,e){function t(e){var t=Math.pow(1+e,n-1),i=t*(1+e);return[a*i+r*(1/e+s)*(i-1)+o,n*a*t+r*(-(i-1)/(e*e)+(1/e+s)*n*t)]}return I(t,e)}function R(e,t,i,n,r,a){if(a==1&&t==1){return 0}var o=M(e,i,n,r,a);var s=Ie(e,t-1,o,n,a)*e;return a?s/(1+e):s}function Pe(e,t,i,n,r,a){var o=M(e,i,n,r,a);return o-R(e,t,i,n,r,a)}function ze(e,t,i,n,r,a){if(a==1){n--;r--}var o=Math.pow(1+e,t),s=Math.pow(1+e,n-1),l=Math.pow(1+e,r);var d=e*i*o/(o-1);var u=s*i-(s-1)/e*d;var c=l*i-(l-1)/e*d;return c-u}function Be(e,t,i,n,r,a){var o=0;for(var s=n;s<=r;s++){o+=R(e,s,t,i,0,a)}return o}function Le(e,t){var i=0;for(var n=0,r=t.length;n<r;n++){i+=t[n]*Math.pow(1+e,-n-1)}return i}function He(a,e){function t(e){var t=0,i=0;for(var n=0,r=a.length;n<r;n++){t+=a[n]*Math.pow(1+e,-n-1);i+=-n*a[n]*Math.pow(1+e,-n-2)}return[t,i]}return I(t,e)}function Ne(e,t){return Math.pow(1+e/t,t)-1}function Oe(e,t){return t*(Math.pow(e+1,1/t)-1)}function Ve(e,t,i){var n=0;for(var r=0,a=t.length;r<a;r++){n+=t[r]*Math.pow(1+e,(i[0]-i[r])/365)}return n}function We(o,s,e){function t(e){var t=o[0],i=0;for(var n=1,r=o.length;n<r;n++){var a=(s[0]-s[n])/365;t+=o[n]*Math.pow(1+e,a);i+=a*o[n]*Math.pow(1+e,a-1)}return[t,i]}return I(t,e)}function Ue(e,t,i,n){var r=-n*e;return r*(1-t/i)}function je(e,t,i,n,r){var a=1-Math.pow(t/e,1/i);a=Math.floor(a*1e3+.5)/1e3;var o=e*a*r/12;if(n==1){return o}for(var s=1;s<i;s++){if(s==n-1){return(e-o)*a}o+=(e-o)*a}return(e-o)*a*(12-r)/12}function Ge(e,t,i,n,r){var a=r/i;var o=-e*(Math.pow(1-a,n-1)-1);var s=(e-o)*a;s=Math.min(s,Math.max(0,e-o-t));return s}function qe(e,t,i){return(e-t)/i}function $e(e,t,i,n){return(e-t)*(i-n+1)*2/(i*(i+1))}function Ke(e,c,t,i,n,r,a){var o=r>=t?1:r/t;function f(e,t){var i,n,r;if(o==1){n=t==1?e:0}else{n=e*Math.pow(1-o,t-1)}r=e*Math.pow(1-o,t);i=r<c?n-c:n-r;return i<0?0:i}function s(e,t,i){var n=e-c;var r=Math.ceil(i);var a,o=0,s=0,l=false;for(var d=1;d<=r;d++){if(!l){var u=f(e,d);o=n/(t-d+1);if(o>u){a=o;l=true}else{a=u;n-=u}}else{a=o}if(d==r){a*=i+1-r}s+=a}return s}var l=Math.floor(i),d=Math.ceil(n);var u=0;if(a){for(var h=l+1;h<=d;h++){var p=f(e,h);if(h==l+1){p*=Math.min(n,l+1)-i}else{if(h==d){p*=n+1-d}}u+=p}}else{var v=t;if(i!=Math.floor(i)){if(r>1){if(i>=t/2){var m=i-t/2;i=t/2;n-=m;v+=1}}}e-=s(e,v,i);u=s(e,t-i,n-i)}return u}function F(e,t){var i=d(e);var n=i.month+t;var r=i.year+Math.floor(n/12);n%=12;if(n<0){n+=12}i=Math.min(i.date,N(r,n));return H(r,n,i)}function P(e,t,i){if(i==1||i==2||i==3){return t-e}return O(e,t,i)}function z(e,t,i){var n=d(e),r=d(t);var a=r.year-n.year;if(a>0){a=(a-1)*i}var o,s,l=12/i;do{a++;o=F(t,-a*l)}while(e<o);a--;s=F(t,-a*l);return[o,s]}function Ye(e,t,i){var n=d(t),r=d(e);var a=n.year-r.year;if(a>0){a=(a-1)*i}var o=e,s,l=12/i;while(t>o){s=o;a++;o=F(e,a*l)}return[s,o]}function Qe(e,t,i,n){var r=z(e,t,i)[0];return P(r,e,n)}function Xe(e,t,i,n){if(n==1){var r=z(e,t,i);return P(r[0],r[1],1)}if(n==3){return 365/i}return 360/i}function Ze(e,t,i,n){var r=z(e,t,i)[1];return P(e,r,n)}function Je(e,t,i){return z(e,t,i)[0]}function et(e,t,i){return z(e,t,i)[1]}function tt(e,t,i){var n=d(e),r=d(t);var a=12*(r.year-n.year)+r.month-n.month;return 1+(a*i/12|0)}function it(e,t){if(t==3){return 365}if(t==1){return o(e)?366:365}return 360}function nt(e,t,i,n,r){var a=it(d(t).year,r);return i*n*P(e,t,r)/a}function rt(e,t,i,n,r,a,o,s){var l=0,d=r*n/a;var u,c,f,h,p,v;var m=o%2===0?360:365;function g(e,t){return(t-e)*a/m|0}if(i<=t){u=z(i,t,a);c=u[0];f=u[1];if(c<=e){return d*P(e,i,o)/P(c,f,o)}u=z(e,c,a);h=u[0];p=u[1];v=g(p,i);return d*(v+P(e,p,o)/P(h,p,o)+(i<f?P(c,i,o)/P(c,f,o):0))}else{u=Ye(t,i,a);c=u[0];f=u[1];v=g(t,i);if(f==i){l=d*v}else{l=d*(v+P(c,i,o)/P(c,f,o))}if(!s){return l}u=z(e,t,a);c=u[0];f=u[1];v=g(e,t);l+=d*(v+P(e,f,o)/P(c,f,o));return l}}function at(e,t,i,n,r){var a=r%2===0?360:o(d(e).year)?366:365;return(n-i)/n*a/P(e,t,r)}function ot(e,t,i,n,r){var a=r%2===0?360:o(d(e).year)?366:365;return(n-i)/i*a/P(e,t,r)}function st(e,t,i,n,r){var a=r%2===0?360:o(d(e).year)?366:365;return i/(1-n*P(e,t,r)/a)}function lt(e,t,i,n,r,a,o){var s=1+((t-e)*a/(o%2===0?360:365)|0);var l=z(e,t,a),d=l[0],u=l[1];var c=P(d,e,o),f=P(e,u,o),h=P(d,u,o);var p=100*i/a,v=n/a,m=f/h;if(s==1){return(r+p)/(1+m*v)-c/h*p}return r/Math.pow(1+v,s-1+m)+p*Math.pow(1+v,1-s-m)*(Math.pow(1+v,s)-1)/v-c/h*p}function dt(e,t,i,n,r){var a=P(e,t,r),o=it(d(t).year,r);return n-i*n*a/o}function ut(e,t){for(var i=e.length;--i>=0;){if(typeof e[i]!="number"||typeof t[i]!="number"){e.splice(i,1);t.splice(i,1)}}}},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/borderpalette",["kendo.core","kendo.colorpicker","kendo.popup"],e)})(function(){(function(r){var a=r.jQuery;var n=["allBorders","insideBorders","insideHorizontalBorders","insideVerticalBorders","outsideBorders","leftBorder","topBorder","rightBorder","bottomBorder","noBorders"];var o=r.spreadsheet.messages.borderPalette={allBorders:"All borders",insideBorders:"Inside borders",insideHorizontalBorders:"Inside horizontal borders",insideVerticalBorders:"Inside vertical borders",outsideBorders:"Outside borders",leftBorder:"Left border",topBorder:"Top border",rightBorder:"Right border",bottomBorder:"Bottom border",noBorders:"No border"};var s=r.spreadsheet.messages.colorPicker={reset:"Reset color",customColor:"Custom color...",apply:"Apply",cancel:"Cancel"};function i(t){return function(e){e.preventDefault();return t.apply(this,arguments)}}var t=r.ui.Widget.extend({init:function(e,t){r.ui.Widget.call(this,e,t);this.element=e;this.color=t.color;this._resetButton();this._colorPalette();this._customColorPalette();this._customColorButton();this.resetButton.on("click",i(this.resetColor.bind(this)));this.customColorButton.on("click",i(this.customColor.bind(this)))},options:{name:"ColorChooser"},events:["change"],destroy:function(){r.unbind(this.dialog.element.find(".k-action-buttons"));this.dialog.destroy();this.colorPalette.destroy();this.resetButton.off("click");this.customColorButton.off("click")},value:function(e){if(e!==undefined){this.color=e;this.customColorButton.find(".k-icon").css("background-color",this.color);this.colorPalette.value(null);this.flatColorPicker.value(this.color)}else{return this.color}},_change:function(e){this.color=e;this.trigger("change",{value:e})},_colorPalette:function(){var e=a("<div />",{class:"k-spreadsheet-color-palette"});var t=this.colorPalette=a("<div />").kendoColorPalette({palette:["#ffffff","#000000","#d6ecff","#4e5b6f","#7fd13b","#ea157a","#feb80a","#00addc","#738ac8","#1ab39f","#f2f2f2","#7f7f7f","#a7d6ff","#d9dde4","#e5f5d7","#fad0e4","#fef0cd","#c5f2ff","#e2e7f4","#c9f7f1","#d8d8d8","#595959","#60b5ff","#b3bcca","#cbecb0","#f6a1c9","#fee29c","#8be6ff","#c7d0e9","#94efe3","#bfbfbf","#3f3f3f","#007dea","#8d9baf","#b2e389","#f272af","#fed46b","#51d9ff","#aab8de","#5fe7d5","#a5a5a5","#262626","#003e75","#3a4453","#5ea226","#af0f5b","#c58c00","#0081a5","#425ea9","#138677","#7f7f7f","#0c0c0c","#00192e","#272d37","#3f6c19","#750a3d","#835d00","#00566e","#2c3f71","#0c594f"],value:this.color,change:function(e){this.customColorButton.find(".k-icon").css("background-color","transparent");this.flatColorPicker.value(null);this._change(e.value)}.bind(this)}).data("kendoColorPalette");e.append(t.wrapper).appendTo(this.element)},_customColorPalette:function(){var e=a("<div />",{class:"k-spreadsheet-window",html:"<div></div>"+"<div class='k-action-buttons'>"+"<button class='k-button k-primary' data-bind='click: apply'>"+s.apply+"</button>"+"<button class='k-button' data-bind='click: close'>"+s.cancel+"</button>"+"</div>"});var t=this.dialog=e.appendTo(document.body).kendoWindow({animation:false,scrollable:false,resizable:false,maximizable:false,modal:true,visible:false,width:"auto",open:function(){this.center()}}).data("kendoWindow");t.one("activate",function(){this.element.find("[data-role=flatcolorpicker]").data("kendoFlatColorPicker")._hueSlider.resize()});var i=this.flatColorPicker=t.element.children().first().kendoFlatColorPicker().data("kendoFlatColorPicker");var n=r.observable({apply:function(){this.customColorButton.find(".k-icon").css("background-color",i.value());this.colorPalette.value(null);this._change(i.value());t.close()}.bind(this),close:function(){i.value(null);t.close()}});r.bind(t.element.find(".k-action-buttons"),n)},_resetButton:function(){this.resetButton=a("<a role='button' class='k-button k-reset-color' href='#'>"+"<span class='k-icon k-i-reset-color'></span>"+s.reset+"</a>").appendTo(this.element)},_customColorButton:function(){this.customColorButton=a("<a role='button' class='k-button k-custom-color' href='#'>"+"<span class='k-icon'></span>"+s.customColor+"</a>").appendTo(this.element)},resetColor:function(){this.colorPalette.value(null);this.flatColorPicker.value(null);this._change(null)},customColor:function(){this.dialog.open()}});var e=r.ui.Widget.extend({init:function(e,t){r.ui.Widget.call(this,e,t);this.element=e;this.color="#000";this.element.addClass("k-spreadsheet-border-palette");this._borderTypePalette();this._borderColorPalette();this.element.on("click",".k-spreadsheet-border-type-palette .k-button",i(this._click.bind(this)))},options:{name:"BorderPalette"},events:["change"],destroy:function(){this.colorChooser.destroy();this.element.off("click")},_borderTypePalette:function(){var t=o;var e=n.map(function(e){return'<a role="button" title="'+t[e]+'" aria-label="'+t[e]+'" href="#" data-border-type="'+e+'" class="k-button k-button-icon">'+'<span class="k-icon k-i-'+r.toHyphens(e)+'"></span>'+"</a>"}).join("");var i=a("<div />",{class:"k-spreadsheet-border-type-palette",html:e});i.appendTo(this.element)},_borderColorPalette:function(){var e=a("<div />",{class:"k-spreadsheet-border-color-palette"});e.appendTo(this.element);this.colorChooser=new t(e,{color:this.color,change:this._colorChange.bind(this)})},_click:function(e){this.type=a(e.currentTarget).data("borderType");this.trigger("change",{type:this.type,color:this.color})},_colorChange:function(e){this.color=e.value;if(this.type){this.trigger("change",{type:this.type,color:this.color})}}});r.spreadsheet.ColorChooser=t;r.spreadsheet.BorderPalette=e})(window.kendo)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/toolbar",["kendo.toolbar","kendo.colorpicker","kendo.combobox","kendo.dropdownlist","kendo.popup","spreadsheet/borderpalette"],e)})(function(){(function(d){var s=d.jQuery;var r=d.ui.ToolBar;var l=d.spreadsheet.messages.toolbar={addColumnLeft:"Add column left",addColumnRight:"Add column right",addRowAbove:"Add row above",addRowBelow:"Add row below",alignment:"Alignment",alignmentButtons:{justtifyLeft:"Align left",justifyCenter:"Center",justifyRight:"Align right",justifyFull:"Justify",alignTop:"Align top",alignMiddle:"Align middle",alignBottom:"Align bottom"},backgroundColor:"Background",bold:"Bold",borders:"Borders",copy:"Copy",cut:"Cut",deleteColumn:"Delete column",deleteRow:"Delete row",filter:"Filter",fontFamily:"Font",fontSize:"Font size",format:"Custom format...",formatTypes:{automatic:"Automatic",text:"Text",number:"Number",percent:"Percent",financial:"Financial",currency:"Currency",date:"Date",time:"Time",dateTime:"Date time",duration:"Duration",moreFormats:"More formats..."},formatDecreaseDecimal:"Decrease decimal",formatIncreaseDecimal:"Increase decimal",freeze:"Freeze panes",freezeButtons:{freezePanes:"Freeze panes",freezeRows:"Freeze rows",freezeColumns:"Freeze columns",unfreeze:"Unfreeze panes"},insertComment:"Insert comment",insertImage:"Insert image",italic:"Italic",merge:"Merge cells",mergeButtons:{mergeCells:"Merge all",mergeHorizontally:"Merge horizontally",mergeVertically:"Merge vertically",unmerge:"Unmerge"},open:"Open...",paste:"Paste",quickAccess:{redo:"Redo",undo:"Undo"},exportAs:"Export...",toggleGridlines:"Toggle gridlines",sort:"Sort",sortButtons:{sortRangeAsc:"Sort range A to Z",sortRangeDesc:"Sort range Z to A"},textColor:"Text Color",textWrap:"Wrap text",underline:"Underline",validation:"Data validation...",hyperlink:"Link"};var e={home:["open","exportAs",["cut","copy","paste"],["bold","italic","underline"],"hyperlink","insertComment","insertImage","backgroundColor","textColor","borders","fontSize","fontFamily","alignment","textWrap",["formatDecreaseDecimal","formatIncreaseDecimal"],"format","merge","freeze","filter","toggleGridlines"],insert:[["addColumnLeft","addColumnRight","addRowBelow","addRowAbove"],["deleteColumn","deleteRow"]],data:["sort","filter","validation"]};var u={open:{type:"open",overflow:"never",iconClass:"file-excel"},exportAs:{type:"exportAsDialog",dialogName:"exportAs",overflow:"never",text:"",iconClass:"file-excel"},bold:{type:"button",command:"PropertyChangeCommand",property:"bold",value:true,iconClass:"bold",togglable:true},italic:{type:"button",command:"PropertyChangeCommand",property:"italic",value:true,iconClass:"italic",togglable:true},underline:{type:"button",command:"PropertyChangeCommand",property:"underline",value:true,iconClass:"underline",togglable:true},formatDecreaseDecimal:{type:"button",command:"AdjustDecimalsCommand",value:-1,iconClass:"decimal-decrease"},formatIncreaseDecimal:{type:"button",command:"AdjustDecimalsCommand",value:+1,iconClass:"decimal-increase"},textWrap:{type:"button",command:"TextWrapCommand",property:"wrap",value:true,iconClass:"text-wrap",togglable:true},cut:{type:"button",command:"ToolbarCutCommand",iconClass:"cut"},copy:{type:"button",command:"ToolbarCopyCommand",iconClass:"copy"},paste:{type:"button",command:"ToolbarPasteCommand",iconClass:"paste"},separator:{type:"separator"},alignment:{type:"alignment",iconClass:"align-left"},backgroundColor:{type:"colorPicker",property:"background",iconClass:"paint"},textColor:{type:"colorPicker",property:"color",iconClass:"foreground-color"},fontFamily:{type:"fontFamily",property:"fontFamily",iconClass:"font-family"},fontSize:{type:"fontSize",property:"fontSize",iconClass:"font-size"},format:{type:"format",property:"format",iconClass:"custom-format"},filter:{type:"filter",property:"hasFilter",iconClass:"filter"},merge:{type:"merge",iconClass:"cells-merge"},freeze:{type:"freeze",iconClass:"pane-freeze"},borders:{type:"borders",iconClass:"borders-all"},formatCells:{type:"dialog",dialogName:"formatCells",overflow:"never"},hyperlink:{type:"dialog",dialogName:"hyperlink",iconClass:"link-horizontal",overflow:"never",text:""},toggleGridlines:{type:"button",command:"GridLinesChangeCommand",property:"gridLines",value:true,iconClass:"border-no",togglable:true},insertComment:{type:"dialog",dialogName:"insertComment",property:"comment",togglable:true,overflow:"never",iconClass:"comment",text:""},insertImage:{type:"dialog",dialogName:"insertImage",overflow:"never",iconClass:"image",text:""},addColumnLeft:{type:"button",command:"AddColumnCommand",value:"left",iconClass:"table-column-insert-left"},addColumnRight:{type:"button",command:"AddColumnCommand",value:"right",iconClass:"table-column-insert-right"},addRowBelow:{type:"button",command:"AddRowCommand",value:"below",iconClass:"table-row-insert-below"},addRowAbove:{type:"button",command:"AddRowCommand",value:"above",iconClass:"table-row-insert-above"},deleteColumn:{type:"button",command:"DeleteColumnCommand",iconClass:"table-column-delete"},deleteRow:{type:"button",command:"DeleteRowCommand",iconClass:"table-row-delete"},sort:{type:"sort",iconClass:"sort-desc"},validation:{type:"dialog",dialogName:"validation",iconClass:"exception",overflow:"never"}};var a=r.extend({init:function(e,t){t.items=this._expandTools(t.tools||a.prototype.options.tools[t.toolbarName]);r.fn.init.call(this,e,t);var i=this._click.bind(this);this.element.addClass("k-spreadsheet-toolbar");this._addSeparators(this.element);var n=this;this.element.on("keydown",function(e){var t;if(e.keyCode===9){t=n._nextTool(e.shiftKey?-1:1);if(t){document.activeElement.blur();if(s(t).is(".k-upload-button")){s(t).addClass("k-state-focused")}if(s(t).find("input").length){s(t).find("input").focus()}else{t.focus()}e.preventDefault()}}});this.element.on("focusout",function(){s(this).find(".k-toolbar-first-visible").removeClass("k-state-focused")});this.bind({click:i,toggle:i})},_nextTool:function(e){var t=this;var i=t.element.find(".k-widget, .k-button, .k-button-group > a");var n=i.index(s(document.activeElement).closest(".k-widget, .k-button, .k-button-group > a"));if(n>0){return i[n+e]}},_addSeparators:function(e){var t=e.children(".k-widget, a.k-button, .k-button-group");t.before("<span class='k-separator'></span>")},_expandTools:function(e){function o(e){var t=s.isPlainObject(e)?e:u[e]||{};var i="k-icon k-i-"+t.iconClass;var n=t.type;var r={button:{showText:"overflow"},colorPicker:{toolIcon:i,spriteCssClass:i},borders:{spriteCssClass:i},alignment:{spriteCssClass:i},merge:{spriteCssClass:i},freeze:{spriteCssClass:i}};var a=d.deepExtend({name:t.name||e,text:l[t.name||e],icon:t.iconClass,attributes:{title:l[t.name||e],"aria-label":l[t.name||e]}},r[n],t);if(n=="splitButton"){a.menuButtons=a.menuButtons.map(o)}a.attributes["data-tool"]=e;if(t.property){a.attributes["data-property"]=t.property}return a}return e.reduce(function(e,t){if(s.isArray(t)){e.push({type:"buttonGroup",buttons:t.map(o)})}else{e.push(o.call(this,t))}return e},[])},_click:function(e){var t=e.target.attr("data-tool");var i=u[t]||{};var n=i.command;if(!n){return}var r={command:n,options:{property:i.property||null,value:i.value||null}};if(typeof r.options.value==="boolean"){r.options.value=e.checked?true:null}this.action(r)},events:["click","toggle","open","close","overflowOpen","overflowClose","action","dialog"],options:{name:"SpreadsheetToolBar",resizable:true,tools:e},action:function(e){this.trigger("action",e)},dialog:function(e){this.trigger("dialog",e)},refresh:function(e){var t=e;var i=this._tools();function n(e,t){var i=e.toolbar;var n=e.overflow;var r=i&&i.options.togglable||n&&n.options.togglable;if(!r){return}var a=false;if(typeof t==="boolean"){a=t}else if(typeof t==="string"){if(i.options.hasOwnProperty("value")){a=i.options.value===t}else{a=t!=null}}i.toggle(a);if(n){n.toggle(a)}}function r(e,t){var i=e.toolbar;var n=e.overflow;if(i&&i.update){i.update(t)}if(n&&n.update){n.update(t)}}for(var a=0;a<i.length;a++){var o=i[a].property;var s=i[a].tool;var l=d.isFunction(t[o])?t[o]():t;if(o=="gridLines"){l=t.sheet().showGridLines()}if(s.type==="button"){n(s,l)}else{r(s,l)}}this.resize()},_tools:function(){return this.element.find("[data-property]").toArray().map(function(e){e=s(e);return{property:e.attr("data-property"),tool:this._getItem(e)}}.bind(this))},destroy:function(){this.element.find("[data-command],.k-button").each(function(){var e=s(this);var t=e.data("instance");if(t&&t.destroy){t.destroy()}});r.fn.destroy.call(this)}});d.spreadsheet.ToolBar=a;var o=d.toolbar.Item.extend({init:function(e,t){var i=s("<select />").attr("title",e.attributes.title).attr("aria-label",e.attributes.title).kendoDropDownList({height:"auto"}).data("kendoDropDownList");this.dropDownList=i;this.element=i.wrapper;this.options=e;this.toolbar=t;this.attributes();this.addUidAttr();this.addOverflowAttr();i.bind("open",this._open.bind(this));i.bind("change",this._change.bind(this));this.element.width(e.width).attr({"data-command":"PropertyChangeCommand","data-property":e.property})},_open:function(){var e=this.dropDownList;var t=e.list;var i;t.css({whiteSpace:"nowrap",width:"auto"});i=t.width();if(i>0){i+=20}else{i=e._listWidth}t.css("width",i+d.support.scrollbar());e._listWidth=i},_change:function(e){var t=this;var i=e.sender;var n=i.value();var r=i.dataItem();var a=r?r.popup:undefined;if(a){setTimeout(function(){t.toolbar.dialog({name:a})})}else{t.toolbar.action({command:"PropertyChangeCommand",options:{property:this.options.property,value:n=="null"?null:n}})}},value:function(e){if(e!==undefined){this.dropDownList.value(e)}else{return this.dropDownList.value()}}});var i=d.toolbar.Item.extend({init:function(e,t){this.element=s("<a role='button' href='#' class='k-button k-button-icon'>"+"<span class='"+e.spriteCssClass+"'>"+"</span><span class='k-icon k-i-arrow-60-down'></span>"+"</a>");this.element.on("click touchend",this.open.bind(this)).attr("data-command",e.command);this.options=e;this.toolbar=t;this.attributes();this.addUidAttr();this.addOverflowAttr();this._popup()},destroy:function(){this.popup.destroy()},open:function(e){e.preventDefault();this.popup.toggle()},_popup:function(){var e=this.element;this.popup=s("<div class='k-spreadsheet-popup' />").appendTo(e).kendoPopup({anchor:e}).data("kendoPopup")}});d.toolbar.registerComponent("dialog",d.toolbar.ToolBarButton.extend({init:function(e,t){d.toolbar.ToolBarButton.fn.init.call(this,e,t);this._dialogName=e.dialogName;this.element.bind("click touchend",this.open.bind(this)).data("instance",this)},open:function(){this.toolbar.dialog({name:this._dialogName})}}));d.toolbar.registerComponent("exportAsDialog",d.toolbar.Item.extend({init:function(e,t){this._dialogName=e.dialogName;this.toolbar=t;this._title=e.attributes.title;this.element=s("<button type='button' role='button' class='k-button k-button-icon'>"+"<span class='k-icon k-i-download'></span>"+"</button>").attr("title",this._title).attr("aria-label",this._title).data("instance",this);this.element.bind("click",this.open.bind(this)).data("instance",this)},open:function(){this.toolbar.dialog({name:this._dialogName})}}));var n=d.toolbar.OverflowButton.extend({init:function(e,t){d.toolbar.OverflowButton.fn.init.call(this,e,t);this.element.on("click touchend",this._click.bind(this));this.message=this.options.text;var i=this.element.data("button");this.element.data(this.options.type,i)},_click:s.noop});var t=i.extend({init:function(e,t){i.fn.init.call(this,e,t);this.popup.element.addClass("k-spreadsheet-colorpicker");this.colorChooser=new d.spreadsheet.ColorChooser(this.popup.element,{change:this._colorChange.bind(this)});this.element.attr({"data-property":e.property});this.element.data({type:"colorPicker",colorPicker:this,instance:this})},destroy:function(){this.colorChooser.destroy();i.fn.destroy.call(this)},update:function(e){this.value(e)},value:function(e){this.colorChooser.value(e)},_colorChange:function(e){this.toolbar.action({command:"PropertyChangeCommand",options:{property:this.options.property,value:e.sender.value()}});this.popup.close()}});var c=n.extend({init:function(e,t){e.iconName="text";n.fn.init.call(this,e,t)},_click:function(){this.toolbar.dialog({name:"colorPicker",options:{title:this.options.property,property:this.options.property}})}});d.toolbar.registerComponent("colorPicker",t,c);var f=[8,9,10,11,12,13,14,16,18,20,22,24,26,28,36,48,72];var h=12;var p=d.toolbar.Item.extend({init:function(e,t){var i=s("<input />").attr("aria-label",e.attributes.title).attr("title",e.attributes.title).kendoComboBox({change:this._valueChange.bind(this),clearButton:false,dataSource:e.fontSizes||f,value:h}).data("kendoComboBox");this.comboBox=i;this.element=i.wrapper;this.options=e;this.toolbar=t;this.attributes();this.addUidAttr();this.addOverflowAttr();this.element.width(e.width).attr({"data-command":"PropertyChangeCommand","data-property":e.property});this.element.data({type:"fontSize",fontSize:this})},_valueChange:function(e){this.toolbar.action({command:"PropertyChangeCommand",options:{property:this.options.property,value:d.parseInt(e.sender.value())}})},update:function(e){this.value(d.parseInt(e)||h)},value:function(e){if(e!==undefined){this.comboBox.value(e)}else{return this.comboBox.value()}}});var v=n.extend({_click:function(){this.toolbar.dialog({name:"fontSize",options:{sizes:f,defaultSize:h}})},update:function(e){this._value=e||h;this.element.find(".k-text").text(this.message+" ("+this._value+") ...")}});d.toolbar.registerComponent("fontSize",p,v);var m=["Arial","Courier New","Georgia","Times New Roman","Trebuchet MS","Verdana"];var g="Arial";var _=o.extend({init:function(e,t){o.fn.init.call(this,e,t);var i=this.dropDownList;i.setDataSource(e.fontFamilies||m);i.value(g);this.element.data({type:"fontFamily",fontFamily:this})},update:function(e){this.value(e||g)}});var b=n.extend({_click:function(){this.toolbar.dialog({name:"fontFamily",options:{fonts:m,defaultFont:g}})},update:function(e){this._value=e||g;this.element.find(".k-text").text(this.message+" ("+this._value+") ...")}});d.toolbar.registerComponent("fontFamily",_,b);var w=d.spreadsheet.formats={automatic:null,text:"@",number:"#,0.00",percent:"0.00%",financial:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',currency:"$#,##0.00;[Red]$#,##0.00",date:"m/d/yyyy",time:"h:mm:ss AM/PM",dateTime:"m/d/yyyy h:mm",duration:"[h]:mm:ss"};var k=o.extend({_revertTitle:function(e){e.sender.value("");e.sender.wrapper.width("auto")},init:function(e,t){o.fn.init.call(this,e,t);var i=this.dropDownList;var n="<span class='k-icon k-i-"+e.iconClass+"' style='line-height: 1em; width: 1.35em;'></span>";i.bind("change",this._revertTitle.bind(this));i.bind("dataBound",this._revertTitle.bind(this));i.setOptions({dataValueField:"format",dataTextField:"name",dataValuePrimitive:true,valueTemplate:n,template:"# if (data.sample) { #"+"<span class='k-spreadsheet-sample'>#: data.sample #</span>"+"# } #"+"#: data.name #"});i.text(n);i.setDataSource([{format:w.automatic,name:l.formatTypes.automatic},{format:w.text,name:l.formatTypes.text},{format:w.number,name:l.formatTypes.number,sample:"1,499.99"},{format:w.percent,name:l.formatTypes.percent,sample:"14.50%"},{format:w.financial,name:l.formatTypes.financial,sample:"(1,000.12)"},{format:w.currency,name:l.formatTypes.currency,sample:"$1,499.99"},{format:w.date,name:l.formatTypes.date,sample:"4/21/2012"},{format:w.time,name:l.formatTypes.time,sample:"5:49:00 PM"},{format:w.dateTime,name:l.formatTypes.dateTime,sample:"4/21/2012 5:49:00"},{format:w.duration,name:l.formatTypes.duration,sample:"168:05:00"},{popup:"formatCells",name:l.formatTypes.moreFormats}]);this.element.data({type:"format",format:this})}});var y=n.extend({_click:function(){this.toolbar.dialog({name:"formatCells"})}});d.toolbar.registerComponent("format",k,y);var x=i.extend({init:function(e,t){i.fn.init.call(this,e,t);this._borderPalette();this.element.data({type:"borders",instance:this})},destroy:function(){this.borderPalette.destroy();i.fn.destroy.call(this)},_borderPalette:function(){var e=s("<div />").appendTo(this.popup.element);this.borderPalette=new d.spreadsheet.BorderPalette(e,{change:this._action.bind(this)})},_action:function(e){this.toolbar.action({command:"BorderChangeCommand",options:{border:e.type,style:{size:1,color:e.color}}})}});var C=n.extend({_click:function(){this.toolbar.dialog({name:"borders"})}});d.toolbar.registerComponent("borders",x,C);var S=i.extend({init:function(e,t){i.fn.init.call(this,e,t);this.element.attr({"data-property":"alignment"});this._defineButtons();this._commandPalette();this.popup.element.on("click",".k-button",function(e){this._action(s(e.currentTarget))}.bind(this));this.element.data({type:"alignment",alignment:this,instance:this})},_defineButtons:function(){this.buttons=[{property:"textAlign",value:"left",iconClass:"align-left",text:l.alignmentButtons.justtifyLeft},{property:"textAlign",value:"center",iconClass:"align-center",text:l.alignmentButtons.justifyCenter},{property:"textAlign",value:"right",iconClass:"align-right",text:l.alignmentButtons.justifyRight},{property:"textAlign",value:"justify",iconClass:"align-justify",text:l.alignmentButtons.justifyFull},{property:"verticalAlign",value:"top",iconClass:"align-top",text:l.alignmentButtons.alignTop},{property:"verticalAlign",value:"center",iconClass:"align-middle",text:l.alignmentButtons.alignMiddle},{property:"verticalAlign",value:"bottom",iconClass:"align-bottom",text:l.alignmentButtons.alignBottom}]},destroy:function(){this.popup.element.off();i.fn.destroy.call(this)},update:function(e){var t=e.textAlign();var i=e.verticalAlign();var n=this.popup.element;n.find(".k-button").removeClass("k-state-active");if(t){n.find("[data-property=textAlign][data-value="+t+"]").addClass("k-state-active")}if(i){n.find("[data-property=verticalAlign][data-value="+i+"]").addClass("k-state-active")}},_commandPalette:function(){var n=this.buttons;var r=s("<div />").appendTo(this.popup.element);n.forEach(function(e,t){var i="<a role='button' title='"+e.text+"' data-property='"+e.property+"' data-value='"+e.value+"' class='k-button k-button-icon'>"+"<span class='k-icon k-i-"+e.iconClass+"'></span>"+"</a>";if(t!==0&&n[t-1].property!==e.property){r.append(s("<span class='k-separator' />"))}r.append(i)})},_action:function(e){var t=e.attr("data-property");var i=e.attr("data-value");this.toolbar.action({command:"PropertyChangeCommand",options:{property:t,value:i}})}});var T=n.extend({_click:function(){this.toolbar.dialog({name:"alignment"})}});d.toolbar.registerComponent("alignment",S,T);var D=i.extend({init:function(e,t){i.fn.init.call(this,e,t);this._defineButtons();this._commandPalette();this.popup.element.on("click",".k-button",function(e){this._action(s(e.currentTarget))}.bind(this));this.element.data({type:"merge",merge:this,instance:this})},_defineButtons:function(){this.buttons=[{value:"cells",iconClass:"cells-merge",text:l.mergeButtons.mergeCells},{value:"horizontally",iconClass:"cells-merge-horizontally",text:l.mergeButtons.mergeHorizontally},{value:"vertically",iconClass:"cells-merge-vertically",text:l.mergeButtons.mergeVertically},{value:"unmerge",iconClass:"table-unmerge",text:l.mergeButtons.unmerge}]},destroy:function(){this.popup.element.off();i.fn.destroy.call(this)},_commandPalette:function(){var i=s("<div />").appendTo(this.popup.element);this.buttons.forEach(function(e){var t="<a role='button' title='"+e.text+"' data-value='"+e.value+"' class='k-button k-button-icontext'>"+"<span class='k-icon k-i-"+e.iconClass+"'></span>"+e.text+"</a>";i.append(t)})},_action:function(e){var t=e.attr("data-value");this.toolbar.action({command:"MergeCellCommand",options:{value:t}})}});var A=n.extend({_click:function(){this.toolbar.dialog({name:"merge"})}});d.toolbar.registerComponent("merge",D,A);var E=i.extend({init:function(e,t){i.fn.init.call(this,e,t);this._defineButtons();this._commandPalette();this.popup.element.on("click",".k-button",function(e){this._action(s(e.currentTarget))}.bind(this));this.element.data({type:"freeze",freeze:this,instance:this})},_defineButtons:function(){this.buttons=[{value:"panes",iconClass:"pane-freeze",text:l.freezeButtons.freezePanes},{value:"rows",iconClass:"row-freeze",text:l.freezeButtons.freezeRows},{value:"columns",iconClass:"column-freeze",text:l.freezeButtons.freezeColumns},{value:"unfreeze",iconClass:"table-unmerge",text:l.freezeButtons.unfreeze}]},destroy:function(){this.popup.element.off();i.fn.destroy.call(this)},_commandPalette:function(){var i=s("<div />").appendTo(this.popup.element);this.buttons.forEach(function(e){var t="<a role='button' title='"+e.text+"' data-value='"+e.value+"' class='k-button k-button-icontext'>"+"<span class='k-icon k-i-"+e.iconClass+"'></span>"+e.text+"</a>";i.append(t)})},_action:function(e){var t=e.attr("data-value");this.toolbar.action({command:"FreezePanesCommand",options:{value:t}})}});var I=n.extend({_click:function(){this.toolbar.dialog({name:"freeze"})}});d.toolbar.registerComponent("freeze",E,I);var M=o.extend({_revertTitle:function(e){e.sender.value("");e.sender.wrapper.width("auto")},init:function(e,t){o.fn.init.call(this,e,t);var i=this.dropDownList;i.bind("change",this._revertTitle.bind(this));i.bind("dataBound",this._revertTitle.bind(this));i.setOptions({valueTemplate:"<span class='k-icon k-i-"+e.iconClass+"' style='line-height: 1em; width: 1.35em;'></span>",template:"<span class='k-icon k-i-#= iconClass #' style='line-height: 1em; width: 1.35em;'></span>#=text#",dataTextField:"text",dataValueField:"value"});i.setDataSource([{value:"asc",sheet:false,text:l.sortButtons.sortRangeAsc,iconClass:"sort-asc"},{value:"desc",sheet:false,text:l.sortButtons.sortRangeDesc,iconClass:"sort-desc"}]);i.select(0);this.element.data({type:"sort",sort:this})},_change:function(e){var t=e.sender;var i=t.dataItem();if(i){this.toolbar.action({command:"SortCommand",options:{value:i.value,sheet:i.sheet}})}},value:s.noop});var R=n.extend({_click:function(){this.toolbar.dialog({name:"sort"})}});d.toolbar.registerComponent("sort",M,R);var F=d.toolbar.ToolBarButton.extend({init:function(e,t){e.showText="overflow";d.toolbar.ToolBarButton.fn.init.call(this,e,t);this.element.on("click",this._click.bind(this));this.element.data({type:"filter",filter:this})},_click:function(){this.toolbar.action({command:"FilterCommand"})},update:function(e){this.toggle(e)}});var P=n.extend({init:function(e,t){n.fn.init.call(this,e,t);this.element.data({type:"filter",filter:this})},_click:function(){this.toolbar.action({command:"FilterCommand"})},update:function(e){this.toggle(e)}});d.toolbar.registerComponent("filter",F,P);var z=d.toolbar.Item.extend({init:function(e,t){this.toolbar=t;this.element=s("<div class='k-button k-upload-button k-button-icon'>"+"<span class='k-icon k-i-folder-open'></span>"+"</div>").data("instance",this);this._title=e.attributes.title;this._reset()},_reset:function(){this.element.find("input").remove();s("<input type='file' autocomplete='off' accept='.xlsx'/>").attr("title",this._title).attr("aria-label",this._title).one("change",this._change.bind(this)).appendTo(this.element)},_change:function(e){this.toolbar.action({command:"OpenCommand",options:{file:e.target.files[0]}});this._reset()}});d.toolbar.registerComponent("open",z);d.spreadsheet.TabStrip=d.ui.TabStrip.extend({init:function(e,i){d.ui.TabStrip.fn.init.call(this,e,i);e.addClass("k-spreadsheet-tabstrip");this._quickAccessButtons();this.toolbars={};var n=i.dataSource;this.contentElements.each(function(e,t){this._toolbar(s(t),n[e].id,i.toolbarOptions[n[e].id])}.bind(this));this.one("activate",function(){this.toolbars[this.options.dataSource[0].id].resize()})},events:d.ui.TabStrip.fn.events.concat(["action","dialog"]),destroy:function(){this.quickAccessToolBar.off("click");d.ui.TabStrip.fn.destroy.call(this);for(var e in this.toolbars){this.toolbars[e].destroy()}},action:function(e){this.trigger("action",e)},dialog:function(e){this.trigger("dialog",e)},refreshTools:function(e){var t=this.toolbars;for(var i in t){if(t.hasOwnProperty(i)){t[i].refresh(e)}}},_quickAccessButtons:function(){var e=[{title:l.quickAccess.undo,iconClass:"undo",action:"undo"},{title:l.quickAccess.redo,iconClass:"redo",action:"redo"}];var t=d.template("<a role='button' href='\\#' title='#= title #' data-action='#= action #' class='k-button k-button-icon' aria-label='#= title #'><span class='k-icon k-i-#=iconClass#'></span></a>");this.quickAccessToolBar=s("<div />",{class:"k-spreadsheet-quick-access-toolbar",html:d.render(t,e)}).insertBefore(this.wrapper);this.quickAccessToolBar.on("click",".k-button",function(e){e.preventDefault();var t=s(e.currentTarget).attr("data-action");this.action({action:t})}.bind(this));this.quickAccessAdjust()},quickAccessAdjust:function(){this.tabGroup.css("padding-left",d._outerWidth(this.quickAccessToolBar))},_toolbar:function(e,t,i){var n;var r;if(this.toolbars[t]){this.toolbars[t].destroy();e.children(".k-toolbar").remove()}if(i){n=e.html("<div></div>").children("div");r={tools:typeof i==="boolean"?undefined:i,toolbarName:t,action:this.action.bind(this),dialog:this.dialog.bind(this)};this.toolbars[t]=new d.spreadsheet.ToolBar(n,r)}}})})(window.kendo)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/dialogs",["kendo.core","kendo.binder","kendo.validator"],e)})(function(){(function(o){var a=o.jQuery;var t=o.data.ObservableObject;var n=o.spreadsheet.messages.dialogs={apply:"Apply",save:"Save",cancel:"Cancel",remove:"Remove",retry:"Retry",revert:"Revert",okText:"OK",formatCellsDialog:{title:"Format",categories:{number:"Number",currency:"Currency",date:"Date"}},fontFamilyDialog:{title:"Font"},fontSizeDialog:{title:"Font size"},bordersDialog:{title:"Borders"},alignmentDialog:{title:"Alignment",buttons:{justtifyLeft:"Align left",justifyCenter:"Center",justifyRight:"Align right",justifyFull:"Justify",alignTop:"Align top",alignMiddle:"Align middle",alignBottom:"Align bottom"}},mergeDialog:{title:"Merge cells",buttons:{mergeCells:"Merge all",mergeHorizontally:"Merge horizontally",mergeVertically:"Merge vertically",unmerge:"Unmerge"}},freezeDialog:{title:"Freeze panes",buttons:{freezePanes:"Freeze panes",freezeRows:"Freeze rows",freezeColumns:"Freeze columns",unfreeze:"Unfreeze panes"}},confirmationDialog:{text:"Are you sure you want to remove this sheet?",title:"Sheet remove"},validationDialog:{title:"Data Validation",hintMessage:"Please enter a valid {0} value {1}.",hintTitle:"Validation {0}",criteria:{any:"Any value",number:"Number",text:"Text",date:"Date",custom:"Custom Formula",list:"List"},comparers:{greaterThan:"greater than",lessThan:"less than",between:"between",notBetween:"not between",equalTo:"equal to",notEqualTo:"not equal to",greaterThanOrEqualTo:"greater than or equal to",lessThanOrEqualTo:"less than or equal to"},comparerMessages:{greaterThan:"greater than {0}",lessThan:"less than {0}",between:"between {0} and {1}",notBetween:"not between {0} and {1}",equalTo:"equal to {0}",notEqualTo:"not equal to {0}",greaterThanOrEqualTo:"greater than or equal to {0}",lessThanOrEqualTo:"less than or equal to {0}",custom:"that satisfies the formula: {0}"},labels:{criteria:"Criteria",comparer:"Comparer",min:"Min",max:"Max",value:"Value",start:"Start",end:"End",onInvalidData:"On invalid data",rejectInput:"Reject input",showWarning:"Show warning",showHint:"Show hint",hintTitle:"Hint title",hintMessage:"Hint message",ignoreBlank:"Ignore blank",showListButton:"Display button to show list",showCalendarButton:"Display button to show calendar"},placeholders:{typeTitle:"Type title",typeMessage:"Type message"}},exportAsDialog:{title:"Export...",defaultFileName:"Workbook",xlsx:{description:"Excel Workbook (.xlsx)"},pdf:{description:"Portable Document Format (.pdf)",area:{workbook:"Entire Workbook",sheet:"Active Sheet",selection:"Selection"},paper:{a2:"A2 (420 mm  594 mm)",a3:"A3 (297 mm x 420 mm)",a4:"A4 (210 mm x 297 mm)",a5:"A5 (148 mm x 210 mm)",b3:"B3 (353 mm  500 mm)",b4:"B4 (250 mm x 353 mm)",b5:"B5 (176 mm x 250 mm)",folio:'Folio (8.5" x 13")',legal:'Legal (8.5" x 14")',letter:'Letter (8.5" x 11")',tabloid:'Tabloid (11" x 17")',executive:'Executive (7.25" x 10.5")'},margin:{normal:"Normal",narrow:"Narrow",wide:"Wide"}},labels:{scale:"Scale",fit:"Fit to page",fileName:"File name",saveAsType:"Save as type",exportArea:"Export",paperSize:"Paper size",margins:"Margins",orientation:"Orientation",print:"Print",guidelines:"Guidelines",center:"Center",horizontally:"Horizontally",vertically:"Vertically"}},modifyMergedDialog:{errorMessage:"Cannot change part of a merged cell."},rangeDisabledDialog:{errorMessage:"Destination range contains disabled cells."},intersectsArrayDialog:{errorMessage:"You cannot alter part of an array"},incompatibleRangesDialog:{errorMessage:"Incompatible ranges"},noFillDirectionDialog:{errorMessage:"Cannot determine fill direction"},duplicateSheetNameDialog:{errorMessage:"Duplicate sheet name"},overflowDialog:{errorMessage:"Cannot paste, because the copy area and the paste area are not the same size and shape."},useKeyboardDialog:{title:"Copying and pasting",errorMessage:"These actions cannot be invoked through the menu. Please use the keyboard shortcuts instead:",labels:{forCopy:"for copy",forCut:"for cut",forPaste:"for paste"}},unsupportedSelectionDialog:{errorMessage:"That action cannot be performed on multiple selection."},linkDialog:{title:"Hyperlink",labels:{text:"Text",url:"Address",removeLink:"Remove link"}},insertCommentDialog:{title:"Insert comment",labels:{comment:"Comment",removeComment:"Remove comment"}},insertImageDialog:{title:"Insert image",info:"Drag an image here, or click to select",typeError:"Please select a JPEG, PNG or GIF image"}};var r={};o.spreadsheet.dialogs={register:function(e,t){r[e]=t},registered:function(e){return!!r[e]},create:function(e,t){var i=r[e];if(i){return new i(t)}}};var s=o.spreadsheet.SpreadsheetDialog=o.Observable.extend({init:function(e){o.Observable.fn.init.call(this,e);this.options=P(a.extend(true,{},this.options,e));this.bind(this.events,e)},events:["close","activate"],options:{autoFocus:true},dialog:function(){if(!this._dialog){var e={autoFocus:false,scrollable:false,resizable:false,modal:true,visible:false,width:this.options.width||320,title:this.options.title,open:function(){this.center()},close:this._onDialogClose.bind(this),activate:this._onDialogActivate.bind(this),deactivate:this._onDialogDeactivate.bind(this)};this._dialog=a("<div class='k-spreadsheet-window k-action-window k-popup-edit-form' />").addClass(this.options.className||"").append(o.template(this.options.template)({messages:o.spreadsheet.messages.dialogs||n,errors:this.options.errors})).kendoWindow(e).data("kendoWindow")}return this._dialog},_onDialogClose:function(){this.trigger("close",{action:this._action})},_onDialogActivate:function(){this.trigger("activate")},_onDialogDeactivate:function(){this.trigger("deactivate");this.destroy()},destroy:function(){if(this._dialog){this._dialog.destroy();this._dialog=null}},open:function(){this.dialog().open();this.dialog().element.find(".k-primary").focus()},apply:function(){this.close()},close:function(){this._action="close";this.dialog().close()}});function l(e,t){return o.spreadsheet.formatting.text(e,t)}var d=o.spreadsheet.FormatCellsViewModel=t.extend({init:function(e){t.fn.init.call(this,e);this.useCategory(this.category)},useCategory:function(e){var t=e&&e.type||"number";var i=t=="currency";this.category=e;this.set("showCurrencyFilter",i&&this.currencies.length>1);if(!i){this.set("formats",this.allFormats[t+"Formats"])}else{this.currency(this.currencies[0])}this.useFirstFormat()},useFirstFormat:function(){if(this.formats.length){this.set("format",this.formats[0].value)}},currency:function(e){if(e!==undefined){this._currency=e;var t=e.value;var i=[{currency:t,decimals:true},{currency:t,decimals:true,iso:true},{currency:t,decimals:false}];i=i.map(function(e){e=d.convert.currency(e);return{value:e,name:l(1e3,e)}});this.set("formats",i);this.useFirstFormat()}return this._currency||this.currencies[0]},categoryFilter:function(e){if(e!==undefined){this.useCategory(e)}return this.category},preview:function(){var e=this.get("format");var t=this.value||0;if(e&&e.length){return l(t,e)}else{return t}}});d.convert={currency:function(e){function t(e,t){return new Array(t+1).join(e)}var i=e.currency;var n=i.pattern[1];if(e.decimals){n=n.replace(/n/g,"n"+i["."]+t("0",i.decimals))}if(e.iso){n='"'+i.abbr+'" '+n.replace(/\s*\$\s*/g,"")}else{n=n.replace(/\$/g,JSON.stringify(i.symbol))}n=n.replace(/n/g,"?");return n},date:function(e){if(/T|Z/.test(e)){return""}return e.toLowerCase().replace(/tt/g,"AM/PM").replace(/'/g,'"')}};function i(e,t){var i=[];var n=[];for(var r=0;r<t.length;r++){if(a.inArray(t[r][e],n)==-1){i.push(t[r]);n.push(t[r][e])}}return i}var u=s.extend({init:function(e){var t=o.spreadsheet.messages.dialogs.formatCellsDialog||n;var i={title:t.title,categories:[{type:"number",name:t.categories.number},{type:"currency",name:t.categories.currency},{type:"date",name:t.categories.date}]};s.fn.init.call(this,a.extend(i,e));this._generateFormats()},options:{className:"k-spreadsheet-format-cells",template:"<div class='k-edit-form-container'>"+"<div class='k-root-tabs' data-role='tabstrip' "+"data-text-field='name' "+"data-bind='source: categories, value: categoryFilter' "+"data-animation='false'></div>"+"<div class='k-spreadsheet-preview' data-bind='text: preview'></div>"+"<script type='text/x-kendo-template' id='format-item-template'>"+"\\#: data.name \\#"+"<\/script>"+"<select data-role='dropdownlist' class='k-format-filter' "+"data-text-field='description' "+"data-value-field='value.name' "+"data-bind='visible: showCurrencyFilter, value: currency, source: currencies'></select>"+"<ul data-role='staticlist' tabindex='0' "+"class='k-list k-reset' "+"data-template='format-item-template' "+"data-value-primitive='true' "+"data-value-field='value' "+"data-bind='source: formats, value: format'></ul>"+"<div class='k-action-buttons'>"+"<button class='k-button k-primary' data-bind='click: apply'>#: messages.apply #</button>"+"<button class='k-button' data-bind='click: close'>#: messages.cancel #</button>"+"</div>"+"</div>"},_generateFormats:function(){var e=this.options;if(!e.currencies){e.currencies=u.currenciesFrom(o.cultures)}if(!e.numberFormats){e.numberFormats=[{value:"#.00%",name:"100.00%"},{value:"#%",name:"100%"},{value:"#.00",name:"1024.00"},{value:"#,###.00",name:"1,024.00"}]}if(!e.dateFormats){var t=o.cultures.current.calendars.standard.patterns;e.dateFormats=i("value",a.map(t,function(e){e=d.convert.date(e);if(!e){return}return{value:e,name:l(34567.7678,e)}}))}},open:function(e){var t=this.options;var i=e.value();var n=t.categories.slice(0);var r;this.viewModel=new d({currencies:t.currencies.slice(0),allFormats:{numberFormats:t.numberFormats.slice(0),dateFormats:t.dateFormats.slice(0)},categories:n,format:e.format(),category:i instanceof Date?n[2]:n[0],apply:this.apply.bind(this),close:this.close.bind(this),value:i});s.fn.open.call(this);r=this.dialog().element;o.bind(r,this.viewModel);var a=r.find("select.k-format-filter").data("kendoDropDownList");if(t.currencies.length>10){a.setOptions({filter:"contains"})}r.find(o.roleSelector("staticlist")).parent().addClass("k-list-wrapper")},apply:function(){var e=this.viewModel.format;s.fn.apply.call(this);this.trigger("action",{command:"PropertyChangeCommand",options:{property:"format",value:e}})}});u.currenciesFrom=function(e){return i("description",a.map(e,function(e,t){if(!/-/.test(t)){return}var i=e.numberFormat.currency;var n=o.format("{0} ({1}, {2})",i.name,i.abbr,i.symbol);return{description:n,value:i}}))};o.spreadsheet.dialogs.register("formatCells",u);o.spreadsheet.dialogs.FormatCellsDialog=u;var c=s.extend({options:{className:"k-spreadsheet-message",title:"",messageId:"",text:"",template:"<div class='k-spreadsheet-message-content' data-bind='text: text'></div>"+"<div class='k-action-buttons'>"+"<button class='k-button k-primary' data-bind='click: close'>"+"#= messages.okText #"+"</button>"+"</div>"},open:function(){s.fn.open.call(this);var e=this.options;var t=e.text;if(e.messageId){t=o.getter(e.messageId,true)(o.spreadsheet.messages.dialogs)}o.bind(this.dialog().element,{text:t,close:this.close.bind(this)})}});o.spreadsheet.dialogs.register("message",c);var e=s.extend({init:function(e){var t=o.spreadsheet.messages.dialogs.confirmationDialog||n;var i={title:t.title,text:t.text};s.fn.init.call(this,a.extend(i,e))},options:{className:"k-spreadsheet-message",messageId:"",template:"<div class='k-spreadsheet-message-content' data-bind='text: text'></div>"+"<div class='k-action-buttons'>"+"<button class='k-button k-primary' data-bind='click: confirm'>"+"#= messages.okText #"+"</button>"+"<button class='k-button' data-bind='click: cancel'>"+"#= messages.cancel #"+"</button>"+"</div>"},open:function(){s.fn.open.call(this);var e=this.options;var t=e.text;if(e.messageId){t=o.getter(e.messageId,true)(o.spreadsheet.messages.dialogs)}o.bind(this.dialog().element,{text:t,confirm:this.confirm.bind(this),cancel:this.close.bind(this)})},isConfirmed:function(){return this._confirmed},confirm:function(){this._confirmed=true;this.close()}});o.spreadsheet.dialogs.register("confirmation",e);var f=s.extend({options:{className:"k-spreadsheet-message",title:"",messageId:"",text:"",template:"<div class='k-spreadsheet-message-content' data-bind='text: text'></div>"+"<div class='k-action-buttons'>"+"<button class='k-button k-primary' data-bind='click: retry'>"+"#= messages.retry #"+"</button>"+"<button class='k-button' data-bind='click: cancel'>"+"#= messages.cancel #"+"</button>"+"</div>"},open:function(){s.fn.open.call(this);var e=this.options;var t=e.text;if(e.messageId){t=o.getter(e.messageId,true)(o.spreadsheet.messages.dialogs)}o.bind(this.dialog().element,{text:t,retry:this.retry.bind(this),cancel:this.close.bind(this)})},retry:function(){this._retry=true;this.close()}});o.spreadsheet.dialogs.register("validationError",f);var h=s.extend({init:function(e){var t=o.spreadsheet.messages.dialogs.fontFamilyDialog||n;s.fn.init.call(this,a.extend({title:t.title},e));this._list()},options:{template:"<ul class='k-list k-reset'></ul>"},_list:function(){var e=this.dialog().element.find("ul");var t=this.options.fonts;var i=this.options.defaultFont;this.list=new o.ui.StaticList(e,{dataSource:new o.data.DataSource({data:t}),template:"#: data #",value:i,change:this.apply.bind(this)});this.list.dataSource.fetch()},apply:function(e){s.fn.apply.call(this);this.trigger("action",{command:"PropertyChangeCommand",options:{property:"fontFamily",value:e.sender.value()[0]}})}});o.spreadsheet.dialogs.register("fontFamily",h);var p=s.extend({init:function(e){var t=o.spreadsheet.messages.dialogs.fontSizeDialog||n;s.fn.init.call(this,a.extend({title:t.title},e));this._list()},options:{template:"<ul class='k-list k-reset'></ul>"},_list:function(){var e=this.dialog().element.find("ul");var t=this.options.sizes;var i=this.options.defaultSize;this.list=new o.ui.StaticList(e,{dataSource:new o.data.DataSource({data:t}),template:"#: data #",value:i,change:this.apply.bind(this)});this.list.dataSource.fetch()},apply:function(e){s.fn.apply.call(this);this.trigger("action",{command:"PropertyChangeCommand",options:{property:"fontSize",value:o.parseInt(e.sender.value()[0])}})}});o.spreadsheet.dialogs.register("fontSize",p);var v=s.extend({init:function(e){var t=o.spreadsheet.messages.dialogs.bordersDialog||n;s.fn.init.call(this,a.extend({title:t.title},e));this.element=this.dialog().element;this._borderPalette();this.viewModel=o.observable({apply:this.apply.bind(this),close:this.close.bind(this)});o.bind(this.element.find(".k-action-buttons"),this.viewModel)},options:{width:177,template:"<div></div>"+"<div class='k-action-buttons'>"+"<button class='k-button k-primary' data-bind='click: apply'>#: messages.apply #</button>"+"<button class='k-button' data-bind='click: close'>#: messages.cancel #</button>"+"</div>"},apply:function(){s.fn.apply.call(this);var e=this.value();this.trigger("action",{command:"BorderChangeCommand",options:{border:e.type,style:{size:1,color:e.color}}})},_borderPalette:function(){var e=this.dialog().element.find("div:first");this.borderPalette=new o.spreadsheet.BorderPalette(e,{change:this.value.bind(this)})},value:function(e){if(e===undefined){return this._state}else{this._state=e}}});o.spreadsheet.dialogs.register("borders",v);var m=s.extend({init:function(e){s.fn.init.call(this,e);this.element=this.dialog().element;this.property=e.property;this.options.title=e.title;this.viewModel=o.observable({apply:this.apply.bind(this),close:this.close.bind(this)});o.bind(this.element.find(".k-action-buttons"),this.viewModel)},options:{template:"<div></div>"+"<div class='k-action-buttons'>"+"<button class='k-button k-primary' data-bind='click: apply'>#: messages.apply #</button>"+"<button class='k-button' data-bind='click: close'>#: messages.cancel #</button>"+"</div>"},apply:function(){s.fn.apply.call(this);this.trigger("action",{command:"PropertyChangeCommand",options:{property:this.property,value:this.value()}})},value:function(e){if(e===undefined){return this._value}else{this._value=e.value}}});var g=m.extend({init:function(e){e.width=177;m.fn.init.call(this,e);this._colorPalette()},_colorPalette:function(){var e=this.dialog().element.find("div:first");this.colorPalette=e.kendoColorPalette({palette:["#ffffff","#000000","#d6ecff","#4e5b6f","#7fd13b","#ea157a","#feb80a","#00addc","#738ac8","#1ab39f","#f2f2f2","#7f7f7f","#a7d6ff","#d9dde4","#e5f5d7","#fad0e4","#fef0cd","#c5f2ff","#e2e7f4","#c9f7f1","#d8d8d8","#595959","#60b5ff","#b3bcca","#cbecb0","#f6a1c9","#fee29c","#8be6ff","#c7d0e9","#94efe3","#bfbfbf","#3f3f3f","#007dea","#8d9baf","#b2e389","#f272af","#fed46b","#51d9ff","#aab8de","#5fe7d5","#a5a5a5","#262626","#003e75","#3a4453","#5ea226","#af0f5b","#c58c00","#0081a5","#425ea9","#138677","#7f7f7f","#0c0c0c","#00192e","#272d37","#3f6c19","#750a3d","#835d00","#00566e","#2c3f71","#0c594f"],change:this.value.bind(this)}).data("kendoColorPalette")}});o.spreadsheet.dialogs.register("colorPicker",g);var _=m.extend({init:function(e){e.width=268;m.fn.init.call(this,e);this.dialog().setOptions({animation:false});this.dialog().one("activate",this._colorPicker.bind(this))},_colorPicker:function(){var e=this.dialog().element.find("div:first");this.colorPicker=e.kendoFlatColorPicker({change:this.value.bind(this)}).data("kendoFlatColorPicker")}});o.spreadsheet.dialogs.register("customColor",_);var b=s.extend({init:function(e){var t=o.spreadsheet.messages.dialogs.alignmentDialog||n;var i={title:t.title,buttons:[{property:"textAlign",value:"left",iconClass:"align-left",text:t.buttons.justtifyLeft},{property:"textAlign",value:"center",iconClass:"align-center",text:t.buttons.justifyCenter},{property:"textAlign",value:"right",iconClass:"align-right",text:t.buttons.justifyRight},{property:"textAlign",value:"justify",iconClass:"align-justify",text:t.buttons.justifyFull},{property:"verticalAlign",value:"top",iconClass:"align-top",text:t.buttons.alignTop},{property:"verticalAlign",value:"center",iconClass:"align-middle",text:t.buttons.alignMiddle},{property:"verticalAlign",value:"bottom",iconClass:"align-bottom",text:t.buttons.alignBottom}]};s.fn.init.call(this,a.extend(i,e));this._list()},options:{template:"<ul class='k-list k-reset'></ul>"},_list:function(){var e=this.dialog().element.find("ul");this.list=new o.ui.StaticList(e,{dataSource:new o.data.DataSource({data:this.options.buttons}),template:"<a role='button' title='#=text#' data-property='#=property#' data-value='#=value#'>"+"<span class='k-icon k-i-#=iconClass#'></span>"+"#=text#"+"</a>",change:this.apply.bind(this)});this.list.dataSource.fetch()},apply:function(e){var t=e.sender.value()[0];s.fn.apply.call(this);this.trigger("action",{command:"PropertyChangeCommand",options:{property:t.property,value:t.value}})}});o.spreadsheet.dialogs.register("alignment",b);var w=s.extend({init:function(e){var t=o.spreadsheet.messages.dialogs.mergeDialog||n;var i={title:t.title,buttons:[{value:"cells",iconClass:"cells-merge",text:t.buttons.mergeCells},{value:"horizontally",iconClass:"cells-merge-horizontally",text:t.buttons.mergeHorizontally},{value:"vertically",iconClass:"cells-merge-vertically",text:t.buttons.mergeVertically},{value:"unmerge",iconClass:"table-unmerge",text:t.buttons.unmerge}]};s.fn.init.call(this,a.extend(i,e));this._list()},options:{template:"<ul class='k-list k-reset'></ul>"},_list:function(){var e=this.dialog().element.find("ul");this.list=new o.ui.StaticList(e,{dataSource:new o.data.DataSource({data:this.options.buttons}),template:"<a role='button' title='#=text#' data-value='#=value#'>"+"<span class='k-icon k-icon k-i-#=iconClass#'></span>#=text#"+"</a>",change:this.apply.bind(this)});this.list.dataSource.fetch()},apply:function(e){var t=e.sender.value()[0];s.fn.apply.call(this);this.trigger("action",{command:"MergeCellCommand",options:{value:t.value}})}});o.spreadsheet.dialogs.register("merge",w);var k=s.extend({init:function(e){var t=o.spreadsheet.messages.dialogs.freezeDialog||n;var i={title:t.title,buttons:[{value:"panes",iconClass:"pane-freeze",text:t.buttons.freezePanes},{value:"rows",iconClass:"row-freeze",text:t.buttons.freezeRows},{value:"columns",iconClass:"column-freeze",text:t.buttons.freezeColumns},{value:"unfreeze",iconClass:"table-unmerge",text:t.buttons.unfreeze}]};s.fn.init.call(this,a.extend(i,e));this._list()},options:{template:"<ul class='k-list k-reset'></ul>"},_list:function(){var e=this.dialog().element.find("ul");this.list=new o.ui.StaticList(e,{dataSource:new o.data.DataSource({data:this.options.buttons}),template:"<a role='button' title='#=text#' data-value='#=value#'>"+"<span class='k-icon k-icon k-i-#=iconClass#'></span>#=text#"+"</a>",change:this.apply.bind(this)});this.list.dataSource.fetch()},apply:function(e){var t=e.sender.value()[0];s.fn.apply.call(this);this.trigger("action",{command:"FreezePanesCommand",options:{value:t.value}})}});o.spreadsheet.dialogs.register("freeze",k);var y=o.spreadsheet.ValidationCellsViewModel=t.extend({init:function(e){t.fn.init.call(this,e);this.bind("change",function(e){if(e.field==="criterion"){this.reset();if(this.criterion==="custom"||this.criterion==="list"){this.setHintMessageTemplate()}}if(e.field==="comparer"){this.setHintMessageTemplate()}if((e.field=="hintMessage"||e.field=="hintTitle")&&!this._mute){this.shouldBuild=false}if((e.field=="from"||e.field=="to"||e.field=="hintMessageTemplate"||e.field=="type")&&this.shouldBuild){this.buildMessages()}}.bind(this));this.reset()},buildMessages:function(){this._mute=true;this.set("hintTitle",this.hintTitleTemplate?o.format(this.hintTitleTemplate,this.type):"");this.set("hintMessage",this.hintMessageTemplate?o.format(this.hintMessageTemplate,this.from,this.to):"");this._mute=false},reset:function(){this.setComparers();this.set("comparer",this.comparers[0].type);this.set("from",null);this.set("to",null);this.set("useCustomMessages",false);this.shouldBuild=true;this.hintTitleTemplate=this.defaultHintTitle;this.buildMessages()},setComparers:function(){var e=this.defaultComparers;var t=[];if(this.criterion==="text"){var i=["equalTo","notEqualTo"];for(var n=0;n<e.length;n++){if(i[0]==e[n].type){t.push(e[n]);i.shift()}}}else{t=e.slice()}this.set("comparers",t)},setHintMessageTemplate:function(){if(this.criterion!=="custom"&&this.criterion!=="list"){this.set("hintMessageTemplate",o.format(this.defaultHintMessage,this.criterion,this.comparerMessages[this.comparer]))}else{this.set("hintMessageTemplate","");this.set("hintMessage","")}},isAny:function(){return this.get("criterion")==="any"},isNumber:function(){return this.get("criterion")==="number"},showToForNumber:function(){return this.showTo()&&this.isNumber()},showToForDate:function(){return this.showTo()&&this.isDate()},isText:function(){return this.get("criterion")==="text"},isDate:function(){return this.get("criterion")==="date"},isList:function(){return this.get("criterion")==="list"},isCustom:function(){return this.get("criterion")==="custom"},showRemove:function(){return this.get("hasValidation")},showTo:function(){return this.get("comparer")=="between"||this.get("comparer")=="notBetween"},update:function(e){this.set("hasValidation",!!e);if(e){this.fromValidationObject(e)}},fromValidationObject:function(e){this.set("criterion",e.dataType);this.set("comparer",e.comparerType);this.set("from",e.from);this.set("to",e.to);this.set("type",e.type);this.set("ignoreBlank",e.allowNulls);this.set("showButton",e.showButton);if(e.messageTemplate||e.titleTemplate){this.hintMessageTemplate=e.messageTemplate;this.hintMessage=e.messageTemplate;this.hintTitleTemplate=e.titleTemplate;this.hintTitle=e.titleTemplate;this.useCustomMessages=true;this.buildMessages()}else{this.useCustomMessages=false}},toValidationObject:function(){if(this.criterion==="any"){return null}var e={type:this.type,dataType:this.criterion,comparerType:this.comparer,from:this.from,to:this.to,allowNulls:this.ignoreBlank,showButton:this.showButton};if(this.useCustomMessages){e.messageTemplate=this.shouldBuild?this.hintMessageTemplate:this.hintMessage;e.titleTemplate=this.hintTitle}return e}});var x=s.extend({init:function(e){var t=o.spreadsheet.messages.dialogs.validationDialog||n;var i={title:t.title,hintMessage:t.hintMessage,hintTitle:t.hintTitle,criteria:[{type:"any",name:t.criteria.any},{type:"number",name:t.criteria.number},{type:"text",name:t.criteria.text},{type:"date",name:t.criteria.date},{type:"custom",name:t.criteria.custom},{type:"list",name:t.criteria.list}],comparers:[{type:"greaterThan",name:t.comparers.greaterThan},{type:"lessThan",name:t.comparers.lessThan},{type:"between",name:t.comparers.between},{type:"notBetween",name:t.comparers.notBetween},{type:"equalTo",name:t.comparers.equalTo},{type:"notEqualTo",name:t.comparers.notEqualTo},{type:"greaterThanOrEqualTo",name:t.comparers.greaterThanOrEqualTo},{type:"lessThanOrEqualTo",name:t.comparers.lessThanOrEqualTo}],comparerMessages:t.comparerMessages};s.fn.init.call(this,a.extend(i,e))},options:{width:450,criterion:"any",type:"reject",ignoreBlank:true,showButton:true,useCustomMessages:false,errorTemplate:'<div class="k-widget widget2021 k-tooltip k-tooltip-validation" style="margin:0.5em"><span class="k-icon k-i-warning"> </span>'+'#= message #<div class="k-callout k-callout-n"></div></div>',template:'<div class="k-edit-form-container">'+'<div class="k-edit-label"><label>#: messages.validationDialog.labels.criteria #:</label></div>'+'<div class="k-edit-field">'+'<select data-role="dropdownlist" '+'title="#: messages.validationDialog.labels.criteria #"'+'data-text-field="name" '+'data-value-field="type" '+'data-bind="value: criterion, source: criteria"></select>'+"</div>"+'<div data-bind="visible: isNumber">'+'<div class="k-edit-label"><label>#: messages.validationDialog.labels.comparer #:</label></div>'+'<div class="k-edit-field">'+'<select data-role="dropdownlist" '+'title="#: messages.validationDialog.labels.comparer #"'+'data-text-field="name" '+'data-value-field="type" '+'data-bind="value: comparer, source: comparers"></select>'+"</div>"+'<div class="k-edit-label"><label>#: messages.validationDialog.labels.min #:</label></div>'+'<div class="k-edit-field">'+'<input name="#: messages.validationDialog.labels.min #" title="#: messages.validationDialog.labels.min #" placeholder="e.g. 10" class="k-textbox" data-bind="value: from, enabled: isNumber" required="required" />'+"</div>"+'<div data-bind="visible: showTo">'+'<div class="k-edit-label"><label>#: messages.validationDialog.labels.max #:</label></div>'+'<div class="k-edit-field">'+'<input name="#: messages.validationDialog.labels.max #" title="#: messages.validationDialog.labels.max #" placeholder="e.g. 100" class="k-textbox" data-bind="value: to, enabled: showToForNumber" required="required" />'+"</div>"+"</div>"+"</div>"+'<div data-bind="visible: isText">'+'<div class="k-edit-label"><label>#: messages.validationDialog.labels.comparer #:</label></div>'+'<div class="k-edit-field">'+'<select data-role="dropdownlist" '+'title="#: messages.validationDialog.labels.comparer #"'+'data-text-field="name" '+'data-value-field="type" '+'data-bind="value: comparer, source: comparers"></select>'+"</div>"+'<div class="k-edit-label"><label>#: messages.validationDialog.labels.value #:</label></div>'+'<div class="k-edit-field">'+'<input name="#: messages.validationDialog.labels.value #" title="#: messages.validationDialog.labels.value #" class="k-textbox" data-bind="value: from, enabled: isText" required="required" />'+"</div>"+"</div>"+'<div data-bind="visible: isDate">'+'<div class="k-edit-label"><label>#: messages.validationDialog.labels.comparer #:</label></div>'+'<div class="k-edit-field">'+'<select data-role="dropdownlist" '+'title="#: messages.validationDialog.labels.comparer #"'+'data-text-field="name" '+'data-value-field="type" '+'data-bind="value: comparer, source: comparers"></select>'+"</div>"+'<div class="k-edit-label"><label>#: messages.validationDialog.labels.start #:</label></div>'+'<div class="k-edit-field">'+'<input name="#: messages.validationDialog.labels.start #" title="#: messages.validationDialog.labels.start #" class="k-textbox" data-bind="value: from, enabled: isDate" required="required" />'+"</div>"+'<div data-bind="visible: showTo">'+'<div class="k-edit-label"><label>#: messages.validationDialog.labels.end #:</label></div>'+'<div class="k-edit-field">'+'<input name="#: messages.validationDialog.labels.end #" title="#: messages.validationDialog.labels.end #" class="k-textbox" data-bind="value: to, enabled: showToForDate" required="required" />'+"</div>"+"</div>"+"</div>"+'<div data-bind="visible: isCustom">'+'<div class="k-edit-label"><label>#: messages.validationDialog.labels.value #:</label></div>'+'<div class="k-edit-field">'+'<input name="#: messages.validationDialog.labels.value #" title="#: messages.validationDialog.labels.value #" class="k-textbox" data-bind="value: from, enabled: isCustom" required="required" />'+"</div>"+"</div>"+'<div data-bind="visible: isList">'+'<div class="k-edit-label"><label>#: messages.validationDialog.labels.value #:</label></div>'+'<div class="k-edit-field">'+'<input name="#: messages.validationDialog.labels.value #" title="#: messages.validationDialog.labels.value #" class="k-textbox" data-bind="value: from, enabled: isList" required="required" />'+"</div>"+"</div>"+'<div data-bind="visible: isList">'+'<div class="k-edit-field">'+'<input type="checkbox" name="showButton" id="listShowButton" class="k-checkbox" data-bind="checked: showButton"/>'+'<label for="listShowButton" class="k-checkbox-label">'+" #: messages.validationDialog.labels.showListButton #"+"</label>"+"</div>"+"</div>"+'<div data-bind="visible: isDate">'+'<div class="k-edit-field">'+'<input type="checkbox" name="showButton" id="dateShowButton" class="k-checkbox" data-bind="checked: showButton"/>'+'<label for="dateShowButton" class="k-checkbox-label">'+" #: messages.validationDialog.labels.showCalendarButton #"+"</label>"+"</div>"+"</div>"+'<div data-bind="invisible: isAny">'+'<div class="k-edit-field">'+'<input type="checkbox" title="#: messages.validationDialog.labels.ignoreBlank #" name="ignoreBlank" id="ignoreBlank" class="k-checkbox" data-bind="checked: ignoreBlank"/>'+'<label for="ignoreBlank" class="k-checkbox-label">'+" #: messages.validationDialog.labels.ignoreBlank #"+"</label>"+"</div>"+"</div>"+'<div data-bind="invisible: isAny">'+'<div class="k-hr"></div>'+'<div class="k-edit-label"><label>#: messages.validationDialog.labels.onInvalidData #:</label></div>'+'<div class="k-edit-field">'+'<input type="radio" title="#: messages.validationDialog.labels.rejectInput #" id="validationTypeReject" name="validationType" value="reject" data-bind="checked: type" class="k-radio" />'+'<label for="validationTypeReject" class="k-radio-label">'+"#: messages.validationDialog.labels.rejectInput #"+"</label> "+'<input type="radio" title="#: messages.validationDialog.labels.showWarning #" id="validationTypeWarning"  name="validationType" value="warning" data-bind="checked: type" class="k-radio" />'+'<label for="validationTypeWarning" class="k-radio-label">'+"#: messages.validationDialog.labels.showWarning #"+"</label>"+"</div>"+"</div>"+'<div data-bind="invisible: isAny" class="hint-wrapper">'+'<div class="k-edit-field">'+'<input type="checkbox" title="#: messages.validationDialog.labels.showHint #" name="useCustomMessages" id="useCustomMessages" class="k-checkbox" data-bind="checked: useCustomMessages" />'+'<label class="k-checkbox-label" for="useCustomMessages">'+" #: messages.validationDialog.labels.showHint #"+"</label>"+"</div>"+'<div data-bind="visible: useCustomMessages">'+'<div class="k-edit-label"><label>#: messages.validationDialog.labels.hintTitle #:</label></div>'+'<div class="k-edit-field">'+'<input class="k-textbox" title="#: messages.validationDialog.labels.hintTitle #" placeholder="#: messages.validationDialog.placeholders.typeTitle #" data-bind="value: hintTitle" />'+"</div>"+'<div class="k-edit-label"><label>#: messages.validationDialog.labels.hintMessage #:</label></div>'+'<div class="k-edit-field">'+'<input class="k-textbox" title="#: messages.validationDialog.labels.hintMessage #" placeholder="#: messages.validationDialog.placeholders.typeMessage #" data-bind="value: hintMessage" />'+"</div>"+"</div>"+"</div>"+'<div class="k-action-buttons">'+'<button class="k-button" data-bind="visible: showRemove, click: remove">#: messages.remove #</button>'+'<button class="k-button k-primary" data-bind="click: apply">#: messages.apply #</button>'+'<button class="k-button" data-bind="click: close">#: messages.cancel #</button>'+"</div>"+"</div>"},open:function(e){var t=this.options;var i;this.viewModel=new y({type:t.type,defaultHintMessage:t.hintMessage,defaultHintTitle:t.hintTitle,defaultComparers:t.comparers.slice(0),comparerMessages:t.comparerMessages,criteria:t.criteria.slice(0),criterion:t.criterion,ignoreBlank:t.ignoreBlank,showButton:t.showButton,apply:this.apply.bind(this),close:this.close.bind(this),remove:this.remove.bind(this)});this.viewModel.update(e.validation());s.fn.open.call(this);i=this.dialog().element;if(this.validatable){this.validatable.destroy()}o.bind(i,this.viewModel);this.validatable=new o.ui.Validator(i.find(".k-edit-form-container"),{validateOnBlur:false,errorTemplate:this.options.errorTemplate||undefined})},apply:function(){if(this.validatable.validate()){s.fn.apply.call(this);this.trigger("action",{command:"EditValidationCommand",options:{value:this.viewModel.toValidationObject()}})}},remove:function(){this.viewModel.set("criterion","any");this.apply()}});o.spreadsheet.dialogs.register("validation",x);o.spreadsheet.dialogs.ValidationDialog=x;function C(e){return{value:e,text:F("exportAsDialog.pdf.paper."+e)}}var S=s.extend({init:function(e){s.fn.init.call(this,e);e=this.options;this.viewModel=o.observable({title:e.title,name:e.name,extension:e.extension,fileFormats:e.fileFormats,excel:e.excelExport,pdf:{proxyURL:e.pdfExport.proxyURL,forceProxy:e.pdfExport.forceProxy,title:e.pdfExport.title,author:e.pdfExport.author,autoPrint:e.pdfExport.autoPrint,subject:e.pdfExport.subject,keywords:e.pdfExport.keywords,creator:e.pdfExport.creator,date:e.pdfExport.date,fitWidth:e.pdf.fitWidth,area:e.pdf.area,areas:e.pdf.areas,paperSize:e.pdf.paperSize,paperSizes:e.pdf.paperSizes,margin:e.pdf.margin,margins:e.pdf.margins,landscape:e.pdf.landscape,guidelines:e.pdf.guidelines,hCenter:e.pdf.hCenter,vCenter:e.pdf.vCenter},apply:this.apply.bind(this),close:this.close.bind(this)});var t=this.dialog();this.viewModel.bind("change",function(e){if(e.field==="extension"){this.set("showPdfOptions",this.extension===".pdf"?true:false);t.center()}});o.bind(t.element,this.viewModel)},options:{title:F("exportAsDialog.title","Export..."),name:F("exportAsDialog.defaultFileName","Workbook"),extension:".xlsx",fileFormats:[{description:F("exportAsDialog.xlsx.description","Excel Workbook (.xlsx)"),extension:".xlsx"},{description:F("exportAsDialog.pdf.description","Portable Document Format (.pdf)"),extension:".pdf"}],pdf:{fitWidth:true,area:"workbook",areas:[{area:"workbook",text:F("exportAsDialog.pdf.area.workbook","Entire Workbook")},{area:"sheet",text:F("exportAsDialog.pdf.area.sheet","Active Sheet")},{area:"selection",text:F("exportAsDialog.pdf.area.selection","Selection")}],paperSize:"a4",paperSizes:["a2","a3","a4","a5","b3","b4","b5","folio","legal","letter","tabloid","executive"].map(C),margin:{bottom:"0.75in",left:"0.7in",right:"0.7in",top:"0.75in"},margins:[{value:{bottom:"0.75in",left:"0.7in",right:"0.7in",top:"0.75in"},text:F("exportAsDialog.pdf.margin.normal","Normal")},{value:{bottom:"0.75in",left:"0.25in",right:"0.25in",top:"0.75in"},text:F("exportAsDialog.pdf.margin.narrow","Narrow")},{value:{bottom:"1in",left:"1in",right:"1in",top:"1in"},text:F("exportAsDialog.pdf.margin.wide","Wide")}],landscape:true,guidelines:true,hCenter:true,vCenter:true},width:520,template:"<div class='k-edit-label'><label>#: messages.exportAsDialog.labels.fileName #:</label></div>"+"<div class='k-edit-field'>"+"<input class='k-textbox' data-bind='value: name' />"+"</div>"+"<div >"+"<div class='k-edit-label'><label>#: messages.exportAsDialog.labels.saveAsType #:</label></div>"+"<div class='k-edit-field'>"+"<select data-role='dropdownlist' class='k-file-format' "+"data-text-field='description' "+"data-value-field='extension' "+"data-bind='value: extension, source: fileFormats'></select>"+"</div>"+"</div>"+"<div class='k-export-config' data-bind='visible: showPdfOptions'>"+"<hr class='k-hr' />"+"<div class='k-edit-label'><label>#: messages.exportAsDialog.labels.exportArea #:</label></div>"+"<div class='k-edit-field'>"+"<select data-role='dropdownlist' class='k-file-format' "+"data-text-field='text' "+"data-value-field='area' "+"data-bind='value: pdf.area, source: pdf.areas'></select>"+"</div>"+"<div class='k-edit-label'><label>#: messages.exportAsDialog.labels.paperSize#:</label></div>"+"<div class='k-edit-field'>"+"<select data-role='dropdownlist' class='k-file-format' "+"data-text-field='text' "+"data-value-field='value' "+"data-bind='value: pdf.paperSize, source: pdf.paperSizes'></select>"+"</div>"+"<div class='k-edit-label'><label>#: messages.exportAsDialog.labels.margins #:</label></div>"+"<div class='k-edit-field'>"+"<select data-role='dropdownlist' class='k-file-format' "+"data-value-primitive='true'"+"data-text-field='text' "+"data-value-field='value' "+"data-bind='value: pdf.margin, source: pdf.margins'></select>"+"</div>"+"<div class='k-edit-label'><label>#: messages.exportAsDialog.labels.orientation #:</label></div>"+"<div class='k-edit-field'>"+"<div class='k-button-group'>"+"<input type='radio' id='k-orientation-portrait' name='orientation' data-type='boolean' data-bind='checked: pdf.landscape' value='false' />"+"<label class='k-button k-button-icon k-group-start k-orientation-button' for='k-orientation-portrait'><span class='k-icon k-i-page-portrait'></span></label>"+"<input type='radio' id='k-orientation-landscape' name='orientation' data-type='boolean' data-bind='checked: pdf.landscape' value='true' />"+"<label class='k-button k-button-icon k-group-end k-orientation-button' for='k-orientation-landscape'><span class='k-icon k-i-page-landscape'></span></label>"+"</div>"+"</div>"+"<div class='k-edit-label'><label>#: messages.exportAsDialog.labels.print #:</label></div>"+"<div class='k-edit-field'>"+"<input class='k-checkbox' id='guidelines' type='checkbox' data-bind='checked: pdf.guidelines'/><label class='k-checkbox-label' for='guidelines'>#: messages.exportAsDialog.labels.guidelines#</label>"+"</div>"+"<div class='k-edit-label'><label>#: messages.exportAsDialog.labels.scale #:</label></div>"+"<div class='k-edit-field'>"+"<input class='k-checkbox' id='fitWidth' type='checkbox' data-bind='checked: pdf.fitWidth'/><label class='k-checkbox-label' for='fitWidth'>#: messages.exportAsDialog.labels.fit #</label>"+"</div>"+"<div class='k-edit-label'><label>#: messages.exportAsDialog.labels.center #:</label></div>"+"<div class='k-edit-field'>"+"<input class='k-checkbox' id='hCenter' type='checkbox' data-bind='checked: pdf.hCenter'/><label class='k-checkbox-label' for='hCenter'>#: messages.exportAsDialog.labels.horizontally #</label>"+"<input class='k-checkbox' id='vCenter' type='checkbox' data-bind='checked: pdf.vCenter'/><label class='k-checkbox-label' for='vCenter'>#: messages.exportAsDialog.labels.vertically #</label>"+"</div>"+"<div class='k-page-orientation'>"+"<span class='k-icon k-i-page-portrait' data-bind='invisible: pdf.landscape'></span>"+"<span class='k-icon k-i-page-landscape' data-bind='visible: pdf.landscape'></span>"+"</div>"+"</div>"+"<div class='k-action-buttons'>"+"<button class='k-button k-primary' data-bind='click: apply'>#: messages.save #</button>"+"<button class='k-button' data-bind='click: close'>#: messages.cancel #</button>"+"</div>"},apply:function(){s.fn.apply.call(this);this.trigger("action",{command:"SaveAsCommand",options:this.viewModel})}});o.spreadsheet.dialogs.register("exportAs",S);function T(e,t){o.spreadsheet.dialogs.register(e,c.extend({options:{messageId:t}}))}T("modifyMerged","modifyMergedDialog.errorMessage");T("rangeDisabled","rangeDisabledDialog.errorMessage");T("intersectsArray","intersectsArrayDialog.errorMessage");T("overflow","overflowDialog.errorMessage");T("unsupportedSelection","unsupportedSelectionDialog.errorMessage");T("incompatibleRanges","incompatibleRangesDialog.errorMessage");T("noFillDirection","noFillDirectionDialog.errorMessage");T("duplicateSheetName","duplicateSheetNameDialog.errorMessage");var D=c.extend({options:{width:640,title:"Errors in import",template:"<div class='k-spreadsheet-message-content k-spreadsheet-import-errors'>"+"<div class='k--header-message'>We encountered #= errors.length # errors while reading this file.  Please be aware that some formulas might be missing, or contain invalid results.</div>"+"<div class='k--errors'>"+"<table>"+"<thead>"+"<tr><th>Context</th><th>Error message</th></tr>"+"</thead>"+"# for (var i = 0; i < errors.length; ++i) { #"+"# var err = errors[i]; #"+"<tr><td>#: err.context #</td><td>#: err.error #</td></tr>"+"# } #"+"</table>"+"</div>"+"</div>"+"<div class='k-action-buttons'>"+"<button class='k-button k-primary' data-bind='click: close'>"+"#: messages.okText #"+"</button>"+"</div>"}});o.spreadsheet.dialogs.register("importError",D);var A=c.extend({options:{title:F("useKeyboardDialog.title","Copying and pasting"),template:"#: messages.useKeyboardDialog.errorMessage #"+"<div>Ctrl+C #: messages.useKeyboardDialog.labels.forCopy #</div>"+"<div>Ctrl+X #: messages.useKeyboardDialog.labels.forCut #</div>"+"<div>Ctrl+V #: messages.useKeyboardDialog.labels.forPaste #</div>"+'<div class="k-action-buttons">'+"<button class='k-button k-primary' data-bind='click: close'>"+"#= messages.okText #"+"</button>"+"</div>"}});o.spreadsheet.dialogs.register("useKeyboard",A);var E=s.extend({options:{title:F("linkDialog.title","Hyperlink"),template:"<div class='k-edit-label'><label>#: messages.linkDialog.labels.url #:</label></div>"+"<div class='k-edit-field'><input class='k-textbox' data-bind='value: url' title='#: messages.linkDialog.labels.url #' /></div>"+"<div class='k-action-buttons'>"+("<button class='k-button k-left' data-bind='click: remove'>#= messages.linkDialog.labels.removeLink #</button>"+"<button class='k-button k-primary' data-bind='click: apply'>#= messages.okText #</button>"+"<button class='k-button' data-bind='click: cancel'>#= messages.cancel #</button>")+"</div>",autoFocus:false},open:function(e){var t=this;s.fn.open.apply(t,arguments);var i=t.dialog().element;var n=o.observable({url:e.link(),apply:function(){if(!/\S/.test(n.url)){n.url=null}t.trigger("action",{command:"HyperlinkCommand",options:{link:n.url}});t.close()},remove:function(){n.url=null;n.apply()},cancel:t.close.bind(t)});o.bind(i,n);i.find("input").focus().on("keydown",function(e){if(e.keyCode==13){n.url=a(this).val();e.stopPropagation();e.preventDefault();n.apply()}else if(e.keyCode==27){e.stopPropagation();e.preventDefault();n.cancel()}})}});o.spreadsheet.dialogs.register("hyperlink",E);var I=s.extend({options:{className:"k-spreadsheet-insert-comment",template:"<div class='k-edit-label'><label>#: messages.insertCommentDialog.labels.comment #:</label></div><div class='k-edit-field'><textarea rows='5' class='k-textbox' data-bind='value: comment'></textarea></div><div class='k-action-buttons'>  <button class='k-button k-left' data-bind='click: remove'>#: messages.insertCommentDialog.labels.removeComment #</button>  <button class='k-button k-primary' data-bind='click: apply'>#: messages.okText #</button>  <button class='k-button' data-bind='click: cancel'>#= messages.cancel #</button></div>",title:F("insertCommentDialog.title","Insert comment"),autoFocus:false,width:450},open:function(e){var t=this;s.fn.open.apply(t,arguments);var i=t.dialog().element;var n=o.observable({comment:e.comment(),apply:function(){if(!/\S/.test(n.comment)){n.comment=null}t.trigger("action",{command:"InsertCommentCommand",options:{value:n.comment}});t.close()},remove:function(){n.comment=null;n.apply()},cancel:t.close.bind(t)});o.bind(i,n);i.find("textarea").focus()}});o.spreadsheet.dialogs.register("insertComment",I);var M=s.extend({options:{template:"<div class='k-spreadsheet-insert-image-dialog'>  <label data-bind='style: { background-image: imageUrl },                    css: { k-spreadsheet-has-image: hasImage, k-state-hovered: isHovered },                    events: { dragenter: dragEnter, dragover: stopEvent, dragleave: dragLeave, drop: drop }'>    <div data-bind='text: info'></div>    <input type='file' data-bind='events: { change: change }'           accept='image/png, image/jpeg, image/gif' />  </label></div><div class='k-action-buttons'>  <button class='k-button k-primary' data-bind='enabled: okEnabled, click: apply'>#: messages.okText #</button>  <button class='k-button' data-bind='click: cancel'>#= messages.cancel #</button></div>",title:F("insertImageDialog.title","Insert image"),width:"auto"},open:function(){var e=this;s.fn.open.apply(e,arguments);var t=e.dialog().element;var r=o.observable({okEnabled:false,info:o.spreadsheet.messages.dialogs.insertImageDialog.info,imageUrl:"",hasImage:false,isHovered:false,_url:null,_image:null,apply:function(){window.URL.revokeObjectURL(r._url);e.trigger("action",{command:"InsertImageCommand",options:{blob:r._image,width:r._width,height:r._height}});e.close()},cancel:e.close.bind(e),stopEvent:function(e){e.stopPropagation();e.preventDefault()},drop:function(e){r.stopEvent(e);r.selectFile(e.originalEvent.dataTransfer.files);r.set("isHovered",false)},dragEnter:function(e){r.stopEvent(e);r.set("isHovered",true)},dragLeave:function(e){r.stopEvent(e);r.set("isHovered",false)},change:function(e){r.selectFile(e.target.files)},selectFile:function(e){var t;for(var i=0;i<e.length;++i){if(/^image\//i.test(e[i].type)){t=e[i];break}}if(r._url){window.URL.revokeObjectURL(r._url)}if(t){r._image=t;r._url=window.URL.createObjectURL(t);var n=new Image;n.src=r._url;n.onload=function(){r._width=n.width;r._height=n.height;r.set("info",o.spreadsheet.messages.dialogs.insertImageDialog.info);r.set("okEnabled",true);r.set("imageUrl","url('"+r._url+"')");r.set("hasImage",true)}}else{r._image=null;r.set("info",o.spreadsheet.messages.dialogs.insertImageDialog.typeError);r.set("okEnabled",false);r.set("imageUrl","");r.set("hasImage",false)}}});o.bind(t,r)}});o.spreadsheet.dialogs.register("insertImage",M);function R(e,t){this.path=e.split(".");this.def=t}R.prototype.trans=function(){var e=o.spreadsheet.messages.dialogs;for(var t=0;t<this.path.length;++t){e=e[this.path[t]];if(!e){return this.def}}return e};function F(e,t){return new R(e,t)}function P(i){if(i instanceof R){return i.trans()}else if(Array.isArray(i)){return i.map(P)}else if(i!=null&&typeof i=="object"){return Object.keys(i).reduce(function(e,t){e[t]=P(i[t]);return e},{})}return i}})(window.kendo)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/sheetbinder",["kendo.core","kendo.data","spreadsheet/sheet"],e)})(function(){(function(n){var r=function(e){return e};var e=n.Class.extend({init:function(e){this.options=n.jQuery.extend({},this.options,e);this.columns=this._normalizeColumns(this.options.columns);this._sheet();this._dataSource();this._header();this._boundRowsCount=0;this.dataSource.fetch()},_sheet:function(){this.sheet=this.options.sheet;this._sheetChangeHandler=this._sheetChange.bind(this);this._sheetDeleteRowHandler=this._sheetDeleteRow.bind(this);this._sheetInsertRowHandler=this._sheetInsertRow.bind(this);this.sheet.bind("change",this._sheetChangeHandler).bind("afterDeleteRow",this._sheetDeleteRowHandler).bind("afterInsertRow",this._sheetInsertRowHandler)},_sheetInsertRow:function(e){if(e.index!==undefined){this.dataSource.insert(Math.max(e.index-1,0),{})}},_sheetDeleteRow:function(e){if(e.index!==undefined){var t=this.dataSource;var i=t.view()[e.index-1];if(i){t.remove(i)}}},_header:function(){this.sheet.batch(function(){this.columns.forEach(function(e,t){this.sheet.range(0,t).value(e.title)}.bind(this))}.bind(this))},_sheetChange:function(e){if(e.insertRow||e.deleteRow){return}if(e.recalc&&e.ref){var o=this.dataSource;var s=o.view();var l=this.columns;var i;if(o.reader.model){i=o.reader.model.fields}if(!l.length&&s.length){l=Object.keys(s[0].toJSON())}var d=l.map(function(e){var t=e.field;if(t&&i&&i[t]&&i[t].type=="date"){return n.spreadsheet.numberToDate}return r});this._skipRebind=true;var t=this.sheet._grid.normalize(e.ref);var u=this.sheet.range(t).values();t.forEach(function(e){e=e.toRangeRef();var t;var i=0;for(var n=e.topLeft.row;n<=e.bottomRight.row;n++){t=s[n-1];if(!t){t=o.insert(n-1,{});s=o.view()}var r=0;for(var a=e.topLeft.col;a<=e.bottomRight.col&&a<l.length;a++){t.set(l[a].field,d[a](u[i][r++]))}i++}});this._boundRowsCount=o.view().length;this._skipRebind=false}},_normalizeColumns:function(e){return e.map(function(e){var t=e.field||e;return{field:t,title:e.title||t}})},_dataSource:function(){var e=this.options;var t=e.dataSource;t=Array.isArray(t)?{data:t}:t;if(this.dataSource&&this._changeHandler){this.dataSource.unbind("change",this._changeHandler)}else{this._changeHandler=this._change.bind(this)}this.dataSource=n.data.DataSource.create(t).bind("change",this._changeHandler)},_change:function(){if(this._skipRebind){return}if(this.sheet.trigger("dataBinding")){return}var r=this.dataSource.view();var e=this.columns;if(!e.length&&r.length){this.columns=e=this._normalizeColumns(Object.keys(r[0].toJSON()));this._header()}var a=e.map(function(e){return n.getter(e.field)});this.sheet.batch(function(){var e=Math.max(r.length,this._boundRowsCount,this.sheet._grid.rowCount-1);for(var t=0;t<e;t++){for(var i=0;i<a.length;i++){var n=r[t]?a[i](r[t]):null;this.sheet.range(t+1,i).value(n)}}}.bind(this));this._boundRowsCount=r.length;this.sheet.trigger("dataBound")},destroy:function(){this.dataSource.unbind("change",this._changeHandler);this.sheet.unbind("change",this._sheetChangeHandler).unbind("deleteRow",this._sheetDeleteRowHandler).unbind("insertRow",this._sheetInsertRowHandler)},options:{columns:[]}});n.spreadsheet.SheetDataSourceBinder=e})(kendo)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/filtermenu",["kendo.core","kendo.popup","kendo.treeview","kendo.numerictextbox","kendo.datepicker","kendo.datetimepicker"],e)})(function(){(function(f){var o=f.jQuery;var n=f.ui.Widget;var e={details:"k-details",button:"k-button",detailsSummary:"k-details-summary",detailsContent:"k-details-content",icon:"k-icon",iconCollapse:"k-i-arrow-45-down-right",iconExpand:"k-i-arrow-60-right",iconSearch:"k-i-zoom",textbox:"k-textbox",wrapper:"k-spreadsheet-filter-menu",filterByCondition:"k-spreadsheet-condition-filter",filterByValue:"k-spreadsheet-value-filter",valuesTreeViewWrapper:"k-spreadsheet-value-treeview-wrapper",actionButtons:"k-action-buttons"};f.spreadsheet.messages.filterMenu={all:"All",sortAscending:"Sort range A to Z",sortDescending:"Sort range Z to A",filterByValue:"Filter by value",filterByCondition:"Filter by condition",apply:"Apply",search:"Search",addToCurrent:"Add to current selection",clear:"Clear",blanks:"(Blanks)",operatorNone:"None",and:"AND",or:"OR",operators:{string:{contains:"Text contains",doesnotcontain:"Text does not contain",startswith:"Text starts with",endswith:"Text ends with",matches:"Text matches",doesnotmatch:"Text does not match"},date:{eq:"Date is",neq:"Date is not",lt:"Date is before",gt:"Date is after"},number:{eq:"Is equal to",neq:"Is not equal to",gte:"Is greater than or equal to",gt:"Is greater than",lte:"Is less than or equal to",lt:"Is less than"}}};var s=n.extend({init:function(e,t){n.fn.init.call(this,e,t);this.element.addClass(u.classNames.details);this._summary=this.element.find("."+u.classNames.detailsSummary).on("click",this._toggle.bind(this));var i=t.expanded?u.classNames.iconCollapse:u.classNames.iconExpand;this._icon=o("<span />",{class:u.classNames.icon+" "+i}).prependTo(this._summary);this._container=f.wrap(this._summary.next(),true);if(!t.expanded){this._container.hide()}},options:{name:"Details"},events:["toggle"],visible:function(){return this.options.expanded},toggle:function(e){var t=f.fx(this._container).expand("vertical");t.stop()[e?"reverse":"play"]();this._icon.toggleClass(u.classNames.iconExpand,e).toggleClass(u.classNames.iconCollapse,!e);this.options.expanded=!e},_toggle:function(){var e=this.visible();this.toggle(e);this.trigger("toggle",{show:e})}});f.data.binders.spreadsheetFilterValue=f.data.Binder.extend({init:function(e,t,i){f.data.Binder.fn.init.call(this,e,t,i);this._change=o.proxy(this.change,this);o(this.element).on("change",this._change)},refresh:function(){var e=this,t=e.bindings.spreadsheetFilterValue.get();o(e.element).val(t instanceof Date?"":t)},change:function(){var e=this.element.value;this.bindings.spreadsheetFilterValue.set(e)}});f.data.binders.widget.spreadsheetFilterValue=f.data.Binder.extend({init:function(e,t,i){f.data.Binder.fn.init.call(this,e.element[0],t,i);this.widget=e;this._change=o.proxy(this.change,this);this.widget.first("change",this._change)},refresh:function(){var e=this.bindings.spreadsheetFilterValue,t=e.get(),i=o(this.widget.element).data("filterType");if(i==="date"&&t instanceof Date||i==="number"&&!isNaN(t)){this.widget.value(t)}else{this.widget.value(null)}},change:function(){var e=this.widget.value(),t=this.bindings.spreadsheetFilterValue;t.set(e)}});var t={filterByValue:"<div class='"+e.detailsSummary+"'>#= messages.filterByValue #</div>"+"<div class='"+e.detailsContent+"'>"+"<div class='k-textbox k-space-right'>"+"<input placeholder='#= messages.search #' data-#=ns#bind='events: { input: filterValues }' />"+"<span class='k-icon k-i-zoom'></span>"+"</div>"+"<div data-#=ns#bind='visible: hasActiveSearch'><input class='k-checkbox' type='checkbox' data-#=ns#bind='checked: appendToSearch' id='_#=guid#'/><label class='k-checkbox-label' for='_#=guid#'>#= messages.addToCurrent #</label></div>"+"<div class='"+e.valuesTreeViewWrapper+"'>"+"<div data-#=ns#role='treeview' "+"data-#=ns#checkboxes='{ checkChildren: true }' "+"data-#=ns#bind='source: valuesDataSource, events: { check: valuesChange, select: valueSelect }' "+"></div>"+"</div>"+"</div>",filterByCondition:"<div class='"+e.detailsSummary+"'>#= messages.filterByCondition #</div>"+"<div class='"+e.detailsContent+"'>"+"<div>"+"<select "+'data-#=ns#role="dropdownlist"'+'data-#=ns#bind="value: operator, source: operators, events: { change: operatorChange } "'+'data-value-primitive="false"'+'data-option-label="#=messages.operatorNone#"'+'data-height="auto"'+'data-text-field="text"'+'data-value-field="unique">'+"</select>"+"</div>"+'<div data-#=ns#bind="visible: isString">'+'<input data-filter-type="string" data-#=ns#bind="spreadsheetFilterValue: customFilter.criteria[0].value" class="k-textbox" />'+"</div>"+'<div data-#=ns#bind="visible: isNumber">'+'<input data-filter-type="number" data-#=ns#role="numerictextbox" data-#=ns#bind="spreadsheetFilterValue: customFilter.criteria[0].value" />'+"</div>"+'<div data-#=ns#bind="visible: isDate">'+'<input data-filter-type="date" data-#=ns#role="datepicker" data-#=ns#bind="spreadsheetFilterValue: customFilter.criteria[0].value" />'+"</div>"+"</div>",menuItem:"<li data-command='#=command#' data-dir='#=dir#'>"+"<span class='k-icon k-i-#=iconClass#'></span>#=text#"+"</li>",actionButtons:"<button data-#=ns#bind='click: apply' class='k-button k-primary'>#=messages.apply#</button>"+"<button data-#=ns#bind='click: clear' class='k-button'>#=messages.clear#</button>"};function r(e){var t={};var i=[];for(var n=0;n<e.length;n++){if(!t[e[n].value]){t[e[n].value]=e[n];i.push(e[n])}else if(!t[e[n].value].checked&&e[n].checked){t[e[n].value].checked=true}}return i}function h(e,t){var i=false;var n=e instanceof f.data.HierarchicalDataSource&&e.data();var r=this;var a=this.values;for(var o=0;o<n.length;o++){var s=n[o];var l=s.text.toString().toLocaleLowerCase(f.culture().name);var d=t===true||t===""||l.indexOf(t)>=0;var u=h.bind(r);var c=u(s.children,t);i=i||c||d;s.hidden=!d&&!c;if(t.length||a&&!a.length){s.checked=!s.hidden}else if(a&&a.indexOf(s.text)!=-1){s.checked=true}}if(n){e.filter({field:"hidden",operator:"neq",value:true})}return i}function a(e){var t=e instanceof f.data.HierarchicalDataSource&&e.data();for(var i=0;i<t.length;i++){var n=t[i];n.checked=false;if(n.hasChildren){a(n.children)}}}var i=f.spreadsheet.FilterMenuViewModel=f.data.ObservableObject.extend({valuesChange:function(e){var t=e?e.sender.dataSource:this.valuesDataSource;var i=function(e){return e.checked};var n=function(e){return e.dataType==="date"?f.spreadsheet.dateToNumber(e.value):e.value};var r=function(e,t,i){return i.lastIndexOf(e)===t};var a=t.data();var o=a.toJSON()[0].items;var s=o.filter(function(e){return e.dataType==="blank"});s=s.length?s[0].checked:false;o=o.filter(i).map(n);if(this.appendToSearch&&this.valueFilter&&this.valueFilter.values.length){o=o.concat(this.valueFilter.values.toJSON()).sort().filter(r)}this.set("valueFilter",{values:o,blanks:s})},valueSelect:function(e){e.preventDefault();var t=e.sender.dataItem(e.node);t.set("checked",!t.checked)},hasActiveSearch:false,appendToSearch:false,filterValues:function(e){var t=typeof e=="string"?e:o(e.target).val().toLocaleLowerCase(f.culture().name);var i=this.valuesDataSource;this.set("hasActiveSearch",!!t);var n=h.bind(this.valueFilter);a(i);n(i,t)},reset:function(){this.set("customFilter",{logic:"and",criteria:[{operator:null,value:null}]});this.set("valueFilter",{values:[]})},operatorChange:function(e){var t=e.sender.dataItem();this.set("operatorType",t.type);if(!this.get("customFilter")){this.reset()}this.set("customFilter.criteria[0].operator",t.value)},isNone:function(){return this.get("operatorType")===undefined},isString:function(){return this.get("operatorType")==="string"},isNumber:function(){return this.get("operatorType")==="number"},isDate:function(){return this.get("operatorType")==="date"}});function l(e){var t=f.spreadsheet.messages.filterMenu.operators;var i=[];for(var n in e){if(!e.hasOwnProperty(n)){continue}for(var r in e[n]){if(!e[n].hasOwnProperty(r)){continue}i.push({text:t[n][r],value:r,unique:n+"_"+r,type:n})}}return i}var d=f.spreadsheet.FilterMenuController={valuesTree:function(e,t){return[{text:f.spreadsheet.messages.filterMenu.all,expanded:true,checked:false,items:this.values(e.resize({top:1}),t)}]},values:function(e,t){var s=[];var l=f.spreadsheet.messages.filterMenu;var i=e.column(t);var d=e.sheet();i.forEachCell(function(e,t,i){var n=true;if(d.isHiddenRow(e)){n=false}var r=i.value;var a=i.dataType;var o=i.text;if(r===undefined){a="blank"}else if(i.format){a=f.spreadsheet.formatting.type(r,i.format)}else{a=typeof r}if(r!==null&&i.format){o=f.spreadsheet.formatting.text(r,i.format)}else{o=a=="blank"?l.blanks:r}if(a==="percent"||a==="currency"){a="number"}if(a==="date"){r=f.spreadsheet.numberToDate(r)}s.push({dataType:a,value:r,text:o,checked:n})});s=r(s);s.sort(function(e,t){if(e.dataType===t.dataType){return 0}if(e.dataType==="blank"||t.dataType==="blank"){return e.dataType==="blank"?-1:1}if(e.dataType==="number"||t.dataType==="number"){return e.dataType==="number"?-1:1}if(e.dataType==="date"||t.dataType==="date"){return e.dataType==="date"?-1:1}return 0});return s},filterType:function(e,t){var i=e.sheet();var n=this.filterForColumn(t,i);var r;n=n&&n.filter.toJSON();if(n&&n.filter=="custom"){var a=n.criteria[0].value;if(a instanceof Date){r="date"}else if(typeof a=="string"){r="string"}else if(typeof a=="number"){r="number"}}if(!r){var o=this.values(e.row(1),t)[0];r=o&&o.dataType;if(r=="blank"){r=null}}return r},filterForColumn:function(t,e){var i=e.filter();var n;if(i){n=i.columns.filter(function(e){return e.index===t})[0]}return n},filter:function(e,t){var i=this.filterForColumn(e,t);if(!i){return}var n=i.filter.toJSON();var r=n.filter;delete n.filter;var a={type:r,options:n};var o=n.criteria;if(o&&o.length){a.operator=o[0].operator}return a}};var u=n.extend({init:function(e,t){n.call(this,e,t);this.element.addClass(u.classNames.wrapper);this.viewModel=new i({active:"value",operator:null,operators:l(this.options.operators),clear:this.clear.bind(this),apply:this.apply.bind(this)});this._filterInit();this._popup();this._sort();this._filterByCondition();this._filterByValue();this._actionButtons()},options:{name:"FilterMenu",column:0,range:null,operators:{string:{contains:"Text contains",doesnotcontain:"Text does not contain",startswith:"Text starts with",endswith:"Text ends with",matches:"Text matches",doesnotmatch:"Text does not match"},date:{eq:"Date is",neq:"Date is not",lt:"Date is before",gt:"Date is after"},number:{eq:"Is equal to",neq:"Is not equal to",gte:"Is greater than or equal to",gt:"Is greater than",lte:"Is less than or equal to",lt:"Is less than"}}},events:["action"],destroy:function(){n.fn.destroy.call(this);this.menu.destroy();this.valuesTreeView.destroy();this.popup.destroy()},openFor:function(e){this.popup.setOptions({anchor:e});this.popup.open()},close:function(){this.popup.close()},clear:function(){this.action({command:"ClearFilterCommand",options:{column:this.options.column}});this.viewModel.reset();this.close()},apply:function(){this._active();var e={operatingRange:this.options.range,column:this.options.column};var t;var i;if(this.viewModel.active==="value"){this.viewModel.valuesChange({sender:this.valuesTreeView});t=this.viewModel.valueFilter.toJSON();if(t.blanks||t.values&&t.values.length){e.valueFilter=t}}else if(this.viewModel.active==="custom"){i=this.viewModel.customFilter.toJSON();if(i.criteria.length&&i.criteria[0].value!==null){e.customFilter=i}}if(e.valueFilter||e.customFilter){this.action({command:"ApplyFilterCommand",options:e})}},action:function(e){this.trigger("action",o.extend({},e))},_filterInit:function(){var e=this.options.column;var t=this.options.range;var i=t.sheet();var n=d.filter(e,i);if(n){var r=d.filterType(t,e);this.viewModel.set("active",n.type);this.viewModel.set(n.type+"Filter",n.options);if(n.type=="custom"){this.viewModel.set("operator",r+"_"+n.operator);this.viewModel.set("operatorType",r)}}else{this.viewModel.reset()}},_popup:function(){this.popup=this.element.kendoPopup({copyAnchorStyles:false}).data("kendoPopup")},_sort:function(){var e=f.template(u.templates.menuItem);var t=f.spreadsheet.messages.filterMenu;var i=[{command:"sort",dir:"asc",text:t.sortAscending,iconClass:"sort-asc"},{command:"sort",dir:"desc",text:t.sortDescending,iconClass:"sort-desc"}];var n=o("<ul></ul>",{html:f.render(e,i)}).appendTo(this.element);this.menu=n.kendoMenu({orientation:"vertical",select:function(e){var t=o(e.item).data("dir");var i=this.options.range.resize({top:1});var n={value:t,sheet:false,operatingRange:i,column:this.options.column};this.action({command:"SortCommand",options:n})}.bind(this)}).data("kendoMenu")},_appendTemplate:function(e,t,i,n){var r=f.template(e);var a=o("<div class='"+t+"'/>").html(r({messages:f.spreadsheet.messages.filterMenu,guid:f.guid(),ns:f.ns}));this.element.append(a);if(i){i=new s(a,{expanded:n,toggle:this._detailToggle.bind(this)})}f.bind(a,this.viewModel);return a},_detailToggle:function(e){this.element.find("[data-role=details]").not(e.sender.element).data("kendoDetails").toggle(!e.show)},_filterByCondition:function(){var e=this.viewModel.active==="custom";this._appendTemplate(u.templates.filterByCondition,u.classNames.filterByCondition,true,e)},_filterByValue:function(){var e=this.viewModel.active==="value";var t=this._appendTemplate(u.templates.filterByValue,u.classNames.filterByValue,true,e);this.valuesTreeView=t.find("[data-role=treeview]").data("kendoTreeView");var i=d.valuesTree(this.options.range,this.options.column);this.viewModel.set("valuesDataSource",new f.data.HierarchicalDataSource({data:i,accentFoldingFiltering:f.culture().name}))},_actionButtons:function(){this._appendTemplate(u.templates.actionButtons,u.classNames.actionButtons,false)},_active:function(){var e=this.element.find("[data-role=details]").filter(function(e,t){return o(t).data("kendoDetails").visible()});if(e.hasClass(u.classNames.filterByValue)){this.viewModel.set("active","value")}else if(e.hasClass(u.classNames.filterByCondition)){this.viewModel.set("active","custom")}}});f.spreadsheet.FilterMenu=u;o.extend(true,u,{classNames:e,templates:t})})(window.kendo)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/editor",["kendo.core"],e)})(function(){(function(i){var e=i.Observable.extend({init:function(e){i.Observable.fn.init.call(this);this.view=e;this.formulaBar=e.formulaBar;this._active=false;this.barInput=e.formulaBar.formulaInput;this.cellInput=e.formulaInput;this.barInput.syncWith(this.cellInput);this.cellInput.syncWith(this.barInput);this.barInput.bind("keyup",this._triggerUpdate.bind(this));this.cellInput.bind("keyup",this._triggerUpdate.bind(this));this.barInput.bind("blur",this._blur.bind(this));this.cellInput.bind("blur",this._blur.bind(this))},events:["activate","deactivate","change","update"],_blur:function(){this.deactivate()},_triggerUpdate:function(){this.trigger("update",{value:this.value()})},activeEditor:function(){var e=null;var t=i._activeElement();if(this.barElement()[0]===t){e=this.barInput}else if(this.cellElement()[0]===t){e=this.cellInput}return e},activate:function(e){var t=this.view.element,i,n,r;this._active=true;this._rect=e.rect;this._range=e.range;this.cellInput.position(e.rect);this.cellInput.resize(e.rect);this.cellInput.tooltip(e.tooltip);this.cellInput.activeCell=this.barInput.activeCell=this._range.topLeft();this.cellInput.activeSheet=this.barInput.activeSheet=this._range._sheet;if(t){i=t.width();n=t.find(".k-spreadsheet-scroller")[0];r=n.offsetWidth-n.clientWidth;this.cellInput.element.css("max-width",i-r-this.cellInput.element.position().left+"px")}this.trigger("activate");return this},deactivate:function(e){var t=this.cellInput;if(!this._active){return}this._active=false;if(!e&&t.value()!=this._value){this.trigger("change",{value:t.value(),range:this._range})}this._rect=null;t.hide();this.trigger("deactivate")},enable:function(e){this.barInput.enable(e);this.cellInput.enable(e)},barElement:function(){return this.barInput.element},cellElement:function(){return this.cellInput.element},focus:function(e){e=e||"cell";if(e==="cell"){this.cellInput.element.focus();this.cellInput.end()}else{this.barInput.element.focus()}},isActive:function(){return this._active},isFiltered:function(){return this.barInput.popup.visible()||this.cellInput.popup.visible()},canInsertRef:function(e){var t=this.activeEditor();return t&&t.canInsertRef(e)},highlightedRefs:function(){var e=this.activeEditor();var t=[];if(e){t=e.highlightedRefs()}return t},scale:function(){this.cellInput.scale()},toggleTooltip:function(e){this.cellInput.toggleTooltip(t(this._rect,e))},value:function(e,t){if(e===undefined){return this.barInput.value()}if(e===null){e=""}this._value=e;this.barInput.value(e);this.cellInput.value(e);this.barInput.element.toggleClass("k-spreadsheet-array-formula",!!t)},insertNewline:function(){this.activeEditor().insertNewline();this.scale()},select:function(){this.activeEditor().select()}});function t(e,t){return e&&(e.top!==t.top||e.left!==t.left)}i.spreadsheet.SheetEditor=e})(kendo)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/autofill",["spreadsheet/runtime","spreadsheet/range"],e)})(function(){"use strict";var e=kendo.spreadsheet;var t=e.Range;var i=e.calc.runtime;var h=i.Formula;var w="incompatibleRanges";var k="noFillDirection";var y=t.FillError=function(e){this.code=e};t.prototype._previewFillFrom=function(e,t){var i=this,n=i._sheet;if(typeof e=="string"){e=n.range(e)}var r=e._ref.toRangeRef().clone().setSheet(n.name());var a=i._ref.toRangeRef().clone().setSheet(n.name());if(r.intersects(a)){if(r.eq(a)){return null}a=a.clone();if(r.topLeft.eq(a.topLeft)){if(r.width()==a.width()){a.topLeft.row+=r.height();t=0}else if(r.height()==a.height()){a.topLeft.col+=r.width();t=1}else{throw new y(w)}}else if(r.bottomRight.eq(a.bottomRight)){if(r.width()==a.width()){a.bottomRight.row-=r.height();t=2}else if(r.height()==a.height()){a.bottomRight.col-=r.width();t=3}else{throw new y(w)}}else{throw new y(w)}return n.range(a)._previewFillFrom(e,t)}if(t==null){if(r.topLeft.col==a.topLeft.col){t=r.topLeft.row<a.topLeft.row?0:2}else if(r.topLeft.row==a.topLeft.row){t=r.topLeft.col<a.topLeft.col?1:3}else{throw new y(k)}}var o=t&1;var s=t&2;if(o&&r.height()!=a.height()||!o&&r.width()!=a.width()){throw new y(w)}var l=e._properties(),d;if(!o){l=C(l);d=a.height()}else{d=a.width()}var u=new Array(l.length);var c=null;for(var f=0;f<l.length;++f){var h=l[f];var p=x(h);var v=u[f]=new Array(d);for(var m=0;m<d;++m){var g=s?-m-1:h.length+m;var _=s?h.length-m%h.length-1:m%h.length;var b=v[s?d-m-1:m]=p(g,_);if(b.value!=null){c=b.value}}}if(!o){u=C(u)}return{props:u,direction:t,dest:i,hint:c}};t.prototype.fillFrom=function(e,t){var i=this._previewFillFrom(e,t);i.dest._properties(i.props,true);return i.dest};function p(t){var e=t.length;var i=(e+1)/2,n=t.reduce(function(e,t){return e+t},0)/e;var r=0,a=0;for(var o=0;o<e;o++){var s=o+1-i,l=t[o]-n;r+=s*l;a+=s*s}if(!a){return function(e){return t[e%t.length]}}var d=r/a,u=n-d*i;return function(e){return u+d*(e+1)}}function x(l){function d(e){var t=e[1]-e[0];for(var i=2;i<e.length;++i){if(e[i]-e[i-1]!=t){return null}}return t}function u(e){return e.map(function(e){return e.number})}var c=[];var f=l.map(function(e){return e.formula||e.value});n(f,function(e,t,i,n){var r,a;if(i=="number"){a=u(n);r=p(a)}else if(i=="string"||i=="formula"||i=="boolean"){r=function(e,t){return f[t]}}else if(Array.isArray(i)){if(n.length==1){r=function(e){return i[(n[0].number+e)%i.length]}}else{var o=d(u(n));if(o==null){r=function(e){return n[e%n.length].value}}else{r=function(e){var t=n[0].number+o*e;return i[t%i.length]}}}}else if(i!="null"){a=u(n);if(a.length==1){a.push(a[0]+1)}a=p(a);r=function(e,t){return f[t].replace(/^(.*\D)\d+/,"$1"+a(e,t))}}else{r=function(){return null}}var s={f:r,begin:e,end:t,len:t-e};for(var l=e;l<t;++l){c[l]=s}});return function(e,t){var i=c[t];var n=e/f.length|0;var r=e%f.length;var a=n*i.len+r-i.begin;var o=i.f(a,t);var s=v(l[t]);delete s.enable;if(o instanceof h){s.formula=o}else{s.value=o}return s}}function v(t){var i={};Object.keys(t||{}).forEach(function(e){i[e]=t[e]});return i}function n(e,t){var i=null,n=0,r=[],a;for(var o=0;o<e.length;++o){a=s(e[o]);r.push(a);if(i!=null&&a.type!==i.type){t(n,o,i.type,r.slice(n,o));n=o}i=a}t(n,o,i.type,r.slice(n,o))}function s(e){if(typeof e=="number"){return{type:"number",number:e}}if(typeof e=="string"){var t=r(e);if(t){return t}var i=/^(.*\D)(\d+)/.exec(e);if(i){e=e.replace(/^(.*\D)\d+/,"$1-######");return{type:e,match:i,number:parseFloat(i[2])}}return{type:"string"}}if(typeof e=="boolean"){return{type:"boolean"}}if(e==null){return{type:"null"}}if(e instanceof h){return{type:"formula"}}window.console.error(e);throw new Error("Cannot fill data")}function l(){var e=kendo.culture();return[e.calendars.standard.days.namesAbbr,e.calendars.standard.days.names,e.calendars.standard.months.namesAbbr,e.calendars.standard.months.names]}function r(e){var t=e.toLowerCase();var i=l();for(var n=0;n<i.length;++n){var r=i[n];for(var a=r.length;--a>=0;){var o=r[a].toLowerCase();if(o==t){return{type:r,number:a,value:e}}}}}function C(e){var t=e.length,i=e[0].length;var n=[];for(var r=0;r<i;++r){n[r]=[];for(var a=0;a<t;++a){n[r][a]=e[a][r]}}return n}},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/nameeditor",["kendo.core"],e)})(function(){(function(a){var o=a.jQuery;var s={input:"k-spreadsheet-name-editor",list:"k-spreadsheet-name-list"};var e=a.ui.Widget.extend({init:function(e,t){a.ui.Widget.call(this,e,t);e.addClass(s.input);var i=t.messages.nameBox||"Name Box";var n=new a.data.DataSource({transport:{read:function(e){var t=[];this._workbook.forEachName(function(e){if(!e.hidden&&e.value instanceof a.spreadsheet.Ref){t.push({name:e.name})}});e.success(t)}.bind(this),cache:false}});var r=o("<input />").attr("title",i).attr("aria-label",i);this.combo=r.appendTo(e).kendoComboBox({clearButton:false,dataTextField:"name",dataValueField:"name",template:"#:data.name#<a role='button' class='k-button-delete' href='\\#'><span class='k-icon k-i-close'></span></a>",dataSource:n,autoBind:false,ignoreCase:true,change:this._on_listChange.bind(this),noDataTemplate:"<div></div>",open:function(){n.read()}}).getKendoComboBox();this.combo.input.on("keydown",this._on_keyDown.bind(this)).on("focus",this._on_focus.bind(this));this.combo.popup.element.addClass("k-spreadsheet-names-popup").on("mousemove",function(e){e.stopPropagation()}).on("click",".k-button-delete",function(e){e.preventDefault();e.stopPropagation();var t=o(e.target).closest(".k-item");t=this.combo.dataItem(t);this._deleteItem(t.name)}.bind(this))},value:function(e){if(e===undefined){return this.combo.value()}else{this.combo.value(e)}},_deleteItem:function(e){this.trigger("delete",{name:e})},_on_keyDown:function(e){switch(e.keyCode){case 27:this.combo.value(this._prevValue);this.trigger("cancel");break;case 13:this.trigger("enter");break}},_on_focus:function(){this._prevValue=this.combo.value()},_on_listChange:function(){var e=this.combo.value();if(e){this.trigger("select",{name:e})}}});a.spreadsheet.NameEditor=e})(window.kendo)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("spreadsheet/print",["kendo.pdf","spreadsheet/sheet","spreadsheet/range","spreadsheet/references","spreadsheet/numformat","util/text-metrics"],e)})(function(){"use strict";var d=kendo.spreadsheet;var y=d.CellRef;var x=kendo.drawing;var c=d.formatting;var C=kendo.geometry;var S=.8;function T(e,i,n,r,a){var o=0;var s=[];var l=i;var d=0;if(i&&n){n*=i}e.forEach(function(e,t){if(r!=null&&t<r){d+=e}if(i&&o+e>l){if(l-o<n){o=i*Math.ceil(o/i)+d;if(d>0){a.push(o-d)}}l+=i*Math.ceil(e/i)}s.push(o);o+=e});s.push(o);return s}function u(u,c,f){var e=u._grid;c=e.normalize(c);var i=e.rectangle(c);var h=[];u._drawings.forEach(function(e){var t=u.drawingBoundingBox(e);if(t.intersects(i)){h.push({drawing:e,box:t.offset(-i.left,-i.top)})}});var p=[];var v=[];var m=[];var g=u._getMergedCells(c);var _=-1,b=-1;u.forEach(c,function(i,n,e){var t=i-c.topLeft.row;var r=n-c.topLeft.col;var a=u.rowHeight(i);var o=u.columnWidth(n);if(!f.forScreen){e.drawings=h.filter(function(e){var t=e.drawing.topLeftCell;if(t&&t.row==i&&t.col==n){_=Math.max(_,u._rows.index(e.box.bottom));b=Math.max(b,u._columns.index(e.box.right));return true}})}if(!r){v.push(a)}if(!t){m.push(o)}if(u.isHiddenColumn(n)||u.isHiddenRow(i)||!a||!o){return}var s=f.forScreen||I(e);if(!(f.emptyCells||s)){return}var l=new y(i,n).print();if(g.secondary[l]){return}if(s){_=Math.max(_,t);b=Math.max(b,r)}else{e.empty=true}e.row=t;e.col=r;var d=g.primary[l];if(d){delete g.primary[l];e.merged=true;e.rowspan=d.height();e.colspan=d.width();if(f.forScreen){e.width=u._columns.sum(d.topLeft.col,d.bottomRight.col);e.height=u._rows.sum(d.topLeft.row,d.bottomRight.row)}}else{e.rowspan=1;e.colspan=1}p.push(e)});v=v.slice(0,_+1);m=m.slice(0,b+1);var t=f.pageWidth;var n=f.pageHeight;var r=f.scale||1;if(f.fitWidth){var a=m.reduce(A,0);if(a>t){r=t/a}}t=Math.ceil(t/r);n=Math.ceil(n/r);var o=[];var s=T(v,n||0,f.maxEmpty,f.headerRows,o);var l=T(m,t||0,f.maxEmpty);var d=0;var w=0;var k=[];p=p.filter(function(i){if(i.empty&&(i.row>_||i.col>b)){return false}if(f.headerRows&&i.row<f.headerRows){k.push(i)}i.left=l[i.col];i.top=s[i.row];if(i.merged){if(!f.forScreen){i.right=E(l,i.col+i.colspan);i.bottom=E(s,i.row+i.rowspan);i.width=i.right-i.left;i.height=i.bottom-i.top}else{i.right=i.left+i.width;i.bottom=i.top+i.height}}else{i.width=m[i.col];i.height=v[i.row];i.bottom=i.top+i.height;i.right=i.left+i.width}if(!f.forScreen){i.drawings.forEach(function(e){var t=e.box;t.left=i.left+e.drawing.offsetX;t.top=i.top+e.drawing.offsetY;t.right=t.left+t.width;t.bottom=t.top+t.height})}d=Math.max(d,i.right);w=Math.max(w,i.bottom);return true});Object.keys(g.primary).forEach(function(e){var a=g.primary[e];u.forEach(a.topLeft.toRangeRef(),function(e,t,i){var n=e-c.topLeft.row;var r=t-c.topLeft.col;i.merged=true;i.colspan=a.width();i.rowspan=a.height();if(n<0){i.top=-u._rows.sum(e,e-n-1)}else{i.top=s[n]}if(r<0){i.left=-u._columns.sum(t,t-r-1)}else{i.left=l[r]}i.height=u._rows.sum(a.topLeft.row,a.bottomRight.row);i.width=u._columns.sum(a.topLeft.col,a.bottomRight.col);if(i.height>0&&i.width>0){i.right=i.left+i.width;i.bottom=i.top+i.height;i.row=n;i.col=r;p.push(i)}})});if(f.headerRows){o.forEach(function(t){k.forEach(function(e){e=D(e);e.top+=t;e.bottom=e.top+e.height;p.push(e)});s.push(t)});s.sort(R)}return{width:d,height:w,cells:p.sort(M),scale:r,xCoords:l,yCoords:s,drawings:h}}function D(i,e){if(!e){e={}}if(Object.assign){return Object.assign(e,i)}return Object.keys(i).reduce(function(e,t){e[t]=i[t];return e},e)}function f(e,t){return e.size===t.size&&e.color===t.color}function A(e,t){return e+t}function E(e,t){return t<e.length?e[t]:e[e.length-1]}function I(e){return e.value!=null||e.merged||e.background!=null||e.borderRight!=null||e.borderBottom!=null||e.validation!=null&&!e.validation.value||e.drawings&&e.drawings.length}function M(e,t){if(e.top<t.top){return-1}else if(e.top==t.top){if(e.left<t.left){return-1}else if(e.left==t.left){return 0}else{return 1}}else{return 1}}function R(e,t){return e<t?-1:e>t?1:0}function h(g,_,b,w){var e=Math.ceil(_.width/w.pageWidth);var t=Math.ceil(_.height/w.pageHeight);var k=Math.ceil(w.pageWidth/_.scale);var y=Math.ceil(w.pageHeight/_.scale);for(var i=0;i<t;++i){for(var n=0;n<e;++n){r(i,n)}}function r(e,t){var i=t*k;var n=i+k;var r=e*y;var a=r+y;var o=0,s=0;function l(e){if(e.right<=i||e.left>=n||e.bottom<=r||e.top>=a){return false}o=Math.max(e.bottom,o);s=Math.max(e.right,s);return true}var d=_.cells.filter(l);var u=_.drawings.filter(function(e){return l(e.box)});o=Math.min(o,a);s=Math.min(s,n);if(d.length||u.length){var c=new x.Group;b.append(c);var f=new x.Group;c.append(f);f.clip(x.Path.fromRect(new C.Rect([i-1,r-1],[s+1,o+1])));var h=C.Matrix.scale(_.scale,_.scale).multiplyCopy(C.Matrix.translate(-i,-r));if(w.hCenter||w.vCenter){h=h.multiplyCopy(C.Matrix.translate(w.hCenter?(n-s)/2:0,w.vCenter?(a-o)/2:0))}f.transform(h);if(w.guidelines){var p=null;_.xCoords.forEach(function(e){e=Math.min(e,s);if(e!==p&&e>=i&&e<=n){p=e;f.append((new x.Path).moveTo(e,r).lineTo(e,o).close().stroke(w.guideColor,S))}});var p=null;_.yCoords.forEach(function(e){e=Math.min(e,o);if(e!==p&&e>=r&&e<=a){p=e;f.append((new x.Path).moveTo(i,e).lineTo(s,e).close().stroke(w.guideColor,S))}})}var v=P();d.forEach(function(e){F(e,f,w);v.add(e,g)});var m=new x.Group;v.vert.forEach(function(e){e.forEach(function(e){if(!e.rendered){e.rendered=true;m.append((new x.Path).moveTo(e.x,e.top).lineTo(e.x,e.bottom).close().stroke(e.color,e.size))}})});v.horiz.forEach(function(e){e.forEach(function(e){if(!e.rendered){e.rendered=true;m.append((new x.Path).moveTo(e.left,e.y).lineTo(e.right,e.y).close().stroke(e.color,e.size))}})});f.append(m);u.forEach(function(e){var t=e.drawing;var i=t.image;if(i!=null){var n=e.box;var r=g._workbook.imageUrl(i);f.append(new x.Image(r,new C.Rect([n.left,n.top],[n.width,n.height])).opacity(t.opacity))}})}}}function F(e,t,i){var n=new x.Group;t.append(n);var r=new C.Rect([e.left,e.top],[e.width,e.height]);if(e.background||e.merged){var a=r;if(i.guidelines){a=r.clone();a.origin.x+=S/2+.1;a.origin.y+=S/2+.1;a.size.width-=S+.2;a.size.height-=S+.2}n.append(new x.Rect(a).fill(e.background||"#fff").stroke(null))}var o=e.value;if(o!=null){var s=typeof o=="number"?"number":null;var l=new x.Group;l.clip(x.Path.fromRect(r));n.append(l);var d,u=e.format;if(!u&&s=="number"&&o!=Math.floor(o)){u="0.##############"}if(u){d=c.textAndColor(o,u);o=d.text;if(d.type){s=d.type}}else{o+=""}if(!e.textAlign){switch(s){case"number":case"date":case"percent":case"currency":e.textAlign="right";break;case"boolean":e.textAlign="center";break}}p(o,d&&d.color||e.color||"#000",e,l)}}function o(e,t){if(e.indent){var i=1.4*e.indent;switch(t.textAlign){case null:case"left":t.paddingLeft=i+"ch";break;case"right":t.paddingRight=i+"ch";break;case"center":t.paddingLeft=i/2+"ch";t.paddingRight=i/2+"ch";break}}}var s;function p(e,t,i,n){if(!s){s=document.createElement("div");s.style.position="fixed";s.style.left="0px";s.style.top="0px";s.style.visibility="hidden";s.style.overflow="hidden";s.style.boxSizing="border-box";s.style.lineHeight="normal";document.body.appendChild(s)}if(s.firstChild){s.removeChild(s.firstChild)}s.style.padding="2px 4px";s.style.color=t;s.style.font=l(i);s.style.width=i.width+"px";s.style.textAlign=i.textAlign||"left";s.style.textDecoration=i.underline?"underline":"none";o(i,s.style);if(i.wrap){s.style.whiteSpace="pre-wrap";s.style.overflowWrap=s.style.wordWrap="break-word"}else{s.style.whiteSpace="pre";s.style.overflowWrap=s.style.wordWrap="normal"}s.appendChild(document.createTextNode(e));var r=0;switch(i.verticalAlign){case"center":r=i.height-s.offsetHeight>>1;break;case undefined:case null:case"bottom":r=i.height-s.offsetHeight;break}if(r<0){r=0}var a=kendo.drawing.drawDOM.drawText(s);a.transform(C.Matrix.translate(i.left,i.top+r));n.append(a)}function l(e){var t=[];if(e.italic){t.push("italic")}if(e.bold){t.push("bold")}t.push((e.fontSize||12)+"px");t.push(e.fontFamily||"Arial");return t.join(" ")}function r(e,t,i,n){if(i==null&&n==null){n=t;i={};t=d.SHEETREF}if(n==null){n=i;if(t instanceof d.Range||t instanceof d.Ref||typeof t=="string"){i={}}else{i=t;t=d.SHEETREF}}i=kendo.jQuery.extend({paperSize:"A4",landscape:true,margin:"1cm",guidelines:true,guideColor:"#aaa",emptyCells:true,fitWidth:false,center:false,headerRows:null,maxEmpty:.2,scale:1},i);var r=new x.Group;var a=kendo.pdf.getPaperOptions(i);r.options.set("pdf",{author:i.author,creator:i.creator,date:i.date,keywords:i.keywords,margin:a.margin,multiPage:true,paperSize:a.paperSize,subject:i.subject,title:i.title,autoPrint:i.autoPrint});var o=a.paperSize[0];var s=a.paperSize[1];if(a.margin){o-=a.margin.left+a.margin.right+1;s-=a.margin.top+a.margin.bottom+1}i.pageWidth=o;i.pageHeight=s;var l=u(e,e._ref(t),i);h(e,l,r,i);n(r)}d.Sheet.prototype.draw=function(e,t,i){var n=this;if(n._workbook){n.recalc(n._workbook._context,function(){r(n,e,t,i)})}else{r(n,e,t,i)}};function v(){}v.prototype={forEach:function(t){Object.keys(this).forEach(function(e){t(this[e],e,this)},this)}};function P(){var l=new v;var d=new v;function e(e,t){if(t){var i=t._properties;var n=t._grid;e.borderLeft=i.get("vBorders",n.index(e.row,e.col));e.borderRight=i.get("vBorders",n.index(e.row,e.col+e.colspan));e.borderTop=i.get("hBorders",n.index(e.row,e.col));e.borderBottom=i.get("hBorders",n.index(e.row+e.rowspan,e.col))}if(e.borderLeft){r(e.row,e.col,e.borderLeft,e.left,e.top,e.bottom)}if(e.borderRight){r(e.row,e.col+e.colspan,e.borderRight,e.right,e.top,e.bottom)}if(e.borderTop){a(e.row,e.col,e.borderTop,e.top,e.left,e.right)}if(e.borderBottom){a(e.row+e.rowspan,e.col,e.borderBottom,e.bottom,e.left,e.right)}}function r(e,t,i,n,r,a){var o=d[t]||(d[t]=new v);var s=e>0&&o[e-1];if(s&&f(s,i)){o[e]=s;s.bottom=a}else{o[e]={size:i.size,color:i.color,x:n,top:r,bottom:a}}}function a(e,t,i,n,r,a){var o=l[e]||(l[e]=new v);var s=t>0&&o[t-1];if(s&&f(s,i)){o[t]=s;s.right=a}else{o[t]={size:i.size,color:i.color,y:n,left:r,right:a}}}return{add:e,horiz:l,vert:d}}function e(o){var s=new $.Deferred;var e=s.promise();o=D(o,{dataSource:null,guidelines:true,guideColor:"#000",columns:null,headerBackground:"#999",headerColor:"#000",oddBackground:null,evenBackground:null,fontFamily:"Arial",fontSize:12,paperSize:"A4",margin:"1cm",landscape:true,fitWidth:false,scale:1,rowHeight:20,maxEmpty:1,useGridFormat:true});kendo.drawing.pdf.defineFont(kendo.drawing.drawDOM.getFontFaces(document));var n=i(o.fontFamily,o.fontSize);function l(e){if(e!=null){var t=12;for(var i=e.length;--i>=0;){t+=n(e.charAt(i))}return t}return 0}var t=o.guidelines?{size:1,color:o.guideColor}:null;function d(e){if(!t){return e}return D(e,{borderLeft:t,borderTop:t,borderRight:t,borderBottom:t})}o.dataSource.fetch(function(){var e=o.dataSource.data();if(!e.length){return s.reject("Empty dataset")}var t=o.columns.map(function(e){if(typeof e=="string"){return{title:e,field:e}}else{return e}});var i=t.map(function(e){return e.title||e.field});var a=i.map(l);var n=e.map(function(n,r){return{cells:t.map(function(e,t){var i=n[e.field];if(o.useGridFormat){if(i!=null){if(e.format){i=kendo.format(e.format,i)}else{i+=""}}a[t]=Math.max(l(i),a[t])}return d({value:i,format:o.useGridFormat?null:e.format,background:r%2?o.evenBackground:o.oddBackground})})}});n.unshift({cells:i.map(function(e){return d({value:e,background:o.headerBackground,color:o.headerColor})})});var r=new kendo.spreadsheet.Sheet(n.length+1,t.length+1,o.rowHeight,50,20,20,{fontFamily:o.fontFamily,fontSize:o.fontSize,verticalAlign:"center"});r.fromJSON({name:"Sheet1",rows:n,columns:a.map(function(e,t){return{index:t,width:e}})});r.draw({paperSize:o.paperSize,landscape:o.landscape,margin:o.margin,guidelines:false,scale:o.scale,fitWidth:o.fitWidth,maxEmpty:o.maxEmpty,headerRows:1},s.resolve.bind(s))});return e}var m={};var i=function(e,t){var i=t+":"+e;var n=m[i];if(!n){var r,a=document.createElement("div");a.style.position="fixed";a.style.left="-10000px";a.style.top="-10000px";a.style.fontFamily=e;a.style.fontSize=t+"px";a.style.whiteSpace="pre";for(var o=32;o<128;++o){r=document.createElement("span");r.appendChild(document.createTextNode(String.fromCharCode(o)));a.appendChild(r)}document.body.appendChild(a);var s={};for(o=32,r=a.firstChild;o<128&&r;++o,r=r.nextSibling){s[o]=r.offsetWidth}while(r=a.firstChild){a.removeChild(r)}n=m[i]=function(e){var t=e.charCodeAt(0);var i=s[t];if(i==null){r=document.createElement("span");r.appendChild(document.createTextNode(String.fromCharCode(t)));a.appendChild(r);i=s[t]=r.offsetWidth;a.removeChild(r)}return i}}return n};d.draw={Borders:P,doLayout:u,applyIndent:o};d.drawTabularData=e},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.spreadsheet",["util/undoredostack","util/text-metrics","util/parse-xml","kendo.excel","kendo.progressbar","kendo.pdf","spreadsheet/commands","spreadsheet/formulabar","spreadsheet/formulainput","spreadsheet/eventlistener","spreadsheet/rangelist","spreadsheet/propertybag","spreadsheet/references","spreadsheet/navigator","spreadsheet/axismanager","spreadsheet/clipboard","spreadsheet/range","spreadsheet/sheet","spreadsheet/sheetsbar","spreadsheet/excel-reader","spreadsheet/workbook","spreadsheet/formulacontext","spreadsheet/controller","spreadsheet/view","spreadsheet/customeditors","spreadsheet/grid","spreadsheet/axis","spreadsheet/filter","spreadsheet/sorter","spreadsheet/runtime","spreadsheet/calc","spreadsheet/numformat","spreadsheet/runtime.functions","spreadsheet/runtime.functions.2","spreadsheet/toolbar","spreadsheet/dialogs","spreadsheet/sheetbinder","spreadsheet/filtermenu","spreadsheet/editor","spreadsheet/autofill","spreadsheet/nameeditor","spreadsheet/print"],e)})(function(){var e={id:"spreadsheet",name:"Spreadsheet",category:"web",description:"Spreadsheet component",depends:["core","binder","colorpicker","combobox","data","dom","dropdownlist","menu","ooxml","popup","sortable","tabstrip","toolbar","treeview","window","validator","excel","pdf","drawing"]};(function(n,t){if(n.support.browser.msie&&n.support.browser.version<9){return}var r=n.jQuery;var a=r.extend({F10:121,F11:122,B:66,I:73,U:85,N:78,H:72,A:65,PAGEDOWN:34,PAGEUP:33,DELETE:46,R:82},n.keys);var i=n.ui.Widget;var o=n.spreadsheet.Workbook;var s=n.spreadsheet.Controller;var l=n.spreadsheet.View;var d=".kendoSpreadsheet";var u={recalc:true,selection:true,activeCell:true,layout:true,sheetSelection:true,resize:true,editorChange:false,editorClose:false};var e={wrapper:"k-widget k-widget-2021 k-spreadsheet"};var c=n.ui.Widget.extend({init:function(e,t){t.selectVertical=t.selectVertical||false;n.ucas.setData({selectVertical:t.selectVertical});i.fn.init.call(this,e,t);this.element.addClass(c.classNames.wrapper);this._view=new l(this.element,{messages:this.options.messages.view,toolbar:this.options.toolbar,sheetsbar:this.options.sheetsbar});this._workbook=new o(this.options,this._view);this._controller=new s(this._view,this._workbook);this._autoRefresh=true;this._bindWorkbookEvents();this._view.workbook(this._workbook);this._view.enableClipboard(false);this.refresh();this._view.enableClipboard(true);this._resizeHandler=function(){this.resize()}.bind(this);r(window).on("resize"+d,this._resizeHandler);this.element.on("keydown"+d,this._keyDown.bind(this))},_keyDown:function(e){var t=e.keyCode;var i=r(".k-spreadsheet-quick-access-toolbar [title=Redo]");if(t===a.F11&&e.shiftKey){this._view.sheetsbar._onAddSelect();e.preventDefault();return}else if(e.altKey&&t===a.PAGEDOWN){this._view.sheetsbar.trigger("select",{name:this._view.sheetsbar._sheets[this._view.sheetsbar._selectedIndex+1].name(),isAddButton:false})}else if(e.altKey&&t===a.PAGEUP){this._view.sheetsbar.trigger("select",{name:this._view.sheetsbar._sheets[this._view.sheetsbar._selectedIndex-1].name(),isAddButton:false})}else if(e.altKey&&t===a.DELETE){var n=function(e){var t=e.sender;if(t.isConfirmed()){this._view.sheetsbar.trigger("remove",{name:this.activeSheet()._name(),confirmation:true})}}.bind(this);this._view.sheetsbar._openDialog("confirmation",{close:n});e.preventDefault();return}else if(e.altKey&&t===a.R){this._view.sheetsbar._createEditor();e.preventDefault();return}else if(t===a.F10&&this._view.tabstrip||t===a.TAB&&!e.shiftKey&&r(document.activeElement).is(i)){this._view.tabstrip.toolbars[this._view.tabstrip.element.find("li.k-state-active").text().toLowerCase()].element.find(":not(.k-overflow-anchor):kendoFocusable:first").focus();this._view.tabstrip.toolbars[this._view.tabstrip.element.find("li.k-state-active").text().toLowerCase()].element.find(".k-toolbar-first-visible").addClass("k-state-focused");e.preventDefault();return}else if(e.ctrlKey&&t===a.B){r("[data-tool=bold]")[0].click()}else if(e.ctrlKey&&t===a.I){r("[data-tool=italic]")[0].click()}else if(e.ctrlKey&&t===a.U){r("[data-tool=underline]")[0].click()}else if(e.altKey&&t===a.H){this._view.tabstrip.select(0);e.preventDefault();return}else if(e.altKey&&t===a.N){this._view.tabstrip.select(1);e.preventDefault();return}else if(e.altKey&&t===a.A){this._view.tabstrip.select(2);e.preventDefault();return}},_resize:function(){this.refresh({layout:true})},_workbookChanging:function(e){if(this.trigger("changing",e)){e.preventDefault()}},_workbookChange:function(e){if(this._autoRefresh){this.refresh(e)}if(e.recalc&&e.ref){var t=e.range||new n.spreadsheet.Range(e.ref,this.activeSheet());this.trigger("change",{range:t})}},_workbookCut:function(e){this.trigger("cut",e)},_workbookCopy:function(e){this.trigger("copy",e)},_workbookPaste:function(e){this.trigger("paste",e)},activeSheet:function(e){return this._workbook.activeSheet(e)},moveSheetToIndex:function(e,t){return this._workbook.moveSheetToIndex(e,t)},insertSheet:function(e){return this._workbook.insertSheet(e)},sheets:function(){return this._workbook.sheets()},removeSheet:function(e){return this._workbook.removeSheet(e)},sheetByName:function(e){return this._workbook.sheetByName(e)},sheetIndex:function(e){return this._workbook.sheetIndex(e)},sheetByIndex:function(e){return this._workbook.sheetByIndex(e)},renameSheet:function(e,t){return this._workbook.renameSheet(e,t)},refresh:function(e){if(!e){e=u}if(!e.editorClose){this._view.sheet(this._workbook.activeSheet());this._controller.sheet(this._workbook.activeSheet());this._workbook.refresh(e)}if(!e.editorChange){this._view.refresh(e);this._controller.refresh();this._view.render(e);this.trigger("render")}return this},openDialog:function(e,t){return this._view.openDialog(e,t)},autoRefresh:function(e){if(e!==t){this._autoRefresh=e;if(e===true){this.refresh()}return this}return this._autoRefresh},toJSON:function(){return this._workbook.toJSON()},fromJSON:function(e){if(e.sheets){this._workbook.destroy();this._workbook=new o(r.extend({},this.options,e));this._bindWorkbookEvents();this._view.workbook(this._workbook);this._controller.workbook(this._workbook);this.activeSheet(this.activeSheet())}else{this.refresh()}},saveJSON:function(){return this._workbook.saveJSON()},fromFile:function(e,t){return this._workbook.fromFile(e,t)},saveAsPDF:function(e){this._workbook.saveAsPDF(r.extend({},this.options.pdf,e,{workbook:this._workbook}))},saveAsExcel:function(e){this._workbook.saveAsExcel(e)},draw:function(e,t){this._workbook.draw(e,t)},_workbookExcelExport:function(e){if(this.trigger("excelExport",e)){e.preventDefault()}},_workbookExcelImport:function(e){if(this.trigger("excelImport",e)){e.preventDefault()}else{this._initProgress(e.promise)}},_initProgress:function(e){var t=r("<div class='k-loading-mask' "+"style='width: 100%; height: 100%; top: 0;'>"+"<div class='k-loading-color'></div>"+"</div>").appendTo(this.element);var i=r("<div class='k-loading-progress'>").appendTo(t).kendoProgressBar({type:"chunk",chunkCount:10,min:0,max:1,value:0}).data("kendoProgressBar");e.progress(function(e){i.value(e.progress)}).always(function(){n.destroy(t);t.remove()})},_workbookPdfExport:function(e){if(this.trigger("pdfExport",e)){e.preventDefault()}},_workbookInsertSheet:function(e){if(this.trigger("insertSheet",e)){e.preventDefault()}},_workbookRemoveSheet:function(e){if(this.trigger("removeSheet",e)){e.preventDefault()}},_workbookSelectSheet:function(e){if(this.trigger("selectSheet",e)){e.preventDefault()}},_workbookRenameSheet:function(e){if(this.trigger("renameSheet",e)){e.preventDefault()}},_workbookInsertRow:function(e){if(this.trigger("insertRow",e)){e.preventDefault()}},_workbookInsertColumn:function(e){if(this.trigger("insertColumn",e)){e.preventDefault()}},_workbookDeleteRow:function(e){if(this.trigger("deleteRow",e)){e.preventDefault()}},_workbookDeleteColumn:function(e){if(this.trigger("deleteColumn",e)){e.preventDefault()}},_workbookHideRow:function(e){if(this.trigger("hideRow",e)){e.preventDefault()}},_workbookHideColumn:function(e){if(this.trigger("hideColumn",e)){e.preventDefault()}},_workbookUnhideRow:function(e){if(this.trigger("unhideRow",e)){e.preventDefault()}},_workbookUnhideColumn:function(e){if(this.trigger("unhideColumn",e)){e.preventDefault()}},_workbookSelect:function(e){this.trigger("select",e)},_workbookChangeFormat:function(e){this.trigger("changeFormat",e)},_workbookDataBinding:function(e){if(this.trigger("dataBinding",e)){e.preventDefault()}},_workbookDataBound:function(e){this.trigger("dataBound",e)},_bindWorkbookEvents:function(){this._workbook.bind("cut",this._workbookCut.bind(this));this._workbook.bind("copy",this._workbookCopy.bind(this));this._workbook.bind("paste",this._workbookPaste.bind(this));this._workbook.bind("changing",this._workbookChanging.bind(this));this._workbook.bind("change",this._workbookChange.bind(this));this._workbook.bind("excelExport",this._workbookExcelExport.bind(this));this._workbook.bind("excelImport",this._workbookExcelImport.bind(this));this._workbook.bind("pdfExport",this._workbookPdfExport.bind(this));this._workbook.bind("insertSheet",this._workbookInsertSheet.bind(this));this._workbook.bind("removeSheet",this._workbookRemoveSheet.bind(this));this._workbook.bind("selectSheet",this._workbookSelectSheet.bind(this));this._workbook.bind("renameSheet",this._workbookRenameSheet.bind(this));this._workbook.bind("insertRow",this._workbookInsertRow.bind(this));this._workbook.bind("insertColumn",this._workbookInsertColumn.bind(this));this._workbook.bind("deleteRow",this._workbookDeleteRow.bind(this));this._workbook.bind("deleteColumn",this._workbookDeleteColumn.bind(this));this._workbook.bind("hideRow",this._workbookHideRow.bind(this));this._workbook.bind("hideColumn",this._workbookHideColumn.bind(this));this._workbook.bind("unhideRow",this._workbookUnhideRow.bind(this));this._workbook.bind("unhideColumn",this._workbookUnhideColumn.bind(this));this._workbook.bind("select",this._workbookSelect.bind(this));this._workbook.bind("changeFormat",this._workbookChangeFormat.bind(this));this._workbook.bind("dataBinding",this._workbookDataBinding.bind(this));this._workbook.bind("dataBound",this._workbookDataBound.bind(this))},destroy:function(){n.ui.Widget.fn.destroy.call(this);this._workbook.destroy();this._controller.destroy();this._view.destroy();if(this._resizeHandler){r(window).off("resize"+d,this._resizeHandler)}},options:{name:"Spreadsheet",toolbar:true,sheetsbar:true,selectVertical:false,rows:200,columns:50,rowHeight:20,columnWidth:64,headerHeight:20,headerWidth:32,excel:{proxyURL:"",fileName:"Workbook.xlsx"},messages:{},pdf:{area:"workbook",fileName:"Workbook.pdf",proxyURL:"",paperSize:"a4",landscape:true,margin:null,title:null,author:null,subject:null,keywords:null,creator:"Kendo UI PDF Generator v."+n.version,date:null},defaultCellStyle:{fontFamily:"Arial",fontSize:12},useCultureDecimals:false},defineName:function(e,t,i){return this._workbook.defineName(e,t,i)},undefineName:function(e){return this._workbook.undefineName(e)},nameValue:function(e){return this._workbook.nameValue(e)},forEachName:function(e){return this._workbook.forEachName(e)},cellContextMenu:function(){return this._view.cellContextMenu},rowHeaderContextMenu:function(){return this._view.rowHeaderContextMenu},colHeaderContextMenu:function(){return this._view.colHeaderContextMenu},addImage:function(e){return this._workbook.addImage(e)},cleanupImages:function(){return this._workbook.cleanupImages()},events:["cut","copy","paste","pdfExport","excelExport","excelImport","changing","change","render","removeSheet","selectSheet","renameSheet","insertRow","insertColumn","deleteRow","insertSheet","deleteColumn","hideRow","hideColumn","unhideRow","unhideColumn","select","changeFormat","dataBinding","dataBound"]});n.spreadsheet.ALL_REASONS=u;n.ui.plugin(c);r.extend(true,c,{classNames:e})})(window.kendo);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.pivot.configurator",["kendo.dom"],e)})(function(){var e={id:"pivot.configurator",name:"PivotConfigurator",category:"web",depends:["dropdownlist","treeview","pivot.fieldmenu"],hidden:true};(function(l,e){var a=window.kendo,t=a.ui,i=t.Widget,n=".kendoPivotConfigurator",d="mouseenter"+n+" mouseleave"+n,u=a.template('<p class="k-reset"><span class="k-icon #=icon#"></span>${name}</p>'+'<div class="k-list-container k-reset"></div>');function o(e){var t;var i=0;var n=e.length;for(;i<n;i++){if(e[i].type==2){t=true;break}}if(t){e.splice(i+1,0,{caption:"KPIs",defaultHierarchy:"[KPIs]",name:"KPIs",uniqueName:"[KPIs]"})}}function s(e){return{name:e.uniqueName,type:e.type}}function c(e){for(var t=0,i=e.length;t<i;t++){e[t].uniqueName=e[t].name;e[t].type="kpi"}return e}function f(e){var t=l(e).closest(".k-pivot-setting");if(t.length){return t.data("kendoPivotSettingTarget")}return null}var r=i.extend({init:function(e,t){i.fn.init.call(this,e,t);this.element.addClass("k-widget k-widget-2021 k-fieldselector k-alt k-edit-form-container");this._dataSource();this._layout();this.refresh();a.notify(this)},events:[],options:{name:"PivotConfigurator",filterable:false,sortable:false,messages:{measures:"Drop Data Fields Here",columns:"Drop Column Fields Here",rows:"Drop Rows Fields Here",measuresLabel:"Measures",columnsLabel:"Columns",rowsLabel:"Rows",fieldsLabel:"Fields"}},_dataSource:function(){var e=this;if(e.dataSource&&e._refreshHandler){e.dataSource.unbind("change",e._refreshHandler).unbind("error",e._errorHandler).unbind("progress",e._progressHandler)}else{e._errorHandler=l.proxy(e._error,e);e._refreshHandler=l.proxy(e.refresh,e);e._progressHandler=l.proxy(e._requestStart,e)}e.dataSource=a.data.PivotDataSource.create(e.options.dataSource);e.dataSource.bind("change",e._refreshHandler).bind("error",e._errorHandler).bind("progress",e._progressHandler)},setDataSource:function(e){this.options.dataSource=e;this._dataSource();if(this.measures){this.measures.setDataSource(e)}if(this.rows){this.rows.setDataSource(e)}if(this.columns){this.columns.setDataSource(e)}this.refresh()},_treeViewDataSource:function(){var r=this;return a.data.HierarchicalDataSource.create({schema:{model:{id:"uniqueName",hasChildren:function(e){return!("hierarchyUniqueName"in e)&&!("aggregator"in e)}}},transport:{read:function(t){var e;var i;var n;if(l.isEmptyObject(t.data)){e=r.dataSource.schemaDimensions();e.done(function(e){if(!r.dataSource.cubeBuilder){o(e)}t.success(e)}).fail(t.error)}else{i=r.treeView.dataSource.get(t.data.uniqueName);if(i.uniqueName==="[KPIs]"){n=true;e=r.dataSource.schemaKPIs();e.done(function(e){t.success(c(e))}).fail(t.error)}else if(i.type=="kpi"){n=true;t.success(p(i))}if(!n){if(i.type==2){e=r.dataSource.schemaMeasures()}else if(i.dimensionUniqueName){e=r.dataSource.schemaLevels(t.data.uniqueName)}else{e=r.dataSource.schemaHierarchies(t.data.uniqueName)}e.done(t.success).fail(t.error)}}}}})},_progress:function(e){a.ui.progress(this.element,e)},_error:function(){this._progress(false)},_requestStart:function(){this._progress(true)},_layout:function(){this.form=l('<div class="k-columns k-state-default k-floatwrap"/>').appendTo(this.element);this._fields();this._targets()},_fields:function(){var e=l('<div class="k-state-default"><p class="k-reset"><span class="k-icon k-i-group"></span>'+this.options.messages.fieldsLabel+"</p></div>").appendTo(this.form);var t='# if (item.type == 2 || item.uniqueName == "[KPIs]") { #'+'<span class="k-icon k-i-#= (item.type == 2 ? "sum" : "kpi") #"></span>'+'# } else if (item.type && item.type !== "kpi") { #'+'<span class="k-icon k-i-arrows-dimensions"></span>'+"# } #"+"#: item.caption || item.name #";this.treeView=l("<div/>").appendTo(e).kendoTreeView({template:t,dataTextField:"caption",dragAndDrop:true,autoBind:false,dataSource:this._treeViewDataSource(),dragstart:function(e){var t=this.dataItem(e.sourceNode);if(!t.hasChildren&&!t.aggregator&&!t.measure||t.type==2||t.uniqueName==="[KPIs]"){e.preventDefault()}},drag:function(e){var t="k-i-cancel";var i=f(e.dropTarget);if(i&&i.validate(this.dataItem(e.sourceNode))){t="k-i-plus"}e.setStatusClass(t)},drop:function(e){e.preventDefault();var t=f(e.dropTarget);var i=this.dataItem(e.sourceNode);var n,r,a;var o;if(t&&t.validate(i)){o=i.defaultHierarchy||i.uniqueName;if(i.type==="kpi"){a=p(i);r=a.length;o=[];for(n=0;n<r;n++){o.push(s(a[n]))}}else if(i.kpi){o=[s(i)]}t.add(o)}}}).data("kendoTreeView")},_createTarget:function(e,t){var i='<li class="k-item k-header" data-'+a.ns+'name="${data.name}">${data.name}';var n=t.sortable;var r="";if(n){r+="#if (data.sortIcon) {#";r+='<span class="k-icon ${data.sortIcon}-sm"></span>';r+="#}#"}if(t.filterable||n){r+='<span class="k-icon k-i-more-vertical k-setting-fieldmenu"></span>'}r+='<span class="k-icon k-i-close k-setting-delete"></span>';i+='<span class="k-field-actions">'+r+"</span></li>";return new a.ui.PivotSettingTarget(e,l.extend({dataSource:this.dataSource,hint:function(e){var t=l('<div class="k-fieldselector"><ul class="k-list k-reset"></ul></div>');t.find(".k-list").append(e.clone());return t},template:i,emptyTemplate:'<li class="k-item k-empty">${data}</li>'},t))},_targets:function(){var e=l('<div class="k-state-default"/>').appendTo(this.form);var t=l(u({name:this.options.messages.columnsLabel,icon:"k-i-columns"})).appendTo(e);var i=l('<ul class="k-pivot-configurator-settings k-list k-reset" />').appendTo(t.last());var n=l(u({name:this.options.messages.rowsLabel,icon:"k-i-rows"})).appendTo(e);var r=l('<ul class="k-pivot-configurator-settings k-list k-reset" />').appendTo(n.last());var a=l(u({name:this.options.messages.measuresLabel,icon:"k-i-sum"})).appendTo(e);var o=l('<ul class="k-pivot-configurator-settings k-list k-reset" />').appendTo(a.last());var s=this.options;this.columns=this._createTarget(i,{filterable:s.filterable,sortable:s.sortable,connectWith:r,messages:{empty:s.messages.columns,fieldMenu:s.messages.fieldMenu}});this.rows=this._createTarget(r,{filterable:s.filterable,sortable:s.sortable,setting:"rows",connectWith:i,messages:{empty:this.options.messages.rows,fieldMenu:this.options.messages.fieldMenu}});this.measures=this._createTarget(o,{setting:"measures",messages:{empty:s.messages.measures}});i.add(r).add(o).on(d,".k-item:not(.k-empty)",this._toggleHover)},_toggleHover:function(e){l(e.currentTarget).toggleClass("k-state-hover",e.type==="mouseenter")},_resize:function(){var e=this.element;var t=this.options.height;var i,n;var r=a._outerHeight;if(!t){return}e.height(t);if(e.is(":visible")){n=e.children(".k-columns").children("div.k-state-default");t=e.innerHeight();i=(r(e)-t)/2;t=t-(r(n,true)-n.height())-i;n.height(t)}},refresh:function(){var e=this.dataSource;if(e.cubeBuilder||this._cube!==e.cube()||this._catalog!==e.catalog()){this.treeView.dataSource.fetch()}this._catalog=this.dataSource.catalog();this._cube=this.dataSource.cube();this._resize();this._progress(false)},destroy:function(){i.fn.destroy.call(this);this.dataSource.unbind("change",this._refreshHandler);this.form.find(".k-list").off(n);this.rows.destroy();this.columns.destroy();this.measures.destroy();this.treeView.destroy();this.element=null;this._refreshHandler=null}});function h(e,t,i){return{hierarchyUniqueName:e,uniqueName:t,caption:t,measure:t,name:t,type:i,kpi:true}}function p(e){var t=e.name;return[h(t,e.value,"value"),h(t,e.goal,"goal"),h(t,e.status,"status"),h(t,e.trend,"trend")]}t.plugin(r)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("util/ripple",["kendo.core"],e)})(function(){(function(){window.kendo.util=window.kendo.util||{};window.kendo.util.ripple=window.kendo.util.ripple||{};var k=function(e,t){if(e.closest){return e.closest(t)}var i=Element.prototype.matches?function(e,t){return e.matches(t)}:function(e,t){return e.msMatchesSelector(t)};var n=e;while(n){if(i(n,t)){return n}n=n.parentElement}};var y=function(e){var t=e.createElement("div");t.className="k-ripple";var i=e.createElement("div");i.className="k-ripple-blob";t.appendChild(i);return[t,i]};var x=function(e,t,i){var n=function(){i();e.removeEventListener(t,n,false)};var r=function(){return e.addEventListener(t,n,false)};r();return{remove:r}};var d=function(b,w){return function(e){var t=e.target;var i=t.document||t.ownerDocument;var n;if(w.container){n=w.container(t)}else{n=k(t,b)}if(!n){return}var r=/focus/i.test(e.type)&&n.classList.contains("k-ripple-target");if(r){return}n.classList.add("k-ripple-target");var a=y(i),o=a[0],s=a[1];var l={animated:false,released:false,blob:s,container:n,ripple:o};var d={focusin:"focusout",keydown:"keyup",mousedown:"mouseup",pointerdown:"pointerup",touchdown:"touchup"}[e.type];x(e.currentTarget,d,function(){return S(l)});n.appendChild(o);window.getComputedStyle(o).getPropertyValue("opacity");var u=n.getBoundingClientRect();var c=0;var f=0;if(/mouse|pointer|touch/.test(e.type)){c=e.clientX-u.left;f=e.clientY-u.top}else{c=u.width/2;f=u.height/2}var h=c<u.width/2?u.width:0;var p=f<u.height/2?u.height:0;var v=c-h;var m=f-p;var g=2*Math.sqrt(v*v+m*m);var _=500;s.style.width=s.style.height=g+"px";if(s.offsetWidth<0){throw new Error("Inconceivable!")}s.style.cssText="\n    width: "+g+"px;\n    height: "+g+"px;\n    transform: translate(-50%, -50%) scale(1);\n    left: "+c+"px;\n    top: "+f+"px;\n  ";setTimeout(function(){return C(l)},_)}};var C=function(e){e.animated=true;t(e)};var S=function(e){e.released=true;t(e)};var t=function(e){if(!e.released||!e.animated){return}var t=e.blob,i=e.ripple,n=e.container;if(n){x(n,"blur",function(){return n.classList.remove("k-ripple-target")})}if(t){x(t,"transitionend",function(){if(i&&i.parentNode){i.parentNode.removeChild(i)}});t.style.transition="opacity 200ms linear";t.style.opacity="0"}};var e=function(l,e){var t=function(e){return[].concat.apply([],e)};var i=t(e.map(function(e){var t={events:["mousedown","touchdown"],global:false};var i=e.selector,n=e.options,r=n===void 0?t:n;var a=d(i,r);var o=r.events||t.events;var s=r.global?document.body:l;o.forEach(function(e){return s.addEventListener(e,a,false)});return{events:o,options:r,activator:a}}));return function(){if(!l){return}var e=function(e){var t=e.events,i=e.options,n=e.activator;var r=i.global?document.body:l;t.forEach(function(e){return r.removeEventListener(e,n,false)})};i.forEach(e);l=null}};kendo.deepExtend(kendo.util.ripple,{register:e})})()},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.ripple",["util/ripple"],e)})(function(){var e={id:"ripplecontainer",name:"RippleContainer",category:"web",depends:["core"]};(function(e,t){var i=window.kendo,n=i.ui,r=n.Widget,a=e.extend,o=i.util.ripple;var s=r.extend({init:function(e,t){var i=this;r.fn.init.call(i,e);e=i.wrapper=i.element;i.options=a({},i.options,t);i.registerListeners()},options:{name:"RippleContainer",elements:[{selector:".k-button:not(li)"},{selector:".k-list > .k-item",options:{global:true}},{selector:".k-checkbox-label, .k-radio-label"},{selector:".k-checkbox, .k-radio",options:{events:["focusin"],container:function(e){if(/\b(k-checkbox|k-radio)\b/.test(e.className)){return e.nextElementSibling}}}}]},removeListeners:function(){},registerListeners:function(){var e=this;var t=e.element[0];var i=e.options.elements;e.removeListeners();var n=o.register(t,i);e.removeListeners=n},destroy:function(){var e=this;r.fn.destroy.call(e);e.removeListeners()}});n.plugin(s)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("pdfviewer/pdfjs",["kendo.core"],e)})(function(){(function(e,t){var i=e.extend;var n=function(){if(!window.pdfjsLib){var e=window.console;if(e&&e.error){e.error("PDF.JS required.")}return false}kendo.pdfviewer.pdfjs.lib=window.pdfjsLib;return true};i(kendo,{pdfviewer:{pdfjs:{lib:window.pdfjsLib,isLoaded:n}}})})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("pdfviewer/processors/pdfjs-processor",["pdfviewer/pdfjs"],e)})(function(){var e={id:"pdfjs-processor",name:"PDFJS-Processor",category:"framework",depends:["core"]};(function(o,e){var r=window.kendo,t=r.Class,i=o.extend,s=window.atob,l;var n=t.extend({init:function(e,t){var i=this;if(r.pdfviewer.pdfjs.isLoaded()){l=r.pdfviewer.pdfjs.lib}i.file=e.file;i.viewer=t},fetchDocument:function(){var n=this,r=o.Deferred(),a=n.viewer.options.messages.errorMessages;if(!n.file){return r.resolve()}if(n._isBase64Data()&&s){n.file.data=s(n.file.data)}l.getDocument(this.file).promise.then(function(t){var i=[];n.pdf=t;n.pagePromises=[];n._downloadData=o.Deferred();t.getData().then(function(e){var t=new Blob([e],{type:"application/pdf"});n._downloadData.resolve({file:t})});for(var e=1;e<=t.numPages;e++){n.pagePromises.push(t.getPage(e))}Promise.all(n.pagePromises).then(function(e){i=e.map(function(e){var t=e.getViewport({scale:4/3});return{width:t.width,height:t.height}});r.resolve({total:t.numPages,pages:i})}).catch(function(e){n.viewer._triggerError({error:e.message,message:a.parseError})})}).catch(function(e){var t=e.name.includes("Missing");var i=t?a.notFound:a.parseError;n.viewer._triggerError({error:e.message,message:i});if(t){n.viewer._renderBlankPage()}});return r},fetchPageData:function(e){return this.pagePromises[e-1]},downloadFile:function(i){var n=this;r.ui.progress(n.viewer.pageContainer,true);n._downloadData.done(function(e){r.ui.progress(n.viewer.pageContainer,false);var t=new FileReader;t.readAsDataURL(e.file);t.onload=function(){r.saveAs({dataURI:t.result,fileName:i+".pdf",proxyURL:function(){return t.result}})}})},_updateDocument:function(e){if(this.pdf&&this.pdf.loadingTask){this.pdf.loadingTask.destroy()}this.file=e},_isBase64Data:function(){var e=this.file.data,t=/[^A-Z0-9+\/=]/i,i=e&&e.length,n;if(!i||i%4!==0||t.test(e)){return false}n=e.indexOf("=");return n===-1||n===i-1||n===i-2&&e[i-1]==="="},renderTextLayer:function(e){l.renderTextLayer(e)}});i(r.pdfviewer.pdfjs,{processor:n})})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("pdfviewer/processors/dpl-processor",["kendo.core"],e)})(function(){var e={id:"dpl-processor",name:"DPL-Processor",category:"framework",depends:["core"]};(function(a,e){var r=window.kendo,t=a.extend,i=r.Class;var n=i.extend({init:function(e,t){var i=this;i.options=e;i.read=e.read;i.upload=e.upload;i.download=e.download;i.viewer=t},fetchDocument:function(){var t=this,i=a.Deferred(),n=t.viewer.options.messages.errorMessages;if(!t.read){return i.resolve()}a.ajax({type:t.read.type,url:t.read.url,dataType:t.read.dataType,success:function(e){if(typeof e!="string"){e=r.stringify(e)}i.resolve(JSON.parse(e))},error:function(e){t.viewer._triggerError({error:e.responseText,message:n.parseError})}});return i},fetchPageData:function(e){var t=this;var i=a.Deferred();var n=t.viewer.document.pages[e-1];var r={};r[t.read.pageField]=e;if(!n.geometries.length){a.ajax({type:t.read.type,url:t.read.url,data:r,success:function(e){i.resolve(JSON.parse(e))},error:function(e){t.viewer._triggerError({error:e.responseText,message:t.viewer.options.messages.errorMessages.parseError})}})}else{i.resolve(n)}return i},downloadFile:function(e){window.location=this.download.url+"?file="+e},fromJSON:function(e){var t=this.viewer;t._clearPages();t.document=e;t.document.total=t.document.pages.length;t._renderPages();t.resize(true);t.activatePage(1)}});t(r.pdfviewer,{dpl:{processor:n}})})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("pdfviewer/pager",["kendo.core"],e)})(function(){(function(l,e){var o=".kendoPDFViewer",n=kendo.ui.Widget,i="change",r="keydown",a=kendo.support.click,s=480,d=kendo.attr,u=l.proxy,t=l.extend,c=".",f="aria-disabled";var h={wrapperClass:"k-pager-wrap",iconFirst:"k-i-arrow-end-left",iconLast:"k-i-arrow-end-right",iconPrev:"k-i-arrow-60-left",iconNext:"k-i-arrow-60-right",first:"k-pager-first",last:"k-pager-last",nav:"k-pager-nav",disabled:"k-state-disabled"};var p=n.extend({init:function(e,t){var i=this;n.fn.init.call(i,e,t);i.linkTemplate=kendo.template(i.options.linkTemplate);i.element.addClass(h.wrapperClass);i._renderLinks();i._toggleDisabledClass();i._attachEvents()},options:{linkTemplate:'<a href="\\#" aria-label="#=text#" title="#=text#" class="k-button k-button-icon k-flat k-pager-nav #= wrapClass #" data-page="#=pageIdx#"><span class="k-icon #= iconClass #"></span></a>',previousNext:true,input:true,page:1,total:1,messages:{}},events:[i],_pagerLink:function(e,t,i,n){return this.linkTemplate({iconClass:e,text:t,wrapClass:n||"",pageIdx:i})},_renderLinks:function(){var e=this,t=e.options;if(t.previousNext){e.firstLink=l(e._pagerLink(h.iconFirst,t.messages.first,1,h.first));e.prevLink=l(e._pagerLink(h.iconPrev,t.messages.previous,t.page-1));e.nextLink=l(e._pagerLink(h.iconNext,t.messages.next,t.page+1));e.lastLink=l(e._pagerLink(h.iconLast,t.messages.last,t.total,h.last))}e.element.append(e.firstLink);e.element.append(e.prevLink);if(t.input){e._renderInput()}e.element.append(e.nextLink);e.element.append(e.lastLink)},_toggleDisabledClass:function(){var e=this,t=e.options,i=!t.total;if(e.nextLink&&e.prevLink){e.prevLink.toggleClass(h.disabled,i||t.page===1);e.nextLink.toggleClass(h.disabled,i||t.page===t.total);e.lastLink.toggleClass(h.disabled,i||t.page===t.total);e.firstLink.toggleClass(h.disabled,i||t.page===1);e.prevLink.attr(f,i||t.page===1);e.firstLink.attr(f,i||t.page===1);e.nextLink.attr(f,t.page===t.total);e.lastLink.attr(f,t.page===t.total)}if(e.input){e.input.toggleClass(h.disabled,t.total<=1);e.input.attr(f,t.total<=1)}},_attachEvents:function(){var t=this;t.element.on(a+o,c+h.nav,u(t._click,t));t.element.on(r+o,c+h.nav,function(e){if(e.keyCode===kendo.keys.ENTER){t._click(e);e.preventDefault()}});if(t.input){t.input.on(r+o,u(t._keydown,t))}},_click:function(e){var t=l(e.currentTarget);var i=parseInt(t.attr(d("page")),10);if(e.isDefaultPrevented()){return}this._change(i)},_keydown:function(e){var t=e.keyCode,i=kendo.keys,n=l(e.target),r=parseInt(n.val(),10),a=t===i.UP||t===i.DOWN,o=t===i.RIGHT||t===i.LEFT||t===i.BACKSPACE||t===i.DELETE,s=a&&t===i.UP?1:-1;if(a){r+=s}if(t===i.ENTER||a){if(isNaN(r)||r<1||r>this.options.total){r=this.options.page;n.val(r);return}this._change(r);e.preventDefault()}else if(!e.key.match(/^\d+$/)&&!o){e.preventDefault()}},_change:function(e){var t=this;if(e>=1&&e<=t.options.total){t.options.page=e;if(t.input){t.input.val(e)}t.prevLink.attr(d("page"),e-1);t.nextLink.attr(d("page"),e+1);t._toggleDisabledClass()}t.trigger(i,{page:e})},setOptions:function(e){var t=this,i=t.options.total;e=l.extend(t.options,e);n.fn.setOptions.call(t,e);if(e.input){if(i!=e.total){t._renderInput();t.input.on(r+o,u(t._keydown,t))}else{t.input.val(e.total>0?e.page:1)}}if(e.total>1){t.prevLink.attr(d("page"),e.page-1);t.nextLink.attr(d("page"),e.page+1);t.lastLink.attr(d("page"),e.total)}t._toggleDisabledClass()},_renderInput:function(){var e=this,t,i=e.options,n=e.element.parent().width()<=s,r,a=e.element.find(".k-pager-input");if(e.input){e.input.off(o)}t=i.total>0?kendo.format(i.messages.of,i.total):"";if(!n){t+=i.total>1?i.messages.pages:i.messages.page}r='<input class="k-textbox" aria-label="'+i.page+t+'">'+t;if(a.length){a.html(r)}else{e.element.append('<span class="k-pager-input k-label">'+r+"</span>")}e.input=e.element.find("input").val(i.total>0?i.page:1)},destroy:function(){this.element.off(o);if(this.input){this.input.off(o)}n.fn.destroy.call(this)}});t(kendo.pdfviewer,{Pager:p})})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("pdfviewer/toolbar",["kendo.toolbar","kendo.combobox","pdfviewer/pager"],e)})(function(){(function(s,e){var l=window.kendo,a=s.extend,n=s.proxy,t="action",d="k-flat",r="keydown",i=l.support.click,o="change",u="zoomin",c="zoomout",f=l.toolbar.Item,h=l.ui.ToolBar,p={auto:"auto",actual:"actual",fitToWidth:"fitToWidth",fitToPage:"fitToPage"},v={zoomOutIcon:"k-i-zoom-out",zoomInIcon:"k-i-zoom-in",zoomButtons:"k-button-icon k-flat",zoomOverflowButtons:"k-button-icontext k-overflow-button",overflowHidden:"k-overflow-hidden"};var m=l.template('<a href="\\#" aria-label="#=text#" title="#=text#" data-command="#=command#" class="k-button #=className#"><span class="k-icon #= iconClass #"></span> ${showText ? text : ""}</a>');var g=l.template('<select title="#=zoomLevel#">'+"#for(var zoomIndex in zoomLevels){#"+"# var zoomLevel = zoomLevels[zoomIndex]; #"+'<option value="#= zoomLevel.percent || (zoomLevel + "%") #">${zoomLevel.text ? zoomLevel.text : zoomLevel + "%"}</option>'+"#}#"+"</select>");var _={pager:{type:"pager",overflow:"never",command:"PageChangeCommand"},spacer:{type:"spacer"},zoom:{type:"zoom",command:"ZoomCommand",zoomInOut:true,combobox:{zoomLevels:[50,100,150,200,300,400]},enable:false},toggleSelection:{type:"buttonGroup",attributes:{class:"k-toggle-selection-group"},buttons:[{togglable:true,text:"Enable Selection",command:"EnableSelectionCommand",icon:"cursor",showText:"overflow",name:"toggleSelection",group:"toggle-pan",enable:false},{togglable:true,text:"Enable Panning",command:"EnablePanCommand",icon:"hand",showText:"overflow",name:"togglePan",group:"toggle-pan",selected:true,enable:false}]},spacer2:{type:"spacer"},search:{type:"button",text:"Search",command:"OpenSearchCommand",icon:"search",name:"search",showText:"overflow",enable:false},open:{type:"button",text:"Open",showText:"overflow",name:"open",icon:"folder-open",command:"OpenCommand"},download:{type:"button",text:"Download",showText:"overflow",name:"download",icon:"download",command:"DownloadCommand",enable:false},print:{type:"button",text:"Print",showText:"overflow",name:"print",icon:"print",command:"PrintCommand",enable:false}};var b=a({},_,{exportAs:{type:"button",text:"Export",showText:"overflow",name:"exportAs",icon:"image-export",command:"ExportCommand"}});var w=f.extend({init:function(e,t){var i=s("<div />");this.options=a(true,e,t.options.pager);this.toolbar=t;this.toolbar.pager=new l.pdfviewer.Pager(i,a({},e,{change:n(this._change,this)}));this.element=i;this.element.on(r,n(this._keydown,this));this.attributes();this.addUidAttr();this.addOverflowAttr()},_change:function(e){if(this.options.change&&this.options.change(e.page)){return}this.toolbar.action({command:"PageChangeCommand",options:{value:e.page}})},_keydown:function(e){var t=this,i=s(e.target),n=e.keyCode,r=t.element.find(":kendoFocusable"),a=r.index(i),o=e.shiftKey?-1:1;if(n===l.keys.TAB&&r[a+o]){r[a+o].focus();e.preventDefault();e.stopPropagation()}}});l.toolbar.registerComponent("pager",w);function k(e,t,i){var n=i?v.zoomOverflowButtons:v.zoomButtons;e.append(m({text:t.zoomOut,command:c,iconClass:v.zoomOutIcon,showText:i,className:n}));e.append(m({text:t.zoomIn,command:u,iconClass:v.zoomInIcon,showText:i,className:n}))}var y=f.extend({init:function(e,t){this._init(e,t);this.toolbar.zoom=this;if(t.options.scale){this._initValue=t.options.scale*100+"%"}this._appendElements();this._click=l.throttle(this._click.bind(this),200);this._keydown=l.throttle(this._keydown.bind(this),200);this.element.on(i,".k-button",this._click);this.element.on(r,".k-button",this._keydown);this.attributes();this.addUidAttr();this.addOverflowAttr();this.enable(e.enable)},_init:function(e,t){var i=s("<div />");this.options=a(true,e,{messages:t.options.messages.zoom});this.toolbar=t;this.element=i},_appendElements:function(){var e=this.options;if(e.zoomInOut){k(this.element,e.messages,false)}if(e.combobox){this._buildComboBox()}},_buildComboBox:function(){var e=this,t,i=e.options.messages,n=e.options.combobox,r=[{percent:p.auto,text:i.autoWidth},{percent:p.actual,text:i.actualWidth},{percent:p.fitToWidth,text:i.fitToWidth},{percent:p.fitToPage,text:i.fitToPage}];r=r.concat(n.zoomLevels);t=s(g({zoomLevels:r,zoomLevel:i.zoomLevel}));if(!l.support.mobileOS){t=t.kendoComboBox(a({autoWidth:true,clearButton:false,value:e._initValue},n)).getKendoComboBox();e.element.append(t.wrapper);e.combobox=t;e._currentValue=t.value()}else{e.element.append(t)}t.bind(o,l.throttle(e.change.bind(e),300))},change:function(e){var t=e.sender?e.sender.value():e.target.value,i;if(t.toString().match(/^[0-9]+%?$/)){i=parseInt(t.replace("%",""),10)/100}else if(!p[t]){if(this.combobox){this.combobox.value(this._currentValue)}e.preventDefault();return}this._currentValue=t;this.toolbar.action({command:"ZoomCommand",options:{scale:i||t}})},_buttonCommand:function(e){var t=s(e).closest(".k-button"),i=t.data("command");this.toolbar.action({command:"ZoomCommand",options:{zoomIn:i===u,zoomOut:i===c,updateComboBox:true}})},_click:function(e){this._buttonCommand(e.target)},_keydown:function(e){var t=e.keyCode,i=l.keys;if(t===i.ENTER){this._buttonCommand(e.target);e.preventDefault()}},enable:function(e){var t=this.element;t.find(".k-button, select").toggleClass("k-state-disabled",!e);if(this.combobox){this.combobox.enable(e)}},destroy:function(){if(this.combobox){this.combobox.destroy()}}});var x=y.extend({_init:function(e,t){var i=s("<li></li>");this.options=a(true,e,{messages:t.options.messages.zoom});this.toolbar=t;this.element=i},_appendElements:function(){var e=this.options;if(e.zoomInOut){k(this.element,e.messages,true)}},overflowHidden:function(){this.element.addClass(v.overflowHidden)}});l.toolbar.registerComponent("zoom",y,x);var C=h.extend({init:function(e,t){var i=this;var n=t.items&&t.items.length?t.items:Object.keys(_);i.options=t;t.items=i._updateItems(n);h.fn.init.call(i,e,t);i.bind({click:i._click,toggle:i._click});t.viewer.bind({update:i._update.bind(i)})},events:[t],_updateItems:function(e){var a=this;var o=this.options.messages;return e.map(function(e){var t=s.isPlainObject(e)&&Object.keys(e).length===1&&e.name;e=t?e.name:e;var i=s.isPlainObject(e)?e:b[e];var n;var r=i.name;if(i.type==="buttonGroup"){i.buttons=a._updateItems(i.buttons)}else if(i.type!=="pager"){n={name:r,attributes:{"aria-label":o[r],title:o[r],"data-command":i.command,class:d},overflow:i.overflow}}else{n={overflow:"never"}}l.deepExtend(i,n);return i})},_click:function(e){var t=s(e.target).data("command");if(!t){return}this.action({command:t,options:e.options})},_update:function(e){var t={page:e.page||1,total:e.total||1};if(this.zoom){this.zoom.enable(!e.isBlank);if(e.action==="zoom"){this._updateZoomComboBox(e.zoom)}}if((e.action==="pagechange"||e.isBlank)&&this.pager){this.pager.setOptions(t)}this.enable(this.wrapper.find(".k-toggle-selection-group"),!e.isBlank);this.enable(this.wrapper.find("[data-command='OpenSearchCommand']"),!e.isBlank);this.enable(this.wrapper.find("[data-command='DownloadCommand']"),!e.isBlank);this.enable(this.wrapper.find("[data-command='PrintCommand']"),!e.isBlank)},_updateZoomComboBox:function(e){var t=e===p.auto||e===p.actual;if(!t){e=Math.round(e*100)+"%"}if(this.zoom&&this.zoom.combobox){this.zoom._currentValue=e;this.zoom.combobox.value(e)}},action:function(e){this.trigger(t,e)},destroy:function(){if(this.pager){this.pager.destroy()}if(this.zoom){this.zoom.destroy()}h.fn.destroy.call(this)}});a(l.pdfviewer,{Toolbar:C,DefaultTools:_})})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("pdfviewer/page",["kendo.drawing"],e)})(function(){(function(r,e){var i=r.extend,t=r.noop,l=kendo.drawing,n=l.Group,a=l.Surface,o="render",s=kendo.Class;var d={Path:"path",MultiPath:"multipath",Rect:"rect",Image:"image",Text:"text"};var u=s.extend({init:function(e,t){this.viewer=t;this.processor=e.processor;this.options=e;this.pageNumber=e.number;this.element=r("<div class='k-page' />");this.element.attr(kendo.attr("number"),this.pageNumber);this._updatePageSize(e);this.width=e.width;this.height=e.height},resize:function(e){var t=this.element;this._updatePageSize({width:Math.min(t.width()*e,this.width),height:Math.min(t.height()*e,this.height)})},_updatePageSize:function(e){this.element.width(e.width).height(e.height)},destroy:function(){kendo.destroy(this.element)},render:t});var c=u.extend({draw:function(){var e=this,t=e.options.geometries;e.group=new n;e.surface.draw(e.group);e._drawGeometries(t);e.viewer.trigger(o,{page:this});kendo.ui.progress(e.element,false)},load:function(){var t=this;if(t.loaded||!t.processor){return}t.processor.fetchPageData(t.pageNumber).then(function(e){t.options=e;t._initSurface();t.draw()});t.loaded=true},_initSurface:function(){var e={width:this.element.width(),height:this.element.height()};var t=i({width:this.width,height:this.height},this.viewer.options.view);this.surface=new a(this.element,t);this._updatePageSize(e)},_drawGeometries:function(e){var t=this,i;if(!e){return}for(var n=0;n<=e.length;n++){var r=e[n];if(!r){continue}switch(r.type){case d.Path:case d.MultiPath:i=t._drawPath(r);break;case d.Rect:i=t._drawRect(r);break;case d.Image:i=t._drawImage(r);break;case d.Text:i=t._drawText(r);break;default:i=null;break}if(i){t.group.append(i)}}},_drawRect:function(e){var t=new kendo.geometry.Rect(e.point,e.size);return new l.Rect(t,{transform:this._getMatrix(e.transform),fill:e.fillOptions,stroke:e.strokeOptions})},_drawImage:function(e){var t=new kendo.geometry.Rect(e.point,e.size);return new l.Image(e.src,t,{transform:this._getMatrix(e.transform)})},_drawText:function(e){var t={transform:this._getMatrix(e.transform),stroke:e.strokeOptions,fill:e.fillOptions,font:e.font};return new kendo.drawing.Text(e.content,e.point,t)},_drawPath:function(e){var t={transform:this._getMatrix(e.transform),stroke:e.strokeOptions,fill:e.fillOptions};var i=new l.MultiPath(t);for(var n=0;n<e.paths.length;n++){var r=e.paths[n];if(!r.segments){return}i.moveTo.apply(i,r.point);for(var a=0;a<r.segments.length;a++){var o=r.segments[a];var s=o.points.length===1?i.lineTo:i.curveTo;s.apply(i,o.points)}if(r.closed){i.close()}}return i},_getMatrix:function(e){var t=Object.create(kendo.geometry.Matrix.prototype);kendo.geometry.Matrix.apply(t,e);return t}});var f=u.extend({init:function(e,t){var i=this,n;n=r("<canvas style='width: 100%; height: 100%;' />");i.canvas=n.get(0);u.fn.init.call(i,e,t);i.canvas.width=i.width;i.canvas.height=i.height;i.element.append(n)},load:function(t,e){var i=this,n=r.Deferred();if(i._scale===t&&!e){return}else if(i._scale&&i._scale!==t&&!e){i._scale=t;i.render(t);return n.resolve(i)}if(i.processor){i.processor.fetchPageData(i.pageNumber).then(function(e){i._page=e;i._renderPromise=i.render(t).then(function(){i.viewer.trigger(o,{page:i})});n.resolve(i)})}i._scale=t;i.loaded=true;return n},render:function(e){var t=this;var i=this.canvas.getContext("2d"),n=this._page.getViewport({scale:e});this._scale=e;this.canvas.width=n.width;this.canvas.height=n.height;if(this._renderTask){this._renderTask.cancel();this._renderTask=null}this._updatePageSize({width:n.width,height:n.height});this._renderTask=this._page.render({canvasContext:i,viewport:n});this._renderTextLayer(n);return this._renderTask.promise.then(function(){t._renderTask=null}).catch(function(){})},_renderTextLayer:function(i){var n=this;var e=n._page;if(n.textLayer){n.textLayer.remove()}n.textLayer=r("<div class='k-text-layer'></div>").get(0);n.element.append(n.textLayer);e.getTextContent({normalizeWhitespace:true}).then(function(e){r(n.textLayer).css({height:i.height,width:i.width}).html("");var t={textContent:e,container:n.textLayer,viewport:i,textDivs:[],enhanceTextSelection:true};n.processor.renderTextLayer(t)})}});i(kendo.pdfviewer.dpl,{geometryTypes:d,Page:c});i(kendo.pdfviewer.pdfjs,{Page:f})})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("pdfviewer/search",["kendo.core"],e)})(function(){(function(a,e){var t=kendo.Class,i=a.extend,n=a.isArray;var r=t.extend({init:function(e){var t=this;t.options=i({},t.options,e);t.processDom()},options:{highlightClass:"k-search-highlight",charClass:"k-text-char"},processDom:function(){var t=this;t.targets=n(t.options.target)?t.options.target:[t.options.target];t.textNodes=[];t.charIndex=0;t.text="";t.targets.forEach(function(e){t.traverseToTextNode(e)});for(var e=0;e<t.textNodes.length;e++){t.processTextNode(t.textNodes[e])}},traverseToTextNode:function(e){var t=this;if(e.nodeType===3){t.textNodes.push(e)}else{for(var i=0;i<e.childNodes.length;i++){t.traverseToTextNode(e.childNodes[i])}}},processTextNode:function(e){var t=this;var i=e.textContent;var n;t.text=t.text+i;if(i.length>0){n=a(e).wrap("<span>").parent();n.empty();t.splitChars(n.get(0),i);n.children().unwrap()}},splitChars:function(e,t){var i=this;var n="";for(var r=0;r<t.length;r++){n=n+"<span class='"+i.options.charClass+"' "+kendo.attr("char-index")+"="+i.charIndex+">"+t[r]+"</span>";i.charIndex++}e.innerHTML=n},search:function(e,t){var i=this;var n=new RegExp(e,!t?"gi":"g");var r;i.matches=[];i.resetMark();i.resetHighlight();i.resetMatchIndex();if(e===""){return}r=n.exec(i.text);while(r){i.matches.push({startOffset:r.index,endOffset:r.index+r[0].length});r=n.exec(i.text)}i.highlightAll();i.mark()},highlightAll:function(){var r=this;r.matches.forEach(function(e,t){var i=e.startOffset;var n=e.endOffset;r.highlight(i,n,t+1)})},highlight:function(e,t,i){var n=this;for(var r=e;r<t;r++){a(n.targets).find("."+n.options.charClass+"["+kendo.attr("char-index")+"="+r+"]").addClass(n.options.highlightClass).attr(kendo.attr("match-index"),i)}},resetHighlight:function(){var e=this;a(e.targets).find("."+e.options.highlightClass).removeClass(e.options.highlightClass)},resetMatchIndex:function(){var e=this;a(e.targets).find("."+e.options.charClass+"["+kendo.attr("match-index")+"]").removeAttr(kendo.attr("match-index"))},mark:function(){var e=this;if(!e.currentIndex&&e.currentIndex!==0){e.currentIndex=0}else if(e.currentIndex>e.matches.length){e.currentIndex=e.matches.length}else{e.resetMark()}a(e.targets).find("."+e.options.charClass+"["+kendo.attr("match-index")+"="+e.currentIndex+"]").wrapInner("<mark>")},resetMark:function(){var e=this;a(e.targets).find("mark").contents().unwrap()},nextMatch:function(){var e=this;e.currentIndex++;if(e.currentIndex>e.matches.length){e.currentIndex=1}e.mark()},previousMatch:function(){var e=this;e.currentIndex--;if(e.currentIndex<1){e.currentIndex=e.matches.length}e.mark()},getMarkedIndex:function(){return this.matches.length?this.currentIndex:0},getFirstMarked:function(){return a(this.targets).find("mark").eq(0)},destroy:function(){var e=this;e.resetMark();a(e.targets).children("span:not(."+e.options.charClass+")").each(function(e,t){a(t).text(a(t).text())})}});i(kendo.pdfviewer,{SearchDOM:r})})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("pdfviewer/dialogs",["kendo.dialog","kendo.window","kendo.binder","kendo.numerictextbox","kendo.dropdownlist"],e)})(function(){(function(r,e){var a=window.kendo,o=r.extend,t=a.Class,i={svg:".svg",png:".png"},s=a.keys;var n=t.extend({init:function(e){this.options=o(e,{actions:[{text:e.messages.dialogs.okText}]});this._dialog=r("<div />").kendoDialog(this.options).getKendoDialog()},open:function(){this._dialog.center().open()}});var l=t.extend({init:function(e){this.options=o(e,this.options,{fileFormats:[{description:e.messages.dialogs.exportAsDialog.png,extension:i.png},{description:e.messages.dialogs.exportAsDialog.svg,extension:i.svg}],title:e.messages.dialogs.exportAsDialog.title,open:function(){this.center()}});this._initializeDialog();return this},options:{extension:i.png,autoFocus:true,resizable:false,modal:{preventScroll:true},width:"90%",maxWidth:520,template:"<div class='k-edit-label'><label>#: messages.exportAsDialog.labels.fileName #:</label></div>"+"<div class='k-edit-field'>"+"<input class='k-textbox' data-bind='value: name' />"+"</div>"+"<div>"+"<div class='k-edit-label'><label>#: messages.exportAsDialog.labels.saveAsType #:</label></div>"+"<div class='k-edit-field'>"+"<select data-role='dropdownlist' class='k-file-format' "+"data-text-field='description' "+"data-value-field='extension' "+"data-bind='value: extension, source: fileFormats'></select>"+"</div>"+"</div>"+"<div class='k-edit-label'><label>#: messages.exportAsDialog.labels.page #:</label></div>"+"<div class='k-edit-field'>"+"<input data-role='numerictextbox' data-format='n0' data-min='1' data-max='#: total #' data-bind='value: page' />"+"</div>"+"<div class='k-action-buttons'>"+"<button class='k-button k-primary' data-bind='click: apply'>#: messages.save #</button>"+"<button class='k-button' data-bind='click: close'>#: messages.cancel #</button>"+"</div>"},_updateModel:function(e){if(e.pagesCount){this.viewModel.set("pagesCount",e.pagesCount)}if(e.page){this.viewModel.set("page",e.page)}},_initializeDialog:function(){var e=this;var t=e.options;var i=t.messages.dialogs;var n=r("<div class='k-pdf-viewer-window k-action-window k-popup-edit-form' />").append(a.template(t.template)({total:t.pagesCount,messages:i})).kendoWindow(t).getKendoWindow();e.viewModel=a.observable({title:i.exportAsDialog.title,name:i.exportAsDialog.defaultFileName,extension:t.extension,fileFormats:t.fileFormats,pagesCount:t.pagesCount,page:1,apply:e.apply.bind(this),close:function(){n.close()}});e._dialog=n;a.bind(n.element,e.viewModel);return n},open:function(){this._dialog.center().open()},apply:function(){this._dialog.close();this.options.apply({fileName:this.viewModel.name+this.viewModel.extension,extension:this.viewModel.extension,page:this.viewModel.page})}});var d=t.extend({init:function(e){var t=this;t.options=o({},e,t.options)},options:{resizable:false,template:"<div class='k-search-container'>"+"<button class='k-button k-button-icon k-flat k-search-dialog-draghandle'><span class='k-icon k-i-handler-drag'></span></button>"+"<span class='k-textbox'>"+"<input class='k-search-dialog-input' data-bind='value: boundValue, events: { keyup: onKeyup, input: onInput }' aria-label='#: messages.inputLabel #' title='#: messages.inputLabel #' />"+"<button class='k-button k-button-icon k-flat k-match-case-button' data-bind='css: {k-state-selected: matchCase}, click: matchCaseClick' aria-label='#: messages.matchCase #' title='#: messages.matchCase #'><span class='k-icon k-i-convert-lowercase'></span></button>"+"</span>"+"<span class='k-search-matches'><span data-bind='text: matchIndex'></span> #: messages.of # <span data-bind='text: matches'></span></span>"+"<button class='k-button k-button-icon k-flat' data-bind='click: prev' aria-label='#: messages.previous #' title='#: messages.previous #'><span class='k-icon k-i-arrow-up'></span></button>"+"<button class='k-button k-button-icon k-flat' data-bind='click: next' aria-label='#: messages.next #' title='#: messages.next #'><span class='k-icon k-i-arrow-down'></span></button>"+"<button class='k-button k-button-icon k-flat' data-bind='click: close' aria-label='#: messages.close #' title='#: messages.close #'><span class='k-icon k-i-close'></<span></button>"+"</div>"},open:function(){var e=this;if(!e.dialog){e._initializeDialog()}e.dialog.open()},_initializeDialog:function(){var e=this;var t=a.template(e.options.template);var i=r("<div class='k-pdf-viewer-search-dialog'></div>").append(t({messages:e.options.messages}));var n={top:e.options.position.top+16,left:e.options.position.left+16};e.dialog=new a.ui.Window(i,o({},e.options,{autoFocus:false,title:false,position:{top:n.top,left:n.left},minHeight:30,draggable:{dragHandle:".k-search-dialog-draghandle"},activate:function(e){e.sender.element.find(".k-search-dialog-input").focus()}}));e.searchModel=a.observable({boundValue:"",searchText:"",matchCase:false,matchIndex:0,matches:0,matchCaseClick:function(){this.set("matchCase",!this.matchCase)},next:e.options.next,prev:e.options.prev,close:function(){this.set("boundValue","");e.dialog.close()},onKeyup:function(e){var t=e.keyCode;var i=e.shiftKey?this.prev:this.next;if(t===s.ENTER){i();e.preventDefault()}},onInput:function(e){this.set("searchText",e.target.value)}});a.bind(e.dialog.element,e.searchModel)}});o(a.pdfviewer,{dialogs:{ErrorDialog:n,ExportAsDialog:l,SearchDialog:d}})})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("pdfviewer/commands",["kendo.upload"],e)})(function(){(function(s,e){var i=window.kendo,n=s.proxy,r=s.extend,a=s.parseJSON,o=i.ui.progress,t=i.Class,l="open",d="zoomStart",u="zoomEnd";var c=t.extend({init:function(e){this.options=e;this.viewer=e.viewer;this.errorMessages=this.viewer.options.messages.errorMessages}});var f=c.extend({init:function(e){c.fn.init.call(this,e);this.upload=this.viewer.processor.upload},exec:function(){(this.viewer._upload||this._initUpload()).element.click()},_initUpload:function(){var e={select:n(this._onSelect,this),success:n(this._onSuccess,this),error:n(this._onError,this),complete:n(this._onComplete,this),showFileList:false,multiple:false,validation:{allowedExtensions:[".pdf"]}};if(this.upload){r(e,{async:{saveUrl:this.upload.url,autoUpload:true,saveField:this.upload.saveField}})}var t=s('<input name="files" accept=".pdf" type="file" />').kendoUpload(e).getKendoUpload();this.viewer._upload=t;return t},_onComplete:function(){o(this.viewer.pageContainer,false)},_onSuccess:function(e){var t=a(e.response);if(s.isPlainObject(t)){this.viewer.processor.fromJSON(t)}else{this.viewer._triggerError({error:t,message:this.errorMessages.parseError})}},_onError:function(e){this.viewer._triggerError({error:e.XMLHttpRequest.responseText,message:this.errorMessages.notSupported})},_onSelect:function(e){var i=this;var t=e.files[0];o(i.viewer.pageContainer,true);if(i.viewer.trigger(l,{file:t})||i.upload){return}else if(t.extension.toLowerCase()!==".pdf"){i.viewer._triggerError({error:t,message:i.errorMessages.notSupported});return}var n=new FileReader;n.onload=function(e){var t=e.target.result;i.viewer.fromFile(t)};n.onerror=function(){i.viewer._triggerError({error:t,message:i.errorMessages.parseError})};n.readAsArrayBuffer(t.rawFile)}});var h=c.extend({exec:function(){var e=this.options.value;this.viewer.activatePage(e)}});var p=c.extend({exec:function(){if(!this.viewer.document){this.viewer._triggerError({message:this.errorMessages.notFound});return}var e=this.viewer.document.info&&this.viewer.document.info.title||this.viewer.options.messages.defaultFileName;this.viewer.processor.downloadFile(e)}});var v=c.extend({init:function(e){e=s.extend(e,this.options);c.fn.init.call(this,e)},exec:function(){var e=this.viewer._saveDialog||this._initDialog();e._updateModel({pagesCount:this.viewer.document&&this.viewer.document.total||1,page:this.viewer.options.page});e.open()},apply:function(e){var t=e.extension;if(t===".png"){this.viewer.exportImage(e)}else if(t===".svg"){this.viewer.exportSVG(e)}},_initDialog:function(){this.viewer._saveDialog=new i.pdfviewer.dialogs.ExportAsDialog({apply:this.apply.bind(this),pagesCount:this.viewer.document&&this.viewer.document.total||1,messages:this.viewer.options.messages});return this.viewer._saveDialog}});var m=c.extend({exec:function(){var e=this,t=e.viewer;t._toggleSelection(true)}});var g=c.extend({exec:function(){var e=this,t=e.viewer;t._toggleSelection(false)}});var _=c.extend({init:function(e){var t=this;t.viewer=e.viewer;if(!t.viewer.searchDialog){t.viewer.searchDialog=new i.pdfviewer.dialogs.SearchDialog({position:{top:t.viewer.pageContainer.offset().top,left:t.viewer.pageContainer.offset().left},messages:t.viewer.options.messages.dialogs.search,open:n(t._open,t),next:n(t._next,t),prev:n(t._prev,t),close:n(t._close,t)})}c.fn.init.call(t,e)},exec:function(){var e=this;e.viewer.searchDialog.open()},_open:function(){var e=this;e.changeHandler=n(e._change,e);e.zoomStartHandler=n(e._closeDialog,e);e.openFileHandler=n(e._closeDialog,e);if(!e.viewer._searchDOM){e.viewer._initSearchDOM();e.viewer.searchDialog.searchModel.bind("change",e.changeHandler);e.viewer.bind("zoomStart",e.zoomStartHandler);e.viewer.bind("open",e.openFileHandler)}},_close:function(){var e=this;var t=e.viewer._searchDOM;e.viewer.searchDialog.searchModel.unbind("change",e.changeHandler);e.viewer.unbind("zoomStart",e.zoomStartHandler);e.viewer.unbind("open",e.openFileHandler);t.destroy();delete e.viewer._searchDOM;e._updateSearchModel()},_change:function(e){var t=this;var i=t.viewer._searchDOM;var n=e.field;var r=t.viewer.searchDialog.searchModel;var a=r[n];if(!i){return}switch(n){case"searchText":i.search(a,r.matchCase);t._updateSearchModel();break;case"matchCase":i.search(r.searchText,a);t._updateSearchModel();break;default:break}},_next:function(){var e=this;var t=e.viewer._searchDOM;if(t.matches&&t.matches.length){t.nextMatch();e._updateSearchModel()}},_prev:function(){var e=this;var t=e.viewer._searchDOM;if(t.matches&&t.matches.length){t.previousMatch();e._updateSearchModel()}},_updateSearchModel:function(){var e=this;var t=e.viewer._searchDOM;var i=e.viewer.searchDialog.searchModel;if(t){i.set("matches",t.matches.length);i.set("matchIndex",t.getMarkedIndex());e._scrollToMark()}else{i.set("searchText","");i.set("matches",0);i.set("matchIndex",0);i.set("matchCase",false)}},_scrollToMark:function(){var e=this;var t=e.viewer._searchDOM;var i=t.getFirstMarked();var n=e.viewer._scroller;var r;if(!i.length){return}r=i.offset().top-n.scrollElement.offset().top-100;n.scrollTo(n.scrollLeft,r*-1)},_closeDialog:function(){var e=this;e.viewer.searchDialog.dialog.close()}});var b=c.extend({exec:function(){var i=this,e=i.options,n=i.viewer,r=e.scale,a=0,o=i.viewer._pageNum,s=n.pageContainer[0].clientHeight,l=1,d=[];if(n.processingLib==="dpl"){return}r=i._calculateZoom();var t=function(){var e=i.viewer._scroller,t=n._scrollingStarted;if(e&&e.scrollTop>e.scrollHeight()){e._resize()}if(!t){n.activatePage(o);n._scrollingStarted=false}};if(!r){return}n.zoomScale=r;n._scrollingStarted=false;if(n.pages){n.pages.forEach(function(e){var t;if(n._visiblePages.indexOf(e)!==-1&&e.loaded){d.push(e.render(r));t=e._page.getViewport({scale:r}).height}else{e.resize(r);t=e.element.height()}a+=t;if(a<=s){l++}});if(n._visiblePagesCount!=l){n._visiblePagesCount=l;n._loadVisiblePages()}}Promise.all(d).then(function(){t();i._triggerZoomEnd(r)}).catch(function(){t();i._triggerZoomEnd(r)})},_calculateZoom:function(){var e=this.options,t=this.viewer,i=t.options,n=t.pageContainer,r=t._visiblePages&&t._visiblePages[0].canvas,a=e.scale,o=a,s;t._allowResize=false;t._autoFit=false;if(e.zoomIn){o=a=t.zoomScale+i.zoomRate}else if(e.zoomOut){o=a=t.zoomScale-i.zoomRate}else if(a==="auto"){t._allowResize=true;o=t._autoZoomScale}else if(a==="actual"){o=1}else if(a==="fitToWidth"){t._allowResize=true;t._autoFit="fitToWidth";o=n.width()/(r.width/t.zoomScale)}else if(a==="fitToPage"){t._allowResize=true;t._autoFit="fitToPage";o=n.height()/(r.height/t.zoomScale)}s=a<i.zoomMin||a>i.zoomMax;if(s||t.trigger(d,{scale:a})){return}if(e.updateComboBox&&t.toolbar){t.toolbar._updateZoomComboBox(a)}return o},_triggerZoomEnd:function(e){var t=this,i=t.viewer;i.trigger(u,{scale:e})}});var w=c.extend({init:function(e){c.fn.init.call(this,e)},exec:function(){var e=this;if(!e.viewer.document){e.viewer._triggerError({message:this.errorMessages.notFound});return}o(e.viewer.pageContainer,true);e._renderPrintContainer();e._loadAllPages().then(n(e.processAfterRender,e))},_renderPrintContainer:function(){this.printContainer=s("<div></div>")},_loadAllPages:function(){var e=this;var t=e.viewer.pages;var i=[];var n=[];var r=s.Deferred();e._originalScale=e.viewer.zoom();function a(e){n.push(e._renderPromise)}for(var o=0;o<t.length;o++){i.push(t[o].load(3,true).then(a))}Promise.all(i).then(function(){r.resolve(n)});return r},processAfterRender:function(e){var t=this;Promise.all(e).then(function(){t._renderPrintPages();setTimeout(function(){t._printDocument();t.viewer.zoom(t._originalScale);o(t.viewer.pageContainer,false);delete t._originalScale},0)})},_renderPrintPages:function(){var e=this.viewer.pages;for(var t=0;t<e.length;t++){this._renderPrintImage(e[t])}},_renderPrintImage:function(e){var t=e.canvas;var i=s("<div></div>");var n="<img src='"+t.toDataURL()+"' width='"+e.width+"px' height='"+e.height+"px' />";i.append(n);this.printContainer.append(i)},_printDocument:function(){var e=this;var t=e.viewer.pages;var i=t[0].width;var n=t[0].height;var r=window.open("","","innerWidth="+i+",innerHeight="+n+"location=no,titlebar=no,toolbar=no");if(!r){e.viewer._triggerError({message:e.errorMessages.popupBlocked});return}r.document.write(e.printContainer.html());r.document.close();r.focus();r.print();r.close()}});r(i.pdfviewer,{OpenCommand:f,PageChangeCommand:h,DownloadCommand:p,EnableSelectionCommand:m,EnablePanCommand:g,ExportCommand:v,PrintCommand:w,OpenSearchCommand:_,ZoomCommand:b})})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.pdfviewer",["kendo.mobile.scroller","pdfviewer/processors/pdfjs-processor","pdfviewer/processors/dpl-processor","pdfviewer/toolbar","pdfviewer/page","pdfviewer/search","pdfviewer/dialogs","pdfviewer/commands"],e)})(function(){var e={id:"pdfviewer",name:"PDFViewer",category:"web",description:"PDFViewer to display pdfs in the browser",depends:["core","window","dialog","toolbar","mobile.scroller","upload","combobox","drawing","binder","dropdownlist","numerictextbox"]};(function(r,i){var e=".kendoPDFViewer",o=window.kendo,t=o.ui,n=r.proxy,s=r.extend,l=o.drawing,d=r.extend({PLUS:187,MINUS:189,ZERO:48,NUMPAD_ZERO:96},o.keys),u,a=t.Widget,c=o.ui.progress,f="scroll",h="render",p="open",v="error",m="focus"+e,g="keydown"+e,_="DOMMouseScroll"+e+" mousewheel"+e,b="update",w=1.25,k="pagechange",y="zoomStart",x="zoomEnd",C="ZoomCommand",S="#ffffff",T="tabindex",D={pdfjs:"pdfjs",dpl:"dpl"},A={viewer:"k-pdf-viewer k-widget",scroller:"k-canvas k-list-scroller",enableTextSelection:"k-enable-text-select",enablePanning:"k-enable-panning",highlightClass:"k-search-highlight",charClass:"k-text-char"};var E=a.extend({init:function(e,t){var i=this;a.fn.init.call(i,e,o.deepExtend({},this.options,t));i._wrapper();if(i.options.toolbar){i._renderToolbar()}i._initProcessor(t||{});i._renderPageContainer();i._loadDocument();i._tabindex();o.notify(i,o.ui)},events:[h,p,v,y,x],options:{name:"PDFViewer",view:{type:"canvas"},pdfjsProcessing:{file:null},dplProcessing:{read:{url:null,type:"GET",dataType:"json",pageField:"pageNumber"},upload:{url:null,saveField:"file"},download:{url:null},loadOnDemand:false},toolbar:{items:[]},width:1e3,height:1200,page:1,defaultPageSize:{width:794,height:1123},scale:null,zoomMin:.5,zoomMax:4,zoomRate:.25,messages:{defaultFileName:"Document",toolbar:{zoom:{zoomLevel:"zoom level",zoomOut:"Zoom Out",zoomIn:"Zoom In",actualWidth:"Actual Width",autoWidth:"Automatic Width",fitToWidth:"Fit to Width",fitToPage:"Fit to Page"},open:"Open",exportAs:"Export",download:"Download",pager:{first:"Go to the first page",previous:"Go to the previous page",next:"Go to the next page",last:"Go to the last page",of:" of {0} ",page:"page",pages:"pages"},print:"Print",toggleSelection:"Enable Selection",togglePan:"Enable Panning",search:"Search"},errorMessages:{notSupported:"Only pdf files allowed.",parseError:"PDF file fails to process.",notFound:"File is not found.",popupBlocked:"Popup is blocked."},dialogs:{exportAsDialog:{title:"Export...",defaultFileName:"Document",pdf:"Portable Document Format (.pdf)",png:"Portable Network Graphics (.png)",svg:"Scalable Vector Graphics (.svg)",labels:{fileName:"File name",saveAsType:"Save as",page:"Page"}},okText:"OK",save:"Save",cancel:"Cancel",search:{inputLabel:"Search Text",matchCase:"Match Case",next:"Next Match",previous:"Previous Match",close:"Close",of:"of"}}}},_wrapper:function(){var e=this,t=e.options;e.wrapper=e.element;e.wrapper.width(t.width).height(t.height).addClass(A.viewer).on(m,n(e._focus,e)).on(g,n(e._keydown,e));e._allowResize=e.options.scale===null;e._autoZoomScale=w;e.zoomScale=e.options.scale||e._autoZoomScale;e._resizeHandler=o.onResize(function(){e.resize()});e._pageNum=e.options.page},_focus:function(e){if(this.toolbar){this.toolbar.wrapper.focus()}else{this.pageContainer.focus()}e.preventDefault()},_keydown:function(e){var t=[d.PLUS,d.NUMPAD_PLUS],i=[d.MINUS,d.NUMPAD_MINUS],n=[d.ZERO,d.NUMPAD_ZERO],r=false,a={command:C,options:{updateComboBox:true}};if(!e.ctrlKey||this._blankPage||this.processingLib===D.dpl){return}if(t.includes(e.keyCode)){a.options.zoomIn=true;r=true}else if(i.includes(e.keyCode)){a.options.zoomOut=true;r=true}else if(n.includes(e.keyCode)){a.options.scale=w;r=true}if(r){this.execute(a);e.preventDefault()}},_initProcessor:function(e){var t=this,i;i=e.dplProcessing?t.options.dplProcessing:t.options.pdfjsProcessing;t.processingLib=e.dplProcessing?D.dpl:D.pdfjs;t.processor=new o.pdfviewer[t.processingLib].processor(i,t);u=o.pdfviewer[t.processingLib].Page},_renderToolbar:function(){var e=this,t=e.options;var i={pager:{messages:t.messages.toolbar.pager},scale:t.scale,resizable:true,items:t.toolbar.items,width:t.width,action:e.execute.bind(e),messages:t.messages.toolbar,viewer:this};var n=r("<div />");n.appendTo(e.element);e.toolbar=new o.pdfviewer.Toolbar(n,i)},_initErrorDialog:function(e){var t=this;if(!t._errorDialog){e=s(e,{messages:t.options.messages});var i=new o.pdfviewer.dialogs.ErrorDialog(e);t._errorDialog=i._dialog}return t._errorDialog},_renderPageContainer:function(){var e=this;if(!e.pageContainer){e.pageContainer=r("<div />");e.pageContainer.addClass(A.scroller);e.pageContainer.attr(T,0);e.wrapper.append(e.pageContainer)}},_triggerError:function(e){var t=this._initErrorDialog();s(e,{dialog:t});if(this.pageContainer){c(this.pageContainer,false)}if(this.trigger(v,e)){return}t.open().content(e.message)},_renderPages:function(){var e=this,t=e.document,i;e.pages=[];if(!t||!t.total){e._renderBlankPage();return}i=t.pages;for(var n=1;n<=t.total;n++){var r,a={processor:e.processor,number:n};if(i&&i.length){a=s(a,i[n-1])}r=new u(a,e);e.pages.push(r);e.pageContainer.append(r.element)}e._attachContainerEvents();e._getVisiblePagesCount()},_renderBlankPage:function(){this._blankPage=new u(this.options.defaultPageSize,this);this.pageContainer.append(this._blankPage.element);this.trigger(b,{isBlank:true})},_resize:function(){var e=this,t,i;if(!e._allowResize){return}if(!e.pages||!e.pages.length){if(e._blankPage){i=t/e._blankPage.element.width();e._blankPage.resize(i)}return}if(e.toolbar){e.toolbar.resize(true)}if(e._resizeHandler){clearTimeout(e._resizeHandler)}e._resizeHandler=setTimeout(e._resizePages.bind(e),100)},_resizePages:function(){var e=this,i=e.pageContainer[0].clientWidth,n=0;e.pages.forEach(function(e){var t=i/e.element.width();if(t>n){n=t}});if(e._autoFit){e.zoom(e._autoFit,true);return}n=Math.min(Math.max(n,e.options.zoomMin),w);if(n!=e.zoomScale){e.zoom(n,true);e.zoomScale=n;e._allowResize=true}},_attachContainerEvents:function(){var t=this;t._wheel=o.throttle(t._wheel.bind(t),300);if(t.processingLib!==D.dpl){t.pageContainer.on(_,function(e){if(!e.ctrlKey){return}if(document.activeElement!==t.pageContainer[0]){t.pageContainer.focus()}t._wheel(e);e.preventDefault()})}t._scroller=new o.mobile.ui.Scroller(t.pageContainer,{zoom:false,elastic:true});t._scroller.scrollElement.addClass(A.enablePanning);t._scroller.bind(f,n(t._scroll,this))},_scroll:function(e){var t=this,i=t.pageContainer[0].scrollHeight,n=t.pageContainer.height(),r=e.scrollTop,a=t.pageContainer.offset().top,o=t.pages.length,s=t._pageNum,l=s-1,d=s,u,c,f,h,p,v,m,g=r-t._prevScrollTop>0?1:-1;if(t._preventScroll||!o){t._preventScroll=false;return}t._scrollingStarted=true;c=t.pages[l];f=c.element.offset().top-a;h=c.element.height();if(g==-1&&t.pages[l+g]){p=t.pages[l-t._visiblePagesCount]||t.pages[l+g];v=p.element.offset().top-a;m=p.element.height()}if(Math.abs(r-(t._prevScrollTop||0))>n*t.zoomScale){d=Math.floor(r*(1/(i/o)))+1}else if(f<0&&Math.abs(f)>=h/2&&g===1){d++}else if(p&&Math.abs(v)<=m/2){d--}if(s!==d&&d>=1&&d<=o){u=t.pages[d-1].element;if(u.offset().top>n){return}t._pageNum=d;t._loadVisiblePages();t.trigger(b,{action:k,page:d,total:o})}t._prevScrollTop=r},_wheel:function(e){var t=e.originalEvent,i=t.wheelDelta?-t.wheelDelta:t.detail,n=i<0;this.execute({command:C,options:{zoomIn:n,zoomOut:!n,updateComboBox:true}});e.preventDefault()},zoom:function(e,t){var i=this;if(!e){return i.zoomScale}return i.execute({command:C,options:{scale:e,updateComboBox:!t}})},execute:function(e){var t=s({viewer:this},e.options);var i=new o.pdfviewer[e.command](t);return i.exec()},_loadDocument:function(){var t=this;var i=t.options.page;c(t.pageContainer,true);t.processor.fetchDocument().done(function(e){t._clearPages();t.document=e;t._renderPages();t.resize(true);if(e){i=i>=1&&i<=e.total?i:1;t.activatePage(i)}c(t.pageContainer,false)})},loadPage:function(e){var t=this.pages&&this.pages[e-1];if(t){return t.load(this.zoomScale)}},activatePage:function(e){var t=this.pages&&this.pages[e-1],i=this._scroller,n,r,a,o;if(!t){return}n=i.scrollTop;r=i.element.offset().top;a=t.element.offset().top;o=!this._autoFit?parseInt(t.element.css("marginTop"),10):0;this._pageNum=e;this._loadVisiblePages();this._preventScroll=true;this._scroller.scrollTo(0,-n-a+r+o);this.trigger(b,{action:k,page:e,total:this.pages.length})},_getVisiblePagesCount:function(){var e=this,t=0,i=0,n=e.pageContainer[0].clientHeight,r=0;while(t<=n&&r<e.pages.length){t+=e.pages[r].element.height();i++;r++}e._visiblePagesCount=i},_loadVisiblePages:function(){var e=this.pages&&this.pages.length,t=Math.max(this._pageNum-this._visiblePagesCount,1),i=Math.min(this._pageNum+this._visiblePagesCount,e);this._visiblePages=this.pages.slice(t-1,i);for(var n=t;n<=i;n++){this.loadPage(n)}},_loadAllPages:function(){var e=this.pages&&this.pages.length;var t=[];for(var i=0;i<=e;i++){t.push(this.loadPage(i))}return t},fromFile:function(e){this.zoomScale=this.options.scale||w;this.zoom(this.zoomScale,true);this.trigger(b,{action:"zoom",zoom:this.options.scale||"auto"});this.processor._updateDocument(e);this._loadDocument()},exportImage:function(t){var i=this;var e=t.page;var n=i.pages[e-1]||i._blankPage;var r=new l.Group;n.load();var a=o.drawing.Path.fromRect(new o.geometry.Rect([0,0],[n.width,n.height]),{fill:{color:S},stroke:null});c(i.pageContainer,true);r.append(a,n.group);l.exportImage(r).done(function(e){c(i.pageContainer,false);o.saveAs({dataURI:e,fileName:t.fileName,proxyURL:t.proxyURL||"",forceProxy:t.forceProxy,proxyTarget:t.proxyTarget})})},exportSVG:function(t){var i=this;var e=t.page;var n=i.pages[e-1]||i._blankPage;c(i.pageContainer,true);n.load();l.exportSVG(n.group).done(function(e){c(i.pageContainer,false);o.saveAs({dataURI:e,fileName:t.fileName,proxyURL:t.proxyURL||"",forceProxy:t.forceProxy,proxyTarget:t.proxyTarget})})},setOptions:function(e){var t=this;if(e.pdfjsProcessing||e.dplProcessing){t._initProcessor(e||{})}e=r.extend(t.options,e);a.fn.setOptions.call(t,e);if(e.page){t._pageNum=e.page;t.activatePage(e.page)}if(e.width){t.element.width(e.width)}if(e.height){t.element.height(e.height)}},destroy:function(){if(this._resizeHandler){o.unbindResize(this._resizeHandler)}if(this._errorDialog){this._errorDialog.destroy()}if(this._saveDialog){this._saveDialog.destroy()}if(this._upload){this._upload.destroy()}if(this.toolbar){this.toolbar.unbind();this.toolbar.destroy();this.toolbar=null}if(this.pages&&this.pages.length){this.pages.forEach(function(e){e.destroy()});this.pages=[]}if(this._scroller){this._scroller.unbind();this._scroller.destroy()}this.pageContainer.off(e);a.fn.destroy.call(this)},_clearPages:function(){this.pages=[];this.document=null;this._pageNum=1;this.pageContainer.off(e);this.pageContainer.empty();if(this._scroller){this._scroller.reset();this._scroller.unbind();this._scroller.destroy()}},_toggleSelection:function(e){var t=this;if(e===i){e=true}t._scroller.userEvents._shouldNotMove=e;t._scroller.scrollElement.toggleClass(A.enableTextSelection,e);t._scroller.scrollElement.toggleClass(A.enablePanning,!e)},_initSearchDOM:function(){var t=this;var e=new Promise(function(e){Promise.all(t._loadAllPages()).then(function(){t._searchDOM=new o.pdfviewer.SearchDOM({target:t._getTextLayers(),highlightClass:A.highlightClass,charClass:A.charClass});e()})});return e},_getTextLayers:function(){return this.pages.map(function(e){return e.textLayer})}});t.plugin(E)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.rating",["kendo.core","kendo.dom"],e)})(function(){var e={id:"rating",name:"Rating",category:"web",description:"The Rating component.",depends:["core"]};(function(m,r){var g=window.kendo,e=g.ui,t=".kendoRating",n=e.Widget,B=m.extend,i=m.proxy,_=g.keys,u=g.parseFloat,a="change",o="select",f="selected",s="hovered",l="disabled",d="readonly",L="keydown"+t,H="click"+t,N="mouseenter"+t,O="mouseleave"+t,V="mousemove"+t,W="mousedown"+t,U="focus"+t,j="blur"+t,c="aria-label",h="aria-labelledby",G="aria-valuemin",q="aria-valuemax",p="aria-valuenow",v="aria-disabled",b="aria-readonly",w="k-rating-precision-part",k="k-rating-precision-complement",y=.5,$="_label",x="k-rating-item",C="k-state-focused",S="tabindex",T=".",K="role",D="min",A="max";var E={single:"single",continuous:"continuous"};var I={item:"item",half:"half"};var M={item:"itemTemplate",hovered:"hoveredTemplate",selected:"selectedTemplate"};var R={selected:"k-state-selected",hovered:"k-state-hover",hoveredPrecise:"k-state-hover-precise"};var F={partValue:"part-value",dataValue:"data-value",value:"value",title:"title"};var P={widget:"k-rating k-widget",container:"k-rating-container",item:"k-rating-item",icon:"k-icon k-i-star-outline",iconSelected:"k-icon k-i-star",label:"k-rating-label",disabled:"k-state-disabled",readonly:"k-state-readonly",active:"k-state-active",hidden:"k-hidden"};var Y=g.template('<span class="#:styles.widget#"></span>');var Q=g.template('<span class="#:styles.container#"></span>');var X=g.template('<span class="#:styles.label#"></span>');var Z=g.template("<span>#:value# / #:maxValue#</span>");var J=g.template('<span class="#:styles.item#" data-value="#:value#"></span>');var z=g.template('<span class="#:icon#"></span>');var ee=n.extend({init:function(e,t){var i=this;n.fn.init.call(i,e,t);i.options=B({},i.options,t);i._element();i._wrapper();i._aria();i._initSettings();i._renderItems();i._renderTooltip();i._renderLabel();i._selectInitial();i._attachEvents();g.notify(this)},events:[o,a],options:{name:"Rating",messages:{},min:1,max:5,selection:E.continuous,precision:I.item,tooltip:true,label:true,readonly:false,enabled:true,selectValueOnFocus:null,itemTemplate:null,selectedTemplate:null,hoveredTemplate:null},_element:function(){var e=this;e.element.addClass(P.hidden)},_wrapper:function(){var e=this;e.wrapper=m(Y({styles:P}));e.wrapper=e.element.wrap(e.wrapper).parent();e.wrapper.addClass(e.element[0].className.replace(P.hidden,"")).append(m(Q({styles:P})));e.wrapper[0].style.cssText=e.element[0].style.cssText;e.container=e.wrapper.find(T+P.container)},_aria:function(){var e=this,t=e.wrapper,i=e.element,n=i.attr("id"),r=m('label[for="'+n+'"]'),a=i.attr(c),o=i.attr(h);e.wrapper.attr(S,0).attr(K,"slider").attr(G,u(e.element.attr(D))||e.options.min).attr(q,u(e.element.attr(A))||e.options.max).attr(p,e.options.value);if(a){t.attr(c,a)}else if(o){t.attr(h,o)}else if(r.length){var s=r.attr("id");if(!s){s=(n||g.guid())+$;r.attr("id",s)}t.attr(h,s)}},_initSettings:function(){var e=this,t=e.options.precision!=I.item,i=e.options;i.value=u(i.value);if(i.value===null){i.value=u(e.element.val())}i.min=u(e.element.attr(D))||e.options.min;i.max=u(e.element.attr(A))||e.options.max;e._valueMin=t?e.options.min-y:e.options.min;i.enabled=i.enabled&&!e.element.attr(l);i.readonly=i.readonly||!!e.element.attr(d);e._setState()},_renderItems:function(){var e=this,t=e.container,i=e.options.min,n=e.options.max,r=e.options.itemTemplate?g.template(e.options.itemTemplate):z;for(var a=i;a<=n;a+=1){var o=m(J({styles:P,value:a}));o.append(r({icon:P.icon,index:a}));t.append(o)}},_renderTooltip:function(){var e=this,t=e.container.find(T+x),i=e.options.tooltip===true;if(!i){t.removeAttr(F.title);return}for(var n=0;n<t.length;n+=1){m(t[n]).attr(F.title,m(t[n]).data(F.value))}},_renderLabel:function(){var e=this,t=e.wrapper.find(T+P.label),i=e.options.label===true||e.options.label.template!==r,n=e.options.label&&e.options.label.template?g.template(e.options.label.template):Z;if(!i||e.value()===null){t.remove();e.label=null;return}if(!t.length){e.label=t=m(X({styles:P}));e.wrapper.append(t)}t.html(n({styles:P,value:e.value()%1===0?e.value():e._format(e.value()),maxValue:e.options.max}))},_selectInitial:function(){var e=this;if(!isNaN(e.options.value)){e.value(e.options.value)}},_attachEvents:function(){var e=this,t=e.options.precision==I.half;e.wrapper.on(U,i(e._focus,e)).on(j,i(e._blur,e)).on(L,i(e._keydown,e));e.container.on(H,T+x,i(e._click,e)).on(N,T+x,i(e._mouseenter,e)).on(O,T+x,i(e._mouseleave,e)).on(W,i(e._mousedown,e));if(t){e.container.on(V,T+x,i(e._mousemove,e))}},_focus:function(){var e=this,t=e.container,i=e.wrapper,n=e.container.find(T+C),r=e.options.selectValueOnFocus,a=t.children().first(),o,s,l;if(!e.options.enabled||e.options.readonly||e.preventFocus){if(e.options.readonly){e.wrapper.addClass(C)}return}i.addClass(C);n.removeClass(C);if(e.value()===null&&r!==null){e.value(r)}o=t.find(T+R.selected).last();s=t.find(T+R.hovered).last();l=o.length?o:s;l=l.length?l:a;l.addClass(C)},_blur:function(){var e=this;e.preventFocus=false;e.wrapper.removeClass(C);e.container.find(T+C).removeClass(C);e.element.blur()},_mousedown:function(){var e=this;e.preventFocus=true},_keydown:function(e){var t=this,i=t.container,n=t.parsedValue,r=t.options.precision!=I.item,a=r?y:1,o=i.find(T+x),s=i.find(T+C),l=o.index(s),d=g.support.isRtl(t.wrapper),u=isNaN(n),c=e.keyCode,f,h,p,v;if(!t.options.enabled||t.options.readonly){return}f=c===_.RIGHT&&d||c===_.LEFT&&!d;h=c===_.LEFT&&d||c===_.RIGHT&&!d;if(f||c===_.DOWN){p=u?o.eq(0):m(o[l-1]);v=u?t._valueMin:n-a;t._select(p,v);e.preventDefault()}else if(h||c===_.UP){p=u?o.eq(0):m(o[l+1]);v=u?t._valueMin:n+a;t._select(p,v);e.preventDefault()}else if(c===_.HOME){p=o.eq(0);t._select(p,t._valueMin);e.preventDefault()}else if(c===_.END){p=o.eq(o.length-1);t._select(p);e.preventDefault()}},_getTemplateType:function(e){var t=this,i;if(t.options[e]){i=g.template(t.options[e])}else{i=z}return i},_renderTemplate:function(e,t){var i=this,n=i._getTemplateType(t),r=P.icon;if(t==M.selected||t==M.hovered){r=P.iconSelected}for(var a=0;a<e.length;a+=1){m(e[a]).html(n({icon:r,index:m(e[a]).index()}))}},_updateItemTemplates:function(e,t){var i=this,n=E.single==i.options.selection,r=i.options.precision==I.half,a=i.container.find(T+R.selected),o=n?t:t.prevAll().addBack(),s=n?a:t.nextAll(),l=M[e],d=R[e];s.removeClass(d);o.addClass(d);i._renderTemplate(o,l);if(!n||n&&e==f&&o.get(0)!=a.get(0)){i._renderTemplate(s,M.item)}if(r){i._renderTemplate(t,M.item)}},_change:function(e,t){var i=this,n=i.value();i.value(t);i.trigger(a,{target:e,oldValue:n,newValue:i.value()})},_click:function(e){var t=this,i=m(e.target).closest(T+x),n=i.attr(F.dataValue);if(!t.options.enabled||t.options.readonly){return}if(i.data(F.partValue)){n=i.data(F.partValue)}t._select(i,n)},_select:function(e,t){var i=this,n=isNaN(t)?e.attr(F.dataValue):t;if(n==i.value()||n<i._valueMin||n>i.options.max){return}i.trigger(o,{target:e});i._change(e,n);i._focus()},_mouseenter:function(e){var t=this,i=m(e.target),n=i.closest(T+x);if(!t.options.enabled||t.options.readonly){return}t.enableMove=true;if(i.is(T+x)){t._updateItemTemplates(s,n)}},_mouseleave:function(e){var t=this,i=t.options.selection,n=t.options.precision==I.half,r=i==E.single,a=m(e.target).closest(T+x),o=t.container.find(T+x),s,l;t.enableMove=false;var d=function(e){s=t.parsedValue%1!==0&&e.is(t.container.find("[data-value="+Math.ceil(t.parsedValue)+"]"));l=(e.hasClass(R.selected)||e.hasClass(R.hovered))&&!s?M.selected:M.item;t._renderTemplate(e,l);if(n&&s&&e.hasClass(R.selected)){t._togglePrecisionElements(e,f)}};o.removeClass(R.hovered);if(r){d(a)}else{for(var u=0;u<o.length;u+=1){var c=m(o[u]);d(c)}}},_mousemove:function(e){var t=this,i=m(e.target).closest(T+x),n,r,a;if(!t.enableMove){return}if(i.length){n=e.clientX;r=i.offset().left;a=Math.abs(n-r);t._togglePrecisionElements(i,s);t._updatePrecisionElements(i,a)}e.preventDefault()},_togglePrecisionElements:function(e,t){var i=this,n=e.find(T+w),r=i._getTemplateType(M[t]),a,o;if(!n.length){a=i.parsedValue%1!==0;o=i._getItemWidth(e);n=m("<span></span>").addClass(w);n.append(r({icon:P.iconSelected}));n.width(a?o/2:o);e.append(n);e.append(m("<span></span>").css({width:o,height:o,display:"block"}));i._createUpdatePrecisionComplement(e,a)}else{n.html(r({icon:P.iconSelected}))}},_createUpdatePrecisionComplement:function(e,t){var i=this,n=e.find(T+k),r=e.children().first(),a=g.support.isRtl(i.wrapper),o=!a?"left":"right";if(!n.length){n=r.wrap(m("<span></span>").addClass(k)).parent()}n.width(t?i._getItemWidth(e)/2:0);n.css(o,t||a?"50%":0)},_calculateItemWidthFromStyles:function(e){if(!e){return}return u(e.find(".k-icon").css("font-size"))},_getItemWidth:function(e){if(!e){return}return e.width()||this._calculateItemWidthFromStyles(e)||0},_updatePrecisionElements:function(e,t){var i=this,n=e.find(T+w),r=g.parseFloat(e.data(F.value)),a=g.support.isRtl(this.wrapper),o=e.width(),s=o/2,l=u(e.outerWidth()/2),d=!a?t<l:t>l;if(e.length&&n.length){n.width(d?s:o);if(this.options.tooltip){e.attr(F.title,d?i._format(r-y):r)}e.data(F.partValue,d?r-y:r);i._createUpdatePrecisionComplement(e,d)}},_updateElement:function(e){var t=this,i=e===null?"":e;t.element.val(t._format(i));if(t.value===null){t.wrapper.removeAttr(p)}else{t.wrapper.attr(p,t._format(e))}},_updateItemsRendering:function(e){var t=this,i=t.options.precision==I.half,n=e===null?"item":f,r=e===null?t.container.find(T+R.selected).last():t.container.find(T+x+"[data-value='"+Math.ceil(e)+"']");if(e===null){t.container.find(T+x).removeClass(R.selected)}t._updateItemTemplates(n,r);if(i&&e!==null){t._togglePrecisionElements(r,f)}t._renderLabel()},_setState:function(){var e=this,t=e.element,i=e.wrapper,n=e.options.readonly,r=e.options.enabled;if(n&&r){t.attr(d,d);i.attr(b,true)}else{t.removeAttr(d);i.removeAttr(b)}if(r){t.removeAttr(l);i.removeAttr(v);i.attr(S,0)}else{t.attr(l,l);i.attr(v,true);i.removeAttr(S)}i.toggleClass(P.disabled,!r);i.toggleClass(P.readonly,n&&r)},_format:function(e){return g.toString(e,"n1",g.getCulture().name)},value:function(e){var t=this,i=t.options.precision==I.half;if(e===null){t._updateElement(e);t._updateItemsRendering(e);return}e=u(e);if(e===null){e=u(t.element.val());return e}e=Math.max(t._valueMin,Math.min(e,t.options.max));if(i){t.parsedValue=u(t._format(Math.ceil(e*2)/2))}else{t.parsedValue=Math.round(e)}t._updateElement(e);t._updateItemsRendering(e)},reset:function(){var e=this;e.value(null)},enable:function(e){var t=this;if(typeof e=="undefined"){e=true}t.options.enabled=e;t.options.readonly=false;t._setState()},readonly:function(e){var t=this;if(typeof e=="undefined"){e=true}t.options.readonly=e;t.options.enabled=true;t._setState()},setOptions:function(e){var t=this;t.options=m.extend(t.options,e);if(e.enabled!==r){t.enable(e.enabled)}if(e.readonly!==r){t.readonly(e.readonly)}if(e.label!==r){t._renderLabel()}if(e.tooltip!==r){t._renderTooltip()}if(e.value!==r){t.value(e.value)}if(e.min||e.max!==r||e.itemTemplate!==r||e.selectedTemplate!==r||e.hoveredTemplate!==r){t.container.empty();t._renderItems();t._renderLabel();t._renderTooltip();t._selectInitial()}},destroy:function(){var e=this;e.wrapper.off(t);e.container.off(t);n.fn.destroy.call(e)}});e.plugin(ee)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.angular",["kendo.core"],e)})(function(){var e={id:"angular",name:"AngularJS Directives",category:"framework",description:"Adds Kendo UI for AngularJS directives",depends:["core"],defer:true};(function(k,v,y){"use strict";if(!v||!v.injector){return}var d=v.module("kendo.directives",[]),e=v.injector(["ng"]),m=e.get("$parse"),x=e.get("$timeout"),c,g=e.get("$log");function t(e){var t=x;try{x=function(e){return e()};return e()}finally{x=t}}var C;var p=function(){var s={TreeList:"TreeListDataSource",TreeView:"HierarchicalDataSource",Scheduler:"SchedulerDataSource",PivotGrid:"PivotDataSource",PivotConfigurator:"PivotDataSource",PanelBar:"HierarchicalDataSource",Menu:"$PLAIN",ContextMenu:"$PLAIN"};var l=function(e,t){if(t=="$PLAIN"){return e}return kendo.data[t].create(e)};return function(e,n,t,i){var r=s[t]||"DataSource";var a=e.$eval(i);var o=l(a,r);e.$watch(i,function(e){var t=L(n);if(t&&typeof t.setDataSource=="function"){if(e!==a&&e!==t.dataSource){var i=l(e,r);t.setDataSource(i);a=e}}});return o}}();var _={kDataSource:true,kOptions:true,kRebind:true,kNgModel:true,kNgDelay:true};var b={name:true,title:true,style:true};function f(s,l,d,u,c,e){if(!(l instanceof jQuery)){throw new Error("The Kendo UI directives require jQuery to be available before AngularJS. Please include jquery before angular in the document.")}var i=d.kNgDelay,t=s.$eval(i);e=e||[];var f=e[0],h=e[1];var p=k(l)[u];if(!p){window.console.error("Could not find: "+u);return null}var n=S(s,l,d,u,p);var v=n.options;if(n.unresolved.length){var r=[];for(var a=0,o=n.unresolved.length;a<o;a++){var m=n.unresolved[a];var g=k.Deferred(function(t){var i=s.$watch(m.path,function(e){if(e!==y){i();t.resolve()}})}).promise();r.push(g)}k.when.apply(null,r).then(w);return}if(i&&!t){var _=s.$root||s;var b=function(){var t=s.$watch(i,function(e){if(e!==y){t();l.removeAttr(d.$attr.kNgDelay);i=null;x(w)}})};if(/^\$(digest|apply)$/.test(_.$$phase)){b()}else{s.$apply(b)}return}else{return w()}function w(){var e;if(d.kRebind){e=k(k(l)[0].cloneNode(true))}v=S(s,l,d,u,p).options;if(l.is("select")){(function(e){if(e.length>0){var t=k(e[0]);if(!/\S/.test(t.text())&&/^\?/.test(t.val())){t.remove()}for(var i=0;i<e.length;i++){k(e[i]).off("$destroy")}}})(l[0].options)}var t=p.call(l,C=v).data(u);A(t,s,d,u,c);s.$emit("kendoWidgetCreated",t);var i=M(s,t);if(d.kRebind){F(t,s,l,e,d.kRebind,i,d)}if(d.kNgDisabled){var n=d.kNgDisabled;var r=s.$eval(n);if(r){t.enable(!r)}T(t,s,l,n)}if(d.kNgReadonly){var a=d.kNgReadonly;var o=s.$eval(a);if(o){t.readonly(o)}D(t,s,l,a)}if(d.kNgModel){I(t,s,d.kNgModel)}if(f){E(t,s,l,f,h)}if(t){R(t,l)}return t}}function S(n,e,t,i,r){var a=i.replace(/^kendo/,"");var o=[];var s=t.kOptions||t.options;var l=n.$eval(s);if(s&&l===y){o.push({option:"options",path:s})}var d=v.extend({},t.defaultOptions,l);function u(e,t){var i=v.copy(n.$eval(t));if(i===y){o.push({option:e,path:t})}else{d[e]=i}}var c=r.widget.prototype.options;var f=r.widget.prototype.events;k.each(t,function(e,t){if(e==="source"||e==="kDataSource"||e==="kScopeField"||e==="scopeField"){return}var i="data"+e.charAt(0).toUpperCase()+e.slice(1);if(e.indexOf("on")===0){var n=e.replace(/^on./,function(e){return e.charAt(2).toLowerCase()});if(f.indexOf(n)>-1){d[n]=t}}if(c.hasOwnProperty(i)){u(i,t)}else if(c.hasOwnProperty(e)&&!b[e]){u(e,t)}else if(!_[e]){var r=e.match(/^k(On)?([A-Z].*)/);if(r){var a=r[2].charAt(0).toLowerCase()+r[2].slice(1);if(r[1]&&e!="kOnLabel"){d[a]=t}else{if(e=="kOnLabel"){a="onLabel"}u(a,t)}}}});var h=t.kDataSource||t.source;if(h){d.dataSource=p(n,e,a,h)}d.$angular=[n];return{options:d,unresolved:o}}function T(i,e,t,n){if(kendo.ui.PanelBar&&i instanceof kendo.ui.PanelBar||kendo.ui.Menu&&i instanceof kendo.ui.Menu){g.warn("k-ng-disabled specified on a widget that does not have the enable() method: "+i.options.name);return}e.$watch(n,function(e,t){if(e!=t){i.enable(!e)}})}function D(i,e,t,n){if(typeof i.readonly!="function"){g.warn("k-ng-readonly specified on a widget that does not have the readonly() method: "+i.options.name);return}e.$watch(n,function(e,t){if(e!=t){i.readonly(e)}})}function A(e,t,i,n,r){if(i[r]){var a=m(i[r]).assign;if(a){a(t,e)}else{throw new Error(r+" attribute used but expression in it is not assignable: "+i[n])}}}function u(e){if(/checkbox|radio/i.test(e.attr("type"))){return e.prop("checked")}return e.val()}var i=/^(input|select|textarea)$/i;function h(e){return i.test(e[0].tagName)}function E(i,n,r,a,o){if(!i.value){return}var s;var l=false;if(h(r)){s=function(){return u(r)}}else{s=function(){return i.value()}}var e=function(){var t=a.$viewValue;if(t===y){t=a.$modelValue}if(t===y){t=null}l=true;setTimeout(function(){l=false;if(i){var e=n[i.element.attr("k-ng-model")];if(e){t=e}if(i.options.autoBind===false&&!i.listView.bound()){if(t){i.value(t)}}else{i.value(t)}}},0)};a.$render=e;setTimeout(function(){if(a.$render!==e){a.$render=e;a.$render()}});if(h(r)){r.on("change",function(){l=true})}var t=function(t){return function(){var e;if(l&&!r.is("select")){return}if(t&&o){e=o.$pristine}a.$setViewValue(s());if(t){a.$setPristine();if(e){o.$setPristine()}}z(n)}};i.first("change",t(false));i.first("spin",t(false));if(!(kendo.ui.AutoComplete&&i instanceof kendo.ui.AutoComplete)){i.first("dataBound",t(true))}var d=s();if(!isNaN(a.$viewValue)&&d!=a.$viewValue){if(!a.$isEmpty(a.$viewValue)){i.value(a.$viewValue)}else if(d!=null&&d!==""&&d!=a.$viewValue){a.$setViewValue(d)}}a.$setPristine()}function I(i,e,t){if(kendo.ui.DateRangePicker&&i instanceof kendo.ui.DateRangePicker){var n=t.split(",");var r=n[0].trim();var a;I(i._startDateInput,e,r);if(n[1]){a=n[1].trim();I(i._endDateInput,e,a);i.range({start:e[r],end:e[a]})}else{i.range({start:e[r],end:null})}return}if(typeof i.value!="function"){g.warn("k-ng-model specified on a widget that does not have the value() method: "+i.options.name);return}var o=k(i.element).parents("ng-form, form").first();var s=kendo.getter(o.attr("name"),true)(e);var l=m(t);var d=l.assign;var u=false;var c=kendo.ui.MultiSelect&&i instanceof kendo.ui.MultiSelect||kendo.ui.RangeSlider&&i instanceof kendo.ui.RangeSlider;var f=function(e){return e&&c?e.length:0};var h=f(l(e));i.$angular_setLogicValue(l(e));var p=function(e,t){if(e===y){e=null}if(u||e==t&&f(e)==h){return}h=f(e);i.$angular_setLogicValue(e)};if(c){e.$watchCollection(t,p)}else{e.$watch(t,p)}var v=function(){u=true;if(s&&s.$pristine){s.$setDirty()}z(e,function(){d(e,i.$angular_getLogicValue());h=f(l(e))});u=false};i.first("change",v);i.first("spin",v)}function M(e,t){var i=e.$on("$destroy",function(){i();if(t){kendo.destroy(t.element);t=null}});return i}function R(n,e){if(!(window.MutationObserver&&n.wrapper)){return}var r=[].slice.call(k(e)[0].classList);var t=new MutationObserver(function(e){i();if(!n){return}e.forEach(function(e){var t=k(n.wrapper)[0];switch(e.attributeName){case"class":var i=[].slice.call(e.target.classList);i.forEach(function(e){if(r.indexOf(e)<0){t.classList.add(e);if(kendo.ui.ComboBox&&n instanceof kendo.ui.ComboBox){n.input[0].classList.add(e)}}});r.forEach(function(e){if(i.indexOf(e)<0){t.classList.remove(e);if(kendo.ui.ComboBox&&n instanceof kendo.ui.ComboBox){n.input[0].classList.remove(e)}}});r=i;break;case"disabled":if(typeof n.enable=="function"&&!n.element.attr("readonly")){n.enable(!k(e.target).attr("disabled"))}break;case"readonly":if(typeof n.readonly=="function"&&!n.element.attr("disabled")){n.readonly(!!k(e.target).attr("readonly"))}break}});a()});function i(){t.disconnect()}function a(){t.observe(k(e)[0],{attributes:true})}a();n.first("destroy",i)}function F(s,l,d,u,e,c,f){var h=l.$watch(e,function(e,t){if(!s._muteRebind&&e!==t){h();if(f._cleanUp){f._cleanUp()}var i=B[s.options.name];if(i){i.forEach(function(e){var t=l.$eval(f["k"+e]);if(t){u.append(k(t).attr(kendo.toHyphens("k"+e),""))}})}var n=k(s.wrapper)[0];var r=k(s.element)[0];var a=s.options.name==="Upload";if(a){d=k(r)}var o=d.injector().get("$compile");s._destroy();if(c){c()}s=null;if(r){if(n){n.parentNode.replaceChild(r,n)}k(d).replaceWith(u)}o(u)(l)}},true);z(l)}function n(i,n){return function(e,t){return i.call(n,e,t)}}function r(e,t){this[e]=kendo.stringify(t)}d.factory("directiveFactory",["$compile",function(e){var d;var u=false;c=e;var t=function(s,l){return{restrict:"AC",require:["?ngModel","^?form"],scope:false,controller:["$scope","$attrs","$element",function(e,t){this.template=n(r,t);t._cleanUp=n(function(){this.template=null;t._cleanUp=null},this)}],link:function(e,t,i,n){var r=k(t);var a=s.replace(/([A-Z])/g,"-$1");r.attr(a,r.attr("data-"+a));r[0].removeAttribute("data-"+a);var o=f(e,t,i,s,l,n);if(!o){return}if(d){clearTimeout(d)}d=setTimeout(function(){e.$emit("kendoRendered");if(!u){u=true;k("form").each(function(){var e=k(this).controller("form");if(e){e.$setPristine()}})}})}}};return{create:t}}]);var l={Editor:"textarea",NumericTextBox:"input",DatePicker:"input",DateTimePicker:"input",TimePicker:"input",AutoComplete:"input",ColorPicker:"input",MaskedTextBox:"input",MultiSelect:"input",Upload:"input",Validator:"form",Button:"button",MobileButton:"a",MobileBackButton:"a",MobileDetailButton:"a",ListView:"ul",MobileListView:"ul",ScrollView:"div",PanelBar:"ul",TreeView:"ul",Menu:"ul",ContextMenu:"ul",ActionSheet:"ul",Switch:"input"};var w=["MobileView","MobileDrawer","MobileLayout","MobileSplitView","MobilePane","MobileModalView"];var P=["MobileApplication","MobileView","MobileModalView","MobileLayout","MobileActionSheet","MobileDrawer","MobileSplitView","MobilePane","MobileScrollView","MobilePopOver"];v.forEach(["MobileNavBar","MobileButton","MobileBackButton","MobileDetailButton","MobileTabStrip","MobileScrollView","MobileScroller"],function(n){P.push(n);n="kendo"+n;d.directive(n,function(){return{restrict:"A",link:function(e,t,i){f(e,t,i,n,n)}}})});function a(e,t){function i(t,i){d.directive(t,["directiveFactory",function(e){return e.create(i,t)}])}var n=t?"Mobile":"";n+=e.fn.options.name;var r=n;var a="kendo"+n.charAt(0)+n.substr(1).toLowerCase();n="kendo"+n;var o=n.replace(/([A-Z])/g,"-$1");if(w.indexOf(n.replace("kendo",""))==-1){var s=n===a?[n]:[n,a];v.forEach(s,function(e){d.directive(e,function(){return{restrict:"E",replace:true,template:function(e,t){var i=l[r]||"div";var n=t.kScopeField||t.scopeField;return"<"+i+" "+o+(n?'="'+n+'"':"")+">"+e.html()+"</"+i+">"}}})})}if(P.indexOf(n.replace("kendo",""))>-1){return}i(n,n);if(a!=n){i(a,n)}}function L(e){e=k(e);return kendo.widgetInstance(e,kendo.ui)||kendo.widgetInstance(e,kendo.mobile.ui)||kendo.widgetInstance(e,kendo.dataviz.ui)}function z(e,t){var i=e.$root||e;var n=/^\$(digest|apply)$/.test(i.$$phase);if(t){if(n){t()}else{i.$apply(t)}}else if(!n){i.$digest()}}function H(e,t){e.$destroy();if(t){k(t).removeData("$scope").removeData("$$kendoScope").removeData("$isolateScope").removeData("$isolateScopeNoTemplate").removeClass("ng-scope")}}var N=kendo.htmlEncode;var O=/{{/g;var V=/}}/g;var W="{&#8203;{";var U="}&#8203;}";kendo.htmlEncode=function(e){return N(e).replace(O,W).replace(V,U)};var o=[];function s(e,t,i){if(k.isArray(e)){return v.forEach(e,function(e){s(e,t,i)})}if(typeof e=="string"){var n=e.split(".");var r=kendo;while(r&&n.length>0){r=r[n.shift()]}if(!r){o.push([e,t,i]);return false}e=r.prototype}var a=e[t];e[t]=function(){var e=this,t=arguments;return i.apply({self:e,next:function(){return a.apply(e,arguments.length>0?arguments:t)}},t)};return true}kendo.onWidgetRegistered(function(e){o=k.grep(o,function(e){return!s.apply(null,e)});a(e.widget,e.prefix=="Mobile")});s(["ui.Widget","mobile.ui.Widget"],"angular",function(i,n){var s=this.self;if(i=="init"){if(!n&&C){n=C}C=null;if(n&&n.$angular){s.$angular_scope=n.$angular[0];s.$angular_init(s.element,n)}return}var l=s.$angular_scope;if(l){t(function(){var r=n(),e=r.elements,a=r.data;if(e.length>0){switch(i){case"cleanup":v.forEach(e,function(e){var t=k(e).data("$$kendoScope");if(t&&t!==l&&t.$$kendoScope){H(t,e)}});break;case"compile":var t=s.element.injector();var o=t?t.get("$compile"):c;v.forEach(e,function(e,t){var i;if(r.scopeFrom){i=r.scopeFrom}else{var n=a&&a[t];if(n!==y){i=k.extend(l.$new(),n);i.$$kendoScope=true}else{i=l}}k(e).data("$$kendoScope",i);o(e)(i)});z(l);break}}})}});s("ui.Widget","$angular_getLogicValue",function(){return this.self.value()});s("ui.Widget","$angular_setLogicValue",function(e){this.self.value(e)});s("ui.Select","$angular_getLogicValue",function(){var e=this.self.dataItem(),t=this.self.options.dataValueField;if(e){if(this.self.options.valuePrimitive){if(!!t){return e[t]}else{return e}}else{return e.toJSON()}}else{return null}});s("ui.Select","$angular_setLogicValue",function(e){var t=this.self;var i=t.options;var n=i.dataValueField;var r=i.text||"";if(e===y){e=""}if(n&&!i.valuePrimitive&&e){r=e[i.dataTextField]||"";e=e[n||i.dataTextField]}if(t.options.autoBind===false&&!t.listView.bound()){if(!r&&e&&i.valuePrimitive){t.value(e)}else{t._preselect(e,r)}}else{t.value(e)}});s("ui.MultiSelect","$angular_getLogicValue",function(){var e=this.self.dataItems().slice(0);var t=this.self.options.dataValueField;if(t&&this.self.options.valuePrimitive){e=k.map(e,function(e){return e[t]})}return e});s("ui.MultiSelect","$angular_setLogicValue",function(e){if(e==null){e=[]}var t=this.self;var i=t.options;var n=i.dataValueField;var r=e;if(n&&!i.valuePrimitive){e=k.map(e,function(e){return e[n]})}if(i.autoBind===false&&!i.valuePrimitive&&!t.listView.bound()){t._preselect(r,e)}else{t.value(e)}});s("ui.Widget","$angular_init",function(e,t){var i=this.self;if(t&&!k.isArray(t)){var n=i.$angular_scope;for(var r=i.events.length;--r>=0;){var a=i.events[r];var o=t[a];if(o&&typeof o=="string"){t[a]=i.$angular_makeEventHandler(a,n,o)}}}});s("ui.Widget","$angular_makeEventHandler",function(e,t,i){i=m(i);return function(e){z(t,function(){i(t,{kendoEvent:e})})}});s(["ui.Grid","ui.ListView","ui.TreeView","ui.PanelBar"],"$angular_makeEventHandler",function(e,h,p){if(e!="change"){return this.next()}p=m(p);return function(e){var t=e.sender;var i=t.options;var n,r,a={kendoEvent:e},o,s,l,d;if(v.isString(i.selectable)){n=i.selectable.indexOf("cell")!==-1;r=i.selectable.indexOf("multiple")!==-1}if(t._checkBoxSelection){r=true}o=a.selected=this.select();s=a.data=[];l=a.columns=[];for(var u=0;u<o.length;u++){var c=n?o[u].parentNode:o[u];var f=t.dataItem(c);if(n){if(v.element.inArray(f,s)<0){s.push(f)}d=v.element(o[u]).index();if(v.element.inArray(d,l)<0){l.push(d)}}else{s.push(f)}}if(!r){a.dataItem=a.data=s[0];a.angularDataItem=kendo.proxyModelSetters(a.dataItem);a.selected=o[0]}z(h,function(){p(h,a)})}});s("ui.Grid","$angular_init",function(e,t){this.next();if(t.columns){var i=k.extend({},kendo.Template,t.templateSettings);v.forEach(t.columns,function(e){if(e.field&&!e.template&&!e.format&&!e.values&&(e.encoded===y||e.encoded)){e.template="<span ng-bind='"+kendo.expr(e.field,"dataItem")+"'>#: "+kendo.expr(e.field,i.paramName)+"#</span>"}})}});{s("mobile.ui.ButtonGroup","value",function(e){var t=this.self;if(e!=null){t.select(t.element.children("li.km-button").eq(e));t.trigger("change");t.trigger("select",{index:t.selectedIndex})}return t.selectedIndex});s("mobile.ui.ButtonGroup","_select",function(){this.next();this.self.trigger("change")})}d.directive("kendoMobileApplication",function(){return{terminal:true,link:function(e,t,i){f(e,t,i,"kendoMobileApplication","kendoMobileApplication")}}}).directive("kendoMobileView",function(){return{scope:true,link:{pre:function(e,t,i){i.defaultOptions=e.viewOptions;i._instance=f(e,t,i,"kendoMobileView","kendoMobileView")},post:function(e,t,i){i._instance._layout();i._instance._scroller()}}}}).directive("kendoMobileDrawer",function(){return{scope:true,link:{pre:function(e,t,i){i.defaultOptions=e.viewOptions;i._instance=f(e,t,i,"kendoMobileDrawer","kendoMobileDrawer")},post:function(e,t,i){i._instance._layout();i._instance._scroller()}}}}).directive("kendoMobileModalView",function(){return{scope:true,link:{pre:function(e,t,i){i.defaultOptions=e.viewOptions;i._instance=f(e,t,i,"kendoMobileModalView","kendoMobileModalView")},post:function(e,t,i){i._instance._layout();i._instance._scroller()}}}}).directive("kendoMobileSplitView",function(){return{terminal:true,link:{pre:function(e,t,i){i.defaultOptions=e.viewOptions;i._instance=f(e,t,i,"kendoMobileSplitView","kendoMobileSplitView")},post:function(e,t,i){i._instance._layout()}}}}).directive("kendoMobilePane",function(){return{terminal:true,link:{pre:function(e,t,i){i.defaultOptions=e.viewOptions;f(e,t,i,"kendoMobilePane","kendoMobilePane")}}}}).directive("kendoMobileLayout",function(){return{link:{pre:function(e,t,i){f(e,t,i,"kendoMobileLayout","kendoMobileLayout")}}}}).directive("kendoMobileActionSheet",function(){return{restrict:"A",link:function(e,t,i){t.find("a[k-action]").each(function(){k(this).attr("data-"+kendo.ns+"action",k(this).attr("k-action"))});f(e,t,i,"kendoMobileActionSheet","kendoMobileActionSheet")}}}).directive("kendoMobilePopOver",function(){return{terminal:true,link:{pre:function(e,t,i){i.defaultOptions=e.viewOptions;f(e,t,i,"kendoMobilePopOver","kendoMobilePopOver")}}}}).directive("kendoViewTitle",function(){return{restrict:"E",replace:true,template:function(e){return"<span data-"+kendo.ns+"role='view-title'>"+e.html()+"</span>"}}}).directive("kendoMobileHeader",function(){return{restrict:"E",link:function(e,t){t.addClass("km-header").attr("data-role","header")}}}).directive("kendoMobileFooter",function(){return{restrict:"E",link:function(e,t){t.addClass("km-footer").attr("data-role","footer")}}}).directive("kendoMobileScrollViewPage",function(){return{restrict:"E",replace:true,template:function(e){return"<div data-"+kendo.ns+"role='page'>"+e.html()+"</div>"}}});v.forEach(["align","icon","rel","transition","actionsheetContext"],function(n){var r="k"+n.slice(0,1).toUpperCase()+n.slice(1);d.directive(r,function(){return{restrict:"A",priority:2,link:function(e,t,i){t.attr(kendo.attr(kendo.toHyphens(n)),e.$eval(i[r]))}}})});var B={TreeMap:["Template"],MobileListView:["HeaderTemplate","Template"],MobileScrollView:["EmptyTemplate","Template"],Grid:["AltRowTemplate","DetailTemplate","RowTemplate"],ListView:["EditTemplate","Template","AltTemplate"],Pager:["SelectTemplate","LinkTemplate"],PivotGrid:["ColumnHeaderTemplate","DataCellTemplate","RowHeaderTemplate"],Scheduler:["AllDayEventTemplate","DateHeaderTemplate","EventTemplate","MajorTimeHeaderTemplate","MinorTimeHeaderTemplate"],ScrollView:["Template"],PanelBar:["Template"],TreeView:["Template"],Validator:["ErrorTemplate"]};(function(){var i={};v.forEach(B,function(e,t){v.forEach(e,function(e){if(!i[e]){i[e]=[]}i[e].push("?^^kendo"+t)})});v.forEach(i,function(o,e){var s="k"+e;var l=kendo.toHyphens(s);d.directive(s,function(){return{restrict:"A",require:o,terminal:true,compile:function(e,t){if(t[s]!==""){return}e.removeAttr(l);var a=e[0].outerHTML;return function(e,t,i,n){var r;while(!r&&n.length){r=n.shift()}if(!r){g.warn(l+" without a matching parent widget found. It can be one of the following: "+o.join(", "))}else{r.template(s,a);t.remove()}}}}})})})()})(window.kendo.jQuery,window.angular);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("filemanager/commands",["kendo.core"],e)})(function(){(function(e,t){var f=window.kendo,r=e.extend,n=e.Deferred,h=e.proxy,i=f.Class;var a=i.extend({init:function(e){this.options=e;this.filemanager=e.filemanager}});var o=a.extend({init:function(e){a.fn.init.call(this,e)},exec:function(){var e=this,t=e.filemanager,i=t._commandStack,n=t._viewDataSource||t.dataSource,r=h(e._remove,e);e._item=n._createNewModel();i.push({item:e._item.toJSON()}).fail(r);n.add(e._item)},_remove:function(){var e=this,t=e.filemanager,i=t._viewDataSource||t.dataSource;i.pushDestroy(e._item)}});var s=a.extend({init:function(e){a.fn.init.call(this,e)},exec:function(){var e=this,t=e.options.target,i=e.filemanager,n=i._commandStack,r=i._view.widgetComponent.dataItem(t);if(t&&r){n.push({target:t,item:r});e.filemanager._view.edit(t)}else{e._renameTreeViewItem(t)}},_renameTreeViewItem:function(t){var e=this,i=e.filemanager,n=i._commandStack,r=t.data("uid"),a=e.filemanager.treeView.widgetComponent.dataSource.getByUid(r),o=e.filemanager.dataSource.get(a.id);e.filemanager._prompt({type:"rename",defaultInput:o.name,target:t}).done(function(e){n.push({target:t,item:o});o.set("name",e)})}});var l=a.extend({init:function(e){a.fn.init.call(this,e)},exec:function(){var e=this,t=e.options.target,i=e.filemanager,n=i.getSelected(),r=e.filemanager._view.widgetComponent.dataItem(t),a;if(t&&t.is(".k-state-selected")&&n&&n.length){a=n}else if(t&&r){a=r}else if(t){var o=t.data("uid");var s=e.filemanager.treeView.widgetComponent.dataSource.getByUid(o);var l=e.filemanager.dataSource.get(s.id);a=l}i._confirm({type:"delete",target:t}).done(function(){e.removeItems(a)})},removeItems:function(e){var t=this;t._itemsToRemove=Array.isArray(e)?e:[e];t._removeItem()},_removeItem:function(){var e=this,t=e.filemanager,i=t._commandStack,n=t.dataSource,r=!!e._itemsToRemove.length&&e._itemsToRemove.splice(0,1)[0];if(r){i.push({item:r}).then(h(e._removeItem,e),h(e._removeItem,e));n.remove(r)}}});var d=a.extend({init:function(e){a.fn.init.call(this,e)},exec:function(){var e=this,t=e.filemanager,i=t.dataSource,n=t._commandStack,r=e.options.items,a=i.get(e.options.target),o=a.children;for(var s=0;s<r.length;s++){var l=i.get(r[s]).toJSON();l.fileManagerNewItem=true;n.push({item:l,target:a});o.add(l)}}});var u=a.extend({init:function(e){var t=this;a.fn.init.call(t,e);t._itemsToRemove=[]},exec:function(){var e=this,t=e.filemanager,i=t._commandStack,n=t.dataSource,r=e.options.items,a=n.get(e.options.target),o=a.children,s=[];for(var l=0;l<r.length;l++){var d=n.get(r[l]);var u=d.toJSON();u.fileManagerNewItem=true;var c=i.push({item:d,target:a}).then(h(e._delete,e));s.push(c);o.add(u)}f.whenAll(s).always(h(e._removeItem,e))},_delete:function(e){var t=this;t._itemsToRemove.push(e.item)},_removeItem:function(){var e=this,t=e.filemanager,i=t._commandStack,n=t.dataSource,r=!!e._itemsToRemove.length&&e._itemsToRemove.splice(0,1)[0];if(r){i.push({item:r}).then(h(e._removeItem,e),h(e._removeItem,e));n.remove(r)}}});var c=a.extend({init:function(e){a.fn.init.call(this,e)},exec:function(){var e=this,t=e.options,i=e.filemanager,n=i.defaultSortOption;r(n,{dir:t.dir,field:t.field});i._view.widgetComponent.dataSource.sort([i.folderSortOption,n])}});var p=a.extend({init:function(e){a.fn.init.call(this,e)},exec:function(){var e=this,t=e.options,i=e.filemanager,n={field:t.field,operator:t.operator,value:t.value};i._view.widgetComponent.dataSource.filter(n)}});var v=a.extend({init:function(e){a.fn.init.call(this,e)},exec:function(){var e=this,t=e.options,i=e.filemanager;i.view(t.value);i.resize(true)}});var m=a.extend({init:function(e){a.fn.init.call(this,e)},exec:function(){var e=this,t=e.filemanager,i=t[e.options.type];if(i){i.open()}else{window.console.warn(f.format("The {0} dialog is not available!",e.options.type))}}});var g=a.extend({init:function(e){a.fn.init.call(this,e)},exec:function(){var e=this,t=e.filemanager,i=t[e.options.type],n=e.getResizable();if(i){i.toggle();if(n){t.wrapper.find(n.options.handle).toggle()}}},getResizable:function(){var e=this,t=e.filemanager,i=e.options.type;if(!t._resizeDraggable){return}return t._resizeDraggable[i]}});var _=i.extend({init:function(){var e=this;e._stack={};e._keys=[]},push:function(e){var t=this,i=f.guid();t._keys.push(i);t._stack[i]={guid:i,data:e,deferred:n()};return t._stack[i].deferred},next:function(){var e=this,t=e.keys().splice(0,1),i=e._stack[t];return i},resolve:function(e){var t=this;delete t._stack[e.guid];e.deferred.resolve(e.data)},reject:function(e){var t=this;delete t._stack[e.guid];e.deferred.reject(e.data)},keys:function(){return this._keys},empty:function(){return this.keys().length===0}});r(f.ui,{filemanager:{FileManagerCommand:a,CommandStack:_,commands:{CreateFolderCommand:o,RenameCommand:s,DeleteCommand:l,MoveCommand:u,CopyCommand:d,SortCommand:c,SearchCommand:p,ChangeViewCommand:v,OpenDialogCommand:m,TogglePaneCommand:g}}})})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("filemanager/view",["kendo.listview","kendo.treeview"],e)})(function(){(function(l,d){var u=window.kendo,o=u.ui,r=u.Observable,c=l.extend,s=l.proxy,a=u.keys,f="navigate",i="select",t="expand",h="change",n="open",p="load",v="keydown",m="keydownAction",g=".kendoFileManagerViewComponent",_=[],b=null;var e=function(e,t){o.filemanager.ViewComponents[e]=t};var w=function(e){return o.filemanager.ViewComponents[e]||null};var k=r.extend({init:function(e,t,i){var n=this;n.element=t;n.options=i;if(e){n.widgetComponent=new e(t,i)}else{throw new Error("The widget for the ViewComponent is not available! Please add the corresponding scripts!")}r.fn.init.call(n)},_bindEvents:function(){this.widgetComponent.bind("dataBinding",s(this._binding,this));this.widgetComponent.bind("dataBound",s(this._bound,this))},_binding:function(e){if(this.trigger("dataBinding",e)){e.preventDefault()}},_bound:function(){this.trigger("dataBound")},_setDSOptions:function(e,t){if(!e.dataSource&&t){e.dataSource=t}},_initDragAndDrop:function(e,t){var i=this;t=t||i.options.dropFilter;e=e||i.element;i.draggable=e.kendoDraggable({filter:t,hint:s(i._hint,i),cursorOffset:{top:-10,left:-50},holdToDrag:true,ignore:"input, .k-focusable",hold:s(i._hold,i)}).data("kendoDraggable");i.draggable.userEvents.minHold=150;i.droptarget=e.kendoDropTargetArea({filter:t,drop:s(i._onDrop,i),dragenter:function(e){e.dropTarget.addClass("k-filemanager-drop-target")},dragleave:function(e){e.dropTarget.removeClass("k-filemanager-drop-target")}}).data("kendoDraggable")},_hold:function(e){var t=this,i=e.currentTarget;if(!i.is(".k-state-selected")){if(t.widgetComponent.selectable){t.widgetComponent.selectable.clear()}t.widgetComponent.select(i)}if(t.widgetComponent.selectable){t.widgetComponent.selectable.userEvents.cancel()}},_hint:function(e){var t=this,i=t.widgetComponent.dataItem(e),n=t.widgetComponent.select();b=t.widgetComponent;_=n;if(n.length>1){return u.format("<div class='k-filemanager-drag-hint'><span class='k-icon k-i-{0}'></span> <span>{1} {2}</span></div>","file",n.length,t.options.messages.items)}return u.format("<div class='k-filemanager-drag-hint'><span class='k-icon k-i-{0}'></span> <span>{1}</span></div>",i.isDirectory?"folder":"file",i.name)},_onDrop:function(e){var t=this,i=t.widgetComponent.dataItem(e.dropTarget),n=i.id,r=[];if(!i.isDirectory){return}for(var a=0;a<_.length;a++){var o=b.dataItem(_[a]).id;r.push(o)}this.trigger("drop",{target:n,items:r})},getSelected:function(){throw new Error("Not Implemented!")},refresh:function(e){this.widgetComponent.setDataSource(e)},destroy:function(){u.destroy(this.element)}});c(u.ui.filemanager,{ViewComponent:k,ViewComponents:{},registerViewComponent:e,getViewComponent:w});var y=k.extend({init:function(e,t,i){var n=this,r=i.dataSource,a=i.messages;t=c({},n.defaultOptions,t,{messages:a});n._setDSOptions(t,r);t.kendoKeydown=t.kendoKeydown||s(n._kendoKeydown,n);k.fn.init.call(this,o.ListView,e,t);n.listView=n.widgetComponent;n._bindEvents();if(i.draggable!==false&&!r.isLocalBinding){n._initDragAndDrop()}},defaultOptions:{layout:"flex",flex:{direction:"row",wrap:"wrap"},selectable:u.support.mobileOS?"row":"multiple",template:"<div class='k-listview-item' title='#:name##:extension#'>"+"<div class='k-file-preview'><span class='k-file-icon k-icon k-i-#= !isDirectory ? kendo.getFileGroup(extension, true) : 'folder' #'></span></div>"+"<div class='k-file-name file-name'>#:name##:extension#</div>"+"</div>",editTemplate:"<div class='k-listview-item'>"+"<div class='k-file-preview'><span class='k-file-icon k-icon k-i-#= !isDirectory ? kendo.getFileGroup(extension, true) : 'folder' #'></span></div>"+"<div class='k-file-name'><input type='text' class='k-textbox' data-bind='value:name' name='name' required='required' /></div>"+"</div>",dropFilter:".k-listview-item",navigatable:true},_bindEvents:function(){var n=this,e=n.listView;e.bind(h,s(n._select,n));e.element.on("dblclick"+g,s(n._dblClick,n));e.element.on("mousedown"+g,".k-listview-item:not(.k-edit-item)",s(n._mousedown,n));e.element.on(v+g,".k-edit-item",s(n._keydown,n));e.element.on(v+g,s(n._keydownAction,n));e.bind("edit",function(e){var t=e.sender;var i=e.item.find("input");i.on("blur",function(){var e=t._modelFromElement(t.editable.element).dirty;t._closeEditable();if(!e){n.trigger("cancel")}})});e.bind("cancel",function(){n.trigger("cancel")});k.fn._bindEvents.call(this)},_select:function(){var e=this,t=e.getSelected();e.trigger(i,{entries:t})},_keydown:function(e){var t=this;if(e.keyCode===u.keys.ESC){t.listView._closeEditable();t.trigger("cancel")}},_keydownAction:function(e){var t=this,i=l(e.target).find(".k-state-focused");if(i.length&&!i.is(".k-edit-item")){t.trigger(m,{target:i,keyCode:e.keyCode})}},_mousedown:function(e){var t=this,i=l(e.target).closest(".k-listview-item");if(e.which===3&&!i.is(".k-state-selected")){t.listView.selectable.clear();t.listView.select(i)}},_kendoKeydown:function(e){var t=this;if(e.keyCode===a.ENTER&&!e.preventKendoKeydown){t._handleEnterKey(e)}},_handleEnterKey:function(e){var t=this,i=l(e.target),n=t.listView.current();if(t.widgetComponent.editable&&i.is("input")){i.trigger("blur")}else if(!t.widgetComponent.editable){t._triggerOpen(n)}e.preventKendoKeydown=true},_dblClick:function(e){var t=this,i=l(e.target).closest(".k-listview-item");t._triggerOpen(i)},_triggerOpen:function(e){var t=this;if(e.is(".k-edit-item")){return}var i=t.listView.dataItem(e);if(i){t.trigger(n,{entry:i})}},addFolder:function(){this.listView.add()},edit:function(e){var t=this,i=t.listView.select();t.listView.edit(e||i)},getSelected:function(){var e=this,t=e.listView.select(),i=[];for(var n=0;n<t.length;n++){var r=e.listView.dataItem(t[n]);if(r){i.push(r)}}return i},destroy:function(){this.listView.element.off(g);k.fn.destroy.call(this)}});o.filemanager.registerViewComponent("list",y);var x=k.extend({init:function(e,t,i){var n=this,r=i.messages;t=c({},n.defaultOptions,t,{messages:r});k.fn.init.call(this,o.TreeView,e,t);n.treeView=n.widgetComponent;n._bindEvents();if(i.draggable!==false&&!i.isLocalBinding){n._initDragAndDrop()}},defaultOptions:{dataTextField:"name",dropFilter:".k-item"},_refreshDataSource:function(e){var t=this,i=t.treeView,n=e.action,r=e.node,a=null,o=e.items.filter(function(e){return e.isDirectory}).map(function(e){return c({},e.toJSON(),{id:e.id||u.guid(),hasChildren:e.hasChildren,items:[]})});if(r){a=i.findByUid(i.dataSource.get(r.id).uid);i._progress(a,false)}if(!o.length){return}if(n=="itemloaded"||a&&n==="sync"){a.find(".k-item").each(function(e,t){i.remove(t)});i.append(o,a);if(t._shouldFocus){i.current(a);i.focus()}}else if(n=="remove"){this._remove(o[0].id)}else if(n=="itemchange"){var s=i.dataSource.get(o[0].id);if(s){s.set(e.field,o[0][e.field])}else{i.append(o[0],a)}}else if(!i.dataSource.data().length){i.append(o)}else if(n==="sync"||n===d&&!a){i.items().each(function(e,t){i.remove(t)});i.append(o);if(t._shouldFocus){i.current(i._nextVisible(l()));i.focus()}}},_remove:function(e){var t=this,i=t.treeView,n=i.dataSource,r=n.get(e),a;if(r){a=i.findByUid(r.uid);i.remove(a)}},_bindEvents:function(){var e=this;e.treeView.bind(i,s(e._navigate,e));e.treeView.bind(t,s(e._expand,e));e.treeView.element.bind(v,s(e._keydownAction,e))},_keydownAction:function(e){var t=this,i=l(e.target).find(".k-state-focused").closest(".k-item");t.trigger(m,{target:i,keyCode:e.keyCode})},_expand:function(e){var t=this,i=t.treeView,n=i.dataItem(e.node);e.preventDefault();t.trigger(p,{entryId:n.id})},_navigate:function(e){var t=this,i=e.node,n=t.treeView.dataItem(i),r=n.id;e.preventDefault();t.trigger(f,{path:r,entry:n.toJSON()})},_hold:l.noop,getSelected:function(){var e=this,t=e.treeView.element.find(".k-state-selected").closest(".k-item"),i=e.treeView.dataItem(t);return i},refresh:function(e){var t=this,i=t.treeView,n=i.dataSource.get(e),r=n&&i.findByUid(n.uid);if(n&&r){i.element.find(".k-state-selected").removeClass("k-state-selected");r.find("> div .k-in").removeClass("k-state-hover").addClass("k-state-selected")}},reload:function(){this.treeView.dataSource.read()}});o.filemanager.registerViewComponent("tree",x);if(u.ui.Grid){var C=k.extend({init:function(e,t,i){var n=this,r=i.dataSource,a=i.messages;t=c({},n.defaultOptions,t,{messages:a});n._setDSOptions(t,r);n._setupColumns(t,a);t.kendoKeydown=t.kendoKeydown||s(n._kendoKeydown,n);k.fn.init.call(this,o.Grid,e,t);n.grid=n.widgetComponent;n._bindEvents();if(i.draggable!==false&&!r.isLocalBinding){n._initDragAndDrop()}},defaultOptions:{selectable:u.support.mobileOS?"row":"multiple",editable:{mode:"inline",confirmation:false},sortable:true,dropFilter:"tr:not(.k-grid-edit-row)",navigatable:true},_setupColumns:function(e,t){if(!e.columns){e.columns=[{field:"name",title:t.nameField||"Name",template:function(e){var t=!e.isDirectory?u.getFileGroup(e.extension,true):"folder";var i="<div class='file-group-icon'>"+"<span class='k-icon k-i-"+t+"'></span>"+"</div>"+"<div class='file-name'>"+u.htmlEncode(e.name+e.extension)+"<div>";return i}},{field:"created",title:t.dateCreatedField,format:"{0:G}"},{field:"size",title:t.sizeField,template:function(e){if(e.size>0){return u.getFileSizeMessage(e.size)}else{return""}}}]}},_bindEvents:function(){var e=this,t=e.grid;t.bind(h,s(e._select,e));t.table.on("dblclick"+g,s(e._dblClick,e));t.table.on("mousedown"+g,"tr:not(.k-grid-edit-row)",s(e._mousedown,e));t.table.on(v+g,".k-grid-edit-row",s(e._keydown,e));t.table.on(v+g,s(e._keydownAction,e));t.bind("edit",function(){e._toggleFocusable(true)});t.bind("cancel",function(){e.trigger("cancel")});t.saveRow=l.noop;k.fn._bindEvents.call(this)},_kendoKeydown:function(e){var t=this,i=t.grid.current(),n=i?i.closest("tr[data-uid]"):null;if(n&&e.keyCode===a.ENTER&&!e.preventKendoKeydown){t._triggerOpen(n);e.preventKendoKeydown=true}if(e.keyCode===a.F2){e.preventKendoKeydown=true}},_keydownAction:function(e){var t=this,i=l(e.target).find(".k-state-focused").closest("tr");if(i.length&&!i.is(".k-grid-edit-row")){t.trigger(m,{target:i,keyCode:e.keyCode})}},_keydown:function(e){var t=this,i=t.grid;if(!l(e.target).closest(".k-grid-edit-row").length){return}if(e.keyCode===u.keys.ENTER){setTimeout(function(){var e=t.grid._editContainer||l();e.find("input").trigger("blur");t._closeEditable()});t._tryCancel()}if(e.keyCode===u.keys.ESC){i.cancelChanges();t.trigger("cancel")}},_mousedown:function(e){var t=this,i=l(e.target).closest("tr[data-uid]");if(e.which===1&&t.grid.editable){setTimeout(function(){t._closeEditable()});t._tryCancel()}if(e.which===3&&!i.is(".k-state-selected")){t.grid.selectable.clear();t.grid.select(i)}},_tryCancel:function(){var e=this,t=e.grid,i;if(t.editable){i=t._editContainer;if(!i.find("input").val()){t.cancelChanges()}}setTimeout(function(){e._toggleFocusable(false)})},_toggleFocusable:function(e){var t=this,i=t.grid;i.table.find("tr,td").children().addBack().toggleClass("k-focusable",e)},_closeEditable:function(){var e=this,t;if(e.grid.editable&&!e.grid.editable.options.model.dirty){t=e.grid._editContainer;e.grid._destroyEditable();e.grid._displayRow(t);e.trigger("cancel")}},_select:function(){var e=this,t=e.getSelected();e.trigger(i,{entries:t})},_dblClick:function(e){var t=this,i=l(e.target).closest("tr[data-uid]");t._triggerOpen(i)},_triggerOpen:function(e){var t=this;if(e.is(".k-grid-edit-row")){return}var i=t.grid.dataItem(e);if(i){t.trigger(n,{entry:i})}},getSelected:function(){var e=this,t=e.grid.select(),i=[];for(var n=0;n<t.length;n++){i.push(e.grid.dataItem(t[n]))}return i},addFolder:function(){this.grid.addRow()},edit:function(e){var t=this,i=t.grid.select();t.grid.editRow(e||i)},destroy:function(){this.grid.table.off(g);this.grid.element.off(g);k.fn.destroy.call(this)}});o.filemanager.registerViewComponent("grid",C)}})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("filemanager/toolbar",["kendo.toolbar","kendo.switch"],e)})(function(){(function(s,e){var o=window.kendo,l=s.extend,d=s.proxy,n=o.ui.ToolBar,t=o.toolbar.Item,u="click",i="toggle",r="close",a="action",c="change",f=".fileManagerToolbar";var h=n.extend({init:function(e,t){var i=this;i._extendOptions(t);n.fn.init.call(i,e,t);i._attachEvents()},events:n.fn.events.concat([a]),defaultTools:{createFolder:{type:"button",text:"New Folder",name:"createFolder",command:"CreateFolderCommand",rules:'{ "remote": true }'},upload:{type:"button",text:"Upload",name:"upload",command:"OpenDialogCommand",options:'{ "type": "uploadDialog" }',rules:'{ "remote": true }'},sortDirection:{type:"buttonGroup",text:"Sort Direction",name:"sortDirection",buttons:[{name:"sortDirectionAsc",icon:"sort-asc-sm",togglable:true,group:"sortDirection",command:"SortCommand",options:'{ "dir": "asc" }',selected:true},{name:"sortDirectionDesc",icon:"sort-desc-sm",togglable:true,group:"sortDirection",command:"SortCommand",options:'{ "dir": "desc" }'}]},sortField:{type:"splitButton",text:"Sort By",name:"sortField",command:"SortCommand",menuButtons:[{name:"nameField",text:"Name",options:'{"field": "name"}',command:"SortCommand"},{name:"typeField",text:"Type",options:'{"field": "extension"}',command:"SortCommand"},{name:"sizeField",text:"Size",options:'{"field": "size"}',command:"SortCommand"},{name:"dateCreatedField",text:"Date created",options:'{"field": "createdUtc"}',command:"SortCommand"},{name:"dateModifiedField",text:"Date modified",options:'{"field": "modifiedUtc"}',command:"SortCommand"}]},changeView:{type:"buttonGroup",text:"Change View",name:"changeView",buttons:[{name:"gridView",icon:"grid-layout",togglable:true,group:"changeView",command:"ChangeViewCommand",options:"grid"},{name:"listView",icon:"grid",togglable:true,group:"changeView",command:"ChangeViewCommand",options:"list"}]},spacer:{type:"spacer"},details:{type:"fileManagerDetailsToggle",text:"View Details",name:"details",overflow:"never",command:"TogglePaneCommand",options:'{ "type": "preview" }'},search:{type:"fileManagerSearch",text:"Search",name:"search",command:"SearchCommand",icon:"search",overflow:"never",options:'{ "field": "name", "operator": "startswith" }'}},_attachEvents:function(){var e=this;e.bind(i,d(e._click,e));e.bind(r,d(e._click,e));e.bind(u,d(e._click,e));e.bind(c,d(e._change,e))},_extendOptions:function(e){var t=this,i=e.items?e.items:Object.keys(t.defaultTools);t.options=e;t.options.items=t._extendToolsOptions(i)},_extendToolsOptions:function(e){var r=this,a=r.options.messages;if(!e.length){return}return e.map(function(e){var t=s.isPlainObject(e)&&Object.keys(e).length===1&&e.name,i,n;e=t?e.name:e;i=s.isPlainObject(e)?e:l({},r.defaultTools[e]);n=i.rules?JSON.parse(i.rules):{};o.deepExtend(i,{id:i.name+"-"+o.guid(),name:i.name,text:a[i.name],attributes:{"aria-label":a[i.name],title:a[i.name],"data-command":i.command,"data-options":i.options},overflow:i.overflow});if(i.type==="buttonGroup"){i.buttons=i.buttons.map(d(r._mapButtonGroups,r))}if(i.type==="splitButton"){i.menuButtons=i.menuButtons.map(d(r._mapMenuButtons,r))}if(n.remote&&r.options.filemanager.dataSource.isLocalBinding){i.hidden=true}return i},r)},_mapButtonGroups:function(e){var t=this,i=t.options.messages;if(e.group==="changeView"&&e.options===t.options.filemanager.options.initialView){e.selected=true}return o.deepExtend(e,{attributes:l({},e.attributes,{"aria-label":i[e.name],title:i[e.name],"data-command":e.command,"data-options":e.options})})},_mapMenuButtons:function(e){var t=this,i=t.options.messages;return o.deepExtend(e,{text:i[e.name],attributes:l({},e.attributes,{"aria-label":i[e.name],title:i[e.name],"data-command":e.command,"data-options":e.options})})},_click:function(e){var t=s(e.target).data("command"),i=s(e.target).data("options");if(!t){return}this.action({command:t,options:i})},_change:function(e){var t=s(e.target).data("command"),i=s(e.target).data("options");i=l({},i,{value:s(e.target).val()});if(!t){return}this.action({command:t,options:i})},isToolEnabled:function(e){var t=this,i=t.options,n=false;for(var r=0;r<i.items.length;r++){if(i.items[r].name==e){n=true;break}}return i.items[e]||n},action:function(e){this.trigger(a,e)},destroy:function(){if(this.fileManagerSearch){this.fileManagerSearch.destroy()}n.fn.destroy.call(this)}});var p=t.extend({init:function(e,t){var i=this,n=s("<div class='k-filemanager-search-tool k-textbox'></div>"),r=s("<input class='k-input' autocomplete='off' />"),a=s("<span class='k-input-icon'></span>"),o=s("<span />");i.element=n;i.input=r;i.iconWrapper=a;i.icon=o;i.options=e;i.options.type="fileManagerSearch";i.toolbar=t;i.attributes();i.renderIcon();i.addUidAttr();i.addIdAttr();i.addOverflowAttr();i.input.attr({placeholder:i.options.text,title:i.options.text});i.iconWrapper.append(o);i.element.append(i.input).append(a);i._bindEvents();i.toolbar.fileManagerSearch=i},attributes:function(){if(this.options.attributes){this.input.attr(this.options.attributes)}},renderIcon:function(){if(this.options.icon){this.icon.addClass("k-icon k-i-"+this.options.icon)}},_bindEvents:function(){this._inputHandler=d(this._input,this);this.input.on("input"+f,this._inputHandler)},_input:function(e){this.toolbar.trigger(c,{target:e.target})},destroy:function(){this.element.off(f)}});o.toolbar.registerComponent("fileManagerSearch",p);var v=t.extend({init:function(e,t){var i=this,n=s("<div class='k-filemanager-details-toggle'></div>"),r=s("<label>"+e.text+"</label>"),a=s("<input title='"+e.text+"' />");i.element=n;i.input=a;i.label=r;i.options=e;i.toolbar=t;i.attributes();i.addUidAttr();i.addIdAttr();i.addOverflowAttr();i.element.append(i.label);i.element.append(i.input);i.switchInstance=new o.ui.Switch(i.input,{change:d(i._change,i),messages:{checked:t.options.messages.detailsChecked,unchecked:t.options.messages.detailsUnchecked}});i.label.on(u+f,d(i._click,i));i.toolbar.fileManagerDetailsToggle=i},_change:function(e){this.toolbar.trigger(c,{target:e.sender.wrapper.parent()})},_click:function(e){this.switchInstance.toggle();this.toolbar.trigger(c,{target:s(e.target).parent()})},destroy:function(){this.element.off(f)}});o.toolbar.registerComponent("fileManagerDetailsToggle",v);l(o.ui.filemanager,{ToolBar:h})})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("filemanager/data",["kendo.data"],e)})(function(){(function(i,e){var r=window.kendo,t=i.extend,n=r.data,a=n.Node,o=n.HierarchicalDataSource,s=n.DataSource;t(true,r.data,{schemas:{filemanager:{data:function(e){return e.items||e||[]},model:{id:"path",hasChildren:"hasDirectories",fields:{name:{editable:true,type:"string",defaultValue:"New Folder"},size:{editable:false,type:"number"},path:{editable:false,type:"string"},extension:{editable:false,type:"string"},isDirectory:{editable:false,defaultValue:true,type:"boolean"},hasDirectories:{editable:false,defaultValue:false,type:"boolean"},created:{type:"date",editable:false},createdUtc:{type:"date",editable:false},modified:{type:"date",editable:false},modifiedUtc:{type:"date",editable:false}}}}}});var l=a.define({init:function(e){var t=this,i=this.isDirectory;a.fn.init.call(this,e);if(typeof i==="string"){i=r.getter(i)}if(r.isFunction(i)){var n=i.call(t,t);if(n&&n.length===0){t.isDirectory=false}else{t.isDirectory=!!n}}if(t.isDirectory){t._initChildren()}},_initChildren:function(){var i=this;var e,t,n;if(!(i.children instanceof r.data.FileManagerDataSource)){e=i.children=new r.data.FileManagerDataSource(i._childrenOptions);t=e.transport;n=t.parameterMap;t.parameterMap=function(e,t){if(t==="read"||t==="create"){e.target=i.id}if(n){e=n.call(i,e,t)}return e};e.parent=function(){return i};e.bind("change",function(e){e.node=e.node||i;i.trigger("change",e)});e.bind("error",function(e){var t=i.parent();if(t){e.node=e.node||i;t.trigger("error",e)}});i._updateChildrenField()}},isNew:function(){if(this.fileManagerNewItem){delete this.fileManagerNewItem;return true}return this.id===this._defaultId}});var d=o.extend({init:function(e){var t=l.define({children:e});if(e.filter&&!e.serverFiltering){this._hierarchicalFilter=e.filter;e.filter=null}s.fn.init.call(this,i.extend(true,{},{schema:{modelBase:t,model:t}},e));this.isLocalBinding=this.transport instanceof r.data.LocalTransport;this._attachBubbleHandlers()},insert:function(e,t){var i=this.parent();if(i&&i._initChildren){if(t&&t.isDirectory){i.hasDirectories=true}i.hasChildren=true;i._initChildren()}return s.fn.insert.call(this,e,t)},remove:function(e){var t=this,i=e.parentNode(),n=t,r;if(i&&i._initChildren){n=i.children}t._cleanDestroyed(e);r=s.fn.remove.call(n,e);if(i&&(n.data()&&!n.data().length)){i.hasChildren=false}else if(i&&!this._hasDirectories(i)){i.hasDirectories=false}return r},_cleanDestroyed:function(e){var t=this,i=t;if(e.parentNode&&e.parentNode()){e=e.parentNode();i=e.children;i._destroyed=[];t._cleanDestroyed(e)}else{i._destroyed=[]}},_hasDirectories:function(e){var t;if(!e.children.data()){return false}t=e.children.data().filter(function(e){return e.isDirectory});return!!t.length}});d.create=function(e){e=e&&e.push?{data:e}:e;var t=e||{},i=t.data;if(i&&i._dataSource){return i._dataSource}t.data=i;return t instanceof d?t:new d(t)};r.observableFileManagerData=function(e){var t=d.create({data:e,schema:r.data.schemas.filemanager});t.fetch();t._data._dataSource=t;return t._data};t(r.data,{FileManagerDataSource:d,FileEntry:l})})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("filemanager/contextmenu",["kendo.menu"],e)})(function(){(function(o,e){var t=window.kendo,n=o.extend,r=o.proxy,i=t.template,a=t.ui.ContextMenu,s="action";var l=a.extend({init:function(e,t){var i=this;a.fn.init.call(i,e,t);i._overrideTemplates();i._restrictDefaultItems();i._extendItems();i.bind("select",r(i._onSelect,i));i.bind("open",r(i._onOpen,i))},_overrideTemplates:function(){this.templates.sprite=i("#if(spriteCssClass) {#<span class='#= spriteCssClass #'></span>#}#")},_restrictDefaultItems:function(){var e=this;if(e.options.isLocalBinding){e.defaultItems={}}},defaultItems:{rename:{text:"Rename",spriteCssClass:"k-icon k-i-edit",command:"RenameCommand"},delete:{text:"Delete",spriteCssClass:"k-icon k-i-delete",command:"DeleteCommand"}},events:a.fn.events.concat([s]),_extendItems:function(){var e=this,t=e.options.items,i,n;if(t&&t.length){for(var r=0;r<t.length;r++){i=t[r];n=o.isPlainObject(i)&&Object.keys(i).length===1&&i.name;if(n){i=i.name}if(o.isPlainObject(i)){e._extendItem(i);e.append(i)}else if(e.defaultItems[i]){i=e.defaultItems[i];e._extendItem(i);e.append(i)}}}else{for(var a in e.defaultItems){i=e.defaultItems[a];e._extendItem(i);e.append(i)}}},_extendItem:function(e){var t=this,i=t.options.messages;n(e,{text:i[e.text],spriteCssClass:e.spriteCssClass||"",attr:{"data-command":e.command}})},_onSelect:function(e){var t=o(e.item).data("command");var i=o(e.target);if(!t){return}this.action({command:t,options:{target:i}})},_onOpen:function(e){var t=e.sender,i=t.options.items;if(!i&&o.isEmptyObject(this.defaultItems)){e.preventDefault()}},action:function(e){this.trigger(s,e)}});n(t.ui.filemanager,{ContextMenu:l})})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.filemanager",["filemanager/commands","filemanager/view","filemanager/toolbar","filemanager/data","filemanager/contextmenu","kendo.breadcrumb","kendo.upload","kendo.dialog","kendo.resizable"],e)})(function(){var e={id:"filemanager",name:"FileManager",category:"web",description:"The FileManager widget displays offers file management functionality.",depends:["core","data","listview","toolbar","breadcrumb","menu","treeview","upload","dialog","switch","resizable","selectable","editable"],features:[{id:"filemanager-grid-view",name:"GridView",description:"Support for GridView",depends:["grid"]}]};(function(l,a){var o=kendo.ui,s=l.extend,d=l.isPlainObject,u=l.isArray,n=o.DataBoundWidget,c=l.proxy,f=kendo.template,h=kendo._outerHeight,r="navigate",p="select",v="open",m="error",g="change",_="upload",b="success",w="close",k="hide",y="load",x="dataBinding",C="dataBound",S="drop",T="execute",D="command",A="keydownAction",E="cancel",I="tree",M=".";var R={wrapper:"k-widget k-widget-2021 k-filemanager",header:"k-filemanager-header",navigation:"k-filemanager-navigation",contentContainer:"k-filemanager-content-container",content:"k-filemanager-content",preview:"k-filemanager-preview",toolbar:"k-filemanager-toolbar",treeview:"k-filemanager-treeview",breadcrumb:"k-filemanager-breadcrumb",view:"k-filemanager-view",grid:"k-filemanager-grid",list:"k-filemanager-listview",upload:"k-filemanager-upload",uploadDialog:"k-filemanager-upload-dialog",splitBar:"k-splitbar",splitBarHorizontal:"k-splitbar-horizontal k-splitbar-draggable-horizontal",splitBarHover:"k-splitbar-horizontal-hover",splitBarIcon:"k-icon k-resize-handle",splitBarNavigation:"k-filemanager-splitbar-navigation",splitBarPreview:"k-filemanager-splitbar-preview",resizable:"k-filemanager-resizable"};var F={filePreview:"k-file-preview",fileInfo:"k-file-info",fileName:"k-file-name",fileMeta:"k-file-meta",metaLabel:"k-file-meta-label",metaValue:"k-file-meta-value",extension:"k-file-type",size:"k-file-size",created:"k-file-created",modified:"k-file-modified"};var e={grid:"grid",list:"list"};var t=""+'<div class="#:styles.fileInfo#">'+'<div class="#:styles.filePreview#">'+'<span class="k-file-icon k-icon k-i-none"></span>'+"</div>"+'<span class="#:styles.fileName#" k-no-file-selected>#: messages.noFileSelected #</span>'+"</div>";var i=""+'<div class="#:styles.fileInfo#">'+'<div class="#:styles.filePreview#">'+'<span class="k-file-icon k-icon k-i-#: !selection[0].isDirectory ? kendo.getFileGroup(selection[0].extension, true) : "folder" #"></span>'+"</div>"+'<span class="#:styles.fileName#">#:selection[0].name#</span>'+"#if(metaFields){#"+'<dl class="#:styles.fileMeta#">'+"#for(var i = 0; i < metaFields.length; i+=1){#"+"#var field = metaFields[i]#"+'<dt class="#:styles.metaLabel#">#:messages[field]#: </dt>'+'<dd class="#:styles.metaValue# #:styles[field]#">'+'#if(field == "size"){#'+" #:kendo.getFileSizeMessage(selection[0][field])#"+"#} else if(selection[0][field] instanceof Date) {#"+' #:kendo.toString(selection[0][field], "G")#'+'#} else if(field == "extension") {#'+' #: !selection[0].isDirectory ? kendo.getFileGroup(selection[0].extension) : "folder"#'+"#} else {#"+" #:selection[0][field]#"+"#}#"+"</dd>"+'<dd class="k-line-break"></dd>'+"# } #"+"</dl>"+"#}#"+"</div>";var P=""+'<div class="#:styles.fileInfo#">'+'<div class="#:styles.filePreview#">'+'<span class="k-file-icon k-icon k-i-file"></span>'+"</div>"+'<span class="#:styles.fileName#">'+"#:selection.length# "+"#:messages.items#"+"</span>"+"</div>";var z=n.extend({init:function(e,t){var i=this;n.fn.init.call(i,e,t);i.options=kendo.deepExtend({},i.options,t);i.defaultSortOption={field:"name",dir:"asc"};i.folderSortOption={field:"isDirectory",dir:"desc"};i._commandStack=new o.filemanager.CommandStack;i._dataSource();i._wrapper();i._renderHeader();i._renderContentContainer();i._initContextMenu();i._renderNavigation();i._renderContent();i._renderPreview();i._initUploadDialog();i._resizable();i.resize();kendo.notify(i,kendo.ui)},options:{name:"FileManager",height:500,resizable:true,initialView:e.list,toolbar:{resizable:true},contextMenu:{},upload:{},uploadUrl:"",views:{},breadcrumb:{},draggable:true,dialogs:{upload:{width:530},moveConfirm:{width:350,closable:true},deleteConfirm:{width:360,closable:true},renamePrompt:{width:350,closable:true}},previewPane:{metaFields:["extension","size","created","modified"],noFileTemplate:t,singleFileTemplate:i,multipleFilesTemplate:P},messages:{toolbar:{createFolder:"New Folder",upload:"Upload",sortDirection:"Sort Direction",sortDirectionAsc:"Sort Direction Ascending",sortDirectionDesc:"Sort Direction Descending",sortField:"Sort By",nameField:"Name",sizeField:"File Size",typeField:"Type",dateModifiedField:"Date Modified",dateCreatedField:"Date Created",listView:"List View",gridView:"Grid View",search:"Search",details:"View Details",detailsChecked:"On",detailsUnchecked:"Off",delete:"Delete",rename:"Rename"},views:{nameField:"Name",sizeField:"File Size",typeField:"Type",dateModifiedField:"Date Modified",dateCreatedField:"Date Created",items:"items"},dialogs:{upload:{title:"Upload Files",clear:"Clear List",done:"Done"},moveConfirm:{title:"Confirm",content:"<p style='text-align: center;'>Do you want to move or copy?</p>",okText:"Copy",cancel:"Move",close:"close"},deleteConfirm:{title:"Confirm",content:"<p style='text-align: center;'>Are you sure you want to delete the selected file(s)?</br>You cannot undo this action.</p>",okText:"Delete",cancel:"Cancel",close:"close"},renamePrompt:{title:"Prompt",content:"<p style='text-align: center;'>Enter new name for the file.</p>",okText:"Rename",cancel:"Cancel",close:"close"}},previewPane:{noFileSelected:"No File Selected",extension:"Type",size:"Size",created:"Date Created",createdUtc:"Date Created UTC",modified:"Date Modified",modifiedUtc:"Date Modified UTC",items:"items"}}},events:[r,p,v,x,C,m,S,T,D],_dataSource:function(){var e=this,t=e.options,i=t.dataSource||{},n=e.folderSortOption,r=e.defaultSortOption,a;if(!(i instanceof kendo.data.FileManagerDataSource)){if(u(i)){a={data:i,autoSync:false,sort:[n,r]}}else{a=s(true,i,{autoSync:false,sort:[n,r]})}if(i&&d(i.schema)){a.schema=i.schema}else if(d(kendo.data.schemas.filemanager)){a.schema=kendo.data.schemas.filemanager}}else{a=i}if(e.dataSource&&e._errorHandler){e.dataSource.unbind(m,e._errorHandler);e.dataSource.unbind(g,e._changeHandler)}else{e._errorHandler=c(e._error,e);e._changeHandler=c(e._change,e)}e.dataSource=kendo.data.FileManagerDataSource.create(a).bind(m,e._errorHandler).bind(g,e._changeHandler)},_error:function(e){if(!this.trigger(m,e)){window.console.warn("Error! The requested URL returned "+e.xhr.status+" - "+e.xhr.statusText)}},_wrapper:function(){var e=this,t=e.options,i=t.width,n=t.height;e.wrapper=e.element.addClass(R.wrapper);if(i){e.wrapper.width(i)}if(n){e.wrapper.height(n)}e._resizeHandler=kendo.onResize(function(){e.resize(true)})},_renderHeader:function(){var e=this,t=e.options;if(t.toolbar){e.header=l("<div />").addClass(R.header);e.header.append(e._initToolbar().element)}e.wrapper.append(e.header)},_renderContentContainer:function(){var e=this,t=l("<div />").addClass(R.contentContainer);e.contentContainer=t;e.wrapper.append(e.contentContainer)},_initContextMenu:function(){var e=this,t=e.options,i=s({},t.contextMenu,{filemanager:e,messages:t.messages.toolbar,target:e.contentContainer,filter:"[data-uid]",action:e.executeCommand.bind(e),isLocalBinding:e.dataSource.isLocalBinding});if(t.contextMenu===false){return}e.contextMenu=new o.filemanager.ContextMenu("<ul></ul>",i);e.contextMenu.bind(v,c(e._cacheFocus,e))},_renderNavigation:function(){var e=this;e.navigation=l("<div />").addClass(R.navigation);e.navigation.append(e._initTreeView().element);e.contentContainer.append(e.navigation)},_renderContent:function(){var e=this,t=e.options,i=e.toolbar;e.content=l("<div />").addClass(R.content);if(t.breadcrumb){e.content.append(e._initBreadcrumb().element)}e.content.append(e._initView());if(!i||!i.isToolEnabled(i.defaultTools.upload.name)){e.content.append(e._initUpload().wrapper.hide())}e.contentContainer.append(e.content)},_renderPreview:function(){var e=this,t=e.options.previewPane;if(!t){return}e.preview=l("<div />").addClass(R.preview);e.previewContainer=l("<div />").addClass(R.previewContainer);e.preview.append(e.previewContainer);e._setPreviewPaneContent();e.contentContainer.append(e.preview.hide())},_setPreviewPaneContent:function(){var e=this,t=e.options,i=t.messages.previewPane,n=t.previewPane,r=e.getSelected(),a;if(!r){a=f(n.noFileTemplate)({styles:F,messages:i});e.previewContainer.html(a);return}a=r.length===1?n.singleFileTemplate:n.multipleFilesTemplate;a=f(a)({styles:F,messages:i,selection:r,metaFields:n.metaFields});e.previewContainer.html(a)},_initToolbar:function(){var e=this,t=e.options,i=l("<div />").addClass(R.toolbar),n=s({},t.toolbar,{filemanager:this,messages:t.messages.toolbar,action:e.executeCommand.bind(e)});e.toolbar=new o.filemanager.ToolBar(i,n);return e.toolbar},_initTreeView:function(){var e=this,t=l("<div />").addClass(R.treeview),i=e.options.views[I],n=s(true,{},{dataSource:e.options.dataSource,messages:e.options.messages.views,draggable:e.options.draggable,isLocalBinding:e.dataSource.isLocalBinding});e.treeView=new o.filemanager.ViewComponents[I](t,i,n);e.treeView.bind(r,c(e._navigate,e)).bind(y,c(e._load,e)).bind(S,c(e._drop,e)).bind(A,c(e._keydownAction,e));return e.treeView},_drop:function(e){var t=this;if(!t.trigger(S,e)&&e.items.indexOf(e.target)<0){t._confirm({type:"move",target:e.target}).done(function(){t.executeCommand({command:"CopyCommand",options:e})}).fail(function(){t.executeCommand({command:"MoveCommand",options:e})})}},_keydownAction:function(e){var t=this,i=e.keyCode,n=kendo.keys;if(i===n.DELETE){t.executeCommand({command:"DeleteCommand",options:{target:e.target}})}if(i===n.F2){t.executeCommand({command:"RenameCommand",options:{target:e.target}})}},_confirm:function(e){var t=this,i=t.options.messages.dialogs[e.type+"Confirm"];var n=l("<div></div>").kendoConfirm(s({},{title:i.title,content:i.content,messages:i},t.options.dialogs[e.type+"Confirm"])).data("kendoConfirm");n.bind(v,c(t._cacheFocus,t));n.bind(k,c(t._restoreFocus,t,e.target));n.open();n.wrapper.removeClass("k-confirm");return n.result},_prompt:function(e){var t=this,i=this.options.messages.dialogs[e.type+"Prompt"];var n=l("<div></div>").kendoPrompt(s({},{title:i.title,content:i.content,messages:i,value:e.defaultInput},this.options.dialogs[e.type+"Prompt"])).data("kendoPrompt");n.bind(v,c(t._cacheFocus,t));n.bind(w,c(t._restoreFocus,t,e.target));n.open();n.wrapper.removeClass("k-prompt");return n.result},_cacheFocus:function(){var e=this,t=l(document.activeElement),i=e.view(),n=e.treeView.widgetComponent;if(e.contextMenu&&e.contextMenu.popup.visible()){return}e.treeView._shouldFocus=false;if(n.current()&&n.current().find(".k-state-focused").length||t.hasClass(R.treeview)){e.treeView._shouldFocus=true;i._focusElement=t;return}i._focusElement=t.hasClass(R[e._viewType])?t:null},_restoreFocus:function(e){var t=this,i=t.view();if(!e){return}if(i._focusElement){i._focusElement.focus()}else if(e.closest&&e.closest(":kendoFocusable").length){e.closest(":kendoFocusable").focus()}},_initView:function(){var e=this,t=l("<div />").addClass(R.view),i=e.options.initialView;e.viewWrapper=t;e.viewWrapper.append(e.view(i));return t},_initBreadcrumb:function(){var e=this,t=e.options,i=l("<nav />").addClass(R.breadcrumb),n=s({},{items:[{type:"rootitem",text:""}],change:c(e._breadcrumbChange,e)},t.breadcrumb);e.breadcrumb=new o.Breadcrumb(i,n);return e.breadcrumb},_breadcrumbChange:function(e){this._navigate({path:e.value})},_initUploadDialog:function(){var e=this,t=e.options,i=t.messages.dialogs.upload,n=l("<div />"),r=s({},{title:i.title,modal:true,visible:false,width:500,actions:[{text:i.clear,action:c(e._clearUploadFilesList,e)},{text:i.done,primary:true}],messages:i},t.dialogs.upload),a;if(!e._shouldInitUpload()){return}a=e._initUpload();e.uploadDialog=new o.Dialog(n,r);e.uploadDialog.wrapper.addClass(R.uploadDialog);e.uploadDialog.element.append(a.wrapper);e.uploadDialog.bind(v,c(e._toggleUploadDropZone,e,""));e.uploadDialog.bind(w,c(e._toggleUploadDropZone,e,e.viewWrapper));return e.uploadDialog},_shouldInitUpload:function(){var e=this,t=e.options,i=false;if((t.uploadUrl||t.upload.async&&t.upload.async.saveUrl)&&t.upload!==false){i=true}return i},_initUpload:function(){var e=this,t=e.options,i=l("<input type='file' name='file'/>").addClass(R.upload),n=s(true,{async:{autoUpload:true,saveUrl:t.uploadUrl},dropZone:e.viewWrapper},t.upload);e.upload=new o.Upload(i[0],n);e.upload.bind(_,c(e._sendUploadPathParameter,e));e.upload.bind(b,c(e._success,e));return e.upload},_sendUploadPathParameter:function(e){e.data=s(e.data,{path:this.path()})},_success:function(){this._view.widgetComponent.dataSource.read()},_clearUploadFilesList:function(){var e=this,t=e.upload;if(t){t.clearAllFiles()}},_toggleUploadDropZone:function(e){var t=this,i=t.upload;if(i){i.setOptions({dropZone:e})}},_binding:function(e){if(this.trigger(x,{source:"view",action:e.action,items:e.items,index:e.index})){e.preventDefault()}},_bound:function(){if(this.options.previewPane){this._setPreviewPaneContent()}this.trigger(C)},_createResizableSplitBar:function(e){var t=l("<div />").addClass(R.splitBar).addClass(R.splitBarHorizontal).addClass(e),i=l("<span />").addClass(R.splitBarIcon);t.append(i);t.hover(function(){l(this).toggleClass(R.splitBarHover)});return t},_initResizableNavigation:function(){var e=this,i=e.wrapper,t=e._createResizableSplitBar(R.splitBarNavigation),n=i.find(M+R.content),r=i.find(M+R.navigation),a,o;t.insertAfter(r);e._resizeDraggable.navigation=e.wrapper.find(t).end().kendoResizable({handle:M+R.splitBarNavigation,start:function(){a=n.width();o=r.width()},resize:function(e){var t=e.x.initialDelta;if(kendo.support.isRtl(i)){t*=-1}if(o+t<-2||a-t<-2){return}r.width(o+t)}}).getKendoResizable()},_initResizablePreview:function(){var e=this,i=e.wrapper,t=e._createResizableSplitBar(R.splitBarPreview),n=i.find(M+R.content),r=i.find(M+R.preview),a,o;if(!e.options.previewPane){return}t.insertBefore(r).hide();e._resizeDraggable.preview=i.find(t).end().kendoResizable({handle:M+R.splitBarPreview,start:function(){a=n.width();o=r.width()},resize:function(e){var t=e.x.initialDelta;if(kendo.support.isRtl(i)){t*=-1}if(o-t<-2||a+t<-2){return}r.width(o-t)}}).getKendoResizable()},_resizable:function(){var e=this,t=e.options;e._resizeDraggable={};if(!t.resizable){return}e.wrapper.addClass(R.resizable);e._initResizableNavigation();e._initResizablePreview()},view:function(e){var t=this,i=l("<div></div>"),n=t.options.views[e],r=s(true,{},{dataSource:t._viewDataSource||t.dataSource,messages:t.options.messages.views,draggable:t.options.draggable});if(e===a){return t._view}if(!o.filemanager.ViewComponents[e]){throw new Error(kendo.format("There is no {0} ViewComponent registered!",e))}if(t._view&&t._view.destroy){t._view.destroy();t.viewWrapper.empty()}t._viewType=e;t._view=new o.filemanager.ViewComponents[e](i,n,r);t._view.bind(p,c(t._select,t));t._view.bind(v,c(t._open,t));t._view.bind(x,c(t._binding,t));t._view.bind(C,c(t._bound,t));t._view.bind(S,c(t._drop,t));t._view.bind(A,c(t._keydownAction,t));t._view.bind(E,c(t._cancel,t));t._view.element.addClass(R[e]);t.viewWrapper.removeClass(Object.keys(o.filemanager.ViewComponents).map(function(e){return R.view+"-"+e}).join(" ")).addClass(R.view+"-"+e);t.viewWrapper.append(t._view.element)},executeCommand:function(e){var t=e.command,i=s({filemanager:this},d(e.options)?e.options:{value:e.options}),n=new o.filemanager.commands[t](i);if(!this.trigger(T,e)){return n.exec()}},_navigate:function(e){var t=this,i=e.path;if(!t.trigger(r,{path:i})){t.navigate(i)}},_load:function(e){var t=this.dataSource.get(e.entryId);t.load()},_select:function(e){if(this.options.previewPane){this._setPreviewPaneContent()}this.trigger(p,{entries:e.entries})},_open:function(e){var t=this,i=e.entry;t.trigger(v,{entry:i});if(i.isDirectory){t._navigate({path:i.id})}},_cancel:function(){var e=this,t=e._commandStack,i=t.next();t.reject(i);e.trigger(D,{status:"cancel",action:"itemchange",data:i.data})},_change:function(t){var i=this,n=i._commandStack,e=t.node?t.node.children:i.dataSource;if(i.trigger(x,{source:"tree",action:t.action,items:t.items,index:t.index})){return}i.treeView._refreshDataSource(t);if(t.action==="remove"||t.action==="itemchange"||t.action==="add"){if(n.empty()){e.sync()}else{var r=n.next();e.sync().then(function(e){n.resolve(r);i.trigger(D,{status:"success",action:t.action,data:r.data,response:e})}).fail(function(e){n.reject(r);i.trigger(D,{status:"fail",action:t.action,data:r.data,response:e})})}}if(t.action==="remove"&&i._viewDataSource&&i._viewDataSource.parent()&&t.items[0]===i._viewDataSource.parent()){i._navigateToParent(t.items[0])}if(t.action=="itemchange"&&i._viewDataSource&&i._viewDataSource.parent()&&i.path().indexOf(t.items[0].id)>=0){i._navigateToParent(t.items[0])}if(t.action==="itemchange"){t.items[0].loaded(false)}},_navigateToParent:function(e){var t=this;var i=e.parentNode();var n=i?i.id:"";t._navigate({path:n})},_buildBreadcrumbPath:function(e){var t=this,i=t.breadcrumb,n=[];while(e){n.push(e.name);e=e.parentNode&&e.parentNode()}n.push("");i.value(n.reverse().join("/"))},_adjustDimensions:function(){var e=this,t=e.wrapper,i=M+R.grid,n=M+R.list,r=M+R.contentContainer,a=t.height(),o=0,s=0;if(e.toolbar){o=h(e.toolbar.wrapper)}if(e.breadcrumb){s=h(e.breadcrumb.wrapper)}if(e.options.height!=="auto"){t.find([i].join(",")).height(a-(o+s+1));t.find(n).parent().height(a-(o+s+1));t.find(r).height(a-o)}},_resize:function(){this._adjustDimensions();kendo.resize(this.element.children())},setDataSource:function(e){var t=this;t.options.dataSource=e;t._dataSource();if(t.toolbar){t.toolbar.destroy();t.header.empty();t.header.append(t._initToolbar().element)}if(t.treeView){t.treeView.destroy();t.navigation.empty();t.navigation.append(t._initTreeView().element)}if(t._view){t.view(t._viewType||t.options.initialView)}t._initContextMenu()},refresh:function(){var e=this,t=e._viewDataSource||e.dataSource;t.read()},getSize:function(){return kendo.dimensions(this.wrapper)},getSelected:function(){var e=this,t=e._view.getSelected(),i=e.treeView;if(t&&t.length){return t}var n=i.getSelected();if(n){return[e.dataSource.get(n.id)]}},path:function(){return this._path||""},navigate:function(e){var t=this,i=t.dataSource,n=i.get(e.replace(/^\//,"")),r=t._view,a=t.treeView,o=t.breadcrumb,s=e===""||e==="/";if(!n&&!s){window.console.warn("Error! Could not navigate to the folder at the requested path("+e+"). Make sure that the parent folder of the target folder has already been loaded.");return}t._path=e;if(t.trigger(x,{source:"navigation",action:"rebind",items:[n]})){return}if(o){t._buildBreadcrumbPath(n)}if(s){i.sort([t.folderSortOption,t.defaultSortOption]);t._viewDataSource=i;r.refresh(t._viewDataSource);a.treeView.select(l());if(t.options.previewPane){t._setPreviewPaneContent()}return}if(n.loaded&&!n.loaded()){n.load()}if(r){t._viewDataSource=n.children;t._viewDataSource._sort=[t.folderSortOption,t.defaultSortOption];r.refresh(t._viewDataSource)}if(a){a.refresh(n.id)}if(t.options.previewPane){t._setPreviewPaneContent()}},items:function(){var e=this;return e.treeView.widgetComponent.items().add(e._view.widgetComponent.items())},destroy:function(){var e=this;n.fn.destroy.call(e);e.dataSource.unbind(m,e._errorHandler).unbind(g,e._changeHandler);if(e._resizeDraggable.navigation){e._resizeDraggable.navigation.destroy();e._resizeDraggable.navigation=null}if(e._resizeDraggable.preview){e._resizeDraggable.preview.destroy();e._resizeDraggable.preview=null}if(e.uploadDialog){e.uploadDialog.destroy();e.uploadDialog=null}if(e.upload){e.upload.destroy();e.upload=null}if(e.contextMenu){e.contextMenu.destroy();e.contextMenu=null}kendo.unbindResize(e._resizeHandler);e.dataSource=null;e._viewDataSource=null;kendo.destroy(e.element)}});o.plugin(z)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.stepper",["kendo.core","kendo.progressbar"],e)})(function(){var e={id:"stepper",name:"Stepper",category:"web",description:"The Stepper widget displays navigation steps.",depends:["core","progressbar"]};(function(s,l){var d=window.kendo,n=d.ui.Widget,u=d.keys,c=s.extend,t=s.proxy,i=".kendoStepper",r="click",a="activate",o="select",f="keydown",h="focusout",p=".",v=" ",m="vertical",g="tabindex",_="aria-current",b="aria-disabled",w="aria-invalid",k="aria-hidden";var y={step:"k-step",firstStep:"k-step-first",lastStep:"k-step-last",doneStep:"k-step-done",successStep:"k-step-success",errorStep:"k-step-error",currentStep:"k-step-current",focusStep:"k-step-focus",disabledStep:"k-step-disabled",stepLink:"k-step-link",stepIndicator:"k-step-indicator",stepLabel:"k-step-label"};var x={widget:"k-widget k-widget-2021 k-stepper",stepperLinear:"k-stepper-linear",stepList:"k-step-list",stepListHorizontal:"k-step-list-horizontal",stepListVertical:"k-step-list-vertical"};var C=d.Class.extend({init:function(e){this.options=c({},this.options,e);this._render()},options:{label:"",icon:"",successIcon:"",iconTemplate:"",enabled:true,error:false,selected:false,isFirstStep:false,isLastStep:false,indicatorVisible:true,labelVisible:true,index:0,previous:false,selectable:true},_indicatorTemplate:'<span class="k-step-indicator" aria-hidden="true">'+"#if(successIcon && previous && !error) {#"+'<span class="k-step-indicator-icon k-icon k-i-#: successIcon #"></span>'+"#} else if(icon) {#"+'<span class="k-step-indicator-icon k-icon k-i-#: icon #"></span>'+"#} else if(previous && !error) {#"+'<span class="k-step-indicator-icon k-icon k-i-check"></span>'+"#} else {#"+'<span class="k-step-indicator-text">#: index + 1 #</span>'+"#}#"+"</span>",_labelTemplate:'<span class="k-step-label">'+'<span class="k-step-text">'+"#: label #"+"</span>"+" "+"#if(error || (!indicatorVisible && !error && previous)) {#"+'<span class="k-icon'+"#if(previous && !error){# k-i-check#}#"+"#if(error){# k-i-warning#}#"+'" aria-hidden="true"></span>'+"#}#"+"</span>",deselect:function(){this.options.selected=false;this._link();this._stepClasses()},enable:function(e){if(this.options.enabled!==e){this.options.enabled=e;this.options.selectable=e;this._link();this._stepClasses()}},select:function(){this.options.selected=true;this._link();this._stepClasses()},getEnabled:function(){return this.options.enabled},getIndex:function(){return this.options.index},setPrevious:function(e){this.options.previous=e;this._link();this._stepClasses()},getSelectable:function(){return this.options.selectable},getSelected:function(){return this.options.selected},setValid:function(e){if(this.options.error===e){this.options.error=!e;this._link();this._stepClasses()}},_indicator:function(){var e=this.options,t;if(!!e.iconTemplate){t=s("<span>").addClass(y.stepIndicator).attr(k,"true");t.append(d.template(e.iconTemplate)(e))}else{t=d.template(this._indicatorTemplate)(e)}this.element.find(p+y.stepLink).append(t)},_label:function(){var e=d.template(this._labelTemplate)(this.options);this.element.find(p+y.stepLink).append(e)},_link:function(){var e=this.options;this.element.find(p+y.stepLink).empty();this._linkAttributes();if(e.indicatorVisible){this._indicator()}if(e.labelVisible){this._label()}},_linkAttributes:function(){var e=this.options,t=this.element.find(p+y.stepLink);t.removeAttr(b+v+w+v+_+v+g);if(!e.selected){t.attr(g,"-1")}else{t.attr(_,"true")}if(!e.enabled||!e.selectable){t.attr(b,"true")}if(e.error){t.attr(w,"true")}},_render:function(){var e=s("<a href='#'>").addClass(y.stepLink).attr("title",this.options.label);this.element=s("<li>").append(e);this._link();this._stepClasses()},_stepClasses:function(){var e=this.options,t=y.step;if(e.isFirstStep){t+=v+y.firstStep}if(e.isLastStep){t+=v+y.lastStep}if(!e.enabled){t+=v+y.disabledStep}if(e.error){t+=v+y.errorStep}if(e.previous){t+=v+y.doneStep;if(!e.error){t+=v+y.successStep}}else if(e.selected){t+=v+y.currentStep;t+=v+y.focusStep}this.element.removeClass().addClass(t)}});var e=n.extend({init:function(e,t){var i=this;t=t||{};n.fn.init.call(i,e,t);i._indicatorAndLabel();i._wrapper();if(t.steps&&t.steps.length){i._processSteps(t.steps);i._progressBar()}i._attachEvents();i._resizeHandler=d.onResize(function(){i.resize()})},options:{orientation:"horizontal",linear:true,indicator:true,label:true,selectOnFocus:false,steps:null,name:"Stepper"},events:[a,o,"kendoKeydown"],destroy:function(){var e=this;if(e.progressBar){n.fn.destroy.call(e.progressBar)}n.fn.destroy.call(e);d.unbindResize(e._resizeHandler);e.wrapper.off(i)},setOptions:function(e){var t=this;n.fn.setOptions.call(t,e);if(t.progressBar){n.fn.destroy.call(t.progressBar)}t._indicatorAndLabel();t._addStepList();if(t.options.steps&&t.options.steps.length){t._processSteps(t.options.steps);t._progressBar()}},enable:function(i){var e=this.steps(),n=this.options.steps;var t=function(e,t){e.enable(i);n[t]=e.options};if(i){this.wrapper.removeAttr(b)}else{this.wrapper.attr(b,"true")}this.progressBar.enable(i);e.forEach(t)},insertAt:function(e,t){var i=this.options.steps,n;var r=function(e){if(e.selected){n=e}};if(!t||isNaN(e)){return}if(e<0){e=i.length+e}if(e<0){return}if(!i){i=[]}if(i.length===0||e>=i.length){e=i.length}i.forEach(r);if(t.selected===true){n.selected=false}i.splice(e,0,t);this._createSteps();this._renderSteps();this._resetProgressBar();this._calculateDimensions()},next:function(){if(!this._steps||this._steps.length<=1){return}var e=this.selectedStep;var t=e.getIndex();if(t+1===this._steps.length){return}else{this._select(t+1)}},previous:function(){if(!this._steps||this._steps.length<=1){return}var e=this.selectedStep;var t=e.getIndex();if(t===0){return}else{this._select(t-1)}},removeAt:function(e){var t=this.options.steps,i,n,r;if(isNaN(e)||!t||t.length<2||e>=t.length){return}if(e<0){e=t.length+e}if(e<0){return}i=t.splice(e,1)[0];if(i.selected===true&&t.length>0){if(e>0){r=e-1}else{r=0}n=t[r];if(typeof n==="string"){n={label:n};t[r]=n}n.selected=true;n.previous=false}this._createSteps();this._renderSteps();this._resetProgressBar();this._calculateDimensions()},resize:function(){this._calculateDimensions()},select:function(e){var t=this;if(e===l||e===null||isNaN(e)){return t.selectedStep}if(e>=t._steps.length||e<0){return}e=Number(e);t._select(e)},steps:function(e){if(e===l){return this._steps}this._processSteps(e);this._resetProgressBar();this._calculateDimensions()},_processSteps:function(e){var t=this,i;var n=function(e){if(e.selected){i=e}};e.forEach(n);if(!i){if(typeof e[0]==="string"){e[0]={label:e[0]}}e[0].selected=true}t.options.steps=e;t._createSteps();t._renderSteps()},_addStepList:function(){var e=this;e.wrapper.empty().append(s("<ol />").addClass(x.stepList));e._stepList=e.wrapper.find(p+x.stepList);if(e.options.orientation===m){e._stepList.addClass(x.stepListVertical)}else{e._stepList.addClass(x.stepListHorizontal)}},_attachEvents:function(){var e=this;e.wrapper.on(r+i,p+y.step,t(e._selectClickHandler,e)).on(r+i,t(e._wrapperClickHandler,e)).on(h+i,t(e._focusout,e)).on(f+i,e,t(e._keydown,e))},_calculateDimensions:function(){var e=this.options.orientation,t=this._steps.length,i=this._stepList,n=i.find(p+y.step),r=i.width()/t,a=i.height()/t,o=this.progressBar.element,s="margin-left",l={};if(e===m){n.css("max-height",100/t+"%");o.css({"margin-top":-1*(i.height()-16),height:a*(t-1)})}else{n.css("max-width",100/t+"%");if(d.support.isRtl(this.wrapper)){s="margin-right"}l[s]=r/2;l.width=r*(t-1);o.css(l)}},_createStep:function(e,t,i){var n=this,r=t===0,a=n.options,o=a.indicator,s=a.label;e=c({},e,{enabled:e.enabled===false?false:true});e=c({},e,{isFirstStep:r,isLastStep:i,indicatorVisible:o,labelVisible:s,index:t});return new C(e)},_createSteps:function(){var e=this,t=e.options.steps,i=false,n,r,a,o;e._steps=[];for(r=0;r<t.length;r++){o=t[r];if(typeof o==="string"){o={label:o}}if(o!==l){a=r===t.length-1;if(o.selected){i=true}else{o=e._selectablePreviousState(o,i,r)}n=e._createStep(o,r,a);e._steps.push(n);if(n.getSelected()){e.selectedStep=n}}}},_indicatorAndLabel:function(){if(!this.options.indicator&&!this.options.label){this.options.indicator=true;this.options.label=true}},_focusout:function(e){var t=this;if(!t.wrapper.get(0).contains(e.relatedTarget)){setTimeout(function(){t._leaveStepper()})}},_focusStep:function(e){var t=this.wrapper.find(p+y.focusStep),i=this.wrapper.find(p+y.stepLink);if(e.length>0){t.removeClass(y.focusStep);i.attr(g,"-1");e.find(p+y.stepLink).removeAttr(g)[0].focus()}},_focusNextStep:function(){var e=s(document.activeElement).closest(p+y.step),t=e.next();this._focusStep(t)},_focusPreviousStep:function(){var e=s(document.activeElement).closest(p+y.step),t=e.prev();this._focusStep(t)},_focusFirstStep:function(){var e=this.wrapper,t=e.find(p+y.firstStep);this._focusStep(t)},_focusLastStep:function(){var e=this.wrapper,t=e.find(p+y.lastStep);this._focusStep(t)},_keydown:function(e){var t=this,i=e.keyCode,n=s(document.activeElement).closest(p+y.step),r=n.index(),a=t.steps().length;if(i===u.TAB){if(e.shiftKey&&r>0){e.preventDefault();t._tabKey(e,-1)}else if(!e.shiftKey&&r<a-1){e.preventDefault();t._tabKey(e,+1)}}else if(i>34&&i<41){e.preventDefault();t._navKeys(e)}else if(i===u.ENTER||i===u.SPACEBAR){e.preventDefault();t._selectHandler(e,s(document.activeElement).closest(p+y.step))}else{e.preventDefault()}},_leaveStepper:function(){var e=this.wrapper.find(p+y.currentStep),t=this.wrapper.find(p+y.stepLink);t.removeClass(y.focusStep).attr(g,"-1");e.addClass(y.focusStep);e.find(p+y.stepLink).removeAttr(g)},_navKeys:function(e){var t=this.options.selectOnFocus;if(t){this._navKeysSelect(e)}else{this._navKeysFocus(e)}},_navKeysFocus:function(e){var t=e.keyCode,i=d.support.isRtl(this.wrapper),n=this.options.orientation;switch(t){case u.DOWN:if(i&&n!==m){this._focusPreviousStep()}else{this._focusNextStep()}break;case u.RIGHT:if(i){this._focusPreviousStep()}else{this._focusNextStep()}break;case u.UP:if(i&&n!==m){this._focusNextStep()}else{this._focusPreviousStep()}break;case u.LEFT:if(i){this._focusNextStep()}else{this._focusPreviousStep()}break;case u.HOME:this._focusFirstStep();break;case u.END:this._focusLastStep();break}},_navKeysSelect:function(e){var t=e.keyCode,i=s(document.activeElement).closest(p+y.step).index(),n=d.support.isRtl(this.wrapper),r=this.steps(),a=this.options.orientation,o;switch(t){case u.DOWN:if(n&&a!==m){o=r[i-1]}else{o=r[i+1]}break;case u.RIGHT:if(n){o=r[i-1]}else{o=r[i+1]}break;case u.UP:if(n&&a!==m){o=r[i+1]}else{o=r[i-1]}break;case u.LEFT:if(n){o=r[i+1]}else{o=r[i-1]}break;case u.HOME:o=r[0];break;case u.END:o=r[r.length-1];break}if(o){this._focusStep(o.element);this._selectHandlerOnKey(e,o.element)}},_progressBar:function(){var e=this.wrapper,t=this._progressOptions();this.progressBar=s("<div>").kendoProgressBar(t).getKendoProgressBar();this.progressBar.element.addClass("k-pos-absolute");this.progressBar.element.css("position","absolute");this._calculateDimensions();e.append(this.progressBar.element)},_progressOptions:function(){var e=this.options,t=e.orientation,i=e.steps,n,r;if(!i||i.length===0){return}else{n=i.length}r={max:n-1,value:this.select().getIndex(),orientation:t,showStatus:false};if(t===m){r.reverse=true}return r},_resetProgressBar:function(){var e=this.progressBar,t;if(!e){return}t=this._progressOptions();e.setOptions(t)},_renderSteps:function(){var e=this._steps,t=this._stepList,i,n;t.empty();for(n=0;n<e.length;n++){i=e[n];t.append(i.element)}},_resetStep:function(e,t,i){var n=this._steps[e];if(!i&&e<t){n.options.selectable=true}else if(e===t){n.options.previous=false;n.options.selected=true}else if(i&&e>t){n.options.selectable=true}else{n.options.selected=false;n.options.previous=i}if(this.options.linear&&(e<t-1||e>t+1)){n.options.selectable=false}n._link();n._stepClasses();this.options.steps[e]=n.options},_select:function(e){var t=this.options,i=t.linear,n=this.select(),r=n.getIndex(),a=t.steps,o=this._steps[e],s,l,d,u;if(!o||!o.getEnabled()||!o.getSelectable()){return}if(e>r){s=true;if(i){d=Math.max(r-1,0);u=Math.min(e+1,a.length-1)}else{d=r;u=e}}else{s=false;if(i){d=Math.max(e-1,0);u=Math.min(r+1,a.length-1)}else{d=e;u=r}}for(l=d;l<=u;l++){this._resetStep(l,e,s)}this.selectedStep=o;this.progressBar.value(e)},_selectablePreviousState:function(e,t,i){var n=this.options.steps,r=this.options.linear;if(!t){e.previous=true;if(r&&!n[i+1].selected){e.selectable=false}else{e.selectable=true}}else if(r&&!n[i-1].selected){e.selectable=false}else{e.selectable=true}return e},_selectClickHandler:function(e){var t=s(e.target).closest(p+y.step);e.preventDefault();this._preventWrapperClick=true;this._selectHandler(e,t)},_selectHandler:function(e,t){var i=this,n=i._steps[t.index()],r=this.select();if(!n||n.getIndex()===r.getIndex()||!n.getEnabled()||!n.getSelectable()){i._focusStep(r.element);return}if(!i.trigger(o,{sender:i,originalEvent:e,step:n})){i._select(n.getIndex());t.find(p+y.stepLink)[0].focus();i.trigger(a,{sender:i,originalEvent:e,step:n})}},_selectHandlerOnKey:function(e,t){var i=this,n=i._steps[t.index()];if(!n.getEnabled()||!n.getSelectable()){return}if(!i.trigger(o,{sender:i,originalEvent:e,step:n})){i._select(n.getIndex());t.find(p+y.stepLink)[0].focus();i.trigger(a,{sender:i,originalEvent:e,step:n})}},_tabKey:function(e,t){var i=this.options.selectOnFocus,n=s(document.activeElement).closest(p+y.step),r=n.index(),a=s(n.parent().find(p+y.step)[r+t]);this._focusStep(a);if(i){this._selectHandlerOnKey(e,a)}},_wrapper:function(){var e=this,t=e.element;e.wrapper=t;e.wrapper.addClass(x.widget);if(e.options.linear){e.wrapper.addClass(x.stepperLinear)}this._addStepList()},_wrapperClickHandler:function(e){var t=this.select();if(!this._preventWrapperClick){e.preventDefault();this._focusStep(t.element)}else{this._preventWrapperClick=false}}});d.stepper={Step:C};d.ui.plugin(e)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.textarea",["kendo.core","kendo.floatinglabel"],e)})(function(){var e={id:"textarea",name:"TextArea",category:"web",description:"The TextArea widget represents a multi-line plain-text editing control which enables you to style and provide a floating label functionality to textarea elements",depends:["core","floatinglabel"]};(function(o,n){var s=window.kendo,r=s.ui.Widget,e=s.ui,l=o.isPlainObject,d=".kendoTextArea",a="change",u="disabled",c="readonly",f="k-input",h="k-state-focused",p="k-label k-input-label",v="k-state-disabled",m="k-no-click",g="aria-disabled",_="k-textarea-container",b=o.proxy;var t=r.extend({init:function(e,t){var i=this;r.fn.init.call(i,e,t);t=o.extend(true,{},t);i.options.value=t.value||i.element.val();i.options.readonly=t.readonly!==n?t.readonly:Boolean(i.element.attr("readonly"));i.options.enable=t.enable!==n?t.enable:!Boolean(i.element.attr("disabled"));i.options.placeholder=t.placeholder||i.element.attr("placeholder");if(!i.options.value.replace(/\s/g,"").length){i.options.value="";i.element.val("")}i.value(i.options.value);i._wrapper();i._label();i._editable({readonly:i.options.readonly,disable:!i.options.enable});i._applyAttributes();i.element.addClass(f).css("resize",i.options.resizable).attr("autocomplete","off");s.notify(i)},events:[a],attributes:["maxLength","rows","placeholder"],options:{name:"TextArea",value:"",readonly:false,enable:true,placeholder:"",label:null,resizable:"none",maxLength:null,cols:20,rows:1},_applyAttributes:function(){var e=this;var t;var i={};for(t in e.attributes){i[e.attributes[t]]=e.options[e.attributes[t]]}e.element.attr(i)},value:function(e){var t=this;if(e===n){return t._value}t._value=e;t.element.val(e)},readonly:function(e){var t=this;this._editable({readonly:e===n?true:e,disable:false});if(t.floatingLabel){t.floatingLabel.readonly(e===n?true:e)}},enable:function(e){var t=this;this._editable({readonly:false,disable:!(e=e===n?true:e)});if(t.floatingLabel){t.floatingLabel.enable(e=e===n?true:e)}},focus:function(){var e=this;e.element[0].focus()},destroy:function(){var e=this;if(e.floatingLabel){e.floatingLabel.destroy()}e.element.off(d);r.fn.destroy.call(e)},_editable:function(e){var t=this;var i=t.element;var n=t.wrapper;var r=e.disable;var a=e.readonly;i.off(d);if(!a&&!r){i.removeAttr(u).removeAttr(c).attr(g,false);n.removeClass(v).removeClass(m);i.on("focusin"+d,b(t._focusin,t));i.on("focusout"+d,b(t._focusout,t))}else{i.attr(u,r).attr(c,a).attr(g,r);n.toggleClass(v,r).toggleClass(m,a)}},_label:function(){var e=this;var t=e.element;var i=e.options;var n=t.attr("id");var r;var a;if(i.label!==null){r=l(i.label)?i.label.floating:false;a=l(i.label)?i.label.content:i.label;if(r){e._floatingLabelContainer=e.wrapper.wrap("<span></span>").parent();e.floatingLabel=new s.ui.FloatingLabel(e._floatingLabelContainer,{widget:e});e._floatingLabelContainer.addClass(_)}if(s.isFunction(a)){a=a.call(e)}if(!a){a=""}if(!n){n=i.name+"_"+s.guid();t.attr("id",n)}e._inputLabel=o("<label class='"+p+"' for='"+n+"'>"+a+"</label>'").insertBefore(e.wrapper)}},_focusin:function(){var e=this;e.wrapper.addClass(h)},_focusout:function(){var e=this;var t=e._value;var i=e.element.val();e.wrapper.removeClass(h);if(t!==i){e._value=i;e.trigger(a)}},_wrapper:function(){var e=this;var t=e.element;var i=t[0];var n;n=t.wrap("<span class='k-widget k-widget-2021 k-textarea'></span>").parent();n[0].style.cssText=i.style.cssText;i.style.width="100%";e.wrapper=n.addClass(i.className).removeClass("input-validation-error")}});e.plugin(t)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.textbox",["kendo.core","kendo.floatinglabel"],e)})(function(){var e={id:"textbox",name:"TextBox",category:"web",description:"The TextBox widget enables you to style and provide a floating label functionality to input elements",depends:["core","floatinglabel"]};(function(o,n){var s=window.kendo,r=s.ui.Widget,e=s.ui,l=o.isPlainObject,d=".kendoTextBox",a="change",u="disabled",c="readonly",f="k-input",h="k-state-focused",p="k-label k-input-label",v="k-state-disabled",m="k-no-click",g="aria-disabled",_=o.proxy;var t=r.extend({init:function(e,t){var i=this;r.fn.init.call(i,e,t);t=o.extend(true,{},t);i.options.value=t.value||i.element.val();i.options.readonly=t.readonly!==n?t.readonly:Boolean(i.element.attr("readonly"));i.options.enable=t.enable!==n?t.enable:!Boolean(i.element.attr("disabled"));i.options.placeholder=t.placeholder||i.element.attr("placeholder");i.value(i.options.value);i._wrapper();i._label();i._editable({readonly:i.options.readonly,disable:!i.options.enable});i.element.addClass(f).attr("placeholder",i.options.placeholder).attr("autocomplete","off");s.notify(i)},events:[a],options:{name:"TextBox",value:"",readonly:false,enable:true,placeholder:"",label:null},value:function(e){var t=this;if(e===n){return t._value}t._value=e;t.element.val(e)},readonly:function(e){var t=this;this._editable({readonly:e===n?true:e,disable:false});if(t.floatingLabel){t.floatingLabel.readonly(e===n?true:e)}},enable:function(e){var t=this;this._editable({readonly:false,disable:!(e=e===n?true:e)});if(t.floatingLabel){t.floatingLabel.enable(e=e===n?true:e)}},focus:function(){var e=this;e.element[0].focus()},destroy:function(){var e=this;if(e.floatingLabel){e.floatingLabel.destroy()}e.element.off(d);r.fn.destroy.call(e)},_editable:function(e){var t=this;var i=t.element;var n=t.wrapper;var r=e.disable;var a=e.readonly;i.off(d);if(!a&&!r){i.removeAttr(u).removeAttr(c).attr(g,false);n.removeClass(v).removeClass(m);i.on("focusin"+d,_(t._focusin,t));i.on("focusout"+d,_(t._focusout,t))}else{i.attr(u,r).attr(c,a).attr(g,r);n.toggleClass(v,r).toggleClass(m,a)}},_label:function(){var e=this;var t=e.element;var i=e.options;var n=t.attr("id");var r;var a;if(i.label!==null){r=l(i.label)?i.label.floating:false;a=l(i.label)?i.label.content:i.label;if(r){e._floatingLabelContainer=e.wrapper.wrap("<span></span>").parent();e.floatingLabel=new s.ui.FloatingLabel(e._floatingLabelContainer,{widget:e})}if(s.isFunction(a)){a=a.call(e)}if(!a){a=""}if(!n){n=i.name+"_"+s.guid();t.attr("id",n)}e._inputLabel=o("<label class='"+p+"' for='"+n+"'>"+a+"</label>'").insertBefore(e.wrapper)}},_focusin:function(){var e=this;e.wrapper.addClass(h)},_focusout:function(){var e=this;var t=e._value;var i=e.element.val();e.wrapper.removeClass(h);if(t!==i){e._value=i;e.trigger(a)}},_wrapper:function(){var e=this;var t=e.element;var i=t[0];var n;n=t.wrap("<span class='k-widget k-widget-2021 k-textbox'></span>").parent();n[0].style.cssText=i.style.cssText;i.style.width="100%";e._inputWrapper=e.wrapper=n.addClass(i.className).removeClass("input-validation-error")}});e.plugin(t)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.form",["kendo.editable"],e)})(function(){var e={id:"form",name:"Form",category:"web",description:"The Form widget.",depends:["editable"],features:[{id:"form-dropdowns",name:"DropDowns",description:"Support for DropDown editors",depends:["autocomplete","combobox","multiselect","dropdowntree","multicolumncombobox"]},{id:"form-datepickers",name:"DatePickers",description:"Support for DatePicker editors",depends:["dateinput","datepicker","datetimepicker","timepicker"]},{id:"form-inputs",name:"Inputs",description:"Support for Input editors",depends:["numerictextbox","maskedtextbox","switch","rating","slider","colorpicker","radiogroup","checkboxgroup"]},{id:"form-editor",name:"Editor",description:"Support for Editor editor",depends:["editor"]}]};(function(d,r){var u=window.kendo,c=u.ui,i=".kendoForm",n=c.Widget,f=d.extend,a=d.proxy,o="validate",s="validateField",l="validateInput",h="change",p="click"+i,v="submit",m="clear",g="max-width",_="set",b="equalSet",w="group",k="aria-describedby",y="data-stop",e="data-role",t="editable",x="form",C=".";var S={form:"k-widget k-widget-2021 k-form",horizontal:"k-form-horizontal",vertical:"",field:"k-form-field",fieldsContainer:"k-form-fields-container",fieldWrap:"k-form-field-wrap",fieldError:"k-form-field-error",fieldHint:"k-form-hint",fieldset:"k-form-fieldset",layout:"k-form-layout",legend:"k-form-legend",label:"k-label k-form-label",optional:"k-label-optional",buttonsContainer:"k-form-buttons",buttonsEnd:"k-buttons-end",submit:"k-form-submit",clear:"k-form-clear",invalid:"k-invalid",hidden:"k-hidden"};var T={horizontal:"horizontal",vertical:"vertical"};var D=n.extend({init:function(e,t){var i=this;n.fn.init.call(i,e,t);i.options=u.deepExtend({},i.options,t);i._wrapper();i._setFields();i._setModel();i._renderContainers();i._renderButtons();i._editable();i._renderFieldsHints();i._setEvents()},events:[s,o,h,v,m],options:{name:"Form",orientation:T.vertical,validatable:{validateOnBlur:true,validationSummary:false,errorTemplate:null},buttonsTemplate:null,messages:{submit:"Submit",clear:"Clear",optional:"(Optional)"},layout:"",grid:{},formData:{},items:[],formatLabel:null,focusFirst:false},_fieldTemplate:"<div class='#:styles.field#  #if (colSpan) { #  k-colspan-#:colSpan# # } #'>"+"# if (label) { # "+"<label class='#:styles.label#' for='#:id#' id='#:id#-form-label'>"+"# if (typeof label.encoded != 'undefined' && label.encoded === false) {#"+"#= label.text || label #"+"# } else { #"+"#: label.text || label #"+"# } #"+"# if (label.optional) { # <span class='#:styles.optional#'>#:optional#</span>  #}#"+"</label>"+"# } #"+"<div class='k-form-field-wrap' data-container-for='#:field#'></div>"+"</div>",_groupTemplate:"<fieldset class='#:styles.fieldset# #if (colSpan) { #  k-colspan-#:colSpan# # }#'>"+"<legend class='#:styles.legend#'>#:label.text || label #</legend>"+"</fieldset>",_buttonsTemplate:"<button class='k-button k-primary #:styles.submit#' type='submit'>#:messages.submit#</button>"+"<button class='k-button #:styles.clear#'>#:messages.clear#</button>",_errorTemplate:"<span class=\"k-widget widget2021 k-tooltip k-tooltip-validation\" id='#=field#-form-error'>"+'<span class="k-icon k-i-warning"> </span> #=message#</span>',_hintTemplate:"<div class='k-form-hint' id='#=id#-form-hint'><span>#=message#</span></div>",_wrapper:function(){var e=this,t=e.options,i=D.styles,n=t.width,r=t.height;e.wrapper=e.element.addClass(i.form).addClass(i[t.orientation]);if(r){e.wrapper.height(r)}if(n){e.wrapper.css(g,n)}e.layoutWrapper=e._setupLayoutContainer(e.wrapper,{grid:t.grid,layout:t.layout})},_flattenFields:function(e){var t=[].concat(e),i=t.shift(),n=[],r=[].push;while(i){if(i.items){r.apply(t,i.items)}else{r.call(n,i)}i=t.shift()}return n},_defaultLabel:function(e){var t=this,i=t.options.formatLabel;if(!e.length){return}if(u.isFunction(i)){return i(e)}return e.split(/(.*[a-z])(?=[A-Z])/).join(" ").trim()+":"},_formatLabel:function(e,t){var i=this,n=d.isPlainObject(t)?t.text:t;if(n!==r){return t}return i._defaultLabel(e)},_defaultFields:function(){var e=this,t=e.options,i=Object.keys(t.formData||{}),n=t.items||{},r=[],a;if(n.length){return n}for(var o=0;o<i.length;o+=1){a=i[o];r.push({field:a,id:a})}return r},_setFields:function(){var e=this,t=e._flattenFields(e._defaultFields()),i=e.options.formData||{},n,r,a,o,s;e._fields=[];for(var l in t){n=t[l];r=i[n.field];a=typeof n.editor==="string"?n.editor:d.type(r?u.parseDate(r.toString())||r:r);o=u.isFunction(n.editor)?n.editor:c.Editable.fn.options.editors[a]?"":n.editor;s={"aria-labelledby":n.id||n.field+"-form-label"};n=f(true,{},n,{id:n.id||n.field,name:n.name||n.field,type:a,editor:o,attributes:s});e._fields[l]=n}},_setModel:function(){var e=this,t=e.options,i=t.formData||{};var n=u.data.Model.define({fields:e._fields});e._model=new n(i)},_editable:function(){var e=this,t=e.options,i=e.options.validatable;e._addEditableMvvmAttributes();e.editable=e.wrapper.kendoEditable({model:e._model,fields:e._fields||[],validateOnBlur:i.validateOnBlur,validationSummary:i.validationSummary,errorTemplate:i.errorTemplate||e._errorTemplate,clearContainer:false,skipFocus:!t.focusFirst,target:e}).getKendoEditable();e.validator=e.editable.validatable;e._removeEditableMvvmAttributes()},_addEditableMvvmAttributes:function(){this.wrapper.attr(e,t)},_removeEditableMvvmAttributes:function(){this.wrapper.attr(y,true).attr(e,x)},_getItemTemplate:function(e){var t=this,i;if(e===w){i=t._groupTemplate}else{i=t._fieldTemplate}return i},_renderField:function(e){var t=this,i=D.styles,n;n=u.template(t._fieldTemplate)({styles:i,id:e.id||e.field||"",field:e.field||"",label:t._formatLabel(e.field,e.label),colSpan:e.colSpan||"",optional:t.options.messages.optional});return n},_toggleFieldErrorState:function(e,t){var i=e.closest(C+S.field);if(i.length){i.toggleClass(S.fieldError,t)}},_renderFieldsHints:function(){var e=this,t=e._fields,i,n,r,a;for(var o=0;o<t.length;o+=1){i=t[o];r=e.wrapper.find("[name='"+i.name+"']");if(!r||!i.hint){continue}a=d(u.template(e._hintTemplate)({message:i.hint||"",id:i.id}));e._associateHintContainer(r,a.attr("id"));n=u.widgetInstance(r);if(n){r=n.wrapper}if(e.validator._errorsByName(i.name).length){a.toggleClass(S.hidden);u.removeAttribute(r,k,a.attr("id"))}a.insertAfter(r)}},_associateHintContainer:function(e,t){var i=u.getWidgetFocusableElement(e);if(!i||!t){return}u.toggleAttribute(i,k,t)},_toggleHint:function(e,t){var i=this,n=e.closest(C+S.field),r;if(n.length){r=n.find(C+S.fieldHint);if(r.length){r.toggleClass(S.hidden,t);i._associateHintContainer(e,r.attr("id"))}}},_renderGroup:function(e){var t=this,i=e.type,n,r,a;a=r=d(u.template(t._getItemTemplate(i))({styles:S,label:e.label||"",colSpan:e.colSpan}));a=t._setupLayoutContainer(r,{grid:e.grid,layout:e.layout})||r;for(var o=0;o<e.items.length;o+=1){n=e.items[o];a.append(t._renderField(n))}return r},_renderContainers:function(){var e=this,t=e._defaultFields(),i=e.options.layout==="grid",n=i?e.layoutWrapper:e.wrapper,r,a,o;for(var s=0;s<t.length;s+=1){r=t[s];a=r.type;if(a===w){o=e._renderGroup(r)}else{o=e._renderField(r)}n.append(o)}},_renderButtons:function(){var e=this,t=e.wrapper,i=e.options,n=i.messages,r=D.styles,a=i.orientation===T.horizontal,o=t.find(C+r.buttonsContainer),s;if(!o.length){o=d("<div />").addClass(r.buttonsContainer).addClass(a?r.buttonsEnd:"")}s=i.buttonsTemplate!==null?i.buttonsTemplate:e._buttonsTemplate;o.append(u.template(s)({styles:r,messages:n}));e.element.append(o)},_setupLayoutContainer:function(e,t){var i=t.layout,n=t.grid,r=[],a;if(typeof i==="string"&&i!==""){a=d("<div></div>").appendTo(e).addClass(S.layout);r.push("k-d-"+i)}if(i==="grid"&&typeof n==="object"){if(typeof n.cols==="number"){r.push("k-grid-cols-"+n.cols)}else if(typeof n.cols==="string"){a.css("grid-template-columns",n.cols)}if(typeof n.gutter==="number"||typeof n.gutter==="string"){a.css("grid-gap",n.gutter)}}if(a){a.addClass(r.join(" "))}return a},_setEvents:function(){var e=this,t=e.validator;t.bind(l,a(e._validateField,e)).bind(o,a(e._validate,e));e.wrapper.on(v+i,a(e._submit,e)).on(m+i,a(e._clear,e)).on(p+i,C+S.clear,a(e._clear,e));e._model.bind(h,a(e._change,e))},_validateField:function(e){var t=this,i={model:t._model.toJSON(),valid:e.valid,field:e.field,error:e.error,input:e.input};t._toggleFieldErrorState(i.input,!i.valid);t._toggleHint(i.input,!i.valid);if(t.trigger(s,i)){e.preventDefault()}},_validate:function(e){var t=this,i={model:t._model.toJSON(),valid:e.valid,errors:e.errors};t.trigger(o,i)},_change:function(e){var t=this,i=e.field,n={field:i,value:t._model[i]};t.trigger(h,n)},_submit:function(e){var t=this,i=t._model.toJSON();if(t.trigger(v,{model:i})){e.preventDefault()}},_clear:function(e){var t=this;e.preventDefault();t.clear();t.trigger(m)},validate:function(){var e=this,t=e.validator;if(!t){return}return t.validate()},clear:function(){var e=this,t=e._fields,i=e._model,n=e.editable,r=e.validator.options.validateOnBlur;e.validator.reset();if(r){i.unbind(_).unbind(b)}for(var a=0;a<t.length;a+=1){var o=t[a].field;var s=e.wrapper.find("[name='"+o+"']");var l=u.widgetInstance(s);s.val("");if(l){l.value(null)}e._toggleHint(s,false);if(typeof i[o]==="boolean"){s.val("false");i.set(o,false)}else{i.set(o,null)}}e.wrapper.find(C+S.fieldError).removeClass(S.fieldError);if(r){i.bind(_,n._validateProxy).bind(b,n._validateProxy)}},setOptions:function(e){var t=this;t.destroy();t.wrapper.removeClass(S.horizontal).removeAttr(y).empty();t.init(t.element,e)},destroy:function(){var e=this;e.wrapper.off(i);n.fn.destroy.call(e.editable);n.fn.destroy.call(e);if(e.editable){e.editable.destroy();e.editable=null}}});c.plugin(D);f(true,D,{styles:S})})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.tilelayout",["kendo.core","kendo.draganddrop","kendo.resizable"],e)})(function(){var e={id:"tilelayout",name:"TileLayout",category:"web",depends:["core"]};(function(S){var v=window.kendo,e=v.ui,n=e.Widget,i=e.Draggable,r=v.keys,o=v.selectorFromClasses,t="resize",m="reorder",a=".kendoTileLayout",h="k-cursor-ns-resize",p="k-cursor-ew-resize",g="k-cursor-nwse-resize",_="k-cursor-nesw-resize",b="k-cursor-grab",s="k-cursor-grabbing",T=1,w="k-cursor-nesw-resize k-cursor-nwse-resize k-cursor-ew-resize k-cursor-ns-resize";var l={wrapper:"k-widget k-widget-2021 k-tilelayout",item:"k-tilelayout-item k-card",itemHeader:"k-tilelayout-item-header k-card-header",itemHeaderTitle:"k-card-title",itemBody:"k-tilelayout-item-body k-card-body",reorderHint:"k-layout-item-hint k-layout-item-hint-reorder",resizeHint:"k-layout-item-hint k-layout-item-hint-resize"};var D=n.extend({init:function(e,t){var i=this;n.fn.init.call(i,e,t);S.cssNumber.gridColumnStart=true;S.cssNumber.gridColumnEnd=true;S.cssNumber.gridRowStart=true;S.cssNumber.gridRowEnd=true;i.element=S(e).addClass(D.styles.wrapper);i._setWrapperStyles();i._initContainers();i._resizable();i._navigatable();i._reorderable()},events:[t,m],options:{name:"TileLayout",columns:null,gap:{columns:16,rows:16},containers:[],resizable:false,reorderable:false,navigatable:false,columnsWidth:"1fr",rowsHeight:"1fr",height:"",width:""},destroy:function(){n.fn.destroy.call(this);if(this._draggableInstance){this.element.find(".k-tilelayout-item").each(function(){var e=S(this);if(e.data("kendoDropTarget")){e.data("kendoDropTarget").destroy()}});this._draggableInstance.destroy();this._draggableInstance.element=this._draggableInstance.draggable=null}if(this.resizable){this.resizable.destroy();this.resizable=null}if(this.resizeHandle){this.resizeHandle.off(a).remove();this.resizeHandle=null}this.element.off(a)},setOptions:function(e){this.destroy();v.deepExtend(this.options,e);this.element.empty();this.init(this.element,this.options)},getOptions:function(){var e=S.extend(true,{},this.options);e.containers=v.deepExtend([],this.items);return e},_initContainers:function(){var n=this;var r=n.options.containers;var e=n.element.children();var t=!!e.length;var a;var i;var o;var s;var l;var d;var u;n.items=[];n.itemsMap={};if(t){e.each(function(e,t){a=v.guid();var i=S(t).addClass(D.styles.item).attr("id",a);n._addContainer(i,r[e],e,a)})}else{for(var c=0;c<r.length;c++){a=v.guid();d=r[c];i=S("<div></div>").addClass(D.styles.item).attr("id",a);s=d.header;if(s&&(s.template||s.text)){o=S("<div></div>").addClass(D.styles.itemHeader);if(n.options.reorderable){o.addClass(b)}if(s.text){u="<h5 class='"+D.styles.itemHeaderTitle+"'>"+s.text+"</h5>"}o.append(u||v.template(s.template)({}));o.appendTo(i)}l=S("<div></div>").addClass(D.styles.itemBody);if(!d.bodyTemplate){throw new Error("Having a bodyTemplate for the container is mandatory")}l.append(v.template(d.bodyTemplate)({}));l.appendTo(i);i.appendTo(n.element);n._addContainer(i,d,c,a)}}},_addContainer:function(e,t,i,n){var r=this;t.order=typeof t.order=="number"?t.order:i;e.attr(v.attr("index"),t.order);t.id=n;r._setContainerCoordinates(e,t);r.itemsMap[n]=t;r.items.push(r.itemsMap[n])},_setWrapperStyles:function(){var e=this;var t=e.options;e.element.css({"grid-template-columns":v.format("repeat({0}, minmax(0, {1}))",t.columns,typeof t.columnsWidth==="string"?t.columnsWidth:t.columnsWidth+"px"),"grid-auto-rows":v.format("minmax(0, {0})",typeof t.rowsHeight==="string"?t.rowsHeight:t.rowsHeight+"px"),"column-gap":t.gap.columns,width:typeof t.width==="string"?t.width:t.width+"px",height:typeof t.height==="string"?t.height:t.height+"px",padding:t.gap.rows+"px "+t.gap.columns+"px ","row-gap":t.gap.rows})},_setContainerCoordinates:function(e,t){if(!t){return}e.css({order:t.order,"grid-column-end":v.format("span {0}",t.colSpan),"grid-row-end":v.format("span {0}",t.rowSpan)}).attr(v.attr("index"),t.order)},_updateContainers:function(){var e=this;for(var t=0;t<e.items.length;t++){e._setContainerCoordinates(e.element.find("#"+e.items[t].id),e.items[t])}},_createResizeHandle:function(e,t,i){var n=this;if(n._isresizing){return}if(n.resizeHandle&&n.resizeHandle.data("div")[0]!==e[0]){n.resizeHandle.off(a).remove();n.resizeHandle=null}if(!n.resizeHandle){n.resizeHandle=S('<div class="k-resize-handle"></div>');n.resizeHandle.appendTo(e)}n._positionResizeHandle(e,t,i)},_positionResizeHandle:function(e,t,i){var n=this;var r=parseFloat(e.css("borderRightWidth"));var a=parseFloat(e.css("borderBottomWidth"));var o=e.height();var s=e.width();var l=i?o-6.5-a:0;var d=t?s-4.5-r:0;var u=9;var c=9;var f;if(t&&i){c=u=25;l-=12.5;d-=12.5;f=v.support.isRtl(n.element)?_:g}else if(t&&!i){c=o;f=p}else if(!t&&i){u=s;f=h}n.resizeHandle.css({top:l,left:d,height:c,width:u}).attr("side",t).attr("down",i).removeClass(w).addClass(f).data("div",e).show()},_createResizeHint:function(e){var t=this;if(t.hint){return}var i=e.css("grid-column-end");var n=e.css("grid-row-end");var r=e.css("order");t.hint=S("<div class='"+D.styles.resizeHint+"'></div>").css({order:r,"grid-column-end":i,"grid-row-end":n}).insertAfter(e)},_removeResizeHint:function(){if(this._isresizing){return}if(this.hint){this.hint.remove();this.hint=null}},_positionHint:function(e,t){var i=this;if(e){i.hint.css("grid-column-end",v.format("span {0}",e))}if(t){i.hint.css("grid-row-end",v.format("span {0}",t))}},_removeAbsoluteStyles:function(e){e.css("position","");e.css("left","");e.css("top","");e.css("width","");e.css("height","");e.css("z-index","")},_positionAbsolutely:function(e){if(e.css("position")=="absolute"){return}var t=e.position();var i=e.outerWidth();var n=e.outerHeight();e.css("position","absolute");e.css("left",t.left);e.css("top",t.top);e.css("width",i);e.css("height",n);e.css("z-index",2)},_navigatable:function(){if(!this.options.navigatable){return}var e=this;e.element.children().attr("tabindex",0);e.element.on("keydown"+a,e,S.proxy(e._keyDown,e))},_keyDown:function(e){var t=S(e.target);var i=false;if(!t.is(".k-tilelayout-item.k-card")){return}if(e.ctrlKey&&e.keyCode==r.LEFT){i=true;this._resizeItem(t,"horizontal",-1)}if(e.ctrlKey&&e.keyCode==r.RIGHT){i=true;this._resizeItem(t,"horizontal",1)}if(e.ctrlKey&&e.keyCode==r.UP){i=true;this._resizeItem(t,"vertical",-1)}if(e.ctrlKey&&e.keyCode==r.DOWN){i=true;this._resizeItem(t,"vertical",1)}if(e.shiftKey&&e.keyCode==r.LEFT){i=true;this._reorderItem(t,-1)}if(e.shiftKey&&e.keyCode==r.RIGHT){i=true;this._reorderItem(t,1)}if(i){e.preventDefault()}},_resizeItem:function(e,t,i){var n=this;var r=e.attr("id");var a;var o;if(!n.options.resizable){return}if(t==="horizontal"){a=parseInt(e.css("grid-column-end").replace("span",""),10)+i;o=n.element.css("grid-template-columns").split(" ").length;if(o>=a&&a>0){n.itemsMap[r].colSpan=a;e.css({"grid-column-end":v.format("span {0}",a)})}}else{a=parseInt(e.css("grid-row-end").replace("span",""),10)+i;o=n.element.css("grid-template-rows").split(" ").length;if(o>=a&&a>0){n.itemsMap[r].rowSpan=a;e.css({"grid-row-end":v.format("span {0}",a)})}}},_reorderItem:function(e,t){if(!this.options.reorderable){return}var i=parseInt(e.css("order"),10);var n=this.element.children().length;t=i+t;if(t>=0&&t<n){var r=this.element.find("> ["+v.attr("index")+"='"+t+"']");this.itemsMap[e.attr("id")].order=t;this.itemsMap[r.attr("id")].order=i;this._updateContainers();this._updateDOM();e.focus()}},_sortContainers:function(e){var r=v.attr("index");return e.sort(function(e,t){e=S(e);t=S(t);var i=e.attr(r);var n=t.attr(r);if(i===undefined){i=S(e).index()}if(n===undefined){n=S(t).index()}i=parseInt(i,10);n=parseInt(n,10);return i>n?1:i<n?-1:0})},_updateDOM:function(){var e=this;var t=e.element.children(":visible");t=e._sortContainers(t);t.each(function(){S(this).appendTo(e.element)})},_resizable:function(){var c=this;var f;var h;var p;var v;var m;var g;var _=0;var b=0;var w=0;var k=0;var y=0;var x=0;var C=0;var i;if(c.options.resizable){c.element.on("mousemove"+a,o(D.styles.item),function(e){var t;var i;var n=S(this);var r=n[0].getBoundingClientRect();t=Math.abs(r.right-e.clientX)<16;i=Math.abs(r.bottom-e.clientY)<16;if(t&&i){c._createResizeHandle(n,true,true)}else if(t){c._createResizeHandle(n,true,false)}else if(i){c._createResizeHandle(n,false,true)}});c.resizable=new e.Resizable(c.element,{handle:"div.k-tilelayout-item > .k-resize-handle",start:function(e){var t=S(e.currentTarget);g=t.data("div");p=g.attr("id");f=t.attr("side");h=t.attr("down");i=c.element.css("grid-template-rows").split(" ").length;if(f){v=c._calculateFractionWidth();C=c._calculateRightEndSide(v);_=e.x.location;w=g.width();y=parseInt(g.css("grid-column-end").replace("span",""),10)}if(h){m=(c.element[0].scrollHeight-(i+1)*c.options.gap.rows)/i;b=e.y.location;k=g.height();x=parseInt(g.css("grid-row-end").replace("span",""),10)}c._isresizing=true},resize:function(e){var t=0;var i=0;var n=0;var r=0;var a;var o;var s=0;var l=0;var d=0;var u=c.element[0].getBoundingClientRect();c._positionAbsolutely(g);c._createResizeHint(g);if(f=="true"){n=e.x.location-_;a=u.left+C-window.scrollX-e.x.location<c.options.gap.columns;o=w+n<v;if(!a&&!o){d=n/(v+c.options.gap.columns);s=n-Math.floor(d)*(v+c.options.gap.columns);t=y+Math.floor(d)+(s>=v/2?1:0);c.itemsMap[p].colSpan=Math.max(t,T)}else{n=0}}if(h=="true"){r=e.y.location-b;a=u.bottom+window.scrollY-e.y.location<c.options.gap.rows;o=k+r<=m;if(!a&&!o){l=r/(m+c.options.gap.rows);s=r-Math.floor(l)*(m+c.options.gap.rows);i=x+Math.floor(l)+(s>=m/2?1:0);c.itemsMap[p].rowSpan=Math.max(i,T)}else{r=0}}c._positionHint(t,i);c._positionResizeHandle(g,f=="true",h=="true");if(r){g.css("height",k+r)}if(n){g.css("width",w+n)}},resizeend:function(){c._isresizing=false;c._setContainerCoordinates(g,c.itemsMap[p]);c._removeAbsoluteStyles(g);c._removeResizeHint();c.trigger(t,{container:g})}})}},_calculateFractionWidth:function(){var e=this;var t=e.element.children().first();var i=e.itemsMap[t.attr("id")].colSpan;var n=t.outerWidth();return(n-(i-1)*e.options.gap.columns)/i},_calculateRightEndSide:function(e){var t=this;var i=t.options.columns;var n=t.options.gap.columns;return i*(e+n)+n},_createDropHint:function(e){this.dropHint=S("<div class='"+D.styles.reorderHint+"'></div>").css({order:e.order,"grid-column-end":e.columnEnd,"grid-row-end":e.rowEnd}).attr(v.attr("index"),e.order).attr("direction",e.direction)},_insertDropHint:function(e,t){if(t=="right"){this.dropHint.insertAfter(e)}else{this.dropHint.insertBefore(e)}},_removeDropHint:function(){if(this.dropHint){this.dropHint.remove();this.dropHint=null}},_reorderable:function(){if(!this.options.reorderable){return}var f=this;var e=f.element;var h;var p=o(D.styles.item);var a=o(D.styles.itemHeader);var t=v.guid();this._draggableInstance=new i(this.element,{filter:a,autoScroll:true,group:t,hint:function(e){var t=e.closest(p);var i=t.width();var n=t.height();var r=t.clone();r.find(a).removeClass(b).addClass(s);return r.width(i).height(n)},dragstart:function(e){h=S(e.currentTarget).closest(p)},drag:function(e){var t=v.elementUnderCursor(e);var i=e.sender.hint;var n;var r;var a;var o;var s;var l=f._draggableInstance.currentTarget.closest(p);var d;if(k(i[0],t)){i.hide();t=v.elementUnderCursor(e);if(!k(h[0],t)){if(f.dropHint&&f.dropHint[0]==t[0]){i.show();return}n=S(t);n=n.hasClass(D.styles.item)?n:n.closest(p);if(n.hasClass(D.styles.item)){r=n[0].getBoundingClientRect();a=e.clientX-r.left;o=r.right-e.clientX;s=a>o?"right":"left";d=n.css("order");if(f.dropHint&&f.dropHint.attr("direction")!==s){var u=f.dropHint.clone();u.css("order",d);f.dropHint.remove();f.dropHint=u;f._insertDropHint(n,s);f.dropHint.attr("direction",s).attr(v.attr("index"),d)}else if(!f.dropHint){var c=s=="right"?n.next():n.prev();if(c[0]!=h[0]){f._createDropHint({order:d,columnEnd:l.css("grid-column-end"),rowEnd:l.css("grid-row-end"),direction:s});h.hide();f._insertDropHint(n,s)}}}}i.show()}},dragend:function(e){if(!f.dropHint){e.sender.hint.remove();f._removeDropHint();return}var t=parseInt(f.dropHint.css("order"),10);var i=e.currentTarget.closest(p);var n=f.element.find(p);var r=parseInt(i.css("order"),10);var a=i.attr("id");var o=f.element.children(":visible");var s;var l;var d;var u;o=f._sortContainers(o);t=o.index(f.dropHint[0]);l=Math.max(t,r);s=Math.min(t,r);f.itemsMap[a].order=t;u=t>r?"right":"left";if(u=="left"){l--}else{s++}for(var c=s;c<=l;c++){d=n.filter("["+v.attr("index")+"='"+c+"']");f.itemsMap[d.attr("id")].order+=u=="left"?1:-1}i.show();f._updateContainers();e.sender.hint.remove();f._removeDropHint();if(f.options.navigatable){f._updateDOM()}f.trigger(m,{newIndex:t,oldIndex:r,container:i})}});e.find(p).kendoDropTarget({group:t,dragenter:function(e){if(f._isresizing){return}var t=S(e.dropTarget);var i=f._draggableInstance.currentTarget.closest(p);var n;var r;var a;var o;var s;if(h[0]!=t[0]){n=t[0].getBoundingClientRect();r=e.clientX-n.left;a=n.right-e.clientX;s=r>a?"right":"left";o=s=="right"?t.next():t.prev();if(o[0]==h[0]){return}f._removeDropHint();h.hide();f._createDropHint({order:t.css("order"),columnEnd:i.css("grid-column-end"),rowEnd:i.css("grid-row-end"),direction:s});h.hide();f._insertDropHint(t,s)}}})}});function k(e,t){try{return S.contains(e,t)||e==t}catch(e){return false}}e.plugin(D);S.extend(true,D,{styles:l})})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.wizard",["kendo.stepper","kendo.button","kendo.form"],e)})(function(){var e={id:"wizard",name:"Wizard",category:"web",description:"The Wizard widget serves as a container of stepped process.",depends:["stepper","button","form"],features:[{id:"wizard-form-dropdowns",name:"DropDowns",description:"Support for DropDown editors in Wizard From",depends:["autocomplete","combobox","multiselect","dropdowntree","multicolumncombobox"]},{id:"wizard-form-datepickers",name:"DatePickers",description:"Support for DatePicker editors in Wizard From",depends:["dateinput","datepicker","datetimepicker","timepicker"]},{id:"wizard-form-inputs",name:"Inputs",description:"Support for Input editors in Wizard From",depends:["numerictextbox","maskedtextbox","switch","rating","slider","colorpicker"]},{id:"wizard-form-editor",name:"Editor",description:"Support for Editor editor in Wizard From",depends:["editor"]}]};(function(l,d){var u=window.kendo,n=u.ui.Widget,o=l.extend,r=l.proxy,i=".kendoWizard",a="click",c="activate",f="select",s="reset",h="submit",p="previous",v="next",m="done",g="error",t="contentLoad",_="formValidateFailed",b="k-hidden",w="k-primary",k="k-step-link",y="aria-selected",x="aria-controls",C="aria-hidden",S="aria-expanded",L="aria-label",H="vertical",N="horizontal",T="bottom",D="right",A="left",E=".",I=" ",M="-",R="id",O="tabindex",F="role",P="data-wizard-";var z={wizard:"k-widget k-widget-2021 k-wizard",horizontalWizard:"k-wizard-horizontal",verticalWizard:"k-wizard-vertical",rightWizard:"k-wizard-right",leftWizard:"k-wizard-left",wizardStepsContainer:"k-wizard-steps",wizardStep:"k-wizard-step",wizardContent:"k-wizard-content",wizardButtons:"k-wizard-buttons",wizardLeftButtons:"k-wizard-buttons-left",wizardRightButtons:"k-wizard-buttons-right",wizardPager:"k-wizard-pager"};var B=u.Class.extend({init:function(e){this.options=o({},this.options,e);if(this.options.actionBar){this._processButtons()}this._render()},options:{name:"WizardStep",index:0,content:"",contentUrl:null,contentId:null,markupContainer:null,form:null,actionBar:true,buttons:[],pager:true,selected:false,enabled:true,className:"",totalSteps:1,wizardId:"wizard",formTag:"form",messages:{}},_defaultButtonsConfiguration:{first:[s,v],middle:[s,p,v],last:[s,p,m]},_pagerTemplate:'<span class="k-wizard-pager">'+"#: step # "+"#: currentStep # "+"#: of # "+"#: totalSteps #"+"</span>",buttons:function(){return this._buttons},load:function(){if(this.options.contentUrl){this._ajaxRequest()}},resetButtons:function(){var e=this.element.find(E+z.wizardButtons);u.destroy(e);e.remove();this.options.buttons=[];this._processButtons();this._buttonsContainer()},_ajaxRequest:function(i,e){var n=this,t=n.options.contentUrl,r={},a=n.element;var o={type:"GET",cache:false,url:t,dataType:"html",data:r,error:function(e,t){if(i){i._triggerError(e,t,n)}},complete:function(){if(i&&e){i._triggerActivate(n)}},success:function(e){var t=a.find(E+z.wizardContent);try{if(i){i.angular("cleanup",function(){return{elements:a.get()}})}u.destroy(t);t.html(e);if(i){i._triggerContentLoad(n)}}catch(e){this.error(this.xhr,"error")}if(i){i.angular("compile",function(){return{elements:a.get()}})}}};if(typeof t==="object"){o=l.extend(true,{},o,t)}l.ajax(o)},_ariaAttributes:function(){var e=this.element,t=this.options,i=t.messages,n=i.step+" "+(t.index+1)+" "+i.of+" "+t.totalSteps;e.attr(F,"tabpanel").attr(O,0).attr(R,t.wizardId+M+t.index).attr(S,t.selected).attr(L,n)},_buttonFactory:function(e){var t=l("<button type='button'>").kendoButton().getKendoButton(),i=t.element;i.attr(P+e.name,"");i.text(e.text);if(e.click){t.bind(a,e.click)}if(e.enabled===false){t.enable(false)}if(e.primary){i.addClass(w)}if(e.position===A){this._leftButtonsContainer.append(i)}else{this._rightButtonsContainer.append(i)}if(e.name==="done"&&this.options.formTag!=="form"){t.element.attr("type",h)}this._buttons.push(t)},_buttonsContainer:function(){var e=l("<div>").addClass(z.wizardButtons);this._leftButtonsContainer=l("<span>").addClass(z.wizardLeftButtons);this._rightButtonsContainer=l("<span>").addClass(z.wizardRightButtons);e.append(this._leftButtonsContainer);e.append(this._rightButtonsContainer);this.element.append(e);this._buttons=[];this.options.buttons.map(r(this._buttonFactory,this));if(this.options.pager){this._pager()}},_content:function(){var e=this.options,t=!!e.contentUrl,i=l("<div>").addClass(z.wizardContent);if(!t&&e.contentId){i.html(l("#"+e.contentId).html())}else if(!t&&e.content){i.append(e.content)}if(e.markupContainer){if(!t&&!e.contentId&&!e.content){i.append(e.markupContainer.html())}u.destroy(e.markupContainer);e.markupContainer.remove()}this.element.prepend(i)},_form:function(){var e="<"+this.options.formTag+">",t=l(e).hide(),i=l("<div>").addClass(z.wizardContent),n=this.options.form;l("body").append(t);this.element.prepend(i);n.buttonsTemplate=n.buttonsTemplate||"";this.form=t.kendoForm(n).getKendoForm();i.append(t.show())},_iterateButton:function(e){var t=this.options.messages;if(typeof e==="string"){e={name:e}}if(!e.text){e.text=t[e.name]||e.name.charAt(0).toUpperCase()+e.name.slice(1)}if(e.primary!==false&&(e.name===m||e.name===v)){e.primary=true}if(!e.position&&e.name===s){e.position=A}else if(!e.position){e.position=D}return e},_pager:function(){var e=this.options,t=e.messages,i={step:t.step,currentStep:e.index+1,of:t.of,totalSteps:e.totalSteps},n=u.template(this._pagerTemplate)(i);this._leftButtonsContainer.append(n)},_processButtons:function(){var e=this.options,t=e.buttons,i=this._defaultButtonsConfiguration;if(!t||!t.length||t.length<=0){if(e.index===0){t=i.first}else if(e.index+1===e.totalSteps){t=i.last}else{t=i.middle}}this.options.buttons=t.map(r(this._iterateButton,this))},_render:function(){this.element=l("<div>").addClass(z.wizardStep);if(this.options.className){this.element.addClass(this.options.className)}this._ariaAttributes();if(!this.options.selected){this.element.addClass(b);this.element.attr(C,true)}if(this.options.actionBar){this._buttonsContainer()}if(this.options.form){this._form()}else{this._content()}}});var e=n.extend({init:function(e,t){var i=this;t=t||{};n.fn.init.call(i,e,t);i._wrapper();i._createSteps();i._stepper();i._attachEvents()},options:{name:"Wizard",contentPosition:T,actionBar:true,pager:true,loadOnDemand:false,reloadOnSelect:false,validateForms:true,stepper:{},steps:[],messages:{reset:"Reset",previous:"Previous",next:"Next",done:"Done",step:"Step",of:"of"}},events:[c,f,s,m,g,t,_],destroy:function(){var e=this;n.fn.destroy.call(e.stepper);n.fn.destroy.call(e);e.wrapper.off(i)},activeStep:function(){return this.currentStep},enableStep:function(e,t){var i=this,n;if(e===d||e===null||isNaN(e)||e>=i._steps.length||e<0){return}e=Number(e);n=i._steps[e];if(n.options.enabled===t){return}else{n.options.enabled=t;i.stepper.steps()[e].enable(t)}},insertAt:function(i,e){var t=this._steps,n=t.length,r,a,o,s,l=function(e,t){if(t>=i){e.options.index+=1}e.options.totalSteps+=1;e.element.find(E+z.wizardPager).remove();e._pager()};if(i===null||i===d||isNaN(i)||i<0||i>n){return}if(!e){return}a=this._mapStepForStepper(e);this.stepper.insertAt(i,a);e.totalSteps=n+1;e.messages=this.options.messages;e.index=i;e.formTag=this.wrapper.is("form")?"div":"form";if(this.options.pager===false&&e.pager!==true){e.pager=false}r=new B(e);t.forEach(l);t.splice(i,0,r);if(i===0||i===n){o=i===0?1:n-1;s=t[o];s.resetButtons()}this._insertStepElementAtIndex(i,r.element)},next:function(){var e=this,t=e._steps.length,i=e.currentStep.options.index;if(i+1===t){return}else if(!e.steps()[i+1].options.enabled){return}else{e._select(i+1);e._selectStepper(i+1)}},previous:function(){var e=this,t=e.currentStep.options.index;if(t===0){return}else if(!e.steps()[t-1].options.enabled){return}else{e._select(t-1);e._selectStepper(t-1)}},removeAt:function(e){var t=this._steps,i=t.length,n,r,a,o,s,l;if(e===null||e===d||isNaN(e)||e<0||e>i||i===1){return}this.stepper.removeAt(e);n=t.splice(e,1)[0];if(n===this.selectedStep){r=e>0?e-1:0;this.selectedStep=t[r]}for(s=0;s<i-1;s+=1){l=t[s];l.options.index=s;l.options.totalSteps=i-1;l.element.find(E+z.wizardPager).remove();l._pager()}if(e===0||e===i-2){a=e===0?0:i-2;o=t[a];o.resetButtons()}},select:function(e){var t=this,i=t.stepper,n;if(e===d||e===null||isNaN(e)||e>=t._steps.length||e<0){return}e=Number(e);n=t._steps[e];if(!n.options.enabled){return}t._select(e);if(i.options.linear){i.setOptions({linear:false});t._selectStepper(e);i.setOptions({linear:true})}else{t._selectStepper(e)}},steps:function(){return this._steps},_attachEvents:function(){var e=this,t=function(){e._doneClicked=true};e.stepper.bind(f,r(e._stepperSelectHandler,e));e.wrapper.on(a+i,"["+P+s+"]",r(e._resetClickHandler,e)).on(a+i,"["+P+p+"]",r(e._previousClickHandler,e)).on(a+i,"["+P+v+"]",r(e._nextClickHandler,e));if(e.wrapper.is("form")){e.wrapper.on(a+i,"["+P+m+"]",t);e.wrapper.on(h+i,r(e._doneHandler,e))}else{e.wrapper.on(a+i,"["+P+m+"]",t);e.wrapper.on(a+i,"["+P+m+"]",r(e._doneHandler,e))}},_changeStep:function(e){var t=this.wrapper.find(E+z.wizardStep);this.currentStep=e;t.addClass(b);t.attr(C,true);t.attr(S,false);e.element.removeClass(b);e.element.removeAttr(C);e.element.attr(S,true)},_createStep:function(e,t,i,n){var r=this.wrapper,a=this.wrapper.children("ol, ul").children("li");if(typeof e==="string"){e={title:e}}e.totalSteps=n;e.messages=this.options.messages;e.index=t;e.formTag=this.wrapper.is("form")?"div":"form";if(t===0){e.selected=true}if(this.options.actionBar===false){e.actionBar=false}if(i.length>0&&i[t]){e.markupContainer=l(i[t]);if(!e.title){e.title=a[t]?a[t].textContent:(t+1).toString();if(!this.options.steps){this.options.steps=[]}}}if(r.attr(R)){e.wizardId=r.attr(R)}if(this.options.pager===false&&e.pager!==true){e.pager=false}this.options.steps[t]=o(true,{},e);return new B(e)},_createSteps:function(){var e=this,t=e.wrapper,i=e.options.steps,n=t.children("div"),r,a,o,s;r=l("<div>").addClass(z.wizardStepsContainer);e._steps=[];if(!i||i.length===0){i=[];for(a=0;a<n.length;a+=1){i.push({})}}for(a=0;a<i.length;a+=1){o=i[a];s=e._createStep(o,a,n,i.length);if(o.contentUrl&&(a===0||!e.options.loadOnDemand)){u.ui.progress(e.wrapper,true);s._ajaxRequest(e)}r.append(s.element);e._steps.push(s)}t.children("ol, ul").remove();t.empty();t.append(r);e._refreshEditorWidgets();e.currentStep=e._steps[0]},_doneHandler:function(e){var t=this._steps,i=this.currentStep,n=[],r,a;if(!this._doneClicked){return}this._doneClicked=false;if(!!this.options.validateForms&&!!i.form&&!i.form.validator.validate()){e.preventDefault();this.trigger(_,{sender:this,step:i,form:i.form});return}for(a=0;a<t.length;a+=1){r=t[a].form;if(r){n.push(r)}}this.trigger(m,{sender:this,forms:n,originalEvent:e,button:l(e.target).getKendoButton()})},_insertStepElementAtIndex:function(e,t){var i=this.wrapper.find(E+z.wizardStepsContainer);if(e===0){i.prepend(t)}else{i.find(E+z.wizardStep+":nth-child("+e+")").after(t)}},_isEmpty:function(e){return!l.trim(e.html())},_mapStepForStepper:function(e){var t=o(true,{},e);t.label=t.title;delete t.buttons;delete t.pager;delete t.content;delete t.contentUrl;delete t.contentId;delete t.formTag;delete t.wizardId;delete t.messages;return t},_select:function(e){var t=this._steps[e],i=this.options;if(t.options.contentUrl&&(i.reloadOnSelect||i.loadOnDemand&&this._isEmpty(t.element.find(E+z.wizardContent)))){this.ajaxLoad=true;u.ui.progress(this.wrapper,true);t._ajaxRequest(this,true)}else{this._changeStep(t)}},_nextClickHandler:function(e){var t=this,i=t._steps,n=t._steps.length,r=t.currentStep,a=r.options.index,o=l(e.target).getKendoButton(),s=i[a+1];if(n===a+1||!s.options.enabled){return}if(!!t.options.validateForms&&!!r.form&&!r.form.validator.validate()){t.trigger(_,{sender:t,step:r,form:r.form});return}if(!t.trigger(f,{sender:t,originalEvent:e.originalEvent,step:s,button:o})){t._select(a+1);t._selectStepper(a+1);if(!t.ajaxLoad){t.trigger(c,{sender:t,step:s})}t.ajaxLoad=false}},_previousClickHandler:function(e){var t=this,i=t.options.validateForms,n=t._steps,r=t.currentStep,a=r.options.index,o=l(e.target).getKendoButton(),s=n[a-1];if(a===0||!s.options.enabled){return}if(!!i&&i.validateOnPrevious!==false&&!!r.form&&!r.form.validator.validate()){t.trigger(_,{sender:t,step:r,form:r.form});return}if(!t.trigger(f,{sender:t,originalEvent:e.originalEvent,step:s,button:o})){t._select(a-1);t._selectStepper(a-1);if(!t.ajaxLoad){t.trigger(c,{sender:t,step:s})}t.ajaxLoad=false}},_refreshEditorWidgets:function(){var e=this.wrapper.find("[data-role='editor']"),t,i;for(t=0;t<e.length;t+=1){i=l(e[t]);i.getKendoEditor().refresh()}},_resetClickHandler:function(e){this.trigger(s,{sender:this,originalEvent:e,button:l(e.target).getKendoButton()})},_selectStepper:function(e){var t=this.stepper,i=t.steps()[e],n=i.element.find(E+k);t.select(e);t.wrapper.find(E+k).attr(y,false);n.attr(y,true).focus()},_stepper:function(){var e=this.wrapper,t=l("<nav>").prependTo(e),i=this.options,n=i.stepper,r=i.steps.map(this._mapStepForStepper);n.steps=r;n.orientation=i.contentPosition===T?N:H;n.selectOnFocus=true;n.kendoKeydown=function(e){if(e.keyCode===u.keys.TAB){e.preventKendoKeydown=true}};this.stepper=t.kendoStepper(n).getKendoStepper();this._stepperAriaAttributes()},_stepperAriaAttributes:function(){var e=this.stepper,t=this.wrapper.attr(R)||"wizard",i=e.steps(),n=false,r,a;if(!i){return}for(a=0;a<i.length;a+=1){if(a===0){n=true}r=i[a];r.element.find(E+k).attr(F,"tab").attr(x,t+M+a).attr(y,n)}},_stepperSelectHandler:function(e){var t=this,i=t.options.validateForms,n=e.sender,r=e.step,a=t.currentStep.options.index,o=r.getIndex(),s=t._steps,l=s[o],d=t.currentStep;if(o>a&&!!i&&!!d.form&&!d.form.validator.validate()){e.preventDefault();t.trigger(_,{sender:t,step:d,form:d.form});return}if(o<a&&!!i&&i.validateOnPrevious!==false&&!!d.form&&!d.form.validator.validate()){e.preventDefault();t.trigger(_,{sender:t,step:d,form:d.form});return}if(!t.trigger(f,{sender:t,originalEvent:e.originalEvent,step:l,stepper:n})){t._select(o);n.wrapper.find(E+k).attr(y,false);r.element.find(E+k).attr(y,true);if(!t.ajaxLoad){t.trigger(c,{sender:t,step:l})}t.ajaxLoad=false}else{e.preventDefault()}},_triggerActivate:function(e){this._changeStep(e);this.trigger(c,{sender:this,step:e})},_triggerError:function(e,t,i){u.ui.progress(this.wrapper,false);this.trigger(g,{sender:this,xhr:e,status:t,step:i})},_triggerContentLoad:function(e){u.ui.progress(this.wrapper,false);this.trigger(t,{sender:this,step:e})},_wrapper:function(){var e=this,t=e.element,i=e.options.contentPosition;e.wrapper=t;e.wrapper.addClass(z.wizard);e.wrapper.attr(F,"tablist");if(i===D){e.wrapper.addClass(z.verticalWizard+I+z.rightWizard)}else if(i===A){e.wrapper.addClass(z.verticalWizard+I+z.leftWizard)}else{e.wrapper.addClass(z.horizontalWizard)}}});u.wizard={Step:B};u.ui.plugin(e)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.appbar",["kendo.core"],e)})(function(){var e={id:"appbar",name:"AppBar",category:"web",depends:["core"]};var d="<span class='k-appbar-spacer'></span>";(function(s){var l=window.kendo,e=l.ui,n=e.Widget,t="resize",i=s.proxy;var r=n.extend({init:function(e,t){var i=this;n.fn.init.call(i,e,t);i.element=s(e).addClass("k-appbar");if(i.options.position!="none"){i.element.addClass("k-appbar-"+i.options.position)}i.element.addClass("k-appbar-"+i.options.positionMode+" k-appbar-"+i.options.themeColor);i._initItems();i._attachEvents()},events:[t],options:{name:"AppBar",positionMode:"static",position:"none",themeColor:"light",items:[]},destroy:function(){if(this.resizeHandler){l.unbindResize(this.resizeHandler);this.resizeHandler=null}n.fn.destroy.call(this)},setOptions:function(e){var t=this;if(t.options.position!="none"){t.element.removeClass("k-appbar-"+t.options.position)}t.element.removeClass("k-appbar-"+t.options.positionMode+" k-appbar-"+t.options.themeColor);l.deepExtend(t.options,e);this.destroy();this.element.empty();this.init(this.element,this.options)},_initItems:function(){var e=this;var t=e.options;var i=t.items;var n;var r="";var a;for(var o=0;o<i.length;o++){n=i[o];if(n.type=="spacer"){a=s(l.template(d)({})).addClass(n.className);if(n.width){a.addClass("k-appbar-spacer-sized");a.css("width",typeof n.width==="string"?n.width:n.width+"px")}r+=a[0].outerHTML}else{if(!n.template){throw new Error("Having a template for the contentItem is mandatory")}if(n.className){r+="<div class='k-appbar-section "+n.className+"'>"}else{r+="<div class='k-appbar-section'>"}r+=l.template(n.template)({});r+="</div>"}}e.element.html(r)},_resize:function(){this.trigger(t)},_attachEvents:function(){var e=this;e.resizeHandler=i(e._resize,e);l.onResize(e.resizeHandler)}});e.plugin(r)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("imageeditor/toolbar",["kendo.toolbar","kendo.dropdownlist"],e)})(function(){(function(l,e){var d=window.kendo,o=d.ui,s=l.extend,u=l.proxy,n=d.ui.ToolBar,t=d.toolbar.Item,i="click",r="dropDownChange",a="action";var c=n.extend({init:function(e,t){var i=this;i._extendOptions(t);n.fn.init.call(i,e,t);i._attachEvents();i.toggleTools()},events:n.fn.events.concat([r,a]),defaultTools:{open:{type:"button",icon:"upload",name:"open",command:"OpenImageEditorCommand",showText:"overflow"},save:{type:"button",icon:"download",name:"save",command:"SaveImageEditorCommand",showText:"overflow",toggleCondition:"canExport"},separator:{type:"separator"},undo:{type:"button",icon:"undo",name:"undo",command:"UndoImageEditorCommand",showText:"overflow",toggleCondition:"undo"},redo:{type:"button",icon:"redo",name:"redo",command:"RedoImageEditorCommand",showText:"overflow",toggleCondition:"redo"},separator1:{type:"separator"},crop:{type:"button",icon:"crop",name:"crop",command:"OpenPaneImageEditorCommand",options:"crop",showText:"overflow",toggleCondition:"canExport"},resize:{type:"button",icon:"image-resize",name:"resize",command:"OpenPaneImageEditorCommand",options:"resize",showText:"overflow",toggleCondition:"canExport"},zoomIn:{type:"button",icon:"zoom-in",name:"zoomIn",command:"ZoomImageEditorCommand",showText:"overflow",options:"zoomIn",toggleCondition:"enable"},zoomOut:{type:"button",icon:"zoom-out",name:"zoomOut",command:"ZoomImageEditorCommand",showText:"overflow",options:"zoomOut",toggleCondition:"enable"},zoomDropdown:{type:"imageEditorZoomDropDown",name:"zoomDropdown",command:"ZoomImageEditorCommand",text:"Zoom options",toggleCondition:"enable",items:[{name:"zoomActualSize",icon:"zoom-actual-size",text:"Show actual size",options:"actualSize"},{name:"zoomFitToScreen",icon:"zoom-best-fit",text:"Fit to screen",options:"fitToScreen"}]}},_attachEvents:function(){var e=this;e.bind(r,u(e._dropDownChange,e));e.bind(i,u(e._click,e))},_extendOptions:function(e){var t=this,i=e.items?e.items:Object.keys(t.defaultTools);t.options=e;t.options.items=t._extendToolsOptions(i)},_extendToolsOptions:function(e){var r=this,a=r.options.messages;if(!e.length){return}return e.map(function(e){var t=l.isPlainObject(e)&&Object.keys(e).length===1&&e.name,i,n;e=t?e.name:e;i=l.isPlainObject(e)?e:s({},r.defaultTools[e]);n=a[i.name]||i.text;d.deepExtend(i,{id:i.name+"-"+d.guid(),name:i.name,text:n,attributes:{"aria-label":n,title:n,"data-command":i.command,"data-options":i.options,"data-toggle":i.toggleCondition},overflow:i.overflow});if(i.type==="imageEditorZoomDropDown"){i.items=r._extendToolsOptions(i.items)}return i},r)},_click:function(e){var t=l(e.target).data("command"),i=l(e.target).data("options");if(!t){return}this.action({command:t,options:i})},_dropDownChange:function(e){if(!e.command){return}this.action({command:e.command,options:e.options})},action:function(e){this.trigger(a,e)},toggleTools:function(o){var s=this,e=s.element.find("[data-toggle]");e.each(function(e,t){var i=l(t),n=null,r=i.data("toggle"),a=o&&o[r];if(i.is("[data-role]")){n=d.widgetInstance(i)}if(n&&n.enable){n.enable(a||false)}else{s.enable(i,a)}})},destroy:function(){var e=this;if(e.zoomDropdown){e.zoomDropdown.destroy()}n.fn.destroy.call(this)}});var f=t.extend({init:function(e,t){var i=this,n=l("<div></div>"),r=l("<input />").attr(e.attributes),a='<span class="k-icon k-i-#:icon#"></span> #:text#';i.element=n;i.input=r;i.toolbar=t;i.dropDown=new o.DropDownList(i.input,{optionLabel:{text:e.text,icon:""},dataTextField:"text",dataSource:e.items,template:a,change:u(i._change,i)});i.element.append(i.dropDown.wrapper);i.dropDown.list.find(".k-list-optionlabel").hide();i.toolbar.zoomDropdown=i},_change:function(e){var t=this;t.toolbar.trigger(r,{command:e.sender.element.data("command"),options:e.sender.dataItem().options})},destroy:function(){this.dropDown.destroy()}});d.toolbar.registerComponent("imageEditorZoomDropDown",f);s(d.ui,{imageeditor:{ToolBar:c,ZoomDropDown:f}})})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("imageeditor/pane",["kendo.core","kendo.form","kendo.buttongroup","kendo.draganddrop"],e)})(function(){(function(h,e){var _=window.kendo,b=h.extend,o=h.proxy,t=_.Class,n=".k-imageeditor-pane",r="click";var p={form:"k-imageeditor-pane-form",button:"k-imageeditor-pane-button",confirmButton:"k-imageeditor-pane-confirm-button",cropOverlay:"k-imageeditor-crop-overlay",crop:"k-imageeditor-crop",resizeHandle:"k-resize-handle",resizeHandlePrefix:"k-resize-"};var v=function(e){return Math.round(e*1e3)/1e3};var i=t.extend({init:function(e){var t=this;t.imageeditor=e;if(t.imageeditor.currentPaneTool){t.imageeditor.currentPaneTool.destroy()}t.element=h("<div></div>").addClass(p.form)},open:function(){var e=this,t=e.imageeditor,i=t.options.messages.common;t.paneWrapper.append(e.element);e.formWidget=new _.ui.Form(e.element,b(e.formSettings(),{buttonsTemplate:_.format("<button class='{0} k-button' data-action='cancel'>{2}</button>"+"<button class='{0} {1} k-button k-primary' data-action='confirm'>{3}</button>",p.button,p.confirmButton,i.cancel,i.confirm)}));e.bindButtonEvents();t.paneWrapper.show();t.currentPaneTool=e},bindButtonEvents:function(){var e=this,t=e.formWidget,i=t.element.find("."+p.button);e._clickHandler=o(e._click,e);i.on(r+n,e._clickHandler)},_click:function(e){var t=this,i=h(e.target),n=i.data("action");if(t[n]){t[n]()}},cancel:function(){this.destroy()},confirm:function(){window.console.error("Pane's confirm method is not implemented!");this.destroy()},refresh:function(){},destroy:function(){var e=this,t=e.imageeditor;e.formWidget.element.find("."+p.button).off(n);e.formWidget.destroy();t.paneWrapper.html("");t.paneWrapper.hide();delete t.currentPaneTool}});var a=i.extend({init:function(e){var t=this;i.fn.init.call(t,e);t.buildCropModel();t.canvasUI()},confirm:function(){var e=this,t=e.formWidget._model.toJSON();e.destroy();e.imageeditor.executeCommand({command:"CropImageEditorCommand",options:t})},formSettings:function(){var e=this,t=e.imageeditor.options.messages.panes.crop,i=e.imageeditor.options.messages.common,n=t.aspectRatioItems,r=[];if(n){for(var a in n){r.push({value:a,text:n[a]})}}else{r=[{value:"originalRatio",text:"Original ratio"},{value:"1:1",text:"1:1 (Square)"},{value:"4:5",text:"4:5 (8:10)"},{value:"5:7",text:"5:7"},{value:"2:3",text:"2:3 (4:6)"},{value:"16:9",text:"16:9"}]}return{formData:e._model,change:o(e.onChange,e),items:[{type:"group",label:t.title||"Crop Image",layout:"grid",grid:{cols:2,gutter:"0 8px"},items:[{label:t.aspectRatio||"Aspect ratio:",field:"aspectRatio",editor:"DropDownList",editorOptions:{dataValueField:"value",dataTextField:"text",dataSource:r},colSpan:2},{label:t.orientation,field:"orientation",editor:h.proxy(e._orientationEditor,e),colSpan:2},{label:i.width||"Width:",field:"width",attributes:{style:"max-width: 100px;"},editor:"NumericTextBox",editorOptions:{format:"n0",max:e._model.width,min:0},colSpan:1},{label:i.height||"Height:",field:"height",attributes:{style:"max-width: 100px;"},editor:"NumericTextBox",editorOptions:{format:"n0",max:e._model.height,min:0},colSpan:1},{label:i.lockAspectRatio||"Lock aspect ratio",field:"lockAspectRatio",colSpan:2}]}]}},_orientationEditor:function(e,i){var t=this,n=t.imageeditor.options.messages.panes.crop,r=i.model[i.field];h("<div name='"+i.field+"'></div>").appendTo(e).kendoButtonGroup({items:[{text:n.portrait||"Portrait",attributes:{"data-value":"portrait"},selected:r==="portrait"},{text:n.landscape||"Landscape",attributes:{"data-value":"landscape"},selected:r==="landscape"}],select:function(e){var t=e.sender.wrapper.find(".k-state-active").data("value");i.model.set(i.field,t)}})},buildCropModel:function(){var e=this,t=e.imageeditor,i=t.getCanvasElement(),n=i.width,r=i.height;e._model={top:0,left:0,aspectRatio:"originalRatio",width:n,height:r,orientation:n-r<0?"portrait":"landscape",lockAspectRatio:true}},canvasUI:function(){var t=this,e=t.imageeditor,i=t.imageeditor.canvasContainer,n=h("<div></div>").addClass(p.cropOverlay),r=h("<div></div>").addClass(p.crop),a="<span class='"+p.resizeHandle+"'></span>",o=["nw","n","ne","w","e","sw","s","se"],s=e.getZoomLevel();for(var l=0;l<o.length;l++){var d=h(a).addClass(p.resizeHandlePrefix+o[l]).attr("data-orientation",o[l]);t._initResizeHandle(d);r.append(d)}t.cropElement=r;t._canvasUI=n.append(r).appendTo(i);var u=Math.round(t._model.width*s);var c=Math.round(t._model.height*s);var f=parseInt(t.cropElement.css("border-top-width"),10);t.cropElement.css({width:u,height:c,backgroundImage:"url('"+e._image.src+"')",backgroundSize:_.format("{0}px {1}px",u,c),backgroundClip:"content-box",backgroundPosition:_.format("-{0}px -{0}px",f)});t.cropElement.kendoDraggable({ignore:"."+p.resizeHandle,drag:function(e){t._adjustTopLeft(e.target.offsetTop+e.y.delta,e.target.offsetLeft+e.x.delta)}})},refresh:function(){var e=this,t=e.formWidget._model,i=e.imageeditor.getZoomLevel(),n=Math.round(t.width*i),r=Math.round(t.height*i),a=Math.round(t.top*i),o=Math.round(t.left*i),s=parseInt(e.cropElement.css("border-top-width"),10);e.cropElement.css({top:a,left:o,width:n,height:r,backgroundSize:_.format("{0}px {1}px",e._model.width*i,e._model.height*i),backgroundPosition:_.format("-{0}px -{1}px",o+s,a+s)})},_initResizeHandle:function(e){var d=this;e.kendoDraggable({drag:function(e){var t=h(e.sender.element),i=d.formWidget._model,n=d._model,r=t.data("orientation"),a={},o=d.imageeditor.getZoomLevel(),s=i.left*o,l=i.top*o;if(r.indexOf("w")>=0){a.left=d.cropElement[0].offsetLeft+e.x.delta;a.width=d.cropElement[0].offsetWidth-e.x.delta}else if(r.indexOf("e")>=0){a.width=d.cropElement[0].offsetWidth+e.x.delta}if(r.indexOf("n")>=0){a.top=d.cropElement[0].offsetTop+e.y.delta;a.height=d.cropElement[0].offsetHeight-e.y.delta}else if(r.indexOf("s")>=0){a.height=d.cropElement[0].offsetHeight+e.y.delta}if(a.width&&(a.left||s)+a.width<=n.width*o){i.set("width",Math.round(a.width/o))}if(a.height&&(a.top||l)+a.height<=n.height*o){i.set("height",Math.round(a.height/o))}if(a.top||a.left){d._adjustTopLeft(a.top,a.left)}}})},_adjustTopLeft:function(e,t,i){var n=this,r=i||n.formWidget._model,a=n.formWidget._model,o=n._model,s=n.imageeditor.getZoomLevel();if(e>=0&&e/s+r.height<=o.height){a.set("top",Math.round(e/s))}if(t>=0&&t/s+r.width<=o.width){a.set("left",Math.round(t/s))}},onChange:function(e){var t=this,i=t.imageeditor.getZoomLevel(),n=e.sender._model,r=t._model,a=r.width,o=r.height,s=r.width+":"+r.height,l=t._gcd(r.width,r.height);s=r.width/l+":"+r.height/l;if(e.field==="aspectRatio"&&e.value==="originalRatio"){n.set("top",0);n.set("left",0);n.set("width",r.width);n.set("height",r.height);n.set("orientation",r.orientation)}else if(e.field==="orientation"){var d=b({},n,{width:n.height,height:n.width});var u=t._calcSize(d,s,a,o);n.set("width",u.width);n.set("height",u.height)}else if(n.lockAspectRatio){var c=e.field;var f=t._calcSize(n,s,a,o,c);n.set("width",f.width);n.set("height",f.height)}var h=Math.round(n.width*i);var p=Math.round(n.height*i);var v=Math.round(n.top*i);var m=Math.round(n.left*i);var g=parseInt(t.cropElement.css("border-top-width"),10);t.cropElement.css({top:v,left:m,width:h,height:p,backgroundPosition:_.format("-{0}px -{1}px",m+g,v+g)})},_calcSize:function(e,t,i,n,r){var a=Math.min(e.width,i),o=Math.min(e.height,n),s=e.orientation==="portrait",l=e.aspectRatio;if(l.indexOf(":")<0){l=t}l=l.split(":").map(function(e){return parseInt(e,10)});var d=s?Math.min(l[0],l[1]):Math.max(l[0],l[1]);var u=!s?Math.min(l[0],l[1]):Math.max(l[0],l[1]);var c=v(d/u);var f=v(a/o);var h={width:Math.round(o*c),height:Math.round(a/c)};if(r==="width"){return{width:a,height:h.height}}if(r==="height"){return{width:h.width,height:o}}if(f>c){a=h.width}else if(f<c){o=h.height}return{width:a,height:o}},_gcd:function(e,t){return t===0?e:this._gcd(t,e%t)},destroy:function(){_.destroy(this._canvasUI);this._canvasUI.remove();i.fn.destroy.call(this)}});var s=i.extend({init:function(e){i.fn.init.call(this,e);this.buildResizeModel()},confirm:function(){var e=this,t=e._model.width,i=e._model.height,n=e.formWidget._model.toJSON();if(n.measure==="percents"){n.width=t*(n.width/100);n.height=i*(n.height/100)}e.imageeditor.executeCommand({command:"ResizeImageEditorCommand",options:n});e.destroy()},formSettings:function(){var e=this,t=e.imageeditor.options.messages.panes.resize,i=e.imageeditor.options.messages.common;return{formData:e._model,change:o(e.onChange,e),items:[{type:"group",label:t.title||"Resize image",layout:"grid",grid:{cols:2,gutter:"0 8px"},items:[{label:i.width||"Width:",field:"width",attributes:{style:"max-width: 100px;"},editor:"NumericTextBox",editorOptions:{format:"n0",min:0},colSpan:1},{field:"measureW",editor:"DropDownList",attributes:{style:"max-width: 100px;"},label:{text:"&nbsp;",encoded:false},editorOptions:{dataTextField:"text",dataValueField:"value",dataSource:[{text:t.pixels||"Pixels",value:"pixels"},{text:t.percents||"Percents",value:"percents"}]},colSpan:1},{label:i.height||"Height:",field:"height",attributes:{style:"max-width: 100px;"},editor:"NumericTextBox",editorOptions:{format:"n0",min:0},colSpan:1},{field:"measureH",label:{text:"&nbsp;",encoded:false},attributes:{style:"max-width: 100px;"},editor:"DropDownList",editorOptions:{dataTextField:"text",dataValueField:"value",dataSource:[{text:t.pixels||"Pixels",value:"pixels"},{text:t.percents||"Percents",value:"percents"}]},colSpan:1},{label:i.lockAspectRatio||"Lock aspect ratio",field:"lockAspectRatio",colSpan:2}]}]}},buildResizeModel:function(){var e=this,t=e.imageeditor,i=t.getCanvasElement(),n=i.width,r=i.height;e._model={width:n,height:r,measure:"pixels",measureW:"pixels",measureH:"pixels",lockAspectRatio:true,ratio:v(n/r)}},onChange:function(e){var t=this,i=e.sender._model,n=i.lockAspectRatio;if(e.field==="measureW"||e.field==="measureH"){i.set("measureW",e.value);i.set("measureH",e.value);i.set("measure",e.value)}else if(e.field==="measure"){t.resetNumericsTo(e.value)}else if(e.field==="width"&&n&&!t._preventChange){i.set("height",i.width/i.ratio)}else if(e.field==="height"&&n&&!t._preventChange){i.set("width",i.height*i.ratio)}i.set("ratio",v(i.width/i.height))},resetNumericsTo:function(e){var t=this,i=t._model.width,n=t._model.height,r=t.formWidget,a=r._model,o=r.element.find("[name=width]").data("kendoNumericTextBox"),s=r.element.find("[name=height]").data("kendoNumericTextBox"),l=e==="percents",d={percents:{format:"#\\%"},pixels:{format:"n0"}};o.setOptions(d[e]);s.setOptions(d[e]);t._preventChange=true;a.set("width",l?i/o.value()*100:i*(o.value()/100));a.set("height",l?n/s.value()*100:n*(s.value()/100));t._preventChange=false}});b(_.ui.imageeditor,{ImageEditorPane:i,panes:{crop:a,resize:s}})})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("imageeditor/commands",["imageeditor/pane","kendo.upload"],e)})(function(){(function(s,e){var n=window.kendo,r=n.ui.imageeditor,a=s.extend,o=s.proxy,t=n.Class;var i=t.extend({init:function(e){this.options=a({},e,this.options);this.imageeditor=e.imageeditor}});var l=i.extend({init:function(e){i.fn.init.call(this,e)},exec:function(){var e=this,t=e.imageeditor,i=new r.panes[e.options.value](t);i.open()}});var d=i.extend({options:{zoomStep:.05,spacing:20},init:function(e){i.fn.init.call(this,e)},exec:function(){var e=this,t=e.options,i=t.value,n=e.imageeditor,r=n._image.height,a=n.getZoomLevel(),o=r;if(!isNaN(i)){i=parseFloat(i)}else if(typeof i==="string"){i=e._processStringValue(i,a)}o=Math.round(r*i);if(o>0){s(n._canvas).css("height",o);n._zoomLevel=i}if(n.currentPaneTool){n.currentPaneTool.refresh()}},_processStringValue:function(e,t){var i=this,n=i.options,r=i.imageeditor,a=r._image.height,o=r.canvasWrapper.height()-n.spacing,s=n.zoomStep;switch(e){case"zoomIn":return t+s;case"zoomOut":return t-s;case"fitToScreen":return Math.round(o/a*100)/100;default:return 1}}});var u=i.extend({init:function(e){i.fn.init.call(this,e)},exec:function(){var e=this,t=e.options,i=e.imageeditor,n=i.getCanvasElement(),r=i.getCurrent2dContext(),a=r.getImageData(t.left,t.top,t.width,t.height);r.clearRect(0,0,n.width,n.height);n.width=t.width;n.height=t.height;r.putImageData(a,0,0);i.drawImage(n.toDataURL()).done(function(e){i.drawCanvas(e)}).fail(function(e){i.trigger("error",e)})}});var c=i.extend({init:function(e){i.fn.init.call(this,e)},exec:function(){var e=this,t=e.options,i=e.imageeditor,n=i.getCanvasElement(),r=i.getCurrent2dContext(),a=i.getCurrentImage();r.clearRect(0,0,n.width,n.height);n.width=t.width;n.height=t.height;r.drawImage(a,0,0,t.width,t.height);i.drawImage(n.toDataURL()).done(function(e){i.drawCanvas(e)}).fail(function(e){i.trigger("error",e)})}});var f=i.extend({exec:function(){var e=this,t=e.imageeditor,i=t.getCanvasElement(),n=t.getCurrent2dContext(),r=t.undoStack.pop();if(r){t.redoStack.push(t.getCurrentImage());delete t._image;n.clearRect(0,0,i.width,i.height);i.width=r.width;i.height=r.height;n.drawImage(r,0,0,r.width,r.height);t.drawImage(i.toDataURL()).done(function(e){t.drawCanvas(e)}).fail(function(e){t.trigger("error",e)})}}});var h=i.extend({exec:function(){var e=this,t=e.imageeditor,i=t.getCanvasElement(),n=t.getCurrent2dContext(),r=t.redoStack.pop();if(r){t.undoStack.push(t.getCurrentImage());delete t._image;n.clearRect(0,0,i.width,i.height);i.width=r.width;i.height=r.height;n.drawImage(r,0,0,r.width,r.height);t.drawImage(i.toDataURL()).done(function(e){t.drawCanvas(e)}).fail(function(e){t.trigger("error",e)})}}});var p=i.extend({exec:function(){var e=this,t=e.imageeditor,i=t.getCanvasElement();n.saveAs(a({},t.options.saveAs,{dataURI:i.toDataURL()}))}});var v=i.extend({exec:function(){var e=this,t=e.imageeditor,i=t._upload;if(!i){var n=s("<input type='file' />");n.kendoUpload({select:o(e.onSelect,e),error:o(e.onError,e),multiple:false,validation:{allowedExtensions:[".jpg",".jpeg",".gif",".png",".bmp",".tiff",".webp"]}});t._upload=i=n.getKendoUpload()}i.element.click()},onSelect:function(e){var t=this,i=t.imageeditor,n=e.files[0].rawFile,r=new FileReader;r.addEventListener("load",function(){i.drawImage(r.result).done(function(e){if(!i.trigger("imageLoaded",{image:e})){i.drawCanvas(e);i._initUndoRedoStack();i._toggleTools()}}).fail(function(e){i.trigger("error",e)})},false);if(n){r.readAsDataURL(n)}},onError:function(e){var t=this,i=t.imageeditor;i.trigger("error",e)}});a(n.ui.imageeditor,{ImageEditorCommand:i,commands:{OpenPaneImageEditorCommand:l,ZoomImageEditorCommand:d,CropImageEditorCommand:u,ResizeImageEditorCommand:c,UndoImageEditorCommand:f,RedoImageEditorCommand:h,SaveImageEditorCommand:p,OpenImageEditorCommand:v}})})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.imageeditor",["imageeditor/toolbar","imageeditor/commands"],e)})(function(){var e={id:"imageeditor",name:"ImageEditor",category:"web",depends:["core"]};(function(o,e){var r=window.kendo,a=o.extend,s=o.isPlainObject,n=r.ui.Widget,l=r.ui,d=".kendoImageEditor",u=r._outerHeight,i="error",c="imageLoaded",f="imageRendered",h="execute";var p={wrapper:"k-widget k-widget-2021 k-imageeditor",header:"k-imageeditor-header",toolbar:"k-imageeditor-toolbar",paneWrapper:"k-imageeditor-action-pane",contentWrapper:"k-imageeditor-content",canvasWrapper:"k-imageeditor-canvas-container",canvasContainer:"k-imageeditor-canvas"};var t=n.extend({init:function(e,t){var i=this;n.fn.init.call(i,e,t);t=o.extend(true,{},t);i._wrapper();i._renderHeader();i._contentWrapper();i._keyHandler();if(t.imageUrl){i._drawCanvas()}i._initUndoRedoStack();i._toggleTools();r.notify(i)},options:{name:"ImageEditor",width:"100%",height:570,imageUrl:"",toolbar:{},saveAs:{fileName:"image.png"},messages:{toolbar:{open:"Open Image",save:"Save Image",undo:"Undo",redo:"Redo",crop:"Crop",resize:"Resize",zoomIn:"Zoom In",zoomOut:"Zoom Out",zoomDropdown:"Zoom options",zoomActualSize:"Show actual size",zoomFitToScreen:"Fit to screen"},panes:{crop:{title:"Crop Image",aspectRatio:"Aspect Ratio:",aspectRatioItems:{originalRatio:"Original ratio","1:1":"1:1 (Square)","4:5":"4:5 (8:10)","5:7":"5:7","2:3":"2:3 (4:6)","16:9":"16:9"},orientation:"Orientation:",portrait:"Portrait",landscape:"Landscape"},resize:{title:"Resize image",pixels:"Pixels",percents:"Percents"}},common:{width:"Width:",height:"Height:",cancel:"Cancel",confirm:"Confirm",lockAspectRatio:"Lock aspect ratio"}}},events:[i,c,f,h],_wrapper:function(){var e=this,t=e.options,i=t.width,n=t.height;e.wrapper=e.element.addClass(p.wrapper);if(i){e.wrapper.width(i)}if(n){e.wrapper.height(n)}e._resizeHandler=r.onResize(function(){e.resize(true)})},_renderHeader:function(){var e=this,t=e.options;e.header=o("<div />").addClass(p.header);if(t.toolbar){e.header.append(e._initToolbar().element)}e.wrapper.append(e.header)},_initToolbar:function(){var e=this,t=e.options,i=o("<div></div>").addClass(p.toolbar),n=a({},t.toolbar,{messages:t.messages.toolbar,action:e.executeCommand.bind(e)});e.toolbar=new l.imageeditor.ToolBar(i,n);return e.toolbar},_contentWrapper:function(){var e=this,t=o("<div></div>").addClass(p.contentWrapper),i=o("<div></div>").addClass(p.canvasWrapper),n=o("<div></div>").addClass(p.canvasContainer),r=o("<div></div>").addClass(p.paneWrapper).hide(),a=u(e.header);e.canvasWrapper=i;e.canvasContainer=n;e.paneWrapper=r;i.append(n);t.height(u(e.wrapper)-a);t.append(i).append(r);e.wrapper.append(t)},_keyHandler:function(){var t=this,i=false;t.wrapper.on("keydown"+d,function(e){if(e.ctrlKey){switch(e.keyCode){case 48:t.executeCommand({command:"ZoomImageEditorCommand",options:"fitToScreen"});i=true;break;case 189:t.executeCommand({command:"ZoomImageEditorCommand",options:"zoomOut"});i=true;break;case 187:t.executeCommand({command:"ZoomImageEditorCommand",options:"zoomIn"});i=true;break;case 90:t.executeCommand({command:"UndoImageEditorCommand"});i=true;break;case 89:t.executeCommand({command:"RedoImageEditorCommand"});i=true;break}if(i){e.preventDefault()}}})},_drawCanvas:function(){var t=this;var e=t.options.imageUrl;t.drawImage(e).done(function(e){if(!t.trigger(c,{image:e})){t.drawCanvas(e)}}).fail(function(e){t.trigger(i,e)})},_initUndoRedoStack:function(){var e=this;e.undoStack=[];e.redoStack=[]},_toggleTools:function(){var e=this,t=e.redoStack.length>0,i=e.undoStack.length>0,n=!!e._image,r=true;try{e._canvas.toDataURL()}catch(e){r=false}e.toolbar.toggleTools({redo:t,undo:i,enable:n,canExport:r})},drawImage:function(e){var t=this,i=new o.Deferred,n=new Image;n.onload=function(){r.ui.progress(t.canvasContainer,false);i.resolve(n)};n.onerror=function(){r.ui.progress(t.canvasContainer,false);i.reject(arguments)};r.ui.progress(t.canvasContainer,true);n.src=e;return i.promise()},drawCanvas:function(e){var t=this;var i=o("<canvas>Canvas element</canvas>")[0];var n=i.getContext("2d");if(t._canvas){o(t._canvas).remove()}if(t._image){t.undoStack.push(t._image)}t._canvas=i;t._ctx=n;t._image=e;i.width=e.width;i.height=e.height;n.drawImage(e,0,0);t.canvasContainer.append(i);if(e.height>t.canvasWrapper.height()){t.executeCommand({command:"ZoomImageEditorCommand",options:"fitToScreen"})}else{t.executeCommand({command:"ZoomImageEditorCommand",options:t.getZoomLevel()})}t.trigger(f,{canvas:i,ctx:n,image:e});t._toggleTools()},getCanvasElement:function(){return this._canvas},getCurrent2dContext:function(){return this._ctx},getCurrentImage:function(){return this._image},executeCommand:function(e){var t=e.command,i=a({imageeditor:this},s(e.options)?e.options:{value:e.options}),n=new l.imageeditor.commands[t](i);if(!this.trigger(h,e)){this._toggleTools();return n.exec()}},getZoomLevel:function(){return this._zoomLevel||1},destroy:function(){var e=this;e.element.off(d);if(e.currentPaneTool){e.currentPaneTool.destroy()}if(e.toolbar){e.toolbar.destroy()}if(e._upload){e._upload.destroy()}n.fn.destroy.call(e)}});l.plugin(t)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.floatingactionbutton",["kendo.core","kendo.popup","kendo.fx"],e)})(function(){var e={id:"floatingactionbutton",name:"Floating Action Button",category:"web",description:"The Floating Action Button represents the primary action of a screen and provides the ability to display related actions.",depends:["core"]};(function(u,f){var s=window.kendo,n=s.ui.Widget,i=".kendoFloatingActionButton",a=s.ui,c=s.keys,l=s.support,o=u.proxy,d=u.extend,h=".",r="id",p="k-hidden",v="left",m="right",e="top",g="bottom",_="center",b="start",w="auto",k="aria-disabled",y="aria-haspopup",x="aria-controls",C="aria-expanded",S="aria-label",T="role",D="menu",A="menuitem",E="tabindex",I="click",t="expand",M="collapse",R="keydown",F="mouseenter"+i+" mouseleave"+i;var P={widget:"k-widget k-widget-2021 k-fab",text:"k-fab-text",icon:"k-fab-icon",list:"k-fab-items",listTop:"k-fab-items-top",listBottom:"k-fab-items-bottom",listTextLeft:"k-text-left",listTextRight:"k-text-right",item:"k-fab-item",itemIcon:"k-fab-item-icon",itemText:"k-fab-item-text",popup:"k-fab-popup",popupTransparent:"k-popup-transparent",disabled:"k-state-disabled",hover:"k-state-hover",focus:"k-state-focus"};var z={icon:'<span class="k-fab-icon k-icon k-i-#: icon #"></span>',text:'<span class="k-fab-text">#:text#</span>',item:"# if (text) { # "+'<span class="k-fab-item-text" aria-hidden="true">#:text#</span>'+"# } #"+"# if (icon) { # "+'<span class="k-fab-item-icon k-icon k-i-#: icon #"></span>'+"# } #"};var B=n.extend({init:function(e,t){var i=this;n.fn.init.call(i,e,t);i._wrapper();i._content();i._appearance();i._renderList();i._initPopup();i._aria();i._attachEvents();s.notify(i)},options:{name:"FloatingActionButton",icon:"",text:"",items:[],themeColor:"primary",sizes:{small:"sm",medium:"md",large:"lg"},size:"medium",shape:"pill",align:"bottom end",alignOffset:{x:16,y:16},positionMode:"fixed",visible:true,enable:true,enabled:true,_classNames:[]},events:[I,t,M],_offsetMap:{start:v,end:m,top:e,bottom:g},_reversedOffsetMap:{start:m,end:v},_getAlignment:function(){var e=this,t=e.options.align.split(" ");return{vertical:t[0],horizontal:t[1]}},_getOffset:function(){var e=this,t=e.options,i=l.isRtl(e.element),n=e._getAlignment(),r=t.alignOffset,a=i?e._reversedOffsetMap:e._offsetMap,o=i?e._offsetMap:e._reversedOffsetMap,s={};s[e._offsetMap[n.vertical]]=r.y;s[a[n.horizontal]]=r.x;s[o[n.horizontal]]=w;return s},_wrapper:function(){var e=this;e.wrapper=e.element.addClass(P.widget);e.wrapper.css(e._getOffset())},_content:function(){var e=this,t=e.options,i=t.text,n=t.icon;e.icon(n);e.text(i!==""?i:e.element.text())},_appearance:function(){var e=this,t=e.options;e._themeColor=t.themeColor;e._sizes=t.sizes;e._size=t.size;e._shape=t.shape;e._align=t.align;e._positionMode=t.positionMode;e._visible=t.visible;e._enabled=t.enabled;e._updateClassNames()},_updateClassNames:function(){var i=this,e=[P.widget],n=i.options._classNames,t=i._themeColor,r=i._sizes,a=i._size,o=r[a]===f?a:r[a],s=i._shape,l=i._align,d=i._positionMode,u=i._visible,c=i._enabled;i.element.removeClass(function(e,t){if(t.indexOf("k-")===0&&n.indexOf(t)===-1){i.element.removeClass(t)}});if(typeof t==="string"&&t!==""){e.push("k-fab-"+t)}if(typeof a==="string"&&a!==""&&o!==""){e.push("k-fab-"+o)}if(typeof s==="string"&&s!==""){e.push("k-fab-"+s)}if(typeof l==="string"&&l.split(" ").length==2){e.push("k-"+l.replace(" ","-"))}if(typeof d==="string"&&d!==""){e.push("k-pos-"+d)}if(u===false){e.push(p)}if(c===false){e.push(P.disabled)}i.element.addClass(e.join(" "))},_aria:function(){var e=this,t=e.element,i=e._popup,n=e._enabled;t.attr(k,!n);t.attr(y,i?true:null);t.attr(C,i?false:null);t.attr(x,i?i.element.attr(r):null);if(i){i.element.attr(T,D);i.element.find(h+P.item).attr(T,A).attr(E,-1)}},_renderList:function(){var e=this,t=e.options.items,i=document.body,n=u("<ul>").addClass(P.list);if(!t.length){return}e._list=n.appendTo(i);t.forEach(e._renderListItem.bind(e));n.addClass(e._getListOrientation())},_renderListItem:function(e){var t=this,i=s.template(z.item),n=e.template?s.template(e.template):i,r=u("<li>").addClass(P.item);r.addClass(t._getListItemsAlignment());r.addClass(e.cssClass);r.attr(S,e.title||e.label||"");t._enableListItem(r,e.enabled);r.append(n({icon:e.icon,text:e.label}));t._list.append(r)},_enableListItem:function(e,t){if(!e||t===f){return}e.toggleClass(P.disabled,!t);if(t){e.removeAttr(k)}else{e.attr(k,true)}},_getListOrientation:function(){var e=this,t=e._getAlignment();if(t.vertical===g){return P.listTop}return P.listBottom},_getListItemsAlignment:function(){var e=this,t=l.isRtl(e.element),i=e._getAlignment();if(i.horizontal===b||i.horizontal===_){return!t?P.listTextLeft:P.listTextRight}return!t?P.listTextRight:P.listTextLeft},_getListItemOffset:function(){var e=this,t=e.element,i=e._list.find(h+P.itemIcon),n=0;if(t.length&&i.length&&!e.options.text){n=t.outerWidth()/2-i.first().outerWidth()/2}return n},_initPopup:function(){var e=this,t=e.element,i=e.options,n=e._list,r;if(!n){return}r=e._getPopupPosition();e._popup=new a.Popup(n,d({},i.popup,{anchor:t,appendTo:n.parent(),copyAnchorStyles:false,autosize:false,collision:"",position:r.position,origin:r.origin,animation:{open:{effects:s.parseEffects(a.Popup.fn.options.animation.open.effects,r.flipped)}},open:o(e._popupOpenHandler,e),close:o(e._popupCloseHandler,e),activate:o(e._popupExpandHandler,e),deactivate:o(e._popupCollapseHandler,e)}));e._popup.element.addClass([P.popup,P.popupTransparent].join(" "));e._setPopupId()},_setPopupId:function(){var e=this,t=e.element.attr(r);if(!t){t=s.guid()}e._popup.element.attr(r,t+"-list")},_getPopupPosition:function(){var e=this,t=e.options.align,i=l.isRtl(e.element),n=i?m:v,r=i?v:m,a,o,s=false;switch(t){case"top end":case"middle end":a="bottom "+r;o="top "+r;break;case"bottom start":case"bottom center":a="top "+n;o="bottom "+n;s=true;break;case"bottom end":a="top "+r;o="bottom "+r;s=true;break;default:a="bottom "+n;o="top "+n}return{origin:a,position:o,flipped:s}},_popupOpenHandler:function(){var e=this,t=e._popup,i=this._getListItemOffset();this.element.attr(C,true);t.element.css({paddingLeft:i});t.element.css({paddingRight:i})},_popupCloseHandler:function(){this.element.attr(C,false)},_popupExpandHandler:function(e){if(this.trigger(t)){e.preventDefault()}this._popup.element.find(h+P.item).first().focus()},_popupCollapseHandler:function(e){if(this.trigger(M)){e.preventDefault()}},_attachEvents:function(){var e=this,t=e._popup;e.element.bind(I+i,o(e._click,e));if(t){t.element.bind(I+i,h+P.item,o(e._itemClick,e)).bind(R+i,h+P.item,o(e._itemKeydown,e)).on(F,h+P.item,o(e._itemHover,e))}},_click:function(e){var t=this,i=t.options,n=t._popup;if(t.trigger(I,{event:e})){e.preventDefault();return}if(!n&&!i.items.length){return}if(!n.visible()){n.open()}else{n.close()}},_itemClick:function(e){var t=this,i=u(e.target),n,r,a,o;if(!i){return}n=i.closest(h+P.item);if(n.length){r=t.options.items[n.index()];a=r.click&&s.isFunction(r.click)?r.click:null;o={sender:t,target:n,item:r};if(a){t.element.focus();t._popup.close();a.call(t,o)}}},_itemKeydown:function(e){var t=this,i=u(e.target),n=e.keyCode,r=t.element,a=t._popup,o=t._getAlignment().vertical===g,s=i.hasClass(P.disabled),l=t._list.children(),d=l.index(e.target);if(!i.is(h+P.item)){return}e.preventDefault();if((n===c.ENTER||n===c.SPACEBAR)&&!s){t._itemClick(e)}if(!o&&n===c.DOWN||o&&n===c.UP){if(d===l.length-1){l.first().focus();return}u(l[d+1]).focus()}if(!o&&n===c.UP||o&&n===c.DOWN){if(d===0){l.last().focus();return}u(l[d-1]).focus()}if(n===c.ESC||n===c.TAB){a.close();r.focus()}if(n===c.HOME){l.first().focus()}if(n===c.END){l.last().focus()}},_itemHover:function(e){var t=u(s.eventTarget(e)||e.target).closest(h+P.item);if(!t.hasClass(P.item)){return}t.siblings().removeClass(P.hover);t.toggleClass(P.hover)},text:function(e){var t=this,i=t.element,n=i.find(h+P.text),r=s.template(z.text);if(arguments.length===0||e===f){return t._text}t.options.text=t._text=s.htmlEncode(e);i.contents().filter(function(){return this.nodeType===3}).remove();if(e===false||e===null||e===""){t._text="";n.remove();return}if(!n.length){n=u(r({text:e})).appendTo(i);return}n.text(e)},icon:function(e){var t=this,i=t.element,n=i.find(h+P.icon),r=s.template(z.icon);if(arguments.length===0||e===f){return t._icon}t.options.icon=t._icon=s.htmlEncode(e);if(e===false||e===null||e===""){t._icon="";n.remove();return}n.remove();i.prepend(r({icon:e}))},themeColor:function(e){var t=this;if(arguments.length===0||e===f){return t._themeColor}t.options.themeColor=t._themeColor=e;t._updateClassNames()},shape:function(e){var t=this;if(arguments.length===0||e===f){return t._shape}t.options.shape=t._shape=e;t._updateClassNames()},hide:function(){var e=this;e.options.visible=e._visible=false;e._updateClassNames()},show:function(){var e=this;e.options.visible=e._visible=true;e._updateClassNames()},enable:function(e){var t=this;if(e===f){e=true}t.options.enabled=t._enabled=e;t._updateClassNames();t.element.attr(k,!e)},setOptions:function(e){var t=this;n.fn.setOptions.call(t,e);t.element.removeAttr("style");t.element.css(t._getOffset());t._content();t._appearance();if(e.align||e.items){t.element.off(i);t.destroyPopup();t._renderList();t._initPopup();t._attachEvents()}t._aria()},destroyPopup:function(){var e=this;if(e._popup){e._popup.destroy();e._popup=null;e._list.off(i);e._list.remove();e._list=null}},destroy:function(){var e=this;e.destroyPopup();e.element.off(i);n.fn.destroy.call(e)}});a.plugin(B)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.inputgroupbase",["kendo.core"],e)})(function(){var e={id:"inputgroupbase",name:"InputGroupBase",category:"web",description:"The InputGroupBase component.",depends:["core"]};(function(a,r){var o=window.kendo,e=o.ui,n=e.Widget,s=a.extend,l=a.proxy,t="change",i="focus",d="click",u="select",c=".",f="disabled",h="role",p="vertical",v="after";var m=n.extend({init:function(e,t){var i=this;n.fn.init.call(i,e,t);i.options=s({},i.options,t);i._iterateMarkupItems();i._parseItems(i.options.items);i._wrapper();i.value(i.options.value);i._attachEvents()},options:{name:"InputGroupBase"},events:[t,i,u],ITEM_TEMPLATE:"",NS:".kendoInputGroupBase",GROUP_ROLE:"",groupStyles:{},destroy:function(){var e=this;e.element.off(e.NS);n.fn.destroy.call(e)},item:function(e){if(this._indexIsPresent(e)){return a(this.items().get(e))}},items:function(){return this.wrapper.find(c+this.groupStyles.input)},enable:function(e){var t;if(e!==false&&e!==true){return}t=this.element.find(c+this.groupStyles.item);this._disabledOnElements(t,!e)},enableItem:function(e,t){if(e!==false&&e!==true){return}if(this._indexIsPresent(t)){t=a(this.element.find(c+this.groupStyles.item).get(t))}else if(t instanceof jQuery){if(t.is("input")){t=t.closest(c+this.groupStyles.item)}else if(!t.is("li")){return}}else{return}this._disabledOnElements(t,!e)},value:function(){return false},_attachEvents:function(){var e=this;e.element.on(i+e.NS,c+e.groupStyles.input,l(e._focusHandler,e)).on(t+e.NS,c+e.groupStyles.input,l(e._changeHandler,e)).on(d+e.NS,c+e.groupStyles.input,l(e._clickHandler,e))},_clickHandler:function(e){var t=a(e.target);if(this.trigger(u,{target:t})){e.preventDefault();e.stopPropagation();this._targetForPreventedChange=e.target}},_changeHandler:function(){return false},_dataValRequired:function(){return false},_disabledOnElements:function(e,t){var i=e.find("input");if(t){i.attr(f,"");e.addClass(this.groupStyles.disabled)}else{i.removeAttr(f);e.removeClass(this.groupStyles.disabled)}},_focusHandler:function(e){var t=a(e.target);this.trigger(i,{target:t})},_indexIsPresent:function(e){return!isNaN(e)&&e!==null&&e!==true&&e!==false&&this.wrapper.find(c+this.groupStyles.input).length>e},_initializeItem:function(e,t){var i=a(this.wrapper.find(c+this.groupStyles.item).get(t)||this.ITEM_TEMPLATE),n=i.find(c+this.groupStyles.label),r=i.find(c+this.groupStyles.input);if(e.value){r.val(e.value)}if(e.name){r.attr("name",e.name)}if(e.id){r.attr("id",e.id);n.attr("for",e.id)}if(e.label){if(e.encoded){n.text(e.label)}else{n.html(e.label)}}if(!e.labelAfter){n.after(r)}if(e.attributes){i.attr(e.attributes)}if(e.cssClass){i.addClass(e.cssClass)}if(!e.enabled){this._disabledOnElements(i,true)}if(e.validation){r.attr(e.validation)}if(i.closest(c+this.groupStyles.list).length===0){this.element.append(i)}},_iterateMarkupItems:function(){var e=this.element;if(e.children("li").length>0){e.find("li").each(l(this._markupItem,this))}},_markupItem:function(e,t){var i=t.querySelector("input");if(i.hasAttribute("disabled")){a(t).addClass(this.groupStyles.disabled)}},_parseItem:function(e,t){var i=this.options,n=this._items;if(typeof e==="string"){e={value:e,label:e}}if(e.encoded!==false){e.encoded=true}if(i.labelPosition===v){e.labelAfter=true}if(e.enabled===r){e.enabled=i.enabled}if(!e.id){e.id=o.guid()}e.name=i.inputName||this.element.attr("id");if(n.length>t){n[t]=s({},n[t],e)}else{n.push(e)}},_parseItems:function(e){if(!this._items){this._items=[]}if(e){e.forEach(l(this._parseItem,this))}},_validationSettings:function(){var e=this.wrapper,t=this._items,i={},n=function(e){e.validation=i},r=function(){t.push({})};if(e.is("[required]")){i.required="required";e.removeAttr("required")}if(e.is("[data-val=true]")){i["data-val"]="true";e.removeAttr("data-val")}if(e.is("[data-val-required]")){this._dataValRequired(i);e.removeAttr("data-val-required")}if(e.is("[data-val-server]")){i["data-val-server"]=e.attr("data-val-server")}if(Object.keys(i).length>0&&(!t||t.length===0)){e.find("li").each(r)}t.forEach(n)},_wrapper:function(){var e=this.wrapper=this.element,t=this._items,i=e.find("li"),n=e.find("input");e.attr(h,this.GROUP_ROLE).addClass(this.groupStyles.list);if(this.options.layout===p){e.addClass(this.groupStyles.vertical)}else{e.addClass(this.groupStyles.horizontal)}if(i.length>0&&n.length>0){i.addClass(this.groupStyles.item);n.addClass(this.groupStyles.input);e.find("label").addClass(this.groupStyles.label)}this._validationSettings();t.forEach(l(this._initializeItem,this))}});e.plugin(m)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.radiogroup",["kendo.core","kendo.inputgroupbase"],e)})(function(){var e={id:"radiogroup",name:"RadioGroup",category:"web",description:"The RadioGroup component.",depends:["core","inputgroupbase"]};(function(n,r){var e=window.kendo,t=e.ui,i=t.InputGroupBase,a="change",o=".",s="checked",l="vertical",d="after";var u=i.extend({options:{name:"RadioGroup",inputName:"",enabled:true,labelPosition:d,layout:l,items:[]},ITEM_TEMPLATE:'<li class="k-radio-item">'+'<input type="radio" class="k-radio" >'+'<label class="k-radio-label" ></label>'+"</li>",NS:".kendoRadioGroup",GROUP_ROLE:"radiogroup",groupStyles:{item:"k-radio-item",input:"k-radio",label:"k-radio-label",list:"k-radio-list",vertical:"k-list-vertical",horizontal:"k-list-horizontal",disabled:"k-state-disabled"},item:function(e){var t=this.wrapper.find("input:checked");if(this._indexIsPresent(e)){return n(this.items().get(e))}else if(t.length){return t}},value:function(e){var t=this,i=t.element.find("[value='"+e+"']");if(e===r){return t._value}else if(e===null){t._value=null;t.element.find(o+t.groupStyles.input).prop(s,false)}if(i.length>0){t._value=e;t.element.find(o+t.groupStyles.input).prop(s,false);i.prop(s,true)}},_changeHandler:function(e){var t=n(e.target),i=this._value;if(this._targetForPreventedChange===e.target){this._targetForPreventedChange=null;return}this._value=t.val();this.trigger(a,{oldValue:i,newValue:this._value,target:t})},_dataValRequired:function(e){e["data-val-required"]=this.wrapper.attr("data-val-required")}});t.plugin(u)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.checkboxgroup",["kendo.core","kendo.inputgroupbase"],e)})(function(){var e={id:"checkboxgroup",name:"CheckBoxGroup",category:"web",description:"The CheckBoxGroup component.",depends:["core","inputgroupbase"]};(function(r,s){var e=window.kendo,t=e.ui,i=t.InputGroupBase,a="change",l=".",d="checked",n="vertical",o="after";var u=i.extend({options:{name:"CheckBoxGroup",checkboxName:"",enabled:true,labelPosition:o,layout:n,items:[]},ITEM_TEMPLATE:'<li class="k-checkbox-item">'+'<input type="checkbox" class="k-checkbox" >'+'<label class="k-checkbox-label"></label>'+"</li>",NS:".kendoCheckBoxGroup",GROUP_ROLE:"group",groupStyles:{item:"k-checkbox-item",input:"k-checkbox",label:"k-checkbox-label",list:"k-checkbox-list",vertical:"k-list-vertical",horizontal:"k-list-horizontal",disabled:"k-state-disabled"},checkAll:function(e){var i=this,t=i.element.find("input"),n=function(e,t){i._value.push(t.value)};if(e===true){t.prop(d,true);i._value=[];t.each(n)}else if(e===false){t.prop(d,false);i._value=[]}},value:function(e){var t=this,i,n=[],r,a,o;if(e===s){if(!t._value){t._value=[]}return t._value}else if(e===null||e==[]){t._value=[];t.element.find(l+t.groupStyles.input).prop(d,false);return}else if(!e||e.length<1){return}r=t.element.find("input[value='"+e[0]+"']");if(r.length){n.push(e[0])}for(o=1;o<e.length;o++){i=t.element.find("input[value='"+e[o]+"']");a=r.add(i);if(a.length>r.length){r=a;n.push(e[o])}}t._value=n;t.element.find(l+t.groupStyles.input).prop(d,false);r.prop(d,true)},_changeHandler:function(e){var t=r(e.target),i=t.val(),n=function(e){return e!==i};if(this._targetForPreventedChange===e.target){this._targetForPreventedChange=null;return}if(!this._value){this._value=[]}if(t.is(":checked")){this._value.push(i)}else{this._value=this._value.filter(n)}this.trigger(a,{target:t})},_dataValRequired:function(e){e["data-msg-required"]=this.wrapper.attr("data-val-required");e["data-rule-required"]="true"}});t.plugin(u)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.bottomnavigation",["kendo.core"],e)})(function(){var e={id:"bottomnavigation",name:"BottomNavigation",category:"web",description:"The BottomNavigation widget is a navigation element that allows movement between primary destinations in an app.",depends:["core"]};(function(o,e){var s=window.kendo,t=s.ui,n=t.Widget,r=o.proxy,l=o.extend,d=s.template,a=s.keys,u=o.isPlainObject,c=o.isEmptyObject,f=".kendoBottomNavigation",h="k-bottom-nav-",p="k-pos-",v=".",m="select";var g=function(e){return typeof e==="string"};var _={widget:"k-bottom-nav",item:"k-bottom-nav-item",navIcon:"k-bottom-nav-item-icon",icon:"k-icon",text:"k-bottom-nav-item-text",itemFlow:{vertical:"k-bottom-nav-item-flow-vertical",horizontal:"k-bottom-nav-item-flow-horizontal"},selected:"k-state-selected",disabled:"k-state-disabled",border:"k-bottom-nav-border",shadow:"k-bottom-nav-shadow",focus:"k-state-focused"};var b={item:d("<span class='"+_.item+"'></span>"),anchor:d("<a class='"+_.item+"' href='#:url#'></a>"),text:d("<span class='"+_.text+"'>#=text#</span>"),icon:d("<span class='"+_.navIcon+"#if(icon){# k-icon k-i-#:icon# #}#'></span>")};var i=n.extend({init:function(e,t){var i=this;t=t||{};n.fn.init.call(i,e,t);i.element=o(e);i._updateCssClasses();i._items();i._bindEvents()},options:{name:"BottomNavigation",positionMode:"fixed",items:[],themeColor:"primary",itemFlow:"vertical",fill:"flat",shadow:false,border:true,template:null},events:[m],destroy:function(){var e=this;e.element.off(f);n.fn.destroy.call(this)},_tabindex:function(e){var t=this,i=t.element,n="tabindex",r=i.attr("data-"+s.ns+n),a=e.attr(n)||i.attr(n)||r;if(!r){i.removeAttr(n);i.attr("data-"+s.ns+n,a)}e.attr(n,!isNaN(a)?a:0)},_updateCssClasses:function(){var i=this,e=i.options,t=_;i.element.removeClass(function(e,t){if(t.indexOf("k-")===0){i.element.removeClass(t)}});i.element.addClass(t.widget);i.element.addClass(s.getValidCssClass(h,"themeColor",e.themeColor));i.element.addClass(s.getValidCssClass(h,"fill",e.fill));i.element.addClass(s.getValidCssClass(p,"positionMode",e.positionMode));i.element.toggleClass(t.border,e.border);i.element.toggleClass(t.shadow,e.shadow);i._itemFlow(e.itemFlow)},_itemFlow:function(e){var t=this,i=_.itemFlow;t._toggleClassGroup(t.element,e,i)},_toggleClassGroup:function(e,t,i){if(g(i[t])){for(var n in i){e.removeClass(i[n])}e.addClass(i[t])}},_items:function(){var e=this,t=e.options,i=t.items,n;for(var r=0;r<i.length;r++){n=e._renderItem(i[r]);e.element.append(n)}},_renderItem:function(e){var t=this,i=e.template||t.options.template,n=e.url&&g(e.url),r,a;r=o(n?d(b.anchor)(e):d(b.item)(e));r.toggleClass(_.selected,e.selected===true).toggleClass(_.disabled,e.enabled===false).addClass(e.cssClass).attr(l({},e.attributes,{"aria-disabled":e.enabled===false})).data(e.data);t._tabindex(r);if(!r.attr("role")&&!n){r.attr("role","link")}if(i){r.append(d(i)(e));return r}e=l({},{icon:""},e);a=o(b.icon(e)).addClass(e.iconClass);r.append(a);if(e.text){e.text=e.encoded===false?e.text:s.htmlEncode(e.text);r.append(o(b.text(e)))}return r},_bindEvents:function(){var e=this,t=r(e._click,e),i=r(e._keydown,e);e.element.on("click"+f,v+_.item,t).on("keydown"+f,v+_.item,i)},_click:function(e){var t=this,i=o(e.target).closest(v+_.item);if(i.is(v+_.disabled)){e.preventDefault();return}t._triggerSelect(i,e)},_triggerSelect:function(e,t){var i=this;if(e.is(v+_.disabled)){return}if(i.trigger(m,{originalEvent:t,item:e,data:e.data()})){return}i.select(e)},_keydown:function(e){var t=this,i=o(e.target),n=e.keyCode;if(n===a.ENTER||n===a.SPACEBAR){if(t._isItem(i)){t._triggerSelect(i,e);if(n===a.SPACEBAR){e.preventDefault()}}}},_isItem:function(e){var t=this;e=o(e);return e.is(v+_.item)&&!!t.element.find(e).length},items:function(){var e=this;return e.element.children()},select:function(e,t){var i=this,n=i.items().filter(v+_.selected);if(!e){return n}t=t!==false;if(i._isItem(e)){n.removeClass(_.selected);o(e).toggleClass(_.selected,t)}},enable:function(e,t){var i=this;t=t===false;if(e&&i._isItem(e)){o(e).toggleClass(_.disabled,t);o(e).attr("aria-disabled",t)}},item:function(e){var t=this;if(isNaN(e)){return null}return t.items().eq(e)},itemById:function(e){var t=this;return t.element.find("#"+e)},add:function(e,t){var i=this,n="append",r=i.element;if(t&&i._isItem(t)){n="before";r=o(t)}if(e&&u(e)&&!c(e)){r[n](i._renderItem(e))}},remove:function(e){var t=this;if(e&&t._isItem(e)){e.remove()}},showText:function(e){var t=this,i=t.items().find(v+_.text);e=e!==false;i.toggle(e)},setOptions:function(e){var t=this;n.fn.setOptions.call(this,e);t._updateCssClasses();if("items"in e||"template"in e){t.element.empty();t._items()}}});t.plugin(i)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.web",["kendo.core","kendo.router","kendo.view","kendo.fx","kendo.dom","kendo.data.odata","kendo.data.xml","kendo.data","kendo.ooxml","kendo.excel","kendo.data.signalr","kendo.binder","kendo.drawing","kendo.validator","kendo.userevents","kendo.draganddrop","kendo.mobile.scroller","kendo.groupable","kendo.reorderable","kendo.resizable","kendo.sortable","kendo.selectable","kendo.chat","kendo.button","kendo.buttongroup","kendo.breadcrumb","kendo.switch","kendo.pager","kendo.popup","kendo.notification","kendo.tooltip","kendo.list","kendo.calendar","kendo.datepicker","kendo.dateinput","kendo.drawer","kendo.multiviewcalendar","kendo.autocomplete","kendo.dropdownlist","kendo.dropdowntree","kendo.combobox","kendo.multiselect","kendo.multicolumncombobox","kendo.colorpicker","kendo.columnmenu","kendo.columnsorter","kendo.grid","kendo.listview","kendo.listbox","kendo.loader","kendo.filebrowser","kendo.imagebrowser","kendo.editor","kendo.numerictextbox","kendo.maskedtextbox","kendo.mediaplayer","kendo.menu","kendo.editable","kendo.pivot.fieldmenu","kendo.filter","kendo.filtercell","kendo.panelbar","kendo.progressbar","kendo.responsivepanel","kendo.tabstrip","kendo.timepicker","kendo.toolbar","kendo.datetimepicker","kendo.daterangepicker","kendo.treeview.draganddrop","kendo.treeview","kendo.scrollview","kendo.slider","kendo.splitter","kendo.upload","kendo.dialog","kendo.window","kendo.virtuallist","kendo.scheduler.view","kendo.scheduler.dayview","kendo.scheduler.agendaview","kendo.scheduler.monthview","kendo.scheduler.recurrence","kendo.scheduler","kendo.gantt.data","kendo.gantt.editors","kendo.gantt.list","kendo.gantt.timeline","kendo.gantt","kendo.timeline","kendo.treelist","kendo.pivotgrid","kendo.spreadsheet","kendo.pivot.configurator","kendo.ripple","kendo.pdfviewer","kendo.rating","kendo.angular","kendo.badge","kendo.filemanager","kendo.stepper","kendo.textarea","kendo.textbox","kendo.form","kendo.floatinglabel","kendo.tilelayout","kendo.wizard","kendo.appbar","kendo.imageeditor","kendo.expansionpanel","kendo.floatingactionbutton","kendo.inputgroupbase","kendo.radiogroup","kendo.checkboxgroup","kendo.bottomnavigation"],e)})(function(){"bundle all";return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("dataviz/core/kendo-core",["kendo.core","kendo.drawing"],e)})(function(){(function(d){window.kendo.dataviz=window.kendo.dataviz||{};var h=kendo.drawing;var a=h.util;var v=h.Path;var H=h.Group;var e=kendo.Class;var N=kendo.geometry;var O=N.Rect;var V=N.Circle;var W=N.transform;var U=N.Segment;var j=kendo.dataviz;var f=kendo.deepExtend;var G=kendo.isFunction;var q=kendo.getter;var $="arc";var K="axisLabelClick";var t="#000";var k="bottom";var w="center";var Y="circle";var g=3;var Q="cross";var X="date";var Z="12px sans-serif";var J=400;var y=10;var ee=600;var te="end";var ie=/\{\d+:?/;var ne="height";var re=100;var ae="inside";var x="left";var oe=Number.MAX_VALUE;var se=-Number.MAX_VALUE;var le="none";var de="noteClick";var ue="noteHover";var ce="noteLeave";var fe="object";var he="outside";var C="right";var pe="start";var ve="string";var S="top";var me="triangle";var ge="value";var s="#fff";var _e="width";var T="x";var D="y";var be=1;var we={ARC:$,AXIS_LABEL_CLICK:K,BLACK:t,BOTTOM:k,CENTER:w,CIRCLE:Y,COORD_PRECISION:g,CROSS:Q,DATE:X,DEFAULT_FONT:Z,DEFAULT_HEIGHT:J,DEFAULT_PRECISION:y,DEFAULT_WIDTH:ee,END:te,FORMAT_REGEX:ie,HEIGHT:ne,HIGHLIGHT_ZINDEX:re,INSIDE:ae,LEFT:x,MAX_VALUE:oe,MIN_VALUE:se,NONE:le,NOTE_CLICK:de,NOTE_HOVER:ue,NOTE_LEAVE:ce,OBJECT:fe,OUTSIDE:he,RIGHT:C,START:pe,STRING:ve,TOP:S,TRIANGLE:me,VALUE:ge,WHITE:s,WIDTH:_e,X:T,Y:D,DEFAULT_SERIES_OPACITY:be};function ke(e){return Array.isArray(e)}function ye(e,t){var i=ke(t)?t:[t];for(var n=0;n<i.length;n++){var r=i[n];if(e.className.indexOf(r)===-1){e.className+=" "+r}}}var xe=/\s+/g;function Ce(e,t){if(e&&e.className){e.className=e.className.replace(t,"").replace(xe," ")}}function Se(e){var t=.5;if(e.options.stroke&&kendo.drawing.util.defined(e.options.stroke.width)){if(e.options.stroke.width%2===0){t=0}}for(var i=0;i<e.segments.length;i++){e.segments[i].anchor().round(0).translate(t,t)}return e}function Te(e,t){return-e.x*t.y+e.y*t.x<0}function o(e){return typeof e==="number"&&!isNaN(e)}function De(e){return typeof e===ve}function Ae(e){return o(e)||De(e)&&isFinite(e)}function Ee(e){return typeof e==="object"}function Ie(e){if(o(e)){return e+"px"}return e}var Me=/width|height|top|left|bottom|right/i;function Re(e){return Me.test(e)}function Fe(e,t){var i=De(t)?[t]:t;if(ke(i)){var n={};var r=window.getComputedStyle(e);for(var a=0;a<i.length;a++){var o=i[a];n[o]=Re(o)?parseFloat(r[o]):r[o]}return n}else if(Ee(t)){for(var s in t){e.style[s]=Ie(t[s])}}}function l(e,t){if(t===void 0){t=0}var i={top:0,right:0,bottom:0,left:0};if(typeof e==="number"){i[S]=i[C]=i[k]=i[x]=e}else{i[S]=e[S]||t;i[C]=e[C]||t;i[k]=e[k]||t;i[x]=e[x]||t}return i}var Pe={format:function(e,t){return t},toString:function(e){return e},parseDate:function(e){return new Date(e)},firstDay:function(){return 0}};var ze=Pe;var Be=e.extend({});Be.register=function(e){ze=e};if(Object.defineProperties){Object.defineProperties(Be,{implementation:{get:function(){return ze}}})}var Le=/\{(\d+)(:[^\}]+)?\}/g;var He=e.extend({init:function(e){this._intlService=e},auto:function(e){var t=[],i=arguments.length-1;while(i-- >0)t[i]=arguments[i+1];var n=this.intl;if(De(e)&&e.match(ie)){return n.format.apply(n,[e].concat(t))}return n.toString(t[0],e)},localeAuto:function(e,r,a){var o=this.intl;var t;if(De(e)&&e.match(ie)){t=e.replace(Le,function(e,t,i){var n=r[parseInt(t,10)];return o.toString(n,i?i.substring(1):"",a)})}else{t=o.toString(r[0],e,a)}return t}});if(Object.defineProperties){Object.defineProperties(He.fn,{intl:{get:function(){return this._intlService||Be.implementation},set:function(e){this._intlService=e}}})}var Ne=e.extend({init:function(e,t){if(t===void 0){t={}}this._intlService=t.intlService;this.sender=t.sender||e;this.format=new He(t.intlService);this.chart=e;this.rtl=Boolean(t.rtl)},notify:function(e,t){if(this.chart){this.chart.trigger(e,t)}},isPannable:function(e){var t=((this.chart||{}).options||{}).pannable;return t&&t.lock!==e}});if(Object.defineProperties){Object.defineProperties(Ne.fn,{intl:{get:function(){return this._intlService||Be.implementation},set:function(e){this._intlService=e;this.format.intl=e}}})}var Oe;var Ve=e.extend({});Ve.register=function(e){Oe=e};Ve.create=function(e,t){if(Oe){return Oe.create(e,t)}};var We={compile:function(e){return e}};var Ue=e.extend({});Ue.register=function(e){We=e};Ue.compile=function(e){return We.compile(e)};var je={ChartService:Ne,DomEventsBuilder:Ve,FormatService:He,IntlService:Be,TemplateService:Ue};function Ge(e){if(e===void 0){e={}}var t;if(e.template){e.template=t=Ue.compile(e.template)}else if(G(e.content)){t=e.content}return t}function qe(e,t){var i=e.length;var n=[];for(var r=0;r<i;r++){if(t(e[r])){n.push(e[r])}}return n}function $e(e,t){if(e.className){var i=t.split(" ");for(var n=0;n<i.length;n++){if(e.className.indexOf(i[n])!==-1){return true}}}}var Ke=function e(){this._map={}};Ke.prototype.get=function e(t){return this._map[this._key(t)]};Ke.prototype.set=function e(t,i){this._map[this._key(t)]=i};Ke.prototype._key=function e(t){return t instanceof Date?t.getTime():t};function p(e,t){if(t){return t.indexOf(e)!==-1}}function Ye(e,t,i){return kendo.drawing.util.round(e+(t-e)*i,g)}var Qe="trigger";var Xe=e.extend({init:function(e,t){this.observer=e;this.handlerMap=f({},this.handlerMap,t)},trigger:function(e,t){var i=this;var n=i.observer;var r=i.handlerMap;var a;if(r[e]){a=this.callObserver(r[e],t)}else if(n[Qe]){a=this.callObserver(Qe,e,t)}return a},callObserver:function(e){var t=[],i=arguments.length-1;while(i-- >0)t[i]=arguments[i+1];return this.observer[e].apply(this.observer,t)},requiresHandlers:function(e){var t=this;if(this.observer.requiresHandlers){return this.observer.requiresHandlers(e)}for(var i=0;i<e.length;i++){if(t.handlerMap[e[i]]){return true}}}});function Ze(e,t){var i=e.length;var n=[];for(var r=0;r<i;r++){var a=t(e[r]);if(kendo.drawing.util.defined(a)){n.push(a)}}return n}function Je(e){var t=0;if(e.wheelDelta){t=-e.wheelDelta/120;t=t>0?Math.ceil(t):Math.floor(t)}if(e.detail){t=kendo.drawing.util.round(e.detail/3)}return t}var i=kendo.drawing.util;var et=i.append;var tt=i.bindEvents;var A=i.defined;var it=i.deg;var nt=i.elementOffset;var rt=i.elementSize;var at=i.eventElement;var ot=i.eventCoordinates;var E=i.last;var I=i.limitValue;var st=i.objectKey;var lt=i.rad;var M=i.round;var dt=i.unbindEvents;var ut=i.valueOrDefault;var ct=e.extend({});ct.fetchFonts=function(i,n,r){if(r===void 0){r={depth:0}}var e=5;if(!i||r.depth>e||!document.fonts){return}Object.keys(i).forEach(function(e){var t=i[e];if(e==="dataSource"||e[0]==="$"||!t){return}if(e==="font"){n.push(t)}else if(typeof t==="object"){r.depth++;ct.fetchFonts(t,n,r);r.depth--}})};ct.loadFonts=function(e,t){var i=[];if(e.length>0&&document.fonts){try{i=e.map(function(e){return document.fonts.load(e)})}catch(e){kendo.logToConsole(e)}Promise.all(i).then(t,t)}else{t()}};ct.preloadFonts=function(e,t){var i=[];ct.fetchFonts(e,i);ct.loadFonts(i,t)};function n(e,t){var i=e.prototype;if(i.options){i.options=f({},i.options,t)}else{i.options=t}}function ft(e){var t=oe;var i=se;for(var n=0,r=e.length;n<r;n++){var a=e[n];if(a!==null&&isFinite(a)){t=Math.min(t,a);i=Math.max(i,a)}}return{min:t===oe?undefined:t,max:i===se?undefined:i}}function ht(e,t){for(var i=0;i<e.length;i++){var n=e[i];if(t(n,i,e)){return n}}}var pt=N.Matrix;var vt=/matrix\((.*)\)/;function mt(e){var t=e.match(vt);if(t===null||t.length!==2){return pt.unit()}var i=t[1].split(",").map(function(e){return parseFloat(e)});return new(Function.prototype.bind.apply(pt,[null].concat(i)))}function gt(e){var t=getComputedStyle(e).transform;if(t==="none"){return pt.unit()}return mt(t)}function _t(e){if(!e){return pt.unit()}var t=gt(e);var i=e.parentElement;while(i){var n=gt(i);t=t.multiplyCopy(n);i=i.parentElement}t.b=t.c=t.e=t.f=0;return t}function bt(e,t){var i=M(t-e,y-1);if(i===0){if(t===0){return.1}i=Math.abs(t)}var n=Math.pow(10,Math.floor(Math.log(i)/Math.log(10)));var r=M(i/n,y);var a=1;if(r<1.904762){a=.2}else if(r<4.761904){a=.5}else if(r<9.523809){a=1}else{a=2}return M(n*a,y)}var m=e.extend({init:function(e,t){this.x=e||0;this.y=t||0},clone:function(){return new m(this.x,this.y)},equals:function(e){return e&&this.x===e.x&&this.y===e.y},rotate:function(e,t){var i=lt(t);var n=Math.cos(i);var r=Math.sin(i);var a=e.x;var o=e.y;var s=this;var l=s.x;var d=s.y;this.x=M(a+(l-a)*n+(d-o)*r,g);this.y=M(o+(d-o)*n-(l-a)*r,g);return this},multiply:function(e){this.x*=e;this.y*=e;return this},distanceTo:function(e){var t=this.x-e.x;var i=this.y-e.y;return Math.sqrt(t*t+i*i)}});m.onCircle=function(e,t,i){var n=lt(t);return new m(e.x-i*Math.cos(n),e.y-i*Math.sin(n))};var R=e.extend({init:function(e,t,i,n){this.x1=e||0;this.y1=t||0;this.x2=i||0;this.y2=n||0},equals:function(e){return this.x1===e.x1&&this.x2===e.x2&&this.y1===e.y1&&this.y2===e.y2},width:function(){return this.x2-this.x1},height:function(){return this.y2-this.y1},translate:function(e,t){this.x1+=e;this.x2+=e;this.y1+=t;this.y2+=t;return this},move:function(e,t){var i=this.height();var n=this.width();if(A(e)){this.x1=e;this.x2=this.x1+n}if(A(t)){this.y1=t;this.y2=this.y1+i}return this},wrap:function(e){this.x1=Math.min(this.x1,e.x1);this.y1=Math.min(this.y1,e.y1);this.x2=Math.max(this.x2,e.x2);this.y2=Math.max(this.y2,e.y2);return this},wrapPoint:function(e){var t=ke(e);var i=t?e[0]:e.x;var n=t?e[1]:e.y;this.wrap(new R(i,n,i,n));return this},snapTo:function(e,t){if(t===T||!t){this.x1=e.x1;this.x2=e.x2}if(t===D||!t){this.y1=e.y1;this.y2=e.y2}return this},alignTo:function(e,t){var i=this.height();var n=this.width();var r=t===S||t===k?D:T;var a=r===D?i:n;if(t===w){var o=e.center();var s=this.center();this.x1+=o.x-s.x;this.y1+=o.y-s.y}else if(t===S||t===x){this[r+1]=e[r+1]-a}else{this[r+1]=e[r+2]}this.x2=this.x1+n;this.y2=this.y1+i;return this},shrink:function(e,t){this.x2-=e;this.y2-=t;return this},expand:function(e,t){this.shrink(-e,-t);return this},pad:function(e){var t=l(e);this.x1-=t.left;this.x2+=t.right;this.y1-=t.top;this.y2+=t.bottom;return this},unpad:function(e){var t=l(e);t.left=-t.left;t.top=-t.top;t.right=-t.right;t.bottom=-t.bottom;return this.pad(t)},clone:function(){return new R(this.x1,this.y1,this.x2,this.y2)},center:function(){return new m(this.x1+this.width()/2,this.y1+this.height()/2)},containsPoint:function(e){return e.x>=this.x1&&e.x<=this.x2&&e.y>=this.y1&&e.y<=this.y2},points:function(){return[new m(this.x1,this.y1),new m(this.x2,this.y1),new m(this.x2,this.y2),new m(this.x1,this.y2)]},getHash:function(){return[this.x1,this.y1,this.x2,this.y2].join(",")},overlaps:function(e){return!(e.y2<this.y1||this.y2<e.y1||e.x2<this.x1||this.x2<e.x1)},rotate:function(e){var t=this.width();var i=this.height();var n=this.center();var r=n.x;var a=n.y;var o=wt(0,0,r,a,e);var s=wt(t,0,r,a,e);var l=wt(t,i,r,a,e);var d=wt(0,i,r,a,e);t=Math.max(o.x,s.x,l.x,d.x)-Math.min(o.x,s.x,l.x,d.x);i=Math.max(o.y,s.y,l.y,d.y)-Math.min(o.y,s.y,l.y,d.y);this.x2=this.x1+t;this.y2=this.y1+i;return this},toRect:function(){return new O([this.x1,this.y1],[this.width(),this.height()])},hasSize:function(){return this.width()!==0&&this.height()!==0},align:function(e,t,i){var n=t+1;var r=t+2;var a=t===T?_e:ne;var o=this[a]();if(p(i,[x,S])){this[n]=e[n];this[r]=this[n]+o}else if(p(i,[C,k])){this[r]=e[r];this[n]=this[r]-o}else if(i===w){this[n]=e[n]+(e[a]()-o)/2;this[r]=this[n]+o}}});function wt(e,t,i,n,r){var a=lt(r);return new m(i+(e-i)*Math.cos(a)+(t-n)*Math.sin(a),n-(e-i)*Math.sin(a)+(t-n)*Math.cos(a))}var kt=e.extend({init:function(e,t,i,n,r){this.center=e;this.innerRadius=t;this.radius=i;this.startAngle=n;this.angle=r},clone:function(){return new kt(this.center,this.innerRadius,this.radius,this.startAngle,this.angle)},middle:function(){return this.startAngle+this.angle/2},setRadius:function(e,t){if(t){this.innerRadius=e}else{this.radius=e}return this},point:function(e,t){var i=lt(e);var n=Math.cos(i);var r=Math.sin(i);var a=t?this.innerRadius:this.radius;var o=M(this.center.x-n*a,g);var s=M(this.center.y-r*a,g);return new m(o,s)},adjacentBox:function(e,t,i){var n=this.clone().expand(e);var r=n.middle();var a=n.point(r);var o=t/2;var s=i/2;var l=Math.sin(lt(r));var d=Math.cos(lt(r));var u=a.x-o;var c=a.y-s;if(Math.abs(l)<.9){u+=o*-d/Math.abs(d)}if(Math.abs(d)<.9){c+=s*-l/Math.abs(l)}return new R(u,c,u+t,c+i)},containsPoint:function(e){var t=this.center;var i=this.innerRadius;var n=this.radius;var r=this.startAngle;var a=this.startAngle+this.angle;var o=e.x-t.x;var s=e.y-t.y;var l=new m(o,s);var d=this.point(r);var u=new m(d.x-t.x,d.y-t.y);var c=this.point(a);var f=new m(c.x-t.x,c.y-t.y);var h=M(o*o+s*s,g);return(u.equals(l)||Te(u,l))&&!Te(f,l)&&h>=i*i&&h<=n*n},getBBox:function(){var e=this;var t=new R(oe,oe,se,se);var i=M(this.startAngle%360);var n=M((i+this.angle)%360);var r=this.innerRadius;var a=[0,90,180,270,i,n].sort(yt);var o=a.indexOf(i);var s=a.indexOf(n);var l;if(i===n){l=a}else{if(o<s){l=a.slice(o,s+1)}else{l=[].concat(a.slice(0,s+1),a.slice(o,a.length))}}for(var d=0;d<l.length;d++){var u=e.point(l[d]);t.wrapPoint(u);t.wrapPoint(u,r)}if(!r){t.wrapPoint(this.center)}return t},expand:function(e){this.radius+=e;return this}});function yt(e,t){return e-t}var xt=kt.extend({init:function(e,t,i,n){kt.fn.init.call(this,e,0,t,i,n)},expand:function(e){return kt.fn.expand.call(this,e)},clone:function(){return new xt(this.center,this.radius,this.startAngle,this.angle)},setRadius:function(e){this.radius=e;return this}});var Ct=.001;var St=e.extend({createRing:function(e,t){var i=e.startAngle+180;var n=e.angle+i;if(e.angle>0&&i===n){n+=Ct}var r=new N.Point(e.center.x,e.center.y);var a=Math.max(e.radius,0);var o=Math.max(e.innerRadius,0);var s=new N.Arc(r,{startAngle:i,endAngle:n,radiusX:a,radiusY:a});var l=v.fromArc(s,t).close();if(o){s.radiusX=s.radiusY=o;var d=s.pointAt(n);l.lineTo(d.x,d.y);l.arc(n,i,o,o,true)}else{l.lineTo(r.x,r.y)}return l}});St.current=new St;var _=e.extend({init:function(e){this.children=[];this.options=f({},this.options,this.initUserOptions(e))},initUserOptions:function(e){return e},reflow:function(e){var t=this.children;var i;for(var n=0;n<t.length;n++){var r=t[n];r.reflow(e);i=i?i.wrap(r.box):r.box.clone()}this.box=i||e},destroy:function(){var e=this.children;if(this.animation){this.animation.destroy()}for(var t=0;t<e.length;t++){e[t].destroy()}},getRoot:function(){var e=this.parent;return e?e.getRoot():null},getSender:function(){var e=this.getService();if(e){return e.sender}},getService:function(){var e=this;while(e){if(e.chartService){return e.chartService}e=e.parent}},translateChildren:function(e,t){var i=this.children;var n=i.length;for(var r=0;r<n;r++){i[r].box.translate(e,t)}},append:function(){var e=arguments;var t=this;for(var i=0;i<arguments.length;i++){var n=e[i];t.children.push(n);n.parent=t}},renderVisual:function(){if(this.options.visible===false){return}this.createVisual();this.addVisual();this.renderChildren();this.createAnimation();this.renderComplete()},addVisual:function(){if(this.visual){this.visual.chartElement=this;if(this.parent){this.parent.appendVisual(this.visual)}}},renderChildren:function(){var e=this.children;var t=e.length;for(var i=0;i<t;i++){e[i].renderVisual()}},createVisual:function(){this.visual=new H({zIndex:this.options.zIndex,visible:ut(this.options.visible,true)})},createAnimation:function(){if(this.visual&&this.options.animation){this.animation=h.Animation.create(this.visual,this.options.animation)}},appendVisual:function(e){if(!e.chartElement){e.chartElement=this}if(e.options.noclip){this.clipRoot().visual.append(e)}else if(A(e.options.zIndex)){this.stackRoot().stackVisual(e)}else if(this.isStackRoot){this.stackVisual(e)}else if(this.visual){this.visual.append(e)}else{this.parent.appendVisual(e)}},clipRoot:function(){if(this.parent){return this.parent.clipRoot()}return this},stackRoot:function(){if(this.parent){return this.parent.stackRoot()}return this},stackVisual:function(e){var t=e.options.zIndex||0;var i=this.visual.children;var n=i.length;var r;for(r=0;r<n;r++){var a=i[r];var o=ut(a.options.zIndex,0);if(o>t){break}}this.visual.insert(r,e)},traverse:function(e){var t=this.children;var i=t.length;for(var n=0;n<i;n++){var r=t[n];e(r);if(r.traverse){r.traverse(e)}}},closest:function(e){var t=this;var i=false;while(t&&!i){i=e(t);if(!i){t=t.parent}}if(i){return t}},renderComplete:function(){},hasHighlight:function(){var e=(this.options||{}).highlight;return!(!this.createHighlight||e&&e.visible===false)},toggleHighlight:function(e,t){var i=this;var n=(this.options||{}).highlight||{};var r=n.visual;var a=this._highlight;if(!a){var o={fill:{color:s,opacity:t||.2},stroke:{color:s,width:1,opacity:t||.2}};if(r){a=this._highlight=r(d.extend(this.highlightVisualArgs(),{createVisual:function(){return i.createHighlight(o)},sender:this.getSender(),series:this.series,dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,runningTotal:this.runningTotal,total:this.total}));if(!a){return}}else{a=this._highlight=this.createHighlight(o)}if(!A(a.options.zIndex)){a.options.zIndex=ut(n.zIndex,this.options.zIndex)}this.appendVisual(a)}a.visible(e)},createGradientOverlay:function(e,t,i){var n=new v(d.extend({stroke:{color:"none"},fill:this.createGradient(i),closed:e.options.closed},t));n.segments.elements(e.segments.elements());return n},createGradient:function(e){if(this.parent){return this.parent.createGradient(e)}},supportsPointInactiveOpacity:function(){return true}});_.prototype.options={};var u=_.extend({init:function(e){_.fn.init.call(this,e);this.options.margin=l(this.options.margin);this.options.padding=l(this.options.padding)},reflow:function(e){var t=this;var i=this.options;var n=i.width;var r=i.height;var a=i.shrinkToFit;var o=n&&r;var s=i.margin;var l=i.padding;var d=i.border.width;var u;var c=function(){t.align(e,T,i.align);t.align(e,D,i.vAlign);t.paddingBox=u.clone().unpad(s).unpad(d)};var f=e.clone();if(o){f.x2=f.x1+n;f.y2=f.y1+r}if(a){f.unpad(s).unpad(d).unpad(l)}_.fn.reflow.call(this,f);if(o){u=this.box=new R(0,0,n,r)}else{u=this.box}if(a&&o){c();f=this.contentBox=this.paddingBox.clone().unpad(l)}else{f=this.contentBox=u.clone();u.pad(l).pad(d).pad(s);c()}this.translateChildren(u.x1-f.x1+s.left+d+l.left,u.y1-f.y1+s.top+d+l.top);var h=this.children;for(var p=0;p<h.length;p++){var v=h[p];v.reflow(v.box)}},align:function(e,t,i){this.box.align(e,t,i)},hasBox:function(){var e=this.options;return e.border.width||e.background},createVisual:function(){_.fn.createVisual.call(this);var e=this.options;if(e.visible&&this.hasBox()){this.visual.append(v.fromRect(this.paddingBox.toRect(),this.visualStyle()))}},visualStyle:function(){var e=this.options;var t=e.border||{};return{stroke:{width:t.width,color:t.color,opacity:ut(t.opacity,e.opacity),dashType:t.dashType},fill:{color:e.background,opacity:e.opacity},cursor:e.cursor}}});n(u,{align:x,vAlign:S,margin:{},padding:{},border:{color:t,width:0},background:"",shrinkToFit:false,width:0,height:0,visible:true});var Tt=u.extend({init:function(e,t){u.fn.init.call(this,e);this.pointData=t},getElement:function(){var e=this;var t=e.options;var i=e.paddingBox;var n=t.type;var r=t.rotation;var a=i.center();var o=i.width()/2;if(!t.visible||!this.hasBox()){return null}var s=this.visualStyle();var l;if(n===Y){l=new h.Circle(new V([M(i.x1+o,g),M(i.y1+i.height()/2,g)],o),s)}else if(n===me){l=v.fromPoints([[i.x1+o,i.y1],[i.x1,i.y2],[i.x2,i.y2]],s).close()}else if(n===Q){l=new h.MultiPath(s);l.moveTo(i.x1,i.y1).lineTo(i.x2,i.y2);l.moveTo(i.x1,i.y2).lineTo(i.x2,i.y1)}else{l=v.fromRect(i.toRect(),s)}if(r){l.transform(W().rotate(-r,[a.x,a.y]))}l.options.zIndex=t.zIndex;return l},createElement:function(){var e=this;var t=this.options.visual;var i=this.pointData||{};var n;if(t){n=t({value:i.value,dataItem:i.dataItem,sender:this.getSender(),series:i.series,category:i.category,rect:this.paddingBox.toRect(),options:this.visualOptions(),createVisual:function(){return e.getElement()}})}else{n=this.getElement()}return n},visualOptions:function(){var e=this.options;return{background:e.background,border:e.border,margin:e.margin,padding:e.padding,type:e.type,size:e.width,visible:e.visible}},createVisual:function(){this.visual=this.createElement()}});n(Tt,{type:Y,align:w,vAlign:w});var Dt="linear";var At="radial";var Et={glass:{type:Dt,rotation:0,stops:[{offset:0,color:s,opacity:0},{offset:.25,color:s,opacity:.3},{offset:1,color:s,opacity:0}]},sharpBevel:{type:At,stops:[{offset:0,color:s,opacity:.55},{offset:.65,color:s,opacity:0},{offset:.95,color:s,opacity:.25}]},roundedBevel:{type:At,stops:[{offset:.33,color:s,opacity:.06},{offset:.83,color:s,opacity:.2},{offset:.95,color:s,opacity:0}]},roundedGlass:{type:At,supportVML:false,stops:[{offset:0,color:s,opacity:0},{offset:.5,color:s,opacity:.3},{offset:.99,color:s,opacity:0}]},sharpGlass:{type:At,supportVML:false,stops:[{offset:0,color:s,opacity:.2},{offset:.15,color:s,opacity:.15},{offset:.17,color:s,opacity:.35},{offset:.85,color:s,opacity:.05},{offset:.87,color:s,opacity:.15},{offset:.99,color:s,opacity:0}]},bubbleShadow:{type:At,center:[.5,.5],radius:.5}};function It(e,t){if(e.x1===t.x1&&e.y1===t.y1&&e.x2===t.x2&&e.y2===t.y2){return t}var i=Math.min(e.x1,t.x1);var n=Math.max(e.x1,t.x1);var r=Math.min(e.x2,t.x2);var a=Math.max(e.x2,t.x2);var o=Math.min(e.y1,t.y1);var s=Math.max(e.y1,t.y1);var l=Math.min(e.y2,t.y2);var d=Math.max(e.y2,t.y2);var u=[];u[0]=new R(n,o,r,s);u[1]=new R(i,s,n,l);u[2]=new R(r,s,a,l);u[3]=new R(n,l,r,d);if(e.x1===i&&e.y1===o||t.x1===i&&t.y1===o){u[4]=new R(i,o,n,s);u[5]=new R(r,l,a,d)}else{u[4]=new R(r,o,a,s);u[5]=new R(i,l,n,d)}return qe(u,function(e){return e.height()>0&&e.width()>0})[0]}var Mt=_.extend({init:function(e){_.fn.init.call(this,e);var t=this.options;t.width=parseInt(t.width,10);t.height=parseInt(t.height,10);this.gradients={}},reflow:function(){var e=this;var t=e.options;var i=e.children;var n=new R(0,0,t.width,t.height);this.box=n.unpad(t.margin);for(var r=0;r<i.length;r++){i[r].reflow(n);n=It(n,i[r].box)||new R}},createVisual:function(){this.visual=new H;this.createBackground()},createBackground:function(){var e=this.options;var t=e.border||{};var i=this.box.clone().pad(e.margin).unpad(t.width);var n=v.fromRect(i.toRect(),{stroke:{color:t.width?t.color:"",width:t.width,dashType:t.dashType},fill:{color:e.background,opacity:e.opacity},zIndex:-10});this.visual.append(n)},getRoot:function(){return this},createGradient:function(e){var t=this.gradients;var i=st(e);var n=Et[e.gradient];var r;if(t[i]){r=t[i]}else{var a=d.extend({},n,e);if(n.type==="linear"){r=new h.LinearGradient(a)}else{if(e.innerRadius){a.stops=Rt(a)}r=new h.RadialGradient(a);r.supportVML=n.supportVML!==false}t[i]=r}return r},cleanGradients:function(){var e=this.gradients;for(var t in e){e[t]._observers=[]}},size:function(){var e=this.options;return new R(0,0,e.width,e.height)}});n(Mt,{width:ee,height:J,background:s,border:{color:t,width:0},margin:l(5),zIndex:-2});function Rt(e){var t=e.stops;var i=e.innerRadius/e.radius*100;var n=t.length;var r=[];for(var a=0;a<n;a++){var o=d.extend({},t[a]);o.offset=(o.offset*(100-i)+i)/100;r.push(o)}return r}var Ft=_.extend({init:function(e){_.fn.init.call(this,e);this._initDirection()},_initDirection:function(){var e=this.options;if(e.vertical){this.groupAxis=T;this.elementAxis=D;this.groupSizeField=_e;this.elementSizeField=ne;this.groupSpacing=e.spacing;this.elementSpacing=e.vSpacing}else{this.groupAxis=D;this.elementAxis=T;this.groupSizeField=ne;this.elementSizeField=_e;this.groupSpacing=e.vSpacing;this.elementSpacing=e.spacing}},reflow:function(e){this.box=e.clone();this.reflowChildren()},reflowChildren:function(){var e=this;var t=this;var i=t.box;var n=t.elementAxis;var r=t.groupAxis;var a=t.elementSizeField;var o=t.groupSizeField;var s=this.groupOptions();var l=s.groups;var d=s.groupsSize;var u=s.maxGroupElementsSize;var c=l.length;var f=i[r+1]+this.alignStart(d,i[o]());if(c){var h=f;for(var p=0;p<c;p++){var v=l[p];var m=v.groupElements;var g=i[n+1];var _=m.length;for(var b=0;b<_;b++){var w=m[b];var k=e.elementSize(w);var y=h+e.alignStart(k[o],v.groupSize);var x=new R;x[r+1]=y;x[r+2]=y+k[o];x[n+1]=g;x[n+2]=g+k[a];w.reflow(x);g+=k[a]+e.elementSpacing}h+=v.groupSize+e.groupSpacing}i[r+1]=f;i[r+2]=f+d;i[n+2]=i[n+1]+u}},alignStart:function(e,t){var i=0;var n=this.options.align;if(n===C||n===k){i=t-e}else if(n===w){i=(t-e)/2}return i},groupOptions:function(){var e=this;var t=this;var i=t.box;var n=t.children;var r=t.elementSizeField;var a=t.groupSizeField;var o=t.elementSpacing;var s=t.groupSpacing;var l=M(i[r]());var d=n.length;var u=[];var c=0;var f=0;var h=0;var p=0;var v=[];for(var m=0;m<d;m++){var g=n[m];if(!g.box){g.reflow(i)}var _=e.elementSize(g);if(e.options.wrap&&M(f+o+_[r])>l){u.push({groupElements:v,groupSize:c,groupElementsSize:f});p=Math.max(p,f);h+=s+c;c=0;f=0;v=[]}c=Math.max(c,_[a]);if(f>0){f+=o}f+=_[r];v.push(g)}u.push({groupElements:v,groupSize:c,groupElementsSize:f});p=Math.max(p,f);h+=c;return{groups:u,groupsSize:h,maxGroupElementsSize:p}},elementSize:function(e){return{width:e.box.width(),height:e.box.height()}},createVisual:function(){}});n(Ft,{vertical:true,wrap:true,vSpacing:0,spacing:0});var Pt=h.Text;var zt=_.extend({init:function(e,t){_.fn.init.call(this,t);this.content=e;this.reflow(new R)},reflow:function(e){var t=this.options;var i=t.size=a.measureText(this.content,{font:t.font});this.baseline=i.baseline;this.box=new R(e.x1,e.y1,e.x1+i.width,e.y1+i.height)},createVisual:function(){var e=this.options;var t=e.font;var i=e.color;var n=e.opacity;var r=e.cursor;this.visual=new Pt(this.content,this.box.toRect().topLeft(),{font:t,fill:{color:i,opacity:n},cursor:r})}});n(zt,{font:Z,color:t});function Bt(e){var t=e.origin;var i=e.bottomRight();return new R(t.x,t.y,i.x,i.y)}var Lt=/\n/m;var Ht=u.extend({init:function(e,t,i){u.fn.init.call(this,t);this.content=e;this.data=i;this._initContainer();if(this.options._autoReflow!==false){this.reflow(new R)}},_initContainer:function(){var e=this.options;var t=String(this.content).split(Lt);var i=new Ft({vertical:true,align:e.align,wrap:false});var n=f({},e,{opacity:1,animation:null});this.container=i;this.append(i);for(var r=0;r<t.length;r++){var a=new zt(t[r].trim(),n);i.append(a)}},reflow:function(e){var t=this.options;var i=t.visual;this.container.options.align=t.align;if(i&&!this._boxReflow){var n=e;if(!n.hasSize()){this._boxReflow=true;this.reflow(n);this._boxReflow=false;n=this.box}var r=this.visual=i(this.visualContext(n));if(r){n=Bt(r.clippedBBox()||new O);r.options.zIndex=t.zIndex}this.box=this.contentBox=this.paddingBox=n}else{u.fn.reflow.call(this,e);if(t.rotation){var a=l(t.margin);var o=this.box.unpad(a);this.targetBox=e;this.normalBox=o.clone();o=this.rotate();o.translate(a.left-a.right,a.top-a.bottom);this.rotatedBox=o.clone();o.pad(a)}}},createVisual:function(){var e=this.options;this.visual=new H({transform:this.rotationTransform(),zIndex:e.zIndex,noclip:e.noclip});if(this.hasBox()){var t=v.fromRect(this.paddingBox.toRect(),this.visualStyle());this.visual.append(t)}},renderVisual:function(){if(!this.options.visible){return}if(this.options.visual){var e=this.visual;if(e&&!A(e.options.noclip)){e.options.noclip=this.options.noclip}this.addVisual();this.createAnimation()}else{u.fn.renderVisual.call(this)}},visualContext:function(e){var t=this;var i={text:this.content,rect:e.toRect(),sender:this.getSender(),options:this.options,createVisual:function(){t._boxReflow=true;t.reflow(e);t._boxReflow=false;return t.getDefaultVisual()}};if(this.data){d.extend(i,this.data)}return i},getDefaultVisual:function(){this.createVisual();this.renderChildren();var e=this.visual;delete this.visual;return e},rotate:function(){var e=this.options;this.box.rotate(e.rotation);this.align(this.targetBox,T,e.align);this.align(this.targetBox,D,e.vAlign);return this.box},rotationTransform:function(){var e=this.options.rotation;if(!e){return null}var t=this.normalBox.center();var i=t.x;var n=t.y;var r=this.rotatedBox.center();return W().translate(r.x-i,r.y-n).rotate(e,[i,n])}});var Nt=_.extend({init:function(e){_.fn.init.call(this,e);this.append(new Ht(this.options.text,d.extend({},this.options,{vAlign:this.options.position})))},reflow:function(e){_.fn.reflow.call(this,e);this.box.snapTo(e,T)}});Nt.buildTitle=function(e,t,i){var n=e;if(typeof e==="string"){n={text:e}}n=d.extend({visible:true},i,n);var r;if(n&&n.visible&&n.text){r=new Nt(n);t.append(r)}return r};n(Nt,{color:t,position:S,align:w,margin:l(5),padding:l(5)});var Ot=Ht.extend({init:function(e,t,i,n,r){Ht.fn.init.call(this,t,r);this.text=t;this.value=e;this.index=i;this.dataItem=n;this.reflow(new R)},visualContext:function(e){var t=Ht.fn.visualContext.call(this,e);t.value=this.value;t.dataItem=this.dataItem;t.format=this.options.format;t.culture=this.options.culture;return t},click:function(e,t){e.trigger(K,{element:at(t),value:this.value,text:this.text,index:this.index,dataItem:this.dataItem,axis:this.parent.options})},rotate:function(){if(this.options.alignRotation!==w){var e=this.normalBox.toRect();var t=this.rotationTransform();this.box=Bt(e.bbox(t.matrix()))}else{Ht.fn.rotate.call(this)}return this.box},rotationTransform:function(){var e=this.options;var t=e.rotation;if(!t){return null}if(e.alignRotation===w){return Ht.fn.rotationTransform.call(this)}var i=W().rotate(t).matrix();var n=this.normalBox.toRect();var r=this.targetBox.toRect();var a=e.rotationOrigin||S;var o=a===S||a===k?T:D;var s=a===S||a===k?D:T;var l=a===S||a===x?r.origin:r.bottomRight();var d=n.topLeft().transformCopy(i);var u=n.topRight().transformCopy(i);var c=n.bottomRight().transformCopy(i);var f=n.bottomLeft().transformCopy(i);var h=O.fromPoints(d,u,c,f);var p={};p[s]=r.origin[s]-h.origin[s];var v=Math.abs(d[s]+p[s]-l[s]);var m=Math.abs(u[s]+p[s]-l[s]);var g,_;if(M(v,y)===M(m,y)){g=d;_=u}else if(m<v){g=u;_=c}else{g=d;_=f}var b=g[o]+(_[o]-g[o])/2;p[o]=r.center()[o]-b;return W().translate(p.x,p.y).rotate(t)}});n(Ot,{_autoReflow:false});var Vt=7;var Wt="#fff";var Ut=u.extend({init:function(e,t,i){u.fn.init.call(this,t);this.fields=e;this.chartService=i;this.render()},hide:function(){this.options.visible=false},show:function(){this.options.visible=true},render:function(){var e=this;var t=this.options;if(t.visible){var i=t.label;var n=t.icon;var r=new R;var a=function(){return e};var o=n.size;var s=this.fields.text;var l,d;if(A(i)&&i.visible){var u=Ge(i);if(u){s=u(this.fields)}else if(i.format){s=this.chartService.format.auto(i.format,s)}if(!i.color){i.color=i.position===ae?Wt:n.background}this.label=new Ht(s,f({},i));this.label.aliasFor=a;if(i.position===ae&&!A(o)){if(n.type===Y){o=Math.max(this.label.box.width(),this.label.box.height())}else{l=this.label.box.width();d=this.label.box.height()}r.wrap(this.label.box)}}n.width=l||o||Vt;n.height=d||o||Vt;var c=new Tt(f({},n));c.aliasFor=a;this.marker=c;this.append(c);if(this.label){this.append(this.label)}c.reflow(new R);this.wrapperBox=r.wrap(c.box)}},reflow:function(e){var t=this;var i=t.options;var n=t.label;var r=t.marker;var a=t.wrapperBox;var o=e.center();var s=i.line.length;var l=i.position;if(i.visible){var d,u,c;if(p(l,[x,C])){if(l===x){c=a.alignTo(e,l).translate(-s,e.center().y-a.center().y);if(i.line.visible){d=[e.x1,o.y];this.linePoints=[d,[c.x2,o.y]];u=c.clone().wrapPoint(d)}}else{c=a.alignTo(e,l).translate(s,e.center().y-a.center().y);if(i.line.visible){d=[e.x2,o.y];this.linePoints=[d,[c.x1,o.y]];u=c.clone().wrapPoint(d)}}}else{if(l===k){c=a.alignTo(e,l).translate(e.center().x-a.center().x,s);if(i.line.visible){d=[o.x,e.y2];this.linePoints=[d,[o.x,c.y1]];u=c.clone().wrapPoint(d)}}else{c=a.alignTo(e,l).translate(e.center().x-a.center().x,-s);if(i.line.visible){d=[o.x,e.y1];this.linePoints=[d,[o.x,c.y2]];u=c.clone().wrapPoint(d)}}}if(r){r.reflow(c)}if(n){n.reflow(c);if(r){if(i.label.position===he){n.box.alignTo(r.box,l)}n.reflow(n.box)}}this.contentBox=c;this.targetBox=e;this.box=u||c}},createVisual:function(){u.fn.createVisual.call(this);this.visual.options.noclip=this.options.noclip;if(this.options.visible){this.createLine()}},renderVisual:function(){var t=this;var e=this.options;var i=e.visual;if(e.visible&&i){this.visual=i(d.extend(this.fields,{sender:this.getSender(),rect:this.targetBox.toRect(),options:{background:e.background,border:e.background,icon:e.icon,label:e.label,line:e.line,position:e.position,visible:e.visible},createVisual:function(){t.createVisual();t.renderChildren();var e=t.visual;delete t.visual;return e}}));this.addVisual()}else{u.fn.renderVisual.call(this)}},createLine:function(){var e=this.options.line;if(this.linePoints){var t=v.fromPoints(this.linePoints,{stroke:{color:e.color,width:e.width,dashType:e.dashType}});Se(t);this.visual.append(t)}},click:function(e,t){var i=this.eventArgs(t);if(!e.trigger(de,i)){t.preventDefault()}},over:function(e,t){var i=this.eventArgs(t);if(!e.trigger(ue,i)){t.preventDefault()}},out:function(e,t){var i=this.eventArgs(t);e.trigger(ce,i)},eventArgs:function(e){var t=this.options;return d.extend(this.fields,{element:at(e),text:A(t.label)?t.label.text:"",visual:this.visual})}});n(Ut,{icon:{visible:true,type:Y},label:{position:ae,visible:true,align:w,vAlign:w},line:{visible:true},visible:true,position:S,zIndex:2});function jt(e,t){var i=e.tickX;var n=e.tickY;var r=e.position;var a=new v({stroke:{width:t.width,color:t.color}});if(e.vertical){a.moveTo(i,r).lineTo(i+t.size,r)}else{a.moveTo(r,n).lineTo(r,n+t.size)}Se(a);return a}function Gt(e,t){var i=e.lineStart;var n=e.lineEnd;var r=e.position;var a=new v({stroke:{width:t.width,color:t.color,dashType:t.dashType}});if(e.vertical){a.moveTo(i,r).lineTo(n,r)}else{a.moveTo(r,i).lineTo(r,n)}Se(a);return a}var c=_.extend({init:function(e,t){if(t===void 0){t=new Ne}_.fn.init.call(this,e);this.chartService=t;if(!this.options.visible){this.options=f({},this.options,{labels:{visible:false},line:{visible:false},margin:0,majorTickSize:0,minorTickSize:0})}this.options.minorTicks=f({},{color:this.options.line.color,width:this.options.line.width,visible:this.options.minorTickType!==le},this.options.minorTicks,{size:this.options.minorTickSize,align:this.options.minorTickType});this.options.majorTicks=f({},{color:this.options.line.color,width:this.options.line.width,visible:this.options.majorTickType!==le},this.options.majorTicks,{size:this.options.majorTickSize,align:this.options.majorTickType});this.initFields();if(!this.options._deferLabels){this.createLabels()}this.createTitle();this.createNotes()},initFields:function(){},labelsRange:function(){return{min:this.options.labels.skip,max:this.labelsCount()}},createLabels:function(){var e=this;var t=this.options;var i=t.vertical?C:w;var n=f({},t.labels,{align:i,zIndex:t.zIndex});var r=Math.max(1,n.step);this.clearLabels();if(n.visible){var a=this.labelsRange();var o=n.rotation;if(Ee(o)){n.alignRotation=o.align;n.rotation=o.angle}if(n.rotation==="auto"){n.rotation=0;t.autoRotateLabels=true}for(var s=a.min;s<a.max;s+=r){var l=e.createAxisLabel(s,n);if(l){e.append(l);e.labels.push(l)}}}},clearLabels:function(){this.children=qe(this.children,function(e){return!(e instanceof Ot)});this.labels=[]},clearTitle:function(){var t=this;if(this.title){this.children=qe(this.children,function(e){return e!==t.title});this.title=undefined}},clear:function(){this.clearLabels();this.clearTitle()},lineBox:function(){var e=this;var t=e.options;var i=e.box;var n=t.vertical;var r=t.labels.mirror;var a=r?i.x1:i.x2;var o=r?i.y2:i.y1;var s=t.line.width||0;return n?new R(a,i.y1,a,i.y2-s):new R(i.x1,o,i.x2-s,o)},createTitle:function(){var e=this.options;var t=f({rotation:e.vertical?-90:0,text:"",zIndex:1,visualSize:true},e.title);if(t.visible&&t.text){var i=new Ht(t.text,t);this.append(i);this.title=i}},createNotes:function(){var e=this;var t=this.options;var i=t.notes;var n=i.data||[];this.notes=[];for(var r=0;r<n.length;r++){var a=f({},i,n[r]);a.value=e.parseNoteValue(a.value);var o=new Ut({value:a.value,text:a.label.text,dataItem:a},a,e.chartService);if(o.options.visible){if(A(o.options.position)){if(t.vertical&&!p(o.options.position,[x,C])){o.options.position=t.reverse?x:C}else if(!t.vertical&&!p(o.options.position,[S,k])){o.options.position=t.reverse?k:S}}else{if(t.vertical){o.options.position=t.reverse?x:C}else{o.options.position=t.reverse?k:S}}e.append(o);e.notes.push(o)}}},parseNoteValue:function(e){return e},renderVisual:function(){_.fn.renderVisual.call(this);this.createPlotBands()},createVisual:function(){_.fn.createVisual.call(this);this.createBackground();this.createLine()},gridLinesVisual:function(){var e=this._gridLines;if(!e){e=this._gridLines=new H({zIndex:-2});this.appendVisual(this._gridLines)}return e},createTicks:function(o){var e=this.options;var s=this.lineBox();var l=e.labels.mirror;var t=e.majorTicks.visible?e.majorUnit:0;var d={vertical:e.vertical};function i(e,t,i){var n=e.length;var r=Math.max(1,t.step);if(t.visible){for(var a=t.skip;a<n;a+=r){if(A(i)&&a%i===0){continue}d.tickX=l?s.x2:s.x2-t.size;d.tickY=l?s.y1-t.size:s.y1;d.position=e[a];o.append(jt(d,t))}}}i(this.getMajorTickPositions(),e.majorTicks);i(this.getMinorTickPositions(),e.minorTicks,t/e.minorUnit)},createLine:function(){var e=this.options;var t=e.line;var i=this.lineBox();if(t.width>0&&t.visible){var n=new v({stroke:{width:t.width,color:t.color,dashType:t.dashType}});n.moveTo(i.x1,i.y1).lineTo(i.x2,i.y2);if(e._alignLines){Se(n)}var r=this._lineGroup=new H;r.append(n);this.visual.append(r);this.createTicks(r)}},getActualTickSize:function(){var e=this.options;var t=0;if(e.majorTicks.visible&&e.minorTicks.visible){t=Math.max(e.majorTicks.size,e.minorTicks.size)}else if(e.majorTicks.visible){t=e.majorTicks.size}else if(e.minorTicks.visible){t=e.minorTicks.size}return t},createBackground:function(){var e=this;var t=e.options;var i=e.box;var n=t.background;if(n){this._backgroundPath=v.fromRect(i.toRect(),{fill:{color:n},stroke:null});this.visual.append(this._backgroundPath)}},createPlotBands:function(){var t=this;var e=this.options;var i=e.plotBands||[];var n=e.vertical;var r=this.plotArea;if(i.length===0){return}var a=this._plotbandGroup=new H({zIndex:-1});var o=qe(this.pane.axes,function(e){return e.options.vertical!==t.options.vertical})[0];for(var s=0;s<i.length;s++){var l=i[s];var d=void 0,u=void 0;var c=l.label;var f=void 0;if(n){d=(o||r.axisX).lineBox();u=t.getSlot(l.from,l.to,true)}else{d=t.getSlot(l.from,l.to,true);u=(o||r.axisY).lineBox()}if(c){c.vAlign=c.position||x;f=t.createPlotBandLabel(c,l,new R(d.x1,u.y1,d.x2,u.y2))}if(d.width()!==0&&u.height()!==0){var h=new O([d.x1,u.y1],[d.width(),u.height()]);var p=v.fromRect(h,{fill:{color:l.color,opacity:l.opacity},stroke:null});a.append(p);if(f){a.append(f)}}}this.appendVisual(a)},createPlotBandLabel:function(e,t,i){if(e.visible===false){return null}var n=e.text;var r;if(A(e)&&e.visible){var a=Ge(e);if(a){n=a({text:n,item:t})}else if(e.format){n=this.chartService.format.auto(e.format,n)}if(!e.color){e.color=this.options.labels.color}}r=new Ht(n,e);r.reflow(i);r.renderVisual();return r.visual},createGridLines:function(e){var t=this.options;var i=t.minorGridLines;var n=t.majorGridLines;var r=t.minorUnit;var a=t.vertical;var s=e.options.line.visible;var o=n.visible?t.majorUnit:0;var l=e.lineBox();var d=l[a?"y1":"x1"];var u={lineStart:l[a?"x1":"y1"],lineEnd:l[a?"x2":"y2"],vertical:a};var c=[];var f=this.gridLinesVisual();function h(e,t,i){var n=e.length;var r=Math.max(1,t.step);if(t.visible){for(var a=t.skip;a<n;a+=r){var o=M(e[a]);if(!p(o,c)){if(a%i!==0&&(!s||d!==o)){u.position=o;f.append(Gt(u,t));c.push(o)}}}}}h(this.getMajorTickPositions(),n);h(this.getMinorTickPositions(),i,o/r);return f.children},reflow:function(e){var t=this;var i=t.options;var n=t.labels;var r=t.title;var a=i.vertical;var o=n.length;var s=a?_e:ne;var l=r?r.box[s]():0;var d=this.getActualTickSize()+i.margin+l;var u=(this.getRoot()||{}).box||e;var c=u[s]();var f=0;for(var h=0;h<o;h++){var p=n[h].box[s]();if(p+d<=c){f=Math.max(f,p)}}if(a){this.box=new R(e.x1,e.y1,e.x1+f+d,e.y2)}else{this.box=new R(e.x1,e.y1,e.x2,e.y1+f+d)}this.arrangeTitle();this.arrangeLabels();this.arrangeNotes()},getLabelsTickPositions:function(){return this.getMajorTickPositions()},labelTickIndex:function(e){return e.index},arrangeLabels:function(){var e=this;var t=this;var i=t.options;var n=t.labels;var r=this.labelsBetweenTicks();var a=i.vertical;var o=this.lineBox();var s=i.labels.mirror;var l=this.getLabelsTickPositions();var d=this.getActualTickSize()+i.margin;for(var u=0;u<n.length;u++){var c=n[u];var f=e.labelTickIndex(c);var h=a?c.box.height():c.box.width();var p=l[f]-h/2;var v=void 0,m=void 0,g=void 0;if(a){if(r){m=l[f];g=l[f+1];var _=m+(g-m)/2;p=_-h/2}var b=o.x2;if(s){b+=d;c.options.rotationOrigin=x}else{b-=d+c.box.width();c.options.rotationOrigin=C}v=c.box.move(b,p)}else{if(r){m=l[f];g=l[f+1]}else{m=p;g=p+h}var w=o.y1;if(s){w-=d+c.box.height();c.options.rotationOrigin=k}else{w+=d;c.options.rotationOrigin=S}v=new R(m,w,g,w+c.box.height())}c.reflow(v)}},autoRotateLabels:function(){if(this.options.autoRotateLabels&&!this.options.vertical){var e=this.getMajorTickPositions();var t=this.labels;var i;for(var n=0;n<t.length;n++){var r=Math.abs(e[n+1]-e[n]);var a=t[n].box;if(a.width()>r){if(a.height()>r){i=-90;break}i=-45}}if(i){for(var o=0;o<t.length;o++){t[o].options.rotation=i;t[o].reflow(new R)}return true}}},arrangeTitle:function(){var e=this;var t=e.options;var i=e.title;var n=t.labels.mirror;var r=t.vertical;if(i){if(r){i.options.align=n?C:x;i.options.vAlign=i.options.position}else{i.options.align=i.options.position;i.options.vAlign=n?S:k}i.reflow(this.box)}},arrangeNotes:function(){var e=this;for(var t=0;t<this.notes.length;t++){var i=e.notes[t];var n=i.options.value;var r=void 0;if(A(n)){if(e.shouldRenderNote(n)){i.show()}else{i.hide()}r=e.noteSlot(n)}else{i.hide()}i.reflow(r||e.lineBox())}},noteSlot:function(e){return this.getSlot(e)},alignTo:function(e){var t=e.lineBox();var i=this.options.vertical;var n=i?D:T;this.box.snapTo(t,n);if(i){this.box.shrink(0,this.lineBox().height()-t.height())}else{this.box.shrink(this.lineBox().width()-t.width(),0)}this.box[n+1]-=this.lineBox()[n+1]-t[n+1];this.box[n+2]-=this.lineBox()[n+2]-t[n+2]},axisLabelText:function(e,t,i){var n=Ge(i);var r=e;if(n){r=n({value:e,dataItem:t,format:i.format,culture:i.culture})}else if(i.format){r=this.chartService.format.localeAuto(i.format,[e],i.culture)}return r},slot:function(e,t,i){var n=this.getSlot(e,t,i);if(n){return n.toRect()}},contentBox:function(){var e=this.box.clone();var t=this.labels;if(t.length){var i=this.options.vertical?D:T;if(this.chartService.isPannable(i)){var n=this.maxLabelOffset();e[i+1]-=n.start;e[i+2]+=n.end}else{if(t[0].options.visible){e.wrap(t[0].box)}var r=t[t.length-1];if(r.options.visible){e.wrap(r.box)}}}return e},maxLabelOffset:function(){var e=this;var t=this.options;var i=t.vertical;var n=t.reverse;var r=this.labelsBetweenTicks();var a=this.getLabelsTickPositions();var o=i?D:T;var s=this.labels;var l=n?1:0;var d=n?0:1;var u=0;var c=0;for(var f=0;f<s.length;f++){var h=s[f];var p=e.labelTickIndex(h);var v=void 0,m=void 0;if(r){v=a[p+l];m=a[p+d]}else{v=m=a[p]}u=Math.max(u,v-h.box[o+1]);c=Math.max(c,h.box[o+2]-m)}return{start:u,end:c}},limitRange:function(e,t,i,n,r){var a=this.options;if(e<i&&r<0&&(!A(a.min)||a.min<=i)||n<t&&r>0&&(!A(a.max)||n<=a.max)){return null}if(t<i&&r>0||n<e&&r<0){return{min:e,max:t}}var o=t-e;var s=e;var l=t;if(e<i&&r<0){s=I(e,i,n);l=I(e+o,i+o,n)}else if(t>n&&r>0){l=I(t,i,n);s=I(t-o,i,n-o)}return{min:s,max:l}},valueRange:function(){return{min:this.seriesMin,max:this.seriesMax}},labelsBetweenTicks:function(){return!this.options.justified},prepareUserOptions:function(){}});n(c,{labels:{visible:true,rotation:0,mirror:false,step:1,skip:0},line:{width:1,color:t,visible:true},title:{visible:true,position:w},majorTicks:{align:he,size:4,skip:0,step:1},minorTicks:{align:he,size:3,skip:0,step:1},axisCrossingValue:0,majorTickType:he,minorTickType:le,majorGridLines:{skip:0,step:1},minorGridLines:{visible:false,width:1,color:t,skip:0,step:1},margin:5,visible:true,reverse:false,justified:true,notes:{label:{text:""}},_alignLines:true,_deferLabels:false});var qt="milliseconds";var $t="seconds";var Kt="minutes";var Yt="hours";var Qt="days";var Xt="weeks";var Zt="months";var Jt="years";var ei=1;var ti=1e3;var ii=60*ti;var ni=60*ii;var ri=24*ni;var ai=7*ri;var oi=31*ri;var si=365*ri;var li={years:si,months:oi,weeks:ai,days:ri,hours:ni,minutes:ii,seconds:ti,milliseconds:ei};function di(e,t){var i=e.getTime()-t;var n=e.getTimezoneOffset()-t.getTimezoneOffset();return i-n*ii}function F(e,t){return new Date(e.getTime()+t)}function b(e){var t;if(e instanceof Date){t=e}else if(e){t=new Date(e)}return t}function ui(e,t){if(t===void 0){t=0}var i=0;var n=e.getDay();if(!isNaN(n)){while(n!==t){if(n===0){n=6}else{n--}i++}}return F(e,-i*ri)}function ci(e,t){if(t===0&&e.getHours()===23){e.setHours(e.getHours()+2);return true}return false}function fi(e,t){var i=new Date(e);i.setMinutes(0,0,0);var n=(e.getTimezoneOffset()-i.getTimezoneOffset())*ii;return F(i,n+t*ni)}function P(e,t,i,n){var r=e;if(e){var a=b(e);var o=a.getHours();if(i===Jt){r=new Date(a.getFullYear()+t,0,1);ci(r,0)}else if(i===Zt){r=new Date(a.getFullYear(),a.getMonth()+t,1);ci(r,o)}else if(i===Xt){r=P(ui(a,n),t*7,Qt);ci(r,o)}else if(i===Qt){r=new Date(a.getFullYear(),a.getMonth(),a.getDate()+t);ci(r,o)}else if(i===Yt){r=fi(a,t)}else if(i===Kt){r=F(a,t*ii);if(r.getSeconds()>0){r.setSeconds(0)}}else if(i===$t){r=F(a,t*ti)}else if(i===qt){r=F(a,t)}if(i!==qt&&r.getMilliseconds()>0){r.setMilliseconds(0)}}return r}function hi(e,t,i){return P(b(e),0,t,i)}function pi(e,t,i){var n=b(e);if(n&&hi(n,t,i).getTime()===n.getTime()){return n}return P(n,1,t,i)}function vi(e,t){if(e&&t){return e.getTime()-t.getTime()}return-1}function z(e,t){return e.getTime()-t}function B(e){if(ke(e)){var t=[];for(var i=0;i<e.length;i++){t.push(B(e[i]))}return t}else if(e){return b(e).getTime()}}function mi(e,t){if(e&&t){return B(e)===B(t)}return e===t}function gi(e,t,i){return di(e,t)/li[i]}function _i(e,t,i,n){var r=b(e);var a=b(t);var o;if(i===Zt){o=r.getMonth()-a.getMonth()+(r.getFullYear()-a.getFullYear())*12+gi(r,new Date(r.getFullYear(),r.getMonth()),Qt)/new Date(r.getFullYear(),r.getMonth()+1,0).getDate()}else if(i===Jt){o=r.getFullYear()-a.getFullYear()+_i(r,new Date(r.getFullYear(),0),Zt,1)/12}else if(i===Qt||i===Xt){o=gi(r,a,i)}else{o=z(r,t)/li[i]}return o/n}function bi(e,t,i){var n;if(i===Jt){n=t.getFullYear()-e.getFullYear()}else if(i===Zt){n=bi(e,t,Jt)*12+t.getMonth()-e.getMonth()}else if(i===Qt){n=Math.floor(z(t,e)/ri)}else{n=Math.floor(z(t,e)/li[i])}return n}function wi(e,t){var i=0;var n=t.length-1;var r;while(i<=n){r=Math.floor((i+n)/2);var a=t[r];if(a<e){i=r+1;continue}if(a>e){n=r-1;continue}while(mi(t[r-1],e)){r--}return r}if(t[r]<=e){return r}return r-1}function ki(e,t){var i;if(De(t)){i=e.parseDate(t)||b(t)}else{i=b(t)}return i}function yi(e,t){if(ke(t)){var i=[];for(var n=0;n<t.length;n++){i.push(ki(e,t[n]))}return i}return ki(e,t)}function xi(e,t){if(o(e.weekStartDay)){return e.weekStartDay}if(t&&t.firstDay){return t.firstDay()}return 0}var Ci=.01;function Si(e,t){if(e instanceof Date){var i=t.length;for(var n=0;n<i;n++){if(mi(t[n],e)){return n}}return-1}return t.indexOf(e)}var Ti=c.extend({initFields:function(){this._ticks={}},categoriesHash:function(){return""},clone:function(){var e=new Ti(d.extend({},this.options,{categories:this.options.srcCategories}),this.chartService);e.createLabels();return e},initUserOptions:function(e){var t=e.categories||[];var i=A(e.min);var n=A(e.max);e.srcCategories=e.categories=t;if((i||n)&&t.length){var r=i?Math.floor(e.min):0;var a;if(n){a=e.justified?Math.floor(e.max)+1:Math.ceil(e.max)}else{a=t.length}e.categories=e.categories.slice(r,a)}return e},rangeIndices:function(){var e=this.options;var t=e.categories.length||1;var i=o(e.min)?e.min%1:0;var n;if(o(e.max)&&e.max%1!==0&&e.max<this.totalRange().max){n=t-(1-e.max%1)}else{n=t-(e.justified?1:0)}return{min:i,max:n}},totalRangeIndices:function(e){var t=this.options;var i=o(t.min)?t.min:0;var n;if(o(t.max)){n=t.max}else if(o(t.min)){n=i+t.categories.length}else{n=this.totalRange().max||1}if(e){var r=this.totalRange();i=I(i,0,r.max);n=I(n,0,r.max)}return{min:i,max:n}},range:function(){var e=this.options;var t=o(e.min)?e.min:0;var i=o(e.max)?e.max:this.totalRange().max;return{min:t,max:i}},roundedRange:function(){return this.range()},totalRange:function(){var e=this.options;return{min:0,max:Math.max(this._seriesMax||0,e.srcCategories.length)-(e.justified?1:0)}},scaleOptions:function(){var e=this.rangeIndices();var t=e.min;var i=e.max;var n=this.lineBox();var r=this.options.vertical?n.height():n.width();var a=r/(i-t||1);return{scale:a*(this.options.reverse?-1:1),box:n,min:t,max:i}},arrangeLabels:function(){c.fn.arrangeLabels.call(this);this.hideOutOfRangeLabels()},hideOutOfRangeLabels:function(){var e=this;var t=e.box;var i=e.labels;if(i.length){var n=this.options.vertical?D:T;var r=t[n+1];var a=t[n+2];var o=i[0];var s=E(i);if(o.box[n+1]>a||o.box[n+2]<r){o.options.visible=false}if(s.box[n+1]>a||s.box[n+2]<r){s.options.visible=false}}},getMajorTickPositions:function(){return this.getTicks().majorTicks},getMinorTickPositions:function(){return this.getTicks().minorTicks},getLabelsTickPositions:function(){return this.getTicks().labelTicks},tickIndices:function(e){var t=this.rangeIndices();var i=t.min;var n=t.max;var r=Math.ceil(n);var a=Math.floor(i);var o=[];while(a<=r){o.push(a);a+=e}return o},getTickPositions:function(e){var t=this.options;var i=t.vertical;var n=t.reverse;var r=this.scaleOptions();var a=r.scale;var o=r.box;var s=r.min;var l=o[(i?D:T)+(n?2:1)];var d=this.tickIndices(e);var u=[];for(var c=0;c<d.length;c++){u.push(l+M(a*(d[c]-s),g))}return u},getTicks:function(){var e=this.options;var t=this._ticks;var i=this.rangeIndices();var n=this.lineBox();var r=n.getHash()+i.min+","+i.max+e.reverse+e.justified;if(t._hash!==r){var a=e.minorTicks.visible||e.minorGridLines.visible;t._hash=r;t.labelTicks=this.getTickPositions(1);t.majorTicks=this.filterOutOfRangePositions(t.labelTicks,n);t.minorTicks=a?this.filterOutOfRangePositions(this.getTickPositions(.5),n):[]}return t},filterOutOfRangePositions:function(e,t){if(!e.length){return e}var i=this.options.vertical?D:T;var n=function(e){return t[i+1]<=e&&e<=t[i+2]};var r=e.length-1;var a=0;while(!n(e[a])&&a<=r){a++}var o=r;while(!n(e[o])&&o>=0){o--}return e.slice(a,o+1)},getSlot:function(e,t,i){var n=this.options;var r=n.reverse;var a=n.justified;var o=n.vertical;var s=this.scaleOptions();var l=s.scale;var d=s.box;var u=s.min;var c=o?D:T;var f=d[c+(r?2:1)];var h=d.clone();var p=!A(t);var v=ut(e,0);var m=ut(t,v);m=Math.max(m-1,v);m=Math.max(v,m);var g=f+(v-u)*l;var _=f+(m+1-u)*l;if(p&&a){_=g}if(i){g=I(g,d[c+1],d[c+2]);_=I(_,d[c+1],d[c+2])}h[c+1]=r?_:g;h[c+2]=r?g:_;return h},limitSlot:function(e){var t=this.options.vertical;var i=t?D:T;var n=this.lineBox();var r=e.clone();r[i+1]=I(e[i+1],n[i+1],n[i+2]);r[i+2]=I(e[i+2],n[i+1],n[i+2]);return r},slot:function(e,t,i){var n=Math.floor(this.options.min||0);var r=e;var a=t;if(typeof r==="string"){r=this.categoryIndex(r)}else if(o(r)){r-=n}if(typeof a==="string"){a=this.categoryIndex(a)}else if(o(a)){a-=n}return c.fn.slot.call(this,r,a,i)},pointCategoryIndex:function(e){var t=this.options;var i=t.reverse;var n=t.justified;var r=t.vertical;var a=r?D:T;var o=this.scaleOptions();var s=o.scale;var l=o.box;var d=o.min;var u=o.max;var c=i?u:d;var f=l[a+1];var h=l[a+2];var p=e[a];if(p<f||p>h){return null}var v=c+(p-f)/s;var m=v%1;if(n){v=Math.round(v)}else if(m===0&&v>0){v--}return Math.floor(v)},getCategory:function(e){var t=this.pointCategoryIndex(e);if(t===null){return null}return this.options.categories[t]},categoryIndex:function(e){return this.totalIndex(e)-Math.floor(this.options.min||0)},categoryAt:function(e,t){var i=this.options;return(t?i.srcCategories:i.categories)[e]},categoriesCount:function(){return(this.options.categories||[]).length},translateRange:function(e){var t=this.options;var i=this.lineBox();var n=t.vertical?i.height():i.width();var r=t.categories.length;var a=n/r;var o=M(e/a,y);return{min:o,max:r+o}},zoomRange:function(e){var t=this.totalRangeIndices();var i=this.totalRange();var n=i.min;var r=i.max;var a=I(t.min+e,n,r);var o=I(t.max-e,n,r);if(o-a>0){return{min:a,max:o}}},scaleRange:function(e){var t=this.options.categories.length;var i=e*t;return{min:-i,max:t+i}},labelsCount:function(){var e=this.labelsRange();return e.max-e.min},labelsRange:function(){var e=this.options;var t=e.justified;var i=e.labels;var n=this.totalRangeIndices(true);var r=n.min;var a=n.max;var o=Math.floor(r);if(!t){r=Math.floor(r);a=Math.ceil(a)}else{r=Math.ceil(r);a=Math.floor(a)}var s;if(r>i.skip){s=i.skip+i.step*Math.ceil((r-i.skip)/i.step)}else{s=i.skip}return{min:s-o,max:(e.categories.length?a+(t?1:0):0)-o}},createAxisLabel:function(e,t){var i=this.options;var n=i.dataItems?i.dataItems[e]:null;var r=ut(i.categories[e],"");var a=this.axisLabelText(r,n,t);return new Ot(r,a,e,n,t)},shouldRenderNote:function(e){var t=this.totalRangeIndices();return Math.floor(t.min)<=e&&e<=Math.ceil(t.max)},noteSlot:function(e){var t=this.options;var i=e-Math.floor(t.min||0);return this.getSlot(i)},arrangeNotes:function(){c.fn.arrangeNotes.call(this);this.hideOutOfRangeNotes()},hideOutOfRangeNotes:function(){var e=this;var t=e.notes;var i=e.box;if(t&&t.length){var n=this.options.vertical?D:T;var r=i[n+1];var a=i[n+2];for(var o=0;o<t.length;o++){var s=t[o];if(s.box&&(a<s.box[n+1]||s.box[n+2]<r)){s.hide()}}}},pan:function(e){var t=this.totalRangeIndices(true);var i=this.scaleOptions();var n=i.scale;var r=M(e/n,y);var a=this.totalRange();var o=t.min+r;var s=t.max+r;return this.limitRange(o,s,0,a.max,r)},pointsRange:function(e,t){var i=this.options;var n=i.reverse;var r=i.vertical;var a=r?D:T;var o=this.totalRangeIndices(true);var s=this.scaleOptions();var l=s.scale;var d=s.box;var u=d[a+(n?2:1)];var c=e[a]-u;var f=t[a]-u;var h=o.min+c/l;var p=o.min+f/l;var v=Math.min(h,p);var m=Math.max(h,p);if(m-v>=Ci){return{min:v,max:m}}},valueRange:function(){return this.range()},totalIndex:function(e){var t=this.options;var i=this._categoriesMap?this._categoriesMap.get(e):Si(e,t.srcCategories);return i},currentRangeIndices:function(){var e=this.options;var t=0;if(o(e.min)){t=Math.floor(e.min)}var i;if(o(e.max)){i=e.justified?Math.floor(e.max):Math.ceil(e.max)-1}else{i=this.totalCount()-1}return{min:t,max:i}},mapCategories:function(){if(!this._categoriesMap){var e=this._categoriesMap=new Ke;var t=this.options.srcCategories;for(var i=0;i<t.length;i++){e.set(t[i],i)}}},totalCount:function(){return Math.max(this.options.srcCategories.length,this._seriesMax||0)}});n(Ti,{type:"category",vertical:false,majorGridLines:{visible:false,width:1,color:t},labels:{zIndex:1},justified:false,_deferLabels:true});var Di=3e5;var Ai={milliseconds:"HH:mm:ss.fff",seconds:"HH:mm:ss",minutes:"HH:mm",hours:"HH:mm",days:"M/d",weeks:"M/d",months:"MMM 'yy",years:"yyyy"};var Ei=.2;var Ii="auto";var Mi=[qt,$t,Kt,Yt,Qt,Xt,Zt,Jt];var Ri="fit";function Fi(e){var t=e._range;if(!t){t=e._range=ft(e);t.min=b(t.min);t.max=b(t.max)}return t}var Pi=e.extend({init:function(e){this.options=e},displayIndices:function(){return{min:0,max:1}},displayRange:function(){return{}},total:function(){return{}},valueRange:function(){return{}},valueIndex:function(){return-1},values:function(){return[]},totalIndex:function(){return-1},valuesCount:function(){return 0},totalCount:function(){return 0},dateAt:function(){return null}});var zi=e.extend({init:function(e,t,i){this.options=i;i.baseUnitStep=i.baseUnitStep||1;var n=i.roundToBaseUnit;var r=i.justified;this.start=P(e,0,i.baseUnit,i.weekStartDay);var a=this.roundToTotalStep(t);var o=!r&&mi(t,a)&&!i.justifyEnd;this.end=this.roundToTotalStep(t,!r,o?1:0);var s=i.min||e;this.valueStart=this.roundToTotalStep(s);this.displayStart=n?this.valueStart:s;var l=i.max;if(!l){this.valueEnd=a;this.displayEnd=n||o?this.end:t}else{this.valueEnd=this.roundToTotalStep(l,false,!r&&mi(l,this.roundToTotalStep(l))?-1:0);this.displayEnd=n?this.roundToTotalStep(l,!r):i.max}if(this.valueEnd<this.valueStart){this.valueEnd=this.valueStart}if(this.displayEnd<=this.displayStart){this.displayEnd=this.roundToTotalStep(this.displayStart,false,1)}},displayRange:function(){return{min:this.displayStart,max:this.displayEnd}},displayIndices:function(){if(!this._indices){var e=this.options;var t=e.baseUnit;var i=e.baseUnitStep;var n=_i(this.displayStart,this.valueStart,t,i);var r=_i(this.displayEnd,this.valueStart,t,i);this._indices={min:n,max:r}}return this._indices},total:function(){return{min:this.start,max:this.end}},totalCount:function(){var e=this.totalIndex(this.end);return e+(this.options.justified?1:0)},valueRange:function(){return{min:this.valueStart,max:this.valueEnd}},valueIndex:function(e){var t=this.options;return Math.floor(_i(e,this.valueStart,t.baseUnit,t.baseUnitStep))},totalIndex:function(e){var t=this.options;return Math.floor(_i(e,this.start,t.baseUnit,t.baseUnitStep))},dateIndex:function(e){var t=this.options;return _i(e,this.valueStart,t.baseUnit,t.baseUnitStep)},valuesCount:function(){var e=this.valueIndex(this.valueEnd);return e+1},values:function(){var e=this._values;if(!e){var t=this.options;var i=this.valueRange();this._values=e=[];for(var n=i.min;n<=i.max;){e.push(n);n=P(n,t.baseUnitStep,t.baseUnit,t.weekStartDay)}}return e},dateAt:function(e,t){var i=this.options;return P(t?this.start:this.valueStart,i.baseUnitStep*e,i.baseUnit,i.weekStartDay)},roundToTotalStep:function(e,t,i){var n=this.options;var r=n.baseUnit;var a=n.baseUnitStep;var o=n.weekStartDay;var s=this.start;var l=_i(e,s,r,a);var d=t?Math.ceil(l):Math.floor(l);if(i){d+=i}return P(s,d*a,r,o)}});function Bi(e,t,i){var n=Fi(e.categories);var r=(e.max||n.max)-(e.min||n.min);var a=e.autoBaseUnitSteps;var o=e.maxDateGroups;var s=e.baseUnit===Ri;var l=t?Mi.indexOf(t):0;var d=s?Mi[l++]:e.baseUnit;var u=r/li[d];var c=u;var f,h,p;while(!h||u>=o){f=f||a[d].slice(0);do{p=f.shift()}while(p&&t===d&&p<i);if(p){h=p;u=c/h}else if(d===E(Mi)){h=Math.ceil(c/o);break}else if(s){d=Mi[l++]||E(Mi);c=r/li[d];f=null}else{if(u>o){h=Math.ceil(c/o)}break}}e.baseUnitStep=h;e.baseUnit=d}function Li(e){var t=e.categories;var i=A(t)?t.length:0;var n=oe;var r,a;for(var o=0;o<i;o++){var s=t[o];if(s&&r){var l=di(s,r);if(l>0){n=Math.min(n,l);if(n>=si){a=Jt}else if(n>=oi-ri*3){a=Zt}else if(n>=ai){a=Xt}else if(n>=ri){a=Qt}else if(n>=ni){a=Yt}else if(n>=ii){a=Kt}else{a=$t}}}r=s}e.baseUnit=a||Qt}function Hi(e){var t=(e.baseUnit||"").toLowerCase();var i=t!==Ri&&!p(t,Mi);if(i){Li(e)}if(t===Ri||e.baseUnitStep===Ii){Bi(e)}return e}var Ni=Ti.extend({clone:function(){var e=new Ni(d.extend({},this.options),this.chartService);e.createLabels();return e},categoriesHash:function(){var e=this.dataRange.total().min;return this.options.baseUnit+this.options.baseUnitStep+e},initUserOptions:function(e){return e},initFields:function(){Ti.fn.initFields.call(this);var e=this.chartService;var t=e.intl;var i=this.options;var n=i.categories||[];if(!n._parsed){n=yi(t,n);n._parsed=true}i=f({roundToBaseUnit:true},i,{categories:n,min:ki(t,i.min),max:ki(t,i.max),weekStartDay:xi(i,t)});if(e.panning&&e.isPannable(i.vertical?D:T)){i.roundToBaseUnit=false}i.userSetBaseUnit=i.userSetBaseUnit||i.baseUnit;i.userSetBaseUnitStep=i.userSetBaseUnitStep||i.baseUnitStep;this.options=i;i.srcCategories=n;if(n.length>0){var r=Fi(n);var a=i.maxDivisions;this.dataRange=new zi(r.min,r.max,Hi(i));if(a){var o=this.dataRange.displayRange();var s=d.extend({},i,{justified:true,roundToBaseUnit:false,baseUnit:"fit",min:o.min,max:o.max,maxDateGroups:a});var l=this.dataRange.options;Bi(s,l.baseUnit,l.baseUnitStep);this.divisionRange=new zi(r.min,r.max,s)}else{this.divisionRange=this.dataRange}}else{i.baseUnit=i.baseUnit||Qt;this.dataRange=this.divisionRange=new Pi(i)}},tickIndices:function(e){var t=this;var i=t.dataRange;var n=t.divisionRange;var r=n.valuesCount();if(!this.options.maxDivisions||!r){return Ti.fn.tickIndices.call(this,e)}var a=[];var o=n.values();var s=0;if(!this.options.justified){o=o.concat(n.dateAt(r));s=.5}for(var l=0;l<o.length;l++){a.push(i.dateIndex(o[l])+s);if(e!==1&&l>=1){var d=a.length-1;a.splice(l,0,a[d-1]+(a[d]-a[d-1])*e)}}return a},shouldRenderNote:function(e){var t=this.range();var i=this.options.categories||[];return vi(e,t.min)>=0&&vi(e,t.max)<=0&&i.length},parseNoteValue:function(e){return ki(this.chartService.intl,e)},noteSlot:function(e){return this.getSlot(e)},translateRange:function(e){var t=this.options;var i=t.baseUnit;var n=t.weekStartDay;var r=t.vertical;var a=this.lineBox();var o=r?a.height():a.width();var s=this.range();var l=o/(s.max-s.min);var d=M(e/l,y);if(s.min&&s.max){var u=F(t.min||s.min,d);var c=F(t.max||s.max,d);s={min:P(u,0,i,n),max:P(c,0,i,n)}}return s},scaleRange:function(e){var t=Math.abs(e);var i=this.range();var n=i.min;var r=i.max;if(n&&r){while(t--){var a=z(n,r);var o=Math.round(a*.1);if(e<0){n=F(n,o);r=F(r,-o)}else{n=F(n,-o);r=F(r,o)}}i={min:n,max:r}}return i},labelsRange:function(){return{min:this.options.labels.skip,max:this.divisionRange.valuesCount()}},pan:function(e){if(this.isEmpty()){return null}var t=this.options;var i=this.lineBox();var n=t.vertical?i.height():i.width();var r=this.dataRange.displayRange();var a=r.min;var o=r.max;var s=this.dataRange.total();var l=n/(o-a);var d=M(e/l,y)*(t.reverse?-1:1);var u=F(a,d);var c=F(o,d);var f=this.limitRange(B(u),B(c),B(s.min),B(s.max),d);if(f){f.min=b(f.min);f.max=b(f.max);f.baseUnit=t.baseUnit;f.baseUnitStep=t.baseUnitStep||1;f.userSetBaseUnit=t.userSetBaseUnit;f.userSetBaseUnitStep=t.userSetBaseUnitStep;return f}},pointsRange:function(e,t){if(this.isEmpty()){return null}var i=Ti.fn.pointsRange.call(this,e,t);var n=this.dataRange.displayRange();var r=this.dataRange.displayIndices();var a=z(n.max,n.min)/(r.max-r.min);var o=this.options;var s=F(n.min,i.min*a);var l=F(n.min,i.max*a);return{min:s,max:l,baseUnit:o.userSetBaseUnit||o.baseUnit,baseUnitStep:o.userSetBaseUnitStep||o.baseUnitStep}},zoomRange:function(e){if(this.isEmpty()){return null}var t=this.options;var i=t.userSetBaseUnit===Ri;var n=this.dataRange.total();var r=this.dataRange.displayRange();var a=r.min;var o=r.max;var s=this.dataRange.options;var l=s.weekStartDay;var d=s.baseUnit;var u=s.baseUnitStep;var c=P(a,e*u,d,l);var f=P(o,-e*u,d,l);if(i){var h=t.autoBaseUnitSteps;var p=t.maxDateGroups;var v=E(h[d])*p*li[d];var m=z(o,a);var g=z(f,c);var _=Mi.indexOf(d);var b,w;if(g<li[d]&&d!==qt){d=Mi[_-1];b=E(h[d]);w=(m-(p-1)*b*li[d])/2;c=F(a,w);f=F(o,-w)}else if(g>v&&d!==Jt){var k=0;do{_++;d=Mi[_];k=0;w=2*li[d];do{b=h[d][k];k++}while(k<h[d].length&&w*b<m)}while(d!==Jt&&w*b<m);w=(w*b-m)/2;if(w>0){c=F(a,-w);f=F(o,w);c=F(c,I(f,n.min,n.max)-f);f=F(f,I(c,n.min,n.max)-c)}}}if(c<n.min){c=n.min}if(f>n.max){f=n.max}if(c&&f&&z(f,c)>0){return{min:c,max:f,baseUnit:t.userSetBaseUnit||t.baseUnit,baseUnitStep:t.userSetBaseUnitStep||t.baseUnitStep}}},range:function(){return this.dataRange.displayRange()},createAxisLabel:function(e,t){var i=this.options;var n=i.dataItems&&!i.maxDivisions?i.dataItems[e]:null;var r=this.divisionRange.dateAt(e);var a=t.dateFormats[this.divisionRange.options.baseUnit];t.format=t.format||a;var o=this.axisLabelText(r,n,t);if(o){return new Ot(r,o,e,n,t)}},categoryIndex:function(e){return this.dataRange.valueIndex(e)},slot:function(e,t,i){var n=this.dataRange;var r=e;var a=t;if(r instanceof Date){r=n.dateIndex(r)}if(a instanceof Date){a=n.dateIndex(a)}var o=this.getSlot(r,a,i);if(o){return o.toRect()}},getSlot:function(e,t,i){var n=e;var r=t;if(typeof n===fe){n=this.categoryIndex(n)}if(typeof r===fe){r=this.categoryIndex(r)}return Ti.fn.getSlot.call(this,n,r,i)},valueRange:function(){var e=this.options;var t=Fi(e.srcCategories);return{min:b(t.min),max:b(t.max)}},categoryAt:function(e,t){return this.dataRange.dateAt(e,t)},categoriesCount:function(){return this.dataRange.valuesCount()},rangeIndices:function(){return this.dataRange.displayIndices()},labelsBetweenTicks:function(){return!this.divisionRange.options.justified},prepareUserOptions:function(){if(this.isEmpty()){return}this.options.categories=this.dataRange.values()},getCategory:function(e){var t=this.pointCategoryIndex(e);if(t===null){return null}return this.dataRange.dateAt(t)},totalIndex:function(e){return this.dataRange.totalIndex(e)},currentRangeIndices:function(){var e=this.dataRange.valueRange();return{min:this.dataRange.totalIndex(e.min),max:this.dataRange.totalIndex(e.max)}},totalRange:function(){return this.dataRange.total()},totalCount:function(){return this.dataRange.totalCount()},isEmpty:function(){return!this.options.srcCategories.length},roundedRange:function(){if(this.options.roundToBaseUnit!==false||this.isEmpty()){return this.range()}var e=this.options;var t=Fi(e.srcCategories);var i=new zi(t.min,t.max,d.extend({},e,{justified:false,roundToBaseUnit:true,justifyEnd:e.justified}));return i.displayRange()}});n(Ni,{type:X,labels:{dateFormats:Ai},autoBaseUnitSteps:{milliseconds:[1,10,100],seconds:[1,2,5,15,30],minutes:[1,2,5,15,30],hours:[1,2,3],days:[1,2,3],weeks:[1,2],months:[1,2,3,6],years:[1,2,3,5,10,25,50]},maxDateGroups:10});function Oi(e,t,i){if(!e&&!t){return 0}var n;if(e>=0&&t>=0){var r=e===t?0:e;var a=(t-r)/t;if(i===false||!i&&a>Ei){return 0}n=Math.max(0,r-(t-r)/2)}else{n=e}return n}function Vi(e,t,i){if(!e&&!t){return 1}var n;if(e<=0&&t<=0){var r=e===t?0:t;var a=Math.abs((r-e)/r);if(i===false||!i&&a>Ei){return 0}n=Math.min(0,r-(e-r)/2)}else{n=t}return n}function Wi(e,t){return M(Math.floor(e/t)*t,y)}function Ui(e,t){return M(Math.ceil(e/t)*t,y)}function ji(e){return Math.max(Math.min(e,Di),-Di)}var Gi=Math.pow(10,-y+1);var r=c.extend({init:function(e,t,i,n){c.fn.init.call(this,d.extend({},i,{seriesMin:e,seriesMax:t}),n)},initUserOptions:function(e){var t=qi(e.seriesMin,e.seriesMax,e);this.totalOptions=$i(t,e);return Yi(t,e)},initFields:function(){this.totalMin=this.totalOptions.min;this.totalMax=this.totalOptions.max;this.totalMajorUnit=this.totalOptions.majorUnit;this.seriesMin=this.options.seriesMin;this.seriesMax=this.options.seriesMax},clone:function(){return new r(this.seriesMin,this.seriesMax,d.extend({},this.options),this.chartService)},startValue:function(){return 0},range:function(){var e=this.options;return{min:e.min,max:e.max}},getDivisions:function(e){if(e===0){return 1}var t=this.options;var i=t.max-t.min;return Math.floor(M(i/e,g))+1},getTickPositions:function(e,t){var i=this.options;var n=i.vertical;var r=i.reverse;var a=this.lineBox();var o=n?a.height():a.width();var s=i.max-i.min;var l=o/s;var d=e*l;var u=this.getDivisions(e);var c=(n?-1:1)*(r?-1:1);var f=c===1?1:2;var h=[];var p=a[(n?D:T)+f];var v=0;if(t){v=t/e}for(var m=0;m<u;m++){if(m%v!==0){h.push(M(p,g))}p=p+d*c}return h},getMajorTickPositions:function(){return this.getTickPositions(this.options.majorUnit)},getMinorTickPositions:function(){return this.getTickPositions(this.options.minorUnit)},getSlot:function(e,t,i){if(i===void 0){i=false}var n=this.options;var r=n.vertical;var a=n.reverse;var o=r?D:T;var s=this.lineBox();var l=s[o+(a?2:1)];var d=r?s.height():s.width();var u=a?-1:1;var c=u*(d/(n.max-n.min));var f=new R(s.x1,s.y1,s.x1,s.y1);var h=e;var p=t;if(!A(h)){h=p||0}if(!A(p)){p=h||0}if(i){h=Math.max(Math.min(h,n.max),n.min);p=Math.max(Math.min(p,n.max),n.min)}var v,m;if(r){v=n.max-Math.max(h,p);m=n.max-Math.min(h,p)}else{v=Math.min(h,p)-n.min;m=Math.max(h,p)-n.min}f[o+1]=ji(l+c*(a?m:v));f[o+2]=ji(l+c*(a?v:m));return f},getValue:function(e){var t=this.options;var i=t.vertical;var n=t.reverse;var r=Number(t.max);var a=Number(t.min);var o=i?D:T;var s=this.lineBox();var l=s[o+(n?2:1)];var d=i?s.height():s.width();var u=n?-1:1;var c=u*(e[o]-l);var f=(r-a)/d;var h=c*f;if(c<0||c>d){return null}var p=i?r-h:a+h;return M(p,y)},translateRange:function(e){var t=this.options;var i=t.vertical;var n=t.reverse;var r=t.max;var a=t.min;var o=this.lineBox();var s=i?o.height():o.width();var l=r-a;var d=s/l;var u=M(e/d,y);if((i||n)&&!(i&&n)){u=-u}return{min:a+u,max:r+u,offset:u}},scaleRange:function(e){var t=this.options;var i=-e*t.majorUnit;return{min:t.min-i,max:t.max+i}},labelsCount:function(){return this.getDivisions(this.options.majorUnit)},createAxisLabel:function(e,t){var i=this.options;var n=M(i.min+e*i.majorUnit,y);var r=this.axisLabelText(n,null,t);return new Ot(n,r,e,null,t)},shouldRenderNote:function(e){var t=this.range();return t.min<=e&&e<=t.max},pan:function(e){var t=this.translateRange(e);return this.limitRange(t.min,t.max,this.totalMin,this.totalMax,t.offset)},pointsRange:function(e,t){var i=this.getValue(e);var n=this.getValue(t);var r=Math.min(i,n);var a=Math.max(i,n);if(this.isValidRange(r,a)){return{min:r,max:a}}},zoomRange:function(e){var t=this;var i=t.totalMin;var n=t.totalMax;var r=this.scaleRange(e);var a=I(r.min,i,n);var o=I(r.max,i,n);if(this.isValidRange(a,o)){return{min:a,max:o}}},isValidRange:function(e,t){return t-e>Gi}});function qi(e,t,i){var n=i.narrowRange;var r=Oi(e,t,n);var a=Vi(e,t,n);var o=bt(r,a);var s={majorUnit:o};if(i.roundToMajorUnit!==false){if(r<0&&Qi(r,o,1/3)){r-=o}if(a>0&&Qi(a,o,1/3)){a+=o}}s.min=Wi(r,o);s.max=Ui(a,o);return s}function $i(e,t){return{min:A(t.min)?Math.min(e.min,t.min):e.min,max:A(t.max)?Math.max(e.max,t.max):e.max,majorUnit:e.majorUnit}}function Ki(e,t){for(var i=0;i<t.length;i++){var n=t[i];if(e[n]===null){e[n]=undefined}}}function Yi(e,t){var i=t;var n,r;if(t){Ki(t,["min","max"]);n=A(t.min);r=A(t.max);var a=n||r;if(a){if(t.min===t.max){if(t.min>0){t.min=0}else{t.max=1}}}if(t.majorUnit){e.min=Wi(e.min,t.majorUnit);e.max=Ui(e.max,t.majorUnit)}else if(a){i=f(e,t);e.majorUnit=bt(i.min,i.max)}}e.minorUnit=(i.majorUnit||e.majorUnit)/5;var o=f(e,i);if(o.min>=o.max){if(n&&!r){o.max=o.min+o.majorUnit}else if(!n&&r){o.min=o.max-o.majorUnit}}return o}function Qi(e,t,i){var n=M(Math.abs(e%t),y);var r=t*(1-i);return n===0||n>r}n(r,{type:"numeric",min:0,max:1,vertical:true,majorGridLines:{visible:true,width:1,color:t},labels:{format:"#.####################"},zIndex:1});var Xi=c.extend({init:function(e,t,i,n){var r=b(e);var a=b(t);var o=n.intl;var s=i||{};s=f(s||{},{min:ki(o,s.min),max:ki(o,s.max),axisCrossingValue:yi(o,s.axisCrossingValues||s.axisCrossingValue),weekStartDay:xi(s,o)});s=Ji(r,a,s);c.fn.init.call(this,s,n);this.intlService=o;this.seriesMin=r;this.seriesMax=a;var l=s.weekStartDay||0;this.totalMin=B(hi(B(r)-1,s.baseUnit,l));this.totalMax=B(pi(B(a)+1,s.baseUnit,l))},clone:function(){return new Xi(this.seriesMin,this.seriesMax,d.extend({},this.options),this.chartService)},range:function(){var e=this.options;return{min:e.min,max:e.max}},getDivisions:function(e){var t=this.options;return Math.floor(bi(t.min,t.max,t.baseUnit)/e+1)},getTickPositions:function(e){var t=this.options;var i=t.vertical;var n=this.lineBox();var r=(i?-1:1)*(t.reverse?-1:1);var a=r===1?1:2;var o=n[(i?D:T)+a];var s=this.getDivisions(e);var l=z(t.max,t.min);var d=i?n.height():n.width();var u=d/l;var c=t.weekStartDay||0;var f=[o];for(var h=1;h<s;h++){var p=P(t.min,h*e,t.baseUnit,c);var v=o+z(p,t.min)*u*r;f.push(M(v,g))}return f},getMajorTickPositions:function(){return this.getTickPositions(this.options.majorUnit)},getMinorTickPositions:function(){return this.getTickPositions(this.options.minorUnit)},getSlot:function(e,t,i){return r.prototype.getSlot.call(this,ki(this.intlService,e),ki(this.intlService,t),i)},getValue:function(e){var t=r.prototype.getValue.call(this,e);return t!==null?b(t):null},labelsCount:function(){return this.getDivisions(this.options.majorUnit)},createAxisLabel:function(e,t){var i=this.options;var n=e*i.majorUnit;var r=i.weekStartDay||0;var a=i.min;if(n>0){a=P(a,n,i.baseUnit,r)}var o=t.dateFormats[i.baseUnit];t.format=t.format||o;var s=this.axisLabelText(a,null,t);return new Ot(a,s,e,null,t)},translateRange:function(e,t){var i=this.options;var n=i.baseUnit;var r=i.weekStartDay||0;var a=this.lineBox();var o=i.vertical?a.height():a.width();var s=this.range();var l=o/z(s.max,s.min);var d=M(e/l,y)*(i.reverse?-1:1);var u=F(i.min,d);var c=F(i.max,d);if(!t){u=P(u,0,n,r);c=P(c,0,n,r)}return{min:u,max:c,offset:d}},scaleRange:function(e){var t=this.options;var i=t.min;var n=t.max;var r=Math.abs(e);while(r--){var a=z(i,n);var o=Math.round(a*.1);if(e<0){i=F(i,o);n=F(n,-o)}else{i=F(i,-o);n=F(n,o)}}return{min:i,max:n}},shouldRenderNote:function(e){var t=this.range();return vi(e,t.min)>=0&&vi(e,t.max)<=0},pan:function(e){var t=this.translateRange(e,true);var i=this.limitRange(B(t.min),B(t.max),this.totalMin,this.totalMax,t.offset);if(i){return{min:b(i.min),max:b(i.max)}}},pointsRange:function(e,t){var i=this.getValue(e);var n=this.getValue(t);var r=Math.min(i,n);var a=Math.max(i,n);return{min:b(r),max:b(a)}},zoomRange:function(e){var t=this.scaleRange(e);var i=b(I(B(t.min),this.totalMin,this.totalMax));var n=b(I(B(t.max),this.totalMin,this.totalMax));return{min:i,max:n}}});function Zi(e){var t=Yt;if(e>=si){t=Jt}else if(e>=oi){t=Zt}else if(e>=ai){t=Xt}else if(e>=ri){t=Qt}return t}function Ji(e,t,i){var n=i.min||e;var r=i.max||t;var a=i.baseUnit||(r&&n?Zi(di(r,n)):Yt);var o=li[a];var s=i.weekStartDay||0;var l=hi(B(n)-1,a,s)||b(r);var d=pi(B(r)+1,a,s);var u=i.majorUnit?i.majorUnit:undefined;var c=u||Ui(bt(l.getTime(),d.getTime()),o)/o;var f=bi(l,d,a);var h=Ui(f,c);var p=h-f;var v=Math.floor(p/2);var m=p-v;if(!i.baseUnit){delete i.baseUnit}i.baseUnit=i.baseUnit||a;i.min=i.min||P(l,-v,a,s);i.max=i.max||P(d,m,a,s);i.minorUnit=i.minorUnit||c/5;i.majorUnit=c;return i}n(Xi,{type:X,majorGridLines:{visible:true,width:1,color:t},labels:{dateFormats:Ai}});var en=10;var tn=c.extend({init:function(e,t,i,n){var r=f({majorUnit:en,min:e,max:t},i);var a=r.majorUnit;var o=an(t,a);var s=rn(e,t,r);var l=nn(s,o,r,i);r.max=l.max;r.min=l.min;r.minorUnit=i.minorUnit||M(a-1,y);c.fn.init.call(this,r,n);this.totalMin=A(i.min)?Math.min(s,i.min):s;this.totalMax=A(i.max)?Math.max(o,i.max):o;this.logMin=M(L(l.min,a),y);this.logMax=M(L(l.max,a),y);this.seriesMin=e;this.seriesMax=t;this.createLabels()},clone:function(){return new tn(this.seriesMin,this.seriesMax,d.extend({},this.options),this.chartService)},startValue:function(){return this.options.min},getSlot:function(e,t,i){var n=this;var r=n.options;var a=n.logMin;var o=n.logMax;var s=r.reverse;var l=r.vertical;var d=r.majorUnit;var u=l?D:T;var c=this.lineBox();var f=c[u+(s?2:1)];var h=l?c.height():c.width();var p=s?-1:1;var v=p*(h/(o-a));var m=new R(c.x1,c.y1,c.x1,c.y1);var g=e;var _=t;if(!A(g)){g=_||1}if(!A(_)){_=g||1}if(g<=0||_<=0){return null}if(i){g=Math.max(Math.min(g,r.max),r.min);_=Math.max(Math.min(_,r.max),r.min)}g=L(g,d);_=L(_,d);var b,w;if(l){b=o-Math.max(g,_);w=o-Math.min(g,_)}else{b=Math.min(g,_)-a;w=Math.max(g,_)-a}m[u+1]=ji(f+v*(s?w:b));m[u+2]=ji(f+v*(s?b:w));return m},getValue:function(e){var t=this;var i=t.options;var n=t.logMin;var r=t.logMax;var a=i.reverse;var o=i.vertical;var s=i.majorUnit;var l=this.lineBox();var d=o===a?1:-1;var u=d===1?1:2;var c=o?l.height():l.width();var f=(r-n)/c;var h=o?D:T;var p=l[h+u];var v=d*(e[h]-p);var m=v*f;if(v<0||v>c){return null}var g=n+m;return M(Math.pow(s,g),y)},range:function(){var e=this.options;return{min:e.min,max:e.max}},scaleRange:function(e){var t=this.options.majorUnit;var i=-e;return{min:Math.pow(t,this.logMin-i),max:Math.pow(t,this.logMax+i)}},translateRange:function(e){var t=this;var i=t.options;var n=t.logMin;var r=t.logMax;var a=i.reverse;var o=i.vertical;var s=i.majorUnit;var l=this.lineBox();var d=o?l.height():l.width();var u=d/(r-n);var c=M(e/u,y);if((o||a)&&!(o&&a)){c=-c}return{min:Math.pow(s,n+c),max:Math.pow(s,r+c),offset:c}},labelsCount:function(){var e=Math.floor(this.logMax);var t=Math.floor(e-this.logMin)+1;return t},getMajorTickPositions:function(){var t=[];this.traverseMajorTicksPositions(function(e){t.push(e)},{step:1,skip:0});return t},createTicks:function(i){var e=this.options;var t=e.majorTicks;var n=e.minorTicks;var r=e.vertical;var a=e.labels.mirror;var o=this.lineBox();var s=[];var l={vertical:r};function d(e,t){l.tickX=a?o.x2:o.x2-t.size;l.tickY=a?o.y1-t.size:o.y1;l.position=e;i.append(jt(l,t))}if(t.visible){this.traverseMajorTicksPositions(d,t)}if(n.visible){this.traverseMinorTicksPositions(d,n)}return s},createGridLines:function(e){var t=this.options;var i=t.minorGridLines;var n=t.majorGridLines;var r=t.vertical;var a=e.lineBox();var o={lineStart:a[r?"x1":"y1"],lineEnd:a[r?"x2":"y2"],vertical:r};var s=[];var l=this.gridLinesVisual();function d(e,t){if(!p(e,s)){o.position=e;l.append(Gt(o,t));s.push(e)}}if(n.visible){this.traverseMajorTicksPositions(d,n)}if(i.visible){this.traverseMinorTicksPositions(d,i)}return l.children},traverseMajorTicksPositions:function(e,t){var i=this._lineOptions();var n=i.lineStart;var r=i.step;var a=this;var o=a.logMin;var s=a.logMax;for(var l=Math.ceil(o)+t.skip;l<=s;l+=t.step){var d=M(n+r*(l-o),y);e(d,t)}},traverseMinorTicksPositions:function(e,t){var i=this;var n=this.options;var r=n.min;var a=n.max;var o=n.minorUnit;var s=n.majorUnit;var l=this._lineOptions();var d=l.lineStart;var u=l.step;var c=this;var f=c.logMin;var h=c.logMax;var p=Math.floor(f);for(var v=p;v<h;v++){var m=i._minorIntervalOptions(v);for(var g=t.skip;g<o;g+=t.step){var _=m.value+g*m.minorStep;if(_>a){break}if(_>=r){var b=M(d+u*(L(_,s)-f),y);e(b,t)}}}},createAxisLabel:function(e,t){var i=Math.ceil(this.logMin+e);var n=Math.pow(this.options.majorUnit,i);var r=this.axisLabelText(n,null,t);return new Ot(n,r,e,null,t)},shouldRenderNote:function(e){var t=this.range();return t.min<=e&&e<=t.max},pan:function(e){var t=this.translateRange(e);return this.limitRange(t.min,t.max,this.totalMin,this.totalMax,t.offset)},pointsRange:function(e,t){var i=this.getValue(e);var n=this.getValue(t);var r=Math.min(i,n);var a=Math.max(i,n);return{min:r,max:a}},zoomRange:function(e){var t=this;var i=t.options;var n=t.totalMin;var r=t.totalMax;var a=this.scaleRange(e);var o=I(a.min,n,r);var s=I(a.max,n,r);var l=i.majorUnit;var d=s>o&&i.min&&i.max&&M(L(i.max,l)-L(i.min,l),y)<1;var u=!(i.min===n&&i.max===r)&&M(L(s,l)-L(o,l),y)>=1;if(d||u){return{min:o,max:s}}},_minorIntervalOptions:function(e){var t=this.options;var i=t.minorUnit;var n=t.majorUnit;var r=Math.pow(n,e);var a=Math.pow(n,e+1);var o=a-r;var s=o/i;return{value:r,minorStep:s}},_lineOptions:function(){var e=this.options;var t=e.reverse;var i=e.vertical;var n=i?D:T;var r=this.lineBox();var a=i===t?1:-1;var o=a===1?1:2;var s=i?r.height():r.width();var l=a*(s/(this.logMax-this.logMin));var d=r[n+o];return{step:l,lineStart:d,lineBox:r}}});function nn(e,t,i,n){var r=i.min;var a=i.max;if(A(i.axisCrossingValue)&&i.axisCrossingValue<=0){on()}if(!A(n.max)){a=t}else if(n.max<=0){on()}if(!A(n.min)){r=e}else if(n.min<=0){on()}return{min:r,max:a}}function rn(e,t,i){var n=i.majorUnit;var r=e;if(e<=0){r=t<=1?Math.pow(n,-2):1}else if(!i.narrowRange){r=Math.pow(n,Math.floor(L(e,n)))}return r}function an(e,t){var i=M(L(e,t),y)%1;var n;if(e<=0){n=t}else if(i!==0&&(i<.3||i>.9)){n=Math.pow(t,L(e,t)+.2)}else{n=Math.pow(t,Math.ceil(L(e,t)))}return n}function on(){throw new Error("Non positive values cannot be used for a logarithmic axis")}function L(e,t){return Math.log(e)/Math.log(t)}n(tn,{type:"log",majorUnit:en,minorUnit:1,axisCrossingValue:1,vertical:true,majorGridLines:{visible:true,width:1,color:t},zIndex:1,_deferLabels:true});var sn={createGridLines:function(e){var t=this.options;var i=Math.abs(this.box.center().y-e.lineBox().y1);var n=[];var r=false;var a,o;if(t.majorGridLines.visible){a=this.majorGridLineAngles(e);r=true;n=this.renderMajorGridLines(a,i,t.majorGridLines)}if(t.minorGridLines.visible){o=this.minorGridLineAngles(e,r);et(n,this.renderMinorGridLines(o,i,t.minorGridLines,e,r))}return n},renderMajorGridLines:function(e,t,i){return this.renderGridLines(e,t,i)},renderMinorGridLines:function(e,t,i,n,r){var a=this.radiusCallback&&this.radiusCallback(t,n,r);return this.renderGridLines(e,t,i,a)},renderGridLines:function(e,t,i,n){var r={stroke:{width:i.width,color:i.color,dashType:i.dashType}};var a=this.box.center();var o=new V([a.x,a.y],t);var s=this.gridLinesVisual();for(var l=0;l<e.length;l++){var d=new v(r);if(n){o.radius=n(e[l])}d.moveTo(o.center).lineTo(o.pointAt(e[l]+180));s.append(d)}return s.children},gridLineAngles:function(e,t,i,n,r){var a=this;var o=this.intervals(t,i,n,r);var s=e.options;var l=s.visible&&(s.line||{}).visible!==false;return Ze(o,function(e){var t=a.intervalAngle(e);if(!l||t!==90){return t}})}};var ln=Ti.extend({range:function(){return{min:0,max:this.options.categories.length}},reflow:function(e){this.box=e;this.reflowLabels()},lineBox:function(){return this.box},reflowLabels:function(){var e=this;var t=this;var i=t.labels;var n=t.options.labels;var r=n.skip||0;var a=n.step||1;var o=new R;for(var s=0;s<i.length;s++){i[s].reflow(o);var l=i[s].box;i[s].reflow(e.getSlot(r+s*a).adjacentBox(0,l.width(),l.height()))}},intervals:function(e,t,i,n){if(n===void 0){n=false}var r=this.options;var a=r.categories.length;var o=a/e||1;var s=360/o;var l=t||0;var d=i||1;var u=[];var c=0;for(var f=l;f<o;f+=d){if(r.reverse){c=360-f*s}else{c=f*s}c=M(c,g)%360;if(!(n&&p(c,n))){u.push(c)}}return u},majorIntervals:function(){return this.intervals(1)},minorIntervals:function(){return this.intervals(.5)},intervalAngle:function(e){return(360+e+this.options.startAngle)%360},majorAngles:function(){var t=this;return Ze(this.majorIntervals(),function(e){return t.intervalAngle(e)})},createLine:function(){return[]},majorGridLineAngles:function(e){var t=this.options.majorGridLines;return this.gridLineAngles(e,1,t.skip,t.step)},minorGridLineAngles:function(e,t){var i=this.options;var n=i.minorGridLines;var r=i.majorGridLines;var a=t?this.intervals(1,r.skip,r.step):null;return this.gridLineAngles(e,.5,n.skip,n.step,a)},radiusCallback:function(t,e,i){if(e.options.type!==$){var n=lt(360/(this.options.categories.length*2));var r=Math.cos(n)*t;var a=this.majorAngles();var o=function(e){if(!i&&p(e,a)){return t}return r};return o}},createPlotBands:function(){var e=this;var t=this.options.plotBands||[];var i=this._plotbandGroup=new H({zIndex:-1});for(var n=0;n<t.length;n++){var r=t[n];var a=e.plotBandSlot(r);var o=e.getSlot(r.from);var s=r.from-Math.floor(r.from);a.startAngle+=s*o.angle;var l=Math.ceil(r.to)-r.to;a.angle-=(l+s)*o.angle;var d=St.current.createRing(a,{fill:{color:r.color,opacity:r.opacity},stroke:{opacity:r.opacity}});i.append(d)}this.appendVisual(i)},plotBandSlot:function(e){return this.getSlot(e.from,e.to-1)},getSlot:function(e,t){var i=this.options;var n=i.justified;var r=this.box;var a=this.majorAngles();var o=a.length;var s=360/o;var l=e;if(i.reverse&&!n){l=(l+1)%o}l=I(Math.floor(l),0,o-1);var d=a[l];if(n){d=d-s/2;if(d<0){d+=360}}var u=I(Math.ceil(t||l),l,o-1);var c=u-l+1;var f=s*c;return new kt(r.center(),0,r.height()/2,d,f)},slot:function(e,t){var i=this.getSlot(e,t);var n=i.startAngle+180;var r=n+i.angle;return new N.Arc([i.center.x,i.center.y],{startAngle:n,endAngle:r,radiusX:i.radius,radiusY:i.radius})},pointCategoryIndex:function(e){var t=this;var i=this.options.categories.length;var n=null;for(var r=0;r<i;r++){var a=t.getSlot(r);if(a.containsPoint(e)){n=r;break}}return n}});n(ln,{startAngle:90,labels:{margin:l(10)},majorGridLines:{visible:true},justified:true});f(ln.prototype,sn);var dn=c.extend({init:function(e,t){c.fn.init.call(this,e,t);var i=this.options;i.minorUnit=i.minorUnit||i.majorUnit/2},getDivisions:function(e){return r.prototype.getDivisions.call(this,e)-1},reflow:function(e){this.box=e;this.reflowLabels()},reflowLabels:function(){var e=this;var t=this;var i=t.options;var n=t.labels;var r=t.options.labels;var a=r.skip||0;var o=r.step||1;var s=new R;var l=this.intervals(i.majorUnit,a,o);for(var d=0;d<n.length;d++){n[d].reflow(s);var u=n[d].box;n[d].reflow(e.getSlot(l[d]).adjacentBox(0,u.width(),u.height()))}},lineBox:function(){return this.box},intervals:function(e,t,i,n){if(n===void 0){n=false}var r=this.options.min;var a=this.getDivisions(e);var o=[];var s=t||0;var l=i||1;for(var d=s;d<a;d+=l){var u=(360+r+d*e)%360;if(!(n&&p(u,n))){o.push(u)}}return o},majorIntervals:function(){return this.intervals(this.options.majorUnit)},minorIntervals:function(){return this.intervals(this.options.minorUnit)},intervalAngle:function(e){return(540-e-this.options.startAngle)%360},createLine:function(){return[]},majorGridLineAngles:function(e){var t=this.options.majorGridLines;return this.gridLineAngles(e,this.options.majorUnit,t.skip,t.step)},minorGridLineAngles:function(e,t){var i=this.options;var n=i.minorGridLines;var r=i.majorGridLines;var a=t?this.intervals(i.majorUnit,r.skip,r.step):null;return this.gridLineAngles(e,i.minorUnit,n.skip,n.step,a)},plotBandSlot:function(e){return this.getSlot(e.from,e.to)},getSlot:function(e,t){var i=this;var n=i.options;var r=i.box;var a=n.startAngle;var o=I(e,n.min,n.max);var s=I(t||o,o,n.max);if(n.reverse){o*=-1;s*=-1}o=(540-o-a)%360;s=(540-s-a)%360;if(s<o){var l=o;o=s;s=l}return new kt(r.center(),0,r.height()/2,o,s-o)},slot:function(e,t){if(t===void 0){t=e}var i=this.options;var n=360-i.startAngle;var r=this.getSlot(e,t);var a=Math.min(e,t);var o=Math.max(e,t);var s,l;if(i.reverse){s=a;l=o}else{s=360-o;l=360-a}s=(s+n)%360;l=(l+n)%360;return new N.Arc([r.center.x,r.center.y],{startAngle:s,endAngle:l,radiusX:r.radius,radiusY:r.radius})},getValue:function(e){var t=this.options;var i=this.box.center();var n=e.x-i.x;var r=e.y-i.y;var a=Math.round(it(Math.atan2(r,n)));var o=t.startAngle;if(!t.reverse){a*=-1;o*=-1}return(a+o+360)%360},valueRange:function(){return{min:0,max:Math.PI*2}}});n(dn,{type:"polar",startAngle:0,reverse:false,majorUnit:60,min:0,max:360,labels:{margin:l(10)},majorGridLines:{color:t,visible:true,width:1},minorGridLines:{color:"#aaa"}});f(dn.prototype,sn,{createPlotBands:ln.prototype.createPlotBands,majorAngles:ln.prototype.majorAngles,range:r.prototype.range,labelsCount:r.prototype.labelsCount,createAxisLabel:r.prototype.createAxisLabel});var un={options:{majorGridLines:{visible:true}},createPlotBands:function(){var e=this;var t=this.options;var i=t.majorGridLines.type;var n=t.plotBands;if(n===void 0){n=[]}var r=this.plotArea.polarAxis;var a=r.majorAngles();var o=r.box.center();var s=this._plotbandGroup=new H({zIndex:-1});for(var l=0;l<n.length;l++){var d=n[l];var u={fill:{color:d.color,opacity:d.opacity},stroke:{opacity:d.opacity}};var c=e.getSlot(d.from,d.to,true);var f=new kt(o,o.y-c.y2,o.y-c.y1,0,360);var h=void 0;if(i===$){h=St.current.createRing(f,u)}else{h=v.fromPoints(e.plotBandPoints(f,a),u).close()}s.append(h)}this.appendVisual(s)},plotBandPoints:function(e,t){var i=[];var n=[];var r=[e.center.x,e.center.y];var a=new V(r,e.innerRadius);var o=new V(r,e.radius);for(var s=0;s<t.length;s++){i.push(a.pointAt(t[s]+180));n.push(o.pointAt(t[s]+180))}i.reverse();i.push(i[0]);n.push(n[0]);return n.concat(i)},createGridLines:function(e){var t=this.options;var i=this.radarMajorGridLinePositions();var n=e.majorAngles();var r=e.box.center();var a=[];if(t.majorGridLines.visible){a=this.renderGridLines(r,i,n,t.majorGridLines)}if(t.minorGridLines.visible){var o=this.radarMinorGridLinePositions();et(a,this.renderGridLines(r,o,n,t.minorGridLines))}return a},renderGridLines:function(e,t,i,n){var r={stroke:{width:n.width,color:n.color,dashType:n.dashType}};var a=n.skip;if(a===void 0){a=0}var o=n.step;if(o===void 0){o=0}var s=this.gridLinesVisual();for(var l=a;l<t.length;l+=o){var d=e.y-t[l];if(d>0){var u=new V([e.x,e.y],d);if(n.type===$){s.append(new h.Circle(u,r))}else{var c=new v(r);for(var f=0;f<i.length;f++){c.lineTo(u.pointAt(i[f]+180))}c.close();s.append(c)}}}return s.children},getValue:function(e){var t=this.lineBox();var i=this.plotArea.polarAxis;var n=i.majorAngles();var r=i.box.center();var a=e.distanceTo(r);var o=a;if(this.options.majorGridLines.type!==$&&n.length>1){var s=e.x-r.x;var l=e.y-r.y;var d=(it(Math.atan2(l,s))+540)%360;n.sort(function(e,t){return cn(e,d)-cn(t,d)});var u=cn(n[0],n[1])/2;var c=cn(d,n[0]);var f=90-u;var h=180-c-f;o=a*(Math.sin(lt(h))/Math.sin(lt(f)))}return this.axisType().prototype.getValue.call(this,new m(t.x1,t.y2-o))}};function cn(e,t){return 180-Math.abs(Math.abs(e-t)-180)}var fn=r.extend({radarMajorGridLinePositions:function(){return this.getTickPositions(this.options.majorUnit)},radarMinorGridLinePositions:function(){var e=this.options;var t=0;if(e.majorGridLines.visible){t=e.majorUnit}return this.getTickPositions(e.minorUnit,t)},axisType:function(){return r}});f(fn.prototype,un);var hn=tn.extend({radarMajorGridLinePositions:function(){var t=[];this.traverseMajorTicksPositions(function(e){t.push(e)},this.options.majorGridLines);return t},radarMinorGridLinePositions:function(){var t=[];this.traverseMinorTicksPositions(function(e){t.push(e)},this.options.minorGridLines);return t},axisType:function(){return tn}});f(hn.prototype,un);var pn=.333;var vn=.01;var mn=e.extend({init:function(e){this.closed=e},process:function(e){var t=this;var i=e.slice(0);var n=[];var r=this.closed;var a=i.length;if(a>2){this.removeDuplicates(0,i);a=i.length}if(a<2||a===2&&i[0].equals(i[1])){return n}var o=i[0];var s=i[1];var l=i[2];n.push(new U(o));while(o.equals(i[a-1])){r=true;i.pop();a--}if(a===2){var d=this.tangent(o,s,T,D);E(n).controlOut(this.firstControlPoint(d,o,s,T,D));n.push(new U(s,this.secondControlPoint(d,o,s,T,D)));return n}var u,c;if(r){o=i[a-1];s=i[0];l=i[1];var f=this.controlPoints(o,s,l);u=f[1];c=f[0]}else{var h=this.tangent(o,s,T,D);u=this.firstControlPoint(h,o,s,T,D)}var p=u;for(var v=0;v<=a-3;v++){t.removeDuplicates(v,i);a=i.length;if(v+3<=a){o=i[v];s=i[v+1];l=i[v+2];var m=t.controlPoints(o,s,l);E(n).controlOut(p);p=m[1];var g=m[0];n.push(new U(s,g))}}if(r){o=i[a-2];s=i[a-1];l=i[0];var _=this.controlPoints(o,s,l);E(n).controlOut(p);n.push(new U(s,_[0]));E(n).controlOut(_[1]);n.push(new U(l,c))}else{var b=this.tangent(s,l,T,D);E(n).controlOut(p);n.push(new U(l,this.secondControlPoint(b,s,l,T,D)))}return n},removeDuplicates:function(e,t){while(t[e+1]&&(t[e].equals(t[e+1])||t[e+1].equals(t[e+2]))){t.splice(e+1,1)}},invertAxis:function(e,t,i){var n=false;if(e.x===t.x){n=true}else if(t.x===i.x){if(t.y<i.y&&e.y<=t.y||i.y<t.y&&t.y<=e.y){n=true}}else{var r=this.lineFunction(e,t);var a=this.calculateFunction(r,i.x);if(!(e.y<=t.y&&i.y<=a)&&!(t.y<=e.y&&i.y>=a)){n=true}}return n},isLine:function(e,t,i){var n=this.lineFunction(e,t);var r=this.calculateFunction(n,i.x);return e.x===t.x&&t.x===i.x||M(r,1)===M(i.y,1)},lineFunction:function(e,t){var i=(t.y-e.y)/(t.x-e.x);var n=e.y-i*e.x;return[n,i]},controlPoints:function(e,t,i){var n=T;var r=D;var a=false;var o=false;var s;if(this.isLine(e,t,i)){s=this.tangent(e,t,T,D)}else{var l={x:this.isMonotonicByField(e,t,i,T),y:this.isMonotonicByField(e,t,i,D)};if(l.x&&l.y){s=this.tangent(e,i,T,D);a=true}else{if(this.invertAxis(e,t,i)){n=D;r=T}if(l[n]){s=0}else{var d;if(i[r]<e[r]&&e[r]<=t[r]||e[r]<i[r]&&t[r]<=e[r]){d=gn((i[r]-e[r])*(t[n]-e[n]))}else{d=-gn((i[n]-e[n])*(t[r]-e[r]))}s=vn*d;o=true}}}var u=this.secondControlPoint(s,e,t,n,r);if(o){var c=n;n=r;r=c}var f=this.firstControlPoint(s,t,i,n,r);if(a){this.restrictControlPoint(e,t,u,s);this.restrictControlPoint(t,i,f,s)}return[u,f]},restrictControlPoint:function(e,t,i,n){if(e.y<t.y){if(t.y<i.y){i.x=e.x+(t.y-e.y)/n;i.y=t.y}else if(i.y<e.y){i.x=t.x-(t.y-e.y)/n;i.y=e.y}}else{if(i.y<t.y){i.x=e.x-(e.y-t.y)/n;i.y=t.y}else if(e.y<i.y){i.x=t.x+(e.y-t.y)/n;i.y=e.y}}},tangent:function(e,t,i,n){var r=t[i]-e[i];var a=t[n]-e[n];var o;if(r===0){o=0}else{o=a/r}return o},isMonotonicByField:function(e,t,i,n){return i[n]>t[n]&&t[n]>e[n]||i[n]<t[n]&&t[n]<e[n]},firstControlPoint:function(e,t,i,n,r){var a=t[n];var o=i[n];var s=(o-a)*pn;return this.point(a+s,t[r]+s*e,n,r)},secondControlPoint:function(e,t,i,n,r){var a=t[n];var o=i[n];var s=(o-a)*pn;return this.point(o-s,i[r]-s*e,n,r)},point:function(e,t,i,n){var r=new N.Point;r[i]=e;r[n]=t;return r},calculateFunction:function(e,t){var i=e.length;var n=0;for(var r=0;r<i;r++){n+=Math.pow(t,r)*e[r]}return n}});function gn(e){return e<=0?-1:1}j.Gradients=Et;kendo.deepExtend(kendo.dataviz,{constants:we,services:je,autoMajorUnit:bt,Point:m,Box:R,Ring:kt,Sector:xt,ShapeBuilder:St,ShapeElement:Tt,ChartElement:_,BoxElement:u,RootElement:Mt,FloatElement:Ft,Text:zt,TextBox:Ht,Title:Nt,AxisLabel:Ot,Axis:c,Note:Ut,CategoryAxis:Ti,DateCategoryAxis:Ni,DateValueAxis:Xi,NumericAxis:r,LogarithmicAxis:tn,PolarAxis:dn,RadarCategoryAxis:ln,RadarNumericAxis:fn,RadarLogarithmicAxis:hn,CurveProcessor:mn,rectToBox:Bt,addClass:ye,removeClass:Ce,alignPathToPixel:Se,clockwise:Te,convertableToNumber:Ae,deepExtend:f,elementStyles:Fe,getSpacing:l,getTemplate:Ge,getter:q,grep:qe,hasClasses:$e,HashMap:Ke,inArray:p,interpolateValue:Ye,InstanceObserver:Xe,isArray:ke,isFunction:G,isNumber:o,isObject:Ee,isString:De,map:Ze,mousewheelDelta:Je,FontLoader:ct,setDefaultOptions:n,sparseArrayLimits:ft,styleValue:Ie,find:ht,elementScale:_t,append:et,bindEvents:tt,Class:e,defined:A,deg:it,elementOffset:nt,elementSize:rt,eventElement:at,eventCoordinates:ot,last:E,limitValue:I,logToConsole:kendo.logToConsole,objectKey:st,rad:lt,round:M,unbindEvents:dt,valueOrDefault:ut,absoluteDateDiff:di,addDuration:P,addTicks:F,ceilDate:pi,dateComparer:vi,dateDiff:z,dateEquals:mi,dateIndex:_i,duration:bi,floorDate:hi,lteDateIndex:wi,startOfWeek:ui,toDate:b,parseDate:ki,parseDates:yi,toTime:B,firstDay:xi})})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("dataviz/core/core",["dataviz/core/kendo-core"],e)})(function(){(function(n){var t=kendo.dataviz;var e=t.services;var r=kendo.drawing;t.SASS_THEMES=["sass","default-v2","bootstrap-v4","material-v2"];t.ExportMixin={extend:function(e,t){if(!e.exportVisual){throw new Error("Mixin target has no exportVisual method defined.")}e.exportSVG=this.exportSVG;e.exportImage=this.exportImage;e.exportPDF=this.exportPDF;if(!t){e.svg=this.svg;e.imageDataURL=this.imageDataURL}},exportSVG:function(e){return r.exportSVG(this.exportVisual(),e)},exportImage:function(e){return r.exportImage(this.exportVisual(e),e)},exportPDF:function(e){return r.exportPDF(this.exportVisual(),e)},svg:function(){if(r.svg.Surface){return r.svg.exportGroup(this.exportVisual())}else{throw new Error("SVG Export failed. Unable to export instantiate kendo.drawing.svg.Surface")}},imageDataURL:function(){if(!kendo.support.canvas){return null}if(r.canvas.Surface){var e=n("<div />").css({display:"none",width:this.element.width(),height:this.element.height()}).appendTo(document.body);var t=new r.canvas.Surface(e[0]);t.draw(this.exportVisual());var i=t._rootElement.toDataURL();t.destroy();e.remove();return i}else{throw new Error("Image Export failed. Unable to export instantiate kendo.drawing.canvas.Surface")}}};e.IntlService.register({format:function(e){return kendo.format.apply(null,[e].concat(Array.prototype.slice.call(arguments,1)))},toString:kendo.toString,parseDate:kendo.parseDate,firstDay:function(){return kendo.culture().calendars.standard.firstDay}});e.TemplateService.register({compile:kendo.template});t.Point2D=t.Point;t.Box2D=t.Box;t.mwDelta=function(e){return t.mousewheelDelta(e.originalEvent)}})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.dataviz.core",["dataviz/core/kendo-core","dataviz/core/core"],e)})(function(){var e={id:"dataviz.core",name:"Core",description:"The DataViz core functions",category:"dataviz",depends:["core","drawing"],hidden:true}},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("dataviz/themes/chart-base-theme",["kendo.dataviz.core"],e)})(function(){(function(){window.kendo.dataviz=window.kendo.dataviz||{};var e=1.5;var t=.4;var i="#000";var n="Arial, Helvetica, sans-serif";var r="11px "+n;var a="12px "+n;var o="16px "+n;var s="transparent";var l="#fff";var d=function(){return{icon:{border:{width:1}},label:{font:a,padding:3},line:{length:10,width:2},visible:true}};var u=function(){return{labels:{font:a},notes:d(),title:{font:o,margin:5}}};var c=function(){return{highlight:{markers:{border:{}}},line:{opacity:1,width:0},markers:{size:6,visible:false},opacity:.4}};var f=function(){return{highlight:{markers:{border:{}}},line:{opacity:1,width:0},markers:{size:6,visible:false},opacity:.4}};var h=function(){return{gap:e,spacing:t}};var p=function(){return{outliersField:"",meanField:"",border:{_brightness:.8,width:1},downColor:l,gap:1,highlight:{border:{opacity:1,width:2},whiskers:{width:3},mean:{width:2},median:{width:2}},mean:{width:2},median:{width:2},spacing:.3,whiskers:{width:2}}};var v=function(){return{border:{width:0},labels:{background:s},opacity:.6}};var m=function(){return{gap:e,spacing:t,target:{color:"#ff0000"}}};var g=function(){return{border:{_brightness:.8,width:1},downColor:l,gap:1,highlight:{border:{opacity:1,width:2},line:{width:2}},line:{color:i,width:1},spacing:.3}};var _=function(){return{gap:e,spacing:t}};var b=function(){return{margin:1}};var w=function(){return{width:2}};var k=function(){return{gap:1,highlight:{line:{opacity:1,width:3}},line:{width:1},spacing:.3}};var y=function(){return{line:{opacity:1,width:0},markers:{size:6,visible:false},opacity:.5}};var x=function(){return{markers:{visible:false},width:2}};var C=function(){return{gap:e,spacing:t}};var S=function(){return{gap:e,spacing:t}};var T=function(){return{width:1}};var D=function(){return{gap:.5,line:{color:i,width:1},spacing:t}};var A=function(){return{labels:{background:"",color:"",padding:{top:5,bottom:5,left:7,right:7}}}};var E=function(){return{labels:{background:"",color:"",padding:{top:5,bottom:5,left:7,right:7}}}};var I=function(e){return{visible:true,labels:{font:r},overlay:e.gradients?{}:{gradient:"none"},area:c(),rangeArea:f(),verticalRangeArea:f(),bar:h(),boxPlot:p(),bubble:v(),bullet:m(),candlestick:g(),column:_(),pie:A(),donut:b(),funnel:E(),horizontalWaterfall:D(),line:w(),notes:d(),ohlc:k(),radarArea:y(),radarLine:x(),polarArea:y(),polarLine:x(),rangeBar:C(),rangeColumn:S(),scatterLine:T(),verticalArea:c(),verticalBoxPlot:p(),verticalBullet:m(),verticalLine:w(),waterfall:D()}};var M=function(){return{font:o}};var R=function(){return{labels:{font:a}}};var F=function(e){if(e===void 0){e={}}return{axisDefaults:u(),categoryAxis:{majorGridLines:{visible:true}},navigator:{pane:{height:90,margin:{top:10}}},seriesDefaults:I(e),title:M(),legend:R()}};kendo.deepExtend(kendo.dataviz,{chartBaseTheme:F})})()},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("dataviz/themes/auto-theme",["kendo.dataviz.core"],e)})(function(){(function(l){var t;var i=30;function d(){var e='<div class="k-var--series-a"></div>'+'<div class="k-var--series-b"></div>'+'<div class="k-var--series-c"></div>'+'<div class="k-var--series-d"></div>'+'<div class="k-var--series-e"></div>'+'<div class="k-var--series-f"></div>';for(var t=0;t<i;t++){e+='<div class="k-var--series-'+(t+1)+'"></div>'}return e}function e(e){if(!e&&t){return t}var a={chart:kendo.dataviz.chartBaseTheme()};var i=l('<div style="display: none">'+'  <div class="k-var--accent"></div>'+'  <div class="k-var--accent-contrast"></div>'+'  <div class="k-var--base"></div>'+'  <div class="k-var--background"></div>'+'  <div class="k-var--normal-background"></div>'+'  <div class="k-var--normal-text-color"></div>'+'  <div class="k-var--hover-background"></div>'+'  <div class="k-var--hover-text-color"></div>'+'  <div class="k-var--selected-background"></div>'+'  <div class="k-var--selected-text-color"></div>'+'  <div class="k-var--chart-error-bars-background"></div>'+'  <div class="k-var--chart-notes-background"></div>'+'  <div class="k-var--chart-notes-border"></div>'+'  <div class="k-var--chart-notes-lines"></div>'+'  <div class="k-var--chart-crosshair-background"></div>'+'  <div class="k-var--chart-inactive"></div>'+'  <div class="k-var--chart-major-lines"></div>'+'  <div class="k-var--chart-minor-lines"></div>'+'  <div class="k-var--chart-area-opacity"></div>'+'  <div class="k-var--chart-area-inactive-opacity"></div>'+'  <div class="k-var--chart-line-inactive-opacity"></div>'+'  <div class="k-widget k-widget-2021 k-chart">'+'      <div class="k-var--chart-font"></div>'+'      <div class="k-var--chart-title-font"></div>'+'      <div class="k-var--chart-label-font"></div>'+"  </div>"+'  <div class="k-var--series-unset"></div>'+'  <div class="k-var--series">'+d()+"  </div>"+'  <div class="k-var--gauge-pointer"></div>'+'  <div class="k-var--gauge-track"></div>'+"</div>").appendTo(document.body);function n(e,t){s(e,o(t,"backgroundColor"))}function o(e,t){return i.find(".k-var--"+e).css(t)}function s(e,t){var i=a;var n=e.split(".");var r=n.shift();while(n.length>0){i=i[r]=i[r]||{};r=n.shift()}i[r]=t}function r(e,t){var i=parseFloat(o(t,"opacity"));if(!isNaN(i)&&i<1){e.forEach(function(e){s("chart.seriesDefaults."+e+".highlight.inactiveOpacity",i)})}}(function e(){n("chart.axisDefaults.crosshair.color","chart-crosshair-background");n("chart.axisDefaults.labels.color","normal-text-color");n("chart.axisDefaults.line.color","chart-major-lines");n("chart.axisDefaults.majorGridLines.color","chart-major-lines");n("chart.axisDefaults.minorGridLines.color","chart-minor-lines");n("chart.axisDefaults.notes.icon.background","chart-notes-background");n("chart.axisDefaults.notes.icon.border.color","chart-notes-border");n("chart.axisDefaults.notes.line.color","chart-notes-lines");n("chart.axisDefaults.title.color","normal-text-color");n("chart.chartArea.background","background");n("chart.legend.inactiveItems.labels.color","chart-inactive");n("chart.legend.inactiveItems.markers.color","chart-inactive");n("chart.legend.labels.color","normal-text-color");n("chart.seriesDefaults.boxPlot.downColor","chart-major-lines");n("chart.seriesDefaults.boxPlot.mean.color","base");n("chart.seriesDefaults.boxPlot.median.color","base");n("chart.seriesDefaults.boxPlot.whiskers.color","accent");n("chart.seriesDefaults.bullet.target.color","accent");n("chart.seriesDefaults.candlestick.downColor","normal-text-color");n("chart.seriesDefaults.candlestick.line.color","normal-text-color");n("chart.seriesDefaults.errorBars.color","chart-error-bars-background");n("chart.seriesDefaults.horizontalWaterfall.line.color","chart-major-lines");n("chart.seriesDefaults.icon.border.color","chart-major-lines");n("chart.seriesDefaults.labels.background","background");n("chart.seriesDefaults.labels.color","normal-text-color");n("chart.seriesDefaults.notes.icon.background","chart-notes-background");n("chart.seriesDefaults.notes.icon.border.color","chart-notes-border");n("chart.seriesDefaults.notes.line.color","chart-notes-lines");n("chart.seriesDefaults.verticalBoxPlot.downColor","chart-major-lines");n("chart.seriesDefaults.verticalBoxPlot.mean.color","base");n("chart.seriesDefaults.verticalBoxPlot.median.color","base");n("chart.seriesDefaults.verticalBoxPlot.whiskers.color","accent");n("chart.seriesDefaults.verticalBullet.target.color","accent");n("chart.seriesDefaults.waterfall.line.color","chart-major-lines");n("chart.title.color","normal-text-color");n("diagram.shapeDefaults.fill.color","accent");n("diagram.shapeDefaults.content.color","accent-contrast");n("diagram.shapeDefaults.connectorDefaults.fill.color","normal-text-color");n("diagram.shapeDefaults.connectorDefaults.stroke.color","accent-contrast");n("diagram.shapeDefaults.connectorDefaults.hover.fill.color","accent-contrast");n("diagram.shapeDefaults.connectorDefaults.hover.stroke.color","normal-text-color");n("diagram.editable.resize.handles.stroke.color","normal-text-color");n("diagram.editable.resize.handles.fill.color","normal-background");n("diagram.editable.resize.handles.hover.stroke.color","normal-text-color");n("diagram.editable.resize.handles.hover.fill.color","normal-text-color");n("diagram.selectable.stroke.color","normal-text-color");n("diagram.connectionDefaults.stroke.color","normal-text-color");n("diagram.connectionDefaults.content.color","normal-text-color");n("diagram.connectionDefaults.selection.handles.fill.color","accent-contrast");n("diagram.connectionDefaults.selection.handles.stroke.color","normal-text-color");n("diagram.connectionDefaults.selection.stroke.color","normal-text-color");n("gauge.pointer.color","gauge-pointer");n("gauge.scale.labels.color","normal-text-color");n("gauge.scale.minorTicks.color","normal-text-color");n("gauge.scale.majorTicks.color","normal-text-color");n("gauge.scale.line.color","normal-text-color");n("gauge.scale.rangePlaceholderColor","gauge-track");var t=parseFloat(o("chart-area-opacity","opacity"));if(!isNaN(t)){s("chart.seriesDefaults.area.opacity",t);s("chart.seriesDefaults.radarArea.opacity",t);s("chart.seriesDefaults.verticalArea.opacity",t);s("chart.seriesDefaults.labels.opacity",t)}r(["area","verticalArea"],"chart-area-inactive-opacity");r(["line","verticalLine"],"chart-line-inactive-opacity")})();(function e(){function t(e){return o(e,"fontSize")+" "+o(e,"fontFamily")}var i=t("chart-font");var n=t("chart-title-font");var r=t("chart-label-font");s("chart.axisDefaults.labels.font",r);s("chart.axisDefaults.notes.label.font",i);s("chart.axisDefaults.title.font",i);s("chart.legend.labels.font",i);s("chart.seriesDefaults.labels.font",r);s("chart.seriesDefaults.notes.label.font",i);s("chart.title.font",n)})();(function e(){function n(e){return e.toLowerCase().charCodeAt(0)-"a".charCodeAt(0)}function r(e){var t=e.match(/series-([a-z])$/);if(t!==null){return n(t[1])}var i=e.split("--series-")[1];return parseInt(i,10)-1}var t=l(".k-var--series div").toArray();var a=l(".k-var--series-unset").css("backgroundColor");var i=t.reduce(function(e,t){var i=r(t.className);var n=l(t).css("backgroundColor");if(n!==a){e[i]=n}return e},[]);s("chart.seriesColors",i)})();i.remove();t=a;return a}kendo.dataviz.autoTheme=e})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("dataviz/themes/themes",["dataviz/themes/chart-base-theme"],e)})(function(){(function(t){var e=window.kendo,i=e.dataviz.ui,r=e.deepExtend;var n="#000",a="Arial,Helvetica,sans-serif",o="12px "+a,u="#fff";var s=e.dataviz.chartBaseTheme({gradients:true});var l={scale:{labels:{font:o}}};var d={shapeDefaults:{hover:{opacity:.2},stroke:{width:0}},editable:{resize:{handles:{width:7,height:7}}},selectable:{stroke:{width:1,dashType:"dot"}},connectionDefaults:{stroke:{width:2},selection:{handles:{width:8,height:8}},editable:{tools:["edit","delete"]}}};var c=i.themes,f=i.registerTheme=function(e,t){var i={};i.chart=r({},s,t.chart);i.gauge=r({},l,t.gauge);i.diagram=r({},d,t.diagram);i.treeMap=r({},t.treeMap);var n=i.chart.seriesDefaults;n.verticalLine=r({},n.line);n.verticalArea=r({},n.area);n.rangeArea=r({},n.area);n.verticalRangeArea=r({},n.rangeArea);n.verticalBoxPlot=r({},n.boxPlot);n.polarArea=r({},n.radarArea);n.polarLine=r({},n.radarLine);c[e]=i};f("black",{chart:{title:{color:u},legend:{labels:{color:u},inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}},seriesDefaults:{labels:{color:u},errorBars:{color:u},notes:{icon:{background:"#3b3b3b",border:{color:"#8e8e8e"}},label:{color:u},line:{color:"#8e8e8e"}},pie:{overlay:{gradient:"sharpBevel"}},donut:{overlay:{gradient:"sharpGlass"}},line:{markers:{background:"#3d3d3d"}},scatter:{markers:{background:"#3d3d3d"}},scatterLine:{markers:{background:"#3d3d3d"}},waterfall:{line:{color:"#8e8e8e"}},horizontalWaterfall:{line:{color:"#8e8e8e"}},candlestick:{downColor:"#555",line:{color:u},border:{_brightness:1.5,opacity:1},highlight:{border:{color:u,opacity:.2}}},ohlc:{line:{color:u}}},chartArea:{background:"#3d3d3d"},seriesColors:["#0081da","#3aafff","#99c900","#ffeb3d","#b20753","#ff4195"],axisDefaults:{line:{color:"#8e8e8e"},labels:{color:u},majorGridLines:{color:"#545454"},minorGridLines:{color:"#454545"},title:{color:u},crosshair:{color:"#8e8e8e"},notes:{icon:{background:"#3b3b3b",border:{color:"#8e8e8e"}},label:{color:u},line:{color:"#8e8e8e"}}}},gauge:{pointer:{color:"#0070e4"},scale:{rangePlaceholderColor:"#1d1d1d",labels:{color:u},minorTicks:{color:u},majorTicks:{color:u},line:{color:u}}},diagram:{shapeDefaults:{fill:{color:"#0066cc"},connectorDefaults:{fill:{color:u},stroke:{color:"#384049"},hover:{fill:{color:"#3d3d3d"},stroke:{color:"#efefef"}}},content:{color:u}},editable:{resize:{handles:{fill:{color:"#3d3d3d"},stroke:{color:u},hover:{fill:{color:u},stroke:{color:u}}}},rotate:{thumb:{stroke:{color:u},fill:{color:u}}}},selectable:{stroke:{color:u}},connectionDefaults:{stroke:{color:u},content:{color:u},selection:{handles:{fill:{color:"#3d3d3d"},stroke:{color:"#efefef"}}}}},treeMap:{colors:[["#0081da","#314b5c"],["#3aafff","#3c5464"],["#99c900","#4f5931"],["#ffeb3d","#64603d"],["#b20753","#543241"],["#ff4195","#643e4f"]]}});f("blueopal",{chart:{title:{color:"#293135"},legend:{labels:{color:"#293135"},inactiveItems:{labels:{color:"#27A5BA"},markers:{color:"#27A5BA"}}},seriesDefaults:{labels:{color:n,background:u,opacity:.5},errorBars:{color:"#293135"},candlestick:{downColor:"#c4d0d5",line:{color:"#9aabb2"}},waterfall:{line:{color:"#9aabb2"}},horizontalWaterfall:{line:{color:"#9aabb2"}},notes:{icon:{background:"transparent",border:{color:"#9aabb2"}},label:{color:"#293135"},line:{color:"#9aabb2"}}},seriesColors:["#0069a5","#0098ee","#7bd2f6","#ffb800","#ff8517","#e34a00"],axisDefaults:{line:{color:"#9aabb2"},labels:{color:"#293135"},majorGridLines:{color:"#c4d0d5"},minorGridLines:{color:"#edf1f2"},title:{color:"#293135"},crosshair:{color:"#9aabb2"},notes:{icon:{background:"transparent",border:{color:"#9aabb2"}},label:{color:"#293135"},line:{color:"#9aabb2"}}}},gauge:{pointer:{color:"#005c83"},scale:{rangePlaceholderColor:"#daecf4",labels:{color:"#293135"},minorTicks:{color:"#293135"},majorTicks:{color:"#293135"},line:{color:"#293135"}}},diagram:{shapeDefaults:{fill:{color:"#7ec6e3"},connectorDefaults:{fill:{color:"#003f59"},stroke:{color:u},hover:{fill:{color:u},stroke:{color:"#003f59"}}},content:{color:"#293135"}},editable:{resize:{handles:{fill:{color:u},stroke:{color:"#003f59"},hover:{fill:{color:"#003f59"},stroke:{color:"#003f59"}}}},rotate:{thumb:{stroke:{color:"#003f59"},fill:{color:"#003f59"}}}},selectable:{stroke:{color:"#003f59"}},connectionDefaults:{stroke:{color:"#003f59"},content:{color:"#293135"},selection:{handles:{fill:{color:"#3d3d3d"},stroke:{color:"#efefef"}}}}},treeMap:{colors:[["#0069a5","#bad7e7"],["#0098ee","#b9e0f5"],["#7bd2f6","#ceeaf6"],["#ffb800","#e6e3c4"],["#ff8517","#e4d8c8"],["#e34a00","#ddccc2"]]}});f("highcontrast",{chart:{title:{color:"#ffffff"},legend:{labels:{color:"#ffffff"},inactiveItems:{labels:{color:"#66465B"},markers:{color:"#66465B"}}},seriesDefaults:{labels:{color:"#ffffff"},errorBars:{color:"#ffffff"},notes:{icon:{background:"transparent",border:{color:"#ffffff"}},label:{color:"#ffffff"},line:{color:"#ffffff"}},pie:{overlay:{gradient:"sharpGlass"}},donut:{overlay:{gradient:"sharpGlass"}},line:{markers:{background:"#2c232b"}},scatter:{markers:{background:"#2c232b"}},scatterLine:{markers:{background:"#2c232b"}},area:{opacity:.5},waterfall:{line:{color:"#ffffff"}},horizontalWaterfall:{line:{color:"#ffffff"}},candlestick:{downColor:"#664e62",line:{color:"#ffffff"},border:{_brightness:1.5,opacity:1},highlight:{border:{color:"#ffffff",opacity:1}}},ohlc:{line:{color:"#ffffff"}}},chartArea:{background:"#2c232b"},seriesColors:["#a7008f","#ffb800","#3aafff","#99c900","#b20753","#ff4195"],axisDefaults:{line:{color:"#ffffff"},labels:{color:"#ffffff"},majorGridLines:{color:"#664e62"},minorGridLines:{color:"#4f394b"},title:{color:"#ffffff"},crosshair:{color:"#ffffff"},notes:{icon:{background:"transparent",border:{color:"#ffffff"}},label:{color:"#ffffff"},line:{color:"#ffffff"}}}},gauge:{pointer:{color:"#a7008f"},scale:{rangePlaceholderColor:"#2c232b",labels:{color:"#ffffff"},minorTicks:{color:"#2c232b"},majorTicks:{color:"#664e62"},line:{color:"#ffffff"}}},diagram:{shapeDefaults:{fill:{color:"#a7018f"},connectorDefaults:{fill:{color:u},stroke:{color:"#2c232b"},hover:{fill:{color:"#2c232b"},stroke:{color:u}}},content:{color:u}},editable:{resize:{handles:{fill:{color:"#2c232b"},stroke:{color:u},hover:{fill:{color:u},stroke:{color:u}}}},rotate:{thumb:{stroke:{color:u},fill:{color:u}}}},selectable:{stroke:{color:u}},connectionDefaults:{stroke:{color:u},content:{color:u},selection:{handles:{fill:{color:"#2c232b"},stroke:{color:u}}}}},treeMap:{colors:[["#a7008f","#451c3f"],["#ffb800","#564122"],["#3aafff","#2f3f55"],["#99c900","#424422"],["#b20753","#471d33"],["#ff4195","#562940"]]}});f("default",{chart:{title:{color:"#8e8e8e"},legend:{labels:{color:"#232323"},inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}},seriesDefaults:{labels:{color:n,background:u,opacity:.5},errorBars:{color:"#232323"},candlestick:{downColor:"#dedede",line:{color:"#8d8d8d"}},waterfall:{line:{color:"#8e8e8e"}},horizontalWaterfall:{line:{color:"#8e8e8e"}},notes:{icon:{background:"transparent",border:{color:"#8e8e8e"}},label:{color:"#232323"},line:{color:"#8e8e8e"}}},seriesColors:["#ff6800","#a0a700","#ff8d00","#678900","#ffb53c","#396000"],axisDefaults:{line:{color:"#8e8e8e"},labels:{color:"#232323"},minorGridLines:{color:"#f0f0f0"},majorGridLines:{color:"#dfdfdf"},title:{color:"#232323"},crosshair:{color:"#8e8e8e"},notes:{icon:{background:"transparent",border:{color:"#8e8e8e"}},label:{color:"#232323"},line:{color:"#8e8e8e"}}}},gauge:{pointer:{color:"#ea7001"},scale:{rangePlaceholderColor:"#dedede",labels:{color:"#2e2e2e"},minorTicks:{color:"#2e2e2e"},majorTicks:{color:"#2e2e2e"},line:{color:"#2e2e2e"}}},diagram:{shapeDefaults:{fill:{color:"#e15613"},connectorDefaults:{fill:{color:"#282828"},stroke:{color:u},hover:{fill:{color:u},stroke:{color:"#282828"}}},content:{color:"#2e2e2e"}},editable:{resize:{handles:{fill:{color:u},stroke:{color:"#282828"},hover:{fill:{color:"#282828"},stroke:{color:"#282828"}}}},rotate:{thumb:{stroke:{color:"#282828"},fill:{color:"#282828"}}}},selectable:{stroke:{color:"#a7018f"}},connectionDefaults:{stroke:{color:"#282828"},content:{color:"#2e2e2e"},selection:{handles:{fill:{color:u},stroke:{color:"#282828"}}}}},treeMap:{colors:[["#ff6800","#edcfba"],["#a0a700","#dadcba"],["#ff8d00","#edd7ba"],["#678900","#cfd6ba"],["#ffb53c","#eddfc6"],["#396000","#c6ceba"]]}});f("silver",{chart:{title:{color:"#4e5968"},legend:{labels:{color:"#4e5968"},inactiveItems:{labels:{color:"#B1BCC8"},markers:{color:"#B1BCC8"}}},seriesDefaults:{labels:{color:"#293135",background:"#eaeaec",opacity:.5},errorBars:{color:"#4e5968"},notes:{icon:{background:"transparent",border:{color:"#4e5968"}},label:{color:"#4e5968"},line:{color:"#4e5968"}},line:{markers:{background:"#eaeaec"}},scatter:{markers:{background:"#eaeaec"}},scatterLine:{markers:{background:"#eaeaec"}},pie:{connectors:{color:"#A6B1C0"}},donut:{connectors:{color:"#A6B1C0"}},waterfall:{line:{color:"#a6b1c0"}},horizontalWaterfall:{line:{color:"#a6b1c0"}},candlestick:{downColor:"#a6afbe"}},chartArea:{background:"#eaeaec"},seriesColors:["#007bc3","#76b800","#ffae00","#ef4c00","#a419b7","#430B62"],axisDefaults:{line:{color:"#a6b1c0"},labels:{color:"#4e5968"},majorGridLines:{color:"#dcdcdf"},minorGridLines:{color:"#eeeeef"},title:{color:"#4e5968"},crosshair:{color:"#a6b1c0"},notes:{icon:{background:"transparent",border:{color:"#4e5968"}},label:{color:"#4e5968"},line:{color:"#4e5968"}}}},gauge:{pointer:{color:"#0879c0"},scale:{rangePlaceholderColor:"#f3f3f4",labels:{color:"#515967"},minorTicks:{color:"#515967"},majorTicks:{color:"#515967"},line:{color:"#515967"}}},diagram:{shapeDefaults:{fill:{color:"#1c82c2"},connectorDefaults:{fill:{color:"#515967"},stroke:{color:u},hover:{fill:{color:u},stroke:{color:"#282828"}}},content:{color:"#515967"}},editable:{resize:{handles:{fill:{color:u},stroke:{color:"#515967"},hover:{fill:{color:"#515967"},stroke:{color:"#515967"}}}},rotate:{thumb:{stroke:{color:"#515967"},fill:{color:"#515967"}}}},selectable:{stroke:{color:"#515967"}},connectionDefaults:{stroke:{color:"#515967"},content:{color:"#515967"},selection:{handles:{fill:{color:u},stroke:{color:"#515967"}}}}},treeMap:{colors:[["#007bc3","#c2dbea"],["#76b800","#dae7c3"],["#ffae00","#f5e5c3"],["#ef4c00","#f2d2c3"],["#a419b7","#e3c7e8"],["#430b62","#d0c5d7"]]}});f("metro",{chart:{title:{color:"#777777"},legend:{labels:{color:"#777777"},inactiveItems:{labels:{color:"#CBCBCB"},markers:{color:"#CBCBCB"}}},seriesDefaults:{labels:{color:n},errorBars:{color:"#777777"},notes:{icon:{background:"transparent",border:{color:"#777777"}},label:{color:"#777777"},line:{color:"#777777"}},candlestick:{downColor:"#c7c7c7",line:{color:"#787878"}},waterfall:{line:{color:"#c7c7c7"}},horizontalWaterfall:{line:{color:"#c7c7c7"}},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:["#8ebc00","#309b46","#25a0da","#ff6900","#e61e26","#d8e404","#16aba9","#7e51a1","#313131","#ed1691"],axisDefaults:{line:{color:"#c7c7c7"},labels:{color:"#777777"},minorGridLines:{color:"#c7c7c7"},majorGridLines:{color:"#c7c7c7"},title:{color:"#777777"},crosshair:{color:"#c7c7c7"},notes:{icon:{background:"transparent",border:{color:"#777777"}},label:{color:"#777777"},line:{color:"#777777"}}}},gauge:{pointer:{color:"#8ebc00"},scale:{rangePlaceholderColor:"#e6e6e6",labels:{color:"#777"},minorTicks:{color:"#777"},majorTicks:{color:"#777"},line:{color:"#777"}}},diagram:{shapeDefaults:{fill:{color:"#8ebc00"},connectorDefaults:{fill:{color:n},stroke:{color:u},hover:{fill:{color:u},stroke:{color:n}}},content:{color:"#777"}},editable:{resize:{handles:{fill:{color:u},stroke:{color:"#787878"},hover:{fill:{color:"#787878"},stroke:{color:"#787878"}}}},rotate:{thumb:{stroke:{color:"#787878"},fill:{color:"#787878"}}}},selectable:{stroke:{color:"#515967"}},connectionDefaults:{stroke:{color:"#787878"},content:{color:"#777"},selection:{handles:{fill:{color:u},stroke:{color:"#787878"}}}}},treeMap:{colors:[["#8ebc00","#e8f2cc"],["#309b46","#d6ebda"],["#25a0da","#d3ecf8"],["#ff6900","#ffe1cc"],["#e61e26","#fad2d4"],["#d8e404","#f7facd"],["#16aba9","#d0eeee"],["#7e51a1","#e5dcec"],["#313131","#d6d6d6"],["#ed1691","#fbd0e9"]]}});f("metroblack",{chart:{title:{color:"#ffffff"},legend:{labels:{color:"#ffffff"},inactiveItems:{labels:{color:"#797979"},markers:{color:"#797979"}}},seriesDefaults:{border:{_brightness:1},labels:{color:"#ffffff"},errorBars:{color:"#ffffff"},notes:{icon:{background:"transparent",border:{color:"#cecece"}},label:{color:"#ffffff"},line:{color:"#cecece"}},line:{markers:{background:"#0e0e0e"}},bubble:{opacity:.6},scatter:{markers:{background:"#0e0e0e"}},scatterLine:{markers:{background:"#0e0e0e"}},candlestick:{downColor:"#828282",line:{color:"#ffffff"}},waterfall:{line:{color:"#cecece"}},horizontalWaterfall:{line:{color:"#cecece"}},overlay:{gradient:"none"}},chartArea:{background:"#0e0e0e"},seriesColors:["#00aba9","#309b46","#8ebc00","#ff6900","#e61e26","#d8e404","#25a0da","#7e51a1","#313131","#ed1691"],axisDefaults:{line:{color:"#cecece"},labels:{color:"#ffffff"},minorGridLines:{color:"#2d2d2d"},majorGridLines:{color:"#333333"},title:{color:"#ffffff"},crosshair:{color:"#cecece"},notes:{icon:{background:"transparent",border:{color:"#cecece"}},label:{color:"#ffffff"},line:{color:"#cecece"}}}},gauge:{pointer:{color:"#00aba9"},scale:{rangePlaceholderColor:"#2d2d2d",labels:{color:"#ffffff"},minorTicks:{color:"#333333"},majorTicks:{color:"#cecece"},line:{color:"#cecece"}}},diagram:{shapeDefaults:{fill:{color:"#00aba9"},connectorDefaults:{fill:{color:u},stroke:{color:"#0e0e0e"},hover:{fill:{color:"#0e0e0e"},stroke:{color:u}}},content:{color:u}},editable:{resize:{handles:{fill:{color:"#0e0e0e"},stroke:{color:"#787878"},hover:{fill:{color:"#787878"},stroke:{color:"#787878"}}}},rotate:{thumb:{stroke:{color:u},fill:{color:u}}}},selectable:{stroke:{color:"#787878"}},connectionDefaults:{stroke:{color:u},content:{color:u},selection:{handles:{fill:{color:"#0e0e0e"},stroke:{color:u}}}}},treeMap:{colors:[["#00aba9","#0b2d2d"],["#309b46","#152a19"],["#8ebc00","#28310b"],["#ff6900","#3e200b"],["#e61e26","#391113"],["#d8e404","#36390c"],["#25a0da","#132b37"],["#7e51a1","#241b2b"],["#313131","#151515"],["#ed1691","#3b1028"]]}});f("moonlight",{chart:{title:{color:"#ffffff"},legend:{labels:{color:"#ffffff"},inactiveItems:{labels:{color:"#A1A7AB"},markers:{color:"#A1A7AB"}}},seriesDefaults:{labels:{color:"#ffffff"},errorBars:{color:"#ffffff"},notes:{icon:{background:"transparent",border:{color:"#8c909e"}},label:{color:"#ffffff"},line:{color:"#8c909e"}},pie:{overlay:{gradient:"sharpBevel"}},donut:{overlay:{gradient:"sharpGlass"}},line:{markers:{background:"#212a33"}},bubble:{opacity:.6},scatter:{markers:{background:"#212a33"}},scatterLine:{markers:{background:"#212a33"}},area:{opacity:.3},candlestick:{downColor:"#757d87",line:{color:"#ea9d06"},border:{_brightness:1.5,opacity:1},highlight:{border:{color:u,opacity:.2}}},waterfall:{line:{color:"#8c909e"}},horizontalWaterfall:{line:{color:"#8c909e"}},ohlc:{line:{color:"#ea9d06"}}},chartArea:{background:"#212a33"},seriesColors:["#ffca08","#ff710f","#ed2e24","#ff9f03","#e13c02","#a00201"],axisDefaults:{line:{color:"#8c909e"},minorTicks:{color:"#8c909e"},majorTicks:{color:"#8c909e"},labels:{color:"#ffffff"},majorGridLines:{color:"#3e424d"},minorGridLines:{color:"#2f3640"},title:{color:"#ffffff"},crosshair:{color:"#8c909e"},notes:{icon:{background:"transparent",border:{color:"#8c909e"}},label:{color:"#ffffff"},line:{color:"#8c909e"}}}},gauge:{pointer:{color:"#f4af03"},scale:{rangePlaceholderColor:"#2f3640",labels:{color:u},minorTicks:{color:"#8c909e"},majorTicks:{color:"#8c909e"},line:{color:"#8c909e"}}},diagram:{shapeDefaults:{fill:{color:"#f3ae03"},connectorDefaults:{fill:{color:u},stroke:{color:"#414550"},hover:{fill:{color:"#414550"},stroke:{color:u}}},content:{color:u}},editable:{resize:{handles:{fill:{color:"#414550"},stroke:{color:u},hover:{fill:{color:u},stroke:{color:u}}}},rotate:{thumb:{stroke:{color:u},fill:{color:u}}}},selectable:{stroke:{color:u}},connectionDefaults:{stroke:{color:u},content:{color:u},selection:{handles:{fill:{color:"#414550"},stroke:{color:u}}}}},treeMap:{colors:[["#ffca08","#4e4b2b"],["#ff710f","#4e392d"],["#ed2e24","#4b2c31"],["#ff9f03","#4e422a"],["#e13c02","#482e2a"],["#a00201","#3b232a"]]}});f("uniform",{chart:{title:{color:"#686868"},legend:{labels:{color:"#686868"},inactiveItems:{labels:{color:"#B6B6B6"},markers:{color:"#B6B6B6"}}},seriesDefaults:{labels:{color:"#686868"},errorBars:{color:"#686868"},notes:{icon:{background:"transparent",border:{color:"#9e9e9e"}},label:{color:"#686868"},line:{color:"#9e9e9e"}},pie:{overlay:{gradient:"sharpBevel"}},donut:{overlay:{gradient:"sharpGlass"}},line:{markers:{background:"#ffffff"}},bubble:{opacity:.6},scatter:{markers:{background:"#ffffff"}},scatterLine:{markers:{background:"#ffffff"}},area:{opacity:.3},candlestick:{downColor:"#cccccc",line:{color:"#cccccc"},border:{_brightness:1.5,opacity:1},highlight:{border:{color:"#cccccc",opacity:.2}}},waterfall:{line:{color:"#9e9e9e"}},horizontalWaterfall:{line:{color:"#9e9e9e"}},ohlc:{line:{color:"#cccccc"}}},chartArea:{background:"#ffffff"},seriesColors:["#527aa3","#6f91b3","#8ca7c2","#a8bdd1","#c5d3e0","#e2e9f0"],axisDefaults:{line:{color:"#9e9e9e"},minorTicks:{color:"#aaaaaa"},majorTicks:{color:"#888888"},labels:{color:"#686868"},majorGridLines:{color:"#dadada"},minorGridLines:{color:"#e7e7e7"},title:{color:"#686868"},crosshair:{color:"#9e9e9e"},notes:{icon:{background:"transparent",border:{color:"#9e9e9e"}},label:{color:"#686868"},line:{color:"#9e9e9e"}}}},gauge:{pointer:{color:"#527aa3"},scale:{rangePlaceholderColor:"#e7e7e7",labels:{color:"#686868"},minorTicks:{color:"#aaaaaa"},majorTicks:{color:"#888888"},line:{color:"#9e9e9e"}}},diagram:{shapeDefaults:{fill:{color:"#d1d1d1"},connectorDefaults:{fill:{color:"#686868"},stroke:{color:u},hover:{fill:{color:u},stroke:{color:"#686868"}}},content:{color:"#686868"}},editable:{resize:{handles:{fill:{color:u},stroke:{color:"#686868"},hover:{fill:{color:"#686868"},stroke:{color:"#686868"}}}},rotate:{thumb:{stroke:{color:"#686868"},fill:{color:"#686868"}}}},selectable:{stroke:{color:"#686868"}},connectionDefaults:{stroke:{color:"#686868"},content:{color:"#686868"},selection:{handles:{fill:{color:u},stroke:{color:"#686868"}}}}},treeMap:{colors:[["#527aa3","#d0d8e1"],["#6f91b3","#d6dde4"],["#8ca7c2","#dce1e7"],["#a8bdd1","#e2e6ea"],["#c5d3e0","#e7eaed"],["#e2e9f0","#edeff0"]]}});f("bootstrap",{chart:{title:{color:"#333333"},legend:{labels:{color:"#333333"},inactiveItems:{labels:{color:"#999999"},markers:{color:"#9A9A9A"}}},seriesDefaults:{labels:{color:"#333333"},overlay:{gradient:"none"},errorBars:{color:"#343434"},notes:{icon:{background:"#000000",border:{color:"#000000"}},label:{color:"#333333"},line:{color:"#000000"}},pie:{overlay:{gradient:"none"}},donut:{overlay:{gradient:"none"}},line:{markers:{background:"#ffffff"}},bubble:{opacity:.6},scatter:{markers:{background:"#ffffff"}},scatterLine:{markers:{background:"#ffffff"}},area:{opacity:.8},candlestick:{downColor:"#d0d0d0",line:{color:"#333333"},border:{_brightness:1.5,opacity:1},highlight:{border:{color:"#b8b8b8",opacity:.2}}},waterfall:{line:{color:"#cccccc"}},horizontalWaterfall:{line:{color:"#cccccc"}},ohlc:{line:{color:"#333333"}}},chartArea:{background:"#ffffff"},seriesColors:["#428bca","#5bc0de","#5cb85c","#f2b661","#e67d4a","#da3b36"],axisDefaults:{line:{color:"#cccccc"},minorTicks:{color:"#ebebeb"},majorTicks:{color:"#cccccc"},labels:{color:"#333333"},majorGridLines:{color:"#cccccc"},minorGridLines:{color:"#ebebeb"},title:{color:"#333333"},crosshair:{color:"#000000"},notes:{icon:{background:"#000000",border:{color:"#000000"}},label:{color:"#ffffff"},line:{color:"#000000"}}}},gauge:{pointer:{color:"#428bca"},scale:{rangePlaceholderColor:"#cccccc",labels:{color:"#333333"},minorTicks:{color:"#ebebeb"},majorTicks:{color:"#cccccc"},line:{color:"#cccccc"}}},diagram:{shapeDefaults:{fill:{color:"#428bca"},connectorDefaults:{fill:{color:"#333333"},stroke:{color:u},hover:{fill:{color:u},stroke:{color:"#333333"}}},content:{color:"#333333"}},editable:{resize:{handles:{fill:{color:u},stroke:{color:"#333333"},hover:{fill:{color:"#333333"},stroke:{color:"#333333"}}}},rotate:{thumb:{stroke:{color:"#333333"},fill:{color:"#333333"}}}},selectable:{stroke:{color:"#333333"}},connectionDefaults:{stroke:{color:"#c4c4c4"},content:{color:"#333333"},selection:{handles:{fill:{color:u},stroke:{color:"#333333"}},stroke:{color:"#333333"}}}},treeMap:{colors:[["#428bca","#d1e0ec"],["#5bc0de","#d6eaf0"],["#5cb85c","#d6e9d6"],["#5cb85c","#f4e8d7"],["#e67d4a","#f2ddd3"],["#da3b36","#f0d0cf"]]}});f("flat",{chart:{title:{color:"#4c5356"},legend:{labels:{color:"#4c5356"},inactiveItems:{labels:{color:"#CBCBCB"},markers:{color:"#CBCBCB"}}},seriesDefaults:{labels:{color:"#4c5356"},errorBars:{color:"#4c5356"},notes:{icon:{background:"transparent",border:{color:"#cdcdcd"}},label:{color:"#4c5356"},line:{color:"#cdcdcd"}},candlestick:{downColor:"#c7c7c7",line:{color:"#787878"}},area:{opacity:.9},waterfall:{line:{color:"#cdcdcd"}},horizontalWaterfall:{line:{color:"#cdcdcd"}},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:["#10c4b2","#ff7663","#ffb74f","#a2df53","#1c9ec4","#ff63a5","#1cc47b"],axisDefaults:{line:{color:"#cdcdcd"},labels:{color:"#4c5356"},minorGridLines:{color:"#cdcdcd"},majorGridLines:{color:"#cdcdcd"},title:{color:"#4c5356"},crosshair:{color:"#cdcdcd"},notes:{icon:{background:"transparent",border:{color:"#cdcdcd"}},label:{color:"#4c5356"},line:{color:"#cdcdcd"}}}},gauge:{pointer:{color:"#10c4b2"},scale:{rangePlaceholderColor:"#cdcdcd",labels:{color:"#4c5356"},minorTicks:{color:"#4c5356"},majorTicks:{color:"#4c5356"},line:{color:"#4c5356"}}},diagram:{shapeDefaults:{fill:{color:"#10c4b2"},connectorDefaults:{fill:{color:"#363940"},stroke:{color:u},hover:{fill:{color:u},stroke:{color:"#363940"}}},content:{color:"#4c5356"}},editable:{resize:{handles:{fill:{color:u},stroke:{color:"#363940"},hover:{fill:{color:"#363940"},stroke:{color:"#363940"}}}},rotate:{thumb:{stroke:{color:"#363940"},fill:{color:"#363940"}}}},selectable:{stroke:{color:"#363940"}},connectionDefaults:{stroke:{color:"#cdcdcd"},content:{color:"#4c5356"},selection:{handles:{fill:{color:u},stroke:{color:"#363940"}},stroke:{color:"#363940"}}}},treeMap:{colors:[["#10c4b2","#cff3f0"],["#ff7663","#ffe4e0"],["#ffb74f","#fff1dc"],["#a2df53","#ecf9dd"],["#1c9ec4","#d2ecf3"],["#ff63a5","#ffe0ed"],["#1cc47b","#d2f3e5"]]}});f("material",{chart:{title:{color:"#444444"},legend:{labels:{color:"#444444"},inactiveItems:{labels:{color:"#CBCBCB"},markers:{color:"#CBCBCB"}}},seriesDefaults:{labels:{color:"#444444"},errorBars:{color:"#444444"},notes:{icon:{background:"transparent",border:{color:"#e5e5e5"}},label:{color:"#444444"},line:{color:"#e5e5e5"}},candlestick:{downColor:"#c7c7c7",line:{color:"#787878"}},area:{opacity:.9},waterfall:{line:{color:"#e5e5e5"}},horizontalWaterfall:{line:{color:"#e5e5e5"}},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#ff9800","#ff5722"],axisDefaults:{line:{color:"#e5e5e5"},labels:{color:"#444444"},minorGridLines:{color:"#e5e5e5"},majorGridLines:{color:"#e5e5e5"},title:{color:"#444444"},crosshair:{color:"#7f7f7f"},notes:{icon:{background:"transparent",border:{color:"#e5e5e5"}},label:{color:"#444444"},line:{color:"#e5e5e5"}}}},gauge:{pointer:{color:"#3f51b5"},scale:{rangePlaceholderColor:"#e5e5e5",labels:{color:"#444444"},minorTicks:{color:"#444444"},majorTicks:{color:"#444444"},line:{color:"#444444"}}},diagram:{shapeDefaults:{fill:{color:"#3f51b5"},connectorDefaults:{fill:{color:"#7f7f7f"},stroke:{color:u},hover:{fill:{color:u},stroke:{color:"#7f7f7f"}}},content:{color:"#444444"}},editable:{resize:{handles:{fill:{color:u},stroke:{color:"#444444"},hover:{fill:{color:"#444444"},stroke:{color:"#444444"}}}},rotate:{thumb:{stroke:{color:"#444444"},fill:{color:"#444444"}}}},selectable:{stroke:{color:"#444444"}},connectionDefaults:{stroke:{color:"#7f7f7f"},content:{color:"#444444"},selection:{handles:{fill:{color:u},stroke:{color:"#444444"}},stroke:{color:"#444444"}}}},treeMap:{colors:[["#3f51b5","#cff3f0"],["#03a9f4","#e5f6fe"],["#4caf50","#edf7ed"],["#f9ce1d","#fefae8"],["#ff9800","#fff4e5"],["#ff5722","#ffeee8"]]}});f("materialblack",{chart:{title:{color:"#fff"},legend:{labels:{color:"#fff"},inactiveItems:{labels:{color:"#CBCBCB"},markers:{color:"#CBCBCB"}}},seriesDefaults:{labels:{color:"#fff"},errorBars:{color:"#fff"},notes:{icon:{background:"transparent",border:{color:"#e5e5e5"}},label:{color:"#fff"},line:{color:"#e5e5e5"}},candlestick:{downColor:"#c7c7c7",line:{color:"#787878"}},area:{opacity:.9},waterfall:{line:{color:"#4d4d4d"}},horizontalWaterfall:{line:{color:"#4d4d4d"}},overlay:{gradient:"none"},border:{_brightness:1}},chartArea:{background:"#1c1c1c"},seriesColors:["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#ff9800","#ff5722"],axisDefaults:{line:{color:"#4d4d4d"},labels:{color:"#fff"},minorGridLines:{color:"#4d4d4d"},majorGridLines:{color:"#4d4d4d"},title:{color:"#fff"},crosshair:{color:"#7f7f7f"},notes:{icon:{background:"transparent",border:{color:"#4d4d4d"}},label:{color:"#fff"},line:{color:"#4d4d4d"}}}},gauge:{pointer:{color:"#3f51b5"},scale:{rangePlaceholderColor:"#4d4d4d",labels:{color:"#fff"},minorTicks:{color:"#fff"},majorTicks:{color:"#fff"},line:{color:"#fff"}}},diagram:{shapeDefaults:{fill:{color:"#3f51b5"},connectorDefaults:{fill:{color:"#7f7f7f"},stroke:{color:u},hover:{fill:{color:u},stroke:{color:"#7f7f7f"}}},content:{color:"#fff"}},editable:{resize:{handles:{fill:{color:u},stroke:{color:"#fff"},hover:{fill:{color:"#fff"},stroke:{color:"#fff"}}}},rotate:{thumb:{stroke:{color:"#fff"},fill:{color:"#fff"}}}},selectable:{stroke:{color:"#fff"}},connectionDefaults:{stroke:{color:"#7f7f7f"},content:{color:"#fff"},selection:{handles:{fill:{color:u},stroke:{color:"#fff"}},stroke:{color:"#fff"}}}},treeMap:{colors:[["#3f51b5","#cff3f0"],["#03a9f4","#e5f6fe"],["#4caf50","#edf7ed"],["#f9ce1d","#fefae8"],["#ff9800","#fff4e5"],["#ff5722","#ffeee8"]]}});(function(){var e="#333333";var t="#7f7f7f";var i="#bdbdbd";var n="#c8c8c8";var r="#dddddd";var a=["#008fd3","#99d101","#f39b02","#f05662","#c03c53","#acacac"];var o=["#cbe8f5","#eaf5cb","#fceacc","#fbdcdf","#f2d7dc","#eeeeee"];var s=a[0];var l=u;function d(){return{icon:{background:"#007cc0",border:{color:"#007cc0"}},label:{color:"#ffffff"},line:{color:n}}}f("fiori",{chart:{title:{color:e},legend:{labels:{color:e},inactiveItems:{labels:{color:t},markers:{color:t}}},seriesDefaults:{labels:{color:e},errorBars:{color:e},notes:d(),candlestick:{downColor:n,line:{color:i}},area:{opacity:.8},waterfall:{line:{color:n}},horizontalWaterfall:{line:{color:n}},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:a,axisDefaults:{line:{color:n},labels:{color:e},minorGridLines:{color:r},majorGridLines:{color:n},title:{color:e},crosshair:{color:t},notes:d()}},gauge:{pointer:{color:s},scale:{rangePlaceholderColor:n,labels:{color:e},minorTicks:{color:e},majorTicks:{color:e},line:{color:e}}},diagram:{shapeDefaults:{fill:{color:s},connectorDefaults:{fill:{color:e},stroke:{color:l},hover:{fill:{color:l},stroke:{color:e}}},content:{color:e}},editable:{resize:{handles:{fill:{color:l},stroke:{color:i},hover:{fill:{color:i},stroke:{color:i}}}},rotate:{thumb:{stroke:{color:i},fill:{color:i}}}},selectable:{stroke:{color:i}},connectionDefaults:{stroke:{color:i},content:{color:i},selection:{handles:{fill:{color:l},stroke:{color:i}},stroke:{color:i}}}},treeMap:{colors:h(a,o)}})})();(function(){var e="#4e4e4e";var t="#7f7f7f";var i="#bdbdbd";var n="#c8c8c8";var r="#e5e5e5";var a=["#0072c6","#5db2ff","#008a17","#82ba00","#ff8f32","#ac193d"];var o=["#cbe2f3","#deeffe","#cbe7d0","#e5f0cb","#fee8d5","#eed0d7"];var s=a[0];var l=u;function d(){return{icon:{background:"#00b0ff",border:{color:"#00b0ff"}},label:{color:"#ffffff"},line:{color:n}}}f("office365",{chart:{title:{color:e},legend:{labels:{color:e},inactiveItems:{labels:{color:t},markers:{color:t}}},seriesDefaults:{labels:{color:e},errorBars:{color:e},notes:d(),candlestick:{downColor:n,line:{color:i}},area:{opacity:.8},waterfall:{line:{color:n}},horizontalWaterfall:{line:{color:n}},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:a,axisDefaults:{line:{color:n},labels:{color:e},minorGridLines:{color:r},majorGridLines:{color:n},title:{color:e},crosshair:{color:t},notes:d()}},gauge:{pointer:{color:s},scale:{rangePlaceholderColor:n,labels:{color:e},minorTicks:{color:e},majorTicks:{color:e},line:{color:e}}},diagram:{shapeDefaults:{fill:{color:s},connectorDefaults:{fill:{color:e},stroke:{color:l},hover:{fill:{color:l},stroke:{color:e}}},content:{color:e}},editable:{resize:{handles:{fill:{color:l},stroke:{color:i},hover:{fill:{color:i},stroke:{color:i}}}},rotate:{thumb:{stroke:{color:i},fill:{color:i}}}},selectable:{stroke:{color:i}},connectionDefaults:{stroke:{color:i},content:{color:i},selection:{handles:{fill:{color:l},stroke:{color:i}},stroke:{color:i}}}},treeMap:{colors:h(a,o)}})})();(function(){var e="#32364c";var t="#7f7f7f";var i="#bdbdbd";var n="#dfe0e1";var r="#dfe0e1";var a=["#ff4350","#ff9ea5","#00acc1","#80deea","#ffbf46","#ffd78c"];var o=["#ffd9dc","#ffeced","#cceef3","#e6f8fb","#fff2da","#fff7e8"];var s=a[0];var l=u;function d(){return{icon:{background:"#007cc0",border:{color:"#007cc0"}},label:{color:"#ffffff"},line:{color:n}}}f("nova",{chart:{title:{color:e},legend:{labels:{color:e},inactiveItems:{labels:{color:t},markers:{color:t}}},seriesDefaults:{labels:{color:e},errorBars:{color:e},notes:d(),candlestick:{downColor:n,line:{color:i}},area:{opacity:.8},waterfall:{line:{color:n}},horizontalWaterfall:{line:{color:n}},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:a,axisDefaults:{line:{color:n},labels:{color:e},minorGridLines:{color:r},majorGridLines:{color:n},title:{color:e},crosshair:{color:e},notes:d()}},gauge:{pointer:{color:s},scale:{rangePlaceholderColor:n,labels:{color:e},minorTicks:{color:e},majorTicks:{color:e},line:{color:e}}},diagram:{shapeDefaults:{fill:{color:s},connectorDefaults:{fill:{color:e},stroke:{color:l},hover:{fill:{color:l},stroke:{color:e}}},content:{color:e}},editable:{resize:{handles:{fill:{color:l},stroke:{color:i},hover:{fill:{color:i},stroke:{color:i}}}},rotate:{thumb:{stroke:{color:i},fill:{color:i}}}},selectable:{stroke:{color:i}},connectionDefaults:{stroke:{color:i},content:{color:i},selection:{handles:{fill:{color:l},stroke:{color:i}},stroke:{color:i}}}},treeMap:{colors:h(a,o)}})})();(function(){var e=["#ff6358","#ffd246","#78d237","#28b4c8","#2d73f5","#aa46be"];var t=["#ffd9dc","#ffeced","#cceef3","#e6f8fb","#fff2da","#fff7e8"];f("default-v2",{chart:{},gauge:{},diagram:{},treeMap:{colors:h(e,t)}});c.sass=c["default-v2"]})();(function(){var e="#292b2c";var t="rgba(0, 0, 0, .04)";var i=["#0275d8","#5bc0de","#5cb85c","#f0ad4e","#e67d4a","#d9534f"];var n=["#ffd9dc","#ffeced","#cceef3","#e6f8fb","#fff2da","#fff7e8"];var r=i[0];f("bootstrap-v4",{chart:{},gauge:{pointer:{color:r},scale:{rangePlaceholderColor:t,labels:{color:e},minorTicks:{color:e},majorTicks:{color:e},line:{color:e}}},diagram:{},treeMap:{colors:h(i,n)}})})();function h(e,i){return t.map(e,function(e,t){return[[e,i[t]]]})}})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.dataviz.themes",["kendo.dataviz.core","dataviz/themes/chart-base-theme","dataviz/themes/auto-theme","dataviz/themes/themes"],e)})(function(){var e={id:"dataviz.themes",name:"Themes",description:"Built-in themes for the DataViz widgets",category:"dataviz",depends:["dataviz.core"],hidden:true}},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("dataviz/chart/kendo-chart",["kendo.core","kendo.color","kendo.drawing","kendo.dataviz.core"],e)})(function(){(function(N){window.kendo.dataviz=window.kendo.dataviz||{};var S=kendo.dataviz;var e=S.Class;var v=S.isNumber;var T=S.constants;var f=T.MAX_VALUE;var c=T.MIN_VALUE;var u=T.VALUE;var D=T.CENTER;var A=T.TOP;var E=T.BOTTOM;var I=T.LEFT;var h=T.WHITE;var O=T.CIRCLE;var m=T.X;var g=T.Y;var M=T.RIGHT;var V=T.BLACK;var W=T.DATE;var s=T.DEFAULT_PRECISION;var a=T.ARC;var R=S.defined;var U=S.getter;var j=S.isArray;var w=S.ChartElement;var F=S.Point;var P=S.Box;var G=S.alignPathToPixel;var t=S.setDefaultOptions;var _=S.inArray;var z=S.isFunction;var B=S.valueOrDefault;var q=S.isObject;var y=S.deepExtend;var $=S.last;var K=S.eventElement;var Y=S.getTemplate;var Q=S.TextBox;var X=S.ShapeElement;var Z=S.getSpacing;var l=S.CurveProcessor;var J=S.append;var ee=S.isString;var te=S.parseDate;var ie=S.styleValue;var ne=S.CategoryAxis;var re=S.BoxElement;var L=S.round;var ae=S.limitValue;var oe=S.grep;var b=S.elementStyles;var se=S.hasClasses;var le=S.bindEvents;var de=S.services;var ue=S.unbindEvents;var ce=kendo.support;var fe=kendo.drawing;var k=fe.Path;var he=fe.Animation;var pe=fe.AnimationFactory;var ve=fe.Group;var me=kendo.Color;var ge=kendo.geometry;var x=ge.Point;var _e=ge.transform;var be=e.extend({init:function(e){this._axis=e;this.options=e.options},value:function(e){var t=this._axis;var i=t.getCategory?t.getCategory(e):t.getValue(e);return i},slot:function(e,t,i){if(i===void 0){i=true}return this._axis.slot(e,t,i)},range:function(){return this._axis.range()},valueRange:function(){return this._axis.valueRange()}});function we(e,t){for(var i=0;i<t.length;i++){if(t[i].options.name===e){t[i].prepareUserOptions();return new be(t[i])}}}var ke=kendo.Class.extend({init:function(e){this.visual=e.visual;this.chartsVisual=e.chartContainer.visual;this._pane=e},findAxisByName:function(e){return we(e,this._pane.axes)}});var ye=e.extend({init:function(e){this._plotArea=e;this.visual=e.visual;this.backgroundVisual=e._bgVisual}});function xe(e){var t=e.length;var i=0;for(var n=0;n<t;n++){var r=e[n];if(v(r)){i++}}return i}var Ce={min:function(e){var t=e.length;var i=f;for(var n=0;n<t;n++){var r=e[n];if(v(r)){i=Math.min(i,r)}}return i===f?e[0]:i},max:function(e){var t=e.length;var i=c;for(var n=0;n<t;n++){var r=e[n];if(v(r)){i=Math.max(i,r)}}return i===c?e[0]:i},sum:function(e){var t=e.length;var i=0;for(var n=0;n<t;n++){var r=e[n];if(v(r)){i+=r}}return i},sumOrNull:function(e){var t=null;if(xe(e)){t=Ce.sum(e)}return t},count:function(e){var t=e.length;var i=0;for(var n=0;n<t;n++){var r=e[n];if(r!==null&&R(r)){i++}}return i},avg:function(e){var t=xe(e);var i=e[0];if(t>0){i=Ce.sum(e)/t}return i},first:function(e){var t=e.length;for(var i=0;i<t;i++){var n=e[i];if(n!==null&&R(n)){return n}}return e[0]}};function Se(e,t){if(t===null){return t}var i=U(e,true);return i(t)}var C=e.extend({init:function(){this._valueFields={};this._otherFields={};this._nullValue={};this._undefinedValue={}},register:function(e,t,i){var n=this;if(t===void 0){t=[u]}if(i===void 0){i={}}for(var r=0;r<e.length;r++){var a=e[r];n._valueFields[a]=t;n._otherFields[a]=i;n._nullValue[a]=n._makeValue(t,null);n._undefinedValue[a]=n._makeValue(t,undefined)}},canonicalFields:function(e){return this.valueFields(e).concat(this.otherFields(e))},valueFields:function(e){return this._valueFields[e.type]||[u]},otherFields:function(e){return this._otherFields[e.type]||[u]},bindPoint:function(e,t,i){var n=e.data;var r=R(i)?i:n[t];var a={valueFields:{value:r}};var o=this.valueFields(e);var s=this._otherFields[e.type];var l,d;if(r===null){d=this._nullValue[e.type]}else if(!R(r)){d=this._undefinedValue[e.type]}else if(Array.isArray(r)){var u=r.slice(o.length);d=this._bindFromArray(r,o);l=this._bindFromArray(u,s)}else if(typeof r==="object"){var c=this.sourceFields(e,o);var f=this.sourceFields(e,s);d=this._bindFromObject(r,o,c);l=this._bindFromObject(r,s,f)}if(R(d)){if(o.length===1){a.valueFields.value=d[o[0]]}else{a.valueFields=d}}a.fields=l||{};return a},_makeValue:function(e,t){var i={};var n=e.length;for(var r=0;r<n;r++){var a=e[r];i[a]=t}return i},_bindFromArray:function(e,t){var i={};if(t){var n=Math.min(t.length,e.length);for(var r=0;r<n;r++){i[t[r]]=e[r]}}return i},_bindFromObject:function(e,t,i){if(i===void 0){i=t}var n={};if(t){var r=t.length;for(var a=0;a<r;a++){var o=t[a];var s=i[a];if(s!==null){n[o]=Se(s,e)}}}return n},sourceFields:function(e,t){var i=[];if(t){var n=t.length;for(var r=0;r<n;r++){var a=t[r];var o=a===u?"field":a+"Field";i.push(e[o]!==null?e[o]||a:null)}}return i}});C.current=new C;var Te="stderr";var De="stddev";var Ae=/percent(?:\w*)\((\d+)\)/;var Ee=new RegExp("^"+De+"(?:\\((\\d+(?:\\.\\d+)?)\\))?$");var Ie=e.extend({init:function(e,t,i){this.initGlobalRanges(e,t,i)},initGlobalRanges:function(e,t,i){var n=t.data;var r=Ee.exec(e);if(r){this.valueGetter=this.createValueGetter(t,i);var a=this.getAverage(n);var o=this.getStandardDeviation(n,a,false);var s=r[1]?parseFloat(r[1]):1;var l={low:a.value-o*s,high:a.value+o*s};this.globalRange=function(){return l}}else if(e.indexOf&&e.indexOf(Te)>=0){this.valueGetter=this.createValueGetter(t,i);var d=this.getStandardError(n,this.getAverage(n));this.globalRange=function(e){return{low:e-d,high:e+d}}}},createValueGetter:function(e,t){var i=e.data;var n=C.current;var r=n.valueFields(e);var a=R(i[0])?i[0]:{};var o;if(j(a)){var s=t?r.indexOf(t):0;o=U("["+s+"]")}else if(v(a)){o=U()}else if(typeof a===T.OBJECT){var l=n.sourceFields(e,r);o=U(l[r.indexOf(t)])}return o},getErrorRange:function(e,t){var i,n,r;if(!R(t)){return null}if(this.globalRange){return this.globalRange(e)}if(j(t)){i=e-t[0];n=e+t[1]}else if(v(r=parseFloat(t))){i=e-r;n=e+r}else if(r=Ae.exec(t)){var a=e*(parseFloat(r[1])/100);i=e-Math.abs(a);n=e+Math.abs(a)}else{throw new Error("Invalid ErrorBar value: "+t)}return{low:i,high:n}},getStandardError:function(e,t){return this.getStandardDeviation(e,t,true)/Math.sqrt(t.count)},getStandardDeviation:function(e,t,i){var n=this;var r=e.length;var a=i?t.count-1:t.count;var o=0;for(var s=0;s<r;s++){var l=n.valueGetter(e[s]);if(v(l)){o+=Math.pow(l-t.value,2)}}return Math.sqrt(o/a)},getAverage:function(e){var t=this;var i=e.length;var n=0;var r=0;for(var a=0;a<i;a++){var o=t.valueGetter(e[a]);if(v(o)){n+=o;r++}}return{value:n/r,count:r}}});var Me=ce.browser||{};var d=600;var Re="fadeIn";var Fe="glass";var Pe=.8;var ze=5;var Be=Me.msie?.001:0;var Le="errorLow";var He="errorHigh";var Ne="xErrorLow";var Oe="xErrorHigh";var Ve="yErrorLow";var We="yErrorHigh";var Ue=8;var je="zero";var Ge="interpolate";var qe="gap";var $e="above";var Ke="below";var Ye="smooth";var Qe="step";var Xe="area";var Ze="bar";var Je="boxPlot";var et="bubble";var tt="bullet";var it="candlestick";var nt="column";var rt="donut";var at="funnel";var ot="horizontalWaterfall";var st="line";var lt="ohlc";var dt="pie";var ut="polarArea";var ct="polarLine";var ft="polarScatter";var ht="radarArea";var pt="radarColumn";var vt="radarLine";var mt="rangeArea";var gt="rangeBar";var _t="rangeColumn";var bt="scatter";var wt="scatterLine";var kt="verticalArea";var yt="verticalBoxPlot";var xt="verticalBullet";var Ct="verticalLine";var St="verticalRangeArea";var Tt="waterfall";var Dt=[Ze,nt,lt,it,Je,yt,tt,_t,gt,Tt,ot];var At="legendItemClick";var Et="legendItemHover";var It="legendItemLeave";var Mt="seriesClick";var Rt="seriesHover";var Ft="seriesOver";var Pt="seriesLeave";var zt="plotAreaClick";var Bt="plotAreaHover";var Lt="plotAreaLeave";var Ht="drag";var Nt="dragEnd";var Ot="dragStart";var Vt="zoomStart";var Wt="zoom";var Ut="zoomEnd";var jt="selectStart";var Gt="select";var qt="selectEnd";var $t="render";var Kt="showTooltip";var Yt="hideTooltip";var Qt="paneRender";var Xt="log";var Zt="category";var Jt="insideEnd";var ei="insideBase";var ti="outsideEnd";var ii="DOMMouseScroll mousewheel";var ni=150;var ri={INITIAL_ANIMATION_DURATION:d,FADEIN:Re,LEGEND_ITEM_CLICK:At,LEGEND_ITEM_HOVER:Et,LEGEND_ITEM_LEAVE:It,SERIES_CLICK:Mt,SERIES_HOVER:Rt,SERIES_OVER:Ft,SERIES_LEAVE:Pt,GLASS:Fe,BORDER_BRIGHTNESS:Pe,TOOLTIP_OFFSET:ze,START_SCALE:Be,ERROR_LOW_FIELD:Le,ERROR_HIGH_FIELD:He,X_ERROR_LOW_FIELD:Ne,X_ERROR_HIGH_FIELD:Oe,Y_ERROR_LOW_FIELD:Ve,Y_ERROR_HIGH_FIELD:We,LINE_MARKER_SIZE:Ue,INTERPOLATE:Ge,ZERO:je,SMOOTH:Ye,STEP:Qe,CATEGORY:Zt,FUNNEL:at,BAR:Ze,CANDLESTICK:it,PIE:dt,COLUMN:nt,AREA:Xe,VERTICAL_BULLET:xt,BOX_PLOT:Je,OHLC:lt,WATERFALL:Tt,LINE:st,BULLET:tt,VERTICAL_LINE:Ct,VERTICAL_AREA:kt,RANGE_AREA:mt,VERTICAL_RANGE_AREA:St,RANGE_COLUMN:_t,VERTICAL_BOX_PLOT:yt,RANGE_BAR:gt,HORIZONTAL_WATERFALL:ot,SCATTER:bt,SCATTER_LINE:wt,BUBBLE:et,RADAR_AREA:ht,RADAR_LINE:vt,RADAR_COLUMN:pt,POLAR_LINE:ct,POLAR_AREA:ut,POLAR_SCATTER:ft,RENDER:$t,PLOT_AREA_CLICK:zt,PLOT_AREA_HOVER:Bt,PLOT_AREA_LEAVE:Lt,LOGARITHMIC:Xt,DRAG:Ht,DRAG_START:Ot,DRAG_END:Nt,ZOOM_START:Vt,ZOOM:Wt,ZOOM_END:Ut,SELECT_START:jt,SELECT:Gt,SELECT_END:qt,PANE_RENDER:Qt,GAP:qe,DONUT:rt,INSIDE_END:Jt,INSIDE_BASE:ei,OUTSIDE_END:ti,MOUSEWHEEL:ii,MOUSEWHEEL_DELAY:ni,SHOW_TOOLTIP:Kt,HIDE_TOOLTIP:Yt,EQUALLY_SPACED_SERIES:Dt,ABOVE:$e,BELOW:Ke};var ai=4;var oi=w.extend({init:function(e,t,i,n,r,a){w.fn.init.call(this,a);this.low=e;this.high=t;this.isVertical=i;this.chart=n;this.series=r},reflow:function(e){var t=this.options.endCaps;var i=this.isVertical;var n=this.getAxis();var r=n.getSlot(this.low,this.high);var a=e.center();var o=this.getCapsWidth(e,i);var s=i?a.x:a.y;var l=s-o;var d=s+o;var u;if(i){u=[new F(a.x,r.y1),new F(a.x,r.y2)];if(t){u.push(new F(l,r.y1),new F(d,r.y1),new F(l,r.y2),new F(d,r.y2))}this.box=new P(l,r.y1,d,r.y2)}else{u=[new F(r.x1,a.y),new F(r.x2,a.y)];if(t){u.push(new F(r.x1,l),new F(r.x1,d),new F(r.x2,l),new F(r.x2,d))}this.box=new P(r.x1,l,r.x2,d)}this.linePoints=u},getCapsWidth:function(e,t){var i=t?e.width():e.height();var n=Math.min(Math.floor(i/2),ai)||ai;return n},createVisual:function(){var t=this;var e=this.options;var i=e.visual;if(i){this.visual=i({low:this.low,high:this.high,rect:this.box.toRect(),sender:this.getSender(),options:{endCaps:e.endCaps,color:e.color,line:e.line},createVisual:function(){t.createDefaultVisual();var e=t.visual;delete t.visual;return e}})}else{this.createDefaultVisual()}},createDefaultVisual:function(){var e=this;var t=this;var i=t.options;var n=t.linePoints;var r={stroke:{color:i.color,width:i.line.width,dashType:i.line.dashType}};w.fn.createVisual.call(this);for(var a=0;a<n.length;a+=2){var o=new k(r).moveTo(n[a].x,n[a].y).lineTo(n[a+1].x,n[a+1].y);G(o);e.visual.append(o)}}});t(oi,{animation:{type:Re,delay:d},endCaps:true,line:{width:2},zIndex:1});var si=oi.extend({getAxis:function(){var e=this.chart.seriesValueAxis(this.series);return e}});var li=5;function di(e,t,i,n){if(i===void 0){i={}}if(n===void 0){n=false}var r=i.defaults=i.defaults||{};var a=i.depth=i.depth||0;var o=false;i.excluded=i.excluded||[];if(a>li){return null}for(var s in e){if(!_(s,i.excluded)&&e.hasOwnProperty(s)){var l=e[s];if(z(l)){o=true;if(!n){e[s]=B(l(t),r[s])}}else if(q(l)){if(!n){i.defaults=r[s]}i.depth++;o=di(l,t,i,n)||o;i.depth--}}}return o}function ui(e){var t=e.length;var i=0;for(var n=0;n<t;n++){i=Math.max(i,e[n].data.length)}return i}var n=w.extend({init:function(e,t){w.fn.init.call(this,t);this.plotArea=e;this.chartService=e.chartService;this.categoryAxis=e.seriesCategoryAxis(t.series[0]);this.valueAxisRanges={};this.points=[];this.categoryPoints=[];this.seriesPoints=[];this.seriesOptions=[];this._evalSeries=[];this.render()},render:function(){this.traverseDataPoints(this.addValue.bind(this))},pointOptions:function(e,t){var i=this.seriesOptions[t];if(!i){var n=this.pointType().prototype.defaults;this.seriesOptions[t]=i=y({},n,{vertical:!this.options.invertAxes},e)}return i},plotValue:function(e){if(!e){return 0}if(this.options.isStacked100&&v(e.value)){var t=e.categoryIx;var i=this.categoryPoints[t];var n=[];var r=0;for(var a=0;a<i.length;a++){var o=i[a];if(o){var s=e.series.stack;var l=o.series.stack;if(s&&l&&s.group!==l.group){continue}if(v(o.value)){r+=Math.abs(o.value);n.push(Math.abs(o.value))}}}if(r>0){return e.value/r}}return e.value},plotRange:function(e,t){var i=this;if(t===void 0){t=0}var n=this.categoryPoints[e.categoryIx];if(this.options.isStacked){var r=this.plotValue(e);var a=r>=0;var o=t;var s=false;for(var l=0;l<n.length;l++){var d=n[l];if(e===d){break}var u=e.series.stack;var c=d.series.stack;if(u&&c){if(typeof u===T.STRING&&u!==c){continue}if(u.group&&u.group!==c.group){continue}}var f=i.plotValue(d);if(f>=0&&a||f<0&&!a){o+=f;r+=f;s=true;if(i.options.isStacked100){r=Math.min(r,1)}}}if(s){o-=t}return[o,r]}var h=e.series;var p=this.seriesValueAxis(h);var v=this.categoryAxisCrossingValue(p);return[v,S.convertableToNumber(e.value)?e.value:v]},stackLimits:function(e,t){var i=this;var n=f;var r=c;for(var a=0;a<this.categoryPoints.length;a++){var o=i.categoryPoints[a];if(!o){continue}for(var s=0;s<o.length;s++){var l=o[s];if(l){if(l.series.stack===t||l.series.axis===e){var d=i.plotRange(l,0)[1];if(R(d)&&isFinite(d)){r=Math.max(r,d);n=Math.min(n,d)}}}}}return{min:n,max:r}},updateStackRange:function(){var e=this;var t=this.options;var i=t.isStacked;var n=t.series;var r={};if(i){for(var a=0;a<n.length;a++){var o=n[a];var s=o.axis;var l=s+o.stack;var d=r[l];if(!d){d=e.stackLimits(s,o.stack);var u=e.errorTotals;if(u){if(u.negative.length){d.min=Math.min(d.min,S.sparseArrayLimits(u.negative).min)}if(u.positive.length){d.max=Math.max(d.max,S.sparseArrayLimits(u.positive).max)}}if(d.min!==f||d.max!==c){r[l]=d}else{d=null}}if(d){e.valueAxisRanges[s]=d}}}},addErrorBar:function(e,t,i){var n=e.value;var r=e.series;var a=e.seriesIx;var o=e.options.errorBars;var s=t.fields[Le];var l=t.fields[He];var d;if(v(s)&&v(l)){d={low:s,high:l}}else if(o&&R(o.value)){this.seriesErrorRanges=this.seriesErrorRanges||[];this.seriesErrorRanges[a]=this.seriesErrorRanges[a]||new Ie(o.value,r,u);d=this.seriesErrorRanges[a].getErrorRange(n,o.value)}if(d){e.low=d.low;e.high=d.high;this.addPointErrorBar(e,i)}},addPointErrorBar:function(e,t){var i=!this.options.invertAxes;var n=e.options.errorBars;var r=e.series;var a=e.low;var o=e.high;if(this.options.isStacked){var s=this.stackedErrorRange(e,t);a=s.low;o=s.high}else{var l={categoryIx:t,series:r};this.updateRange({value:a},l);this.updateRange({value:o},l)}var d=new si(a,o,i,this,r,n);e.errorBars=[d];e.append(d)},stackedErrorRange:function(e,t){var i=this.plotRange(e,0)[1]-e.value;var n=e.low+i;var r=e.high+i;this.errorTotals=this.errorTotals||{positive:[],negative:[]};if(n<0){this.errorTotals.negative[t]=Math.min(this.errorTotals.negative[t]||0,n)}if(r>0){this.errorTotals.positive[t]=Math.max(this.errorTotals.positive[t]||0,r)}return{low:n,high:r}},addValue:function(e,t){var i=t.categoryIx;var n=t.series;var r=t.seriesIx;var a=this.categoryPoints[i];if(!a){this.categoryPoints[i]=a=[]}var o=this.seriesPoints[r];if(!o){this.seriesPoints[r]=o=[]}var s=this.createPoint(e,t);if(s){N.extend(s,t);s.owner=this;s.noteText=e.fields.noteText;if(!R(s.dataItem)){s.dataItem=n.data[i]}this.addErrorBar(s,e,i)}this.points.push(s);o.push(s);a.push(s);this.updateRange(e.valueFields,t)},evalPointOptions:function(e,t,i,n,r,a){var o={defaults:r._defaults,excluded:["data","aggregate","_events","tooltip","content","template","visual","toggle","_outOfRangeMinPoint","_outOfRangeMaxPoint"]};var s=this._evalSeries[a];if(!R(s)){this._evalSeries[a]=s=di(e,{},o,true)}var l=e;if(s){l=y({},l);di(l,{value:t,category:i,index:n,series:r,dataItem:r.data[n]},o)}return l},updateRange:function(e,t){var i=t.series.axis;var n=e.value;var r=this.valueAxisRanges[i];if(isFinite(n)&&n!==null){r=this.valueAxisRanges[i]=r||{min:f,max:c};r.min=Math.min(r.min,n);r.max=Math.max(r.max,n)}},seriesValueAxis:function(e){var t=this.plotArea;var i=e.axis;var n=i?t.namedValueAxes[i]:t.valueAxis;if(!n){throw new Error("Unable to locate value axis with name "+i)}return n},reflow:function(e){var u=this;var c=this.categorySlots=[];var f=this.points;var h=this.categoryAxis;var p=0;this.traverseDataPoints(function(e,t){var i=t.categoryIx;var n=t.series;var r=u.seriesValueAxis(n);var a=f[p++];var o=c[i];if(!o){c[i]=o=u.categorySlot(h,i,r)}if(a){var s=u.plotRange(a,r.startValue());var l=u.valueSlot(r,s);if(l){var d=u.pointSlot(o,l);a.aboveAxis=u.aboveAxis(a,r);a.stackValue=s[1];if(u.options.isStacked100){a.percentage=u.plotValue(a)}u.reflowPoint(a,d)}else{a.visible=false}}});this.reflowCategories(c);if(!this.options.clip&&this.options.limitPoints&&this.points.length){this.limitPoints()}this.box=e},valueSlot:function(e,t){return e.getSlot(t[0],t[1],!this.options.clip)},limitPoints:function(){var e=this;var t=this.categoryPoints;var i=t[0].concat($(t));for(var n=0;n<i.length;n++){if(i[n]){e.limitPoint(i[n])}}},limitPoint:function(e){var t=this.categoryAxis.limitSlot(e.box);if(!t.equals(e.box)){e.reflow(t)}},aboveAxis:function(e,t){var i=this.categoryAxisCrossingValue(t);var n=e.value;return t.options.reverse?n<i:n>=i},categoryAxisCrossingValue:function(e){var t=this.categoryAxis;var i=e.options;var n=[].concat(i.axisCrossingValues||i.axisCrossingValue);return n[t.axisIndex||0]||0},reflowPoint:function(e,t){e.reflow(t)},reflowCategories:function(){},pointSlot:function(e,t){var i=this.options;var n=i.invertAxes;var r=n?t:e;var a=n?e:t;return new P(r.x1,a.y1,r.x2,a.y2)},categorySlot:function(e,t){return e.getSlot(t)},traverseDataPoints:function(e){var t=this;var i=this.options.series;var n=ui(i);var r=i.length;for(var a=0;a<r;a++){t._outOfRangeCallback(i[a],"_outOfRangeMinPoint",a,e)}for(var o=0;o<n;o++){for(var s=0;s<r;s++){var l=i[s];var d=t.categoryAxis.categoryAt(o);var u=t._bindPoint(l,s,o);e(u,{category:d,categoryIx:o,categoriesCount:n,series:l,seriesIx:s})}}for(var c=0;c<r;c++){t._outOfRangeCallback(i[c],"_outOfRangeMaxPoint",c,e)}},_outOfRangeCallback:function(e,t,i,n){var r=e[t];if(r){var a=r.categoryIx;var o=this._bindPoint(e,i,a,r.item);n(o,{category:r.category,categoryIx:a,series:e,seriesIx:i,dataItem:r.item})}},_bindPoint:function(e,t,i,n){if(!this._bindCache){this._bindCache=[]}var r=this._bindCache[t];if(!r){r=this._bindCache[t]=[]}var a=r[i];if(!a){a=r[i]=C.current.bindPoint(e,i,n)}return a},formatPointValue:function(e,t){if(e.value===null){return""}return this.chartService.format.auto(t,e.value)},pointValue:function(e){return e.valueFields.value}});t(n,{series:[],invertAxes:false,isStacked:false,clip:true,limitPoints:true});var ci={click:function(e,t){return e.trigger(Mt,this.eventArgs(t))},hover:function(e,t){return e.trigger(Rt,this.eventArgs(t))},over:function(e,t){return e.trigger(Ft,this.eventArgs(t))},out:function(e,t){return e.trigger(Pt,this.eventArgs(t))},eventArgs:function(e){return{value:this.value,percentage:this.percentage,stackValue:this.stackValue,category:this.category,series:this.series,dataItem:this.dataItem,runningTotal:this.runningTotal,total:this.total,element:K(e),originalEvent:e,point:this}}};var fi={createNote:function(){var e=this.options.notes;var t=this.noteText||e.label.text;if(e.visible!==false&&R(t)&&t!==null){this.note=new S.Note({value:this.value,text:t,dataItem:this.dataItem,category:this.category,series:this.series},this.options.notes,this.owner.chartService);this.append(this.note)}}};var hi=w.extend({init:function(e,t){w.fn.init.call(this);this.value=e;this.options=t;this.aboveAxis=B(this.options.aboveAxis,true);this.tooltipTracking=true},render:function(){var e=this.options;var t=e.markers;var i=e.labels;if(this._rendered){return}this._rendered=true;if(t.visible&&t.size){this.marker=this.createMarker();this.append(this.marker)}if(i.visible){var n=Y(i);var r=this.pointData();var a=this.value;if(n){a=n(r)}else if(i.format){a=this.formatValue(i.format)}this.label=new Q(a,y({align:D,vAlign:D,margin:{left:5,right:5},zIndex:B(i.zIndex,this.series.zIndex)},i),r);this.append(this.label)}this.createNote();if(this.errorBar){this.append(this.errorBar)}},markerBorder:function(){var e=this.options.markers;var t=e.background;var i=y({color:this.color},e.border);if(!R(i.color)){i.color=new me(t).brightness(Pe).toHex()}return i},createVisual:function(){},createMarker:function(){var e=this.options.markers;var t=new X({type:e.type,width:e.size,height:e.size,rotation:e.rotation,background:e.background,border:this.markerBorder(),opacity:this.series.opacity||e.opacity,zIndex:B(e.zIndex,this.series.zIndex),animation:e.animation,visual:e.visual},{dataItem:this.dataItem,value:this.value,series:this.series,category:this.category});return t},markerBox:function(){if(!this.marker){this.marker=this.createMarker();this.marker.reflow(this._childBox)}return this.marker.box},reflow:function(e){var t=this;var i=this;var n=i.options;var r=i.aboveAxis;var a=n.vertical;this.render();this.box=e;var o=e.clone();if(a){if(r){o.y1-=o.height()}else{o.y2+=o.height()}}else{if(r){o.x1+=o.width()}else{o.x2-=o.width()}}this._childBox=o;if(this.marker){this.marker.reflow(o)}this.reflowLabel(o);if(this.errorBars){for(var s=0;s<this.errorBars.length;s++){t.errorBars[s].reflow(o)}}if(this.note){var l=this.markerBox();if(!(n.markers.visible&&n.markers.size)){var d=l.center();l=new P(d.x,d.y,d.x,d.y)}this.note.reflow(l)}},reflowLabel:function(e){var t=this;var i=t.options;var n=t.label;var r=i.labels.position;if(n){r=r===$e?A:r;r=r===Ke?E:r;n.reflow(e);n.box.alignTo(this.markerBox(),r);n.reflow(n.box)}},createHighlight:function(){var e=this.options.highlight.markers;var t=this.markerBorder().color;var i=this.options.markers;var n=i.size+(i.border.width||0)+(e.border.width||0);var r=new X({type:i.type,width:n,height:n,rotation:i.rotation,background:e.color||t,border:{color:e.border.color,width:e.border.width,opacity:B(e.border.opacity,1)},opacity:B(e.opacity,1)});r.reflow(this._childBox);return r.getElement()},highlightVisual:function(){return(this.marker||{}).visual},highlightVisualArgs:function(){var e=this.marker;var t,i;if(e){i=e.paddingBox.toRect();t=e.visual}else{var n=this.options.markers.size;var r=n/2;var a=this.box.center();i=new ge.Rect([a.x-r,a.y-r],[n,n])}return{options:this.options,rect:i,visual:t}},tooltipAnchor:function(){var e=this.markerBox();var t=this.owner.pane.clipBox();var i=!t||t.overlaps(e);if(i){var n=e.x2+ze;var r=I;var a,o;if(this.aboveAxis){a=e.y1;o=E}else{a=e.y2;o=A}return{point:new F(n,a),align:{horizontal:r,vertical:o}}}},formatValue:function(e){return this.owner.formatPointValue(this,e)},overlapsBox:function(e){var t=this.markerBox();return t.overlaps(e)},unclipElements:function(){if(this.label){this.label.options.noclip=true}if(this.note){this.note.options.noclip=true}},pointData:function(){return{dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,stackValue:this.stackValue,series:this.series}}});hi.prototype.defaults={vertical:true,markers:{visible:true,background:h,size:Ue,type:O,border:{width:2},opacity:1},labels:{visible:false,position:$e,margin:Z(3),padding:Z(4),animation:{type:Re,delay:d}},notes:{label:{}},highlight:{markers:{border:{color:"#fff",width:2}},zIndex:T.HIGHLIGHT_ZINDEX},errorBars:{line:{width:1}}};y(hi.prototype,ci);y(hi.prototype,fi);var pi=w.extend({init:function(e,t,i){w.fn.init.call(this);this.linePoints=e;this.series=t;this.seriesIx=i},points:function(){return this.toGeometryPoints(this.linePoints)},toGeometryPoints:function(e){var t=[];for(var i=0,n=e.length;i<n;i++){if(e[i]&&e[i].visible!==false){t.push(e[i]._childBox.toRect().center())}}return t},createVisual:function(){var e=this;var t=this.series.visual;if(t){this.visual=t({points:this.toGeometryPoints(this.linePoints),series:this.series,sender:this.getSender(),createVisual:function(){e.segmentVisual();return e.visual}});if(this.visual&&!R(this.visual.options.zIndex)){this.visual.options.zIndex=this.series.zIndex}}else{this.segmentVisual()}},segmentVisual:function(){var e=this;var t=e.options;var i=e.series;var n=i.color;var r=i._defaults;if(z(n)&&r){n=r.color}var a=k.fromPoints(this.points(),{stroke:{color:n,width:i.width,opacity:i.opacity,dashType:i.dashType},zIndex:i.zIndex});if(t.closed){a.close()}this.visual=a},aliasFor:function(e,t){return this.parent.getNearestPoint(t.x,t.y,this.seriesIx)}});t(pi,{closed:false});var vi={calculateStepPoints:function(e){var t=this.parent.plotArea.seriesCategoryAxis(this.series);var i=t.options;var n=i.justified;var r=i.vertical;var a=i.reverse;var o=r?m:g;var s=r?g:m;var l=a?2:1;var d=l;var u=mi(e[0],o,l,s,d);var c=[u];for(var f=1;f<e.length;f++){var h=mi(e[f],o,l,s,d);if(u[o]!==h[o]){var p=new x;p[o]=u[o];p[s]=h[s];c.push(p,h)}u=h}if(!n){c.push(mi($(e),o,l,s,a?1:2))}else if(u!==$(c)){c.push(u)}return c}};function mi(e,t,i,n,r){var a=e.box;var o=new x;o[t]=a[t+i];o[n]=a[n+r];return o}var gi=pi.extend({points:function(){return this.calculateStepPoints(this.linePoints)}});y(gi.prototype,vi);var _i=pi.extend({segmentVisual:function(){var e=this.series;var t=e._defaults;var i=e.color;if(z(i)&&t){i=t.color}var n=new l(this.options.closed);var r=n.process(this.points());var a=new k({stroke:{color:i,width:e.width,opacity:e.opacity,dashType:e.dashType},zIndex:e.zIndex});a.segments.push.apply(a.segments,r);this.visual=a}});var bi={renderSegments:function(){var e=this;var t=this;var i=t.options;var n=t.seriesPoints;var r=i.series;var a=n.length;var o;this._segments=[];for(var s=0;s<a;s++){var l=r[s];var d=e.sortPoints(n[s]);var u=d.length;var c=[];for(var f=0;f<u;f++){var h=d[f];if(h){c.push(h)}else if(e.seriesMissingValues(l)!==Ge){if(c.length>1){o=e.createSegment(c,l,s,o);e._addSegment(o)}c=[]}}if(c.length>1){o=e.createSegment(c,l,s,o);e._addSegment(o)}}this.children.unshift.apply(this.children,this._segments)},_addSegment:function(e){this._segments.push(e);e.parent=this},sortPoints:function(e){return e},seriesMissingValues:function(e){var t=e.missingValues;var i=!t&&this.options.isStacked;return i?je:t||Ge},getNearestPoint:function(e,t,i){var n=new F(e,t);var r=this.seriesPoints[i];var a=f;var o;for(var s=0;s<r.length;s++){var l=r[s];if(l&&R(l.value)&&l.value!==null&&l.visible!==false){var d=l.box;var u=d.center().distanceTo(n);if(u<a){o=l;a=u}}}return o}};var wi=he.extend({setup:function(){this._setEnd(this.options.box.x1)},step:function(e){var t=this.options.box;this._setEnd(S.interpolateValue(t.x1,t.x2,e))},_setEnd:function(e){var t=this.element;var i=t.segments;var n=i[1].anchor();var r=i[2].anchor();t.suspend();n.setX(e);t.resume();r.setX(e)}});t(wi,{duration:d});pe.current.register("clip",wi);function ki(e){for(var t=0;t<e.length;t++){if(R(e[t].zIndex)){return true}}}var yi={createAnimation:function(){var e=this.getRoot();if(e&&(e.options||{}).transitions!==false){var t=e.size();var i=k.fromRect(t.toRect());this.visual.clip(i);this.animation=new wi(i,{box:t});if(ki(this.options.series)){this._setChildrenAnimation(i)}}},_setChildrenAnimation:function(e){var t=this.animationPoints();for(var i=0;i<t.length;i++){var n=t[i];if(n&&n.visual&&R(n.visual.options.zIndex)){n.visual.clip(e)}}}};var xi=n.extend({render:function(){n.fn.render.call(this);this.updateStackRange();this.renderSegments()},pointType:function(){return hi},createPoint:function(e,t){var i=t.categoryIx;var n=t.category;var r=t.series;var a=t.seriesIx;var o=this.seriesMissingValues(r);var s=e.valueFields.value;if(!R(s)||s===null){if(o===je){s=0}else{return null}}var l=this.pointOptions(r,a);l=this.evalPointOptions(l,s,n,i,r,a);var d=e.fields.color||r.color;if(z(r.color)){d=l.color}var u=new hi(s,l);u.color=d;this.append(u);return u},plotRange:function(e){var t=this;var i=this.plotValue(e);if(this.options.isStacked){var n=e.categoryIx;var r=this.categoryPoints[n];for(var a=0;a<r.length;a++){var o=r[a];if(e===o){break}i+=t.plotValue(o);if(t.options.isStacked100){i=Math.min(i,1)}}}return[i,i]},createSegment:function(e,t,i){var n=t.style;var r;if(n===Qe){r=gi}else if(n===Ye){r=_i}else{r=pi}return new r(e,t,i)},animationPoints:function(){var e=this.points;var t=[];for(var i=0;i<e.length;i++){t.push((e[i]||{}).marker)}return t.concat(this._segments)}});y(xi.prototype,bi,yi);var Ci=pi.extend({init:function(e,t,i,n,r){pi.fn.init.call(this,e,t,i);this.prevSegment=n;this.stackPoints=r},createVisual:function(){var e=this.series;var t=e._defaults;var i=e.line||{};var n=e.color;if(z(n)&&t){n=t.color}this.visual=new ve({zIndex:e.zIndex});this.createFill({fill:{color:n,opacity:e.opacity},stroke:null});if(i.width>0&&i.visible!==false){this.createStroke({stroke:y({color:n,opacity:e.opacity,lineCap:"butt"},i)})}},strokeSegments:function(){var e=this._strokeSegments;if(!e){e=this._strokeSegments=this.createStrokeSegments()}return e},createStrokeSegments:function(){return this.segmentsFromPoints(this.points())},stackSegments:function(){if(this.prevSegment){return this.prevSegment.createStackSegments(this.stackPoints)}return this.createStackSegments(this.stackPoints)},createStackSegments:function(e){return this.segmentsFromPoints(this.toGeometryPoints(e)).reverse()},segmentsFromPoints:function(e){return e.map(function(e){return new ge.Segment(e)})},createStroke:function(e){var t=new k(e);t.segments.push.apply(t.segments,this.strokeSegments());this.visual.append(t)},hasStackSegment:function(){return this.prevSegment||this.stackPoints&&this.stackPoints.length},createFill:function(e){var t=this.strokeSegments();var i=t.slice(0);var n=this.hasStackSegment();if(n){var r=this.stackSegments();J(i,r)}var a=new k(e);a.segments.push.apply(a.segments,i);if(!n&&t.length>1){this.fillToAxes(a)}this.visual.append(a)},fillToAxes:function(e){var t=this.parent;var i=t.options.invertAxes;var n=t.seriesValueAxis(this.series);var r=t.categoryAxisCrossingValue(n);var a=n.getSlot(r,r,true);var o=this.strokeSegments();var s=o[0].anchor();var l=$(o).anchor();var d=i?a.x1:a.y1;if(i){e.lineTo(d,l.y).lineTo(d,s.y)}else{e.lineTo(l.x,d).lineTo(s.x,d)}}});var Si=Ci.extend({createStrokeSegments:function(){return this.segmentsFromPoints(this.calculateStepPoints(this.linePoints))},createStackSegments:function(e){return this.segmentsFromPoints(this.calculateStepPoints(e)).reverse()}});y(Si.prototype,vi);var Ti=Ci.extend({createStrokeSegments:function(){var e=new l(this.options.closed);var t=this.points();return e.process(t)},createStackSegments:function(){var e=this.strokeSegments();var t=[];for(var i=e.length-1;i>=0;i--){var n=e[i];t.push(new ge.Segment(n.anchor(),n.controlOut(),n.controlIn()))}return t}});var Di=xi.extend({createSegment:function(e,t,i,n){var r=this.options.isStacked;var a=(t.line||{}).style;var o;var s;if(r&&i>0&&n){var l=this.seriesMissingValues(t);if(l!=="gap"){s=n.linePoints;o=n}else{s=this._gapStackPoints(e,i,a)}}var d;if(a===Qe){d=Si}else if(a===Ye){d=Ti}else{d=Ci}return new d(e,t,i,o,s)},reflow:function(e){var t=this;xi.fn.reflow.call(this,e);var i=this._stackPoints;if(i){for(var n=0;n<i.length;n++){var r=i[n];var a=t.categoryAxis.getSlot(r.categoryIx);r.reflow(a)}}},_gapStackPoints:function(e,t,i){var n=this;var r=this.seriesPoints;var a=e[0].categoryIx;var o=e.length;if(a<0){a=0;o--}var s=a+o;var l=this.seriesOptions[0]._outOfRangeMinPoint?1:0;var d=[];this._stackPoints=this._stackPoints||[];for(var u=a;u<s;u++){var c=u+l;var f=t;var h=void 0;do{f--;h=r[f][c]}while(f>0&&!h);if(h){if(i!==Qe&&u>a&&!r[f][c-1]){d.push(n._previousSegmentPoint(u,c,c-1,f))}d.push(h);if(i!==Qe&&u+1<s&&!r[f][c+1]){d.push(n._previousSegmentPoint(u,c,c+1,f))}}else{var p=n._createGapStackPoint(u);n._stackPoints.push(p);d.push(p)}}return d},_previousSegmentPoint:function(e,t,i,n){var r=this.seriesPoints;var a=n;var o;while(a>0&&!o){a--;o=r[a][i]}if(!o){o=this._createGapStackPoint(e);this._stackPoints.push(o)}else{o=r[a][t]}return o},_createGapStackPoint:function(e){var t=this.pointOptions({},0);var i=new hi(0,t);i.categoryIx=e;i.series={};return i},seriesMissingValues:function(e){return e.missingValues||je},supportsPointInactiveOpacity:function(){return false}});var Ai=e.extend({init:function(){this.axisRanges={}},update:function(e){var t=this.axisRanges;for(var i in e){var n=e[i];var r=t[i];t[i]=r=r||{min:f,max:c};r.min=Math.min(r.min,n.min);r.max=Math.max(r.max,n.max)}},reset:function(e){this.axisRanges[e]=undefined},query:function(e){return this.axisRanges[e]}});var Ei=w.extend({init:function(e,t,i){w.fn.init.call(this,t);this.textBox=new Q(e,this.options,i);this.append(this.textBox)},createVisual:function(){this.textBox.options.noclip=this.options.noclip},reflow:function(e){var t=this.options;var i=t.vertical;var n=t.aboveAxis;var r=this.children[0];var a=r.options;var o=r.box;var s=r.options.padding;var l=e;a.align=i?D:I;a.vAlign=i?A:D;if(t.position===Jt){if(i){a.vAlign=A;if(!n&&o.height()<e.height()){a.vAlign=E}}else{a.align=n?M:I}}else if(t.position===D){a.vAlign=D;a.align=D}else if(t.position===ei){if(i){a.vAlign=n?E:A}else{a.align=n?I:M}}else if(t.position===ti){if(i){if(n){l=new P(e.x1,e.y1-o.height(),e.x2,e.y1)}else{l=new P(e.x1,e.y2,e.x2,e.y2+o.height())}}else{a.align=D;if(n){l=new P(e.x2,e.y1,e.x2+o.width(),e.y2)}else{l=new P(e.x1-o.width(),e.y1,e.x1,e.y2)}}}if(!t.rotation){if(i){s.left=s.right=(l.width()-r.contentBox.width())/2}else{s.top=s.bottom=(l.height()-r.contentBox.height())/2}}r.reflow(l)},alignToClipBox:function(e){var t=this.options.vertical;var i=t?g:m;var n=i+"1";var r=i+"2";var a=this.children[0];var o=this.parent.box;if(o[n]<e[n]||e[r]<o[r]){var s=a.paddingBox.clone();s[n]=Math.max(o[n],e[n]);s[r]=Math.min(o[r],e[r]);this.reflow(s)}}});t(Ei,{position:ti,margin:Z(3),padding:Z(4),color:V,background:"",border:{width:1,color:""},aboveAxis:true,vertical:false,animation:{type:Re,delay:d},zIndex:2});function Ii(e){var t=e.overlay;return t&&t.gradient&&t.gradient!=="none"}var Mi=6;var Ri=w.extend({init:function(e,t){w.fn.init.call(this);this.options=t;this.color=t.color||h;this.aboveAxis=B(this.options.aboveAxis,true);this.value=e},render:function(){if(this._rendered){return}this._rendered=true;this.createLabel();this.createNote();if(this.errorBar){this.append(this.errorBar)}},createLabel:function(){var e=this.options;var t=e.labels;if(t.visible){var i=this.pointData();var n=Y(t);var r;if(n){r=n(i)}else{r=this.formatValue(t.format)}this.label=new Ei(r,y({vertical:e.vertical},t),i);this.append(this.label)}},formatValue:function(e){return this.owner.formatPointValue(this,e)},reflow:function(e){var t=this;this.render();var i=this.label;this.box=e;if(i){i.options.aboveAxis=this.aboveAxis;i.reflow(e)}if(this.note){this.note.reflow(e)}if(this.errorBars){for(var n=0;n<this.errorBars.length;n++){t.errorBars[n].reflow(e)}}},createVisual:function(){var t=this;var e=this;var i=e.box;var n=e.options;var r=n.visual;if(this.visible!==false){w.fn.createVisual.call(this);if(r){var a=this.rectVisual=r({category:this.category,dataItem:this.dataItem,value:this.value,sender:this.getSender(),series:this.series,percentage:this.percentage,stackValue:this.stackValue,runningTotal:this.runningTotal,total:this.total,rect:i.toRect(),createVisual:function(){var e=new ve;t.createRect(e);return e},options:n});if(a){this.visual.append(a)}}else if(i.width()>0&&i.height()>0){this.createRect(this.visual)}}},createRect:function(e){var t=this.options;var i=t.border;var n=R(i.opacity)?i.opacity:t.opacity;var r=this.box.toRect();r.size.width=Math.round(r.size.width);var a=this.rectVisual=k.fromRect(r,{fill:{color:this.color,opacity:t.opacity},stroke:{color:this.getBorderColor(),width:i.width,opacity:n,dashType:i.dashType}});var o=this.box.width();var s=this.box.height();var l=t.vertical?o:s;if(l>Mi){G(a);if(o<1||s<1){a.options.stroke.lineJoin="round"}}e.append(a);if(Ii(t)){var d=this.createGradientOverlay(a,{baseColor:this.color},y({end:!t.vertical?[0,1]:undefined},t.overlay));e.append(d)}},createHighlight:function(e){var t=k.fromRect(this.box.toRect(),e);return G(t)},highlightVisual:function(){return this.rectVisual},highlightVisualArgs:function(){return{options:this.options,rect:this.box.toRect(),visual:this.rectVisual}},getBorderColor:function(){var e=this.color;var t=this.options.border;var i=t._brightness||Pe;var n=t.color;if(!R(n)){n=new me(e).brightness(i).toHex()}return n},tooltipAnchor:function(){var e=this;var t=e.options;var i=e.box;var n=e.aboveAxis;var r=this.owner.pane.clipBox()||i;var a=I;var o=A;var s,l;if(t.vertical){s=Math.min(i.x2,r.x2)+ze;if(n){l=Math.max(i.y1,r.y1)}else{l=Math.min(i.y2,r.y2);o=E}}else{var d=Math.max(i.x1,r.x1);var u=Math.min(i.x2,r.x2);if(t.isStacked){o=E;if(n){a=M;s=u}else{s=d}l=Math.max(i.y1,r.y1)-ze}else{if(n){s=u+ze}else{s=d-ze;a=M}l=Math.max(i.y1,r.y1)}}return{point:new F(s,l),align:{horizontal:a,vertical:o}}},overlapsBox:function(e){return this.box.overlaps(e)},pointData:function(){return{dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,stackValue:this.stackValue,runningTotal:this.runningTotal,total:this.total,series:this.series}}});y(Ri.prototype,ci);y(Ri.prototype,fi);Ri.prototype.defaults={border:{width:1},vertical:true,overlay:{gradient:"glass"},labels:{visible:false,format:"{0}"},opacity:1,notes:{label:{}}};function Fi(e,t){e.forEach(t)}function Pi(e,t){var i=e.length;for(var n=i-1;n>=0;n--){t(e[n],n-i-1)}}var zi=w.extend({init:function(e){w.fn.init.call(this,e);this.forEach=e.rtl?Pi:Fi},reflow:function(n){var e=this.options;var t=e.vertical;var i=e.gap;var r=e.spacing;var a=this.children;var o=a.length;var s=t?g:m;var l=o+i+r*(o-1);var d=(t?n.height():n.width())/l;var u=n[s+1]+d*(i/2);this.forEach(a,function(e,t){var i=(e.box||n).clone();i[s+1]=u;i[s+2]=u+d;e.reflow(i);if(t<o-1){u+=d*r}u+=d})}});t(zi,{vertical:false,gap:0,spacing:0});var Bi=w.extend({reflow:function(e){var t=this;var i=this.options.vertical?m:g;var n=this.children;var r=n.length;var a=this.box=new P;for(var o=0;o<r;o++){var s=n[o];if(s.visible!==false){var l=s.box.clone();l.snapTo(e,i);if(o===0){a=t.box=l.clone()}s.reflow(l);a.wrap(l)}}}});t(Bi,{vertical:true});var Li=n.extend({render:function(){n.fn.render.call(this);this.updateStackRange()},pointType:function(){return Ri},clusterType:function(){return zi},stackType:function(){return Bi},stackLimits:function(e,t){var i=n.fn.stackLimits.call(this,e,t);return i},createPoint:function(e,t){var i=t.categoryIx;var n=t.category;var r=t.series;var a=t.seriesIx;var o=this;var s=o.options;var l=o.children;var d=s.isStacked;var u=this.pointValue(e);var c=this.pointOptions(r,a);var f=c.labels;if(d){if(f.position===ti){f.position=Jt}}c.isStacked=d;var h=e.fields.color||r.color;if(u<0&&c.negativeColor){h=c.negativeColor}c=this.evalPointOptions(c,u,n,i,r,a);if(z(r.color)){h=c.color}var p=this.pointType();var v=new p(u,c);v.color=h;var m=l[i];if(!m){var g=this.clusterType();m=new g({vertical:s.invertAxes,gap:s.gap,spacing:s.spacing,rtl:!s.invertAxes&&(this.chartService||{}).rtl});this.append(m)}if(d){var _=this.getStackWrap(r,m);_.append(v)}else{m.append(v)}return v},getStackWrap:function(e,t){var i=e.stack;var n=i?i.group||i:i;var r=t.children;var a;if(typeof n===T.STRING){for(var o=0;o<r.length;o++){if(r[o]._stackGroup===n){a=r[o];break}}}else{a=r[0]}if(!a){var s=this.stackType();a=new s({vertical:!this.options.invertAxes});a._stackGroup=n;t.append(a)}return a},categorySlot:function(e,t,i){var n=this.options;var r=e.getSlot(t);var a=i.startValue();if(n.isStacked){var o=i.getSlot(a,a,true);var s=n.invertAxes?m:g;r[s+1]=r[s+2]=o[s+1]}return r},reflowCategories:function(e){var t=this.children;var i=t.length;for(var n=0;n<i;n++){t[n].reflow(e[n])}},createAnimation:function(){this._setAnimationOptions();n.fn.createAnimation.call(this);if(ki(this.options.series)){this._setChildrenAnimation()}},_setChildrenAnimation:function(){var e=this;var t=this.points;for(var i=0;i<t.length;i++){var n=t[i];var r=n.visual;if(r&&R(r.options.zIndex)){n.options.animation=e.options.animation;n.createAnimation()}}},_setAnimationOptions:function(){var e=this.options;var t=e.animation||{};var i;if(e.isStacked){var n=this.seriesValueAxis(e.series[0]);i=n.getSlot(n.startValue())}else{i=this.categoryAxis.getSlot(0)}t.origin=new x(i.x1,i.y1);t.vertical=!e.invertAxes}});t(Li,{animation:{type:Ze}});var Hi=w.extend({init:function(e,t){w.fn.init.call(this,t);this.value=e},reflow:function(e){var t=this;var i=t.options;var n=t.value;var r=t.owner;var a=r.seriesValueAxis(i);var o=a.getSlot(n.open,n.close);var s=a.getSlot(n.low,n.high);o.x1=s.x1=e.x1;o.x2=s.x2=e.x2;this.realBody=o;var l=s.center().x;var d=[];d.push([[l,s.y1],[l,o.y1]]);d.push([[l,o.y2],[l,s.y2]]);this.lines=d;this.box=s.clone().wrap(o);if(!this._rendered){this._rendered=true;this.createNote()}this.reflowNote()},reflowNote:function(){if(this.note){this.note.reflow(this.box)}},createVisual:function(){w.fn.createVisual.call(this);this._mainVisual=this.mainVisual(this.options);this.visual.append(this._mainVisual);this.createOverlay()},mainVisual:function(e){var t=new ve;this.createBody(t,e);this.createLines(t,e);return t},createBody:function(e,t){var i=k.fromRect(this.realBody.toRect(),{fill:{color:this.color,opacity:t.opacity},stroke:null});if(t.border.width>0){i.options.set("stroke",{color:this.getBorderColor(),width:t.border.width,dashType:t.border.dashType,opacity:B(t.border.opacity,t.opacity)})}G(i);e.append(i);if(Ii(t)){e.append(this.createGradientOverlay(i,{baseColor:this.color},y({end:!t.vertical?[0,1]:undefined},t.overlay)))}},createLines:function(e,t){this.drawLines(e,t,this.lines,t.line)},drawLines:function(e,t,i,n){if(!i){return}var r={stroke:{color:n.color||this.color,opacity:B(n.opacity,t.opacity),width:n.width,dashType:n.dashType,lineCap:"butt"}};for(var a=0;a<i.length;a++){var o=k.fromPoints(i[a],r);G(o);e.append(o)}},getBorderColor:function(){var e=this.options.border;var t=e.color;if(!R(t)){t=new me(this.color).brightness(e._brightness).toHex()}return t},createOverlay:function(){var e=k.fromRect(this.box.toRect(),{fill:{color:h,opacity:0},stroke:null});this.visual.append(e)},createHighlight:function(){var e=this.options.highlight;var t=this.color;this.color=e.color||this.color;var i=this.mainVisual(y({},this.options,{line:{color:this.getBorderColor()}},e));this.color=t;return i},highlightVisual:function(){return this._mainVisual},highlightVisualArgs:function(){return{options:this.options,rect:this.box.toRect(),visual:this._mainVisual}},tooltipAnchor:function(){var e=this.box;var t=this.owner.pane.clipBox()||e;return{point:new F(e.x2+ze,Math.max(e.y1,t.y1)+ze),align:{horizontal:I,vertical:A}}},formatValue:function(e){return this.owner.formatPointValue(this,e)},overlapsBox:function(e){return this.box.overlaps(e)}});t(Hi,{vertical:true,border:{_brightness:.8},line:{width:2},overlay:{gradient:"glass"},tooltip:{format:"<table>"+"<tr><th colspan='2'>{4:d}</th></tr>"+"<tr><td>Open:</td><td>{0:C}</td></tr>"+"<tr><td>High:</td><td>{1:C}</td></tr>"+"<tr><td>Low:</td><td>{2:C}</td></tr>"+"<tr><td>Close:</td><td>{3:C}</td></tr>"+"</table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:true,label:{}}});y(Hi.prototype,ci);y(Hi.prototype,fi);function Ni(e){return xe(e)===e.length}var Oi=n.extend({reflowCategories:function(e){var t=this.children;var i=t.length;for(var n=0;n<i;n++){t[n].reflow(e[n])}},addValue:function(e,t){var i=t.categoryIx;var n=t.category;var r=t.series;var a=t.seriesIx;var o=this;var s=o.children;var l=o.options;var d=e.valueFields;var u=this.splitValue(d);var c=Ni(u);var f=r.data[i];var h=this.categoryPoints[i];var p;if(!h){this.categoryPoints[i]=h=[]}if(c){p=this.createPoint(e,t)}var v=s[i];if(!v){v=new zi({vertical:l.invertAxes,gap:l.gap,spacing:l.spacing,rtl:!l.invertAxes&&(this.chartService||{}).rtl});this.append(v)}if(p){this.updateRange(d,t);v.append(p);p.categoryIx=i;p.category=n;p.series=r;p.seriesIx=a;p.owner=this;p.dataItem=f;p.noteText=e.fields.noteText}this.points.push(p);h.push(p)},pointType:function(){return Hi},createPoint:function(e,t){var i=t.categoryIx;var n=t.category;var r=t.series;var a=t.seriesIx;var o=this.pointType();var s=e.valueFields;var l=y({},r);var d=e.fields.color||r.color;l=this.evalPointOptions(l,s,n,i,r,a);if(r.type===it){if(s.open>s.close){d=e.fields.downColor||r.downColor||r.color}}if(z(r.color)){d=l.color}l.vertical=!this.options.invertAxes;var u=new o(s,l);u.color=d;return u},splitValue:function(e){return[e.low,e.open,e.close,e.high]},updateRange:function(e,t){var i=t.series.axis;var n=this.splitValue(e);var r=this.valueAxisRanges[i];r=this.valueAxisRanges[i]=r||{min:f,max:c};r=this.valueAxisRanges[i]={min:Math.min.apply(Math,n.concat([r.min])),max:Math.max.apply(Math,n.concat([r.max]))}},formatPointValue:function(e,t){var i=e.value;return this.chartService.format.auto(t,i.open,i.high,i.low,i.close,e.category)},animationPoints:function(){return this.points}});y(Oi.prototype,yi);var Vi=Hi.extend({init:function(e,t){Hi.fn.init.call(this,e,t);this.createNote()},reflow:function(e){var t=this;var i=t.options;var n=t.value;var r=t.owner;var a=r.seriesValueAxis(i);var o,s;this.boxSlot=s=a.getSlot(n.q1,n.q3);this.realBody=s;this.reflowBoxSlot(e);this.whiskerSlot=o=a.getSlot(n.lower,n.upper);this.reflowWhiskerSlot(e);var l=a.getSlot(n.median);if(n.mean){var d=a.getSlot(n.mean);this.meanPoints=this.calcMeanPoints(e,d)}this.whiskerPoints=this.calcWhiskerPoints(s,o);this.medianPoints=this.calcMedianPoints(e,l);this.box=o.clone().wrap(s);this.reflowNote()},reflowBoxSlot:function(e){this.boxSlot.x1=e.x1;this.boxSlot.x2=e.x2},reflowWhiskerSlot:function(e){this.whiskerSlot.x1=e.x1;this.whiskerSlot.x2=e.x2},calcMeanPoints:function(e,t){return[[[e.x1,t.y1],[e.x2,t.y1]]]},calcWhiskerPoints:function(e,t){var i=t.center().x;return[[[i-5,t.y1],[i+5,t.y1],[i,t.y1],[i,e.y1]],[[i-5,t.y2],[i+5,t.y2],[i,t.y2],[i,e.y2]]]},calcMedianPoints:function(e,t){return[[[e.x1,t.y1],[e.x2,t.y1]]]},renderOutliers:function(e){var t=this;var i=this.value;var n=i.outliers||[];var r=Math.abs(i.q3-i.q1)*3;var a=[];var o=e.markers||{};for(var s=0;s<n.length;s++){var l=n[s];if(l<i.q3+r&&l>i.q1-r){o=e.outliers}else{o=e.extremes}var d=y({},o.border);if(!R(d.color)){if(R(t.color)){d.color=t.color}else{d.color=new me(o.background).brightness(Pe).toHex()}}var u=new X({type:o.type,width:o.size,height:o.size,rotation:o.rotation,background:o.background,border:d,opacity:o.opacity});u.value=l;a.push(u)}this.reflowOutliers(a);return a},reflowOutliers:function(e){var t=this;var i=this.owner.seriesValueAxis(this.options);var n=this.box.center();for(var r=0;r<e.length;r++){var a=e[r].value;var o=i.getSlot(a);if(t.options.vertical){o.move(n.x)}else{o.move(undefined,n.y)}t.box=t.box.wrap(o);e[r].reflow(o)}},mainVisual:function(e){var t=Hi.fn.mainVisual.call(this,e);var i=this.renderOutliers(e);for(var n=0;n<i.length;n++){var r=i[n].getElement();if(r){t.append(r)}}return t},createLines:function(e,t){this.drawLines(e,t,this.whiskerPoints,t.whiskers);this.drawLines(e,t,this.medianPoints,t.median);this.drawLines(e,t,this.meanPoints,t.mean)},getBorderColor:function(){if((this.options.border||{}).color){return this.options.border.color}if(this.color){return this.color}return Hi.fn.getBorderColor.call(this)}});t(Vi,{border:{_brightness:.8},line:{width:2},median:{color:"#f6f6f6"},mean:{width:2,dashType:"dash",color:"#f6f6f6"},overlay:{gradient:"glass"},tooltip:{format:"<table>"+"<tr><th colspan='2'>{6:d}</th></tr>"+"<tr><td>Lower:</td><td>{0:C}</td></tr>"+"<tr><td>Q1:</td><td>{1:C}</td></tr>"+"<tr><td>Median:</td><td>{2:C}</td></tr>"+"<tr><td>Mean:</td><td>{5:C}</td></tr>"+"<tr><td>Q3:</td><td>{3:C}</td></tr>"+"<tr><td>Upper:</td><td>{4:C}</td></tr>"+"</table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:true,label:{}},outliers:{visible:true,size:Ue,type:T.CROSS,background:h,border:{width:2,opacity:1},opacity:0},extremes:{visible:true,size:Ue,type:O,background:h,border:{width:2,opacity:1},opacity:0}});y(Vi.prototype,ci);var Wi=Vi.extend({reflowBoxSlot:function(e){this.boxSlot.y1=e.y1;this.boxSlot.y2=e.y2},reflowWhiskerSlot:function(e){this.whiskerSlot.y1=e.y1;this.whiskerSlot.y2=e.y2},calcMeanPoints:function(e,t){return[[[t.x1,e.y1],[t.x1,e.y2]]]},calcWhiskerPoints:function(e,t){var i=t.center().y;return[[[t.x1,i-5],[t.x1,i+5],[t.x1,i],[e.x1,i]],[[t.x2,i-5],[t.x2,i+5],[t.x2,i],[e.x2,i]]]},calcMedianPoints:function(e,t){return[[[t.x1,e.y1],[t.x1,e.y2]]]}});var Ui=Oi.extend({addValue:function(e,t){var i=t.categoryIx;var n=t.category;var r=t.series;var a=t.seriesIx;var o=this;var s=o.children;var l=o.options;var d=e.valueFields;var u=this.splitValue(d);var c=Ni(u);var f=r.data[i];var h=this.categoryPoints[i];var p;if(!h){this.categoryPoints[i]=h=[]}if(c){p=this.createPoint(e,t)}var v=s[i];if(!v){v=new zi({vertical:l.invertAxes,gap:l.gap,spacing:l.spacing,rtl:!l.invertAxes&&(this.chartService||{}).rtl});this.append(v)}if(p){this.updateRange(d,t);v.append(p);p.categoryIx=i;p.category=n;p.series=r;p.seriesIx=a;p.owner=this;p.dataItem=f}this.points.push(p);h.push(p)},pointType:function(){if(this.options.invertAxes){return Wi}return Vi},splitValue:function(e){return[e.lower,e.q1,e.median,e.q3,e.upper]},updateRange:function(e,t){var i=t.series.axis;var n=this.valueAxisRanges[i];var r=this.splitValue(e).concat(this.filterOutliers(e.outliers));if(R(e.mean)){r=r.concat(e.mean)}n=this.valueAxisRanges[i]=n||{min:f,max:c};n=this.valueAxisRanges[i]={min:Math.min.apply(Math,r.concat([n.min])),max:Math.max.apply(Math,r.concat([n.max]))}},formatPointValue:function(e,t){var i=e.value;return this.chartService.format.auto(t,i.lower,i.q1,i.median,i.q3,i.upper,i.mean,e.category)},filterOutliers:function(e){var t=(e||[]).length;var i=[];for(var n=0;n<t;n++){var r=e[n];if(R(r)&&r!==null){i.push(r)}}return i},supportsPointInactiveOpacity:function(){return false}});var ji=oi.extend({getAxis:function(){var e=this.chart.seriesAxes(this.series);var t=this.isVertical?e.y:e.x;return t}});function H(e){return R(e)&&e!==null}var Gi=w.extend({init:function(e,t){w.fn.init.call(this,t);this.plotArea=e;this.chartService=e.chartService;this._initFields();this.render()},_initFields:function(){this.xAxisRanges={};this.yAxisRanges={};this.points=[];this.seriesPoints=[];this.seriesOptions=[];this._evalSeries=[]},render:function(){this.traverseDataPoints(this.addValue.bind(this))},addErrorBar:function(e,t,i){var n=e.value[t];var r=t+"Value";var a=t+"ErrorLow";var o=t+"ErrorHigh";var s=i.seriesIx;var l=i.series;var d=e.options.errorBars;var u=i[a];var c=i[o];if(v(n)){var f;if(v(u)&&v(c)){f={low:u,high:c}}if(d&&R(d[r])){this.seriesErrorRanges=this.seriesErrorRanges||{x:[],y:[]};this.seriesErrorRanges[t][s]=this.seriesErrorRanges[t][s]||new Ie(d[r],l,t);f=this.seriesErrorRanges[t][s].getErrorRange(n,d[r])}if(f){this.addPointErrorBar(f,e,t)}}},addPointErrorBar:function(e,t,i){var n=e.low;var r=e.high;var a=t.series;var o=t.options.errorBars;var s=i===g;var l={};t[i+"Low"]=n;t[i+"High"]=r;t.errorBars=t.errorBars||[];var d=new ji(n,r,s,this,a,o);t.errorBars.push(d);t.append(d);l[i]=n;this.updateRange(l,a);l[i]=r;this.updateRange(l,a)},addValue:function(e,t){var i=e.x;var n=e.y;var r=t.seriesIx;var a=this.options.series[r];var o=this.seriesMissingValues(a);var s=this.seriesPoints[r];var l=e;if(!(H(i)&&H(n))){l=this.createMissingValue(l,o)}var d;if(l){d=this.createPoint(l,t);if(d){N.extend(d,t);this.addErrorBar(d,m,t);this.addErrorBar(d,g,t)}this.updateRange(l,t.series)}this.points.push(d);s.push(d)},seriesMissingValues:function(e){return e.missingValues},createMissingValue:function(){},updateRange:function(e,t){var i=this.chartService.intl;var n=t.xAxis;var r=t.yAxis;var a=e.x;var o=e.y;var s=this.xAxisRanges[n];var l=this.yAxisRanges[r];if(H(a)){s=this.xAxisRanges[n]=s||{min:f,max:c};if(ee(a)){a=te(i,a)}s.min=Math.min(s.min,a);s.max=Math.max(s.max,a)}if(H(o)){l=this.yAxisRanges[r]=l||{min:f,max:c};if(ee(o)){o=te(i,o)}l.min=Math.min(l.min,o);l.max=Math.max(l.max,o)}},evalPointOptions:function(e,t,i){var n=i.series;var r=i.seriesIx;var a={defaults:n._defaults,excluded:["data","tooltip","content","template","visual","toggle","_outOfRangeMinPoint","_outOfRangeMaxPoint"]};var o=this._evalSeries[r];if(!R(o)){this._evalSeries[r]=o=di(e,{},a,true)}var s=e;if(o){s=y({},e);di(s,{value:t,series:n,dataItem:i.dataItem},a)}return s},pointType:function(){return hi},pointOptions:function(e,t){var i=this.seriesOptions[t];if(!i){var n=this.pointType().prototype.defaults;this.seriesOptions[t]=i=y({},n,{markers:{opacity:e.opacity},tooltip:{format:this.options.tooltip.format},labels:{format:this.options.labels.format}},e)}return i},createPoint:function(e,t){var i=t.series;var n=this.pointOptions(i,t.seriesIx);var r=t.color||i.color;n=this.evalPointOptions(n,e,t);if(z(i.color)){r=n.color}var a=new hi(e,n);a.color=r;this.append(a);return a},seriesAxes:function(e){var t=e.xAxis;var i=e.yAxis;var n=this.plotArea;var r=t?n.namedXAxes[t]:n.axisX;var a=i?n.namedYAxes[i]:n.axisY;if(!r){throw new Error("Unable to locate X axis with name "+t)}if(!a){throw new Error("Unable to locate Y axis with name "+i)}return{x:r,y:a}},reflow:function(e){var s=this;var l=this.points;var d=!this.options.clip;var u=0;this.traverseDataPoints(function(e,t){var i=l[u++];var n=s.seriesAxes(t.series);var r=n.x.getSlot(e.x,e.x,d);var a=n.y.getSlot(e.y,e.y,d);if(i){if(r&&a){var o=s.pointSlot(r,a);i.reflow(o)}else{i.visible=false}}});this.box=e},pointSlot:function(e,t){return new P(e.x1,t.y1,e.x2,t.y2)},traverseDataPoints:function(e){var t=this;var i=this;var n=i.options.series;var r=i.seriesPoints;for(var a=0;a<n.length;a++){var o=n[a];var s=r[a];if(!s){r[a]=[]}for(var l=0;l<o.data.length;l++){var d=t._bindPoint(o,a,l);var u=d.valueFields;var c=d.fields;e(u,y({pointIx:l,series:o,seriesIx:a,dataItem:o.data[l],owner:t},c))}}},formatPointValue:function(e,t){var i=e.value;return this.chartService.format.auto(t,i.x,i.y)},animationPoints:function(){var e=this.points;var t=[];for(var i=0;i<e.length;i++){t.push((e[i]||{}).marker)}return t}});t(Gi,{series:[],tooltip:{format:"{0}, {1}"},labels:{format:"{0}, {1}"},clip:true});y(Gi.prototype,yi,{_bindPoint:n.prototype._bindPoint});var qi=hi.extend({init:function(e,t){hi.fn.init.call(this,e,t);this.category=e.category},createHighlight:function(){var e=this.options.highlight;var t=e.border;var i=this.options.markers;var n=this.box.center();var r=(i.size+i.border.width+t.width)/2;var a=new ve;var o=new fe.Circle(new ge.Circle([n.x,n.y+r/5+t.width/2],r+t.width/2),{stroke:{color:"none"},fill:this.createGradient({gradient:"bubbleShadow",color:i.background,stops:[{offset:0,color:i.background,opacity:.3},{offset:1,color:i.background,opacity:0}]})});var s=new fe.Circle(new ge.Circle([n.x,n.y],r),{stroke:{color:t.color||new me(i.background).brightness(Pe).toHex(),width:t.width,opacity:t.opacity},fill:{color:i.background,opacity:e.opacity}});a.append(o,s);return a}});qi.prototype.defaults=y({},qi.prototype.defaults,{labels:{position:D},highlight:{opacity:1,border:{color:"#fff",width:2,opacity:1}}});qi.prototype.defaults.highlight.zIndex=undefined;var $i=Gi.extend({_initFields:function(){this._maxSize=c;Gi.fn._initFields.call(this)},addValue:function(e,t){if(e.size!==null&&(e.size>0||e.size<0&&t.series.negativeValues.visible)){this._maxSize=Math.max(this._maxSize,Math.abs(e.size));Gi.fn.addValue.call(this,e,t)}else{this.points.push(null);this.seriesPoints[t.seriesIx].push(null)}},reflow:function(e){this.updateBubblesSize(e);Gi.fn.reflow.call(this,e)},pointType:function(){return qi},createPoint:function(e,t){var i=t.series;var n=i.data.length;var r=t.pointIx*(d/n);var a={delay:r,duration:d-r,type:et};var o=t.color||i.color;if(e.size<0&&i.negativeValues.visible){o=B(i.negativeValues.color,o)}var s=y({labels:{animation:{delay:r,duration:d-r}}},this.pointOptions(i,t.seriesIx),{markers:{type:O,border:i.border,opacity:i.opacity,animation:a}});s=this.evalPointOptions(s,e,t);if(z(i.color)){o=s.color}s.markers.background=o;var l=new qi(e,s);l.color=o;this.append(l);return l},updateBubblesSize:function(e){var t=this;var i=this;var n=i.options.series;var r=Math.min(e.width(),e.height());for(var a=0;a<n.length;a++){var o=n[a];var s=t.seriesPoints[a];var l=o.minSize||Math.max(r*.02,10);var d=o.maxSize||r*.2;var u=l/2;var c=d/2;var f=Math.PI*u*u;var h=Math.PI*c*c;var p=h-f;var v=p/t._maxSize;for(var m=0;m<s.length;m++){var g=s[m];if(g){var _=Math.abs(g.value.size)*v;var b=Math.sqrt((f+_)/Math.PI);var w=B(g.options.zIndex,0);var k=w+(1-b/c);y(g.options,{zIndex:k,markers:{size:b*2,zIndex:k},labels:{zIndex:k+1}})}}}},formatPointValue:function(e,t){var i=e.value;return this.chartService.format.auto(t,i.x,i.y,i.size,e.category)},createAnimation:function(){},createVisual:function(){}});t($i,{tooltip:{format:"{3}"},labels:{format:"{3}"}});var Ki=X.extend({});y(Ki.prototype,ci);var Yi=w.extend({init:function(e,t){w.fn.init.call(this,t);this.aboveAxis=this.options.aboveAxis;this.color=t.color||h;this.value=e},render:function(){var e=this.options;if(!this._rendered){this._rendered=true;if(R(this.value.target)){this.target=new Ki({type:e.target.shape,background:e.target.color||this.color,opacity:e.opacity,zIndex:e.zIndex,border:e.target.border,vAlign:A,align:M});this.target.value=this.value;this.target.dataItem=this.dataItem;this.target.series=this.series;this.append(this.target)}this.createNote()}},reflow:function(e){this.render();var t=this;var i=t.options;var n=t.target;var r=t.owner;var a=i.invertAxes;var o=r.seriesValueAxis(this.options);var s=r.categorySlot(r.categoryAxis,i.categoryIx,o);var l=o.getSlot(this.value.target);var d=a?l:s;var u=a?s:l;if(n){var c=new P(d.x1,u.y1,d.x2,u.y2);n.options.height=a?c.height():i.target.line.width;n.options.width=a?i.target.line.width:c.width();n.reflow(c)}if(this.note){this.note.reflow(e)}this.box=e},createVisual:function(){w.fn.createVisual.call(this);var e=this.options;var t=k.fromRect(this.box.toRect(),{fill:{color:this.color,opacity:e.opacity},stroke:null});if(e.border.width>0){t.options.set("stroke",{color:e.border.color||this.color,width:e.border.width,dashType:e.border.dashType,opacity:B(e.border.opacity,e.opacity)})}this.bodyVisual=t;G(t);this.visual.append(t)},createAnimation:function(){if(this.bodyVisual){this.animation=he.create(this.bodyVisual,this.options.animation)}},createHighlight:function(e){return k.fromRect(this.box.toRect(),e)},highlightVisual:function(){return this.bodyVisual},highlightVisualArgs:function(){return{rect:this.box.toRect(),visual:this.bodyVisual,options:this.options}},formatValue:function(e){return this.owner.formatPointValue(this,e)}});Yi.prototype.tooltipAnchor=Ri.prototype.tooltipAnchor;t(Yi,{border:{width:1},vertical:false,opacity:1,target:{shape:"",border:{width:0,color:"green"},line:{width:2}},tooltip:{format:"Current: {0}<br />Target: {1}"}});y(Yi.prototype,ci);y(Yi.prototype,fi);var Qi=n.extend({init:function(e,t){Xi(t);n.fn.init.call(this,e,t)},reflowCategories:function(e){var t=this.children;var i=t.length;for(var n=0;n<i;n++){t[n].reflow(e[n])}},plotRange:function(e){var t=e.series;var i=this.seriesValueAxis(t);var n=this.categoryAxisCrossingValue(i);return[n,e.value.current||n]},createPoint:function(e,t){var i=t.categoryIx;var n=t.category;var r=t.series;var a=t.seriesIx;var o=this;var s=o.options;var l=o.children;var d=e.valueFields;var u=y({vertical:!s.invertAxes,overlay:r.overlay,categoryIx:i,invertAxes:s.invertAxes},r);var c=e.fields.color||r.color;u=this.evalPointOptions(u,d,n,i,r,a);if(z(r.color)){c=u.color}var f=new Yi(d,u);f.color=c;var h=l[i];if(!h){h=new zi({vertical:s.invertAxes,gap:s.gap,spacing:s.spacing,rtl:!s.invertAxes&&(this.chartService||{}).rtl});this.append(h)}h.append(f);return f},updateRange:function(e,t){var i=e.current;var n=e.target;var r=t.series.axis;var a=this.valueAxisRanges[r];if(R(i)&&!isNaN(i)&&R(n&&!isNaN(n))){a=this.valueAxisRanges[r]=a||{min:f,max:c};a.min=Math.min(a.min,i,n);a.max=Math.max(a.max,i,n)}},formatPointValue:function(e,t){return this.chartService.format.auto(t,e.value.current,e.value.target)},pointValue:function(e){return e.valueFields.current},aboveAxis:function(e){var t=e.value.current;return t>0},createAnimation:function(){var e=this;var t=this.points;this._setAnimationOptions();for(var i=0;i<t.length;i++){var n=t[i];n.options.animation=e.options.animation;n.createAnimation()}}});Qi.prototype._setAnimationOptions=Li.prototype._setAnimationOptions;t(Qi,{animation:{type:Ze}});function Xi(e){var t=e.series;for(var i=0;i<t.length;i++){var n=t[i];var r=n.data;if(r&&!j(r[0])&&!q(r[0])){n.data=[r]}}}var Zi=e.extend({init:function(e,t){this.chartService=e;this.options=y({},this.options,t)},getStyle:function(e,t){var i=e.background;var n=e.border.color;if(t){var r=t.color||t.options.color;i=B(i,r);n=B(n,r)}var a=Z(e.padding||{},"auto");return{backgroundColor:i,borderColor:n,font:e.font,color:e.color,opacity:e.opacity,borderWidth:ie(e.border.width),paddingTop:ie(a.top),paddingBottom:ie(a.bottom),paddingLeft:ie(a.left),paddingRight:ie(a.right)}},show:function(e,t,i){e.format=t.format;var n=this.getStyle(t,i);e.style=n;if(!R(t.color)&&new me(n.backgroundColor).percBrightness()>180){e.className="k-chart-tooltip-inverse"}this.chartService.notify(Kt,e);this.visible=true},hide:function(){if(this.chartService){this.chartService.notify(Yt)}this.visible=false},destroy:function(){delete this.chartService}});t(Zi,{border:{width:1},opacity:1});var Ji=Zi.extend({init:function(e,t,i){Zi.fn.init.call(this,e,i);this.crosshair=t;this.formatService=e.format;this.initAxisName()},initAxisName:function(){var e=this.crosshair.axis;var t=e.plotArea;var i;if(t.categoryAxis){i=e.getCategory?"categoryAxis":"valueAxis"}else{i=e.options.vertical?"yAxis":"xAxis"}this.axisName=i},showAt:function(e){var t=this;var i=t.crosshair.axis;var n=t.options;var r=i[n.stickyMode?"getCategory":"getValue"](e);var a=r;if(n.format){a=this.formatService.auto(n.format,r)}else if(i.options.type===W){a=this.formatService.auto(i.options.labels.dateFormats[i.options.baseUnit],r)}this.show({point:e,anchor:this.getAnchor(),crosshair:this.crosshair,value:a,axisName:this.axisName,axisIndex:this.crosshair.axis.axisIndex},this.options)},hide:function(){this.chartService.notify(Yt,{crosshair:this.crosshair,axisName:this.axisName,axisIndex:this.crosshair.axis.axisIndex})},getAnchor:function(){var e=this;var t=e.crosshair;var i=e.options;var n=i.position;var r=i.padding;var a=!t.axis.options.vertical;var o=t.line.bbox();var s,l,d;if(a){s=D;if(n===E){l=A;d=o.bottomLeft().translate(0,r)}else{l=E;d=o.topLeft().translate(0,-r)}}else{l=D;if(n===I){s=M;d=o.topLeft().translate(-r,0)}else{s=I;d=o.topRight().translate(r,0)}}return{point:d,align:{horizontal:s,vertical:l}}}});t(Ji,{padding:10});var en=w.extend({init:function(e,t,i){w.fn.init.call(this,i);this.axis=t;this.stickyMode=t instanceof ne;var n=this.options.tooltip;if(n.visible){this.tooltip=new Ji(e,this,y({},n,{stickyMode:this.stickyMode}))}},showAt:function(e){this.point=e;this.moveLine();this.line.visible(true);if(this.tooltip){this.tooltip.showAt(e)}},hide:function(){this.line.visible(false);if(this.tooltip){this.tooltip.hide()}},moveLine:function(){var e=this;var t=e.axis;var i=e.point;var n=t.options.vertical;var r=this.getBox();var a=n?g:m;var o=new x(r.x1,r.y1);var s;if(n){s=new x(r.x2,r.y1)}else{s=new x(r.x1,r.y2)}if(i){if(this.stickyMode){var l=t.getSlot(t.pointCategoryIndex(i));o[a]=s[a]=l.center()[a]}else{o[a]=s[a]=i[a]}}this.box=r;this.line.moveTo(o).lineTo(s)},getBox:function(){var e=this.axis;var t=e.pane.axes;var i=t.length;var n=e.options.vertical;var r=e.lineBox().clone();var a=n?m:g;var o;for(var s=0;s<i;s++){var l=t[s];if(l.options.vertical!==n){if(!o){o=l.lineBox().clone()}else{o.wrap(l.lineBox())}}}r[a+1]=o[a+1];r[a+2]=o[a+2];return r},createVisual:function(){w.fn.createVisual.call(this);var e=this.options;this.line=new k({stroke:{color:e.color,width:e.width,opacity:e.opacity,dashType:e.dashType},visible:false});this.moveLine();this.visual.append(this.line)},destroy:function(){if(this.tooltip){this.tooltip.destroy()}w.fn.destroy.call(this)}});t(en,{color:V,width:2,zIndex:-1,tooltip:{visible:false}});var tn=w.extend({init:function(e,t){w.fn.init.call(this,e);this.pane=t},shouldClip:function(){var e=this.children;var t=e.length;for(var i=0;i<t;i++){if(e[i].options.clip===true){return true}}return false},_clipBox:function(){return this.pane.chartsBox()},createVisual:function(){this.visual=new ve({zIndex:0});if(this.shouldClip()){var e=this.clipBox=this._clipBox();var t=e.toRect();var i=k.fromRect(t);G(i);this.visual.clip(i);this.unclipLabels()}},stackRoot:function(){return this},unclipLabels:function(){var e=this;var t=e.children;var i=e.clipBox;for(var n=0;n<t.length;n++){var r=t[n].points||{};var a=r.length;for(var o=0;o<a;o++){var s=r[o];if(s&&s.visible!==false&&s.overlapsBox&&s.overlapsBox(i)){if(s.unclipElements){s.unclipElements()}else{var l=s.label;var d=s.note;if(l&&l.options.visible){if(l.alignToClipBox){l.alignToClipBox(i)}l.options.noclip=true}if(d&&d.options.visible){d.options.noclip=true}}}}}},destroy:function(){w.fn.destroy.call(this);delete this.parent}});tn.prototype.isStackRoot=true;var nn=re.extend({init:function(e){re.fn.init.call(this,e);this.id=an();this.createTitle();this.content=new w;this.chartContainer=new tn({},this);this.append(this.content);this.axes=[];this.charts=[]},createTitle:function(){var e=this.options.title;if(q(e)){e=y({},e,{align:e.position,position:A})}this.title=S.Title.buildTitle(e,this,nn.prototype.options.title)},appendAxis:function(e){this.content.append(e);this.axes.push(e);e.pane=this},appendAxisAt:function(e,t){this.content.append(e);this.axes.splice(t,0,e);e.pane=this},appendChart:function(e){if(this.chartContainer.parent!==this.content){this.content.append(this.chartContainer)}this.charts.push(e);this.chartContainer.append(e);e.pane=this},empty:function(){var e=this;var t=this.parent;if(t){for(var i=0;i<this.axes.length;i++){t.removeAxis(e.axes[i])}for(var n=0;n<this.charts.length;n++){t.removeChart(e.charts[n])}}this.axes=[];this.charts=[];this.content.destroy();this.content.children=[];this.chartContainer.children=[]},reflow:function(e){var t;if($(this.children)===this.content){t=this.children.pop()}re.fn.reflow.call(this,e);if(t){this.children.push(t)}if(this.title){this.contentBox.y1+=this.title.box.height()}},visualStyle:function(){var e=re.fn.visualStyle.call(this);e.zIndex=-10;return e},renderComplete:function(){if(this.options.visible){this.createGridLines()}},stackRoot:function(){return this},clipRoot:function(){return this},createGridLines:function(){var e=this.axes;var t=e.concat(this.parent.axes);var i=[];var n=[];for(var r=0;r<e.length;r++){var a=e[r];var o=a.options.vertical;var s=o?i:n;for(var l=0;l<t.length;l++){if(s.length===0){var d=t[l];if(o!==d.options.vertical){J(s,a.createGridLines(d))}}}}},refresh:function(){this.visual.clear();this.content.parent=null;this.content.createGradient=this.createGradient.bind(this);this.content.renderVisual();this.content.parent=this;if(this.title){this.visual.append(this.title.visual)}this.visual.append(this.content.visual);this.renderComplete();this.notifyRender()},chartsBox:function(){var e=this.axes;var t=e.length;var i=new P;for(var n=0;n<t;n++){var r=e[n];var a=r.options.vertical?g:m;var o=r.lineBox();i[a+1]=o[a+1];i[a+2]=o[a+2]}if(i.x2===0){var s=this.parent.axes;var l=s.length;for(var d=0;d<l;d++){var u=s[d];if(!u.options.vertical){var c=u.lineBox();i.x1=c.x1;i.x2=c.x2}}}return i},clipBox:function(){return this.chartContainer.clipBox},notifyRender:function(){var e=this.getService();if(e){e.notify(Qt,{pane:new ke(this),index:this.paneIndex,name:this.options.name})}}});var rn=1;function an(){return"pane"+rn++}nn.prototype.isStackRoot=true;t(nn,{zIndex:-1,shrinkToFit:true,title:{align:I},visible:true});function on(e,t){if(t!==null){e.push(t)}}function sn(e,t,i){var n=t.visible;if(R(n)){return n}var r=e.pointVisibility;if(r){return r[i]}}function ln(e){var t=e.data;var i=[];var n=0;var r=0;for(var a=0;a<t.length;a++){var o=C.current.bindPoint(e,a);var s=o.valueFields.value;if(ee(s)){s=parseFloat(s)}if(v(s)){o.visible=sn(e,o.fields,a)!==false;o.value=Math.abs(s);i.push(o);if(o.visible){n+=o.value}if(s!==0){r++}}else{i.push(null)}}return{total:n,points:i,count:r}}function dn(e,t){if(e&&t){return e.toLowerCase()===t.toLowerCase()}return e===t}function p(e,t){var i=[];var n=[].concat(t);for(var r=0;r<e.length;r++){var a=e[r];if(_(a.type,n)){i.push(a)}}return i}function un(e,t,i){if(t===null){return t}var n="_date_"+e;var r=t[n];if(!r){r=te(i,U(e,true)(t));t[n]=r}return r}function cn(e,t){var i=e.type;var n=t instanceof Date;return!i&&n||dn(i,W)}function fn(e){return e.length===1?e[0]:e}var hn=/area/i;function pn(e){if(e.missingValues){return e.missingValues}return hn.test(e.type)||e.stack?je:Ge}function vn(e,t){var i=C.current.bindPoint(e,null,t);var n=i.valueFields;for(var r in n){if(S.convertableToNumber(n[r])){return true}}}function mn(e){var t=e.start;var i=e.dir;var n=e.min;var r=e.max;var a=e.getter;var o=e.hasItem;var s=e.series;var l,d;var u=t;do{u+=i;if(o(u)){d=a(u);l=vn(s,d.item)}}while(n<=u&&u<=r&&!l);if(l){return d}}function gn(e,t,i,n,r){var a=t.min;var o=t.max;var s=a>0&&a<i;var l=o+1<i;if(s||l){var d=pn(e);var u,c;if(d!==Ge){if(s){u=n(a-1)}if(l){c=n(o+1)}}else{var f,h;if(s){f=n(a-1);h=vn(e,f.item);if(!h){u=mn({start:a,dir:-1,min:0,max:i-1,getter:n,hasItem:r,series:e})}else{u=f}}if(l){f=n(o+1);h=vn(e,f.item);if(!h){c=mn({start:o,dir:1,min:0,max:i-1,getter:n,hasItem:r,series:e})}else{c=f}}}if(u){e._outOfRangeMinPoint=u}if(c){e._outOfRangeMaxPoint=c}}}var o=w.extend({init:function(e,t,i){w.fn.init.call(this,t);this.initFields(e,t);this.series=e;this.initSeries();this.charts=[];this.options.legend=this.options.legend||{};this.options.legend.items=[];this.axes=[];this.crosshairs=[];this.chartService=i;this.originalOptions=t;this.createPanes();this.render();this.createCrosshairs()},initFields:function(){},initSeries:function(){var e=this.series;for(var t=0;t<e.length;t++){e[t].index=t}},createPanes:function(){var e=this;var t={title:{color:(this.options.title||{}).color}};var i=[];var n=this.options.panes||[];var r=Math.max(n.length,1);function a(e,t){if(ee(e.title)){e.title={text:e.title}}e.title=y({},t.title,e.title)}for(var o=0;o<r;o++){var s=n[o]||{};a(s,t);var l=new nn(s);l.paneIndex=o;i.push(l);e.append(l)}this.panes=i},createCrosshairs:function(e){var t=this;if(e===void 0){e=this.panes}for(var i=0;i<e.length;i++){var n=e[i];for(var r=0;r<n.axes.length;r++){var a=n.axes[r];if(a.options.crosshair&&a.options.crosshair.visible){var o=new en(t.chartService,a,a.options.crosshair);t.crosshairs.push(o);n.content.append(o)}}}},removeCrosshairs:function(e){var t=this.crosshairs;var i=e.axes;for(var n=t.length-1;n>=0;n--){for(var r=0;r<i.length;r++){if(t[n].axis===i[r]){t.splice(n,1);break}}}},hideCrosshairs:function(){var e=this.crosshairs;for(var t=0;t<e.length;t++){e[t].hide()}},findPane:function(e){var t=this.panes;var i;for(var n=0;n<t.length;n++){if(t[n].options.name===e){i=t[n];break}}return i||t[0]},findPointPane:function(e){var t=this.panes;var i;for(var n=0;n<t.length;n++){if(t[n].box.containsPoint(e)){i=t[n];break}}return i},appendAxis:function(e){var t=this.findPane(e.options.pane);t.appendAxis(e);this.axes.push(e);e.plotArea=this},removeAxis:function(e){var t=this;var i=[];for(var n=0;n<this.axes.length;n++){var r=t.axes[n];if(e!==r){i.push(r)}else{r.destroy()}}this.axes=i},appendChart:function(e,t){this.charts.push(e);if(t){t.appendChart(e)}else{this.append(e)}},removeChart:function(e){var t=this;var i=[];for(var n=0;n<this.charts.length;n++){var r=t.charts[n];if(r!==e){i.push(r)}else{r.destroy()}}this.charts=i},addToLegend:function(e){var t=e.length;var i=this.options.legend;var n=i.labels||{};var r=i.inactiveItems||{};var a=r.labels||{};var o=[];for(var s=0;s<t;s++){var l=e[s];var d=l.visible!==false;if(l.visibleInLegend===false){continue}var u=l.name;var c=d?Y(n):Y(a)||Y(n);if(c){u=c({text:H(u)?u:"",series:l})}var f=l._defaults;var h=l.color;if(z(h)&&f){h=f.color}var p=void 0,v=void 0;if(d){p={};v=h}else{p={color:a.color,font:a.font};v=r.markers.color}if(H(u)&&u!==""){o.push({text:u,labels:p,markerColor:v,series:l,active:d})}}J(i.items,o)},groupAxes:function(e){var t=[];var i=[];for(var n=0;n<e.length;n++){var r=e[n].axes;for(var a=0;a<r.length;a++){var o=r[a];if(o.options.vertical){i.push(o)}else{t.push(o)}}}return{x:t,y:i,any:t.concat(i)}},groupSeriesByPane:function(){var e=this;var t=this.series;var i={};for(var n=0;n<t.length;n++){var r=t[n];var a=e.seriesPaneName(r);if(i[a]){i[a].push(r)}else{i[a]=[r]}}return i},filterVisibleSeries:function(e){var t=[];for(var i=0;i<e.length;i++){var n=e[i];if(n.visible!==false){t.push(n)}}return t},reflow:function(e){var t=this.options.plotArea;var i=this.panes;var n=Z(t.margin);this.box=e.clone().unpad(n);this.reflowPanes();this.detachLabels();this.reflowAxes(i);this.reflowCharts(i)},redraw:function(e){var t=this;var i=[].concat(e);this.initSeries();var n=this.getRoot();if(n){n.cleanGradients()}for(var r=0;r<i.length;r++){t.removeCrosshairs(i[r]);i[r].empty()}this.render(i);this.detachLabels();this.reflowAxes(this.panes);this.reflowCharts(i);this.createCrosshairs(i);for(var a=0;a<i.length;a++){i[a].refresh()}},axisCrossingValues:function(e,t){var i=e.options;var n=[].concat(i.axisCrossingValues||i.axisCrossingValue);var r=t.length-n.length;var a=n[0]||0;for(var o=0;o<r;o++){n.push(a)}return n},alignAxisTo:function(e,t,i,n){var r=e.getSlot(i,i,true);var a=e.options.reverse?2:1;var o=t.getSlot(n,n,true);var s=t.options.reverse?2:1;var l=e.box.translate(o[m+s]-r[m+a],o[g+s]-r[g+a]);if(e.pane!==t.pane){l.translate(0,e.pane.box.y1-t.pane.box.y1)}e.reflow(l)},alignAxes:function(e,t){var i=this;var n=e[0];var r=t[0];var a=this.axisCrossingValues(n,t);var o=this.axisCrossingValues(r,e);var s={};var l={};var d={};var u={};for(var c=0;c<t.length;c++){var f=t[c];var h=f.pane;var p=h.id;var v=f.options.visible!==false;var m=wn(e,h)||n;var g=a;if(m!==n){g=i.axisCrossingValues(m,t)}i.alignAxisTo(f,m,o[c],g[c]);if(f.options._overlap){continue}if(L(f.lineBox().x1)===L(m.lineBox().x1)){if(s[p]){f.reflow(f.box.alignTo(s[p].box,I).translate(-f.options.margin,0))}if(v){s[p]=f}}if(L(f.lineBox().x2)===L(m.lineBox().x2)){if(!f._mirrored){f.options.labels.mirror=!f.options.labels.mirror;f._mirrored=true}i.alignAxisTo(f,m,o[c],g[c]);if(l[p]){f.reflow(f.box.alignTo(l[p].box,M).translate(f.options.margin,0))}if(v){l[p]=f}}if(c!==0&&r.pane===f.pane){f.alignTo(r);f.reflow(f.box)}}for(var _=0;_<e.length;_++){var b=e[_];var w=b.pane;var k=w.id;var y=b.options.visible!==false;var x=wn(t,w)||r;var C=o;if(x!==r){C=i.axisCrossingValues(x,e)}i.alignAxisTo(b,x,a[_],C[_]);if(b.options._overlap){continue}if(L(b.lineBox().y1)===L(x.lineBox().y1)){if(!b._mirrored){b.options.labels.mirror=!b.options.labels.mirror;b._mirrored=true}i.alignAxisTo(b,x,a[_],C[_]);if(d[k]){b.reflow(b.box.alignTo(d[k].box,A).translate(0,-b.options.margin))}if(y){d[k]=b}}if(L(b.lineBox().y2,T.COORD_PRECISION)===L(x.lineBox().y2,T.COORD_PRECISION)){if(u[k]){b.reflow(b.box.alignTo(u[k].box,E).translate(0,b.options.margin))}if(y){u[k]=b}}if(_!==0){b.alignTo(n);b.reflow(b.box)}}},shrinkAxisWidth:function(e){var t=this.groupAxes(e).any;var i=bn(t);var n=0;for(var r=0;r<e.length;r++){var a=e[r];if(a.axes.length>0){n=Math.max(n,i.width()-a.contentBox.width())}}if(n!==0){for(var o=0;o<t.length;o++){var s=t[o];if(!s.options.vertical){s.reflow(s.box.shrink(n,0))}}}},shrinkAxisHeight:function(e){var t;for(var i=0;i<e.length;i++){var n=e[i];var r=n.axes;var a=Math.max(0,bn(r).height()-n.contentBox.height());if(a!==0){for(var o=0;o<r.length;o++){var s=r[o];if(s.options.vertical){s.reflow(s.box.shrink(0,a))}}t=true}}return t},fitAxes:function(e){var t=this.groupAxes(e).any;var i=0;for(var n=0;n<e.length;n++){var r=e[n];var a=r.axes;var o=r.contentBox;if(a.length>0){var s=bn(a);var l=Math.max(o.y1-s.y1,o.y2-s.y2);i=Math.max(i,o.x1-s.x1);for(var d=0;d<a.length;d++){var u=a[d];u.reflow(u.box.translate(0,l))}}}for(var c=0;c<t.length;c++){var f=t[c];f.reflow(f.box.translate(i,0))}},reflowAxes:function(e){var t=this;var i=this.groupAxes(e);for(var n=0;n<e.length;n++){t.reflowPaneAxes(e[n])}if(i.x.length>0&&i.y.length>0){this.alignAxes(i.x,i.y);this.shrinkAxisWidth(e);this.autoRotateAxisLabels(i);this.alignAxes(i.x,i.y);if(this.shrinkAxisWidth(e)){this.alignAxes(i.x,i.y)}this.shrinkAxisHeight(e);this.alignAxes(i.x,i.y);if(this.shrinkAxisHeight(e)){this.alignAxes(i.x,i.y)}this.fitAxes(e)}},autoRotateAxisLabels:function(e){var t=this;var i=this;var n=i.panes;var r=yn(n);var a;for(var o=0;o<r.length;o++){var s=r[o];if(s.autoRotateLabels()){a=true}}if(a){for(var l=0;l<n.length;l++){t.reflowPaneAxes(n[l])}if(e.x.length>0&&e.y.length>0){this.alignAxes(e.x,e.y);this.shrinkAxisWidth(n)}}},reflowPaneAxes:function(e){var t=e.axes;var i=t.length;if(i>0){for(var n=0;n<i;n++){t[n].reflow(e.contentBox)}}},reflowCharts:function(e){var t=this.charts;var i=t.length;var n=this.box;for(var r=0;r<i;r++){var a=t[r].pane;if(!a||_(a,e)){t[r].reflow(n)}}},reflowPanes:function(){var e=this;var t=e.box;var i=e.panes;var n=i.length;var r=t.height();var a=n;var o=0;var s=t.y1;for(var l=0;l<n;l++){var d=i[l];var u=d.options.height;d.options.width=t.width();if(!d.options.height){o++}else{if(u.indexOf&&u.indexOf("%")){var c=parseInt(u,10)/100;d.options.height=c*t.height()}d.reflow(t.clone());r-=d.options.height}}for(var f=0;f<n;f++){var h=i[f];if(!h.options.height){h.options.height=r/o}}for(var p=0;p<n;p++){var v=i[p];var m=t.clone().move(t.x1,s);v.reflow(m);a--;s+=v.options.height}},backgroundBox:function(){var e=this.axes;var t=e.length;var i;for(var n=0;n<t;n++){var r=e[n];for(var a=0;a<t;a++){var o=e[a];if(r.options.vertical!==o.options.vertical){var s=r.lineBox().clone().wrap(o.lineBox());if(!i){i=s}else{i=i.wrap(s)}}}}return i||this.box},chartsBoxes:function(){var e=this.panes;var t=[];for(var i=0;i<e.length;i++){t.push(e[i].chartsBox())}return t},addBackgroundPaths:function(e){var t=this.chartsBoxes();for(var i=0;i<t.length;i++){e.paths.push(k.fromRect(t[i].toRect()))}},backgroundContainsPoint:function(e){var t=this.chartsBoxes();for(var i=0;i<t.length;i++){if(t[i].containsPoint(e)){return true}}},createVisual:function(){w.fn.createVisual.call(this);var e=this.options.plotArea;var t=e.opacity;var i=e.background;var n=e.border;if(n===void 0){n={}}if(kn(i)){i=h;t=0}var r=this._bgVisual=new fe.MultiPath({fill:{color:i,opacity:t},stroke:{color:n.width?n.color:"",width:n.width,dashType:n.dashType},zIndex:-1});this.addBackgroundPaths(r);this.appendVisual(r)},pointsByCategoryIndex:function(e){var t=this.charts;var i=[];if(e!==null){for(var n=0;n<t.length;n++){var r=t[n];if(r.pane.options.name==="_navigator"){continue}var a=t[n].categoryPoints[e];if(a&&a.length){for(var o=0;o<a.length;o++){var s=a[o];if(s&&R(s.value)&&s.value!==null){i.push(s)}}}}}return i},pointsBySeriesIndex:function(t){return this.filterPoints(function(e){return e.series.index===t})},pointsBySeriesName:function(t){return this.filterPoints(function(e){return e.series.name===t})},filterPoints:function(e){var t=this.charts;var i=[];for(var n=0;n<t.length;n++){var r=t[n];var a=r.points;for(var o=0;o<a.length;o++){var s=a[o];if(s&&s.visible!==false&&e(s)){i.push(s)}}}return i},findPoint:function(e){var t=this.charts;for(var i=0;i<t.length;i++){var n=t[i];var r=n.points;for(var a=0;a<r.length;a++){var o=r[a];if(o&&o.visible!==false&&e(o)){return o}}}},paneByPoint:function(e){var t=this.panes;for(var i=0;i<t.length;i++){var n=t[i];if(n.box.containsPoint(e)){return n}}},detachLabels:function(){var e=this.groupAxes(this.panes);var t=e.x;var i=e.y;this.detachAxisGroupLabels(i,t);this.detachAxisGroupLabels(t,i)},detachAxisGroupLabels:function(e,t){var i=this;var n=0;for(var r=0;r<e.length;r++){var a=e[r];var o=a.pane;var s=wn(t,o)||t[0];var l=r+n;var d=i.createLabelAxis(a,l,s);if(d){n++;var u=o.axes.indexOf(a)+n;o.appendAxisAt(d,u)}}},createLabelAxis:function(e,t,i){var n=e.options.labels;var r=n.position;var a=r!==T.END&&r!==T.START;var o=n.visible;if(a||o===false){return null}var s=this.groupAxes(this.panes);var l=i.options.vertical?s.x:s.y;var d=this.axisCrossingValues(i,l);var u=r===T.END;var c=i.range();var f=u?c.max:c.min;var h=ae(d[t],c.min,c.max);if(h-f===0){return null}d.splice(t+1,0,f);i.options.axisCrossingValues=d;var p=e.clone();e.clear();p.options.name=undefined;p.options.line.visible=false;p.options.crosshair=undefined;p.options.notes=undefined;p.options.plotBands=undefined;return p}});function _n(t){return!t.pane.axes.some(function(e){return e.options.vertical===t.options.vertical&&e!==t&&e.options.visible!==false})}function bn(e){var t=e.length;var i;for(var n=0;n<t;n++){var r=e[n];var a=r.options.visible!==false;if(a||_n(r)){var o=a?r.contentBox():r.lineBox();if(!i){i=o.clone()}else{i.wrap(o)}}}return i||new P}function wn(e,t){for(var i=0;i<e.length;i++){var n=e[i];if(n&&n.pane===t){return n}}}function kn(e){return e===""||e===null||e==="none"||e==="transparent"||!R(e)}var yn=function(e){return e.reduce(function(e,t){return e.concat(t.axes)},[])};t(o,{series:[],plotArea:{margin:{}},background:"",border:{color:V,width:0},legend:{inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}}});var xn={hover:function(e,t){this._dispatchEvent(e,t,Bt)},click:function(e,t){this._dispatchEvent(e,t,zt)}};var Cn=e.extend({init:function(e,t,i){var n=t.canonicalFields(e);var r=t.valueFields(e);var a=t.sourceFields(e,n);var o=this._seriesFields=[];var s=i.query(e.type);var l=e.aggregate||s;this._series=e;this._binder=t;for(var d=0;d<n.length;d++){var u=n[d];var c=void 0;if(q(l)){c=l[u]}else if(d===0||_(u,r)){c=l}else{break}if(c){o.push({canonicalName:u,name:a[d],transform:z(c)?c:Ce[c]})}}},aggregatePoints:function(e,t){var i=this;var n=this;var r=n._series;var a=n._seriesFields;var o=this._bindPoints(e||[]);var s=o.dataItems[0];var l={};if(s&&!v(s)&&!j(s)){var d=function(){};d.prototype=s;l=new d}for(var u=0;u<a.length;u++){var c=a[u];var f=i._bindField(o.values,c.canonicalName);var h=c.transform(f,r,o.dataItems,t);if(h!==null&&q(h)&&!R(h.length)&&!(h instanceof Date)){l=h;break}else{if(R(h)){Sn(c.name,l,h)}}}return l},_bindPoints:function(e){var t=this;var i=t._binder;var n=t._series;var r=[];var a=[];for(var o=0;o<e.length;o++){var s=e[o];r.push(i.bindPoint(n,s));a.push(n.data[s])}return{values:r,dataItems:a}},_bindField:function(e,t){var i=[];var n=e.length;for(var r=0;r<n;r++){var a=e[r];var o=a.valueFields;var s=void 0;if(R(o[t])){s=o[t]}else{s=a.fields[t]}i.push(s)}return i}});function Sn(e,t,i){var n=t;var r=e;if(e.indexOf(".")>-1){var a=e.split(".");while(a.length>1){r=a.shift();if(!R(n[r])){n[r]={}}n=n[r]}r=a.shift()}n[r]=i}var Tn=e.extend({init:function(){this._defaults={}},register:function(e,t){var i=this;for(var n=0;n<e.length;n++){i._defaults[e[n]]=t}},query:function(e){return this._defaults[e]}});Tn.current=new Tn;var Dn=Ri.extend({createLabel:function(){var e=this.options.labels;var t=y({},e,e.from);var i=y({},e,e.to);if(t.visible){this.labelFrom=this._createLabel(t);this.append(this.labelFrom)}if(i.visible){this.labelTo=this._createLabel(i);this.append(this.labelTo)}},_createLabel:function(e){var t=Y(e);var i=this.pointData();var n;if(t){n=t(i)}else{n=this.formatValue(e.format)}return new Ei(n,y({vertical:this.options.vertical},e),i)},reflow:function(e){this.render();var t=this;var i=t.labelFrom;var n=t.labelTo;var r=t.value;this.box=e;if(i){i.options.aboveAxis=r.from>r.to;i.reflow(e)}if(n){n.options.aboveAxis=r.to>r.from;n.reflow(e)}if(this.note){this.note.reflow(e)}}});Dn.prototype.defaults=y({},Dn.prototype.defaults,{labels:{format:"{0} - {1}"},tooltip:{format:"{1}"}});var An=Li.extend({pointType:function(){return Dn},pointValue:function(e){return e.valueFields},formatPointValue:function(e,t){if(e.value.from===null&&e.value.to===null){return""}return this.chartService.format.auto(t,e.value.from,e.value.to)},plotRange:function(e){if(!e){return 0}return[e.value.from,e.value.to]},updateRange:function(e,t){var i=t.series.axis;var n=e.from;var r=e.to;var a=this.valueAxisRanges[i];if(e!==null&&v(n)&&v(r)){a=this.valueAxisRanges[i]=a||{min:f,max:c};a.min=Math.min(a.min,n);a.max=Math.max(a.max,n);a.min=Math.min(a.min,r);a.max=Math.max(a.max,r)}},aboveAxis:function(e){var t=e.value;return t.from<t.to}});An.prototype.plotLimits=n.prototype.plotLimits;var En=hi.extend({aliasFor:function(){return this.parent}});var In="auto";var Mn="{0}";var Rn="{1}";var Fn=w.extend({init:function(e,t){w.fn.init.call(this);this.value=e;this.options=t;this.aboveAxis=B(this.options.aboveAxis,true);this.tooltipTracking=true;this.initLabelsFormat()},render:function(){if(this._rendered){return}this._rendered=true;var e=this.options;var t=e.markers;var i=e.labels;var n=this.value;var r=this.fromPoint=new En(n,y({},this.options,{labels:i.from,markers:t.from}));var a=this.toPoint=new En(n,y({},this.options,{labels:i.to,markers:t.to}));this.copyFields(r);this.copyFields(a);this.append(r);this.append(a)},reflow:function(e){this.render();var t=e.from;var i=e.to;this.positionLabels(t,i);this.fromPoint.reflow(t);this.toPoint.reflow(i);this.box=this.fromPoint.markerBox().clone().wrap(this.toPoint.markerBox())},createHighlight:function(){var e=new ve;e.append(this.fromPoint.createHighlight());e.append(this.toPoint.createHighlight());return e},highlightVisual:function(){return this.visual},highlightVisualArgs:function(){return{options:this.options,from:this.fromPoint.highlightVisualArgs(),to:this.toPoint.highlightVisualArgs()}},tooltipAnchor:function(){var e=this.owner.pane.clipBox();var t=!e||e.overlaps(this.box);if(t){var i=this.box;var n=i.center();var r=I;var a,o,s;if(this.options.vertical){a=n.x;o=i.y1-ze;s=E}else{a=i.x2+ze;o=n.y;s=D}return{point:new F(a,o),align:{horizontal:r,vertical:s}}}},formatValue:function(e){return this.owner.formatPointValue(this,e)},overlapsBox:function(e){return this.box.overlaps(e)},unclipElements:function(){this.fromPoint.unclipElements();this.toPoint.unclipElements()},initLabelsFormat:function(){var e=this.options.labels;if(!e.format){if(!e.from||!e.from.format){e.from=N.extend({},e.from,{format:Mn})}if(!e.to||!e.to.format){e.to=N.extend({},e.to,{format:Rn})}}},positionLabels:function(e,t){var i=this.options;var n=i.labels;var r=i.vertical;if(n.position===In){var a,o;if(r){if(t.y1<=e.y1){o=$e;a=Ke}else{o=Ke;a=$e}}else{if(t.x1<=e.x1){o=I;a=M}else{o=M;a=I}}if(!n.from||!n.from.position){this.fromPoint.options.labels.position=a}if(!n.to||!n.to.position){this.toPoint.options.labels.position=o}}},copyFields:function(e){e.dataItem=this.dataItem;e.category=this.category;e.series=this.series;e.color=this.color;e.owner=this.owner}});y(Fn.prototype,ci);y(Fn.prototype,fi);Fn.prototype.defaults={markers:{visible:false,background:h,size:Ue,type:O,border:{width:2},opacity:1},labels:{visible:false,margin:Z(3),padding:Z(4),animation:{type:Re,delay:d},position:In},notes:{label:{}},highlight:{markers:{border:{color:h,width:2}},zIndex:T.HIGHLIGHT_ZINDEX},tooltip:{format:"{0} - {1}"}};var Pn=Ci.extend({createStrokeSegments:function(){return this.segmentsFromPoints(this.toGeometryPoints(this.toPoints()))},stackSegments:function(){var e=this.fromSegments;if(!this.fromSegments){e=this.fromSegments=this.segmentsFromPoints(this.toGeometryPoints(this.fromPoints().reverse()))}return e},createStroke:function(e){var t=new k(e);var i=new k(e);t.segments.push.apply(t.segments,this.strokeSegments());i.segments.push.apply(i.segments,this.stackSegments());this.visual.append(t);this.visual.append(i)},hasStackSegment:function(){return true},fromPoints:function(){return this.linePoints.map(function(e){return e.fromPoint})},toPoints:function(){return this.linePoints.map(function(e){return e.toPoint})}});var zn=Pn.extend({createStrokeSegments:function(){return this.createCurveSegments(this.toPoints())},stackSegments:function(){var e=this.fromSegments;if(!this.fromSegments){e=this.fromSegments=this.createCurveSegments(this.fromPoints().reverse())}return e},createCurveSegments:function(e){var t=new l;return t.process(this.toGeometryPoints(e))}});var Bn=Pn.extend({createStrokeSegments:function(){return this.segmentsFromPoints(this.calculateStepPoints(this.toPoints()))},stackSegments:function(){var e=this.fromSegments;if(!this.fromSegments){e=this.fromSegments=this.segmentsFromPoints(this.calculateStepPoints(this.fromPoints()));e.reverse()}return e}});y(Bn.prototype,vi);var Ln=n.extend({render:function(){n.fn.render.call(this);this.renderSegments()},pointType:function(){return Fn},createPoint:function(e,t){var i=t.categoryIx;var n=t.category;var r=t.series;var a=t.seriesIx;var o=e.valueFields;if(!H(o.from)&&!H(o.to)){if(this.seriesMissingValues(r)===je){o={from:0,to:0}}else{return null}}var s=this.pointOptions(r,a);s=this.evalPointOptions(s,o,n,i,r,a);var l=e.fields.color||r.color;if(z(r.color)){l=s.color}var d=new Fn(o,s);d.color=l;this.append(d);return d},createSegment:function(e,t,i){var n=(t.line||{}).style;var r;if(n==="smooth"){r=zn}else if(n==="step"){r=Bn}else{r=Pn}return new r(e,t,i)},plotRange:function(e,t){if(!e){return[t,t]}return[e.value.from,e.value.to]},valueSlot:function(e,t){var i=e.getSlot(t[0],t[0],!this.options.clip);var n=e.getSlot(t[1],t[1],!this.options.clip);if(i&&n){return{from:i,to:n}}},pointSlot:function(e,t){var i=t.from;var n=t.to;var r,a;if(this.options.invertAxes){r=new P(i.x1,e.y1,i.x2,e.y2);a=new P(n.x1,e.y1,n.x2,e.y2)}else{r=new P(e.x1,i.y1,e.x2,i.y2);a=new P(e.x1,n.y1,e.x2,n.y2)}return{from:r,to:a}},addValue:function(e,t){var i=e.valueFields;if(!v(i.from)){i.from=i.to}if(!v(i.to)){i.to=i.from}n.fn.addValue.call(this,e,t)},updateRange:function(e,t){if(e!==null&&v(e.from)&&v(e.to)){var i=t.series.axis;var n=this.valueAxisRanges[i]=this.valueAxisRanges[i]||{min:f,max:c};var r=e.from;var a=e.to;n.min=Math.min(n.min,r,a);n.max=Math.max(n.max,r,a)}},formatPointValue:function(e,t){var i=e.value;return this.chartService.format.auto(t,i.from,i.to)},animationPoints:function(){var e=this.points;var t=[];for(var i=0;i<e.length;i++){var n=e[i];if(n){t.push((n.fromPoint||{}).marker);t.push((n.toPoint||{}).marker)}}return t.concat(this._segments)}});y(Ln.prototype,bi,yi);var Hn=Hi.extend({reflow:function(e){var t=this;var i=t.options;var n=t.value;var r=t.owner;var a=r.seriesValueAxis(i);var o=[];var s=[];var l=[];var d=a.getSlot(n.low,n.high);var u=a.getSlot(n.open,n.open);var c=a.getSlot(n.close,n.close);u.x1=c.x1=d.x1=e.x1;u.x2=c.x2=d.x2=e.x2;var f=d.center().x;o.push([u.x1,u.y1]);o.push([f,u.y1]);s.push([f,c.y1]);s.push([c.x2,c.y1]);l.push([f,d.y1]);l.push([f,d.y2]);this.lines=[o,s,l];this.box=d.clone().wrap(u.clone().wrap(c));this.reflowNote()},createBody:function(){}});var Nn=Oi.extend({pointType:function(){return Hn}});var On=w.extend({init:function(e,t,i){w.fn.init.call(this);this.from=e;this.to=t;this.series=i},linePoints:function(){var e=this.from;var t=this;var i=t.from.box;var n=t.to.box;var r=[];if(e.isVertical){var a=e.aboveAxis?i.y1:i.y2;r.push([i.x1,a],[n.x2,a])}else{var o=e.aboveAxis?i.x2:i.x1;r.push([o,i.y1],[o,n.y2])}return r},createVisual:function(){w.fn.createVisual.call(this);var e=this.series.line||{};var t=k.fromPoints(this.linePoints(),{stroke:{color:e.color,width:e.width,opacity:e.opacity,dashType:e.dashType}});G(t);this.visual.append(t)}});t(On,{animation:{type:Re,delay:d}});var Vn=Li.extend({render:function(){Li.fn.render.call(this);this.createSegments()},traverseDataPoints:function(e){var t=this;var i=this.options.series;var n=ui(i);var r=!this.options.invertAxes;for(var a=0;a<i.length;a++){var o=i[a];var s=0;var l=0;for(var d=0;d<n;d++){var u=C.current.bindPoint(o,d);var c=u.valueFields.value;var f=u.fields.summary;var h=s;var p=void 0;if(f){if(f.toLowerCase()==="total"){u.valueFields.value=s;h=0;p=s}else{u.valueFields.value=l;p=h-l;l=0}}else if(v(c)){l+=c;s+=c;p=s}e(u,{category:t.categoryAxis.categoryAt(d),categoryIx:d,series:o,seriesIx:a,total:s,runningTotal:l,from:h,to:p,isVertical:r})}}},updateRange:function(e,t){Li.fn.updateRange.call(this,{value:t.to},t)},aboveAxis:function(e){return e.value>=0},plotRange:function(e){return[e.from,e.to]},createSegments:function(){var e=this;var t=this.options.series;var i=this.seriesPoints;var n=this.segments=[];for(var r=0;r<t.length;r++){var a=t[r];var o=i[r];if(o){var s=void 0;for(var l=0;l<o.length;l++){var d=o[l];if(d&&s){var u=new On(s,d,a);n.push(u);e.append(u)}s=d}}}}});var Wn=[Xe,kt,mt,St];var Un=[st,Ct].concat(Wn);var jn=o.extend({initFields:function(e){var t=this;this.namedCategoryAxes={};this.namedValueAxes={};this.valueAxisRangeTracker=new Ai;if(e.length>0){this.invertAxes=_(e[0].type,[Ze,tt,Ct,kt,St,gt,ot,yt]);for(var i=0;i<e.length;i++){var n=e[i].stack;if(n&&n.type==="100%"){t.stack100=true;break}}}},render:function(e){if(e===void 0){e=this.panes}this.createCategoryAxes(e);this.aggregateCategories(e);this.createCategoryAxesLabels(e);this.createCharts(e);this.createValueAxes(e)},removeAxis:function(e){var t=e.options.name;o.fn.removeAxis.call(this,e);if(e instanceof ne){delete this.namedCategoryAxes[t]}else{this.valueAxisRangeTracker.reset(t);delete this.namedValueAxes[t]}if(e===this.categoryAxis){delete this.categoryAxis}if(e===this.valueAxis){delete this.valueAxis}},createCharts:function(e){var t=this;var i=this.groupSeriesByPane();for(var n=0;n<e.length;n++){var r=e[n];var a=i[r.options.name||"default"]||[];t.addToLegend(a);var o=t.filterVisibleSeries(a);if(!o){continue}var s=t.groupSeriesByCategoryAxis(o);for(var l=0;l<s.length;l++){t.createChartGroup(s[l],r)}}},createChartGroup:function(e,t){this.createAreaChart(p(e,[Xe,kt]),t);this.createRangeAreaChart(p(e,[mt,St]),t);this.createBarChart(p(e,[nt,Ze]),t);this.createRangeBarChart(p(e,[_t,gt]),t);this.createBulletChart(p(e,[tt,xt]),t);this.createCandlestickChart(p(e,it),t);this.createBoxPlotChart(p(e,[Je,yt]),t);this.createOHLCChart(p(e,lt),t);this.createWaterfallChart(p(e,[Tt,ot]),t);this.createLineChart(p(e,[st,Ct]),t)},aggregateCategories:function(e){var t=this;var i=this.srcSeries||this.series;var n=[];this._currentPointsCache={};this._seriesPointsCache=this._seriesPointsCache||{};for(var r=0;r<i.length;r++){var a=i[r];var o=t.seriesCategoryAxis(a);var s=t.findPane(o.options.pane);var l=dn(o.options.type,W);if((l||a.categoryField)&&_(s,e)){a=t.aggregateSeries(a,o)}else{a=t.filterSeries(a,o)}n.push(a)}this._seriesPointsCache=this._currentPointsCache;this._currentPointsCache=null;this.srcSeries=i;this.series=n},filterSeries:function(t,i){var e=(t.data||{}).length;i._seriesMax=Math.max(i._seriesMax||0,e);if(!(v(i.options.min)||v(i.options.max))){return t}var n=i.currentRangeIndices();var r=_(t.type,Un);var a=y({},t);a.data=(a.data||[]).slice(n.min,n.max+1);if(r){gn(a,n,e,function(e){return{item:t.data[e],category:i.categoryAt(e,true),categoryIx:e-n.min}},function(e){return R(t.data[e])})}return a},clearSeriesPointsCache:function(){this._seriesPointsCache={}},seriesSourcePoints:function(e,t){var i=this;var n=e.index+";"+t.categoriesHash();if(this._seriesPointsCache[n]){this._currentPointsCache[n]=this._seriesPointsCache[n];return this._seriesPointsCache[n]}var r=t.options;var a=r.srcCategories;var o=dn(r.type,W);var s=e.data;var l=o?un:Se;var d=[];if(!o){t.mapCategories()}for(var u=0;u<s.length;u++){var c=void 0;if(e.categoryField){c=l(e.categoryField,s[u],i.chartService.intl)}else{c=a[u]}if(R(c)&&c!==null){var f=t.totalIndex(c);d[f]=d[f]||{items:[],category:c};d[f].items.push(u)}}this._currentPointsCache[n]=d;return d},aggregateSeries:function(e,r){var t=e.data;if(!t.length){return e}var a=this.seriesSourcePoints(e,r);var i=y({},e);var o=new Cn(y({},e),C.current,Tn.current);var n=i.data=[];var s=r.options.dataItems||[];var l=r.currentRangeIndices();var d=function(e){var t=e-l.min;var i=a[e];if(!i){i=a[e]={}}i.categoryIx=t;if(!i.item){var n=r.categoryAt(e,true);i.category=n;i.item=o.aggregatePoints(i.items,n)}return i};for(var u=l.min;u<=l.max;u++){var c=d(u);n[c.categoryIx]=c.item;if(c.items&&c.items.length){s[c.categoryIx]=c.item}}if(_(i.type,Un)){gn(i,l,r.totalCount(),d,function(e){return a[e]})}r.options.dataItems=s;return i},appendChart:function(e,t){var i=e.options.series;var n=this.seriesCategoryAxis(i[0]);var r=n.options.categories;var a=Math.max(0,ui(i)-r.length);if(a>0){r=n.options.categories=n.options.categories.slice(0);while(a--){r.push("")}}this.valueAxisRangeTracker.update(e.valueAxisRanges);o.fn.appendChart.call(this,e,t)},seriesPaneName:function(e){var t=this.options;var i=e.axis;var n=[].concat(t.valueAxis);var r=oe(n,function(e){return e.name===i})[0];var a=t.panes||[{}];var o=(a[0]||{}).name||"default";var s=(r||{}).pane||o;return s},seriesCategoryAxis:function(e){var t=e.categoryAxis;var i=t?this.namedCategoryAxes[t]:this.categoryAxis;if(!i){throw new Error("Unable to locate category axis with name "+t)}return i},stackableChartOptions:function(e,t){var i=e.stack;var n=i&&i.type==="100%";var r=t.options.clip;return{isStacked:i,isStacked100:n,clip:r}},groupSeriesByCategoryAxis:function(e){var t=[];var i={};for(var n=0;n<e.length;n++){var r=e[n].categoryAxis||"$$default$$";if(!i.hasOwnProperty(r)){i[r]=true;t.push(r)}}var a=[];for(var o=0;o<t.length;o++){var s=t[o];var l=qn(e,s,o);if(l.length===0){continue}a.push(l)}return a},createBarChart:function(e,t){if(e.length===0){return}var i=e[0];var n=new Li(this,N.extend({series:e,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing},this.stackableChartOptions(i,t)));this.appendChart(n,t)},createRangeBarChart:function(e,t){if(e.length===0){return}var i=e[0];var n=new An(this,{series:e,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing});this.appendChart(n,t)},createBulletChart:function(e,t){if(e.length===0){return}var i=e[0];var n=new Qi(this,{series:e,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing,clip:t.options.clip});this.appendChart(n,t)},createLineChart:function(e,t){if(e.length===0){return}var i=e[0];var n=new xi(this,N.extend({invertAxes:this.invertAxes,series:e},this.stackableChartOptions(i,t)));this.appendChart(n,t)},createAreaChart:function(e,t){if(e.length===0){return}var i=e[0];var n=new Di(this,N.extend({invertAxes:this.invertAxes,series:e},this.stackableChartOptions(i,t)));this.appendChart(n,t)},createRangeAreaChart:function(e,t){if(e.length===0){return}var i=new Ln(this,{invertAxes:this.invertAxes,series:e,clip:t.options.clip});this.appendChart(i,t)},createOHLCChart:function(e,t){if(e.length===0){return}var i=e[0];var n=new Nn(this,{invertAxes:this.invertAxes,gap:i.gap,series:e,spacing:i.spacing,clip:t.options.clip});this.appendChart(n,t)},createCandlestickChart:function(e,t){if(e.length===0){return}var i=e[0];var n=new Oi(this,{invertAxes:this.invertAxes,gap:i.gap,series:e,spacing:i.spacing,clip:t.options.clip});this.appendChart(n,t)},createBoxPlotChart:function(e,t){if(e.length===0){return}var i=e[0];var n=new Ui(this,{invertAxes:this.invertAxes,gap:i.gap,series:e,spacing:i.spacing,clip:t.options.clip});this.appendChart(n,t)},createWaterfallChart:function(e,t){if(e.length===0){return}var i=e[0];var n=new Vn(this,{series:e,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing});this.appendChart(n,t)},axisRequiresRounding:function(e,t){var i=this;var n=p(this.series,Dt);for(var r=0;r<this.series.length;r++){var a=i.series[r];if(_(a.type,Wn)){var o=a.line;if(o&&o.style===Qe){n.push(a)}}}for(var s=0;s<n.length;s++){var l=n[s].categoryAxis||"";if(l===e||!l&&t===0){return true}}},aggregatedAxis:function(e,t){var i=this.series;for(var n=0;n<i.length;n++){var r=i[n].categoryAxis||"";if((r===e||!r&&t===0)&&i[n].categoryField){return true}}},createCategoryAxesLabels:function(){var e=this.axes;for(var t=0;t<e.length;t++){if(e[t]instanceof ne){e[t].createLabels()}}},createCategoryAxes:function(e){var t=this;var i=this.invertAxes;var n=[].concat(this.options.categoryAxis);var r=[];for(var a=0;a<n.length;a++){var o=n[a];var s=t.findPane(o.pane);if(_(s,e)){var l=o.name;var d=o.categories;if(d===void 0){d=[]}o=y({vertical:i,reverse:!i&&t.chartService.rtl,axisCrossingValue:i?f:0},o);if(!R(o.justified)){o.justified=t.isJustified()}if(t.axisRequiresRounding(l,a)){o.justified=false}var u=void 0;if(cn(o,d[0])){u=new S.DateCategoryAxis(o,t.chartService)}else{u=new ne(o,t.chartService)}n[a].categories=u.options.srcCategories;if(l){if(t.namedCategoryAxes[l]){throw new Error("Category axis with name "+l+" is already defined")}t.namedCategoryAxes[l]=u}u.axisIndex=a;r.push(u);t.appendAxis(u)}}var c=this.categoryAxis||r[0];this.categoryAxis=c;if(i){this.axisY=c}else{this.axisX=c}},isJustified:function(){var e=this.series;for(var t=0;t<e.length;t++){var i=e[t];if(!_(i.type,Wn)){return false}}return true},createValueAxes:function(e){var t=this;var i=this.valueAxisRangeTracker;var n=i.query();var r=[].concat(this.options.valueAxis);var a=this.invertAxes;var o={vertical:!a,reverse:a&&this.chartService.rtl};var s=[];if(this.stack100){o.roundToMajorUnit=false;o.labels={format:"P0"}}for(var l=0;l<r.length;l++){var d=r[l];var u=t.findPane(d.pane);if(_(u,e)){var c=d.name;var f=dn(d.type,Xt)?{min:.1,max:1}:{min:0,max:1};var h=i.query(c)||n||f;if(l===0&&h&&n){h.min=Math.min(h.min,n.min);h.max=Math.max(h.max,n.max)}var p=void 0;if(dn(d.type,Xt)){p=S.LogarithmicAxis}else{p=S.NumericAxis}var v=new p(h.min,h.max,y({},o,d),t.chartService);if(c){if(t.namedValueAxes[c]){throw new Error("Value axis with name "+c+" is already defined")}t.namedValueAxes[c]=v}v.axisIndex=l;s.push(v);t.appendAxis(v)}}var m=this.valueAxis||s[0];this.valueAxis=m;if(a){this.axisX=m}else{this.axisY=m}},_dispatchEvent:function(e,t,i){var n=e._eventCoordinates(t);var r=new F(n.x,n.y);var a=this.pointPane(r);var o=[];var s=[];if(!a){return}var l=a.axes;for(var d=0;d<l.length;d++){var u=l[d];if(u.getValue){on(s,u.getValue(r))}else{on(o,u.getCategory(r))}}if(o.length===0){on(o,this.categoryAxis.getCategory(r))}if(o.length>0&&s.length>0){e.trigger(i,{element:K(t),originalEvent:t,category:fn(o),value:fn(s)})}},pointPane:function(e){var t=this.panes;for(var i=0;i<t.length;i++){var n=t[i];if(n.contentBox.containsPoint(e)){return n}}},updateAxisOptions:function(e,t){Gn(this.options,e,t);Gn(this.originalOptions,e,t)}});function Gn(e,t,i){var n=t instanceof ne?[].concat(e.categoryAxis):[].concat(e.valueAxis);y(n[t.axisIndex],i)}function qn(e,t,i){return oe(e,function(e){return i===0&&!e.categoryAxis||e.categoryAxis===t})}t(jn,{categoryAxis:{},valueAxis:{}});y(jn.prototype,xn);var $n=e.extend({init:function(){this._points=[]},destroy:function(){this._points=[]},show:function(e,t){var i=this;var n=[].concat(e);this.hide();for(var r=0;r<n.length;r++){var a=n[r];if(a&&a.toggleHighlight&&a.hasHighlight()){i.togglePointHighlight(a,true,t);i._points.push(a)}}},togglePointHighlight:function(e,t,i){var n=(e.options.highlight||{}).toggle;if(n){var r={category:e.category,series:e.series,dataItem:e.dataItem,value:e.value,stackValue:e.stackValue,preventDefault:Kn,visual:e.highlightVisual(),show:t};n(r);if(!r._defaultPrevented){e.toggleHighlight(t,i)}}else{e.toggleHighlight(t,i)}},hide:function(){var e=this;var t=this._points;while(t.length){e.togglePointHighlight(t.pop(),false)}},isHighlighted:function(e){var t=this._points;for(var i=0;i<t.length;i++){var n=t[i];if(e===n){return true}}return false}});function Kn(){this._defaultPrevented=true}function Yn(e,t){var i=(t||"").toLowerCase();var n=e.event;var r=i==="none"&&!(n.ctrlKey||n.shiftKey||n.altKey)||n[i+"Key"];return r}function Qn(e){var t={};for(var i=0;i<e.length;i++){var n=e[i];if(n.axis.options.name){t[n.axis.options.name]={min:n.range.min,max:n.range.max}}}return t}var Xn=e.extend({init:function(e,t){this.plotArea=e;this.options=y({},this.options,t)},start:function(e){this._active=Yn(e,this.options.key);return this._active},move:function(e){if(this._active){var t=this.axisRanges=this._panAxes(e,m).concat(this._panAxes(e,g));if(t.length){this.axisRanges=t;return Qn(t)}}},end:function(){var e=this._active;this._active=false;return e},pan:function(){var e=this;var t=e.plotArea;var i=e.axisRanges;if(i.length){for(var n=0;n<i.length;n++){var r=i[n];t.updateAxisOptions(r.axis,r.range)}t.redraw(t.panes)}},destroy:function(){delete this.plotArea},_panAxes:function(e,t){var i=this.plotArea;var n=-e[t].delta;var r=(this.options.lock||"").toLowerCase();var a=[];if(n!==0&&(r||"").toLowerCase()!==t){var o=i.axes;for(var s=0;s<o.length;s++){var l=o[s];if(t===m&&!l.options.vertical||t===g&&l.options.vertical){var d=l.pan(n);if(d){d.limitRange=true;a.push({axis:l,range:d})}}}}return a}});Xn.prototype.options={key:"none",lock:"none"};var Zn=e.extend({init:function(e,t){this.chart=e;this.options=y({},this.options,t);this.createElement()},createElement:function(){var e=this._marquee=document.createElement("div");e.className="k-marquee";var t=document.createElement("div");t.className="k-marquee-color";e.appendChild(t)},removeElement:function(){if(this._marquee.parentNode){this._marquee.parentNode.removeChild(this._marquee)}},setStyles:function(e){b(this._marquee,e)},start:function(e){if(Yn(e,this.options.key)){var t=this.chart;var i=t._eventCoordinates(e);var n=this._zoomPane=t._plotArea.paneByPoint(i);var r=n?n.chartsBox().clone():null;if(n&&r){var a=this._elementOffset();r.translate(a.left,a.top);this._zoomPaneClipBox=r;document.body.appendChild(this._marquee);this.setStyles({left:e.pageX+1,top:e.pageY+1,width:0,height:0});return true}}return false},_elementOffset:function(){var e=this.chart.element;var t=b(e,["paddingLeft","paddingTop"]);var i=t.paddingLeft;var n=t.paddingTop;var r=S.elementOffset(e);return{left:i+r.left,top:n+r.top}},move:function(e){var t=this._zoomPane;if(t){this.setStyles(this._selectionPosition(e))}},end:function(e){var t=this._zoomPane;if(t){var i=this._elementOffset();var n=this._selectionPosition(e);n.left-=i.left;n.top-=i.top;var r={x:n.left,y:n.top};var a={x:n.left+n.width,y:n.top+n.height};this._updateAxisRanges(r,a);this.removeElement();delete this._zoomPane;return Qn(this.axisRanges)}},zoom:function(){var e=this.axisRanges;if(e&&e.length){var t=this.chart._plotArea;for(var i=0;i<e.length;i++){var n=e[i];t.updateAxisOptions(n.axis,n.range)}t.redraw(t.panes)}},destroy:function(){this.removeElement();delete this._marquee;delete this.chart},_updateAxisRanges:function(e,t){var i=(this.options.lock||"").toLowerCase();var n=[];var r=this._zoomPane.axes;for(var a=0;a<r.length;a++){var o=r[a];var s=o.options.vertical;if(!(i===m&&!s)&&!(i===g&&s)&&R(o.axisIndex)){var l=o.pointsRange(e,t);if(l){n.push({axis:o,range:l})}}}this.axisRanges=n},_selectionPosition:function(e){var t=this._zoomPaneClipBox;var i={x:e.x.startLocation,y:e.y.startLocation};var n=e.x.location;var r=e.y.location;var a=(this.options.lock||"").toLowerCase();var o=Math.min(i.x,n);var s=Math.min(i.y,r);var l=Math.abs(i.x-n);var d=Math.abs(i.y-r);if(a===m){o=t.x1;l=t.width()}if(a===g){s=t.y1;d=t.height()}if(n>t.x2){l=t.x2-i.x}if(n<t.x1){l=i.x-t.x1}if(r>t.y2){d=t.y2-i.y}if(r<t.y1){d=i.y-t.y1}return{left:Math.max(o,t.x1),top:Math.max(s,t.y1),width:l,height:d}}});Zn.prototype.options={key:"shift",lock:"none"};var Jn=e.extend({init:function(e,t){this.chart=e;this.options=y({},this.options,t)},updateRanges:function(e){var t=(this.options.lock||"").toLowerCase();var i=[];var n=this.chart._plotArea.axes;for(var r=0;r<n.length;r++){var a=n[r];var o=a.options.vertical;if(!(t===m&&!o)&&!(t===g&&o)&&a.zoomRange){var s=a.zoomRange(-e);if(s){i.push({axis:a,range:s})}}}this.axisRanges=i;return Qn(i)},zoom:function(){var e=this.axisRanges;var t=this.chart._plotArea;if(e&&e.length&&t.updateAxisOptions){for(var i=0;i<e.length;i++){var n=e[i];t.updateAxisOptions(n.axis,n.range)}t.redraw(t.panes)}},destroy:function(){delete this.chart}});var er=w.extend({init:function(e,t){w.fn.init.call(this,e);this.chartService=t},render:function(){var e=this;var t=e.children;var i=e.options;var n=i.vertical;this.visual=new fe.Layout(null,{spacing:n?0:i.spacing,lineSpacing:n?i.spacing:0,orientation:n?"vertical":"horizontal",reverse:i.rtl,alignItems:n?"start":"center"});for(var r=0;r<t.length;r++){var a=t[r];a.reflow(new P);a.renderVisual()}},reflow:function(e){this.visual.rect(e.toRect());this.visual.reflow();var t=this.visual.clippedBBox();if(t){this.box=S.rectToBox(t)}else{this.box=new P}},renderVisual:function(){this.addVisual()},createVisual:function(){}});var tr=re.extend({init:function(e){re.fn.init.call(this,e);this.createContainer();if(!e.rtl){this.createMarker();this.createLabel()}else{this.createLabel();this.createMarker()}},createContainer:function(){this.container=new S.FloatElement({vertical:false,wrap:false,align:D,spacing:this.options.spacing});this.append(this.container)},createMarker:function(){this.container.append(new X(this.markerOptions()))},markerOptions:function(){var e=this.options;var t=e.markerColor;return y({},e.markers,{background:t,border:{color:t}})},createLabel:function(){var e=this.options;var t=y({},e.labels);this.container.append(new Q(e.text,t))},renderComplete:function(){re.fn.renderComplete.call(this);var e=this.options.cursor||{};var t=this._itemOverlay=k.fromRect(this.container.box.toRect(),{fill:{color:h,opacity:0},stroke:null,cursor:e.style||e});this.appendVisual(t)},click:function(e,t){var i=this.eventArgs(t);if(!e.trigger(At,i)&&t&&t.type==="contextmenu"){t.preventDefault()}},over:function(e,t){var i=this.eventArgs(t);if(!e.trigger(Et,i)){e._legendItemHover(i.seriesIndex,i.pointIndex)}return true},out:function(e,t){e._unsetActivePoint();e.trigger(It,this.eventArgs(t))},eventArgs:function(e){var t=this.options;return{element:K(e),text:t.text,series:t.series,seriesIndex:t.series.index,pointIndex:t.pointIndex}},renderVisual:function(){var t=this;var e=this.options;var i=e.visual;if(i){this.visual=i({active:e.active,series:e.series,sender:this.getSender(),pointIndex:e.pointIndex,options:{markers:this.markerOptions(),labels:e.labels},createVisual:function(){t.createVisual();t.renderChildren();t.renderComplete();var e=t.visual;delete t.visual;return e}});this.addVisual()}else{re.fn.renderVisual.call(this)}}});var ir="horizontal";var nr="pointer";var rr="custom";var ar=w.extend({init:function(e,t){if(t===void 0){t={}}w.fn.init.call(this,e);this.chartService=t;if(!_(this.options.position,[A,M,E,I,rr])){this.options.position=M}this.createContainers();this.createLegendTitle(e.title);this.createItems()},createContainers:function(){var e=this.options;var t=e.position;var i=e.align;var n=t;var r=D;if(t===rr){n=I}else if(_(t,[A,E])){if(i==="start"){n=I}else if(i==="end"){n=M}else{n=D}r=t}else if(i){if(i==="start"){r=A}else if(i==="end"){r=E}}this.container=new re({margin:e.margin,padding:e.padding,background:e.background,border:e.border,vAlign:r,align:n,zIndex:e.zIndex,shrinkToFit:true});if(this.hasTitle()){this.itemsContainer=new re({vAlign:r,align:n,zIndex:e.zIndex,shrinkToFit:true})}else{this.itemsContainer=this.container}this.append(this.container)},createItems:function(){var e=this.getService();var t=this.options;var i=this.isVertical();var n=new er({vertical:i,spacing:t.spacing,rtl:e.rtl},e);var r=t.items;if(t.reverse){r=r.slice(0).reverse()}var a=r.length;for(var o=0;o<a;o++){var s=r[o];n.append(new tr(y({},{markers:t.markers,labels:t.labels,rtl:e.rtl},t.item,s)))}n.render();this.itemsContainer.append(n)},isVertical:function(){var e=this.options;var t=e.orientation;var i=e.position;var n=i===rr&&t!==ir||(R(t)?t!==ir:_(i,[I,M]));return n},hasItems:function(){return this.container.children[0].children.length>0},reflow:function(e){var t=this.options;var i=e.clone();if(!this.hasItems()){this.box=i;return}if(t.position===rr){this.containerCustomReflow(i);this.box=i}else{this.containerReflow(i)}if(this.hasTitle()){this.title.reflow(new P(this.container.box.x1,this.title.box.y1,this.container.box.x2,this.title.box.y2))}},containerReflow:function(e){var t=this;var i=t.options;var n=t.container;var r=i.position;var a=i.width;var o=i.height;var s=r===A||r===E?m:g;var l=this.isVertical();var d=e.clone();var u=e.clone();if(r===I||r===M){u.y1=d.y1=0}if(l&&o){u.y2=u.y1+o;u.align(d,g,n.options.vAlign)}else if(!l&&a){u.x2=u.x1+a;u.align(d,m,n.options.align)}n.reflow(u);u=n.box;var c=u.clone();if(i.offsetX||i.offsetY){u.translate(i.offsetX,i.offsetY);n.reflow(u)}c[s+1]=e[s+1];c[s+2]=e[s+2];this.box=c},containerCustomReflow:function(e){var t=this;var i=t.options;var n=t.container;var r=i.offsetX;var a=i.offsetY;var o=i.width;var s=i.height;var l=this.isVertical();var d=e.clone();if(l&&s){d.y2=d.y1+s}else if(!l&&o){d.x2=d.x1+o}n.reflow(d);d=n.box;n.reflow(new P(r,a,r+d.width(),a+d.height()))},renderVisual:function(){if(this.hasItems()){w.fn.renderVisual.call(this)}},createLegendTitle:function(e){var t=y({},{color:V,position:A,align:D},e);var i=t.text;if(!e||e.visible===false){return}if(R(t)&&t.visible){var n=Y(t);if(n){i=n({text:i})}else if(t.format){i=this.chartService.format.auto(t.format,i)}}this.title=new Q(i,t);this.createTitleLayout();this.appendTitleLayoutContent()},createTitleLayout:function(){this.layout=new S.FloatElement({vertical:true,wrap:false});this.container.append(this.layout)},hasTitle:function(){return Boolean(this.options.title&&this.options.title.visible!==false)},appendTitleLayoutContent:function(){var e=this.options;if(e.title.position===E){this.layout.append(this.itemsContainer);this.layout.append(this.title)}else{this.layout.append(this.title);this.layout.append(this.itemsContainer)}}});t(ar,{position:M,items:[],offsetX:0,offsetY:0,margin:Z(5),padding:Z(5),border:{color:V,width:0},item:{cursor:nr,spacing:6},spacing:6,background:"",zIndex:1,markers:{border:{width:0},width:15,height:3,type:"rect",align:I,vAlign:D}});var or=e.extend({init:function(){this._registry=[]},register:function(e,t){this._registry.push({type:e,seriesTypes:t})},create:function(e,t,i){var n=this._registry;var r=n[0];var a;for(var o=0;o<n.length;o++){var s=n[o];a=p(e,s.seriesTypes);if(a.length>0){r=s;break}}return new r.type(a,t,i)}});or.current=new or;var sr=3;var lr=.1;function dr(e){var t=document.createElement("div");if(e){t.className=e}return t}function ur(e){var t=e;while(t&&!se(t,"k-handle")){t=t.parentNode}return t}var cr=e.extend({init:function(e,t,i,n){var r=e.element;this.options=y({},this.options,i);this.chart=e;this.observer=n;this.chartElement=r;this.categoryAxis=t;this._dateAxis=this.categoryAxis instanceof S.DateCategoryAxis;this.initOptions();this.visible=this.options.visible&&r.offsetHeight;if(this.visible){this.createElements();this.set(this._index(this.options.from),this._index(this.options.to));this.bindEvents()}},onPane:function(e){return this.categoryAxis.pane===e},createElements:function(){var e=this.options;var t=this.wrapper=dr("k-selector");b(t,{top:e.offset.top,left:e.offset.left,width:e.width,height:e.height,direction:"ltr"});var i=this.selection=dr("k-selection");this.leftMask=dr("k-mask");this.rightMask=dr("k-mask");t.appendChild(this.leftMask);t.appendChild(this.rightMask);t.appendChild(i);i.appendChild(dr("k-selection-bg"));var n=this.leftHandle=dr("k-handle k-left-handle");var r=this.rightHandle=dr("k-handle k-right-handle");n.appendChild(dr());r.appendChild(dr());i.appendChild(n);i.appendChild(r);this.chartElement.appendChild(t);var a=b(i,["borderLeftWidth","borderRightWidth","height"]);var o=b(n,"height").height;var s=b(r,"height").height;e.selection={border:{left:a.borderLeftWidth,right:a.borderRightWidth}};b(n,{top:(a.height-o)/2});b(r,{top:(a.height-s)/2});t.style.cssText=t.style.cssText},bindEvents:function(){if(this.options.mousewheel!==false){this._mousewheelHandler=this._mousewheel.bind(this);var e;le(this.wrapper,(e={},e[ii]=this._mousewheelHandler,e))}this._domEvents=de.DomEventsBuilder.create(this.wrapper,{stopPropagation:true,start:this._start.bind(this),move:this._move.bind(this),end:this._end.bind(this),tap:this._tap.bind(this),press:this._press.bind(this),gesturestart:this._gesturestart.bind(this),gesturechange:this._gesturechange.bind(this),gestureend:this._gestureend.bind(this)})},initOptions:function(){var e=this;var t=e.options;var i=e.categoryAxis;var n=i.pane.chartsBox();var r=this.chart.chartService.intl;if(this._dateAxis){y(t,{min:te(r,t.min),max:te(r,t.max),from:te(r,t.from),to:te(r,t.to)})}var a=b(this.chartElement,["paddingLeft","paddingTop"]);var o=a.paddingLeft;var s=a.paddingTop;this.options=y({},{width:n.width(),height:n.height()+lr,padding:{left:o,top:s},offset:{left:n.x1+o,top:n.y1+s},from:t.min,to:t.max},t)},destroy:function(){if(this._domEvents){this._domEvents.destroy();delete this._domEvents}clearTimeout(this._mwTimeout);this._state=null;if(this.wrapper){if(this._mousewheelHandler){var e;ue(this.wrapper,(e={},e[ii]=this._mousewheelHandler,e));this._mousewheelHandler=null}this.chartElement.removeChild(this.wrapper);this.wrapper=null}},_rangeEventArgs:function(e){return{axis:this.categoryAxis.options,from:this._value(e.from),to:this._value(e.to)}},_start:function(e){var t=this.options;var i=K(e);if(this._state||!i){return}this.chart._unsetActivePoint();this._state={moveTarget:ur(i)||i,startLocation:e.x?e.x.location:0,range:{from:this._index(t.from),to:this._index(t.to)}};var n=this._rangeEventArgs({from:this._index(t.from),to:this._index(t.to)});if(this.trigger(jt,n)){this._state=null}},_press:function(e){var t;if(this._state){t=this._state.moveTarget}else{t=ur(K(e))}if(t){S.addClass(t,"k-handle-active")}},_move:function(e){if(!this._state){return}var t=this;var i=t._state;var n=t.options;var r=t.categoryAxis;var a=i.range;var o=i.moveTarget;var s=r.options.reverse;var l=this._index(n.from);var d=this._index(n.to);var u=this._index(n.min);var c=this._index(n.max);var f=i.startLocation-e.x.location;var h={from:a.from,to:a.to};var p=a.to-a.from;var v=b(this.wrapper,"width").width/(r.categoriesCount()-1);var m=Math.round(f/v)*(s?-1:1);if(!o){return}var g=se(o,"k-left-handle");var _=se(o,"k-right-handle");if(se(o,"k-selection k-selection-bg")){a.from=Math.min(Math.max(u,l-m),c-p);a.to=Math.min(a.from+p,c)}else if(g&&!s||_&&s){a.from=Math.min(Math.max(u,l-m),c-1);a.to=Math.max(a.from+1,a.to)}else if(g&&s||_&&!s){a.to=Math.min(Math.max(u+1,d-m),c);a.from=Math.min(a.to-1,a.from)}if(a.from!==h.from||a.to!==h.to){this.move(a.from,a.to);this.trigger(Gt,this._rangeEventArgs(a))}},_end:function(){if(this._state){var e=this._state.moveTarget;if(e){S.removeClass(e,"k-handle-active")}var t=this._state.range;this.set(t.from,t.to);this.trigger(qt,this._rangeEventArgs(t));delete this._state}},_tap:function(e){var t=this;var i=t.options;var n=t.categoryAxis;var r=this.chart._eventCoordinates(e);var a=n.pointCategoryIndex(new F(r.x,n.box.y1));var o=this._index(i.from);var s=this._index(i.to);var l=this._index(i.min);var d=this._index(i.max);var u=s-o;var c=o+u/2;var f={};var h=e.event.which===3;var p=Math.round(c-a);if(this._state||h){return}this.chart._unsetActivePoint();if(!n.options.justified){p--}f.from=Math.min(Math.max(l,o-p),d-u);f.to=Math.min(f.from+u,d);this._start(e);if(this._state){this._state.range=f;this.trigger(Gt,this._rangeEventArgs(f));this._end()}},_mousewheel:function(e){var t=this;var i=S.mousewheelDelta(e);this._start({target:this.selection});if(this._state){var n=this._state.range;e.preventDefault();e.stopPropagation();if(Math.abs(i)>1){i*=sr}if(this.options.mousewheel.reverse){i*=-1}if(this.expand(i)){this.trigger(Gt,{axis:this.categoryAxis.options,delta:i,originalEvent:e,from:this._value(n.from),to:this._value(n.to)})}if(this._mwTimeout){clearTimeout(this._mwTimeout)}this._mwTimeout=setTimeout(function(){t._end()},ni)}},_gesturestart:function(e){var t=this.options;this._state={range:{from:this._index(t.from),to:this._index(t.to)}};var i=this._rangeEventArgs(this._state.range);if(this.trigger(jt,i)){this._state=null}else{e.preventDefault()}},_gestureend:function(){if(this._state){this.trigger(qt,this._rangeEventArgs(this._state.range));delete this._state}},_gesturechange:function(e){var t=this;var i=t.chart;var n=t._state;var r=t.options;var a=t.categoryAxis;var o=n.range;var s=i._toModelCoordinates(e.touches[0].x.location).x;var l=i._toModelCoordinates(e.touches[1].x.location).x;var d=Math.min(s,l);var u=Math.max(s,l);e.preventDefault();o.from=a.pointCategoryIndex(new F(d))||r.min;o.to=a.pointCategoryIndex(new F(u))||r.max;this.move(o.from,o.to);this.trigger(Gt,this._rangeEventArgs(o))},_index:function(e){var t=e;if(e instanceof Date){t=this.categoryAxis.categoryIndex(e)}return t},_value:function(e){var t=e;if(this._dateAxis){t=this.categoryAxis.categoryAt(e);if(t>this.options.max){t=this.options.max}}return t},_slot:function(e){var t=this.categoryAxis;var i=this._index(e);return t.getSlot(i,i,true)},move:function(e,t){var i=this.options;var n=this.categoryAxis.options.reverse;var r=i.offset;var a=i.padding;var o=i.selection.border;var s=n?t:e;var l=n?e:t;var d="x"+(n?2:1);var u=this._slot(s);var c=L(u[d]-r.left+a.left);b(this.leftMask,{width:c});b(this.selection,{left:c});u=this._slot(l);var f=L(i.width-(u[d]-r.left+a.left));b(this.rightMask,{width:f});var h=i.width-f;if(h!==i.width){h+=o.right}b(this.rightMask,{left:h});b(this.selection,{width:Math.max(i.width-(c+f)-o.right,0)})},set:function(e,t){var i=this.options;var n=this._index(i.min);var r=this._index(i.max);var a=ae(this._index(e),n,r);var o=ae(this._index(t),a+1,r);if(i.visible){this.move(a,o)}i.from=this._value(a);i.to=this._value(o)},expand:function(e){var t=this.options;var i=this._index(t.min);var n=this._index(t.max);var r=t.mousewheel.zoom;var a=this._index(t.from);var o=this._index(t.to);var s={from:a,to:o};var l=y({},s);if(this._state){s=this._state.range}if(r!==M){s.from=ae(ae(a-e,0,o-1),i,n)}if(r!==I){s.to=ae(ae(o+e,s.from+1,n),i,n)}if(s.from!==l.from||s.to!==l.to){this.set(s.from,s.to);return true}},trigger:function(e,t){return(this.observer||this.chart).trigger(e,t)}});t(cr,{visible:true,mousewheel:{zoom:"both"},min:c,max:f});var fr=Zi.extend({show:function(e){if(!e||!e.tooltipAnchor||this._current&&this._current===e){return}var t=y({},this.options,e.options.tooltip);var i=e.tooltipAnchor();if(i){this._current=e;Zi.fn.show.call(this,{point:e,anchor:i},t,e)}else{this.hide()}},hide:function(){delete this._current;Zi.fn.hide.call(this)}});var hr=Zi.extend({init:function(e,t){Zi.fn.init.call(this,e.chartService,t);this.plotArea=e;this.formatService=e.chartService.format},showAt:function(e,t){var i=oe(e,function(e){var t=e.series.tooltip;var i=t&&t.visible===false;return!i});if(i.length>0){var n=i[0];var r=this.plotArea.categoryAxis.getSlot(n.categoryIx);var a=t?this._slotAnchor(t,r):this._defaultAnchor(n,r);this.show({anchor:a,shared:true,points:e,category:n.category,categoryText:this.formatService.auto(this.options.categoryFormat,n.category),series:this.plotArea.series},this.options)}},_slotAnchor:function(e,t){var i=this.plotArea.categoryAxis;var n={horizontal:"left",vertical:"center"};if(!i.options.vertical){e.x=t.center().x}return{point:e,align:n}},_defaultAnchor:function(e,t){var i=e.owner.pane.chartsBox();var n=this.plotArea.categoryAxis.options.vertical;var r=i.center();var a=t.center();var o={horizontal:"center",vertical:"center"};var s;if(n){s=new F(r.x,a.y)}else{s=new F(a.x,r.y)}return{point:s,align:o}}});t(hr,{categoryFormat:"{0:d}"});var pr=he.extend({setup:function(){var e=this;var t=e.element;var i=e.options;var n=t.bbox();if(n){this.origin=i.origin;var r=i.vertical?g:m;var a=this.fromScale=new x(1,1);a[r]=Be;t.transform(_e().scale(a.x,a.y))}else{this.abort()}},step:function(e){var t=S.interpolateValue(this.fromScale.x,1,e);var i=S.interpolateValue(this.fromScale.y,1,e);this.element.transform(_e().scale(t,i,this.origin))},abort:function(){he.fn.abort.call(this);this.element.transform(null)}});t(pr,{duration:d});pe.current.register(Ze,pr);var vr=he.extend({setup:function(){var e=this.center=this.element.bbox().center();this.element.transform(_e().scale(Be,Be,e))},step:function(e){this.element.transform(_e().scale(e,e,this.center))}});t(vr,{easing:"easeOutElastic"});pe.current.register(et,vr);var mr=he.extend({setup:function(){this.fadeTo=this.element.opacity();this.element.opacity(0)},step:function(e){this.element.opacity(e*this.fadeTo)}});t(mr,{duration:200,easing:"linear"});pe.current.register(Re,mr);var gr=he.extend({setup:function(){this.element.transform(_e().scale(Be,Be,this.options.center))},step:function(e){this.element.transform(_e().scale(e,e,this.options.center))}});t(gr,{easing:"easeOutElastic",duration:d});pe.current.register(dt,gr);var _r=Gi.extend({render:function(){Gi.fn.render.call(this);this.renderSegments()},createSegment:function(e,t,i){var n=t.style;var r;if(n===Ye){r=_i}else{r=pi}return new r(e,t,i)},animationPoints:function(){var e=Gi.fn.animationPoints.call(this);return e.concat(this._segments)},createMissingValue:function(e,t){if(t===je){var i={x:e.x,y:e.y};if(!H(i.x)){i.x=0}if(!H(i.y)){i.y=0}return i}}});y(_r.prototype,bi);var br=o.extend({initFields:function(){this.namedXAxes={};this.namedYAxes={};this.xAxisRangeTracker=new Ai;this.yAxisRangeTracker=new Ai},render:function(e){var t=this;if(e===void 0){e=this.panes}var i=this.groupSeriesByPane();for(var n=0;n<e.length;n++){var r=e[n];var a=i[r.options.name||"default"]||[];t.addToLegend(a);var o=t.filterVisibleSeries(a);if(!o){continue}t.createScatterChart(p(o,bt),r);t.createScatterLineChart(p(o,wt),r);t.createBubbleChart(p(o,et),r)}this.createAxes(e)},appendChart:function(e,t){this.xAxisRangeTracker.update(e.xAxisRanges);this.yAxisRangeTracker.update(e.yAxisRanges);o.fn.appendChart.call(this,e,t)},removeAxis:function(e){var t=e.options.name;o.fn.removeAxis.call(this,e);if(e.options.vertical){this.yAxisRangeTracker.reset(t);delete this.namedYAxes[t]}else{this.xAxisRangeTracker.reset(t);delete this.namedXAxes[t]}if(e===this.axisX){delete this.axisX}if(e===this.axisY){delete this.axisY}},seriesPaneName:function(e){var t=this.options;var i=e.xAxis;var n=[].concat(t.xAxis);var r=oe(n,function(e){return e.name===i})[0];var a=e.yAxis;var o=[].concat(t.yAxis);var s=oe(o,function(e){return e.name===a})[0];var l=t.panes||[{}];var d=l[0].name||"default";var u=(r||{}).pane||(s||{}).pane||d;return u},createScatterChart:function(e,t){if(e.length>0){this.appendChart(new Gi(this,{series:e,clip:t.options.clip}),t)}},createScatterLineChart:function(e,t){if(e.length>0){this.appendChart(new _r(this,{series:e,clip:t.options.clip}),t)}},createBubbleChart:function(e,t){if(e.length>0){this.appendChart(new $i(this,{series:e,clip:t.options.clip}),t)}},createXYAxis:function(e,t,i){var n=e.name;var r=t?this.namedYAxes:this.namedXAxes;var a=t?this.yAxisRangeTracker:this.xAxisRangeTracker;var o=y({reverse:!t&&this.chartService.rtl},e,{vertical:t});var s=dn(o.type,Xt);var l=a.query();var d=s?{min:.1,max:1}:{min:0,max:1};var u=a.query(n)||l||d;var c=[o.min,o.max];var f=this.series;for(var h=0;h<f.length;h++){var p=f[h];var v=p[t?"yAxis":"xAxis"];if(v===o.name||i===0&&!v){var m=C.current.bindPoint(p,0).valueFields;c.push(m[t?"y":"x"]);break}}if(i===0&&l){u.min=Math.min(u.min,l.min);u.max=Math.max(u.max,l.max)}var g;for(var _=0;_<c.length;_++){if(c[_]instanceof Date){g=true;break}}var b;if(dn(o.type,W)||!o.type&&g){b=S.DateValueAxis}else if(s){b=S.LogarithmicAxis}else{b=S.NumericAxis}var w=new b(u.min,u.max,o,this.chartService);w.axisIndex=i;if(n){if(r[n]){throw new Error((t?"Y":"X")+" axis with name "+n+" is already defined")}r[n]=w}this.appendAxis(w);return w},createAxes:function(e){var t=this;var i=this.options;var n=[].concat(i.xAxis);var r=[];var a=[].concat(i.yAxis);var o=[];for(var s=0;s<n.length;s++){var l=t.findPane(n[s].pane);if(_(l,e)){r.push(t.createXYAxis(n[s],false,s))}}for(var d=0;d<a.length;d++){var u=t.findPane(a[d].pane);if(_(u,e)){o.push(t.createXYAxis(a[d],true,d))}}this.axisX=this.axisX||r[0];this.axisY=this.axisY||o[0]},_dispatchEvent:function(e,t,i){var n=e._eventCoordinates(t);var r=new F(n.x,n.y);var a=this.axes;var o=a.length;var s=[];var l=[];for(var d=0;d<o;d++){var u=a[d];var c=u.options.vertical?l:s;var f=u.getValue(r);if(f!==null){c.push(f)}}if(s.length>0&&l.length>0){e.trigger(i,{element:K(t),originalEvent:t,x:fn(s),y:fn(l)})}},updateAxisOptions:function(e,t){var i=e.options.vertical;var n=this.groupAxes(this.panes);var r=(i?n.y:n.x).indexOf(e);wr(this.options,r,i,t);wr(this.originalOptions,r,i,t)}});function wr(e,t,i,n){var r=[].concat(i?e.yAxis:e.xAxis)[t];y(r,n)}t(br,{xAxis:{},yAxis:{}});y(br.prototype,xn);var kr=w.extend({init:function(e,t,i){w.fn.init.call(this,i);this.value=e;this.sector=t},render:function(){var e=this.options.labels;var t=this.owner.chartService;var i=this.value;if(this._rendered||this.visible===false){return}this._rendered=true;var n=Y(e);var r=this.pointData();if(n){i=n(r)}else if(e.format){i=t.format.auto(e.format,i)}if(e.visible&&(i||i===0)){if(e.position===D||e.position===Jt){if(!e.color){var a=new me(this.options.color).percBrightness();if(a>180){e.color=V}else{e.color=h}}if(!e.background){e.background=this.options.color}}else{var o=t.theme.seriesDefaults.labels;e.color=e.color||o.color;e.background=e.background||o.background}this.label=new Q(i,y({},e,{align:D,vAlign:"",animation:{type:Re,delay:this.animationDelay}}),r);this.append(this.label)}},reflow:function(e){this.render();this.box=e;this.reflowLabel()},reflowLabel:function(){var e=this;var t=e.options.labels;var i=e.label;var n=this.sector.clone();var r=t.distance;var a=n.middle();if(i){var o=i.box.height();var s=i.box.width();var l;if(t.position===D){n.radius=Math.abs((n.radius-o)/2)+o;l=n.point(a);i.reflow(new P(l.x,l.y-o/2,l.x,l.y))}else if(t.position===Jt){n.radius=n.radius-o/2;l=n.point(a);i.reflow(new P(l.x,l.y-o/2,l.x,l.y))}else{var d;l=n.clone().expand(r).point(a);if(l.x>=n.center.x){d=l.x+s;i.orientation=M}else{d=l.x-s;i.orientation=I}i.reflow(new P(d,l.y-o,l.x,l.y))}}},createVisual:function(){var t=this;var e=this;var i=e.sector;var n=e.options;w.fn.createVisual.call(this);if(this.value){if(n.visual){var r=(i.startAngle+180)%360;var a=n.visual({category:this.category,dataItem:this.dataItem,value:this.value,series:this.series,percentage:this.percentage,center:new x(i.center.x,i.center.y),radius:i.radius,innerRadius:i.innerRadius,startAngle:r,endAngle:r+i.angle,options:n,sender:this.getSender(),createVisual:function(){var e=new ve;t.createSegmentVisual(e);return e}});if(a){this.visual.append(a)}}else{this.createSegmentVisual(this.visual)}}},createSegmentVisual:function(e){var t=this;var i=t.sector;var n=t.options;var r=n.border||{};var a=r.width>0?{stroke:{color:r.color,width:r.width,opacity:r.opacity,dashType:r.dashType}}:{};var o=n.color;var s={color:o,opacity:n.opacity};var l=this.createSegment(i,y({fill:s,stroke:{opacity:n.opacity},zIndex:n.zIndex},a));e.append(l);if(Ii(n)){e.append(this.createGradientOverlay(l,{baseColor:o,fallbackFill:s},y({center:[i.center.x,i.center.y],innerRadius:i.innerRadius,radius:i.radius,userSpace:true},n.overlay)))}},createSegment:function(e,t){if(t.singleSegment){return new fe.Circle(new ge.Circle(new x(e.center.x,e.center.y),e.radius),t)}return S.ShapeBuilder.current.createRing(e,t)},createAnimation:function(){var e=this;var t=e.options;var i=e.sector.center;y(t,{animation:{center:[i.x,i.y],delay:this.animationDelay}});w.fn.createAnimation.call(this)},createHighlight:function(e){var t=this.options.highlight||{};var i=t.border||{};return this.createSegment(this.sector,y({},e,{fill:{color:t.color,opacity:t.opacity},stroke:{opacity:i.opacity,width:i.width,color:i.color}}))},highlightVisual:function(){return this.visual.children[0]},highlightVisualArgs:function(){var e=this.sector;return{options:this.options,radius:e.radius,innerRadius:e.innerRadius,center:new x(e.center.x,e.center.y),startAngle:e.startAngle,endAngle:e.angle+e.startAngle,visual:this.visual}},tooltipAnchor:function(){var e=this.sector.clone().expand(ze);var t=e.middle();var i=e.point(t);return{point:i,align:Cr(t+180)}},formatValue:function(e){return this.owner.formatPointValue(this,e)},pointData:function(){return{dataItem:this.dataItem,category:this.category,value:this.value,series:this.series,percentage:this.percentage}}});var yr=L(S.rad(30),s);var xr=L(S.rad(60),s);function Cr(e){var t=S.rad(e);var i=L(Math.sin(t),s);var n=L(Math.cos(t),s);var r;if(Math.abs(i)>xr){r=D}else if(n<0){r=M}else{r=I}var a;if(Math.abs(i)<yr){a=D}else if(i<0){a=E}else{a=A}return{horizontal:r,vertical:a}}t(kr,{color:h,overlay:{gradient:"roundedBevel"},border:{width:.5},labels:{visible:false,distance:35,font:T.DEFAULT_FONT,margin:Z(.5),align:O,zIndex:1,position:ti},animation:{type:dt},highlight:{visible:true,border:{width:1}},visible:true});y(kr.prototype,ci);var Sr={createLegendItem:function(e,t,i){var n=this.options.legend||{};var r=n.labels||{};var a=n.inactiveItems||{};var o=a.labels||{};if(i&&i.visibleInLegend!==false){var s=i.visible!==false;var l=s?Y(r):Y(o)||Y(r);var d=i.category;if(l){d=l({text:d,series:i.series,dataItem:i.dataItem,percentage:i.percentage,value:e})}var u,c;if(s){u={};c=t.color}else{u={color:o.color,font:o.font};c=(a.markers||{}).color}if(H(d)&&d!==""){this.legendItems.push({active:s,pointIndex:i.index,text:d,series:i.series,markerColor:c,labels:u})}}}};var Tr=70;var Dr=w.extend({init:function(e,t){w.fn.init.call(this,t);this.plotArea=e;this.chartService=e.chartService;this.points=[];this.legendItems=[];this.render()},render:function(){this.traverseDataPoints(this.addValue.bind(this))},traverseDataPoints:function(e){var t=this;var i=this;var n=i.options;var r=i.plotArea.options.seriesColors;if(r===void 0){r=[]}var a=r.length;var o=n.series;var s=o.length;for(var l=0;l<s;l++){var d=o[l];var u=d.data;var c=ln(d);var f=c.total;var h=c.points;var p=c.count;var v=360/f;var m=void 0;if(!isFinite(v)){m=360/p}var g=void 0;if(R(d.startAngle)){g=d.startAngle}else{g=n.startAngle}if(l!==s-1){if(d.labels.position===ti){d.labels.position=D}}for(var _=0;_<h.length;_++){var b=h[_];if(!b){continue}var w=b.fields;var k=b.value;var y=b.visible;var x=k!==0?m||k*v:0;var C=u.length!==1&&Boolean(w.explode);if(!z(d.color)){d.color=w.color||r[_%a]}e(b.valueFields.value,new S.Ring(null,0,0,g,x),{owner:t,category:R(w.category)?w.category:"",index:_,series:d,seriesIx:l,dataItem:u[_],percentage:f!==0?k/f:0,explode:C,visibleInLegend:w.visibleInLegend,visible:y,zIndex:s-l,animationDelay:t.animationDelay(_,l,s)});if(y!==false){g+=x}}}},evalSegmentOptions:function(e,t,i){var n=i.series;di(e,{value:t,series:n,dataItem:i.dataItem,category:i.category,percentage:i.percentage},{defaults:n._defaults,excluded:["data","content","template","visual","toggle"]})},addValue:function(e,t,i){var n=y({},i.series,{index:i.index});this.evalSegmentOptions(n,e,i);this.createLegendItem(e,n,i);if(i.visible===false){return}var r=new kr(e,t,n);N.extend(r,i);this.append(r);this.points.push(r)},reflow:function(e){var t=this;var i=t.options;var n=t.points;var r=t.seriesConfigs;if(r===void 0){r=[]}var a=n.length;var o=e.clone();var s=5;var l=Math.min(o.width(),o.height());var d=l/2;var u=l-l*.85;var c=new P(o.x1,o.y1,o.x1+l,o.y1+l);var f=c.center();var h=o.center();var p=i.series.length;var v=[];var m=[];var g=B(i.padding,u);this.targetBox=e;g=g>d-s?d-s:g;c.translate(h.x-f.x,h.y-f.y);var _=d-g;var b=new F(_+c.x1+g,_+c.y1+g);for(var w=0;w<a;w++){var k=n[w];var y=k.sector;var x=k.seriesIx;y.radius=_;y.center=b;if(r.length){var C=r[x];y.innerRadius=C.innerRadius;y.radius=C.radius}if(x===p-1&&k.explode){y.center=y.clone().setRadius(y.radius*.15).point(y.middle())}k.reflow(c);var S=k.label;if(S){if(S.options.position===ti){if(x===p-1){if(S.orientation===M){m.push(S)}else{v.push(S)}}}}}if(v.length>0){v.sort(this.labelComparator(true));this.leftLabelsReflow(v)}if(m.length>0){m.sort(this.labelComparator(false));this.rightLabelsReflow(m)}this.box=c},leftLabelsReflow:function(e){var t=this.distanceBetweenLabels(e);this.distributeLabels(t,e)},rightLabelsReflow:function(e){var t=this.distanceBetweenLabels(e);this.distributeLabels(t,e)},distanceBetweenLabels:function(e){var t=$(this.points);var i=t.sector;var n=e.length-1;var r=i.radius+t.options.labels.distance;var a=[];var o=e[0].box;var s=L(o.y1-(i.center.y-r-o.height()-o.height()/2));a.push(s);for(var l=0;l<n;l++){var d=e[l+1].box;o=e[l].box;s=L(d.y1-o.y2);a.push(s)}s=L(i.center.y+r-e[n].box.y2-e[n].box.height()/2);a.push(s);return a},distributeLabels:function(e,t){var i=this;var n=e.length;var r,a,o;for(var s=0;s<n;s++){o=-e[s];r=a=s;while(o>0&&(r>=0||a<n)){o=i._takeDistance(e,s,--r,o);o=i._takeDistance(e,s,++a,o)}}this.reflowLabels(e,t)},_takeDistance:function(e,t,i,n){var r=n;if(e[i]>0){var a=Math.min(e[i],r);r-=a;e[i]-=a;e[t]+=a}return r},reflowLabels:function(e,t){var i=this;var n=$(this.points);var r=n.sector;var a=n.options.labels;var o=t.length;var s=a.distance;var l=r.center.y-(r.radius+s)-t[0].box.height();var d;e[0]+=2;for(var u=0;u<o;u++){var c=t[u];var f=c.box;l+=e[u];d=i.hAlignLabel(f.x2,r.clone().expand(s),l,l+f.height(),c.orientation===M);if(c.orientation===M){if(a.align!==O){d=r.radius+r.center.x+s}c.reflow(new P(d+f.width(),l,d,l))}else{if(a.align!==O){d=r.center.x-r.radius-s}c.reflow(new P(d-f.width(),l,d,l))}l+=f.height()}},createVisual:function(){var e=this;var t=this;var i=t.options.connectors;var n=t.points;var r=n.length;var a=4;w.fn.createVisual.call(this);this._connectorLines=[];for(var o=0;o<r;o++){var s=n[o];var l=s.sector;var d=s.label;var u=l.middle();var c=(s.options.connectors||{}).color||i.color;if(d){var f=new k({stroke:{color:c,width:i.width},animation:{type:Re,delay:s.animationDelay}});if(d.options.position===ti){var h=d.box;var p=l.center;var v=l.point(u);var m=new F(h.x1,h.center().y);var g=void 0,_=void 0,b=void 0;v=l.clone().expand(i.padding).point(u);f.moveTo(v.x,v.y);if(d.orientation===M){_=new F(h.x1-i.padding,h.center().y);b=Ar(p,v,m,_);m=new F(_.x-a,_.y);b=b||m;b.x=Math.min(b.x,m.x);if(e.pointInCircle(b,l.center,l.radius+a)||b.x<l.center.x){g=l.center.x+l.radius+a;if(s.options.labels.align!==nt){if(g<m.x){f.lineTo(g,v.y)}else{f.lineTo(v.x+a*2,v.y)}}else{f.lineTo(g,v.y)}f.lineTo(m.x,_.y)}else{b.y=_.y;f.lineTo(b.x,b.y)}}else{_=new F(h.x2+i.padding,h.center().y);b=Ar(p,v,m,_);m=new F(_.x+a,_.y);b=b||m;b.x=Math.max(b.x,m.x);if(e.pointInCircle(b,l.center,l.radius+a)||b.x>l.center.x){g=l.center.x-l.radius-a;if(s.options.labels.align!==nt){if(g>m.x){f.lineTo(g,v.y)}else{f.lineTo(v.x-a*2,v.y)}}else{f.lineTo(g,v.y)}f.lineTo(m.x,_.y)}else{b.y=_.y;f.lineTo(b.x,b.y)}}f.lineTo(_.x,_.y);e._connectorLines.push(f);e.visual.append(f)}}}},renderVisual:function(){w.fn.renderVisual.call(this);if(S.find(this.options.series,function(e){return e.autoFit})){var e=this.targetBox;var t=this.box.center();var i=this.visual.bbox();if(!i){return}var n=i.bottomRight();var r=Math.min((t.y-e.y1)/(t.y-i.origin.y),(e.y2-t.y)/(n.y-t.y),(t.x-e.x1)/(t.x-i.origin.x),(e.x2-t.x)/(n.x-t.x));if(r<1){this.visual.transform(_e().scale(r,r,[t.x,t.y]))}}},labelComparator:function(e){var r=e?-1:1;return function(e,t){var i=(e.parent.sector.middle()+270)%360;var n=(t.parent.sector.middle()+270)%360;return(i-n)*r}},hAlignLabel:function(e,t,i,n,r){var a=t.radius;var o=t.center;var s=o.x;var l=o.y;var d=Math.min(Math.abs(l-i),Math.abs(l-n));if(d>a){return e}return s+Math.sqrt(a*a-d*d)*(r?1:-1)},pointInCircle:function(e,t,i){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<Math.pow(i,2)},formatPointValue:function(e,t){return this.chartService.format.auto(t,e.value)},animationDelay:function(e){return e*Tr},stackRoot:function(){return this}});function Ar(e,t,i,n){var r=(n.x-i.x)*(e.y-i.y)-(n.y-i.y)*(e.x-i.x);var a=(n.y-i.y)*(t.x-e.x)-(n.x-i.x)*(t.y-e.y);var o;if(a!==0){var s=r/a;o=new F(e.x+s*(t.x-e.x),e.y+s*(t.y-e.y))}return o}t(Dr,{startAngle:90,connectors:{width:2,color:"#939393",padding:8},inactiveItems:{markers:{},labels:{}}});y(Dr.prototype,Sr);Dr.prototype.isStackRoot=true;var Er=o.extend({render:function(){this.createPieChart(this.series)},createPieChart:function(e){var t=e[0];var i=new Dr(this,{series:e,padding:t.padding,startAngle:t.startAngle,connectors:t.connectors,legend:this.options.legend});this.appendChart(i)},appendChart:function(e,t){o.fn.appendChart.call(this,e,t);J(this.options.legend.items,e.legendItems)}});var Ir=kr.extend({reflowLabel:function(){var e=this;var t=e.options.labels;var i=e.label;var n=this.sector.clone();var r=n.middle();if(i){var a=i.box.height();if(t.position===D){n.radius-=(n.radius-n.innerRadius)/2;var o=n.point(r);i.reflow(new P(o.x,o.y-a/2,o.x,o.y))}else{kr.fn.reflowLabel.call(this)}}},createSegment:function(e,t){return S.ShapeBuilder.current.createRing(e,t)}});t(Ir,{overlay:{gradient:"roundedGlass"},labels:{position:D},animation:{type:dt}});y(Ir.prototype,ci);var Mr=50;var Rr=Dr.extend({addValue:function(e,t,i){var n=y({},i.series,{index:i.index});this.evalSegmentOptions(n,e,i);this.createLegendItem(e,n,i);if(!e||i.visible===false){return}var r=new Ir(e,t,n);N.extend(r,i);this.append(r);this.points.push(r)},reflow:function(e){var t=this;var i=this.options;var n=e.clone();var r=5;var a=Math.min(n.width(),n.height());var o=a/2;var s=a-a*.85;var l=i.series;var d=l.length;var u=B(i.padding,s);u=u>o-r?o-r:u;var c=o-u;var f=0;var h;for(var p=0;p<d;p++){var v=l[p];if(p===0){if(R(v.holeSize)){h=v.holeSize;c-=v.holeSize}}if(R(v.size)){c-=v.size}else{f++}if(R(v.margin)&&p!==d-1){c-=v.margin}}if(!R(h)){var m=(o-u)/(d+.75);h=m*.75;c-=h}var g=h;var _=0;var b,w;this.seriesConfigs=[];for(var k=0;k<d;k++){var y=l[k];b=B(y.size,c/f);g+=_;w=g+b;t.seriesConfigs.push({innerRadius:g,radius:w});_=y.margin||0;g=w}Dr.fn.reflow.call(this,e)},animationDelay:function(e,t,i){return e*Mr+d*(t+1)/(i+1)}});t(Rr,{startAngle:90,connectors:{width:2,color:"#939393",padding:8}});var Fr=Er.extend({render:function(){this.createDonutChart(this.series)},createDonutChart:function(e){var t=e[0];var i=new Rr(this,{series:e,padding:t.padding,connectors:t.connectors,legend:this.options.legend});this.appendChart(i)}});var Pr=.15;var zr=o.extend({initFields:function(){this.valueAxisRangeTracker=new Ai},render:function(){this.addToLegend(this.series);this.createPolarAxis();this.createCharts();this.createValueAxis()},alignAxes:function(){var e=this.valueAxis;var t=e.range();var i=e.options.reverse?t.max:t.min;var n=e.getSlot(i);var r=this.polarAxis.getSlot(0).center;var a=e.box.translate(r.x-n.x1,r.y-n.y1);e.reflow(a)},createValueAxis:function(){var e=this.valueAxisRangeTracker;var t=e.query();var i=this.valueAxisOptions({roundToMajorUnit:false,zIndex:-1});var n,r;if(i.type===Xt){n=S.RadarLogarithmicAxis;r={min:.1,max:1}}else{n=S.RadarNumericAxis;r={min:0,max:1}}var a=e.query(name)||t||r;if(a&&t){a.min=Math.min(a.min,t.min);a.max=Math.max(a.max,t.max)}var o=new n(a.min,a.max,i,this.chartService);this.valueAxis=o;this.appendAxis(o)},reflowAxes:function(){var e=this;var t=e.options.plotArea;var i=e.valueAxis;var n=e.polarAxis;var r=e.box;var a=Math.min(r.width(),r.height())*Pr;var o=Z(t.padding||{},a);var s=r.clone().unpad(o);var l=s.clone();l.y2=l.y1+Math.min(l.width(),l.height());l.align(s,g,D);var d=l.clone().shrink(0,l.height()/2);n.reflow(l);i.reflow(d);var u=i.lineBox().height()-i.box.height();i.reflow(i.box.unpad({top:u}));this.axisBox=l;this.alignAxes(l)},backgroundBox:function(){return this.box},detachLabels:function(){}});var Br=Gi.extend({pointSlot:function(e,t){var i=e.center.y-t.y1;var n=F.onCircle(e.center,e.startAngle,i);return new P(n.x,n.y,n.x,n.y)}});t(Br,{clip:false});var Lr=_r.extend({});Lr.prototype.pointSlot=Br.prototype.pointSlot;t(Lr,{clip:false});var Hr=Ti.extend({fillToAxes:function(e){var t=this._polarAxisCenter();e.lineTo(t.x,t.y)},_polarAxisCenter:function(){var e=this.parent.plotArea.polarAxis;var t=e.box.center();return t},strokeSegments:function(){var e=this._strokeSegments;if(!e){var t=this._polarAxisCenter();var i=new l(false);var n=this.points();n.push(t);e=this._strokeSegments=i.process(n);e.pop()}return e}});var Nr=Ci.extend({fillToAxes:function(e){var t=this.parent.plotArea.polarAxis;var i=t.box.center();var n=new ge.Segment([i.x,i.y]);e.segments.unshift(n);e.segments.push(n)}});var Or=Lr.extend({createSegment:function(e,t,i){var n=(t.line||{}).style;var r;if(n===Ye){r=new Hr(e,t,i)}else{r=new Nr(e,t,i)}return r},createMissingValue:function(e,t){var i;if(H(e.x)&&t!==Ge){i={x:e.x,y:e.y};if(t===je){i.y=0}}return i},seriesMissingValues:function(e){return e.missingValues||je},_hasMissingValuesGap:function(){var e=this;var t=this.options.series;for(var i=0;i<t.length;i++){if(e.seriesMissingValues(t[i])===qe){return true}}},sortPoints:function(e){var t=this;e.sort(Vr);if(this._hasMissingValuesGap()){for(var i=0;i<e.length;i++){var n=e[i];if(n){var r=n.value;if(!H(r.y)&&t.seriesMissingValues(n.series)===qe){delete e[i]}}}}return e}});function Vr(e,t){return e.value.x-t.value.x}var Wr=zr.extend({createPolarAxis:function(){var e=new S.PolarAxis(this.options.xAxis,this.chartService);this.polarAxis=e;this.axisX=e;this.appendAxis(e)},valueAxisOptions:function(e){return y(e,{majorGridLines:{type:a},minorGridLines:{type:a}},this.options.yAxis)},createValueAxis:function(){zr.fn.createValueAxis.call(this);this.axisY=this.valueAxis},appendChart:function(e,t){this.valueAxisRangeTracker.update(e.yAxisRanges);o.prototype.appendChart.call(this,e,t)},createCharts:function(){var e=this.filterVisibleSeries(this.series);var t=this.panes[0];this.createLineChart(p(e,[ct]),t);this.createScatterChart(p(e,[ft]),t);this.createAreaChart(p(e,[ut]),t)},createLineChart:function(e,t){if(e.length===0){return}var i=new Lr(this,{series:e});this.appendChart(i,t)},createScatterChart:function(e,t){if(e.length===0){return}var i=new Br(this,{series:e});this.appendChart(i,t)},createAreaChart:function(e,t){if(e.length===0){return}var i=new Or(this,{series:e});this.appendChart(i,t)},_dispatchEvent:function(e,t,i){var n=e._eventCoordinates(t);var r=new F(n.x,n.y);var a=this.axisX.getValue(r);var o=this.axisY.getValue(r);if(a!==null&&o!==null){e.trigger(i,{element:K(t),x:a,y:o})}},createCrosshairs:function(){}});t(Wr,{xAxis:{},yAxis:{}});y(Wr.prototype,xn);function Ur(e){var t=[];for(var i=0;i<e.length;i++){var n=e[i];t[n.seriesIx]=t[n.seriesIx]||[];t[n.seriesIx].push(n)}return t}var jr=xi.extend({pointSlot:function(e,t){var i=e.center.y-t.y1;var n=F.onCircle(e.center,e.middle(),i);return new P(n.x,n.y,n.x,n.y)},renderSegments:function(){xi.fn.renderSegments.call(this);if(this._segments&&this._segments.length>1){var e=Ur(this._segments);for(var t=0;t<e.length;t++){var i=e[t];if(i&&i.length>1){var n=i[0].linePoints[0];var r=$(i);var a=$(r.linePoints);var o=n.categoryIx===0;var s=a.categoryIx===a.categoriesCount-1;if(o&&s){$(i).linePoints.push(n)}}}}},createSegment:function(e,t,i){var n=t.style;var r;if(n===Ye){r=_i}else{r=pi}var a=new r(e,t,i);var o=this.seriesMissingValues(t);if(e.length===t.data.length||o===Ge){a.options.closed=true}return a}});t(jr,{clip:false,limitPoints:false});var Gr=Ti.extend({fillToAxes:function(){}});var qr=Ci.extend({fillToAxes:function(){}});var $r=jr.extend({createSegment:function(e,t,i,n){var r=this.options.isStacked;var a=(t.line||{}).style;var o;var s;var l;if(r&&i>0&&n){s=n.linePoints.slice(0);o=n}if(a===Ye){l=new Gr(e,t,i,o,s);l.options.closed=true}else{e.push(e[0]);l=new qr(e,t,i,o,s)}return l},seriesMissingValues:function(e){return e.missingValues||je}});var Kr=Ir.extend({init:function(e,t){Ir.fn.init.call(this,e,null,t)}});t(Kr,{overlay:{gradient:"none"},labels:{distance:10}});var Yr=w.extend({init:function(e){w.fn.init.call(this,e);this.forEach=e.rtl?Pi:Fi},reflow:function(i){var e=this;var t=e.options;var n=e.children;var r=t.gap;var a=t.spacing;var o=n.length;var s=o+r+a*(o-1);var l=i.angle/s;var d=i.startAngle+l*(r/2);this.forEach(n,function(e){var t=i.clone();t.startAngle=d;t.angle=l;if(e.sector){t.radius=e.sector.radius}e.reflow(t);e.sector=t;d+=l+l*a})}});t(Yr,{gap:1,spacing:0});var Qr=w.extend({reflow:function(e){var t=this;var i=t.options.reverse;var n=t.children;var r=n.length;var a=i?r-1:0;var o=i?-1:1;this.box=new P;for(var s=a;s>=0&&s<r;s+=o){var l=n[s].sector;l.startAngle=e.startAngle;l.angle=e.angle}}});var Xr=Li.extend({pointType:function(){return Kr},clusterType:function(){return Yr},stackType:function(){return Qr},categorySlot:function(e,t){return e.getSlot(t)},pointSlot:function(e,t){var i=e.clone();var n=e.center.y;i.radius=n-t.y1;i.innerRadius=n-t.y2;return i},reflowPoint:function(e,t){e.sector=t;e.reflow()},createAnimation:function(){this.options.animation.center=this.box.toRect().center();Li.fn.createAnimation.call(this)}});Xr.prototype.reflow=n.prototype.reflow;t(Xr,{clip:false,limitPoints:false,animation:{type:"pie"}});var Zr=zr.extend({createPolarAxis:function(){var e=new S.RadarCategoryAxis(this.options.categoryAxis,this.chartService);this.polarAxis=e;this.categoryAxis=e;this.appendAxis(e);this.aggregateCategories();this.createCategoryAxesLabels()},valueAxisOptions:function(e){if(this._hasBarCharts){y(e,{majorGridLines:{type:a},minorGridLines:{type:a}})}if(this._isStacked100){y(e,{roundToMajorUnit:false,labels:{format:"P0"}})}return y(e,this.options.valueAxis)},aggregateCategories:function(){jn.prototype.aggregateCategories.call(this,this.panes)},createCategoryAxesLabels:function(){jn.prototype.createCategoryAxesLabels.call(this,this.panes)},filterSeries:function(e){return e},createCharts:function(){var e=this.filterVisibleSeries(this.series);var t=this.panes[0];this.createAreaChart(p(e,[ht]),t);this.createLineChart(p(e,[vt]),t);this.createBarChart(p(e,[pt]),t)},chartOptions:function(e){var t={series:e};var i=e[0];if(i){var n=this.filterVisibleSeries(e);var r=i.stack;t.isStacked=r&&n.length>1;t.isStacked100=r&&r.type==="100%"&&n.length>1;if(t.isStacked100){this._isStacked100=true}}return t},createAreaChart:function(e,t){if(e.length===0){return}var i=new $r(this,this.chartOptions(e));this.appendChart(i,t)},createLineChart:function(e,t){if(e.length===0){return}var i=new jr(this,this.chartOptions(e));this.appendChart(i,t)},createBarChart:function(e,t){if(e.length===0){return}var i=e[0];var n=this.chartOptions(e);n.gap=i.gap;n.spacing=i.spacing;var r=new Xr(this,n);this.appendChart(r,t);this._hasBarCharts=true},seriesCategoryAxis:function(){return this.categoryAxis},_dispatchEvent:function(e,t,i){var n=e._eventCoordinates(t);var r=new F(n.x,n.y);var a=this.categoryAxis.getCategory(r);var o=this.valueAxis.getValue(r);if(a!==null&&o!==null){e.trigger(i,{element:K(t),category:a,value:o})}},createCrosshairs:function(){}});y(Zr.prototype,xn,{appendChart:jn.prototype.appendChart,aggregateSeries:jn.prototype.aggregateSeries,seriesSourcePoints:jn.prototype.seriesSourcePoints});t(Zr,{categoryAxis:{categories:[]},valueAxis:{}});var Jr=w.extend({init:function(e,t,i){w.fn.init.call(this,t);this.value=e;this.options.index=i.index},reflow:function(e){var t=this.points;var i=this.children[0];this.box=new P(t[0].x,t[0].y,t[1].x,t[2].y);if(i){i.reflow(new P(e.x1,t[0].y,e.x2,t[2].y))}},createVisual:function(){var e=this;var t=this.options;var i;w.fn.createVisual.call(this);if(t.visual){i=t.visual({category:this.category,dataItem:this.dataItem,value:this.value,series:this.series,percentage:this.percentage,points:this.points,options:t,sender:this.getSender(),createVisual:function(){return e.createPath()}})}else{i=this.createPath()}if(i){this.visual.append(i)}},createPath:function(){var e=this.options;var t=e.border;var i=k.fromPoints(this.points,{fill:{color:e.color,opacity:e.opacity},stroke:{color:t.color,opacity:t.opacity,width:t.width}}).close();return i},createHighlight:function(e){return k.fromPoints(this.points,e)},highlightVisual:function(){return this.visual.children[0]},highlightVisualArgs:function(){var e=k.fromPoints(this.points).close();return{options:this.options,path:e}},tooltipAnchor:function(){var e=this.box;return{point:new F(e.center().x,e.y1),align:{horizontal:"center",vertical:"top"}}},formatValue:function(e){var t=this;return t.owner.formatPointValue(t,e)}});t(Jr,{color:h,border:{width:1}});y(Jr.prototype,ci);var ea=w.extend({init:function(e,t){w.fn.init.call(this,t);this.plotArea=e;this.points=[];this.labels=[];this.legendItems=[];this.render()},formatPointValue:function(e,t){return this.chartService.format.auto(t,e.value)},render:function(){var e=this;var t=this;var i=t.options;var n=t.plotArea.options.seriesColors;if(n===void 0){n=[]}var r=i.series[0];var a=r.data;if(!a){return}var o=ln(r);var s=o.total;var l=o.points;for(var d=0;d<l.length;d++){var u=l[d];if(!u){continue}var c=u.fields;if(!z(r.color)){r.color=c.color||n[d%n.length]}c=y({index:d,owner:e,series:r,dataItem:a[d],percentage:u.value/s},c,{visible:u.visible});var f=u.valueFields.value;var h=e.createSegment(f,c);var p=e.createLabel(f,c);if(h&&p){h.append(p)}}},evalSegmentOptions:function(e,t,i){var n=i.series;di(e,{value:t,series:n,dataItem:i.dataItem,index:i.index},{defaults:n._defaults,excluded:["data","content","template","toggle","visual"]})},createSegment:function(e,t){var i=y({},t.series);this.evalSegmentOptions(i,e,t);this.createLegendItem(e,i,t);if(t.visible!==false){var n=new Jr(e,i,t);N.extend(n,t);this.append(n);this.points.push(n);return n}},createLabel:function(e,t){var i=t.series;var n=t.dataItem;var r=y({},this.options.labels,i.labels);var a=e;if(r.visible){var o=Y(r);var s={dataItem:n,value:e,percentage:t.percentage,category:t.category,series:i};if(o){a=o(s)}else if(r.format){a=this.plotArea.chartService.format.auto(r.format,a)}if(!r.color){var l=new me(i.color).percBrightness();if(l>180){r.color=V}else{r.color=h}if(!r.background){r.background=i.color}}this.evalSegmentOptions(r,e,t);var d=new Q(a,y({vAlign:r.position},r),s);this.labels.push(d);return d}},labelPadding:function(){var e=this.labels;var t={left:0,right:0};for(var i=0;i<e.length;i++){var n=e[i];var r=n.options.align;if(r!==D){var a=e[i].box.width();if(r===I){t.left=Math.max(t.left,a)}else{t.right=Math.max(t.right,a)}}}return t},dynamicSlopeReflow:function(e,t,i){var n=this;var r=n.options;var a=n.points;var o=a.length;var s=a[0];var l=s;for(var d=0;d<a.length;d++){if(a[d].percentage>l.percentage){l=a[d]}}var u=s.percentage/l.percentage*t;var c=(t-u)/2;var f=0;for(var h=0;h<o;h++){var p=a[h].percentage;var v=a[h+1];var m=v?v.percentage:p;var g=a[h].points=[];var _=r.dynamicHeight?i*p:i/o;var b=void 0;if(!p){b=m?0:t/2}else{b=(t-u*(m/p))/2}b=ae(b,0,t);g.push(new x(e.x1+c,e.y1+f));g.push(new x(e.x1+t-c,e.y1+f));g.push(new x(e.x1+t-b,e.y1+_+f));g.push(new x(e.x1+b,e.y1+_+f));c=b;f+=_+r.segmentSpacing;u=ae(t-2*b,0,t)}},constantSlopeReflow:function(e,t,i){var n=this;var r=n.options;var a=n.points;var o=a.length;var s=r.neckRatio<=1;var l=s?r.neckRatio*t:t;var d=s?0:(t-t/r.neckRatio)/2;var u=s?t:t-d*2;var c=(u-l)/2;var f=0;for(var h=0;h<o;h++){var p=a[h].points=[];var v=a[h].percentage;var m=r.dynamicHeight?c*v:c/o;var g=r.dynamicHeight?i*v:i/o;p.push(new x(e.x1+d,e.y1+f));p.push(new x(e.x1+t-d,e.y1+f));p.push(new x(e.x1+t-d-m,e.y1+g+f));p.push(new x(e.x1+d+m,e.y1+g+f));d+=m;f+=g+r.segmentSpacing}},reflow:function(e){var t=this.points;var i=t.length;if(!i){return}var n=this.options;var r=e.clone().unpad(this.labelPadding());var a=r.height()-n.segmentSpacing*(i-1);var o=r.width();if(n.dynamicSlope){this.dynamicSlopeReflow(r,o,a)}else{this.constantSlopeReflow(r,o,a)}for(var s=0;s<i;s++){t[s].reflow(e)}}});t(ea,{neckRatio:.3,width:300,dynamicSlope:false,dynamicHeight:true,segmentSpacing:0,labels:{visible:false,align:D,position:D,zIndex:1}});y(ea.prototype,Sr);var ta=o.extend({render:function(){this.createFunnelChart(this.series)},createFunnelChart:function(e){var t=e[0];var i=new ea(this,{series:e,legend:this.options.legend,neckRatio:t.neckRatio,dynamicHeight:t.dynamicHeight,dynamicSlope:t.dynamicSlope,segmentSpacing:t.segmentSpacing,highlight:t.highlight});this.appendChart(i)},appendChart:function(e,t){o.fn.appendChart.call(this,e,t);J(this.options.legend.items,e.legendItems)}});var ia="color";var i="first";var na="from";var r="max";var ra="min";var aa="noteText";var oa="summary";var sa="to";or.current.register(jn,[Ze,nt,st,Ct,Xe,kt,it,lt,tt,xt,Je,yt,_t,gt,Tt,ot,mt,St]);or.current.register(br,[bt,wt,et]);or.current.register(Er,[dt]);or.current.register(Fr,[rt]);or.current.register(ta,[at]);or.current.register(Wr,[ut,ct,ft]);or.current.register(Zr,[ht,pt,vt]);C.current.register([Ze,nt,st,Ct,Xe,kt],[u],[Zt,ia,aa,Le,He]);C.current.register([_t,gt,mt,St],[na,sa],[Zt,ia,aa]);C.current.register([Tt,ot],[u],[Zt,ia,aa,oa]);C.current.register([ut,ct,ft],[m,g],[ia]);C.current.register([ht,pt,vt],[u],[ia]);C.current.register([at],[u],[Zt,ia,"visibleInLegend","visible"]);Tn.current.register([Ze,nt,st,Ct,Xe,kt,Tt,ot],{value:r,color:i,noteText:i,errorLow:ra,errorHigh:r});Tn.current.register([_t,gt,mt,St],{from:ra,to:r,color:i,noteText:i});Tn.current.register([ht,pt,vt],{value:r,color:i});C.current.register([bt,wt,et],[m,g],[ia,aa,Ne,Oe,Ve,We]);C.current.register([et],[m,g,"size"],[ia,Zt,aa]);C.current.register([it,lt],["open","high","low","close"],[Zt,ia,"downColor",aa]);Tn.current.register([it,lt],{open:r,high:r,low:ra,close:r,color:i,downColor:i,noteText:i});C.current.register([Je,yt],["lower","q1","median","q3","upper","mean","outliers"],[Zt,ia,aa]);Tn.current.register([Je,yt],{lower:r,q1:r,median:r,q3:r,upper:r,mean:r,outliers:i,color:i,noteText:i});C.current.register([tt,xt],["current","target"],[Zt,ia,"visibleInLegend",aa]);Tn.current.register([tt,xt],{current:r,target:r,color:i,noteText:i});C.current.register([dt,rt],[u],[Zt,ia,"explode","visibleInLegend","visible"]);var la=[Zt,u,m,g];var da="mousemove";var ua="contextmenu";var ca="mouseleave";var fa=20;var ha=e.extend({init:function(e,t,i,n){var r=this;if(n===void 0){n={}}this.observers=[];this.addObserver(n.observer);this.chartService=new de.ChartService(this,n);this.chartService.theme=i;this._initElement(e);var a=y({},this.options,t);this._originalOptions=y({},a);this._theme=i;this._initTheme(a,i);this._initHandlers();this._initSurface();this.bindCategories();S.FontLoader.preloadFonts(t,function(){r.fontLoaded=true;if(!r._destroyed){r.trigger("init");r._redraw();r._attachEvents()}})},_initElement:function(e){this._setElementClass(e);e.style.position="relative";while(e.firstChild){e.removeChild(e.firstChild)}this.element=e},_setElementClass:function(e){S.addClass(e,"k-chart")},_initTheme:function(e,t){var i=[];var n=e.series||[];for(var r=0;r<n.length;r++){i.push(N.extend({},n[r]))}e.series=i;pa(e);this.applyDefaults(e,t);if(e.seriesColors===null){delete e.seriesColors}this.options=y({},t,e);this.applySeriesColors()},getSize:function(){var e=this.options.chartArea||{};var t=e.width?parseInt(e.width,10):Math.floor(this.element.offsetWidth);var i=e.height?parseInt(e.height,10):Math.floor(this.element.offsetHeight);return{width:t,height:i}},resize:function(e){var t=this.getSize();var i=this._size;var n=t.width>0||t.height>0;if(e||n&&(!i||t.width!==i.width||t.height!==i.height)){this._size=t;this._resize(t,e);this.trigger("resize",t)}else if(n&&this._selections&&S.find(this._selections,function(e){return!e.visible})){this._destroySelections();this._setupSelection()}},_resize:function(){this._noTransitionsRedraw()},redraw:function(e){this.applyDefaults(this.options);this.applySeriesColors();if(e){var t=this._model._plotArea;var i=t.findPane(e);t.redraw(i)}else{this._redraw()}},getAxis:function(e){return we(e,this._plotArea.axes)},findAxisByName:function(e){return this.getAxis(e)},findPaneByName:function(e){var t=this._plotArea.panes;for(var i=0;i<t.length;i++){if(t[i].options.name===e){return new ke(t[i])}}},findPaneByIndex:function(e){var t=this._plotArea.panes;if(t[e]){return new ke(t[e])}},plotArea:function(){return new ye(this._plotArea)},toggleHighlight:function(e,t){var i=this._plotArea;var n=(i.srcSeries||i.series||[])[0];var r;if(z(t)){r=i.filterPoints(t)}else{var a,o;if(q(t)){a=t.series;o=t.category}else{a=o=t}if(n.type===rt){r=va(i.pointsBySeriesName(a),o)}else if(n.type===dt||n.type===at){r=va((i.charts[0]||{}).points,o)}else{r=i.pointsBySeriesName(a)}}if(r){this.togglePointsHighlight(e,r)}},togglePointsHighlight:function(e,t){var i=this._highlight;for(var n=0;n<t.length;n++){i.togglePointHighlight(t[n],e)}},showTooltip:function(e){var t=this._sharedTooltip();var i=this;var n=i._tooltip;var r=i._plotArea;var a,o;if(z(e)){a=r.findPoint(e);if(a&&t){o=a.categoryIx}}else if(t&&R(e)){o=r.categoryAxis.categoryIndex(e)}if(t){if(o>=0){var s=this._plotArea.pointsByCategoryIndex(o);n.showAt(s)}}else if(a){n.show(a)}},hideTooltip:function(){this._tooltip.hide()},_initSurface:function(){var e=this.surface;var t=this._surfaceWrap();var i=this.options.chartArea||{};if(i.width){S.elementSize(t,{width:i.width})}if(i.height){S.elementSize(t,{height:i.height})}if(!e||e.options.type!==this.options.renderAs){this._destroySurface();this.surface=fe.Surface.create(t,{type:this.options.renderAs});this.surface.bind("mouseenter",this._surfaceMouseenterHandler);this.surface.bind("mouseleave",this._surfaceMouseleaveHandler)}else{this.surface.clear();this.surface.resize()}},_surfaceWrap:function(){return this.element},_redraw:function(){var e=this._getModel();this._size={width:e.options.width,height:e.options.height};this._destroyView();this._model=e;this._plotArea=e._plotArea;e.renderVisual();if(this.options.transitions!==false){e.traverse(function(e){if(e.animation){e.animation.setup()}})}this._initSurface();this.surface.draw(e.visual);if(this.options.transitions!==false){e.traverse(function(e){if(e.animation){e.animation.play()}})}this._tooltip=this._createTooltip();this._highlight=new $n;this._setupSelection();this._createPannable();this._createZoomSelection();this._createMousewheelZoom();this.trigger($t);Sa(this._plotArea.panes);if(!this._navState){this._cancelDomEvents()}},exportVisual:function(e){var t;if(e&&(e.width||e.height||e.options)){var i=this.options;var n=y({},e.options,{chartArea:{width:e.width,height:e.height}});Ca(this._originalOptions,n);this.options=y({},this._originalOptions,n);this._initTheme(this.options,this._theme);this.bindCategories();var r=this._getModel();r.renderVisual();Sa(r._plotArea.panes);t=r.visual;this.options=i}else{t=this.surface.exportVisual()}return t},_sharedTooltip:function(){return this._plotArea instanceof jn&&this.options.tooltip&&this.options.tooltip.shared},_createPannable:function(){var e=this.options;if(e.pannable!==false){this._pannable=new Xn(this._plotArea,e.pannable)}},_createZoomSelection:function(){var e=this.options.zoomable;var t=(e||{}).selection;if(e!==false&&t!==false){this._zoomSelection=new Zn(this,t)}},_createMousewheelZoom:function(){var e=this.options.zoomable;var t=(e||{}).mousewheel;if(e!==false&&t!==false){this._mousewheelZoom=new Jn(this,t)}},_toggleDragZoomEvents:function(){var e=this.options.pannable;var t=this.options.zoomable;var i=(t||{}).selection;var n=(t||{}).mousewheel;var r=!e&&(t===false||i===false)&&!this.requiresHandlers([Ot,Ht,Nt]);var a=(t===false||n===false)&&!this.requiresHandlers([Vt,Wt,Ut]);var o=this.element;if(this._dragZoomEnabled&&r&&a){o.style.touchAction=this._touchAction||"";this._dragZoomEnabled=false}else if(!this._dragZoomEnabled&&!(r&&a)){o.style.touchAction="none";this._dragZoomEnabled=true}this._toggleDomEvents(!r,!a)},_toggleDomEvents:function(e,t){var i=this.domEvents;if(!i){return}if(i.toggleDrag){i.toggleDrag(e)}if(i.toggleZoom){i.toggleZoom(t)}},_createTooltip:function(){var e=this;var t=e.options.tooltip;var i;if(this._sharedTooltip()){i=this._createSharedTooltip(t)}else{i=new fr(this.chartService,t)}return i},_createSharedTooltip:function(e){return new hr(this._plotArea,e)},applyDefaults:function(e,t){ma(e,t);ga(e,t)},applySeriesColors:function(){var e=this.options;var t=e.series;var i=e.seriesColors||[];for(var n=0;n<t.length;n++){var r=t[n];var a=i[n%i.length];var o=r._defaults;r.color=r.color||a;if(o){o.color=o.color||a}}},_getModel:function(){var e=this.options;var t=this._createPlotArea();var i=new S.RootElement(this._modelOptions());i.chart=this;i._plotArea=t;S.Title.buildTitle(e.title,i);if(e.legend&&e.legend.visible){i.append(new ar(t.options.legend,this.chartService))}i.append(t);i.reflow();return i},_modelOptions:function(){var e=this.options;var t=this.getSize();return y({transitions:e.transitions,width:t.width||T.DEFAULT_WIDTH,height:t.height||T.DEFAULT_HEIGHT},e.chartArea)},_createPlotArea:function(e){var t=this.options;var i=or.current.create(e?[]:t.series,t,this.chartService);return i},_setupSelection:function(){var e=this;var t=this;var i=t._plotArea.axes;var n=this._selections=[];for(var r=0;r<i.length;r++){var a=i[r];var o=a.options;if(a instanceof ne&&o.select&&!o.vertical){var s=a.range();var l=new cr(e,a,y({min:s.min,max:s.max},o.select));n.push(l)}}},_selectStart:function(e){return this.trigger(jt,e)},_select:function(e){return this.trigger(Gt,e)},_selectEnd:function(e){return this.trigger(qt,e)},_initHandlers:function(){this._clickHandler=this._click.bind(this);this._mousewheelHandler=this._mousewheel.bind(this);this._mouseleaveHandler=this._mouseleave.bind(this);this._surfaceMouseenterHandler=this._mouseover.bind(this);this._surfaceMouseleaveHandler=this._mouseout.bind(this);this._mousemove=kendo.throttle(this._mousemove.bind(this),fa)},addObserver:function(e){if(e){this.observers.push(e)}},removeObserver:function(e){var t=this.observers.indexOf(e);if(t>=0){this.observers.splice(t,1)}},requiresHandlers:function(e){var t=this.observers;for(var i=0;i<t.length;i++){if(t[i].requiresHandlers(e)){return true}}},trigger:function(e,t){if(t===void 0){t={}}if(e===Kt){t.anchor.point=this._toDocumentCoordinates(t.anchor.point)}t.sender=this;var i=this.observers;var n=false;for(var r=0;r<i.length;r++){if(i[r].trigger(e,t)){n=true}}return n},_attachEvents:function(){var e=this.element;this._touchAction=e.style.touchAction;var t;le(e,(t={},t[ua]=this._clickHandler,t[ii]=this._mousewheelHandler,t[ca]=this._mouseleaveHandler,t));if(this._shouldAttachMouseMove()){var i;le(e,(i={},i[da]=this._mousemove,i))}this.domEvents=de.DomEventsBuilder.create(this.element,{start:this._start.bind(this),move:this._move.bind(this),end:this._end.bind(this),tap:this._tap.bind(this),gesturestart:this._gesturestart.bind(this),gesturechange:this._gesturechange.bind(this),gestureend:this._gestureend.bind(this)});this._toggleDragZoomEvents()},_mouseleave:function(e){if(this._hoveredPoint){this._hoveredPoint.out(this,e);this._hoveredPoint=null}if(this._plotArea.hovered){this.trigger(Lt);this._plotArea.hovered=false}},_cancelDomEvents:function(){if(this.domEvents&&this.domEvents.cancel){this.domEvents.cancel()}},_gesturestart:function(e){if(this._mousewheelZoom&&!this._stopChartHandlers(e)){this._gestureDistance=e.distance;this._unsetActivePoint();this.surface.suspendTracking()}},_gestureend:function(e){if(this._zooming&&!this._stopChartHandlers(e)){if(this.surface){this.surface.resumeTracking()}this._zooming=false;this.trigger(Ut,{})}},_gesturechange:function(e){var t=this._mousewheelZoom;if(t&&!this._stopChartHandlers(e)){e.preventDefault();var i=this._gestureDistance;var n=-e.distance/i+1;if(Math.abs(n)>=.1){n=Math.round(n*10);this._gestureDistance=e.distance;var r={delta:n,axisRanges:ba(this._plotArea.axes),originalEvent:e};if(this._zooming||!this.trigger(Vt,r)){if(!this._zooming){this._zooming=true}var a=r.axisRanges=t.updateRanges(n);if(a&&!this.trigger(Wt,r)){t.zoom()}}}}},_mouseout:function(e){if(e.element){var t=this._drawingChartElement(e.element,e);if(t&&t.leave){t.leave(this,e.originalEvent)}}},_start:function(e){var t=this._eventCoordinates(e);if(this._stopChartHandlers(e)||!this._plotArea.backgroundContainsPoint(t)){return}if(this.requiresHandlers([Ot,Ht,Nt])){this._startNavigation(e,t,Ot)}if(this._pannable&&this._pannable.start(e)){this.surface.suspendTracking();this._unsetActivePoint();this._suppressHover=true;this.chartService.panning=true}if(this._zoomSelection){if(this._zoomSelection.start(e)){this.trigger(Vt,{axisRanges:ba(this._plotArea.axes),originalEvent:e})}}},_move:function(e){var t=this;var i=t._navState;var n=t._pannable;if(this._stopChartHandlers(e)){return}if(n){var r=n.move(e);if(r&&!this.trigger(Ht,{axisRanges:r,originalEvent:e})){n.pan()}}else if(i){var a={};var o=i.axes;for(var s=0;s<o.length;s++){var l=o[s];var d=l.options.name;if(d){var u=l.options.vertical?e.y:e.x;var c=u.startLocation-u.location;if(c!==0){a[l.options.name]=l.translateRange(c)}}}i.axisRanges=a;this.trigger(Ht,{axisRanges:a,originalEvent:e})}if(this._zoomSelection){this._zoomSelection.move(e)}},_end:function(e){if(this._stopChartHandlers(e)){return}var t=this._pannable;if(t&&t.end(e)){this.surface.resumeTracking();this.trigger(Nt,{axisRanges:ba(this._plotArea.axes),originalEvent:e});this._suppressHover=false;this.chartService.panning=false}else{this._endNavigation(e,Nt)}if(this._zoomSelection){var i=this._zoomSelection.end(e);if(i&&!this.trigger(Wt,{axisRanges:i,originalEvent:e})){this._zoomSelection.zoom();this.trigger(Ut,{axisRanges:i,originalEvent:e})}}},_stopChartHandlers:function(e){var t=this._selections||[];if(!t.length){return false}var i=this._eventCoordinates(e);var n=this._plotArea.paneByPoint(i);if(n){for(var r=0;r<t.length;r++){if(t[r].onPane(n)){return true}}}},_mousewheel:function(e){var t=this;var i=S.mousewheelDelta(e);var n=this._mousewheelZoom;var r=this._eventCoordinates(e);if(this._stopChartHandlers(e)||!this._plotArea.backgroundContainsPoint(r)){return}if(n){var a={delta:i,axisRanges:ba(this._plotArea.axes),originalEvent:e};if(this._zooming||!this.trigger(Vt,a)){e.preventDefault();if(!this._zooming){this._unsetActivePoint();this.surface.suspendTracking();this._zooming=true}if(this._mwTimeout){clearTimeout(this._mwTimeout)}a.axisRanges=n.updateRanges(i);if(a.axisRanges&&!this.trigger(Wt,a)){n.zoom()}this._mwTimeout=setTimeout(function(){t.trigger(Ut,a);t._zooming=false;if(t.surface){t.surface.resumeTracking()}},ni)}}else{var o=this._navState;if(!o){var s=this._startNavigation(e,r,Vt);if(!s){o=this._navState}}if(o){var l=o.totalDelta||i;o.totalDelta=l+i;var d=this._navState.axes;var u={};for(var c=0;c<d.length;c++){var f=d[c];var h=f.options.name;if(h){u[h]=f.scaleRange(-l)}}this.trigger(Wt,{delta:i,axisRanges:u,originalEvent:e});if(this._mwTimeout){clearTimeout(this._mwTimeout)}this._mwTimeout=setTimeout(function(){t._endNavigation(e,Ut)},ni)}}},_startNavigation:function(e,t,i){var n=this._model._plotArea;var r=n.findPointPane(t);var a=n.axes.slice(0);if(!r){return}var o=ba(a);var s=this.trigger(i,{axisRanges:o,originalEvent:e});if(s){this._cancelDomEvents()}else{this._suppressHover=true;this._unsetActivePoint();this._navState={axisRanges:o,pane:r,axes:a}}},_endNavigation:function(e,t){if(this._navState){this.trigger(t,{axisRanges:this._navState.axisRanges,originalEvent:e});this._suppressHover=false;this._navState=null}},_getChartElement:function(e,t){var i=this.surface.eventTarget(e);if(i){return this._drawingChartElement(i,e,t)}},_drawingChartElement:function(e,t,i){var n=e;var r;while(n&&!r){r=n.chartElement;n=n.parent}if(r){if(r.aliasFor){r=r.aliasFor(t,this._eventCoordinates(t))}if(i){r=r.closest(i);if(r&&r.aliasFor){r=r.aliasFor()}}return r}},_eventCoordinates:function(e){var t=S.eventCoordinates(e);return this._toModelCoordinates(t.x,t.y)},_elementPadding:function(){if(!this._padding){var e=b(this.element,["paddingLeft","paddingTop"]);var t=e.paddingLeft;var i=e.paddingTop;this._padding={top:i,left:t}}return this._padding},_toDocumentCoordinates:function(e){var t=this._elementPadding();var i=S.elementOffset(this.element);return{left:L(e.x+t.left+i.left),top:L(e.y+t.top+i.top)}},_toModelCoordinates:function(e,t){var i=this.element;var n=S.elementOffset(i);var r=this._elementPadding();var a=S.elementScale(i).invert();var o=new x(e-n.left-r.left,t-n.top-r.top).transform(a);return new F(o.x,o.y)},_tap:function(e){var t=this;var i=this.surface.eventTarget(e);var n=this._drawingChartElement(i,e);var r=this._sharedTooltip();if(!this._startHover(i,e)&&!r){this._unsetActivePoint()}if(r){this._trackSharedTooltip(this._eventCoordinates(e),e,true)}this._propagateClick(n,e);this.handlingTap=true;setTimeout(function(){t.handlingTap=false},0)},_click:function(e){var t=this._getChartElement(e);this._propagateClick(t,e)},_propagateClick:function(e,t){var i=this;var n=e;while(n){if(n.click){n.click(i,t)}n=n.parent}},_startHover:function(e,t){if(this._suppressHover){return false}var i=this._drawingChartElement(e,t,function(e){return(e.hover||e.over)&&!(e instanceof o)});var n=this._activePoint;var r=this._plotArea.series.length>1;var a=this._hasInactiveOpacity();this._updateHoveredPoint(i,t);if(i&&n!==i&&i.hover){this._activePoint=i;if(!this._sharedTooltip()&&!i.hover(this,t)){this._displayTooltip(i);if(a){this._displayInactiveOpacity(i,r)}else{this._highlight.show(i)}}}else if(!i&&a){if(r&&this._activChartInstance){this._updateSeriesOpacity(i,true);this._applySeriesOpacity(this._activChartInstance.children,null,true);this._activChartInstance=null}this._highlight&&this._highlight.hide();this._activePoint=null}return i},_displayTooltip:function(e){var t=y({},this.options.tooltip,e.options.tooltip);if(t.visible){this._tooltip.show(e)}},_displayInactiveOpacity:function(e,t,i){var n=this._activChartInstance=this._chartInstanceFromPoint(e);if(t){this._updateSeriesOpacity(e);this._applySeriesOpacity(n.children,null,true);this._applySeriesOpacity(n.children,e.series);this._highlight.show(i||e)}else{var r;if(!n.supportsPointInactiveOpacity()){this._highlight.show(e);return}r=this._getInactivePoints(e,n);if(r&&r.length){this._highlight.show(r,1-this._getInactiveOpacityForSeries(e.series))}}},_getInactivePoints:function(t,e){var i=this._getAllPointsOfType(e,t.constructor);return i.filter(function(e){return e!==t})},_getAllPointsOfType:function(e,t){var i=this;var n=[];for(var r=0;r<e.children.length;r++){var a=e.children[r];if(a.constructor===t){n.push(a)}else if(a.children&&a.children.length){n=n.concat(i._getAllPointsOfType(a,t))}}return n},_updateHoveredPoint:function(e,t){var i=this._hoveredPoint;if(i&&i!==e){i.out(this,t);this._hoveredPoint=null}if(e&&i!==e&&e.over){this._hoveredPoint=e;e.over(this,t)}},_updateSeriesOpacity:function(e,t){var i=this;var n=this._plotArea;var r=n.series.length;for(var a=0;a<r;a++){var o=n.series[a];var s=i._getDefaultOpacityForSeries(o);var l=i._getInactiveOpacityForSeries(o);if(!t&&o!==e.series){o.defaultOpacity=s;o.opacity=l;if(o.line){o.line.opacity=l}}else{o.opacity=s;if(o.line){o.line.opacity=s}}}},_applySeriesOpacity:function(e,t,i,n){var r=this;for(var a=0;a<e.length;a++){var o=e[a];var s=o.series||n;if(s&&o.visual){var l=n?n.opacity:o.series.opacity;if(s!==t||i){o.visual.opacity(i?1:l)}}if(o.children&&o.children.length){r._applySeriesOpacity(o.children,t,i,o.series)}}},_chartInstanceFromPoint:function(e){var t=e.parent;while(t&&!t.plotArea){t=t.parent}return t},_hasInactiveOpacity:function(){var e=this.options.seriesDefaults.highlight.inactiveOpacity!==undefined;var t=this.options.series.filter(function(e){return e.highlight.inactiveOpacity!==undefined}).length>0;return e||t},_getInactiveOpacityForSeries:function(e){var t=this.options.seriesDefaults.highlight.inactiveOpacity;var i=e.highlight.inactiveOpacity;return i||t||e.opacity||T.DEFAULT_SERIES_OPACITY},_getDefaultOpacityForSeries:function(e){return e.defaultOpacity||e.opacity||T.DEFAULT_SERIES_OPACITY},_mouseover:function(e){var t=this._startHover(e.element,e.originalEvent);if(t&&t.tooltipTracking&&!this._mouseMoveTrackHandler&&!this._sharedTooltip()){this._mouseMoveTrackHandler=this._mouseMoveTracking.bind(this);var i;le(document,(i={},i[da]=this._mouseMoveTrackHandler,i))}},_mouseMoveTracking:function(e){var t=this;var i=t.options;var n=t._tooltip;var r=t._highlight;var a=t._activePoint;var o=this._eventCoordinates(e);if(this._plotArea.box.containsPoint(o)){if(a&&a.tooltipTracking&&a.series&&a.parent.getNearestPoint){var s=a.parent.getNearestPoint(o.x,o.y,a.seriesIx);if(s&&s!==a){this._activePoint=s;if(!s.hover(this,e)){var l=y({},i.tooltip,s.options.tooltip);if(l.visible){n.show(s)}r.show(s)}}}}else{var d;ue(document,(d={},d[da]=this._mouseMoveTrackHandler,d));this._unsetActivePoint();this._mouseMoveTrackHandler=null}},_mousemove:function(e){var t=this._eventCoordinates(e);var i=this._plotArea;this._trackCrosshairs(t);if(i.hover){var n=i.backgroundContainsPoint(t);if(n){i.hovered=true;this._plotArea.hover(this,e)}else if(i.hovered&&!n){this.trigger(Lt);i.hovered=false}}if(this._sharedTooltip()){this._trackSharedTooltip(t,e)}},_trackCrosshairs:function(e){var t=this._plotArea.crosshairs;for(var i=0;i<t.length;i++){var n=t[i];if(n.box.containsPoint(e)){n.showAt(e)}else{n.hide()}}},_trackSharedTooltip:function(e,t,i){if(this._suppressHover){return}var n=this;var r=n.options.tooltip;var a=n._plotArea;var o=n._plotArea.categoryAxis;var s=n._tooltip;var l=n._highlight;if(a.backgroundContainsPoint(e)){var d=o.pointCategoryIndex(e);if(d!==this._tooltipCategoryIx||!this._sharedHighlight&&i){var u=a.pointsByCategoryIndex(d);var c=u.map(function(e){return e.eventArgs(t)});var f=c[0]||{};f.categoryPoints=c;if(u.length>0&&!this.trigger(Rt,f)){if(r.visible){s.showAt(u,e)}l.show(u);this._sharedHighlight=true}else{s.hide()}this._tooltipCategoryIx=d}else if(i&&this._sharedHighlight){l.hide();s.hide();this._sharedHighlight=false}}else if(this._sharedHighlight){l.hide();s.hide();this._tooltipCategoryIx=null;this._sharedHighlight=false}},hideElements:function(e){var t=this._plotArea;this._mousemove.cancel();t.hideCrosshairs();this._unsetActivePoint(e)},_unsetActivePoint:function(e){var t=this;var i=t._tooltip;var n=t._highlight;this._activePoint=null;this._hoveredPoint=null;if(i&&!(e&&e.keepTooltipOpen)){i.hide()}this._tooltipCategoryIx=null;this._sharedHighlight=false;if(n){n.hide()}},_deferRedraw:function(){this._redraw()},_clearRedrawTimeout:function(){if(this._redrawTimeout){clearInterval(this._redrawTimeout);this._redrawTimeout=null}},bindCategories:function(){var e=this;var t=this.options;var i=[].concat(t.categoryAxis);for(var n=0;n<i.length;n++){var r=i[n];if(r.autoBind!==false){e.bindCategoryAxisFromSeries(r,n)}}},bindCategoryAxisFromSeries:function(e,t){var i=this;var n=this.options.series;var r=n.length;var a=new S.HashMap;var o=[];var s=false;var l;for(var d=0;d<r;d++){var u=n[d];var c=u.categoryAxis===e.name||!u.categoryAxis&&t===0;var f=u.data;var h=f.length;var p=u.categoryField&&c;s=p||s;if(p&&h>0){l=cn(e,Se(u.categoryField,f[0]));var v=l?un:Se;for(var m=0;m<h;m++){var g=f[m];var _=v(u.categoryField,g,i.chartService.intl);if(l||!a.get(_)){o.push([_,g]);if(!l){a.set(_,true)}}}}}if(o.length>0){if(l){o=ka(o,function(e,t){return S.dateComparer(e[0],t[0])})}var b=ya(o);e.categories=b[0]}else if(s){e.categories=[]}},_isBindable:function(e){var t=C.current.valueFields(e);var i=true;for(var n=0;n<t.length;n++){var r=t[n];if(r===u){r="field"}else{r=r+"Field"}if(!R(e[r])){i=false;break}}return i},_noTransitionsRedraw:function(){var e=this.options;var t;if(e.transitions!==false){e.transitions=false;t=true}this._redraw();if(t){e.transitions=true}},_legendItemHover:function(t,i){var e=this;var n=e._plotArea;var r=e._highlight;var a=(n.srcSeries||n.series)[t];var o;if(_(a.type,[dt,rt,at])){o=n.findPoint(function(e){return e.series.index===t&&e.index===i})}else{o=n.pointsBySeriesIndex(t)}if(this._hasInactiveOpacity()&&a.visible&&o){var s=n.series.length>1;var l=o.length?o[0]:o;this._displayInactiveOpacity(l,s,o)}else{r.show(o)}},_shouldAttachMouseMove:function(){return this._plotArea.crosshairs.length||this._tooltip&&this._sharedTooltip()||this.requiresHandlers([Bt,Lt])},updateMouseMoveHandler:function(){var e;ue(this.element,(e={},e[da]=this._mousemove,e));if(this._shouldAttachMouseMove()){var t;le(this.element,(t={},t[da]=this._mousemove,t))}},applyOptions:function(e,t){Ca(this._originalOptions,e);this._originalOptions=y(this._originalOptions,e);this.options=y({},this._originalOptions);if(t){this._theme=t;this.chartService.theme=t}this._initTheme(this.options,this._theme);this._toggleDragZoomEvents()},setOptions:function(e,t){this.applyOptions(e,t);this.bindCategories();this.redraw();this.updateMouseMoveHandler()},setDirection:function(e){this.chartService.rtl=Boolean(e);if(this.surface&&this.surface.type==="svg"){this._destroySurface()}},setIntlService:function(e){this.chartService.intl=e},noTransitionsRedraw:function(){this._noTransitionsRedraw()},destroy:function(){this._destroyed=true;var e;ue(this.element,(e={},e[ua]=this._clickHandler,e[ii]=this._mousewheelHandler,e[da]=this._mousemove,e[ca]=this._mouseleaveHandler,e));if(this.domEvents){this.domEvents.destroy();delete this.domEvents}if(this._mouseMoveTrackHandler){var t;ue(document,(t={},t[da]=this._mouseMoveTrackHandler,t))}this._destroyView();this._destroySurface();this._clearRedrawTimeout()},_destroySurface:function(){var e=this.surface;if(e){e.unbind("mouseenter",this._surfaceMouseenterHandler);e.unbind("mouseleave",this._surfaceMouseleaveHandler);e.destroy();this.surface=null}},_destroySelections:function(){var e=this._selections;if(e){while(e.length>0){e.shift().destroy()}}},_destroyView:function(){var e=this._model;if(e){e.destroy();this._model=null}this._unsetActivePoint();this._destroySelections();if(this._tooltip){this._tooltip.destroy()}if(this._highlight){this._highlight.destroy()}if(this._zoomSelection){this._zoomSelection.destroy();delete this._zoomSelection}if(this._pannable){this._pannable.destroy();delete this._pannable}if(this._mousewheelZoom){this._mousewheelZoom.destroy();delete this._mousewheelZoom}}});function pa(e){var t=la;for(var i=0;i<t.length;i++){var n=t[i]+"Axes";if(e[n]){e[t[i]+"Axis"]=e[n];delete e[n]}}}function va(e,t){if(e){for(var i=0;i<e.length;i++){if(e[i].category===t){return[e[i]]}}}}function ma(e,t){var n=(t||{}).axisDefaults||{};var r,a,i;function o(e){var t=(e||{}).color||a.color;var i=y({},n,n[r],a,a[r],{line:{color:t},labels:{color:t},title:{color:t}},e);delete i[r];return i}for(var s=0;s<la.length;s++){r=la[s]+"Axis";a=e.axisDefaults||{};i=[].concat(e[r]);i=i.map(o);e[r]=i.length>1?i:i[0]}}function ga(e,t){var i=e.series;var n=i.length;var r=e.seriesDefaults;var a=y({},e.seriesDefaults);var o=t?y({},t.seriesDefaults):{};var s=y({},o);_a(a);_a(s);for(var l=0;l<n;l++){var d=i[l].type||e.seriesDefaults.type;var u=y({data:[]},s,o[d],{tooltip:e.tooltip},a,r[d]);i[l]._defaults=u;i[l]=y({},u,i[l]);i[l].data=i[l].data||[]}}function _a(e){delete e.bar;delete e.column;delete e.rangeColumn;delete e.line;delete e.verticalLine;delete e.pie;delete e.donut;delete e.area;delete e.verticalArea;delete e.scatter;delete e.scatterLine;delete e.bubble;delete e.candlestick;delete e.ohlc;delete e.boxPlot;delete e.bullet;delete e.verticalBullet;delete e.polarArea;delete e.polarLine;delete e.radarArea;delete e.radarLine;delete e.waterfall}function ba(e){var t={};for(var i=0;i<e.length;i++){var n=e[i];var r=n.options.name;if(r){t[r]=n.range()}}return t}function wa(e,t){if(t===void 0){t=S.dateComparer}for(var i=1,n=e.length;i<n;i++){if(t(e[i],e[i-1])<0){e.sort(t);break}}return e}function ka(e,t){if(t===void 0){t=S.dateComparer}var i=wa(e,t);var n=i.length;var r=n>0?[i[0]]:[];for(var a=1;a<n;a++){if(t(i[a],$(r))!==0){r.push(i[a])}}return r}function ya(e){var t=e.length;var i=[];for(var n=0;n<t;n++){var r=e[n];var a=r.length;for(var o=0;o<a;o++){i[o]=i[o]||[];i[o].push(r[o])}}return i}var xa=["data","categories"];function Ca(e,t){for(var i in t){if(!_(i,xa)&&t.hasOwnProperty(i)){var n=t[i];var r=e[i];if(R(r)){var a=n===null;if(a||!R(n)){delete e[i];if(a){delete t[i]}}else if(r&&q(n)){if(q(r)){Ca(r,n)}}}}}}function Sa(e){for(var t=0;t<e.length;t++){e[t].notifyRender()}}t(ha,{renderAs:"",chartArea:{},legend:{visible:true,labels:{}},categoryAxis:{},seriesDefaults:{type:nt,data:[],highlight:{visible:true},labels:{},negativeValues:{visible:false}},series:[],seriesColors:null,tooltip:{visible:false},transitions:true,valueAxis:{},plotArea:{},title:{},xAxis:{},yAxis:{},panes:[{}],pannable:false,zoomable:false});kendo.deepExtend(kendo.dataviz,{constants:ri,Aggregates:Ce,AreaChart:Di,AreaSegment:Ci,AxisGroupRangeTracker:Ai,Bar:Ri,BarChart:Li,BarLabel:Ei,BoxPlotChart:Ui,BoxPlot:Vi,BubbleChart:$i,Bullet:Yi,BulletChart:Qi,CandlestickChart:Oi,Candlestick:Hi,CategoricalChart:n,CategoricalErrorBar:si,CategoricalPlotArea:jn,Chart:ha,ChartContainer:tn,ClipAnimation:wi,ClusterLayout:zi,Crosshair:en,CrosshairTooltip:Ji,DefaultAggregates:Tn,DonutChart:Rr,DonutPlotArea:Fr,DonutSegment:Ir,ErrorBarBase:oi,ErrorRangeCalculator:Ie,Highlight:$n,SharedTooltip:hr,Legend:ar,LegendItem:tr,LegendLayout:er,LineChart:xi,LinePoint:hi,LineSegment:pi,Pane:nn,PieAnimation:gr,PieChart:Dr,PieChartMixin:Sr,PiePlotArea:Er,PieSegment:kr,PlotAreaBase:o,PlotAreaEventsMixin:xn,PlotAreaFactory:or,PointEventsMixin:ci,RangeBar:Dn,RangeBarChart:An,RangeAreaPoint:Fn,RangeAreaChart:Ln,ScatterChart:Gi,ScatterErrorBar:ji,ScatterLineChart:_r,Selection:cr,SeriesAggregator:Cn,SeriesBinder:C,SplineSegment:_i,SplineAreaSegment:Ti,StackWrap:Bi,Tooltip:fr,OHLCChart:Nn,OHLCPoint:Hn,WaterfallChart:Vn,WaterfallSegment:On,XYPlotArea:br,MousewheelZoom:Jn,ZoomSelection:Zn,Pannable:Xn,ChartAxis:be,ChartPane:ke,ChartPlotArea:ye,findAxisByName:we,anyHasZIndex:ki,appendIfNotNull:on,areNumbers:Ni,bindSegments:ln,categoriesCount:ui,countNumbers:xe,equalsIgnoreCase:dn,evalOptions:di,filterSeriesByType:p,getDateField:un,getField:Se,hasGradientOverlay:Ii,hasValue:H,isDateAxis:cn,segmentVisible:sn,singleItemOrArray:fn,createOutOfRangePoints:gn})})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("dataviz/chart/chart",["dataviz/chart/kendo-chart","kendo.data","kendo.dataviz.core","kendo.dataviz.themes","kendo.drawing","kendo.userevents"],e)})(function(){(function(f,l){var n=".kendoChart";var h=window.kendo;var e=h.Class;var p=h._outerWidth;var v=h._outerHeight;var s=h.dataviz;var t=s.constants;var B=s.Chart;var L=s.SeriesBinder;var r=h.ui.Widget;var a=h.data.DataSource;var d=h.deepExtend;var u=s.defined;var H=s.getField;var N=s.InstanceObserver;var O=s.inArray;var V=s.services;var o=f.proxy;var W=f.isArray;var m=f.extend;var c=h.template;var i="mouseleave"+n;var U=t.AXIS_LABEL_CLICK;var g=t.LEGEND_ITEM_CLICK;var j=t.LEGEND_ITEM_HOVER;var G=t.LEGEND_ITEM_LEAVE;var q=t.SERIES_CLICK;var $=t.SERIES_HOVER;var K=t.SERIES_OVER;var Y=t.SERIES_LEAVE;var Q=t.PANE_RENDER;var X=t.PLOT_AREA_CLICK;var Z=t.PLOT_AREA_HOVER;var J=t.PLOT_AREA_LEAVE;var ee=t.DRAG;var te=t.DRAG_END;var ie=t.DRAG_START;var ne=t.ZOOM_START;var re=t.ZOOM;var ae=t.ZOOM_END;var oe=t.SELECT_START;var se=t.SELECT;var le=t.SELECT_END;var _=t.RENDER;var de=t.NOTE_CLICK;var ue=t.NOTE_HOVER;var ce=t.NOTE_LEAVE;var b=f(document.documentElement);var w="change";var k="dataBound";var y="leave";var fe="down";var he=t.VALUE;var x=t.PIE;var C=t.DONUT;var S=t.FUNNEL;var T=h.Observable;var pe=150;var ve=100;var me="k-chart-tooltip-inverse";var ge="k-chart-shared-tooltip";var _e="rtl";V.DomEventsBuilder.register({create:function(e,t){return new h.UserEvents(e,d({global:true,multiTouch:true,fastTap:true},t))}});var D=N.extend({handlerMap:{showTooltip:"_showTooltip",hideTooltip:"_hideTooltip",legendItemClick:"_onLegendItemClick",render:"_onRender",init:"_onInit"}});var A=r.extend({init:function(e,t){var i;h.destroy(e);r.fn.init.call(this,e);if(t){i=t.dataSource;delete t.dataSource}this.options=d({},this.options,t);this.wrapper=this.element;this._attachEvents();if(t){t.dataSource=i}this._seriesVisibility=new ke;this.bind(this.events,this.options);this._initDataSource(t);h.notify(this,s.ui)},events:[k,q,$,K,Y,U,g,j,G,Q,X,Z,J,ie,ee,te,ne,re,ae,oe,se,le,de,ue,ce,_],options:{name:"Chart",renderAs:"",theme:"default",axisDefaults:{},chartArea:{},legend:{},categoryAxis:{},autoBind:true,seriesDefaults:{},series:[],seriesColors:null,tooltip:{},transitions:true,valueAxis:{},plotArea:{},title:{},xAxis:{},yAxis:{},panes:[{}],pannable:false,zoomable:false},items:function(){return f()},refresh:function(){var e=this;var t=e._instance;t.applyDefaults(e.options);t.applySeriesColors();e._bindSeries();e._bindCategories();e.trigger(k);e._redraw()},getSize:function(){return h.dimensions(this.element)},redraw:function(e){this._size=null;this._instance.redraw(e)},setOptions:function(e){var t=this,i=e.dataSource;delete e.dataSource;r.fn._setEvents.call(t,e);this._instance.applyOptions(e,this._getThemeOptions(e));this.options=this._instance.options;this._tooltip.setOptions(this.options.tooltip);this._seriesVisibility.setOptions(this.options);this._sourceSeries=null;if(i){t.setDataSource(i)}if(t._hasDataSource){t._onDataChanged()}else{t._bindCategories();t.redraw()}t._instance.updateMouseMoveHandler()},setDataSource:function(e){var t=this;t.dataSource.unbind(w,t._dataChangeHandler);t.dataSource=e=a.create(e);t._hasDataSource=true;t._hasData=false;e.bind(w,t._dataChangeHandler);if(t.options.autoBind){e.fetch()}},destroy:function(){var e=this,t=e.dataSource;e.element.off(n);if(t){t.unbind(w,e._dataChangeHandler)}if(e._instance){e._instance.destroy();delete this._instance}if(this._tooltip){this._tooltip.destroy();delete this._tooltip}this._destroyCrosshairTooltips();r.fn.destroy.call(e)},findPaneByName:function(e){var t=this._plotArea.panes;for(var i=0;i<t.length;i++){if(t[i].options.name===e){return new P(this,t[i])}}},findPaneByIndex:function(e){var t=this._plotArea.panes;if(t[e]){return new P(this,t[e])}},findSeries:function(e){var t=this._plotArea;var i=t.srcSeries||t.series;for(var n=0;n<i.length;n++){if(e(i[n])){return new z(this,i[n])}}},findSeriesByName:function(e){return this._createSeries({name:e})},findSeriesByIndex:function(e){return this._createSeries({index:e})},exportVisual:function(e){var t=this._instance;if(!t){return}var i;if(e&&(e.width||e.height)){var n=t.options.chartArea;var r=t._originalOptions.chartArea;d(n,e);var a=t._getModel();n.width=r.width;n.height=r.height;a.renderVisual();xe(a._plotArea.panes);i=a.visual}else{i=t.exportVisual()}return i},_createSeries:function(e){var t=this._seriesOptions(e);if(t){return new z(this,t)}},_seriesOptions:function(e){var t=this._plotArea;var i=t.srcSeries||t.series;var n;if(u(e.index)){n=i[e.index]}else if(u(e.name)){for(var r=0;r<i.length;r++){if(i[r].name===e.name){n=i[r];break}}}return n},_attachEvents:function(){this.element.on(i,o(this._mouseleave,this))},_mouseleave:function(e){var t=this._instance;var i=this._tooltip;var n=e.relatedTarget;if(!(n&&f(n).closest(i.element).length)&&t&&!t.handlingTap){t.hideElements({keepTooltipOpen:!i.options.autoHide})}},_getThemeOptions:function(e){var t=(e||{}).theme;if(t&&s.SASS_THEMES.indexOf(t.toLowerCase())!==-1){return s.autoTheme().chart}if(u(t)){var i=s.ui.themes||{};var n=i[t]||i[t.toLowerCase()]||{};return n.chart||{}}},_initChart:function(){this._createChart(this.options,this._getThemeOptions(this.options));this.options=this._instance.options;this._seriesVisibility.setOptions(this.options)},_createChart:function(e,t){this._instance=new B(this.element[0],e,t,{observer:new D(this),sender:this,rtl:this._isRtl()})},_onInit:function(e){this._instance=e.sender},_initDataSource:function(e){var t=this,i=(e||{}).dataSource;t._dataChangeHandler=o(t._onDataChanged,t);t.dataSource=a.create(i).bind("change",t._dataChangeHandler);t._bindCategories();if(i){t._hasDataSource=true}this._initChart();this._initTooltip();if(i){if(t.options.autoBind){t.dataSource.fetch()}}},_destroyCrosshairTooltips:function(){var e=this._crosshairTooltips;if(e){for(var t in e){e[t].destroy()}}this._crosshairTooltips={}},_getCrosshairTooltip:function(e,t){var i=this._crosshairTooltips=this._crosshairTooltips||{};var n=e+t;var r=i[n];if(!r){r=i[n]=new F(this.element)}return r},_showTooltip:function(e){if(e.crosshair){var t=this._getCrosshairTooltip(e.axisName,e.axisIndex);t.show(e)}else if(this._tooltip){this._tooltip.show(e)}},_hideTooltip:function(e){if(e.crosshair){var t=this._getCrosshairTooltip(e.axisName,e.axisIndex);t.hide()}else if(this._tooltip){this._tooltip.hide()}},_onRender:function(e){this._destroyCrosshairTooltips();this._copyMembers(e.sender);if(!this._hasDataSource||this._hasData||!this.options.autoBind){this.trigger(_)}},_copyMembers:function(e){this.options=e.options;this._originalOptions=e._originalOptions;this.surface=e.surface;this._plotArea=e._plotArea;this._model=e._model;this._highlight=e._highlight;this._selections=e._selections;this._pannable=e._pannable;this._zoomSelection=e._zoomSelection;this._mousewheelZoom=e._mousewheelZoom},requiresHandlers:function(e){var t=this._events;for(var i=0;i<e.length;i++){if(u(t[e[i]])){return true}}},_initTooltip:function(){this._tooltip=this._createTooltip();this._tooltip.bind(y,o(this._tooltipleave,this))},_onLegendItemClick:function(e){if(!this.trigger(g,e)){this._legendItemClick(e.seriesIndex,e.pointIndex)}},_legendItemClick:function(e,t){var i=this._instance,n=i._plotArea,r=(n.srcSeries||n.series)[e];if(i._hasInactiveOpacity()&&i._activChartInstance){i._updateSeriesOpacity(null,true);i._applySeriesOpacity(i._activChartInstance.children,null,true);i._activChartInstance=null}if(f.inArray(r.type,[x,C,S])>=0){var a=r.data[t];if(a&&u(a.visible)){a.visible=!a.visible}else{var o=r.pointVisibility=r.pointVisibility||{};var s=o[t];o[t]=u(s)?!s:false}}else{r.visible=!r.visible;this._seriesVisibility.save(r)}i._noTransitionsRedraw()},_createTooltip:function(){return new R(this.element,m({},this.options.tooltip,{rtl:this._isRtl()}))},_tooltipleave:function(){if(this._instance){this._instance.hideElements()}},_bindData:function(e){var t=this,i=t.options,n=t._sourceSeries||i.series,r,a=n.length,o=t.dataSource.view(),s=(t.dataSource.group()||[]).length>0,l=[],d=this._seriesVisibility,u,c;d.read();for(r=0;r<a;r++){u=n[r];if(t._isBindable(u)&&s){c=we(u,o);l=l.concat(c);d.applyByGroup(c,e)}else{u=m({},u);l.push(u);d.applyByIndex(u,e)}}t._sourceSeries=n;i.series=l;this._instance.applySeriesColors();t._bindSeries();t._bindCategories();this._hasData=true},_onDataChanged:function(e){this._bindData(e);this.trigger(k);if(this._instance&&this._instance.fontLoaded){this._redraw()}},_bindSeries:function(){var e=this,t=e.dataSource.view(),i=e.options.series,n,r=i.length,a,o,s;for(n=0;n<r;n++){a=i[n];if(e._isBindable(a)){o=a._groupIx;s=u(o)?(t[o]||{}).items:t;if(a.autoBind!==false){a.data=s}}}},_bindCategories:function(){var e=this,t=e.dataSource.view()||[],i=(e.dataSource.group()||[]).length>0,n=t,r=e.options,a=[].concat(r.categoryAxis),o,s;if(i){if(t.length){n=t[0].items}}for(o=0;o<a.length;o++){s=a[o];if(s.autoBind!==false){e._bindCategoryAxis(s,n,o)}}},_bindCategoryAxis:function(e,t,i){var n=(t||[]).length,r,a,o;if(e.field){e.categories=[];for(r=0;r<n;r++){o=t[r];a=H(e.field,o);if(r===0){e.categories=[a];e.dataItems=[o]}else{e.categories.push(a);e.dataItems.push(o)}}}else if(this._instance){this._instance.bindCategoryAxisFromSeries(e,i)}},_isBindable:function(e){var t=L.current.valueFields(e),i=true,n,r;for(r=0;r<t.length;r++){n=t[r];if(n===he){n="field"}else{n=n+"Field"}if(!u(e[n])){i=false;break}}return i},_isRtl:function(){return h.support.isRtl(this.element)&&this.element.css("direction")===_e}});var E=["getAxis","findAxisByName","plotArea","toggleHighlight","showTooltip","hideTooltip","_resize","_redraw","_noTransitionsRedraw","_legendItemHover","_eventCoordinates"];function be(t){A.fn[t]=function(){var e=this._instance;if(e){return e[t].apply(e,arguments)}}}for(var I=0;I<E.length;I++){be(E[I])}function we(e,t){var i=[],n,r=e.groupNameTemplate,a,o=t.length,s;if(o===0){s=d({},e);s.visibleInLegend=false;return[s]}if(u(r)){h.logToConsole("'groupNameTemplate' is obsolete and will be removed in future versions. "+"Specify the group name template as 'series.name'");if(r){n=c(r)}}else{n=c(e.name||"");if(n._slotCount===0){n=c(u(e.name)?"#= group.value #: #= series.name #":"#= group.value #")}}for(a=0;a<o;a++){s=d({},e);if(!h.isFunction(s.color)){s.color=l}s._groupIx=a;s._groupValue=t[a].value;i.push(s);if(n){s.name=n({series:s,group:t[a]})}}return i}s.ExportMixin.extend(A.fn);if(h.PDFMixin){h.PDFMixin.extend(A.fn)}s.ui.plugin(A);var ke=e.extend({init:function(){this.groups={};this.index={};this.options={}},applyByGroup:function(e,t){if(t&&t.action||this.options.persistSeriesVisibility){for(var i=0;i<e.length;i++){if(this.groups[e[i]._groupValue]===false){e[i].visible=false}}}else{this.groups={}}},applyByIndex:function(e,t){if(t&&t.action||this.options.persistSeriesVisibility){if(this.index[e.index]===false){e.visible=false}}else{this.index={}}},save:function(e){if(!e){return}if(this.options.persistSeriesVisibility){this.options.series[e.index].visible=e.visible}else{this.saveState(e)}},setOptions:function(e){this.options=e;this.groups={};this.index={}},read:function(){var e=this.options;if(e.persistSeriesVisibility){var t=e.series;for(var i=0;i<t.length;i++){this.saveState(t[i])}}},saveState:function(e){if(u(e._groupValue)){this.groups[e._groupValue]=e.visible}else{this.index[e.index]=e.visible}}});var M=h.geometry;function ye(e){for(var t in e){if(e[t]===l){e[t]=""}}return e}var R=T.extend({init:function(e,t){var i=this;T.fn.init.call(i);this.setOptions(t);i.chartElement=e;i.template=R.template;if(!i.template){i.template=R.template=h.template('<div class=\'k-tooltip #if (!d.autoHide) {# k-tooltip-closable#}# k-chart-tooltip#= d.rtl ? " k-rtl" : ""#\' '+"style='display:none; position: absolute; font: #= d.font #;"+"#if (d.border) {# border: #= d.border.width #px solid; #}#"+"opacity: #= d.opacity #; filter: alpha(opacity=#= d.opacity * 100 #);'>"+'<div class="k-tooltip-content"></div>'+'#if (!d.autoHide) {# <div class="k-tooltip-button"><a href="\\#" class="k-icon k-i-close" title="Close"></a></div> #}#'+"</div>",{useWithBlock:false,paramName:"d"})}i.element=f(i.template(i.options));i.move=o(i.move,i);i._mouseleave=o(i._mouseleave,i);var n=h.format("[{0}='content'],[{0}='scroller']",h.attr("role"));i._mobileScroller=e.closest(n).data("kendoMobileScroller");i.downEvent=h.applyEventMap(fe,h.guid());i._closeTooltipHandler=o(i._closeTooltip,i)},destroy:function(){var e=this;this._clearShowTimeout();b.off(e.downEvent,e._closeTooltipHandler);if(this.element){this.element.off(i).remove();this.element=null}},setOptions:function(e){this.options=d({},this.options,e)},options:{opacity:1,animation:{duration:pe},sharedTemplate:"<table>"+"<th colspan='#= colspan #'>#= categoryText #</th>"+"# for(var i = 0; i < points.length; i++) { #"+"# var point = points[i]; #"+"<tr>"+"# if(colorMarker) { # "+"<td><span class='k-chart-shared-tooltip-marker' style='background-color:#:point.series.color#'></span></td>"+"# } #"+"# if(nameColumn) { # "+"<td> #if (point.series.name) {# #: point.series.name #: #} else {# &nbsp; #}#</td>"+"# } #"+"<td>#= content(point) #</td>"+"</tr>"+"# } #"+"</table>",categoryFormat:"{0:d}",autoHide:true},move:function(){var e=this,t=e.options,i=e.element,n;if(!e.anchor||!e.element){return}n=e._offset();if(!e.visible){i.css({top:n.top,left:n.left})}e.visible=true;e._ensureElement(document.body);i.stop(true,true).show().animate({left:n.left,top:n.top},t.animation.duration)},_clearShowTimeout:function(){if(this.showTimeout){clearTimeout(this.showTimeout);this.showTimeout=null}},getAnchor:function(e){var t=this.anchor;var i=t.point;var n=t.align;var r=i.left;var a=i.top;if(n.horizontal==="center"){r-=e.width/2}else if(n.horizontal==="right"){r-=e.width}if(n.vertical==="center"){a-=e.height/2}else if(n.vertical==="bottom"){a-=e.height}return{x:r,y:a}},_offset:function(){var e=this,t=e._measure(),i=e.getAnchor(t),n=i.y,r=i.x,a=h.support.zoomLevel(),o=f(window),s=window.pageYOffset||document.documentElement.scrollTop||0,l=window.pageXOffset||document.documentElement.scrollLeft||0,d=(this._mobileScroller||{}).movable;if(!d||d.scale===1){n+=e._fit(n-s,t.height,v(o)/a);r+=e._fit(r-l,t.width,p(o)/a)}else{var u=M.transform().scale(d.scale,d.scale,[d.x,d.y]);var c=new M.Point(r,n).transform(u);r=c.x;n=c.y}return{top:n,left:r}},show:function(e){var t=this;this.anchor=e.anchor;this.element.css(ye(e.style));this.element.toggleClass(me,!!e.className);this.element.toggleClass(ge,!!e.shared);var i=e.shared?this._sharedContent(e):this._pointContent(e.point);this.element.find(".k-tooltip-content").html(i);if(!t.options.autoHide){t.element.off("click"+n).on("click"+n,".k-tooltip-button",t._closeTooltipHandler);b.off(t.downEvent,t._closeTooltipHandler).on(t.downEvent,t._closeTooltipHandler)}this._clearShowTimeout();this.showTimeout=setTimeout(this.move,ve)},hide:function(e){var t=this;if(!t.options.autoHide&&!e){return}clearTimeout(t.showTimeout);t._hideElement();if(t.visible){t.point=null;t.visible=false;t.index=null;b.off(t.downEvent,t._closeTooltipHandler)}},_closeTooltip:function(e){var t=f(e.target);if(!t.is(".k-chart-tooltip, .k-tooltip-content")){e.preventDefault();this.chartElement.data("kendoChart")._instance.hideElements();this.hide(true)}},_sharedContent:function(e){var t=e.points;var i=s.grep(t,function(e){return u(e.series.name)}).length;var n=e.series.length>1;var r=1;if(i){r++}if(n){r++}var a=h.template(this.options.sharedTemplate);var o=a({points:t,category:e.category,categoryText:e.categoryText,content:this._pointContent,colorMarker:n,nameColumn:i,colspan:r});return o},_measure:function(){this._ensureElement();var e={width:p(this.element),height:v(this.element)};return e},_ensureElement:function(){if(this.element){this.element.appendTo(document.body).on(i,this._mouseleave)}},_mouseleave:function(e){var t=e.relatedTarget;var i=this.chartElement[0];if(t&&t!==i&&!f.contains(i,t)){this.trigger(y)}},_hideElement:function(){var e=this;var t=this.element;if(t){t.fadeOut({always:function(){if(!e.visible){t.off(i).remove()}}})}},_pointContent:function(e){var t=this,i=d({},t.options,e.options.tooltip),n,r;if(u(e.value)){n=e.value.toString()}if(i.template){r=c(i.template);n=r({value:e.value,category:e.category,series:e.series,dataItem:e.dataItem,percentage:e.percentage,runningTotal:e.runningTotal,total:e.total,low:e.low,high:e.high,xLow:e.xLow,xHigh:e.xHigh,yLow:e.yLow,yHigh:e.yHigh})}else if(i.format){n=e.formatValue(i.format)}return n},_fit:function(e,t,i){var n=0;if(e+t>i){n=i-(e+t)}if(e<0){n=-e}return n}});var F=R.extend({init:function(e,t){R.fn.init.call(this,e,t);this.element.addClass("k-chart-crosshair-tooltip")},show:function(e){var t=this.element;if(t){this.anchor=e.anchor;this.element.css(e.style);this.element.html(this.content(e));this.move()}},move:function(){var e=this,t=e.element,i=e._offset();e._ensureElement();t.css({top:i.top,left:i.left}).show()},content:function(e){var t=e.value,i=e.crosshair.options.tooltip;if(i.template){t=c(i.template)({value:t})}return t},hide:function(){this.element.hide()}});var P=e.extend({init:function(e,t){this._chart=e;this._pane=t;this.visual=t.visual;this.chartsVisual=t.chartContainer.visual;this.name=t.options.name},series:function(){var e=this._chart;var t=e._plotArea.groupSeriesByPane();var i=t[this.name||"default"];var n=[];if(i){for(var r=0;r<i.length;r++){n.push(new z(e,i[r]))}}return n}});var z=e.extend({init:function(e,t){this._chart=e;this._options=t},points:function(e){var t=this._points;if(!t){var i=this._seriesOptions();var n=this._chart._plotArea;this._points=t=n.pointsBySeriesIndex(i.index)}if(h.isFunction(e)){t=this._filterPoints(t,e)}return t},data:function(e){var t=this._seriesOptions();if(e){var i=this._chart;var n=i._plotArea;t.data=e;if(t.categoryField){var r=n.seriesCategoryAxis(t);var a=[].concat(i.options.categoryAxis);i._instance.bindCategoryAxisFromSeries(a[r.axisIndex],r.axisIndex)}i._noTransitionsRedraw();this._clearFields()}return t.data},findPoint:function(e){var t=this.points();for(var i=0;i<t.length;i++){if(e(t[i])){return t[i]}}},toggleHighlight:function(e,t){if(!t){t=this.points()}else if(h.isFunction(t)){t=this.points(t)}else{t=W(t)?t:[t]}this._chart._instance.togglePointsHighlight(e,t)},toggleVisibility:function(t,i){var e=this._chart;var n=this._seriesOptions();var r=h.isFunction(i);if(!r){n.visible=t;e._seriesVisibility.save(n)}else{if(O(n.type,[x,C,S])){var a=this._filterData(i);for(var o=0;o<a.length;o++){a[o].visible=t}}else{n.visible=function(e){return i(e.dataItem)?t:true}}}e._noTransitionsRedraw();this._clearFields()},_filterData:function(e){var t=this._seriesOptions().data;var i=t.length;var n=[];for(var r=0;r<i;r++){if(e(t[r])){n.push(t[r])}}return n},_filterPoints:function(e,t){var i=[];var n=e.length;for(var r=0;r<n;r++){if(t(e[r])){i.push(e[r])}}return i},_seriesOptions:function(){var e=this._series;if(!e){e=this._series=this._chart._seriesOptions(this._options)}return e},_clearFields:function(){delete this._points;delete this._series}});function xe(e){for(var t=0;t<e.length;t++){e[t].notifyRender()}}s.Tooltip=R;s.CrosshairTooltip=F;s.ChartInstanceObserver=D;s.ChartPane=P;s.ChartSeries=z})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.dataviz.chart",["dataviz/chart/kendo-chart","dataviz/chart/chart"],e)})(function(){var e={id:"dataviz.chart",name:"Chart",category:"dataviz",description:"The Chart widget uses modern browser technologies to render high-quality data visualizations in the browser.",depends:["data","userevents","drawing","dataviz.core","dataviz.themes"],features:[{id:"dataviz.chart-pdf-export",name:"PDF export",description:"Export Chart as PDF",depends:["pdf"]}]};return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("dataviz/gauge/kendo-gauges",["kendo.core","kendo.color","kendo.drawing","kendo.dataviz.core"],e)})(function(){(function(B){window.kendo.dataviz=window.kendo.dataviz||{};var h=kendo.dataviz;var p=h.getSpacing;var D=h.defined;var _=h.constants;var e=_.BLACK;var v=_.COORD_PRECISION;var L=h.services;var s=h.deepExtend;var l=h.isArray;var t=h.setDefaultOptions;var n=h.NumericAxis;var o=h.limitValue;var A=h.Box;var d=h.interpolateValue;var m=h.round;var i=kendo.drawing;var r=i.Group;var a=i.Path;var u=i.Animation;var c=i.AnimationFactory;var f=kendo.geometry;var E=f.Rect;var I=f.Point;var M=f.transform;var g=150;var H=250;var N="arrow";var O="arrowPointer";var b="barPointer";var V=200;var w=.5;var W=200;var U=Math.PI/180;var R="inside";var k="linear";var j="outside";var G="radialPointer";var q="radialRangePointer";function $(e,t){var i=e.getOrigin();var n=e.getSize();var r=p(t);e.setOrigin([i.x-r.left,i.y-r.top]);e.setSize([n.width+(r.left+r.right),n.height+(r.top+r.bottom)]);return e}var K=r;var Y=a;var Q=i.Text;function X(e,t){var i=e.box;var n=e.children[0].box;var r=t.border||{};var a=t.background||"";var o=Y.fromRect(new E([i.x1,i.y1],[i.width(),i.height()]),{stroke:{}});var s=new Q(e.text,new I(n.x1,n.y1),{font:t.font,fill:{color:t.color}});var l=$(s.bbox().clone(),t.padding);var d=Y.fromRect(l,{stroke:{color:r.width?r.color:"",width:r.width,opacity:r.opacity,dashType:r.dashType,lineJoin:"round",lineCap:"round"},fill:{color:a}});var u=new K;u.append(o);u.append(d);u.append(s);return u}function Z(e,t,i){var n=D(e.from)?e.from:_.MIN_VALUE;var r=D(e.to)?e.to:_.MAX_VALUE;e.from=Math.max(Math.min(r,n),t);e.to=Math.min(Math.max(r,n),i);return e}function J(e,t){var i=p(t);i.left=-i.left;i.top=-i.top;i.right=-i.right;i.bottom=-i.bottom;return $(e,i)}var ee=5;var te=a;var ie=i.Surface;var y=h.Class.extend({init:function(e,t,i,n){if(n===void 0){n={}}this.element=e;this.theme=i;this.contextService=new L.ChartService(this,n);this._originalOptions=s({},this.options,t);this.options=s({},this._originalOptions);this._initTheme(i);this.redraw()},destroy:function(){if(this.surface){this.surface.destroy();this.surface=null}delete this.element;delete this.surfaceElement},value:function(e){var t=this.pointers[0];if(arguments.length===0){return t.value()}t.value(e);this._setValueOptions(e)},_draw:function(){var e=this.surface;e.clear();e.draw(this._visuals)},exportVisual:function(){return this._visuals},allValues:function(e){var t=this.pointers;var i=[];if(arguments.length===0){for(var n=0;n<t.length;n++){i.push(t[n].value())}return i}if(l(e)){for(var r=0;r<e.length;r++){if(h.isNumber(e[r])){t[r].value(e[r])}}}this._setValueOptions(e)},_setValueOptions:function(e){var t=[].concat(this.options.pointer);var i=[].concat(e);for(var n=0;n<i.length;n++){t[n].value=i[n]}},resize:function(){this.noTransitionsRedraw()},noTransitionsRedraw:function(){var e=this.options.transitions;this._toggleTransitions(false);this.redraw();this._toggleTransitions(e)},redraw:function(){var e=this._surfaceSize();var t=new E([0,0],[e.width,e.height]);this._initSurface();this.gaugeArea=this._createGaugeArea();this._createModel();var i=J(t.bbox(),this._gaugeAreaMargin);this.reflow(i)},setOptions:function(e,t){this._originalOptions=s(this._originalOptions,e);this.options=s({},this._originalOptions);this._initTheme(t);this.redraw()},setDirection:function(e){this.contextService.rtl=Boolean(e);if(this.surface&&this.surface.type==="svg"){this.surface.destroy();this.surface=null}},setIntlService:function(e){this.contextService.intl=e},_initTheme:function(e){var t=e||this.theme||{};this.theme=t;this.options=s({},t,this.options);var i=this.options;var n=i.pointer;if(l(n)){var r=[];for(var a=0;a<n.length;a++){r.push(s({},t.pointer,n[a]))}i.pointer=r}},_createGaugeArea:function(){var e=this.options.gaugeArea;var t=this.surface.size();var i=e.border||{};var n=new E([0,0],[t.width,t.height]);this._gaugeAreaMargin=e.margin||ee;if(i.width>0){n=J(n,i.width)}var r=te.fromRect(n,{stroke:{color:i.width?i.color:"",width:i.width,dashType:i.dashType,lineJoin:"round",lineCap:"round"},fill:{color:e.background}});return r},_initSurface:function(){var e=this;var t=e.options;var i=e.surface;var n=this._surfaceElement();var r=this._surfaceSize();h.elementSize(n,r);if(!i||i.options.type!==t.renderAs){if(i){i.destroy()}this.surface=ie.create(n,{type:t.renderAs})}else{this.surface.clear();this.surface.resize()}},_surfaceSize:function(){var e=this.options;var t=this._getSize();if(e.gaugeArea){s(t,e.gaugeArea)}return t},_surfaceElement:function(){if(!this.surfaceElement){this.surfaceElement=document.createElement("div");this.element.appendChild(this.surfaceElement)}return this.surfaceElement},getSize:function(){return this._getSize()},_getSize:function(){var e=this.element;var t=this._defaultSize();var i=e.offsetWidth;var n=e.offsetHeight;if(!i){i=t.width}if(!n){n=t.height}return{width:i,height:n}},_defaultSize:function(){return{width:W,height:V}},_toggleTransitions:function(e){var t=this;this.options.transitions=e;for(var i=0;i<this.pointers.length;i++){t.pointers[i].options.animation.transitions=e}}});t(y,{plotArea:{},theme:"default",renderAs:"",pointer:{},scale:{},gaugeArea:{}});var ne=a;var x=r;var C=I;function re(e,t){var i=e.position;var n=e.tickX;var r=e.tickY;var a,o;if(e.vertical){a=new C(n,i);o=new C(n+t.size,i)}else{a=new C(i,r);o=new C(i,r+t.size)}var s=new ne({stroke:{color:t.color,width:t.width}}).moveTo(a).lineTo(o);return s}function ae(e,t,i,n){var r=t.length;if(n.visible){var a=i.mirror;var o=i.lineBox;for(var s=n.skip;s<r;s+=n.step){if(s%n.skipUnit===0){continue}i.tickX=a?o.x2:o.x2-n.size;i.tickY=a?o.y1-n.size:o.y1;i.position=t[s];e.append(re(i,n))}}}var oe=n.extend({init:function(e,t){var i=e||{};if(!D(i.reverse)&&i.vertical===false&&(t||{}).rtl){i=B.extend({},i,{reverse:true})}n.fn.init.call(this,0,1,i,t);this.options.minorUnit=this.options.minorUnit||this.options.majorUnit/10},initUserOptions:function(e){var t=s({},this.options,e);t=s({},t,{labels:{mirror:t.mirror}});t.majorUnit=t.majorUnit||h.autoMajorUnit(t.min,t.max);return t},initFields:function(){},render:function(){var e=this.elements=new x;var t=this.renderLabels();var i=this.renderLine();var n=this.renderTicks();var r=this.renderRanges();e.append(i,t,n,r);return e},renderRanges:function(){var e=this;var t=this.options;var i=t.min;var n=t.max;var r=t.vertical;var a=t.labels.mirror;var o=t.ranges||[];var s=new x;var l=o.length;var d=t.rangeSize||t.minorTicks.size/2;for(var u=0;u<l;u++){var c=Z(o[u],i,n);var f=e.getSlot(c.from,c.to);var h=r?e.lineBox():f;var p=r?f:e.lineBox();if(r){h.x1-=d*(a?-1:1)}else{p.y2+=d*(a?-1:1)}s.append(ne.fromRect(new E([h.x1,p.y1],[h.x2-h.x1,p.y2-p.y1]),{fill:{color:c.color,opacity:c.opacity},stroke:{}}))}return s},renderLabels:function(){var e=this;var t=e.labels;var i=e.options;var n=new x;for(var r=0;r<t.length;r++){n.append(X(t[r],i.labels))}return n},renderLine:function(){var e=this.options.line;var t=this.lineBox();var i=new x;if(e.width>0&&e.visible){var n=new ne({stroke:{color:e.color,dashType:e.dashType,width:e.width}});n.moveTo(t.x1,t.y1).lineTo(t.x2,t.y2);i.append(n)}return i},renderTicks:function(){var e=new x;var t=this.options;var i=t.majorTicks.visible?t.majorUnit:0;var n={vertical:t.vertical,mirror:t.labels.mirror,lineBox:this.lineBox()};ae(e,this.getMajorTickPositions(),n,t.majorTicks);ae(e,this.getMinorTickPositions(),n,s({},{skipUnit:i/t.minorUnit},t.minorTicks));return e}});t(oe,{min:0,max:50,majorTicks:{size:15,align:R,color:e,width:w,visible:true},minorTicks:{size:10,align:R,color:e,width:w,visible:true},line:{width:w},labels:{position:R,padding:2},mirror:false,_alignLines:false});var S=h.Class.extend({init:function(e,t){var i=e.options;var n=i.min;var r=i.max;var a=this.options=s({},this.options,t);a.fill=a.color;this.scale=e;if(D(a.value)){a.value=o(a.value,n,r)}else{a.value=n}},value:function(e){var t=this.options;var i=t.value;if(arguments.length===0){return i}var n=this.scale.options;var r=n.min;var a=n.max;t._oldValue=D(t._oldValue)?t.value:r;t.value=o(e,r,a);if(this.elements){this.repaint()}}});t(S,{color:e});var T=S.extend({init:function(e,t){S.fn.init.call(this,e,t);this.options=s({track:{visible:D(t.track)}},this.options)},reflow:function(){var e=this;var t=e.options;var i=e.scale;var n=i.options;var r=n.mirror;var a=n.vertical;var o=i.lineBox();var s=t.track.size||t.size;var l=t.size/2;var d=p(t.margin);var u=a?d[r?"left":"right"]:d[r?"bottom":"top"];var c,f,h;u=r?-u:u;if(a){h=new A(o.x1+u,o.y1,o.x1+u,o.y2);if(r){h.x1-=s}else{h.x2+=s}if(t.shape!==b){f=new A(o.x2+u,o.y1-l,o.x2+u,o.y2+l);c=f}}else{h=new A(o.x1,o.y1-u,o.x2,o.y1-u);if(r){h.y2+=s}else{h.y1-=s}if(t.shape!==b){f=new A(o.x1-l,o.y1-u,o.x2+l,o.y1-u);c=f}}this.trackBox=h;this.pointerRangeBox=f;this.box=c||h.clone().pad(t.border.width)},getElementOptions:function(){var e=this.options;return{fill:{color:e.color,opacity:e.opacity},stroke:D(e.border)?{color:e.border.width?e.border.color||e.color:"",width:e.border.width,dashType:e.border.dashType,opacity:e.opacity}:null}},_margin:function(){var e=this;var t=e.scale;var i=e.options;var n=t.options;var r=n.mirror;var a=n.vertical;var o=p(i.margin);var s=a?o[r?"left":"right"]:o[r?"bottom":"top"];return s}});t(T,{shape:b,track:{border:{width:1}},color:e,border:{width:1},opacity:1,margin:p(3),animation:{type:b},visible:true});var se=u.extend({setup:function(){var e=this.options;var t=e.margin;var i=e.from;var n=e.to;var r=e.vertical;var a=r?"x1":"y1";if(e.mirror===r){i[a]-=t;n[a]-=t}else{i[a]+=t;n[a]+=t}var o=this.fromScale=new I(i.x1,i.y1);var s=this.toScale=new I(n.x1,n.y1);if(e.duration!==0){e.duration=Math.max(o.distanceTo(s)/e.duration*1e3,1)}},step:function(e){var t=d(this.fromScale.x,this.toScale.x,e);var i=d(this.fromScale.y,this.toScale.y,e);this.element.transform(M().translate(t,i))}});t(se,{easing:k,duration:H});c.current.register(O,se);var F=I;var le=a;var de=T.extend({init:function(e,t){T.fn.init.call(this,e,t);if(!D(this.options.size)){this.options.size=this.scale.options.majorTicks.size*.6}},pointerShape:function(){var e=this;var t=e.scale;var i=e.options.size;var n=i/2;var r=t.options.mirror?-1:1;var a;if(t.options.vertical){a=[new F(0,0-n),new F(0-r*i,0),new F(0,0+n)]}else{a=[new F(0-n,0),new F(0,0+r*i),new F(0+n,0)]}return a},repaint:function(){var e=this;var t=e.scale;var i=e.options;var n=new se(this.elements,s(i.animation,{vertical:t.options.vertical,mirror:t.options.mirror,margin:this._margin(i.margin),from:t.getSlot(i._oldValue),to:t.getSlot(i.value)}));if(i.animation.transitions===false){n.options.duration=0}n.setup();n.play()},render:function(){var e=this;var t=e.scale;var i=e.options;var n=this.getElementOptions();var r=this.pointerShape(i.value);i.animation.type=O;var a=new le({stroke:n.stroke,fill:n.fill}).moveTo(r[0]).lineTo(r[1]).lineTo(r[2]).close();var o=t.getSlot(i.value);a.transform(M().translate(o.x1,o.y1));this.elements=a;return a}});var ue=u.extend({setup:function(){var e=this.options;var t=this.axis=e.vertical?_.Y:_.X;var i=this.to=e.newPoints[0][t];var n=this.from=e.oldPoints[0][t];if(e.duration!==0){e.duration=Math.max(Math.abs(i-n)/e.speed*1e3,1)}this._set(n)},step:function(e){var t=d(this.from,this.to,e);this._set(t)},_set:function(e){var t="set"+this.axis.toUpperCase();var i=this.options.newPoints;i[0][t](e);i[1][t](e)}});t(ue,{easing:k,speed:H});c.current.register(b,ue);var ce=r;var fe=a;var he=T.extend({init:function(e,t){T.fn.init.call(this,e,t);if(!D(this.options.size)){this.options.size=this.scale.options.majorTicks.size*.3}},pointerShape:function(e){var t=this;var i=t.scale;var n=t.options;var r=i.options;var a=r.mirror;var o=r.vertical;var s=a===o?-1:1;var l=n.size*s;var d=i.getSlot(i.options.min);var u=i.getSlot(e);var c=o?_.Y:_.X;var f=o?_.X:_.Y;var h=this._margin()*s;var p=new I;p[c]=d[c+"1"];p[f]=d[f+"1"];var v=new I;v[c]=u[c+"1"];v[f]=u[f+"1"];if(o){p.translate(h,0);v.translate(h,0)}else{p.translate(0,h);v.translate(0,h)}var m=v.clone();var g=p.clone();if(o){m.translate(l,0);g.translate(l,0)}else{m.translate(0,l);g.translate(0,l)}return[p,v,m,g]},repaint:function(){var e=this;var t=e.scale;var i=e.options;var n=this.pointerShape(i.value);var r=this.pointerPath;var a=this.pointerShape(i._oldValue);r.moveTo(n[0]).lineTo(n[1]).lineTo(n[2]).lineTo(n[3]).close();var o=new ue(r,s(i.animation,{reverse:t.options.reverse,vertical:t.options.vertical,oldPoints:[a[1],a[2]],newPoints:[n[1],n[2]]}));if(i.animation.transitions===false){o.options.duration=0}o.setup();o.play()},render:function(){var e=new ce;var t=this.getElementOptions();if(this.options.track.visible){e.append(this.renderTrack())}var i=this.pointerPath=new fe({stroke:t.stroke,fill:t.fill});e.append(i);this.elements=e;return e},renderTrack:function(){var e=this.options.track;var t=e.border||{};var i=this.trackBox.clone().pad(t.width||0);return new fe.fromRect(i.toRect(),{fill:{color:e.color,opacity:e.opacity},stroke:{color:t.width?t.color||e.color:"",width:t.width,dashType:t.dashType}})}});var pe=60;var ve=60;var me=r;var ge=y.extend({reflow:function(e){var t=this.pointers;var i=e.origin.x;var n=e.origin.y;var r=new A(i,n,i+e.width(),n+e.height());this.scale.reflow(r);this._shrinkScaleWidth(r);for(var a=0;a<t.length;a++){t[a].reflow()}this.bbox=this._getBox(r);this._alignElements();this._shrinkElements();this._buildVisual();this._draw()},_buildVisual:function(){var e=new me;var t=this.scale.render();var i=this.pointers;e.append(this.gaugeArea);e.append(t);for(var n=0;n<i.length;n++){var r=i[n];e.append(r.render());r.value(r.options.value)}this._visuals=e},_createModel:function(){var e=this;var t=this.options;var i=this.scale=new oe(t.scale,this.contextService);this.pointers=[];var n=t.pointer;n=l(n)?n:[n];for(var r=0;r<n.length;r++){var a=s({},n[r],{animation:{transitions:t.transitions}});var o=a.shape===N?de:he;e.pointers.push(new o(i,a))}},_defaultSize:function(){var e=this.options.scale.vertical;return{width:e?pe:W,height:e?V:ve}},_getBox:function(e){var t=this;var i=t.scale;var n=t.pointers;var r=e.center();var a=n[0].box.clone().wrap(i.box);for(var o=0;o<n.length;o++){a.wrap(n[o].box.clone())}var s;if(i.options.vertical){s=a.width()/2;a=new A(r.x-s,e.y1,r.x+s,e.y2)}else{s=a.height()/2;a=new A(e.x1,r.y-s,e.x2,r.y+s)}return a},_alignElements:function(){var e=this;var t=this;var i=t.scale;var n=t.pointers;var r=i.box;var a=n[0].box.clone().wrap(i.box);var o=this.bbox;for(var s=0;s<n.length;s++){a.wrap(n[s].box.clone())}var l;if(i.options.vertical){l=o.center().x-a.center().x;i.reflow(new A(r.x1+l,o.y1,r.x2+l,o.y2))}else{l=o.center().y-a.center().y;i.reflow(new A(r.x1,r.y1+l,r.x2,r.y2+l))}for(var d=0;d<n.length;d++){n[d].reflow(e.bbox)}},_shrinkScaleWidth:function(e){var t=this;var i=t.scale;if(!i.options.vertical){var n=i.contentBox().width()-e.width();if(n>0){i.box.shrink(n,0);i.box.alignTo(e,"center");i.reflow(i.box)}}},_shrinkElements:function(){var e=this;var t=this;var i=t.scale;var n=t.pointers;var r=i.box.clone();var a=i.options.vertical?"y":"x";var o=n[0].box;for(var s=0;s<n.length;s++){o.wrap(n[s].box.clone())}r[a+1]+=Math.max(r[a+1]-o[a+1],0);r[a+2]-=Math.max(o[a+2]-r[a+2],0);i.reflow(r);for(var l=0;l<n.length;l++){n[l].reflow(e.bbox)}}});t(ge,{transitions:true,gaugeArea:{background:""},scale:{vertical:true}});var P=180;var _e=i.Arc;var be=a;var z=r;function we(e,t,i,n){var r=new z;var a=e.center;var o=e.getRadiusX();if(n.visible){for(var s=0;s<t.length;s++){var l=e.pointAt(t[s]);var d=new I(a.x+o-n.size,a.y).rotate(t[s],a);r.append(new be({stroke:{color:n.color,width:n.width}}).moveTo(l).lineTo(d))}}return r}function ke(e,t,i,n){return{from:e,to:t,color:i,opacity:n}}var ye=n.extend({init:function(e,t){n.fn.init.call(this,0,1,e,t)},initUserOptions:function(e){var t=s({},this.options,e);t.majorUnit=t.majorUnit||h.autoMajorUnit(t.min,t.max);t.minorUnit=t.minorUnit||t.majorUnit/10;return t},initFields:function(){},render:function(e,t){var i=this.renderArc(e,t);this.bbox=i.bbox();this.labelElements=this.renderLabels();this.ticks=this.renderTicks();this.ranges=this.renderRanges()},reflow:function(e){var t=e.center();var i=Math.min(e.height(),e.width())/2;if(D(this.bbox)){this.bbox=this.arc.bbox();this.radius(this.arc.getRadiusX());this.repositionRanges();this.renderLabels()}else{return this.render(t,i)}},slotAngle:function(e){var t=this.options;var i=t.min;var n=t.max;var r=t.reverse;var a=t.startAngle;var o=t.endAngle;var s=o-a;var l;if(r){l=o-(e-i)/(n-i)*s}else{l=(e-i)/(n-i)*s+a}return l+P},hasRanges:function(){var e=this.options.ranges;return e&&e.length},ticksSize:function(){var e=this.options;var t=e.majorTicks;var i=e.minorTicks;var n=0;if(t.visible){n=t.size}if(i.visible){n=Math.max(i.size,n)}return n},renderLabels:function(){var e=this;var t=this.options;var i=this.arc.clone();var n=i.getRadiusX();var r=this.tickAngles(i,t.majorUnit);var a=t.rangeSize=t.rangeSize||n*.1;var o=new z;var s=n*.05;if(D(t.rangeDistance)){s=t.rangeDistance}else{t.rangeDistance=s}var l=t.labels;var d=l.position===R;var u=D(this.labelElements);if(d){n-=this.ticksSize();if(this.hasRanges()&&!u){n-=a+s}i.setRadiusX(n).setRadiusY(n)}var c=this.labels;var f=c.length;var h=l.padding;for(var p=0;p<f;p++){var v=c[p];var m=v.box.width()/2;var g=v.box.height()/2;var _=r[p];var b=(_-P)*U;var w=i.pointAt(_);var k=w.x+Math.cos(b)*(m+h)*(d?1:-1);var y=w.y+Math.sin(b)*(g+h)*(d?1:-1);v.reflow(new A(k-m,y-g,k+m,y+g));var x=new I(v.box.x1,v.box.y1);var C=void 0;if(!u){C=X(v,t.labels);o.append(C)}else{C=e.labelElements.children[p];var S=C.bbox().origin;var T=C.transform()||M();T.translate(x.x-S.x,x.y-S.y);C.transform(T)}e.bbox=E.union(e.bbox,C.bbox())}return o},repositionRanges:function(){var e=this.ranges.children;if(e.length>0){var t=this.options;var i=t.rangeDistance;var n=t.rangeSize;var r=this.getRangeRadius();if(this.options.labels.position===R){r+=n+i}var a=r+n/2;for(var o=0;o<e.length;o++){e[o]._geometry.setRadiusX(a).setRadiusY(a)}this.bbox=E.union(this.bbox,this.ranges.bbox())}},renderRanges:function(){var e=this;var t=this.rangeSegments();var i=t.length;var n=new z;if(i){var r=this.options;var a=r.rangeSize;var o=r.reverse;var s=r.rangeDistance;var l=this.getRangeRadius();this.radius(this.radius()-a-s);for(var d=0;d<i;d++){var u=t[d];var c=e.slotAngle(u[o?"to":"from"]);var f=e.slotAngle(u[!o?"to":"from"]);if(f-c!==0){n.append(e.createRange(c,f,l,u))}}}return n},createRange:function(e,t,i,n){var r=this.options.rangeSize;var a=new f.Arc(this.arc.center,{radiusX:i+r/2,radiusY:i+r/2,startAngle:e,endAngle:t});return new _e(a,{stroke:{width:r,color:n.color,opacity:n.opacity,lineCap:n.lineCap}})},rangeSegments:function(){var e=this.options;var t=e.ranges||[];var i=t.length;var n=[];if(i){var r=e.min;var a=e.max;var o=e.rangePlaceholderColor;n.push(ke(r,a,o));for(var s=0;s<i;s++){var l=Z(t[s],r,a);var d=n.length;for(var u=0;u<d;u++){var c=n[u];if(c.from<=l.from&&l.from<=c.to){n.push(ke(l.from,l.to,l.color,l.opacity));if(c.from<=l.to&&l.to<=c.to){n.push(ke(l.to,c.to,o,l.opacity))}c.to=l.from;break}}}}return n},getRangeRadius:function(){var e=this;var t=e.arc;var i=e.options;var n=i.rangeSize;var r=i.rangeDistance;var a=i.majorTicks.size;var o;if(i.labels.position===j){o=t.getRadiusX()-a-r-n}else{o=t.getRadiusX()-n}return o},renderArc:function(e,t){var i=this.options;var n=this.arc=new f.Arc(e,{radiusX:t,radiusY:t,startAngle:i.startAngle+P,endAngle:i.endAngle+P});return n},renderTicks:function(){var e=this;var t=e.arc;var i=e.options;var n=t.clone();this.majorTickAngles=this.tickAngles(t,i.majorUnit);this.majorTicks=we(n,this.majorTickAngles,i.majorUnit,i.majorTicks);var r=new z;r.append(this.majorTicks);var a=i.majorTicks.size;var o=i.minorTicks.size;this._tickDifference=a-o;if(i.labels.position===j){var s=n.getRadiusX();n.setRadiusX(s-a+o).setRadiusY(s-a+o)}this.minorTickAngles=this.normalizeTickAngles(this.tickAngles(t,i.minorUnit));this.minorTicks=we(n,this.minorTickAngles,i.minorUnit,i.minorTicks);r.append(this.minorTicks);return r},normalizeTickAngles:function(e){var t=this.options;var i=t.majorUnit/t.minorUnit;for(var n=e.length-1;n>=0;n--){if(n%i===0){e.splice(n,1)}}return e},tickAngles:function(e,t){var i=this.options;var n=i.reverse;var r=i.max-i.min;var a=e.endAngle-e.startAngle;var o=r/t;var s=e.startAngle;var l=a/o;if(n){s+=a;l=-l}var d=[];for(var u=0;u<o;u++){d.push(m(s,v));s+=l}if(m(s)<=e.endAngle){d.push(s)}return d},radius:function(e){if(e){this.arc.setRadiusX(e).setRadiusY(e);this.repositionTicks(this.majorTicks.children,this.majorTickAngles);this.repositionTicks(this.minorTicks.children,this.minorTickAngles,true)}else{return this.arc.getRadiusX()}},repositionTicks:function(e,t,i){var n=i?this._tickDifference||0:0;var r=this.arc;var a=r.getRadiusX();if(i&&this.options.labels.position===j&&n!==0){r=this.arc.clone();r.setRadiusX(a-n).setRadiusY(a-n)}for(var o=0;o<e.length;o++){var s=r.pointAt(t[o]);var l=e[o].segments;var d=s.x-l[0].anchor().x;var u=s.y-l[0].anchor().y;e[o].transform((new M).translate(d,u))}}});t(ye,{min:0,max:100,majorTicks:{size:15,align:R,color:e,width:w,visible:true},minorTicks:{size:10,align:R,color:e,width:w,visible:true},startAngle:-30,endAngle:210,labels:{position:R,padding:2}});var xe=u.extend({init:function(e,t){u.fn.init.call(this,e,t);var i=this.options;i.duration=Math.max(Math.abs(i.newAngle-i.oldAngle)/i.duration*1e3,1)},step:function(e){var t=this.options;var i=d(t.oldAngle,t.newAngle,e);this.element.transform(M().rotate(i,t.center))}});t(xe,{easing:k,duration:g});c.current.register(G,xe);var Ce=.05;var Se=i.Circle;var Te=r;var De=a;var Ae=S.extend({setAngle:function(e){this.elements.transform(M().rotate(e,this.center))},repaint:function(){var e=this;var t=e.scale;var i=e.options;var n=t.slotAngle(i._oldValue);var r=t.slotAngle(i.value);if(i.animation.transitions===false){this.setAngle(r)}else{new xe(this.elements,s(i.animation,{oldAngle:n,newAngle:r})).play()}},render:function(){var e=this;var t=e.scale;var i=e.options;var n=new Te;if(i.animation!==false){s(i.animation,{startAngle:0,center:t.arc.center,reverse:t.options.reverse})}n.append(this._renderNeedle(),this._renderCap());this.elements=n;this.setAngle(U);return n},reflow:function(e){var t=this.center=e.center;var i=o(this.options.length||1,.1,1.5);var n=this.radius=e.getRadiusX()*i;var r=this.capSize=Math.round(n*this.options.cap.size);this.bbox=E.fromPoints(new I(t.x-r,t.y-r),new I(t.x+r,t.y+r))},_renderNeedle:function(){var e=this.scale.options.minorTicks.size;var t=this.center;var i=this.options.color;var n=new De({fill:{color:i},stroke:{color:i,width:w}});n.moveTo(t.x+this.radius-e,t.y).lineTo(t.x,t.y-this.capSize/2).lineTo(t.x,t.y+this.capSize/2).close();return n},_renderCap:function(){var e=this.options;var t=e.cap.color||e.color;var i=new f.Circle(this.center,this.capSize);var n=new Se(i,{fill:{color:t},stroke:{color:t}});return n}});t(Ae,{cap:{size:Ce},arrow:{width:16,height:14},animation:{type:G,duration:g}});var Ee=r;var Ie=y.extend({reflow:function(e){var t=this;var i=this.pointers;this.scale.reflow(e);this._initialPlotArea=this.scale.bbox;for(var n=0;n<i.length;n++){i[n].reflow(t.scale.arc);t._initialPlotArea=E.union(t._initialPlotArea,i[n].bbox)}this.fitScale(e);this.alignScale(e);this._buildVisual(this.gaugeArea,i,this.scale);this._draw()},_buildVisual:function(e,t,i){var n=this._visuals=new Ee;n.append(e);n.append(i.ticks);n.append(i.ranges);this._buildPointers(t);n.append(i.labelElements)},_buildPointers:function(e){var t=this;for(var i=0;i<e.length;i++){var n=e[i];n.render();t._visuals.append(n.elements);n.value(n.options.value)}},fitScale:function(e){var t=this;var i=this.scale.arc;var n=this._initialPlotArea;var r=Math.abs(this.getDiff(n,e));var a=m(r,v);var o=m(-r,v);var s,l,d,u,c;var f=0;var h=0;while(h++<100){f=c===d?f+1:0;if(f>5){break}if(a!==u){s=t.getPlotBox(a,e,i);if(0<=s&&s<=2){break}}if(o!==u){d=t.getPlotBox(o,e,i);if(0<=d&&d<=2){break}}if(s>0&&d>0){u=a*2}else if(s<0&&d<0){u=o*2}else{u=m((a+o)/2||1,v)}l=t.getPlotBox(u,e,i);if(0<=l&&l<=2){break}c=d;if(l>0){o=u;d=l}else{a=u;s=l}}},getPlotBox:function(e,t,i){var n=this;var r=this.scale;var a=this.pointers;var o=i.getRadiusX();var s=i.clone();s.setRadiusX(o+e).setRadiusY(o+e);r.arc=s;r.reflow(t);this.plotBbox=r.bbox;for(var l=0;l<a.length;l++){a[l].reflow(s);n.plotBbox=E.union(n.plotBbox,a[l].bbox)}return this.getDiff(this.plotBbox,t)},getDiff:function(e,t){return Math.min(t.width()-e.width(),t.height()-e.height())},alignScale:function(e){var t=this;var i=this.plotBbox.center();var n=e.center();var r=i.x-n.x;var a=i.y-n.y;var o=this;var s=o.scale;var l=o.pointers;s.arc.center.x-=r;s.arc.center.y-=a;s.reflow(e);for(var d=0;d<l.length;d++){l[d].reflow(s.arc);t.plotBbox=E.union(s.bbox,l[d].bbox)}},_createModel:function(){var e=this;var t=this.options;var i=t.pointer;var n=this.scale=new ye(t.scale,this.contextService);this.pointers=[];var r=l(i)?i:[i];for(var a=0;a<r.length;a++){var o=new Ae(n,s({},r[a],{animation:{transitions:t.transitions}}));e.pointers.push(o)}}});t(Ie,{transitions:true,gaugeArea:{background:""}});var Me=ye.extend({rangeSegments:function(){var e=this.options;var t=e.min;var i=e.max;var n=e.rangePlaceholderColor;var r=e.rangeLineCap;return[{from:t,to:i,color:n,lineCap:r}]},hasRanges:function(){return true},placeholderRangeAngle:function(e){var t=this.ranges.children[0].geometry();if(this.options.reverse){t.setEndAngle(e)}else{t.setStartAngle(e)}},addRange:function(e,t,i){var n=this.options.reverse;var r=this.slotAngle(n?t:e);var a=this.slotAngle(n?e:t);var o=this.createRange(r,a,this.getRangeRadius(),i);this.ranges.append(o);return o}});t(Me,{min:0,max:100,majorTicks:{visible:false},minorTicks:{visible:false},labels:{visible:false},startAngle:0,endAngle:180,rangeLineCap:"round"});var Re=800;var Fe=u.extend({init:function(e,t){u.fn.init.call(this,e,t);var i=this.options;var n=Math.abs(i.newAngle-i.oldAngle)/i.duration*1e3;i.duration=o(n,g,Re);var r=e.elements.options.get("stroke.color");var a=e.currentColor();if(r!==a){this.startColor=new kendo.Color(r);this.color=new kendo.Color(a)}},step:function(e){var t=this;var i=t.options;var n=t.startColor;var r=t.color;var a=d(i.oldAngle,i.newAngle,e);this.element.angle(a);if(r){var o=m(d(n.r,r.r,e));var s=m(d(n.g,r.g,e));var l=m(d(n.b,r.b,e));this.element.stroke(new kendo.Color(o,s,l).toHex())}}});t(Fe,{easing:k,duration:g});c.current.register(q,Fe);var Pe=S.extend({repaint:function(){var e=this;var t=e.scale;var i=e.options;var n=t.slotAngle(i._oldValue);var r=t.slotAngle(i.value);if(this.animation){this.animation.abort()}if(i.animation.transitions===false){this.angle(r);this.stroke(this.currentColor())}else{this.animation=new Fe(this,s(i.animation,{oldAngle:n,newAngle:r}));this.animation.play()}},angle:function(e){var t=this.elements.geometry();if(this.scale.options.reverse){t.setStartAngle(e)}else{t.setEndAngle(e)}this.scale.placeholderRangeAngle(e)},stroke:function(e){this.elements.stroke(e)},render:function(){if(this.elements){return}var e=this;var t=e.scale;var i=e.options;if(i.animation!==false){s(i.animation,{startAngle:0,center:t.arc.center,reverse:t.options.reverse})}this.elements=t.addRange(t.options.min,this.options.value,{color:this.currentColor(),opacity:i.opacity,lineCap:t.options.rangeLineCap})},currentColor:function(){var e=this.scale.options;var t=e.min;var i=e.max;var n=this.options;var r=n.colors;var a=n.color;var o=n.value;var s=h.isNumber(o)?o:t;if(r){for(var l=0;l<r.length;l++){var d=r[l];var u=d.color;var c=d.from;if(c===void 0){c=t}var f=d.to;if(f===void 0){f=i}if(c<=s&&s<=f){return u}}}return a},reflow:function(){this.render();this.bbox=this.elements.bbox()}});t(Pe,{animation:{type:q,duration:g}});var ze=Ie.extend({_initTheme:function(e){Ie.fn._initTheme.call(this,e);this.options.color=this.options.color||(this.theme.pointer||{}).color},_createModel:function(){var e=this.options;var t=this.scale=new Me(e.scale,this.contextService);var i=new Pe(t,s({},{colors:e.colors,color:e.color,value:e.value,opacity:e.opacity,animation:{transitions:e.transitions}}));this.pointers=[i]},_buildPointers:function(e){for(var t=0;t<e.length;t++){var i=e[t];i.render();i.value(i.options.value)}},_setValueOptions:function(e){this.options.value=e},currentColor:function(){var e=this.pointers[0];if(e){return e.currentColor()}},centerLabelPosition:function(e,t){var i=this.getSize();var n=this.scale.arc.center;var r=n.x-e/2;var a=n.y-t/2;if(e<i.width){var o=r+e;r=Math.max(r,0);if(o>i.width){r-=o-i.width}}if(t<i.height){var s=this.scale.bbox;var l=s.bottomRight().y;var d=a+t;a=Math.max(a,s.origin.y);if(d>l){a-=d-l}}return{left:r,top:a}}});kendo.deepExtend(kendo.dataviz,{Gauge:y,LinearGauge:ge,LinearPointer:T,ArrowLinearPointer:de,BarLinearPointer:he,LinearScale:oe,RadialGauge:Ie,RadialPointer:Ae,RadialScale:ye,ArcGauge:ze,RangePointer:Pe,ArcScale:Me})})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("dataviz/gauge/main",["dataviz/gauge/kendo-gauges"],e)})(function(){(function(i){var r=window.kendo;var n=r.ui.Widget;var a=r.dataviz;var e=a.LinearGauge;var t=a.RadialGauge;var o=a.ArcGauge;var s=r.drawing;function l(e){var t=a.ui.themes||{};var i=e.theme||"";var n=i.toLowerCase();if(a.SASS_THEMES.indexOf(n)!=-1){return a.autoTheme().gauge}return(t[i]||t[n]||{}).gauge}var d=n.extend({init:function(e,t){r.destroy(e);i(e).empty();n.fn.init.call(this,e);this.options=r.deepExtend(this.options,t);this.wrapper=this.element;this._createInstance();this.element.addClass("k-gauge");r.notify(this,a.ui)},options:{theme:"default",renderAs:"",pointer:{},scale:{},gaugeArea:{background:""},transitions:true},setOptions:function(e){this._instance.setOptions(e,l(e));this._copyFields()},redraw:function(){this._instance.redraw();this._copyFields()},destroy:function(){n.fn.destroy.call(this);this._instance.destroy()},_createInstance:function(){var e=this._gaugeType();this._instance=new e(this.element[0],this.options,l(this.options));this._copyFields()},_copyFields:function(){this._originalOptions=this._instance._originalOptions;this.options=this._instance.options;this.surface=this._instance.surface;this.bbox=this._instance.bbox;this.gaugeArea=this._instance.gaugeArea;this.pointers=this._instance.pointers;this.scale=this._instance.scale},_resize:function(){this._instance.resize()}});var u=["getSize","value","allValues","exportVisual"];function c(e){d.fn[e]=function(){return this._instance[e].apply(this._instance,arguments)}}for(var f=0;f<u.length;f++){c(u[f])}a.ExportMixin.extend(d.fn);var h=d.extend({options:{name:"RadialGauge"},_gaugeType:function(){return t}});var p=d.extend({options:{name:"LinearGauge",scale:{vertical:true}},_gaugeType:function(){return e}});var v=d.extend({init:function(e,t){d.fn.init.call(this,e,t);this.element.css("position","relative");this.element.addClass("k-arcgauge");this._centerTemplate()},options:{name:"ArcGauge"},setOptions:function(e){d.fn.setOptions.call(this,e);this._centerTemplate()},redraw:function(){d.fn.redraw.call(this);this._centerTemplate()},value:function(e){var t=this._instance;if(arguments.length===0){return t.value()}t.value(e);this._centerTemplate()},destroy:function(){d.fn.destroy.call(this);delete this._centerElement},exportVisual:function(){if(this._centerElement){return false}return d.fn.exportVisual.call(this)},_resize:function(){this._instance.resize();this._centerTemplate()},_centerTemplate:function(){if(this.options.centerTemplate){var e=r.template(this.options.centerTemplate);var t=this._instance;var i=this._getCenterElement();i.html(e({color:t.currentColor(),value:t.value()}));var n=t.centerLabelPosition(i.width(),i.height());i.css(n)}else if(this._centerElement){this._centerElement.remove();this._centerElement=null}},_getCenterElement:function(){var e=this._centerElement;if(!e){e=this._centerElement=i("<div></div>").addClass("k-arcgauge-label");this.element.append(e)}return e},_gaugeType:function(){return o}});function m(n){v.fn[n]=function(t){var e=this;var i=s[n];if(!e._centerElement){return i(e.exportVisual(),t)}return s.drawDOM(e.element).then(function(e){return i(e,t)})}}var g=["exportSVG","exportImage","exportPDF"];for(f=0;f<g.length;f++){m(g[f])}a.ui.plugin(p);a.ui.plugin(h);a.ui.plugin(v);r.deepExtend(a,{Gauge:d,LinearGauge:p,RadialGauge:h,ArcGauge:v})})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.dataviz.gauge",["dataviz/gauge/main","kendo.dataviz.themes"],e)})(function(){var e={id:"dataviz.gauge",name:"Gauge",category:"dataviz",description:"Linear, Radial and Arc gauges.",depends:["dataviz.core","dataviz.themes"]};return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.dataviz.barcode",["kendo.dataviz.core","kendo.drawing"],e)})(function(){var e={id:"dataviz.barcode",name:"Barcode",category:"dataviz",description:"Barcode widget",depends:["dataviz.core"]};(function(n,e){var t=window.kendo,r=t.ui.Widget,i=n.extend,a=t.deepExtend,s=n.inArray,c=n.isPlainObject,p=t.drawing,f=t.geometry,o=t.drawing.util,v=o.defined,m=t.dataviz,g=m.Box2D,l=m.TextBox,d=300,u=100,h=10,_=/^\d+$/,b=/^[a-z0-9]+$/i,w="Character '{0}' is not valid for symbology {1}";function k(e,t,i){return e.substring(t,t+i)}var y=t.Class.extend({init:function(e){this.setOptions(e)},setOptions:function(e){var t=this;t.options=i({},t.options,e);t.quietZoneLength=t.options.addQuietZone?2*t.options.quietZoneLength:0},encode:function(e,t,i){var n=this;if(v(e)){e+=""}n.initValue(e,t,i);if(n.options.addQuietZone){n.addQuietZone()}n.addData();if(n.options.addQuietZone){n.addQuietZone()}return{baseUnit:n.baseUnit,pattern:n.pattern}},options:{quietZoneLength:h,addQuietZone:true,addCheckSum:true},initValue:function(){},addQuietZone:function(){this.pattern.push(this.options.quietZoneLength||h)},addData:function(){},invalidCharacterError:function(e){throw new Error(t.format(w,e,this.name))}});var x={};var C=y.extend({minBaseUnitLength:.7,addData:function(){var e=this,t=e.value;e.addStart();for(var i=0;i<t.length;i++){e.addCharacter(t.charAt(i))}if(e.options.addCheckSum){e.pushCheckSum()}e.addStop();e.prepareValues()},addCharacter:function(e){var t=this,i=t.characterMap[e];if(!i){t.invalidCharacterError(e)}t.addBase(i)},addBase:function(){}});var S={addCharacter:function(e){var t=this;if(t.characterMap[e]){t.addBase(t.characterMap[e])}else if(e.charCodeAt(0)>127){t.invalidCharacterError(e)}else{t.addExtended(e.charCodeAt(0))}},addExtended:function(e){var t=this,i;for(var n=0;n<t.extendedMappings.length;n++){if(i=t.extendedMappings[n].call(t,e)){for(var r=0;r<i.length;r++){t.addBase(i[r])}t.dataLength+=i.length-1;return}}},extendedMappings:[function(e){if(97<=e&&e<=122){var t=this;return[t.characterMap[t.shiftCharacters[0]],t.characterMap[String.fromCharCode(e-32)]]}},function(e){if(33<=e&&e<=58){var t=this;return[t.characterMap[t.shiftCharacters[1]],t.characterMap[String.fromCharCode(e+32)]]}},function(e){if(1<=e&&e<=26){var t=this;return[t.characterMap[t.shiftCharacters[2]],t.characterMap[String.fromCharCode(e+64)]]}},function(e){var t=this,i,n;if(!t.specialAsciiCodes[e]){n=Math.floor(e/32)*6+(e-27)%32+64;i=[t.characterMap[t.shiftCharacters[3]],t.characterMap[String.fromCharCode(n)]]}else{i=[];for(var r=0;r<t.specialAsciiCodes[e].length;r++){i.push(t.characterMap[t.shiftCharacters[3]]);i.push(t.characterMap[t.specialAsciiCodes[e][r]])}}return i}],specialAsciiCodes:{0:["U"],64:["V"],96:["W"],127:["T","X","Y","Z"]},shiftValuesAsciiCodes:{39:36,40:47,41:43,42:37},characterMap:{"+":false,"/":false,$:false,"%":false},shiftCharacters:["SHIFT0","SHIFT1","SHIFT2","SHIFT3"]};x.code39=C.extend({name:"Code 39",checkSumMod:43,minRatio:2.5,maxRatio:3,gapWidth:1,splitCharacter:"|",initValue:function(e,t,i){var n=this;n.width=t;n.height=i;n.value=e;n.dataLength=e.length;n.pattern=[];n.patternString=""},prepareValues:function(){var e=this,t,i=e.minBaseUnitLength,n=e.maxRatio,r=e.minRatio,a=Math.max(.15*e.width,24);if(e.height<a){throw new Error("Insufficient Height. The minimum height for value: "+e.value+" is: "+a)}while((t=e.getBaseUnit(n))<i&&n>r){n=parseFloat((n-.1).toFixed(1))}if(t<i){var o=Math.ceil(e.getBaseWidth(r)*i);throw new Error("Insufficient width. The minimum width for value: "+e.value+" is: "+o)}e.ratio=n;e.baseUnit=t;e.patternString=e.patternString.substring(0,e.patternString.length-1);e.pattern=e.pattern.concat(e.patternString.replace(/ratio/g,n).split(e.splitCharacter))},getBaseUnit:function(e){return this.width/this.getBaseWidth(e)},getBaseWidth:function(e){var t=this,i=3*(e+2);return t.quietZoneLength+i*(t.dataLength+2)+t.gapWidth*(t.dataLength+1)},addStart:function(){var e=this;e.addPattern(e.characterMap.START.pattern);e.addCharacterGap()},addBase:function(e){this.addPattern(e.pattern);this.addCharacterGap()},addStop:function(){this.addPattern(this.characterMap.START.pattern)},addPattern:function(e){for(var t=0;t<e.length;t++){this.patternString+=this.patternMappings[e.charAt(t)]}},addCharacterGap:function(){var e=this;e.patternString+=e.gapWidth+e.splitCharacter},patternMappings:{b:"1|",w:"1|",B:"ratio|",W:"ratio|"},characterMap:{0:{pattern:"bwbWBwBwb",value:0},1:{pattern:"BwbWbwbwB",value:1},2:{pattern:"bwBWbwbwB",value:2},3:{pattern:"BwBWbwbwb",value:3},4:{pattern:"bwbWBwbwB",value:4},5:{pattern:"BwbWBwbwb",value:5},6:{pattern:"bwBWBwbwb",value:6},7:{pattern:"bwbWbwBwB",value:7},8:{pattern:"BwbWbwBwb",value:8},9:{pattern:"bwBWbwBwb",value:9},A:{pattern:"BwbwbWbwB",value:10},B:{pattern:"bwBwbWbwB",value:11},C:{pattern:"BwBwbWbwb",value:12},D:{pattern:"bwbwBWbwB",value:13},E:{pattern:"BwbwBWbwb",value:14},F:{pattern:"bwBwBWbwb",value:15},G:{pattern:"bwbwbWBwB",value:16},H:{pattern:"BwbwbWBwb",value:17},I:{pattern:"bwBwbWBwb",value:18},J:{pattern:"bwbwBWBwb",value:19},K:{pattern:"BwbwbwbWB",value:20},L:{pattern:"bwBwbwbWB",value:21},M:{pattern:"BwBwbwbWb",value:22},N:{pattern:"bwbwBwbWB",value:23},O:{pattern:"BwbwBwbWb",value:24},P:{pattern:"bwBwBwbWb",value:25},Q:{pattern:"bwbwbwBWB",value:26},R:{pattern:"BwbwbwBWb",value:27},S:{pattern:"bwBwbwBWb",value:28},T:{pattern:"bwbwBwBWb",value:29},U:{pattern:"BWbwbwbwB",value:30},V:{pattern:"bWBwbwbwB",value:31},W:{pattern:"BWBwbwbwb",value:32},X:{pattern:"bWbwBwbwB",value:33},Y:{pattern:"BWbwBwbwb",value:34},Z:{pattern:"bWBwBwbwb",value:35},"-":{pattern:"bWbwbwBwB",value:36},".":{pattern:"BWbwbwBwb",value:37}," ":{pattern:"bWBwbwBwb",value:38},$:{pattern:"bWbWbWbwb",value:39},"/":{pattern:"bWbWbwbWb",value:40},"+":{pattern:"bWbwbWbWb",value:41},"%":{pattern:"bwbWbWbWb",value:42},START:{pattern:"bWbwBwBwb"}},options:{addCheckSum:false}});x.code39extended=x.code39.extend(a({},S,{name:"Code 39 extended",characterMap:{SHIFT0:{pattern:"bWbwbWbWb",value:41},SHIFT1:{pattern:"bWbWbwbWb",value:40},SHIFT2:{pattern:"bWbWbWbwb",value:39},SHIFT3:{pattern:"bwbWbWbWb",value:42}}}));x.code93=C.extend({name:"Code 93",cCheckSumTotal:20,kCheckSumTotal:15,checkSumMod:47,initValue:function(e,t,i){var n=this;n.value=e;n.width=t;n.height=i;n.pattern=[];n.values=[];n.dataLength=e.length},prepareValues:function(){var e=this,t=Math.max(.15*e.width,24);if(e.height<t){throw new Error("Insufficient Height")}e.setBaseUnit();if(e.baseUnit<e.minBaseUnitLength){throw new Error("Insufficient Width")}},setBaseUnit:function(){var e=this,t=2;e.baseUnit=e.width/(9*(e.dataLength+2+t)+e.quietZoneLength+1)},addStart:function(){var e=this.characterMap.START.pattern;this.addPattern(e)},addStop:function(){var e=this;e.addStart();e.pattern.push(e.characterMap.TERMINATION_BAR)},addBase:function(e){this.addPattern(e.pattern);this.values.push(e.value)},pushCheckSum:function(){var e=this,t=e._getCheckValues(),i;e.checksum=t.join("");for(var n=0;n<t.length;n++){i=e.characterMap[e._findCharacterByValue(t[n])];e.addPattern(i.pattern)}},_getCheckValues:function(){var e=this,t=e.values,i=t.length,n=0,r,a,o;for(o=i-1;o>=0;o--){n+=e.weightedValue(t[o],i-o,e.cCheckSumTotal)}r=n%e.checkSumMod;n=e.weightedValue(r,1,e.kCheckSumTotal);for(o=i-1;o>=0;o--){n+=e.weightedValue(t[o],i-o+1,e.kCheckSumTotal)}a=n%e.checkSumMod;return[r,a]},_findCharacterByValue:function(e){for(var t in this.characterMap){if(this.characterMap[t].value===e){return t}}},weightedValue:function(e,t,i){return(t%i||i)*e},addPattern:function(e){var t;for(var i=0;i<e.length;i++){t=parseInt(e.charAt(i),10);this.pattern.push(t)}},characterMap:{0:{pattern:"131112",value:0},1:{pattern:"111213",value:1},2:{pattern:"111312",value:2},3:{pattern:"111411",value:3},4:{pattern:"121113",value:4},5:{pattern:"121212",value:5},6:{pattern:"121311",value:6},7:{pattern:"111114",value:7},8:{pattern:"131211",value:8},9:{pattern:"141111",value:9},A:{pattern:"211113",value:10},B:{pattern:"211212",value:11},C:{pattern:"211311",value:12},D:{pattern:"221112",value:13},E:{pattern:"221211",value:14},F:{pattern:"231111",value:15},G:{pattern:"112113",value:16},H:{pattern:"112212",value:17},I:{pattern:"112311",value:18},J:{pattern:"122112",value:19},K:{pattern:"132111",value:20},L:{pattern:"111123",value:21},M:{pattern:"111222",value:22},N:{pattern:"111321",value:23},O:{pattern:"121122",value:24},P:{pattern:"131121",value:25},Q:{pattern:"212112",value:26},R:{pattern:"212211",value:27},S:{pattern:"211122",value:28},T:{pattern:"211221",value:29},U:{pattern:"221121",value:30},V:{pattern:"222111",value:31},W:{pattern:"112122",value:32},X:{pattern:"112221",value:33},Y:{pattern:"122121",value:34},Z:{pattern:"123111",value:35},"-":{pattern:"121131",value:36},".":{pattern:"311112",value:37}," ":{pattern:"311211",value:38},$:{pattern:"321111",value:39},"/":{pattern:"112131",value:40},"+":{pattern:"113121",value:41},"%":{pattern:"211131",value:42},SHIFT0:{pattern:"122211",value:46},SHIFT1:{pattern:"311121",value:45},SHIFT2:{pattern:"121221",value:43},SHIFT3:{pattern:"312111",value:44},START:{pattern:"111141"},TERMINATION_BAR:"1"}});x.code93extended=x.code93.extend(a({},S,{name:"Code 93 extended",pushCheckSum:function(){var e=this,t=e._getCheckValues(),i;e.checksum=t.join("");for(var n=0;n<t.length;n++){i=t[n];if(e.shiftValuesAsciiCodes[i]){e.addExtended(e.shiftValuesAsciiCodes[i])}else{e.addPattern(e.characterMap[e._findCharacterByValue(i)].pattern)}}}}));var T=t.Class.extend({init:function(e){this.encoding=e},addStart:function(){},is:function(){},move:function(){},pushState:function(){}});var D=T.extend({FNC4:"FNC4",init:function(e,t){var i=this;i.encoding=e;i.states=t;i._initMoves(t)},addStart:function(){this.encoding.addPattern(this.START)},is:function(e,t){var i=e.charCodeAt(t);return this.isCode(i)},move:function(e){var t=this,i=0;while(!t._moves[i].call(t,e)&&i<t._moves.length){i++}},pushState:function(e){var t=this,i=t.states,n=e.value,r=n.length,a;if(s("C",i)>=0){var o=n.substr(e.index).match(/\d{4,}/g);if(o){r=n.indexOf(o[0],e.index)}}while((a=e.value.charCodeAt(e.index))>=0&&t.isCode(a)&&e.index<r){t.encoding.addPattern(t.getValue(a));e.index++}},_initMoves:function(e){var t=this;t._moves=[];if(s(t.FNC4,e)>=0){t._moves.push(t._moveFNC)}if(s(t.shiftKey,e)>=0){t._moves.push(t._shiftState)}t._moves.push(t._moveState)},_moveFNC:function(e){if(e.fnc){e.fnc=false;return e.previousState==this.key}},_shiftState:function(e){var t=this;if(e.previousState==t.shiftKey&&(e.index+1>=e.value.length||t.encoding[t.shiftKey].is(e.value,e.index+1))){t.encoding.addPattern(t.SHIFT);e.shifted=true;return true}},_moveState:function(){this.encoding.addPattern(this.MOVE);return true},SHIFT:98});var A={};A.A=D.extend({key:"A",shiftKey:"B",isCode:function(e){return 0<=e&&e<96},getValue:function(e){if(e<32){return e+64}return e-32},MOVE:101,START:103});A.B=D.extend({key:"B",shiftKey:"A",isCode:function(e){return 32<=e&&e<128},getValue:function(e){return e-32},MOVE:100,START:104});A.C=T.extend({key:"C",addStart:function(){this.encoding.addPattern(this.START)},is:function(e,t){var i=k(e,t,4);return(t+4<=e.length||e.length==2)&&_.test(i)},move:function(){this.encoding.addPattern(this.MOVE)},pushState:function(e){var t;while((t=k(e.value,e.index,2))&&_.test(t)&&t.length==2){this.encoding.addPattern(parseInt(t,10));e.index+=2}},getValue:function(e){return e},MOVE:99,START:105});A.FNC4=T.extend({key:"FNC4",dependentStates:["A","B"],init:function(e,t){this.encoding=e;this._initSubStates(t)},addStart:function(e){var t=e.value.charCodeAt(0)-128,i=this._getSubState(t);this.encoding[i].addStart()},is:function(e,t){var i=e.charCodeAt(t);return this.isCode(i)},isCode:function(e){return 128<=e&&e<256},pushState:function(e){var t=this,i=t._initSubState(e),n=t.encoding,r=i.value.length;e.index+=r;if(r<3){var a;for(;i.index<r;i.index++){a=i.value.charCodeAt(i.index);i.state=t._getSubState(a);if(i.previousState!=i.state){i.previousState=i.state;n[i.state].move(i)}n.addPattern(n[i.state].MOVE);n.addPattern(n[i.state].getValue(a))}}else{if(i.state!=i.previousState){n[i.state].move(i)}t._pushStart(i);n.pushData(i,t.subStates);if(e.index<e.value.length){t._pushStart(i)}}e.fnc=true;e.state=i.state},_pushStart:function(e){var t=this;t.encoding.addPattern(t.encoding[e.state].MOVE);t.encoding.addPattern(t.encoding[e.state].MOVE)},_initSubState:function(e){var t=this,i={value:t._getAll(e.value,e.index),index:0};i.state=t._getSubState(i.value.charCodeAt(0));i.previousState=e.previousState==t.key?i.state:e.previousState;return i},_initSubStates:function(e){var t=this;t.subStates=[];for(var i=0;i<e.length;i++){if(s(e[i],t.dependentStates)>=0){t.subStates.push(e[i])}}},_getSubState:function(e){var t=this;for(var i=0;i<t.subStates.length;i++){if(t.encoding[t.subStates[i]].isCode(e)){return t.subStates[i]}}},_getAll:function(e,t){var i,n="";while((i=e.charCodeAt(t++))&&this.isCode(i)){n+=String.fromCharCode(i-128)}return n}});A.FNC1=T.extend({key:"FNC1",startState:"C",dependentStates:["C","B"],startAI:"(",endAI:")",init:function(e,t){this.encoding=e;this.states=t},addStart:function(){this.encoding[this.startState].addStart()},is:function(){return s(this.key,this.states)>=0},pushState:function(e){var t=this,i=t.encoding,n=e.value.replace(/\s/g,""),r=new RegExp("["+t.startAI+t.endAI+"]","g"),a=e.index,o={state:t.startState},s,l,d;i.addPattern(t.START);while(true){o.index=0;d=n.charAt(a)===t.startAI?2:0;s=d>0?t.getBySeparator(n,a):t.getByLength(n,a);if(s.ai.length){l=a+d+s.id.length+s.ai.length}else{l=n.indexOf(t.startAI,a+1);if(l<0){if(a+s.ai.max+s.id.length+d<n.length){throw new Error("Separators are required after variable length identifiers")}l=n.length}}o.value=n.substring(a,l).replace(r,"");t.validate(s,o.value);i.pushData(o,t.dependentStates);if(l>=n.length){break}a=l;if(o.state!=t.startState){i[t.startState].move(o);o.state=t.startState}if(!s.ai.length){i.addPattern(t.START)}}e.index=e.value.length},validate:function(e,t){var i=t.substr(e.id.length),n=e.ai;if(!n.type&&!_.test(i)){throw new Error("Application identifier "+e.id+" is numeric only but contains non numeric character(s).")}if(n.type=="alphanumeric"&&!b.test(i)){throw new Error("Application identifier "+e.id+" is alphanumeric only but contains non alphanumeric character(s).")}if(n.length&&n.length!==i.length){throw new Error("Application identifier "+e.id+" must be "+n.length+" characters long.")}if(n.min&&n.min>i.length){throw new Error("Application identifier "+e.id+" must be at least "+n.min+" characters long.")}if(n.max&&n.max<i.length){throw new Error("Application identifier "+e.id+" must be at most "+n.max+" characters long.")}},getByLength:function(e,t){var i=this,n,r;for(var a=2;a<=4;a++){n=k(e,t,a);r=i.getAI(n)||i.getAI(n.substring(0,n.length-1));if(r){return{id:n,ai:r}}}i.unsupportedAIError(n)},unsupportedAIError:function(e){throw new Error(t.format("'{0}' is not a supported Application Identifier"),e)},getBySeparator:function(e,t){var i=this,n=e.indexOf(i.startAI,t),r=e.indexOf(i.endAI,n),a=e.substring(n+1,r),o=i.getAI(a)||i.getAI(a.substr(a.length-1));if(!o){i.unsupportedAIError(a)}return{ai:o,id:a}},getAI:function(e){var t=this.applicationIdentifiers,i=t.multiKey;if(t[e]){return t[e]}for(var n=0;n<i.length;n++){if(i[n].ids&&s(e,i[n].ids)>=0){return i[n].type}else if(i[n].ranges){var r=i[n].ranges;for(var a=0;a<r.length;a++){if(r[a][0]<=e&&e<=r[a][1]){return i[n].type}}}}},applicationIdentifiers:{22:{max:29,type:"alphanumeric"},402:{length:17},7004:{max:4,type:"alphanumeric"},242:{max:6,type:"alphanumeric"},8020:{max:25,type:"alphanumeric"},703:{min:3,max:30,type:"alphanumeric"},8008:{min:8,max:12,type:"alphanumeric"},253:{min:13,max:17,type:"alphanumeric"},8003:{min:14,max:30,type:"alphanumeric"},multiKey:[{ids:["15","17","8005","8100"],ranges:[[11,13],[310,316],[320,336],[340,369]],type:{length:6}},{ids:["240","241","250","251","400","401","403","7002","8004","8007","8110"],ranges:[[90-99]],type:{max:30,type:"alphanumeric"}},{ids:["7001"],ranges:[[410,414]],type:{length:13}},{ids:["10","21","254","420","8002"],type:{max:20,type:"alphanumeric"}},{ids:["00","8006","8017","8018"],type:{length:18}},{ids:["01","02","8001"],type:{length:14}},{ids:["422"],ranges:[[424,426]],type:{length:3}},{ids:["20","8102"],type:{length:2}},{ids:["30","37"],type:{max:8,type:"alphanumeric"}},{ids:["390","392"],type:{max:15,type:"alphanumeric"}},{ids:["421","423"],type:{min:3,max:15,type:"alphanumeric"}},{ids:["391","393"],type:{min:3,max:18,type:"alphanumeric"}},{ids:["7003","8101"],type:{length:10}}]},START:102});var E=y.extend({init:function(e){y.fn.init.call(this,e);this._initStates()},_initStates:function(){var e=this;for(var t=0;t<e.states.length;t++){e[e.states[t]]=new A[e.states[t]](e,e.states)}},initValue:function(e,t,i){var n=this;n.pattern=[];n.value=e;n.width=t;n.height=i;n.checkSum=0;n.totalUnits=0;n.index=0;n.position=1},addData:function(){var e=this,t={value:e.value,index:0,state:""};if(e.value.length===0){return}t.state=t.previousState=e.getNextState(t,e.states);e.addStart(t);e.pushData(t,e.states);e.addCheckSum();e.addStop();e.setBaseUnit()},pushData:function(e,t){var i=this;while(true){i[e.state].pushState(e);if(e.index>=e.value.length){break}if(!e.shifted){e.previousState=e.state;e.state=i.getNextState(e,t);i[e.state].move(e)}else{var n=e.state;e.state=e.previousState;e.previousState=n;e.shifted=false}}},addStart:function(e){this[e.state].addStart(e);this.position=1},addCheckSum:function(){var e=this;e.checksum=e.checkSum%103;e.addPattern(e.checksum)},addStop:function(){this.addPattern(this.STOP)},setBaseUnit:function(){var e=this;e.baseUnit=e.width/(e.totalUnits+e.quietZoneLength)},addPattern:function(e){var t=this,i=t.characterMap[e].toString(),n;for(var r=0;r<i.length;r++){n=parseInt(i.charAt(r),10);t.pattern.push(n);t.totalUnits+=n}t.checkSum+=e*t.position++},getNextState:function(e,t){for(var i=0;i<t.length;i++){if(this[t[i]].is(e.value,e.index)){return t[i]}}this.invalidCharacterError(e.value.charAt(e.index))},characterMap:[212222,222122,222221,121223,121322,131222,122213,122312,132212,221213,221312,231212,112232,122132,122231,113222,123122,123221,223211,221132,221231,213212,223112,312131,311222,321122,321221,312212,322112,322211,212123,212321,232121,111323,131123,131321,112313,132113,132311,211313,231113,231311,112133,112331,132131,113123,113321,133121,313121,211331,231131,213113,213311,213131,311123,311321,331121,312113,312311,332111,314111,221411,431111,111224,111422,121124,121421,141122,141221,112214,112412,122114,122411,142112,142211,241211,221114,413111,241112,134111,111242,121142,121241,114212,124112,124211,411212,421112,421211,212141,214121,412121,111143,111341,131141,114113,114311,411113,411311,113141,114131,311141,411131,211412,211214,211232,2331112],STOP:106});x.code128a=E.extend({name:"Code 128 A",states:["A"]});x.code128b=E.extend({name:"Code 128 B",states:["B"]});x.code128c=E.extend({name:"Code 128 C",states:["C"]});x.code128=E.extend({name:"Code 128",states:["C","B","A","FNC4"]});x["gs1-128"]=E.extend({name:"Code GS1-128",states:["FNC1","C","B"]});var I=y.extend({initValue:function(e,t){var i=this;i.pattern=[];i.value=e;i.checkSumLength=0;i.width=t},setBaseUnit:function(){var e=this,t=7;e.baseUnit=e.width/(12*(e.value.length+e.checkSumLength)+e.quietZoneLength+t)},addData:function(){var e=this,t=e.value;e.addPattern(e.START);for(var i=0;i<t.length;i++){e.addCharacter(t.charAt(i))}if(e.options.addCheckSum){e.addCheckSum()}e.addPattern(e.STOP);e.setBaseUnit()},addCharacter:function(e){var t=this,i=t.characterMap[e];if(!i){t.invalidCharacterError(e)}t.addPattern(i)},addPattern:function(e){for(var t=0;t<e.length;t++){this.pattern.push(parseInt(e.charAt(t),10))}},addCheckSum:function(){var e=this,t=e.checkSums[e.checkSumType],i;i=t.call(e.checkSums,e.value);e.checksum=i.join("");for(var n=0;n<i.length;n++){e.checkSumLength++;e.addPattern(e.characterMap[i[n]])}},checkSums:{Modulo10:function(e){var t=[0,""],i=e.length%2,n,r,a;for(n=0;n<e.length;n++){t[(n+i)%2]+=parseInt(e.charAt(n),10)}a=t[0];r=(t[1]*2).toString();for(n=0;n<r.length;n++){a+=parseInt(r.charAt(n),10)}return[(10-a%10)%10]},Modulo11:function(e){var t=0,i=11,n=e.length,r,a;for(var o=0;o<n;o++){r=((n-o)%6||6)+1;t+=r*e.charAt(o)}a=(i-t%i)%i;if(a!=10){return[a]}return[1,0]},Modulo11Modulo10:function(e){var t=this.Modulo11(e),i;i=e+t[0];return t.concat(this.Modulo10(i))},Modulo10Modulo10:function(e){var t=this.Modulo10(e),i;i=e+t[0];return t.concat(this.Modulo10(i))}},characterMap:["12121212","12121221","12122112","12122121","12211212","12211221","12212112","12212121","21121212","21121221"],START:"21",STOP:"121",checkSumType:""});x.msimod10=I.extend({name:"MSI Modulo10",checkSumType:"Modulo10"});x.msimod11=I.extend({name:"MSI Modulo11",checkSumType:"Modulo11"});x.msimod1110=I.extend({name:"MSI Modulo11 Modulo10",checkSumType:"Modulo11Modulo10"});x.msimod1010=I.extend({name:"MSI Modulo10 Modulo10",checkSumType:"Modulo10Modulo10"});x.code11=y.extend({name:"Code 11",cCheckSumTotal:10,kCheckSumTotal:9,kCheckSumMinLength:10,checkSumMod:11,DASH_VALUE:10,DASH:"-",START:"112211",STOP:"11221",initValue:function(e,t){var i=this;i.pattern=[];i.value=e;i.width=t;i.totalUnits=0},addData:function(){var e=this;var t=e.value;e.addPattern(e.START);for(var i=0;i<t.length;i++){e.addCharacter(t.charAt(i))}if(e.options.addCheckSum){e.addCheckSum()}e.addPattern(e.STOP);e.setBaseUnit()},setBaseUnit:function(){var e=this;e.baseUnit=e.width/(e.totalUnits+e.quietZoneLength)},addCheckSum:function(){var e=this,t=e.value,i=t.length,n;n=e.getWeightedSum(t,i,e.cCheckSumTotal)%e.checkSumMod;e.checksum=n+"";e.addPattern(e.characterMap[n]);i++;if(i>=e.kCheckSumMinLength){var r=(n+e.getWeightedSum(t,i,e.kCheckSumTotal))%e.checkSumMod;e.checksum+=r;e.addPattern(e.characterMap[r])}},getWeightedSum:function(e,t,i){var n=0;for(var r=0;r<e.length;r++){n+=this.weightedValue(this.getValue(e.charAt(r)),t,r,i)}return n},weightedValue:function(e,t,i,n){var r=(t-i)%n||n;return r*e},getValue:function(e){var t=this;if(!isNaN(e)){return parseInt(e,10)}else if(e!==t.DASH){t.invalidCharacterError(e)}return t.DASH_VALUE},addCharacter:function(e){var t=this,i=t.getValue(e),n=t.characterMap[i];t.addPattern(n)},addPattern:function(e){var t;for(var i=0;i<e.length;i++){t=parseInt(e.charAt(i),10);this.pattern.push(t);this.totalUnits+=t}},characterMap:["111121","211121","121121","221111","112121","212111","122111","111221","211211","211111","112111"],options:{addCheckSum:true}});x.postnet=y.extend({name:"Postnet",START:"2",VALID_CODE_LENGTHS:[5,9,11],DIGIT_SEPARATOR:"-",initValue:function(e,t,i){var n=this;n.height=i;n.width=t;n.baseHeight=i/2;n.value=e.replace(new RegExp(n.DIGIT_SEPARATOR,"g"),"");n.pattern=[];n.validate(n.value);n.checkSum=0;n.setBaseUnit()},addData:function(){var e=this,t=e.value;e.addPattern(e.START);for(var i=0;i<t.length;i++){e.addCharacter(t.charAt(i))}if(e.options.addCheckSum){e.addCheckSum()}e.addPattern(e.START);e.pattern.pop()},addCharacter:function(e){var t=this,i=t.characterMap[e];t.checkSum+=parseInt(e,10);t.addPattern(i)},addCheckSum:function(){var e=this;e.checksum=(10-e.checkSum%10)%10;e.addCharacter(e.checksum)},setBaseUnit:function(){var e=this,t=3;e.baseUnit=e.width/((e.value.length+1)*10+t+e.quietZoneLength)},validate:function(e){var t=this;if(!_.test(e)){t.invalidCharacterError(e.match(/[^0-9]/)[0])}if(s(e.length,t.VALID_CODE_LENGTHS)<0){throw new Error("Invalid value length. Valid lengths for the Postnet symbology are "+t.VALID_CODE_LENGTHS.join(","))}},addPattern:function(e){var t=this,i;for(var n=0;n<e.length;n++){i=t.height-t.baseHeight*e.charAt(n);t.pattern.push({width:1,y1:i,y2:t.height});t.pattern.push(1)}},characterMap:["22111","11122","11212","11221","12112","12121","12211","21112","21121","21211"]});x.ean13=y.extend({initValue:function(e,t,i){e+="";if(e.length!=12||/\D/.test(e)){throw new Error('The value of the "EAN13" encoding should be 12 symbols')}var n=this;n.pattern=[];n.options.height=i;n.baseUnit=t/(95+n.quietZoneLength);n.value=e;n.checksum=n.calculateChecksum();n.leftKey=e[0];n.leftPart=e.substr(1,6);n.rightPart=e.substr(7)+n.checksum},addData:function(){var e=this;e.addPieces(e.characterMap.start);e.addSide(e.leftPart,e.leftKey);e.addPieces(e.characterMap.middle);e.addSide(e.rightPart);e.addPieces(e.characterMap.start)},addSide:function(e,t){var i=this;for(var n=0;n<e.length;n++){if(t&&parseInt(i.keyTable[t].charAt(n),10)){i.addPieces(Array.prototype.slice.call(i.characterMap.digits[e.charAt(n)]).reverse(),true)}else{i.addPieces(i.characterMap.digits[e.charAt(n)],true)}}},addPieces:function(e,t){var i=this;for(var n=0;n<e.length;n++){if(t){i.pattern.push({y1:0,y2:i.options.height*.95,width:e[n]})}else{i.pattern.push(e[n])}}},calculateChecksum:function(){var e=0,t=0,i=this.value.split("").reverse().join("");for(var n=0;n<i.length;n++){if(n%2){t+=parseInt(i.charAt(n),10)}else{e+=parseInt(i.charAt(n),10)}}var r=(10-(3*e+t)%10)%10;return r},keyTable:["000000","001011","001101","001110","010011","011001","011100","010101","010110","011010"],characterMap:{digits:[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2]],start:[1,1,1],middle:[1,1,1,1,1]}});x.ean8=x.ean13.extend({initValue:function(e,t,i){var n=this;if(e.length!=7||/\D/.test(e)){throw new Error("Invalid value provided")}n.value=e;n.options.height=i;n.checksum=n.calculateChecksum(n.value);n.leftPart=n.value.substr(0,4);n.rightPart=n.value.substr(4)+n.checksum;n.pattern=[];n.baseUnit=t/(67+n.quietZoneLength)}});var M=r.extend({init:function(e,t){var i=this;r.fn.init.call(i,e,t);i.element=n(e);i.wrapper=i.element;i.element.addClass("k-barcode").css("display","block");i.surfaceWrap=n("<div />").css("position","relative").appendTo(this.element);i.surface=p.Surface.create(i.surfaceWrap,{type:i.options.renderAs});i._setOptions(t);if(t&&v(t.value)){i.redraw()}},setOptions:function(e){this._setOptions(e);this.redraw()},redraw:function(){var e=this._getSize();this.surface.clear();this.surface.setSize({width:e.width,height:e.height});this.createVisual();this.surface.draw(this.visual)},getSize:function(){return t.dimensions(this.element)},_resize:function(){this.redraw()},createVisual:function(){this.visual=this._render()},_render:function(){var e=this,t=e.options,i=t.value,n=t.text,r=m.getSpacing(n.margin),a=e._getSize(),o=t.border||{},s=e.encoding,l=new g(0,0,a.width,a.height).unpad(o.width).unpad(t.padding),d=l.height(),u,c,f;var h=new p.Group;e.contentBox=l;h.append(e._getBackground(a));if(n.visible){f=p.util.measureText(i,{font:n.font}).height;d-=f+r.top+r.bottom}u=s.encode(i,l.width(),d);if(n.visible){c=i;if(t.checksum&&v(s.checksum)){c+=" "+s.checksum}h.append(e._getText(c))}e.barHeight=d;this._bandsGroup=this._getBands(u.pattern,u.baseUnit);h.append(this._bandsGroup);return h},exportVisual:function(){return this._render()},_getSize:function(){var e=this,t=e.element,i=new f.Size(d,u);if(t.width()>0){i.width=t.width()}if(t.height()>0){i.height=t.height()}if(e.options.width){i.width=e.options.width}if(e.options.height){i.height=e.options.height}return i},value:function(e){var t=this;if(!v(e)){return t.options.value}t.options.value=e+"";t.redraw()},_getBands:function(e,t){var i=this,n=i.contentBox,r=n.x1,a,o;var s=new p.Group;for(var l=0;l<e.length;l++){o=c(e[l])?e[l]:{width:e[l],y1:0,y2:i.barHeight};a=o.width*t;if(l%2){var d=f.Rect.fromPoints(new f.Point(r,o.y1+n.y1),new f.Point(r+a,o.y2+n.y1));var u=p.Path.fromRect(d,{fill:{color:i.options.color},stroke:null});s.append(u)}r+=a}return s},_getBackground:function(e){var t=this,i=t.options,n=i.border||{};var r=new g(0,0,e.width,e.height).unpad(n.width/2);var a=p.Path.fromRect(r.toRect(),{fill:{color:i.background},stroke:{color:n.width?n.color:"",width:n.width,dashType:n.dashType}});return a},_getText:function(e){var t=this,i=t.options.text,n=t._textbox=new l(e,{font:i.font,color:i.color,align:"center",vAlign:"bottom",margin:i.margin});n.reflow(t.contentBox);n.renderVisual();return n.visual},_setOptions:function(e){var t=this;t.type=(e.type||t.options.type).toLowerCase();if(t.type=="upca"){t.type="ean13";e.value="0"+e.value}if(t.type=="upce"){t.type="ean8";e.value="0"+e.value}if(!x[t.type]){throw new Error("Encoding "+t.type+"is not supported.")}t.encoding=new x[t.type];t.options=i(true,t.options,e)},options:{name:"Barcode",renderAs:"svg",value:"",type:"code39",checksum:false,width:0,height:0,color:"black",background:"white",text:{visible:true,font:"16px Consolas, Monaco, Sans Mono, monospace, sans-serif",color:"black",margin:{top:0,bottom:0,left:0,right:0}},border:{width:0,dashType:"solid",color:"black"},padding:{top:0,bottom:0,left:0,right:0}}});m.ExportMixin.extend(M.fn);m.ui.plugin(M);t.deepExtend(m,{encodings:x,Encoding:y})})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.dataviz.qrcode",["kendo.dataviz.core","kendo.drawing"],e)})(function(){var e={id:"dataviz.qrcode",name:"QRCode",category:"dataviz",description:"QRCode widget.",depends:["dataviz.core","drawing"]};(function(n,c){var e=window.kendo,B=n.extend,f=e.drawing,t=e.dataviz,r=e.ui.Widget,L=t.Box2D,a="0000",h="numeric",p="alphanumeric",v="byte",d={1:0},o={0:1},u=[[1,0],[1,25,0]],H={15:20,16:20,18:24,19:24,22:20,24:22,26:24,28:20,30:20,31:24,32:28,33:24,36:18,37:22,39:20,40:24},m=[{L:{groups:[[1,19]],totalDataCodewords:19,errorCodewordsPerBlock:7},M:{groups:[[1,16]],totalDataCodewords:16,errorCodewordsPerBlock:10},Q:{groups:[[1,13]],totalDataCodewords:13,errorCodewordsPerBlock:13},H:{groups:[[1,9]],totalDataCodewords:9,errorCodewordsPerBlock:17}},{L:{groups:[[1,34]],totalDataCodewords:34,errorCodewordsPerBlock:10},M:{groups:[[1,28]],totalDataCodewords:28,errorCodewordsPerBlock:16},Q:{groups:[[1,22]],totalDataCodewords:22,errorCodewordsPerBlock:22},H:{groups:[[1,16]],totalDataCodewords:16,errorCodewordsPerBlock:28}},{L:{groups:[[1,55]],totalDataCodewords:55,errorCodewordsPerBlock:15},M:{groups:[[1,44]],totalDataCodewords:44,errorCodewordsPerBlock:26},Q:{groups:[[2,17]],totalDataCodewords:34,errorCodewordsPerBlock:18},H:{groups:[[2,13]],totalDataCodewords:26,errorCodewordsPerBlock:22}},{L:{groups:[[1,80]],totalDataCodewords:80,errorCodewordsPerBlock:20},M:{groups:[[2,32]],totalDataCodewords:64,errorCodewordsPerBlock:18},Q:{groups:[[2,24]],totalDataCodewords:48,errorCodewordsPerBlock:26},H:{groups:[[4,9]],totalDataCodewords:36,errorCodewordsPerBlock:16}},{L:{groups:[[1,108]],totalDataCodewords:108,errorCodewordsPerBlock:26},M:{groups:[[2,43]],totalDataCodewords:86,errorCodewordsPerBlock:24},Q:{groups:[[2,15],[2,16]],totalDataCodewords:62,errorCodewordsPerBlock:18},H:{groups:[[2,11],[2,12]],totalDataCodewords:46,errorCodewordsPerBlock:22}},{L:{groups:[[2,68]],totalDataCodewords:136,errorCodewordsPerBlock:18},M:{groups:[[4,27]],totalDataCodewords:108,errorCodewordsPerBlock:16},Q:{groups:[[4,19]],totalDataCodewords:76,errorCodewordsPerBlock:24},H:{groups:[[4,15]],totalDataCodewords:60,errorCodewordsPerBlock:28}},{L:{groups:[[2,78]],totalDataCodewords:156,errorCodewordsPerBlock:20},M:{groups:[[4,31]],totalDataCodewords:124,errorCodewordsPerBlock:18},Q:{groups:[[2,14],[4,15]],totalDataCodewords:88,errorCodewordsPerBlock:18},H:{groups:[[4,13],[1,14]],totalDataCodewords:66,errorCodewordsPerBlock:26}},{L:{groups:[[2,97]],totalDataCodewords:194,errorCodewordsPerBlock:24},M:{groups:[[2,38],[2,39]],totalDataCodewords:154,errorCodewordsPerBlock:22},Q:{groups:[[4,18],[2,19]],totalDataCodewords:110,errorCodewordsPerBlock:22},H:{groups:[[4,14],[2,15]],totalDataCodewords:86,errorCodewordsPerBlock:26}},{L:{groups:[[2,116]],totalDataCodewords:232,errorCodewordsPerBlock:30},M:{groups:[[3,36],[2,37]],totalDataCodewords:182,errorCodewordsPerBlock:22},Q:{groups:[[4,16],[4,17]],totalDataCodewords:132,errorCodewordsPerBlock:20},H:{groups:[[4,12],[4,13]],totalDataCodewords:100,errorCodewordsPerBlock:24}},{L:{groups:[[2,68],[2,69]],totalDataCodewords:274,errorCodewordsPerBlock:18},M:{groups:[[4,43],[1,44]],totalDataCodewords:216,errorCodewordsPerBlock:26},Q:{groups:[[6,19],[2,20]],totalDataCodewords:154,errorCodewordsPerBlock:24},H:{groups:[[6,15],[2,16]],totalDataCodewords:122,errorCodewordsPerBlock:28}},{L:{groups:[[4,81]],totalDataCodewords:324,errorCodewordsPerBlock:20},M:{groups:[[1,50],[4,51]],totalDataCodewords:254,errorCodewordsPerBlock:30},Q:{groups:[[4,22],[4,23]],totalDataCodewords:180,errorCodewordsPerBlock:28},H:{groups:[[3,12],[8,13]],totalDataCodewords:140,errorCodewordsPerBlock:24}},{L:{groups:[[2,92],[2,93]],totalDataCodewords:370,errorCodewordsPerBlock:24},M:{groups:[[6,36],[2,37]],totalDataCodewords:290,errorCodewordsPerBlock:22},Q:{groups:[[4,20],[6,21]],totalDataCodewords:206,errorCodewordsPerBlock:26},H:{groups:[[7,14],[4,15]],totalDataCodewords:158,errorCodewordsPerBlock:28}},{L:{groups:[[4,107]],totalDataCodewords:428,errorCodewordsPerBlock:26},M:{groups:[[8,37],[1,38]],totalDataCodewords:334,errorCodewordsPerBlock:22},Q:{groups:[[8,20],[4,21]],totalDataCodewords:244,errorCodewordsPerBlock:24},H:{groups:[[12,11],[4,12]],totalDataCodewords:180,errorCodewordsPerBlock:22}},{L:{groups:[[3,115],[1,116]],totalDataCodewords:461,errorCodewordsPerBlock:30},M:{groups:[[4,40],[5,41]],totalDataCodewords:365,errorCodewordsPerBlock:24},Q:{groups:[[11,16],[5,17]],totalDataCodewords:261,errorCodewordsPerBlock:20},H:{groups:[[11,12],[5,13]],totalDataCodewords:197,errorCodewordsPerBlock:24}},{L:{groups:[[5,87],[1,88]],totalDataCodewords:523,errorCodewordsPerBlock:22},M:{groups:[[5,41],[5,42]],totalDataCodewords:415,errorCodewordsPerBlock:24},Q:{groups:[[5,24],[7,25]],totalDataCodewords:295,errorCodewordsPerBlock:30},H:{groups:[[11,12],[7,13]],totalDataCodewords:223,errorCodewordsPerBlock:24}},{L:{groups:[[5,98],[1,99]],totalDataCodewords:589,errorCodewordsPerBlock:24},M:{groups:[[7,45],[3,46]],totalDataCodewords:453,errorCodewordsPerBlock:28},Q:{groups:[[15,19],[2,20]],totalDataCodewords:325,errorCodewordsPerBlock:24},H:{groups:[[3,15],[13,16]],totalDataCodewords:253,errorCodewordsPerBlock:30}},{L:{groups:[[1,107],[5,108]],totalDataCodewords:647,errorCodewordsPerBlock:28},M:{groups:[[10,46],[1,47]],totalDataCodewords:507,errorCodewordsPerBlock:28},Q:{groups:[[1,22],[15,23]],totalDataCodewords:367,errorCodewordsPerBlock:28},H:{groups:[[2,14],[17,15]],totalDataCodewords:283,errorCodewordsPerBlock:28}},{L:{groups:[[5,120],[1,121]],totalDataCodewords:721,errorCodewordsPerBlock:30},M:{groups:[[9,43],[4,44]],totalDataCodewords:563,errorCodewordsPerBlock:26},Q:{groups:[[17,22],[1,23]],totalDataCodewords:397,errorCodewordsPerBlock:28},H:{groups:[[2,14],[19,15]],totalDataCodewords:313,errorCodewordsPerBlock:28}},{L:{groups:[[3,113],[4,114]],totalDataCodewords:795,errorCodewordsPerBlock:28},M:{groups:[[3,44],[11,45]],totalDataCodewords:627,errorCodewordsPerBlock:26},Q:{groups:[[17,21],[4,22]],totalDataCodewords:445,errorCodewordsPerBlock:26},H:{groups:[[9,13],[16,14]],totalDataCodewords:341,errorCodewordsPerBlock:26}},{L:{groups:[[3,107],[5,108]],totalDataCodewords:861,errorCodewordsPerBlock:28},M:{groups:[[3,41],[13,42]],totalDataCodewords:669,errorCodewordsPerBlock:26},Q:{groups:[[15,24],[5,25]],totalDataCodewords:485,errorCodewordsPerBlock:30},H:{groups:[[15,15],[10,16]],totalDataCodewords:385,errorCodewordsPerBlock:28}},{L:{groups:[[4,116],[4,117]],totalDataCodewords:932,errorCodewordsPerBlock:28},M:{groups:[[17,42]],totalDataCodewords:714,errorCodewordsPerBlock:26},Q:{groups:[[17,22],[6,23]],totalDataCodewords:512,errorCodewordsPerBlock:28},H:{groups:[[19,16],[6,17]],totalDataCodewords:406,errorCodewordsPerBlock:30}},{L:{groups:[[2,111],[7,112]],totalDataCodewords:1006,errorCodewordsPerBlock:28},M:{groups:[[17,46]],totalDataCodewords:782,errorCodewordsPerBlock:28},Q:{groups:[[7,24],[16,25]],totalDataCodewords:568,errorCodewordsPerBlock:30},H:{groups:[[34,13]],totalDataCodewords:442,errorCodewordsPerBlock:24}},{L:{groups:[[4,121],[5,122]],totalDataCodewords:1094,errorCodewordsPerBlock:30},M:{groups:[[4,47],[14,48]],totalDataCodewords:860,errorCodewordsPerBlock:28},Q:{groups:[[11,24],[14,25]],totalDataCodewords:614,errorCodewordsPerBlock:30},H:{groups:[[16,15],[14,16]],totalDataCodewords:464,errorCodewordsPerBlock:30}},{L:{groups:[[6,117],[4,118]],totalDataCodewords:1174,errorCodewordsPerBlock:30},M:{groups:[[6,45],[14,46]],totalDataCodewords:914,errorCodewordsPerBlock:28},Q:{groups:[[11,24],[16,25]],totalDataCodewords:664,errorCodewordsPerBlock:30},H:{groups:[[30,16],[2,17]],totalDataCodewords:514,errorCodewordsPerBlock:30}},{L:{groups:[[8,106],[4,107]],totalDataCodewords:1276,errorCodewordsPerBlock:26},M:{groups:[[8,47],[13,48]],totalDataCodewords:1e3,errorCodewordsPerBlock:28},Q:{groups:[[7,24],[22,25]],totalDataCodewords:718,errorCodewordsPerBlock:30},H:{groups:[[22,15],[13,16]],totalDataCodewords:538,errorCodewordsPerBlock:30}},{L:{groups:[[10,114],[2,115]],totalDataCodewords:1370,errorCodewordsPerBlock:28},M:{groups:[[19,46],[4,47]],totalDataCodewords:1062,errorCodewordsPerBlock:28},Q:{groups:[[28,22],[6,23]],totalDataCodewords:754,errorCodewordsPerBlock:28},H:{groups:[[33,16],[4,17]],totalDataCodewords:596,errorCodewordsPerBlock:30}},{L:{groups:[[8,122],[4,123]],totalDataCodewords:1468,errorCodewordsPerBlock:30},M:{groups:[[22,45],[3,46]],totalDataCodewords:1128,errorCodewordsPerBlock:28},Q:{groups:[[8,23],[26,24]],totalDataCodewords:808,errorCodewordsPerBlock:30},H:{groups:[[12,15],[28,16]],totalDataCodewords:628,errorCodewordsPerBlock:30}},{L:{groups:[[3,117],[10,118]],totalDataCodewords:1531,errorCodewordsPerBlock:30},M:{groups:[[3,45],[23,46]],totalDataCodewords:1193,errorCodewordsPerBlock:28},Q:{groups:[[4,24],[31,25]],totalDataCodewords:871,errorCodewordsPerBlock:30},H:{groups:[[11,15],[31,16]],totalDataCodewords:661,errorCodewordsPerBlock:30}},{L:{groups:[[7,116],[7,117]],totalDataCodewords:1631,errorCodewordsPerBlock:30},M:{groups:[[21,45],[7,46]],totalDataCodewords:1267,errorCodewordsPerBlock:28},Q:{groups:[[1,23],[37,24]],totalDataCodewords:911,errorCodewordsPerBlock:30},H:{groups:[[19,15],[26,16]],totalDataCodewords:701,errorCodewordsPerBlock:30}},{L:{groups:[[5,115],[10,116]],totalDataCodewords:1735,errorCodewordsPerBlock:30},M:{groups:[[19,47],[10,48]],totalDataCodewords:1373,errorCodewordsPerBlock:28},Q:{groups:[[15,24],[25,25]],totalDataCodewords:985,errorCodewordsPerBlock:30},H:{groups:[[23,15],[25,16]],totalDataCodewords:745,errorCodewordsPerBlock:30}},{L:{groups:[[13,115],[3,116]],totalDataCodewords:1843,errorCodewordsPerBlock:30},M:{groups:[[2,46],[29,47]],totalDataCodewords:1455,errorCodewordsPerBlock:28},Q:{groups:[[42,24],[1,25]],totalDataCodewords:1033,errorCodewordsPerBlock:30},H:{groups:[[23,15],[28,16]],totalDataCodewords:793,errorCodewordsPerBlock:30}},{L:{groups:[[17,115]],totalDataCodewords:1955,errorCodewordsPerBlock:30},M:{groups:[[10,46],[23,47]],totalDataCodewords:1541,errorCodewordsPerBlock:28},Q:{groups:[[10,24],[35,25]],totalDataCodewords:1115,errorCodewordsPerBlock:30},H:{groups:[[19,15],[35,16]],totalDataCodewords:845,errorCodewordsPerBlock:30}},{L:{groups:[[17,115],[1,116]],totalDataCodewords:2071,errorCodewordsPerBlock:30},M:{groups:[[14,46],[21,47]],totalDataCodewords:1631,errorCodewordsPerBlock:28},Q:{groups:[[29,24],[19,25]],totalDataCodewords:1171,errorCodewordsPerBlock:30},H:{groups:[[11,15],[46,16]],totalDataCodewords:901,errorCodewordsPerBlock:30}},{L:{groups:[[13,115],[6,116]],totalDataCodewords:2191,errorCodewordsPerBlock:30},M:{groups:[[14,46],[23,47]],totalDataCodewords:1725,errorCodewordsPerBlock:28},Q:{groups:[[44,24],[7,25]],totalDataCodewords:1231,errorCodewordsPerBlock:30},H:{groups:[[59,16],[1,17]],totalDataCodewords:961,errorCodewordsPerBlock:30}},{L:{groups:[[12,121],[7,122]],totalDataCodewords:2306,errorCodewordsPerBlock:30},M:{groups:[[12,47],[26,48]],totalDataCodewords:1812,errorCodewordsPerBlock:28},Q:{groups:[[39,24],[14,25]],totalDataCodewords:1286,errorCodewordsPerBlock:30},H:{groups:[[22,15],[41,16]],totalDataCodewords:986,errorCodewordsPerBlock:30}},{L:{groups:[[6,121],[14,122]],totalDataCodewords:2434,errorCodewordsPerBlock:30},M:{groups:[[6,47],[34,48]],totalDataCodewords:1914,errorCodewordsPerBlock:28},Q:{groups:[[46,24],[10,25]],totalDataCodewords:1354,errorCodewordsPerBlock:30},H:{groups:[[2,15],[64,16]],totalDataCodewords:1054,errorCodewordsPerBlock:30}},{L:{groups:[[17,122],[4,123]],totalDataCodewords:2566,errorCodewordsPerBlock:30},M:{groups:[[29,46],[14,47]],totalDataCodewords:1992,errorCodewordsPerBlock:28},Q:{groups:[[49,24],[10,25]],totalDataCodewords:1426,errorCodewordsPerBlock:30},H:{groups:[[24,15],[46,16]],totalDataCodewords:1096,errorCodewordsPerBlock:30}},{L:{groups:[[4,122],[18,123]],totalDataCodewords:2702,errorCodewordsPerBlock:30},M:{groups:[[13,46],[32,47]],totalDataCodewords:2102,errorCodewordsPerBlock:28},Q:{groups:[[48,24],[14,25]],totalDataCodewords:1502,errorCodewordsPerBlock:30},H:{groups:[[42,15],[32,16]],totalDataCodewords:1142,errorCodewordsPerBlock:30}},{L:{groups:[[20,117],[4,118]],totalDataCodewords:2812,errorCodewordsPerBlock:30},M:{groups:[[40,47],[7,48]],totalDataCodewords:2216,errorCodewordsPerBlock:28},Q:{groups:[[43,24],[22,25]],totalDataCodewords:1582,errorCodewordsPerBlock:30},H:{groups:[[10,15],[67,16]],totalDataCodewords:1222,errorCodewordsPerBlock:30}},{L:{groups:[[19,118],[6,119]],totalDataCodewords:2956,errorCodewordsPerBlock:30},M:{groups:[[18,47],[31,48]],totalDataCodewords:2334,errorCodewordsPerBlock:28},Q:{groups:[[34,24],[34,25]],totalDataCodewords:1666,errorCodewordsPerBlock:30},H:{groups:[[20,15],[61,16]],totalDataCodewords:1276,errorCodewordsPerBlock:30}}],i=[1,0,1,1,1],N=[1,0,1],O={L:"01",M:"00",Q:"11",H:"10"},V="101010000010010",W="10100110111",U="1111100100101",j=["11101100","00010001"],G=93,s=[function(e,t){return(e+t)%2===0},function(e){return e%2===0},function(e,t){return t%3===0},function(e,t){return(e+t)%3===0},function(e,t){return(Math.floor(e/2)+Math.floor(t/3))%2===0},function(e,t){return e*t%2+e*t%3===0},function(e,t){return(e*t%2+e*t%3)%2===0},function(e,t){return((e+t)%2+e*t%3)%2===0}],q=/^\d+/,l="A-Z0-9 $%*+./:-",$="A-Z $%*+./:-",K=new RegExp("^["+$+"]+"),g=new RegExp("^["+l+"]+"),Y=new RegExp("^[^"+l+"]+"),Q=8,X=5,Z=8,J=17,ee=9,te=16,_=Math.round;function b(e){return parseInt(e,2)}function w(e,t){var i=Number(e).toString(2);if(i.length<t){i=new Array(t-i.length+1).join(0)+i}return i}function ie(e,t){var i=[],n=0;while(n<e.length){i.push(e.substring(n,n+t));n+=t}return i}var k=e.Class.extend({getVersionIndex:function(e){if(e<10){return 0}else if(e>26){return 2}return 1},getBitsCharacterCount:function(e){var t=this;return t.bitsInCharacterCount[t.getVersionIndex(e||40)]},getModeCountString:function(e,t){var i=this;return i.modeIndicator+w(e,i.getBitsCharacterCount(t))},encode:function(){},getStringBitsLength:function(){},getValue:function(){},modeIndicator:"",bitsInCharacterCount:[]});var y={};y[h]=k.extend({bitsInCharacterCount:[10,12,14],modeIndicator:"0001",getValue:function(e){return parseInt(e,10)},encode:function(e,t){var i=this,n=ie(e,3),r=i.getModeCountString(e.length,t);for(var a=0;a<n.length-1;a++){r+=w(n[a],10)}return r+w(n[a],1+3*n[a].length)},getStringBitsLength:function(e,t){var i=e%3;return 4+this.getBitsCharacterCount(t)+10*Math.floor(e/3)+3*i+(i===0?0:1)}});y[p]=k.extend({characters:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,I:18,J:19,K:20,L:21,M:22,N:23,O:24,P:25,Q:26,R:27,S:28,T:29,U:30,V:31,W:32,X:33,Y:34,Z:35," ":36,$:37,"%":38,"*":39,"+":40,"-":41,".":42,"/":43,":":44},bitsInCharacterCount:[9,11,13],modeIndicator:"0010",getValue:function(e){return this.characters[e]},encode:function(e,t){var i=this,n=ie(e,2),r=i.getModeCountString(e.length,t),a;for(var o=0;o<n.length-1;o++){a=45*i.getValue(n[o].charAt(0))+i.getValue(n[o].charAt(1));r+=w(a,11)}a=n[o].length==2?45*i.getValue(n[o].charAt(0))+i.getValue(n[o].charAt(1)):i.getValue(n[o].charAt(0));return r+w(a,1+5*n[o].length)},getStringBitsLength:function(e,t){return 4+this.getBitsCharacterCount(t)+11*Math.floor(e/2)+6*(e%2)}});y[v]=k.extend({bitsInCharacterCount:[8,16,16],modeIndicator:"0100",getValue:function(e){var t=e.charCodeAt(0);if(t<=127||160<=t&&t<=255){return t}else{throw new Error("Unsupported character: "+e)}},encode:function(e,t){var i=this,n=i.getModeCountString(e.length,t);for(var r=0;r<e.length;r++){n+=w(i.getValue(e.charAt(r)),8)}return n},getStringBitsLength:function(e,t){return 4+this.getBitsCharacterCount(t)+8*e}});var x={};for(var ne in y){x[ne]=new y[ne]}var re=function(e){var t=this,i=e.length-1,n=e.length-1,r=n,a=-1,o=0;t.move=function(){i+=a*o;o^=1;n=r-o};t.getNextCell=function(){while(e[i][n]!==c){t.move();if(i<0||i>=e.length){a=-a;r-=r!=8?2:3;n=r;i=a<0?e.length-1:0}}return{row:i,column:n}};t.getNextRemainderCell=function(){t.move();if(e[i][n]===c){return{row:i,column:n}}}};function C(e,t,i,n){for(var r=0;r<e.length;r++){e[r][i][n]=t}}function ae(e,t,i,n){for(var r=0;r<s.length;r++){e[r][i][n]=s[r](i,n)?t^1:parseInt(t,10)}}var oe=function(e,t){var i=new re(e[0]),n,r,a;for(var o=0;o<t.length;o++){n=t[o];r=0;while(n.length>0){for(var s=0;s<n.length;s++){for(var l=0;l<8;l++){a=i.getNextCell();ae(e,n[s][r].charAt(l),a.row,a.column)}}r++;while(n[0]&&r==n[0].length){n.splice(0,1)}}}while(a=i.getNextRemainderCell()){ae(e,0,a.row,a.column)}};var se=function(e,t){var i=t*8,n=0,r=0;while(e.length<i&&n<a.length){e+=a.charAt(n++)}if(e.length%8!==0){e+=new Array(9-e.length%8).join("0")}while(e.length<i){e+=j[r];r^=1}return e};function le(){var e;for(var t=1;t<255;t++){e=o[t-1]*2;if(e>255){e=e^285}o[t]=e;d[e]=t}e=o[t-1]*2^285;o[t]=e;o[-1]=0}var de=function(e,t){var i=[],n=e.length-2;for(var r=n;r>=0;r--){i[r]=e[r]^t[r]}return i};var ue=function(e,t){var i=[];for(var n=0;n<e.length;n++){for(var r=0;r<t.length;r++){if(i[n+r]===c){i[n+r]=(e[n]+(t[r]>=0?t[r]:0))%255}else{i[n+r]=d[o[i[n+r]]^o[(e[n]+t[r])%255]]}}}return i};function ce(){var e=68;for(var t=2;t<=e;t++){var i=u[t-1],n=[t,0];u[t]=ue(i,n)}}le();ce();function fe(e,t){var i=[],n=e.length-1;do{i[n]=o[(e[n]+t)%255];n--}while(e[n]!==c);return i}var he=function(e,t){var i=u[t-1],n=new Array(t).concat(e),r=new Array(n.length-i.length).concat(i),a=e.length,o=[],s,l;for(l=0;l<a;l++){s=fe(r,d[n[n.length-1]]);r.splice(0,1);n=de(s,n)}for(l=n.length-1;l>=0;l--){o[t-1-l]=w(n[l],8)}return o};var pe=function(e,t){var i=0,n=[],r=[],a,o=t.groups,s,l,d,u;for(var c=0;c<o.length;c++){l=o[c][0];for(var f=0;f<l;f++){s=o[c][1];a=[];d=[];for(var h=1;h<=s;h++){u=e.substring(i,i+8);a.push(u);d[s-h]=b(u);i+=8}n.push(a);r.push(he(d,t.errorCodewordsPerBlock))}}return[n,r]};var S=function(e,t,i,n,r){var a=q.exec(e),o=a?a[0]:"",s=K.exec(e),l=s?s[0]:"",d=g.exec(e),u=d?d[0]:"",c,f;if(o&&(o.length>=t||e.length==o.length||o.length>=i&&!g.test(e.charAt(o.length)))){c=h;f=o}else if(u&&(e.length==u.length||u.length>=n||r==p)){c=p;f=o||l}else{c=v;if(u){f=u+Y.exec(e.substring(u.length))[0]}else{f=Y.exec(e)[0]}}return{mode:c,modeString:f}};var ve=function(e){var t=[],i,n=0;t.push(S(e,Q,X,Z,i));i=t[0].mode;e=e.substr(t[0].modeString.length);while(e.length>0){var r=S(e,J,ee,te,i);if(r.mode!=i){i=r.mode;t.push(r);n++}else{t[n].modeString+=r.modeString}e=e.substr(r.modeString.length)}return t};var me=function(e){var t=0,i;for(var n=0;n<e.length;n++){i=x[e[n].mode];t+=i.getStringBitsLength(e[n].modeString.length)}return Math.ceil(t/8)};var T=function(e,t){var i=0,n=m.length-1,r=Math.floor(m.length/2);do{if(e<m[r][t].totalDataCodewords){n=r}else{i=r}r=i+Math.floor((n-i)/2)}while(n-i>1);if(e<=m[i][t].totalDataCodewords){return r+1}return n+1};var ge=function(e,t){var i="",n;for(var r=0;r<e.length;r++){n=x[e[r].mode];i+=n.encode(e[r].modeString,t)}return i};var _e=function(e){var t=b(e),i,n="";if(t===0){return"101010000010010"}else{i=D(b(e),W,15)}for(var r=0;r<i.length;r++){n+=i.charAt(r)^V.charAt(r)}return n};var D=function(e,t,i){var n=b(t),r=t.length-1,a=e<<r,o=i-r,s=w(e,o),l=be(a,n);l=s+w(l,r);return l};var be=function(e,t){var i=t.toString(2).length,n=e.toString(2).length;do{e^=t<<n-i;n=e.toString(2).length}while(n>=i);return e};function A(e,t){return parseInt(e.charAt(t),10)}var we=function(e){var t=[],i=17+4*e;for(var n=0;n<s.length;n++){t[n]=new Array(i);for(var r=0;r<i;r++){t[n][r]=new Array(i)}}return t};var E=function(e,t){var i=e[0],n,r,a=0,o=t.length;for(n=0,r=8;n<=8;n++){if(n!==6){C(e,A(t,o-1-a++),n,r)}}for(n=8,r=7;r>=0;r--){if(r!==6){C(e,A(t,o-1-a++),n,r)}}a=0;for(r=i.length-1,n=8;r>=i.length-8;r--){C(e,A(t,o-1-a++),n,r)}C(e,1,i.length-8,8);for(n=i.length-7,r=8;n<i.length;n++){C(e,A(t,o-1-a++),n,r)}};var ke=function(e){return D(e,U,18)};var I=function(e,t){var i=e[0],n=i.length,r=0,a=n-11,o=n-11,s=0,l,d,u;for(var c=0;c<t.length;c++){l=Math.floor(c/3);d=c%3;u=A(t,t.length-c-1);C(e,u,r+l,a+d);C(e,u,o+d,s+l)}};var M=function(e,t,i,n){var r=t.length+2,a=t.length+1,o;for(var s=0;s<t.length;s++){for(var l=s;l<r-s;l++){o=t[s];C(e,o,i+l,n+s);C(e,o,i+s,n+l);C(e,o,i+a-l,n+a-s);C(e,o,i+a-s,n+a-l)}}};var R=function(e,t,i,n){var r=i,a=n,o=e[0];do{C(e,0,r,n);C(e,0,i,a);r+=t[0];a+=t[1]}while(r>=0&&r<o.length)};var ye=function(e){var t=e[0].length;M(e,i,0,0);R(e,[-1,-1],7,7);M(e,i,t-7,0);R(e,[1,-1],t-8,7);M(e,i,0,t-7);R(e,[-1,1],7,t-8)};var xe=function(e,t){if(t<2){return}var i=e[0],n=i.length,r=Math.floor(t/7),a=[6],o,s,l=0;if(o=H[t]){s=(n-13-o)/r}else{o=s=(n-13)/(r+1)}a.push(a[l++]+o);while(a[l]+s<n){a.push(a[l++]+s)}for(var d=0;d<a.length;d++){for(var u=0;u<a.length;u++){if(i[a[d]][a[u]]===c){M(e,N,a[d]-2,a[u]-2)}}}};var Ce=function(e){var t=6,i=6,n=1,r=e[0].length;for(var a=8;a<r-8;a++){C(e,n,t,a);C(e,n,a,i);n^=1}};var Se=function(e){var t=[],i=[],n=[],r=[],a=[],o,s,l=0,d=1,u=e[0].length;for(s=0;s<e.length;s++){t[s]=0;n[s]=0;a[s]=[0,0];r[s]=[0,0];i[s]=[]}for(s=0;s<u;s++){for(var c=0;c<u;c++){for(var f=0;f<e.length;f++){o=e[f];n[f]+=parseInt(o[s][c],10);if(i[f][l]===o[s][c]&&s+1<u&&c-1>=0&&o[s+1][c]==i[f][l]&&o[s+1][c-1]==i[f][l]){t[f]+=3}Te(f,r,t,l,o[s][c]);Te(f,r,t,d,o[c][s]);De(f,t,i,o[s][c],a,l);De(f,t,i,o[c][s],a,d)}}}var h=u*u,p,v=Number.MAX_VALUE;for(s=0;s<t.length;s++){t[s]+=Ae(n[s],h);if(t[s]<v){v=t[s];p=s}}return p};function Te(e,t,i,n,r){t[e][n]=(t[e][n]<<1^r)%128;if(t[e][n]==G){i[e]+=40}}function De(e,t,i,n,r,a){if(i[e][a]==n){r[e][a]++}else{i[e][a]=n;if(r[e][a]>=5){t[e]+=3+r[e][a]-5}r[e][a]=1}}function Ae(e,t){var i=Math.floor(e/t*100),n=i%5,r=Math.abs(i-n-50),a=Math.abs(i+5-n-50),o=10*Math.min(r/5,a/5);return o}var Ee=function(e,t){this.dataString=e;this.version=t};var Ie=function(){this.getEncodingResult=function(e,t){var i=ve(e),n=me(i),r=T(n,t),a=ge(i,r);return new Ee(a,r)}};var F=function(){this.mode=x[this.encodingMode]};F.fn=F.prototype={encodingMode:v,utfBOM:"111011111011101110111111",initialModeCountStringLength:20,getEncodingResult:function(e,t){var i=this,n=i.encode(e),r=i.getDataCodewordsCount(n),a=T(r,t),o=i.mode.getModeCountString(n.length/8,a)+n;return new Ee(o,a)},getDataCodewordsCount:function(e){var t=this,i=e.length,n=Math.ceil((t.initialModeCountStringLength+i)/8);return n},encode:function(e){var t=this,i=t.utfBOM;for(var n=0;n<e.length;n++){i+=t.encodeCharacter(e.charCodeAt(n))}return i},encodeCharacter:function(e){var t=this.getBytesCount(e),i=t-1,n="";if(t==1){n=w(e,8)}else{var r=8-t;for(var a=0;a<i;a++){n=w(e>>a*6&63|128,8)+n}n=(e>>i*6|255>>r<<r).toString(2)+n}return n},getBytesCount:function(e){var t=this.ranges;for(var i=0;i<t.length;i++){if(e<t[i]){return i+1}}},ranges:[128,2048,65536,2097152,67108864]};var Me=function(e){if(e&&e.toLowerCase().indexOf("utf_8")>=0){return new F}else{return new Ie}};var Re=function(e,t,i){var n=new Me(i),r=n.getEncodingResult(e,t),a=r.version,o=m[a-1][t],s=se(r.dataString,o.totalDataCodewords),l=pe(s,o),d=we(a);ye(d);xe(d,a);Ce(d);if(a>=7){I(d,w(0,18))}E(d,w(0,15));oe(d,l);var u=Se(d),c=d[u];if(a>=7){I([c],ke(a))}var f=O[t]+w(u,3);E([c],_e(f));return c};var P={DEFAULT_SIZE:200,QUIET_ZONE_LENGTH:4,DEFAULT_ERROR_CORRECTION_LEVEL:"L",DEFAULT_BACKGROUND:"#fff",DEFAULT_DARK_MODULE_COLOR:"#000",MIN_BASE_UNIT_SIZE:1};var z=r.extend({init:function(e,t){var i=this;r.fn.init.call(i,e,t);i.element=n(e);i.wrapper=i.element;i.element.addClass("k-qrcode");i.surfaceWrap=n("<div />").css("position","relative").appendTo(this.element);i.surface=f.Surface.create(i.surfaceWrap,{type:i.options.renderAs});i.setOptions(t)},redraw:function(){var e=this._getSize();this.surfaceWrap.css({width:e,height:e});this.surface.clear();this.surface.resize();this.createVisual();this.surface.draw(this.visual)},getSize:function(){return e.dimensions(this.element)},_resize:function(){this.redraw()},createVisual:function(){this.visual=this._render()},exportVisual:function(){return this._render()},_render:function(){var e=this,t=e._value,i,n=e.options.border||{},r=e.options.padding||0,a=n.width||0,o,s,l,d,u;n.width=a;var c=new f.Group;if(t){s=Re(t,e.options.errorCorrection,e.options.encoding);l=e._getSize();u=l-2*(a+r);i=e._calculateBaseUnit(u,s.length);d=s.length*i;o=a+r+(u-d)/2;c.append(e._renderBackground(l,n));c.append(e._renderMatrix(s,i,o))}return c},_getSize:function(){var e=this,t;if(e.options.size){t=parseInt(e.options.size,10)}else{var i=e.element,n=Math.min(i.width(),i.height());if(n>0){t=n}else{t=P.DEFAULT_SIZE}}return t},_calculateBaseUnit:function(e,t){var i=Math.floor(e/t);if(i<P.MIN_BASE_UNIT_SIZE){throw new Error("Insufficient size.")}if(i*t>=e&&i-1>=P.MIN_BASE_UNIT_SIZE){i--}return i},_renderMatrix:function(e,t,i){var n=new f.MultiPath({fill:{color:this.options.color},stroke:null});for(var r=0;r<e.length;r++){var a=i+r*t;var o=0;while(o<e.length){while(e[r][o]===0&&o<e.length){o++}if(o<e.length){var s=o;while(e[r][o]==1){o++}var l=_(i+s*t);var d=_(a);var u=_(i+o*t);var c=_(a+t);n.moveTo(l,d).lineTo(l,c).lineTo(u,c).lineTo(u,d).close()}}}return n},_renderBackground:function(e,t){var i=new L(0,0,e,e).unpad(t.width/2);return f.Path.fromRect(i.toRect(),{fill:{color:this.options.background},stroke:{color:t.color,width:t.width}})},setOptions:function(e){var t=this;e=e||{};t.options=B(t.options,e);if(e.value!==c){t._value=t.options.value+""}t.redraw()},value:function(e){var t=this;if(e===c){return t._value}t._value=e+"";t.redraw()},options:{name:"QRCode",renderAs:"svg",encoding:"ISO_8859_1",value:"",errorCorrection:P.DEFAULT_ERROR_CORRECTION_LEVEL,background:P.DEFAULT_BACKGROUND,color:P.DEFAULT_DARK_MODULE_COLOR,size:"",padding:0,border:{color:"",width:0}}});t.ExportMixin.extend(z.fn);t.ui.plugin(z);e.deepExtend(t,{QRCode:z,QRCodeDefaults:P,QRCodeFunctions:{FreeCellVisitor:re,fillData:oe,padDataString:se,generateErrorCodewords:he,xorPolynomials:de,getBlocks:pe,multiplyPolynomials:ue,chooseMode:S,getModes:ve,getDataCodewordsCount:me,getVersion:T,getDataString:ge,encodeFormatInformation:_e,encodeBCH:D,dividePolynomials:be,initMatrices:we,addFormatInformation:E,encodeVersionInformation:ke,addVersionInformation:I,addCentricPattern:M,addFinderSeparator:R,addFinderPatterns:ye,addAlignmentPatterns:xe,addTimingFunctions:Ce,scoreMaskMatrixes:Se,encodeData:Re,UTF8Encoder:F},QRCodeFields:{modes:x,powersOfTwo:d,powersOfTwoResult:o,generatorPolynomials:u}})})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("dataviz/stock/kendo-stock-chart",["kendo.dataviz.chart"],e)})(function(){(function(){window.kendo.dataviz=window.kendo.dataviz||{};var b=kendo.dataviz;var w=b.elementStyles;var d=b.deepExtend;var k=b.toTime;var u=b.constants;var a=b.Chart;var e=kendo.drawing;var t=e.Animation.extend({setup:function(){this._initialOpacity=parseFloat(w(this.element,"opacity").opacity)},step:function(e){w(this.element,{opacity:String(b.interpolateValue(this._initialOpacity,0,e))})},abort:function(){e.Animation.fn.abort.call(this);w(this.element,{display:"none",opacity:String(this._initialOpacity)})},cancel:function(){e.Animation.fn.abort.call(this);w(this.element,{opacity:String(this._initialOpacity)})}});function n(e,t){var i=document.createElement("div");i.className=e;if(t){i.style.cssText=t}return i}var f=b.Class.extend({init:function(e,t,i){this.options=d({},this.options,i);this.container=e;this.chartService=t;var n=w(e,["paddingLeft","paddingTop"]);this.chartPadding={top:n.paddingTop,left:n.paddingLeft};this.createElements();e.appendChild(this.element)},createElements:function(){var e=this.element=n("k-navigator-hint","display: none; position: absolute; top: 1px; left: 1px;");var t=this.tooltip=n("k-tooltip k-chart-tooltip");var i=this.scroll=n("k-scroll");t.innerHTML="&nbsp;";e.appendChild(t);e.appendChild(i)},show:function(e,t,i){var n=this;var r=n.element;var a=n.options;var o=n.scroll;var s=n.tooltip;var l=b.toDate(k(e)+k(t-e)/2);var d=i.width()*.4;var u=i.center().x-d;var c=i.center().x;var f=c-u;var h=a.max-a.min;var p=f/h;var v=l-a.min;var m=this.chartService.intl.format(a.format,e,t);var g=b.getTemplate(a);this.clearHideTimeout();if(!this._visible){w(r,{visibility:"hidden",display:"block"});this._visible=true}if(g){m=g({from:e,to:t})}s.innerHTML=m;w(s,{left:i.center().x-s.offsetWidth/2,top:i.y1});var _=w(s,["marginTop","borderTopWidth","height"]);w(o,{width:d,left:u+v*p,top:i.y1+_.marginTop+_.borderTopWidth+_.height/2});w(r,{visibility:"visible"})},clearHideTimeout:function(){if(this._hideTimeout){clearTimeout(this._hideTimeout)}if(this._hideAnimation){this._hideAnimation.cancel()}},hide:function(){var e=this;this.clearHideTimeout();this._hideTimeout=setTimeout(function(){e._visible=false;e._hideAnimation=new t(e.element);e._hideAnimation.setup();e._hideAnimation.play()},this.options.hideDelay)},destroy:function(){this.clearHideTimeout();if(this.container){this.container.removeChild(this.element)}delete this.container;delete this.chartService;delete this.element;delete this.tooltip;delete this.scroll}});b.setDefaultOptions(f,{format:"{0:d} - {1:d}",hideDelay:500});var c="_navigator";var h=c;var i={NAVIGATOR_AXIS:h,NAVIGATOR_PANE:c};var p=3;var o=b.Class.extend({init:function(e){this.chart=e;var t=this.options=d({},this.options,e.options.navigator);var i=t.select;if(i){i.from=this.parseDate(i.from);i.to=this.parseDate(i.to)}if(!b.defined(t.hint.visible)){t.hint.visible=t.visible}var n;this.chartObserver=new b.InstanceObserver(this,(n={},n[u.DRAG]="_drag",n[u.DRAG_END]="_dragEnd",n[u.ZOOM]="_zoom",n[u.ZOOM_END]="_zoomEnd",n));e.addObserver(this.chartObserver)},parseDate:function(e){return b.parseDate(this.chart.chartService.intl,e)},clean:function(){if(this.selection){this.selection.destroy();this.selection=null}if(this.hint){this.hint.destroy();this.hint=null}},destroy:function(){if(this.chart){this.chart.removeObserver(this.chartObserver);delete this.chart}this.clean()},redraw:function(){this._redrawSelf();this.initSelection()},initSelection:function(){var e=this;var t=e.chart;var i=e.options;var n=this.mainAxis();var r=n.roundedRange();var a=r.min;var o=r.max;var s=i.select;var l=s.from;var d=s.to;var u=s.mousewheel;var c=v(n);if(n.categoriesCount()===0){return}this.clean();c.box=n.box;this.selection=new b.Selection(t,c,{min:a,max:o,from:l||a,to:d||o,mousewheel:b.valueOrDefault(u,{zoom:"left"}),visible:i.visible},new b.InstanceObserver(this,{selectStart:"_selectStart",select:"_select",selectEnd:"_selectEnd"}));if(i.hint.visible){this.hint=new f(t.element,t.chartService,{min:a,max:o,template:b.getTemplate(i.hint),format:i.hint.format})}},setRange:function(){var e=this.chart._createPlotArea(true);var t=e.namedCategoryAxes[h];var i=t.roundedRange();var n=i.min;var r=i.max;var a=this.options.select||{};var o=a.from||n;if(o<n){o=n}var s=a.to||r;if(s>r){s=r}this.options.select=d({},a,{from:o,to:s});this.filterAxes()},_redrawSelf:function(e){var t=this.chart._plotArea;if(t){t.redraw(b.last(t.panes),e)}},redrawSlaves:function(){var e=this.chart;var t=e._plotArea;var i=t.panes.slice(0,-1);t.srcSeries=e.options.series;t.options.categoryAxis=e.options.categoryAxis;t.clearSeriesPointsCache();t.redraw(i)},_drag:function(e){var t=this;var i=t.chart;var n=t.selection;var r=i._eventCoordinates(e.originalEvent);var a=this.mainAxis();var o=a.roundedRange();var s=a.pane.box.containsPoint(r);var l=i._plotArea.categoryAxis;var d=e.axisRanges[l.options.name];var u=this.options.select;var c;if(!d||s||!n){return}if(u.from&&u.to){c=k(u.to)-k(u.from)}else{c=k(n.options.to)-k(n.options.from)}var f=b.toDate(b.limitValue(k(d.min),o.min,k(o.max)-c));var h=b.toDate(b.limitValue(k(f)+c,k(o.min)+c,o.max));this.options.select={from:f,to:h};if(this.options.liveDrag){this.filterAxes();this.redrawSlaves()}n.set(f,h);this.showHint(f,h)},_dragEnd:function(){this.filterAxes();this.filter();this.redrawSlaves();if(this.hint){this.hint.hide()}},readSelection:function(){var e=this;var t=e.selection.options;var i=t.from;var n=t.to;var r=e.options.select;r.from=i;r.to=n},filterAxes:function(){var e=this;var t=e.options.select;if(t===void 0){t={}}var i=e.chart;var n=i.options.categoryAxis;var r=t.from;var a=t.to;for(var o=0;o<n.length;o++){var s=n[o];if(s.pane!==c){s.min=r;s.max=a}}},filter:function(){var e=this;var t=e.chart;var i=e.options.select;if(!t.requiresHandlers(["navigatorFilter"])){return}var n=this.mainAxis();var r={from:i.from,to:i.to};if(n.options.type!=="category"){var a=new b.DateCategoryAxis(d({baseUnit:"fit"},t.options.categoryAxis[0],{categories:[i.from,i.to]}),t.chartService).options;r.from=b.addDuration(a.min,-a.baseUnitStep,a.baseUnit);r.to=b.addDuration(a.max,a.baseUnitStep,a.baseUnit)}this.chart.trigger("navigatorFilter",r)},_zoom:function(e){var t=this;var i=t.chart._plotArea.categoryAxis;var n=t.selection;var r=t.options;var a=r.select;var o=r.liveDrag;var s=this.mainAxis();var l=e.delta;if(!n){return}var d=s.categoryIndex(n.options.from);var u=s.categoryIndex(n.options.to);e.originalEvent.preventDefault();if(Math.abs(l)>1){l*=p}if(u-d>1){n.expand(l);this.readSelection()}else{i.options.min=a.from;a.from=i.scaleRange(-e.delta).min}if(o){this.filterAxes();this.redrawSlaves()}n.set(a.from,a.to);this.showHint(this.options.select.from,this.options.select.to)},_zoomEnd:function(e){this._dragEnd(e)},showHint:function(e,t){var i=this.chart._plotArea;if(this.hint){this.hint.show(e,t,i.backgroundBox())}},_selectStart:function(e){return this.chart._selectStart(e)},_select:function(e){this.showHint(e.from,e.to);return this.chart._select(e)},_selectEnd:function(e){if(this.hint){this.hint.hide()}this.readSelection();this.filterAxes();this.filter();this.redrawSlaves();return this.chart._selectEnd(e)},mainAxis:function(){var e=this.chart._plotArea;if(e){return e.namedCategoryAxes[h]}},select:function(e,t){var i=this.options.select;if(e&&t){i.from=this.parseDate(e);i.to=this.parseDate(t);this.filterAxes();this.filter();this.redrawSlaves();this.selection.set(e,t)}return{from:i.from,to:i.to}}});o.setup=function(e,t){if(e===void 0){e={}}if(t===void 0){t={}}if(e.__navi){return}e.__navi=true;var i=d({},t.navigator,e.navigator);var n=e.panes=[].concat(e.panes);var r=d({},i.pane,{name:c});if(!i.visible){r.visible=false;r.height=.1}n.push(r);o.attachAxes(e,i);o.attachSeries(e,i,t)};o.attachAxes=function(e,t){var i=t.series||[];var n=e.categoryAxis=[].concat(e.categoryAxis);var r=e.valueAxis=[].concat(e.valueAxis);var a=b.filterSeriesByType(i,u.EQUALLY_SPACED_SERIES);var o=a.length===0;var s=d({type:"date",pane:c,roundToBaseUnit:!o,justified:o,_collapse:false,majorTicks:{visible:true},tooltip:{visible:false},labels:{step:1},autoBind:t.autoBindElements,autoBaseUnitSteps:{minutes:[1],hours:[1,2],days:[1,2],weeks:[],months:[1],years:[1]}});var l=t.categoryAxis;n.push(d({},s,{maxDateGroups:200},l,{name:h,title:null,baseUnit:"fit",baseUnitStep:"auto",labels:{visible:false},majorTicks:{visible:false}}),d({},s,l,{name:h+"_labels",maxDateGroups:20,baseUnitStep:"auto",labels:{position:""},plotBands:[],autoBaseUnitSteps:{minutes:[]},_overlap:true}),d({},s,l,{name:h+"_ticks",maxDateGroups:200,majorTicks:{width:.5},plotBands:[],title:null,labels:{visible:false,mirror:true},_overlap:true}));r.push(d({name:h,pane:c,majorGridLines:{visible:false},visible:false},t.valueAxis))};o.attachSeries=function(e,t,i){var n=e.series=e.series||[];var r=[].concat(t.series||[]);var a=i.seriesColors;var o=t.seriesDefaults;for(var s=0;s<r.length;s++){n.push(d({color:a[s%a.length],categoryField:t.dateField,visibleInLegend:false,tooltip:{visible:false}},o,r[s],{axis:h,categoryAxis:h,autoBind:t.autoBindElements}))}};function r(){}function v(e){r.prototype=e;return new r}var s=28;var l=a.extend({applyDefaults:function(e,t){var i=b.elementSize(this.element).width||u.DEFAULT_WIDTH;var n=t;var r={seriesDefaults:{categoryField:e.dateField},axisDefaults:{categoryAxis:{name:"default",majorGridLines:{visible:false},labels:{step:2},majorTicks:{visible:false},maxDateGroups:Math.floor(i/s)}}};if(n){n=d({},n,r)}o.setup(e,n);a.fn.applyDefaults.call(this,e,n)},_setElementClass:function(e){b.addClass(e,"k-chart k-stockchart")},setOptions:function(e){this.destroyNavigator();a.fn.setOptions.call(this,e)},noTransitionsRedraw:function(){var e=this.options.transitions;this.options.transitions=false;this._fullRedraw();this.options.transitions=e},_resize:function(){this.noTransitionsRedraw()},_redraw:function(){var e=this.navigator;if(!this._dirty()&&e&&e.options.partialRedraw){e.redrawSlaves()}else{this._fullRedraw()}},_dirty:function(){var e=this.options;var t=[].concat(e.series,e.navigator.series);var i=b.grep(t,function(e){return e&&e.visible}).length;var n=this._seriesCount!==i;this._seriesCount=i;return n},_fullRedraw:function(){var e=this.navigator;if(!e){e=this.navigator=new o(this);this.trigger("navigatorCreated",{navigator:e})}e.clean();e.setRange();a.fn._redraw.call(this);e.initSelection()},_trackSharedTooltip:function(e){var t=this._plotArea;var i=t.paneByPoint(e);if(i&&i.options.name===c){this._unsetActivePoint()}else{a.fn._trackSharedTooltip.call(this,e)}},bindCategories:function(){a.fn.bindCategories.call(this);this.copyNavigatorCategories()},copyNavigatorCategories:function(){var e=[].concat(this.options.categoryAxis);var t;for(var i=0;i<e.length;i++){var n=e[i];if(n.name===h){t=n.categories}else if(t&&n.pane===c){n.categories=t}}},destroyNavigator:function(){if(this.navigator){this.navigator.destroy();this.navigator=null}},destroy:function(){this.destroyNavigator();a.fn.destroy.call(this)},_stopChartHandlers:function(e){var t=this._eventCoordinates(e);var i=this._plotArea.paneByPoint(t);return a.fn._stopChartHandlers.call(this,e)||i&&i.options.name===c},_toggleDragZoomEvents:function(){if(!this._dragZoomEnabled){this.element.style.touchAction="none";this._dragZoomEnabled=true}}});b.setDefaultOptions(l,{dateField:"date",axisDefaults:{categoryAxis:{type:"date",baseUnit:"fit",justified:true},valueAxis:{narrowRange:true,labels:{format:"C"}}},navigator:{select:{},seriesDefaults:{markers:{visible:false},tooltip:{visible:true},line:{width:2}},hint:{},visible:true},tooltip:{visible:true},legend:{visible:false}});kendo.deepExtend(kendo.dataviz,{constants:i,Navigator:o,NavigatorHint:f,StockChart:l})})()},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("dataviz/stock/stock-chart",["dataviz/stock/kendo-stock-chart"],e)})(function(){(function(e){var f=window.kendo;var h=f.dataviz;var t=h.ChartInstanceObserver;var p=h.ui.Chart;var i=h.StockChart;var n=h.constants;var d=n.NAVIGATOR_AXIS;var u=n.NAVIGATOR_PANE;var v=f.deepExtend;var r=h.defined;var a=e.proxy;var o="change";var s=t.extend({handlerMap:{navigatorFilter:"_onNavigatorFilter",navigatorCreated:"_onNavigatorCreated"}});var l=p.extend({options:{name:"StockChart",dateField:"date",axisDefaults:{categoryAxis:{type:"date",baseUnit:"fit",justified:true},valueAxis:{narrowRange:true,labels:{format:"C"}}},navigator:{select:{},seriesDefaults:{markers:{visible:false},tooltip:{visible:true,template:"#= kendo.toString(category, 'd') #"},line:{width:2}},hint:{},visible:true},tooltip:{visible:true},legend:{visible:false},persistSeriesVisibility:true},_createChart:function(e,t){this._initNavigatorOptions(e);this._instance=new i(this.element[0],e,t,{observer:new s(this),sender:this,rtl:this._isRtl()})},_initNavigatorOptions:function(e){var t=e.navigator||{};var i=f.support;var n=i.touch;var r=i.browser.mozilla;v(t,{autoBindElements:!t.dataSource,partialRedraw:t.dataSource,liveDrag:!n&&!r})},_initDataSource:function(e){var t=e||{},i=t.dataSource,n=i&&i.serverFiltering,r=[].concat(t.categoryAxis)[0],a=t.navigator||{},o=a.select,s=o&&o.from&&o.to;if(n&&s){var l=[].concat(i.filter||[]);var d=f.parseDate(o.from);var u=f.parseDate(o.to);var c=new h.DateCategoryAxis(v({baseUnit:"fit"},r,{categories:[d,u]}),f);i.filter=m(c.range().min,u).concat(l)}p.fn._initDataSource.call(this,e)},_onNavigatorCreated:function(e){this._instance=e.sender;this.options=e.sender.options;this._navigator=this.navigator=e.navigator;this._initNavigatorDataSource()},_initNavigatorDataSource:function(){var e=this.options.navigator;var t=e.autoBind;var i=e.dataSource;if(i){this._navigatorDataChangedHandler=this._navigatorDataChangedHandler||a(this._onNavigatorDataChanged,this);this._navigatorDataSource=f.data.DataSource.create(i).bind(o,this._navigatorDataChangedHandler);if(!r(t)){t=this.options.autoBind}if(t){this._navigatorDataSource.fetch()}}},_bindNavigatorSeries:function(e,t){var i,n,r=e.length;for(i=0;i<r;i++){n=e[i];if(n.axis==d&&this._isBindable(n)){n.data=t}}},_onNavigatorDataChanged:function(){var e=this,t=e._instance,i=e.options.categoryAxis,n,r=i.length,a=e._navigatorDataSource.view(),o,s;this._bindNavigatorSeries(e.options.series,a);if(e._sourceSeries){this._bindNavigatorSeries(e._sourceSeries,a)}for(n=0;n<r;n++){o=i[n];if(o.pane==u){if(o.name==d){e._bindCategoryAxis(o,a,n);s=o.categories}else{o.categories=s}}}if(t._model){var l=this.navigator;l.redraw();l.setRange();if(!e.options.dataSource||e.options.dataSource&&e._dataBound){l.redrawSlaves()}}},_bindCategories:function(){p.fn._bindCategories.call(this);if(this._instance){this._instance.copyNavigatorCategories()}},_onDataChanged:function(){p.fn._onDataChanged.call(this);this._dataBound=true},setOptions:function(e){this._removeNavigatorDataSource();this._initNavigatorOptions(e);this._instance.destroyNavigator();p.fn.setOptions.call(this,e)},_onNavigatorFilter:function(e){this.dataSource.filter(m(e.from,e.to))},requiresHandlers:function(e){if(h.inArray("navigatorFilter",e)){var t=this.dataSource;var i=t&&t.options.serverFiltering;return i&&this.options.navigator.dataSource}return p.fn.requiresHandlers.call(this,e)},_removeNavigatorDataSource:function(){var e=this._navigatorDataSource;if(e){e.unbind(o,this._navigatorDataChangedHandler);delete this._navigatorDataSource}},destroy:function(){p.fn.destroy.call(this);this._removeNavigatorDataSource()}});h.ui.plugin(l);function m(e,t){return[{field:"Date",operator:"gte",value:e},{field:"Date",operator:"lt",value:t}]}})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.dataviz.stock",["dataviz/stock/kendo-stock-chart","dataviz/stock/stock-chart"],e)})(function(){var e={id:"dataviz.stockchart",name:"StockChart",category:"dataviz",description:"StockChart widget and associated financial series.",depends:["dataviz.chart"]}},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("dataviz/sparkline/kendo-sparkline",["kendo.dataviz.chart"],e)})(function(){(function(){window.kendo.dataviz=window.kendo.dataviz||{};var f=kendo.dataviz;var h=f.constants;var i=f.Chart;var p=f.elementSize;var a=f.deepExtend;var o=-2;var t=f.SharedTooltip.extend({_slotAnchor:function(e,t){var i=this.plotArea.categoryAxis;var n=i.options.vertical;var r=n?{horizontal:"left",vertical:"center"}:{horizontal:"center",vertical:"bottom"};var a;if(n){a=new f.Point(this.plotArea.box.x2,t.center().y)}else{a=new f.Point(t.center().x,o)}return{point:a,align:r}},_defaultAnchor:function(e,t){return this._slotAnchor({},t)}});var v=150;var m=150;var n=[h.BAR,h.BULLET];function s(e){var t=[];for(var i=0;i<e.length;i++){var n=e[i];t[i]=n.style.display;n.style.display="none"}return t}function l(e,t){for(var i=0;i<e.length;i++){e[i].style.display=t[i]}}function r(e){return f.isNumber(e)?[e]:e}var e=i.extend({_setElementClass:function(e){f.addClass(e,"k-sparkline")},_initElement:function(e){i.fn._initElement.call(this,e);this._initialWidth=Math.floor(p(e).width)},_resize:function(){var e=this.element;var t=s(e.childNodes);this._initialWidth=Math.floor(p(e).width);l(e.childNodes,t);i.fn._resize.call(this)},_modelOptions:function(){var e=this.options;var t=this._surfaceWrap();var i=s(t.childNodes);var n=document.createElement("span");n.innerHTML="&nbsp;";t.appendChild(n);var r=a({width:this._autoWidth,height:p(t).height,transitions:e.transitions},e.chartArea,{inline:true,align:false});p(t,{width:r.width,height:r.height});t.removeChild(n);l(t.childNodes,i);if(this.surface){this.surface.resize()}return r},_surfaceWrap:function(){if(!this.stage){var e=this.stage=document.createElement("span");this.element.appendChild(e)}return this.stage},_createPlotArea:function(e){var t=i.fn._createPlotArea.call(this,e);this._autoWidth=this._initialWidth||this._calculateWidth(t);return t},_calculateWidth:function(e){var t=this.options;var i=f.getSpacing(t.chartArea.margin);var n=e.charts;var r=this._surfaceWrap();var a=0;for(var o=0;o<n.length;o++){var s=n[o];var l=(s.options.series||[])[0];if(!l){continue}if(l.type===h.BAR){return v}if(l.type===h.BULLET){return m}if(l.type===h.PIE){return p(r).height}var d=s.categoryAxis;if(d){var u=d.categoriesCount()*(!s.options.isStacked&&f.inArray(l.type,[h.COLUMN,h.VERTICAL_BULLET])?s.seriesOptions.length:1);a=Math.max(a,u)}}var c=a*t.pointWidth;if(c>0){c+=i.left+i.right}return c},_createSharedTooltip:function(e){return new t(this._plotArea,e)}});e.normalizeOptions=function(e){var t=r(e);if(f.isArray(t)){t={seriesDefaults:{data:t}}}else{t=a({},t)}if(!t.series){t.series=[{data:r(t.data)}]}a(t,{seriesDefaults:{type:t.type}});if(f.inArray(t.series[0].type,n)||f.inArray(t.seriesDefaults.type,n)){t=a({},{categoryAxis:{crosshair:{visible:false}}},t)}return t};f.setDefaultOptions(e,{chartArea:{margin:2},axisDefaults:{visible:false,majorGridLines:{visible:false},valueAxis:{narrowRange:true}},seriesDefaults:{type:"line",area:{line:{width:.5}},bar:{stack:true},padding:2,width:.5,overlay:{gradient:null},highlight:{visible:false},border:{width:0},markers:{size:2,visible:false}},tooltip:{visible:true,shared:true},categoryAxis:{crosshair:{visible:true,tooltip:{visible:false}}},legend:{visible:false},transitions:false,pointWidth:5,panes:[{clip:false}]});kendo.deepExtend(kendo.dataviz,{Sparkline:e})})()},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("dataviz/sparkline/sparkline",["dataviz/sparkline/kendo-sparkline"],e)})(function(){(function(e){var t=kendo.dataviz;var n=t.ui.Chart;var r=t.Sparkline;var i=t.ChartInstanceObserver;var a=e.extend;var o=n.extend({init:function(e,t){var i=t;if(i instanceof kendo.data.ObservableArray){i={seriesDefaults:{data:i}}}n.fn.init.call(this,e,r.normalizeOptions(i))},_createChart:function(e,t){this._instance=new r(this.element[0],e,t,{observer:new i(this),sender:this,rtl:this._isRtl()})},_createTooltip:function(){return new s(this.element,a({},this.options.tooltip,{rtl:this._isRtl()}))},options:{name:"Sparkline",chartArea:{margin:2},axisDefaults:{visible:false,majorGridLines:{visible:false},valueAxis:{narrowRange:true}},seriesDefaults:{type:"line",area:{line:{width:.5}},bar:{stack:true},padding:2,width:.5,overlay:{gradient:null},highlight:{visible:false},border:{width:0},markers:{size:2,visible:false}},tooltip:{visible:true,shared:true},categoryAxis:{crosshair:{visible:true,tooltip:{visible:false}}},legend:{visible:false},transitions:false,pointWidth:5,panes:[{clip:false}]}});t.ui.plugin(o);var s=t.Tooltip.extend({options:{animation:{duration:0}},_hideElement:function(){if(this.element){this.element.hide().remove()}}});t.SparklineTooltip=s})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.dataviz.sparkline",["dataviz/sparkline/kendo-sparkline","dataviz/sparkline/sparkline"],e)})(function(){var e={id:"dataviz.sparkline",name:"Sparkline",category:"dataviz",description:"Sparkline widgets.",depends:["dataviz.chart"]}},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("dataviz/map/location",["kendo.drawing","util/main"],e)})(function(){(function(e,t){var M=Math,R=M.abs,F=M.atan,P=M.atan2,z=M.cos,a=M.max,o=M.min,B=M.sin,L=M.tan,l=window.kendo,i=l.Class,H=l.dataviz,n=l.deepExtend,r=l.drawing.util,s=r.defined,N=r.deg,O=r.rad,V=r.round,d=r.valueOrDefault,W=l.util.sqr;var U=i.extend({init:function(e,t){if(arguments.length===1){this.lat=e[0];this.lng=e[1]}else{this.lat=e;this.lng=t}},DISTANCE_ITERATIONS:100,DISTANCE_CONVERGENCE:1e-12,DISTANCE_PRECISION:2,FORMAT:"{0:N6},{1:N6}",toArray:function(){return[this.lat,this.lng]},equals:function(e){return e&&e.lat===this.lat&&e.lng===this.lng},clone:function(){return new U(this.lat,this.lng)},round:function(e){this.lng=V(this.lng,e);this.lat=V(this.lat,e);return this},wrap:function(){this.lng=this.lng%180;this.lat=this.lat%90;return this},distanceTo:function(e,t){return this.greatCircleTo(e,t).distance},destination:function(e,t,i){t=O(t);i=i||H.map.datums.WGS84;var n=O(this.lat);var r=O(this.lng);var a=e/l.dataviz.map.datums.WGS84.a;var o=M.asin(B(n)*z(a)+z(n)*B(a)*z(t));var s=r+P(B(t)*B(a)*z(n),z(a)-B(n)*B(o));return new U(N(o),N(s))},greatCircleTo:function(e,t){e=U.create(e);t=t||H.map.datums.WGS84;if(!e||this.clone().round(8).equals(e.clone().round(8))){return{distance:0,azimuthFrom:0,azimuthTo:0}}var i=t.a;var n=t.b;var r=t.f;var a=O(e.lng-this.lng);var o=F((1-r)*L(O(this.lat)));var s=B(o);var l=z(o);var d=F((1-r)*L(O(e.lat)));var u=B(d);var c=z(d);var f=a;var h;var p=this.DISTANCE_ITERATIONS;var v=false;var m;var g;var _;var b;var w;var k;var y;while(!v&&p-- >0){m=B(f);g=z(f);_=M.sqrt(W(c*m)+W(l*u-s*c*g));w=s*u+l*c*g;y=P(_,w);var x=l*c*m/_;b=1-W(x);k=0;if(b!==0){k=w-2*s*u/b}h=f;var C=r/16*b*(4+r*(4-3*b));f=a+(1-C)*r*x*(y+C*_*(k+C*w*(-1+2*W(k))));v=R(f-h)<=this.DISTANCE_CONVERGENCE}var S=b*(W(i)-W(n))/W(n);var T=1+S/16384*(4096+S*(-768+S*(320-175*S)));var D=S/1024*(256+S*(-128+S*(74-47*S)));var A=D*_*(k+D/4*(w*(-1+2*W(k))-D/6*k*(-3+4*W(_))*(-3+4*W(k))));var E=P(c*m,l*u-s*c*g);var I=P(l*m,-s*c+l*u*g);return{distance:V(n*T*(y-A),this.DISTANCE_PRECISION),azimuthFrom:N(E),azimuthTo:N(I)}}});U.fn.toString=function(){return l.format(this.FORMAT,this.lat,this.lng)};U.fromLngLat=function(e){return new U(e[1],e[0])};U.fromLatLng=function(e){return new U(e[0],e[1])};U.create=function(e,t){if(s(e)){if(e instanceof U){return e.clone()}else if(arguments.length===1&&e.length===2){return U.fromLatLng(e)}else{return new U(e,t)}}};var u=i.extend({init:function(e,t){e=U.create(e);t=U.create(t);if(e.lng+180>t.lng+180&&e.lat+90<t.lat+90){this.se=e;this.nw=t}else{this.se=t;this.nw=e}},contains:function(e){var t=this.nw,i=this.se,n=d(e.lng,e[1]),r=d(e.lat,e[0]);return e&&n+180>=t.lng+180&&n+180<=i.lng+180&&r+90>=i.lat+90&&r+90<=t.lat+90},center:function(){var e=this.nw;var t=this.se;var i=e.lng+(t.lng-e.lng)/2;var n=e.lat+(t.lat-e.lat)/2;return new U(n,i)},containsAny:function(e){var t=false;for(var i=0;i<e.length;i++){t=t||this.contains(e[i])}return t},include:function(e){var t=this.nw,i=this.se,n=d(e.lng,e[1]),r=d(e.lat,e[0]);t.lng=o(t.lng,n);t.lat=a(t.lat,r);i.lng=a(i.lng,n);i.lat=o(i.lat,r)},includeAll:function(e){for(var t=0;t<e.length;t++){this.include(e[t])}},edges:function(){var e=this.nw,t=this.se;return{nw:this.nw,ne:new U(e.lat,t.lng),se:this.se,sw:new U(t.lat,e.lng)}},toArray:function(){var e=this.nw,t=this.se;return[e,new U(e.lat,t.lng),t,new U(t.lat,e.lng)]},overlaps:function(e){return this.containsAny(e.toArray())||e.containsAny(this.toArray())}});u.World=new u([90,-180],[-90,180]);u.create=function(e,t){if(e instanceof u){return e}else if(e&&t){return new u(e,t)}else if(e&&e.length===4&&!t){return new u([e[0],e[1]],[e[2],e[3]])}};n(H,{map:{Extent:u,Location:U}})})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("dataviz/map/attribution",["kendo.drawing"],e)})(function(){(function(){var e=window.kendo,i=e.ui.Widget,a=e.template,t=e.drawing.util,n=t.valueOrDefault,r=t.defined;var o=i.extend({init:function(e,t){i.fn.init.call(this,e,t);this._initOptions(t);this.items=[];this.element.addClass("k-widget k-widget-2021 k-attribution")},options:{name:"Attribution",separator:"&nbsp;|&nbsp;",itemTemplate:"#= text #"},filter:function(e,t){this._extent=e;this._zoom=t;this._render()},add:function(e){if(r(e)){if(typeof e==="string"){e={text:e}}this.items.push(e);this._render()}},remove:function(e){var t=[];for(var i=0;i<this.items.length;i++){var n=this.items[i];if(n.text!==e){t.push(n)}}this.items=t;this._render()},clear:function(){this.items=[];this.element.empty()},_render:function(){var e=[];var t=a(this.options.itemTemplate);for(var i=0;i<this.items.length;i++){var n=this.items[i];var r=this._itemText(n);if(r!==""){e.push(t({text:r}))}}if(e.length>0){this.element.empty().append(e.join(this.options.separator)).show()}else{this.element.hide()}},_itemText:function(e){var t="";var i=this._inZoomLevel(e.minZoom,e.maxZoom);var n=this._inArea(e.extent);if(i&&n){t+=e.text}return t},_inZoomLevel:function(e,t){var i=true;e=n(e,-Number.MAX_VALUE);t=n(t,Number.MAX_VALUE);i=this._zoom>e&&this._zoom<t;return i},_inArea:function(e){var t=true;if(e){t=e.contains(this._extent)}return t}});e.dataviz.ui.plugin(o)})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("dataviz/map/navigator",["kendo.core"],e)})(function(){(function(r){var n=window.kendo;var a=n.ui.Widget;var t=n.keys;var o=r.proxy;var s=".kendoNavigator";function e(e){return n.format('<button class="k-button k-navigator-{0}" aria-label="move {0}">'+'<span class="k-icon k-i-arrow-60-{0}"></span>'+"</button>",e)}var l=e("up")+e("right")+e("down")+e("left");var i=a.extend({init:function(e,t){a.fn.init.call(this,e,t);this._initOptions(t);this.element.addClass("k-widget k-widget-2021 k-navigator").append(l).on("click"+s,".k-button",o(this,"_click"));var i=this.element.parent().closest("["+n.attr("role")+"]");this._keyroot=i.length>0?i:this.element;this._tabindex(this._keyroot);this._keydown=o(this._keydown,this);this._keyroot.on("keydown",this._keydown)},options:{name:"Navigator",panStep:1},events:["pan"],dispose:function(){this._keyroot.off("keydown",this._keydown)},_pan:function(e,t){var i=this.options.panStep;this.trigger("pan",{x:e*i,y:t*i})},_click:function(e){var t=0;var i=0;var n=r(e.currentTarget);if(n.is(".k-navigator-up")){i=1}else if(n.is(".k-navigator-down")){i=-1}else if(n.is(".k-navigator-right")){t=1}else if(n.is(".k-navigator-left")){t=-1}this._pan(t,i);e.preventDefault()},_keydown:function(e){switch(e.which){case t.UP:this._pan(0,1);e.preventDefault();break;case t.DOWN:this._pan(0,-1);e.preventDefault();break;case t.RIGHT:this._pan(1,0);e.preventDefault();break;case t.LEFT:this._pan(-1,0);e.preventDefault();break}}});n.dataviz.ui.plugin(i)})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("dataviz/map/zoom",["kendo.core"],e)})(function(){(function(n){var r=window.kendo;var a=r.ui.Widget;var t=r.keys;var o=n.proxy;function e(e,t){return r.format('<button class="k-button k-button-icon k-zoom-{0}" title="zoom-{0}" aria-label="zoom-{0}"><span class="k-icon {1}"></span></button>',e,t)}var s=".kendoZoomControl";var l=e("in","k-i-plus")+e("out","k-i-minus");var i=187;var d=189;var u=61;var c=173;var f=a.extend({init:function(e,t){a.fn.init.call(this,e,t);this._initOptions(t);this.element.addClass("k-widget k-widget-2021 k-zoom-control k-button-group k-group-horizontal").append(l).on("click"+s,".k-button",o(this,"_click"));var i=this.element.parent().closest("["+r.attr("role")+"]");this._keyroot=i.length>0?i:this.element;this._tabindex(this._keyroot);this._keydown=o(this._keydown,this);this._keyroot.on("keydown",this._keydown)},options:{name:"ZoomControl",zoomStep:1},events:["change"],_change:function(e){var t=this.options.zoomStep;this.trigger("change",{delta:e*t})},_click:function(e){var t=n(e.currentTarget);var i=1;if(t.is(".k-zoom-out")){i=-1}this._change(i);e.preventDefault()},_keydown:function(e){switch(e.which){case t.NUMPAD_PLUS:case i:case u:this._change(1);break;case t.NUMPAD_MINUS:case d:case c:this._change(-1);break}}});r.dataviz.ui.plugin(f)})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("dataviz/map/crs",["dataviz/map/location","kendo.drawing"],e)})(function(){(function(e,t){var f=Math,h=f.atan,p=f.exp,v=f.pow,m=f.sin,l=f.log,d=f.tan,i=window.kendo,n=i.Class,r=i.dataviz,a=i.deepExtend,o=i.geometry,c=o.Point,s=r.map,u=s.Location,g=i.drawing.util,_=g.rad,b=g.deg,w=g.limitValue;var k=f.PI,y=k/2,x=k/4,C=k/180;var S={a:6378137,b:6356752.314245179,f:.0033528106647474805,e:.08181919084262149};var T=n.extend({init:function(e){this._initOptions(e)},MAX_LNG:180,MAX_LAT:85.0840590501,INVERSE_ITERATIONS:15,INVERSE_CONVERGENCE:1e-12,options:{centralMeridian:0,datum:S},forward:function(e,t){var i=this,n=i.options,r=n.datum,a=r.a,o=n.centralMeridian,s=w(e.lat,-i.MAX_LAT,i.MAX_LAT),l=t?w(e.lng,-i.MAX_LNG,i.MAX_LNG):e.lng,d=_(l-o)*a,u=i._projectLat(s);return new c(d,u)},_projectLat:function(e){var t=this.options.datum,i=t.e,n=t.a,r=_(e),a=d(x+r/2),o=i*m(r),s=v((1-o)/(1+o),i/2);return n*l(a*s)},inverse:function(e,t){var i=this,n=i.options,r=n.datum,a=r.a,o=n.centralMeridian,s=e.x/(C*a)+o,l=w(i._inverseY(e.y),-i.MAX_LAT,i.MAX_LAT);if(t){s=w(s,-i.MAX_LNG,i.MAX_LNG)}return new u(l,s)},_inverseY:function(e){var t=this,i=t.options.datum,n=i.a,r=i.e,a=r/2,o=p(-e/n),s=y-2*h(o),l;for(l=0;l<=t.INVERSE_ITERATIONS;l++){var d=r*m(s),u=v((1-d)/(1+d),a),c=y-2*h(o*u)-s;s+=c;if(f.abs(c)<=t.INVERSE_CONVERGENCE){break}}return b(s)}});var D=T.extend({MAX_LAT:85.0511287798,_projectLat:function(e){var t=this.options.datum.a,i=_(e),n=d(x+i/2);return t*l(n)},_inverseY:function(e){var t=this.options.datum.a,i=p(-e/t);return b(y-2*h(i))}});var A=n.extend({forward:function(e){return new c(e.lng,e.lat)},inverse:function(e){return new u(e.y,e.x)}});var E=n.extend({init:function(){var e=this,t=e._proj=new D;var i=this.c=2*k*t.options.datum.a;this._tm=o.transform().translate(.5,.5).scale(1/i,-1/i);this._itm=o.transform().scale(i,-i).translate(-.5,-.5)},toPoint:function(e,t,i){var n=this._proj.forward(e,i);return n.transform(this._tm).scale(t||1)},toLocation:function(e,t,i){e=e.clone().scale(1/(t||1)).transform(this._itm);return this._proj.inverse(e,i)}});var I=n.extend({init:function(){this._proj=new T},toPoint:function(e){return this._proj.forward(e)},toLocation:function(e){return this._proj.inverse(e)}});var M=n.extend({init:function(){this._proj=new A},toPoint:function(e){return this._proj.forward(e)},toLocation:function(e){return this._proj.inverse(e)}});a(r,{map:{crs:{EPSG3395:I,EPSG3857:E,EPSG4326:M},datums:{WGS84:S},projections:{Equirectangular:A,Mercator:T,SphericalMercator:D}}})})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("dataviz/map/layers/base",["kendo.core","dataviz/map/location"],e)})(function(){(function(i,e){var n=i.proxy,t=window.kendo,r=t.Class,a=t.dataviz,o=t.deepExtend,s=a.map.Extent,l=t.drawing.util,d=l.defined;var u=r.extend({init:function(e,t){this._initOptions(t);this.map=e;this.element=i("<div class='k-layer'></div>").css({zIndex:this.options.zIndex,opacity:this.options.opacity}).appendTo(e.scrollElement);this._beforeReset=n(this._beforeReset,this);this._reset=n(this._reset,this);this._resize=n(this._resize,this);this._panEnd=n(this._panEnd,this);this._activate();this._updateAttribution()},destroy:function(){this._deactivate()},show:function(){this.reset();this._activate();this._applyExtent(true)},hide:function(){this._deactivate();this._setVisibility(false)},reset:function(){this._beforeReset();this._reset()},_reset:function(){this._applyExtent()},_beforeReset:i.noop,_resize:i.noop,_panEnd:function(){this._applyExtent()},_applyExtent:function(){var e=this.options;var t=this.map.zoom();var i=!d(e.minZoom)||t>=e.minZoom;var n=!d(e.maxZoom)||t<=e.maxZoom;var r=s.create(e.extent);var a=!r||r.overlaps(this.map.extent());this._setVisibility(i&&n&&a)},_setVisibility:function(e){this.element.css("display",e?"":"none")},_activate:function(){var e=this.map;this._deactivate();e.bind("beforeReset",this._beforeReset);e.bind("reset",this._reset);e.bind("resize",this._resize);e.bind("panEnd",this._panEnd)},_deactivate:function(){var e=this.map;e.unbind("beforeReset",this._beforeReset);e.unbind("reset",this._reset);e.unbind("resize",this._resize);e.unbind("panEnd",this._panEnd)},_updateAttribution:function(){var e=this.map.attribution;if(e){e.add(this.options.attribution)}}});o(a,{map:{layers:{Layer:u}}})})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("dataviz/map/layers/shape",["dataviz/map/layers/base","dataviz/map/location"],e)})(function(){(function(e,t){var i=e.proxy,n=window.kendo,r=n.Class,a=n.data.DataSource,o=n.dataviz,s=n.deepExtend,l=n.geometry,d=n.drawing,u=d.Group,c=d.util.last,f=d.util.defined,h=o.map,p=h.Location,v=h.layers.Layer;var m=v.extend({init:function(e,t){this._pan=i(this._pan,this);v.fn.init.call(this,e,t);this.surface=d.Surface.create(this.element,{width:e.scrollElement.width(),height:e.scrollElement.height()});this._initRoot();this.movable=new n.ui.Movable(this.surface.element);this._markers=[];this._click=this._handler("shapeClick");this.surface.bind("click",this._click);this._mouseenter=this._handler("shapeMouseEnter");this.surface.bind("mouseenter",this._mouseenter);this._mouseleave=this._handler("shapeMouseLeave");this.surface.bind("mouseleave",this._mouseleave);this._initDataSource()},options:{autoBind:true},destroy:function(){v.fn.destroy.call(this);this.surface.destroy();this.dataSource.unbind("change",this._dataChange)},setDataSource:function(e){if(this.dataSource){this.dataSource.unbind("change",this._dataChange)}this.dataSource=n.data.DataSource.create(e);this.dataSource.bind("change",this._dataChange);if(this.options.autoBind){this.dataSource.fetch()}},_reset:function(){v.fn._reset.call(this);this._translateSurface();if(this._data){this._load(this._data)}},_initRoot:function(){this._root=new u;this.surface.draw(this._root)},_beforeReset:function(){this.surface.clear();this._initRoot()},_resize:function(){this.surface.size(this.map.size())},_initDataSource:function(){var e=this.options.dataSource;this._dataChange=i(this._dataChange,this);this.dataSource=a.create(e).bind("change",this._dataChange);if(e&&this.options.autoBind){this.dataSource.fetch()}},_dataChange:function(e){this._data=e.sender.view();this._load(this._data)},_load:function(e){this._clearMarkers();if(!this._loader){this._loader=new g(this.map,this.options.style,this)}var t=new u;for(var i=0;i<e.length;i++){var n=this._loader.parse(e[i]);if(n){t.append(n)}}this._root.clear();this._root.append(t)},shapeCreated:function(e){var t=false;if(e instanceof d.Circle){t=f(this._createMarker(e))}if(!t){var i={layer:this,shape:e};t=this.map.trigger("shapeCreated",i)}return t},featureCreated:function(e){e.layer=this;this.map.trigger("shapeFeatureCreated",e)},_createMarker:function(e){var t=this.map.markers.bind({location:e.location},e.dataItem);if(t){this._markers.push(t)}return t},_clearMarkers:function(){for(var e=0;e<this._markers.length;e++){this.map.markers.remove(this._markers[e])}this._markers=[]},_pan:function(){if(!this._panning){this._panning=true;this.surface.suspendTracking()}},_panEnd:function(e){v.fn._panEnd.call(this,e);this._translateSurface();this.surface.resumeTracking();this._panning=false},_translateSurface:function(){var e=this.map;var t=e.locationToView(e.extent().nw);if(this.surface.translate){this.surface.translate(t);this.movable.moveTo({x:t.x,y:t.y})}},_handler:function(i){var n=this;return function(e){if(e.element){var t={layer:n,shape:e.element,originalEvent:e.originalEvent};n.map.trigger(i,t)}}},_activate:function(){v.fn._activate.call(this);this.map.bind("pan",this._pan)},_deactivate:function(){v.fn._deactivate.call(this);this.map.unbind("pan",this._pan)}});var g=r.extend({init:function(e,t,i){this.observer=i;this.locator=e;this.style=t},parse:function(e){var t=new u;var i=true;if(e.type==="Feature"){i=false;this._loadGeometryTo(t,e.geometry,e);this._featureCreated(t,e)}else{this._loadGeometryTo(t,e,e)}if(i&&t.children.length<2){t=t.children[0]}return t},_shapeCreated:function(e){var t=false;if(this.observer&&this.observer.shapeCreated){t=this.observer.shapeCreated(e)}return t},_featureCreated:function(e,t){if(this.observer&&this.observer.featureCreated){this.observer.featureCreated({group:e,dataItem:t,properties:t.properties})}},_loadGeometryTo:function(e,t,i){var n=t.coordinates;var r;var a;switch(t.type){case"LineString":a=this._loadPolygon(e,[n],i);this._setLineFill(a);break;case"MultiLineString":for(r=0;r<n.length;r++){a=this._loadPolygon(e,[n[r]],i);this._setLineFill(a)}break;case"Polygon":this._loadPolygon(e,n,i);break;case"MultiPolygon":for(r=0;r<n.length;r++){this._loadPolygon(e,n[r],i)}break;case"Point":this._loadPoint(e,n,i);break;case"MultiPoint":for(r=0;r<n.length;r++){this._loadPoint(e,n[r],i)}break}},_setLineFill:function(e){var t=e.segments;if(t.length<4||!t[0].anchor().equals(c(t).anchor())){e.options.fill=null}},_loadShape:function(e,t){if(!this._shapeCreated(t)){e.append(t)}return t},_loadPolygon:function(e,t,i){var n=this._buildPolygon(t);n.dataItem=i;return this._loadShape(e,n)},_buildPolygon:function(e){var t=e.length>1?d.MultiPath:d.Path;var i=new t(this.style);for(var n=0;n<e.length;n++){for(var r=0;r<e[n].length;r++){var a=this.locator.locationToView(p.fromLngLat(e[n][r]));if(r===0){i.moveTo(a.x,a.y)}else{i.lineTo(a.x,a.y)}}}return i},_loadPoint:function(e,t,i){var n=p.fromLngLat(t);var r=this.locator.locationToView(n);var a=new l.Circle(r,10);var o=new d.Circle(a,this.style);o.dataItem=i;o.location=n;return this._loadShape(e,o)}});s(n.data,{schemas:{geojson:{type:"json",data:function(e){if(e.type==="FeatureCollection"){return e.features}if(e.type==="GeometryCollection"){return e.geometries}return e}}},transports:{geojson:{read:{dataType:"json"}}}});s(o,{map:{layers:{shape:m,ShapeLayer:m},GeoJSONLoader:g}})})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("dataviz/map/layers/bubble",["dataviz/map/layers/shape"],e)})(function(){(function(e,t){var i=window.kendo,f=i.getter,n=i.dataviz,r=i.deepExtend,a=i.geometry,o=i.drawing,s=o.util,h=s.defined,l=n.map,p=l.Location,d=l.layers.ShapeLayer;var u=d.extend({options:{autoBind:true,locationField:"location",valueField:"value",minSize:0,maxSize:100,scale:"sqrt",symbol:"circle"},_load:function(e){this.surface.clear();if(e.length===0){return}var t=this.options;var i=f(t.valueField);e=e.slice(0);e.sort(function(e,t){return i(t)-i(e)});var n=this._scaleType();var r;for(var a=0;a<e.length;a++){var o=e[a];var s=f(t.locationField)(o);var l=f(t.valueField)(o);if(h(s)&&h(l)){if(!r){r=new n([0,l],[t.minSize,t.maxSize])}s=p.create(s);var d=this.map.locationToView(s);var u=r.map(l);var c=this._createSymbol({center:d,size:u,style:t.style,dataItem:o,location:s});c.dataItem=o;c.location=s;c.value=l;this._drawSymbol(c)}}},_scaleType:function(){var e=this.options.scale;if(i.isFunction(e)){return e}return n.map.scales[e]},_createSymbol:function(e){var t=this.options.symbol;if(!i.isFunction(t)){t=n.map.symbols[t]}return t(e)},_drawSymbol:function(e){var t={layer:this,shape:e};var i=this.map.trigger("shapeCreated",t);if(!i){this.surface.draw(e)}}});var c=i.Class.extend({init:function(e,t){this._domain=e;this._range=t;var i=Math.sqrt(e[1])-Math.sqrt(e[0]);var n=t[1]-t[0];this._ratio=n/i},map:function(e){var t=(Math.sqrt(e)-Math.sqrt(this._domain[0]))*this._ratio;return this._range[0]+t}});var v={circle:function(e){var t=new a.Circle(e.center,e.size/2);return new o.Circle(t,e.style)},square:function(e){var t=new o.Path(e.style);var i=e.size/2;var n=e.center;t.moveTo(n.x-i,n.y-i).lineTo(n.x+i,n.y-i).lineTo(n.x+i,n.y+i).lineTo(n.x-i,n.y+i).close();return t}};r(n,{map:{layers:{bubble:u,BubbleLayer:u},scales:{sqrt:c},symbols:v}})})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("dataviz/map/layers/tile",["dataviz/map/layers/base","dataviz/map/location"],e)})(function(){(function(e,t){var r=Math,i=e.proxy,n=window.kendo,a=n.Class,o=n.template,s=n.dataviz,l=n.deepExtend,d=n.geometry,u=d.Point,c=s.map.layers.Layer,f=n.util,h=f.renderSize,p=n.drawing.util,v=p.round,m=p.limitValue;var g=c.extend({init:function(e,t){c.fn.init.call(this,e,t);if(typeof this.options.subdomains==="string"){this.options.subdomains=this.options.subdomains.split("")}var i=this._viewType();this._view=new i(this.element,this.options)},destroy:function(){c.fn.destroy.call(this);this._view.destroy();this._view=null},_beforeReset:function(){var e=this.map;var t=e.locationToLayer(e.extent().nw).round();this._view.viewOrigin(t)},_reset:function(){c.fn._reset.call(this);this._updateView();this._view.reset()},_viewType:function(){return _},_activate:function(){c.fn._activate.call(this);if(!n.support.mobileOS){if(!this._pan){this._pan=n.throttle(i(this._render,this),100)}this.map.bind("pan",this._pan)}},_deactivate:function(){c.fn._deactivate.call(this);if(this._pan){this.map.unbind("pan",this._pan)}},_updateView:function(){var e=this._view,t=this.map,i=t.extent(),n={nw:t.locationToLayer(i.nw).round(),se:t.locationToLayer(i.se).round()};e.center(t.locationToLayer(t.center()));e.extent(n);e.zoom(t.zoom())},_resize:function(){this._render()},_panEnd:function(e){c.fn._panEnd.call(this,e);this._render()},_render:function(){this._updateView();this._view.render()}});var _=a.extend({init:function(e,t){this.element=e;this._initOptions(t);this.pool=new w},options:{tileSize:256,subdomains:["a","b","c"],urlTemplate:""},center:function(e){this._center=e},extent:function(e){this._extent=e},viewOrigin:function(e){this._viewOrigin=e},zoom:function(e){this._zoom=e},pointToTileIndex:function(e){return new u(r.floor(e.x/this.options.tileSize),r.floor(e.y/this.options.tileSize))},tileCount:function(){var e=this.size(),t=this.pointToTileIndex(this._extent.nw),i=this._extent.nw,n=this.indexToPoint(t).translate(-i.x,-i.y);return{x:r.ceil((r.abs(n.x)+e.width)/this.options.tileSize),y:r.ceil((r.abs(n.y)+e.height)/this.options.tileSize)}},size:function(){var e=this._extent.nw,t=this._extent.se,i=t.clone().translate(-e.x,-e.y);return{width:i.x,height:i.y}},indexToPoint:function(e){var t=e.x,i=e.y;return new u(t*this.options.tileSize,i*this.options.tileSize)},subdomainText:function(){var e=this.options.subdomains;return e[this.subdomainIndex++%e.length]},destroy:function(){this.element.empty();this.pool.empty()},reset:function(){this.pool.reset();this.subdomainIndex=0;this.render()},render:function(){var e=this.tileCount(),t=this.pointToTileIndex(this._extent.nw),i,n,r;for(n=0;n<e.x;n++){for(r=0;r<e.y;r++){i=this.createTile({x:t.x+n,y:t.y+r});if(!i.visible){i.show()}}}},createTile:function(e){var t=this.tileOptions(e);var i=this.pool.get(this._center,t);if(i.element.parent().length===0){this.element.append(i.element)}return i},tileOptions:function(e){var t=this.wrapIndex(e),i=this.indexToPoint(e),n=this._viewOrigin,r=i.clone().translate(-n.x,-n.y);return{index:t,currentIndex:e,point:i,offset:k(r),zoom:this._zoom,size:this.options.tileSize,subdomain:this.subdomainText(),urlTemplate:this.options.urlTemplate,errorUrlTemplate:this.options.errorUrlTemplate}},wrapIndex:function(e){var t=r.pow(2,this._zoom);return{x:this.wrapValue(e.x,t),y:m(e.y,0,t-1)}},wrapValue:function(e,t){var i=r.abs(e)%t;if(e>=0){e=i}else{e=t-(i===0?t:i)}return e}});var b=a.extend({init:function(e,t){this.id=e;this.visible=true;this._initOptions(t);this.createElement();this.show()},options:{urlTemplate:"",errorUrlTemplate:""},createElement:function(){this.element=e("<img style='position: absolute; display: block;' alt='' />").css({width:this.options.size,height:this.options.size}).on("error",i(function(e){if(this.errorUrl()){e.target.setAttribute("src",this.errorUrl())}else{e.target.removeAttribute("src")}},this))},show:function(){var e=this.element[0];e.style.top=h(this.options.offset.y);e.style.left=h(this.options.offset.x);var t=this.url();if(t){e.setAttribute("src",t)}e.style.visibility="visible";this.visible=true},hide:function(){this.element[0].style.visibility="hidden";this.visible=false},url:function(){var e=o(this.options.urlTemplate);return e(this.urlOptions())},errorUrl:function(){var e=o(this.options.errorUrlTemplate);return e(this.urlOptions())},urlOptions:function(){var e=this.options;return{zoom:e.zoom,subdomain:e.subdomain,z:e.zoom,x:e.index.x,y:e.index.y,s:e.subdomain,quadkey:e.quadkey,q:e.quadkey,culture:e.culture,c:e.culture}},destroy:function(){if(this.element){this.element.remove();this.element=null}}});var w=a.extend({init:function(){this._items=[]},options:{maxSize:100},get:function(e,t){if(this._items.length>=this.options.maxSize){this._remove(e)}return this._create(t)},empty:function(){var e=this._items;for(var t=0;t<e.length;t++){e[t].destroy()}this._items=[]},reset:function(){var e=this._items;for(var t=0;t<e.length;t++){e[t].hide()}},_create:function(e){var t=this._items;var i;var n=f.hashKey(e.point.toString()+e.offset.toString()+e.zoom+e.urlTemplate);for(var r=0;r<t.length;r++){if(t[r].id===n){i=t[r];break}}if(i){i.show()}else{i=new b(n,e);this._items.push(i)}return i},_remove:function(e){var t=this._items;var i=-1;var n=-1;for(var r=0;r<t.length;r++){var a=t[r].options.point.distanceTo(e);if(a>i&&!t[r].visible){n=r;i=a}}if(n!==-1){t[n].destroy();t.splice(n,1)}}});function k(e){return new u(v(e.x),v(e.y))}l(s,{map:{layers:{tile:g,TileLayer:g,ImageTile:b,TilePool:w,TileView:_}}})})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("dataviz/map/layers/bing",["dataviz/map/layers/tile"],e)})(function(){(function(i,e){var t=window.kendo,n=t.dataviz,r=t.deepExtend,a=t.drawing.util.defined,o=n.map.Extent,s=n.map.Location,l=n.map.layers.TileLayer,d=n.map.layers.TileView;var u=l.extend({init:function(e,t){this.options.baseUrl=this._scheme()+"://dev.virtualearth.net/REST/v1/Imagery/Metadata/";l.fn.init.call(this,e,t);this._onMetadata=i.proxy(this._onMetadata,this);this._fetchMetadata()},options:{imagerySet:"road"},_fetchMetadata:function(){var e=this.options;if(!e.key){throw new Error("Bing tile layer: API key is required")}i.ajax({url:e.baseUrl+e.imagerySet,data:{output:"json",include:"ImageryProviders",key:e.key,uriScheme:this._scheme()},type:"get",dataType:"jsonp",jsonp:"jsonp",success:this._onMetadata})},_scheme:function(e){e=e||window.location.protocol;return e.replace(":","")==="https"?"https":"http"},_onMetadata:function(e){if(e&&e.resourceSets.length){var t=this.resource=e.resourceSets[0].resources[0];r(this._view.options,{urlTemplate:t.imageUrl.replace("{subdomain}","#= subdomain #").replace("{quadkey}","#= quadkey #").replace("{culture}","#= culture #"),subdomains:t.imageUrlSubdomains});var i=this.options;if(!a(i.minZoom)){i.minZoom=t.zoomMin}if(!a(i.maxZoom)){i.maxZoom=t.zoomMax}this._addAttribution();if(this.element.css("display")!=="none"){this._reset()}}},_viewType:function(){return c},_addAttribution:function(){var e=this.map.attribution;if(e){var t=this.resource.imageryProviders;if(t){for(var i=0;i<t.length;i++){var n=t[i];for(var r=0;r<n.coverageAreas.length;r++){var a=n.coverageAreas[r];e.add({text:n.attribution,minZoom:a.zoomMin,maxZoom:a.zoomMax,extent:new o(new s(a.bbox[2],a.bbox[1]),new s(a.bbox[0],a.bbox[3]))})}}}}},imagerySet:function(e){if(e){this.options.imagerySet=e;this.map.attribution.clear();this._fetchMetadata()}else{return this.options.imagerySet}}});var c=d.extend({options:{culture:"en-US"},tileOptions:function(e){var t=d.fn.tileOptions.call(this,e);t.culture=this.options.culture;t.quadkey=this.tileQuadKey(this.wrapIndex(e));return t},tileQuadKey:function(e){var t="",i,n,r;for(r=this._zoom;r>0;r--){i=0;n=1<<r-1;if((e.x&n)!==0){i++}if((e.y&n)!==0){i+=2}t+=i}return t}});r(n,{map:{layers:{bing:u,BingLayer:u,BingView:c}}})})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("dataviz/map/layers/marker",["dataviz/map/layers/base","dataviz/map/location","kendo.data","kendo.tooltip"],e)})(function(){(function(i,e){var n=document,t=Math,r=i.inArray,a=i.proxy,o=window.kendo,s=o.Class,l=o.data.DataSource,d=o.ui.Tooltip,u=o.dataviz,c=o.deepExtend,f=u.map,h=f.Location,p=f.layers.Layer;var v=p.extend({init:function(e,t){p.fn.init.call(this,e,t);this._markerClick=a(this._markerClick,this);this.element.on("click",".k-marker",this._markerClick);this.items=[];this._initDataSource()},destroy:function(){p.fn.destroy.call(this);this.element.off("click",".k-marker",this._markerClick);this.dataSource.unbind("change",this._dataChange);this.clear()},options:{zIndex:1e3,autoBind:true,dataSource:{},locationField:"location",titleField:"title"},add:function(e){if(i.isArray(e)){for(var t=0;t<e.length;t++){this._addOne(e[t])}}else{return this._addOne(e)}},remove:function(e){e.destroy();var t=r(e,this.items);if(t>-1){this.items.splice(t,1)}},clear:function(){for(var e=0;e<this.items.length;e++){this.items[e].destroy()}this.items=[]},update:function(e){var t=e.location();if(t){e.showAt(this.map.locationToView(t));var i={marker:e,layer:this};this.map.trigger("markerActivate",i)}},_reset:function(){p.fn._reset.call(this);var e=this.items;for(var t=0;t<e.length;t++){this.update(e[t])}},bind:function(e,t){var i=f.Marker.create(e,this.options);i.dataItem=t;var n={marker:i,layer:this};var r=this.map.trigger("markerCreated",n);if(!r){this.add(i);return i}},setDataSource:function(e){if(this.dataSource){this.dataSource.unbind("change",this._dataChange)}this.dataSource=o.data.DataSource.create(e);this.dataSource.bind("change",this._dataChange);if(this.options.autoBind){this.dataSource.fetch()}},_addOne:function(e){var t=m.create(e,this.options);t.addTo(this);return t},_initDataSource:function(){var e=this.options.dataSource;this._dataChange=a(this._dataChange,this);this.dataSource=l.create(e).bind("change",this._dataChange);if(e&&this.options.autoBind){this.dataSource.fetch()}},_dataChange:function(e){this._load(e.sender.view())},_load:function(e){this._data=e;this.clear();var t=o.getter(this.options.locationField);var i=o.getter(this.options.titleField);for(var n=0;n<e.length;n++){var r=e[n];this.bind({location:t(r),title:i(r)},r)}},_markerClick:function(e){var t={marker:i(e.target).data("kendoMarker"),layer:this};this.map.trigger("markerClick",t)}});var m=s.extend({init:function(e){this.options=e||{}},addTo:function(e){this.layer=e.markers||e;this.layer.items.push(this);this.layer.update(this)},location:function(e){if(e){this.options.location=h.create(e).toArray();if(this.layer){this.layer.update(this)}return this}else{return h.create(this.options.location)}},showAt:function(e){this.render();this.element.css({left:t.round(e.x),top:t.round(e.y)});if(this.tooltip&&this.tooltip.popup){this.tooltip.popup._position()}},hide:function(){if(this.element){this.element.remove();this.element=null}if(this.tooltip){this.tooltip.destroy();this.tooltip=null}},destroy:function(){this.layer=null;this.hide()},render:function(){if(!this.element){var e=this.options;var t=this.layer;this.element=i(n.createElement("span")).addClass("k-marker k-icon k-i-marker-"+o.toHyphens(e.shape||"pin")).attr("title",e.title).attr(e.attributes||{}).data("kendoMarker",this).css("zIndex",e.zIndex);if(t){t.element.append(this.element)}this.renderTooltip()}},renderTooltip:function(){var t=this;var e=t.options.title;var i=t.options.tooltip||{};if(i&&d){var n=i.template;if(n){var r=o.template(n);i.content=function(e){e.location=t.location();e.marker=t;return r(e)}}if(e||i.content||i.contentUrl){this.tooltip=new d(this.element,i);this.tooltip.marker=this}}}});m.create=function(e,t){if(e instanceof m){return e}return new m(c({},t,e))};c(u,{map:{layers:{marker:v,MarkerLayer:v},Marker:m}})})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("dataviz/map/main",["dataviz/map/crs","dataviz/map/location"],e)})(function(){(function(a,e){var i=document,u=Math,n=u.min,c=u.pow,r=a.proxy,o=window.kendo,s=o.ui.Widget,l=o.deepExtend,d=o.dataviz,f=d.ui,h=o.geometry,p=h.Point,t=d.map,v=t.Extent,m=t.Location,g=t.crs.EPSG3857,_=o.util,b=_.renderPos,w=o.drawing.util,k=w.defined,y=w.limitValue,x=w.valueOrDefault;var C="k-",S=.9,T=.93,D="DOMMouseScroll mousewheel",A=5,E=1;var I=s.extend({init:function(e,t){o.destroy(e);s.fn.init.call(this,e);this._initOptions(t);this.bind(this.events,t);this.crs=new g;this.element.addClass(C+this.options.name.toLowerCase()).css("position","relative").empty().append(i.createElement("div"));this._viewOrigin=this._getOrigin();this._initScroller();this._initMarkers();this._initControls();this._initLayers();this._reset();this._mousewheel=r(this._mousewheel,this);this.element.bind(D,this._mousewheel)},options:{name:"Map",controls:{attribution:true,navigator:{panStep:100},zoom:true},layers:[],layerDefaults:{shape:{style:{fill:{color:"#fff"},stroke:{color:"#aaa",width:.5}}},bubble:{style:{fill:{color:"#fff",opacity:.5},stroke:{color:"#aaa",width:.5}}},marker:{shape:"pinTarget",tooltip:{position:"top"}}},center:[0,0],zoom:3,minSize:256,minZoom:1,maxZoom:19,markers:[],markerDefaults:{shape:"pinTarget",tooltip:{position:"top"}},wraparound:true},events:["beforeReset","click","markerActivate","markerClick","markerCreated","pan","panEnd","reset","shapeClick","shapeCreated","shapeFeatureCreated","shapeMouseEnter","shapeMouseLeave","zoomEnd","zoomStart"],destroy:function(){this.scroller.destroy();if(this.navigator){this.navigator.destroy()}if(this.attribution){this.attribution.destroy()}if(this.zoomControl){this.zoomControl.destroy()}this.markers.destroy();for(var e=0;e<this.layers.length;e++){this.layers[e].destroy()}s.fn.destroy.call(this)},zoom:function(e){var t=this.options;if(k(e)){e=u.round(y(e,t.minZoom,t.maxZoom));if(t.zoom!==e){t.zoom=e;this._reset()}return this}else{return t.zoom}},center:function(e){if(e){this.options.center=m.create(e).toArray();this._reset();return this}else{return m.create(this.options.center)}},extent:function(e){if(e){this._setExtent(e);return this}else{return this._getExtent()}},setOptions:function(e){s.fn.setOptions.call(this,e);this._reset()},locationToLayer:function(e,t){var i=!this.options.wraparound;e=m.create(e);return this.crs.toPoint(e,this._layerSize(t),i)},layerToLocation:function(e,t){var i=!this.options.wraparound;e=p.create(e);return this.crs.toLocation(e,this._layerSize(t),i)},locationToView:function(e){e=m.create(e);var t=this.locationToLayer(this._viewOrigin);var i=this.locationToLayer(e);return i.translateWith(t.scale(-1))},viewToLocation:function(e,t){var i=this.locationToLayer(this._getOrigin(),t);e=p.create(e);e=e.clone().translateWith(i);return this.layerToLocation(e,t)},eventOffset:function(e){var t;var i;var n;var r=this.element.offset();if(e.x||e.y){var a="location";i=e.x[a]-r.left;n=e.y[a]-r.top;t=new h.Point(i,n)}else{var o=e.originalEvent||e;i=x(o.pageX,o.clientX)-r.left;n=x(o.pageY,o.clientY)-r.top;t=new h.Point(i,n)}return t},eventToView:function(e){var t=this.eventOffset(e);return this.locationToView(this.viewToLocation(t))},eventToLayer:function(e){return this.locationToLayer(this.eventToLocation(e))},eventToLocation:function(e){var t=this.eventOffset(e);return this.viewToLocation(t)},viewSize:function(){var e=this.element;var t=this._layerSize();var i=e.width();if(!this.options.wraparound){i=n(t,i)}return{width:i,height:n(t,e.height())}},exportVisual:function(){this._reset();return false},_setOrigin:function(e,t){var i=this.viewSize(),n;e=this._origin=m.create(e);n=this.locationToLayer(e,t);n.x+=i.width/2;n.y+=i.height/2;this.options.center=this.layerToLocation(n,t).toArray();return this},_getOrigin:function(e){var t=this.viewSize(),i;if(e||!this._origin){i=this.locationToLayer(this.center());i.x-=t.width/2;i.y-=t.height/2;this._origin=this.layerToLocation(i)}return this._origin},_setExtent:function(e){var t=v.create(e);var i=t.se.clone();if(this.options.wraparound&&i.lng<0&&e.nw.lng>0){i.lng=180+(180+i.lng)}e=new v(t.nw,i);this.center(e.center());var n=this.element.width();var r=this.element.height();for(var a=this.options.maxZoom;a>=this.options.minZoom;a--){var o=this.locationToLayer(e.nw,a);var s=this.locationToLayer(e.se,a);var l=u.abs(s.x-o.x);var d=u.abs(s.y-o.y);if(l<=n&&d<=r){break}}this.zoom(a)},_getExtent:function(){var e=this._getOrigin();var t=this.locationToLayer(e);var i=this.viewSize();t.x+=i.width;t.y+=i.height;var n=this.layerToLocation(t);return new v(e,n)},_zoomAround:function(e,t){this._setOrigin(this.layerToLocation(e,t),t);this.zoom(t)},_initControls:function(){var e=this.options.controls;if(f.Attribution&&e.attribution){this._createAttribution(e.attribution)}if(!o.support.mobileOS){if(f.Navigator&&e.navigator){this._createNavigator(e.navigator)}if(f.ZoomControl&&e.zoom){this._createZoomControl(e.zoom)}}},_createControlElement:function(e,t){var i=e.position||t;var n="."+b(i).replace(" ",".");var r=a(".k-map-controls"+n,this.element);if(r.length===0){r=a("<div>").addClass("k-map-controls "+b(i)).appendTo(this.element)}return a("<div>").appendTo(r)},_createAttribution:function(e){var t=this._createControlElement(e,"bottomRight");this.attribution=new f.Attribution(t,e)},_createNavigator:function(e){var t=this._createControlElement(e,"topLeft");var i=this.navigator=new f.Navigator(t,e);this._navigatorPan=r(this._navigatorPan,this);i.bind("pan",this._navigatorPan);this._navigatorCenter=r(this._navigatorCenter,this);i.bind("center",this._navigatorCenter)},_navigatorPan:function(e){var t=this;var i=t.scroller;var n=i.scrollLeft+e.x;var r=i.scrollTop-e.y;var a=this._virtualSize;var o=this.element.height();var s=this.element.width();n=y(n,a.x.min,a.x.max-s);r=y(r,a.y.min,a.y.max-o);t.scroller.one("scroll",function(e){t._scrollEnd(e)});t.scroller.scrollTo(-n,-r)},_navigatorCenter:function(){this.center(this.options.center)},_createZoomControl:function(e){var t=this._createControlElement(e,"topLeft");var i=this.zoomControl=new f.ZoomControl(t,e);this._zoomControlChange=r(this._zoomControlChange,this);i.bind("change",this._zoomControlChange)},_zoomControlChange:function(e){if(!this.trigger("zoomStart",{originalEvent:e})){this.zoom(this.zoom()+e.delta);this.trigger("zoomEnd",{originalEvent:e})}},_initScroller:function(){var e=o.support.mobileOS?T:S;var t=this.options.zoomable!==false;var i=this.scroller=new o.mobile.ui.Scroller(this.element.children(0),{friction:e,velocityMultiplier:A,zoom:t,mousewheelScrolling:false,supportDoubleTap:true});i.bind("scroll",r(this._scroll,this));i.bind("scrollEnd",r(this._scrollEnd,this));i.userEvents.bind("gesturestart",r(this._scaleStart,this));i.userEvents.bind("gestureend",r(this._scale,this));i.userEvents.bind("doubleTap",r(this._doubleTap,this));i.userEvents.bind("tap",r(this._tap,this));this.scrollElement=i.scrollElement},_initLayers:function(){var e=this.options.layers,t=this.layers=[];for(var i=0;i<e.length;i++){var n=e[i];var r=n.type||"shape";var a=this.options.layerDefaults[r];var o=d.map.layers[r];t.push(new o(this,l({},a,n)))}},_initMarkers:function(){this.markers=new t.layers.MarkerLayer(this,this.options.markerDefaults);this.markers.add(this.options.markers)},_scroll:function(e){var t=this.locationToLayer(this._viewOrigin).round();var i=e.sender.movable;var n=new h.Point(i.x,i.y).scale(-1).scale(1/i.scale);t.x+=n.x;t.y+=n.y;this._scrollOffset=n;this._setOrigin(this.layerToLocation(t));this.trigger("pan",{originalEvent:e,origin:this._getOrigin(),center:this.center()})},_scrollEnd:function(e){if(!this._scrollOffset||!this._panComplete()){return}this._scrollOffset=null;this._panEndTS=new Date;this.trigger("panEnd",{originalEvent:e,origin:this._getOrigin(),center:this.center()})},_panComplete:function(){return new Date-(this._panEndTS||0)>50},_scaleStart:function(e){if(this.trigger("zoomStart",{originalEvent:e})){var t=e.touches[1];if(t){t.cancel()}}},_scale:function(e){var t=this.scroller.movable.scale;var i=this._scaleToZoom(t);var n=new h.Point(e.center.x,e.center.y);var r=this.viewToLocation(n,i);var a=this.locationToLayer(r,i);var o=a.translate(-n.x,-n.y);this._zoomAround(o,i);this.trigger("zoomEnd",{originalEvent:e})},_scaleToZoom:function(e){var t=this._layerSize()*e;var i=t/this.options.minSize;var n=u.log(i)/u.log(2);return u.round(n)},_reset:function(){if(this.attribution){this.attribution.filter(this.center(),this.zoom())}this._viewOrigin=this._getOrigin(true);this._resetScroller();this.trigger("beforeReset");this.trigger("reset")},_resetScroller:function(){var e=this.scroller;var t=e.dimensions.x;var i=e.dimensions.y;var n=this._layerSize();var r=this.extent().nw;var a=this.locationToLayer(r).round();e.movable.round=true;e.reset();e.userEvents.cancel();var o=this.zoom();e.dimensions.forcedMinScale=c(2,this.options.minZoom-o);e.dimensions.maxScale=c(2,this.options.maxZoom-o);var s={min:-a.x,max:n-a.x};var l={min:-a.y,max:n-a.y};if(this.options.wraparound){s.max=20*n;s.min=-s.max}if(this.options.pannable===false){var d=this.viewSize();s.min=l.min=0;s.max=d.width;l.max=d.height}t.makeVirtual();i.makeVirtual();t.virtualSize(s.min,s.max);i.virtualSize(l.min,l.max);this._virtualSize={x:s,y:l}},_renderLayers:function(){var e=this.options.layers,t=this.layers=[],i=this.scrollWrap;i.empty();for(var n=0;n<e.length;n++){var r=e[n];var a=r.type||"shape";var o=this.options.layerDefaults[a];var s=d.map.layers[a];t.push(new s(this,l({},o,r)))}},_layerSize:function(e){e=x(e,this.options.zoom);return this.options.minSize*c(2,e)},_tap:function(e){if(!this._panComplete()){return}var t=this.eventOffset(e);this.trigger("click",{originalEvent:e,location:this.viewToLocation(t)})},_doubleTap:function(e){var t=this.options;if(t.zoomable!==false){if(!this.trigger("zoomStart",{originalEvent:e})){var i=this.zoom()+E;var n=this.eventOffset(e);var r=this.viewToLocation(n);var a=this.locationToLayer(r,i);var o=a.translate(-n.x,-n.y);this._zoomAround(o,i);this.trigger("zoomEnd",{originalEvent:e})}}},_mousewheel:function(e){e.preventDefault();var t=d.mwDelta(e)>0?-1:1;var i=this.options;var n=this.zoom();var r=y(n+t,i.minZoom,i.maxZoom);if(i.zoomable!==false&&r!==n){if(!this.trigger("zoomStart",{originalEvent:e})){var a=this.eventOffset(e);var o=this.viewToLocation(a);var s=this.locationToLayer(o,r);var l=s.translate(-a.x,-a.y);this._zoomAround(l,r);this.trigger("zoomEnd",{originalEvent:e})}}}});d.ui.plugin(I)})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.dataviz.map",["kendo.data","kendo.userevents","kendo.tooltip","kendo.mobile.scroller","kendo.draganddrop","kendo.dataviz.core","dataviz/map/location","dataviz/map/attribution","dataviz/map/navigator","dataviz/map/zoom","dataviz/map/crs","dataviz/map/layers/base","dataviz/map/layers/shape","dataviz/map/layers/bubble","dataviz/map/layers/tile","dataviz/map/layers/bing","dataviz/map/layers/marker","dataviz/map/main"],e)})(function(){var e={id:"dataviz.map",name:"Map",category:"dataviz",description:"The Kendo DataViz Map displays spatial data",depends:["data","userevents","tooltip","dataviz.core","drawing","mobile.scroller"]};return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("dataviz/diagram/utils",["kendo.core"],e)})(function(){(function(i,e){var t=window.kendo,r=t.dataviz.diagram={},n=t.deepExtend,a=i.isArray,o=1e-6;var l={};n(l,{isNearZero:function(e){return Math.abs(e)<o},isDefined:function(e){return typeof e!=="undefined"},isUndefined:function(e){return typeof e==="undefined"||e===null},isObject:function(e){return e===Object(e)},has:function(e,t){return Object.hasOwnProperty.call(e,t)},isString:function(e){return Object.prototype.toString.call(e)=="[object String]"},isBoolean:function(e){return Object.prototype.toString.call(e)=="[object Boolean]"},isType:function(e,t){return Object.prototype.toString.call(e)=="[object "+t+"]"},isNumber:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},isEmpty:function(e){if(e===null){return true}if(a(e)||l.isString(e)){return e.length===0}for(var t in e){if(l.has(e,t)){return false}}return true},simpleExtend:function(e,t){if(!l.isObject(t)){return}for(var i in t){e[i]=t[i]}},initArray:function e(t,i){var n=[];for(var r=0;r<t;++r){n[r]=i}return n},serializePoints:function(e){var t=[];for(var i=0;i<e.length;i++){var n=e[i];t.push(n.x+";"+n.y)}return t.join(";")},deserializePoints:function(e){var t=e.split(";"),i=[];if(t.length%2!==0){throw"Not an array of points."}for(var n=0;n<t.length;n+=2){i.push(new r.Point(parseInt(t[n],10),parseInt(t[n+1],10)))}return i},randomInteger:function(e,t){return parseInt(Math.floor(Math.random()*t)+e,10)},DFT:function(e,t){t(e);if(e.childNodes){for(var i=0;i<e.childNodes.length;i++){var n=e.childNodes[i];this.DFT(n,t)}}},getMatrixAngle:function(e){if(e===null||e.d===0){return 0}return Math.atan2(e.b,e.d)*180/Math.PI},getMatrixScaling:function(e){var t=Math.sqrt(e.a*e.a+e.c*e.c);var i=Math.sqrt(e.b*e.b+e.d*e.d);return[t,i]}});function s(e,t,i){if(typeof e=="undefined"||typeof t=="undefined"){return[]}if(i&&l.sign(t-e)!=l.sign(i)){throw"The sign of the increment should allow to reach the stop-value."}i=i||1;e=e||0;t=t||e;if((t-e)/i===Infinity){throw"Infinite range defined."}var n=[],r=-1,a;function o(e){var t=1;while(e*t%1){t*=10}return t}var s=o(Math.abs(i));e*=s;t*=s;i*=s;if(e>t&&i>0){i=-i}if(i<0){while((a=e+i*++r)>=t){n.push(a/s)}}else{while((a=e+i*++r)<=t){n.push(a/s)}}return n}function d(e,t){if(e==t){return 0}var i=t.x-e.x,n=e.y-t.y,r=Math.atan(i/n);if(n>=0){return i<0?r+2*Math.PI:r}return r+Math.PI}l.sign=function(e){return e?e<0?-1:1:0};l.findAngle=function(e,t){return d(e,t)*180/Math.PI};l.forEach=function(e,t,i){for(var n=0;n<e.length;n++){t.call(i,e[n],n,e)}};l.any=function(e,t){for(var i=0;i<e.length;++i){if(t(e[i])){return e[i]}}return null};l.remove=function(e,t){var i;while((i=l.indexOf(e,t))!==-1){e.splice(i,1)}return e};l.contains=function(e,t){return l.indexOf(e,t)!==-1};l.indexOf=function(e,t){return i.inArray(t,e)};l.fold=function(e,t,i,n){var r=arguments.length>2;for(var a=0;a<e.length;a++){var o=e[a];if(!r){i=o;r=true}else{i=t.call(n,i,o,a,e)}}if(!r){throw"Reduce of empty array with no initial value"}return i};l.find=function(e,n,r){var a;l.any(e,function(e,t,i){if(n.call(r,e,t,i)){a=e;return true}return false});return a};l.first=function(e,t,i){if(e.length===0){return null}if(l.isUndefined(t)){return e[0]}return l.find(e,t,i)};l.insert=function(e,t,i){e.splice(i,0,t);return e};l.all=function(e,t,i){var n=true;var r;for(var a=0;a<e.length;a++){r=e[a];n=n&&t.call(i,r,a,e);if(!n){break}}return n};l.clear=function(e){e.splice(0,e.length)};l.bisort=function(e,t,i){if(l.isUndefined(e)){throw"First array is not specified."}if(l.isUndefined(t)){throw"Second array is not specified."}if(e.length!=t.length){throw"The two arrays should have equal length"}var n=[],r;for(r=0;r<e.length;r++){n.push({x:e[r],y:t[r]})}if(l.isUndefined(i)){n.sort(function(e,t){return e.x-t.x})}else{n.sort(function(e,t){return i(e.x,t.x)})}l.clear(e);l.clear(t);for(r=0;r<n.length;r++){e.push(n[r].x);t.push(n[r].y)}};l.addRange=function(e,t){e.push.apply(e,t)};var u={easeInOut:function(e){return-Math.cos(e*Math.PI)/2+.5}};var c=t.Class.extend({init:function(){this.adapters=[];this.target=0;this.tick=0;this.interval=20;this.duration=800;this.lastTime=null;this.handlers=[];var e=this;this.transition=u.easeInOut;this.timerDelegate=function(){e.onTimerEvent()}},addAdapter:function(e){this.adapters.push(e)},onComplete:function(e){this.handlers.push(e)},removeHandler:function(t){this.handlers=i.grep(this.handlers,function(e){return e!==t})},trigger:function(){var t=this;if(this.handlers){l.forEach(this.handlers,function(e){return e.call(t.caller!==null?t.caller:t)})}},onStep:function(){},seekTo:function(e){this.seekFromTo(this.tick,e)},seekFromTo:function(e,t){this.target=Math.max(0,Math.min(1,t));this.tick=Math.max(0,Math.min(1,e));this.lastTime=(new Date).getTime();if(!this.intervalId){this.intervalId=window.setInterval(this.timerDelegate,this.interval)}},stop:function(){if(this.intervalId){window.clearInterval(this.intervalId);this.intervalId=null;this.trigger()}},play:function(e){if(this.adapters.length===0){return}if(e!==null){this.caller=e}this.initState();this.seekFromTo(0,1)},reverse:function(){this.seekFromTo(1,0)},initState:function(){if(this.adapters.length===0){return}for(var e=0;e<this.adapters.length;e++){this.adapters[e].initState()}},propagate:function(){var e=this.transition(this.tick);for(var t=0;t<this.adapters.length;t++){this.adapters[t].update(e)}},onTimerEvent:function(){var e=(new Date).getTime();var t=e-this.lastTime;this.lastTime=e;var i=t/this.duration*(this.tick<this.target?1:-1);if(Math.abs(i)>=Math.abs(this.tick-this.target)){this.tick=this.target}else{this.tick+=i}try{this.propagate()}finally{this.onStep.call(this);if(this.target==this.tick){this.stop()}}}});t.deepExtend(r,{init:function(e){t.init(e,r.ui)},Utils:l,Range:s,Ticker:c})})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("dataviz/diagram/math",["dataviz/diagram/utils","kendo.dataviz.core"],e)})(function(){(function(n,i){var w=window.kendo,p=w.dataviz.diagram,e=w.Class,t=w.deepExtend,r=w.dataviz,R=p.Utils,k=r.Point2D,a=w.isFunction,v=R.contains,o=n.map;var s=3,l=1e-6;t(k.fn,{plus:function(e){return new k(this.x+e.x,this.y+e.y)},minus:function(e){return new k(this.x-e.x,this.y-e.y)},offset:function(e){return new k(this.x-e,this.y-e)},times:function(e){return new k(this.x*e,this.y*e)},normalize:function(){if(this.length()===0){return new k}return this.times(1/this.length())},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},toString:function(){return"("+this.x+","+this.y+")"},lengthSquared:function(){return this.x*this.x+this.y*this.y},middleOf:function e(t,i){return new k(i.x-t.x,i.y-t.y).times(.5).plus(t)},toPolar:function(e){var t=1;if(e){t=180/Math.PI}var i=Math.atan2(Math.abs(this.y),Math.abs(this.x));var n=Math.PI/2;var r=this.length();if(this.x===0){if(this.y===0){return new g(0,0)}if(this.y>0){return new g(r,t*n)}if(this.y<0){return new g(r,t*3*n)}}else if(this.x>0){if(this.y===0){return new g(r,0)}if(this.y>0){return new g(r,t*i)}if(this.y<0){return new g(r,t*(4*n-i))}}else{if(this.y===0){return new g(r,2*n)}if(this.y>0){return new g(r,t*(2*n-i))}if(this.y<0){return new g(r,t*(2*n+i))}}},isOnLine:function(e,t){if(e.x>t.x){var i=t;t=e;e=i}var n=new y(e.x,e.y).inflate(s,s),r=new y(t.x,t.y).inflate(s,s),a,o;if(n.union(r).contains(this)){if(e.x===t.x||e.y===t.y){return true}else if(e.y<t.y){a=n.x+(r.x-n.x)*(this.y-(n.y+n.height))/(r.y+r.height-(n.y+n.height));o=n.x+n.width+(r.x+r.width-(n.x+n.width))*(this.y-n.y)/(r.y-n.y)}else{a=n.x+(r.x-n.x)*(this.y-n.y)/(r.y-n.y);o=n.x+n.width+(r.x+r.width-(n.x+n.width))*(this.y-(n.y+n.height))/(r.y+r.height-(n.y+n.height))}return this.x>a&&this.x<o}return false}});t(k,{parse:function(e){var t=e.slice(1,e.length-1),i=t.split(","),n=parseInt(i[0],10),r=parseInt(i[1],10);if(!isNaN(n)&&!isNaN(r)){return new k(n,r)}}});var d=e.extend({init:function(e,t,i){this.point=e;this.left=t;this.right=i}});var y=e.extend({init:function(e,t,i,n){this.x=e||0;this.y=t||0;this.width=i||0;this.height=n||0},contains:function(e){return e.x>=this.x&&e.x<=this.x+this.width&&e.y>=this.y&&e.y<=this.y+this.height},inflate:function(e,t){if(t===i){t=e}this.x-=e;this.y-=t;this.width+=2*e+1;this.height+=2*t+1;return this},offset:function(e,t){var i=e,n=t;if(e instanceof k){i=e.x;n=e.y}this.x+=i;this.y+=n;return this},union:function(e){var t=Math.min(this.x,e.x);var i=Math.min(this.y,e.y);var n=Math.max(this.x+this.width,e.x+e.width);var r=Math.max(this.y+this.height,e.y+e.height);return new y(t,i,n-t,r-i)},center:function(){return new k(this.x+this.width/2,this.y+this.height/2)},top:function(){return new k(this.x+this.width/2,this.y)},right:function(){return new k(this.x+this.width,this.y+this.height/2)},bottom:function(){return new k(this.x+this.width/2,this.y+this.height)},left:function(){return new k(this.x,this.y+this.height/2)},topLeft:function(){return new k(this.x,this.y)},topRight:function(){return new k(this.x+this.width,this.y)},bottomLeft:function(){return new k(this.x,this.y+this.height)},bottomRight:function(){return new k(this.x+this.width,this.y+this.height)},clone:function(){return new y(this.x,this.y,this.width,this.height)},isEmpty:function(){return!this.width&&!this.height},equals:function(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height},rotatedBounds:function(e){var t=this.clone(),i=this.rotatedPoints(e),n=i[0],r=i[1],a=i[2],o=i[3];t.x=Math.min(a.x,n.x,r.x,o.x);t.y=Math.min(a.y,n.y,r.y,o.y);t.width=Math.max(a.x,n.x,r.x,o.x)-t.x;t.height=Math.max(a.y,n.y,r.y,o.y)-t.y;return t},rotatedPoints:function(e){var t=this,i=t.center(),n=t.bottomRight().rotate(i,360-e),r=t.topLeft().rotate(i,360-e),a=t.topRight().rotate(i,360-e),o=t.bottomLeft().rotate(i,360-e);return[r,a,n,o]},toString:function(e){e=e||" ";return this.x+e+this.y+e+this.width+e+this.height},scale:function(e,t,i,n,r){var a=this.topLeft();var o=this.center();a.rotate(o,360-r).rotate(n,r);var s=i.minus(a);var l=new k(s.x*e,s.y*t);var d=s.minus(l);a=a.plus(d);a.rotate(n,360-r).rotate(o,r);this.x=a.x;this.y=a.y;this.width*=e;this.height*=t},zoom:function(e){this.x*=e;this.y*=e;this.width*=e;this.height*=e;return this},overlaps:function(e){var t=this.bottomRight();var i=e.bottomRight();var n=!(t.x<e.x||t.y<e.y||i.x<this.x||i.y<this.y);return n}});var u=e.extend({init:function(e,t){this.width=e;this.height=t}});u.prototype.Empty=new u(0,0);y.toRect=function(e){if(!(e instanceof y)){e=new y(e.x,e.y,e.width,e.height)}return e};y.empty=function(){return new y(0,0,0,0)};y.fromPoints=function(e,t){if(isNaN(e.x)||isNaN(e.y)||isNaN(t.x)||isNaN(t.y)){throw"Some values are NaN."}return new y(Math.min(e.x,t.x),Math.min(e.y,t.y),Math.abs(e.x-t.x),Math.abs(e.y-t.y))};function c(e){return Math.abs(e)<l}function f(e,t,i,n,r){var a=(t.x-e.x)*(n.y-i.y)-(t.y-e.y)*(n.x-i.x);if(c(a)){return}var o=(e.y-i.y)*(n.x-i.x)-(e.x-i.x)*(n.y-i.y);var s=(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y);var l=o/a;var d=s/a;if(r&&(l<0||l>1||d<0||d>1)){return}return new k(e.x+l*(t.x-e.x),e.y+l*(t.y-e.y))}var h={lines:function(e,t,i,n){return f(e,t,i,n)},segments:function(e,t,i,n){return f(e,t,i,n,true)},rectWithLine:function(e,t,i){return h.segments(t,i,e.topLeft(),e.topRight())||h.segments(t,i,e.topRight(),e.bottomRight())||h.segments(t,i,e.bottomLeft(),e.bottomRight())||h.segments(t,i,e.topLeft(),e.bottomLeft())},rects:function(e,t,i){var n=t.topLeft(),r=t.topRight(),a=t.bottomLeft(),o=t.bottomRight();var s=t.center();if(i){n=n.rotate(s,i);r=r.rotate(s,i);a=a.rotate(s,i);o=o.rotate(s,i)}var l=e.contains(n)||e.contains(r)||e.contains(a)||e.contains(o)||h.rectWithLine(e,n,r)||h.rectWithLine(e,n,a)||h.rectWithLine(e,r,o)||h.rectWithLine(e,a,o);if(!l){n=e.topLeft();r=e.topRight();a=e.bottomLeft();o=e.bottomRight();if(i){var d=360-i;n=n.rotate(s,d);r=r.rotate(s,d);a=a.rotate(s,d);o=o.rotate(s,d)}l=t.contains(n)||t.contains(r)||t.contains(a)||t.contains(o)}return l}};var m=e.extend({init:function(e){this.container=y.toRect(e)},align:function(e,t){var i=t.toLowerCase().split(" ");for(var n=0;n<i.length;n++){e=this._singleAlign(e,i[n])}return e},_singleAlign:function(e,t){if(a(this[t])){return this[t](e)}else{return e}},left:function(e){return this._align(e,this._left)},center:function(e){return this._align(e,this._center)},right:function(e){return this._align(e,this._right)},stretch:function(e){return this._align(e,this._stretch)},top:function(e){return this._align(e,this._top)},middle:function(e){return this._align(e,this._middle)},bottom:function(e){return this._align(e,this._bottom)},_left:function(e,t){t.x=e.x},_center:function(e,t){t.x=(e.width-t.width)/2||0},_right:function(e,t){t.x=e.width-t.width},_top:function(e,t){t.y=e.y},_middle:function(e,t){t.y=(e.height-t.height)/2||0},_bottom:function(e,t){t.y=e.height-t.height},_stretch:function(e,t){t.x=0;t.y=0;t.height=e.height;t.width=e.width},_align:function(e,t){e=y.toRect(e);t(this.container,e);return e}});var g=e.extend({init:function(e,t){this.r=e;this.angle=t}});var _=e.extend({init:function(e,t,i,n,r,a){this.a=e||0;this.b=t||0;this.c=i||0;this.d=n||0;this.e=r||0;this.f=a||0},plus:function(e){this.a+=e.a;this.b+=e.b;this.c+=e.c;this.d+=e.d;this.e+=e.e;this.f+=e.f},minus:function(e){this.a-=e.a;this.b-=e.b;this.c-=e.c;this.d-=e.d;this.e-=e.e;this.f-=e.f},times:function(e){return new _(this.a*e.a+this.c*e.b,this.b*e.a+this.d*e.b,this.a*e.c+this.c*e.d,this.b*e.c+this.d*e.d,this.a*e.e+this.c*e.f+this.e,this.b*e.e+this.d*e.f+this.f)},apply:function(e){return new k(this.a*e.x+this.c*e.y+this.e,this.b*e.x+this.d*e.y+this.f)},applyRect:function(e){return y.fromPoints(this.apply(e.topLeft()),this.apply(e.bottomRight()))},toString:function(){return"matrix("+this.a+" "+this.b+" "+this.c+" "+this.d+" "+this.e+" "+this.f+")"}});t(_,{fromSVGMatrix:function(e){var t=new _;t.a=e.a;t.b=e.b;t.c=e.c;t.d=e.d;t.e=e.e;t.f=e.f;return t},fromMatrixVector:function(e){var t=new _;t.a=e.a;t.b=e.b;t.c=e.c;t.d=e.d;t.e=e.e;t.f=e.f;return t},fromList:function(e){if(e.length!==6){throw"The given list should consist of six elements."}var t=new _;t.a=e[0];t.b=e[1];t.c=e[2];t.d=e[3];t.e=e[4];t.f=e[5];return t},translation:function(e,t){var i=new _;i.a=1;i.b=0;i.c=0;i.d=1;i.e=e;i.f=t;return i},unit:function(){return new _(1,0,0,1,0,0)},rotation:function(e,t,i){var n=new _;n.a=Math.cos(e*Math.PI/180);n.b=Math.sin(e*Math.PI/180);n.c=-n.b;n.d=n.a;n.e=t-t*n.a+i*n.b||0;n.f=i-i*n.a-t*n.b||0;return n},scaling:function(e,t){var i=new _;i.a=e;i.b=0;i.c=0;i.d=t;i.e=0;i.f=0;return i},parse:function(e){var t,i;if(e){e=e.trim();if(e.slice(0,6).toLowerCase()==="matrix"){i=e.slice(7,e.length-1).trim();t=i.split(",");if(t.length===6){return _.fromList(o(t,function(e){return parseFloat(e)}))}t=i.split(" ");if(t.length===6){return _.fromList(o(t,function(e){return parseFloat(e)}))}}if(e.slice(0,1)==="("&&e.slice(e.length-1)===")"){e=e.substr(1,e.length-1)}if(e.indexOf(",")>0){t=e.split(",");if(t.length===6){return _.fromList(o(t,function(e){return parseFloat(e)}))}}if(e.indexOf(" ")>0){t=e.split(" ");if(t.length===6){return _.fromList(o(t,function(e){return parseFloat(e)}))}}}return t}});var b=e.extend({init:function(e,t,i,n,r,a){this.a=e||0;this.b=t||0;this.c=i||0;this.d=n||0;this.e=r||0;this.f=a||0},fromMatrix:function e(t){var i=new b;i.a=t.a;i.b=t.b;i.c=t.c;i.d=t.d;i.e=t.e;i.f=t.f;return i}});function x(e,t){var i,n,r;do{i=Math.random()*2-1;n=Math.random()*2-1;r=i*i+n*n}while(!r||r>1);return e+t*i*Math.sqrt(-2*Math.log(r)/r)}function C(e){if(R.isUndefined(e)){e=10}var t="";var i="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(var n=e;n>0;--n){t+=i.charAt(Math.round(Math.random()*(i.length-1)))}return t}var S={_distanceToLineSquared:function(e,t,i){function n(e,t){return(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)}if(t===i){return n(e,t)}var r=i.x-t.x,a=i.y-t.y,o=(e.x-t.x)*r+(e.y-t.y)*a;if(o<0){return n(t,e)}o=(i.x-e.x)*r+(i.y-e.y)*a;if(o<0){return n(i,e)}o=(i.x-e.x)*a-(i.y-e.y)*r;return o*o/(r*r+a*a)},distanceToLine:function(e,t,i){return Math.sqrt(this._distanceToLineSquared(e,t,i))},distanceToPolyline:function(e,t){var i=Number.MAX_VALUE;if(R.isUndefined(t)||t.length===0){return Number.MAX_VALUE}for(var n=0;n<t.length-1;n++){var r=t[n];var a=t[n+1];var o=this._distanceToLineSquared(e,r,a);if(o<i){i=o}}return Math.sqrt(i)}};var T=w.Class.extend({init:function(){this._buckets=[];this.length=0},add:function(e,t){var i=this._createGetBucket(e);if(R.isDefined(t)){i.value=t}return i},get:function(e){if(this._bucketExists(e)){return this._createGetBucket(e)}return null},set:function(e,t){this.add(e,t)},containsKey:function(e){return this._bucketExists(e)},remove:function(e){if(this._bucketExists(e)){var t=this._hash(e);delete this._buckets[t];this.length--;return e}},forEach:function(e){var t=this._hashes();for(var i=0,n=t.length;i<n;i++){var r=t[i];var a=this._buckets[r];if(R.isUndefined(a)){continue}e(a)}},clone:function(){var e=new T;var t=this._hashes();for(var i=0,n=t.length;i<n;i++){var r=t[i];var a=this._buckets[r];if(R.isUndefined(a)){continue}e.add(a.key,a.value)}return e},_hashes:function(){var e=[];for(var t in this._buckets){if(this._buckets.hasOwnProperty(t)){e.push(t)}}return e},_bucketExists:function(e){var t=this._hash(e);return R.isDefined(this._buckets[t])},_createGetBucket:function(e){var t=this._hash(e);var i=this._buckets[t];if(R.isUndefined(i)){i={key:e};this._buckets[t]=i;this.length++}return i},_hash:function(e){if(R.isNumber(e)){return e}if(R.isString(e)){return this._hashString(e)}if(R.isObject(e)){return this._objectHashId(e)}throw"Unsupported key type."},_hashString:function(e){var t=0;if(e.length===0){return t}for(var i=0;i<e.length;i++){var n=e.charCodeAt(i);t=t*32-t+n}return t},_objectHashId:function(e){var t=e._hashId;if(R.isUndefined(t)){t=C();e._hashId=t}return t}});var F=w.Observable.extend({init:function(e){var t=this;w.Observable.fn.init.call(t);this._hashTable=new T;this.length=0;if(R.isDefined(e)){if(n.isArray(e)){for(var i=0;i<e.length;i++){this.add(e[i])}}else{e.forEach(function(e,t){this.add(e,t)},this)}}},add:function(e,t){var i=this._hashTable.get(e);if(!i){i=this._hashTable.add(e);this.length++;this.trigger("changed")}i.value=t},set:function(e,t){this.add(e,t)},get:function(e){var t=this._hashTable.get(e);if(t){return t.value}throw new Error("Cannot find key "+e)},containsKey:function(e){return this._hashTable.containsKey(e)},remove:function(e){if(this.containsKey(e)){this.trigger("changed");this.length--;return this._hashTable.remove(e)}},forEach:function(t,i){this._hashTable.forEach(function(e){t.call(i,e.key,e.value)})},forEachValue:function(t,i){this._hashTable.forEach(function(e){t.call(i,e.value)})},forEachKey:function(t,i){this._hashTable.forEach(function(e){t.call(i,e.key)})},keys:function(){var t=[];this.forEachKey(function(e){t.push(e)});return t}});var D=w.Class.extend({init:function(){this._tail=null;this._head=null;this.length=0},enqueue:function(e){var t={value:e,next:null};if(!this._head){this._head=t;this._tail=this._head}else{this._tail.next=t;this._tail=this._tail.next}this.length++},dequeue:function(){if(this.length<1){throw new Error("The queue is empty.")}var e=this._head.value;this._head=this._head.next;this.length--;return e},contains:function(e){var t=this._head;while(t){if(t.value===e){return true}t=t.next}return false}});var A=w.Observable.extend({init:function(e){var t=this;w.Observable.fn.init.call(t);this._hashTable=new T;this.length=0;if(R.isDefined(e)){if(e instanceof T){e.forEach(function(e){this.add(e)})}else if(e instanceof F){e.forEach(function(e,t){this.add({key:e,value:t})},this)}}},contains:function(e){return this._hashTable.containsKey(e)},add:function(e){var t=this._hashTable.get(e);if(!t){this._hashTable.add(e,e);this.length++;this.trigger("changed")}},get:function(e){if(this.contains(e)){return this._hashTable.get(e).value}else{return null}},hash:function(e){return this._hashTable._hash(e)},remove:function(e){if(this.contains(e)){this._hashTable.remove(e);this.length--;this.trigger("changed")}},forEach:function(t,e){this._hashTable.forEach(function(e){t(e.value)},e)},toArray:function(){var t=[];this.forEach(function(e){t.push(e)});return t}});var E=w.Class.extend({init:function(e,t){this.links=[];this.outgoing=[];this.incoming=[];this.weight=1;if(R.isDefined(e)){this.id=e}else{this.id=C()}if(R.isDefined(t)){this.associatedShape=t;var i=t.bounds();this.width=i.width;this.height=i.height;this.x=i.x;this.y=i.y}else{this.associatedShape=null}this.data=null;this.type="Node";this.shortForm="Node '"+this.id+"'";this.isVirtual=false},isIsolated:function(){return R.isEmpty(this.links)},bounds:function(e){if(!R.isDefined(e)){return new p.Rect(this.x,this.y,this.width,this.height)}this.x=e.x;this.y=e.y;this.width=e.width;this.height=e.height},isLinkedTo:function(t){var i=this;return R.any(i.links,function(e){return e.getComplement(i)===t})},getChildren:function(){if(this.outgoing.length===0){return[]}var e=[];for(var t=0,i=this.outgoing.length;t<i;t++){var n=this.outgoing[t];e.push(n.getComplement(this))}return e},getParents:function(){if(this.incoming.length===0){return[]}var e=[];for(var t=0,i=this.incoming.length;t<i;t++){var n=this.incoming[t];e.push(n.getComplement(this))}return e},clone:function(){var e=new E;if(R.isDefined(this.weight)){e.weight=this.weight}if(R.isDefined(this.balance)){e.balance=this.balance}if(R.isDefined(this.owner)){e.owner=this.owner}e.associatedShape=this.associatedShape;e.x=this.x;e.y=this.y;e.width=this.width;e.height=this.height;return e},adjacentTo:function(e){return this.isLinkedTo(e)!==null},removeLink:function(e){if(e.source===this){R.remove(this.links,e);R.remove(this.outgoing,e);e.source=null}if(e.target===this){R.remove(this.links,e);R.remove(this.incoming,e);e.target=null}},hasLinkTo:function(t){return R.any(this.outgoing,function(e){return e.target===t})},degree:function(){return this.links.length},incidentWith:function(e){return v(this.links,e)},getLinksWith:function(t){return R.all(this.links,function(e){return e.getComplement(this)===t},this)},getNeighbors:function(){var t=[];R.forEach(this.incoming,function(e){t.push(e.getComplement(this))},this);R.forEach(this.outgoing,function(e){t.push(e.getComplement(this))},this);return t}});var I=w.Class.extend({init:function(e,t,i,n){if(R.isUndefined(e)){throw"The source of the new link is not set."}if(R.isUndefined(t)){throw"The target of the new link is not set."}var r,a;if(R.isString(e)){r=new E(e)}else{r=e}if(R.isString(t)){a=new E(t)}else{a=t}this.source=r;this.target=a;this.source.links.push(this);this.target.links.push(this);this.source.outgoing.push(this);this.target.incoming.push(this);if(R.isDefined(i)){this.id=i}else{this.id=C()}if(R.isDefined(n)){this.associatedConnection=n}else{this.associatedConnection=null}this.type="Link";this.shortForm="Link '"+this.source.id+"->"+this.target.id+"'"},getComplement:function(e){if(this.source!==e&&this.target!==e){throw"The given node is not incident with this link."}return this.source===e?this.target:this.source},getCommonNode:function(e){if(this.source===e.source||this.source===e.target){return this.source}if(this.target===e.source||this.target===e.target){return this.target}return null},isBridging:function(e,t){return this.source===e&&this.target===t||this.source===t&&this.target===e},getNodes:function(){return[this.source,this.target]},incidentWith:function(e){return this.source===e||this.target===e},adjacentTo:function(e){return v(this.source.links,e)||v(this.target.links,e)},changeSource:function(e){R.remove(this.source.links,this);R.remove(this.source.outgoing,this);e.links.push(this);e.outgoing.push(this);this.source=e},changeTarget:function(e){R.remove(this.target.links,this);R.remove(this.target.incoming,this);e.links.push(this);e.incoming.push(this);this.target=e},changesNodes:function(e,t){if(this.source===e){this.changeSource(t)}else if(this.target===e){this.changeTarget(t)}},reverse:function(){var e=this.source;var t=this.target;this.source=t;R.remove(e.outgoing,this);this.source.outgoing.push(this);this.target=e;R.remove(t.incoming,this);this.target.incoming.push(this);return this},directTo:function(e){if(this.source!==e&&this.target!==e){throw"The given node is not incident with this link."}if(this.target!==e){this.reverse()}},createReverseEdge:function(){var e=this.clone();e.reverse();e.reversed=true;return e},clone:function(){var e=new I(this.source,this.target);return e}});var M=w.Class.extend({init:function(e){this.links=[];this.nodes=[];this._nodeMap=new F;this.diagram=null;this._root=null;if(R.isDefined(e)){if(R.isString(e)){this.id=e}else{this.diagram=e;this.id=e.id}}else{this.id=C()}this.bounds=new y;this._hasCachedRelationships=false;this.type="Graph"},cacheRelationships:function(e){if(R.isUndefined(e)){e=false}if(this._hasCachedRelationships&&!e){return}for(var t=0,i=this.nodes.length;t<i;t++){var n=this.nodes[t];n.children=this.getChildren(n);n.parents=this.getParents(n)}this._hasCachedRelationships=true},assignLevels:function(e,t,i){if(!e){throw"Start node not specified."}if(R.isUndefined(t)){t=0}this.cacheRelationships();if(R.isUndefined(i)){i=new F;R.forEach(this.nodes,function(e){i.add(e,false)})}i.set(e,true);e.level=t;var n=e.children;for(var r=0,a=n.length;r<a;r++){var o=n[r];if(!o||i.get(o)){continue}this.assignLevels(o,t+1,i)}},root:function(e){if(R.isUndefined(e)){if(!this._root){var t=R.first(this.nodes,function(e){return e.incoming.length===0});if(t){return t}return R.first(this.nodes)}else{return this._root}}else{this._root=e}},getConnectedComponents:function(){this.componentIndex=0;this.setItemIndices();var e=R.initArray(this.nodes.length,-1);for(var t=0;t<this.nodes.length;t++){if(e[t]===-1){this._collectConnectedNodes(e,t);this.componentIndex++}}var i=[],n;for(n=0;n<this.componentIndex;++n){i[n]=new M}for(n=0;n<e.length;++n){var r=i[e[n]];r.addNodeAndOutgoings(this.nodes[n])}i.sort(function(e,t){return t.nodes.length-e.nodes.length});return i},_collectConnectedNodes:function(n,e){n[e]=this.componentIndex;var r=this.nodes[e];R.forEach(r.links,function(e){var t=e.getComplement(r);var i=t.index;if(n[i]===-1){this._collectConnectedNodes(n,i)}},this)},calcBounds:function(){if(this.isEmpty()){this.bounds=new y;return this.bounds}var e=null;for(var t=0,i=this.nodes.length;t<i;t++){var n=this.nodes[t];if(!e){e=n.bounds()}else{e=e.union(n.bounds())}}this.bounds=e;return this.bounds},getSpanningTree:function(e){var t=new M;var i=new F,n,r;t.root=e.clone();t.root.level=0;t.root.id=e.id;i.add(e,t.root);e.level=0;var a=[];var o=[];t._addNode(t.root);a.push(e);o.push(e);var s=1;while(o.length>0){var l=o.pop();for(var d=0;d<l.links.length;d++){var u=l.links[d];var c=u.getComplement(l);if(v(a,c)){continue}c.level=l.level+1;if(s<c.level+1){s=c.level+1}if(!v(o,c)){o.push(c)}if(!v(a,c)){a.push(c)}if(i.containsKey(l)){n=i.get(l)}else{n=l.clone();n.level=l.level;n.id=l.id;i.add(l,n)}if(i.containsKey(c)){r=i.get(c)}else{r=c.clone();r.level=c.level;r.id=c.id;i.add(c,r)}var f=new I(n,r);t.addLink(f)}}var h=[];for(var p=0;p<s;p++){h.push([])}R.forEach(t.nodes,function(e){h[e.level].push(e)});t.treeLevels=h;t.cacheRelationships();return t},takeRandomNode:function(t,i){if(R.isUndefined(t)){t=[]}if(R.isUndefined(i)){i=4}if(this.nodes.length===0){return null}if(this.nodes.length===1){return v(t,this.nodes[0])?null:this.nodes[0]}var e=n.grep(this.nodes,function(e){return!v(t,e)&&e.degree()<=i});if(R.isEmpty(e)){return null}return e[R.randomInteger(0,e.length)]},isEmpty:function(){return R.isEmpty(this.nodes)},isHealthy:function(){return R.all(this.links,function(e){return v(this.nodes,e.source)&&v(this.nodes,e.target)},this)},getParents:function(e){if(!this.hasNode(e)){throw"The given node is not part of this graph."}return e.getParents()},getChildren:function(e){if(!this.hasNode(e)){throw"The given node is not part of this graph."}return e.getChildren()},addLink:function(e,t,i){if(R.isUndefined(e)){throw"The source of the link is not defined."}if(R.isUndefined(t)){if(R.isDefined(e.type)&&e.type==="Link"){this.addExistingLink(e);return}else{throw"The target of the link is not defined."}}var n=this.getNode(e);if(R.isUndefined(n)){n=this.addNode(e)}var r=this.getNode(t);if(R.isUndefined(r)){r=this.addNode(t)}var a=new I(n,r);if(R.isDefined(i)){a.owner=i}this.links.push(a);return a},removeAllLinks:function(){while(this.links.length>0){var e=this.links[0];this.removeLink(e)}},addExistingLink:function(e){if(this.hasLink(e)){return}this.links.push(e);if(this.hasNode(e.source.id)){var t=this.getNode(e.source.id);e.changeSource(t)}else{this.addNode(e.source)}if(this.hasNode(e.target.id)){var i=this.getNode(e.target.id);e.changeTarget(i)}else{this.addNode(e.target)}},hasLink:function(t){if(R.isString(t)){return R.any(this.links,function(e){return e.id===t})}if(t.type==="Link"){return v(this.links,t)}throw"The given object is neither an identifier nor a Link."},getNode:function(e){var t=e.id||e;if(this._nodeMap.containsKey(t)){return this._nodeMap.get(t)}},hasNode:function(e){var t=e.id||e;return this._nodeMap.containsKey(t)},_addNode:function(e){this.nodes.push(e);this._nodeMap.add(e.id,e)},_removeNode:function(e){R.remove(this.nodes,e);this._nodeMap.remove(e.id)},removeNode:function(e){var t=e;if(R.isString(e)){t=this.getNode(e)}if(R.isDefined(t)){var i=t.links;t.links=[];for(var n=0,r=i.length;n<r;n++){var a=i[n];this.removeLink(a)}this._removeNode(t)}else{throw"The identifier should be a Node or the Id (string) of a node."}},areConnected:function(t,i){return R.any(this.links,function(e){return e.source==t&&e.target==i||e.source==i&&e.target==t})},removeLink:function(e){R.remove(this.links,e);R.remove(e.source.outgoing,e);R.remove(e.source.links,e);R.remove(e.target.incoming,e);R.remove(e.target.links,e)},addNode:function(e,t,i){var n=null;if(!R.isDefined(e)){throw"No Node or identifier for a new Node is given."}if(R.isString(e)){if(this.hasNode(e)){return this.getNode(e)}n=new E(e)}else{if(this.hasNode(e)){return this.getNode(e)}n=e}if(R.isDefined(t)){n.bounds(t)}if(R.isDefined(i)){n.owner=i}this._addNode(n);return n},addNodeAndOutgoings:function(e){if(!this.hasNode(e)){this._addNode(e)}var t=e.outgoing;e.outgoing=[];R.forEach(t,function(e){this.addExistingLink(e)},this)},setItemIndices:function(){var e;for(e=0;e<this.nodes.length;++e){this.nodes[e].index=e}for(e=0;e<this.links.length;++e){this.links[e].index=e}},clone:function(e){var i=new M;var n=R.isDefined(e)&&e===true;if(n){i.nodeMap=new F;i.linkMap=new F}var r=new F;R.forEach(this.nodes,function(e){var t=e.clone();r.set(e,t);i._addNode(t);if(n){i.nodeMap.set(t,e)}});R.forEach(this.links,function(e){if(r.containsKey(e.source)&&r.containsKey(e.target)){var t=i.addLink(r.get(e.source),r.get(e.target));if(n){i.linkMap.set(t,e)}}});return i},linearize:function(e){return M.Utils.linearize(this,e)},depthFirstTraversal:function(e,t){if(R.isUndefined(e)){throw"You need to supply a starting node."}if(R.isUndefined(t)){throw"You need to supply an action."}if(!this.hasNode(e)){throw"The given start-node is not part of this graph"}var i=this.getNode(e);var n=[];this._dftIterator(i,t,n)},_dftIterator:function(e,t,i){t(e);i.push(e);var n=e.getChildren();for(var r=0,a=n.length;r<a;r++){var o=n[r];if(v(i,o)){continue}this._dftIterator(o,t,i)}},breadthFirstTraversal:function(e,t){if(R.isUndefined(e)){throw"You need to supply a starting node."}if(R.isUndefined(t)){throw"You need to supply an action."}if(!this.hasNode(e)){throw"The given start-node is not part of this graph"}var i=this.getNode(e);var n=new D;var r=[];n.enqueue(i);while(n.length>0){var a=n.dequeue();t(a);r.push(a);var o=a.getChildren();for(var s=0,l=o.length;s<l;s++){var d=o[s];if(v(r,d)||v(n,d)){continue}n.enqueue(d)}}},_stronglyConnectedComponents:function(e,t,i,n,r,a,o){i.add(t,o);n.add(t,o);o++;a.push(t);var s=t.getChildren(),l;for(var d=0,u=s.length;d<u;d++){l=s[d];if(!i.containsKey(l)){this._stronglyConnectedComponents(e,l,i,n,r,a,o);n.add(t,Math.min(n.get(t),n.get(l)))}else if(v(a,l)){n.add(t,Math.min(n.get(t),i.get(l)))}}if(n.get(t)===i.get(t)){var c=[];do{l=a.pop();c.push(l)}while(l!==t);if(!e||c.length>1){r.push(c)}}},findCycles:function(e){if(R.isUndefined(e)){e=true}var t=new F;var i=new F;var n=[];var r=[];for(var a=0,o=this.nodes.length;a<o;a++){var s=this.nodes[a];if(t.containsKey(s)){continue}this._stronglyConnectedComponents(e,s,t,i,n,r,0)}return n},isAcyclic:function(){return R.isEmpty(this.findCycles())},isSubGraph:function(e){var t=e.linearize();var i=this.linearize();return R.all(t,function(e){return v(i,e)})},makeAcyclic:function(){if(this.isEmpty()||this.nodes.length<=1||this.links.length<=1){return[]}if(this.nodes.length==2){var e=[];if(this.links.length>1){var t=this.links[0];var i=t.source;for(var n=0,r=this.links.length;n<r;n++){var a=this.links[n];if(a.source==i){continue}var o=a.reverse();e.push(o)}}return e}var s=this.clone(true);var l=this.nodes.length;var d=new F;var u=function(e){if(e.outgoing.length===0){return 2-l}else if(e.incoming.length===0){return l-2}else{return e.outgoing.length-e.incoming.length}};var c=function(e,t){var i=u(e,l);if(!t.containsKey(i)){t.set(i,[])}t.get(i).push(e)};R.forEach(s.nodes,function(e){c(e,d)});var f=[];var h=[];while(s.nodes.length>0){var p,v,m;if(d.containsKey(2-l)){var g=d.get(2-l);while(g.length>0){v=g.pop();for(var _=0;_<v.links.length;_++){var b=v.links[_];p=b.getComplement(v);m=u(p,l);R.remove(d.get(m),p);p.removeLink(b);c(p,d)}s._removeNode(v);h.unshift(v)}}if(d.containsKey(l-2)){var w=d.get(l-2);while(w.length>0){p=w.pop();for(var k=0;k<p.links.length;k++){var y=p.links[k];v=y.getComplement(p);m=u(v,l);R.remove(d.get(m),v);v.removeLink(y);c(v,d)}f.push(p);s._removeNode(p)}}if(s.nodes.length>0){for(var x=l-3;x>2-l;x--){if(d.containsKey(x)&&d.get(x).length>0){var C=d.get(x);var S=C.pop();for(var T=0;T<S.links.length;T++){var D=S.links[T];var A=D.getComplement(S);m=u(A,l);R.remove(d.get(m),A);A.removeLink(D);c(A,d)}f.push(S);s._removeNode(S);break}}}}f=f.concat(h);var E=new F;for(var I=0;I<this.nodes.length;I++){E.set(s.nodeMap.get(f[I]),I)}var M=[];R.forEach(this.links,function(e){if(E.get(e.source)>E.get(e.target)){e.reverse();M.push(e)}});return M}});M.Predefined={EightGraph:function(){return M.Utils.parse(["1->2","2->3","3->4","4->1","3->5","5->6","6->7","7->3"])},Mindmap:function(){return M.Utils.parse(["0->1","0->2","0->3","0->4","0->5","1->6","1->7","7->8","2->9","9->10","9->11","3->12","12->13","13->14","4->15","4->16","15->17","15->18","18->19","18->20","14->21","14->22","5->23","23->24","23->25","6->26"])},ThreeGraph:function(){return M.Utils.parse(["1->2","2->3","3->1"])},BinaryTree:function(e){if(R.isUndefined(e)){e=5}return M.Utils.createBalancedTree(e,2)},Linear:function(e){if(R.isUndefined(e)){e=10}return M.Utils.createBalancedTree(e,1)},Tree:function(e,t){return M.Utils.createBalancedTree(e,t)},Forest:function(e,t,i){return M.Utils.createBalancedForest(e,t,i)},Workflow:function(){return M.Utils.parse(["0->1","1->2","2->3","1->4","4->3","3->5","5->6","6->3","6->7","5->4"])},Grid:function(e,t){var i=new p.Graph;if(e<=0&&t<=0){return i}for(var n=0;n<e+1;n++){var r=null;for(var a=0;a<t+1;a++){var o=new E(n.toString()+"."+a.toString());i.addNode(o);if(r){i.addLink(r,o)}if(n>0){var s=i.getNode((n-1).toString()+"."+a.toString());i.addLink(s,o)}r=o}}return i}};M.Utils={parse:function(e){var t,i=new p.Graph,n=e.slice();for(var r=0,a=n.length;r<a;r++){var o=n[r];if(R.isString(o)){if(o.indexOf("->")<0){throw"The link should be specified as 'a->b'."}var s=o.split("->");if(s.length!=2){throw"The link should be specified as 'a->b'."}t=new I(s[0],s[1]);i.addLink(t)}if(R.isObject(o)){if(!t){throw"Specification found before Link definition."}w.deepExtend(t,o)}}return i},linearize:function(e,t){if(R.isUndefined(e)){throw"Expected an instance of a Graph object in slot one."}if(R.isUndefined(t)){t=false}var i=[];for(var n=0,r=e.links.length;n<r;n++){var a=e.links[n];i.push(a.source.id+"->"+a.target.id);if(t){i.push({id:a.id})}}return i},_addShape:function(e,t,i,n){if(R.isUndefined(t)){t=new p.Point(0,0)}if(R.isUndefined(i)){i=C()}n=w.deepExtend({width:20,height:20,id:i,radius:10,fill:"#778899",data:"circle",undoable:false,x:t.x,y:t.y},n);return e.addShape(n)},_addConnection:function(e,t,i,n){return e.connect(t,i,n)},createDiagramFromGraph:function(e,t,i,n){if(R.isUndefined(e)){throw"The diagram surface is undefined."}if(R.isUndefined(t)){throw"No graph specification defined."}if(R.isUndefined(i)){i=true}if(R.isUndefined(n)){n=false}var r=e.element.clientWidth||200;var a=e.element.clientHeight||200;var o=[],s,l;for(var d=0,u=t.nodes.length;d<u;d++){s=t.nodes[d];var c=s.position;if(R.isUndefined(c)){if(R.isDefined(s.x)&&R.isDefined(s.y)){c=new k(s.x,s.y)}else{c=new k(R.randomInteger(10,r-20),R.randomInteger(10,a-20))}}var f={};if(s.id==="0"){}else if(n){w.deepExtend(f,{width:Math.random()*150+20,height:Math.random()*80+50,data:"rectangle",fill:{color:"#778899"}})}l=this._addShape(e,c,s.id,f);var h=l.bounds();if(R.isDefined(h)){s.x=h.x;s.y=h.y;s.width=h.width;s.height=h.height}o[s.id]=l}for(var p=0;p<t.links.length;p++){var v=t.links[p];var m=o[v.source.id];if(R.isUndefined(m)){continue}var g=o[v.target.id];if(R.isUndefined(g)){continue}this._addConnection(e,m,g,{id:v.id})}if(i){var _=new e.SpringLayout(e);_.layoutGraph(t,{limitToView:false});for(var b=0;b<t.nodes.length;b++){s=t.nodes[b];l=o[s.id];l.bounds(new y(s.x,s.y,s.width,s.height))}}},createBalancedTree:function(e,t){if(R.isUndefined(e)){e=3}if(R.isUndefined(t)){t=3}var i=new p.Graph,n=-1,r=[],a;if(e<=0||t<=0){return i}var o=new E((++n).toString());i.addNode(o);i.root=o;r.push(o);for(var s=0;s<e;s++){a=[];for(var l=0;l<r.length;l++){var d=r[l];for(var u=0;u<t;u++){var c=new E((++n).toString());i.addLink(d,c);a.push(c)}}r=a}return i},createBalancedForest:function(e,t,i){if(R.isUndefined(e)){e=3}if(R.isUndefined(t)){t=3}if(R.isUndefined(i)){i=5}var n=new p.Graph,r=-1,a=[],o;if(e<=0||t<=0||i<=0){return n}for(var s=0;s<i;s++){var l=new E((++r).toString());n.addNode(l);a=[l];for(var d=0;d<e;d++){o=[];for(var u=0;u<a.length;u++){var c=a[u];for(var f=0;f<t;f++){var h=new E((++r).toString());n.addLink(c,h);o.push(h)}}a=o}}return n},createRandomConnectedGraph:function(e,t,i){if(R.isUndefined(e)){e=40}if(R.isUndefined(t)){t=4}if(R.isUndefined(i)){i=false}var n=new p.Graph,r=-1;if(e<=0){return n}var a=new E((++r).toString());n.addNode(a);if(e===1){return n}if(e>1){for(var o=1;o<e;o++){var s=n.takeRandomNode([],t);if(!s){break}var l=n.addNode(o.toString());n.addLink(s,l)}if(!i&&e>1){var d=R.randomInteger(1,e);for(var u=0;u<d;u++){var c=n.takeRandomNode([],t);var f=n.takeRandomNode([],t);if(c&&f&&!n.areConnected(c,f)){n.addLink(c,f)}}}return n}},randomDiagram:function(e,t,i,n,r){var a=w.dataviz.diagram.Graph.Utils.createRandomConnectedGraph(t,i,n);M.Utils.createDiagramFromGraph(e,a,false,r)}};w.deepExtend(p,{init:function(e){w.init(e,p.ui)},Point:k,Intersect:h,Geometry:S,Rect:y,Size:u,RectAlign:m,Matrix:_,MatrixVector:b,normalVariable:x,randomId:C,Dictionary:F,HashTable:T,Queue:D,Set:A,Node:E,Link:I,Graph:M,PathDefiner:d})})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("dataviz/diagram/svg",["kendo.drawing","dataviz/diagram/math"],e)})(function(){(function(t,s){var i=window.kendo,n=i.dataviz.diagram,e=i.Class,l=i.deepExtend,d=n.Point,r=n.Rect,u=n.Matrix,B=n.Utils,c=B.isNumber,a=B.isString,L=n.MatrixVector,f=i.geometry,o=i.drawing,h=o.util.defined,H=t.inArray;var p="transparent",v={none:"none",arrowStart:"ArrowStart",filledCircle:"FilledCircle",arrowEnd:"ArrowEnd"},N=360,m="start",g="end",_="width",b="height",w="x",k="y";n.Markers=v;function O(e,t){var i=this.options;var n=false;var r,a;for(var o=0;o<t.length;o++){a=t[o];r=e[a];if(c(r)&&i[a]!==r){i[a]=r;n=true}}return n}var y=e.extend({init:function(e,t){this.x=e;this.y=t},toMatrix:function(){return u.scaling(this.x,this.y)},toString:function(){return i.format("scale({0},{1})",this.x,this.y)},invert:function(){return new y(1/this.x,1/this.y)}});var x=e.extend({init:function(e,t){this.x=e;this.y=t},toMatrixVector:function(){return new L(0,0,0,0,this.x,this.y)},toMatrix:function(){return u.translation(this.x,this.y)},toString:function(){return i.format("translate({0},{1})",this.x,this.y)},plus:function(e){this.x+=e.x;this.y+=e.y},times:function(e){this.x*=e;this.y*=e},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){if(this.Length===0){return}this.times(1/this.length())},invert:function(){return new x(-this.x,-this.y)}});var C=e.extend({init:function(e,t,i){this.x=t||0;this.y=i||0;this.angle=e},toString:function(){if(this.x&&this.y){return i.format("rotate({0},{1},{2})",this.angle,this.x,this.y)}else{return i.format("rotate({0})",this.angle)}},toMatrix:function(){return u.rotation(this.angle,this.x,this.y)},center:function(){return new d(this.x,this.y)},invert:function(){return new C(N-this.angle,this.x,this.y)}});C.ZERO=new C(0);C.create=function(e){return new C(e.angle,e.x,e.y)};C.parse=function(e){var t=e.slice(1,e.length-1).split(","),i=t[0],n=t[1],r=t[2];var a=new C(i,n,r);return a};var S=e.extend({init:function(e,t,i,n,r,a){this.translate=new x(e,t);if(i!==s&&n!==s){this.scale=new y(i,n)}if(r!==s){this.rotate=a?new C(r,a.x,a.y):new C(r)}},toString:function(){var e=function(e){return e?e.toString():""};return e(this.translate)+e(this.rotate)+e(this.scale)},render:function(e){e._transform=this;e._renderTransform()},toMatrix:function(){var e=u.unit();if(this.translate){e=e.times(this.translate.toMatrix())}if(this.rotate){e=e.times(this.rotate.toMatrix())}if(this.scale){e=e.times(this.scale.toMatrix())}return e},invert:function(){var e=this.rotate?this.rotate.invert():s,t=e?e.toMatrix():u.unit(),i=this.scale?this.scale.invert():s,n=i?i.toMatrix():u.unit();var r=new d(-this.translate.x,-this.translate.y);r=t.times(n).apply(r);var a=new x(r.x,r.y);var o=new S;o.translate=a;o.rotate=e;o.scale=i;return o}});var T={_setScale:function(){var e=this.options;var t=this._originWidth;var i=this._originHeight;var n=e.width/t;var r=e.height/i;if(!c(n)){n=1}if(!c(r)){r=1}this._transform.scale=new y(n,r)},_setTranslate:function(){var e=this.options;var t=e.x||0;var i=e.y||0;this._transform.translate=new x(t,i)},_initSize:function(){var e=this.options;var t=false;if(e.autoSize!==false&&(h(e.width)||h(e.height))){this._measure(true);this._setScale();t=true}if(h(e.x)||h(e.y)){this._setTranslate();t=true}if(t){this._renderTransform()}},_updateSize:function(e){var t=false;if(this.options.autoSize!==false&&this._diffNumericOptions(e,[_,b])){t=true;this._measure(true);this._setScale()}if(this._diffNumericOptions(e,[w,k])){t=true;this._setTranslate()}if(t){this._renderTransform()}return t}};var D=e.extend({init:function(e){var t=this;t.options=l({},t.options,e);t.id=t.options.id;t._originSize=r.empty();t._transform=new S},visible:function(e){return this.drawingContainer().visible(e)},redraw:function(e){if(e&&e.id){this.id=e.id}},position:function(e,t){var i=this.options;if(!h(e)){return new d(i.x,i.y)}if(h(t)){i.x=e;i.y=t}else if(e instanceof d){i.x=e.x;i.y=e.y}this._transform.translate=new x(i.x,i.y);this._renderTransform()},rotate:function(e,t){if(h(e)){this._transform.rotate=new C(e,t.x,t.y);this._renderTransform()}return this._transform.rotate||C.ZERO},drawingContainer:function(){return this.drawingElement},_renderTransform:function(){var e=this._transform.toMatrix();this.drawingContainer().transform(new f.Matrix(e.a,e.b,e.c,e.d,e.e,e.f))},_hover:function(){},_diffNumericOptions:O,_measure:function(e){var t;if(!this._measured||e){var i=this._boundingBox()||new f.Rect;var n=i.topLeft();t=new r(n.x,n.y,i.width(),i.height());this._originSize=t;this._originWidth=t.width;this._originHeight=t.height;this._measured=true}else{t=this._originSize}return t},_boundingBox:function(){return this.drawingElement.rawBBox()}});var A=D.extend({init:function(e){D.fn.init.call(this,e);e=this.options;e.fill=F(e.fill);e.stroke=F(e.stroke)},options:{stroke:{color:"gray",width:1},fill:{color:p}},fill:function(e,t){this._fill({color:P(e),opacity:t})},stroke:function(e,t,i){this._stroke({color:P(e),width:t,opacity:i})},redraw:function(e){if(e){var t=e.stroke;var i=e.fill;if(t){this._stroke(F(t))}if(i){this._fill(F(i))}D.fn.redraw.call(this,e)}},_hover:function(e){var t=this.drawingElement;var i=this.options;var n=i.hover;if(n&&n.fill){var r=e?F(n.fill):i.fill;t.fill(r.color,r.opacity)}},_stroke:function(e){var t=this.options;l(t,{stroke:e});e=t.stroke;var i=null;if(e.width>0){i={color:e.color,width:e.width,opacity:e.opacity,dashType:e.dashType}}this.drawingElement.options.set("stroke",i)},_fill:function(e){var t=this.options;l(t,{fill:e||{}});var i=t.fill;if(i.gradient){var n=i.gradient;var r=n.type==="radial"?o.RadialGradient:o.LinearGradient;this.drawingElement.fill(new r(n))}else{this.drawingElement.fill(i.color,i.opacity)}}});var V=A.extend({init:function(e){e=this._textColor(e);A.fn.init.call(this,e);this._font();this._initText();this._initSize()},options:{fontSize:15,fontFamily:"sans-serif",stroke:{width:0},fill:{color:"black"},autoSize:true},_initText:function(){var e=this.options;this.drawingElement=new o.Text(h(e.text)?e.text:"",new f.Point,{font:e.font});this._fill();this._stroke()},_textColor:function(e){if(e&&e.color){e=l({},e,{fill:{color:e.color}})}return e},_font:function(){var e=this.options;if(e.fontFamily&&h(e.fontSize)){var t=[];if(e.fontStyle){t.push(e.fontStyle)}if(e.fontWeight){t.push(e.fontWeight)}t.push(e.fontSize+(c(e.fontSize)?"px":""));t.push(e.fontFamily);e.font=t.join(" ")}else{delete e.font}},content:function(e){return this.drawingElement.content(e)},redraw:function(e){if(e){var t=false;var i=this.options;e=this._textColor(e);A.fn.redraw.call(this,e);if(e.fontFamily||h(e.fontSize)||e.fontStyle||e.fontWeight){l(i,{fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight});this._font();this.drawingElement.options.set("font",i.font);t=true}if(e.text){this.content(e.text);t=true}if(!this._updateSize(e)&&t){this._initSize()}}}});l(V.fn,T);var W=A.extend({init:function(e){A.fn.init.call(this,e);this._initPath();this._setPosition()},_setPosition:function(){var e=this.options;var t=e.x;var i=e.y;if(h(t)||h(i)){this.position(t||0,i||0)}},redraw:function(e){if(e){A.fn.redraw.call(this,e);if(this._diffNumericOptions(e,[_,b])){this._drawPath()}if(this._diffNumericOptions(e,[w,k])){this._setPosition()}}},_initPath:function(){var e=this.options;this.drawingElement=new o.Path({stroke:e.stroke,closed:true});this._fill();this._drawPath()},_drawPath:function(){var e=this.drawingElement;var t=X(this.options);var i=t.width;var n=t.height;e.segments.elements([z(0,0),z(i,0),z(i,n),z(0,n)])}});var E=A.extend({init:function(e){A.fn.init.call(this,e);var t=this.options.anchor;this.anchor=new f.Point(t.x,t.y);this.createElement()},options:{stroke:{color:p,width:0},fill:{color:"black"}},_transformToPath:function(e,t){var i=t.transform();if(e&&i){e=e.transformCopy(i)}return e},redraw:function(e){if(e){if(e.position){this.options.position=e.position}A.fn.redraw.call(this,e)}}});var U=E.extend({options:{radius:4,anchor:{x:0,y:0}},createElement:function(){var e=this.options;this.drawingElement=new o.Circle(new f.Circle(this.anchor,e.radius),{fill:e.fill,stroke:e.stroke})},positionMarker:function(e){var t=this.options;var i=t.position;var n=e.segments;var r;var a;if(i==m){r=n[0]}else{r=n[n.length-1]}if(r){a=this._transformToPath(r.anchor(),e);this.drawingElement.transform(f.transform().translate(a.x,a.y))}}});var j=E.extend({options:{path:"M 0 0 L 10 5 L 0 10 L 3 5 z",anchor:{x:10,y:5}},createElement:function(){var e=this.options;this.drawingElement=o.Path.parse(e.path,{fill:e.fill,stroke:e.stroke})},positionMarker:function(e){var t=this._linePoints(e);var i=t.start;var n=t.end;var r=f.transform();if(i){r.rotate(Z(i,n),n)}if(n){var a=this.anchor;var o=n.clone().translate(-a.x,-a.y);r.translate(o.x,o.y)}this.drawingElement.transform(r)},_linePoints:function(e){var t=this.options;var i=e.segments;var n,r,a;if(t.position==m){a=i[0];if(a){r=a.anchor();n=a.controlOut();var o=i[1];if(!n&&o){n=o.anchor()}}}else{a=i[i.length-1];if(a){r=a.anchor();n=a.controlIn();var s=i[i.length-2];if(!n&&s){n=s.anchor()}}}if(r){return{start:this._transformToPath(n,e),end:this._transformToPath(r,e)}}}});var I={_getPath:function(e){var t=this.drawingElement;if(t instanceof o.MultiPath){if(e==m){t=t.paths[0]}else{t=t.paths[t.paths.length-1]}}if(t&&t.segments.length){return t}},_normalizeMarkerOptions:function(e){var t=e.startCap;var i=e.endCap;if(a(t)){e.startCap={type:t}}if(a(i)){e.endCap={type:i}}},_removeMarker:function(e){var t=this._markers[e];if(t){this.drawingContainer().remove(t.drawingElement);delete this._markers[e]}},_createMarkers:function(){var e=this.options;this._normalizeMarkerOptions(e);this._markers={};this._markers[m]=this._createMarker(e.startCap,m);this._markers[g]=this._createMarker(e.endCap,g)},_createMarker:function(e,t){var i=(e||{}).type;var n=this._getPath(t);var r,a;if(!n){this._removeMarker(t);return}if(i==v.filledCircle){r=U}else if(i==v.arrowStart||i==v.arrowEnd){r=j}else{this._removeMarker(t)}if(r){a=new r(l({},e,{position:t}));a.positionMarker(n);this.drawingContainer().append(a.drawingElement);return a}},_positionMarker:function(e){var t=this._markers[e];if(t){var i=this._getPath(e);if(i){t.positionMarker(i)}else{this._removeMarker(e)}}},_capMap:{start:"startCap",end:"endCap"},_redrawMarker:function(e,t,i){this._normalizeMarkerOptions(i);var n=this.options;var r=this._capMap[t];var a=(n[r]||{}).type;var o=i[r];var s=false;if(o){n[r]=l({},n[r],o);if(o.type&&a!=o.type){this._removeMarker(t);this._markers[t]=this._createMarker(n[r],t);s=true}else if(this._markers[t]){this._markers[t].redraw(o)}}else if(e&&!this._markers[t]&&n[r]){this._markers[t]=this._createMarker(n[r],t);s=true}return s},_redrawMarkers:function(e,t){if(!this._redrawMarker(e,m,t)&&e){this._positionMarker(m)}if(!this._redrawMarker(e,g,t)&&e){this._positionMarker(g)}}};var M=A.extend({init:function(e){A.fn.init.call(this,e);this.container=new o.Group;this._createElements();this._initSize()},options:{autoSize:true},drawingContainer:function(){return this.container},data:function(e){var t=this.options;if(e){if(t.data!=e){t.data=e;this._setData(e);this._initSize();this._redrawMarkers(true,{})}}else{return t.data}},redraw:function(e){if(e){A.fn.redraw.call(this,e);var t=this.options;var i=e.data;if(h(i)&&t.data!=i){t.data=i;this._setData(i);if(!this._updateSize(e)){this._initSize()}this._redrawMarkers(true,e)}else{this._updateSize(e);this._redrawMarkers(false,e)}}},_createElements:function(){var e=this.options;this.drawingElement=o.Path.parse(e.data||"",{stroke:e.stroke});this._fill();this.container.append(this.drawingElement);this._createMarkers()},_setData:function(e){var t=this.drawingElement;var i=o.Path.parse(e||"");var n=i.paths.slice(0);i.paths.elements([]);t.paths.elements(n)}});l(M.fn,T);l(M.fn,I);var G=A.extend({init:function(e){A.fn.init.call(this,e);this.container=new o.Group;this._initPath();this._createMarkers()},drawingContainer:function(){return this.container},redraw:function(e){if(e){e=e||{};var t=e.from;var i=e.to;if(t){this.options.from=t}if(i){this.options.to=i}if(t||i){this._drawPath();this._redrawMarkers(true,e)}else{this._redrawMarkers(false,e)}A.fn.redraw.call(this,e)}},_initPath:function(){var e=this.options;var t=this.drawingElement=new o.Path({stroke:e.stroke});this._fill();this._drawPath();this.container.append(t)},_drawPath:function(){var e=this.options;var t=this.drawingElement;var i=e.from||new d;var n=e.to||new d;t.segments.elements([z(i.x,i.y),z(n.x,n.y)])}});l(G.fn,I);var q=A.extend({init:function(e){A.fn.init.call(this,e);this.container=new o.Group;this._initPath();this._createMarkers()},drawingContainer:function(){return this.container},points:function(e){var t=this.options;if(e){t.points=e;this._updatePath()}else{return t.points}},redraw:function(e){if(e){var t=e.points;A.fn.redraw.call(this,e);if(t&&this._pointsDiffer(t)){this.points(t);this._redrawMarkers(true,e)}else{this._redrawMarkers(false,e)}}},_initPath:function(){var e=this.options;this.drawingElement=new o.Path({stroke:e.stroke});this._fill();this.container.append(this.drawingElement);if(e.points){this._updatePath()}},_pointsDiffer:function(e){var t=this.options.points;var i=t.length!==e.length;if(!i){for(var n=0;n<e.length;n++){if(t[n].x!==e[n].x||t[n].y!==e[n].y){i=true;break}}}return i},_updatePath:function(){var e=this.drawingElement;var t=this.options;var i=t.points;var n=[];var r;for(var a=0;a<i.length;a++){r=i[a];n.push(z(r.x,r.y))}e.segments.elements(n)},options:{points:[]}});l(q.fn,I);var $=D.extend({init:function(e){D.fn.init.call(this,e);this._initImage()},redraw:function(e){if(e){if(e.source){this.drawingElement.src(e.source)}if(this._diffNumericOptions(e,[_,b,w,k])){this.drawingElement.rect(this._rect())}D.fn.redraw.call(this,e)}},_initImage:function(){var e=this.options;var t=this._rect();this.drawingElement=new o.Image(e.source,t,{})},_rect:function(){var e=X(this.options);var t=new f.Point(e.x,e.y);var i=new f.Size(e.width,e.height);return new f.Rect(t,i)}});var R=D.extend({init:function(e){this.children=[];D.fn.init.call(this,e);this.drawingElement=new o.Group;this._initSize()},options:{autoSize:false},append:function(e){this.drawingElement.append(e.drawingContainer());this.children.push(e);this._childrenChange=true},remove:function(e){if(this._remove(e)){this._childrenChange=true}},_remove:function(e){var t=H(e,this.children);if(t>=0){this.drawingElement.removeAt(t);this.children.splice(t,1);return true}},clear:function(){this.drawingElement.clear();this.children=[];this._childrenChange=true},toFront:function(e){var t;for(var i=0;i<e.length;i++){t=e[i];if(this._remove(t)){this.append(t)}}},toBack:function(e){this._reorderChildren(e,0)},toIndex:function(e,t){this._reorderChildren(e,t)},_reorderChildren:function(e,t){var i=this.drawingElement;var n=i.children.slice(0);var r=this.children;var a=c(t);var o,s,l,d,u;for(o=0;o<e.length;o++){u=e[o];d=u.drawingContainer();s=H(u,r);if(s>=0){n.splice(s,1);r.splice(s,1);l=a?t:t[o];n.splice(l,0,d);r.splice(l,0,u)}}i.clear();i.append.apply(i,n)},redraw:function(e){if(e){if(this._childrenChange){this._childrenChange=false;if(!this._updateSize(e)){this._initSize()}}else{this._updateSize(e)}D.fn.redraw.call(this,e)}},_boundingBox:function(){var e=this.children;var t;var i,n;for(var r=0;r<e.length;r++){i=e[r];if(i.visible()&&i._includeInBBox!==false){n=i.drawingContainer().clippedBBox(null);if(n){if(t){t=f.Rect.union(t,n)}else{t=n}}}}return t}});l(R.fn,T);var K=R.extend({init:function(e,t){this.children=[];D.fn.init.call(this,t);this.drawingElement=new o.Layout(J(e),t);this._initSize()},rect:function(e){if(e){this.drawingElement.rect(J(e))}else{var t=this.drawingElement.rect();if(t){return new r(t.origin.x,t.origin.y,t.size.width,t.size.height)}}},reflow:function(){this.drawingElement.reflow()},redraw:function(e){i.deepExtend(this.drawingElement.options,e);R.fn.redraw.call(this,e)}});var Y=A.extend({init:function(e){A.fn.init.call(this,e);this._initCircle();this._initSize()},redraw:function(e){if(e){var t=this.options;if(e.center){l(t,{center:e.center});this._center.move(t.center.x,t.center.y)}if(this._diffNumericOptions(e,["radius"])){this._circle.setRadius(t.radius)}this._updateSize(e);A.fn.redraw.call(this,e)}},_initCircle:function(){var e=this.options;var t=e.width;var i=e.height;var n=e.radius;if(!h(n)){if(!h(t)){t=i}if(!h(i)){i=t}e.radius=n=Math.min(t,i)/2}var r=e.center||{x:n,y:n};this._center=new f.Point(r.x,r.y);this._circle=new f.Circle(this._center,n);this.drawingElement=new o.Circle(this._circle,{stroke:e.stroke});this._fill()}});l(Y.fn,T);var Q=e.extend({init:function(e,t){t=t||{};this.element=e;this.surface=o.Surface.create(e,t);if(i.isFunction(this.surface.translate)){this.translate=this._translate}this.drawingElement=new o.Group;this._viewBox=new r(0,0,t.width,t.height);this.size(this._viewBox)},bounds:function(){var e=this.drawingElement.clippedBBox();return new r(0,0,e.width(),e.height())},size:function(e){var t=this._viewBox;if(h(e)){t.width=e.width;t.height=e.height;this.surface.setSize(e)}return{width:t.width,height:t.height}},_translate:function(e,t){var i=this._viewBox;if(h(e)&&h(t)){i.x=e;i.y=t;this.surface.translate({x:e,y:t})}return{x:i.x,y:i.y}},draw:function(){this.surface.draw(this.drawingElement)},append:function(e){this.drawingElement.append(e.drawingContainer());return this},remove:function(e){this.drawingElement.remove(e.drawingContainer())},insertBefore:function(){},clear:function(){this.drawingElement.clear()},destroy:function(e){this.surface.destroy();if(e){t(this.element).remove()}}});function X(e){return{x:e.x||0,y:e.y||0,width:e.width||0,height:e.height||0}}function F(e){if(e){var t=e;if(a(t)){t={color:t}}if(t.color){t.color=P(t.color)}return t}}function P(e){var t;if(e!=p){t=new o.Color(e).toHex()}else{t=e}return t}function Z(e,t){var i=t.x-e.x;var n=t.y-e.y;var r=o.util.deg(Math.atan2(n,i));return r}function z(e,t){return new o.Segment(new f.Point(e,t))}function J(e){if(e){return new f.Rect([e.x,e.y],[e.width,e.height])}}i.deepExtend(n,{init:function(e){i.init(e,n.ui)},diffNumericOptions:O,Element:D,Scale:y,Translation:x,Rotation:C,Circle:Y,Group:R,Rectangle:W,Canvas:Q,Path:M,Layout:K,Line:G,MarkerBase:E,ArrowMarker:j,CircleMarker:U,Polyline:q,CompositeTransform:S,TextBlock:V,Image:$,VisualBase:A})})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("dataviz/diagram/services",["kendo.drawing","dataviz/diagram/svg"],e)})(function(){(function(s,o){var l=window.kendo,B=l.dataviz,d=B.diagram,e=l.Class,L=d.Group,b=d.Rect,r=d.Rectangle,w=d.Utils,H=w.isUndefined,k=d.Point,u=d.Circle,N=d.Ticker,c=l.deepExtend,O=l.ui.Movable,f=l.drawing.util,a=f.defined,h=s.inArray,p=s.proxy;var n={arrow:"default",grip:"pointer",cross:"pointer",add:"pointer",move:"move",select:"pointer",south:"s-resize",east:"e-resize",west:"w-resize",north:"n-resize",rowresize:"row-resize",colresize:"col-resize"},v=10,m="Auto",g="Top",_="Right",y="Left",x="Bottom",V=10,W=10,C="dragStart",S="drag",T="dragEnd",U="itemRotate",D="itemBoundsChange",j=5,G=5,q="mouseEnter",$="mouseLeave",K="zoomStart",Y="zoomEnd",Q=-2e4,X=2e4,Z=.9,J=.93,ee=5,t="transparent",te="pan",A="rotated",ie="source",E="target",ne={"-1":ie,1:E};d.Cursors=n;var re=l.Class.extend({init:function(e){this.layoutState=e;this.diagram=e.diagram},initState:function(){this.froms=[];this.tos=[];this.subjects=[];function e(e,t){var i=this.diagram.getShapeById(e);if(i){this.subjects.push(i);this.froms.push(i.bounds().topLeft());this.tos.push(t.topLeft())}}this.layoutState.nodeMap.forEach(e,this)},update:function(e){if(this.subjects.length<=0){return}for(var t=0;t<this.subjects.length;t++){this.subjects[t].position(new k(this.froms[t].x+(this.tos[t].x-this.froms[t].x)*e,this.froms[t].y+(this.tos[t].y-this.froms[t].y)*e))}}});var ae=e.extend({init:function(e,t,i){if(H(i)){this.animate=false}else{this.animate=i}this._initialState=e;this._finalState=t;this.title="Diagram layout"},undo:function(){this.setState(this._initialState)},redo:function(){this.setState(this._finalState)},setState:function(e){var n=e.diagram;if(this.animate){e.linkMap.forEach(function(e,t){var i=n.getShapeById(e);i.visible(false);if(i){i.points(t)}});var t=new N;t.addAdapter(new re(e));t.onComplete(function(){e.linkMap.forEach(function(e){var t=n.getShapeById(e);t.visible(true)})});t.play()}else{e.nodeMap.forEach(function(e,t){var i=n.getShapeById(e);if(i){i.position(t.topLeft())}});e.linkMap.forEach(function(e,t){var i=n.getShapeById(e);if(i){i.points(t)}})}}});var i=e.extend({init:function(e){this.units=[];this.title="Composite unit";if(e!==o){this.units.push(e)}},add:function(e){this.units.push(e)},undo:function(){for(var e=0;e<this.units.length;e++){this.units[e].undo()}},redo:function(){for(var e=0;e<this.units.length;e++){this.units[e].redo()}}});var oe=e.extend({init:function(e,t,i){this.item=e;this._redoSource=t;this._redoTarget=i;if(a(t)){this._undoSource=e.source()}if(a(i)){this._undoTarget=e.target()}this.title="Connection Editing"},undo:function(){if(this._undoSource!==o){this.item._updateConnector(this._undoSource,"source")}if(this._undoTarget!==o){this.item._updateConnector(this._undoTarget,"target")}this.item.updateModel()},redo:function(){if(this._redoSource!==o){this.item._updateConnector(this._redoSource,"source")}if(this._redoTarget!==o){this.item._updateConnector(this._redoTarget,"target")}this.item.updateModel()}});var se=e.extend({init:function(e,t,i){this.item=e;this._undoSource=t;this._undoTarget=i;this._redoSource=e.source();this._redoTarget=e.target();this.title="Connection Editing"},undo:function(){this.item._updateConnector(this._undoSource,"source");this.item._updateConnector(this._undoTarget,"target");this.item.updateModel()},redo:function(){this.item._updateConnector(this._redoSource,"source");this.item._updateConnector(this._redoTarget,"target");this.item.updateModel()}});var le=e.extend({init:function(e){this.connection=e;this.diagram=e.diagram;this.targetConnector=e.targetConnector;this.title="Delete connection"},undo:function(){this.diagram._addConnection(this.connection,false)},redo:function(){this.diagram.remove(this.connection,false)}});var de=e.extend({init:function(e){this.shape=e;this.diagram=e.diagram;this.title="Deletion"},undo:function(){this.diagram._addShape(this.shape,false);this.shape.select(false)},redo:function(){this.shape.select(false);this.diagram.remove(this.shape,false)}});var I=e.extend({init:function(e,t,i){this.shapes=e;this.undoStates=t;this.title="Transformation";this.redoStates=[];this.adorner=i;for(var n=0;n<this.shapes.length;n++){var r=this.shapes[n];this.redoStates.push(r.bounds())}},undo:function(){for(var e=0;e<this.shapes.length;e++){var t=this.shapes[e];t.bounds(this.undoStates[e]);if(t.hasOwnProperty("layout")){t.layout(t,this.redoStates[e],this.undoStates[e])}t.updateModel()}if(this.adorner){this.adorner.refreshBounds();this.adorner.refresh()}},redo:function(){for(var e=0;e<this.shapes.length;e++){var t=this.shapes[e];t.bounds(this.redoStates[e]);if(t.hasOwnProperty("layout")){t.layout(t,this.undoStates[e],this.redoStates[e])}t.updateModel()}if(this.adorner){this.adorner.refreshBounds();this.adorner.refresh()}}});var ue=e.extend({init:function(e,t){this.connection=e;this.diagram=t;this.title="New connection"},undo:function(){this.diagram.remove(this.connection,false)},redo:function(){this.diagram._addConnection(this.connection,false)}});var ce=e.extend({init:function(e,t){this.shape=e;this.diagram=t;this.title="New shape"},undo:function(){this.diagram.deselect();this.diagram.remove(this.shape,false)},redo:function(){this.diagram._addShape(this.shape,false)}});var fe=e.extend({init:function(e,t,i){this.initial=e;this.finalPos=t;this.diagram=i;this.title="Pan Unit"},undo:function(){this.diagram.pan(this.initial)},redo:function(){this.diagram.pan(this.finalPos)}});var he=e.extend({init:function(e,t,i){this.shapes=t;this.undoRotates=i;this.title="Rotation";this.redoRotates=[];this.redoAngle=e._angle;this.adorner=e;this.center=e._innerBounds.center();for(var n=0;n<this.shapes.length;n++){var r=this.shapes[n];this.redoRotates.push(r.rotate().angle)}},undo:function(){var e,t;for(e=0;e<this.shapes.length;e++){t=this.shapes[e];t.rotate(this.undoRotates[e],this.center,false);if(t.hasOwnProperty("layout")){t.layout(t)}t.updateModel()}if(this.adorner){this.adorner._initialize();this.adorner.refresh()}},redo:function(){var e,t;for(e=0;e<this.shapes.length;e++){t=this.shapes[e];t.rotate(this.redoRotates[e],this.center,false);if(t.hasOwnProperty("layout")){t.layout(t)}t.updateModel()}if(this.adorner){this.adorner._initialize();this.adorner.refresh()}}});var pe=e.extend({init:function(e,t,i){this.diagram=e;this.indices=i;this.items=t;this.title="Rotate Unit"},undo:function(){this.diagram._toIndex(this.items,this.indices)},redo:function(){this.diagram.toFront(this.items,false)}});var ve=e.extend({init:function(e,t,i){this.diagram=e;this.indices=i;this.items=t;this.title="Rotate Unit"},undo:function(){this.diagram._toIndex(this.items,this.indices)},redo:function(){this.diagram.toBack(this.items,false)}});var me=l.Observable.extend({init:function(e){l.Observable.fn.init.call(this,e);this.bind(this.events,e);this.stack=[];this.index=0;this.capacity=100},events:["undone","redone"],begin:function(){this.composite=new i},cancel:function(){this.composite=o},commit:function(e){if(this.composite.units.length>0){this._restart(this.composite,e)}this.composite=o},addCompositeItem:function(e){if(this.composite){this.composite.add(e)}else{this.add(e)}},add:function(e,t){this._restart(e,t)},pop:function(){if(this.index>0){this.stack.pop();this.index--}},count:function(){return this.stack.length},undo:function(){if(this.index>0){this.index--;this.stack[this.index].undo();this.trigger("undone")}},redo:function(){if(this.stack.length>0&&this.index<this.stack.length){this.stack[this.index].redo();this.index++;this.trigger("redone")}},_restart:function(e,t){this.stack.splice(this.index,this.stack.length-this.index);this.stack.push(e);if(t!==false){this.redo()}else{this.index++}if(this.stack.length>this.capacity){this.stack.splice(0,this.stack.length-this.capacity);this.index=this.capacity}},clear:function(){this.stack=[];this.index=0}});var ge=e.extend({init:function(e){this.toolService=e},start:function(){},move:function(){},end:function(){},tryActivate:function(){return false},getCursor:function(){return n.arrow}});var _e=ge.extend({init:function(e){var t=this;var i=l.support.mobileOS?J:Z;ge.fn.init.call(t,e);var n=t.toolService.diagram,r=n.canvas;var a=n.scroller=t.scroller=s(n.scrollable).kendoMobileScroller({friction:i,velocityMultiplier:ee,mousewheelScrolling:false,zoom:false,scroll:p(t._move,t)}).data("kendoMobileScroller");if(r.translate){t.movableCanvas=new O(r.element)}var o=function(e,t,i){e.makeVirtual();e.virtualSize(t||Q,i||X)};o(a.dimensions.x);o(a.dimensions.y);a.disable()},tryActivate:function(e,t){var i=this.toolService;var n=i.diagram.options.pannable;var r=t.ctrlKey;if(a(n.key)){if(!n.key||n.key=="none"){r=Fe(t)&&!a(i.hoveredItem)}else{r=t[n.key+"Key"]}}return n!==false&&r&&!a(i.hoveredAdorner)&&!a(i._hoveredConnector)},start:function(){this.scroller.enable()},move:function(){},_move:function(e){var t=this,i=t.toolService.diagram,n=i.canvas,r=new k(e.scrollLeft,e.scrollTop);if(n.translate){i._storePan(r.times(-1));t.movableCanvas.moveTo(r);n.translate(r.x,r.y)}else{r=r.plus(i._pan.times(-1))}i.trigger(te,{pan:r})},end:function(){this.scroller.disable()},getCursor:function(){return n.move}});var be=e.extend({init:function(e){this.toolService=e},tryActivate:function(){return true},start:function(e,t){var i=this.toolService,n=i.diagram,r=i.hoveredItem;if(r){i.selectSingle(r,t);if(r.adorner){this.adorner=r.adorner;this.handle=this.adorner._hitTest(e)}}if(!this.handle){this.handle=n._resizingAdorner._hitTest(e);if(this.handle){this.adorner=n._resizingAdorner}}if(this.adorner){if(!this.adorner.isDragHandle(this.handle)||!n.trigger(C,{shapes:this.adorner.shapes,connections:[]})){this.adorner.start(e)}else{i.startPoint=e;i.end(e)}}},move:function(e){if(this.adorner){this.adorner.move(this.handle,e);if(this.adorner.isDragHandle(this.handle)){this.toolService.diagram.trigger(S,{shapes:this.adorner.shapes,connections:[]})}}},end:function(){var e=this.toolService.diagram,t=this.adorner,i;if(t){if(!t.isDragHandle(this.handle)||!e.trigger(T,{shapes:t.shapes,connections:[]})){i=t.stop();if(i){e.undoRedoService.add(i,false)}}else{t.cancel()}}this.adorner=o;this.handle=o},getCursor:function(e){return this.toolService.hoveredItem?this.toolService.hoveredItem._getCursor(e):n.arrow}});var we=e.extend({init:function(e){this.toolService=e},tryActivate:function(e,t){var i=this.toolService;var n=i.diagram.options.selectable;var r=n&&n.multiple!==false;if(r){if(n.key&&n.key!="none"){r=t[n.key+"Key"]}else{r=Fe(t)}}return r&&!a(i.hoveredItem)&&!a(i.hoveredAdorner)},start:function(e){var t=this.toolService.diagram;t.deselect();t.selector.start(e)},move:function(e){var t=this.toolService.diagram;t.selector.move(e)},end:function(e,t){var i=this.toolService.diagram,n=this.toolService.hoveredItem;var r=i.selector.bounds();if((!n||!n.isSelected)&&!t.ctrlKey){i.deselect()}if(!r.isEmpty()){i.selectArea(r)}i.selector.end()},getCursor:function(){return n.arrow}});var ke=e.extend({init:function(e){this.toolService=e;this.type="ConnectionTool"},tryActivate:function(){return this.toolService._hoveredConnector},start:function(e,t){var i=this.toolService,n=i.diagram,r=i._hoveredConnector,a=n._createConnection({},r._c,e);if(z(a)&&!n.trigger(C,{shapes:[],connections:[a],connectionHandle:E})&&n._addConnection(a)){i._connectionManipulation(a,r._c.shape,true);i._removeHover();i.selectSingle(i.activeConnection,t);if(t.type=="touchmove"){n._cachedTouchTarget=r.visual}}else{a.source(null);i.end(e)}},move:function(e){var t=this.toolService;var i=t.activeConnection;i.target(e);t.diagram.trigger(S,{shapes:[],connections:[i],connectionHandle:E});return true},end:function(e){var t=this.toolService,i=t.diagram,n=t.activeConnection,r=t.hoveredItem,a=t._hoveredConnector,o,s=i._cachedTouchTarget;if(!n){return}if(a&&a._c!=n.sourceConnector){o=a._c}else if(r&&r instanceof d.Shape){o=r.getConnector(m)||r.getConnector(e)}else{o=e}n.target(o);if(!i.trigger(T,{shapes:[],connections:[n],connectionHandle:E})){n.updateModel();i._syncConnectionChanges()}else{i.remove(n,false);i.undoRedoService.pop()}t._connectionManipulation();if(s){i._connectorsAdorner.visual.remove(s);i._cachedTouchTarget=null}},getCursor:function(){return n.arrow}});var ye=e.extend({init:function(e){this.toolService=e;this.type="ConnectionTool"},tryActivate:function(e,t){var i=this.toolService,n=i.diagram,r=n.options.selectable,a=i.hoveredItem,o=r!==false&&a&&a.path&&!(a.isSelected&&t.ctrlKey);if(o){this._c=a}return o},start:function(e,t){var i=this.toolService;var n=this._c;i.selectSingle(n,t);var r=n.adorner;var a,o;if(r){a=r._hitTest(e);o=ne[a]}if(z(n)&&r&&!i.diagram.trigger(C,{shapes:[],connections:[n],connectionHandle:o})){this.handle=a;this.handleName=o;r.start(e)}else{i.startPoint=e;i.end(e)}},move:function(e){var t=this._c.adorner;if(z(this._c)&&t){t.move(this.handle,e);this.toolService.diagram.trigger(S,{shapes:[],connections:[this._c],connectionHandle:this.handleName});return true}},end:function(e){var t=this._c;var i=t.adorner;var n=this.toolService;var r=n.diagram;if(i){if(z(t)){var a=i.stop(e);if(!r.trigger(T,{shapes:[],connections:[t],connectionHandle:this.handleName})){r.undoRedoService.add(a,false);t.updateModel();r._syncConnectionChanges()}else{a.undo()}}}},getCursor:function(){return n.move}});function M(e,t){return t.charCodeAt(0)==e||t.toUpperCase().charCodeAt(0)==e}var xe=e.extend({init:function(e){this.diagram=e;this.tools=[new _e(this),new ye(this),new ke(this),new we(this),new be(this)];this.activeTool=o},start:function(e,t){t=c({},t);if(this.activeTool){this.activeTool.end(e,t)}this._updateHoveredItem(e);this._activateTool(e,t);this.activeTool.start(e,t);this._updateCursor(e);this.diagram.focus();this.diagram.canvas.surface.suspendTracking();this.startPoint=e;return true},move:function(e,t){t=c({},t);var i=true;if(this.activeTool){i=this.activeTool.move(e,t)}if(i){this._updateHoveredItem(e)}this._updateCursor(e);return true},end:function(e,t){t=c({},t);if(this.activeTool){this.activeTool.end(e,t)}this.diagram.canvas.surface.resumeTracking();this.activeTool=o;this._updateCursor(e);return true},keyDown:function(e,t){var i=this.diagram;t=c({ctrlKey:false,metaKey:false,altKey:false},t);if((t.ctrlKey||t.metaKey)&&!t.altKey){if(M(e,"a")){i.selectAll();i._destroyToolBar();return true}else if(M(e,"z")){i.undo();i._destroyToolBar();return true}else if(M(e,"y")){i.redo();i._destroyToolBar();return true}else if(M(e,"c")){i.copy();i._destroyToolBar()}else if(M(e,"x")){i.cut();i._destroyToolBar()}else if(M(e,"v")){i.paste();i._destroyToolBar()}else if(M(e,"l")){i.layout();i._destroyToolBar()}else if(M(e,"d")){i._destroyToolBar();i.copy();i.paste()}}else if(e===46||e===8){var n=this.diagram._triggerRemove(i.select());if(n.length){this.diagram.remove(n,true);this.diagram._syncChanges();this.diagram._destroyToolBar()}return true}else if(e===27){this._discardNewConnection();i.deselect();i._destroyToolBar();return true}},wheel:function(e,t){var i=this.diagram,n=t.delta,r=i.zoom(),a=i.options,o=a.zoomRate,s={point:e,meta:t,zoom:r};if(i.trigger(K,s)){return}if(n<0){r+=o}else{r-=o}r=l.dataviz.round(Math.max(a.zoomMin,Math.min(a.zoomMax,r)),2);s.zoom=r;i.zoom(r,s);i.trigger(Y,s);return true},setTool:function(e,t){e.toolService=this;this.tools[t]=e},selectSingle:function(e,t){var i=this.diagram;var n=i.options.selectable;if(n&&!e.isSelected&&e.options.selectable!==false){var r=t.ctrlKey&&n.multiple!==false;i.select(e,{addToSelection:r})}},_discardNewConnection:function(){if(this.newConnection){this.diagram.remove(this.newConnection);this.newConnection=o}},_activateTool:function(e,t){for(var i=0;i<this.tools.length;i++){var n=this.tools[i];if(n.tryActivate(e,t)){this.activeTool=n;break}}},_updateCursor:function(e){var t=this.diagram.element;var i=this.activeTool?this.activeTool.getCursor(e):this.hoveredAdorner?this.hoveredAdorner._getCursor(e):this.hoveredItem?this.hoveredItem._getCursor(e):n.arrow;t.css({cursor:i})},_connectionManipulation:function(e,t,i){this.activeConnection=e;this.disabledShape=t;if(i){this.newConnection=this.activeConnection}else{this.newConnection=o}},_updateHoveredItem:function(e){var t=this._hitTest(e);var i=this.diagram;if(t!=this.hoveredItem&&(!this.disabledShape||t!=this.disabledShape)){if(this.hoveredItem){i.trigger($,{item:this.hoveredItem});this.hoveredItem._hover(false)}if(t&&t.options.enable){i.trigger(q,{item:t});this.hoveredItem=t;this.hoveredItem._hover(true)}else{this.hoveredItem=o}}},_removeHover:function(){if(this.hoveredItem){this.hoveredItem._hover(false);this.hoveredItem=o}},_hitTest:function(e){var t,i=this.diagram,n,r;if(this._hoveredConnector){this._hoveredConnector._hover(false);this._hoveredConnector=o}if(i._connectorsAdorner._visible){t=i._connectorsAdorner._hitTest(e);if(t){return t}}t=this.diagram._resizingAdorner._hitTest(e);if(t){this.hoveredAdorner=i._resizingAdorner;if(t.x!==0||t.y!==0){return}t=o}else{this.hoveredAdorner=o}if(!this.activeTool||this.activeTool.type!=="ConnectionTool"){var a=[];for(r=0;r<i._selectedItems.length;r++){n=i._selectedItems[r];if(n instanceof d.Connection){a.push(n)}}t=this._hitTestItems(a,e)}return t||this._hitTestElements(e)},_hitTestElements:function(e){var t=this.diagram;var i=this._hitTestItems(t.shapes,e);var n=this._hitTestItems(t.connections,e);var r;if((!this.activeTool||this.activeTool.type!="ConnectionTool")&&i&&n&&!Re(i,e)){var a=t.mainLayer;var o=h(i.visual,a.children);var s=h(n.visual,a.children);r=o>s?i:n}return r||i||n},_hitTestItems:function(e,t){var i,n,r;for(i=e.length-1;i>=0;i--){n=e[i];r=n._hitTest(t);if(r){return r}}}});var R=l.Class.extend({init:function(){}});var F=R.extend({init:function(e){var t=this;R.fn.init.call(t);this.connection=e},hitTest:function(e){var t=this.getBounds().inflate(v);if(!t.contains(e)){return false}return d.Geometry.distanceToPolyline(e,this.connection.allPoints())<v},getBounds:function(){var e=this.connection.allPoints(),t=e[0],i=e[e.length-1],n=Math.max(t.x,i.x),r=Math.min(t.x,i.x),a=Math.min(t.y,i.y),o=Math.max(t.y,i.y);for(var s=1;s<e.length-1;++s){n=Math.max(n,e[s].x);r=Math.min(r,e[s].x);a=Math.min(a,e[s].y);o=Math.max(o,e[s].y)}return new b(r,a,n-r,o-a)}});var Ce=F.extend({init:function(e){var t=this;F.fn.init.call(t);this.connection=e},route:function(){}});var Se=F.extend({SAME_SIDE_DISTANCE_RATIO:5,init:function(e){var t=this;F.fn.init.call(t);this.connection=e},routePoints:function(e,t,i,n){var r;if(i&&n){r=this._connectorPoints(e,t,i,n)}else{r=this._floatingPoints(e,t,i)}return r},route:function(){var e=this.connection._resolvedSourceConnector;var t=this.connection._resolvedTargetConnector;var i=this.connection.sourcePoint();var n=this.connection.targetPoint();var r=this.routePoints(i,n,e,t);this.connection.points(r)},_connectorSides:[{name:"Top",axis:"y",boundsPoint:"topLeft",secondarySign:1},{name:"Left",axis:"x",boundsPoint:"topLeft",secondarySign:1},{name:"Bottom",axis:"y",boundsPoint:"bottomRight",secondarySign:-1},{name:"Right",axis:"x",boundsPoint:"bottomRight",secondarySign:-1}],_connectorSide:function(e,t){var i=e.position();var n=e.shape.bounds(A);var r={topLeft:n.topLeft(),bottomRight:n.bottomRight()};var a=this._connectorSides;var o=f.MAX_NUM;var s;var l;var d;var u;for(var c=0;c<a.length;c++){u=a[c];d=u.axis;s=Math.round(Math.abs(i[d]-r[u.boundsPoint][d]));if(s<o){o=s;l=u}else if(s===o&&(i[d]-t[d])*u.secondarySign>(i[l.axis]-t[l.axis])*l.secondarySign){l=u}}return l.name},_sameSideDistance:function(e){var t=e.shape.bounds(A);return Math.min(t.width,t.height)/this.SAME_SIDE_DISTANCE_RATIO},_connectorPoints:function(e,t,i,n){var r=this._connectorSide(i,t);var a=this._connectorSide(n,e);var o=t.x-e.x;var s=t.y-e.y;var l=this._sameSideDistance(i);var d=[];var u,c;if(r===g||r==x){if(a==g||a==x){if(r==a){if(r==g){c=Math.min(e.y,t.y)-l}else{c=Math.max(e.y,t.y)+l}d=[new k(e.x,c),new k(t.x,c)]}else{d=[new k(e.x,e.y+s/2),new k(t.x,e.y+s/2)]}}else{d=[new k(e.x,t.y)]}}else{if(a==y||a==_){if(r==a){if(r==y){u=Math.min(e.x,t.x)-l}else{u=Math.max(e.x,t.x)+l}d=[new k(u,e.y),new k(u,t.y)]}else{d=[new k(e.x+o/2,e.y),new k(e.x+o/2,e.y+s)]}}else{d=[new k(t.x,e.y)]}}return d},_floatingPoints:function(e,t,i){var n=i?this._connectorSide(i,t):null;var r=this._startHorizontal(e,t,n);var a=[e,e,t,t];var o=t.x-e.x;var s=t.y-e.y;var l=a.length;var d;var u;for(var c=1;c<l-1;++c){if(r){if(c%2!==0){d=o/(l/2);u=0}else{d=0;u=s/((l-1)/2)}}else{if(c%2!==0){d=0;u=s/(l/2)}else{d=o/((l-1)/2);u=0}}a[c]=new k(a[c-1].x+d,a[c-1].y+u)}c--;if(r&&c%2!==0||!r&&c%2===0){a[l-2]=new k(a[l-1].x,a[l-2].y)}else{a[l-2]=new k(a[l-2].x,a[l-1].y)}return[a[1],a[2]]},_startHorizontal:function(e,t,i){var n;if(i!==null&&(i===_||i===y)){n=true}else{n=Math.abs(e.x-t.x)>Math.abs(e.y-t.y)}return n}});var P=e.extend({init:function(e,t){var i=this;i.diagram=e;i.options=c({},i.options,t);i.visual=new L;i.diagram._adorners.push(i)},refresh:function(){}});var Te=P.extend({init:function(e,t){var i=this,n;i.connection=e;n=i.connection.diagram;i._ts=n.toolService;P.fn.init.call(i,n,t);var r=i.connection.sourcePoint();var a=i.connection.targetPoint();i.spVisual=new u(c(i.options.handles,{center:r}));i.epVisual=new u(c(i.options.handles,{center:a}));i.visual.append(i.spVisual);i.visual.append(i.epVisual)},options:{handles:{}},_getCursor:function(){return n.move},start:function(e){this.handle=this._hitTest(e);this.startPoint=e;this._initialSource=this.connection.source();this._initialTarget=this.connection.target();switch(this.handle){case-1:if(this.connection.targetConnector){this._ts._connectionManipulation(this.connection,this.connection.targetConnector.shape)}break;case 1:if(this.connection.sourceConnector){this._ts._connectionManipulation(this.connection,this.connection.sourceConnector.shape)}break}},move:function(e,t){switch(e){case-1:this.connection.source(t);break;case 1:this.connection.target(t);break;default:var i=t.minus(this.startPoint);this.startPoint=t;if(!this.connection.sourceConnector){this.connection.source(this.connection.sourcePoint().plus(i))}if(!this.connection.targetConnector){this.connection.target(this.connection.targetPoint().plus(i))}break}this.refresh();return true},stop:function(e){var t=this.diagram.toolService,i=t.hoveredItem,n;if(t._hoveredConnector){n=t._hoveredConnector._c}else if(i&&i instanceof d.Shape){n=i.getConnector(m)||i.getConnector(e)}else{n=e}if(this.handle===-1){this.connection.source(n)}else if(this.handle===1){this.connection.target(n)}this.handle=o;this._ts._connectionManipulation();return new se(this.connection,this._initialSource,this._initialTarget)},_hitTest:function(e){var t=this.connection.sourcePoint();var i=this.connection.targetPoint();var n=this.options.handles.width/2+v;var r=this.options.handles.height/2+v;var a=t.distanceTo(e);var o=i.distanceTo(e);var s=new b(t.x,t.y).inflate(n,r).contains(e);var l=new b(i.x,i.y).inflate(n,r).contains(e);var d=0;if(s&&(!l||a<o)){d=-1}else if(l&&(!s||o<a)){d=1}return d},refresh:function(){this.spVisual.redraw({center:this.diagram.modelToLayer(this.connection.sourcePoint())});this.epVisual.redraw({center:this.diagram.modelToLayer(this.connection.targetPoint())})}});var De=P.extend({init:function(e,t){var i=this;P.fn.init.call(i,e,t);i._refreshHandler=function(e){if(e.item==i.shape){i.refresh()}}},show:function(e){var t=this,i,n,r;t._visible=true;t.shape=e;t.diagram.bind(D,t._refreshHandler);i=e.connectors.length;t.connectors=[];t._clearVisual();for(n=0;n<i;n++){r=new Me(e.connectors[n]);t.connectors.push(r);t.visual.append(r.visual)}t.visual.visible(true);t.refresh()},_clearVisual:function(){var e=this;if(e.diagram._cachedTouchTarget){e._keepCachedTouchTarget()}else{e.visual.clear()}},_keepCachedTouchTarget:function(){var e=this,t=e.visual.children;var i=t.length;var n=h(e.diagram._cachedTouchTarget,t);for(var r=i-1;r>=0;r--){if(r==n){continue}e.visual.remove(t[r])}},destroy:function(){var e=this;e.diagram.unbind(D,e._refreshHandler);e.shape=o;e._visible=o;e.visual.visible(false)},_hitTest:function(e){var t,i;for(i=0;i<this.connectors.length;i++){t=this.connectors[i];if(t._hitTest(e)){t._hover(true);this.diagram.toolService._hoveredConnector=t;break}}},refresh:function(){if(this.shape){var e=this.shape.bounds();e=this.diagram.modelToLayer(e);this.visual.position(e.topLeft());s.each(this.connectors,function(){this.refresh()})}}});function Ae(e,t){var i;if(e.x==-1&&e.y==-1){i=t.bottomRight()}else if(e.x==1&&e.y==1){i=t.topLeft()}else if(e.x==-1&&e.y==1){i=t.topRight()}else if(e.x==1&&e.y==-1){i=t.bottomLeft()}else if(e.x===0&&e.y==-1){i=t.bottom()}else if(e.x===0&&e.y==1){i=t.top()}else if(e.x==1&&e.y===0){i=t.left()}else if(e.x==-1&&e.y===0){i=t.right()}return i}var Ee=P.extend({init:function(e,t){var i=this;P.fn.init.call(i,e,t);i._manipulating=false;i.map=[];i.shapes=[];i._initSelection();i._createHandles();i.redraw();i.diagram.bind("select",function(e){i._initialize(e.selected)});i._refreshHandler=function(){if(!i._internalChange){i.refreshBounds();i.refresh()}};i._rotatedHandler=function(){if(i.shapes.length==1){i._angle=i.shapes[0].rotate().angle}i._refreshHandler()};i.diagram.bind(D,i._refreshHandler).bind(U,i._rotatedHandler);i.refreshBounds();i.refresh()},options:{handles:{fill:{color:"#fff"},stroke:{color:"#282828"},height:7,width:7,hover:{fill:{color:"#282828"},stroke:{color:"#282828"}}},selectable:{stroke:{color:"#778899",width:1,dashType:"dash"},fill:{color:t}},offset:10},_initSelection:function(){var e=this;var t=e.diagram;var i=t.options.selectable;var n=c({},e.options.selectable,i);e.rect=new r(n);e.visual.append(e.rect)},_resizable:function(){return this.options.editable&&this.options.editable.resize!==false},_handleOptions:function(){return(this.options.editable.resize||{}).handles||this.options.handles},_createHandles:function(){var e,t,i,n;if(this._resizable()){e=this._handleOptions();for(n=-1;n<=1;n++){for(i=-1;i<=1;i++){if(n!==0||i!==0){t=new r(e);t.drawingElement._hover=p(this._hover,this);this.map.push({x:n,y:i,visual:t});this.visual.append(t)}}}}},bounds:function(e){if(e){this._innerBounds=e.clone();this._bounds=this.diagram.modelToLayer(e).inflate(this.options.offset,this.options.offset)}else{return this._bounds}},_hitTest:function(e){var t=this.diagram.modelToLayer(e),i,n,r,a=this.map.length,o;if(this._angle){t=t.clone().rotate(this._bounds.center(),this._angle)}if(this._resizable()){for(i=0;i<a;i++){o=this.map[i];n=new k(o.x,o.y);r=this._getHandleBounds(n);r.offset(this._bounds.x,this._bounds.y);if(r.contains(t)){return n}}}if(this._bounds.contains(t)){return new k(0,0)}},_getHandleBounds:function(e){if(this._resizable()){var t=this._handleOptions(),i=t.width,n=t.height,r=new b(0,0,i,n);if(e.x<0){r.x=-i/2}else if(e.x===0){r.x=Math.floor(this._bounds.width/2)-i/2}else if(e.x>0){r.x=this._bounds.width+1-i/2}if(e.y<0){r.y=-n/2}else if(e.y===0){r.y=Math.floor(this._bounds.height/2)-n/2}else if(e.y>0){r.y=this._bounds.height+1-n/2}return r}},_getCursor:function(e){var t=this._hitTest(e);if(t&&t.x>=-1&&t.x<=1&&t.y>=-1&&t.y<=1&&this._resizable()){var i=this._angle;if(i){i=360-i;t.rotate(new k(0,0),i);t=new k(Math.round(t.x),Math.round(t.y))}if(t.x==-1&&t.y==-1){return"nw-resize"}if(t.x==1&&t.y==1){return"se-resize"}if(t.x==-1&&t.y==1){return"sw-resize"}if(t.x==1&&t.y==-1){return"ne-resize"}if(t.x===0&&t.y==-1){return"n-resize"}if(t.x===0&&t.y==1){return"s-resize"}if(t.x==1&&t.y===0){return"e-resize"}if(t.x==-1&&t.y===0){return"w-resize"}}return this._manipulating?n.move:n.select},_initialize:function(){var e=this,t,i,n=e.diagram.select();e.shapes=[];for(t=0;t<n.length;t++){i=n[t];if(i instanceof d.Shape){e.shapes.push(i);i._rotationOffset=new k}}e._angle=e.shapes.length==1?e.shapes[0].rotate().angle:0;e._startAngle=e._angle;e._rotates();e._positions();e.refreshBounds();e.refresh();e.redraw()},_rotates:function(){var e=this,t,i;e.initialRotates=[];for(t=0;t<e.shapes.length;t++){i=e.shapes[t];e.initialRotates.push(i.rotate().angle)}},_positions:function(){var e=this,t,i;e.initialStates=[];for(t=0;t<e.shapes.length;t++){i=e.shapes[t];e.initialStates.push(i.bounds())}},_hover:function(e,t){if(this._resizable()){var i=this._handleOptions(),n=i.hover,r=i.stroke,a=i.fill;if(e&&w.isDefined(n.stroke)){r=c({},r,n.stroke)}if(e&&w.isDefined(n.fill)){a=n.fill}t.stroke(r.color,r.width,r.opacity);t.fill(a.color,a.opacity)}},start:function(e){this._sp=e;this._cp=e;this._lp=e;this._manipulating=true;this._internalChange=true;this.shapeStates=[];for(var t=0;t<this.shapes.length;t++){var i=this.shapes[t];this.shapeStates.push(i.bounds())}},redraw:function(){var e,t,i=this._resizable();for(e=0;e<this.map.length;e++){t=this.map[e];t.visual.visible(i)}},angle:function(e){if(a(e)){this._angle=e}return this._angle},rotate:function(){var e=this._innerBounds.center();var t=this.angle();this._internalChange=true;for(var i=0;i<this.shapes.length;i++){var n=this.shapes[i];t=(t+this.initialRotates[i]-this._startAngle)%360;n.rotate(t,e)}this.refresh()},move:function(e,t){var i,n,r=new k,a=new k,o,s,l,d,u,c,f=0,h,p,v;if(e.y===-2&&e.x===-1){s=this._innerBounds.center();this._angle=this._truncateAngle(w.findAngle(s,t));for(d=0;d<this.shapes.length;d++){l=this.shapes[d];u=(this._angle+this.initialRotates[d]-this._startAngle)%360;l.rotate(u,s);if(l.hasOwnProperty("layout")){l.layout(l)}this._rotating=true}this.refresh()}else{if(this.shouldSnap()){var m=this._truncateDistance(t.minus(this._lp));if(m.x===0&&m.y===0){this._cp=t;return}i=m;this._lp=new k(this._lp.x+m.x,this._lp.y+m.y)}else{i=t.minus(this._cp)}if(this.isDragHandle(e)){a=r=i;n=true}else{if(this._angle){i.rotate(new k(0,0),this._angle)}if(e.x==-1){r.x=i.x}else if(e.x==1){a.x=i.x}if(e.y==-1){r.y=i.y}else if(e.y==1){a.y=i.y}}if(!n){h=Ae(e,this._innerBounds);p=(this._innerBounds.width+i.x*e.x)/this._innerBounds.width;v=(this._innerBounds.height+i.y*e.y)/this._innerBounds.height}for(d=0;d<this.shapes.length;d++){l=this.shapes[d];o=l.bounds();if(n){if(!z(l)){continue}c=this._displaceBounds(o,r,a,n)}else{c=o.clone();c.scale(p,v,h,this._innerBounds.center(),l.rotate().angle);var g=c.center();g.rotate(o.center(),-this._angle);c=new b(g.x-c.width/2,g.y-c.height/2,c.width,c.height)}if(c.width>=l.options.minWidth&&c.height>=l.options.minHeight){var _=o;l.bounds(c);if(l.hasOwnProperty("layout")){l.layout(l,_,c)}if(_.width!==c.width||_.height!==c.height){l.rotate(l.rotate().angle)}f+=1}}if(f){if(f==d){c=this._displaceBounds(this._innerBounds,r,a,n);this.bounds(c)}else{this.refreshBounds()}this.refresh()}this._positions()}this._cp=t},isDragHandle:function(e){return e.x===0&&e.y===0},cancel:function(){var e=this.shapes;var t=this.shapeStates;for(var i=0;i<e.length;i++){e[i].bounds(t[i])}this.refreshBounds();this.refresh();this._manipulating=o;this._internalChange=o;this._rotating=o},_truncatePositionToGuides:function(e){if(this.diagram.ruler){return this.diagram.ruler.truncatePositionToGuides(e)}return e},_truncateSizeToGuides:function(e){if(this.diagram.ruler){return this.diagram.ruler.truncateSizeToGuides(e)}return e},_truncateAngle:function(e){var t=this.snapOptions();var i=Math.max(t.angle||W,G);return t?Math.floor(e%360/i)*i:e%360},_truncateDistance:function(e){if(e instanceof d.Point){return new d.Point(this._truncateDistance(e.x),this._truncateDistance(e.y))}else{var t=this.snapOptions()||{};var i=Math.max(t.size||V,j);return t?Math.floor(e/i)*i:e}},snapOptions:function(){var e=this.diagram.options.editable;var t=((e||{}).drag||{}).snap||{};return t},shouldSnap:function(){var e=this.diagram.options.editable;var t=(e||{}).drag;var i=(t||{}).snap;return e!==false&&t!==false&&i!==false},_displaceBounds:function(e,t,i,n){var r=e.topLeft().plus(t),a=e.bottomRight().plus(i),o=b.fromPoints(r,a),s;if(!n){s=o.center();s.rotate(e.center(),-this._angle);o=new b(s.x-o.width/2,s.y-o.height/2,o.width,o.height)}return o},stop:function(){var e,t,i;if(this._cp!=this._sp){if(this._rotating){e=new he(this,this.shapes,this.initialRotates);this._rotating=false}else if(this._diffStates()){if(this.diagram.ruler){for(t=0;t<this.shapes.length;t++){i=this.shapes[t];var n=i.bounds();n=this._truncateSizeToGuides(this._truncatePositionToGuides(n));i.bounds(n);this.refreshBounds();this.refresh()}}for(t=0;t<this.shapes.length;t++){i=this.shapes[t];i.updateModel()}e=new I(this.shapes,this.shapeStates,this);this.diagram._syncShapeChanges()}}this._manipulating=o;this._internalChange=o;this._rotating=o;return e},_diffStates:function(){var e=this.shapes;var t=this.shapeStates;for(var i=0;i<e.length;i++){if(!e[i].bounds().equals(t[i])){return true}}return false},refreshBounds:function(){var e=this.shapes.length==1?this.shapes[0].bounds().clone():this.diagram.boundingBox(this.shapes,true);this.bounds(e)},refresh:function(){var e=this,t,i;if(this.shapes.length>0){i=this.bounds();this.visual.visible(true);this.visual.position(i.topLeft());s.each(this.map,function(){t=e._getHandleBounds(new k(this.x,this.y));this.visual.position(t.topLeft())});this.visual.position(i.topLeft());var n=new k(i.width/2,i.height/2);this.visual.rotate(this._angle,n);this.rect.redraw({width:i.width,height:i.height});if(this.rotationThumb){var r=this.options.editable.rotate.thumb;this._rotationThumbBounds=new b(i.center().x,i.y+r.y,0,0).inflate(r.width);this.rotationThumb.redraw({x:i.width/2-r.width/2})}}else{this.visual.visible(false)}}});var Ie=e.extend({init:function(e){var t=e.options.selectable;this.options=c({},this.options,t);this.visual=new r(this.options);this.diagram=e},options:{stroke:{color:"#778899",width:1,dashType:"dash"},fill:{color:t}},start:function(e){this._sp=this._ep=e;this.refresh();this.diagram._adorn(this,true)},end:function(){this._sp=this._ep=o;this.diagram._adorn(this,false)},bounds:function(e){if(e){this._bounds=e}return this._bounds},move:function(e){this._ep=e;this.refresh()},refresh:function(){if(this._sp){var e=b.fromPoints(this.diagram.modelToLayer(this._sp),this.diagram.modelToLayer(this._ep));this.bounds(b.fromPoints(this._sp,this._ep));this.visual.position(e.topLeft());this.visual.redraw({height:e.height+1,width:e.width+1})}}});var Me=e.extend({init:function(e){this.options=c({},e.options);this._c=e;this.visual=new u(this.options);this.refresh()},_hover:function(e){var t=this.options,i=t.hover,n=t.stroke,r=t.fill;if(e&&w.isDefined(i.stroke)){n=c({},n,i.stroke)}if(e&&w.isDefined(i.fill)){r=i.fill}this.visual.redraw({stroke:n,fill:r})},refresh:function(){var e=this._c.shape.diagram.modelToView(this._c.position()),t=e.minus(this._c.shape.bounds("transformed").topLeft()),i=new b(e.x,e.y,0,0);i.inflate(this.options.width/2,this.options.height/2);this._visualBounds=i;this.visual.redraw({center:new k(t.x,t.y)})},_hitTest:function(e){var t=this._c.shape.diagram.modelToView(e);return this._visualBounds.contains(t)}});function z(e){var t=e.options.editable;return t&&t.drag!==false}function Re(e,t){var i,n,r;for(var a=0;a<e.connectors.length;a++){i=e.connectors[a];n=i.position();r=new b(n.x,n.y);r.inflate(v,v);if(r.contains(t)){return i}}}function Fe(e){return e.ctrlKey===false&&e.altKey===false&&e.shiftKey===false}c(d,{CompositeUnit:i,TransformUnit:I,PanUndoUnit:fe,AddShapeUnit:ce,AddConnectionUnit:ue,DeleteShapeUnit:de,DeleteConnectionUnit:le,ConnectionEditAdorner:Te,ConnectionTool:ke,ConnectorVisual:Me,UndoRedoService:me,ResizingAdorner:Ee,Selector:Ie,ToolService:xe,ConnectorsAdorner:De,LayoutUndoUnit:ae,ConnectionEditUnit:oe,ToFrontUnit:pe,ToBackUnit:ve,ConnectionRouterBase:R,PolylineRouter:Ce,CascadingRouter:Se,SelectionTool:we,ScrollerTool:_e,PointerTool:be,ConnectionEditTool:ye,RotateUnit:he})})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("dataviz/diagram/layout",["dataviz/diagram/math"],e)})(function(){(function(e,t){var i=window.kendo,u=i.dataviz.diagram,n=u.Graph,w=u.Node,k=u.Link,r=i.deepExtend,f=u.Size,h=u.Rect,A=u.Dictionary,c=u.Set,a=u.Graph,E=u.Utils,m=u.Point,p=1e-6,o=Math.PI/180,v=E.contains,l=e.grep;var s=i.Class.extend({defaultOptions:{type:"Tree",subtype:"Down",roots:null,animate:false,limitToView:false,friction:.9,nodeDistance:50,iterations:300,horizontalSeparation:90,verticalSeparation:50,underneathVerticalTopOffset:15,underneathHorizontalOffset:15,underneathVerticalSeparation:15,grid:{width:1500,offsetX:50,offsetY:50,componentSpacingX:20,componentSpacingY:20},layerSeparation:50,layeredIterations:2,startRadialAngle:0,endRadialAngle:360,radialSeparation:150,radialFirstLevelSeparation:200,keepComponentsInOneRadialLayout:false,ignoreContainers:true,layoutContainerChildren:false,ignoreInvisible:true,animateTransitions:false},init:function(){},gridLayoutComponents:function(e){if(!e){throw"No components supplied."}E.forEach(e,function(e){e.calcBounds()});e.sort(function(e,t){return t.bounds.width-e.bounds.width});var t=this.options.grid.width,i=this.options.grid.componentSpacingX,n=this.options.grid.componentSpacingY,r=0,a=this.options.grid.offsetX,o=this.options.grid.offsetY,s=a,l=o,d,u=[],c=[];while(e.length>0){if(s>=t){s=a;l+=r+n;r=0}var f=e.pop();this.moveToOffset(f,new m(s,l));for(d=0;d<f.nodes.length;d++){c.push(f.nodes[d])}for(d=0;d<f.links.length;d++){u.push(f.links[d])}var h=f.bounds;var p=h.height;if(p<=0||isNaN(p)){p=0}var v=h.width;if(v<=0||isNaN(v)){v=0}if(p>=r){r=p}s+=v+i}return{nodes:c,links:u}},moveToOffset:function(e,t){var i,n,r=e.bounds,a=t.x-r.x,o=t.y-r.y;for(i=0;i<e.nodes.length;i++){var s=e.nodes[i];var l=s.bounds();if(l.width===0&&l.height===0&&l.x===0&&l.y===0){l=new h(0,0,0,0)}l.x+=a;l.y+=o;s.bounds(l)}for(i=0;i<e.links.length;i++){var d=e.links[i];if(d.points){var u=[];var c=d.points;for(n=0;n<c.length;n++){var f=c[n];f.x+=a;f.y+=o;u.push(f)}d.points=u}}this.currentHorizontalOffset+=r.width+this.options.grid.offsetX;return new m(a,o)},transferOptions:function(e){this.options=i.deepExtend({},this.defaultOptions);if(E.isUndefined(e)){return}this.options=i.deepExtend(this.options,e||{})}});var d=i.Class.extend({init:function(e){this.nodeMap=new A;this.shapeMap=new A;this.nodes=[];this.edges=[];this.edgeMap=new A;this.finalNodes=[];this.finalLinks=[];this.ignoredConnections=[];this.ignoredShapes=[];this.hyperMap=new A;this.hyperTree=new n;this.finalGraph=null;this.diagram=e},convert:function(e){if(E.isUndefined(this.diagram)){throw"No diagram to convert."}this.options=i.deepExtend({ignoreInvisible:true,ignoreContainers:true,layoutContainerChildren:false},e||{});this.clear();this._renormalizeShapes();this._renormalizeConnections();this.finalNodes=new A(this.nodes);this.finalLinks=new A(this.edges);this.finalGraph=new n;this.finalNodes.forEach(function(e){this.finalGraph.addNode(e)},this);this.finalLinks.forEach(function(e){this.finalGraph.addExistingLink(e)},this);return this.finalGraph},mapConnection:function(e){return this.edgeMap.get(e.id)},mapShape:function(e){return this.nodeMap.get(e.id)},getEdge:function(t,i){return E.first(t.links,function(e){return e.getComplement(t)===i})},clear:function(){this.finalGraph=null;this.hyperTree=!this.options.ignoreContainers&&this.options.layoutContainerChildren?new a:null;this.hyperMap=!this.options.ignoreContainers&&this.options.layoutContainerChildren?new A:null;this.nodeMap=new A;this.shapeMap=new A;this.nodes=[];this.edges=[];this.edgeMap=new A;this.ignoredConnections=[];this.ignoredShapes=[];this.finalNodes=[];this.finalLinks=[]},listToRoot:function(e){var t=[];var i=e.container;if(!i){return t}t.push(i);while(i.parentContainer){i=i.parentContainer;t.push(i)}t.reverse();return t},firstNonIgnorableContainer:function(e){if(e.isContainer&&!this._isIgnorableItem(e)){return e}return!e.parentContainer?null:this.firstNonIgnorableContainer(e.parentContainer)},isContainerConnection:function(e,t){if(e.isContainer&&this.isDescendantOf(e,t)){return true}return t.isContainer&&this.isDescendantOf(t,e)},isDescendantOf:function(e,t){if(!e.isContainer){throw"Expecting a container."}if(e===t){return false}if(v(e.children,t)){return true}var i=[];for(var n=0,r=e.children.length;n<r;n++){var a=e.children[n];if(a.isContainer&&this.isDescendantOf(a,t)){i.push(a)}}return i.length>0},isIgnorableItem:function(e){if(this.options.ignoreInvisible){if(e.isCollapsed&&this._isVisible(e)){return false}if(!e.isCollapsed&&this._isVisible(e)){return false}return true}else{return e.isCollapsed&&!this._isTop(e)}},isShapeMapped:function(e){return e.isCollapsed&&!this._isVisible(e)&&!this._isTop(e)},leastCommonAncestor:function(e,t){if(!e){throw"Parameter should not be null."}if(!t){throw"Parameter should not be null."}if(!this.hyperTree){throw"No hypertree available."}var i=this.listToRoot(e);var n=this.listToRoot(t);var r=null;if(E.isEmpty(i)||E.isEmpty(n)){return this.hyperTree.root.data}var a=i[0];var o=n[0];var s=0;while(a===o){r=i[s];s++;if(s>=i.length||s>=n.length){break}a=i[s];o=n[s]}if(!r){return this.hyperTree.root.data}else{return l(this.hyperTree.nodes,function(e){return e.data.container===r})}},_isTop:function(e){return!e.parentContainer},_isVisible:function(e){if(!e.visible()){return false}return!e.parentContainer?e.visible():this._isVisible(e.parentContainer)},_isCollapsed:function(e){if(e.isContainer&&e.isCollapsed){return true}return e.parentContainer&&this._isCollapsed(e.parentContainer)},_renormalizeShapes:function(){if(this.options.ignoreContainers){for(var e=0,t=this.diagram.shapes.length;e<t;e++){var i=this.diagram.shapes[e];if(this.options.ignoreInvisible&&!this._isVisible(i)||i.isContainer){this.ignoredShapes.push(i);continue}var n=new w(i.id,i);n.isVirtual=false;this.nodeMap.add(i.id,n);this.nodes.push(n)}}else{throw"Containers are not supported yet, but stay tuned."}},_renormalizeConnections:function(){if(this.diagram.connections.length===0){return}for(var e=0,t=this.diagram.connections.length;e<t;e++){var i=this.diagram.connections[e];if(this.isIgnorableItem(i)){this.ignoredConnections.push(i);continue}var n=!i.sourceConnector?null:i.sourceConnector.shape;var r=!i.targetConnector?null:i.targetConnector.shape;if(!n||!r){this.ignoredConnections.push(i);continue}if(v(this.ignoredShapes,n)&&!this.shapeMap.containsKey(n)){this.ignoredConnections.push(i);continue}if(v(this.ignoredShapes,r)&&!this.shapeMap.containsKey(r)){this.ignoredConnections.push(i);continue}if(this.shapeMap.containsKey(n)){n=this.shapeMap[n]}if(this.shapeMap.containsKey(r)){r=this.shapeMap[r]}var a=this.mapShape(n);var o=this.mapShape(r);if(a===o||this.areConnectedAlready(a,o)){this.ignoredConnections.push(i);continue}if(a===null||o===null){throw"A shape was not mapped to a node."}if(this.options.ignoreContainers){if(a.isVirtual||o.isVirtual){this.ignoredConnections.push(i);continue}var s=new k(a,o,i.id,i);this.edgeMap.add(i.id,s);this.edges.push(s)}else{throw"Containers are not supported yet, but stay tuned."}}},areConnectedAlready:function(t,i){return E.any(this.edges,function(e){return e.source===t&&e.target===i||e.source===i&&e.target===t})}});var g=s.extend({init:function(e){var t=this;s.fn.init.call(t);if(E.isUndefined(e)){throw"Diagram is not specified."}this.diagram=e},layout:function(e){this.transferOptions(e);var t=new d(this.diagram);var i=t.convert(e);if(i.isEmpty()){return}var n=i.getConnectedComponents();if(E.isEmpty(n)){return}for(var r=0;r<n.length;r++){var a=n[r];this.layoutGraph(a,e)}var o=this.gridLayoutComponents(n);return new u.LayoutState(this.diagram,o)},layoutGraph:function(e,t){if(E.isDefined(t)){this.transferOptions(t)}this.graph=e;var i=this.options.nodeDistance*9;this.temperature=i;var n=this._expectedBounds();this.width=n.width;this.height=n.height;for(var r=0;r<this.options.iterations;r++){this.refineStage=r>=this.options.iterations*5/6;this.tick();this.temperature=this.refineStage?i/30:i*(1-r/(2*this.options.iterations))}},tick:function(){var e;for(e=0;e<this.graph.nodes.length;e++){this._repulsion(this.graph.nodes[e])}for(e=0;e<this.graph.links.length;e++){this._attraction(this.graph.links[e])}for(e=0;e<this.graph.nodes.length;e++){var t=this.graph.nodes[e];var i=Math.sqrt(t.dx*t.dx+t.dy*t.dy);if(i===0){return}t.x+=Math.min(i,this.temperature)*t.dx/i;t.y+=Math.min(i,this.temperature)*t.dy/i;if(this.options.limitToView){t.x=Math.min(this.width,Math.max(t.width/2,t.x));t.y=Math.min(this.height,Math.max(t.height/2,t.y))}}},_shake:function(e){var t=Math.random()*this.options.nodeDistance/4;var i=Math.random()*2*Math.PI;e.x+=t*Math.cos(i);e.y-=t*Math.sin(i)},_InverseSquareForce:function(e,t,i){var n;if(!this.refineStage){n=Math.pow(e,2)/Math.pow(this.options.nodeDistance,2)}else{var r=t.x-i.x;var a=t.y-i.y;var o=t.width/2;var s=t.height/2;var l=i.width/2;var d=i.height/2;n=Math.pow(r,2)/Math.pow(o+l+this.options.nodeDistance,2)+Math.pow(a,2)/Math.pow(s+d+this.options.nodeDistance,2)}return n*4/3},_SquareForce:function(e,t,i){return 1/this._InverseSquareForce(e,t,i)},_repulsion:function(a){a.dx=0;a.dy=0;E.forEach(this.graph.nodes,function(e){if(e===a){return}while(a.x===e.x&&a.y===e.y){this._shake(e)}var t=a.x-e.x;var i=a.y-e.y;var n=Math.sqrt(t*t+i*i);var r=this._SquareForce(n,a,e)*2;a.dx+=t/n*r;a.dy+=i/n*r},this)},_attraction:function(e){var t=e.target;var i=e.source;if(i===t){return}while(i.x===t.x&&i.y===t.y){this._shake(t)}var n=i.x-t.x;var r=i.y-t.y;var a=Math.sqrt(n*n+r*r);var o=this._InverseSquareForce(a,i,t)*5;var s=n/a*o;var l=r/a*o;t.dx+=s;t.dy+=l;i.dx-=s;i.dy-=l},_expectedBounds:function(){var e,t=this.graph.nodes.length,i=1.5,n=4;if(t===0){return e}e=E.fold(this.graph.nodes,function(e,t){var i=t.width*t.height;if(i>0){e+=Math.sqrt(i);return e}return 0},0,this);var r=e/t;var a=r*Math.ceil(Math.sqrt(t));var o=a*Math.sqrt(i);var s=a/Math.sqrt(i);return{width:o*n,height:s*n}}});var _=i.Class.extend({init:function(e){this.center=null;this.options=e},layout:function(e,t){this.graph=e;if(!this.graph.nodes||this.graph.nodes.length===0){return}if(!v(this.graph.nodes,t)){throw"The given root is not in the graph."}this.center=t;this.graph.cacheRelationships();this.layoutSwitch()},layoutLeft:function(e){this.setChildrenDirection(this.center,"Left",false);this.setChildrenLayout(this.center,"Default",false);var t=0,i=0,n,r,a;for(r=0;r<e.length;r++){a=e[r];a.TreeDirection="Left";var o=this.measure(a,f.Empty);i=Math.max(i,o.Width);t+=o.height+this.options.verticalSeparation}t-=this.options.verticalSeparation;var s=this.center.x-this.options.horizontalSeparation;n=this.center.y+(this.center.height-t)/2;for(r=0;r<e.length;r++){a=e[r];var l=new m(s-a.Size.width,n);this.arrange(a,l);n+=a.Size.height+this.options.verticalSeparation}},layoutRight:function(e){this.setChildrenDirection(this.center,"Right",false);this.setChildrenLayout(this.center,"Default",false);var t=0,i=0,n,r,a;for(r=0;r<e.length;r++){a=e[r];a.TreeDirection="Right";var o=this.measure(a,f.Empty);i=Math.max(i,o.Width);t+=o.height+this.options.verticalSeparation}t-=this.options.verticalSeparation;var s=this.center.x+this.options.horizontalSeparation+this.center.width;n=this.center.y+(this.center.height-t)/2;for(r=0;r<e.length;r++){a=e[r];var l=new m(s,n);this.arrange(a,l);n+=a.Size.height+this.options.verticalSeparation}},layoutUp:function(e){this.setChildrenDirection(this.center,"Up",false);this.setChildrenLayout(this.center,"Default",false);var t=0,i,n,r;for(r=0;r<e.length;r++){n=e[r];n.TreeDirection="Up";var a=this.measure(n,f.Empty);t+=a.width+this.options.horizontalSeparation}t-=this.options.horizontalSeparation;var o=this.center.x+this.center.width/2-t/2;for(r=0;r<e.length;r++){n=e[r];i=this.center.y-this.options.verticalSeparation-n.Size.height;var s=new m(o,i);this.arrange(n,s);o+=n.Size.width+this.options.horizontalSeparation}},layoutDown:function(e){var t,i;this.setChildrenDirection(this.center,"Down",false);this.setChildrenLayout(this.center,"Default",false);var n=0,r;for(i=0;i<e.length;i++){t=e[i];t.treeDirection="Down";var a=this.measure(t,f.Empty);n+=a.width+this.options.horizontalSeparation}n-=this.options.horizontalSeparation;var o=this.center.x+this.center.width/2-n/2;r=this.center.y+this.options.verticalSeparation+this.center.height;for(i=0;i<e.length;i++){t=e[i];var s=new m(o,r);this.arrange(t,s);o+=t.Size.width+this.options.horizontalSeparation}},layoutRadialTree:function(){this.setChildrenDirection(this.center,"Radial",false);this.setChildrenLayout(this.center,"Default",false);this.previousRoot=null;var e=this.options.startRadialAngle*o;var t=this.options.endRadialAngle*o;if(t<=e){throw"Final angle should not be less than the start angle."}this.maxDepth=0;this.origin=new m(this.center.x,this.center.y);this.calculateAngularWidth(this.center,0);if(this.maxDepth>0){this.radialLayout(this.center,this.options.radialFirstLevelSeparation,e,t)}this.center.Angle=t-e},tipOverTree:function(e,t){if(E.isUndefined(t)){t=0}this.setChildrenDirection(this.center,"Down",false);this.setChildrenLayout(this.center,"Default",false);this.setChildrenLayout(this.center,"Underneath",false,t);var i=0,n,r,a;for(a=0;a<e.length;a++){r=e[a];r.TreeDirection="Down";var o=this.measure(r,f.Empty);i+=o.width+this.options.horizontalSeparation}i-=this.options.horizontalSeparation;i-=e[e.length-1].width;i+=e[e.length-1].associatedShape.bounds().width;var s=this.center.x+this.center.width/2-i/2;n=this.center.y+this.options.verticalSeparation+this.center.height;for(a=0;a<e.length;a++){r=e[a];var l=new m(s,n);this.arrange(r,l);s+=r.Size.width+this.options.horizontalSeparation}},calculateAngularWidth:function(e,t){if(t>this.maxDepth){this.maxDepth=t}var i=0,n=1e3,r=1e3,a=t===0?0:Math.sqrt(n*n+r*r)/t;if(e.children.length>0){for(var o=0,s=e.children.length;o<s;o++){var l=e.children[o];i+=this.calculateAngularWidth(l,t+1)}i=Math.max(a,i)}else{i=a}e.sectorAngle=i;return i},sortChildren:function(e){var t=0,i;if(e.parents.length>1){throw"Node is not part of a tree."}var n=e.parents[0];if(n){var r=new m(n.x,n.y);var a=new m(e.x,e.y);t=this.normalizeAngle(Math.atan2(r.y-a.y,r.x-a.x))}var o=e.children.length;if(o===0){return null}var s=[];var l=[];for(i=0;i<o;++i){var d=e.children[i];var u=new m(d.x,d.y);l[i]=i;s[i]=this.normalizeAngle(-t+Math.atan2(u.y-u.y,u.x-u.x))}E.bisort(s,l);var c=[];var f=e.children;for(i=0;i<o;++i){c.push(f[l[i]])}return c},normalizeAngle:function(e){while(e>Math.PI*2){e-=2*Math.PI}while(e<0){e+=Math.PI*2}return e},radialLayout:function(e,t,i,n){var r=n-i;var a=r/2;var o=e.sectorAngle;var s=0;var l=this.sortChildren(e);for(var d=0,u=l.length;d<u;d++){var c=l[d];var f=c;var h=f.sectorAngle/o;if(c.children.length>0){this.radialLayout(c,t+this.options.radialSeparation,i+s*r,i+(s+h)*r)}this.setPolarLocation(c,t,i+s*r+h*a);f.angle=h*r;s+=h}},setPolarLocation:function(e,t,i){e.x=this.origin.x+t*Math.cos(i);e.y=this.origin.y+t*Math.sin(i);e.BoundingRectangle=new h(e.x,e.y,e.width,e.height)},setChildrenDirection:function(e,t,i){var n=e.treeDirection;this.graph.depthFirstTraversal(e,function(e){e.treeDirection=t});if(!i){e.treeDirection=n}},setChildrenLayout:function(e,t,i,n){if(E.isUndefined(n)){n=0}var r=e.childrenLayout;if(n>0){this.graph.assignLevels(e);this.graph.depthFirstTraversal(e,function(e){if(e.level>=n+1){e.childrenLayout=t}})}else{this.graph.depthFirstTraversal(e,function(e){e.childrenLayout=t});if(!i){e.childrenLayout=r}}},measure:function(e,t){var i=0,n=0,r;var a=new f(0,0);if(!e){throw""}var o=e.associatedShape.bounds();var s=o.width;var l=o.height;if(e.parents.length!==1){throw"Node not in a spanning tree."}var d=e.parents[0];if(e.treeDirection==="Undefined"){e.treeDirection=d.treeDirection}if(E.isEmpty(e.children)){a=new f(Math.abs(s)<p?50:s,Math.abs(l)<p?25:l)}else if(e.children.length===1){switch(e.treeDirection){case"Radial":r=this.measure(e.children[0],t);i=s+this.options.radialSeparation*Math.cos(e.AngleToParent)+r.width;n=l+Math.abs(this.options.radialSeparation*Math.sin(e.AngleToParent))+r.height;break;case"Left":case"Right":switch(e.childrenLayout){case"TopAlignedWithParent":break;case"BottomAlignedWithParent":break;case"Underneath":r=this.measure(e.children[0],t);i=s+r.width+this.options.underneathHorizontalOffset;n=l+this.options.underneathVerticalTopOffset+r.height;break;case"Default":r=this.measure(e.children[0],t);i=s+this.options.horizontalSeparation+r.width;n=Math.max(l,r.height);break;default:throw"Unhandled TreeDirection in the Radial layout measuring."}break;case"Up":case"Down":switch(e.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":r=this.measure(e.children[0],t);i=Math.max(s,r.width+this.options.underneathHorizontalOffset);n=l+this.options.underneathVerticalTopOffset+r.height;break;case"Default":r=this.measure(e.children[0],t);n=l+this.options.verticalSeparation+r.height;i=Math.max(s,r.width);break;default:throw"Unhandled TreeDirection in the Down layout measuring."}break;default:throw"Unhandled TreeDirection in the layout measuring."}a=new f(i,n)}else{var u,c;switch(e.treeDirection){case"Left":case"Right":switch(e.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":i=s;n=l+this.options.underneathVerticalTopOffset;for(u=0;u<e.children.length;u++){c=e.children[u];r=this.measure(c,t);i=Math.max(i,r.width+this.options.underneathHorizontalOffset);n+=r.height+this.options.underneathVerticalSeparation}n-=this.options.underneathVerticalSeparation;break;case"Default":i=s;n=0;for(u=0;u<e.children.length;u++){c=e.children[u];r=this.measure(c,t);i=Math.max(i,s+this.options.horizontalSeparation+r.width);n+=r.height+this.options.verticalSeparation}n-=this.options.verticalSeparation;break;default:throw"Unhandled TreeDirection in the Right layout measuring."}break;case"Up":case"Down":switch(e.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":i=s;n=l+this.options.underneathVerticalTopOffset;for(u=0;u<e.children.length;u++){c=e.children[u];r=this.measure(c,t);i=Math.max(i,r.width+this.options.underneathHorizontalOffset);n+=r.height+this.options.underneathVerticalSeparation}n-=this.options.underneathVerticalSeparation;break;case"Default":i=0;n=0;for(u=0;u<e.children.length;u++){c=e.children[u];r=this.measure(c,t);i+=r.width+this.options.horizontalSeparation;n=Math.max(n,r.height+this.options.verticalSeparation+l)}i-=this.options.horizontalSeparation;break;default:throw"Unhandled TreeDirection in the Down layout measuring."}break;default:throw"Unhandled TreeDirection in the layout measuring."}a=new f(i,n)}e.SectorAngle=Math.sqrt(i*i/4+n*n/4);e.Size=a;return a},arrange:function(e,t){var i,n,r,a,o,s=e.associatedShape.bounds();var l=s.width;var d=s.height;if(E.isEmpty(e.children)){e.x=t.x;e.y=t.y;e.BoundingRectangle=new h(t.x,t.y,l,d)}else{var u,c;var f;switch(e.treeDirection){case"Left":switch(e.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":f=t;e.x=f.x;e.y=f.y;e.BoundingRectangle=new h(e.x,e.y,e.width,e.height);c=t.y+d+this.options.underneathVerticalTopOffset;for(i=0;i<a.children.length;i++){a=a.children[i];u=f.x-a.associatedShape.width-this.options.underneathHorizontalOffset;n=new m(u,c);this.arrange(a,n);c+=a.Size.height+this.options.underneathVerticalSeparation}break;case"Default":f=new m(t.x+e.Size.width-l,t.y+(e.Size.height-d)/2);e.x=f.x;e.y=f.y;e.BoundingRectangle=new h(e.x,e.y,e.width,e.height);u=f.x-this.options.horizontalSeparation;c=t.y;for(i=0;i<e.children.length;i++){a=e.children[i];n=new m(u-a.Size.width,c);this.arrange(a,n);c+=a.Size.height+this.options.verticalSeparation}break;default:throw"Unsupported TreeDirection"}break;case"Right":switch(e.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":f=t;e.x=f.x;e.y=f.y;e.BoundingRectangle=new h(e.x,e.y,e.width,e.height);u=t.x+l+this.options.underneathHorizontalOffset;c=t.y+d+this.options.underneathVerticalTopOffset;for(i=0;i<e.children.length;i++){a=e.children[i];n=new m(u,c);this.arrange(a,n);c+=a.Size.height+this.options.underneathVerticalSeparation}break;case"Default":f=new m(t.x,t.y+(e.Size.height-d)/2);e.x=f.x;e.y=f.y;e.BoundingRectangle=new h(e.x,e.y,e.width,e.height);u=t.x+l+this.options.horizontalSeparation;c=t.y;for(i=0;i<e.children.length;i++){a=e.children[i];n=new m(u,c);this.arrange(a,n);c+=a.Size.height+this.options.verticalSeparation}break;default:throw"Unsupported TreeDirection"}break;case"Up":f=new m(t.x+(e.Size.width-l)/2,t.y+e.Size.height-d);e.x=f.x;e.y=f.y;e.BoundingRectangle=new h(e.x,e.y,e.width,e.height);if(Math.abs(f.x-t.x)<p){o=0;for(i=0;i<e.children.length;i++){r=e.children[i];o+=r.Size.width+this.options.horizontalSeparation}o-=this.options.horizontalSeparation;u=t.x+(l-o)/2}else{u=t.x}for(i=0;i<e.children.length;i++){a=e.children[i];c=f.y-this.options.verticalSeparation-a.Size.height;n=new m(u,c);this.arrange(a,n);u+=a.Size.width+this.options.horizontalSeparation}break;case"Down":switch(e.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":f=t;e.x=f.x;e.y=f.y;e.BoundingRectangle=new h(e.x,e.y,e.width,e.height);u=t.x+this.options.underneathHorizontalOffset;c=t.y+d+this.options.underneathVerticalTopOffset;for(i=0;i<e.children.length;i++){a=e.children[i];n=new m(u,c);this.arrange(a,n);c+=a.Size.height+this.options.underneathVerticalSeparation}break;case"Default":f=new m(t.x+(e.Size.width-l)/2,t.y);e.x=f.x;e.y=f.y;e.BoundingRectangle=new h(e.x,e.y,e.width,e.height);if(Math.abs(f.x-t.x)<p){o=0;for(i=0;i<e.children.length;i++){r=e.children[i];o+=r.Size.width+this.options.horizontalSeparation}o-=this.options.horizontalSeparation;u=t.x+(l-o)/2}else{u=t.x}for(i=0;i<e.children.length;i++){a=e.children[i];c=f.y+this.options.verticalSeparation+d;n=new m(u,c);this.arrange(a,n);u+=a.Size.width+this.options.horizontalSeparation}break;default:throw"Unsupported TreeDirection"}break;case"None":break;default:throw"Unsupported TreeDirection"}}},layoutSwitch:function(){if(!this.center){return}if(E.isEmpty(this.center.children)){return}var e=this.options.subtype;if(E.isUndefined(e)){e="Down"}var t,i,n,r;var a=this.center.children;switch(e.toLowerCase()){case"radial":case"radialtree":this.layoutRadialTree();break;case"mindmaphorizontal":case"mindmap":t=this.center.children;if(this.center.children.length===1){this.layoutRight(t)}else{r=a.length/2;i=l(this.center.children,function(e){return E.indexOf(a,e)<r});n=l(this.center.children,function(e){return E.indexOf(a,e)>=r});this.layoutLeft(i);this.layoutRight(n)}break;case"mindmapvertical":t=this.center.children;if(this.center.children.length===1){this.layoutDown(t)}else{r=a.length/2;i=l(this.center.children,function(e){return E.indexOf(a,e)<r});n=l(this.center.children,function(e){return E.indexOf(a,e)>=r});this.layoutUp(i);this.layoutDown(n)}break;case"right":this.layoutRight(this.center.children);break;case"left":this.layoutLeft(this.center.children);break;case"up":case"bottom":this.layoutUp(this.center.children);break;case"down":case"top":this.layoutDown(this.center.children);break;case"tipover":case"tipovertree":if(this.options.tipOverTreeStartLevel<0){throw"The tip-over level should be a positive integer."}this.tipOverTree(this.center.children,this.options.tipOverTreeStartLevel);break;case"undefined":case"none":break}}});var b=s.extend({init:function(e){var t=this;s.fn.init.call(t);if(E.isUndefined(e)){throw"No diagram specified."}this.diagram=e},layout:function(e){this.transferOptions(e);var t=new d(this.diagram);this.graph=t.convert();var i=this.layoutComponents();return new u.LayoutState(this.diagram,i)},layoutComponents:function(){if(this.graph.isEmpty()){return}var e=this.graph.getConnectedComponents();if(E.isEmpty(e)){return}var t=new _(this.options);var i=[];for(var n=0;n<e.length;n++){var r=e[n];var a=this.getTree(r);if(!a){throw"Failed to find a spanning tree for the component."}var o=a.root;var s=a.tree;t.layout(s,o);i.push(s)}return this.gridLayoutComponents(i)},getTree:function(e){var t=null;if(this.options.roots&&this.options.roots.length>0){for(var i=0,n=e.nodes.length;i<n;i++){var r=e.nodes[i];for(var a=0;a<this.options.roots.length;a++){var o=this.options.roots[a];if(o===r.associatedShape){t=r;break}}}}if(!t){t=e.root();if(!t){throw"Unable to find a root for the tree."}}return this.getTreeForRoot(e,t)},getTreeForRoot:function(e,t){var i=e.getSpanningTree(t);if(E.isUndefined(i)||i.isEmpty()){return null}return{tree:i,root:i.root}}});var y=s.extend({init:function(e){var t=this;s.fn.init.call(t);if(E.isUndefined(e)){throw"Diagram is not specified."}this.diagram=e},layout:function(e){this.transferOptions(e);var t=new d(this.diagram);var i=t.convert(e);if(i.isEmpty()){return}var n=i.getConnectedComponents();if(E.isEmpty(n)){return}for(var r=0;r<n.length;r++){var a=n[r];this.layoutGraph(a,e)}var o=this.gridLayoutComponents(n);return new u.LayoutState(this.diagram,o)},_initRuntimeProperties:function(){for(var e=0;e<this.graph.nodes.length;e++){var t=this.graph.nodes[e];t.layer=-1;t.downstreamLinkCount=0;t.upstreamLinkCount=0;t.isVirtual=false;t.uBaryCenter=0;t.dBaryCenter=0;t.upstreamPriority=0;t.downstreamPriority=0;t.gridPosition=0}},_prepare:function(e){var t=[],i,n,r;var a=new A;var o=0;var s,l,d;E.forEach(e.nodes,function(e){if(e.incoming.length===0){a.set(e,0);t.push(e)}});while(t.length>0){l=t.shift();for(i=0;i<l.outgoing.length;i++){r=l.outgoing[i];d=r.target;if(a.containsKey(d)){s=Math.max(a.get(l)+1,a.get(d))}else{s=a.get(l)+1}a.set(d,s);if(s>o){o=s}if(!v(t,d)){t.push(d)}}}var u=a.keys();u.sort(function(e,t){var i=a.get(e);var n=a.get(t);return E.sign(n-i)});for(var c=0;c<u.length;++c){var f=u[c];var h=Number.MAX_VALUE;if(f.outgoing.length===0){continue}for(n=0;n<f.outgoing.length;++n){r=f.outgoing[n];h=Math.min(h,a.get(r.target))}if(h>1){a.set(f,h-1)}}this.layers=[];var p;for(i=0;i<o+1;i++){p=[];p.linksTo={};this.layers.push(p)}a.forEach(function(e,t){e.layer=t;this.layers[t].push(e)},this);for(n=0;n<this.layers.length;n++){p=this.layers[n];for(i=0;i<p.length;i++){p[i].gridPosition=i}}},layoutGraph:function(e,t){if(E.isUndefined(e)){throw"No graph given or graph analysis of the diagram failed."}if(E.isDefined(t)){this.transferOptions(t)}this.graph=e;e.setItemIndices();var i=e.makeAcyclic();this._initRuntimeProperties();this._prepare(e,t);this._dummify();this._optimizeCrossings();this._swapPairs();this.arrangeNodes();this._moveThingsAround();this._dedummify();E.forEach(i,function(e){if(e.points){e.points.reverse()}})},setMinDist:function(e,t,i){var n=e.layer;var r=e.layerIndex;this.minDistances[n][r]=i},getMinDist:function(e,t){var i=0,n=e.layerIndex,r=t.layerIndex,a=e.layer,o=Math.min(n,r),s=Math.max(n,r);for(var l=o;l<s;++l){i+=this.minDistances[a][l]}return i},placeLeftToRight:function(e){var t=new A,i,n;for(var r=0;r<this.layers.length;++r){var a=e[r];if(!a){continue}for(i=0;i<a.length;i++){n=a[i];if(!t.containsKey(n)){this.placeLeft(n,t,r)}}var o=Number.POSITIVE_INFINITY;for(i=0;i<a.length;i++){n=a[i];var s=this.rightSibling(n);if(s&&this.nodeLeftClass.get(s)!==r){o=Math.min(o,t.get(s)-t.get(n)-this.getMinDist(n,s))}}if(o===Number.POSITIVE_INFINITY){var l=[];for(i=0;i<a.length;i++){n=a[i];var d=[];E.addRange(d,this.upNodes.get(n));E.addRange(d,this.downNodes.get(n));for(var u=0;u<d.length;u++){var c=d[u];if(this.nodeLeftClass.get(c)<r){l.push(t.get(c)-t.get(n))}}}l.sort();if(l.length===0){o=0}else if(l.length%2===1){o=l[this.intDiv(l.length,2)]}else{o=(l[this.intDiv(l.length,2)-1]+l[this.intDiv(l.length,2)])/2}}for(i=0;i<a.length;i++){n=a[i];t.set(n,t.get(n)+o)}}return t},placeRightToLeft:function(e){var t=new A,i,n;for(var r=0;r<this.layers.length;++r){var a=e[r];if(!a){continue}for(i=0;i<a.length;i++){n=a[i];if(!t.containsKey(n)){this.placeRight(n,t,r)}}var o=Number.NEGATIVE_INFINITY;for(i=0;i<a.length;i++){n=a[i];var s=this.leftSibling(n);if(s&&this.nodeRightClass.get(s)!==r){o=Math.max(o,t.get(s)-t.get(n)+this.getMinDist(s,n))}}if(o===Number.NEGATIVE_INFINITY){var l=[];for(i=0;i<a.length;i++){n=a[i];var d=[];E.addRange(d,this.upNodes.get(n));E.addRange(d,this.downNodes.get(n));for(var u=0;u<d.length;u++){var c=d[u];if(this.nodeRightClass.get(c)<r){l.push(t.get(n)-t.get(c))}}}l.sort();if(l.length===0){o=0}else if(l.length%2===1){o=l[this.intDiv(l.length,2)]}else{o=(l[this.intDiv(l.length,2)-1]+l[this.intDiv(l.length,2)])/2}}for(i=0;i<a.length;i++){n=a[i];t.set(n,t.get(n)+o)}}return t},_getLeftWing:function(){var e={value:null};var t=this.computeClasses(e,1);this.nodeLeftClass=e.value;return t},_getRightWing:function(){var e={value:null};var t=this.computeClasses(e,-1);this.nodeRightClass=e.value;return t},computeClasses:function(e,t){var i=0,n=e.value=new A;for(var r=0;r<this.layers.length;++r){i=r;var a=this.layers[r];for(var o=t===1?0:a.length-1;0<=o&&o<a.length;o+=t){var s=a[o];if(!n.containsKey(s)){n.set(s,i);if(s.isVirtual){var l=this._nodesInLink(s);for(var d=0;d<l.length;d++){var u=l[d];n.set(u,i)}}}else{i=n.get(s)}}}var c=[];for(var f=0;f<this.layers.length;f++){c.push(null)}n.forEach(function(e,t){if(c[t]===null){c[t]=[]}c[t].push(e)});return c},_isVerticalLayout:function(){return this.options.subtype.toLowerCase()==="up"||this.options.subtype.toLowerCase()==="down"||this.options.subtype.toLowerCase()==="vertical"},_isHorizontalLayout:function(){return this.options.subtype.toLowerCase()==="right"||this.options.subtype.toLowerCase()==="left"||this.options.subtype.toLowerCase()==="horizontal"},_isIncreasingLayout:function(){return this.options.subtype.toLowerCase()==="right"||this.options.subtype.toLowerCase()==="down"},_moveThingsAround:function(){var d,e,t,i,n,r;for(e=0;e<this.layers.length;++e){i=this.layers[e];i.sort(this._gridPositionComparer)}this.minDistances=[];for(e=0;e<this.layers.length;++e){i=this.layers[e];this.minDistances[e]=[];for(n=0;n<i.length;++n){t=i[n];t.layerIndex=n;this.minDistances[e][n]=this.options.nodeDistance;if(n<i.length-1){if(this._isVerticalLayout()){this.minDistances[e][n]+=(t.width+i[n+1].width)/2}else{this.minDistances[e][n]+=(t.height+i[n+1].height)/2}}}}this.downNodes=new A;this.upNodes=new A;E.forEach(this.graph.nodes,function(e){this.downNodes.set(e,[]);this.upNodes.set(e,[])},this);E.forEach(this.graph.links,function(e){var t=e.source;var i=e.target;var n=null,r=null;if(t.layer>i.layer){n=e.source;r=e.target}else{r=e.source;n=e.target}this.downNodes.get(r).push(n);this.upNodes.get(n).push(r)},this);this.downNodes.forEachValue(function(e){e.sort(this._gridPositionComparer)},this);this.upNodes.forEachValue(function(e){e.sort(this._gridPositionComparer)},this);for(e=0;e<this.layers.length-1;++e){i=this.layers[e];for(r=0;r<i.length-1;r++){var a=i[r];if(!a.isVirtual){continue}var o=this.downNodes.get(a)[0];if(!o.isVirtual){continue}for(n=r+1;n<i.length;++n){t=i[n];if(!t.isVirtual){continue}var s=this.downNodes.get(t)[0];if(!s.isVirtual){continue}if(o.gridPosition>s.gridPosition){var l=o.gridPosition;o.gridPosition=s.gridPosition;s.gridPosition=l;var u=o.layerIndex;var c=s.layerIndex;this.layers[e+1][u]=s;this.layers[e+1][c]=o;o.layerIndex=c;s.layerIndex=u}}}}var f=this._getLeftWing();var h=this._getRightWing();var p=this.placeLeftToRight(f);var v=this.placeRightToLeft(h);var m=new A;E.forEach(this.graph.nodes,function(e){m.set(e,(p.get(e)+v.get(e))/2)});var g=new A;var _=new A;for(e=0;e<this.layers.length;++e){i=this.layers[e];var b=-1,w=-1;for(n=0;n<i.length;++n){t=i[n];g.set(t,0);_.set(t,false);if(t.isVirtual){if(b===-1){b=n}else if(b===n-1){b=n}else{w=n;g.set(i[b],0);if(m.get(t)-m.get(i[b])===this.getMinDist(i[b],t)){_.set(i[b],true)}else{_.set(i[b],false)}b=n}}}}var k=[1,-1];E.forEach(k,function(e){var t=e===1?0:this.layers.length-1;for(var i=t;0<=i&&i<this.layers.length;i+=e){var n=this.layers[i];var r=this._firstVirtualNode(n);var a=null;var o=null;if(r!==-1){a=n[r];o=[];for(d=0;d<r;d++){o.push(n[d])}}else{a=null;o=n}if(o.length>0){this._sequencer(m,null,a,e,o);for(d=0;d<o.length-1;++d){this.setMinDist(o[d],o[d+1],m.get(o[d+1])-m.get(o[d]))}if(a){this.setMinDist(o[o.length-1],a,m.get(a)-m.get(o[o.length-1]))}}while(a){var s=this.nextVirtualNode(n,a);if(!s){r=a.layerIndex;o=[];for(d=r+1;d<n.length;d++){o.push(n[d])}if(o.length>0){this._sequencer(m,a,null,e,o);for(d=0;d<o.length-1;++d){this.setMinDist(o[d],o[d+1],m.get(o[d+1])-m.get(o[d]))}this.setMinDist(a,o[0],m.get(o[0])-m.get(a))}}else if(g.get(a)===e){r=a.layerIndex;var l=s.layerIndex;o=[];for(d=r+1;d<l;d++){o.push(n[d])}if(o.length>0){this._sequencer(m,a,s,e,o)}_.set(a,true)}a=s}this.adjustDirections(i,e,g,_)}},this);var y=this._isIncreasingLayout()?0:this.layers.length-1;var x=function(e,t){if(t._isIncreasingLayout()){return e<t.layers.length}else{return e>=0}};var C=this._isIncreasingLayout()?+1:-1,S=0;function T(e,t){var i=Number.MIN_VALUE;for(var n=0;n<e.length;++n){var r=e[n];if(t._isVerticalLayout()){i=Math.max(i,r.height)}else{i=Math.max(i,r.width)}}return i}for(d=y;x(d,this);d+=C){i=this.layers[d];var D=T(i,this);for(n=0;n<i.length;++n){t=i[n];if(this._isVerticalLayout()){t.x=m.get(t);t.y=S+D/2}else{t.x=S+D/2;t.y=m.get(t)}}S+=this.options.layerSeparation+D}},adjustDirections:function(e,t,i,n){if(e+t<0||e+t>=this.layers.length){return}var r=null,a=null;var o=this.layers[e+t];for(var s=0;s<o.length;++s){var l=o[s];if(l.isVirtual){var d=this.getNeighborOnLayer(l,e);if(d.isVirtual){if(r){var u=n.get(a);var c=this.layers[e];var f=a.layerIndex;var h=d.layerIndex;for(var p=f+1;p<h;++p){if(c[p].isVirtual){u=u&&n.get(c[p])}}if(u){i.set(r,t);var v=r.layerIndex;var m=l.layerIndex;for(var g=v+1;g<m;++g){if(o[g].isVirtual){i.set(o[g],t)}}}}r=l;a=d}}}},getNeighborOnLayer:function(e,t){var i=this.upNodes.get(e)[0];if(i.layer===t){return i}i=this.downNodes.get(e)[0];if(i.layer===t){return i}return null},_sequencer:function(e,t,i,n,r){if(r.length===1){this._sequenceSingle(e,t,i,n,r[0])}if(r.length>1){var a=r.length,o=this.intDiv(a,2);this._sequencer(e,t,i,n,r.slice(0,o));this._sequencer(e,t,i,n,r.slice(o));this.combineSequences(e,t,i,n,r)}},_sequenceSingle:function(e,t,i,n,r){var a=n===-1?this.downNodes.get(r):this.upNodes.get(r);var o=a.length;if(o!==0){if(o%2===1){e.set(r,e.get(a[this.intDiv(o,2)]))}else{e.set(r,(e.get(a[this.intDiv(o,2)-1])+e.get(a[this.intDiv(o,2)]))/2)}if(t){e.set(r,Math.max(e.get(r),e.get(t)+this.getMinDist(t,r)))}if(i){e.set(r,Math.min(e.get(r),e.get(i)-this.getMinDist(r,i)))}}},combineSequences:function(e,t,i,n,r){var a=r.length,o=this.intDiv(a,2);var s=[],l,d,u,c,f,h;for(l=0;l<o;++l){d=0;c=n===-1?this.downNodes.get(r[l]):this.upNodes.get(r[l]);for(u=0;u<c.length;++u){f=c[u];if(e.get(f)>=e.get(r[l])){d++}else{d--;s.push({k:e.get(f)+this.getMinDist(r[l],r[o-1]),v:2})}}s.push({k:e.get(r[l])+this.getMinDist(r[l],r[o-1]),v:d})}if(t){s.push({k:e.get(t)+this.getMinDist(t,r[o-1]),v:Number.MAX_VALUE})}s.sort(this._positionDescendingComparer);var p=[];for(l=o;l<a;++l){d=0;c=n===-1?this.downNodes.get(r[l]):this.upNodes.get(r[l]);for(u=0;u<c.length;++u){f=c[u];if(e.get(f)<=e.get(r[l])){d++}else{d--;p.push({k:e.get(f)-this.getMinDist(r[l],r[o]),v:2})}}p.push({k:e.get(r[l])-this.getMinDist(r[l],r[o]),v:d})}if(i){p.push({k:e.get(i)-this.getMinDist(i,r[o]),v:Number.MAX_VALUE})}p.sort(this._positionAscendingComparer);var v=0,m=0;var g=this.getMinDist(r[o-1],r[o]);while(e.get(r[o])-e.get(r[o-1])<g){if(v<m){if(s.length===0){e.set(r[o-1],e.get(r[o])-g);break}else{h=s.shift();v=v+h.v;e.set(r[o-1],h.k);e.set(r[o-1],Math.max(e.get(r[o-1]),e.get(r[o])-g))}}else{if(p.length===0){e.set(r[o],e.get(r[o-1])+g);break}else{h=p.shift();m=m+h.v;e.set(r[o],h.k);e.set(r[o],Math.min(e.get(r[o]),e.get(r[o-1])+g))}}}for(l=o-2;l>=0;l--){e.set(r[l],Math.min(e.get(r[l]),e.get(r[o-1])-this.getMinDist(r[l],r[o-1])))}for(l=o+1;l<a;l++){e.set(r[l],Math.max(e.get(r[l]),e.get(r[o])+this.getMinDist(r[l],r[o])))}},placeLeft:function(e,i,n){var r=Number.NEGATIVE_INFINITY;E.forEach(this._getComposite(e),function(e){var t=this.leftSibling(e);if(t&&this.nodeLeftClass.get(t)===this.nodeLeftClass.get(e)){if(!i.containsKey(t)){this.placeLeft(t,i,n)}r=Math.max(r,i.get(t)+this.getMinDist(t,e))}},this);if(r===Number.NEGATIVE_INFINITY){r=0}E.forEach(this._getComposite(e),function(e){i.set(e,r)})},placeRight:function(e,i,n){var r=Number.POSITIVE_INFINITY;E.forEach(this._getComposite(e),function(e){var t=this.rightSibling(e);if(t&&this.nodeRightClass.get(t)===this.nodeRightClass.get(e)){if(!i.containsKey(t)){this.placeRight(t,i,n)}r=Math.min(r,i.get(t)-this.getMinDist(e,t))}},this);if(r===Number.POSITIVE_INFINITY){r=0}E.forEach(this._getComposite(e),function(e){i.set(e,r)})},leftSibling:function(e){var t=this.layers[e.layer],i=e.layerIndex;return i===0?null:t[i-1]},rightSibling:function(e){var t=this.layers[e.layer];var i=e.layerIndex;return i===t.length-1?null:t[i+1]},_getComposite:function(e){return e.isVirtual?this._nodesInLink(e):[e]},arrangeNodes:function(){var e,t,i,n,r;for(t=0;t<this.layers.length;t++){n=this.layers[t];for(i=0;i<n.length;i++){r=n[i];r.upstreamPriority=r.upstreamLinkCount;r.downstreamPriority=r.downstreamLinkCount}}var a=2;for(var o=0;o<a;o++){for(e=this.layers.length-1;e>=1;e--){this.layoutLayer(false,e)}for(e=0;e<this.layers.length-1;e++){this.layoutLayer(true,e)}}var s=Number.MAX_VALUE;for(t=0;t<this.layers.length;t++){n=this.layers[t];for(i=0;i<n.length;i++){r=n[i];s=Math.min(s,r.gridPosition)}}if(s<0){for(t=0;t<this.layers.length;t++){n=this.layers[t];for(i=0;i<n.length;i++){r=n[i];r.gridPosition=r.gridPosition-s}}}},layoutLayer:function(e,t){var i;var r;if(e){r=this.layers[i=t+1]}else{r=this.layers[i=t-1]}var n=[];for(var a=0;a<r.length;a++){n.push(r[a])}n.sort(function(e,t){var i=(e.upstreamPriority+e.downstreamPriority)/2;var n=(t.upstreamPriority+t.downstreamPriority)/2;if(Math.abs(i-n)<1e-4){return 0}if(i<n){return 1}return-1});E.forEach(n,function(e){var t=e.gridPosition;var i=this.calcBaryCenter(e);var n=(e.upstreamPriority+e.downstreamPriority)/2;if(Math.abs(t-i)<1e-4){return}if(Math.abs(t-i)<.25+1e-4){return}if(t<i){while(t<i){if(!this.moveRight(e,r,n)){break}t=e.gridPosition}}else{while(t>i){if(!this.moveLeft(e,r,n)){break}t=e.gridPosition}}},this);if(i>0){this.calcDownData(i-1)}if(i<this.layers.length-1){this.calcUpData(i+1)}},moveRight:function(e,t,i){var n=E.indexOf(t,e);if(n===t.length-1){e.gridPosition=e.gridPosition+.5;return true}var r=t[n+1];var a=(r.upstreamPriority+r.downstreamPriority)/2;if(r.gridPosition>e.gridPosition+1){e.gridPosition=e.gridPosition+.5;return true}if(a>i||Math.abs(a-i)<1e-4){return false}if(this.moveRight(r,t,i)){e.gridPosition=e.gridPosition+.5;return true}return false},moveLeft:function(e,t,i){var n=E.indexOf(t,e);if(n===0){e.gridPosition=e.gridPosition-.5;return true}var r=t[n-1];var a=(r.upstreamPriority+r.downstreamPriority)/2;if(r.gridPosition<e.gridPosition-1){e.gridPosition=e.gridPosition-.5;return true}if(a>i||Math.abs(a-i)<1e-4){return false}if(this.moveLeft(r,t,i)){e.gridPosition=e.gridPosition-.5;return true}return false},mapVirtualNode:function(e,t){this.nodeToLinkMap.set(e,t);if(!this.linkToNodeMap.containsKey(t)){this.linkToNodeMap.set(t,[])}this.linkToNodeMap.get(t).push(e)},_nodesInLink:function(e){return this.linkToNodeMap.get(this.nodeToLinkMap.get(e))},_dummify:function(){this.linkToNodeMap=new A;this.nodeToLinkMap=new A;var e,t,i,n,r,a,o,s,l=this.graph.links.slice(0);var d=this.layers;var u=function(e,t,i){d[e].linksTo[t]=d[e].linksTo[t]||[];d[e].linksTo[t].push(i)};for(s=0;s<l.length;s++){var c=l[s];var f=c.source;var h=c.target;var p=f.layer;var v=h.layer;var m=f.gridPosition;var g=h.gridPosition;var _=(g-m)/Math.abs(v-p);var b=f;if(p-v>1){for(o=p-1;o>v;o--){i=new w;i.x=f.x;i.y=f.y;i.width=f.width/100;i.height=f.height/100;e=d[o];t=(o-v)*_+m;if(t>e.length){t=e.length}if(m>=d[p].length-1&&g>=d[v].length-1){t=e.length}else if(m===0&&g===0){t=0}i.layer=o;i.uBaryCenter=0;i.dBaryCenter=0;i.upstreamLinkCount=0;i.downstreamLinkCount=0;i.gridPosition=t;i.isVirtual=true;E.insert(e,i,t);for(r=t+1;r<e.length;r++){n=e[r];n.gridPosition=n.gridPosition+1}a=new k(b,i);a.depthOfDumminess=0;u(o-1,o,a);b=i;this.graph._addNode(i);this.graph.addLink(a);i.index=this.graph.nodes.length-1;this.mapVirtualNode(i,c)}u(v-1,v,a);c.changeSource(b);c.depthOfDumminess=p-v-1}else if(p-v<-1){for(o=p+1;o<v;o++){i=new w;i.x=f.x;i.y=f.y;i.width=f.width/100;i.height=f.height/100;e=d[o];t=(o-p)*_+m;if(t>e.length){t=e.length}if(m>=d[p].length-1&&g>=d[v].length-1){t=e.length}else if(m===0&&g===0){t=0}i.layer=o;i.uBaryCenter=0;i.dBaryCenter=0;i.upstreamLinkCount=0;i.downstreamLinkCount=0;i.gridPosition=t;i.isVirtual=true;t&=t;E.insert(e,i,t);for(r=t+1;r<e.length;r++){n=e[r];n.gridPosition=n.gridPosition+1}a=new k(b,i);a.depthOfDumminess=0;u(o-1,o,a);b=i;this.graph._addNode(i);this.graph.addLink(a);i.index=this.graph.nodes.length-1;this.mapVirtualNode(i,c)}u(v-1,v,c);c.changeSource(b);c.depthOfDumminess=v-p-1}else{u(p,v,c)}}},_dedummify:function(){var e=true;while(e){e=false;for(var t=0;t<this.graph.links.length;t++){var i=this.graph.links[t];if(!i.depthOfDumminess){continue}var n=[];n.unshift({x:i.target.x,y:i.target.y});n.unshift({x:i.source.x,y:i.source.y});var r=i;var a=i.depthOfDumminess;for(var o=0;o<a;o++){var s=r.source;var l=s.incoming[0];n.unshift({x:l.source.x,y:l.source.y});r=l}i.changeSource(r.source);i.depthOfDumminess=0;if(n.length>2){n.splice(0,1);n.splice(n.length-1);i.points=n}else{i.points=[]}e=true;break}}},_optimizeCrossings:function(){var e=-1,t;var i=3;var n=0;while(e!==0){if(n++>i){break}e=0;for(t=this.layers.length-1;t>=1;t--){e+=this.optimizeLayerCrossings(false,t)}for(t=0;t<this.layers.length-1;t++){e+=this.optimizeLayerCrossings(true,t)}}},calcUpData:function(e){if(e===0){return}var t=this.layers[e],i,n,r;var a=new c;var o=this.layers[e-1];for(i=0;i<o.length;i++){a.add(o[i])}for(i=0;i<t.length;i++){var s=t[i];var l=0;var d=0;for(n=0;n<s.incoming.length;n++){r=s.incoming[n];if(a.contains(r.source)){d++;l+=r.source.gridPosition}}for(n=0;n<s.outgoing.length;n++){r=s.outgoing[n];if(a.contains(r.target)){d++;l+=r.target.gridPosition}}if(d>0){s.uBaryCenter=l/d;s.upstreamLinkCount=d}else{s.uBaryCenter=i;s.upstreamLinkCount=0}}},calcDownData:function(e){if(e===this.layers.length-1){return}var t=this.layers[e],i,n,r;var a=new c;var o=this.layers[e+1];for(i=0;i<o.length;i++){a.add(o[i])}for(i=0;i<t.length;i++){var s=t[i];var l=0;var d=0;for(n=0;n<s.incoming.length;n++){r=s.incoming[n];if(a.contains(r.source)){d++;l+=r.source.gridPosition}}for(n=0;n<s.outgoing.length;n++){r=s.outgoing[n];if(a.contains(r.target)){d++;l+=r.target.gridPosition}}if(d>0){s.dBaryCenter=l/d;s.downstreamLinkCount=d}else{s.dBaryCenter=i;s.downstreamLinkCount=0}}},optimizeLayerCrossings:function(e,t){var i;var n;if(e){n=this.layers[i=t+1]}else{n=this.layers[i=t-1]}var r=n.slice(0);if(e){this.calcUpData(i)}else{this.calcDownData(i)}var a=this;n.sort(function(e,t){var i=a.calcBaryCenter(e),n=a.calcBaryCenter(t);if(Math.abs(i-n)<1e-4){if(e.degree()===t.degree()){return a.compareByIndex(e,t)}else if(e.degree()<t.degree()){return 1}return-1}var r=(n-i)*1e3;if(r>0){return-1}else if(r<0){return 1}return a.compareByIndex(e,t)});var o,s=0;for(o=0;o<n.length;o++){if(n[o]!==r[o]){s++}}if(s>0){var l=0;for(o=0;o<n.length;o++){var d=n[o];d.gridPosition=l++}}return s},_swapPairs:function(){var e=this.options.layeredIterations;var t=0;while(true){if(t++>e){break}var i=t%4<=1;var n=t%4===1;for(var r=i?0:this.layers.length-1;i?r<=this.layers.length-1:r>=0;r+=i?1:-1){var a=this.layers[r];var o=false;var s=true;var l=0;for(var d=0;d<a.length-1;d++){var u=0;var c=0;var f=0;if(s){if(r!==0){u=this.countLinksCrossingBetweenTwoLayers(r-1,r)}if(r!==this.layers.length-1){c=this.countLinksCrossingBetweenTwoLayers(r,r+1)}if(i){u*=2}else{c*=2}f=u+c}else{f=l}if(f===0){continue}var h=a[d];var p=a[d+1];var v=h.gridPosition;var m=p.gridPosition;a[d]=p;a[d+1]=h;h.gridPosition=m;p.gridPosition=v;u=0;if(r!==0){u=this.countLinksCrossingBetweenTwoLayers(r-1,r)}c=0;if(r!==this.layers.length-1){c=this.countLinksCrossingBetweenTwoLayers(r,r+1)}if(i){u*=2}else{c*=2}var g=u+c;var _=false;if(n){_=g>=f}else{_=g>f}if(_){h=a[d];p=a[d+1];v=h.gridPosition;m=p.gridPosition;a[d]=p;a[d+1]=h;h.gridPosition=m;p.gridPosition=v;l=f;s=false}else{o=true;s=true}}if(o){if(r!==this.layers.length-1){this.calcUpData(r+1)}if(r!==0){this.calcDownData(r-1)}}}}},countLinksCrossingBetweenTwoLayers:function(e,t){var i=this.layers[e].linksTo[t];var n,r,a,o,s,l,d,u;var c=0;var f=i.length;for(d=0;d<f;d++){n=i[d];for(u=d+1;u<f;u++){r=i[u];if(n.target.layer===t){a=n.source;o=n.target}else{a=n.target;o=n.source}if(r.target.layer===t){s=r.source;l=r.target}else{s=r.target;l=r.source}var h=a.gridPosition;var p=o.gridPosition;var v=s.gridPosition;var m=l.gridPosition;if((h-v)*(p-m)<0){c++}}}return c},calcBaryCenter:function(e){var t=e.upstreamLinkCount;var i=e.downstreamLinkCount;var n=e.uBaryCenter;var r=e.dBaryCenter;if(t>0&&i>0){return(n+r)/2}if(t>0){return n}if(i>0){return r}return 0},_gridPositionComparer:function(e,t){if(e.gridPosition<t.gridPosition){return-1}if(e.gridPosition>t.gridPosition){return 1}return 0},_positionAscendingComparer:function(e,t){return e.k<t.k?-1:e.k>t.k?1:0},_positionDescendingComparer:function(e,t){return e.k<t.k?1:e.k>t.k?-1:0},_firstVirtualNode:function(e){for(var t=0;t<e.length;t++){if(e[t].isVirtual){return t}}return-1},compareByIndex:function(e,t){var i=e.index;var n=t.index;if(i<n){return 1}if(i>n){return-1}return 0},intDiv:function(e,t){return(e-e%t)/t},nextVirtualNode:function(e,t){var i=t.layerIndex;for(var n=i+1;n<e.length;++n){if(e[n].isVirtual){return e[n]}}return null}});var x=i.Class.extend({init:function(e,t){if(E.isUndefined(e)){throw"No diagram given"}this.diagram=e;this.nodeMap=new A;this.linkMap=new A;this.capture(t?t:e)},capture:function(e){var t,i,n,r,a,o,s;if(e instanceof u.Graph){for(r=0;r<e.nodes.length;r++){t=e.nodes[r];n=t.associatedShape;this.nodeMap.set(n.visual.id,new h(t.x,t.y,t.width,t.height))}for(r=0;r<e.links.length;r++){o=e.links[r];a=o.associatedConnection;this.linkMap.set(a.visual.id,o.points())}}else if(e instanceof Array){i=e;for(r=0;r<i.length;r++){t=i[r];n=t.associatedShape;if(n){this.nodeMap.set(n.visual.id,new h(t.x,t.y,t.width,t.height))}}}else if(e.hasOwnProperty("links")&&e.hasOwnProperty("nodes")){i=e.nodes;s=e.links;for(r=0;r<i.length;r++){t=i[r];n=t.associatedShape;if(n){this.nodeMap.set(n.visual.id,new h(t.x,t.y,t.width,t.height))}}for(r=0;r<s.length;r++){o=s[r];a=o.associatedConnection;if(a){this.linkMap.set(a.visual.id,o.points)}}}else{var l=this.diagram.shapes;var d=this.diagram.connections;for(r=0;r<l.length;r++){n=l[r];this.nodeMap.set(n.visual.id,n.bounds())}for(r=0;r<d.length;r++){a=d[r];this.linkMap.set(a.visual.id,a.points())}}}});r(u,{init:function(e){i.init(e,u.ui)},SpringLayout:g,TreeLayout:b,GraphAdapter:d,LayeredLayout:y,LayoutBase:s,LayoutState:x})})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("dataviz/diagram/dom",["kendo.data","kendo.draganddrop","kendo.toolbar","kendo.editable","kendo.window","kendo.dropdownlist","kendo.dataviz.core","kendo.dataviz.themes","dataviz/diagram/svg","dataviz/diagram/services","dataviz/diagram/layout"],e)})(function(){(function(r,l){var d=kendo.dataviz,m=kendo.drawing,s=kendo.geometry,u=d.diagram,n=kendo.ui.Widget,e=kendo.Class,c=r.proxy,f=kendo.deepExtend,B=kendo._outerWidth,L=kendo._outerHeight,H=r.extend,N=kendo.data.HierarchicalDataSource,O=u.Canvas,V=u.Group,W=u.Rectangle,U=u.Circle,j=u.CompositeTransform,h=u.Rect,G=u.Path,q=u.DeleteShapeUnit,$=u.DeleteConnectionUnit,K=u.TextBlock,Y=u.Image,g=u.Point,Q=u.Intersect,X=u.ConnectionEditAdorner,Z=u.UndoRedoService,J=u.ToolService,ee=u.Selector,te=u.ResizingAdorner,ie=u.ConnectorsAdorner,ne=u.Cursors,p=u.Utils,re=kendo.Observable,ae=u.ToBackUnit,oe=u.ToFrontUnit,se=u.PolylineRouter,le=u.CascadingRouter,v=p.isUndefined,_=p.isDefined,o=m.util.defined,b=r.isArray,a=kendo.isFunction,w=p.isString,de=r.isPlainObject,k=Math;var i=".kendoDiagram",ue="cascading",ce="itemBoundsChange",y="change",t="click",fe="drag",he="dragEnd",pe="dragStart",ve="mouseEnter",me="mouseLeave",ge="error",x="Auto",_e="Top",be="Right",we="Left",ke="Bottom",ye=9007199254740992,xe="select",Ce="itemRotate",Se="pan",C="zoomStart",Te="zoomEnd",De="none",Ae=600,Ee=600,Ie="rectangle",Me=100,Re=100,Fe=20,Pe=20,ze=0,Be="Yellow",Le=Number.MAX_VALUE,He=-Number.MAX_VALUE,Ne="absolute",Oe="transformed",S="rotated",Ve="transparent",We="width",Ue="height",je="x",Ge="y",qe="DOMMouseScroll"+i+" mousewheel"+i,$e=.05,Ke=5,Ye='<a class="k-button k-button-icontext #=className#" href="\\#"><span class="#=iconClass# #=imageClass#"></span>#=text#</a>',Qe=5;u.DefaultConnectors=[{name:_e},{name:ke},{name:we},{name:be},{name:x,position:function(e){return e.getPosition("center")}}];var Xe={cancel:{text:"Cancel",imageClass:"k-i-cancel",className:"k-diagram-cancel",iconClass:"k-icon"},update:{text:"Update",imageClass:"k-i-checkmark",className:"k-diagram-update",iconClass:"k-icon"}};u.shapeDefaults=function(e){var t={type:Ie,path:"",autoSize:true,visual:null,x:ze,y:ze,minWidth:Fe,minHeight:Pe,width:Me,height:Re,hover:{},editable:{connect:true,tools:[]},connectors:u.DefaultConnectors,rotation:{angle:0}};p.simpleExtend(t,e);return t};function Ze(e){var t=e.originalEvent,i=0;if(t.wheelDelta){i=-t.wheelDelta/40;i=i>0?k.ceil(i):k.floor(i)}else if(t.detail){i=t.detail}return i}function T(e){return e.options.name.toLowerCase()===x.toLowerCase()}function Je(e,t){var i=ye,n,r;for(var a=0;a<t.length;a++){r=t[a];if(!T(r)){var o=e.distanceTo(r.position());if(o<i){i=o;n=r}}}return n}function et(e,t){var i,n=[],r;var a=e.drawingContainer().children;var o=a.length;for(i=0;i<t.length;i++){r=t[i];for(var s=0;s<o;s++){if(a[s]==r.drawingContainer()){n.push(s);break}}}return n}var D=re.extend({init:function(e){var t=this;t.dataItem=(e||{}).dataItem;re.fn.init.call(t);t.options=f({id:u.randomId()},t.options,e);t.isSelected=false;t.visual=new V({id:t.options.id,autoSize:t.options.autoSize});t.id=t.options.id;t._template()},options:{hover:{},cursor:ne.grip,content:{align:"center middle"},selectable:true,serializable:true,enable:true},_getCursor:function(e){if(this.adorner){return this.adorner._getCursor(e)}return this.options.cursor},visible:function(e){if(v(e)){return this.visual.visible()}else{this.visual.visible(e)}},bounds:function(){},refresh:function(){this.visual.redraw()},position:function(e){this.options.x=e.x;this.options.y=e.y;this.visual.position(e)},toString:function(){return this.options.id},serialize:function(){var e=f({},{options:this.options});if(this.dataItem){e.dataItem=this.dataItem.toString()}return e},_content:function(e){if(e!==l){var t=this.options;if(u.Utils.isString(e)){t.content.text=e}else{f(t.content,e)}var i=t.content;var n=this._contentVisual;if(!n){this._createContentVisual(i)}else{this._updateContentVisual(i)}}return this.options.content.text},_createContentVisual:function(e){if(e.text){this._contentVisual=new K(e);this._contentVisual._includeInBBox=false;this.visual.append(this._contentVisual)}},_updateContentVisual:function(e){this._contentVisual.redraw(e)},_hitTest:function(e){var t=this.bounds();return this.visible()&&t.contains(e)&&this.options.enable},_template:function(){var e=this;if(e.options.content.template){var t=e.dataItem||{},i=kendo.template(e.options.content.template,{paramName:"dataItem"});e.options.content.text=i(t)}},_canSelect:function(){return this.options.selectable!==false},toJSON:function(){return{id:this.options.id}}});var A=e.extend({init:function(e,t){this.options=f({},this.options,t);this.connections=[];this.shape=e},options:{width:7,height:7,fill:{color:Be},hover:{}},position:function(){if(this.options.position){return this.options.position(this.shape)}else{return this.shape.getPosition(this.options.name)}},toJSON:function(){return{shapeId:this.shape.toString(),connector:this.options.name}}});A.parse=function(e,t){var i=t.split(":"),n=i[0],r=i[1]||x;for(var a=0;a<e.shapes.length;a++){var o=e.shapes[a];if(o.options.id==n){return o.getConnector(r.trim())}}};var E=D.extend({init:function(e,t){var i=this;D.fn.init.call(i,e);this.diagram=t;this.updateOptionsFromModel();e=i.options;i.connectors=[];i.type=e.type;i.createShapeVisual();i.updateBounds();i.content(i.content());i._createConnectors()},options:u.shapeDefaults(),_setOptionsFromModel:function(e){var t=it(e||this.dataItem);this.options=f({},this.options,t);this.redrawVisual()},updateOptionsFromModel:function(e,t){if(this.diagram&&this.diagram._isEditable){var i=it(e||this.dataItem);if(e&&t){if(!d.inArray(t,["x","y","width","height"])){if(this.options.visual){this._redrawVisual()}else if(i.type){this.options=f({},this.options,i);this._redrawVisual()}if(this.options.content){this._template();this.content(this.options.content)}}else{var n=this.bounds();n[t]=e[t];this.bounds(n)}}else{this.options=f({},this.options,i)}}},_redrawVisual:function(){this.visual.clear();this._contentVisual=null;this.options.dataItem=this.dataItem;this.createShapeVisual();this.updateBounds()},redrawVisual:function(){this._redrawVisual();if(this.options.content){this._template();this.content(this.options.content)}},updateModel:function(e){var t=this.diagram;if(t&&t._isEditable){var i=this._bounds;var n=this.dataItem;if(n){t._suspendModelRefresh();if(o(n.x)&&i.x!==n.x){n.set("x",i.x)}if(o(n.y)&&i.y!==n.y){n.set("y",i.y)}if(o(n.width)&&i.width!==n.width){n.set("width",i.width)}if(o(n.height)&&i.height!==n.height){n.set("height",i.height)}this.dataItem=n;t._resumeModelRefresh();if(e){t._syncShapeChanges()}}}},updateBounds:function(){var e=this.visual._measure(true);var t=this.options;this.bounds(new h(t.x,t.y,e.width,e.height));this._rotate();this._alignContent()},content:function(e){var t=this._content(e);this._alignContent();return t},_alignContent:function(){var e=this.options.content||{};var t=this._contentVisual;if(t&&e.align){var i=this.visual._measure();var n=new u.RectAlign(i);var r=t.drawingElement.bbox(null);var a=new h(0,0,r.width(),r.height());var o=n.align(a,e.align);t.position(o.topLeft())}},_createConnectors:function(){var e=this.options,t=e.connectors.length,i=e.connectorDefaults,n,r;for(r=0;r<t;r++){n=new A(this,f({},i,e.connectors[r]));this.connectors.push(n)}},bounds:function(e){var t;if(e){if(w(e)){switch(e){case Oe:t=this._transformedBounds();break;case Ne:t=this._transformedBounds();var i=this.diagram._pan;t.x+=i.x;t.y+=i.y;break;case S:t=this._rotatedBounds();break;default:t=this._bounds}}else{this._setBounds(e);this._triggerBoundsChange();if(!(this.diagram&&this.diagram._layouting)){this.refreshConnections()}}}else{t=this._bounds}return t},_setBounds:function(e){var t=this.options;var i=e.topLeft();var n=t.x=i.x;var r=t.y=i.y;var a=t.width=k.max(e.width,t.minWidth);var o=t.height=k.max(e.height,t.minHeight);this._bounds=new h(n,r,a,o);this.visual.redraw({x:n,y:r,width:a,height:o})},position:function(e){if(e){this.bounds(new h(e.x,e.y,this._bounds.width,this._bounds.height))}else{return this._bounds.topLeft()}},clone:function(){var e=this.serialize();e.options.id=u.randomId();if(this.diagram&&this.diagram._isEditable&&o(this.dataItem)){e.options.dataItem=F(this.dataItem)}return new E(e.options)},select:function(e){var t=this.diagram,i,n;if(v(e)){e=true}if(this._canSelect()){if(this.isSelected!=e){i=[];n=[];this.isSelected=e;if(this.isSelected){t._selectedItems.push(this);i.push(this)}else{p.remove(t._selectedItems,this);n.push(this)}if(!t._internalSelection){t._selectionChanged(i,n)}return true}}},rotate:function(e,t,i){var n=this.visual.rotate();if(e!==l){if(i!==false&&this.diagram&&this.diagram.undoRedoService&&e!==n.angle){this.diagram.undoRedoService.add(new u.RotateUnit(this.diagram._resizingAdorner,[this],[n.angle]),false)}var r=this.bounds(),a=new g(r.width/2,r.height/2),o,s;if(t){o=e-n.angle;s=r.center().rotate(t,360-o).minus(a);this._rotationOffset=this._rotationOffset.plus(s.minus(r.topLeft()));this.position(s)}this.visual.rotate(e,a);this.options.rotation.angle=e;if(this.diagram&&this.diagram._connectorsAdorner){this.diagram._connectorsAdorner.refresh()}this.refreshConnections();if(this.diagram){this.diagram.trigger(Ce,{item:this})}}return n},connections:function(e){var t=[],i,n,r,a,o;for(i=0;i<this.connectors.length;i++){o=this.connectors[i];a=o.connections;for(n=0,a;n<a.length;n++){r=a[n];if(e=="out"){var s=r.source();if(s.shape&&s.shape==this){t.push(r)}}else if(e=="in"){var l=r.target();if(l.shape&&l.shape==this){t.push(r)}}else{t.push(r)}}}return t},refreshConnections:function(){r.each(this.connections(),function(){this.refresh()})},getConnector:function(e){var t,i;if(w(e)){e=e.toLocaleLowerCase();for(t=0;t<this.connectors.length;t++){i=this.connectors[t];if(i.options.name.toLocaleLowerCase()==e){return i}}}else if(e instanceof g){return Je(e,this.connectors)}else{return this.connectors.length?this.connectors[0]:null}},getPosition:function(e){var t=this.bounds(),i=e.charAt(0).toLowerCase()+e.slice(1);if(a(t[i])){return this._transformPoint(t[i]())}return t.center()},redraw:function(e){if(e){var t=this.options;var i;this.shapeVisual.redraw(this._visualOptions(e));if(this._diffNumericOptions(e,[We,Ue,je,Ge])){this.bounds(new h(t.x,t.y,t.width,t.height));i=true}if(e.connectors){t.connectors=e.connectors;this._updateConnectors()}t=f(t,e);if(e.rotation||i){this._rotate()}if(t.content){this.content(t.content)}}},_updateConnectors:function(){var e=this.connections();this.connectors=[];this._createConnectors();var t;var i;var n;for(var r=0;r<e.length;r++){t=e[r];i=t.source();n=t.target();if(i.shape&&i.shape===this){t.source(this.getConnector(i.options.name)||null)}else if(n.shape&&n.shape===this){t.target(this.getConnector(n.options.name)||null)}t.updateModel()}},_diffNumericOptions:u.diffNumericOptions,_visualOptions:function(e){return{data:e.path,source:e.source,hover:e.hover,fill:e.fill,stroke:e.stroke}},_triggerBoundsChange:function(){if(this.diagram){this.diagram.trigger(ce,{item:this,bounds:this._bounds.clone()})}},_transformPoint:function(e){var t=this.rotate(),i=this.bounds(),n=i.topLeft();if(t.angle){e.rotate(t.center().plus(n),360-t.angle)}return e},_transformedBounds:function(){var e=this.bounds(),t=e.topLeft(),i=e.bottomRight();return h.fromPoints(this.diagram.modelToView(t),this.diagram.modelToView(i))},_rotatedBounds:function(){var e=this.bounds().rotatedBounds(this.rotate().angle),t=e.topLeft(),i=e.bottomRight();return h.fromPoints(t,i)},_rotate:function(){var e=this.options.rotation;if(e&&e.angle){this.rotate(e.angle)}this._rotationOffset=new g},_hover:function(e){var t=this.options,i=t.hover,n=t.stroke,r=t.fill;if(e&&_(i.stroke)){n=f({},n,i.stroke)}if(e&&_(i.fill)){r=i.fill}this.shapeVisual.redraw({stroke:n,fill:r});if(t.editable&&t.editable.connect){this.diagram._showConnectors(this,e)}},_hitTest:function(e){if(this.visible()){var t=this.bounds(),i,n=this.rotate().angle;if(e.isEmpty&&!e.isEmpty()){return Q.rects(e,t,n?n:0)}else{i=e.clone().rotate(t.center(),n);if(t.contains(i)){return this}}}},toJSON:function(){return{shapeId:this.options.id}},createShapeVisual:function(){var e=this.options;var t=this._visualOptions(e);var i=e.visual;var n=(e.type+"").toLocaleLowerCase();var r;t.width=e.width;t.height=e.height;if(a(i)){r=i.call(this,e)}else if(t.data){r=new G(t);ht(r)}else if(n=="rectangle"){r=new W(t)}else if(n=="circle"){r=new U(t)}else if(n=="text"){r=new K(t)}else if(n=="image"){r=new Y(t)}else{r=new G(t)}this.shapeVisual=r;this.visual.append(this.shapeVisual)}});var I=D.extend({init:function(e,t,i){var n=this;D.fn.init.call(n,i);this.updateOptionsFromModel();this._initRouter();n.path=new u.Polyline(n.options);n.path.fill(Ve);n.visual.append(n.path);n._sourcePoint=n._targetPoint=new g;n._setSource(e);n._setTarget(t);n.content(n.options.content);n.definers=[];if(o(i)&&i.points){n.points(i.points)}},options:{hover:{stroke:{}},startCap:De,endCap:De,points:[],selectable:true,fromConnector:x,toConnector:x},_setOptionsFromModel:function(e){this.updateOptionsFromModel(e||this.dataItem)},updateOptionsFromModel:function(e){if(this.diagram&&this.diagram._isEditable){var t=this.diagram._dataMap;var i=nt(e||this.dataItem);if(e){if(o(i.from)){var n=t[i.from];if(n&&o(i.fromConnector)){n=n.getConnector(i.fromConnector)}this.source(n)}else if(o(i.fromX)&&o(i.fromY)){this.source(new g(i.fromX,i.fromY))}if(o(i.to)){var r=t[i.to];if(r&&o(i.toConnector)){r=r.getConnector(i.toConnector)}this.target(r)}else if(o(i.toX)&&o(i.toY)){this.target(new g(i.toX,i.toY))}if(o(i.type)&&this.type()!==i.type){this.points([]);this.type(i.type)}this.dataItem=e;this._template();this.redraw(this.options)}else{this.options=f({},i,this.options)}}},updateModel:function(e){if(this.diagram&&this.diagram._isEditable){if(this.diagram.connectionsDataSource){var t=this.diagram.connectionsDataSource.getByUid(this.dataItem.uid);if(t){this.diagram._suspendModelRefresh();if(o(this.options.fromX)&&this.options.fromX!==null){z("from",t);z("fromConnector",t);t.set("fromX",this.options.fromX);t.set("fromY",this.options.fromY)}else{t.set("from",this.options.from);if(o(t.fromConnector)){t.set("fromConnector",this.sourceConnector?this.sourceConnector.options.name:null)}z("fromX",t);z("fromY",t)}if(o(this.options.toX)&&this.options.toX!==null){z("to",t);z("toConnector",t);t.set("toX",this.options.toX);t.set("toY",this.options.toY)}else{t.set("to",this.options.to);if(o(t.toConnector)){t.set("toConnector",this.targetConnector?this.targetConnector.options.name:null)}z("toX",t);z("toY",t)}if(o(this.options.type)&&o(t.type)){t.set("type",this.options.type)}this.dataItem=t;this.diagram._resumeModelRefresh();if(e){this.diagram._syncConnectionChanges()}}}}},sourcePoint:function(){return this._resolvedSourceConnector?this._resolvedSourceConnector.position():this._sourcePoint},_setSource:function(e){var t=e instanceof E;var i=this.options.fromConnector||x;var n;if(t&&!e.getConnector(i)){return}if(e!==l){this.from=e}this._removeFromSourceConnector();if(e===null){if(this.sourceConnector){this._sourcePoint=(this._resolvedSourceConnector||this.sourceConnector).position();this._clearSourceConnector();this._setFromOptions(null,this._sourcePoint)}}else if(e instanceof A){n=e.shape.dataItem;if(n){this._setFromOptions(n.id)}this.sourceConnector=e;this.sourceConnector.connections.push(this)}else if(e instanceof g){this._setFromOptions(null,e);this._sourcePoint=e;if(this.sourceConnector){this._clearSourceConnector()}}else if(t){n=e.dataItem;if(n){this._setFromOptions(n.id)}this.sourceConnector=e.getConnector(i);this.sourceConnector.connections.push(this)}},source:function(e,t){if(_(e)){if(t&&this.diagram){this.diagram.undoRedoService.addCompositeItem(new u.ConnectionEditUnit(this,e))}this._setSource(e);this.refresh()}return this.sourceConnector?this.sourceConnector:this._sourcePoint},_setFromOptions:function(e,t){this.options.from=e;if(t){this.options.fromX=t.x;this.options.fromY=t.y}else{this.options.fromX=null;this.options.fromY=null}},sourceDefiner:function(e){if(e){if(e instanceof u.PathDefiner){e.left=null;this._sourceDefiner=e;this.source(e.point)}else{throw"The sourceDefiner needs to be a PathDefiner."}}else{if(!this._sourceDefiner){this._sourceDefiner=new u.PathDefiner(this.sourcePoint(),null,null)}return this._sourceDefiner}},targetPoint:function(){return this._resolvedTargetConnector?this._resolvedTargetConnector.position():this._targetPoint},_setTarget:function(e){var t=e instanceof E;var i=this.options.toConnector||x;var n;if(t&&!e.getConnector(i)){return}if(e!==l){this.to=e}this._removeFromTargetConnector();if(e===null){if(this.targetConnector){this._targetPoint=(this._resolvedTargetConnector||this.targetConnector).position();this._clearTargetConnector();this._setToOptions(null,this._targetPoint)}}else if(e instanceof A){n=e.shape.dataItem;if(n){this._setToOptions(n.id)}this.targetConnector=e;this.targetConnector.connections.push(this)}else if(e instanceof g){this._setToOptions(null,e);this._targetPoint=e;if(this.targetConnector){this._clearTargetConnector()}}else if(t){n=e.dataItem;if(n){this._setToOptions(n.id)}this.targetConnector=e.getConnector(i);this.targetConnector.connections.push(this)}},target:function(e,t){if(_(e)){if(t&&this.diagram){this.diagram.undoRedoService.addCompositeItem(new u.ConnectionEditUnit(this,l,e))}this._setTarget(e);this.refresh()}return this.targetConnector?this.targetConnector:this._targetPoint},_setToOptions:function(e,t){this.options.to=e;if(t){this.options.toX=t.x;this.options.toY=t.y}else{this.options.toX=null;this.options.toY=null}},targetDefiner:function(e){if(e){if(e instanceof u.PathDefiner){e.right=null;this._targetDefiner=e;this.target(e.point)}else{throw"The sourceDefiner needs to be a PathDefiner."}}else{if(!this._targetDefiner){this._targetDefiner=new u.PathDefiner(this.targetPoint(),null,null)}return this._targetDefiner}},_updateConnectors:function(){this._updateConnector(this.source(),"source");this._updateConnector(this.target(),"target")},_updateConnector:function(t,i){var n=this;var r=n.diagram;if(t instanceof A&&!r.getShapeById(t.shape.id)){var a=t.shape.dataItem;var o=t.options.name;var e=function(){var e=r._dataMap[a.id];t=e.getConnector(o);n[i](t,false);n.updateModel()};if(r._dataMap[a.id]){e()}else{var s=r._inactiveShapeItems.getByUid(a.uid);if(s){r._deferredConnectionUpdates.push(s.onActivate(e))}}}else{n[i](t,false)}},content:function(e){var t=this._content(e);if(o(e)){this._alignContent()}return t},_createContentVisual:function(e){var t;if(a(e.visual)){t=e.visual.call(this,e)}else if(e.text){t=new K(e)}if(t){this._contentVisual=t;t._includeInBBox=false;this.visual.append(t)}return t},_updateContentVisual:function(e){if(a(e.visual)){this.visual.remove(this._contentVisual);this._createContentVisual(e)}else{this._contentVisual.redraw(e)}},_alignContent:function(){if(this._contentVisual){var e=Qe;var t=this.allPoints();var i=k.floor(t.length/2);var n=i-1;while(n>0&&t[n].equals(t[i])){n--;i++}var r=t[i];var a=t[n];var o=this._contentVisual._measure();var s=o.width;var l=o.height;var d=t.length%2===0;var u=a.distanceTo(r);if(d&&t.length>2&&u>0&&(a.y===r.y&&u<s||a.x===r.x&&u<l)){d=false;e=0}var c;if(d){var f=m.util.deg(k.atan2(r.y-a.y,r.x-a.x));c=new g((r.x-a.x)/2+a.x,(r.y-a.y)/2+a.y);if(k.abs(f)===90){c.x+=e;c.y-=l/2}else if(f%180===0){c.x-=s/2;c.y-=l+e}else if(f<-90||0<f&&f<90){c.y-=l}else if(f<0||f>90){c.x-=s;c.y-=l}}else{var h=k.floor(t.length/2);c=t[h].clone();a=t[h-1];r=t[h+1];var p=a.x<=c.x&&r.x<=c.x?e:-o.width-e;var v=a.y<=c.y&&r.y<=c.y?e:-o.height-e;c.x+=p;c.y+=v}this._contentVisual.position(c)}},select:function(e){var t=this.diagram,i,n;if(this._canSelect()){if(this.isSelected!==e){this.isSelected=e;i=[];n=[];if(this.isSelected){this.adorner=new X(this,this.options.selection);t._adorn(this.adorner,true);t._selectedItems.push(this);i.push(this)}else{if(this.adorner){t._adorn(this.adorner,false);p.remove(t._selectedItems,this);this.adorner=l;n.push(this)}}if(this.adorner){this.adorner.refresh()}if(!t._internalSelection){t._selectionChanged(i,n)}return true}}},bounds:function(e){if(e&&!w(e)){this._bounds=e}else{return this._bounds}},type:function(e){var t=this.options;if(e){if(e!==t.type){t.type=e;this._initRouter();this.refresh()}}else{return t.type}},_initRouter:function(){var e=(this.options.type||"").toLowerCase();if(e==ue){this._router=new le(this)}else{this._router=new se(this)}},points:function(e){if(e){this.definers=[];for(var t=0;t<e.length;t++){var i=e[t];if(i instanceof u.Point){this.definers.push(new u.PathDefiner(i))}else if(i.hasOwnProperty("x")&&i.hasOwnProperty("y")){this.definers.push(new u.PathDefiner(new g(i.x,i.y)))}else{throw"A Connection point needs to be a Point or an object with x and y properties."}}}else{var n=[];if(_(this.definers)){for(var r=0;r<this.definers.length;r++){n.push(this.definers[r].point)}}return n}},allPoints:function(){var e=[this.sourcePoint()];if(this.definers){for(var t=0;t<this.definers.length;t++){e.push(this.definers[t].point)}}e.push(this.targetPoint());return e},refresh:function(){this._resolveConnectors();this._refreshPath();this._alignContent();if(this.adorner){this.adorner.refresh()}},_resolveConnectors:function(){var e=this,t,i,n,r,a=e.source(),o=e.target();if(a instanceof g){t=a}else if(a instanceof A){if(T(a)){n=a.shape.connectors}else{n=[a]}}if(o instanceof g){i=o}else if(o instanceof A){if(T(o)){r=o.shape.connectors}else{r=[o]}}if(t){if(r){e._resolvedTargetConnector=Je(t,r)}}else if(n){if(i){e._resolvedSourceConnector=Je(i,n)}else if(r){this._resolveAutoConnectors(n,r)}}},_resolveAutoConnectors:function(e,t){var i=ye;var n=ye;var r,a;var o,s;var l,d;var u,c;var f,h;var p;for(f=0;f<e.length;f++){u=e[f];if(!T(u)){o=u.position();for(h=0;h<t.length;h++){c=t[h];if(!T(c)){s=c.position();p=k.round(o.distanceTo(s));if(p<i&&this.diagram&&this._testRoutePoints(o,s,u,c)){i=p;r=u;a=c}if(p<n){l=u;d=c;n=p}}}}}if(r){l=r;d=a}this._resolvedSourceConnector=l;this._resolvedTargetConnector=d},_testRoutePoints:function(e,t,i,n){var r=this._router;var a=true;if(r instanceof le){var o=r.routePoints(e,t,i,n),s,l,d,u;u=this._getRouteExclude(e,t,i.shape,n.shape);o.unshift(e);o.push(t);for(var c=1;c<o.length;c++){s=o[c-1];l=o[c];d=new h(k.min(s.x,l.x),k.min(s.y,l.y),k.abs(s.x-l.x),k.abs(s.y-l.y));if(d.width>0){d.x++;d.width-=2}if(d.height>0){d.y++;d.height-=2}if(!d.isEmpty()&&this.diagram._shapesQuadTree.hitTestRect(d,u)){a=false;break}}}return a},_getRouteExclude:function(e,t,i,n){var r=[];if(this._isPointInsideShape(e,i)){r.push(i)}if(this._isPointInsideShape(t,n)){r.push(n)}return r},_isPointInsideShape:function(e,t){var i=t.bounds(),n,r=t.rotate().angle,a,o,s=i.x,l=i.y;n=e.clone().rotate(i.center(),r);a=n.x;o=n.y;return a>s&&a<s+i.width&&o>l&&o<l+i.height},redraw:function(e){if(e){this.options=f({},this.options,e);var t=this.options.points;if(o(t)&&t.length>0){this.points(t);this._refreshPath()}if(e&&e.content||e.text){this.content(e.content)}this.path.redraw({fill:e.fill,stroke:e.stroke,startCap:e.startCap,endCap:e.endCap})}},clone:function(){var e=this.serialize();if(this.diagram&&this.diagram._isEditable&&o(this.dataItem)){e.options.dataItem=F(this.dataItem)}return new I(this.from,this.to,e.options)},serialize:function(){var e=this.from.toJSON?this.from.toJSON:this.from.toString(),t=this.to.toJSON?this.to.toJSON:this.to.toString();var i=f({},{options:this.options,from:e,to:t});if(o(this.dataItem)){i.dataItem=this.dataItem.toString()}i.options.points=this.points();return i},_hitTest:function(e){if(this.visible()){var t=new g(e.x,e.y),i=this.sourcePoint(),n=this.targetPoint();if(e.isEmpty&&!e.isEmpty()&&e.contains(i)&&e.contains(n)){return this}if(this._router.hitTest(t)){return this}}},_hover:function(e){var t=(this.options.stroke||{}).color;if(e&&_(this.options.hover.stroke.color)){t=this.options.hover.stroke.color}this.path.redraw({stroke:{color:t}})},_refreshPath:function(){if(!o(this.path)){return}this._drawPath();this.bounds(this._router.getBounds())},_drawPath:function(){if(this._router){this._router.route()}var e=this.sourcePoint();var t=this.targetPoint();var i=this.points();this.path.redraw({points:[e].concat(i,[t])})},_clearSourceConnector:function(){this.sourceConnector=l;this._resolvedSourceConnector=l},_clearTargetConnector:function(){this.targetConnector=l;this._resolvedTargetConnector=l},_removeFromSourceConnector:function(){if(this.sourceConnector){p.remove(this.sourceConnector.connections,this)}},_removeFromTargetConnector:function(){if(this.targetConnector){p.remove(this.targetConnector.connections,this)}},toJSON:function(){var e=this;var t,i,n;if(e.from&&e.from.toJSON){t=e.from.toJSON()}else{n=e._sourcePoint;t={x:n.x,y:n.y}}if(e.to&&e.to.toJSON){i=e.to.toJSON()}else{n=e._targetPoint;i={x:n.x,y:n.y}}return{from:t,to:i}}});var tt=n.extend({init:function(e,t){var i=this;kendo.destroy(e);n.fn.init.call(i,e,t);i._initTheme();i._initElements();i._extendLayoutOptions(i.options);i._initDefaults(t);i._interactionDefaults();i._initCanvas();i.mainLayer=new V({id:"main-layer"});i.canvas.append(i.mainLayer);i._shapesQuadTree=new ut(i);i._pan=new g;i._adorners=[];i.adornerLayer=new V({id:"adorner-layer"});i.canvas.append(i.adornerLayer);i._createHandlers();i._initialize();i._resizingAdorner=new te(i,{editable:i.options.editable});i._connectorsAdorner=new ie(i);i._adorn(i._resizingAdorner,true);i._adorn(i._connectorsAdorner,true);i.selector=new ee(i);i._clipboard=[];i.pauseMouseHandlers=false;i._fetchFreshData();i._createGlobalToolBar();i._createOptionElements();i.zoom(i.options.zoom);i.canvas.draw()},options:{name:"Diagram",theme:"default",layout:"",zoomRate:.1,zoom:1,zoomMin:0,zoomMax:2,dataSource:{},draggable:true,template:"",autoBind:true,editable:{rotate:{},resize:{},text:true,tools:[],drag:{snap:{size:10,angle:10}},remove:true},pannable:{},selectable:{key:"none"},tooltip:{enabled:true,format:"{0}"},copy:{enabled:true,offsetX:20,offsetY:20},shapeDefaults:u.shapeDefaults({undoable:true}),connectionDefaults:{editable:{tools:[]},type:ue},shapes:[],connections:[]},events:[Te,C,Se,xe,Ce,ce,y,t,ve,me,"toolBarClick","save","cancel","edit","remove","add","dataBound",pe,fe,he],items:function(){return r()},_createGlobalToolBar:function(){var e=this.options.editable;if(e){var t=e.tools;if(this._isEditable&&t!==false&&(!t||t.length===0)){t=["createShape","undo","redo","rotateClockwise","rotateAnticlockwise"]}if(t&&t.length){this.toolBar=new rt(this,{tools:t||{},click:c(this._toolBarClick,this),modal:false});this.toolBar.element.css({textAlign:"left"});this.element.prepend(this.toolBar.element);this._resize()}}},createShape:function(){if(this.editor&&this.editor.end()||!this.editor){var e=this.dataSource;var t=e.view()||[];var i=t.length;var n=P(e,{});var r=this._createShape(n,{});if(!this.trigger("add",{shape:r})){e.insert(i,n);var a=this._inactiveShapeItems.getByUid(n.uid);a.element=r;this.edit(r)}}},_createShape:function(e,t){t=f({},this.options.shapeDefaults,t);t.dataItem=e;var i=new E(t,this);return i},createConnection:function(){if(this.editor&&this.editor.end()||!this.editor){var e=this.connectionsDataSource;var t=e.view()||[];var i=t.length;var n=P(e,{});var r=this._createConnection(n);if(!this.trigger("add",{connection:r})){this._connectionsDataMap[n.uid]=r;e.insert(i,n);this.addConnection(r,false);this.edit(r)}}},_createConnection:function(e,t,i){var n=f({},this.options.connectionDefaults);n.dataItem=e;var r=new I(t||new g,i||new g,n);return r},editModel:function(e,t){this.cancelEdit();var i,n;var r=this.options.editable;if(t=="shape"){i=r.shapeEditors;n=r.shapeTemplate}else if(t=="connection"){var a=c(st,this);i=f({},{from:a,to:a},r.connectionEditors);n=r.connectionTemplate}else{return}this.editor=new ot(this.element,{update:c(this._update,this),cancel:c(this._cancel,this),model:e,type:t,target:this,editors:i,template:n});this.trigger("edit",this._editArgs())},edit:function(e){if(e.dataItem){var t=e instanceof E?"shape":"connection";this.editModel(e.dataItem,t)}},cancelEdit:function(){if(this.editor){this._getEditDataSource().cancelChanges(this.editor.model);this._destroyEditor()}},saveEdit:function(){if(this.editor&&this.editor.end()&&!this.trigger("save",this._editArgs())){this._getEditDataSource().sync()}},_update:function(){if(this.editor&&this.editor.end()&&!this.trigger("save",this._editArgs())){this._getEditDataSource().sync();this._destroyEditor()}},_cancel:function(){if(this.editor&&!this.trigger("cancel",this._editArgs())){var e=this.editor.model;this._getEditDataSource().cancelChanges(e);var t=this._connectionsDataMap[e.uid]||this._dataMap[e.id];if(t){t._setOptionsFromModel(e)}this._destroyEditor()}},_getEditDataSource:function(){return this.editor.options.type==="shape"?this.dataSource:this.connectionsDataSource},_editArgs:function(){var e={container:this.editor.wrapper};e[this.editor.options.type]=this.editor.model;return e},_destroyEditor:function(){if(this.editor){this.editor.close();this.editor=null}},_initElements:function(){this.wrapper=this.element.empty().css("position","relative").attr("tabindex",0).addClass("k-widget k-widget-2021 k-diagram");this.scrollable=r("<div />").appendTo(this.element)},_initDefaults:function(e){var t=this.options;var i=t.editable;var n=t.shapeDefaults;var r=t.connectionDefaults;var a=(e||{}).shapeDefaults;if(i===false){n.editable=false;r.editable=false}else{ft(i,n.editable,["drag","remove","connect"]);ft(i,r.editable,["drag","remove"])}if(a&&a.connectors){t.shapeDefaults.connectors=a.connectors}},_interactionDefaults:function(){var e=this.options;var t=e.selectable;var i=e.pannable;var n=kendo.support.mobileOS;if(t&&!o(t.multiple)){e.selectable=f({multiple:n?false:true},e.selectable)}if(i&&!o(i.key)){e.pannable=f({key:n?"none":"ctrl"},e.pannable)}},_initCanvas:function(){var e=r("<div class='k-layer'></div>").appendTo(this.scrollable)[0];var t=this.viewport();this.canvas=new O(e,{width:t.width||Ae,height:t.height||Ee})},_createHandlers:function(){var e=this;var t=e.element;t.on(qe,c(e._wheel,e)).on("keydown"+i,c(e._keydown,e));e._userEvents=new kendo.UserEvents(this.scrollable,{multiTouch:true,fastTap:true,tap:c(e._tap,e),start:c(e._dragStart,e),move:c(e._drag,e),end:c(e._dragEnd,e),gesturestart:c(e._gestureStart,e),gesturechange:c(e._gestureChange,e),gestureend:c(e._gestureEnd,e),doubleTap:c(e._doubleTap,e),supportDoubleTap:true});e.toolService=new J(e);this.scrollable.on("mouseover"+i,c(e._mouseover,e)).on("mouseout"+i,c(e._mouseout,e)).on("mousemove"+i,c(e._mouseMove,e)).on("mousedown"+i,c(e._mouseDown,e)).on("mouseup"+i,c(e._mouseUp,e));this._syncHandler=c(e._syncChanges,e);e._resizeHandler=c(e.resize,e,false);kendo.onResize(e._resizeHandler);this.bind(C,c(e._destroyToolBar,e));this.bind(Se,c(e._destroyToolBar,e))},_dragStart:function(e){this._pauseMouseHandlers=true;var t=this._eventPositions(e,true);var i=e.event;if(this.toolService.start(t,this._meta(i))){this._destroyToolBar();i.preventDefault()}},_drag:function(e){var t=this._eventPositions(e);var i=e.event;if(this.toolService.move(t,this._meta(i))){i.preventDefault()}},_dragEnd:function(e){this._pauseMouseHandlers=false;var t=this._eventPositions(e);var i=e.event;if(this.toolService.end(t,this._meta(i))){this._createToolBar();i.preventDefault()}},_mouseMove:function(e){if(!this._pauseMouseHandlers){var t=this._eventPositions(e);this.toolService._updateHoveredItem(t);this.toolService._updateCursor(t)}},_mouseDown:function(){this._pauseMouseHandlers=true},_mouseUp:function(){this._pauseMouseHandlers=false},_tap:function(e){var t=this.toolService;var i=this.options.selectable;var n=this._eventPositions(e);var r=this.focus();t._updateHoveredItem(n);if(t.hoveredItem){var a=t.hoveredItem;this.trigger("click",{item:a,point:n,meta:this._meta(e.event)});if(i&&a.options.selectable!==false){var o=i.multiple!==false;var s=kendo.support.mobileOS||this._meta(e.event).ctrlKey;if(a.isSelected){if(s){this._destroyToolBar();a.select(false)}else{this._createToolBar(r)}}else{this._destroyToolBar();this.select(a,{addToSelection:o&&s});this._createToolBar(r)}}}else if(i){this._destroyToolBar();this.deselect()}},_keydown:function(e){if(this.toolService.keyDown(e.keyCode,this._meta(e))){e.preventDefault()}},_wheel:function(e){var t=Ze(e),i=this._eventPositions(e),n=f(this._meta(e),{delta:t});if(this.toolService.wheel(i,n)){e.preventDefault()}},_meta:function(e){return{ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey,type:e.type}},_eventPositions:function(e,t){var i;if(e.touch){var n=t?"startLocation":"location";i=new g(e.x[n],e.y[n])}else{var r=e.originalEvent;i=new g(r.pageX,r.pageY)}return this.documentToModel(i)},_gestureStart:function(e){this._destroyToolBar();this.scroller.disable();var t=this.documentToModel(new g(e.center.x,e.center.y));var i={point:t,zoom:this.zoom()};if(this.trigger(C,i)){return}this._gesture=e;this._initialCenter=t},_gestureChange:function(e){var t=this._gesture;var i=this._initialCenter;var n=this.documentToView(new g(e.center.x,e.center.y));var r=e.distance/t.distance;var a=this._zoom;var o=false;if(k.abs(r-1)>=$e){this._zoom=a=this._getValidZoom(a*r);this.options.zoom=a;this._gesture=e;o=true}var s=i.times(a);var l=n.minus(s);if(o||this._pan.distanceTo(l)>=Ke){this._panTransform(l);this._updateAdorners()}e.preventDefault()},_doubleTap:function(e){var t=this;var i=this._eventPositions(e);var n=t.options;var r=n.zoomRate;var a=t.zoom()+r;var o=this._meta(e);var s={point:i,meta:o,zoom:a};if(t.trigger(C,s)){return}a=kendo.dataviz.round(Math.max(n.zoomMin,Math.min(n.zoomMax,a)),2);s.zoom=a;t.zoom(a,s);t.trigger(Te,s)},_gestureEnd:function(){if(this.options.pannable!==false){this.scroller.enable()}this.trigger(Te,{point:this._initialCenter,zoom:this.zoom()})},_resize:function(){var e=this.viewport();if(this.canvas){this.canvas.size(e)}if(this.scrollable&&this.toolBar){this.scrollable.height(e.height)}},_mouseover:function(e){var t=e.target._kendoNode;if(t&&t.srcElement._hover){t.srcElement._hover(true,t.srcElement)}},_mouseout:function(e){var t=e.target._kendoNode;if(t&&t.srcElement._hover){t.srcElement._hover(false,t.srcElement)}},_initTheme:function(){var e=this;var t=((e.options||{}).theme||"").toLowerCase();var i=d.ui.themes||{};var n;if(d.SASS_THEMES.indexOf(t)!=-1){n=d.autoTheme().diagram}else{n=(i[t]||{}).diagram}e.options=f({},n,e.options);if(e.options.editable===true){f(e.options,{editable:(n||{}).editable})}},_createOptionElements:function(){var e=this.options;var t=e.shapes.length;if(t){this._createShapes()}if(e.connections.length){this._createConnections()}if(t&&e.layout){this.layout(e.layout)}},_createShapes:function(){var e=this,t=e.options,i=t.shapes,n,r;for(r=0;r<i.length;r++){n=i[r];e.addShape(n)}},_createConnections:function(){var e=this,t=e.options,i=t.connectionDefaults,n=t.connections,r,a,o,s;for(s=0;s<n.length;s++){r=n[s];a=e._findConnectionTarget(r.from);o=e._findConnectionTarget(r.to);e.connect(a,o,f({},i,r))}},_findConnectionTarget:function(e){e=e||{};var t=this;var i=w(e)?e:e.shapeId||e.id;var n;if(i){n=t.getShapeById(i);if(e.connector){n=n.getConnector(e.connector)}}else{n=new g(e.x||0,e.y||0)}return n},destroy:function(){var e=this;n.fn.destroy.call(e);if(this._userEvents){this._userEvents.destroy()}kendo.unbindResize(e._resizeHandler);e.clear();e.element.off(i);e.scroller.wrapper.off(i);e.canvas.destroy(true);e.canvas=l;e._destroyEditor();e.destroyScroller();e._destroyGlobalToolBar();e._destroyToolBar()},destroyScroller:function(){var e=this.scroller;if(!e){return}e.destroy();e.element.remove();this.scroller=null},save:function(){var e={shapes:[],connections:[]};var t,i,n;for(t=0;t<this.shapes.length;t++){n=this.shapes[t];if(n.options.serializable){e.shapes.push(n.options)}}for(t=0;t<this.connections.length;t++){i=this.connections[t];e.connections.push(f({},i.options,i.toJSON()))}return e},focus:function(){if(!this.element.is(kendo._activeElement())){var e=this.element,t=e[0],i=[],n=[],r=document.documentElement,a;do{t=t.parentNode;if(t.scrollHeight>t.clientHeight){i.push(t);n.push(t.scrollTop)}}while(t!=r);e.focus();for(a=0;a<i.length;a++){i[a].scrollTop=n[a]}return true}},load:function(e){this.clear();this.setOptions(e);this._createShapes();this._createConnections()},setOptions:function(e){f(this.options,e)},clear:function(){var e=this;e.select(false);e.mainLayer.clear();e._shapesQuadTree.clear();e._initialize()},connect:function(e,t,i){var n;if(this.connectionsDataSource&&this._isEditable){var r=this.connectionsDataSource.add({});n=this._connectionsDataMap[r.uid];n.source(e);n.target(t);n.redraw(i);n.updateModel()}else{n=new I(e,t,f({},this.options.connectionDefaults,i));this.addConnection(n)}return n},connected:function(e,t){for(var i=0;i<this.connections.length;i++){var n=this.connections[i];if(n.from==e&&n.to==t){return true}}return false},addConnection:function(e,t){if(t!==false){this.undoRedoService.add(new u.AddConnectionUnit(e,this),false)}e.diagram=this;e._setOptionsFromModel();e.refresh();this.mainLayer.append(e.visual);this.connections.push(e);this.trigger(y,{added:[e],removed:[]});return e},_addConnection:function(e,t){var i=this.connectionsDataSource;var n;if(i&&this._isEditable){n=P(i,F(e.dataItem));e.dataItem=n;e.updateModel();if(!this.trigger("add",{connection:e})){this._connectionsDataMap[n.uid]=e;i.add(n);this.addConnection(e,t);e._updateConnectors();return e}}else if(!this.trigger("add",{connection:e})){this.addConnection(e,t);e._updateConnectors();return e}},addShape:function(e,t){var i,n=this.options.shapeDefaults;if(e instanceof E){i=e}else if(!(e instanceof kendo.Class)){n=f({},n,e||{});i=new E(n,this)}else{return}if(t!==false){this.undoRedoService.add(new u.AddShapeUnit(i,this),false)}this.shapes.push(i);if(i.diagram!==this){this._shapesQuadTree.insert(i);i.diagram=this}this.mainLayer.append(i.visual);this.trigger(y,{added:[i],removed:[]});return i},_addShape:function(e,t){var i=this;var n=i.dataSource;var r;if(n&&this._isEditable){r=P(n,F(e.dataItem));e.dataItem=r;e.updateModel();if(!this.trigger("add",{shape:e})){this.dataSource.add(r);var a=this._inactiveShapeItems.getByUid(r.uid);a.element=e;a.undoable=t;return e}}else if(!this.trigger("add",{shape:e})){return this.addShape(e,t)}},remove:function(e,t){e=b(e)?e.slice(0):[e];var i=ct(e);var n=i.shapes;var r=i.connections;var a;if(!o(t)){t=true}if(t){this.undoRedoService.begin()}this._suspendModelRefresh();for(a=n.length-1;a>=0;a--){this._removeItem(n[a],t,r)}for(a=r.length-1;a>=0;a--){this._removeItem(r[a],t)}this._resumeModelRefresh();if(t){this.undoRedoService.commit(false)}this.trigger(y,{added:[],removed:e})},_removeShapeDataItem:function(e){if(this._isEditable){this.dataSource.remove(e.dataItem);delete this._dataMap[e.dataItem.id]}},_removeConnectionDataItem:function(e){if(this._isEditable){this.connectionsDataSource.remove(e.dataItem);delete this._connectionsDataMap[e.dataItem.uid]}},_triggerRemove:function(e){var t=[];var i,n,r;for(var a=0;a<e.length;a++){i=e[a];r=i.options.editable;if(i instanceof E){n={shape:i}}else{n={connection:i}}if(r&&r.remove!==false&&!this.trigger("remove",n)){t.push(i)}}return t},undo:function(){this.undoRedoService.undo()},redo:function(){this.undoRedoService.redo()},select:function(e,t){if(_(e)){t=f({addToSelection:false},t);var i=t.addToSelection,n=[],r=[],a,o;if(!i){this.deselect()}this._internalSelection=true;if(e instanceof Array){n=e}else if(e instanceof D){n=[e]}for(a=0;a<n.length;a++){o=n[a];if(o.select(true)){r.push(o)}}this._selectionChanged(r,[]);this._internalSelection=false}else{return this._selectedItems}},selectAll:function(){this.select(this.shapes.concat(this.connections))},selectArea:function(e){var t,i,n;this._internalSelection=true;var r=[];if(e instanceof h){i=this.shapes.concat(this.connections);for(t=0;t<i.length;t++){n=i[t];if((!e||n._hitTest(e))&&n.options.enable){if(n.select(true)){r.push(n)}}}}this._selectionChanged(r,[]);this._internalSelection=false},deselect:function(e){this._internalSelection=true;var t=[],i=[],n,r;if(e instanceof Array){i=e}else if(e instanceof D){i.push(e)}else if(!_(e)){i=this._selectedItems.slice(0)}for(r=0;r<i.length;r++){n=i[r];if(n.select(false)){t.push(n)}}this._selectionChanged([],t);this._internalSelection=false},toFront:function(e,t){if(!e){e=this._selectedItems.slice()}var i=this._getDiagramItems(e),n;if(!o(t)||t){n=et(this.mainLayer,i.visuals);var r=new oe(this,e,n);this.undoRedoService.add(r)}else{this.mainLayer.toFront(i.visuals);this._fixOrdering(i,true)}},toBack:function(e,t){if(!e){e=this._selectedItems.slice()}var i=this._getDiagramItems(e),n;if(!o(t)||t){n=et(this.mainLayer,i.visuals);var r=new ae(this,e,n);this.undoRedoService.add(r)}else{this.mainLayer.toBack(i.visuals);this._fixOrdering(i,false)}},bringIntoView:function(e,t){var i=this.viewport();var n=new u.RectAlign(i);var r,a,o,s;if(i.width===0||i.height===0){return}t=f({animate:false,align:"center middle"},t);if(t.align=="none"){t.align="center middle"}if(e instanceof D){a=e.bounds(Oe)}else if(b(e)){a=this.boundingBox(e)}else if(e instanceof h){a=e.clone()}o=a.clone();a.zoom(this._zoom);if(a.width>i.width||a.height>i.height){this._zoom=this._getValidZoom(k.min(i.width/o.width,i.height/o.height));a=o.clone().zoom(this._zoom)}this._zoomMainLayer();r=a.clone();n.align(a,t.align);s=a.topLeft().minus(r.topLeft());this.pan(s.times(-1),t.animate)},alignShapes:function(e){if(v(e)){e="Left"}var t=this.select(),i,n,r;if(t.length===0){return}switch(e.toLowerCase()){case"left":case"top":i=Le;break;case"right":case"bottom":i=He;break}for(r=0;r<t.length;r++){n=t[r];if(n instanceof E){switch(e.toLowerCase()){case"left":i=k.min(i,n.options.x);break;case"top":i=k.min(i,n.options.y);break;case"right":i=k.max(i,n.options.x);break;case"bottom":i=k.max(i,n.options.y);break}}}var a=[];var o=[];for(r=0;r<t.length;r++){n=t[r];if(n instanceof E){o.push(n);a.push(n.bounds());switch(e.toLowerCase()){case"left":case"right":n.position(new g(i,n.options.y));break;case"top":case"bottom":n.position(new g(n.options.x,i));break}}}var s=new u.TransformUnit(o,a);this.undoRedoService.add(s,false)},zoom:function(e,t){if(e){var i=t?t.point:new u.Point(0,0);e=this._zoom=this._getValidZoom(e);if(!v(i)){i=new u.Point(k.round(i.x),k.round(i.y));var n=i.times(e);var r=this.modelToView(i);var a=r.minus(n);this._storePan(new u.Point(k.round(a.x),k.round(a.y)))}if(t){t.zoom=e}this._panTransform();this.canvas.surface.hideTooltip();this._updateAdorners()}return this._zoom},_getPan:function(e){var t=this.canvas;if(!t.translate){e=e.plus(this._pan)}return e},pan:function(e,t){if(e instanceof g){var i=this;var n=i.scroller;e=i._getPan(e);e=e.times(-1);if(t){n.animatedScrollTo(e.x,e.y,function(){i._updateAdorners()})}else{n.scrollTo(e.x,e.y);i._updateAdorners()}}else{return this._pan.times(-1)}},viewport:function(){var e=this.element;var t=e.width();var i=e.height();if(this.toolBar){i-=L(this.toolBar.element)}return new h(0,0,t,i)},copy:function(){if(this.options.copy.enabled){this._clipboard=[];this._copyOffset=1;for(var e=0;e<this._selectedItems.length;e++){var t=this._selectedItems[e];this._clipboard.push(t)}}},cut:function(){if(this.options.copy.enabled){this._clipboard=[];this._copyOffset=0;for(var e=0;e<this._selectedItems.length;e++){var t=this._selectedItems[e];this._clipboard.push(t)}this.remove(this._clipboard,true)}},paste:function(){if(this._clipboard.length>0){var e,t,i;var n={};var r=ct(this._clipboard);var a=r.connections;var o=r.shapes;var s={x:this._copyOffset*this.options.copy.offsetX,y:this._copyOffset*this.options.copy.offsetY};this.deselect();for(i=0;i<o.length;i++){e=o[i];t=e.clone();n[e.id]=t;t.position(new g(e.options.x+s.x,e.options.y+s.y));t.diagram=this;t=this._addShape(t);if(t){t.select()}}for(i=0;i<a.length;i++){e=a[i];t=this._addConnection(e.clone());if(t){this._updateCopiedConnection(t,e,"source",n,s);this._updateCopiedConnection(t,e,"target",n,s);t.select(true);t.updateModel()}}this._syncChanges();this._copyOffset+=1}},_updateCopiedConnection:function(t,e,i,n,r){var a,o,s;var l=e[i]();var d=this;if(l instanceof A&&n[l.shape.id]){s=n[l.shape.id];if(d.getShapeById(s.id)){t[i](s.getConnector(l.options.name))}else{o=d._inactiveShapeItems.getByUid(s.dataItem.uid);if(o){a=function(e){s=d._dataMap[e.id];t[i](s.getConnector(l.options.name));t.updateModel()};d._deferredConnectionUpdates.push(o.onActivate(a))}}}else{t[i](new g(e[i+"Point"]().x+r.x,e[i+"Point"]().y+r.y))}},boundingBox:function(e,t){var i=h.empty(),n,r=_(e)?this._getDiagramItems(e):{shapes:this.shapes};if(r.shapes.length>0){var a=r.shapes[0];i=a.bounds(S);for(var o=1;o<r.shapes.length;o++){a=r.shapes[o];n=a.bounds(S);if(t===true){n.x-=a._rotationOffset.x;n.y-=a._rotationOffset.y}i=i.union(n)}}return i},_containerOffset:function(){var e=this.element.offset();if(this.toolBar){e.top+=L(this.toolBar.element)}return e},documentToView:function(e){var t=this._containerOffset();return new g(e.x-t.left,e.y-t.top)},viewToDocument:function(e){var t=this._containerOffset();return new g(e.x+t.left,e.y+t.top)},viewToModel:function(e){return this._transformWithMatrix(e,this._matrixInvert)},modelToView:function(e){return this._transformWithMatrix(e,this._matrix)},modelToLayer:function(e){return this._transformWithMatrix(e,this._layerMatrix)},layerToModel:function(e){return this._transformWithMatrix(e,this._layerMatrixInvert)},documentToModel:function(e){var t=this.documentToView(e);if(!this.canvas.translate){t.x=t.x+this.scroller.scrollLeft;t.y=t.y+this.scroller.scrollTop}return this.viewToModel(t)},modelToDocument:function(e){return this.viewToDocument(this.modelToView(e))},_transformWithMatrix:function(e,t){var i=e;if(e instanceof g){if(t){i=t.apply(e)}}else{var n=this._transformWithMatrix(e.topLeft(),t),r=this._transformWithMatrix(e.bottomRight(),t);i=h.fromPoints(n,r)}return i},setDataSource:function(e){this.options.dataSource=e;this._dataSource();if(this.options.autoBind){this.dataSource.fetch()}},setConnectionsDataSource:function(e){this.options.connectionsDataSource=e;this._connectionDataSource();if(this.options.autoBind){this.connectionsDataSource.fetch()}},layout:function(e){this._layouting=true;var t;if(v(e)){e=this.options.layout}if(v(e)||v(e.type)){t="Tree"}else{t=e.type}var i;switch(t.toLowerCase()){case"tree":i=new u.TreeLayout(this);break;case"layered":i=new u.LayeredLayout(this);break;case"forcedirected":case"force":case"spring":case"springembedder":i=new u.SpringLayout(this);break;default:throw"Layout algorithm '"+t+"' is not supported."}var n=new u.LayoutState(this);var r=i.layout(e);if(r){var a=new u.LayoutUndoUnit(n,r,e?e.animate:null);this.undoRedoService.add(a)}this._layouting=false;this._redrawConnections()},getShapeById:function(t){var e;e=p.first(this.shapes,function(e){return e.visual.id===t});if(e){return e}e=p.first(this.connections,function(e){return e.visual.id===t});return e},getShapeByModelId:function(t){var e;if(this._isEditable){e=this._dataMap[t]}else{e=p.first(this.shapes,function(e){return(e.dataItem||{}).id===t})}return e},getShapeByModelUid:function(t){var e;if(this._isEditable){e=p.first(this.shapes,function(e){return(e.dataItem||{}).uid===t})}else{e=this._dataMap[t]}return e},getConnectionByModelId:function(t){var e;if(this.connectionsDataSource){e=p.first(this.connections,function(e){return(e.dataItem||{}).id===t})}return e},getConnectionByModelUid:function(e){var t;if(this.connectionsDataSource){t=this._connectionsDataMap[e]}return t},_extendLayoutOptions:function(e){if(e.layout){e.layout=f({},u.LayoutBase.fn.defaultOptions||{},e.layout)}},_selectionChanged:function(e,t){if(e.length||t.length){this.trigger(xe,{selected:e,deselected:t})}},_getValidZoom:function(e){return k.min(k.max(e,this.options.zoomMin),this.options.zoomMax)},_panTransform:function(e){var t=this,i=e||t._pan;if(t.canvas.translate){t.scroller.scrollTo(i.x,i.y);t._zoomMainLayer()}else{t._storePan(i);t._transformMainLayer()}},_finishPan:function(){this.trigger(Se,{total:this._pan,delta:Number.NaN})},_storePan:function(e){this._pan=e;this._storeViewMatrix()},_zoomMainLayer:function(){var e=this._zoom;var t=new j(0,0,e,e);t.render(this.mainLayer);this._storeLayerMatrix(t);this._storeViewMatrix()},_transformMainLayer:function(){var e=this._pan,t=this._zoom;var i=new j(e.x,e.y,t,t);i.render(this.mainLayer);this._storeLayerMatrix(i);this._storeViewMatrix()},_storeLayerMatrix:function(e){this._layerMatrix=e.toMatrix();this._layerMatrixInvert=e.invert().toMatrix()},_storeViewMatrix:function(){var e=this._pan,t=this._zoom;var i=new j(e.x,e.y,t,t);this._matrix=i.toMatrix();this._matrixInvert=i.invert().toMatrix()},_toIndex:function(e,t){var i=this._getDiagramItems(e);this.mainLayer.toIndex(i.visuals,t);this._fixOrdering(i,false)},_fixOrdering:function(e,t){var i=t?this.shapes.length-1:0,n=t?this.connections.length-1:0,r,a;for(r=0;r<e.shapes.length;r++){a=e.shapes[r];p.remove(this.shapes,a);p.insert(this.shapes,a,i)}for(r=0;r<e.cons.length;r++){a=e.cons[r];p.remove(this.connections,a);p.insert(this.connections,a,n)}},_getDiagramItems:function(e){var t,i={},n=e;i.visuals=[];i.shapes=[];i.cons=[];if(!e){n=this._selectedItems.slice()}else if(!b(e)){n=[e]}for(t=0;t<n.length;t++){var r=n[t];if(r instanceof E){i.shapes.push(r);i.visuals.push(r.visual)}else if(r instanceof I){i.cons.push(r);i.visuals.push(r.visual)}}return i},_removeItem:function(e,t,i){e.select(false);if(e instanceof E){this._removeShapeDataItem(e);this._removeShape(e,t,i)}else if(e instanceof I){this._removeConnectionDataItem(e);this._removeConnection(e,t)}this.mainLayer.remove(e.visual)},_removeShape:function(e,t,i){var n,r,a,o=[],s=[];this.toolService._removeHover();if(t){this.undoRedoService.addCompositeItem(new q(e))}p.remove(this.shapes,e);this._shapesQuadTree.remove(e);for(n=0;n<e.connectors.length;n++){a=e.connectors[n];for(var l=0;l<a.connections.length;l++){r=a.connections[l];if(!i||!d.inArray(r,i)){if(r.sourceConnector==a){o.push(r)}else if(r.targetConnector==a){s.push(r)}}}}for(n=0;n<o.length;n++){o[n].source(null,t);o[n].updateModel()}for(n=0;n<s.length;n++){s[n].target(null,t);s[n].updateModel()}},_removeConnection:function(e,t){if(e.sourceConnector){p.remove(e.sourceConnector.connections,e)}if(e.targetConnector){p.remove(e.targetConnector.connections,e)}if(t){this.undoRedoService.addCompositeItem(new $(e))}p.remove(this.connections,e)},_removeDataItems:function(e,t){var i,n,r,a;e=b(e)?e:[e];while(e.length){i=e.shift();r=this._dataMap[i.uid];if(r){this._removeShapeConnections(r);this._removeItem(r,false);delete this._dataMap[i.uid];if(t&&i.hasChildren&&i.loaded()){n=i.children.data();for(a=0;a<n.length;a++){e.push(n[a])}}}}},_removeShapeConnections:function(e){var t=e.connections();var i;if(t){for(i=0;i<t.length;i++){this._removeItem(t[i],false)}}},_addDataItem:function(e,t){if(!o(e)){return}var i=this._dataMap[e.id];if(i){return i}var n=f({},this.options.shapeDefaults);n.dataItem=e;i=new E(n,this);this.addShape(i,t!==false);this._dataMap[e.id]=i;return i},_addDataItemByUid:function(e){if(!o(e)){return}var t=this._dataMap[e.uid];if(t){return t}var i=f({},this.options.shapeDefaults);i.dataItem=e;t=new E(i,this);this.addShape(t);this._dataMap[e.uid]=t;return t},_addDataItems:function(e,t){var i,n,r,a,o;for(n=0;n<e.length;n++){i=e[n];r=this._addDataItemByUid(i);a=this._addDataItemByUid(t);if(a&&!this.connected(a,r)){o=this.connect(a,r)}}},_refreshSource:function(e){var t=this,i=e.node,n=e.action,r=e.items,a=t.options,o,s;if(e.field){for(o=0;o<r.length;o++){if(this._dataMap[r[o].uid]){this._dataMap[r[o].uid].redrawVisual()}}return}if(n=="remove"){this._removeDataItems(e.items,true)}else{if((!n||n==="itemloaded")&&!this._bindingRoots){this._bindingRoots=true;s=true}if(!n&&!i){t.clear()}this._addDataItems(r,i);for(o=0;o<r.length;o++){r[o].load()}}if(a.layout&&(s||n=="remove"||n=="add")){t.layout(a.layout)}if(s){this.trigger("dataBound");this._bindingRoots=false}},_addItem:function(e){if(e instanceof E){this.addShape(e)}else if(e instanceof I){this.addConnection(e)}},_createToolBar:function(e){var t=this.toolService.diagram;if(!this.singleToolBar&&t.select().length===1){var i=t.select()[0];if(i&&i.options.editable!==false){var n=i.options.editable;var r=n.tools;if(this._isEditable&&r.length===0){if(i instanceof E){r=["edit","rotateClockwise","rotateAnticlockwise"]}else if(i instanceof I){r=["edit"]}if(n&&n.remove!==false){r.push("delete")}}if(r&&r.length){var a=20;var o;this.singleToolBar=new rt(t,{tools:r,click:c(this._toolBarClick,this),modal:true,popupZIndex:parseInt(t.element.closest(".k-window").css("zIndex"),10)+10});var s=B(this.singleToolBar._popup.element);var l=L(this.singleToolBar._popup.element);if(i instanceof E){var d=this.modelToView(i.bounds(S));o=new g(d.x,d.y).minus(new g((s-d.width)/2,l+a))}else if(i instanceof I){var u=this.modelToView(i.bounds());o=new g(u.x,u.y).minus(new g((s-u.width-20)/2,l+a))}if(o){if(!this.canvas.translate){o=o.minus(new g(this.scroller.scrollLeft,this.scroller.scrollTop))}o=this.viewToDocument(o);o=new g(k.max(o.x,0),k.max(o.y,0));this.singleToolBar.showAt(o);if(e){this.singleToolBar._popup.one("close",pt)}}else{this._destroyToolBar()}}}}},_toolBarClick:function(e){this.trigger("toolBarClick",e);this._destroyToolBar()},_normalizePointZoom:function(e){return e.times(1/this.zoom())},_initialize:function(){this.shapes=[];this._selectedItems=[];this.connections=[];this._dataMap={};this._connectionsDataMap={};this._inactiveShapeItems=new dt;this._deferredConnectionUpdates=[];this.undoRedoService=new Z({undone:this._syncHandler,redone:this._syncHandler});this.id=u.randomId()},_fetchFreshData:function(){var e=this;e._dataSource();if(e._isEditable){e._connectionDataSource()}if(e.options.autoBind){if(e._isEditable){this._loadingShapes=true;this._loadingConnections=true;e.dataSource.fetch();e.connectionsDataSource.fetch()}else{e.dataSource.fetch()}}},_dataSource:function(){if(o(this.options.connectionsDataSource)){this._isEditable=true;var e=this.options.dataSource||{};var t=b(e)?{data:e}:e;if(this.dataSource&&this._shapesRefreshHandler){this.dataSource.unbind("change",this._shapesRefreshHandler).unbind("requestStart",this._shapesRequestStartHandler).unbind("error",this._shapesErrorHandler)}else{this._shapesRefreshHandler=c(this._refreshShapes,this);this._shapesRequestStartHandler=c(this._shapesRequestStart,this);this._shapesErrorHandler=c(this._error,this)}this.dataSource=kendo.data.DataSource.create(t).bind("change",this._shapesRefreshHandler).bind("requestStart",this._shapesRequestStartHandler).bind("error",this._shapesErrorHandler)}else{this._treeDataSource();this._isEditable=false}},_connectionDataSource:function(){var e=this.options.connectionsDataSource;if(e){var t=b(e)?{data:e}:e;if(this.connectionsDataSource&&this._connectionsRefreshHandler){this.connectionsDataSource.unbind("change",this._connectionsRefreshHandler).unbind("requestStart",this._connectionsRequestStartHandler).unbind("error",this._connectionsErrorHandler)}else{this._connectionsRefreshHandler=c(this._refreshConnections,this);this._connectionsRequestStartHandler=c(this._connectionsRequestStart,this);this._connectionsErrorHandler=c(this._connectionsError,this)}this.connectionsDataSource=kendo.data.DataSource.create(t).bind("change",this._connectionsRefreshHandler).bind("requestStart",this._connectionsRequestStartHandler).bind("error",this._connectionsErrorHandler)}},_shapesRequestStart:function(e){if(e.type=="read"){this._loadingShapes=true}},_connectionsRequestStart:function(e){if(e.type=="read"){this._loadingConnections=true}},_error:function(){this._loadingShapes=false},_connectionsError:function(){this._loadingConnections=false},_refreshShapes:function(e){if(e.action==="remove"){if(this._shouldRefresh()){this._removeShapes(e.items)}}else if(e.action==="itemchange"){if(this._shouldRefresh()){this._updateShapes(e.items,e.field)}}else if(e.action==="add"){this._inactiveShapeItems.add(e.items)}else if(e.action==="sync"){this._syncShapes(e.items)}else{this.refresh()}},_shouldRefresh:function(){return!this._suspended},_suspendModelRefresh:function(){this._suspended=(this._suspended||0)+1},_resumeModelRefresh:function(){this._suspended=k.max((this._suspended||0)-1,0)},refresh:function(){this._loadingShapes=false;if(!this._loadingConnections){this._rebindShapesAndConnections()}},_rebindShapesAndConnections:function(){this.clear();this._addShapes(this.dataSource.view());if(this.connectionsDataSource){this._addConnections(this.connectionsDataSource.view(),false)}if(this.options.layout){this.layout(this.options.layout)}else{this._redrawConnections()}this.trigger("dataBound")},refreshConnections:function(){this._loadingConnections=false;if(!this._loadingShapes){this._rebindShapesAndConnections()}},_redrawConnections:function(){var e=this.connections;for(var t=0;t<e.length;t++){e[t].refresh()}},_removeShapes:function(e){var t=this._dataMap;var i,n;for(n=0;n<e.length;n++){i=e[n];if(t[i.id]){this.remove(t[i.id],false);t[i.id]=null}}},_syncShapes:function(){var n=this;var r=n._inactiveShapeItems;r.forEach(function(e){var t=e.dataItem;var i=e.element;if(!t.isNew()){if(i){i._setOptionsFromModel();n.addShape(i,e.undoable);n._dataMap[t.id]=i}else{n._addDataItem(t)}e.activate();r.remove(t)}})},_updateShapes:function(e,t){for(var i=0;i<e.length;i++){var n=e[i];var r=this._dataMap[n.id];if(r){r.updateOptionsFromModel(n,t)}}},_addShapes:function(e){for(var t=0;t<e.length;t++){this._addDataItem(e[t],false)}},_refreshConnections:function(e){if(e.action==="remove"){if(this._shouldRefresh()){this._removeConnections(e.items)}}else if(e.action==="add"){this._addConnections(e.items)}else if(e.action==="sync"){}else if(e.action==="itemchange"){if(this._shouldRefresh()){this._updateConnections(e.items)}}else{this.refreshConnections()}},_removeConnections:function(e){for(var t=0;t<e.length;t++){this.remove(this._connectionsDataMap[e[t].uid],false);this._connectionsDataMap[e[t].uid]=null}},_updateConnections:function(e){for(var t=0;t<e.length;t++){var i=e[t];var n=this._connectionsDataMap[i.uid];n.updateOptionsFromModel(i)}},_addConnections:function(e,t){var i=e.length;for(var n=0;n<i;n++){var r=e[n];this._addConnectionDataItem(r,t)}},_addConnectionDataItem:function(e,t){if(!this._connectionsDataMap[e.uid]){var i=this._validateConnector(e.from);if(!o(i)||i===null){i=new g(e.fromX,e.fromY)}var n=this._validateConnector(e.to);if(!o(n)||n===null){n=new g(e.toX,e.toY)}if(o(i)&&o(n)){var r=f({},this.options.connectionDefaults);r.dataItem=e;var a=new I(i,n,r);this._connectionsDataMap[e.uid]=a;this.addConnection(a,t)}}},_validateConnector:function(e){var t;if(o(e)&&e!==null){t=this._dataMap[e]}return t},_treeDataSource:function(){var e=this,t=e.options,i=t.dataSource;i=b(i)?{data:i}:i;if(i instanceof kendo.data.DataSource&&!(i instanceof kendo.data.HierarchicalDataSource)){throw new Error("Incorrect DataSource type. If a single dataSource instance is set to the diagram then it should be a HierarchicalDataSource. You should set only the options instead of an instance or a HierarchicalDataSource instance or supply connectionsDataSource as well.")}if(!i.fields){i.fields=[{field:"text"},{field:"url"},{field:"spriteCssClass"},{field:"imageUrl"}]}if(e.dataSource&&e._refreshHandler){e._unbindDataSource()}e._refreshHandler=c(e._refreshSource,e);e._errorHandler=c(e._error,e);e.dataSource=N.create(i).bind(y,e._refreshHandler).bind(ge,e._errorHandler)},_unbindDataSource:function(){var e=this;e.dataSource.unbind(y,e._refreshHandler).unbind(ge,e._errorHandler)},_adorn:function(e,t){if(t!==l&&e){if(t){this._adorners.push(e);this.adornerLayer.append(e.visual)}else{p.remove(this._adorners,e);this.adornerLayer.remove(e.visual)}}},_showConnectors:function(e,t){if(t){this._connectorsAdorner.show(e)}else{this._connectorsAdorner.destroy()}},_updateAdorners:function(){var e=this._adorners;for(var t=0;t<e.length;t++){var i=e[t];if(i.refreshBounds){i.refreshBounds()}i.refresh()}},_refresh:function(){for(var e=0;e<this.connections.length;e++){this.connections[e].refresh()}},_destroyToolBar:function(){if(this.singleToolBar){this.singleToolBar.hide();this.singleToolBar.destroy();this.singleToolBar=null}},_destroyGlobalToolBar:function(){if(this.toolBar){this.toolBar.hide();this.toolBar.destroy();this.toolBar=null}},exportDOMVisual:function(){var e=this.canvas._viewBox;var t=s.transform().translate(-e.x,-e.y);var i=new s.Rect([0,0],[e.width,e.height]);var n=m.Path.fromRect(i);var r=new m.Group({transform:t});var a=new m.Group({clip:n});var o=this.canvas.drawingElement.children[0];a.append(r);r.children.push(o);return a},exportVisual:function(){var e=s.transform().scale(1/this._zoom);var t=new m.Group({transform:e});var i=this.mainLayer.drawingElement;t.children.push(i);return t},_syncChanges:function(){this._syncShapeChanges();this._syncConnectionChanges()},_syncShapeChanges:function(){if(this.dataSource&&this._isEditable){this.dataSource.sync()}},_syncConnectionChanges:function(){var e=this;if(e.connectionsDataSource&&e._isEditable){r.when.apply(r,e._deferredConnectionUpdates).then(function(){e.connectionsDataSource.sync()});e.deferredConnectionUpdates=[]}}});d.ExportMixin.extend(tt.fn,true);if(kendo.PDFMixin){kendo.PDFMixin.extend(tt.fn)}function it(e){var t={};e=e||{};if(o(e.text)&&e.text!==null){t.text=e.text}if(o(e.x)&&e.x!==null){t.x=e.x}if(o(e.y)&&e.y!==null){t.y=e.y}if(o(e.width)&&e.width!==null){t.width=e.width}if(o(e.height)&&e.height!==null){t.height=e.height}if(o(e.type)&&e.type!==null){t.type=e.type}return t}function nt(e){var t={};e=e||{};if(o(e.text)&&e.text!==null){t.content=e.text}if(o(e.type)&&e.type!==null){t.type=e.type}if(o(e.from)&&e.from!==null){t.from=e.from}if(o(e.fromConnector)&&e.fromConnector!==null){t.fromConnector=e.fromConnector}if(o(e.fromX)&&e.fromX!==null){t.fromX=e.fromX}if(o(e.fromY)&&e.fromY!==null){t.fromY=e.fromY}if(o(e.to)&&e.to!==null){t.to=e.to}if(o(e.toConnector)&&e.toConnector!==null){t.toConnector=e.toConnector}if(o(e.toX)&&e.toX!==null){t.toX=e.toX}if(o(e.toY)&&e.toY!==null){t.toY=e.toY}return t}var rt=kendo.Observable.extend({init:function(e,t){kendo.Observable.fn.init.call(this);this.diagram=e;this.options=f({},this.options,t);this._tools=[];this.createToolBar();this.createTools();this.appendTools();if(this.options.modal){this.createPopup()}this.bind(this.events,t)},events:["click"],createPopup:function(){this.container=r("<div/>").append(this.element);this._popup=this.container.kendoPopup({}).getKendoPopup()},appendTools:function(){for(var e=0;e<this._tools.length;e++){var t=this._tools[e];if(t.buttons&&t.buttons.length||!o(t.buttons)){this._toolBar.add(t)}}},createToolBar:function(){this.element=r("<div/>");this._toolBar=this.element.kendoToolBar({click:c(this.click,this),resizable:false}).getKendoToolBar();this.element.css("border","none")},createTools:function(){for(var e=0;e<this.options.tools.length;e++){this.createTool(this.options.tools[e])}},createTool:function(e){if(!de(e)){e={name:e}}var t=e.name+"Tool";if(this[t]){this[t](e)}else{this._tools.push(f({},e,{attributes:this._setAttributes({action:e.name})}))}},showAt:function(e){var t=parseInt(this.options.popupZIndex,10);if(this._popup){this._popup.open(e.x,e.y);if(t){this._popup.wrapper.css("zIndex",t)}}},hide:function(){if(this._popup){this._popup.close()}},newGroup:function(){return{type:"buttonGroup",buttons:[]}},editTool:function(){this._tools.push({icon:"edit",showText:"overflow",type:"button",text:"Edit",attributes:this._setAttributes({action:"edit"})})},deleteTool:function(){this._tools.push({icon:"close",showText:"overflow",type:"button",text:"Delete",attributes:this._setAttributes({action:"delete"})})},rotateAnticlockwiseTool:function(e){this._appendGroup("rotate");this._rotateGroup.buttons.push({icon:"rotate-left",showText:"overflow",text:"RotateAnticlockwise",group:"rotate",attributes:this._setAttributes({action:"rotateAnticlockwise",step:e.step})})},rotateClockwiseTool:function(e){this._appendGroup("rotate");this._rotateGroup.buttons.push({icon:"rotate-right",attributes:this._setAttributes({action:"rotateClockwise",step:e.step}),showText:"overflow",text:"RotateClockwise",group:"rotate"})},createShapeTool:function(){this._appendGroup("create");this._createGroup.buttons.push({icon:"shape",showText:"overflow",text:"CreateShape",group:"create",attributes:this._setAttributes({action:"createShape"})})},createConnectionTool:function(){this._appendGroup("create");this._createGroup.buttons.push({icon:"connector",showText:"overflow",text:"CreateConnection",group:"create",attributes:this._setAttributes({action:"createConnection"})})},undoTool:function(){this._appendGroup("history");this._historyGroup.buttons.push({icon:"undo",showText:"overflow",text:"Undo",group:"history",attributes:this._setAttributes({action:"undo"})})},redoTool:function(){this._appendGroup("history");this._historyGroup.buttons.push({icon:"redo",showText:"overflow",text:"Redo",group:"history",attributes:this._setAttributes({action:"redo"})})},_appendGroup:function(e){var t="_"+e+"Group";if(!this[t]){this[t]=this.newGroup();this._tools.push(this[t])}},_setAttributes:function(e){var t={};if(e.action){t[kendo.attr("action")]=e.action}if(e.step){t[kendo.attr("step")]=e.step}return t},_getAttributes:function(e){var t={};var i=e.attr(kendo.attr("action"));if(i){t.action=i}var n=e.attr(kendo.attr("step"));if(n){t.step=n}return t},click:function(e){var t=this._getAttributes(r(e.target));var i=t.action;if(i&&this[i]){this[i](t)}this.trigger("click",this.eventData(i,e.target))},eventData:function(e,t){var i=this.selectedElements(),n=i.length,r=[],a=[],o;for(var s=0;s<n;s++){o=i[s];if(o instanceof E){r.push(o)}else{a.push(o)}}return{shapes:r,connections:a,action:e,target:t}},delete:function(){var e=this.diagram;var t=e._triggerRemove(this.selectedElements());if(t.length){this.diagram.remove(t,true);this.diagram._syncChanges()}},edit:function(){var e=this.selectedElements();if(e.length===1){this.diagram.edit(e[0])}},rotateClockwise:function(e){var t=parseFloat(e.step||90);this._rotate(t)},rotateAnticlockwise:function(e){var t=parseFloat(e.step||90);this._rotate(-t)},_rotate:function(e){var t=this.diagram._resizingAdorner;t.angle(t.angle()+e);t.rotate()},selectedElements:function(){return this.diagram.select()},createShape:function(){this.diagram.createShape()},createConnection:function(){this.diagram.createConnection()},undo:function(){this.diagram.undo()},redo:function(){this.diagram.redo()},destroy:function(){this.diagram=null;this.element=null;this.options=null;if(this._toolBar){this._toolBar.destroy()}if(this._popup){this._popup.destroy()}}});var at=kendo.Observable.extend({init:function(e,t){kendo.Observable.fn.init.call(this);this.options=H(true,{},this.options,t);this.element=e;this.model=this.options.model;this.fields=this._getFields();this._initContainer();this.createEditable()},options:{editors:{}},_initContainer:function(){this.wrapper=this.element},createEditable:function(){var e=this.options;this.editable=new kendo.ui.Editable(this.wrapper,{fields:this.fields,target:e.target,clearContainer:false,model:this.model})},_isEditable:function(e){return this.model.editable&&this.model.editable(e)},_getFields:function(){var e=[];var t=this.model.fields;for(var i in t){var n={};if(this._isEditable(i)){var r=this.options.editors[i];if(r){n.editor=r}n.field=i;e.push(n)}}return e},end:function(){return this.editable.end()},destroy:function(){this.editable.destroy();this.editable.element.find("["+kendo.attr("container-for")+"]").empty();this.model=this.wrapper=this.element=this.columns=this.editable=null}});var ot=at.extend({init:function(e,t){at.fn.init.call(this,e,t);this.bind(this.events,this.options);this.open()},events:["update","cancel"],options:{window:{modal:true,resizable:false,draggable:true,title:"Edit",visible:false}},_initContainer:function(){var t=this;this.wrapper=r('<div class="k-popup-edit-form"/>').attr(kendo.attr("uid"),this.model.uid);var e="";if(this.options.template){e+=this._renderTemplate();this.fields=[]}else{e+=this._renderFields()}e+=this._renderButtons();this.wrapper.append(r('<div class="k-edit-form-container"/>').append(e));this.window=new kendo.ui.Window(this.wrapper.appendTo(this.element),this.options.window);this.window.bind("close",function(e){if(e.userTriggered){e.sender.element.focus();t._cancelClick(e)}});this._attachButtonEvents()},_renderTemplate:function(){var e=this.options.template;if(typeof e==="string"){e=kendo.unescape(e)}e=kendo.template(e)(this.model);return e},_renderFields:function(){var e="";for(var t=0;t<this.fields.length;t++){var i=this.fields[t];e+='<div class="k-edit-label"><label for="'+i.field+'">'+(i.field||"")+"</label></div>";if(this._isEditable(i.field)){e+="<div "+kendo.attr("container-for")+'="'+i.field+'" class="k-edit-field"></div>'}}return e},_renderButtons:function(){var e='<div class="k-edit-buttons k-state-default">';e+=this._createButton("update");e+=this._createButton("cancel");e+="</div>";return e},_createButton:function(e){return kendo.template(Ye)(Xe[e])},_attachButtonEvents:function(){this._cancelClickHandler=c(this._cancelClick,this);this.window.element.on(t+i,"a.k-diagram-cancel",this._cancelClickHandler);this._updateClickHandler=c(this._updateClick,this);this.window.element.on(t+i,"a.k-diagram-update",this._updateClickHandler)},_updateClick:function(e){e.preventDefault();this.trigger("update")},_cancelClick:function(e){e.preventDefault();this.trigger("cancel")},open:function(){this.window.center().open()},close:function(){this.window.bind("deactivate",c(this.destroy,this)).close()},destroy:function(){this.window.close().destroy();this.window.element.off(t+i,"a.k-diagram-cancel",this._cancelClickHandler);this.window.element.off(t+i,"a.k-diagram-update",this._updateClickHandler);this._cancelClickHandler=null;this._editUpdateClickHandler=null;this.window=null;at.fn.destroy.call(this)}});function st(e,t){var i=this.dataSource.reader.model;if(i){var n=i.fn.fields.text?"text":i.idField;r("<input name='"+t.field+"' />").appendTo(e).kendoDropDownList({dataValueField:i.idField,dataTextField:n,dataSource:this.dataSource.data().toJSON(),optionLabel:" ",valuePrimitive:true})}}function lt(e){this.dataItem=e;this.callbacks=[]}lt.fn=lt.prototype={onActivate:function(e){var t=r.Deferred();this.callbacks.push({callback:e,deferred:t});return t},activate:function(){var e=this.callbacks;var t;for(var i=0;i<e.length;i++){t=this.callbacks[i];t.callback(this.dataItem);t.deferred.resolve()}this.callbacks=[]}};function dt(){this.items={}}dt.fn=dt.prototype={add:function(e){for(var t=0;t<e.length;t++){this.items[e[t].uid]=new lt(e[t])}},forEach:function(e){for(var t in this.items){e(this.items[t])}},getByUid:function(e){return this.items[e]},remove:function(e){delete this.items[e.uid]}};var M=e.extend({init:function(){this.shapes=[]},_add:function(e,t){this.shapes.push({bounds:t,shape:e});e._quadNode=this},insert:function(e,t){this._add(e,t)},remove:function(e){var t=this.shapes;var i=t.length;for(var n=0;n<i;n++){if(t[n].shape===e){t.splice(n,1);break}}},hitTestRect:function(e,t){var i=this.shapes;var n=i.length;for(var r=0;r<n;r++){if(this._testRect(i[r].shape,e)&&!d.inArray(i[r].shape,t)){return true}}},_testRect:function(e,t){var i=e.rotate().angle;var n=e.bounds();var r;if(!i){r=n.overlaps(t)}else{r=Q.rects(t,n,-i)}return r}});var R=M.extend({init:function(e){M.fn.init.call(this);this.children=[];this.rect=e},inBounds:function(e){var t=this.rect;var i=t.bottomRight();var n=e.bottomRight();var r=t.x<=e.x&&t.y<=e.y&&n.x<=i.x&&n.y<=i.y;return r},overlapsBounds:function(e){return this.rect.overlaps(e)},insert:function(e,t){var i=false;var n=this.children;var r=n.length;if(this.inBounds(t)){if(!r&&this.shapes.length<4){this._add(e,t)}else{if(!r){this._initChildren()}for(var a=0;a<n.length;a++){if(n[a].insert(e,t)){i=true;break}}if(!i){this._add(e,t)}}i=true}return i},_initChildren:function(){var e=this.rect,t=this.children,i=this.shapes,n=e.center(),r=e.width/2,a=e.height/2,o,s;t.push(new R(new h(e.x,e.y,r,a)),new R(new h(n.x,e.y,r,a)),new R(new h(e.x,n.y,r,a)),new R(new h(n.x,n.y,r,a)));for(s=i.length-1;s>=0;s--){for(o=0;o<t.length;o++){if(t[o].insert(i[s].shape,i[s].bounds)){i.splice(s,1);break}}}},hitTestRect:function(e,t){var i;var n=this.children;var r=n.length;var a=false;if(this.overlapsBounds(e)){if(M.fn.hitTestRect.call(this,e,t)){a=true}else{for(i=0;i<r;i++){if(n[i].hitTestRect(e,t)){a=true;break}}}}return a}});var ut=e.extend({ROOT_SIZE:1e3,init:function(e){var t=c(this._boundsChange,this);e.bind(ce,t);e.bind(Ce,t);this.initRoots()},initRoots:function(){this.rootMap={};this.root=new M},clear:function(){this.initRoots()},_boundsChange:function(e){if(e.item._quadNode){e.item._quadNode.remove(e.item)}this.insert(e.item)},insert:function(e){var t=e.bounds(S);var i=this.ROOT_SIZE;var n=this.getSectors(t);var r=n[0][0];var a=n[1][0];if(this.inRoot(n)){this.root.insert(e,t)}else{if(!this.rootMap[r]){this.rootMap[r]={}}if(!this.rootMap[r][a]){this.rootMap[r][a]=new R(new h(r*i,a*i,i,i))}this.rootMap[r][a].insert(e,t)}},remove:function(e){if(e._quadNode){e._quadNode.remove(e)}},inRoot:function(e){return e[0].length>1||e[1].length>1},getSectors:function(e){var t=this.ROOT_SIZE;var i=e.bottomRight();var n=k.floor(i.x/t);var r=k.floor(i.y/t);var a=[[],[]];for(var o=k.floor(e.x/t);o<=n;o++){a[0].push(o)}for(var s=k.floor(e.y/t);s<=r;s++){a[1].push(s)}return a},hitTestRect:function(e,t){var i=this.getSectors(e);var n,r,a,o;var s;if(this.root.hitTestRect(e,t)){return true}for(n=0;n<i[0].length;n++){a=i[0][n];for(r=0;r<i[1].length;r++){o=i[1][r];s=(this.rootMap[a]||{})[o];if(s&&s.hitTestRect(e,t)){return true}}}return false}});function F(e){var t=e;if(e instanceof kendo.data.Model){t=e.toJSON();t[e.idField]=e._defaultId}return t}function ct(e){var t=[];var i=[];var n,r;for(r=0;r<e.length;r++){n=e[r];if(n instanceof E){i.push(n)}else{t.push(n)}}return{shapes:i,connections:t}}function P(e,t){if(e.reader.model){return new e.reader.model(t)}return new kendo.data.ObservableObject(t)}function z(e,t){if(o(t[e])){t.set(e,null)}}function ft(e,t,i){var n;for(var r=0;r<i.length;r++){n=i[r];if(t&&!o(t[n])){t[n]=e[n]}}}function ht(e){var t=e.drawingContainer().clippedBBox(null);if(t.origin.x!==0||t.origin.y!==0){e.position(-t.origin.x,-t.origin.y)}}function pt(e){e.preventDefault()}d.ui.plugin(tt);f(u,{Shape:E,Connection:I,Connector:A,DiagramToolBar:rt,QuadNode:R,QuadRoot:M,ShapesQuadTree:ut,PopupEditor:ot})})(window.kendo.jQuery)},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.dataviz.diagram",["kendo.data","kendo.draganddrop","kendo.userevents","kendo.mobile.scroller","kendo.drawing","dataviz/diagram/utils","dataviz/diagram/math","dataviz/diagram/svg","dataviz/diagram/services","dataviz/diagram/layout","dataviz/diagram/dom"],e)})(function(){var e={id:"dataviz.diagram",name:"Diagram",category:"dataviz",description:"The Kendo DataViz Diagram ",depends:["data","userevents","mobile.scroller","draganddrop","drawing","dataviz.core","dataviz.themes","toolbar"],features:[{id:"dataviz.diagram-pdf-export",name:"PDF export",description:"Export Diagram as PDF",depends:["pdf"]},{id:"dataviz.diagram-editing",name:"Editing",description:"Support for model editing",depends:["editable","window","dropdownlist"]}]};return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.dataviz.treemap",["kendo.data","kendo.userevents","kendo.dataviz.themes"],e)})(function(){var e={id:"dataviz.treeMap",name:"TreeMap",category:"dataviz",description:"The Kendo DataViz TreeMap",depends:["data","userevents","dataviz.themes"]};(function(n,i){var u=Math,r=n.proxy,l=n.isArray,d=window.kendo,c=d._outerHeight,f=d._outerWidth,e=d.Class,a=d.ui.Widget,o=d.template,s=d.deepExtend,h=d.data.HierarchicalDataSource,p=d.getter,v=d.dataviz;var t=".kendoTreeMap",m="change",g="dataBound",_="itemCreated",b=Number.MAX_VALUE,w="mouseover"+t,k="mouseleave"+t,y="undefined";var x=a.extend({init:function(e,t){d.destroy(e);n(e).empty();a.fn.init.call(this,e,t);this.wrapper=this.element;this._initTheme(this.options);this.element.addClass("k-widget k-widget-2021 k-treemap");this._setLayout();this._originalOptions=s({},this.options);this._initDataSource();this._attachEvents();d.notify(this,v.ui)},options:{name:"TreeMap",theme:"default",autoBind:true,textField:"text",valueField:"value",colorField:"color"},events:[g,_],_initTheme:function(e){var t=this,i=v.ui.themes||{},n=((e||{}).theme||"").toLowerCase(),r=(i[n]||{}).treeMap;t.options=s({},r,e)},_attachEvents:function(){this.element.on(w,r(this._mouseover,this)).on(k,r(this._mouseleave,this));this._resizeHandler=r(this.resize,this,false);d.onResize(this._resizeHandler)},_setLayout:function(){if(this.options.type==="horizontal"){this._layout=new T(false);this._view=new D(this,this.options)}else if(this.options.type==="vertical"){this._layout=new T(true);this._view=new D(this,this.options)}else{this._layout=new C;this._view=new S(this,this.options)}},_initDataSource:function(){var e=this,t=e.options,i=t.dataSource;e._dataChangeHandler=r(e._onDataChange,e);e.dataSource=h.create(i).bind(m,e._dataChangeHandler);if(i){if(e.options.autoBind){e.dataSource.fetch()}}},setDataSource:function(e){var t=this;t.dataSource.unbind(m,t._dataChangeHandler);t.dataSource=e.bind(m,t._dataChangeHandler);if(e){if(t.options.autoBind){t.dataSource.fetch()}}},_onDataChange:function(e){var t=e.node;var i=e.items;var n=this.options;var r,a;if(!t){this._cleanItems();this.element.empty();r=this._wrapItem(i[0]);this._layout.createRoot(r,f(this.element),c(this.element),this.options.type==="vertical");this._view.createRoot(r);this._root=r;this._colorIdx=0}else{if(i.length){var o=this._getByUid(t.uid);o.children=[];i=new d.data.Query(i)._sortForGrouping(n.valueField,"desc");for(a=0;a<i.length;a++){r=i[a];o.children.push(this._wrapItem(r))}var s=this._view.htmlSize(o);this._layout.compute(o.children,o.coord,s);this._setColors(o.children);this._view.render(o)}}for(a=0;a<i.length;a++){i[a].load()}if(t){this.trigger(g,{node:t})}},_cleanItems:function(){var e=this;e.angular("cleanup",function(){return{elements:e.element.find(".k-leaf div,.k-treemap-title,.k-treemap-title-vertical")}})},_setColors:function(e){var t=this.options.colors;var i=this._colorIdx;var n=t[i%t.length];var r,a;if(l(n)){r=B(n[0],n[1],e.length)}var o=false;for(var s=0;s<e.length;s++){a=e[s];if(!E(a.color)){if(r){a.color=r[s]}else{a.color=n}}if(!a.dataItem.hasChildren){o=true}}if(o){this._colorIdx++}},_contentSize:function(e){this.view.renderHeight(e)},_wrapItem:function(e){var t={};if(E(this.options.valueField)){t.value=A(this.options.valueField,e)}if(E(this.options.colorField)){t.color=A(this.options.colorField,e)}if(E(this.options.textField)){t.text=A(this.options.textField,e)}t.level=e.level();t.dataItem=e;return t},_getByUid:function(e){var t=[this._root];var i;while(t.length){i=t.pop();if(i.dataItem.uid===e){return i}if(i.children){t=t.concat(i.children)}}},dataItem:function(e){var t=n(e).attr(d.attr("uid")),i=this.dataSource;return i&&i.getByUid(t)},findByUid:function(e){return this.element.find(".k-treemap-tile["+d.attr("uid")+"='"+e+"']")},_mouseover:function(e){var t=n(e.target);if(t.hasClass("k-leaf")){this._removeActiveState();t.removeClass("k-state-hover").addClass("k-state-hover")}},_removeActiveState:function(){this.element.find(".k-state-hover").removeClass("k-state-hover")},_mouseleave:function(){this._removeActiveState()},destroy:function(){a.fn.destroy.call(this);this.element.off(t);if(this.dataSource){this.dataSource.unbind(m,this._dataChangeHandler)}this._root=null;d.unbindResize(this._resizeHandler);d.destroy(this.element)},items:function(){return n()},getSize:function(){return d.dimensions(this.element)},_resize:function(){var e=this._root;if(e){var t=this.element;var i=t.children();e.coord.width=f(t);e.coord.height=c(t);i.css({width:e.coord.width,height:e.coord.height});this._resizeItems(e,i)}},_resizeItems:function(e,t){if(e.children&&e.children.length){var i=t.children(".k-treemap-wrap").children();var n,r;this._layout.compute(e.children,e.coord,{text:this._view.titleSize(e,t)});for(var a=0;a<e.children.length;a++){n=e.children[a];r=i.filter("["+d.attr("uid")+"='"+n.dataItem.uid+"']");this._view.setItemSize(n,r);this._resizeItems(n,r)}}},setOptions:function(e){var t=e.dataSource;e.dataSource=i;this._originalOptions=s(this._originalOptions,e);this.options=s({},this._originalOptions);this._setLayout();this._initTheme(this.options);a.fn._setEvents.call(this,e);if(t){this.setDataSource(h.create(t))}if(this.options.autoBind){this.dataSource.fetch()}}});var C=e.extend({createRoot:function(e,t,i){e.coord={width:t,height:i,top:0,left:0}},leaf:function(e){return!e.children},layoutChildren:function(e,t){var i=t.width*t.height;var n=0,r=[],a;for(a=0;a<e.length;a++){r[a]=parseFloat(e[a].value);n+=r[a]}for(a=0;a<r.length;a++){e[a].area=i*r[a]/n}var o=this.layoutHorizontal()?t.height:t.width;var s=[e[0]];var l=e.slice(1);this.squarify(l,s,o,t)},squarify:function(e,t,i,n){this.computeDim(e,t,i,n)},computeDim:function(e,t,i,n){if(e.length+t.length==1){var r=e.length==1?e:t;this.layoutLast(r,i,n);return}if(e.length>=2&&t.length===0){t=[e[0]];e=e.slice(1)}if(e.length===0){if(t.length>0){this.layoutRow(t,i,n)}return}var a=e[0];if(this.worstAspectRatio(t,i)>=this.worstAspectRatio([a].concat(t),i)){this.computeDim(e.slice(1),t.concat([a]),i,n)}else{var o=this.layoutRow(t,i,n);this.computeDim(e,[],o.dim,o)}},layoutLast:function(e,t,i){e[0].coord=i},layoutRow:function(e,t,i){if(this.layoutHorizontal()){return this.layoutV(e,t,i)}else{return this.layoutH(e,t,i)}},orientation:"h",layoutVertical:function(){return this.orientation==="v"},layoutHorizontal:function(){return this.orientation==="h"},layoutChange:function(){this.orientation=this.layoutVertical()?"h":"v"},worstAspectRatio:function(e,t){if(!e||e.length===0){return b}var i=0,n=0,r=b;for(var a=0;a<e.length;a++){var o=e[a].area;i+=o;r=r<o?r:o;n=n>o?n:o}return u.max(t*t*n/(i*i),i*i/(t*t*r))},compute:function(e,t,i){if(!(t.width>=t.height&&this.layoutHorizontal())){this.layoutChange()}if(e&&e.length>0){var n={width:t.width,height:t.height-i.text,top:0,left:0};this.layoutChildren(e,n)}},layoutV:function(e,t,i){var n=this._totalArea(e),r=0;t=z(n/t);for(var a=0;a<e.length;a++){var o=z(e[a].area/t);e[a].coord={height:o,width:t,top:i.top+r,left:i.left};r+=o}var s={height:i.height,width:i.width-t,top:i.top,left:i.left+t};s.dim=u.min(s.width,s.height);if(s.dim!=s.height){this.layoutChange()}return s},layoutH:function(e,t,i){var n=this._totalArea(e);var r=z(n/t),a=i.top,o=0;for(var s=0;s<e.length;s++){e[s].coord={height:r,width:z(e[s].area/r),top:a,left:i.left+o};o+=e[s].coord.width}var l={height:i.height-r,width:i.width,top:i.top+r,left:i.left};l.dim=u.min(l.width,l.height);if(l.dim!=l.width){this.layoutChange()}return l},_totalArea:function(e){var t=0;for(var i=0;i<e.length;i++){t+=e[i].area}return t}});var S=e.extend({init:function(e,t){this.options=s({},this.options,t);this.treeMap=e;this.element=n(e.element);this.offset=0},titleSize:function(e,t){var i=t.children(".k-treemap-title");return i.height()||0},htmlSize:function(e){var t=this._getByUid(e.dataItem.uid);var i={text:0};if(e.children){this._clean(t);var n=this._getText(e);if(n){var r=this._createTitle(e);t.append(r);this._compile(r,e.dataItem);i.text=r.height()}t.append(this._createWrap());this.offset=(f(t)-t.innerWidth())/2}return i},_compile:function(e,t){this.treeMap.angular("compile",function(){return{elements:e,data:[{dataItem:t}]}})},_getByUid:function(e){return this.element.find(".k-treemap-tile["+d.attr("uid")+"='"+e+"']")},render:function(e){var t=this._getByUid(e.dataItem.uid);var i=e.children;if(i){var n=t.find(".k-treemap-wrap");for(var r=0;r<i.length;r++){var a=i[r];var o=this._createLeaf(a);n.append(o);this._compile(o.children(),a.dataItem);this.treeMap.trigger(_,{element:o})}}},createRoot:function(e){var t=this._createLeaf(e);this.element.append(t);this._compile(t.children(),e.dataItem);this.treeMap.trigger(_,{element:t})},_clean:function(e){this.treeMap.angular("cleanup",function(){return{elements:e.children(":not(.k-treemap-wrap)")}});e.css("background-color","");e.removeClass("k-leaf");e.removeClass("k-inverse");e.empty()},_createLeaf:function(e){return this._createTile(e).css("background-color",e.color).addClass("k-leaf").toggleClass("k-inverse",this._tileColorBrightness(e)>180).toggle(e.value!==0).append(n("<div></div>").html(this._getText(e)))},_createTile:function(e){var t=n("<div class='k-treemap-tile'></div>");this.setItemSize(e,t);if(E(e.dataItem)&&E(e.dataItem.uid)){t.attr(d.attr("uid"),e.dataItem.uid)}return t},_itemCoordinates:function(e){var t={width:e.coord.width,height:e.coord.height,left:e.coord.left,top:e.coord.top};if(t.left&&this.offset){t.width+=this.offset*2}else{t.width+=this.offset}if(t.top){t.height+=this.offset*2}else{t.height+=this.offset}return t},setItemSize:function(e,t){var i=this._itemCoordinates(e);t.css({width:i.width,height:i.height,left:i.left,top:i.top})},_getText:function(e){var t=e.text;if(this.options.template){t=this._renderTemplate(e)}return t},_renderTemplate:function(e){var t=o(this.options.template);return t({dataItem:e.dataItem,text:e.text})},_createTitle:function(e){return n("<div class='k-treemap-title'></div>").append(n("<div></div>").html(this._getText(e)))},_createWrap:function(){return n("<div class='k-treemap-wrap'></div>")},_tileColorBrightness:function(e){return P(e.color)}});var T=e.extend({createRoot:function(e,t,i,n){e.coord={width:t,height:i,top:0,left:0};e.vertical=n},init:function(e){this.vertical=e;this.quotient=e?1:0},compute:function(e,t,i){if(e.length>0){var n=t.width;var r=t.height;if(this.vertical){r-=i.text}else{n-=i.text}var a={width:n,height:r,top:0,left:0};this.layoutChildren(e,a)}},layoutChildren:function(e,t){var i=t.width*t.height;var n=0;var r=[];var a;for(a=0;a<e.length;a++){var o=e[a];r[a]=parseFloat(e[a].value);n+=r[a];o.vertical=this.vertical}for(a=0;a<r.length;a++){e[a].area=i*r[a]/n}this.sliceAndDice(e,t)},sliceAndDice:function(e,t){var i=this._totalArea(e);if(e[0].level%2===this.quotient){this.layoutHorizontal(e,t,i)}else{this.layoutVertical(e,t,i)}},layoutHorizontal:function(e,t,i){var n=0;for(var r=0;r<e.length;r++){var a=e[r];var o=a.area/(i/t.width);a.coord={height:t.height,width:o,top:t.top,left:t.left+n};n+=o}},layoutVertical:function(e,t,i){var n=0;for(var r=0;r<e.length;r++){var a=e[r];var o=a.area/(i/t.height);a.coord={height:o,width:t.width,top:t.top+n,left:t.left};n+=o}},_totalArea:function(e){var t=0;for(var i=0;i<e.length;i++){t+=e[i].area}return t}});var D=S.extend({htmlSize:function(e){var t=this._getByUid(e.dataItem.uid);var i={text:0,offset:0};if(e.children){this._clean(t);var n=this._getText(e);if(n){var r=this._createTitle(e);t.append(r);this._compile(r,e.dataItem);if(e.vertical){i.text=r.height()}else{i.text=r.width()}}t.append(this._createWrap());this.offset=(f(t)-t.innerWidth())/2}return i},titleSize:function(e,t){var i;if(e.vertical){i=t.children(".k-treemap-title").height()}else{i=t.children(".k-treemap-title-vertical").width()}return i||0},_createTitle:function(e){var t;if(e.vertical){t=n("<div class='k-treemap-title'></div>")}else{t=n("<div class='k-treemap-title-vertical'></div>")}return t.append(n("<div></div>").html(this._getText(e)))}});function A(e,t){if(t===null){return t}var i=p(e,true);return i(t)}function E(e){return typeof e!==y}function B(e,t,i){var n=M(e);var r=M(t);var a=P(e)-P(t)<0;var o=[];o.push(e);for(var s=0;s<i;s++){var l={r:I(n.r,r.r,s,i,a),g:I(n.g,r.g,s,i,a),b:I(n.b,r.b,s,i,a)};o.push(L(l))}o.push(t);return o}function I(e,t,i,n,r){var a=u.min(u.abs(e),u.abs(t));var o=u.max(u.abs(e),u.abs(t));var s=(o-a)/(n+1);var l=s*(i+1);var d;if(r){d=a+l}else{d=o-l}return d}function L(e){return"#"+R(e.r)+R(e.g)+R(e.b)}function M(e){e=e.replace("#","");var t=H(e);return{r:F(t.r),g:F(t.g),b:F(t.b)}}function R(e){var t=u.round(e).toString(16).toUpperCase();if(t.length===1){t="0"+t}return t}function H(e){var t=e.length;var i={};if(t===3){i.r=e[0];i.g=e[1];i.b=e[2]}else{i.r=e.substring(0,2);i.g=e.substring(2,4);i.b=e.substring(4,6)}return i}function F(e){return parseInt(e.toString(16),16)}function P(e){var t=0;if(e){e=M(e);t=u.sqrt(.241*e.r*e.r+.691*e.g*e.g+.068*e.b*e.b)}return t}function z(e){var t=u.pow(10,4);return u.round(e*t)/t}v.ui.plugin(x)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.dataviz",["kendo.core","kendo.fx","kendo.router","kendo.view","kendo.data.odata","kendo.data.xml","kendo.data","kendo.data.signalr","kendo.binder","kendo.userevents","kendo.draganddrop","kendo.mobile.scroller","kendo.popup","kendo.tooltip","kendo.drawing","kendo.dataviz.core","kendo.dataviz.themes","kendo.dataviz.chart","kendo.dataviz.gauge","kendo.dataviz.barcode","kendo.dataviz.qrcode","kendo.dataviz.stock","kendo.dataviz.sparkline","kendo.dataviz.map","kendo.dataviz.diagram","kendo.dataviz.treemap","kendo.angular"],e)})(function(){"bundle all";return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.mobile.view",["kendo.core","kendo.fx","kendo.mobile.scroller","kendo.view"],e)})(function(){var e={id:"mobile.view",name:"View",category:"mobile",description:"Mobile View",depends:["core","fx","mobile.scroller","view"],hidden:true};(function(o,B){var s=window.kendo,l=s.mobile,a=l.ui,d=s.attr,i=a.Widget,e=s.ViewClone,n="init",t='<div style="height: 100%; width: 100%; position: absolute; top: 0; left: 0; z-index: 20000; display: none"></div>',r="beforeShow",u="show",c="afterShow",f="beforeHide",h="transitionEnd",p="transitionStart",v="hide",m="destroy",g=s.attrValue,_=s.roleSelector,b=s.directiveSelector,w=s.compileMobileDirective;function k(e){var t=e.find(_("popover")),i,n,r=a.roles;for(i=0,n=t.length;i<n;i++){s.initWidget(t[i],{},r)}}function y(e){if(!s.triggeredByInput(e)){e.preventDefault()}}var x=i.extend({init:function(e,t){i.fn.init.call(this,e,t);this.params={};o.extend(this,t);this.transition=this.transition||this.defaultTransition;this._id();if(!this.options.$angular){this._layout();this._overlay();this._scroller();this._model()}else{this._overlay()}},events:[n,r,u,c,f,v,m,p,h],options:{name:"View",title:"",layout:null,getLayout:o.noop,reload:false,transition:"",defaultTransition:"",useNativeScrolling:false,stretch:false,zoom:false,model:null,modelScope:window,scroller:{},initWidgets:true},enable:function(e){if(typeof e=="undefined"){e=true}if(e){this.overlay.hide()}else{this.overlay.show()}},destroy:function(){if(this.layout){this.layout.detach(this)}this.trigger(m);i.fn.destroy.call(this);if(this.scroller){this.scroller.destroy()}if(this.options.$angular){this.element.scope().$destroy()}s.destroy(this.element)},purge:function(){this.destroy();this.element.remove()},triggerBeforeShow:function(){if(this.trigger(r,{view:this})){return false}return true},triggerBeforeHide:function(){if(this.trigger(f,{view:this})){return false}return true},showStart:function(){var e=this.element;e.css("display","");if(!this.inited){this.inited=true;this.trigger(n,{view:this})}else{this._invokeNgController()}if(this.layout){this.layout.attach(this)}this._padIfNativeScrolling();this.trigger(u,{view:this});s.resize(e)},showEnd:function(){this.trigger(c,{view:this});this._padIfNativeScrolling()},hideEnd:function(){var e=this;e.element.hide();e.trigger(v,{view:e});if(e.layout){e.layout.trigger(v,{view:e,layout:e.layout})}},beforeTransition:function(e){this.trigger(p,{type:e})},afterTransition:function(e){this.trigger(h,{type:e})},_padIfNativeScrolling:function(){if(l.appLevelNativeScrolling()){var e=s.support.mobileOS&&s.support.mobileOS.android,t=l.application.skin()||"",i=l.application.os.android||t.indexOf("android")>-1,n=t==="flat"||t.indexOf("material")>-1,r=(e||i)&&!n?"footer":"header",a=(e||i)&&!n?"header":"footer";this.content.css({paddingTop:this[r].height(),paddingBottom:this[a].height()})}},contentElement:function(){var e=this;return e.options.stretch?e.content:e.scrollerContent},clone:function(){return new e(this)},_scroller:function(){var e=this;if(l.appLevelNativeScrolling()){return}if(e.options.stretch){e.content.addClass("km-stretched-view")}else{e.content.kendoMobileScroller(o.extend(e.options.scroller,{zoom:e.options.zoom,useNative:e.options.useNativeScrolling}));e.scroller=e.content.data("kendoMobileScroller");e.scrollerContent=e.scroller.scrollElement}if(s.support.kineticScrollNeeded){o(e.element).on("touchmove",".km-header",y);if(!e.options.useNativeScrolling&&!e.options.stretch){o(e.element).on("touchmove",".km-content",y)}}},_model:function(){var e=this,t=e.element,i=e.options.model;if(typeof i==="string"){i=s.getter(i)(e.options.modelScope)}e.model=i;k(t);e.element.css("display","");if(e.options.initWidgets){if(i){s.bind(t,i,a,s.ui,s.dataviz.ui)}else{l.init(t.children())}}e.element.css("display","none")},_id:function(){var e=this.element,t=e.attr("id")||"";this.id=g(e,"url")||"#"+t;if(this.id=="#"){this.id=s.guid();e.attr("id",this.id)}},_layout:function(){var e=_("content"),t=this.element;t.addClass("km-view");this.header=t.children(_("header")).addClass("km-header");this.footer=t.children(_("footer")).addClass("km-footer");if(!t.children(e)[0]){t.wrapInner("<div "+d("role")+'="content"></div>')}this.content=t.children(_("content")).addClass("km-content");this.element.prepend(this.header).append(this.footer);this.layout=this.options.getLayout(this.layout);if(this.layout){this.layout.setup(this)}},_overlay:function(){this.overlay=o(t).appendTo(this.element)},_invokeNgController:function(){var e,t;if(this.options.$angular){e=this.element.controller();t=this.options.$angular[0];if(e){var i=o.proxy(this,"_callController",e,t);if(/^\$(digest|apply)$/.test(t.$$phase)){i()}else{t.$apply(i)}}}},_callController:function(e,t){this.element.injector().invoke(e.constructor,e,{$scope:t})}});function C(e){e.each(function(){s.initWidget(o(this),{},a.roles)})}var S=i.extend({init:function(e,t){i.fn.init.call(this,e,t);e=this.element;this.header=e.children(this._locate("header")).addClass("km-header");this.footer=e.children(this._locate("footer")).addClass("km-footer");this.elements=this.header.add(this.footer);k(e);if(!this.options.$angular){s.mobile.init(this.element.children())}this.element.detach();this.trigger(n,{layout:this})},_locate:function(e){return this.options.$angular?b(e):_(e)},options:{name:"Layout",id:null,platform:null},events:[n,u,v],setup:function(e){if(!e.header[0]){e.header=this.header}if(!e.footer[0]){e.footer=this.footer}},detach:function(e){var t=this;if(e.header===t.header&&t.header[0]){e.element.prepend(t.header.detach()[0].cloneNode(true))}if(e.footer===t.footer&&t.footer.length){e.element.append(t.footer.detach()[0].cloneNode(true))}},attach:function(e){var t=this,i=t.currentView;if(i){t.detach(i)}if(e.header===t.header){t.header.detach();e.element.children(_("header")).remove();e.element.prepend(t.header)}if(e.footer===t.footer){t.footer.detach();e.element.children(_("footer")).remove();e.element.append(t.footer)}t.trigger(u,{layout:t,view:e});t.currentView=e}});var T=s.Observable,D=/<body[^>]*>(([\u000a\u000d\u2028\u2029]|.)*)<\/body>/i,A="loadStart",E="loadComplete",I="showStart",M="sameViewRequested",R="viewShow",F="viewTypeDetermined",P="after";var z=T.extend({init:function(i){var t=this,e,n,r,a;T.fn.init.call(t);o.extend(t,i);t.sandbox=o("<div />");r=t.container;e=t._hideViews(r);t.rootView=e.first();if(!t.rootView[0]&&i.rootNeeded){if(r[0]==s.mobile.application.element[0]){n='Your kendo mobile application element does not contain any direct child elements with data-role="view" attribute set. Make sure that you instantiate the mobile application using the correct container.'}else{n='Your pane element does not contain any direct child elements with data-role="view" attribute set.'}throw new Error(n)}t.layouts={};t.viewContainer=new s.ViewContainer(t.container);t.viewContainer.bind("accepted",function(e){e.view.params=t.params});t.viewContainer.bind("complete",function(e){t.trigger(R,{view:e.view})});t.viewContainer.bind(P,function(){t.trigger(P)});this.getLayoutProxy=o.proxy(this,"_getLayout");t._setupLayouts(r);a=r.children(t._locate("modalview drawer"));if(t.$angular){t.$angular[0].viewOptions={defaultTransition:t.transition,loader:t.loader,container:t.container,getLayout:t.getLayoutProxy};a.each(function(e,t){w(o(t),i.$angular[0])})}else{C(a)}this.bind(this.events,i)},events:[I,P,R,A,E,M,F],destroy:function(){s.destroy(this.container);for(var e in this.layouts){this.layouts[e].destroy()}},view:function(){return this.viewContainer.view},showView:function(t,i,e){t=t.replace(new RegExp("^"+this.remoteViewURLPrefix),"");if(t===""&&this.remoteViewURLPrefix){t="/"}if(t.replace(/^#/,"")===this.url){this.trigger(M);return false}this.trigger(I);var n=this,r=function(e){return n.viewContainer.show(e,i,t)},a=n._findViewElement(t),o=s.widgetInstance(a);n.url=t.replace(/^#/,"");n.params=e;if(o&&o.reload){o.purge();a=[]}this.trigger(F,{remote:a.length===0,url:t});if(a[0]){if(!o){o=n._createView(a)}return r(o)}else{if(this.serverNavigation){location.href=t}else{n._loadView(t,r)}return true}},append:function(e,t){var i=this.sandbox,n=(t||"").split("?")[0],r=this.container,a,o,s;if(D.test(e)){e=RegExp.$1}i[0].innerHTML=e;r.append(i.children("script, style"));a=this._hideViews(i);s=a.first();if(!s.length){a=s=i.wrapInner("<div data-role=view />").children()}if(n){s.hide().attr(d("url"),n)}this._setupLayouts(i);o=i.children(this._locate("modalview drawer"));r.append(i.children(this._locate("layout modalview drawer")).add(a));C(o);return this._createView(s)},_locate:function(e){return this.$angular?b(e):_(e)},_findViewElement:function(e){var t,i=e.split("?")[0];if(!i){return this.rootView}t=this.container.children("["+d("url")+"='"+i+"']");if(!t[0]&&i.indexOf("/")===-1){t=this.container.children(i.charAt(0)==="#"?i:"#"+i)}return t},_createView:function(e){if(this.$angular){return w(e,this.$angular[0])}else{return s.initWidget(e,{defaultTransition:this.transition,loader:this.loader,container:this.container,getLayout:this.getLayoutProxy,modelScope:this.modelScope,reload:g(e,"reload")},a.roles)}},_getLayout:function(e){if(e===""){return null}return e?this.layouts[e]:this.layouts[this.layout]},_loadView:function(e,t){if(this._xhr){this._xhr.abort()}this.trigger(A);this._xhr=o.get(s.absoluteURL(e,this.remoteViewURLPrefix),"html").always(o.proxy(this,"_xhrComplete",t,e))},_xhrComplete:function(e,t,i){var n=true;if(typeof i==="object"){if(i.status===0){if(i.responseText&&i.responseText.length>0){n=true;i=i.responseText}else{return}}}this.trigger(E);if(n){e(this.append(i,t))}},_hideViews:function(e){return e.children(this._locate("view splitview")).hide()},_setupLayouts:function(e){var t=this,i;e.children(t._locate("layout")).each(function(){if(t.$angular){i=w(o(this),t.$angular[0])}else{i=s.initWidget(o(this),{},a.roles)}var e=i.options.platform;if(!e||e===l.application.os.name){t.layouts[i.options.id]=i}else{i.destroy()}})}});s.mobile.ViewEngine=z;a.plugin(x);a.plugin(S)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.mobile.loader",["kendo.core"],e)})(function(){var e={id:"mobile.loader",name:"Loader",category:"mobile",description:"Mobile Loader",depends:["core"],hidden:true};(function(r,e){var t=window.kendo,i=t.mobile.ui,a=i.Widget,n=r.map(t.eventMap,function(e){return e}).join(" ").split(" ");var o=a.extend({init:function(e,t){var i=this,n=r('<div class="km-loader"><span class="km-loading km-spin"></span><span class="km-loading-left"></span><span class="km-loading-right"></span></div>');a.fn.init.call(i,n,t);i.container=e;i.captureEvents=false;i._attachCapture();n.append(i.options.loading).hide().appendTo(e)},options:{name:"Loader",loading:"<h1>Loading...</h1>",timeout:100},show:function(){var e=this;clearTimeout(e._loading);if(e.options.loading===false){return}e.captureEvents=true;e._loading=setTimeout(function(){e.element.show()},e.options.timeout)},hide:function(){this.captureEvents=false;clearTimeout(this._loading);this.element.hide()},changeMessage:function(e){this.options.loading=e;this.element.find(">h1").html(e)},transition:function(){this.captureEvents=true;this.container.css("pointer-events","none")},transitionDone:function(){this.captureEvents=false;this.container.css("pointer-events","")},_attachCapture:function(){var t=this;t.captureEvents=false;function e(e){if(t.captureEvents){e.preventDefault()}}for(var i=0;i<n.length;i++){t.container[0].addEventListener(n[i],e,true)}}});i.plugin(o)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.mobile.pane",["kendo.mobile.view","kendo.mobile.loader"],e)})(function(){var e={id:"mobile.pane",name:"Pane",category:"mobile",description:"Mobile Pane",depends:["mobile.view","mobile.loader"],hidden:true};(function(d,e){var u=window.kendo,c=u.mobile,r=u.roleSelector,f=c.ui,i=f.Widget,n=c.ViewEngine,a=f.View,o=c.ui.Loader,h="external",p="href",v="#!",s="navigate",l="viewShow",m="sameViewRequested",t=u.support.mobileOS,g=t.ios&&!t.appMode&&t.flatVersion>=700,_=/popover|actionsheet|modalview|drawer/,b="#:back",w=u.attrValue;var k=i.extend({init:function(e,t){var r=this;i.fn.init.call(r,e,t);t=r.options;e=r.element;e.addClass("km-pane");if(r.options.collapsible){e.addClass("km-collapsible-pane")}this.history=[];this.historyCallback=function(e,t,i){var n=r.transition;r.transition=null;if(g&&i){n="none"}return r.viewEngine.showView(e,n,t)};this._historyNavigate=function(e){if(e===b){if(r.history.length===1){return}r.history.pop();e=r.history[r.history.length-1]}else{r.history.push(e)}r.historyCallback(e,u.parseQueryStringParams(e))};this._historyReplace=function(e){var t=u.parseQueryStringParams(e);r.history[r.history.length-1]=e;r.historyCallback(e,t)};r.loader=new o(e,{loading:r.options.loading});r.viewEngine=new n({container:e,transition:t.transition,modelScope:t.modelScope,rootNeeded:!t.initial,serverNavigation:t.serverNavigation,remoteViewURLPrefix:t.root||"",layout:t.layout,$angular:t.$angular,loader:r.loader,showStart:function(){r.loader.transition();r.closeActiveDialogs()},after:function(){r.loader.transitionDone()},viewShow:function(e){r.trigger(l,e)},loadStart:function(){r.loader.show()},loadComplete:function(){r.loader.hide()},sameViewRequested:function(){r.trigger(m)},viewTypeDetermined:function(e){if(!e.remote||!r.options.serverNavigation){r.trigger(s,{url:e.url})}}});this._setPortraitWidth();u.onResize(function(){r._setPortraitWidth()});r._setupAppLinks()},closeActiveDialogs:function(){var e=this.element.find(r("actionsheet popover modalview")).filter(":visible");e.each(function(){u.widgetInstance(d(this),f).close()})},navigateToInitial:function(){var e=this.options.initial;if(e){this.navigate(e)}return e},options:{name:"Pane",portraitWidth:"",transition:"",layout:"",collapsible:false,initial:null,modelScope:window,loading:"<h1>Loading...</h1>"},events:[s,l,m],append:function(e){return this.viewEngine.append(e)},destroy:function(){i.fn.destroy.call(this);this.viewEngine.destroy();this.userEvents.destroy()},navigate:function(e,t){if(e instanceof a){e=e.id}this.transition=t;this._historyNavigate(e)},replace:function(e,t){if(e instanceof a){e=e.id}this.transition=t;this._historyReplace(e)},bindToRouter:function(r){var t=this,a=this.history,o=this.viewEngine;r.bind("init",function(e){var t=e.url,i=r.pushState?t:"/";o.rootView.attr(u.attr("url"),i);var n=a.length;if(t==="/"&&n){r.navigate(a[n-1],true);e.preventDefault()}});r.bind("routeMissing",function(e){if(!t.historyCallback(e.url,e.params,e.backButtonPressed)){e.preventDefault()}});r.bind("same",function(){t.trigger(m)});t._historyNavigate=function(e){r.navigate(e)};t._historyReplace=function(e){r.replace(e)}},hideLoading:function(){this.loader.hide()},showLoading:function(){this.loader.show()},changeLoadingMessage:function(e){this.loader.changeMessage(e)},view:function(){return this.viewEngine.view()},_setPortraitWidth:function(){var e,t=this.options.portraitWidth;if(t){e=u.mobile.application.element.is(".km-vertical")?t:"auto";this.element.css("width",e)}},_setupAppLinks:function(){var t=this,e="tab",i="[data-"+u.ns+"navigate-on-press]",n=d.map(["button","backbutton","detailbutton","listview-link"],function(e){return r(e)+":not("+i+")"}).join(",");this.element.handler(this).on("down",r(e)+","+i,"_mouseup").on("click",r(e)+","+n+","+i,"_appLinkClick");this.userEvents=new u.UserEvents(this.element,{fastTap:true,filter:n,tap:function(e){e.event.currentTarget=e.touch.currentTarget;t._mouseup(e.event)}});this.element.css("-ms-touch-action","")},_appLinkClick:function(e){var t=d(e.currentTarget).attr("href");var i=t&&t[0]!=="#"&&this.options.serverNavigation;if(!i&&w(d(e.currentTarget),"rel")!=h){e.preventDefault()}},_mouseup:function(e){if(e.which>1||e.isDefaultPrevented()){return}var t=this,i=d(e.currentTarget),n=w(i,"transition"),r=w(i,"rel")||"",a=w(i,"target"),o=i.attr(p),s=g&&i[0].offsetHeight===0,l=o&&o[0]!=="#"&&this.options.serverNavigation;if(s||l||r===h||typeof o==="undefined"||o===v){return}i.attr(p,v);setTimeout(function(){i.attr(p,o)});if(r.match(_)){u.widgetInstance(d(o),f).openFor(i);if(r==="actionsheet"||r==="drawer"){e.stopPropagation()}}else{if(a==="_top"){t=c.application.pane}else if(a){t=d("#"+a).data("kendoMobilePane")}t.navigate(o,n)}e.preventDefault()}});k.wrap=function(e){if(!e.is(r("view"))){e=e.wrap("<div data-"+u.ns+'role="view" data-stretch="true"></div>').parent()}var t=e.wrap('<div class="km-pane-wrapper"><div></div></div>').parent(),i=new k(t);i.navigate("");return i};f.plugin(k)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.mobile.popover",["kendo.popup","kendo.mobile.pane"],e)})(function(){var e={id:"mobile.popover",name:"PopOver",category:"mobile",description:"The mobile PopOver widget represents a transient view which is displayed when the user taps on a navigational widget or area on the screen. ",depends:["popup","mobile.pane"]};(function(h,e){var l=window.kendo,t=l.mobile,r=t.ui,d="hide",i="open",a="close",u='<div class="km-popup-wrapper"></div>',c='<div class="km-popup-arrow"></div>',f='<div class="km-popup-overlay"></div>',p="km-up km-down km-left km-right",v=r.Widget,m={down:{origin:"bottom center",position:"top center"},up:{origin:"top center",position:"bottom center"},left:{origin:"center left",position:"center right",collision:"fit flip"},right:{origin:"center right",position:"center left",collision:"fit flip"}},g={animation:{open:{effects:"fade:in",duration:0},close:{effects:"fade:out",duration:400}}},_={horizontal:{offset:"top",size:"height"},vertical:{offset:"left",size:"width"}},b={up:"down",down:"up",left:"right",right:"left"};var o=v.extend({init:function(e,t){var i=this,n=e.closest(".km-modalview-wrapper"),r=e.closest(".km-root").children(".km-pane").first(),a=n[0]?n:r,o,s;if(t.viewport){r=t.viewport}else if(!r[0]){r=window}if(t.container){a=t.container}else if(!a[0]){a=document.body}o={viewport:r,copyAnchorStyles:false,autosize:true,open:function(){i.overlay.show()},activate:h.proxy(i._activate,i),deactivate:function(){i.overlay.hide();if(!i._apiCall){i.trigger(d)}i._apiCall=false}};v.fn.init.call(i,e,t);e=i.element;t=i.options;e.wrap(u).addClass("km-popup").show();s=i.options.direction.match(/left|right/)?"horizontal":"vertical";i.dimensions=_[s];i.wrapper=e.parent().css({width:t.width,height:t.height}).addClass("km-popup-wrapper km-"+t.direction).hide();i.arrow=h(c).prependTo(i.wrapper).hide();i.overlay=h(f).appendTo(a).hide();o.appendTo=i.overlay;if(t.className){i.overlay.addClass(t.className)}i.popup=new l.ui.Popup(i.wrapper,h.extend(true,o,g,m[t.direction]))},options:{name:"Popup",width:240,height:"",direction:"down",container:null,viewport:null},events:[d],show:function(e){this.popup.options.anchor=h(e);this.popup.open()},hide:function(){this._apiCall=true;this.popup.close()},destroy:function(){v.fn.destroy.call(this);this.popup.destroy();this.overlay.remove()},target:function(){return this.popup.options.anchor},_activate:function(){var e=this,t=e.options.direction,i=e.dimensions,n=i.offset,r=e.popup,a=r.options.anchor,o=h(a).offset(),s=h(r.element).offset(),l=r.flipped?b[t]:t,d=e.arrow[i.size]()*2,u=e.element[i.size]()-e.arrow[i.size](),c=h(a)[i.size](),f=o[n]-s[n]+c/2;if(f<d){f=d}if(f>u){f=u}e.wrapper.removeClass(p).addClass("km-"+l);e.arrow.css(n,f).show()}});var n=v.extend({init:function(e,t){var i=this,n;i.initialOpen=false;v.fn.init.call(i,e,t);n=h.extend({className:"km-popover-root",hide:function(){i.trigger(a)}},this.options.popup);i.popup=new o(i.element,n);i.popup.overlay.on("move",function(e){if(e.target==i.popup.overlay[0]){e.preventDefault()}});i.pane=new r.Pane(i.element,h.extend(this.options.pane,{$angular:this.options.$angular}));l.notify(i,r)},options:{name:"PopOver",popup:{},pane:{}},events:[i,a],open:function(e){this.popup.show(e);if(!this.initialOpen){if(!this.pane.navigateToInitial()){this.pane.navigate("")}this.popup.popup._position();this.initialOpen=true}else{this.pane.view()._invokeNgController()}},openFor:function(e){this.open(e);this.trigger(i,{target:this.popup.target()})},close:function(){this.popup.hide()},destroy:function(){v.fn.destroy.call(this);this.pane.destroy();this.popup.destroy();l.destroy(this.element)}});r.plugin(o);r.plugin(n)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.mobile.shim",["kendo.popup"],e)})(function(){var e={id:"mobile.shim",name:"Shim",category:"mobile",description:"Mobile Shim",depends:["popup"],hidden:true};(function(f,e){var h=window.kendo,t=h.mobile.ui,p=h.ui.Popup,v='<div class="km-shim"></div>',m="hide",g=t.Widget;var i=g.extend({init:function(e,t){var i=this,n=h.mobile.application,r=h.support.mobileOS,a=n?n.os.name:r?r.name:"ios",o=a==="ios"||a==="wp"||(n?n.os.skin:false),s=a==="blackberry",l=t.align||(o?"bottom center":s?"center right":"center center"),d=t.position||(o?"bottom center":s?"center right":"center center"),u=t.effect||(o?"slideIn:up":s?"slideIn:left":"fade:in"),c=f(v).handler(i).hide();g.fn.init.call(i,e,t);i.shim=c;e=i.element;t=i.options;if(t.className){i.shim.addClass(t.className)}if(!t.modal){i.shim.on("down","_hide")}(n?n.element:f(document.body)).append(c);i.popup=new p(i.element,{anchor:c,modal:true,appendTo:c,origin:l,position:d,animation:{open:{effects:u,duration:t.duration},close:{duration:t.duration}},close:function(e){var t=false;if(!i._apiCall){t=i.trigger(m)}if(t){e.preventDefault()}i._apiCall=false},deactivate:function(){c.hide()},open:function(){c.show()}});h.notify(i)},events:[m],options:{name:"Shim",modal:false,align:e,position:e,effect:e,duration:200},show:function(){this.popup.open()},hide:function(){this._apiCall=true;this.popup.close()},destroy:function(){g.fn.destroy.call(this);this.shim.kendoDestroy();this.popup.destroy();this.shim.remove()},_hide:function(e){if(!e||!f.contains(this.shim.children().children(".k-popup")[0],e.target)){this.popup.close()}}});t.plugin(i)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.mobile.modalview",["kendo.mobile.shim","kendo.mobile.view"],e)})(function(){var e={id:"mobile.modalview",name:"ModalView",category:"mobile",description:"The Kendo ModalView is used to present self-contained functionality in the context of the current task.",depends:["mobile.shim","mobile.view"]};(function(i,e){var t=window.kendo,n=t.mobile.ui,r=n.Shim,a=n.Widget,o="beforeOpen",s="open",l="close",d="init",u='<div class="km-modalview-wrapper"></div>';var c=n.View.extend({init:function(e,t){var i=this;a.fn.init.call(i,e,t);i._id();i._wrap();i._shim();if(!this.options.$angular){i._layout();i._scroller();i._model()}i.element.css("display","");i.trigger(d)},events:[d,o,s,l],options:{name:"ModalView",modal:true,width:null,height:null},destroy:function(){a.fn.destroy.call(this);this.shim.destroy()},open:function(e){var t=this;t.target=i(e);t.shim.show();t._invokeNgController();t.trigger("show",{view:t})},openFor:function(e){if(!this.trigger(o,{target:e})){this.open(e);this.trigger(s,{target:e})}},close:function(){if(this.element.is(":visible")&&!this.trigger(l)){this.shim.hide()}},_wrap:function(){var e=this,t=e.element,i=e.options,n,r;n=t[0].style.width||"auto";r=t[0].style.height||"auto";t.addClass("km-modalview").wrap(u);e.wrapper=t.parent().css({width:i.width||n||300,height:i.height||r||300}).addClass(r=="auto"?" km-auto-height":"");t.css({width:"",height:""})},_shim:function(){var t=this;t.shim=new r(t.wrapper,{modal:t.options.modal,position:"center center",align:"center center",effect:"fade:in",className:"km-modalview-root",hide:function(e){if(t.trigger(l)){e.preventDefault()}}})}});n.plugin(c)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.mobile.drawer",["kendo.mobile.view","kendo.userevents"],e)})(function(){var e={id:"mobile.drawer",name:"Drawer",category:"mobile",description:"The Kendo Mobile Drawer widget provides slide to reveal global application toolbox",depends:["mobile.view","userevents"]};(function(s,e){var l=window.kendo,d=l.mobile,t=l.support.mobileOS,r=l.effects.Transition,u=l.roleSelector,a="x",i=d.ui,c=!(t.ios&&t.majorVersion==7&&!t.appMode),n="beforeShow",f="init",o="show",h="hide",p="afterHide",v={enable:s.noop};var m=i.View.extend({init:function(e,t){s(e).parent().prepend(e);d.ui.Widget.fn.init.call(this,e,t);if(!this.options.$angular){this._layout();this._scroller()}this._model();var i=this.element.closest(u("pane")).data("kendoMobilePane"),n;if(i){this.pane=i;this.pane.bind("viewShow",function(e){a._viewShow(e)});this.pane.bind("sameViewRequested",function(){a.hide()});n=this.userEvents=new l.UserEvents(i.element,{fastTap:true,filter:u("view splitview"),allowSelection:true})}else{this.currentView=v;var r=s(this.options.container);if(!r){throw new Error("The drawer needs a container configuration option set.")}n=this.userEvents=new l.UserEvents(r,{fastTap:true,allowSelection:true});this._attachTransition(r)}var a=this;var o=function(e){if(a.visible){a.hide();e.preventDefault()}};if(this.options.swipeToOpen&&c){n.bind("press",function(){a.transition.cancel()});n.bind("start",function(e){a._start(e)});n.bind("move",function(e){a._update(e)});n.bind("end",function(e){a._end(e)});n.bind("tap",o)}else{n.bind("press",o)}this.leftPositioned=this.options.position==="left";this.visible=false;this.element.hide().addClass("km-drawer").addClass(this.leftPositioned?"km-left-drawer":"km-right-drawer");this.trigger(f)},options:{name:"Drawer",position:"left",views:[],swipeToOpenViews:[],swipeToOpen:true,title:"",container:null},events:[n,h,p,f,o],show:function(){if(this._activate()){this._show()}},hide:function(){if(!this.currentView){return}this.currentView.enable();m.current=null;this._moveViewTo(0);this.trigger(h,{view:this})},openFor:function(){if(this.visible){this.hide()}else{this.show()}},destroy:function(){i.View.fn.destroy.call(this);this.userEvents.destroy()},_activate:function(){if(this.visible){return true}var e=this._currentViewIncludedIn(this.options.views);if(!e||this.trigger(n,{view:this})){return false}this._setAsCurrent();this.element.show();this.trigger(o,{view:this});this._invokeNgController();return true},_currentViewIncludedIn:function(e){if(!this.pane||!e.length){return true}var t=this.pane.view();return s.inArray(t.id.replace("#",""),e)>-1||s.inArray(t.element.attr("id"),e)>-1},_show:function(){this.currentView.enable(false);this.visible=true;var e=this.element.width();if(!this.leftPositioned){e=-e}this._moveViewTo(e)},_setAsCurrent:function(){if(m.last!==this){if(m.last){m.last.element.hide()}this.element.show()}m.last=this;m.current=this},_moveViewTo:function(e){this.userEvents.cancel();this.transition.moveTo({location:e,duration:400,ease:r.easeOutExpo})},_viewShow:function(e){if(this.currentView){this.currentView.enable()}if(this.currentView===e.view){this.hide();return}this.currentView=e.view;this._attachTransition(e.view.element)},_attachTransition:function(e){var t=this,i=this.movable,n=i&&i.x;if(this.transition){this.transition.cancel();this.movable.moveAxis("x",0)}i=this.movable=new l.ui.Movable(e);this.transition=new r({axis:a,movable:this.movable,onEnd:function(){if(i[a]===0){e[0].style.cssText="";t.element.hide();t.trigger(p);t.visible=false}}});if(n){e.addClass("k-fx-hidden");l.animationFrame(function(){e.removeClass("k-fx-hidden");t.movable.moveAxis(a,n);t.hide()})}},_start:function(e){var t=e.sender;if(Math.abs(e.x.velocity)<Math.abs(e.y.velocity)||l.triggeredByInput(e.event)||!this._currentViewIncludedIn(this.options.swipeToOpenViews)){t.cancel();return}var i=this.leftPositioned,n=this.visible,r=i&&n||!i&&!m.current,a=!i&&n||i&&!m.current,o=e.x.velocity<0;if(r&&o||a&&!o){if(this._activate()){t.capture();return}}t.cancel()},_update:function(e){var t=this.movable,i=t.x+e.x.delta,n;if(this.leftPositioned){n=Math.min(Math.max(0,i),this.element.width())}else{n=Math.max(Math.min(0,i),-this.element.width())}this.movable.moveAxis(a,n);e.event.preventDefault();e.event.stopPropagation()},_end:function(e){var t=e.x.velocity,i=Math.abs(this.movable.x)>this.element.width()/2,n=.8,r;if(this.leftPositioned){r=t>-n&&(t>n||i)}else{r=t<n&&(t<-n||i)}if(r){this._show()}else{this.hide()}}});i.plugin(m)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.mobile.splitview",["kendo.mobile.pane"],e)})(function(){var e={id:"mobile.splitview",name:"SplitView",category:"mobile",description:"The mobile SplitView is a tablet-specific view that consists of two or more mobile Pane widgets.",depends:["mobile.pane"]};(function(a,e){var o=window.kendo,s=o.mobile.ui,l=s.Widget,d="<div class='km-expanded-pane-shim'></div>",t=s.View;var i=t.extend({init:function(e,i){var t=this,n,r;l.fn.init.call(t,e,i);e=t.element;a.extend(t,i);t._id();if(!t.options.$angular){t._layout();t._overlay()}else{t._overlay()}t._style();r=e.children(t._locate("modalview"));if(!t.options.$angular){o.mobile.init(r)}else{r.each(function(e,t){o.compileMobileDirective(a(t),i.$angular[0])})}t.panes=[];t._paramsHistory=[];if(!t.options.$angular){t.content.children(o.roleSelector("pane")).each(function(){n=o.initWidget(this,{},s.roles);t.panes.push(n)})}else{t.element.children(o.directiveSelector("pane")).each(function(){n=o.compileMobileDirective(a(this),i.$angular[0]);t.panes.push(n)});t.element.children(o.directiveSelector("header footer")).each(function(){o.compileMobileDirective(a(this),i.$angular[0])})}t.expandedPaneShim=a(d).appendTo(t.element);t._shimUserEvents=new o.UserEvents(t.expandedPaneShim,{fastTap:true,tap:function(){t.collapsePanes()}})},_locate:function(e){return this.options.$angular?o.directiveSelector(e):o.roleSelector(e)},options:{name:"SplitView",style:"horizontal"},expandPanes:function(){this.element.addClass("km-expanded-splitview")},collapsePanes:function(){this.element.removeClass("km-expanded-splitview")},_layout:function(){var e=this,t=e.element;e.transition=o.attrValue(t,"transition");o.mobile.ui.View.prototype._layout.call(this);o.mobile.init(this.header.add(this.footer));e.element.addClass("km-splitview");e.content.addClass("km-split-content")},_style:function(){var e=this.options.style,t=this.element,i;if(e){i=e.split(" ");a.each(i,function(){t.addClass("km-split-"+this)})}},showStart:function(){var e=this;e.element.css("display","");if(!e.inited){e.inited=true;a.each(e.panes,function(){if(this.options.initial){this.navigateToInitial()}else{this.navigate("")}});e.trigger("init",{view:e})}else{this._invokeNgController()}e.trigger("show",{view:e})}});s.plugin(i)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.mobile.application",["kendo.mobile.pane","kendo.router"],e)})(function(){var e={id:"mobile.application",name:"Application",category:"mobile",description:"The Mobile application provides a framework to build native looking web applications on mobile devices.",depends:["mobile.pane","router"]};(function(a,n){var o=window.kendo,i=o.mobile,r=o.support,s=i.ui.Widget,l=i.ui.Pane,d="ios7",u=r.mobileOS,c=u.device=="blackberry"&&u.flatVersion>=600&&u.flatVersion<1e3&&u.appMode,f=.93,t="km-vertical",h=u.browser==="chrome",p=u.ios&&u.flatVersion>=700&&u.flatVersion<800&&(u.appMode||h),v=Math.abs(window.orientation)/90==1,m="km-horizontal",g={ios7:{ios:true,browser:"default",device:"iphone",flatVersion:"700",majorVersion:"7",minorVersion:"0.0",name:"ios",tablet:false},ios:{ios:true,browser:"default",device:"iphone",flatVersion:"612",majorVersion:"6",minorVersion:"1.2",name:"ios",tablet:false},android:{android:true,browser:"default",device:"android",flatVersion:"442",majorVersion:"4",minorVersion:"4.2",name:"android",tablet:false},blackberry:{blackberry:true,browser:"default",device:"blackberry",flatVersion:"710",majorVersion:"7",minorVersion:"1.0",name:"blackberry",tablet:false},meego:{meego:true,browser:"default",device:"meego",flatVersion:"850",majorVersion:"8",minorVersion:"5.0",name:"meego",tablet:false},wp:{wp:true,browser:"default",device:"wp",flatVersion:"800",majorVersion:"8",minorVersion:"0.0",name:"wp",tablet:false}},_=o.template('<meta content="initial-scale=#: data.scale #, maximum-scale=#: data.scale #, user-scalable=no#=data.height#" name="viewport" />',{usedWithBlock:false}),b=o.template("<meta name=\"apple-mobile-web-app-capable\" content=\"#= data.webAppCapable === false ? 'no' : 'yes' #\" /> "+'<meta name="apple-mobile-web-app-status-bar-style" content="#=data.statusBarStyle#" /> '+'<meta name="msapplication-tap-highlight" content="no" /> ',{usedWithBlock:false}),w=o.template("<style>.km-view { clip: rect(0 #= data.width #px #= data.height #px 0); }</style>",{usedWithBlock:false}),k=u.android&&u.browser!="chrome"||u.blackberry,y=o.template('<link rel="apple-touch-icon'+(u.android?"-precomposed":"")+'" # if(data.size) { # sizes="#=data.size#" #}# href="#=data.icon#" />',{usedWithBlock:false}),x=(u.device=="iphone"||u.device=="ipod")&&u.majorVersion<7,e=(u.device=="iphone"||u.device=="ipod")&&u.majorVersion>=7,C=e?"none":null,S=u.browser=="mobilesafari"?60:0,T=20,D=a(window),A=window.screen,E=a("head"),I="init",B=a.proxy;function L(e,t){var i=[];if(u){i.push("km-on-"+u.name)}if(e.skin){i.push("km-"+e.skin)}else{if(e.name=="ios"&&e.majorVersion>6){i.push("km-ios7")}else{i.push("km-"+e.name)}}if(e.name=="ios"&&e.majorVersion<7||e.name!="ios"){i.push("km-"+e.name+e.majorVersion)}i.push("km-"+e.majorVersion);i.push("km-m"+(e.minorVersion?e.minorVersion[0]:0));if(e.variant&&(e.skin&&e.skin===e.name||!e.skin||e.setDefaultPlatform===false)){i.push("km-"+(e.skin?e.skin:e.name)+"-"+e.variant)}if(e.cordova){i.push("km-cordova")}if(e.appMode){i.push("km-app")}else{i.push("km-web")}if(t&&t.statusBarStyle){i.push("km-"+t.statusBarStyle+"-status-bar")}return i.join(" ")}function H(e){return"km-wp-"+(e.noVariantSet?parseInt(a("<div style='background: Background' />").css("background-color").split(",")[1],10)===0?"dark":"light":e.variant+" km-wp-"+e.variant+"-force")}function M(e){return u.wp?e.css("animation-name")=="-kendo-landscape":Math.abs(window.orientation)/90==1}function R(e){return M(e)?m:t}function F(e){e.parent().addBack().css("min-height",window.innerHeight)}function P(){a("meta[name=viewport]").remove();E.append(_({height:", width=device-width"+(M()?", height="+window.innerHeight+"px":r.mobileOS.flatVersion>=600&&r.mobileOS.flatVersion<700?", height="+window.innerWidth+"px":", height=device-height")}))}var z=s.extend({init:function(e,t){i.application=this;a(a.proxy(this,"bootstrap",e,t))},bootstrap:function(e,t){e=a(e);if(!e[0]){e=a(document.body)}s.fn.init.call(this,e,t);this.element.removeAttr("data-"+o.ns+"role");this._setupPlatform();this._attachMeta();this._setupElementClass();this._attachHideBarHandlers();var i=a.extend({},this.options);delete i.name;var n=this,r=function(){n.pane=new l(n.element,i);n.pane.navigateToInitial();if(n.options.updateDocumentTitle){n._setupDocumentTitle()}n._startHistory();n.trigger(I)};if(this.options.$angular){setTimeout(r)}else{r()}},options:{name:"Application",hideAddressBar:true,browserHistory:true,historyTransition:C,modelScope:window,statusBarStyle:"black",transition:"",retina:false,platform:null,skin:null,updateDocumentTitle:true,useNativeScrolling:false},events:[I],navigate:function(e,t){this.pane.navigate(e,t)},replace:function(e,t){this.pane.replace(e,t)},scroller:function(){return this.view().scroller},hideLoading:function(){if(this.pane){this.pane.hideLoading()}else{throw new Error("The mobile application instance is not fully instantiated. Please consider activating loading in the application init event handler.")}},showLoading:function(){if(this.pane){this.pane.showLoading()}else{throw new Error("The mobile application instance is not fully instantiated. Please consider activating loading in the application init event handler.")}},changeLoadingMessage:function(e){if(this.pane){this.pane.changeLoadingMessage(e)}else{throw new Error("The mobile application instance is not fully instantiated. Please consider changing the message in the application init event handler.")}},view:function(){return this.pane.view()},skin:function(e){var t=this;if(!arguments.length){return t.options.skin}t.options.skin=e||"";t.element[0].className="km-pane";t._setupPlatform();t._setupElementClass();return t.options.skin},destroy:function(){s.fn.destroy.call(this);this.pane.destroy();if(this.options.browserHistory){this.router.destroy()}},_setupPlatform:function(){var e=this,t=e.options.platform,i=e.options.skin,n=[],r=u||g[d];if(t){r.setDefaultPlatform=true;if(typeof t==="string"){n=t.split("-");r=a.extend({variant:n[1]},r,g[n[0]])}else{r=t}}if(i){n=i.split("-");if(!u){r.setDefaultPlatform=false}r=a.extend({},r,{skin:n[0],variant:n[1]})}if(!r.variant){r.noVariantSet=true;r.variant="dark"}e.os=r;e.osCssClass=L(e.os,e.options);if(r.name=="wp"){if(!e.refreshBackgroundColorProxy){e.refreshBackgroundColorProxy=a.proxy(function(){if(e.os.variant&&(e.os.skin&&e.os.skin===e.os.name)||!e.os.skin){e.element.removeClass("km-wp-dark km-wp-light km-wp-dark-force km-wp-light-force").addClass(H(e.os))}},e)}a(document).off("visibilitychange",e.refreshBackgroundColorProxy);a(document).off("resume",e.refreshBackgroundColorProxy);if(!r.skin){e.element.parent().css("overflow","hidden");a(document).on("visibilitychange",e.refreshBackgroundColorProxy);a(document).on("resume",e.refreshBackgroundColorProxy);e.refreshBackgroundColorProxy()}}},_startHistory:function(){if(this.options.browserHistory){this.router=new o.Router({pushState:this.options.pushState,root:this.options.root,hashBang:this.options.hashBang});this.pane.bindToRouter(this.router);this.router.start()}else{if(!this.options.initial){this.pane.navigate("")}}},_resizeToScreenHeight:function(){var e=a("meta[name=apple-mobile-web-app-status-bar-style]").attr("content").match(/black-translucent|hidden/),t=this.element,i;if(h){i=window.innerHeight}else{if(M(t)){if(e){if(v){i=A.availWidth+T}else{i=A.availWidth}}else{if(v){i=A.availWidth}else{i=A.availWidth-T}}}else{if(e){if(v){i=A.availHeight}else{i=A.availHeight+T}}else{if(v){i=A.availHeight-T}else{i=A.availHeight}}}}t.height(i)},_setupElementClass:function(){var e=this,t,i=e.element;i.parent().addClass("km-root km-"+(e.os.tablet?"tablet":"phone"));i.addClass(e.osCssClass+" "+R(i));if(this.options.useNativeScrolling){i.parent().addClass("km-native-scrolling")}if(h){i.addClass("km-ios-chrome")}if(r.wpDevicePixelRatio){i.parent().css("font-size",r.wpDevicePixelRatio+"em")}if(this.options.retina){i.parent().addClass("km-retina");i.parent().css("font-size",r.devicePixelRatio*f+"em")}if(c){P()}if(e.options.useNativeScrolling){i.parent().addClass("km-native-scrolling")}else if(k){t=(screen.availWidth>screen.availHeight?screen.availWidth:screen.availHeight)+200;a(w({width:t,height:t})).appendTo(E)}if(p){e._resizeToScreenHeight()}o.onResize(function(){i.removeClass("km-horizontal km-vertical").addClass(R(i));if(e.options.useNativeScrolling){F(i)}if(p){e._resizeToScreenHeight()}if(c){P()}o.resize(i)})},_clearExistingMeta:function(){E.find("meta").filter("[name|='apple-mobile-web-app'],[name|='msapplication-tap'],[name='viewport']").remove()},_attachMeta:function(){var e=this.options,t=e.icon,i;this._clearExistingMeta();if(!c){E.prepend(_({height:"",scale:this.options.retina?1/r.devicePixelRatio:"1.0"}))}E.prepend(b(e));if(t){if(typeof t==="string"){t={"":t}}for(i in t){E.prepend(y({icon:t[i],size:i}))}}if(e.useNativeScrolling){F(this.element)}},_attachHideBarHandlers:function(){var e=this,t=B(e,"_hideBar");if(r.mobileOS.appMode||!e.options.hideAddressBar||!x||e.options.useNativeScrolling){return}e._initialHeight={};D.on("load",t);o.onResize(function(){setTimeout(window.scrollTo,0,0,1)})},_setupDocumentTitle:function(){var e=this,i=document.title;e.pane.bind("viewShow",function(e){var t=e.view.title;document.title=t!==n?t:i})},_hideBar:function(){var e=this,t=e.element;t.height(o.support.transforms.css+"calc(100% + "+S+"px)");a(window).trigger(o.support.resize)}});o.mobile.Application=z;o.ui.plugin(z,o.mobile,"Mobile")})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.mobile.actionsheet",["kendo.mobile.popover","kendo.mobile.shim"],e)})(function(){var e={id:"mobile.actionsheet",name:"ActionSheet",category:"mobile",description:"The mobile ActionSheet widget displays a set of choices related to a task the user initiates.",depends:["mobile.popover","mobile.shim"]};(function(s,e){var l=window.kendo,d=l.support,u=l.mobile.ui,c=u.Shim,f=u.Popup,h=u.Widget,n="open",t="close",a="command",p="li>a",r="actionsheetContext",v='<div class="km-actionsheet-wrapper"></div>',m=l.template('<li class="km-actionsheet-cancel"><a href="\\#">#:cancel#</a></li>');var i=h.extend({init:function(e,t){var i=this,n,r,a,o=d.mobileOS;h.fn.init.call(i,e,t);t=i.options;a=t.type;e=i.element;if(a==="auto"){r=o&&o.tablet}else{r=a==="tablet"}n=r?f:c;if(t.cancelTemplate){m=l.template(t.cancelTemplate)}e.addClass("km-actionsheet").append(m({cancel:i.options.cancel})).wrap(v).on("up",p,"_click").on("click",p,l.preventDefault);i.view().bind("destroy",function(){i.destroy()});i.wrapper=e.parent().addClass(a?" km-actionsheet-"+a:"");i.shim=new n(i.wrapper,s.extend({modal:o.ios&&o.majorVersion<7,className:"km-actionsheet-root"},i.options.popup));i._closeProxy=s.proxy(i,"_close");i._shimHideProxy=s.proxy(i,"_shimHide");i.shim.bind("hide",i._shimHideProxy);if(r){l.onResize(i._closeProxy)}l.notify(i,u)},events:[n,t,a],options:{name:"ActionSheet",cancel:"Cancel",type:"auto",popup:{height:"auto"}},open:function(e,t){var i=this;i.target=s(e);i.context=t;i.shim.show(e)},close:function(){this.context=this.target=null;this.shim.hide()},openFor:function(e){var t=this,i=e.data(r);t.open(e,i);t.trigger(n,{target:e,context:i})},destroy:function(){h.fn.destroy.call(this);l.unbindResize(this._closeProxy);this.shim.destroy()},_click:function(e){if(e.isDefaultPrevented()){return}var t=s(e.currentTarget);var i=t.data("action");if(i){var n={target:this.target,context:this.context},r=this.options.$angular;if(r){this.element.injector().get("$parse")(i)(r[0])(n)}else{l.getter(i)(window)(n)}}this.trigger(a,{target:this.target,context:this.context,currentTarget:t});e.preventDefault();this._close()},_shimHide:function(e){if(!this.trigger(t)){this.context=this.target=null}else{e.preventDefault()}},_close:function(e){if(!this.trigger(t)){this.close()}else{e.preventDefault()}}});u.plugin(i)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.mobile.button",["kendo.userevents"],e)})(function(){var e={id:"mobile.button",name:"Button",category:"mobile",description:"The Button widget navigates between mobile Application views when pressed.",depends:["userevents"]};(function(s,e){var r=window.kendo,t=r.mobile,i=t.ui,a=i.Widget,n=r.support,o=n.mobileOS,l=o.android&&o.flatVersion>=300,d="click",u="disabled",c="km-state-disabled";function f(e,t,i){s(t.target).closest(".km-button,.km-detail").toggleClass("km-state-active",i);if(l&&e.deactivateTimeoutID){clearTimeout(e.deactivateTimeoutID);e.deactivateTimeoutID=0}}function h(e){return s('<span class="km-badge">'+e+"</span>")}var p=a.extend({init:function(e,t){var i=this;a.fn.init.call(i,e,t);var n=i.options.clickOn==="up";i._wrap();i._style();if(!n){i.element.attr("data-navigate-on-press",true)}i.options.enable=i.options.enable&&!i.element.attr(u);i.enable(i.options.enable);i._userEvents=new r.UserEvents(i.element,{allowSelection:!n,fastTap:true,press:function(e){i._activate(e)},release:function(e){f(i,e,false);if(!n){e.event.stopPropagation()}}});i._userEvents.bind(n?"tap":"press",function(e){i._release(e)});if(l){i.element.on("move",function(e){i._timeoutDeactivate(e)})}},destroy:function(){a.fn.destroy.call(this);this._userEvents.destroy()},events:[d],options:{name:"Button",icon:"",style:"",badge:"",clickOn:"up",enable:true},badge:function(e){var t=this.badgeElement=this.badgeElement||h(e).appendTo(this.element);if(e||e===0){t.html(e);return this}if(e===false){t.empty().remove();this.badgeElement=false;return this}return t.html()},enable:function(e){var t=this.element;if(typeof e=="undefined"){e=true}this.options.enable=e;if(e){t.removeAttr(u)}else{t.attr(u,u)}t.toggleClass(c,!e)},_timeoutDeactivate:function(e){if(!this.deactivateTimeoutID){this.deactivateTimeoutID=setTimeout(f,500,this,e,false)}},_activate:function(e){var t=document.activeElement,i=t?t.nodeName:"";if(this.options.enable){f(this,e,true);if(i=="INPUT"||i=="TEXTAREA"){t.blur()}}},_release:function(e){var t=this;if(e.which>1){return}if(!t.options.enable){e.preventDefault();return}if(t.trigger(d,{target:s(e.target),button:t.element})){e.preventDefault()}},_style:function(){var e=this.options.style,t=this.element,i;if(e){i=e.split(" ");s.each(i,function(){t.addClass("km-"+this)})}},_wrap:function(){var e=this,t=e.options.icon,i=e.options.badge,n='<span class="km-icon km-'+t,r=e.element.addClass("km-button"),a=r.children("span:not(.km-icon)").addClass("km-text"),o=r.find("img").addClass("km-image");if(!a[0]&&r.html()){a=r.wrapInner('<span class="km-text" />').children("span.km-text")}if(!o[0]&&t){if(!a[0]){n+=" km-notext"}e.iconElement=r.prepend(s(n+'" />'))}if(i||i===0){e.badgeElement=h(i).appendTo(r)}}});var v=p.extend({options:{name:"BackButton",style:"back"},init:function(e,t){var i=this;p.fn.init.call(i,e,t);if(typeof i.element.attr("href")==="undefined"){i.element.attr("href","#:back")}}});var m=p.extend({options:{name:"DetailButton",style:""},init:function(e,t){p.fn.init.call(this,e,t)},_style:function(){var e=this.options.style+" detail",t=this.element;if(e){var i=e.split(" ");s.each(i,function(){t.addClass("km-"+this)})}},_wrap:function(){var e=this,t=e.options.icon,i='<span class="km-icon km-'+t,n=e.element,r=n.children("span"),a=n.find("img").addClass("km-image");if(!a[0]&&t){if(!r[0]){i+=" km-notext"}n.prepend(s(i+'" />'))}}});i.plugin(p);i.plugin(v);i.plugin(m)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.mobile.buttongroup",["kendo.core"],e)})(function(){var e={id:"mobile.buttongroup",name:"ButtonGroup",category:"mobile",description:"The Kendo mobile ButtonGroup widget is a linear set of grouped buttons.",depends:["core"]};(function(a,n){var o=window.kendo,e=o.mobile.ui,r=e.Widget,s="state-active",l="state-disabled",t="select",d="li:not(.km-"+s+")";function u(e){return"k-"+e+" km-"+e}function c(e){return a('<span class="'+u("badge")+'">'+e+"</span>")}var i=r.extend({init:function(e,t){var i=this;r.fn.init.call(i,e,t);i.element.addClass("km-buttongroup k-widget k-widget-2021 k-button-group").find("li").each(i._button);i.element.on(i.options.selectOn,d,"_select");i._enable=true;i.select(i.options.index);if(!i.options.enable){i._enable=false;i.wrapper.addClass(u(l))}},events:[t],options:{name:"ButtonGroup",selectOn:"down",index:-1,enable:true},current:function(){return this.element.find(".km-"+s)},select:function(e){var t=this,i=-1;if(e===n||e===-1||!t._enable||a(e).is(".km-"+l)){return}t.current().removeClass(u(s));if(typeof e==="number"){i=e;e=a(t.element[0].children[e])}else if(e.nodeType){e=a(e);i=e.index()}e.addClass(u(s));t.selectedIndex=i},badge:function(e,t){var i=this.element,n;if(!isNaN(e)){e=i.children().get(e)}e=i.find(e);n=a(e.children(".km-badge")[0]||c(t).appendTo(e));if(t||t===0){n.html(t);return this}if(t===false){n.empty().remove();return this}return n.html()},enable:function(e){if(typeof e=="undefined"){e=true}this.wrapper.toggleClass(u(l),!e);this._enable=this.options.enable=e},_button:function(){var e=a(this).addClass(u("button")),t=o.attrValue(e,"icon"),i=o.attrValue(e,"badge"),n=e.children("span"),r=e.find("img").addClass(u("image"));if(!n[0]){n=e.wrapInner("<span/>").children("span")}n.addClass(u("text"));if(!r[0]&&t){e.prepend(a('<span class="'+u("icon")+" "+u(t)+'"/>'))}if(i||i===0){c(i).appendTo(e)}},_select:function(e){if(e.which>1||e.isDefaultPrevented()||!this._enable){return}this.select(e.currentTarget);this.trigger(t,{index:this.selectedIndex})}});e.plugin(i)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.mobile.collapsible",["kendo.core"],e)})(function(){var e={id:"mobile.collapsible",name:"Collapsible",category:"mobile",description:"The Kendo mobile Collapsible widget provides ability for creating collapsible blocks of content.",depends:["core","userevents"]};(function(r,e){var a=window.kendo,t=a.mobile.ui,o=t.Widget,s="km-collapsible",i="km-collapsible-header",n="km-collapsible-content",l="km-collapsibleinset",d="<div data-role='collapsible-header' class='"+i+"'></div>",u="<div data-role='collapsible-content' class='"+n+"'></div>",c="km-collapsed",f="km-expanded",h="km-animated",p="left",v="expand",m="collapse";var g=o.extend({init:function(e,t){var i=this,n=r(e);o.fn.init.call(i,n,t);n.addClass(s);i._buildHeader();i.content=n.children().not(i.header).wrapAll(u).parent();i._userEvents=new a.UserEvents(i.header,{fastTap:true,tap:function(){i.toggle()}});n.addClass(i.options.collapsed?c:f);if(i.options.inset){n.addClass(l)}if(i.options.animation){i.content.addClass(h);i.content.height(0);if(i.options.collapsed){i.content.hide()}}else if(i.options.collapsed){i.content.hide()}},events:[v,m],options:{name:"Collapsible",collapsed:true,collapseIcon:"arrow-n",expandIcon:"arrow-s",iconPosition:p,animation:true,inset:false},destroy:function(){o.fn.destroy.call(this);this._userEvents.destroy()},expand:function(e){var t=this.options.collapseIcon,i=this.content,n=a.support.mobileOS.ios;if(!this.trigger(v)){if(t){this.header.find(".km-icon").removeClass().addClass("km-icon km-"+t)}this.element.removeClass(c).addClass(f);if(this.options.animation&&!e){i.off("transitionend");i.show();if(n){i.removeClass(h)}i.height(this._getContentHeight());if(n){i.addClass(h)}a.resize(i)}else{i.show()}}},collapse:function(e){var t=this.options.expandIcon,i=this.content;if(!this.trigger(m)){if(t){this.header.find(".km-icon").removeClass().addClass("km-icon km-"+t)}this.element.removeClass(f).addClass(c);if(this.options.animation&&!e){i.one("transitionend",function(){i.hide()});i.height(0)}else{i.hide()}}},toggle:function(e){if(this.isCollapsed()){this.expand(e)}else{this.collapse(e)}},isCollapsed:function(){return this.element.hasClass(c)},resize:function(){if(!this.isCollapsed()&&this.options.animation){this.content.height(this._getContentHeight())}},_buildHeader:function(){var e=this.element.children(":header").wrapAll(d),t=r('<span class="km-icon"/>'),i=this.options.collapsed?this.options.expandIcon:this.options.collapseIcon,n=this.options.iconPosition;if(i){e.prepend(t);t.addClass("km-"+i)}this.header=e.parent();this.header.addClass("km-icon-"+n)},_getContentHeight:function(){var e=this.content.attr("style"),t;this.content.css({position:"absolute",visibility:"hidden",height:"auto"});t=this.content.height();this.content.attr("style",e?e:"");return t}});t.plugin(g)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.mobile.listview",["kendo.data","kendo.userevents","kendo.mobile.button"],e)})(function(){var e={id:"mobile.listview",name:"ListView",category:"mobile",description:"The Kendo Mobile ListView widget is used to display flat or grouped list of items.",depends:["data","userevents","mobile.button"]};(function(c,B){var f=window.kendo,e=window.Node,n=f.mobile,m=n.ui,r=f._outerHeight,i=f.data.DataSource,a=m.DataBoundWidget,o=".km-list > li, > li:not(.km-group-container)",s=".km-listview-link, .km-listview-label",t="["+f.attr("icon")+"]",l=c.proxy,d=f.attrValue,u="km-group-title",h="km-state-active",p='<div class="'+u+'"><div class="km-text"></div></div>',v=f.template('<li><div class="'+u+'"><div class="km-text">#= this.headerTemplate(data) #</div></div><ul>#= kendo.render(this.template, data.items)#</ul></li>'),g='<div class="km-listview-wrapper"></div>',_=f.template('<form class="km-filter-form"><div class="km-filter-wrap"><input type="search" placeholder="#=placeholder#"/><a href="\\#" class="km-filter-reset" title="Clear"><span class="km-icon km-clear"></span><span class="km-text">Clear</span></a></div></form>'),b=".kendoMobileListView",w="styled",k="dataBound",y="dataBinding",x="itemChange",C="click",S="change",T="progress",D="function",A=/^\s+$/,E=/button/;function I(){return this.nodeType===e.TEXT_NODE&&this.nodeValue.match(A)}function M(e,t){if(t&&!e[0].querySelector(".km-icon")){e.prepend('<span class="km-icon km-'+t+'"/>')}}function L(e){M(e,d(e,"icon"));M(e,d(e.children(t),"icon"))}function H(e){var t=e.parent(),i=e.add(t.children(f.roleSelector("detailbutton"))),n=t.contents().not(i).not(I);if(n.length){return}e.addClass("km-listview-link").attr(f.attr("role"),"listview-link");M(e,d(t,"icon"));M(e,d(e,"icon"))}function N(e){if(!e[0].querySelector("input[type=checkbox],input[type=radio]")){return}var t=e.parent();if(t.contents().not(e).not(function(){return this.nodeType==3})[0]){return}e.addClass("km-listview-label");e.children("[type=checkbox],[type=radio]").addClass("km-widget km-icon km-check")}function R(e,t){c(e).css("transform","translate3d(0px, "+t+"px, 0px)")}var O=f.Class.extend({init:function(e){var t=e.scroller();if(!t){return}this.options=e.options;this.element=e.element;this.scroller=e.scroller();this._shouldFixHeaders();var i=this;var n=function(){i._cacheHeaders()};e.bind("resize",n);e.bind(w,n);e.bind(k,n);this._scrollHandler=function(e){i._fixHeader(e)};t.bind("scroll",this._scrollHandler)},destroy:function(){var e=this;if(e.scroller){e.scroller.unbind("scroll",e._scrollHandler)}},_fixHeader:function(e){if(!this.fixedHeaders){return}var t=0,i=this.scroller,n=this.headers,r=e.scrollTop,a,o,s;do{a=n[t++];if(!a){s=c("<div />");break}o=a.offset;s=a.header}while(o+1>r);if(this.currentHeader!=t){i.fixedContainer.html(s.clone());this.currentHeader=t}},_shouldFixHeaders:function(){this.fixedHeaders=this.options.type==="group"&&this.options.fixedHeaders},_cacheHeaders:function(){this._shouldFixHeaders();if(!this.fixedHeaders){return}var i=[],n=this.scroller.scrollTop;this.element.find("."+u).each(function(e,t){t=c(t);i.unshift({offset:t.position().top+n,header:t})});this.headers=i;this._fixHeader({scrollTop:n})}});var V=function(){return{page:1}};var W=f.Class.extend({init:function(e){var t=this,i=e.options,n=e.scroller(),r=i.pullParameters||V;this.listView=e;this.scroller=n;e.bind("_dataSource",function(e){t.setDataSource(e.dataSource)});n.setOptions({pullToRefresh:true,pull:function(){if(!t._pulled){t._pulled=true;t.dataSource.read(r.call(e,t._first))}},messages:{pullTemplate:i.messages.pullTemplate,releaseTemplate:i.messages.releaseTemplate,refreshTemplate:i.messages.refreshTemplate}})},setDataSource:function(e){var t=this;this._first=e.view()[0];this.dataSource=e;e.bind("change",function(){t._change()});e.bind("error",function(){t._change()})},_change:function(){var e=this.scroller,t=this.dataSource;if(this._pulled){e.pullHandled()}if(this._pulled||!this._first){var i=t.view();if(i[0]){this._first=i[0]}}this._pulled=false}});var F=f.Observable.extend({init:function(e){var t=this;f.Observable.fn.init.call(t);t.buffer=e.buffer;t.height=e.height;t.item=e.item;t.items=[];t.footer=e.footer;t.buffer.bind("reset",function(){t.refresh()})},refresh:function(){var e=this.buffer,t=this.items,i=false;while(t.length){t.pop().destroy()}this.offset=e.offset;var n=this.item,r,a;for(var o=0;o<e.viewSize;o++){if(o===e.total()){i=true;break}a=n(this.content(this.offset+t.length));a.below(r);r=a;t.push(a)}this.itemCount=t.length;this.trigger("reset");this._resize();if(i){this.trigger("endReached")}},totalHeight:function(){if(!this.items[0]){return 0}var e=this,t=e.items,i=t[0].top,n=t[t.length-1].bottom,r=(n-i)/e.itemCount,a=e.buffer.length-e.offset-e.itemCount;return(this.footer?this.footer.height:0)+n+a*r},batchUpdate:function(e){var t=this.height(),i=this.items,n,r=this.offset;if(!i[0]){return}if(this.lastDirection){while(i[i.length-1].bottom>e+t*2){if(this.offset===0){break}this.offset--;n=i.pop();n.update(this.content(this.offset));n.above(i[0]);i.unshift(n)}}else{while(i[0].top<e-t){var a=this.offset+this.itemCount;if(a===this.buffer.total()){this.trigger("endReached");break}if(a===this.buffer.length){break}n=i.shift();n.update(this.content(this.offset+this.itemCount));n.below(i[i.length-1]);i.push(n);this.offset++}}if(r!==this.offset){this._resize()}},update:function(e){var t=this,i=this.items,n,r,a,o=this.height(),s=this.itemCount,l=o/2,d=(this.lastTop||0)>e,u=e-l,c=e+o+l;if(!i[0]){return}this.lastTop=e;this.lastDirection=d;if(d){if(i[0].top>u&&i[i.length-1].bottom>c+l&&this.offset>0){this.offset--;n=i.pop();r=i[0];n.update(this.content(this.offset));i.unshift(n);n.above(r);t._resize()}}else{if(i[i.length-1].bottom<c&&i[0].top<u-l){var f=this.offset+s;if(f===this.buffer.total()){this.trigger("endReached")}else if(f!==this.buffer.length){n=i.shift();a=i[i.length-1];i.push(n);n.update(this.content(this.offset+this.itemCount));t.offset++;n.below(a);t._resize()}}}},content:function(e){return this.buffer.at(e)},destroy:function(){this.unbind()},_resize:function(){var e=this.items,t=0,i=0,n=e[0],r=e[e.length-1];if(n){t=n.top;i=r.bottom}this.trigger("resize",{top:t,bottom:i});if(this.footer){this.footer.below(r)}}});f.mobile.ui.VirtualList=F;var U=f.Class.extend({init:function(e,t){var i=e.append([t],true)[0],n=i.offsetHeight;c.extend(this,{top:0,element:i,listView:e,height:n,bottom:n})},update:function(e){this.element=this.listView.setDataItem(this.element,e)},above:function(e){if(e){this.height=this.element.offsetHeight;this.top=e.top-this.height;this.bottom=e.top;R(this.element,this.top)}},below:function(e){if(e){this.height=this.element.offsetHeight;this.top=e.bottom;this.bottom=this.top+this.height;R(this.element,this.top)}},destroy:function(){f.destroy(this.element);c(this.element).remove()}});var P='<div><span class="km-icon"></span><span class="km-loading-left"></span><span class="km-loading-right"></span></div>';var z=f.Class.extend({init:function(e){this.element=c('<li class="km-load-more km-scroller-refresh" style="display: none"></li>').appendTo(e.element);this._loadIcon=c(P).appendTo(this.element)},enable:function(){this.element.show();this.height=r(this.element,true)},disable:function(){this.element.hide();this.height=0},below:function(e){if(e){this.top=e.bottom;this.bottom=this.height+this.top;R(this.element,this.top)}}});var j=z.extend({init:function(e,t){this._loadIcon=c(P).hide();this._loadButton=c('<a class="km-load">'+e.options.messages.loadMoreText+"</a>").hide();this.element=c('<li class="km-load-more" style="display: none"></li>').append(this._loadIcon).append(this._loadButton).appendTo(e.element);var i=this;this._loadButton.kendoMobileButton().data("kendoMobileButton").bind("click",function(){i._hideShowButton();t.next()});t.bind("resize",function(){i._showLoadButton()});this.height=r(this.element,true);this.disable()},_hideShowButton:function(){this._loadButton.hide();this.element.addClass("km-scroller-refresh");this._loadIcon.css("display","block")},_showLoadButton:function(){this._loadButton.show();this.element.removeClass("km-scroller-refresh");this._loadIcon.hide()}});var G=f.Class.extend({init:function(e){var t=this;this.chromeHeight=r(e.wrapper.children().not(e.element));this.listView=e;this.scroller=e.scroller();this.options=e.options;e.bind("_dataSource",function(e){t.setDataSource(e.dataSource,e.empty)});e.bind("resize",function(){if(!t.list.items.length){return}t.scroller.reset();t.buffer.range(0);t.list.refresh()});this.scroller.makeVirtual();this._scroll=function(e){t.list.update(e.scrollTop)};this.scroller.bind("scroll",this._scroll);this._scrollEnd=function(e){t.list.batchUpdate(e.scrollTop)};this.scroller.bind("scrollEnd",this._scrollEnd)},destroy:function(){this.list.unbind();this.buffer.unbind();this.scroller.unbind("scroll",this._scroll);this.scroller.unbind("scrollEnd",this._scrollEnd)},setDataSource:function(e,t){var i=this,n=this.options,r=this.listView,a=r.scroller(),o=n.loadMore,s,l,d;this.dataSource=e;s=e.pageSize()||n.virtualViewSize;if(!s&&!t){throw new Error("the DataSource does not have page size configured. Page Size setting is mandatory for the mobile listview virtual scrolling to work as expected.")}if(this.buffer){this.buffer.destroy()}l=new f.data.Buffer(e,Math.floor(s/2),o);if(o){d=new j(r,l)}else{d=new z(r)}if(this.list){this.list.destroy()}var u=new F({buffer:l,footer:d,item:function(e){return new U(r,e)},height:function(){return a.height()}});u.bind("resize",function(){i.updateScrollerSize();r.updateSize()});u.bind("reset",function(){i.footer.enable()});u.bind("endReached",function(){d.disable();i.updateScrollerSize()});l.bind("expand",function(){u.lastDirection=false;u.batchUpdate(a.scrollTop)});c.extend(this,{buffer:l,scroller:a,list:u,footer:d})},updateScrollerSize:function(){this.scroller.virtualSize(0,this.list.totalHeight()+this.chromeHeight)},refresh:function(){this.list.refresh()},reset:function(){this.buffer.range(0);this.list.refresh()}});var q=f.Class.extend({init:function(e){var t=this;this.listView=e;this.options=e.options;var i=this;this._refreshHandler=function(e){i.refresh(e)};this._progressHandler=function(){e.showLoading()};e.bind("_dataSource",function(e){t.setDataSource(e.dataSource)})},destroy:function(){this._unbindDataSource()},reset:function(){},refresh:function(e){var t=e&&e.action,i=e&&e.items,n=this.listView,r=this.dataSource,a=this.options.appendOnRefresh,o=r.view(),s=r.group(),l=s&&s[0],d;if(t==="itemchange"){if(!n._hasBindingTarget()){d=n.findByDataItem(i)[0];if(d){n.setDataItem(d,i[0])}}return}var u,c,f;var h=t==="add"&&!l||a&&!n._filter;var p=t==="remove"&&!l;if(h){u=[]}else if(p){u=n.findByDataItem(i)}if(n.trigger(y,{action:t||"rebind",items:i,removedItems:u,index:e&&e.index})){if(this._shouldShowLoading()){n.hideLoading()}return}if(t==="add"&&!l){var v=o.indexOf(i[0]);if(v>-1){c=n.insertAt(i,v);f=i}}else if(t==="remove"&&!l){c=[];n.remove(i)}else if(l){n.replaceGrouped(o)}else if(a&&!n._filter){c=n.prepend(o);f=o}else{n.replace(o)}if(this._shouldShowLoading()){n.hideLoading()}n.trigger(k,{ns:m,addedItems:c,addedDataItems:f})},setDataSource:function(e){if(this.dataSource){this._unbindDataSource()}this.dataSource=e;e.bind(S,this._refreshHandler);if(this._shouldShowLoading()){this.dataSource.bind(T,this._progressHandler)}},_unbindDataSource:function(){this.dataSource.unbind(S,this._refreshHandler).unbind(T,this._progressHandler)},_shouldShowLoading:function(){var e=this.options;return!e.pullToRefresh&&!e.loadMore&&!e.endlessScroll}});var $=f.Class.extend({init:function(e){var t=this,i=e.options.filterable,n="change paste",r=this;this.listView=e;this.options=i;e.element.before(_({placeholder:i.placeholder||"Search..."}));if(i.autoFilter!==false){n+=" keyup"}this.element=e.wrapper.find(".km-search-form");this.searchInput=e.wrapper.find("input[type=search]").closest("form").on("submit"+b,function(e){e.preventDefault()}).end().on("focus"+b,function(){t._oldFilter=t.searchInput.val()}).on(n.split(" ").join(b+" ")+b,l(this._filterChange,this));this.clearButton=e.wrapper.find(".km-filter-reset").on(C,l(this,"_clearFilter")).hide();this._dataSourceChange=c.proxy(this._refreshInput,this);e.bind("_dataSource",function(e){e.dataSource.bind("change",r._dataSourceChange)})},_refreshInput:function(){var e=this.listView.dataSource.filter();var t=this.listView._filter.searchInput;if(!e||e.filters[0].field!==this.listView.options.filterable.field){t.val("")}else{t.val(e.filters[0].value)}},_search:function(e){this._filter=true;this.clearButton[e?"show":"hide"]();this.listView.dataSource.filter(e)},_filterChange:function(e){var t=this;if(e.type=="paste"&&this.options.autoFilter!==false){setTimeout(function(){t._applyFilter()},1)}else{this._applyFilter()}},_applyFilter:function(){var e=this.options,t=this.searchInput.val(),i=t.length?{field:e.field,operator:e.operator||"startswith",ignoreCase:e.ignoreCase,value:t}:null;if(t===this._oldFilter){return}this._oldFilter=t;this._search(i)},_clearFilter:function(e){this.searchInput.val("");this._search(null);e.preventDefault()}});var K=a.extend({init:function(e,t){var i=this;a.fn.init.call(this,e,t);e=this.element;t=this.options;if(t.scrollTreshold){t.scrollThreshold=t.scrollTreshold}e.on("down",s,"_highlight").on("move up cancel",s,"_dim");this._userEvents=new f.UserEvents(e,{fastTap:true,filter:o,allowSelection:true,tap:function(e){i._click(e)}});e.css("-ms-touch-action","auto");e.wrap(g);this.wrapper=this.element.parent();this._headerFixer=new O(this);this._itemsCache={};this._templates();this.virtual=t.endlessScroll||t.loadMore;this._style();if(this.options.$angular&&(this.virtual||this.options.pullToRefresh)){setTimeout(c.proxy(this,"_start"))}else{this._start()}},_start:function(){var e=this.options;if(this.options.filterable){this._filter=new $(this)}if(this.virtual){this._itemBinder=new G(this)}else{this._itemBinder=new q(this)}if(this.options.pullToRefresh){this._pullToRefreshHandler=new W(this)}this.setDataSource(e.dataSource);this._enhanceItems(this.items());f.notify(this,m)},events:[C,y,k,x],options:{name:"ListView",style:"",type:"flat",autoBind:true,fixedHeaders:false,template:"#:data#",headerTemplate:'<span class="km-text">#:value#</span>',appendOnRefresh:false,loadMore:false,endlessScroll:false,scrollThreshold:30,pullToRefresh:false,messages:{loadMoreText:"Press to load more",pullTemplate:"Pull to refresh",releaseTemplate:"Release to refresh",refreshTemplate:"Refreshing"},pullOffset:140,filterable:false,virtualViewSize:null},refresh:function(){this._itemBinder.refresh()},reset:function(){this._itemBinder.reset()},setDataSource:function(e){var t=!e;this.dataSource=i.create(e);this.trigger("_dataSource",{dataSource:this.dataSource,empty:t});if(this.options.autoBind&&!t){this.items().remove();this.dataSource.fetch()}},destroy:function(){a.fn.destroy.call(this);f.destroy(this.element);this._userEvents.destroy();if(this._itemBinder){this._itemBinder.destroy()}if(this._headerFixer){this._headerFixer.destroy()}this.element.unwrap();delete this.element;delete this.wrapper;delete this._userEvents},items:function(){if(this.options.type==="group"){return this.element.find(".km-list").children()}else{return this.element.children().not(".km-load-more")}},scroller:function(){if(!this._scrollerInstance){this._scrollerInstance=this.element.closest(".km-scroll-wrapper").data("kendoMobileScroller")}return this._scrollerInstance},showLoading:function(){var e=this.view();if(e&&e.loader){e.loader.show()}},hideLoading:function(){var e=this.view();if(e&&e.loader){e.loader.hide()}},insertAt:function(i,n,r){var a=this;return a._renderItems(i,function(e){if(n===0){a.element.prepend(e)}else if(n===-1){a.element.append(e)}else{a.items().eq(n-1).after(e)}if(r){for(var t=0;t<e.length;t++){a.trigger(x,{item:e.eq(t),data:i[t],ns:m})}}})},append:function(e,t){return this.insertAt(e,-1,t)},prepend:function(e,t){return this.insertAt(e,0,t)},replace:function(e){this.options.type="flat";this._angularItems("cleanup");f.destroy(this.element.children());this.element.empty();this._userEvents.cancel();this._style();return this.insertAt(e,0)},replaceGrouped:function(e){this.options.type="group";this._angularItems("cleanup");this.element.empty();var t=c(f.render(this.groupTemplate,e));this._enhanceItems(t.children("ul").children("li"));this.element.append(t);n.init(t);this._style();this._angularItems("compile")},remove:function(e){var t=this.findByDataItem(e);this.angular("cleanup",function(){return{elements:t}});f.destroy(t);t.remove()},findByDataItem:function(e){var t=[];for(var i=0,n=e.length;i<n;i++){t[i]="[data-"+f.ns+"uid="+e[i].uid+"]"}return this.element.find(t.join(","))},setDataItem:function(i,n){var r=this,e=function(e){var t=c(e[0]);f.destroy(i);r.angular("cleanup",function(){return{elements:[c(i)]}});c(i).replaceWith(t);r.trigger(x,{item:t,data:n,ns:m})};return this._renderItems([n],e)[0]},updateSize:function(){this._size=this.getSize()},_renderItems:function(e,t){var i=c(f.render(this.template,e));t(i);this.angular("compile",function(){return{elements:i,data:e.map(function(e){return{dataItem:e}})}});n.init(i);this._enhanceItems(i);return i},_dim:function(e){this._toggle(e,false)},_highlight:function(e){this._toggle(e,true)},_toggle:function(e,t){if(e.which>1){return}var i=c(e.currentTarget),n=i.parent(),r=d(i,"role")||"",a=!r.match(E),o=e.isDefaultPrevented();if(a){n.toggleClass(h,t&&!o)}},_templates:function(){var e=this.options.template,t=this.options.headerTemplate,i=' data-uid="#=arguments[0].uid || ""#"',n={},r={};if(typeof e===D){n.template=e;e="#=this.template(data)#"}this.template=l(f.template("<li"+i+">"+e+"</li>"),n);r.template=this.template;if(typeof t===D){r._headerTemplate=t;t="#=this._headerTemplate(data)#"}r.headerTemplate=f.template(t);this.groupTemplate=l(v,r)},_click:function(e){if(e.event.which>1||e.event.isDefaultPrevented()){return}var t,i=e.target,n=c(e.event.target),r=n.closest(f.roleSelector("button","detailbutton","backbutton")),a=f.widgetInstance(r,m),o=i.attr(f.attr("uid"));if(o){t=this.dataSource.getByUid(o)}if(this.trigger(C,{target:n,item:i,dataItem:t,button:a})){e.preventDefault()}},_styleGroups:function(){var e=this.element.children();e.children("ul").addClass("km-list");e.each(function(){var e=c(this),t=e.contents().first();e.addClass("km-group-container");if(!t.is("ul")&&!t.is("div."+u)){t.wrap(p)}})},_style:function(){var e=this.options,t=e.type==="group",i=this.element,n=e.style==="inset";i.addClass("km-listview").toggleClass("km-list",!t).toggleClass("km-virtual-list",this.virtual).toggleClass("km-listinset",!t&&n).toggleClass("km-listgroup",t&&!n).toggleClass("km-listgroupinset",t&&n);if(!i.parents(".km-listview")[0]){i.closest(".km-content").toggleClass("km-insetcontent",n)}if(t){this._styleGroups()}this.trigger(w)},_enhanceItems:function(e){e.each(function(){var e=c(this),t,i=false;e.children().each(function(){t=c(this);if(t.is("a")){H(t);i=true}else if(t.is("label")){N(t);i=true}});if(!i){L(e)}})}});m.plugin(K)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.mobile.navbar",["kendo.core"],e)})(function(){var e={id:"mobile.navbar",name:"NavBar",category:"mobile",description:"The Kendo mobile NavBar widget is used inside a mobile View or Layout Header element to display an application navigation bar.",depends:["core"]};(function(n,e){var a=window.kendo,t=a.mobile,i=t.ui,r=i.Widget;function o(e,t){var i=t.find("["+a.attr("align")+"="+e+"]");if(i[0]){return n('<div class="km-'+e+'item" />').append(i).prependTo(t)}}function s(e){var t=e.siblings(),i=!!e.children("ul")[0],n=!!t[0]&&a.trim(e.text())==="",r=!!(a.mobile.application&&a.mobile.application.element.is(".km-android"));e.prevAll().toggleClass("km-absolute",i);e.toggleClass("km-show-title",n);e.toggleClass("km-fill-title",n&&!a.trim(e.html()));e.toggleClass("km-no-title",i);e.toggleClass("km-hide-title",r&&!t.children().is(":visible"))}var l=r.extend({init:function(e,t){var i=this;r.fn.init.call(i,e,t);e=i.element;i.container().bind("show",n.proxy(this,"refresh"));e.addClass("km-navbar").wrapInner(n('<div class="km-view-title km-show-title" />'));i.leftElement=o("left",e);i.rightElement=o("right",e);i.centerElement=e.find(".km-view-title")},options:{name:"NavBar"},title:function(e){this.element.find(a.roleSelector("view-title")).text(e);s(this.centerElement)},refresh:function(e){var t=e.view;this.title(t.options.title)},destroy:function(){r.fn.destroy.call(this);a.destroy(this.element)}});i.plugin(l)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.mobile.scrollview",["kendo.fx","kendo.data","kendo.draganddrop"],e)})(function(){var e={id:"mobile.scrollview",name:"ScrollView",category:"mobile",description:"The Kendo Mobile ScrollView widget is used to scroll content wider than the device screen.",depends:["fx","data","draganddrop"]};(function(d,r){var h=window.kendo,e=h.mobile,t=e.ui,o=d.proxy,c=h.effects.Transition,u=h.ui.Pane,f=h.ui.PaneDimensions,s=t.DataBoundWidget,i=h.data.DataSource,n=h.data.Buffer,B=h.data.BatchBuffer,a=Math,p=a.abs,v=a.ceil,m=a.round,L=a.max,H=a.min,g=a.floor,_="change",l="changing",b="refresh",w="current-page",k="virtual-page",y="function",x="itemChange",C="cleanup",N=3,O=-1,V=0,W=1,S=-1,U=0,T=1;function D(e){return"k-"+e+" km-"+e}var A=h.Class.extend({init:function(e){var t=this,i=d("<ol class='"+D("pages")+"'/>");e.element.append(i);this._changeProxy=o(t,"_change");this._refreshProxy=o(t,"_refresh");e.bind(_,this._changeProxy);e.bind(b,this._refreshProxy);d.extend(t,{element:i,scrollView:e})},items:function(){return this.element.children()},_refresh:function(e){var t="";for(var i=0;i<e.pageCount;i++){t+="<li></li>"}this.element.html(t);this.items().eq(e.page).addClass(D(w))},_change:function(e){this.items().removeClass(D(w)).eq(e.page).addClass(D(w))},destroy:function(){this.scrollView.unbind(_,this._changeProxy);this.scrollView.unbind(b,this._refreshProxy);this.element.remove()}});h.mobile.ui.ScrollViewPager=A;var E="transitionEnd",I="dragStart",M="dragEnd";var R=h.Observable.extend({init:function(e,t){var i=this;h.Observable.fn.init.call(this);this.element=e;this.container=e.parent();var n,r,a,o,s,l;n=new h.ui.Movable(i.element);r=new c({axis:"x",movable:n,onEnd:function(){i.trigger(E)}});a=new h.UserEvents(e,{fastTap:true,start:function(e){if(p(e.x.velocity)*2>=p(e.y.velocity)){a.capture()}else{a.cancel()}i.trigger(I,e);r.cancel()},allowSelection:true,end:function(e){i.trigger(M,e)}});o=new f({element:i.element,container:i.container});s=o.x;s.bind(_,function(){i.trigger(_)});l=new u({dimensions:o,userEvents:a,movable:n,elastic:true});d.extend(i,{duration:t&&t.duration||1,movable:n,transition:r,userEvents:a,dimensions:o,dimension:s,pane:l});this.bind([E,I,M,_],t)},size:function(){return{width:this.dimensions.x.getSize(),height:this.dimensions.y.getSize()}},total:function(){return this.dimension.getTotal()},offset:function(){return-this.movable.x},updateDimension:function(){this.dimension.update(true)},refresh:function(){this.dimensions.refresh()},moveTo:function(e){this.movable.moveAxis("x",-e)},transitionTo:function(e,t,i){if(i){this.moveTo(-e)}else{this.transition.moveTo({location:e,duration:this.duration,ease:t})}}});h.mobile.ui.ScrollViewElasticPane=R;var F=h.Observable.extend({init:function(e,t,i){var n=this;h.Observable.fn.init.call(this);n.element=e;n.pane=t;n._getPages();this.page=0;this.pageSize=i.pageSize||1;this.contentHeight=i.contentHeight;this.enablePager=i.enablePager;this.pagerOverlay=i.pagerOverlay},scrollTo:function(e,t){this.page=e;this.pane.transitionTo(-e*this.pane.size().width,c.easeOutExpo,t)},paneMoved:function(e,t,i,n){var r=this,a=r.pane,o=a.size().width*r.pageSize,s=m,l=t?c.easeOutBack:c.easeOutExpo,d,u;if(e===S){s=v}else if(e===T){s=g}u=s(a.offset()/o);d=L(r.minSnap,H(-u*o,r.maxSnap));if(u!=r.page){if(i&&i({currentPage:r.page,nextPage:u})){d=-r.page*a.size().width}}a.transitionTo(d,l,n)},updatePage:function(){var e=this.pane,t=m(e.offset()/e.size().width);if(t!=this.page){this.page=t;return true}return false},forcePageUpdate:function(){return this.updatePage()},resizeTo:function(e){var t=this.pane,i=e.width;this.pageElements.width(i);if(this.contentHeight==="100%"){var n=this.element.parent().height();if(this.enablePager===true){var r=this.element.parent().find("ol.km-pages");if(!this.pagerOverlay&&r.length){n-=h._outerHeight(r,true)}}this.element.css("height",n);this.pageElements.css("height",n)}t.updateDimension();if(!this._paged){this.page=g(t.offset()/i)}this.scrollTo(this.page,true);this.pageCount=v(t.total()/i);this.minSnap=-(this.pageCount-1)*i;this.maxSnap=0},_getPages:function(){this.pageElements=this.element.find(h.roleSelector("page"));this._paged=this.pageElements.length>0}});h.mobile.ui.ScrollViewContent=F;var P=h.Observable.extend({init:function(e,t,i){var n=this;h.Observable.fn.init.call(this);n.element=e;n.pane=t;n.options=i;n._templates();n.page=i.page||0;n.pages=[];n._initPages();n.resizeTo(n.pane.size());n.pane.dimension.forceEnabled()},setDataSource:function(e){this.dataSource=i.create(e);this._buffer();this._pendingPageRefresh=false;this._pendingWidgetRefresh=false},_viewShow:function(){var e=this;if(e._pendingWidgetRefresh){setTimeout(function(){e._resetPages()},0);e._pendingWidgetRefresh=false}},_buffer:function(){var e=this.options.itemsPerPage;if(this.buffer){this.buffer.destroy()}if(e>1){this.buffer=new B(this.dataSource,e)}else{this.buffer=new n(this.dataSource,e*3)}this._resizeProxy=o(this,"_onResize");this._resetProxy=o(this,"_onReset");this._endReachedProxy=o(this,"_onEndReached");this.buffer.bind({resize:this._resizeProxy,reset:this._resetProxy,endreached:this._endReachedProxy})},_templates:function(){var e=this.options.template,t=this.options.emptyTemplate,i={},n={};if(typeof e===y){i.template=e;e="#=this.template(data)#"}this.template=o(h.template(e),i);if(typeof t===y){n.emptyTemplate=t;t="#=this.emptyTemplate(data)#"}this.emptyTemplate=o(h.template(t),n)},_initPages:function(){var e=this.pages,t=this.element,i;for(var n=0;n<N;n++){i=new z(t);e.push(i)}this.pane.updateDimension()},resizeTo:function(e){var t=this.pages,i=this.pane;for(var n=0;n<t.length;n++){t[n].setWidth(e.width)}if(this.options.contentHeight==="auto"){this.element.css("height",this.pages[1].element.height())}else if(this.options.contentHeight==="100%"){var r=this.element.parent().height();if(this.options.enablePager===true){var a=this.element.parent().find("ol.km-pages");if(!this.options.pagerOverlay&&a.length){r-=h._outerHeight(a,true)}}this.element.css("height",r);t[0].element.css("height",r);t[1].element.css("height",r);t[2].element.css("height",r)}i.updateDimension();this._repositionPages();this.width=e.width},scrollTo:function(e){var t=this.buffer,i;t.syncDataSource();i=t.at(e);if(!i){return}this._updatePagesContent(e);this.page=e},paneMoved:function(e,t,i,n){var r=this,a=r.pane,o=a.size().width,s=a.offset(),l=Math.abs(s)>=o/3,d=t?h.effects.Transition.easeOutBack:h.effects.Transition.easeOutExpo,u=r.page+2>r.buffer.total(),c,f=0;if(e===T){if(r.page!==0){f=-1}}else if(e===S&&!u){f=1}else if(s>0&&(l&&!u)){f=1}else if(s<0&&l){if(r.page!==0){f=-1}}c=r.page;if(f){c=f>0?c+1:c-1}if(i&&i({currentPage:r.page,nextPage:c})){f=0}if(f===0){r._cancelMove(d,n)}else if(f===-1){r._moveBackward(n)}else if(f===1){r._moveForward(n)}},updatePage:function(){var e=this.pages;if(this.pane.offset()===0){return false}if(this.pane.offset()>0){e.push(this.pages.shift());this.page++;this.setPageContent(e[2],this.page+1)}else{e.unshift(this.pages.pop());this.page--;this.setPageContent(e[0],this.page-1)}this._repositionPages();this._resetMovable();return true},forcePageUpdate:function(){var e=this.pane.offset(),t=this.pane.size().width*3/4;if(p(e)>t){return this.updatePage()}return false},_resetMovable:function(){this.pane.moveTo(0)},_moveForward:function(e){this.pane.transitionTo(-this.width,h.effects.Transition.easeOutExpo,e)},_moveBackward:function(e){this.pane.transitionTo(this.width,h.effects.Transition.easeOutExpo,e)},_cancelMove:function(e,t){this.pane.transitionTo(0,e,t)},_resetPages:function(){this.page=this.options.page||0;this._updatePagesContent(this.page);this._repositionPages();this.trigger("reset")},_onResize:function(){this.pageCount=v(this.dataSource.total()/this.options.itemsPerPage);if(this._pendingPageRefresh){this._updatePagesContent(this.page);this._pendingPageRefresh=false}this.trigger("resize")},_onReset:function(){this.pageCount=v(this.dataSource.total()/this.options.itemsPerPage);this._resetPages()},_onEndReached:function(){this._pendingPageRefresh=true},_repositionPages:function(){var e=this.pages;e[0].position(O);e[1].position(V);e[2].position(W)},_updatePagesContent:function(e){var t=this.pages,i=e||0;this.setPageContent(t[0],i-1);this.setPageContent(t[1],i);this.setPageContent(t[2],i+1)},setPageContent:function(e,t){var i=this.buffer,n=this.template,r=this.emptyTemplate,a=null;if(t>=0){a=i.at(t);if(d.isArray(a)&&!a.length){a=null}}this.trigger(C,{item:e.element});if(a!==null){e.content(n(a))}else{e.content(r({}))}h.mobile.init(e.element);this.trigger(x,{item:e.element,data:a,ns:h.mobile.ui})}});h.mobile.ui.VirtualScrollViewContent=P;var z=h.Class.extend({init:function(e){this.element=d("<div class='"+D(k)+"'></div>");this.width=e.width();this.element.width(this.width);e.append(this.element)},content:function(e){this.element.html(e)},position:function(e){this.element.css("transform","translate3d("+this.width*e+"px, 0, 0)")},setWidth:function(e){this.width=e;this.element.width(e)}});h.mobile.ui.VirtualPage=z;var j=s.extend({init:function(e,t){var i=this;s.fn.init.call(i,e,t);t=i.options;e=i.element;h.stripWhitespace(e[0]);e.wrapInner("<div/>").addClass("k-widget k-widget-2021 "+D("scrollview"));if(this.options.enablePager){this.pager=new A(this);if(this.options.pagerOverlay){e.addClass(D("scrollview-overlay"))}}i.inner=e.children().first();i.page=0;i.inner.css("height",t.contentHeight);i.pane=new R(i.inner,{duration:this.options.duration,transitionEnd:o(this,"_transitionEnd"),dragStart:o(this,"_dragStart"),dragEnd:o(this,"_dragEnd"),change:o(this,b)});i.bind("resize",function(){i.pane.refresh()});i.page=t.page;var n=this.inner.children().length===0;var r=n?new P(i.inner,i.pane,t):new F(i.inner,i.pane,t);r.page=i.page;r.bind("reset",function(){this._pendingPageRefresh=false;i._syncWithContent();i.trigger(b,{pageCount:r.pageCount,page:r.page})});r.bind("resize",function(){i.trigger(b,{pageCount:r.pageCount,page:r.page})});r.bind(x,function(e){i.trigger(x,e);i.angular("compile",function(){return{elements:e.item,data:[{dataItem:e.data}]}})});r.bind(C,function(e){i.angular("cleanup",function(){return{elements:e.item}})});i._content=r;i.setDataSource(t.dataSource);var a=i.container();if(a.nullObject){i.viewInit();i.viewShow()}else{a.bind("show",o(this,"viewShow")).bind("init",o(this,"viewInit"))}},options:{name:"ScrollView",page:0,duration:400,velocityThreshold:.8,contentHeight:"auto",pageSize:1,itemsPerPage:1,bounceVelocityThreshold:1.6,enablePager:true,pagerOverlay:false,autoBind:true,template:"",emptyTemplate:""},events:[l,_,b],destroy:function(){s.fn.destroy.call(this);h.destroy(this.element)},viewInit:function(){if(this.options.autoBind){this._content.scrollTo(this._content.page,true)}},viewShow:function(){this.pane.refresh()},refresh:function(){var e=this._content;e.resizeTo(this.pane.size());this.page=e.page;this.trigger(b,{pageCount:e.pageCount,page:e.page})},content:function(e){this.element.children().first().html(e);this._content._getPages();this.pane.refresh()},value:function(e){var t=this.dataSource;if(e){this.scrollTo(t.indexOf(e),true)}else{return t.at(this.page)}},scrollTo:function(e,t){this._content.scrollTo(e,t);this._syncWithContent()},prev:function(){var t=this,e=t.page-1;if(t._content instanceof P){t._content.paneMoved(T,r,function(e){return t.trigger(l,e)})}else if(e>-1){t.scrollTo(e)}},next:function(){var t=this,e=t.page+1;if(t._content instanceof P){t._content.paneMoved(S,r,function(e){return t.trigger(l,e)})}else if(e<t._content.pageCount){t.scrollTo(e)}},setDataSource:function(e){if(!(this._content instanceof P)){return}var t=!e;this.dataSource=i.create(e);this._content.setDataSource(this.dataSource);if(this.options.autoBind&&!t){this.dataSource.fetch()}},items:function(){return this.element.find(".km-"+k)},_syncWithContent:function(){var e=this._content.pages,t=this._content.buffer,i,n;this.page=this._content.page;i=t?t.at(this.page):r;if(!(i instanceof Array)){i=[i]}n=e?e[1].element:r;this.trigger(_,{page:this.page,element:n,data:i})},_dragStart:function(){if(this._content.forcePageUpdate()){this._syncWithContent()}},_dragEnd:function(e){var t=this,i=e.x.velocity,n=this.options.velocityThreshold,r=U,a=p(i)>this.options.bounceVelocityThreshold;if(i>n){r=T}else if(i<-n){r=S}this._content.paneMoved(r,a,function(e){return t.trigger(l,e)})},_transitionEnd:function(){if(this._content.updatePage()){this._syncWithContent()}}});t.plugin(j)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.mobile.switch",["kendo.fx","kendo.userevents"],e)})(function(){var e={id:"mobile.switch",name:"Switch",category:"mobile",description:"The mobile Switch widget is used to display two exclusive choices.",depends:["fx","userevents"]};(function(r,n){var s=window.kendo,e=s.mobile.ui,i=s._outerWidth,a=e.Widget,t=s.support,l="change",d="switch-on",u="switch-off",o="margin-left",c="state-active",f="state-disabled",h="disabled",p=t.transitions.css===n?"":t.transitions.css,v=p+"transform",m=r.proxy;function g(e){return"km-"+e}function _(e,t,i){return Math.max(t,Math.min(i,e))}var b='<span class="'+g("switch")+" "+g("widget")+'">        <span class="'+g("switch-wrapper")+'">            <span class="'+g("switch-background")+'"></span>        </span>         <span class="'+g("switch-container")+'">            <span class="'+g("switch-handle")+'">                 <span class="'+g("switch-label-on")+'">{0}</span>                 <span class="'+g("switch-label-off")+'">{1}</span>             </span>         </span>    </span>';var w=a.extend({init:function(e,t){var i=this,n;a.fn.init.call(i,e,t);t=i.options;i.wrapper=r(s.format(b,t.onLabel,t.offLabel));i.handle=i.wrapper.find(".km-switch-handle");i.background=i.wrapper.find(".km-switch-background");i.wrapper.insertBefore(i.element).prepend(i.element);i._drag();i.origin=parseInt(i.background.css(o),10);i.constrain=0;i.snapPoint=0;e=i.element[0];e.type="checkbox";i._animateBackground=true;n=i.options.checked;if(n===null){n=e.checked}i.check(n);i.options.enable=i.options.enable&&!i.element.attr(h);i.enable(i.options.enable);i.refresh();s.notify(i,s.mobile.ui)},refresh:function(){var e=this,t=i(e.handle,true);e.width=e.wrapper.width();e.constrain=e.width-t;e.snapPoint=e.constrain/2;if(typeof e.origin!="number"){e.origin=parseInt(e.background.css(o),10)}e.background.data("origin",e.origin);e.check(e.element[0].checked)},events:[l],options:{name:"Switch",onLabel:"on",offLabel:"off",checked:null,enable:true},check:function(e){var t=this,i=t.element[0];if(e===n){return i.checked}t._position(e?t.constrain:0);i.checked=e;t.wrapper.toggleClass(g(d),e).toggleClass(g(u),!e)},value:function(){return this.check.apply(this,arguments)},destroy:function(){a.fn.destroy.call(this);this.userEvents.destroy()},toggle:function(){var e=this;e.check(!e.element[0].checked)},enable:function(e){var t=this.element,i=this.wrapper;if(typeof e=="undefined"){e=true}this.options.enable=e;if(e){t.removeAttr(h)}else{t.attr(h,h)}i.toggleClass(g(f),!e)},_resize:function(){this.refresh()},_move:function(e){var t=this;e.preventDefault();t._position(_(t.position+e.x.delta,0,t.width-i(t.handle,true)))},_position:function(e){var t=this;t.position=e;t.handle.css(v,"translatex("+e+"px)");if(t._animateBackground){t.background.css(o,t.origin+e)}},_start:function(){if(!this.options.enable){this.userEvents.cancel()}else{this.userEvents.capture();this.handle.addClass(g(c))}},_stop:function(){var e=this;e.handle.removeClass(g(c));e._toggle(e.position>e.snapPoint)},_toggle:function(e){var t=this,i=t.handle,n=t.element[0],r=n.checked,a=s.mobile.application&&s.mobile.application.os.wp?100:200,o;t.wrapper.toggleClass(g(d),e).toggleClass(g(u),!e);t.position=o=e*t.constrain;if(t._animateBackground){t.background.kendoStop(true,true).kendoAnimate({effects:"slideMargin",offset:o,reset:true,reverse:!e,axis:"left",duration:a})}i.kendoStop(true,true).kendoAnimate({effects:"slideTo",duration:a,offset:o+"px,0",reset:true,complete:function(){if(r!==e){n.checked=e;t.trigger(l,{checked:e})}}})},_drag:function(){var e=this;e.userEvents=new s.UserEvents(e.wrapper,{fastTap:true,tap:function(){if(e.options.enable){e._toggle(!e.element[0].checked)}},start:m(e._start,e),move:m(e._move,e),end:m(e._stop,e)})}});e.plugin(w)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.mobile.tabstrip",["kendo.core"],e)})(function(){var e={id:"mobile.tabstrip",name:"TabStrip",category:"mobile",description:"The mobile TabStrip widget is used inside a mobile view or layout footer element to display an application-wide group of navigation buttons.",depends:["core"]};(function(o,e){var a=window.kendo,t=a.mobile.ui,n=t.Widget,r="km-state-active",s="select";function l(e){return o('<span class="km-badge">'+e+"</span>")}var i=n.extend({init:function(e,t){var i=this;n.fn.init.call(i,e,t);i.container().bind("show",o.proxy(this,"refresh"));i.element.addClass("km-tabstrip").find("a").each(i._buildButton).eq(i.options.selectedIndex).addClass(r);i.element.on("down","a","_release")},events:[s],switchTo:function(e){var t=this.element.find("a"),i,n,r=0,a=t.length;if(isNaN(e)){for(;r<a;r++){i=t[r];n=i.href.replace(/(\#.+)(\?.+)$/,"$1");if(n.indexOf(e,n.length-e.length)!==-1){this._setActiveItem(o(i));return true}}}else{this._setActiveItem(t.eq(e));return true}return false},switchByFullUrl:function(e){var t;t=this.element.find("a[href$='"+e+"']");this._setActiveItem(t)},clear:function(){this.currentItem().removeClass(r)},currentItem:function(){return this.element.children("."+r)},badge:function(e,t){var i=this.element,n;if(!isNaN(e)){e=i.children().get(e)}e=i.find(e);n=o(e.find(".km-badge")[0]||l(t).insertAfter(e.children(".km-icon")));if(t||t===0){n.html(t);return this}if(t===false){n.empty().remove();return this}return n.html()},_release:function(e){if(e.which>1){return}var t=this,i=o(e.currentTarget);if(i[0]===t.currentItem()[0]){return}if(t.trigger(s,{item:i})){e.preventDefault()}else{t._setActiveItem(i)}},_setActiveItem:function(e){if(!e[0]){return}this.clear();e.addClass(r)},_buildButton:function(){var e=o(this),t=a.attrValue(e,"icon"),i=a.attrValue(e,"badge"),n=e.find("img"),r=o('<span class="km-icon"/>');e.addClass("km-button").attr(a.attr("role"),"tab").contents().not(n).wrapAll('<span class="km-text"/>');if(n[0]){n.addClass("km-image").prependTo(e)}else{e.prepend(r);if(t){r.addClass("km-"+t);if(i||i===0){l(i).insertAfter(r)}}}},refresh:function(e){var t=e.view.id;if(t&&!this.switchTo(e.view.id)){this.switchTo(t)}},options:{name:"TabStrip",selectedIndex:0,enable:true}});t.plugin(i)})(window.kendo.jQuery);return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.mobile",["kendo.core","kendo.fx","kendo.data.odata","kendo.data.xml","kendo.data","kendo.data.signalr","kendo.binder","kendo.validator","kendo.router","kendo.view","kendo.userevents","kendo.draganddrop","kendo.popup","kendo.touch","kendo.mobile.popover","kendo.mobile.loader","kendo.mobile.scroller","kendo.mobile.shim","kendo.mobile.view","kendo.mobile.modalview","kendo.mobile.drawer","kendo.mobile.splitview","kendo.mobile.pane","kendo.mobile.application","kendo.mobile.actionsheet","kendo.mobile.button","kendo.mobile.buttongroup","kendo.mobile.collapsible","kendo.mobile.listview","kendo.mobile.navbar","kendo.mobile.scrollview","kendo.mobile.switch","kendo.mobile.tabstrip","kendo.angular"],e)})(function(){"bundle all";return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});(function(e,t){t("kendo.all",["kendo.web","kendo.dataviz","kendo.mobile","kendo.drawing","kendo.dom"],e)})(function(){"bundle all";return window.kendo},typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()});